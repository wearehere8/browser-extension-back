{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"Local YouTube Downloader","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["https://*.youtube.com/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null,"orig_connects":["googlevideo.com"]}},"storage":{"data":{},"ts":1587235898460},"enabled":true,"position":1,"file_url":"https://greasyfork.org/scripts/369400-local-youtube-downloader/code/Local%20YouTube%20Downloader.user.js","uuid":"e3f81ad1-d0d4-4595-b692-a317b6376a73","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBMb2NhbCBZb3VUdWJlIERvd25sb2FkZXIKLy8gQG5hbWU6emgtVFcgICDmnKzlnLAgWW91VHViZSDkuIvovInlmagKLy8gQG5hbWU6emgtSEsgICDmnKzlnLAgWW91VHViZSDkuIvovInlmagKLy8gQG5hbWU6emgtQ04gICDmnKzlnLAgWW91VHViZSDkuIvovb3lmagKLy8gQG5hbWU6amEgICAgICDjg63jg7zjgqvjg6sgWW91VHViZSDjg4Djgqbjg7Pjg63jg7zjg4Djg7wKLy8gQG5hbWU6a3IgICAgICDroZzsu6wgWW91VHViZSDri6TsmrTroZzrjZQKLy8gQG5hbWVzcGFjZSAgICBodHRwczovL2Jsb2cubWFwbGUzMTQyLm5ldC8KLy8gQHZlcnNpb24gICAgICAwLjkuMzIKLy8gQGRlc2NyaXB0aW9uICAgICAgICBEb3dubG9hZCBZb3VUdWJlIHZpZGVvcyB3aXRob3V0IGV4dGVybmFsIHNlcnZpY2UuCi8vIEBkZXNjcmlwdGlvbjp6aC1UVyAg5LiN6ZyA6YCP6YGO56ys5LiJ5pa55pyN5YuZ5Y2z5Y+v5LiL6LyJIFlvdVR1YmUg5b2x54mH44CCCi8vIEBkZXNjcmlwdGlvbjp6aC1ISyAg5LiN6ZyA6YCP6YGO56ys5LiJ5pa55pyN5YuZ5Y2z5Y+v5LiL6LyJIFlvdVR1YmUg5b2x54mH44CCCi8vIEBkZXNjcmlwdGlvbjp6aC1DTiAg5LiN6ZyA6KaB6YCP6L+H56ys5LiJ5pa555qE5pyN5Yqh5bCx6IO95LiL6L29IFlvdVR1YmUg6KeG6aKR44CCCi8vIEBkZXNjcmlwdGlvbjpqYSAgICAg5aSW6YOo44K144O844OT44K544Gq44GX44GnIFlvdVR1YmUg5YuV55S744KS44OA44Km44Oz44Ot44O844OJCi8vIEBkZXNjcmlwdGlvbjprciAgICAg7Jm467aAIOyEnOu5hOyKpOyXhuydtCBZb3VUdWJlIOuPmeyYgeyDgeydhCDri6TsmrTroZzrk5wKLy8gQGRlc2NyaXB0aW9uOmZyICAgICBPYnRlbmV6IHVuIGxpZW4gYnJ1dCBZb3VUdWJlIHNhbnMgc2VydmljZSBleHRlcm5lLgovLyBAYXV0aG9yICAgICAgIG1hcGxlMzE0MgovLyBAbWF0Y2ggICAgICAgIGh0dHBzOi8vKi55b3V0dWJlLmNvbS8qCi8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly91bnBrZy5jb20vdnVlQDIuNi4xMC9kaXN0L3Z1ZS5qcwovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vdW5wa2cuY29tL3hmZXRjaC1qc0AwLjMuNC94ZmV0Y2gubWluLmpzCi8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly91bnBrZy5jb20vQGZmbXBlZy9mZm1wZWdAMC42LjEvZGlzdC9mZm1wZWcubWluLmpzCi8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly9idW5kbGUucnVuL3AtcXVldWVANi4zLjAKLy8gQGdyYW50ICAgICAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAY29ubmVjdCAgICAgIGdvb2dsZXZpZGVvLmNvbQovLyBAY29tcGF0aWJsZSAgIGZpcmVmb3ggPj01MgovLyBAY29tcGF0aWJsZSAgIGNocm9tZSA+PTU1Ci8vIEBsaWNlbnNlICAgICAgTUlUCi8vID09L1VzZXJTY3JpcHQ9PQoKOyhmdW5jdGlvbiAoKSB7CgkndXNlIHN0cmljdCcKCWNvbnN0IERFQlVHID0gdHJ1ZQoJY29uc3QgUkVTVE9SRV9PUklHSU5BTF9USVRMRV9GT1JfQ1VSUkVOVF9WSURFTyA9IHRydWUKCWNvbnN0IGNyZWF0ZUxvZ2dlciA9IChjb25zb2xlLCB0YWcpID0+CgkJT2JqZWN0LmtleXMoY29uc29sZSkKCQkJLm1hcChrID0+IFsKCQkJCWssCgkJCQkoLi4uYXJncykgPT4KCQkJCQlERUJVRwoJCQkJCQk/IGNvbnNvbGVba10odGFnICsgJzogJyArIGFyZ3NbMF0sIC4uLmFyZ3Muc2xpY2UoMSkpCgkJCQkJCTogdm9pZCAwCgkJCV0pCgkJCS5yZWR1Y2UoKGFjYywgW2ssIGZuXSkgPT4gKChhY2Nba10gPSBmbiksIGFjYyksIHt9KQoJY29uc3QgbG9nZ2VyID0gY3JlYXRlTG9nZ2VyKGNvbnNvbGUsICdZVERMJykKCWNvbnN0IHNsZWVwID0gbXMgPT4gbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCBtcykpCgoJY29uc3QgTEFOR19GQUxMQkFDSyA9ICdlbicKCWNvbnN0IExPQ0FMRSA9IHsKCQllbjogewoJCQl0b2dnbGVsaW5rczogJ1Nob3cvSGlkZSBMaW5rcycsCgkJCXN0cmVhbTogJ1N0cmVhbScsCgkJCWFkYXB0aXZlOiAnQWRhcHRpdmUnLAoJCQl2aWRlb2lkOiAnVmlkZW8gSUQ6ICcsCgkJCWluYnJvd3Nlcl9hZGFwdGl2ZV9tZXJnZXI6CgkJCQknT25saW5lIEFkYXB0aXZlIFZpZGVvICYgQXVkaW8gTWVyZ2VyIChGRm1wZWcpJywKCQkJZGxtcDQ6ICdEb3dubG9hZCBoaWdoLXJlc29sdXRpb24gbXA0IGluIG9uZSBjbGljaycsCgkJCWdldF92aWRlb19mYWlsZWQ6CgkJCQknWW91IHNlZW1zIHRvIGhhdmUgYWQtYmxvY2tpbmcgZXh0ZW5zaW9uIGluc3RhbGxlZCwgd2hpY2ggYmxvY2tzICVzLlxuUGxlYXNlIGFkZCB0aGUgZm9sbG93aW5nIHJ1bGUgdG8gdGhlIHJ1bGUgc2V0LCBvciBpdCB3aWxsIHByZXZlbnQgTG9jYWwgWW91VHViZSBEb3dubG9hZGVyIGZyb20gd29ya2luZy5cblxuUC5TLjogSWYgYWRkaW5nIG9mIHRoZSBydWxlIGlzIGJlaW5nIHJlZnVzZWQsIHlvdSBzaG91bGQgdW5pbnN0YWxsIGl0IGFuZCB1c2Ug4oCcdUJsb2NrIE9yaWdpbuKAnSBpbnN0ZWFkLlxuSWYgeW91IHN0aWxsIGRvbuKAmXQgdW5kZXJzdGFuZCB3aGF0IEkgYW0gc2F5aW5nLCBqdXN0IGRpc2FibGUgb3IgdW5pbnN0YWxsIGFsbCB5b3VyIGFkLWJsb2NrZXJzLi4uJywKCQkJbGl2ZV9zdHJlYW1fZGlzYWJsZWRfbWVzc2FnZToKCQkJCSdMb2NhbCBZb3VUdWJlIERvd25sb2FkZXIgaXMgbm90IGF2YWlsYWJsZSBmb3IgbGl2ZSBzdHJlYW0nCgkJfSwKCQknemgtdHcnOiB7CgkJCXRvZ2dsZWxpbmtzOiAn6aGv56S6IC8g6Zqx6JeP6YCj57WQJywKCQkJc3RyZWFtOiAn5Liy5rWBIFN0cmVhbScsCgkJCWFkYXB0aXZlOiAn6Ieq6YGp5oeJIEFkYXB0aXZlJywKCQkJdmlkZW9pZDogJ+W9seeJhyBJRDogJywKCQkJaW5icm93c2VyX2FkYXB0aXZlX21lcmdlcjogJ+e3muS4iuiHqumBqeaHieW9seeJh+WPiumfs+ioiuWQiOaIkOW3peWFtyAoRkZtcGVnKScsCgkJCWRsbXA0OiAn5LiA6Y215LiL6LyJ6auY55Wr6LOqIG1wNCcsCgkJCWdldF92aWRlb19mYWlsZWQ6CgkJCQkn55yL5L6G5oKo55So55qE5pOL5buj5ZGK5pO05YWF5Yqf6IO95oqKICVzIOe1pumYu+aTi+S6huOAglxu6KuL5bCH5LiL5pa555qE6KaP5YmH5Yqg5YWl5oKo55qE5buj5ZGK6Zi75pOL5Zmo5Lit77yM5ZCm5YmH5pys5ZywIFlvdVR1YmUg5LiL6LyJ5Zmo54Sh5rOV5q2j5bi46YGL5L2c44CCXG5cblBTOiDlpoLlroPmi5LntZXliqDlhaXoqbLopo/liYfvvIzoq4vlsIflroPnp7vpmaTkuKbmlLnngrrkvb/nlKggInVCbG9jayBPcmlnaW4i44CCXG7oi6Xmgqjku43mnKrog73nkIbop6PliY3pnaLnmoTmjIfnpLrmmK/ku4DpurzmhI/mgJ3vvIzpgqPoq4vnm7TmjqXlsIflhajpg6jnmoTlu6PlkYrpmLvmk4vlmajlgZznlKjmiJbmmK/np7vpmaTjgIInLAoJCQlsaXZlX3N0cmVhbV9kaXNhYmxlZF9tZXNzYWdlOgoJCQkJJ+WboOeCuuaYr+ebtOaSreeahOe3o+aVhe+8jOacrOWcsCBZb3VUdWJlIOS4i+i8ieWZqOeahOWKn+iDveaYr+WBnOeUqOeahOOAgicKCQl9LAoJCSd6aC1oayc6IHsKCQkJdG9nZ2xlbGlua3M6ICfpoa/npLrvvI/pmrHol4/pgKPntZAnLAoJCQlzdHJlYW06ICfkuLLmtYEgU3RyZWFtJywKCQkJYWRhcHRpdmU6ICfoh6rli5Xpganmh4kgQWRhcHRpdmUnLAoJCQl2aWRlb2lkOiAn5b2x54mHIElEOiAnLAoJCQlpbmJyb3dzZXJfYWRhcHRpdmVfbWVyZ2VyOgoJCQkJJ+e2suS4iuiHquWLlemBqeaHieW9seeJh+WPiumfs+ioiuWQiOaIkOW3peWFtyAoRkZtcGVnKScsCgkJCWRsbXA0OiAn5LiA4oCJY2xpY2vigInkuIvovInpq5jnlavos6ogbXA0JywKCQkJZ2V0X3ZpZGVvX2ZhaWxlZDoKCQkJCSfnnIvkvobmgqjkvb/nlKjnmoTlu6PlkYrlsIHpjpbmk7TlhYXlip/og73lsIHpjpbkuoYgJXPjgIJcbuiri+Wwh+S4i+mdoueahOimj+WJh+WKoOWFpeaCqOeahOW7o+WRiuWwgemOluWZqOS4re+8jOWQpuWJh+acrOWcsCBZb3VUdWJlIOS4i+i8ieWZqOWwh+eEoeazleato+W4uOmBi+S9nOOAglxuXG5QLlMuOiDlpoLmnpzopo/liYfooqvmi5LntZXliqDlhaXvvIzoq4vlsIflu6PlkYrlsIHpjpblmajop6PpmaTlronoo53kuKbmlLnngrrkvb/nlKjjgIx1QmxvY2sgT3JpZ2lu44CN44CCXG7lpoLmnpzmgqjku43nhLblsI3mraTkuIDpoK3pnKfmsLTvvIzoq4vnm7TmjqXlgZznlKjmiJbogIXop6PpmaTlronoo53miYDmnInlu6PlkYrlsIHpjpblmajjgIInLAoJCQlsaXZlX3N0cmVhbV9kaXNhYmxlZF9tZXNzYWdlOiAn5pys5ZywIFlvdVR1YmUg5LiL6LyJ5Zmo54Sh5rOV55So5pa855u05pKt44CCJwoJCX0sCgkJemg6IHsKCQkJdG9nZ2xlbGlua3M6ICfmmL7npLrvvI/pmpDol4/pk77mjqUnLAoJCQlzdHJlYW06ICfkuLLmtYEgU3RyZWFtJywKCQkJYWRhcHRpdmU6ICfoh6rpgILlupQgQWRhcHRpdmUnLAoJCQl2aWRlb2lkOiAn6KeG6aKRIElEOiAnLAoJCQlpbmJyb3dzZXJfYWRhcHRpdmVfbWVyZ2VyOiAn57q/5LiK6Ieq6YCC5bqU6KeG6aKR5Y+K6Z+z6aKR5ZCI5oiQ5bel5YW3IChGRm1wZWcpJywKCQkJZGxtcDQ6ICfkuIDplK7kuIvovb3pq5jnlLvotKggbXA0JywKCQkJZ2V0X3ZpZGVvX2ZhaWxlZDoKCQkJCSfmgqjnnIvotbfmnaXmnInlnKjkvb/nlKjlub/lkYrmi6bmiKrmianlhYXlip/og73vvIzogIzlroPlsIYgJXMg57uZ5oum5oiq5LqG44CCXG7or7flsIbkuIvmlrnnmoTop4TliJnliqDlhaXkvaDnmoTlub/lkYrmi6bmiKrlmajkuK3vvIzlkKbliJnmnKzlnLAgWW91VHViZSDkuIvovb3lmajml6Dms5XmraPluLjov5DkvZzjgIJcblxuUC5TLjog5aaC6KeE5YiZ6KKr5ouS57ud5Yqg5YWl77yM6K+35bCG5a6D5Y246L295bm25pS55Li65L2/55So4oCcdUJsb2NrIE9yaWdpbuKAneOAglxu5aaC5p6c5L2g5LuN5peg5rOV55CG6Kej5oiR5Zyo6K+05LuA5LmI77yM6YKj5bCx55u05o6l5oqK5YWo6YOo55qE5bm/5ZGK5oum5oiq5Zmo56aB55So5oiW5piv5Y246L295o6JLi4uJywKCQkJbGl2ZV9zdHJlYW1fZGlzYWJsZWRfbWVzc2FnZToKCQkJCSflm6DkuLrmmK/nm7Tmkq3vvIzmnKzlnLAgWW91VHViZSDkuIvovb3lmajnmoTlip/og73lt7LooqvnpoHnlKjjgIInCgkJfSwKCQlqYTogewoJCQl0b2dnbGVsaW5rczogJ+ODquODs+OCr+ihqOekuuODu+mdnuihqOekuicsCgkJCXN0cmVhbTogJ+OCueODiOODquODvOODn+ODs+OCsCcsCgkJCWFkYXB0aXZlOiAn44Ki44OA44OX44OG44Kj44OWJywKCQkJdmlkZW9pZDogJ+ODk+ODh+OCqiBJRDogJywKCQkJaW5icm93c2VyX2FkYXB0aXZlX21lcmdlcjoKCQkJCSfjg5Pjg4fjgqrjgajjgqrjg7zjg4fjgqPjgqrjgpLlkIjkvbXjgZnjgovjgqrjg7Pjg6njgqTjg7Pjg4Tjg7zjg6sgKEZGbXBlZyknLAoJCQlkbG1wNDogJ+ODr+ODs+OCr+ODquODg+OCr+OBp+mrmOino+WDj+W6puOBriBtcDQg44KS44OA44Km44Oz44Ot44O844OJJywKCQkJZ2V0X3ZpZGVvX2ZhaWxlZDoKCQkJCSclcyDjgpLjg5bjg63jg4Pjgq/jgZnjgovluoPlkYrjg5bjg63jg4Pjgq/mi6HlvLXmqZ/og73jgYzjgqTjg7Pjgrnjg4jjg7zjg6vjgZXjgozjgabjgYTjgovjgojjgYbjgafjgZnjgIJcbuasoeOBruODq+ODvOODq+OCkuODq+ODvOODq+OCu+ODg+ODiOOBq+i/veWKoOOBl+OBpuOBj+OBoOOBleOBhOOAgui/veWKoOOBl+OBquOBhOWgtOWQiOOAgeODreODvOOCq+ODqyBZb3VUdWJlIOODgOOCpuODs+ODreODvOODgOODvOOBjOapn+iDveOBl+OBquOBj+OBquOCiuOBvuOBmeOAglxuXG5QLlMuOiDjg6vjg7zjg6vjga7ov73liqDjgYzmi5LlkKbjgZXjgozjgZ/loLTlkIjjga/jgIHjgqLjg7PjgqTjg7Pjgrnjg4jjg7zjg6vjgZfjgabjgIx1QmxvY2sgT3JpZ2lu44CN44KS5Luj44KP44KK44Gr5L2/55So44GX44Gm44GP44Gg44GV44GE44CCXG7jgZ3jgozjgafjgoLnkIbop6PjgafjgY3jgarjgYTloLTlkIjjga/jgIHjgZnjgbnjgabjga7luoPlkYrjg5bjg63jg4Pjgqvjg7zjgpLnhKHlirnjgavjgZnjgovjgYvjgqLjg7PjgqTjg7Pjgrnjg4jjg7zjg6vjgZfjgabjgY/jgaDjgZXjgYTjgIInLAoJCQlsaXZlX3N0cmVhbV9kaXNhYmxlZF9tZXNzYWdlOgoJCQkJJ+ODqeOCpOODlumFjeS/oeOBruOBn+OCgeOAgeODreODvOOCq+ODqyBZb3VUdWJlIOODgOOCpuODs+ODreODvOODgOODvOOBr+eEoeWKueOBq+OBquOBo+OBpuOBhOOBvuOBmeOAgicKCQl9LAoJCWtyOiB7CgkJCXRvZ2dsZWxpbmtzOiAn66eB7YGsIOuztOydtOq4sCDCtyDsiKjquLDquLAnLAoJCQlzdHJlYW06ICfsiqTtirjrpqzrsI0nLAoJCQlhZGFwdGl2ZTogJ+yggeydkSAo7Ja064yR7Yuw67iMKScsCgkJCXZpZGVvaWQ6ICfruYTrlJTsmKQgSUQ6ICcsCgkJCWluYnJvd3Nlcl9hZGFwdGl2ZV9tZXJnZXI6CgkJCQkn67mE65SU7Jik7JmAIOyYpOuUlOyYpOulvCDtlanrs5HtlZjripQg7Jio65287J24IOuPhOq1rCAoRkZtcGVnKScsCgkJCWRsbXA0OiAn7ZWcIOuyiOydmCDtgbTrpq3snLzroZwg6rOg7ZW07IOB64+EIG1wNCDri6TsmrTroZzrk5wnLAoJCQlnZXRfdmlkZW9fZmFpbGVkOgoJCQkJJyVzIOulvCDssKjri6jtlZjripQg6rSR6rOgIOywqOuLqCDtmZXsnqUg6riw64ql7J20IOyEpOy5mOuQmOyWtOyeiOuKlCDqsoMg6rCZ7Iq164uI64ukLlxu64uk7J2M7J2YIOq3nOy5meydhCDqt5zsuZkg7IS47Yq47JeQIOy2lOqwgO2VmOyLreyLnOyYpC4g7LaU6rCA7ZWY7KeAIOyViuycvOuptCDroZzsu6wgWW91VHViZSDri6TsmrTroZzrjZTqsIAg7J6R64+Z7ZWY7KeAIOyViuyKteuLiOuLpC5cblxuUC5TLjog6rec7LmZ7J2YIOy2lOqwgOqwgCDqsbDrtoAg65CcIOqyveyasCDsoJzqsbDtlZjqs6AgInVCbG9jayBPcmlnaW4i7J2EIOuMgOyLoCDsgqzsmqntlZjsi63si5zsmKQuXG7qt7jrnpjrj4Qg7J207ZW07ZWgIOyImOyXhuuKlCDqsr3smrAg66qo65OgIOq0keqzoCDssKjri6jquLDrpbwg67mE7Zmc7ISx7ZmU7ZWY6rGw64KYIOygnOqxsO2VmOyLreyLnOyYpC4nCgkJfSwKCQllczogewoJCQl0b2dnbGVsaW5rczogJ01vc3RyYXIvT2N1bHRhciBMaW5rcycsCgkJCXN0cmVhbTogJ1N0cmVhbScsCgkJCWFkYXB0aXZlOiAnQWRhcHRhYmxlJywKCQkJdmlkZW9pZDogJ0lkIGRlbCBWaWRlbzogJywKCQkJaW5icm93c2VyX2FkYXB0aXZlX21lcmdlcjogJ0Fjb3BsYXIgQXVkaW8gYSBWaWRlbyAoRkZtcGVnKScKCQl9LAoJCWhlOiB7CgkJCXRvZ2dsZWxpbmtzOiAn15TXpteSL9eU16HXqteoINen15nXqdeV16jXmdedJywKCQkJc3RyZWFtOiAn16HXmNeo15nXnScsCgkJCWFkYXB0aXZlOiAn15DXk9ek15jXmdeR15knLAoJCQl2aWRlb2lkOiAn157XlteU15Qg16HXqNeY15XXnzogJwoJCX0sCgkJZnI6IHsKCQkJdG9nZ2xlbGlua3M6ICdBZmZpY2hlci9NYXNxdWVyIGxlcyBsaWVucycsCgkJCXN0cmVhbTogJ1N0cmVhbScsCgkJCWFkYXB0aXZlOiAnQWRhcHRhdGl2ZScsCgkJCXZpZGVvaWQ6ICdJRCB2aWTDqW86ICcsCgkJCWluYnJvd3Nlcl9hZGFwdGl2ZV9tZXJnZXI6CgkJCQknRnVzaW9ubmVyIHZpZMOpb3MgZXQgYXVkaW9zIGFkYXB0YXRpZnMgZGFucyBsZSBuYXZpZ2F0ZXVyIChGRm1wZWcpJywKCQkJZGxtcDQ6ICdUw6lsw6ljaGFyZ2V6IGxhIHBsdXMgaGF1dGUgcsOpc29sdXRpb24gbXA0IGVuIHVuIGNsaWMnLAoJCQlnZXRfdmlkZW9fZmFpbGVkOgoJCQkJJ0lsIHNlbWJsZSBxdVwndW5lIGV4dGVuc2lvbiBkZSBibG9jYWdlIGRlIHB1YnMgc29pdCBpbnN0YWxsw6llLCBjZSBxdWkgYmxvcXVlICVzLlxuVmV1aWxsZXogYWpvdXRlciBsYSByw6hnbGUgc3VpdmFudGUgYXUgamV1IGRlIHLDqGdsZXMsIG91IGNlbGEgZW1ww6pjaGVyYSBMb2NhbCBZb3VUdWJlIERvd25sb2FkZXIgZGUgZm9uY3Rpb25uZXIuXG5cblBTOiBTaSB2b3RyZSBibG9xdWV1ciByZWZ1c2UgZFwnYWpvdXRlciBjZXR0ZSByw6hnbGUsIHZvdXMgZGV2ZXogbGUgZMOpc2luc3RhbGxlciBldCB1dGlsaXNlciBwbHV0w7R0ICJ1QmxvY2sgT3JpZ2luIi5cblNpIHZvdXMgbmUgY29tcHJlbmV6IHRvdWpvdXJzIHBhcyBjZSBxdWUgamUgZGlzLCBkw6lzaW5zdGFsbGV6IG91IGTDqXNhY3RpdmV6IHNpbXBsZW1lbnQgdm90cmUgYmxvcXVldXIgZGUgcHVicyAuLi4nCgkJfSwKCQlwbDogewoJCQl0b2dnbGVsaW5rczogJ1Bva2HFvC9Va3J5aiBMaW5raScsCgkJCXN0cmVhbTogJ1N0cmVhbScsCgkJCWFkYXB0aXZlOiAnQWRhcHR5d25lJywKCQkJdmlkZW9pZDogJ0lEIGZpbG11OiAnLAoJCQlpbmJyb3dzZXJfYWRhcHRpdmVfbWVyZ2VyOgoJCQkJJ1BvxYLEhWN6IGF1ZGlvIGkgd2lkZW8gYWRhcHR5d25lIHcgcHJ6ZWdsxIVkYXJjZSAoRkZtcGVnKScsCgkJCWRsbXA0OiAnUG9iaWVyeiAubXA0IHcgbmFqd3nFvHN6ZWogamFrb8WbY2knCgkJfSwKCQloaTogewoJCQl0b2dnbGVsaW5rczogJ+CksuCkv+CkguCklSDgpJ/gpYngpJfgpLIg4KSV4KSw4KWH4KSCJywKCQkJc3RyZWFtOiAn4KS44KWN4KSf4KWN4KSw4KWA4KSu4KS/4KSC4KSXIChTdHJlYW0pJywKCQkJYWRhcHRpdmU6ICfgpIXgpKjgpYHgpJXgpYLgpLLgpYAgKEFkYXB0aXZlKScsCgkJCXZpZGVvaWQ6ICfgpLXgpYDgpKHgpL/gpK/gpYsg4KSG4KSI4KSh4KWAOiB7e2lkfX0nCgkJfQoJfQoJZm9yIChjb25zdCBbbGFuZywgZGF0YV0gb2YgT2JqZWN0LmVudHJpZXMoTE9DQUxFKSkgewoJCWlmIChsYW5nID09PSBMQU5HX0ZBTExCQUNLKSBjb250aW51ZQoJCWZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKExPQ0FMRVtMQU5HX0ZBTExCQUNLXSkpIHsKCQkJaWYgKCEoa2V5IGluIGRhdGEpKSB7CgkJCQlkYXRhW2tleV0gPSBMT0NBTEVbTEFOR19GQUxMQkFDS11ba2V5XQoJCQl9CgkJfQoJfQoKCWNvbnN0IGZpbmRMYW5nID0gbCA9PiB7CgkJLy8gbGFuZ3VhZ2UgcmVzb2x1dGlvbiBsb2dpYzogemgtdHcgLS0oaWYgbm90IGV4aXN0cyktLT4gemggLS0oaWYgbm90IGV4aXN0cyktLT4gTEFOR19GQUxMQkFDSyhlbikKCQlsID0gbC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJ18nLCAnLScpCgkJaWYgKGwgaW4gTE9DQUxFKSByZXR1cm4gbAoJCWVsc2UgaWYgKGwubGVuZ3RoID4gMikgcmV0dXJuIGZpbmRMYW5nKGwuc3BsaXQoJy0nKVswXSkKCQllbHNlIHJldHVybiBMQU5HX0ZBTExCQUNLCgl9Cgljb25zdCAkID0gKHMsIHggPSBkb2N1bWVudCkgPT4geC5xdWVyeVNlbGVjdG9yKHMpCgljb25zdCAkZWwgPSAodGFnLCBvcHRzKSA9PiB7CgkJY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZykKCQlPYmplY3QuYXNzaWduKGVsLCBvcHRzKQoJCXJldHVybiBlbAoJfQoJY29uc3QgZXNjYXBlUmVnRXhwID0gcyA9PiBzLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXVxcXS9nLCAnXFwkJicpCgljb25zdCBwYXJzZURlY3NpZyA9IGRhdGEgPT4gewoJCXRyeSB7CgkJCWlmIChkYXRhLnN0YXJ0c1dpdGgoJ3ZhciBzY3JpcHQnKSkgewoJCQkJLy8gdGhleSBpbmplY3QgdGhlIHNjcmlwdCB2aWEgc2NyaXB0IHRhZwoJCQkJY29uc3Qgb2JqID0ge30KCQkJCWNvbnN0IGRvY3VtZW50ID0gewoJCQkJCWNyZWF0ZUVsZW1lbnQ6ICgpID0+IG9iaiwKCQkJCQloZWFkOiB7IGFwcGVuZENoaWxkOiAoKSA9PiB7fSB9CgkJCQl9CgkJCQlldmFsKGRhdGEpCgkJCQlkYXRhID0gb2JqLmlubmVySFRNTAoJCQl9CgkJCWNvbnN0IGZubmFtZXJlc3VsdCA9IC89KFthLXpBLVowLTlcJF0rPylcKGRlY29kZVVSSUNvbXBvbmVudC8uZXhlYygKCQkJCWRhdGEKCQkJKQoJCQljb25zdCBmbm5hbWUgPSBmbm5hbWVyZXN1bHRbMV0KCQkJY29uc3QgX2FyZ25hbWVmbmJvZHlyZXN1bHQgPSBuZXcgUmVnRXhwKAoJCQkJZXNjYXBlUmVnRXhwKGZubmFtZSkgKyAnPWZ1bmN0aW9uXFwoKC4rPylcXCl7KC4rPyl9JwoJCQkpLmV4ZWMoZGF0YSkKCQkJY29uc3QgW18sIGFyZ25hbWUsIGZuYm9keV0gPSBfYXJnbmFtZWZuYm9keXJlc3VsdAoJCQljb25zdCBoZWxwZXJuYW1lcmVzdWx0ID0gLzsoLis/KVwuLis/XCgvLmV4ZWMoZm5ib2R5KQoJCQljb25zdCBoZWxwZXJuYW1lID0gaGVscGVybmFtZXJlc3VsdFsxXQoJCQljb25zdCBoZWxwZXJyZXN1bHQgPSBuZXcgUmVnRXhwKAoJCQkJJ3ZhciAnICsgZXNjYXBlUmVnRXhwKGhlbHBlcm5hbWUpICsgJz17W1xcc1xcU10rP307JwoJCQkpLmV4ZWMoZGF0YSkKCQkJY29uc3QgaGVscGVyID0gaGVscGVycmVzdWx0WzBdCgkJCWxvZ2dlci5sb2coCgkJCQlgcGFyc2VkZWNzaWcgcmVzdWx0OiAlcz0+eyVzXG4lc31gLAoJCQkJYXJnbmFtZSwKCQkJCWhlbHBlciwKCQkJCWZuYm9keQoJCQkpCgkJCXJldHVybiBuZXcgRnVuY3Rpb24oW2FyZ25hbWVdLCBoZWxwZXIgKyAnXG4nICsgZm5ib2R5KQoJCX0gY2F0Y2ggKGUpIHsKCQkJbG9nZ2VyLmVycm9yKCdwYXJzZWRlY3NpZyBlcnJvcjogJW8nLCBlKQoJCQlsb2dnZXIuaW5mbygnc2NyaXB0IGNvbnRlbnQ6ICVzJywgZGF0YSkKCQkJbG9nZ2VyLmluZm8oCgkJCQknSWYgeW91IGVuY291bnRlciB0aGlzIGVycm9yLCBwbGVhc2UgY29weSB0aGUgZnVsbCAic2NyaXB0IGNvbnRlbnQiIHRvIGh0dHBzOi8vcGFzdGViaW4uY29tLyBmb3IgbWUuJwoJCQkpCgkJfQoJfQoJY29uc3QgcGFyc2VRdWVyeSA9IHMgPT4KCQlbLi4ubmV3IFVSTFNlYXJjaFBhcmFtcyhzKS5lbnRyaWVzKCldLnJlZHVjZSgKCQkJKGFjYywgW2ssIHZdKSA9PiAoKGFjY1trXSA9IHYpLCBhY2MpLAoJCQl7fQoJCSkKCWNvbnN0IGdldFZpZGVvID0gYXN5bmMgKGlkLCBkZWNzaWcpID0+IHsKCQljb25zdCBkYXRhID0gYXdhaXQgeGYKCQkJLmdldCgKCQkJCWBodHRwczovL3d3dy55b3V0dWJlLmNvbS9nZXRfdmlkZW9faW5mbz92aWRlb19pZD0ke2lkfSZlbD1kZXRhaWxwYWdlYAoJCQkpCgkJCS50ZXh0KCkKCQkJLmNhdGNoKGVyciA9PiBudWxsKQoJCWlmICghZGF0YSkgcmV0dXJuICdBZGJsb2NrIGNvbmZsaWN0JwoJCWNvbnN0IG9iaiA9IHBhcnNlUXVlcnkoZGF0YSkKCQljb25zdCBwbGF5ZXJSZXNwb25zZSA9IEpTT04ucGFyc2Uob2JqLnBsYXllcl9yZXNwb25zZSkKCQlsb2dnZXIubG9nKGB2aWRlbyAlcyBkYXRhOiAlb2AsIGlkLCBvYmopCgkJbG9nZ2VyLmxvZyhgdmlkZW8gJXMgcGxheWVyUmVzcG9uc2U6ICVvYCwgaWQsIHBsYXllclJlc3BvbnNlKQoJCWlmIChvYmouc3RhdHVzID09PSAnZmFpbCcpIHsKCQkJdGhyb3cgb2JqCgkJfQoJCWxldCBzdHJlYW0gPSBbXQoJCWlmIChwbGF5ZXJSZXNwb25zZS5zdHJlYW1pbmdEYXRhLmZvcm1hdHMpIHsKCQkJc3RyZWFtID0gcGxheWVyUmVzcG9uc2Uuc3RyZWFtaW5nRGF0YS5mb3JtYXRzLm1hcCh4ID0+CgkJCQlPYmplY3QuYXNzaWduKHt9LCB4LCBwYXJzZVF1ZXJ5KHguY2lwaGVyIHx8IHguc2lnbmF0dXJlQ2lwaGVyKSkKCQkJKQoJCQlsb2dnZXIubG9nKGB2aWRlbyAlcyBzdHJlYW06ICVvYCwgaWQsIHN0cmVhbSkKCQkJaWYgKHN0cmVhbVswXS5zcCAmJiBzdHJlYW1bMF0uc3AuaW5jbHVkZXMoJ3NpZycpKSB7CgkJCQlmb3IgKGNvbnN0IG9iaiBvZiBzdHJlYW0pIHsKCQkJCQlvYmoucyA9IGRlY3NpZyhvYmoucykKCQkJCQlvYmoudXJsICs9IGAmc2lnPSR7b2JqLnN9YAoJCQkJfQoJCQl9CgkJfQoKCQlsZXQgYWRhcHRpdmUgPSBbXQoJCWlmIChwbGF5ZXJSZXNwb25zZS5zdHJlYW1pbmdEYXRhLmFkYXB0aXZlRm9ybWF0cykgewoJCQlhZGFwdGl2ZSA9IHBsYXllclJlc3BvbnNlLnN0cmVhbWluZ0RhdGEuYWRhcHRpdmVGb3JtYXRzLm1hcCh4ID0+CgkJCQlPYmplY3QuYXNzaWduKHt9LCB4LCBwYXJzZVF1ZXJ5KHguY2lwaGVyIHx8IHguc2lnbmF0dXJlQ2lwaGVyKSkKCQkJKQoJCQlsb2dnZXIubG9nKGB2aWRlbyAlcyBhZGFwdGl2ZTogJW9gLCBpZCwgYWRhcHRpdmUpCgkJCWlmIChhZGFwdGl2ZVswXS5zcCAmJiBhZGFwdGl2ZVswXS5zcC5pbmNsdWRlcygnc2lnJykpIHsKCQkJCWZvciAoY29uc3Qgb2JqIG9mIGFkYXB0aXZlKSB7CgkJCQkJb2JqLnMgPSBkZWNzaWcob2JqLnMpCgkJCQkJb2JqLnVybCArPSBgJnNpZz0ke29iai5zfWAKCQkJCX0KCQkJfQoJCX0KCQlsb2dnZXIubG9nKGB2aWRlbyAlcyByZXN1bHQ6ICVvYCwgaWQsIHsgc3RyZWFtLCBhZGFwdGl2ZSB9KQoJCXJldHVybiB7IHN0cmVhbSwgYWRhcHRpdmUsIG1ldGE6IG9iaiwgcGxheWVyUmVzcG9uc2UgfQoJfQoJY29uc3Qgd29ya2VyTWVzc2FnZUhhbmRsZXIgPSBhc3luYyBlID0+IHsKCQljb25zdCBkZWNzaWcgPSBhd2FpdCB4Zi5nZXQoZS5kYXRhLnBhdGgpLnRleHQocGFyc2VEZWNzaWcpCgkJdHJ5IHsKCQkJY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0VmlkZW8oZS5kYXRhLmlkLCBkZWNzaWcpCgkJCXNlbGYucG9zdE1lc3NhZ2UocmVzdWx0KQoJCX0gY2F0Y2ggKGUpIHsKCQkJc2VsZi5wb3N0TWVzc2FnZShlKQoJCX0KCX0KCWNvbnN0IHl0ZGxXb3JrZXJDb2RlID0gYAppbXBvcnRTY3JpcHRzKCdodHRwczovL3VucGtnLmNvbS94ZmV0Y2gtanNAMC4zLjQveGZldGNoLm1pbi5qcycpCmNvbnN0IERFQlVHPSR7REVCVUd9CmNvbnN0IGxvZ2dlcj0oJHtjcmVhdGVMb2dnZXJ9KShjb25zb2xlLCAnWVRETCcpCmNvbnN0IGVzY2FwZVJlZ0V4cD0ke2VzY2FwZVJlZ0V4cH0KY29uc3QgcGFyc2VRdWVyeT0ke3BhcnNlUXVlcnl9CmNvbnN0IHBhcnNlRGVjc2lnPSR7cGFyc2VEZWNzaWd9CmNvbnN0IGdldFZpZGVvPSR7Z2V0VmlkZW99CnNlbGYub25tZXNzYWdlPSR7d29ya2VyTWVzc2FnZUhhbmRsZXJ9YAoJY29uc3QgeXRkbFdvcmtlciA9IG5ldyBXb3JrZXIoCgkJVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbeXRkbFdvcmtlckNvZGVdKSkKCSkKCWNvbnN0IHdvcmtlckdldFZpZGVvID0gKGlkLCBwYXRoKSA9PiB7CgkJbG9nZ2VyLmxvZyhgd29ya2VyR2V0VmlkZW8gc3RhcnQ6ICVzICVzYCwgaWQsIHBhdGgpCgkJcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4gewoJCQljb25zdCBjYWxsYmFjayA9IGUgPT4gewoJCQkJeXRkbFdvcmtlci5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgY2FsbGJhY2spCgkJCQlpZiAoZS5kYXRhID09PSAnQWRibG9jayBjb25mbGljdCcpIHsKCQkJCQlyZXR1cm4gcmVqKGUuZGF0YSkKCQkJCX0KCQkJCWxvZ2dlci5sb2coJ3dvcmtlckdldFZpZGVvIGVuZDogJW8nLCBlLmRhdGEpCgkJCQlyZXMoZS5kYXRhKQoJCQl9CgkJCXl0ZGxXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGNhbGxiYWNrKQoJCQl5dGRsV29ya2VyLnBvc3RNZXNzYWdlKHsgaWQsIHBhdGggfSkKCQl9KQoJfQoKCWNvbnN0IGRldGVybWluZUNodW5rc051bSA9IHNpemUgPT4gewoJCWNvbnN0IG4gPSBNYXRoLmNlaWwoc2l6ZSAvICgxMDI0ICogMTAyNCAqIDMpKSAvLyAzIE1CCgkJcmV0dXJuIG4KCX0KCS8vIHZpZGVvIGRvd25sb2FkZXIKCWNvbnN0IHhockRvd25sb2FkVWludDhBcnJheSA9IGFzeW5jICgKCQl7IHVybCwgY29udGVudExlbmd0aCB9LAoJCXByb2dyZXNzQ2IKCSkgPT4gewoJCWlmICh0eXBlb2YgY29udGVudExlbmd0aCA9PT0gJ3N0cmluZycpCgkJCWNvbnRlbnRMZW5ndGggPSBwYXJzZUludChjb250ZW50TGVuZ3RoKQoJCXByb2dyZXNzQ2IoewoJCQlsb2FkZWQ6IDAsCgkJCXRvdGFsOiBjb250ZW50TGVuZ3RoLAoJCQlzcGVlZDogMAoJCX0pCgkJY29uc3QgY2h1bmtTaXplID0gTWF0aC5mbG9vcigKCQkJY29udGVudExlbmd0aCAvIGRldGVybWluZUNodW5rc051bShjb250ZW50TGVuZ3RoKQoJCSkKCQljb25zdCBnZXRCdWZmZXIgPSAoc3RhcnQsIGVuZCkgPT4KCQkJbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7CgkJCQljb25zdCB4aHIgPSB7fQoJCQkJeGhyLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcicKCQkJCXhoci5tZXRob2QgPSAnR0VUJwoJCQkJeGhyLnVybCA9IHVybAoJCQkJeGhyLmhlYWRlcnMgPSB7CgkJCQkJJ1VzZXItQWdlbnQnOgoJCQkJCQknTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzY4LjAuMzQ0MC4xMjQgU2FmYXJpLzUzNy4zNicsCgkJCQkJUmFuZ2U6IGBieXRlcz0ke3N0YXJ0fS0ke2VuZCA/IGVuZCAtIDEgOiAnJ31gLAoJCQkJCSdBY2NlcHQtRW5jb2RpbmcnOiAnaWRlbnRpdHknLAoJCQkJCSdBY2NlcHQtTGFuZ3VhZ2UnOiAnZW4tdXMsZW47cT0wLjUnLAoJCQkJCSdBY2NlcHQtQ2hhcnNldCc6ICdJU08tODg1OS0xLHV0Zi04O3E9MC43LCo7cT0wLjcnCgkJCQl9CgkJCQl4aHIub25sb2FkID0gb2JqID0+IHJlcyhvYmoucmVzcG9uc2UpCgkJCQlHTV94bWxodHRwUmVxdWVzdCh4aHIpCgkJCX0pCgkJY29uc3QgZGF0YSA9IG5ldyBVaW50OEFycmF5KGNvbnRlbnRMZW5ndGgpCgkJbGV0IGRvd25sb2FkZWQgPSAwCgkJY29uc3QgcXVldWUgPSBuZXcgcFF1ZXVlLmRlZmF1bHQoeyBjb25jdXJyZW5jeTogNSB9KQoJCWNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCkKCQljb25zdCBwcyA9IFtdCgkJZm9yIChsZXQgc3RhcnQgPSAwOyBzdGFydCA8IGNvbnRlbnRMZW5ndGg7IHN0YXJ0ICs9IGNodW5rU2l6ZSkgewoJCQljb25zdCBleGNlZWRlZCA9IHN0YXJ0ICsgY2h1bmtTaXplID4gY29udGVudExlbmd0aAoJCQljb25zdCBjdXJDaHVua1NpemUgPSBleGNlZWRlZCA/IGNvbnRlbnRMZW5ndGggLSBzdGFydCA6IGNodW5rU2l6ZQoJCQljb25zdCBlbmQgPSBleGNlZWRlZCA/IG51bGwgOiBzdGFydCArIGNodW5rU2l6ZQoJCQljb25zdCBwID0gcXVldWUuYWRkKCgpID0+CgkJCQlnZXRCdWZmZXIoc3RhcnQsIGVuZCkudGhlbihidWYgPT4gewoJCQkJCWRvd25sb2FkZWQgKz0gY3VyQ2h1bmtTaXplCgkJCQkJZGF0YS5zZXQobmV3IFVpbnQ4QXJyYXkoYnVmKSwgc3RhcnQpCgkJCQkJY29uc3QgZHMgPSAoRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSArIDEpIC8gMTAwMAoJCQkJCXByb2dyZXNzQ2IoewoJCQkJCQlsb2FkZWQ6IGRvd25sb2FkZWQsCgkJCQkJCXRvdGFsOiBjb250ZW50TGVuZ3RoLAoJCQkJCQlzcGVlZDogZG93bmxvYWRlZCAvIGRzCgkJCQkJfSkKCQkJCX0pCgkJCSkKCQkJcHMucHVzaChwKQoJCX0KCQlhd2FpdCBQcm9taXNlLmFsbChwcykKCQlyZXR1cm4gZGF0YQoJfQoKCWNvbnN0IGZmV29ya2VyID0gRkZtcGVnLmNyZWF0ZVdvcmtlcih7CgkJbG9nZ2VyOiBERUJVRyA/IG0gPT4gbG9nZ2VyLmxvZyhtLm1lc3NhZ2UpIDogKCkgPT4ge30KCX0pCglsZXQgZmZXb3JrZXJMb2FkZWQgPSBmYWxzZQoJY29uc3QgbWVyZ2VWaWRlbyA9IGFzeW5jICh2aWRlbywgYXVkaW8pID0+IHsKCQlpZiAoIWZmV29ya2VyTG9hZGVkKSBhd2FpdCBmZldvcmtlci5sb2FkKCkKCQlhd2FpdCBmZldvcmtlci53cml0ZSgndmlkZW8ubXA0JywgdmlkZW8pCgkJYXdhaXQgZmZXb3JrZXIud3JpdGUoJ2F1ZGlvLm1wNCcsIGF1ZGlvKQoJCWF3YWl0IGZmV29ya2VyLnJ1bignLWkgdmlkZW8ubXA0IC1pIGF1ZGlvLm1wNCAtYyBjb3B5IG91dHB1dC5tcDQnLCB7CgkJCWlucHV0OiBbJ3ZpZGVvLm1wNCcsICdhdWRpby5tcDQnXSwKCQkJb3V0cHV0OiAnb3V0cHV0Lm1wNCcKCQl9KQoJCWNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgZmZXb3JrZXIucmVhZCgnb3V0cHV0Lm1wNCcpCgkJYXdhaXQgZmZXb3JrZXIucmVtb3ZlKCdvdXRwdXQubXA0JykKCQlyZXR1cm4gZGF0YQoJfQoJY29uc3QgdHJpZ2dlckRvd25sb2FkID0gKHVybCwgZmlsZW5hbWUpID0+IHsKCQljb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpCgkJYS5ocmVmID0gdXJsCgkJYS5kb3dubG9hZCA9IGZpbGVuYW1lCgkJZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKQoJCWEuY2xpY2soKQoJCWEucmVtb3ZlKCkKCX0KCWNvbnN0IGRsTW9kYWxUZW1wbGF0ZSA9IGAKPGRpdiBzdHlsZT0id2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsiPgoJPGRpdiB2LWlmPSJtZXJnaW5nIiBzdHlsZT0iaGVpZ2h0OiAxMDAlOyB3aWR0aDogMTAwJTsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGZvbnQtc2l6ZTogMjRweDsiPk1lcmdpbmcgdmlkZW8sIHBsZWFzZSB3YWl0Li4uPC9kaXY+Cgk8ZGl2IHYtZWxzZSBzdHlsZT0iaGVpZ2h0OiAxMDAlOyB3aWR0aDogMTAwJTsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsiPgogCQk8ZGl2IHN0eWxlPSJmbGV4OiAxOyBtYXJnaW46IDEwcHg7Ij4KCQkJPHAgc3R5bGU9ImZvbnQtc2l6ZTogMjRweDsiPlZpZGVvPC9wPgoJCQk8cHJvZ3Jlc3Mgc3R5bGU9IndpZHRoOiAxMDAlOyIgOnZhbHVlPSJ2aWRlby5wcm9ncmVzcyIgbWluPSIwIiBtYXg9IjEwMCI+PC9wcm9ncmVzcz4KCQkJPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyI+CgkJCQk8c3Bhbj57e3ZpZGVvLnNwZWVkfX0ga0Ivczwvc3Bhbj4KCQkJCTxzcGFuPnt7dmlkZW8ubG9hZGVkfX0ve3t2aWRlby50b3RhbH19IE1CPC9zcGFuPgoJCQk8L2Rpdj4KCQk8L2Rpdj4KCQk8ZGl2IHN0eWxlPSJmbGV4OiAxOyBtYXJnaW46IDEwcHg7Ij4KCQkJPHAgc3R5bGU9ImZvbnQtc2l6ZTogMjRweDsiPkF1ZGlvPC9wPgoJCQk8cHJvZ3Jlc3Mgc3R5bGU9IndpZHRoOiAxMDAlOyIgOnZhbHVlPSJhdWRpby5wcm9ncmVzcyIgbWluPSIwIiBtYXg9IjEwMCI+PC9wcm9ncmVzcz4KCQkJPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyI+CgkJCQk8c3Bhbj57e2F1ZGlvLnNwZWVkfX0ga0Ivczwvc3Bhbj4KCQkJCTxzcGFuPnt7YXVkaW8ubG9hZGVkfX0ve3thdWRpby50b3RhbH19IE1CPC9zcGFuPgoJCQk8L2Rpdj4KCQk8L2Rpdj4KCTwvZGl2Pgo8L2Rpdj4KYAoJZnVuY3Rpb24gb3BlbkRvd25sb2FkTW9kZWwoYWRhcHRpdmUsIHRpdGxlKSB7CgkJY29uc3Qgd2luID0gb3BlbigKCQkJJycsCgkJCSdWaWRlbyBEb3dubG9hZCcsCgkJCWB0b29sYmFyPW5vLGhlaWdodD0ke3NjcmVlbi5oZWlnaHQgLyAyfSx3aWR0aD0kewoJCQkJc2NyZWVuLndpZHRoIC8gMgoJCQl9LGxlZnQ9JHtzY3JlZW5MZWZ0fSx0b3A9JHtzY3JlZW5Ub3B9YAoJCSkKCQljb25zdCBkaXYgPSB3aW4uZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykKCQl3aW4uZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpCgkJd2luLmRvY3VtZW50LnRpdGxlID0gYERvd25sb2FkaW5nICIke3RpdGxlfSJgCgkJY29uc3QgZGxNb2RhbEFwcCA9IG5ldyBWdWUoewoJCQl0ZW1wbGF0ZTogZGxNb2RhbFRlbXBsYXRlLAoJCQlkYXRhKCkgewoJCQkJcmV0dXJuIHsKCQkJCQl2aWRlbzogewoJCQkJCQlwcm9ncmVzczogMCwKCQkJCQkJdG90YWw6IDAsCgkJCQkJCWxvYWRlZDogMCwKCQkJCQkJc3BlZWQ6IDAKCQkJCQl9LAoJCQkJCWF1ZGlvOiB7CgkJCQkJCXByb2dyZXNzOiAwLAoJCQkJCQl0b3RhbDogMCwKCQkJCQkJbG9hZGVkOiAwLAoJCQkJCQlzcGVlZDogMAoJCQkJCX0sCgkJCQkJbWVyZ2luZzogZmFsc2UKCQkJCX0KCQkJfSwKCQkJbWV0aG9kczogewoJCQkJYXN5bmMgc3RhcnQoYWRhcHRpdmUsIHRpdGxlKSB7CgkJCQkJd2luLm9uYmVmb3JldW5sb2FkID0gKCkgPT4gdHJ1ZQoJCQkJCS8vIFlvdVR1YmUncyBkZWZhdWx0IG9yZGVyIGlzIGRlc2NlbmRpbmcgYnkgdmlkZW8gcXVhbGl0eQoJCQkJCWNvbnN0IHZpZGVvT2JqID0gYWRhcHRpdmUKCQkJCQkJLmZpbHRlcih4ID0+IHgubWltZVR5cGUuaW5jbHVkZXMoJ3ZpZGVvL21wNCcpKQoJCQkJCQkubWFwKHYgPT4gewoJCQkJCQkJY29uc3QgW18sIHF1YWxpdHksIGZwc10gPSAvKFxkKylwKFxkKikvLmV4ZWMoCgkJCQkJCQkJdi5xdWFsaXR5TGFiZWwKCQkJCQkJCSkKCQkJCQkJCXYucXVhbGl0eU51bSA9IHBhcnNlSW50KHF1YWxpdHkpCgkJCQkJCQl2LmZwcyA9IGZwcyA/IHBhcnNlSW50KGZwcykgOiAzMAoJCQkJCQkJcmV0dXJuIHYKCQkJCQkJfSkKCQkJCQkJLnNvcnQoKGEsIGIpID0+IHsKCQkJCQkJCWlmIChhLnF1YWxpdHlOdW0gPT09IGIucXVhbGl0eU51bSkKCQkJCQkJCQlyZXR1cm4gYi5mcHMgLSBhLmZwcyAvLyBleDogMzAtNjA9LTMwLCB0aGVuIGEgd2lsbCBiZSBwdXQgYmVmb3JlIGIKCQkJCQkJCXJldHVybiBiLnF1YWxpdHlOdW0gLSBhLnF1YWxpdHlOdW0KCQkJCQkJfSlbMF0KCQkJCQljb25zdCBhdWRpb09iaiA9IGFkYXB0aXZlLmZpbmQoeCA9PgoJCQkJCQl4Lm1pbWVUeXBlLmluY2x1ZGVzKCdhdWRpby9tcDQnKQoJCQkJCSkKCQkJCQljb25zdCB2UHJvbWlzZSA9IHhockRvd25sb2FkVWludDhBcnJheSh2aWRlb09iaiwgZSA9PiB7CgkJCQkJCXRoaXMudmlkZW8ucHJvZ3Jlc3MgPSAoZS5sb2FkZWQgLyBlLnRvdGFsKSAqIDEwMAoJCQkJCQl0aGlzLnZpZGVvLmxvYWRlZCA9IChlLmxvYWRlZCAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDIpCgkJCQkJCXRoaXMudmlkZW8udG90YWwgPSAoZS50b3RhbCAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDIpCgkJCQkJCXRoaXMudmlkZW8uc3BlZWQgPSAoZS5zcGVlZCAvIDEwMjQpLnRvRml4ZWQoMikKCQkJCQl9KQoJCQkJCWNvbnN0IGFQcm9taXNlID0geGhyRG93bmxvYWRVaW50OEFycmF5KGF1ZGlvT2JqLCBlID0+IHsKCQkJCQkJdGhpcy5hdWRpby5wcm9ncmVzcyA9IChlLmxvYWRlZCAvIGUudG90YWwpICogMTAwCgkJCQkJCXRoaXMuYXVkaW8ubG9hZGVkID0gKGUubG9hZGVkIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMikKCQkJCQkJdGhpcy5hdWRpby50b3RhbCA9IChlLnRvdGFsIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMikKCQkJCQkJdGhpcy5hdWRpby5zcGVlZCA9IChlLnNwZWVkIC8gMTAyNCkudG9GaXhlZCgyKQoJCQkJCX0pCgkJCQkJY29uc3QgW3ZhcnIsIGFhcnJdID0gYXdhaXQgUHJvbWlzZS5hbGwoW3ZQcm9taXNlLCBhUHJvbWlzZV0pCgkJCQkJdGhpcy5tZXJnaW5nID0gdHJ1ZQoJCQkJCXdpbi5vbnVubG9hZCA9ICgpID0+IHsKCQkJCQkJLy8gdHJpZ2dlciBkb3dubG9hZCB3aGVuIHVzZXIgY2xvc2UgaXQKCQkJCQkJY29uc3QgYnZ1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFt2YXJyXSkpCgkJCQkJCWNvbnN0IGJhdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbYWFycl0pKQoJCQkJCQl0cmlnZ2VyRG93bmxvYWQoYnZ1cmwsIHRpdGxlICsgJy12aWRlb29ubHkubXA0JykKCQkJCQkJdHJpZ2dlckRvd25sb2FkKGJhdXJsLCB0aXRsZSArICctYXVkaW9vbmx5Lm1wNCcpCgkJCQkJfQoJCQkJCWNvbnN0IHJlc3VsdCA9IGF3YWl0IFByb21pc2UucmFjZShbCgkJCQkJCW1lcmdlVmlkZW8odmFyciwgYWFyciksCgkJCQkJCXNsZWVwKDEwMDAgKiAyNSkudGhlbigoKSA9PiBudWxsKQoJCQkJCV0pCgkJCQkJaWYgKCFyZXN1bHQpIHsKCQkJCQkJYWxlcnQoJ0FuIGVycm9yIGhhcyBvY2N1cnJlZCB3aGVuIG1lcmdpbmcgdmlkZW8nKQoJCQkJCQljb25zdCBidnVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW3ZhcnJdKSkKCQkJCQkJY29uc3QgYmF1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFthYXJyXSkpCgkJCQkJCXRyaWdnZXJEb3dubG9hZChidnVybCwgdGl0bGUgKyAnLXZpZGVvb25seS5tcDQnKQoJCQkJCQl0cmlnZ2VyRG93bmxvYWQoYmF1cmwsIHRpdGxlICsgJy1hdWRpb29ubHkubXA0JykKCQkJCQkJcmV0dXJuIHRoaXMuY2xvc2UoKQoJCQkJCX0KCQkJCQl0aGlzLm1lcmdpbmcgPSBmYWxzZQoJCQkJCWNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW3Jlc3VsdF0pKQoJCQkJCXRyaWdnZXJEb3dubG9hZCh1cmwsIHRpdGxlICsgJy5tcDQnKQoJCQkJCXdpbi5vbmJlZm9yZXVubG9hZCA9IG51bGwKCQkJCQl3aW4ub251bmxvYWQgPSBudWxsCgkJCQkJd2luLmNsb3NlKCkKCQkJCX0KCQkJfQoJCX0pLiRtb3VudChkaXYpCgkJZGxNb2RhbEFwcC5zdGFydChhZGFwdGl2ZSwgdGl0bGUpCgl9CgoJY29uc3QgdGVtcGxhdGUgPSBgCjxkaXYgY2xhc3M9ImJveCIgOmNsYXNzPSJ7J2RhcmsnOmRhcmt9Ij4KICA8dGVtcGxhdGUgdi1pZj0iIWlzTGl2ZVN0cmVhbSI+CiAgICA8ZGl2IHYtaWY9ImFkYXB0aXZlLmxlbmd0aCIgY2xhc3M9Im9mLWggdC1jZW50ZXIgYy1wb2ludGVyIGxoLTIwIj4KICAgICAgPGEgY2xhc3M9ImZzLTE0cHgiIEBjbGljaz0iZGxtcDQiIHYtdGV4dD0ic3RyaW5ncy5kbG1wNCI+PC9hPgogICAgPC9kaXY+CiAgICA8ZGl2IEBjbGljaz0iaGlkZT0haGlkZSIgY2xhc3M9ImJveC10b2dnbGUgZGl2LWEgdC1jZW50ZXIgZnMtMTRweCBjLXBvaW50ZXIgbGgtMjAiIHYtdGV4dD0ic3RyaW5ncy50b2dnbGVsaW5rcyI+PC9kaXY+CiAgICA8ZGl2IDpjbGFzcz0ieydoaWRlJzpoaWRlfSI+CiAgICAgIDxkaXYgY2xhc3M9InQtY2VudGVyIGZzLTE0cHgiIHYtdGV4dD0ic3RyaW5ncy52aWRlb2lkK2lkIj48L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iZC1mbGV4Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJmLTEgb2YtaCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJ0LWNlbnRlciBmcy0xNHB4IiB2LXRleHQ9InN0cmluZ3Muc3RyZWFtIj48L2Rpdj4KICAgICAgICAgIDxhIGNsYXNzPSJ5dGRsLWxpbmstYnRuIGZzLTE0cHgiIHRhcmdldD0iX2JsYW5rIiB2LWZvcj0idmlkIGluIHN0cmVhbSIgOmhyZWY9InZpZC51cmwiIDp0aXRsZT0idmlkLnR5cGUiIHYtdGV4dD0iZm9ybWF0U3RyZWFtVGV4dCh2aWQpIj48L2E+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iZi0xIG9mLWgiPgogICAgICAgICAgPGRpdiBjbGFzcz0idC1jZW50ZXIgZnMtMTRweCIgdi10ZXh0PSJzdHJpbmdzLmFkYXB0aXZlIj48L2Rpdj4KICAgICAgICAgIDxhIGNsYXNzPSJ5dGRsLWxpbmstYnRuIGZzLTE0cHgiIHRhcmdldD0iX2JsYW5rIiB2LWZvcj0idmlkIGluIGFkYXB0aXZlIiA6aHJlZj0idmlkLnVybCIgOnRpdGxlPSJ2aWQudHlwZSIgdi10ZXh0PSJmb3JtYXRBZGFwdGl2ZVRleHQodmlkKSI+PC9hPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0ib2YtaCB0LWNlbnRlciI+CiAgICAgICAgPGEgY2xhc3M9ImZzLTE0cHgiIGhyZWY9Imh0dHBzOi8vbWFwbGUzMTQyLmdpdGh1Yi5pby9tZXJnZW1wNC8iIHRhcmdldD0iX2JsYW5rIiB2LXRleHQ9InN0cmluZ3MuaW5icm93c2VyX2FkYXB0aXZlX21lcmdlciI+PC9hPgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogIDwvdGVtcGxhdGU+CiAgPHRlbXBsYXRlIHYtZWxzZT4KICAgIDxkaXYgY2xhc3M9InQtY2VudGVyIGZzLTE0cHggbGgtMjAiIHYtdGV4dD0ic3RyaW5ncy5saXZlX3N0cmVhbV9kaXNhYmxlZF9tZXNzYWdlIj48L2Rpdj4KICA8L3RlbXBsYXRlPgo8L2Rpdj4KYC5zbGljZSgxKQoJY29uc3QgYXBwID0gbmV3IFZ1ZSh7CgkJZGF0YSgpIHsKCQkJcmV0dXJuIHsKCQkJCWhpZGU6IHRydWUsCgkJCQlpZDogJycsCgkJCQlpc0xpdmVTdHJlYW06IGZhbHNlLAoJCQkJc3RyZWFtOiBbXSwKCQkJCWFkYXB0aXZlOiBbXSwKCQkJCW1ldGE6IG51bGwsCgkJCQlkYXJrOiBmYWxzZSwKCQkJCWxhbmc6IGZpbmRMYW5nKG5hdmlnYXRvci5sYW5ndWFnZSkKCQkJfQoJCX0sCgkJY29tcHV0ZWQ6IHsKCQkJc3RyaW5ncygpIHsKCQkJCXJldHVybiBMT0NBTEVbdGhpcy5sYW5nLnRvTG93ZXJDYXNlKCldCgkJCX0KCQl9LAoJCW1ldGhvZHM6IHsKCQkJZGxtcDQoKSB7CgkJCQljb25zdCByID0gSlNPTi5wYXJzZSh0aGlzLm1ldGEucGxheWVyX3Jlc3BvbnNlKQoJCQkJb3BlbkRvd25sb2FkTW9kZWwodGhpcy5hZGFwdGl2ZSwgci52aWRlb0RldGFpbHMudGl0bGUpCgkJCX0sCgkJCWZvcm1hdFN0cmVhbVRleHQodmlkKSB7CgkJCQlyZXR1cm4gW3ZpZC5xdWFsaXR5TGFiZWwsIHZpZC5xdWFsaXR5XS5maWx0ZXIoeCA9PiB4KS5qb2luKCc6ICcpCgkJCX0sCgkJCWZvcm1hdEFkYXB0aXZlVGV4dCh2aWQpIHsKCQkJCWxldCBzdHIgPSBbdmlkLnF1YWxpdHlMYWJlbCwgdmlkLm1pbWVUeXBlXQoJCQkJCS5maWx0ZXIoeCA9PiB4KQoJCQkJCS5qb2luKCc6ICcpCgkJCQlpZiAodmlkLm1pbWVUeXBlLmluY2x1ZGVzKCdhdWRpbycpKSB7CgkJCQkJc3RyICs9IGAgJHtNYXRoLnJvdW5kKHZpZC5iaXRyYXRlIC8gMTAwMCl9a2Jwc2AKCQkJCX0KCQkJCXJldHVybiBzdHIKCQkJfQoJCX0sCgkJdGVtcGxhdGUKCX0pCglsb2dnZXIubG9nKGBkZWZhdWx0IGxhbmd1YWdlOiAlc2AsIGFwcC5sYW5nKQoKCS8vIGF0dGFjaCBlbGVtZW50Cgljb25zdCBzaGFkb3dIb3N0ID0gJGVsKCdkaXYnKQoJY29uc3Qgc2hhZG93ID0gc2hhZG93SG9zdC5hdHRhY2hTaGFkb3cKCQk/IHNoYWRvd0hvc3QuYXR0YWNoU2hhZG93KHsgbW9kZTogJ2Nsb3NlZCcgfSkKCQk6IHNoYWRvd0hvc3QgLy8gbm8gc2hhZG93IGRvbQoJbG9nZ2VyLmxvZygnc2hhZG93SG9zdDogJW8nLCBzaGFkb3dIb3N0KQoJY29uc3QgY29udGFpbmVyID0gJGVsKCdkaXYnKQoJc2hhZG93LmFwcGVuZENoaWxkKGNvbnRhaW5lcikKCWFwcC4kbW91bnQoY29udGFpbmVyKQoKCWlmIChERUJVRyAmJiB0eXBlb2YgdW5zYWZlV2luZG93ICE9PSAndW5kZWZpbmVkJykgewoJCS8vIGV4cG9zZSBzb21lIGZ1bmN0aW9ucyBmb3IgZGVidWdnaW5nCgkJdW5zYWZlV2luZG93LiRhcHAgPSBhcHAKCQl1bnNhZmVXaW5kb3cucGFyc2VRdWVyeSA9IHBhcnNlUXVlcnkKCQl1bnNhZmVXaW5kb3cucGFyc2VEZWNzaWcgPSBwYXJzZURlY3NpZwoJCXVuc2FmZVdpbmRvdy5nZXRWaWRlbyA9IGdldFZpZGVvCgl9CgoJY29uc3QgZ2V0TGFuZ0NvZGUgPSAoKSA9PiB7CgkJaWYgKHR5cGVvZiB5dHBsYXllciAhPT0gJ3VuZGVmaW5lZCcgJiYgeXRwbGF5ZXIuY29uZmlnKSB7CgkJCXJldHVybiB5dHBsYXllci5jb25maWcuYXJncy5ob3N0X2xhbmd1YWdlCgkJfSBlbHNlIGlmICh0eXBlb2YgeXQgIT09ICd1bmRlZmluZWQnKSB7CgkJCXJldHVybiB5dC5jb25maWdfLkdBUElfTE9DQUxFCgkJfSBlbHNlIHsKCQkJcmV0dXJuIG5hdmlnYXRvci5sYW5ndWFnZQoJCX0KCX0KCWNvbnN0IGFwcGx5T3JpZ2luYWxUaXRsZSA9IG1ldGEgPT4gewoJCWNvbnNvbGUubG9nKG1ldGEucGxheWVyX3Jlc3BvbnNlKQoJCWNvbnN0IGRhdGEgPSBldmFsKGAoJHttZXRhLnBsYXllcl9yZXNwb25zZX0pYCkudmlkZW9EZXRhaWxzIC8vIG5vdCBhIHZhbGlkIGpzb24sIHNvIEpTT04ucGFyc2Ugd29uJ3Qgd29yawoJCWlmICgkKCcjZW93LXRpdGxlJykpIHsKCQkJLy8gbGVnYWN5IHlvdXR1YmUKCQkJJCgnI2Vvdy10aXRsZScpLnRleHRDb250ZW50ID0gZGF0YS50aXRsZQoJCX0gZWxzZSBpZiAoJCgnaDEudGl0bGUnKSkgewoJCQkvLyBuZXcgeW91dHViZSAocG9seW1lcikKCQkJJCgnaDEudGl0bGUnKS50ZXh0Q29udGVudCA9IGRhdGEudGl0bGUKCQl9Cgl9Cgljb25zdCBsb2FkID0gYXN5bmMgaWQgPT4gewoJCXRyeSB7CgkJCWNvbnN0IGJhc2VqcyA9CgkJCQkodHlwZW9mIHl0cGxheWVyICE9PSAndW5kZWZpbmVkJyAmJiB5dHBsYXllci5jb25maWcuYXNzZXRzCgkJCQkJPyAnaHR0cHM6Ly8nICsgbG9jYXRpb24uaG9zdCArIHl0cGxheWVyLmNvbmZpZy5hc3NldHMuanMKCQkJCQk6ICdodHRwczovLycgKwoJCQkJCSAgbG9jYXRpb24uaG9zdCArCgkJCQkJICB5dHBsYXllci53ZWJfcGxheWVyX2NvbnRleHRfY29uZmlnLmpzVXJsKSB8fAoJCQkJJCgnc2NyaXB0W3NyYyQ9ImJhc2UuanMiXScpLnNyYwoJCQljb25zdCBkYXRhID0gYXdhaXQgd29ya2VyR2V0VmlkZW8oaWQsIGJhc2VqcykKCQkJbG9nZ2VyLmxvZygndmlkZW8gbG9hZGVkOiAlcycsIGlkKQoJCQlhcHAuaXNMaXZlU3RyZWFtID0KCQkJCWRhdGEucGxheWVyUmVzcG9uc2UucGxheWFiaWxpdHlTdGF0dXMubGl2ZVN0cmVhbWFiaWxpdHkgIT0gbnVsbAoJCQlpZiAoUkVTVE9SRV9PUklHSU5BTF9USVRMRV9GT1JfQ1VSUkVOVF9WSURFTykgewoJCQkJdHJ5IHsKCQkJCQlhcHBseU9yaWdpbmFsVGl0bGUoZGF0YS5tZXRhKQoJCQkJfSBjYXRjaCAoZSkgewoJCQkJCS8vIGp1c3QgbWFrZSBzdXJlIHRoZSBtYWluIGZ1bmN0aW9uIHdpbGwgd29yayBldmVuIGlmIG9yaWdpbmFsIHRpdGxlIGFwcGxpZXIgZG9lc24ndCB3b3JrCgkJCQl9CgkJCX0KCQkJYXBwLmlkID0gaWQKCQkJYXBwLnN0cmVhbSA9IGRhdGEuc3RyZWFtCgkJCWFwcC5hZGFwdGl2ZSA9IGRhdGEuYWRhcHRpdmUKCQkJYXBwLm1ldGEgPSBkYXRhLm1ldGEKCgkJCWNvbnN0IGFjdExhbmcgPSBnZXRMYW5nQ29kZSgpCgkJCWlmIChhY3RMYW5nICE9PSBudWxsKSB7CgkJCQljb25zdCBsYW5nID0gZmluZExhbmcoYWN0TGFuZykKCQkJCWxvZ2dlci5sb2coJ3lvdXR1YmUgdWkgbGFuZzogJXMnLCBhY3RMYW5nKQoJCQkJbG9nZ2VyLmxvZygneXRkbCBsYW5nOicsIGxhbmcpCgkJCQlhcHAubGFuZyA9IGxhbmcKCQkJfQoJCX0gY2F0Y2ggKGVycikgewoJCQlpZiAoZXJyID09PSAnQWRibG9jayBjb25mbGljdCcpIHsKCQkJCWNvbnN0IHN0ciA9IGFwcC5zdHJpbmdzLmdldF92aWRlb19mYWlsZWQucmVwbGFjZSgKCQkJCQknJXMnLAoJCQkJCWBodHRwczovL3d3dy55b3V0dWJlLmNvbS9nZXRfdmlkZW9faW5mbz92aWRlb19pZD0ke2lkfSZlbD1kZXRhaWxwYWdlYAoJCQkJKQoJCQkJcHJvbXB0KAoJCQkJCXN0ciwKCQkJCQknQEB8fHd3dy55b3V0dWJlLmNvbS9nZXRfdmlkZW9faW5mbz8qPWRldGFpbHBhZ2UkeGhyLGRvbWFpbj15b3V0dWJlLmNvbScKCQkJCSkKCQkJfQoJCQlsb2dnZXIuZXJyb3IoJ2xvYWQnLCBlcnIpCgkJfQoJfQoJbGV0IHByZXYgPSBudWxsCglzZXRJbnRlcnZhbCgoKSA9PiB7CgkJY29uc3QgZWwgPQoJCQkkKCcjaW5mby1jb250ZW50cycpIHx8CgkJCSQoJyN3YXRjaC1oZWFkZXInKSB8fAoJCQkkKAoJCQkJJy5wYWdlLWNvbnRhaW5lcjpub3QoW2hpZGRlbl0pIHl0bS1pdGVtLXNlY3Rpb24tcmVuZGVyZXI+bGF6eS1saXN0JwoJCQkpCgkJaWYgKGVsICYmICFlbC5jb250YWlucyhzaGFkb3dIb3N0KSkgewoJCQllbC5hcHBlbmRDaGlsZChzaGFkb3dIb3N0KQoJCX0KCQlpZiAobG9jYXRpb24uaHJlZiAhPT0gcHJldikgewoJCQlsb2dnZXIubG9nKGBwYWdlIGNoYW5nZTogJHtwcmV2fSAtPiAke2xvY2F0aW9uLmhyZWZ9YCkKCQkJcHJldiA9IGxvY2F0aW9uLmhyZWYKCQkJaWYgKGxvY2F0aW9uLnBhdGhuYW1lID09PSAnL3dhdGNoJykgewoJCQkJc2hhZG93SG9zdC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJwoJCQkJY29uc3QgaWQgPSBwYXJzZVF1ZXJ5KGxvY2F0aW9uLnNlYXJjaCkudgoJCQkJbG9nZ2VyLmxvZygnc3RhcnQgbG9hZGluZyBuZXcgdmlkZW86ICVzJywgaWQpCgkJCQlhcHAuaGlkZSA9IHRydWUgLy8gZm9sZCBpdAoJCQkJbG9hZChpZCkKCQkJfSBlbHNlIHsKCQkJCXNoYWRvd0hvc3Quc3R5bGUuZGlzcGxheSA9ICdub25lJwoJCQl9CgkJfQoJfSwgMTAwMCkKCgkvLyBsaXN0ZW4gdG8gZGFyayBtb2RlIHRvZ2dsZQoJY29uc3QgJGh0bWwgPSAkKCdodG1sJykKCW5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHsKCQlhcHAuZGFyayA9ICRodG1sLmdldEF0dHJpYnV0ZSgnZGFyaycpID09PSAndHJ1ZScKCX0pLm9ic2VydmUoJGh0bWwsIHsgYXR0cmlidXRlczogdHJ1ZSB9KQoJYXBwLmRhcmsgPSAkaHRtbC5nZXRBdHRyaWJ1dGUoJ2RhcmsnKSA9PT0gJ3RydWUnCgoJY29uc3QgY3NzID0gYAouaGlkZXsKCWRpc3BsYXk6IG5vbmU7Cn0KLnQtY2VudGVyewoJdGV4dC1hbGlnbjogY2VudGVyOwp9Ci5kLWZsZXh7CglkaXNwbGF5OiBmbGV4Owp9Ci5mLTF7CglmbGV4OiAxOwp9Ci5mcy0xNHB4ewoJZm9udC1zaXplOiAxNHB4Owp9Ci5vZi1oewoJb3ZlcmZsb3c6IGhpZGRlbjsKfQouYm94ewogIHBhZGRpbmctdG9wOiAuNWVtOwogIHBhZGRpbmctYm90dG9tOiAuNWVtOwoJYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXl0LWJvcmRlci1jb2xvcik7Cglmb250LWZhbWlseTogQXJpYWw7Cn0KLmJveC10b2dnbGV7CgltYXJnaW46IDNweDsKCXVzZXItc2VsZWN0OiBub25lOwoJLW1vei11c2VyLXNlbGVjdDogLW1vei1ub25lOwp9Ci55dGRsLWxpbmstYnRuewoJZGlzcGxheTogYmxvY2s7Cglib3JkZXI6IDFweCBzb2xpZCAhaW1wb3J0YW50OwoJYm9yZGVyLXJhZGl1czogM3B4OwoJdGV4dC1kZWNvcmF0aW9uOiBub25lICFpbXBvcnRhbnQ7CglvdXRsaW5lOiAwOwoJdGV4dC1hbGlnbjogY2VudGVyOwoJcGFkZGluZzogMnB4OwoJbWFyZ2luOiA1cHg7Cgljb2xvcjogYmxhY2s7Cn0KYSwgLmRpdi1hewoJdGV4dC1kZWNvcmF0aW9uOiBub25lOwoJY29sb3I6IHZhcigtLXl0LWJ1dHRvbi1jb2xvciwgaW5oZXJpdCk7Cn0KYTpob3ZlciwgLmRpdi1hOmhvdmVyewoJY29sb3I6IHZhcigtLXl0LXNwZWMtY2FsbC10by1hY3Rpb24sIGJsdWUpOwp9Ci5ib3guZGFya3sKCWNvbG9yOiB2YXIoLS15dGQtdmlkZW8tcHJpbWFyeS1pbmZvLXJlbmRlcmVyLXRpdGxlLWNvbG9yLCB2YXIoLS15dC1wcmltYXJ5LXRleHQtY29sb3IpKTsKfQouYm94LmRhcmsgLnl0ZGwtbGluay1idG57Cgljb2xvcjogdmFyKC0teXRkLXZpZGVvLXByaW1hcnktaW5mby1yZW5kZXJlci10aXRsZS1jb2xvciwgdmFyKC0teXQtcHJpbWFyeS10ZXh0LWNvbG9yKSk7Cn0KLmJveC5kYXJrIC55dGRsLWxpbmstYnRuOmhvdmVyewoJY29sb3I6IHJnYmEoMjAwLCAyMDAsIDI1NSwgMC44KTsKfQouYm94LmRhcmsgLmJveC10b2dnbGU6aG92ZXJ7Cgljb2xvcjogcmdiYSgyMDAsIDIwMCwgMjU1LCAwLjgpOwp9Ci5jLXBvaW50ZXJ7CgljdXJzb3I6IHBvaW50ZXI7Cn0KLmxoLTIwewoJbGluZS1oZWlnaHQ6IDIwcHg7Cn0KYAoJc2hhZG93LmFwcGVuZENoaWxkKCRlbCgnc3R5bGUnLCB7IHRleHRDb250ZW50OiBjc3MgfSkpCn0pKCkK","requires":[{"meta":{"name":"vue.js","url":"https://unpkg.com/vue@2.6.10/dist/vue.js","ts":1608788131854,"mimetype":"text/javascript"},"source":"LyohCiAqIFZ1ZS5qcyB2Mi42LjEwCiAqIChjKSAyMDE0LTIwMTkgRXZhbiBZb3UKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLgogKi8KKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHsKICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6CiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDoKICAoZ2xvYmFsID0gZ2xvYmFsIHx8IHNlbGYsIGdsb2JhbC5WdWUgPSBmYWN0b3J5KCkpOwp9KHRoaXMsIGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnOwoKICAvKiAgKi8KCiAgdmFyIGVtcHR5T2JqZWN0ID0gT2JqZWN0LmZyZWV6ZSh7fSk7CgogIC8vIFRoZXNlIGhlbHBlcnMgcHJvZHVjZSBiZXR0ZXIgVk0gY29kZSBpbiBKUyBlbmdpbmVzIGR1ZSB0byB0aGVpcgogIC8vIGV4cGxpY2l0bmVzcyBhbmQgZnVuY3Rpb24gaW5saW5pbmcuCiAgZnVuY3Rpb24gaXNVbmRlZiAodikgewogICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCB8fCB2ID09PSBudWxsCiAgfQoKICBmdW5jdGlvbiBpc0RlZiAodikgewogICAgcmV0dXJuIHYgIT09IHVuZGVmaW5lZCAmJiB2ICE9PSBudWxsCiAgfQoKICBmdW5jdGlvbiBpc1RydWUgKHYpIHsKICAgIHJldHVybiB2ID09PSB0cnVlCiAgfQoKICBmdW5jdGlvbiBpc0ZhbHNlICh2KSB7CiAgICByZXR1cm4gdiA9PT0gZmFsc2UKICB9CgogIC8qKgogICAqIENoZWNrIGlmIHZhbHVlIGlzIHByaW1pdGl2ZS4KICAgKi8KICBmdW5jdGlvbiBpc1ByaW1pdGl2ZSAodmFsdWUpIHsKICAgIHJldHVybiAoCiAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwKICAgICAgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fAogICAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmUKICAgICAgdHlwZW9mIHZhbHVlID09PSAnc3ltYm9sJyB8fAogICAgICB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJwogICAgKQogIH0KCiAgLyoqCiAgICogUXVpY2sgb2JqZWN0IGNoZWNrIC0gdGhpcyBpcyBwcmltYXJpbHkgdXNlZCB0byB0ZWxsCiAgICogT2JqZWN0cyBmcm9tIHByaW1pdGl2ZSB2YWx1ZXMgd2hlbiB3ZSBrbm93IHRoZSB2YWx1ZQogICAqIGlzIGEgSlNPTi1jb21wbGlhbnQgdHlwZS4KICAgKi8KICBmdW5jdGlvbiBpc09iamVjdCAob2JqKSB7CiAgICByZXR1cm4gb2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnCiAgfQoKICAvKioKICAgKiBHZXQgdGhlIHJhdyB0eXBlIHN0cmluZyBvZiBhIHZhbHVlLCBlLmcuLCBbb2JqZWN0IE9iamVjdF0uCiAgICovCiAgdmFyIF90b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7CgogIGZ1bmN0aW9uIHRvUmF3VHlwZSAodmFsdWUpIHsKICAgIHJldHVybiBfdG9TdHJpbmcuY2FsbCh2YWx1ZSkuc2xpY2UoOCwgLTEpCiAgfQoKICAvKioKICAgKiBTdHJpY3Qgb2JqZWN0IHR5cGUgY2hlY2suIE9ubHkgcmV0dXJucyB0cnVlCiAgICogZm9yIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0cy4KICAgKi8KICBmdW5jdGlvbiBpc1BsYWluT2JqZWN0IChvYmopIHsKICAgIHJldHVybiBfdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBPYmplY3RdJwogIH0KCiAgZnVuY3Rpb24gaXNSZWdFeHAgKHYpIHsKICAgIHJldHVybiBfdG9TdHJpbmcuY2FsbCh2KSA9PT0gJ1tvYmplY3QgUmVnRXhwXScKICB9CgogIC8qKgogICAqIENoZWNrIGlmIHZhbCBpcyBhIHZhbGlkIGFycmF5IGluZGV4LgogICAqLwogIGZ1bmN0aW9uIGlzVmFsaWRBcnJheUluZGV4ICh2YWwpIHsKICAgIHZhciBuID0gcGFyc2VGbG9hdChTdHJpbmcodmFsKSk7CiAgICByZXR1cm4gbiA+PSAwICYmIE1hdGguZmxvb3IobikgPT09IG4gJiYgaXNGaW5pdGUodmFsKQogIH0KCiAgZnVuY3Rpb24gaXNQcm9taXNlICh2YWwpIHsKICAgIHJldHVybiAoCiAgICAgIGlzRGVmKHZhbCkgJiYKICAgICAgdHlwZW9mIHZhbC50aGVuID09PSAnZnVuY3Rpb24nICYmCiAgICAgIHR5cGVvZiB2YWwuY2F0Y2ggPT09ICdmdW5jdGlvbicKICAgICkKICB9CgogIC8qKgogICAqIENvbnZlcnQgYSB2YWx1ZSB0byBhIHN0cmluZyB0aGF0IGlzIGFjdHVhbGx5IHJlbmRlcmVkLgogICAqLwogIGZ1bmN0aW9uIHRvU3RyaW5nICh2YWwpIHsKICAgIHJldHVybiB2YWwgPT0gbnVsbAogICAgICA/ICcnCiAgICAgIDogQXJyYXkuaXNBcnJheSh2YWwpIHx8IChpc1BsYWluT2JqZWN0KHZhbCkgJiYgdmFsLnRvU3RyaW5nID09PSBfdG9TdHJpbmcpCiAgICAgICAgPyBKU09OLnN0cmluZ2lmeSh2YWwsIG51bGwsIDIpCiAgICAgICAgOiBTdHJpbmcodmFsKQogIH0KCiAgLyoqCiAgICogQ29udmVydCBhbiBpbnB1dCB2YWx1ZSB0byBhIG51bWJlciBmb3IgcGVyc2lzdGVuY2UuCiAgICogSWYgdGhlIGNvbnZlcnNpb24gZmFpbHMsIHJldHVybiBvcmlnaW5hbCBzdHJpbmcuCiAgICovCiAgZnVuY3Rpb24gdG9OdW1iZXIgKHZhbCkgewogICAgdmFyIG4gPSBwYXJzZUZsb2F0KHZhbCk7CiAgICByZXR1cm4gaXNOYU4obikgPyB2YWwgOiBuCiAgfQoKICAvKioKICAgKiBNYWtlIGEgbWFwIGFuZCByZXR1cm4gYSBmdW5jdGlvbiBmb3IgY2hlY2tpbmcgaWYgYSBrZXkKICAgKiBpcyBpbiB0aGF0IG1hcC4KICAgKi8KICBmdW5jdGlvbiBtYWtlTWFwICgKICAgIHN0ciwKICAgIGV4cGVjdHNMb3dlckNhc2UKICApIHsKICAgIHZhciBtYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgdmFyIGxpc3QgPSBzdHIuc3BsaXQoJywnKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewogICAgICBtYXBbbGlzdFtpXV0gPSB0cnVlOwogICAgfQogICAgcmV0dXJuIGV4cGVjdHNMb3dlckNhc2UKICAgICAgPyBmdW5jdGlvbiAodmFsKSB7IHJldHVybiBtYXBbdmFsLnRvTG93ZXJDYXNlKCldOyB9CiAgICAgIDogZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gbWFwW3ZhbF07IH0KICB9CgogIC8qKgogICAqIENoZWNrIGlmIGEgdGFnIGlzIGEgYnVpbHQtaW4gdGFnLgogICAqLwogIHZhciBpc0J1aWx0SW5UYWcgPSBtYWtlTWFwKCdzbG90LGNvbXBvbmVudCcsIHRydWUpOwoKICAvKioKICAgKiBDaGVjayBpZiBhbiBhdHRyaWJ1dGUgaXMgYSByZXNlcnZlZCBhdHRyaWJ1dGUuCiAgICovCiAgdmFyIGlzUmVzZXJ2ZWRBdHRyaWJ1dGUgPSBtYWtlTWFwKCdrZXkscmVmLHNsb3Qsc2xvdC1zY29wZSxpcycpOwoKICAvKioKICAgKiBSZW1vdmUgYW4gaXRlbSBmcm9tIGFuIGFycmF5LgogICAqLwogIGZ1bmN0aW9uIHJlbW92ZSAoYXJyLCBpdGVtKSB7CiAgICBpZiAoYXJyLmxlbmd0aCkgewogICAgICB2YXIgaW5kZXggPSBhcnIuaW5kZXhPZihpdGVtKTsKICAgICAgaWYgKGluZGV4ID4gLTEpIHsKICAgICAgICByZXR1cm4gYXJyLnNwbGljZShpbmRleCwgMSkKICAgICAgfQogICAgfQogIH0KCiAgLyoqCiAgICogQ2hlY2sgd2hldGhlciBhbiBvYmplY3QgaGFzIHRoZSBwcm9wZXJ0eS4KICAgKi8KICB2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwogIGZ1bmN0aW9uIGhhc093biAob2JqLCBrZXkpIHsKICAgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KQogIH0KCiAgLyoqCiAgICogQ3JlYXRlIGEgY2FjaGVkIHZlcnNpb24gb2YgYSBwdXJlIGZ1bmN0aW9uLgogICAqLwogIGZ1bmN0aW9uIGNhY2hlZCAoZm4pIHsKICAgIHZhciBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICByZXR1cm4gKGZ1bmN0aW9uIGNhY2hlZEZuIChzdHIpIHsKICAgICAgdmFyIGhpdCA9IGNhY2hlW3N0cl07CiAgICAgIHJldHVybiBoaXQgfHwgKGNhY2hlW3N0cl0gPSBmbihzdHIpKQogICAgfSkKICB9CgogIC8qKgogICAqIENhbWVsaXplIGEgaHlwaGVuLWRlbGltaXRlZCBzdHJpbmcuCiAgICovCiAgdmFyIGNhbWVsaXplUkUgPSAvLShcdykvZzsKICB2YXIgY2FtZWxpemUgPSBjYWNoZWQoZnVuY3Rpb24gKHN0cikgewogICAgcmV0dXJuIHN0ci5yZXBsYWNlKGNhbWVsaXplUkUsIGZ1bmN0aW9uIChfLCBjKSB7IHJldHVybiBjID8gYy50b1VwcGVyQ2FzZSgpIDogJyc7IH0pCiAgfSk7CgogIC8qKgogICAqIENhcGl0YWxpemUgYSBzdHJpbmcuCiAgICovCiAgdmFyIGNhcGl0YWxpemUgPSBjYWNoZWQoZnVuY3Rpb24gKHN0cikgewogICAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKQogIH0pOwoKICAvKioKICAgKiBIeXBoZW5hdGUgYSBjYW1lbENhc2Ugc3RyaW5nLgogICAqLwogIHZhciBoeXBoZW5hdGVSRSA9IC9cQihbQS1aXSkvZzsKICB2YXIgaHlwaGVuYXRlID0gY2FjaGVkKGZ1bmN0aW9uIChzdHIpIHsKICAgIHJldHVybiBzdHIucmVwbGFjZShoeXBoZW5hdGVSRSwgJy0kMScpLnRvTG93ZXJDYXNlKCkKICB9KTsKCiAgLyoqCiAgICogU2ltcGxlIGJpbmQgcG9seWZpbGwgZm9yIGVudmlyb25tZW50cyB0aGF0IGRvIG5vdCBzdXBwb3J0IGl0LAogICAqIGUuZy4sIFBoYW50b21KUyAxLnguIFRlY2huaWNhbGx5LCB3ZSBkb24ndCBuZWVkIHRoaXMgYW55bW9yZQogICAqIHNpbmNlIG5hdGl2ZSBiaW5kIGlzIG5vdyBwZXJmb3JtYW50IGVub3VnaCBpbiBtb3N0IGJyb3dzZXJzLgogICAqIEJ1dCByZW1vdmluZyBpdCB3b3VsZCBtZWFuIGJyZWFraW5nIGNvZGUgdGhhdCB3YXMgYWJsZSB0byBydW4gaW4KICAgKiBQaGFudG9tSlMgMS54LCBzbyB0aGlzIG11c3QgYmUga2VwdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eS4KICAgKi8KCiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICBmdW5jdGlvbiBwb2x5ZmlsbEJpbmQgKGZuLCBjdHgpIHsKICAgIGZ1bmN0aW9uIGJvdW5kRm4gKGEpIHsKICAgICAgdmFyIGwgPSBhcmd1bWVudHMubGVuZ3RoOwogICAgICByZXR1cm4gbAogICAgICAgID8gbCA+IDEKICAgICAgICAgID8gZm4uYXBwbHkoY3R4LCBhcmd1bWVudHMpCiAgICAgICAgICA6IGZuLmNhbGwoY3R4LCBhKQogICAgICAgIDogZm4uY2FsbChjdHgpCiAgICB9CgogICAgYm91bmRGbi5fbGVuZ3RoID0gZm4ubGVuZ3RoOwogICAgcmV0dXJuIGJvdW5kRm4KICB9CgogIGZ1bmN0aW9uIG5hdGl2ZUJpbmQgKGZuLCBjdHgpIHsKICAgIHJldHVybiBmbi5iaW5kKGN0eCkKICB9CgogIHZhciBiaW5kID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQKICAgID8gbmF0aXZlQmluZAogICAgOiBwb2x5ZmlsbEJpbmQ7CgogIC8qKgogICAqIENvbnZlcnQgYW4gQXJyYXktbGlrZSBvYmplY3QgdG8gYSByZWFsIEFycmF5LgogICAqLwogIGZ1bmN0aW9uIHRvQXJyYXkgKGxpc3QsIHN0YXJ0KSB7CiAgICBzdGFydCA9IHN0YXJ0IHx8IDA7CiAgICB2YXIgaSA9IGxpc3QubGVuZ3RoIC0gc3RhcnQ7CiAgICB2YXIgcmV0ID0gbmV3IEFycmF5KGkpOwogICAgd2hpbGUgKGktLSkgewogICAgICByZXRbaV0gPSBsaXN0W2kgKyBzdGFydF07CiAgICB9CiAgICByZXR1cm4gcmV0CiAgfQoKICAvKioKICAgKiBNaXggcHJvcGVydGllcyBpbnRvIHRhcmdldCBvYmplY3QuCiAgICovCiAgZnVuY3Rpb24gZXh0ZW5kICh0bywgX2Zyb20pIHsKICAgIGZvciAodmFyIGtleSBpbiBfZnJvbSkgewogICAgICB0b1trZXldID0gX2Zyb21ba2V5XTsKICAgIH0KICAgIHJldHVybiB0bwogIH0KCiAgLyoqCiAgICogTWVyZ2UgYW4gQXJyYXkgb2YgT2JqZWN0cyBpbnRvIGEgc2luZ2xlIE9iamVjdC4KICAgKi8KICBmdW5jdGlvbiB0b09iamVjdCAoYXJyKSB7CiAgICB2YXIgcmVzID0ge307CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICBpZiAoYXJyW2ldKSB7CiAgICAgICAgZXh0ZW5kKHJlcywgYXJyW2ldKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi8KCiAgLyoqCiAgICogUGVyZm9ybSBubyBvcGVyYXRpb24uCiAgICogU3R1YmJpbmcgYXJncyB0byBtYWtlIEZsb3cgaGFwcHkgd2l0aG91dCBsZWF2aW5nIHVzZWxlc3MgdHJhbnNwaWxlZCBjb2RlCiAgICogd2l0aCAuLi5yZXN0IChodHRwczovL2Zsb3cub3JnL2Jsb2cvMjAxNy8wNS8wNy9TdHJpY3QtRnVuY3Rpb24tQ2FsbC1Bcml0eS8pLgogICAqLwogIGZ1bmN0aW9uIG5vb3AgKGEsIGIsIGMpIHt9CgogIC8qKgogICAqIEFsd2F5cyByZXR1cm4gZmFsc2UuCiAgICovCiAgdmFyIG5vID0gZnVuY3Rpb24gKGEsIGIsIGMpIHsgcmV0dXJuIGZhbHNlOyB9OwoKICAvKiBlc2xpbnQtZW5hYmxlIG5vLXVudXNlZC12YXJzICovCgogIC8qKgogICAqIFJldHVybiB0aGUgc2FtZSB2YWx1ZS4KICAgKi8KICB2YXIgaWRlbnRpdHkgPSBmdW5jdGlvbiAoXykgeyByZXR1cm4gXzsgfTsKCiAgLyoqCiAgICogR2VuZXJhdGUgYSBzdHJpbmcgY29udGFpbmluZyBzdGF0aWMga2V5cyBmcm9tIGNvbXBpbGVyIG1vZHVsZXMuCiAgICovCiAgZnVuY3Rpb24gZ2VuU3RhdGljS2V5cyAobW9kdWxlcykgewogICAgcmV0dXJuIG1vZHVsZXMucmVkdWNlKGZ1bmN0aW9uIChrZXlzLCBtKSB7CiAgICAgIHJldHVybiBrZXlzLmNvbmNhdChtLnN0YXRpY0tleXMgfHwgW10pCiAgICB9LCBbXSkuam9pbignLCcpCiAgfQoKICAvKioKICAgKiBDaGVjayBpZiB0d28gdmFsdWVzIGFyZSBsb29zZWx5IGVxdWFsIC0gdGhhdCBpcywKICAgKiBpZiB0aGV5IGFyZSBwbGFpbiBvYmplY3RzLCBkbyB0aGV5IGhhdmUgdGhlIHNhbWUgc2hhcGU/CiAgICovCiAgZnVuY3Rpb24gbG9vc2VFcXVhbCAoYSwgYikgewogICAgaWYgKGEgPT09IGIpIHsgcmV0dXJuIHRydWUgfQogICAgdmFyIGlzT2JqZWN0QSA9IGlzT2JqZWN0KGEpOwogICAgdmFyIGlzT2JqZWN0QiA9IGlzT2JqZWN0KGIpOwogICAgaWYgKGlzT2JqZWN0QSAmJiBpc09iamVjdEIpIHsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgaXNBcnJheUEgPSBBcnJheS5pc0FycmF5KGEpOwogICAgICAgIHZhciBpc0FycmF5QiA9IEFycmF5LmlzQXJyYXkoYik7CiAgICAgICAgaWYgKGlzQXJyYXlBICYmIGlzQXJyYXlCKSB7CiAgICAgICAgICByZXR1cm4gYS5sZW5ndGggPT09IGIubGVuZ3RoICYmIGEuZXZlcnkoZnVuY3Rpb24gKGUsIGkpIHsKICAgICAgICAgICAgcmV0dXJuIGxvb3NlRXF1YWwoZSwgYltpXSkKICAgICAgICAgIH0pCiAgICAgICAgfSBlbHNlIGlmIChhIGluc3RhbmNlb2YgRGF0ZSAmJiBiIGluc3RhbmNlb2YgRGF0ZSkgewogICAgICAgICAgcmV0dXJuIGEuZ2V0VGltZSgpID09PSBiLmdldFRpbWUoKQogICAgICAgIH0gZWxzZSBpZiAoIWlzQXJyYXlBICYmICFpc0FycmF5QikgewogICAgICAgICAgdmFyIGtleXNBID0gT2JqZWN0LmtleXMoYSk7CiAgICAgICAgICB2YXIga2V5c0IgPSBPYmplY3Qua2V5cyhiKTsKICAgICAgICAgIHJldHVybiBrZXlzQS5sZW5ndGggPT09IGtleXNCLmxlbmd0aCAmJiBrZXlzQS5ldmVyeShmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgIHJldHVybiBsb29zZUVxdWFsKGFba2V5XSwgYltrZXldKQogICAgICAgICAgfSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgIH0gZWxzZSBpZiAoIWlzT2JqZWN0QSAmJiAhaXNPYmplY3RCKSB7CiAgICAgIHJldHVybiBTdHJpbmcoYSkgPT09IFN0cmluZyhiKQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGZhbHNlCiAgICB9CiAgfQoKICAvKioKICAgKiBSZXR1cm4gdGhlIGZpcnN0IGluZGV4IGF0IHdoaWNoIGEgbG9vc2VseSBlcXVhbCB2YWx1ZSBjYW4gYmUKICAgKiBmb3VuZCBpbiB0aGUgYXJyYXkgKGlmIHZhbHVlIGlzIGEgcGxhaW4gb2JqZWN0LCB0aGUgYXJyYXkgbXVzdAogICAqIGNvbnRhaW4gYW4gb2JqZWN0IG9mIHRoZSBzYW1lIHNoYXBlKSwgb3IgLTEgaWYgaXQgaXMgbm90IHByZXNlbnQuCiAgICovCiAgZnVuY3Rpb24gbG9vc2VJbmRleE9mIChhcnIsIHZhbCkgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKGxvb3NlRXF1YWwoYXJyW2ldLCB2YWwpKSB7IHJldHVybiBpIH0KICAgIH0KICAgIHJldHVybiAtMQogIH0KCiAgLyoqCiAgICogRW5zdXJlIGEgZnVuY3Rpb24gaXMgY2FsbGVkIG9ubHkgb25jZS4KICAgKi8KICBmdW5jdGlvbiBvbmNlIChmbikgewogICAgdmFyIGNhbGxlZCA9IGZhbHNlOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCFjYWxsZWQpIHsKICAgICAgICBjYWxsZWQgPSB0cnVlOwogICAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgIH0KICB9CgogIHZhciBTU1JfQVRUUiA9ICdkYXRhLXNlcnZlci1yZW5kZXJlZCc7CgogIHZhciBBU1NFVF9UWVBFUyA9IFsKICAgICdjb21wb25lbnQnLAogICAgJ2RpcmVjdGl2ZScsCiAgICAnZmlsdGVyJwogIF07CgogIHZhciBMSUZFQ1lDTEVfSE9PS1MgPSBbCiAgICAnYmVmb3JlQ3JlYXRlJywKICAgICdjcmVhdGVkJywKICAgICdiZWZvcmVNb3VudCcsCiAgICAnbW91bnRlZCcsCiAgICAnYmVmb3JlVXBkYXRlJywKICAgICd1cGRhdGVkJywKICAgICdiZWZvcmVEZXN0cm95JywKICAgICdkZXN0cm95ZWQnLAogICAgJ2FjdGl2YXRlZCcsCiAgICAnZGVhY3RpdmF0ZWQnLAogICAgJ2Vycm9yQ2FwdHVyZWQnLAogICAgJ3NlcnZlclByZWZldGNoJwogIF07CgogIC8qICAqLwoKCgogIHZhciBjb25maWcgPSAoewogICAgLyoqCiAgICAgKiBPcHRpb24gbWVyZ2Ugc3RyYXRlZ2llcyAodXNlZCBpbiBjb3JlL3V0aWwvb3B0aW9ucykKICAgICAqLwogICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lCiAgICBvcHRpb25NZXJnZVN0cmF0ZWdpZXM6IE9iamVjdC5jcmVhdGUobnVsbCksCgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIHN1cHByZXNzIHdhcm5pbmdzLgogICAgICovCiAgICBzaWxlbnQ6IGZhbHNlLAoKICAgIC8qKgogICAgICogU2hvdyBwcm9kdWN0aW9uIG1vZGUgdGlwIG1lc3NhZ2Ugb24gYm9vdD8KICAgICAqLwogICAgcHJvZHVjdGlvblRpcDogImRldmVsb3BtZW50IiAhPT0gJ3Byb2R1Y3Rpb24nLAoKICAgIC8qKgogICAgICogV2hldGhlciB0byBlbmFibGUgZGV2dG9vbHMKICAgICAqLwogICAgZGV2dG9vbHM6ICJkZXZlbG9wbWVudCIgIT09ICdwcm9kdWN0aW9uJywKCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gcmVjb3JkIHBlcmYKICAgICAqLwogICAgcGVyZm9ybWFuY2U6IGZhbHNlLAoKICAgIC8qKgogICAgICogRXJyb3IgaGFuZGxlciBmb3Igd2F0Y2hlciBlcnJvcnMKICAgICAqLwogICAgZXJyb3JIYW5kbGVyOiBudWxsLAoKICAgIC8qKgogICAgICogV2FybiBoYW5kbGVyIGZvciB3YXRjaGVyIHdhcm5zCiAgICAgKi8KICAgIHdhcm5IYW5kbGVyOiBudWxsLAoKICAgIC8qKgogICAgICogSWdub3JlIGNlcnRhaW4gY3VzdG9tIGVsZW1lbnRzCiAgICAgKi8KICAgIGlnbm9yZWRFbGVtZW50czogW10sCgogICAgLyoqCiAgICAgKiBDdXN0b20gdXNlciBrZXkgYWxpYXNlcyBmb3Igdi1vbgogICAgICovCiAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmUKICAgIGtleUNvZGVzOiBPYmplY3QuY3JlYXRlKG51bGwpLAoKICAgIC8qKgogICAgICogQ2hlY2sgaWYgYSB0YWcgaXMgcmVzZXJ2ZWQgc28gdGhhdCBpdCBjYW5ub3QgYmUgcmVnaXN0ZXJlZCBhcyBhCiAgICAgKiBjb21wb25lbnQuIFRoaXMgaXMgcGxhdGZvcm0tZGVwZW5kZW50IGFuZCBtYXkgYmUgb3ZlcndyaXR0ZW4uCiAgICAgKi8KICAgIGlzUmVzZXJ2ZWRUYWc6IG5vLAoKICAgIC8qKgogICAgICogQ2hlY2sgaWYgYW4gYXR0cmlidXRlIGlzIHJlc2VydmVkIHNvIHRoYXQgaXQgY2Fubm90IGJlIHVzZWQgYXMgYSBjb21wb25lbnQKICAgICAqIHByb3AuIFRoaXMgaXMgcGxhdGZvcm0tZGVwZW5kZW50IGFuZCBtYXkgYmUgb3ZlcndyaXR0ZW4uCiAgICAgKi8KICAgIGlzUmVzZXJ2ZWRBdHRyOiBubywKCiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdGFnIGlzIGFuIHVua25vd24gZWxlbWVudC4KICAgICAqIFBsYXRmb3JtLWRlcGVuZGVudC4KICAgICAqLwogICAgaXNVbmtub3duRWxlbWVudDogbm8sCgogICAgLyoqCiAgICAgKiBHZXQgdGhlIG5hbWVzcGFjZSBvZiBhbiBlbGVtZW50CiAgICAgKi8KICAgIGdldFRhZ05hbWVzcGFjZTogbm9vcCwKCiAgICAvKioKICAgICAqIFBhcnNlIHRoZSByZWFsIHRhZyBuYW1lIGZvciB0aGUgc3BlY2lmaWMgcGxhdGZvcm0uCiAgICAgKi8KICAgIHBhcnNlUGxhdGZvcm1UYWdOYW1lOiBpZGVudGl0eSwKCiAgICAvKioKICAgICAqIENoZWNrIGlmIGFuIGF0dHJpYnV0ZSBtdXN0IGJlIGJvdW5kIHVzaW5nIHByb3BlcnR5LCBlLmcuIHZhbHVlCiAgICAgKiBQbGF0Zm9ybS1kZXBlbmRlbnQuCiAgICAgKi8KICAgIG11c3RVc2VQcm9wOiBubywKCiAgICAvKioKICAgICAqIFBlcmZvcm0gdXBkYXRlcyBhc3luY2hyb25vdXNseS4gSW50ZW5kZWQgdG8gYmUgdXNlZCBieSBWdWUgVGVzdCBVdGlscwogICAgICogVGhpcyB3aWxsIHNpZ25pZmljYW50bHkgcmVkdWNlIHBlcmZvcm1hbmNlIGlmIHNldCB0byBmYWxzZS4KICAgICAqLwogICAgYXN5bmM6IHRydWUsCgogICAgLyoqCiAgICAgKiBFeHBvc2VkIGZvciBsZWdhY3kgcmVhc29ucwogICAgICovCiAgICBfbGlmZWN5Y2xlSG9va3M6IExJRkVDWUNMRV9IT09LUwogIH0pOwoKICAvKiAgKi8KCiAgLyoqCiAgICogdW5pY29kZSBsZXR0ZXJzIHVzZWQgZm9yIHBhcnNpbmcgaHRtbCB0YWdzLCBjb21wb25lbnQgbmFtZXMgYW5kIHByb3BlcnR5IHBhdGhzLgogICAqIHVzaW5nIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNTMvc2VtYW50aWNzLXNjcmlwdGluZy5odG1sI3BvdGVudGlhbGN1c3RvbWVsZW1lbnRuYW1lCiAgICogc2tpcHBpbmcgXHUxMDAwMC1cdUVGRkZGIGR1ZSB0byBpdCBmcmVlemluZyB1cCBQaGFudG9tSlMKICAgKi8KICB2YXIgdW5pY29kZVJlZ0V4cCA9IC9hLXpBLVpcdTAwQjdcdTAwQzAtXHUwMEQ2XHUwMEQ4LVx1MDBGNlx1MDBGOC1cdTAzN0RcdTAzN0YtXHUxRkZGXHUyMDBDLVx1MjAwRFx1MjAzRi1cdTIwNDBcdTIwNzAtXHUyMThGXHUyQzAwLVx1MkZFRlx1MzAwMS1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZGRC87CgogIC8qKgogICAqIENoZWNrIGlmIGEgc3RyaW5nIHN0YXJ0cyB3aXRoICQgb3IgXwogICAqLwogIGZ1bmN0aW9uIGlzUmVzZXJ2ZWQgKHN0cikgewogICAgdmFyIGMgPSAoc3RyICsgJycpLmNoYXJDb2RlQXQoMCk7CiAgICByZXR1cm4gYyA9PT0gMHgyNCB8fCBjID09PSAweDVGCiAgfQoKICAvKioKICAgKiBEZWZpbmUgYSBwcm9wZXJ0eS4KICAgKi8KICBmdW5jdGlvbiBkZWYgKG9iaiwga2V5LCB2YWwsIGVudW1lcmFibGUpIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsLAogICAgICBlbnVtZXJhYmxlOiAhIWVudW1lcmFibGUsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0pOwogIH0KCiAgLyoqCiAgICogUGFyc2Ugc2ltcGxlIHBhdGguCiAgICovCiAgdmFyIGJhaWxSRSA9IG5ldyBSZWdFeHAoKCJbXiIgKyAodW5pY29kZVJlZ0V4cC5zb3VyY2UpICsgIi4kX1xcZF0iKSk7CiAgZnVuY3Rpb24gcGFyc2VQYXRoIChwYXRoKSB7CiAgICBpZiAoYmFpbFJFLnRlc3QocGF0aCkpIHsKICAgICAgcmV0dXJuCiAgICB9CiAgICB2YXIgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCcuJyk7CiAgICByZXR1cm4gZnVuY3Rpb24gKG9iaikgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKCFvYmopIHsgcmV0dXJuIH0KICAgICAgICBvYmogPSBvYmpbc2VnbWVudHNbaV1dOwogICAgICB9CiAgICAgIHJldHVybiBvYmoKICAgIH0KICB9CgogIC8qICAqLwoKICAvLyBjYW4gd2UgdXNlIF9fcHJvdG9fXz8KICB2YXIgaGFzUHJvdG8gPSAnX19wcm90b19fJyBpbiB7fTsKCiAgLy8gQnJvd3NlciBlbnZpcm9ubWVudCBzbmlmZmluZwogIHZhciBpbkJyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJzsKICB2YXIgaW5XZWV4ID0gdHlwZW9mIFdYRW52aXJvbm1lbnQgIT09ICd1bmRlZmluZWQnICYmICEhV1hFbnZpcm9ubWVudC5wbGF0Zm9ybTsKICB2YXIgd2VleFBsYXRmb3JtID0gaW5XZWV4ICYmIFdYRW52aXJvbm1lbnQucGxhdGZvcm0udG9Mb3dlckNhc2UoKTsKICB2YXIgVUEgPSBpbkJyb3dzZXIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTsKICB2YXIgaXNJRSA9IFVBICYmIC9tc2llfHRyaWRlbnQvLnRlc3QoVUEpOwogIHZhciBpc0lFOSA9IFVBICYmIFVBLmluZGV4T2YoJ21zaWUgOS4wJykgPiAwOwogIHZhciBpc0VkZ2UgPSBVQSAmJiBVQS5pbmRleE9mKCdlZGdlLycpID4gMDsKICB2YXIgaXNBbmRyb2lkID0gKFVBICYmIFVBLmluZGV4T2YoJ2FuZHJvaWQnKSA+IDApIHx8ICh3ZWV4UGxhdGZvcm0gPT09ICdhbmRyb2lkJyk7CiAgdmFyIGlzSU9TID0gKFVBICYmIC9pcGhvbmV8aXBhZHxpcG9kfGlvcy8udGVzdChVQSkpIHx8ICh3ZWV4UGxhdGZvcm0gPT09ICdpb3MnKTsKICB2YXIgaXNDaHJvbWUgPSBVQSAmJiAvY2hyb21lXC9cZCsvLnRlc3QoVUEpICYmICFpc0VkZ2U7CiAgdmFyIGlzUGhhbnRvbUpTID0gVUEgJiYgL3BoYW50b21qcy8udGVzdChVQSk7CiAgdmFyIGlzRkYgPSBVQSAmJiBVQS5tYXRjaCgvZmlyZWZveFwvKFxkKykvKTsKCiAgLy8gRmlyZWZveCBoYXMgYSAid2F0Y2giIGZ1bmN0aW9uIG9uIE9iamVjdC5wcm90b3R5cGUuLi4KICB2YXIgbmF0aXZlV2F0Y2ggPSAoe30pLndhdGNoOwoKICB2YXIgc3VwcG9ydHNQYXNzaXZlID0gZmFsc2U7CiAgaWYgKGluQnJvd3NlcikgewogICAgdHJ5IHsKICAgICAgdmFyIG9wdHMgPSB7fTsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9wdHMsICdwYXNzaXZlJywgKHsKICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCAoKSB7CiAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgICAgICAgc3VwcG9ydHNQYXNzaXZlID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pKTsgLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL2Zsb3cvaXNzdWVzLzI4NQogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGVzdC1wYXNzaXZlJywgbnVsbCwgb3B0cyk7CiAgICB9IGNhdGNoIChlKSB7fQogIH0KCiAgLy8gdGhpcyBuZWVkcyB0byBiZSBsYXp5LWV2YWxlZCBiZWNhdXNlIHZ1ZSBtYXkgYmUgcmVxdWlyZWQgYmVmb3JlCiAgLy8gdnVlLXNlcnZlci1yZW5kZXJlciBjYW4gc2V0IFZVRV9FTlYKICB2YXIgX2lzU2VydmVyOwogIHZhciBpc1NlcnZlclJlbmRlcmluZyA9IGZ1bmN0aW9uICgpIHsKICAgIGlmIChfaXNTZXJ2ZXIgPT09IHVuZGVmaW5lZCkgewogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgaWYgKCFpbkJyb3dzZXIgJiYgIWluV2VleCAmJiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIC8vIGRldGVjdCBwcmVzZW5jZSBvZiB2dWUtc2VydmVyLXJlbmRlcmVyIGFuZCBhdm9pZAogICAgICAgIC8vIFdlYnBhY2sgc2hpbW1pbmcgdGhlIHByb2Nlc3MKICAgICAgICBfaXNTZXJ2ZXIgPSBnbG9iYWxbJ3Byb2Nlc3MnXSAmJiBnbG9iYWxbJ3Byb2Nlc3MnXS5lbnYuVlVFX0VOViA9PT0gJ3NlcnZlcic7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX2lzU2VydmVyID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBfaXNTZXJ2ZXIKICB9OwoKICAvLyBkZXRlY3QgZGV2dG9vbHMKICB2YXIgZGV2dG9vbHMgPSBpbkJyb3dzZXIgJiYgd2luZG93Ll9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX187CgogIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgZnVuY3Rpb24gaXNOYXRpdmUgKEN0b3IpIHsKICAgIHJldHVybiB0eXBlb2YgQ3RvciA9PT0gJ2Z1bmN0aW9uJyAmJiAvbmF0aXZlIGNvZGUvLnRlc3QoQ3Rvci50b1N0cmluZygpKQogIH0KCiAgdmFyIGhhc1N5bWJvbCA9CiAgICB0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBpc05hdGl2ZShTeW1ib2wpICYmCiAgICB0eXBlb2YgUmVmbGVjdCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoUmVmbGVjdC5vd25LZXlzKTsKCiAgdmFyIF9TZXQ7CiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovIC8vICRmbG93LWRpc2FibGUtbGluZQogIGlmICh0eXBlb2YgU2V0ICE9PSAndW5kZWZpbmVkJyAmJiBpc05hdGl2ZShTZXQpKSB7CiAgICAvLyB1c2UgbmF0aXZlIFNldCB3aGVuIGF2YWlsYWJsZS4KICAgIF9TZXQgPSBTZXQ7CiAgfSBlbHNlIHsKICAgIC8vIGEgbm9uLXN0YW5kYXJkIFNldCBwb2x5ZmlsbCB0aGF0IG9ubHkgd29ya3Mgd2l0aCBwcmltaXRpdmUga2V5cy4KICAgIF9TZXQgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uICgpIHsKICAgICAgZnVuY3Rpb24gU2V0ICgpIHsKICAgICAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgIH0KICAgICAgU2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiBoYXMgKGtleSkgewogICAgICAgIHJldHVybiB0aGlzLnNldFtrZXldID09PSB0cnVlCiAgICAgIH07CiAgICAgIFNldC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gYWRkIChrZXkpIHsKICAgICAgICB0aGlzLnNldFtrZXldID0gdHJ1ZTsKICAgICAgfTsKICAgICAgU2V0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyICgpIHsKICAgICAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgIH07CgogICAgICByZXR1cm4gU2V0OwogICAgfSgpKTsKICB9CgogIC8qICAqLwoKICB2YXIgd2FybiA9IG5vb3A7CiAgdmFyIHRpcCA9IG5vb3A7CiAgdmFyIGdlbmVyYXRlQ29tcG9uZW50VHJhY2UgPSAobm9vcCk7IC8vIHdvcmsgYXJvdW5kIGZsb3cgY2hlY2sKICB2YXIgZm9ybWF0Q29tcG9uZW50TmFtZSA9IChub29wKTsKCiAgewogICAgdmFyIGhhc0NvbnNvbGUgPSB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCc7CiAgICB2YXIgY2xhc3NpZnlSRSA9IC8oPzpefFstX10pKFx3KS9nOwogICAgdmFyIGNsYXNzaWZ5ID0gZnVuY3Rpb24gKHN0cikgeyByZXR1cm4gc3RyCiAgICAgIC5yZXBsYWNlKGNsYXNzaWZ5UkUsIGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLnRvVXBwZXJDYXNlKCk7IH0pCiAgICAgIC5yZXBsYWNlKC9bLV9dL2csICcnKTsgfTsKCiAgICB3YXJuID0gZnVuY3Rpb24gKG1zZywgdm0pIHsKICAgICAgdmFyIHRyYWNlID0gdm0gPyBnZW5lcmF0ZUNvbXBvbmVudFRyYWNlKHZtKSA6ICcnOwoKICAgICAgaWYgKGNvbmZpZy53YXJuSGFuZGxlcikgewogICAgICAgIGNvbmZpZy53YXJuSGFuZGxlci5jYWxsKG51bGwsIG1zZywgdm0sIHRyYWNlKTsKICAgICAgfSBlbHNlIGlmIChoYXNDb25zb2xlICYmICghY29uZmlnLnNpbGVudCkpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCgiW1Z1ZSB3YXJuXTogIiArIG1zZyArIHRyYWNlKSk7CiAgICAgIH0KICAgIH07CgogICAgdGlwID0gZnVuY3Rpb24gKG1zZywgdm0pIHsKICAgICAgaWYgKGhhc0NvbnNvbGUgJiYgKCFjb25maWcuc2lsZW50KSkgewogICAgICAgIGNvbnNvbGUud2FybigiW1Z1ZSB0aXBdOiAiICsgbXNnICsgKAogICAgICAgICAgdm0gPyBnZW5lcmF0ZUNvbXBvbmVudFRyYWNlKHZtKSA6ICcnCiAgICAgICAgKSk7CiAgICAgIH0KICAgIH07CgogICAgZm9ybWF0Q29tcG9uZW50TmFtZSA9IGZ1bmN0aW9uICh2bSwgaW5jbHVkZUZpbGUpIHsKICAgICAgaWYgKHZtLiRyb290ID09PSB2bSkgewogICAgICAgIHJldHVybiAnPFJvb3Q+JwogICAgICB9CiAgICAgIHZhciBvcHRpb25zID0gdHlwZW9mIHZtID09PSAnZnVuY3Rpb24nICYmIHZtLmNpZCAhPSBudWxsCiAgICAgICAgPyB2bS5vcHRpb25zCiAgICAgICAgOiB2bS5faXNWdWUKICAgICAgICAgID8gdm0uJG9wdGlvbnMgfHwgdm0uY29uc3RydWN0b3Iub3B0aW9ucwogICAgICAgICAgOiB2bTsKICAgICAgdmFyIG5hbWUgPSBvcHRpb25zLm5hbWUgfHwgb3B0aW9ucy5fY29tcG9uZW50VGFnOwogICAgICB2YXIgZmlsZSA9IG9wdGlvbnMuX19maWxlOwogICAgICBpZiAoIW5hbWUgJiYgZmlsZSkgewogICAgICAgIHZhciBtYXRjaCA9IGZpbGUubWF0Y2goLyhbXi9cXF0rKVwudnVlJC8pOwogICAgICAgIG5hbWUgPSBtYXRjaCAmJiBtYXRjaFsxXTsKICAgICAgfQoKICAgICAgcmV0dXJuICgKICAgICAgICAobmFtZSA/ICgiPCIgKyAoY2xhc3NpZnkobmFtZSkpICsgIj4iKSA6ICI8QW5vbnltb3VzPiIpICsKICAgICAgICAoZmlsZSAmJiBpbmNsdWRlRmlsZSAhPT0gZmFsc2UgPyAoIiBhdCAiICsgZmlsZSkgOiAnJykKICAgICAgKQogICAgfTsKCiAgICB2YXIgcmVwZWF0ID0gZnVuY3Rpb24gKHN0ciwgbikgewogICAgICB2YXIgcmVzID0gJyc7CiAgICAgIHdoaWxlIChuKSB7CiAgICAgICAgaWYgKG4gJSAyID09PSAxKSB7IHJlcyArPSBzdHI7IH0KICAgICAgICBpZiAobiA+IDEpIHsgc3RyICs9IHN0cjsgfQogICAgICAgIG4gPj49IDE7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcwogICAgfTsKCiAgICBnZW5lcmF0ZUNvbXBvbmVudFRyYWNlID0gZnVuY3Rpb24gKHZtKSB7CiAgICAgIGlmICh2bS5faXNWdWUgJiYgdm0uJHBhcmVudCkgewogICAgICAgIHZhciB0cmVlID0gW107CiAgICAgICAgdmFyIGN1cnJlbnRSZWN1cnNpdmVTZXF1ZW5jZSA9IDA7CiAgICAgICAgd2hpbGUgKHZtKSB7CiAgICAgICAgICBpZiAodHJlZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHZhciBsYXN0ID0gdHJlZVt0cmVlLmxlbmd0aCAtIDFdOwogICAgICAgICAgICBpZiAobGFzdC5jb25zdHJ1Y3RvciA9PT0gdm0uY29uc3RydWN0b3IpIHsKICAgICAgICAgICAgICBjdXJyZW50UmVjdXJzaXZlU2VxdWVuY2UrKzsKICAgICAgICAgICAgICB2bSA9IHZtLiRwYXJlbnQ7CiAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50UmVjdXJzaXZlU2VxdWVuY2UgPiAwKSB7CiAgICAgICAgICAgICAgdHJlZVt0cmVlLmxlbmd0aCAtIDFdID0gW2xhc3QsIGN1cnJlbnRSZWN1cnNpdmVTZXF1ZW5jZV07CiAgICAgICAgICAgICAgY3VycmVudFJlY3Vyc2l2ZVNlcXVlbmNlID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdHJlZS5wdXNoKHZtKTsKICAgICAgICAgIHZtID0gdm0uJHBhcmVudDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICdcblxuZm91bmQgaW5cblxuJyArIHRyZWUKICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHZtLCBpKSB7IHJldHVybiAoIiIgKyAoaSA9PT0gMCA/ICctLS0+ICcgOiByZXBlYXQoJyAnLCA1ICsgaSAqIDIpKSArIChBcnJheS5pc0FycmF5KHZtKQogICAgICAgICAgICAgID8gKChmb3JtYXRDb21wb25lbnROYW1lKHZtWzBdKSkgKyAiLi4uICgiICsgKHZtWzFdKSArICIgcmVjdXJzaXZlIGNhbGxzKSIpCiAgICAgICAgICAgICAgOiBmb3JtYXRDb21wb25lbnROYW1lKHZtKSkpOyB9KQogICAgICAgICAgLmpvaW4oJ1xuJykKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gKCJcblxuKGZvdW5kIGluICIgKyAoZm9ybWF0Q29tcG9uZW50TmFtZSh2bSkpICsgIikiKQogICAgICB9CiAgICB9OwogIH0KCiAgLyogICovCgogIHZhciB1aWQgPSAwOwoKICAvKioKICAgKiBBIGRlcCBpcyBhbiBvYnNlcnZhYmxlIHRoYXQgY2FuIGhhdmUgbXVsdGlwbGUKICAgKiBkaXJlY3RpdmVzIHN1YnNjcmliaW5nIHRvIGl0LgogICAqLwogIHZhciBEZXAgPSBmdW5jdGlvbiBEZXAgKCkgewogICAgdGhpcy5pZCA9IHVpZCsrOwogICAgdGhpcy5zdWJzID0gW107CiAgfTsKCiAgRGVwLnByb3RvdHlwZS5hZGRTdWIgPSBmdW5jdGlvbiBhZGRTdWIgKHN1YikgewogICAgdGhpcy5zdWJzLnB1c2goc3ViKTsKICB9OwoKICBEZXAucHJvdG90eXBlLnJlbW92ZVN1YiA9IGZ1bmN0aW9uIHJlbW92ZVN1YiAoc3ViKSB7CiAgICByZW1vdmUodGhpcy5zdWJzLCBzdWIpOwogIH07CgogIERlcC5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gZGVwZW5kICgpIHsKICAgIGlmIChEZXAudGFyZ2V0KSB7CiAgICAgIERlcC50YXJnZXQuYWRkRGVwKHRoaXMpOwogICAgfQogIH07CgogIERlcC5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gbm90aWZ5ICgpIHsKICAgIC8vIHN0YWJpbGl6ZSB0aGUgc3Vic2NyaWJlciBsaXN0IGZpcnN0CiAgICB2YXIgc3VicyA9IHRoaXMuc3Vicy5zbGljZSgpOwogICAgaWYgKCFjb25maWcuYXN5bmMpIHsKICAgICAgLy8gc3VicyBhcmVuJ3Qgc29ydGVkIGluIHNjaGVkdWxlciBpZiBub3QgcnVubmluZyBhc3luYwogICAgICAvLyB3ZSBuZWVkIHRvIHNvcnQgdGhlbSBub3cgdG8gbWFrZSBzdXJlIHRoZXkgZmlyZSBpbiBjb3JyZWN0CiAgICAgIC8vIG9yZGVyCiAgICAgIHN1YnMuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5pZCAtIGIuaWQ7IH0pOwogICAgfQogICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdWJzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBzdWJzW2ldLnVwZGF0ZSgpOwogICAgfQogIH07CgogIC8vIFRoZSBjdXJyZW50IHRhcmdldCB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZC4KICAvLyBUaGlzIGlzIGdsb2JhbGx5IHVuaXF1ZSBiZWNhdXNlIG9ubHkgb25lIHdhdGNoZXIKICAvLyBjYW4gYmUgZXZhbHVhdGVkIGF0IGEgdGltZS4KICBEZXAudGFyZ2V0ID0gbnVsbDsKICB2YXIgdGFyZ2V0U3RhY2sgPSBbXTsKCiAgZnVuY3Rpb24gcHVzaFRhcmdldCAodGFyZ2V0KSB7CiAgICB0YXJnZXRTdGFjay5wdXNoKHRhcmdldCk7CiAgICBEZXAudGFyZ2V0ID0gdGFyZ2V0OwogIH0KCiAgZnVuY3Rpb24gcG9wVGFyZ2V0ICgpIHsKICAgIHRhcmdldFN0YWNrLnBvcCgpOwogICAgRGVwLnRhcmdldCA9IHRhcmdldFN0YWNrW3RhcmdldFN0YWNrLmxlbmd0aCAtIDFdOwogIH0KCiAgLyogICovCgogIHZhciBWTm9kZSA9IGZ1bmN0aW9uIFZOb2RlICgKICAgIHRhZywKICAgIGRhdGEsCiAgICBjaGlsZHJlbiwKICAgIHRleHQsCiAgICBlbG0sCiAgICBjb250ZXh0LAogICAgY29tcG9uZW50T3B0aW9ucywKICAgIGFzeW5jRmFjdG9yeQogICkgewogICAgdGhpcy50YWcgPSB0YWc7CiAgICB0aGlzLmRhdGEgPSBkYXRhOwogICAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuOwogICAgdGhpcy50ZXh0ID0gdGV4dDsKICAgIHRoaXMuZWxtID0gZWxtOwogICAgdGhpcy5ucyA9IHVuZGVmaW5lZDsKICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICB0aGlzLmZuQ29udGV4dCA9IHVuZGVmaW5lZDsKICAgIHRoaXMuZm5PcHRpb25zID0gdW5kZWZpbmVkOwogICAgdGhpcy5mblNjb3BlSWQgPSB1bmRlZmluZWQ7CiAgICB0aGlzLmtleSA9IGRhdGEgJiYgZGF0YS5rZXk7CiAgICB0aGlzLmNvbXBvbmVudE9wdGlvbnMgPSBjb21wb25lbnRPcHRpb25zOwogICAgdGhpcy5jb21wb25lbnRJbnN0YW5jZSA9IHVuZGVmaW5lZDsKICAgIHRoaXMucGFyZW50ID0gdW5kZWZpbmVkOwogICAgdGhpcy5yYXcgPSBmYWxzZTsKICAgIHRoaXMuaXNTdGF0aWMgPSBmYWxzZTsKICAgIHRoaXMuaXNSb290SW5zZXJ0ID0gdHJ1ZTsKICAgIHRoaXMuaXNDb21tZW50ID0gZmFsc2U7CiAgICB0aGlzLmlzQ2xvbmVkID0gZmFsc2U7CiAgICB0aGlzLmlzT25jZSA9IGZhbHNlOwogICAgdGhpcy5hc3luY0ZhY3RvcnkgPSBhc3luY0ZhY3Rvcnk7CiAgICB0aGlzLmFzeW5jTWV0YSA9IHVuZGVmaW5lZDsKICAgIHRoaXMuaXNBc3luY1BsYWNlaG9sZGVyID0gZmFsc2U7CiAgfTsKCiAgdmFyIHByb3RvdHlwZUFjY2Vzc29ycyA9IHsgY2hpbGQ6IHsgY29uZmlndXJhYmxlOiB0cnVlIH0gfTsKCiAgLy8gREVQUkVDQVRFRDogYWxpYXMgZm9yIGNvbXBvbmVudEluc3RhbmNlIGZvciBiYWNrd2FyZHMgY29tcGF0LgogIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgcHJvdG90eXBlQWNjZXNzb3JzLmNoaWxkLmdldCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLmNvbXBvbmVudEluc3RhbmNlCiAgfTsKCiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoIFZOb2RlLnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzICk7CgogIHZhciBjcmVhdGVFbXB0eVZOb2RlID0gZnVuY3Rpb24gKHRleHQpIHsKICAgIGlmICggdGV4dCA9PT0gdm9pZCAwICkgdGV4dCA9ICcnOwoKICAgIHZhciBub2RlID0gbmV3IFZOb2RlKCk7CiAgICBub2RlLnRleHQgPSB0ZXh0OwogICAgbm9kZS5pc0NvbW1lbnQgPSB0cnVlOwogICAgcmV0dXJuIG5vZGUKICB9OwoKICBmdW5jdGlvbiBjcmVhdGVUZXh0Vk5vZGUgKHZhbCkgewogICAgcmV0dXJuIG5ldyBWTm9kZSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBTdHJpbmcodmFsKSkKICB9CgogIC8vIG9wdGltaXplZCBzaGFsbG93IGNsb25lCiAgLy8gdXNlZCBmb3Igc3RhdGljIG5vZGVzIGFuZCBzbG90IG5vZGVzIGJlY2F1c2UgdGhleSBtYXkgYmUgcmV1c2VkIGFjcm9zcwogIC8vIG11bHRpcGxlIHJlbmRlcnMsIGNsb25pbmcgdGhlbSBhdm9pZHMgZXJyb3JzIHdoZW4gRE9NIG1hbmlwdWxhdGlvbnMgcmVseQogIC8vIG9uIHRoZWlyIGVsbSByZWZlcmVuY2UuCiAgZnVuY3Rpb24gY2xvbmVWTm9kZSAodm5vZGUpIHsKICAgIHZhciBjbG9uZWQgPSBuZXcgVk5vZGUoCiAgICAgIHZub2RlLnRhZywKICAgICAgdm5vZGUuZGF0YSwKICAgICAgLy8gIzc5NzUKICAgICAgLy8gY2xvbmUgY2hpbGRyZW4gYXJyYXkgdG8gYXZvaWQgbXV0YXRpbmcgb3JpZ2luYWwgaW4gY2FzZSBvZiBjbG9uaW5nCiAgICAgIC8vIGEgY2hpbGQuCiAgICAgIHZub2RlLmNoaWxkcmVuICYmIHZub2RlLmNoaWxkcmVuLnNsaWNlKCksCiAgICAgIHZub2RlLnRleHQsCiAgICAgIHZub2RlLmVsbSwKICAgICAgdm5vZGUuY29udGV4dCwKICAgICAgdm5vZGUuY29tcG9uZW50T3B0aW9ucywKICAgICAgdm5vZGUuYXN5bmNGYWN0b3J5CiAgICApOwogICAgY2xvbmVkLm5zID0gdm5vZGUubnM7CiAgICBjbG9uZWQuaXNTdGF0aWMgPSB2bm9kZS5pc1N0YXRpYzsKICAgIGNsb25lZC5rZXkgPSB2bm9kZS5rZXk7CiAgICBjbG9uZWQuaXNDb21tZW50ID0gdm5vZGUuaXNDb21tZW50OwogICAgY2xvbmVkLmZuQ29udGV4dCA9IHZub2RlLmZuQ29udGV4dDsKICAgIGNsb25lZC5mbk9wdGlvbnMgPSB2bm9kZS5mbk9wdGlvbnM7CiAgICBjbG9uZWQuZm5TY29wZUlkID0gdm5vZGUuZm5TY29wZUlkOwogICAgY2xvbmVkLmFzeW5jTWV0YSA9IHZub2RlLmFzeW5jTWV0YTsKICAgIGNsb25lZC5pc0Nsb25lZCA9IHRydWU7CiAgICByZXR1cm4gY2xvbmVkCiAgfQoKICAvKgogICAqIG5vdCB0eXBlIGNoZWNraW5nIHRoaXMgZmlsZSBiZWNhdXNlIGZsb3cgZG9lc24ndCBwbGF5IHdlbGwgd2l0aAogICAqIGR5bmFtaWNhbGx5IGFjY2Vzc2luZyBtZXRob2RzIG9uIEFycmF5IHByb3RvdHlwZQogICAqLwoKICB2YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTsKICB2YXIgYXJyYXlNZXRob2RzID0gT2JqZWN0LmNyZWF0ZShhcnJheVByb3RvKTsKCiAgdmFyIG1ldGhvZHNUb1BhdGNoID0gWwogICAgJ3B1c2gnLAogICAgJ3BvcCcsCiAgICAnc2hpZnQnLAogICAgJ3Vuc2hpZnQnLAogICAgJ3NwbGljZScsCiAgICAnc29ydCcsCiAgICAncmV2ZXJzZScKICBdOwoKICAvKioKICAgKiBJbnRlcmNlcHQgbXV0YXRpbmcgbWV0aG9kcyBhbmQgZW1pdCBldmVudHMKICAgKi8KICBtZXRob2RzVG9QYXRjaC5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHsKICAgIC8vIGNhY2hlIG9yaWdpbmFsIG1ldGhvZAogICAgdmFyIG9yaWdpbmFsID0gYXJyYXlQcm90b1ttZXRob2RdOwogICAgZGVmKGFycmF5TWV0aG9kcywgbWV0aG9kLCBmdW5jdGlvbiBtdXRhdG9yICgpIHsKICAgICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsKICAgICAgd2hpbGUgKCBsZW4tLSApIGFyZ3NbIGxlbiBdID0gYXJndW1lbnRzWyBsZW4gXTsKCiAgICAgIHZhciByZXN1bHQgPSBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmdzKTsKICAgICAgdmFyIG9iID0gdGhpcy5fX29iX187CiAgICAgIHZhciBpbnNlcnRlZDsKICAgICAgc3dpdGNoIChtZXRob2QpIHsKICAgICAgICBjYXNlICdwdXNoJzoKICAgICAgICBjYXNlICd1bnNoaWZ0JzoKICAgICAgICAgIGluc2VydGVkID0gYXJnczsKICAgICAgICAgIGJyZWFrCiAgICAgICAgY2FzZSAnc3BsaWNlJzoKICAgICAgICAgIGluc2VydGVkID0gYXJncy5zbGljZSgyKTsKICAgICAgICAgIGJyZWFrCiAgICAgIH0KICAgICAgaWYgKGluc2VydGVkKSB7IG9iLm9ic2VydmVBcnJheShpbnNlcnRlZCk7IH0KICAgICAgLy8gbm90aWZ5IGNoYW5nZQogICAgICBvYi5kZXAubm90aWZ5KCk7CiAgICAgIHJldHVybiByZXN1bHQKICAgIH0pOwogIH0pOwoKICAvKiAgKi8KCiAgdmFyIGFycmF5S2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGFycmF5TWV0aG9kcyk7CgogIC8qKgogICAqIEluIHNvbWUgY2FzZXMgd2UgbWF5IHdhbnQgdG8gZGlzYWJsZSBvYnNlcnZhdGlvbiBpbnNpZGUgYSBjb21wb25lbnQncwogICAqIHVwZGF0ZSBjb21wdXRhdGlvbi4KICAgKi8KICB2YXIgc2hvdWxkT2JzZXJ2ZSA9IHRydWU7CgogIGZ1bmN0aW9uIHRvZ2dsZU9ic2VydmluZyAodmFsdWUpIHsKICAgIHNob3VsZE9ic2VydmUgPSB2YWx1ZTsKICB9CgogIC8qKgogICAqIE9ic2VydmVyIGNsYXNzIHRoYXQgaXMgYXR0YWNoZWQgdG8gZWFjaCBvYnNlcnZlZAogICAqIG9iamVjdC4gT25jZSBhdHRhY2hlZCwgdGhlIG9ic2VydmVyIGNvbnZlcnRzIHRoZSB0YXJnZXQKICAgKiBvYmplY3QncyBwcm9wZXJ0eSBrZXlzIGludG8gZ2V0dGVyL3NldHRlcnMgdGhhdAogICAqIGNvbGxlY3QgZGVwZW5kZW5jaWVzIGFuZCBkaXNwYXRjaCB1cGRhdGVzLgogICAqLwogIHZhciBPYnNlcnZlciA9IGZ1bmN0aW9uIE9ic2VydmVyICh2YWx1ZSkgewogICAgdGhpcy52YWx1ZSA9IHZhbHVlOwogICAgdGhpcy5kZXAgPSBuZXcgRGVwKCk7CiAgICB0aGlzLnZtQ291bnQgPSAwOwogICAgZGVmKHZhbHVlLCAnX19vYl9fJywgdGhpcyk7CiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgaWYgKGhhc1Byb3RvKSB7CiAgICAgICAgcHJvdG9BdWdtZW50KHZhbHVlLCBhcnJheU1ldGhvZHMpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvcHlBdWdtZW50KHZhbHVlLCBhcnJheU1ldGhvZHMsIGFycmF5S2V5cyk7CiAgICAgIH0KICAgICAgdGhpcy5vYnNlcnZlQXJyYXkodmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy53YWxrKHZhbHVlKTsKICAgIH0KICB9OwoKICAvKioKICAgKiBXYWxrIHRocm91Z2ggYWxsIHByb3BlcnRpZXMgYW5kIGNvbnZlcnQgdGhlbSBpbnRvCiAgICogZ2V0dGVyL3NldHRlcnMuIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCB3aGVuCiAgICogdmFsdWUgdHlwZSBpcyBPYmplY3QuCiAgICovCiAgT2JzZXJ2ZXIucHJvdG90eXBlLndhbGsgPSBmdW5jdGlvbiB3YWxrIChvYmopIHsKICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgewogICAgICBkZWZpbmVSZWFjdGl2ZSQkMShvYmosIGtleXNbaV0pOwogICAgfQogIH07CgogIC8qKgogICAqIE9ic2VydmUgYSBsaXN0IG9mIEFycmF5IGl0ZW1zLgogICAqLwogIE9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlQXJyYXkgPSBmdW5jdGlvbiBvYnNlcnZlQXJyYXkgKGl0ZW1zKSB7CiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGl0ZW1zLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBvYnNlcnZlKGl0ZW1zW2ldKTsKICAgIH0KICB9OwoKICAvLyBoZWxwZXJzCgogIC8qKgogICAqIEF1Z21lbnQgYSB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGludGVyY2VwdGluZwogICAqIHRoZSBwcm90b3R5cGUgY2hhaW4gdXNpbmcgX19wcm90b19fCiAgICovCiAgZnVuY3Rpb24gcHJvdG9BdWdtZW50ICh0YXJnZXQsIHNyYykgewogICAgLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi8KICAgIHRhcmdldC5fX3Byb3RvX18gPSBzcmM7CiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXByb3RvICovCiAgfQoKICAvKioKICAgKiBBdWdtZW50IGEgdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBkZWZpbmluZwogICAqIGhpZGRlbiBwcm9wZXJ0aWVzLgogICAqLwogIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgZnVuY3Rpb24gY29weUF1Z21lbnQgKHRhcmdldCwgc3JjLCBrZXlzKSB7CiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIHZhciBrZXkgPSBrZXlzW2ldOwogICAgICBkZWYodGFyZ2V0LCBrZXksIHNyY1trZXldKTsKICAgIH0KICB9CgogIC8qKgogICAqIEF0dGVtcHQgdG8gY3JlYXRlIGFuIG9ic2VydmVyIGluc3RhbmNlIGZvciBhIHZhbHVlLAogICAqIHJldHVybnMgdGhlIG5ldyBvYnNlcnZlciBpZiBzdWNjZXNzZnVsbHkgb2JzZXJ2ZWQsCiAgICogb3IgdGhlIGV4aXN0aW5nIG9ic2VydmVyIGlmIHRoZSB2YWx1ZSBhbHJlYWR5IGhhcyBvbmUuCiAgICovCiAgZnVuY3Rpb24gb2JzZXJ2ZSAodmFsdWUsIGFzUm9vdERhdGEpIHsKICAgIGlmICghaXNPYmplY3QodmFsdWUpIHx8IHZhbHVlIGluc3RhbmNlb2YgVk5vZGUpIHsKICAgICAgcmV0dXJuCiAgICB9CiAgICB2YXIgb2I7CiAgICBpZiAoaGFzT3duKHZhbHVlLCAnX19vYl9fJykgJiYgdmFsdWUuX19vYl9fIGluc3RhbmNlb2YgT2JzZXJ2ZXIpIHsKICAgICAgb2IgPSB2YWx1ZS5fX29iX187CiAgICB9IGVsc2UgaWYgKAogICAgICBzaG91bGRPYnNlcnZlICYmCiAgICAgICFpc1NlcnZlclJlbmRlcmluZygpICYmCiAgICAgIChBcnJheS5pc0FycmF5KHZhbHVlKSB8fCBpc1BsYWluT2JqZWN0KHZhbHVlKSkgJiYKICAgICAgT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWx1ZSkgJiYKICAgICAgIXZhbHVlLl9pc1Z1ZQogICAgKSB7CiAgICAgIG9iID0gbmV3IE9ic2VydmVyKHZhbHVlKTsKICAgIH0KICAgIGlmIChhc1Jvb3REYXRhICYmIG9iKSB7CiAgICAgIG9iLnZtQ291bnQrKzsKICAgIH0KICAgIHJldHVybiBvYgogIH0KCiAgLyoqCiAgICogRGVmaW5lIGEgcmVhY3RpdmUgcHJvcGVydHkgb24gYW4gT2JqZWN0LgogICAqLwogIGZ1bmN0aW9uIGRlZmluZVJlYWN0aXZlJCQxICgKICAgIG9iaiwKICAgIGtleSwKICAgIHZhbCwKICAgIGN1c3RvbVNldHRlciwKICAgIHNoYWxsb3cKICApIHsKICAgIHZhciBkZXAgPSBuZXcgRGVwKCk7CgogICAgdmFyIHByb3BlcnR5ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7CiAgICBpZiAocHJvcGVydHkgJiYgcHJvcGVydHkuY29uZmlndXJhYmxlID09PSBmYWxzZSkgewogICAgICByZXR1cm4KICAgIH0KCiAgICAvLyBjYXRlciBmb3IgcHJlLWRlZmluZWQgZ2V0dGVyL3NldHRlcnMKICAgIHZhciBnZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5nZXQ7CiAgICB2YXIgc2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuc2V0OwogICAgaWYgKCghZ2V0dGVyIHx8IHNldHRlcikgJiYgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgewogICAgICB2YWwgPSBvYmpba2V5XTsKICAgIH0KCiAgICB2YXIgY2hpbGRPYiA9ICFzaGFsbG93ICYmIG9ic2VydmUodmFsKTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIGdldDogZnVuY3Rpb24gcmVhY3RpdmVHZXR0ZXIgKCkgewogICAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7CiAgICAgICAgaWYgKERlcC50YXJnZXQpIHsKICAgICAgICAgIGRlcC5kZXBlbmQoKTsKICAgICAgICAgIGlmIChjaGlsZE9iKSB7CiAgICAgICAgICAgIGNoaWxkT2IuZGVwLmRlcGVuZCgpOwogICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgICAgICAgICBkZXBlbmRBcnJheSh2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHZhbHVlCiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gcmVhY3RpdmVTZXR0ZXIgKG5ld1ZhbCkgewogICAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7CiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tc2VsZi1jb21wYXJlICovCiAgICAgICAgaWYgKG5ld1ZhbCA9PT0gdmFsdWUgfHwgKG5ld1ZhbCAhPT0gbmV3VmFsICYmIHZhbHVlICE9PSB2YWx1ZSkpIHsKICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXNlbGYtY29tcGFyZSAqLwogICAgICAgIGlmIChjdXN0b21TZXR0ZXIpIHsKICAgICAgICAgIGN1c3RvbVNldHRlcigpOwogICAgICAgIH0KICAgICAgICAvLyAjNzk4MTogZm9yIGFjY2Vzc29yIHByb3BlcnRpZXMgd2l0aG91dCBzZXR0ZXIKICAgICAgICBpZiAoZ2V0dGVyICYmICFzZXR0ZXIpIHsgcmV0dXJuIH0KICAgICAgICBpZiAoc2V0dGVyKSB7CiAgICAgICAgICBzZXR0ZXIuY2FsbChvYmosIG5ld1ZhbCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhbCA9IG5ld1ZhbDsKICAgICAgICB9CiAgICAgICAgY2hpbGRPYiA9ICFzaGFsbG93ICYmIG9ic2VydmUobmV3VmFsKTsKICAgICAgICBkZXAubm90aWZ5KCk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgLyoqCiAgICogU2V0IGEgcHJvcGVydHkgb24gYW4gb2JqZWN0LiBBZGRzIHRoZSBuZXcgcHJvcGVydHkgYW5kCiAgICogdHJpZ2dlcnMgY2hhbmdlIG5vdGlmaWNhdGlvbiBpZiB0aGUgcHJvcGVydHkgZG9lc24ndAogICAqIGFscmVhZHkgZXhpc3QuCiAgICovCiAgZnVuY3Rpb24gc2V0ICh0YXJnZXQsIGtleSwgdmFsKSB7CiAgICBpZiAoaXNVbmRlZih0YXJnZXQpIHx8IGlzUHJpbWl0aXZlKHRhcmdldCkKICAgICkgewogICAgICB3YXJuKCgiQ2Fubm90IHNldCByZWFjdGl2ZSBwcm9wZXJ0eSBvbiB1bmRlZmluZWQsIG51bGwsIG9yIHByaW1pdGl2ZSB2YWx1ZTogIiArICgodGFyZ2V0KSkpKTsKICAgIH0KICAgIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkgJiYgaXNWYWxpZEFycmF5SW5kZXgoa2V5KSkgewogICAgICB0YXJnZXQubGVuZ3RoID0gTWF0aC5tYXgodGFyZ2V0Lmxlbmd0aCwga2V5KTsKICAgICAgdGFyZ2V0LnNwbGljZShrZXksIDEsIHZhbCk7CiAgICAgIHJldHVybiB2YWwKICAgIH0KICAgIGlmIChrZXkgaW4gdGFyZ2V0ICYmICEoa2V5IGluIE9iamVjdC5wcm90b3R5cGUpKSB7CiAgICAgIHRhcmdldFtrZXldID0gdmFsOwogICAgICByZXR1cm4gdmFsCiAgICB9CiAgICB2YXIgb2IgPSAodGFyZ2V0KS5fX29iX187CiAgICBpZiAodGFyZ2V0Ll9pc1Z1ZSB8fCAob2IgJiYgb2Iudm1Db3VudCkpIHsKICAgICAgd2FybigKICAgICAgICAnQXZvaWQgYWRkaW5nIHJlYWN0aXZlIHByb3BlcnRpZXMgdG8gYSBWdWUgaW5zdGFuY2Ugb3IgaXRzIHJvb3QgJGRhdGEgJyArCiAgICAgICAgJ2F0IHJ1bnRpbWUgLSBkZWNsYXJlIGl0IHVwZnJvbnQgaW4gdGhlIGRhdGEgb3B0aW9uLicKICAgICAgKTsKICAgICAgcmV0dXJuIHZhbAogICAgfQogICAgaWYgKCFvYikgewogICAgICB0YXJnZXRba2V5XSA9IHZhbDsKICAgICAgcmV0dXJuIHZhbAogICAgfQogICAgZGVmaW5lUmVhY3RpdmUkJDEob2IudmFsdWUsIGtleSwgdmFsKTsKICAgIG9iLmRlcC5ub3RpZnkoKTsKICAgIHJldHVybiB2YWwKICB9CgogIC8qKgogICAqIERlbGV0ZSBhIHByb3BlcnR5IGFuZCB0cmlnZ2VyIGNoYW5nZSBpZiBuZWNlc3NhcnkuCiAgICovCiAgZnVuY3Rpb24gZGVsICh0YXJnZXQsIGtleSkgewogICAgaWYgKGlzVW5kZWYodGFyZ2V0KSB8fCBpc1ByaW1pdGl2ZSh0YXJnZXQpCiAgICApIHsKICAgICAgd2FybigoIkNhbm5vdCBkZWxldGUgcmVhY3RpdmUgcHJvcGVydHkgb24gdW5kZWZpbmVkLCBudWxsLCBvciBwcmltaXRpdmUgdmFsdWU6ICIgKyAoKHRhcmdldCkpKSk7CiAgICB9CiAgICBpZiAoQXJyYXkuaXNBcnJheSh0YXJnZXQpICYmIGlzVmFsaWRBcnJheUluZGV4KGtleSkpIHsKICAgICAgdGFyZ2V0LnNwbGljZShrZXksIDEpOwogICAgICByZXR1cm4KICAgIH0KICAgIHZhciBvYiA9ICh0YXJnZXQpLl9fb2JfXzsKICAgIGlmICh0YXJnZXQuX2lzVnVlIHx8IChvYiAmJiBvYi52bUNvdW50KSkgewogICAgICB3YXJuKAogICAgICAgICdBdm9pZCBkZWxldGluZyBwcm9wZXJ0aWVzIG9uIGEgVnVlIGluc3RhbmNlIG9yIGl0cyByb290ICRkYXRhICcgKwogICAgICAgICctIGp1c3Qgc2V0IGl0IHRvIG51bGwuJwogICAgICApOwogICAgICByZXR1cm4KICAgIH0KICAgIGlmICghaGFzT3duKHRhcmdldCwga2V5KSkgewogICAgICByZXR1cm4KICAgIH0KICAgIGRlbGV0ZSB0YXJnZXRba2V5XTsKICAgIGlmICghb2IpIHsKICAgICAgcmV0dXJuCiAgICB9CiAgICBvYi5kZXAubm90aWZ5KCk7CiAgfQoKICAvKioKICAgKiBDb2xsZWN0IGRlcGVuZGVuY2llcyBvbiBhcnJheSBlbGVtZW50cyB3aGVuIHRoZSBhcnJheSBpcyB0b3VjaGVkLCBzaW5jZQogICAqIHdlIGNhbm5vdCBpbnRlcmNlcHQgYXJyYXkgZWxlbWVudCBhY2Nlc3MgbGlrZSBwcm9wZXJ0eSBnZXR0ZXJzLgogICAqLwogIGZ1bmN0aW9uIGRlcGVuZEFycmF5ICh2YWx1ZSkgewogICAgZm9yICh2YXIgZSA9ICh2b2lkIDApLCBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBlID0gdmFsdWVbaV07CiAgICAgIGUgJiYgZS5fX29iX18gJiYgZS5fX29iX18uZGVwLmRlcGVuZCgpOwogICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkgewogICAgICAgIGRlcGVuZEFycmF5KGUpOwogICAgICB9CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgLyoqCiAgICogT3B0aW9uIG92ZXJ3cml0aW5nIHN0cmF0ZWdpZXMgYXJlIGZ1bmN0aW9ucyB0aGF0IGhhbmRsZQogICAqIGhvdyB0byBtZXJnZSBhIHBhcmVudCBvcHRpb24gdmFsdWUgYW5kIGEgY2hpbGQgb3B0aW9uCiAgICogdmFsdWUgaW50byB0aGUgZmluYWwgdmFsdWUuCiAgICovCiAgdmFyIHN0cmF0cyA9IGNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXM7CgogIC8qKgogICAqIE9wdGlvbnMgd2l0aCByZXN0cmljdGlvbnMKICAgKi8KICB7CiAgICBzdHJhdHMuZWwgPSBzdHJhdHMucHJvcHNEYXRhID0gZnVuY3Rpb24gKHBhcmVudCwgY2hpbGQsIHZtLCBrZXkpIHsKICAgICAgaWYgKCF2bSkgewogICAgICAgIHdhcm4oCiAgICAgICAgICAib3B0aW9uIFwiIiArIGtleSArICJcIiBjYW4gb25seSBiZSB1c2VkIGR1cmluZyBpbnN0YW5jZSAiICsKICAgICAgICAgICdjcmVhdGlvbiB3aXRoIHRoZSBgbmV3YCBrZXl3b3JkLicKICAgICAgICApOwogICAgICB9CiAgICAgIHJldHVybiBkZWZhdWx0U3RyYXQocGFyZW50LCBjaGlsZCkKICAgIH07CiAgfQoKICAvKioKICAgKiBIZWxwZXIgdGhhdCByZWN1cnNpdmVseSBtZXJnZXMgdHdvIGRhdGEgb2JqZWN0cyB0b2dldGhlci4KICAgKi8KICBmdW5jdGlvbiBtZXJnZURhdGEgKHRvLCBmcm9tKSB7CiAgICBpZiAoIWZyb20pIHsgcmV0dXJuIHRvIH0KICAgIHZhciBrZXksIHRvVmFsLCBmcm9tVmFsOwoKICAgIHZhciBrZXlzID0gaGFzU3ltYm9sCiAgICAgID8gUmVmbGVjdC5vd25LZXlzKGZyb20pCiAgICAgIDogT2JqZWN0LmtleXMoZnJvbSk7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGtleSA9IGtleXNbaV07CiAgICAgIC8vIGluIGNhc2UgdGhlIG9iamVjdCBpcyBhbHJlYWR5IG9ic2VydmVkLi4uCiAgICAgIGlmIChrZXkgPT09ICdfX29iX18nKSB7IGNvbnRpbnVlIH0KICAgICAgdG9WYWwgPSB0b1trZXldOwogICAgICBmcm9tVmFsID0gZnJvbVtrZXldOwogICAgICBpZiAoIWhhc093bih0bywga2V5KSkgewogICAgICAgIHNldCh0bywga2V5LCBmcm9tVmFsKTsKICAgICAgfSBlbHNlIGlmICgKICAgICAgICB0b1ZhbCAhPT0gZnJvbVZhbCAmJgogICAgICAgIGlzUGxhaW5PYmplY3QodG9WYWwpICYmCiAgICAgICAgaXNQbGFpbk9iamVjdChmcm9tVmFsKQogICAgICApIHsKICAgICAgICBtZXJnZURhdGEodG9WYWwsIGZyb21WYWwpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gdG8KICB9CgogIC8qKgogICAqIERhdGEKICAgKi8KICBmdW5jdGlvbiBtZXJnZURhdGFPckZuICgKICAgIHBhcmVudFZhbCwKICAgIGNoaWxkVmFsLAogICAgdm0KICApIHsKICAgIGlmICghdm0pIHsKICAgICAgLy8gaW4gYSBWdWUuZXh0ZW5kIG1lcmdlLCBib3RoIHNob3VsZCBiZSBmdW5jdGlvbnMKICAgICAgaWYgKCFjaGlsZFZhbCkgewogICAgICAgIHJldHVybiBwYXJlbnRWYWwKICAgICAgfQogICAgICBpZiAoIXBhcmVudFZhbCkgewogICAgICAgIHJldHVybiBjaGlsZFZhbAogICAgICB9CiAgICAgIC8vIHdoZW4gcGFyZW50VmFsICYgY2hpbGRWYWwgYXJlIGJvdGggcHJlc2VudCwKICAgICAgLy8gd2UgbmVlZCB0byByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlCiAgICAgIC8vIG1lcmdlZCByZXN1bHQgb2YgYm90aCBmdW5jdGlvbnMuLi4gbm8gbmVlZCB0bwogICAgICAvLyBjaGVjayBpZiBwYXJlbnRWYWwgaXMgYSBmdW5jdGlvbiBoZXJlIGJlY2F1c2UKICAgICAgLy8gaXQgaGFzIHRvIGJlIGEgZnVuY3Rpb24gdG8gcGFzcyBwcmV2aW91cyBtZXJnZXMuCiAgICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWREYXRhRm4gKCkgewogICAgICAgIHJldHVybiBtZXJnZURhdGEoCiAgICAgICAgICB0eXBlb2YgY2hpbGRWYWwgPT09ICdmdW5jdGlvbicgPyBjaGlsZFZhbC5jYWxsKHRoaXMsIHRoaXMpIDogY2hpbGRWYWwsCiAgICAgICAgICB0eXBlb2YgcGFyZW50VmFsID09PSAnZnVuY3Rpb24nID8gcGFyZW50VmFsLmNhbGwodGhpcywgdGhpcykgOiBwYXJlbnRWYWwKICAgICAgICApCiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWRJbnN0YW5jZURhdGFGbiAoKSB7CiAgICAgICAgLy8gaW5zdGFuY2UgbWVyZ2UKICAgICAgICB2YXIgaW5zdGFuY2VEYXRhID0gdHlwZW9mIGNoaWxkVmFsID09PSAnZnVuY3Rpb24nCiAgICAgICAgICA/IGNoaWxkVmFsLmNhbGwodm0sIHZtKQogICAgICAgICAgOiBjaGlsZFZhbDsKICAgICAgICB2YXIgZGVmYXVsdERhdGEgPSB0eXBlb2YgcGFyZW50VmFsID09PSAnZnVuY3Rpb24nCiAgICAgICAgICA/IHBhcmVudFZhbC5jYWxsKHZtLCB2bSkKICAgICAgICAgIDogcGFyZW50VmFsOwogICAgICAgIGlmIChpbnN0YW5jZURhdGEpIHsKICAgICAgICAgIHJldHVybiBtZXJnZURhdGEoaW5zdGFuY2VEYXRhLCBkZWZhdWx0RGF0YSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGRlZmF1bHREYXRhCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBzdHJhdHMuZGF0YSA9IGZ1bmN0aW9uICgKICAgIHBhcmVudFZhbCwKICAgIGNoaWxkVmFsLAogICAgdm0KICApIHsKICAgIGlmICghdm0pIHsKICAgICAgaWYgKGNoaWxkVmFsICYmIHR5cGVvZiBjaGlsZFZhbCAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHdhcm4oCiAgICAgICAgICAnVGhlICJkYXRhIiBvcHRpb24gc2hvdWxkIGJlIGEgZnVuY3Rpb24gJyArCiAgICAgICAgICAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICsKICAgICAgICAgICdkZWZpbml0aW9ucy4nLAogICAgICAgICAgdm0KICAgICAgICApOwoKICAgICAgICByZXR1cm4gcGFyZW50VmFsCiAgICAgIH0KICAgICAgcmV0dXJuIG1lcmdlRGF0YU9yRm4ocGFyZW50VmFsLCBjaGlsZFZhbCkKICAgIH0KCiAgICByZXR1cm4gbWVyZ2VEYXRhT3JGbihwYXJlbnRWYWwsIGNoaWxkVmFsLCB2bSkKICB9OwoKICAvKioKICAgKiBIb29rcyBhbmQgcHJvcHMgYXJlIG1lcmdlZCBhcyBhcnJheXMuCiAgICovCiAgZnVuY3Rpb24gbWVyZ2VIb29rICgKICAgIHBhcmVudFZhbCwKICAgIGNoaWxkVmFsCiAgKSB7CiAgICB2YXIgcmVzID0gY2hpbGRWYWwKICAgICAgPyBwYXJlbnRWYWwKICAgICAgICA/IHBhcmVudFZhbC5jb25jYXQoY2hpbGRWYWwpCiAgICAgICAgOiBBcnJheS5pc0FycmF5KGNoaWxkVmFsKQogICAgICAgICAgPyBjaGlsZFZhbAogICAgICAgICAgOiBbY2hpbGRWYWxdCiAgICAgIDogcGFyZW50VmFsOwogICAgcmV0dXJuIHJlcwogICAgICA/IGRlZHVwZUhvb2tzKHJlcykKICAgICAgOiByZXMKICB9CgogIGZ1bmN0aW9uIGRlZHVwZUhvb2tzIChob29rcykgewogICAgdmFyIHJlcyA9IFtdOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBob29rcy5sZW5ndGg7IGkrKykgewogICAgICBpZiAocmVzLmluZGV4T2YoaG9va3NbaV0pID09PSAtMSkgewogICAgICAgIHJlcy5wdXNoKGhvb2tzW2ldKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgTElGRUNZQ0xFX0hPT0tTLmZvckVhY2goZnVuY3Rpb24gKGhvb2spIHsKICAgIHN0cmF0c1tob29rXSA9IG1lcmdlSG9vazsKICB9KTsKCiAgLyoqCiAgICogQXNzZXRzCiAgICoKICAgKiBXaGVuIGEgdm0gaXMgcHJlc2VudCAoaW5zdGFuY2UgY3JlYXRpb24pLCB3ZSBuZWVkIHRvIGRvCiAgICogYSB0aHJlZS13YXkgbWVyZ2UgYmV0d2VlbiBjb25zdHJ1Y3RvciBvcHRpb25zLCBpbnN0YW5jZQogICAqIG9wdGlvbnMgYW5kIHBhcmVudCBvcHRpb25zLgogICAqLwogIGZ1bmN0aW9uIG1lcmdlQXNzZXRzICgKICAgIHBhcmVudFZhbCwKICAgIGNoaWxkVmFsLAogICAgdm0sCiAgICBrZXkKICApIHsKICAgIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFZhbCB8fCBudWxsKTsKICAgIGlmIChjaGlsZFZhbCkgewogICAgICBhc3NlcnRPYmplY3RUeXBlKGtleSwgY2hpbGRWYWwsIHZtKTsKICAgICAgcmV0dXJuIGV4dGVuZChyZXMsIGNoaWxkVmFsKQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHJlcwogICAgfQogIH0KCiAgQVNTRVRfVFlQRVMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkgewogICAgc3RyYXRzW3R5cGUgKyAncyddID0gbWVyZ2VBc3NldHM7CiAgfSk7CgogIC8qKgogICAqIFdhdGNoZXJzLgogICAqCiAgICogV2F0Y2hlcnMgaGFzaGVzIHNob3VsZCBub3Qgb3ZlcndyaXRlIG9uZQogICAqIGFub3RoZXIsIHNvIHdlIG1lcmdlIHRoZW0gYXMgYXJyYXlzLgogICAqLwogIHN0cmF0cy53YXRjaCA9IGZ1bmN0aW9uICgKICAgIHBhcmVudFZhbCwKICAgIGNoaWxkVmFsLAogICAgdm0sCiAgICBrZXkKICApIHsKICAgIC8vIHdvcmsgYXJvdW5kIEZpcmVmb3gncyBPYmplY3QucHJvdG90eXBlLndhdGNoLi4uCiAgICBpZiAocGFyZW50VmFsID09PSBuYXRpdmVXYXRjaCkgeyBwYXJlbnRWYWwgPSB1bmRlZmluZWQ7IH0KICAgIGlmIChjaGlsZFZhbCA9PT0gbmF0aXZlV2F0Y2gpIHsgY2hpbGRWYWwgPSB1bmRlZmluZWQ7IH0KICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKCFjaGlsZFZhbCkgeyByZXR1cm4gT2JqZWN0LmNyZWF0ZShwYXJlbnRWYWwgfHwgbnVsbCkgfQogICAgewogICAgICBhc3NlcnRPYmplY3RUeXBlKGtleSwgY2hpbGRWYWwsIHZtKTsKICAgIH0KICAgIGlmICghcGFyZW50VmFsKSB7IHJldHVybiBjaGlsZFZhbCB9CiAgICB2YXIgcmV0ID0ge307CiAgICBleHRlbmQocmV0LCBwYXJlbnRWYWwpOwogICAgZm9yICh2YXIga2V5JDEgaW4gY2hpbGRWYWwpIHsKICAgICAgdmFyIHBhcmVudCA9IHJldFtrZXkkMV07CiAgICAgIHZhciBjaGlsZCA9IGNoaWxkVmFsW2tleSQxXTsKICAgICAgaWYgKHBhcmVudCAmJiAhQXJyYXkuaXNBcnJheShwYXJlbnQpKSB7CiAgICAgICAgcGFyZW50ID0gW3BhcmVudF07CiAgICAgIH0KICAgICAgcmV0W2tleSQxXSA9IHBhcmVudAogICAgICAgID8gcGFyZW50LmNvbmNhdChjaGlsZCkKICAgICAgICA6IEFycmF5LmlzQXJyYXkoY2hpbGQpID8gY2hpbGQgOiBbY2hpbGRdOwogICAgfQogICAgcmV0dXJuIHJldAogIH07CgogIC8qKgogICAqIE90aGVyIG9iamVjdCBoYXNoZXMuCiAgICovCiAgc3RyYXRzLnByb3BzID0KICBzdHJhdHMubWV0aG9kcyA9CiAgc3RyYXRzLmluamVjdCA9CiAgc3RyYXRzLmNvbXB1dGVkID0gZnVuY3Rpb24gKAogICAgcGFyZW50VmFsLAogICAgY2hpbGRWYWwsCiAgICB2bSwKICAgIGtleQogICkgewogICAgaWYgKGNoaWxkVmFsICYmICJkZXZlbG9wbWVudCIgIT09ICdwcm9kdWN0aW9uJykgewogICAgICBhc3NlcnRPYmplY3RUeXBlKGtleSwgY2hpbGRWYWwsIHZtKTsKICAgIH0KICAgIGlmICghcGFyZW50VmFsKSB7IHJldHVybiBjaGlsZFZhbCB9CiAgICB2YXIgcmV0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7CiAgICBpZiAoY2hpbGRWYWwpIHsgZXh0ZW5kKHJldCwgY2hpbGRWYWwpOyB9CiAgICByZXR1cm4gcmV0CiAgfTsKICBzdHJhdHMucHJvdmlkZSA9IG1lcmdlRGF0YU9yRm47CgogIC8qKgogICAqIERlZmF1bHQgc3RyYXRlZ3kuCiAgICovCiAgdmFyIGRlZmF1bHRTdHJhdCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7CiAgICByZXR1cm4gY2hpbGRWYWwgPT09IHVuZGVmaW5lZAogICAgICA/IHBhcmVudFZhbAogICAgICA6IGNoaWxkVmFsCiAgfTsKCiAgLyoqCiAgICogVmFsaWRhdGUgY29tcG9uZW50IG5hbWVzCiAgICovCiAgZnVuY3Rpb24gY2hlY2tDb21wb25lbnRzIChvcHRpb25zKSB7CiAgICBmb3IgKHZhciBrZXkgaW4gb3B0aW9ucy5jb21wb25lbnRzKSB7CiAgICAgIHZhbGlkYXRlQ29tcG9uZW50TmFtZShrZXkpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gdmFsaWRhdGVDb21wb25lbnROYW1lIChuYW1lKSB7CiAgICBpZiAoIW5ldyBSZWdFeHAoKCJeW2EtekEtWl1bXFwtXFwuMC05XyIgKyAodW5pY29kZVJlZ0V4cC5zb3VyY2UpICsgIl0qJCIpKS50ZXN0KG5hbWUpKSB7CiAgICAgIHdhcm4oCiAgICAgICAgJ0ludmFsaWQgY29tcG9uZW50IG5hbWU6ICInICsgbmFtZSArICciLiBDb21wb25lbnQgbmFtZXMgJyArCiAgICAgICAgJ3Nob3VsZCBjb25mb3JtIHRvIHZhbGlkIGN1c3RvbSBlbGVtZW50IG5hbWUgaW4gaHRtbDUgc3BlY2lmaWNhdGlvbi4nCiAgICAgICk7CiAgICB9CiAgICBpZiAoaXNCdWlsdEluVGFnKG5hbWUpIHx8IGNvbmZpZy5pc1Jlc2VydmVkVGFnKG5hbWUpKSB7CiAgICAgIHdhcm4oCiAgICAgICAgJ0RvIG5vdCB1c2UgYnVpbHQtaW4gb3IgcmVzZXJ2ZWQgSFRNTCBlbGVtZW50cyBhcyBjb21wb25lbnQgJyArCiAgICAgICAgJ2lkOiAnICsgbmFtZQogICAgICApOwogICAgfQogIH0KCiAgLyoqCiAgICogRW5zdXJlIGFsbCBwcm9wcyBvcHRpb24gc3ludGF4IGFyZSBub3JtYWxpemVkIGludG8gdGhlCiAgICogT2JqZWN0LWJhc2VkIGZvcm1hdC4KICAgKi8KICBmdW5jdGlvbiBub3JtYWxpemVQcm9wcyAob3B0aW9ucywgdm0pIHsKICAgIHZhciBwcm9wcyA9IG9wdGlvbnMucHJvcHM7CiAgICBpZiAoIXByb3BzKSB7IHJldHVybiB9CiAgICB2YXIgcmVzID0ge307CiAgICB2YXIgaSwgdmFsLCBuYW1lOwogICAgaWYgKEFycmF5LmlzQXJyYXkocHJvcHMpKSB7CiAgICAgIGkgPSBwcm9wcy5sZW5ndGg7CiAgICAgIHdoaWxlIChpLS0pIHsKICAgICAgICB2YWwgPSBwcm9wc1tpXTsKICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIG5hbWUgPSBjYW1lbGl6ZSh2YWwpOwogICAgICAgICAgcmVzW25hbWVdID0geyB0eXBlOiBudWxsIH07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHdhcm4oJ3Byb3BzIG11c3QgYmUgc3RyaW5ncyB3aGVuIHVzaW5nIGFycmF5IHN5bnRheC4nKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChwcm9wcykpIHsKICAgICAgZm9yICh2YXIga2V5IGluIHByb3BzKSB7CiAgICAgICAgdmFsID0gcHJvcHNba2V5XTsKICAgICAgICBuYW1lID0gY2FtZWxpemUoa2V5KTsKICAgICAgICByZXNbbmFtZV0gPSBpc1BsYWluT2JqZWN0KHZhbCkKICAgICAgICAgID8gdmFsCiAgICAgICAgICA6IHsgdHlwZTogdmFsIH07CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHdhcm4oCiAgICAgICAgIkludmFsaWQgdmFsdWUgZm9yIG9wdGlvbiBcInByb3BzXCI6IGV4cGVjdGVkIGFuIEFycmF5IG9yIGFuIE9iamVjdCwgIiArCiAgICAgICAgImJ1dCBnb3QgIiArICh0b1Jhd1R5cGUocHJvcHMpKSArICIuIiwKICAgICAgICB2bQogICAgICApOwogICAgfQogICAgb3B0aW9ucy5wcm9wcyA9IHJlczsKICB9CgogIC8qKgogICAqIE5vcm1hbGl6ZSBhbGwgaW5qZWN0aW9ucyBpbnRvIE9iamVjdC1iYXNlZCBmb3JtYXQKICAgKi8KICBmdW5jdGlvbiBub3JtYWxpemVJbmplY3QgKG9wdGlvbnMsIHZtKSB7CiAgICB2YXIgaW5qZWN0ID0gb3B0aW9ucy5pbmplY3Q7CiAgICBpZiAoIWluamVjdCkgeyByZXR1cm4gfQogICAgdmFyIG5vcm1hbGl6ZWQgPSBvcHRpb25zLmluamVjdCA9IHt9OwogICAgaWYgKEFycmF5LmlzQXJyYXkoaW5qZWN0KSkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluamVjdC5sZW5ndGg7IGkrKykgewogICAgICAgIG5vcm1hbGl6ZWRbaW5qZWN0W2ldXSA9IHsgZnJvbTogaW5qZWN0W2ldIH07CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChpbmplY3QpKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBpbmplY3QpIHsKICAgICAgICB2YXIgdmFsID0gaW5qZWN0W2tleV07CiAgICAgICAgbm9ybWFsaXplZFtrZXldID0gaXNQbGFpbk9iamVjdCh2YWwpCiAgICAgICAgICA/IGV4dGVuZCh7IGZyb206IGtleSB9LCB2YWwpCiAgICAgICAgICA6IHsgZnJvbTogdmFsIH07CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHdhcm4oCiAgICAgICAgIkludmFsaWQgdmFsdWUgZm9yIG9wdGlvbiBcImluamVjdFwiOiBleHBlY3RlZCBhbiBBcnJheSBvciBhbiBPYmplY3QsICIgKwogICAgICAgICJidXQgZ290ICIgKyAodG9SYXdUeXBlKGluamVjdCkpICsgIi4iLAogICAgICAgIHZtCiAgICAgICk7CiAgICB9CiAgfQoKICAvKioKICAgKiBOb3JtYWxpemUgcmF3IGZ1bmN0aW9uIGRpcmVjdGl2ZXMgaW50byBvYmplY3QgZm9ybWF0LgogICAqLwogIGZ1bmN0aW9uIG5vcm1hbGl6ZURpcmVjdGl2ZXMgKG9wdGlvbnMpIHsKICAgIHZhciBkaXJzID0gb3B0aW9ucy5kaXJlY3RpdmVzOwogICAgaWYgKGRpcnMpIHsKICAgICAgZm9yICh2YXIga2V5IGluIGRpcnMpIHsKICAgICAgICB2YXIgZGVmJCQxID0gZGlyc1trZXldOwogICAgICAgIGlmICh0eXBlb2YgZGVmJCQxID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICBkaXJzW2tleV0gPSB7IGJpbmQ6IGRlZiQkMSwgdXBkYXRlOiBkZWYkJDEgfTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGFzc2VydE9iamVjdFR5cGUgKG5hbWUsIHZhbHVlLCB2bSkgewogICAgaWYgKCFpc1BsYWluT2JqZWN0KHZhbHVlKSkgewogICAgICB3YXJuKAogICAgICAgICJJbnZhbGlkIHZhbHVlIGZvciBvcHRpb24gXCIiICsgbmFtZSArICJcIjogZXhwZWN0ZWQgYW4gT2JqZWN0LCAiICsKICAgICAgICAiYnV0IGdvdCAiICsgKHRvUmF3VHlwZSh2YWx1ZSkpICsgIi4iLAogICAgICAgIHZtCiAgICAgICk7CiAgICB9CiAgfQoKICAvKioKICAgKiBNZXJnZSB0d28gb3B0aW9uIG9iamVjdHMgaW50byBhIG5ldyBvbmUuCiAgICogQ29yZSB1dGlsaXR5IHVzZWQgaW4gYm90aCBpbnN0YW50aWF0aW9uIGFuZCBpbmhlcml0YW5jZS4KICAgKi8KICBmdW5jdGlvbiBtZXJnZU9wdGlvbnMgKAogICAgcGFyZW50LAogICAgY2hpbGQsCiAgICB2bQogICkgewogICAgewogICAgICBjaGVja0NvbXBvbmVudHMoY2hpbGQpOwogICAgfQoKICAgIGlmICh0eXBlb2YgY2hpbGQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgY2hpbGQgPSBjaGlsZC5vcHRpb25zOwogICAgfQoKICAgIG5vcm1hbGl6ZVByb3BzKGNoaWxkLCB2bSk7CiAgICBub3JtYWxpemVJbmplY3QoY2hpbGQsIHZtKTsKICAgIG5vcm1hbGl6ZURpcmVjdGl2ZXMoY2hpbGQpOwoKICAgIC8vIEFwcGx5IGV4dGVuZHMgYW5kIG1peGlucyBvbiB0aGUgY2hpbGQgb3B0aW9ucywKICAgIC8vIGJ1dCBvbmx5IGlmIGl0IGlzIGEgcmF3IG9wdGlvbnMgb2JqZWN0IHRoYXQgaXNuJ3QKICAgIC8vIHRoZSByZXN1bHQgb2YgYW5vdGhlciBtZXJnZU9wdGlvbnMgY2FsbC4KICAgIC8vIE9ubHkgbWVyZ2VkIG9wdGlvbnMgaGFzIHRoZSBfYmFzZSBwcm9wZXJ0eS4KICAgIGlmICghY2hpbGQuX2Jhc2UpIHsKICAgICAgaWYgKGNoaWxkLmV4dGVuZHMpIHsKICAgICAgICBwYXJlbnQgPSBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZC5leHRlbmRzLCB2bSk7CiAgICAgIH0KICAgICAgaWYgKGNoaWxkLm1peGlucykgewogICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGQubWl4aW5zLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgcGFyZW50ID0gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGQubWl4aW5zW2ldLCB2bSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgdmFyIG9wdGlvbnMgPSB7fTsKICAgIHZhciBrZXk7CiAgICBmb3IgKGtleSBpbiBwYXJlbnQpIHsKICAgICAgbWVyZ2VGaWVsZChrZXkpOwogICAgfQogICAgZm9yIChrZXkgaW4gY2hpbGQpIHsKICAgICAgaWYgKCFoYXNPd24ocGFyZW50LCBrZXkpKSB7CiAgICAgICAgbWVyZ2VGaWVsZChrZXkpOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBtZXJnZUZpZWxkIChrZXkpIHsKICAgICAgdmFyIHN0cmF0ID0gc3RyYXRzW2tleV0gfHwgZGVmYXVsdFN0cmF0OwogICAgICBvcHRpb25zW2tleV0gPSBzdHJhdChwYXJlbnRba2V5XSwgY2hpbGRba2V5XSwgdm0sIGtleSk7CiAgICB9CiAgICByZXR1cm4gb3B0aW9ucwogIH0KCiAgLyoqCiAgICogUmVzb2x2ZSBhbiBhc3NldC4KICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYmVjYXVzZSBjaGlsZCBpbnN0YW5jZXMgbmVlZCBhY2Nlc3MKICAgKiB0byBhc3NldHMgZGVmaW5lZCBpbiBpdHMgYW5jZXN0b3IgY2hhaW4uCiAgICovCiAgZnVuY3Rpb24gcmVzb2x2ZUFzc2V0ICgKICAgIG9wdGlvbnMsCiAgICB0eXBlLAogICAgaWQsCiAgICB3YXJuTWlzc2luZwogICkgewogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykgewogICAgICByZXR1cm4KICAgIH0KICAgIHZhciBhc3NldHMgPSBvcHRpb25zW3R5cGVdOwogICAgLy8gY2hlY2sgbG9jYWwgcmVnaXN0cmF0aW9uIHZhcmlhdGlvbnMgZmlyc3QKICAgIGlmIChoYXNPd24oYXNzZXRzLCBpZCkpIHsgcmV0dXJuIGFzc2V0c1tpZF0gfQogICAgdmFyIGNhbWVsaXplZElkID0gY2FtZWxpemUoaWQpOwogICAgaWYgKGhhc093bihhc3NldHMsIGNhbWVsaXplZElkKSkgeyByZXR1cm4gYXNzZXRzW2NhbWVsaXplZElkXSB9CiAgICB2YXIgUGFzY2FsQ2FzZUlkID0gY2FwaXRhbGl6ZShjYW1lbGl6ZWRJZCk7CiAgICBpZiAoaGFzT3duKGFzc2V0cywgUGFzY2FsQ2FzZUlkKSkgeyByZXR1cm4gYXNzZXRzW1Bhc2NhbENhc2VJZF0gfQogICAgLy8gZmFsbGJhY2sgdG8gcHJvdG90eXBlIGNoYWluCiAgICB2YXIgcmVzID0gYXNzZXRzW2lkXSB8fCBhc3NldHNbY2FtZWxpemVkSWRdIHx8IGFzc2V0c1tQYXNjYWxDYXNlSWRdOwogICAgaWYgKHdhcm5NaXNzaW5nICYmICFyZXMpIHsKICAgICAgd2FybigKICAgICAgICAnRmFpbGVkIHRvIHJlc29sdmUgJyArIHR5cGUuc2xpY2UoMCwgLTEpICsgJzogJyArIGlkLAogICAgICAgIG9wdGlvbnMKICAgICAgKTsKICAgIH0KICAgIHJldHVybiByZXMKICB9CgogIC8qICAqLwoKCgogIGZ1bmN0aW9uIHZhbGlkYXRlUHJvcCAoCiAgICBrZXksCiAgICBwcm9wT3B0aW9ucywKICAgIHByb3BzRGF0YSwKICAgIHZtCiAgKSB7CiAgICB2YXIgcHJvcCA9IHByb3BPcHRpb25zW2tleV07CiAgICB2YXIgYWJzZW50ID0gIWhhc093bihwcm9wc0RhdGEsIGtleSk7CiAgICB2YXIgdmFsdWUgPSBwcm9wc0RhdGFba2V5XTsKICAgIC8vIGJvb2xlYW4gY2FzdGluZwogICAgdmFyIGJvb2xlYW5JbmRleCA9IGdldFR5cGVJbmRleChCb29sZWFuLCBwcm9wLnR5cGUpOwogICAgaWYgKGJvb2xlYW5JbmRleCA+IC0xKSB7CiAgICAgIGlmIChhYnNlbnQgJiYgIWhhc093bihwcm9wLCAnZGVmYXVsdCcpKSB7CiAgICAgICAgdmFsdWUgPSBmYWxzZTsKICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJycgfHwgdmFsdWUgPT09IGh5cGhlbmF0ZShrZXkpKSB7CiAgICAgICAgLy8gb25seSBjYXN0IGVtcHR5IHN0cmluZyAvIHNhbWUgbmFtZSB0byBib29sZWFuIGlmCiAgICAgICAgLy8gYm9vbGVhbiBoYXMgaGlnaGVyIHByaW9yaXR5CiAgICAgICAgdmFyIHN0cmluZ0luZGV4ID0gZ2V0VHlwZUluZGV4KFN0cmluZywgcHJvcC50eXBlKTsKICAgICAgICBpZiAoc3RyaW5nSW5kZXggPCAwIHx8IGJvb2xlYW5JbmRleCA8IHN0cmluZ0luZGV4KSB7CiAgICAgICAgICB2YWx1ZSA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvLyBjaGVjayBkZWZhdWx0IHZhbHVlCiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICB2YWx1ZSA9IGdldFByb3BEZWZhdWx0VmFsdWUodm0sIHByb3AsIGtleSk7CiAgICAgIC8vIHNpbmNlIHRoZSBkZWZhdWx0IHZhbHVlIGlzIGEgZnJlc2ggY29weSwKICAgICAgLy8gbWFrZSBzdXJlIHRvIG9ic2VydmUgaXQuCiAgICAgIHZhciBwcmV2U2hvdWxkT2JzZXJ2ZSA9IHNob3VsZE9ic2VydmU7CiAgICAgIHRvZ2dsZU9ic2VydmluZyh0cnVlKTsKICAgICAgb2JzZXJ2ZSh2YWx1ZSk7CiAgICAgIHRvZ2dsZU9ic2VydmluZyhwcmV2U2hvdWxkT2JzZXJ2ZSk7CiAgICB9CiAgICB7CiAgICAgIGFzc2VydFByb3AocHJvcCwga2V5LCB2YWx1ZSwgdm0sIGFic2VudCk7CiAgICB9CiAgICByZXR1cm4gdmFsdWUKICB9CgogIC8qKgogICAqIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHByb3AuCiAgICovCiAgZnVuY3Rpb24gZ2V0UHJvcERlZmF1bHRWYWx1ZSAodm0sIHByb3AsIGtleSkgewogICAgLy8gbm8gZGVmYXVsdCwgcmV0dXJuIHVuZGVmaW5lZAogICAgaWYgKCFoYXNPd24ocHJvcCwgJ2RlZmF1bHQnKSkgewogICAgICByZXR1cm4gdW5kZWZpbmVkCiAgICB9CiAgICB2YXIgZGVmID0gcHJvcC5kZWZhdWx0OwogICAgLy8gd2FybiBhZ2FpbnN0IG5vbi1mYWN0b3J5IGRlZmF1bHRzIGZvciBPYmplY3QgJiBBcnJheQogICAgaWYgKGlzT2JqZWN0KGRlZikpIHsKICAgICAgd2FybigKICAgICAgICAnSW52YWxpZCBkZWZhdWx0IHZhbHVlIGZvciBwcm9wICInICsga2V5ICsgJyI6ICcgKwogICAgICAgICdQcm9wcyB3aXRoIHR5cGUgT2JqZWN0L0FycmF5IG11c3QgdXNlIGEgZmFjdG9yeSBmdW5jdGlvbiAnICsKICAgICAgICAndG8gcmV0dXJuIHRoZSBkZWZhdWx0IHZhbHVlLicsCiAgICAgICAgdm0KICAgICAgKTsKICAgIH0KICAgIC8vIHRoZSByYXcgcHJvcCB2YWx1ZSB3YXMgYWxzbyB1bmRlZmluZWQgZnJvbSBwcmV2aW91cyByZW5kZXIsCiAgICAvLyByZXR1cm4gcHJldmlvdXMgZGVmYXVsdCB2YWx1ZSB0byBhdm9pZCB1bm5lY2Vzc2FyeSB3YXRjaGVyIHRyaWdnZXIKICAgIGlmICh2bSAmJiB2bS4kb3B0aW9ucy5wcm9wc0RhdGEgJiYKICAgICAgdm0uJG9wdGlvbnMucHJvcHNEYXRhW2tleV0gPT09IHVuZGVmaW5lZCAmJgogICAgICB2bS5fcHJvcHNba2V5XSAhPT0gdW5kZWZpbmVkCiAgICApIHsKICAgICAgcmV0dXJuIHZtLl9wcm9wc1trZXldCiAgICB9CiAgICAvLyBjYWxsIGZhY3RvcnkgZnVuY3Rpb24gZm9yIG5vbi1GdW5jdGlvbiB0eXBlcwogICAgLy8gYSB2YWx1ZSBpcyBGdW5jdGlvbiBpZiBpdHMgcHJvdG90eXBlIGlzIGZ1bmN0aW9uIGV2ZW4gYWNyb3NzIGRpZmZlcmVudCBleGVjdXRpb24gY29udGV4dAogICAgcmV0dXJuIHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicgJiYgZ2V0VHlwZShwcm9wLnR5cGUpICE9PSAnRnVuY3Rpb24nCiAgICAgID8gZGVmLmNhbGwodm0pCiAgICAgIDogZGVmCiAgfQoKICAvKioKICAgKiBBc3NlcnQgd2hldGhlciBhIHByb3AgaXMgdmFsaWQuCiAgICovCiAgZnVuY3Rpb24gYXNzZXJ0UHJvcCAoCiAgICBwcm9wLAogICAgbmFtZSwKICAgIHZhbHVlLAogICAgdm0sCiAgICBhYnNlbnQKICApIHsKICAgIGlmIChwcm9wLnJlcXVpcmVkICYmIGFic2VudCkgewogICAgICB3YXJuKAogICAgICAgICdNaXNzaW5nIHJlcXVpcmVkIHByb3A6ICInICsgbmFtZSArICciJywKICAgICAgICB2bQogICAgICApOwogICAgICByZXR1cm4KICAgIH0KICAgIGlmICh2YWx1ZSA9PSBudWxsICYmICFwcm9wLnJlcXVpcmVkKSB7CiAgICAgIHJldHVybgogICAgfQogICAgdmFyIHR5cGUgPSBwcm9wLnR5cGU7CiAgICB2YXIgdmFsaWQgPSAhdHlwZSB8fCB0eXBlID09PSB0cnVlOwogICAgdmFyIGV4cGVjdGVkVHlwZXMgPSBbXTsKICAgIGlmICh0eXBlKSB7CiAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0eXBlKSkgewogICAgICAgIHR5cGUgPSBbdHlwZV07CiAgICAgIH0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0eXBlLmxlbmd0aCAmJiAhdmFsaWQ7IGkrKykgewogICAgICAgIHZhciBhc3NlcnRlZFR5cGUgPSBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlW2ldKTsKICAgICAgICBleHBlY3RlZFR5cGVzLnB1c2goYXNzZXJ0ZWRUeXBlLmV4cGVjdGVkVHlwZSB8fCAnJyk7CiAgICAgICAgdmFsaWQgPSBhc3NlcnRlZFR5cGUudmFsaWQ7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoIXZhbGlkKSB7CiAgICAgIHdhcm4oCiAgICAgICAgZ2V0SW52YWxpZFR5cGVNZXNzYWdlKG5hbWUsIHZhbHVlLCBleHBlY3RlZFR5cGVzKSwKICAgICAgICB2bQogICAgICApOwogICAgICByZXR1cm4KICAgIH0KICAgIHZhciB2YWxpZGF0b3IgPSBwcm9wLnZhbGlkYXRvcjsKICAgIGlmICh2YWxpZGF0b3IpIHsKICAgICAgaWYgKCF2YWxpZGF0b3IodmFsdWUpKSB7CiAgICAgICAgd2FybigKICAgICAgICAgICdJbnZhbGlkIHByb3A6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwcm9wICInICsgbmFtZSArICciLicsCiAgICAgICAgICB2bQogICAgICAgICk7CiAgICAgIH0KICAgIH0KICB9CgogIHZhciBzaW1wbGVDaGVja1JFID0gL14oU3RyaW5nfE51bWJlcnxCb29sZWFufEZ1bmN0aW9ufFN5bWJvbCkkLzsKCiAgZnVuY3Rpb24gYXNzZXJ0VHlwZSAodmFsdWUsIHR5cGUpIHsKICAgIHZhciB2YWxpZDsKICAgIHZhciBleHBlY3RlZFR5cGUgPSBnZXRUeXBlKHR5cGUpOwogICAgaWYgKHNpbXBsZUNoZWNrUkUudGVzdChleHBlY3RlZFR5cGUpKSB7CiAgICAgIHZhciB0ID0gdHlwZW9mIHZhbHVlOwogICAgICB2YWxpZCA9IHQgPT09IGV4cGVjdGVkVHlwZS50b0xvd2VyQ2FzZSgpOwogICAgICAvLyBmb3IgcHJpbWl0aXZlIHdyYXBwZXIgb2JqZWN0cwogICAgICBpZiAoIXZhbGlkICYmIHQgPT09ICdvYmplY3QnKSB7CiAgICAgICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSAnT2JqZWN0JykgewogICAgICB2YWxpZCA9IGlzUGxhaW5PYmplY3QodmFsdWUpOwogICAgfSBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09ICdBcnJheScpIHsKICAgICAgdmFsaWQgPSBBcnJheS5pc0FycmF5KHZhbHVlKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhbGlkID0gdmFsdWUgaW5zdGFuY2VvZiB0eXBlOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IHZhbGlkLAogICAgICBleHBlY3RlZFR5cGU6IGV4cGVjdGVkVHlwZQogICAgfQogIH0KCiAgLyoqCiAgICogVXNlIGZ1bmN0aW9uIHN0cmluZyBuYW1lIHRvIGNoZWNrIGJ1aWx0LWluIHR5cGVzLAogICAqIGJlY2F1c2UgYSBzaW1wbGUgZXF1YWxpdHkgY2hlY2sgd2lsbCBmYWlsIHdoZW4gcnVubmluZwogICAqIGFjcm9zcyBkaWZmZXJlbnQgdm1zIC8gaWZyYW1lcy4KICAgKi8KICBmdW5jdGlvbiBnZXRUeXBlIChmbikgewogICAgdmFyIG1hdGNoID0gZm4gJiYgZm4udG9TdHJpbmcoKS5tYXRjaCgvXlxzKmZ1bmN0aW9uIChcdyspLyk7CiAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSA6ICcnCiAgfQoKICBmdW5jdGlvbiBpc1NhbWVUeXBlIChhLCBiKSB7CiAgICByZXR1cm4gZ2V0VHlwZShhKSA9PT0gZ2V0VHlwZShiKQogIH0KCiAgZnVuY3Rpb24gZ2V0VHlwZUluZGV4ICh0eXBlLCBleHBlY3RlZFR5cGVzKSB7CiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZXhwZWN0ZWRUeXBlcykpIHsKICAgICAgcmV0dXJuIGlzU2FtZVR5cGUoZXhwZWN0ZWRUeXBlcywgdHlwZSkgPyAwIDogLTEKICAgIH0KICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBleHBlY3RlZFR5cGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgIGlmIChpc1NhbWVUeXBlKGV4cGVjdGVkVHlwZXNbaV0sIHR5cGUpKSB7CiAgICAgICAgcmV0dXJuIGkKICAgICAgfQogICAgfQogICAgcmV0dXJuIC0xCiAgfQoKICBmdW5jdGlvbiBnZXRJbnZhbGlkVHlwZU1lc3NhZ2UgKG5hbWUsIHZhbHVlLCBleHBlY3RlZFR5cGVzKSB7CiAgICB2YXIgbWVzc2FnZSA9ICJJbnZhbGlkIHByb3A6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiIiArIG5hbWUgKyAiXCIuIiArCiAgICAgICIgRXhwZWN0ZWQgIiArIChleHBlY3RlZFR5cGVzLm1hcChjYXBpdGFsaXplKS5qb2luKCcsICcpKTsKICAgIHZhciBleHBlY3RlZFR5cGUgPSBleHBlY3RlZFR5cGVzWzBdOwogICAgdmFyIHJlY2VpdmVkVHlwZSA9IHRvUmF3VHlwZSh2YWx1ZSk7CiAgICB2YXIgZXhwZWN0ZWRWYWx1ZSA9IHN0eWxlVmFsdWUodmFsdWUsIGV4cGVjdGVkVHlwZSk7CiAgICB2YXIgcmVjZWl2ZWRWYWx1ZSA9IHN0eWxlVmFsdWUodmFsdWUsIHJlY2VpdmVkVHlwZSk7CiAgICAvLyBjaGVjayBpZiB3ZSBuZWVkIHRvIHNwZWNpZnkgZXhwZWN0ZWQgdmFsdWUKICAgIGlmIChleHBlY3RlZFR5cGVzLmxlbmd0aCA9PT0gMSAmJgogICAgICAgIGlzRXhwbGljYWJsZShleHBlY3RlZFR5cGUpICYmCiAgICAgICAgIWlzQm9vbGVhbihleHBlY3RlZFR5cGUsIHJlY2VpdmVkVHlwZSkpIHsKICAgICAgbWVzc2FnZSArPSAiIHdpdGggdmFsdWUgIiArIGV4cGVjdGVkVmFsdWU7CiAgICB9CiAgICBtZXNzYWdlICs9ICIsIGdvdCAiICsgcmVjZWl2ZWRUeXBlICsgIiAiOwogICAgLy8gY2hlY2sgaWYgd2UgbmVlZCB0byBzcGVjaWZ5IHJlY2VpdmVkIHZhbHVlCiAgICBpZiAoaXNFeHBsaWNhYmxlKHJlY2VpdmVkVHlwZSkpIHsKICAgICAgbWVzc2FnZSArPSAid2l0aCB2YWx1ZSAiICsgcmVjZWl2ZWRWYWx1ZSArICIuIjsKICAgIH0KICAgIHJldHVybiBtZXNzYWdlCiAgfQoKICBmdW5jdGlvbiBzdHlsZVZhbHVlICh2YWx1ZSwgdHlwZSkgewogICAgaWYgKHR5cGUgPT09ICdTdHJpbmcnKSB7CiAgICAgIHJldHVybiAoIlwiIiArIHZhbHVlICsgIlwiIikKICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ051bWJlcicpIHsKICAgICAgcmV0dXJuICgiIiArIChOdW1iZXIodmFsdWUpKSkKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiAoIiIgKyB2YWx1ZSkKICAgIH0KICB9CgogIGZ1bmN0aW9uIGlzRXhwbGljYWJsZSAodmFsdWUpIHsKICAgIHZhciBleHBsaWNpdFR5cGVzID0gWydzdHJpbmcnLCAnbnVtYmVyJywgJ2Jvb2xlYW4nXTsKICAgIHJldHVybiBleHBsaWNpdFR5cGVzLnNvbWUoZnVuY3Rpb24gKGVsZW0pIHsgcmV0dXJuIHZhbHVlLnRvTG93ZXJDYXNlKCkgPT09IGVsZW07IH0pCiAgfQoKICBmdW5jdGlvbiBpc0Jvb2xlYW4gKCkgewogICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsKICAgIHdoaWxlICggbGVuLS0gKSBhcmdzWyBsZW4gXSA9IGFyZ3VtZW50c1sgbGVuIF07CgogICAgcmV0dXJuIGFyZ3Muc29tZShmdW5jdGlvbiAoZWxlbSkgeyByZXR1cm4gZWxlbS50b0xvd2VyQ2FzZSgpID09PSAnYm9vbGVhbic7IH0pCiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gaGFuZGxlRXJyb3IgKGVyciwgdm0sIGluZm8pIHsKICAgIC8vIERlYWN0aXZhdGUgZGVwcyB0cmFja2luZyB3aGlsZSBwcm9jZXNzaW5nIGVycm9yIGhhbmRsZXIgdG8gYXZvaWQgcG9zc2libGUgaW5maW5pdGUgcmVuZGVyaW5nLgogICAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVleC9pc3N1ZXMvMTUwNQogICAgcHVzaFRhcmdldCgpOwogICAgdHJ5IHsKICAgICAgaWYgKHZtKSB7CiAgICAgICAgdmFyIGN1ciA9IHZtOwogICAgICAgIHdoaWxlICgoY3VyID0gY3VyLiRwYXJlbnQpKSB7CiAgICAgICAgICB2YXIgaG9va3MgPSBjdXIuJG9wdGlvbnMuZXJyb3JDYXB0dXJlZDsKICAgICAgICAgIGlmIChob29rcykgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhvb2tzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHZhciBjYXB0dXJlID0gaG9va3NbaV0uY2FsbChjdXIsIGVyciwgdm0sIGluZm8pID09PSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmIChjYXB0dXJlKSB7IHJldHVybiB9CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgZ2xvYmFsSGFuZGxlRXJyb3IoZSwgY3VyLCAnZXJyb3JDYXB0dXJlZCBob29rJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGdsb2JhbEhhbmRsZUVycm9yKGVyciwgdm0sIGluZm8pOwogICAgfSBmaW5hbGx5IHsKICAgICAgcG9wVGFyZ2V0KCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBpbnZva2VXaXRoRXJyb3JIYW5kbGluZyAoCiAgICBoYW5kbGVyLAogICAgY29udGV4dCwKICAgIGFyZ3MsCiAgICB2bSwKICAgIGluZm8KICApIHsKICAgIHZhciByZXM7CiAgICB0cnkgewogICAgICByZXMgPSBhcmdzID8gaGFuZGxlci5hcHBseShjb250ZXh0LCBhcmdzKSA6IGhhbmRsZXIuY2FsbChjb250ZXh0KTsKICAgICAgaWYgKHJlcyAmJiAhcmVzLl9pc1Z1ZSAmJiBpc1Byb21pc2UocmVzKSAmJiAhcmVzLl9oYW5kbGVkKSB7CiAgICAgICAgcmVzLmNhdGNoKGZ1bmN0aW9uIChlKSB7IHJldHVybiBoYW5kbGVFcnJvcihlLCB2bSwgaW5mbyArICIgKFByb21pc2UvYXN5bmMpIik7IH0pOwogICAgICAgIC8vIGlzc3VlICM5NTExCiAgICAgICAgLy8gYXZvaWQgY2F0Y2ggdHJpZ2dlcmluZyBtdWx0aXBsZSB0aW1lcyB3aGVuIG5lc3RlZCBjYWxscwogICAgICAgIHJlcy5faGFuZGxlZCA9IHRydWU7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgaGFuZGxlRXJyb3IoZSwgdm0sIGluZm8pOwogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgZnVuY3Rpb24gZ2xvYmFsSGFuZGxlRXJyb3IgKGVyciwgdm0sIGluZm8pIHsKICAgIGlmIChjb25maWcuZXJyb3JIYW5kbGVyKSB7CiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIGNvbmZpZy5lcnJvckhhbmRsZXIuY2FsbChudWxsLCBlcnIsIHZtLCBpbmZvKQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgLy8gaWYgdGhlIHVzZXIgaW50ZW50aW9uYWxseSB0aHJvd3MgdGhlIG9yaWdpbmFsIGVycm9yIGluIHRoZSBoYW5kbGVyLAogICAgICAgIC8vIGRvIG5vdCBsb2cgaXQgdHdpY2UKICAgICAgICBpZiAoZSAhPT0gZXJyKSB7CiAgICAgICAgICBsb2dFcnJvcihlLCBudWxsLCAnY29uZmlnLmVycm9ySGFuZGxlcicpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgbG9nRXJyb3IoZXJyLCB2bSwgaW5mbyk7CiAgfQoKICBmdW5jdGlvbiBsb2dFcnJvciAoZXJyLCB2bSwgaW5mbykgewogICAgewogICAgICB3YXJuKCgiRXJyb3IgaW4gIiArIGluZm8gKyAiOiBcIiIgKyAoZXJyLnRvU3RyaW5nKCkpICsgIlwiIiksIHZtKTsKICAgIH0KICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovCiAgICBpZiAoKGluQnJvd3NlciB8fCBpbldlZXgpICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykgewogICAgICBjb25zb2xlLmVycm9yKGVycik7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBlcnIKICAgIH0KICB9CgogIC8qICAqLwoKICB2YXIgaXNVc2luZ01pY3JvVGFzayA9IGZhbHNlOwoKICB2YXIgY2FsbGJhY2tzID0gW107CiAgdmFyIHBlbmRpbmcgPSBmYWxzZTsKCiAgZnVuY3Rpb24gZmx1c2hDYWxsYmFja3MgKCkgewogICAgcGVuZGluZyA9IGZhbHNlOwogICAgdmFyIGNvcGllcyA9IGNhbGxiYWNrcy5zbGljZSgwKTsKICAgIGNhbGxiYWNrcy5sZW5ndGggPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3BpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgY29waWVzW2ldKCk7CiAgICB9CiAgfQoKICAvLyBIZXJlIHdlIGhhdmUgYXN5bmMgZGVmZXJyaW5nIHdyYXBwZXJzIHVzaW5nIG1pY3JvdGFza3MuCiAgLy8gSW4gMi41IHdlIHVzZWQgKG1hY3JvKSB0YXNrcyAoaW4gY29tYmluYXRpb24gd2l0aCBtaWNyb3Rhc2tzKS4KICAvLyBIb3dldmVyLCBpdCBoYXMgc3VidGxlIHByb2JsZW1zIHdoZW4gc3RhdGUgaXMgY2hhbmdlZCByaWdodCBiZWZvcmUgcmVwYWludAogIC8vIChlLmcuICM2ODEzLCBvdXQtaW4gdHJhbnNpdGlvbnMpLgogIC8vIEFsc28sIHVzaW5nIChtYWNybykgdGFza3MgaW4gZXZlbnQgaGFuZGxlciB3b3VsZCBjYXVzZSBzb21lIHdlaXJkIGJlaGF2aW9ycwogIC8vIHRoYXQgY2Fubm90IGJlIGNpcmN1bXZlbnRlZCAoZS5nLiAjNzEwOSwgIzcxNTMsICM3NTQ2LCAjNzgzNCwgIzgxMDkpLgogIC8vIFNvIHdlIG5vdyB1c2UgbWljcm90YXNrcyBldmVyeXdoZXJlLCBhZ2Fpbi4KICAvLyBBIG1ham9yIGRyYXdiYWNrIG9mIHRoaXMgdHJhZGVvZmYgaXMgdGhhdCB0aGVyZSBhcmUgc29tZSBzY2VuYXJpb3MKICAvLyB3aGVyZSBtaWNyb3Rhc2tzIGhhdmUgdG9vIGhpZ2ggYSBwcmlvcml0eSBhbmQgZmlyZSBpbiBiZXR3ZWVuIHN1cHBvc2VkbHkKICAvLyBzZXF1ZW50aWFsIGV2ZW50cyAoZS5nLiAjNDUyMSwgIzY2OTAsIHdoaWNoIGhhdmUgd29ya2Fyb3VuZHMpCiAgLy8gb3IgZXZlbiBiZXR3ZWVuIGJ1YmJsaW5nIG9mIHRoZSBzYW1lIGV2ZW50ICgjNjU2NikuCiAgdmFyIHRpbWVyRnVuYzsKCiAgLy8gVGhlIG5leHRUaWNrIGJlaGF2aW9yIGxldmVyYWdlcyB0aGUgbWljcm90YXNrIHF1ZXVlLCB3aGljaCBjYW4gYmUgYWNjZXNzZWQKICAvLyB2aWEgZWl0aGVyIG5hdGl2ZSBQcm9taXNlLnRoZW4gb3IgTXV0YXRpb25PYnNlcnZlci4KICAvLyBNdXRhdGlvbk9ic2VydmVyIGhhcyB3aWRlciBzdXBwb3J0LCBob3dldmVyIGl0IGlzIHNlcmlvdXNseSBidWdnZWQgaW4KICAvLyBVSVdlYlZpZXcgaW4gaU9TID49IDkuMy4zIHdoZW4gdHJpZ2dlcmVkIGluIHRvdWNoIGV2ZW50IGhhbmRsZXJzLiBJdAogIC8vIGNvbXBsZXRlbHkgc3RvcHMgd29ya2luZyBhZnRlciB0cmlnZ2VyaW5nIGEgZmV3IHRpbWVzLi4uIHNvLCBpZiBuYXRpdmUKICAvLyBQcm9taXNlIGlzIGF2YWlsYWJsZSwgd2Ugd2lsbCB1c2UgaXQ6CiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQsICRmbG93LWRpc2FibGUtbGluZSAqLwogIGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoUHJvbWlzZSkpIHsKICAgIHZhciBwID0gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICB0aW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHAudGhlbihmbHVzaENhbGxiYWNrcyk7CiAgICAgIC8vIEluIHByb2JsZW1hdGljIFVJV2ViVmlld3MsIFByb21pc2UudGhlbiBkb2Vzbid0IGNvbXBsZXRlbHkgYnJlYWssIGJ1dAogICAgICAvLyBpdCBjYW4gZ2V0IHN0dWNrIGluIGEgd2VpcmQgc3RhdGUgd2hlcmUgY2FsbGJhY2tzIGFyZSBwdXNoZWQgaW50byB0aGUKICAgICAgLy8gbWljcm90YXNrIHF1ZXVlIGJ1dCB0aGUgcXVldWUgaXNuJ3QgYmVpbmcgZmx1c2hlZCwgdW50aWwgdGhlIGJyb3dzZXIKICAgICAgLy8gbmVlZHMgdG8gZG8gc29tZSBvdGhlciB3b3JrLCBlLmcuIGhhbmRsZSBhIHRpbWVyLiBUaGVyZWZvcmUgd2UgY2FuCiAgICAgIC8vICJmb3JjZSIgdGhlIG1pY3JvdGFzayBxdWV1ZSB0byBiZSBmbHVzaGVkIGJ5IGFkZGluZyBhbiBlbXB0eSB0aW1lci4KICAgICAgaWYgKGlzSU9TKSB7IHNldFRpbWVvdXQobm9vcCk7IH0KICAgIH07CiAgICBpc1VzaW5nTWljcm9UYXNrID0gdHJ1ZTsKICB9IGVsc2UgaWYgKCFpc0lFICYmIHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyICE9PSAndW5kZWZpbmVkJyAmJiAoCiAgICBpc05hdGl2ZShNdXRhdGlvbk9ic2VydmVyKSB8fAogICAgLy8gUGhhbnRvbUpTIGFuZCBpT1MgNy54CiAgICBNdXRhdGlvbk9ic2VydmVyLnRvU3RyaW5nKCkgPT09ICdbb2JqZWN0IE11dGF0aW9uT2JzZXJ2ZXJDb25zdHJ1Y3Rvcl0nCiAgKSkgewogICAgLy8gVXNlIE11dGF0aW9uT2JzZXJ2ZXIgd2hlcmUgbmF0aXZlIFByb21pc2UgaXMgbm90IGF2YWlsYWJsZSwKICAgIC8vIGUuZy4gUGhhbnRvbUpTLCBpT1M3LCBBbmRyb2lkIDQuNAogICAgLy8gKCM2NDY2IE11dGF0aW9uT2JzZXJ2ZXIgaXMgdW5yZWxpYWJsZSBpbiBJRTExKQogICAgdmFyIGNvdW50ZXIgPSAxOwogICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZmx1c2hDYWxsYmFja3MpOwogICAgdmFyIHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoU3RyaW5nKGNvdW50ZXIpKTsKICAgIG9ic2VydmVyLm9ic2VydmUodGV4dE5vZGUsIHsKICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZQogICAgfSk7CiAgICB0aW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGNvdW50ZXIgPSAoY291bnRlciArIDEpICUgMjsKICAgICAgdGV4dE5vZGUuZGF0YSA9IFN0cmluZyhjb3VudGVyKTsKICAgIH07CiAgICBpc1VzaW5nTWljcm9UYXNrID0gdHJ1ZTsKICB9IGVsc2UgaWYgKHR5cGVvZiBzZXRJbW1lZGlhdGUgIT09ICd1bmRlZmluZWQnICYmIGlzTmF0aXZlKHNldEltbWVkaWF0ZSkpIHsKICAgIC8vIEZhbGxiYWNrIHRvIHNldEltbWVkaWF0ZS4KICAgIC8vIFRlY2hpbmljYWxseSBpdCBsZXZlcmFnZXMgdGhlIChtYWNybykgdGFzayBxdWV1ZSwKICAgIC8vIGJ1dCBpdCBpcyBzdGlsbCBhIGJldHRlciBjaG9pY2UgdGhhbiBzZXRUaW1lb3V0LgogICAgdGltZXJGdW5jID0gZnVuY3Rpb24gKCkgewogICAgICBzZXRJbW1lZGlhdGUoZmx1c2hDYWxsYmFja3MpOwogICAgfTsKICB9IGVsc2UgewogICAgLy8gRmFsbGJhY2sgdG8gc2V0VGltZW91dC4KICAgIHRpbWVyRnVuYyA9IGZ1bmN0aW9uICgpIHsKICAgICAgc2V0VGltZW91dChmbHVzaENhbGxiYWNrcywgMCk7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gbmV4dFRpY2sgKGNiLCBjdHgpIHsKICAgIHZhciBfcmVzb2x2ZTsKICAgIGNhbGxiYWNrcy5wdXNoKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKGNiKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNiLmNhbGwoY3R4KTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBoYW5kbGVFcnJvcihlLCBjdHgsICduZXh0VGljaycpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChfcmVzb2x2ZSkgewogICAgICAgIF9yZXNvbHZlKGN0eCk7CiAgICAgIH0KICAgIH0pOwogICAgaWYgKCFwZW5kaW5nKSB7CiAgICAgIHBlbmRpbmcgPSB0cnVlOwogICAgICB0aW1lckZ1bmMoKTsKICAgIH0KICAgIC8vICRmbG93LWRpc2FibGUtbGluZQogICAgaWYgKCFjYiAmJiB0eXBlb2YgUHJvbWlzZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgX3Jlc29sdmUgPSByZXNvbHZlOwogICAgICB9KQogICAgfQogIH0KCiAgLyogICovCgogIHZhciBtYXJrOwogIHZhciBtZWFzdXJlOwoKICB7CiAgICB2YXIgcGVyZiA9IGluQnJvd3NlciAmJiB3aW5kb3cucGVyZm9ybWFuY2U7CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgIGlmICgKICAgICAgcGVyZiAmJgogICAgICBwZXJmLm1hcmsgJiYKICAgICAgcGVyZi5tZWFzdXJlICYmCiAgICAgIHBlcmYuY2xlYXJNYXJrcyAmJgogICAgICBwZXJmLmNsZWFyTWVhc3VyZXMKICAgICkgewogICAgICBtYXJrID0gZnVuY3Rpb24gKHRhZykgeyByZXR1cm4gcGVyZi5tYXJrKHRhZyk7IH07CiAgICAgIG1lYXN1cmUgPSBmdW5jdGlvbiAobmFtZSwgc3RhcnRUYWcsIGVuZFRhZykgewogICAgICAgIHBlcmYubWVhc3VyZShuYW1lLCBzdGFydFRhZywgZW5kVGFnKTsKICAgICAgICBwZXJmLmNsZWFyTWFya3Moc3RhcnRUYWcpOwogICAgICAgIHBlcmYuY2xlYXJNYXJrcyhlbmRUYWcpOwogICAgICAgIC8vIHBlcmYuY2xlYXJNZWFzdXJlcyhuYW1lKQogICAgICB9OwogICAgfQogIH0KCiAgLyogbm90IHR5cGUgY2hlY2tpbmcgdGhpcyBmaWxlIGJlY2F1c2UgZmxvdyBkb2Vzbid0IHBsYXkgd2VsbCB3aXRoIFByb3h5ICovCgogIHZhciBpbml0UHJveHk7CgogIHsKICAgIHZhciBhbGxvd2VkR2xvYmFscyA9IG1ha2VNYXAoCiAgICAgICdJbmZpbml0eSx1bmRlZmluZWQsTmFOLGlzRmluaXRlLGlzTmFOLCcgKwogICAgICAncGFyc2VGbG9hdCxwYXJzZUludCxkZWNvZGVVUkksZGVjb2RlVVJJQ29tcG9uZW50LGVuY29kZVVSSSxlbmNvZGVVUklDb21wb25lbnQsJyArCiAgICAgICdNYXRoLE51bWJlcixEYXRlLEFycmF5LE9iamVjdCxCb29sZWFuLFN0cmluZyxSZWdFeHAsTWFwLFNldCxKU09OLEludGwsJyArCiAgICAgICdyZXF1aXJlJyAvLyBmb3IgV2VicGFjay9Ccm93c2VyaWZ5CiAgICApOwoKICAgIHZhciB3YXJuTm9uUHJlc2VudCA9IGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgewogICAgICB3YXJuKAogICAgICAgICJQcm9wZXJ0eSBvciBtZXRob2QgXCIiICsga2V5ICsgIlwiIGlzIG5vdCBkZWZpbmVkIG9uIHRoZSBpbnN0YW5jZSBidXQgIiArCiAgICAgICAgJ3JlZmVyZW5jZWQgZHVyaW5nIHJlbmRlci4gTWFrZSBzdXJlIHRoYXQgdGhpcyBwcm9wZXJ0eSBpcyByZWFjdGl2ZSwgJyArCiAgICAgICAgJ2VpdGhlciBpbiB0aGUgZGF0YSBvcHRpb24sIG9yIGZvciBjbGFzcy1iYXNlZCBjb21wb25lbnRzLCBieSAnICsKICAgICAgICAnaW5pdGlhbGl6aW5nIHRoZSBwcm9wZXJ0eS4gJyArCiAgICAgICAgJ1NlZTogaHR0cHM6Ly92dWVqcy5vcmcvdjIvZ3VpZGUvcmVhY3Rpdml0eS5odG1sI0RlY2xhcmluZy1SZWFjdGl2ZS1Qcm9wZXJ0aWVzLicsCiAgICAgICAgdGFyZ2V0CiAgICAgICk7CiAgICB9OwoKICAgIHZhciB3YXJuUmVzZXJ2ZWRQcmVmaXggPSBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsKICAgICAgd2FybigKICAgICAgICAiUHJvcGVydHkgXCIiICsga2V5ICsgIlwiIG11c3QgYmUgYWNjZXNzZWQgd2l0aCBcIiRkYXRhLiIgKyBrZXkgKyAiXCIgYmVjYXVzZSAiICsKICAgICAgICAncHJvcGVydGllcyBzdGFydGluZyB3aXRoICIkIiBvciAiXyIgYXJlIG5vdCBwcm94aWVkIGluIHRoZSBWdWUgaW5zdGFuY2UgdG8gJyArCiAgICAgICAgJ3ByZXZlbnQgY29uZmxpY3RzIHdpdGggVnVlIGludGVybmFscycgKwogICAgICAgICdTZWU6IGh0dHBzOi8vdnVlanMub3JnL3YyL2FwaS8jZGF0YScsCiAgICAgICAgdGFyZ2V0CiAgICAgICk7CiAgICB9OwoKICAgIHZhciBoYXNQcm94eSA9CiAgICAgIHR5cGVvZiBQcm94eSAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoUHJveHkpOwoKICAgIGlmIChoYXNQcm94eSkgewogICAgICB2YXIgaXNCdWlsdEluTW9kaWZpZXIgPSBtYWtlTWFwKCdzdG9wLHByZXZlbnQsc2VsZixjdHJsLHNoaWZ0LGFsdCxtZXRhLGV4YWN0Jyk7CiAgICAgIGNvbmZpZy5rZXlDb2RlcyA9IG5ldyBQcm94eShjb25maWcua2V5Q29kZXMsIHsKICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCAodGFyZ2V0LCBrZXksIHZhbHVlKSB7CiAgICAgICAgICBpZiAoaXNCdWlsdEluTW9kaWZpZXIoa2V5KSkgewogICAgICAgICAgICB3YXJuKCgiQXZvaWQgb3ZlcndyaXRpbmcgYnVpbHQtaW4gbW9kaWZpZXIgaW4gY29uZmlnLmtleUNvZGVzOiAuIiArIGtleSkpOwogICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRhcmdldFtrZXldID0gdmFsdWU7CiAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICB2YXIgaGFzSGFuZGxlciA9IHsKICAgICAgaGFzOiBmdW5jdGlvbiBoYXMgKHRhcmdldCwga2V5KSB7CiAgICAgICAgdmFyIGhhcyA9IGtleSBpbiB0YXJnZXQ7CiAgICAgICAgdmFyIGlzQWxsb3dlZCA9IGFsbG93ZWRHbG9iYWxzKGtleSkgfHwKICAgICAgICAgICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJyAmJiBrZXkuY2hhckF0KDApID09PSAnXycgJiYgIShrZXkgaW4gdGFyZ2V0LiRkYXRhKSk7CiAgICAgICAgaWYgKCFoYXMgJiYgIWlzQWxsb3dlZCkgewogICAgICAgICAgaWYgKGtleSBpbiB0YXJnZXQuJGRhdGEpIHsgd2FyblJlc2VydmVkUHJlZml4KHRhcmdldCwga2V5KTsgfQogICAgICAgICAgZWxzZSB7IHdhcm5Ob25QcmVzZW50KHRhcmdldCwga2V5KTsgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gaGFzIHx8ICFpc0FsbG93ZWQKICAgICAgfQogICAgfTsKCiAgICB2YXIgZ2V0SGFuZGxlciA9IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQgKHRhcmdldCwga2V5KSB7CiAgICAgICAgaWYgKHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnICYmICEoa2V5IGluIHRhcmdldCkpIHsKICAgICAgICAgIGlmIChrZXkgaW4gdGFyZ2V0LiRkYXRhKSB7IHdhcm5SZXNlcnZlZFByZWZpeCh0YXJnZXQsIGtleSk7IH0KICAgICAgICAgIGVsc2UgeyB3YXJuTm9uUHJlc2VudCh0YXJnZXQsIGtleSk7IH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRhcmdldFtrZXldCiAgICAgIH0KICAgIH07CgogICAgaW5pdFByb3h5ID0gZnVuY3Rpb24gaW5pdFByb3h5ICh2bSkgewogICAgICBpZiAoaGFzUHJveHkpIHsKICAgICAgICAvLyBkZXRlcm1pbmUgd2hpY2ggcHJveHkgaGFuZGxlciB0byB1c2UKICAgICAgICB2YXIgb3B0aW9ucyA9IHZtLiRvcHRpb25zOwogICAgICAgIHZhciBoYW5kbGVycyA9IG9wdGlvbnMucmVuZGVyICYmIG9wdGlvbnMucmVuZGVyLl93aXRoU3RyaXBwZWQKICAgICAgICAgID8gZ2V0SGFuZGxlcgogICAgICAgICAgOiBoYXNIYW5kbGVyOwogICAgICAgIHZtLl9yZW5kZXJQcm94eSA9IG5ldyBQcm94eSh2bSwgaGFuZGxlcnMpOwogICAgICB9IGVsc2UgewogICAgICAgIHZtLl9yZW5kZXJQcm94eSA9IHZtOwogICAgICB9CiAgICB9OwogIH0KCiAgLyogICovCgogIHZhciBzZWVuT2JqZWN0cyA9IG5ldyBfU2V0KCk7CgogIC8qKgogICAqIFJlY3Vyc2l2ZWx5IHRyYXZlcnNlIGFuIG9iamVjdCB0byBldm9rZSBhbGwgY29udmVydGVkCiAgICogZ2V0dGVycywgc28gdGhhdCBldmVyeSBuZXN0ZWQgcHJvcGVydHkgaW5zaWRlIHRoZSBvYmplY3QKICAgKiBpcyBjb2xsZWN0ZWQgYXMgYSAiZGVlcCIgZGVwZW5kZW5jeS4KICAgKi8KICBmdW5jdGlvbiB0cmF2ZXJzZSAodmFsKSB7CiAgICBfdHJhdmVyc2UodmFsLCBzZWVuT2JqZWN0cyk7CiAgICBzZWVuT2JqZWN0cy5jbGVhcigpOwogIH0KCiAgZnVuY3Rpb24gX3RyYXZlcnNlICh2YWwsIHNlZW4pIHsKICAgIHZhciBpLCBrZXlzOwogICAgdmFyIGlzQSA9IEFycmF5LmlzQXJyYXkodmFsKTsKICAgIGlmICgoIWlzQSAmJiAhaXNPYmplY3QodmFsKSkgfHwgT2JqZWN0LmlzRnJvemVuKHZhbCkgfHwgdmFsIGluc3RhbmNlb2YgVk5vZGUpIHsKICAgICAgcmV0dXJuCiAgICB9CiAgICBpZiAodmFsLl9fb2JfXykgewogICAgICB2YXIgZGVwSWQgPSB2YWwuX19vYl9fLmRlcC5pZDsKICAgICAgaWYgKHNlZW4uaGFzKGRlcElkKSkgewogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHNlZW4uYWRkKGRlcElkKTsKICAgIH0KICAgIGlmIChpc0EpIHsKICAgICAgaSA9IHZhbC5sZW5ndGg7CiAgICAgIHdoaWxlIChpLS0pIHsgX3RyYXZlcnNlKHZhbFtpXSwgc2Vlbik7IH0KICAgIH0gZWxzZSB7CiAgICAgIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpOwogICAgICBpID0ga2V5cy5sZW5ndGg7CiAgICAgIHdoaWxlIChpLS0pIHsgX3RyYXZlcnNlKHZhbFtrZXlzW2ldXSwgc2Vlbik7IH0KICAgIH0KICB9CgogIC8qICAqLwoKICB2YXIgbm9ybWFsaXplRXZlbnQgPSBjYWNoZWQoZnVuY3Rpb24gKG5hbWUpIHsKICAgIHZhciBwYXNzaXZlID0gbmFtZS5jaGFyQXQoMCkgPT09ICcmJzsKICAgIG5hbWUgPSBwYXNzaXZlID8gbmFtZS5zbGljZSgxKSA6IG5hbWU7CiAgICB2YXIgb25jZSQkMSA9IG5hbWUuY2hhckF0KDApID09PSAnfic7IC8vIFByZWZpeGVkIGxhc3QsIGNoZWNrZWQgZmlyc3QKICAgIG5hbWUgPSBvbmNlJCQxID8gbmFtZS5zbGljZSgxKSA6IG5hbWU7CiAgICB2YXIgY2FwdHVyZSA9IG5hbWUuY2hhckF0KDApID09PSAnISc7CiAgICBuYW1lID0gY2FwdHVyZSA/IG5hbWUuc2xpY2UoMSkgOiBuYW1lOwogICAgcmV0dXJuIHsKICAgICAgbmFtZTogbmFtZSwKICAgICAgb25jZTogb25jZSQkMSwKICAgICAgY2FwdHVyZTogY2FwdHVyZSwKICAgICAgcGFzc2l2ZTogcGFzc2l2ZQogICAgfQogIH0pOwoKICBmdW5jdGlvbiBjcmVhdGVGbkludm9rZXIgKGZucywgdm0pIHsKICAgIGZ1bmN0aW9uIGludm9rZXIgKCkgewogICAgICB2YXIgYXJndW1lbnRzJDEgPSBhcmd1bWVudHM7CgogICAgICB2YXIgZm5zID0gaW52b2tlci5mbnM7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGZucykpIHsKICAgICAgICB2YXIgY2xvbmVkID0gZm5zLnNsaWNlKCk7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbG9uZWQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGludm9rZVdpdGhFcnJvckhhbmRsaW5nKGNsb25lZFtpXSwgbnVsbCwgYXJndW1lbnRzJDEsIHZtLCAidi1vbiBoYW5kbGVyIik7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIHJldHVybiBoYW5kbGVyIHJldHVybiB2YWx1ZSBmb3Igc2luZ2xlIGhhbmRsZXJzCiAgICAgICAgcmV0dXJuIGludm9rZVdpdGhFcnJvckhhbmRsaW5nKGZucywgbnVsbCwgYXJndW1lbnRzLCB2bSwgInYtb24gaGFuZGxlciIpCiAgICAgIH0KICAgIH0KICAgIGludm9rZXIuZm5zID0gZm5zOwogICAgcmV0dXJuIGludm9rZXIKICB9CgogIGZ1bmN0aW9uIHVwZGF0ZUxpc3RlbmVycyAoCiAgICBvbiwKICAgIG9sZE9uLAogICAgYWRkLAogICAgcmVtb3ZlJCQxLAogICAgY3JlYXRlT25jZUhhbmRsZXIsCiAgICB2bQogICkgewogICAgdmFyIG5hbWUsIGRlZiQkMSwgY3VyLCBvbGQsIGV2ZW50OwogICAgZm9yIChuYW1lIGluIG9uKSB7CiAgICAgIGRlZiQkMSA9IGN1ciA9IG9uW25hbWVdOwogICAgICBvbGQgPSBvbGRPbltuYW1lXTsKICAgICAgZXZlbnQgPSBub3JtYWxpemVFdmVudChuYW1lKTsKICAgICAgaWYgKGlzVW5kZWYoY3VyKSkgewogICAgICAgIHdhcm4oCiAgICAgICAgICAiSW52YWxpZCBoYW5kbGVyIGZvciBldmVudCBcIiIgKyAoZXZlbnQubmFtZSkgKyAiXCI6IGdvdCAiICsgU3RyaW5nKGN1ciksCiAgICAgICAgICB2bQogICAgICAgICk7CiAgICAgIH0gZWxzZSBpZiAoaXNVbmRlZihvbGQpKSB7CiAgICAgICAgaWYgKGlzVW5kZWYoY3VyLmZucykpIHsKICAgICAgICAgIGN1ciA9IG9uW25hbWVdID0gY3JlYXRlRm5JbnZva2VyKGN1ciwgdm0pOwogICAgICAgIH0KICAgICAgICBpZiAoaXNUcnVlKGV2ZW50Lm9uY2UpKSB7CiAgICAgICAgICBjdXIgPSBvbltuYW1lXSA9IGNyZWF0ZU9uY2VIYW5kbGVyKGV2ZW50Lm5hbWUsIGN1ciwgZXZlbnQuY2FwdHVyZSk7CiAgICAgICAgfQogICAgICAgIGFkZChldmVudC5uYW1lLCBjdXIsIGV2ZW50LmNhcHR1cmUsIGV2ZW50LnBhc3NpdmUsIGV2ZW50LnBhcmFtcyk7CiAgICAgIH0gZWxzZSBpZiAoY3VyICE9PSBvbGQpIHsKICAgICAgICBvbGQuZm5zID0gY3VyOwogICAgICAgIG9uW25hbWVdID0gb2xkOwogICAgICB9CiAgICB9CiAgICBmb3IgKG5hbWUgaW4gb2xkT24pIHsKICAgICAgaWYgKGlzVW5kZWYob25bbmFtZV0pKSB7CiAgICAgICAgZXZlbnQgPSBub3JtYWxpemVFdmVudChuYW1lKTsKICAgICAgICByZW1vdmUkJDEoZXZlbnQubmFtZSwgb2xkT25bbmFtZV0sIGV2ZW50LmNhcHR1cmUpOwogICAgICB9CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gbWVyZ2VWTm9kZUhvb2sgKGRlZiwgaG9va0tleSwgaG9vaykgewogICAgaWYgKGRlZiBpbnN0YW5jZW9mIFZOb2RlKSB7CiAgICAgIGRlZiA9IGRlZi5kYXRhLmhvb2sgfHwgKGRlZi5kYXRhLmhvb2sgPSB7fSk7CiAgICB9CiAgICB2YXIgaW52b2tlcjsKICAgIHZhciBvbGRIb29rID0gZGVmW2hvb2tLZXldOwoKICAgIGZ1bmN0aW9uIHdyYXBwZWRIb29rICgpIHsKICAgICAgaG9vay5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAvLyBpbXBvcnRhbnQ6IHJlbW92ZSBtZXJnZWQgaG9vayB0byBlbnN1cmUgaXQncyBjYWxsZWQgb25seSBvbmNlCiAgICAgIC8vIGFuZCBwcmV2ZW50IG1lbW9yeSBsZWFrCiAgICAgIHJlbW92ZShpbnZva2VyLmZucywgd3JhcHBlZEhvb2spOwogICAgfQoKICAgIGlmIChpc1VuZGVmKG9sZEhvb2spKSB7CiAgICAgIC8vIG5vIGV4aXN0aW5nIGhvb2sKICAgICAgaW52b2tlciA9IGNyZWF0ZUZuSW52b2tlcihbd3JhcHBlZEhvb2tdKTsKICAgIH0gZWxzZSB7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICBpZiAoaXNEZWYob2xkSG9vay5mbnMpICYmIGlzVHJ1ZShvbGRIb29rLm1lcmdlZCkpIHsKICAgICAgICAvLyBhbHJlYWR5IGEgbWVyZ2VkIGludm9rZXIKICAgICAgICBpbnZva2VyID0gb2xkSG9vazsKICAgICAgICBpbnZva2VyLmZucy5wdXNoKHdyYXBwZWRIb29rKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBleGlzdGluZyBwbGFpbiBob29rCiAgICAgICAgaW52b2tlciA9IGNyZWF0ZUZuSW52b2tlcihbb2xkSG9vaywgd3JhcHBlZEhvb2tdKTsKICAgICAgfQogICAgfQoKICAgIGludm9rZXIubWVyZ2VkID0gdHJ1ZTsKICAgIGRlZltob29rS2V5XSA9IGludm9rZXI7CiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gZXh0cmFjdFByb3BzRnJvbVZOb2RlRGF0YSAoCiAgICBkYXRhLAogICAgQ3RvciwKICAgIHRhZwogICkgewogICAgLy8gd2UgYXJlIG9ubHkgZXh0cmFjdGluZyByYXcgdmFsdWVzIGhlcmUuCiAgICAvLyB2YWxpZGF0aW9uIGFuZCBkZWZhdWx0IHZhbHVlcyBhcmUgaGFuZGxlZCBpbiB0aGUgY2hpbGQKICAgIC8vIGNvbXBvbmVudCBpdHNlbGYuCiAgICB2YXIgcHJvcE9wdGlvbnMgPSBDdG9yLm9wdGlvbnMucHJvcHM7CiAgICBpZiAoaXNVbmRlZihwcm9wT3B0aW9ucykpIHsKICAgICAgcmV0dXJuCiAgICB9CiAgICB2YXIgcmVzID0ge307CiAgICB2YXIgYXR0cnMgPSBkYXRhLmF0dHJzOwogICAgdmFyIHByb3BzID0gZGF0YS5wcm9wczsKICAgIGlmIChpc0RlZihhdHRycykgfHwgaXNEZWYocHJvcHMpKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBwcm9wT3B0aW9ucykgewogICAgICAgIHZhciBhbHRLZXkgPSBoeXBoZW5hdGUoa2V5KTsKICAgICAgICB7CiAgICAgICAgICB2YXIga2V5SW5Mb3dlckNhc2UgPSBrZXkudG9Mb3dlckNhc2UoKTsKICAgICAgICAgIGlmICgKICAgICAgICAgICAga2V5ICE9PSBrZXlJbkxvd2VyQ2FzZSAmJgogICAgICAgICAgICBhdHRycyAmJiBoYXNPd24oYXR0cnMsIGtleUluTG93ZXJDYXNlKQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRpcCgKICAgICAgICAgICAgICAiUHJvcCBcIiIgKyBrZXlJbkxvd2VyQ2FzZSArICJcIiBpcyBwYXNzZWQgdG8gY29tcG9uZW50ICIgKwogICAgICAgICAgICAgIChmb3JtYXRDb21wb25lbnROYW1lKHRhZyB8fCBDdG9yKSkgKyAiLCBidXQgdGhlIGRlY2xhcmVkIHByb3AgbmFtZSBpcyIgKwogICAgICAgICAgICAgICIgXCIiICsga2V5ICsgIlwiLiAiICsKICAgICAgICAgICAgICAiTm90ZSB0aGF0IEhUTUwgYXR0cmlidXRlcyBhcmUgY2FzZS1pbnNlbnNpdGl2ZSBhbmQgY2FtZWxDYXNlZCAiICsKICAgICAgICAgICAgICAicHJvcHMgbmVlZCB0byB1c2UgdGhlaXIga2ViYWItY2FzZSBlcXVpdmFsZW50cyB3aGVuIHVzaW5nIGluLURPTSAiICsKICAgICAgICAgICAgICAidGVtcGxhdGVzLiBZb3Ugc2hvdWxkIHByb2JhYmx5IHVzZSBcIiIgKyBhbHRLZXkgKyAiXCIgaW5zdGVhZCBvZiBcIiIgKyBrZXkgKyAiXCIuIgogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjaGVja1Byb3AocmVzLCBwcm9wcywga2V5LCBhbHRLZXksIHRydWUpIHx8CiAgICAgICAgY2hlY2tQcm9wKHJlcywgYXR0cnMsIGtleSwgYWx0S2V5LCBmYWxzZSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByZXMKICB9CgogIGZ1bmN0aW9uIGNoZWNrUHJvcCAoCiAgICByZXMsCiAgICBoYXNoLAogICAga2V5LAogICAgYWx0S2V5LAogICAgcHJlc2VydmUKICApIHsKICAgIGlmIChpc0RlZihoYXNoKSkgewogICAgICBpZiAoaGFzT3duKGhhc2gsIGtleSkpIHsKICAgICAgICByZXNba2V5XSA9IGhhc2hba2V5XTsKICAgICAgICBpZiAoIXByZXNlcnZlKSB7CiAgICAgICAgICBkZWxldGUgaGFzaFtrZXldOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9IGVsc2UgaWYgKGhhc093bihoYXNoLCBhbHRLZXkpKSB7CiAgICAgICAgcmVzW2tleV0gPSBoYXNoW2FsdEtleV07CiAgICAgICAgaWYgKCFwcmVzZXJ2ZSkgewogICAgICAgICAgZGVsZXRlIGhhc2hbYWx0S2V5XTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfQoKICAvKiAgKi8KCiAgLy8gVGhlIHRlbXBsYXRlIGNvbXBpbGVyIGF0dGVtcHRzIHRvIG1pbmltaXplIHRoZSBuZWVkIGZvciBub3JtYWxpemF0aW9uIGJ5CiAgLy8gc3RhdGljYWxseSBhbmFseXppbmcgdGhlIHRlbXBsYXRlIGF0IGNvbXBpbGUgdGltZS4KICAvLwogIC8vIEZvciBwbGFpbiBIVE1MIG1hcmt1cCwgbm9ybWFsaXphdGlvbiBjYW4gYmUgY29tcGxldGVseSBza2lwcGVkIGJlY2F1c2UgdGhlCiAgLy8gZ2VuZXJhdGVkIHJlbmRlciBmdW5jdGlvbiBpcyBndWFyYW50ZWVkIHRvIHJldHVybiBBcnJheTxWTm9kZT4uIFRoZXJlIGFyZQogIC8vIHR3byBjYXNlcyB3aGVyZSBleHRyYSBub3JtYWxpemF0aW9uIGlzIG5lZWRlZDoKCiAgLy8gMS4gV2hlbiB0aGUgY2hpbGRyZW4gY29udGFpbnMgY29tcG9uZW50cyAtIGJlY2F1c2UgYSBmdW5jdGlvbmFsIGNvbXBvbmVudAogIC8vIG1heSByZXR1cm4gYW4gQXJyYXkgaW5zdGVhZCBvZiBhIHNpbmdsZSByb290LiBJbiB0aGlzIGNhc2UsIGp1c3QgYSBzaW1wbGUKICAvLyBub3JtYWxpemF0aW9uIGlzIG5lZWRlZCAtIGlmIGFueSBjaGlsZCBpcyBhbiBBcnJheSwgd2UgZmxhdHRlbiB0aGUgd2hvbGUKICAvLyB0aGluZyB3aXRoIEFycmF5LnByb3RvdHlwZS5jb25jYXQuIEl0IGlzIGd1YXJhbnRlZWQgdG8gYmUgb25seSAxLWxldmVsIGRlZXAKICAvLyBiZWNhdXNlIGZ1bmN0aW9uYWwgY29tcG9uZW50cyBhbHJlYWR5IG5vcm1hbGl6ZSB0aGVpciBvd24gY2hpbGRyZW4uCiAgZnVuY3Rpb24gc2ltcGxlTm9ybWFsaXplQ2hpbGRyZW4gKGNoaWxkcmVuKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuW2ldKSkgewogICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBjaGlsZHJlbikKICAgICAgfQogICAgfQogICAgcmV0dXJuIGNoaWxkcmVuCiAgfQoKICAvLyAyLiBXaGVuIHRoZSBjaGlsZHJlbiBjb250YWlucyBjb25zdHJ1Y3RzIHRoYXQgYWx3YXlzIGdlbmVyYXRlZCBuZXN0ZWQgQXJyYXlzLAogIC8vIGUuZy4gPHRlbXBsYXRlPiwgPHNsb3Q+LCB2LWZvciwgb3Igd2hlbiB0aGUgY2hpbGRyZW4gaXMgcHJvdmlkZWQgYnkgdXNlcgogIC8vIHdpdGggaGFuZC13cml0dGVuIHJlbmRlciBmdW5jdGlvbnMgLyBKU1guIEluIHN1Y2ggY2FzZXMgYSBmdWxsIG5vcm1hbGl6YXRpb24KICAvLyBpcyBuZWVkZWQgdG8gY2F0ZXIgdG8gYWxsIHBvc3NpYmxlIHR5cGVzIG9mIGNoaWxkcmVuIHZhbHVlcy4KICBmdW5jdGlvbiBub3JtYWxpemVDaGlsZHJlbiAoY2hpbGRyZW4pIHsKICAgIHJldHVybiBpc1ByaW1pdGl2ZShjaGlsZHJlbikKICAgICAgPyBbY3JlYXRlVGV4dFZOb2RlKGNoaWxkcmVuKV0KICAgICAgOiBBcnJheS5pc0FycmF5KGNoaWxkcmVuKQogICAgICAgID8gbm9ybWFsaXplQXJyYXlDaGlsZHJlbihjaGlsZHJlbikKICAgICAgICA6IHVuZGVmaW5lZAogIH0KCiAgZnVuY3Rpb24gaXNUZXh0Tm9kZSAobm9kZSkgewogICAgcmV0dXJuIGlzRGVmKG5vZGUpICYmIGlzRGVmKG5vZGUudGV4dCkgJiYgaXNGYWxzZShub2RlLmlzQ29tbWVudCkKICB9CgogIGZ1bmN0aW9uIG5vcm1hbGl6ZUFycmF5Q2hpbGRyZW4gKGNoaWxkcmVuLCBuZXN0ZWRJbmRleCkgewogICAgdmFyIHJlcyA9IFtdOwogICAgdmFyIGksIGMsIGxhc3RJbmRleCwgbGFzdDsKICAgIGZvciAoaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykgewogICAgICBjID0gY2hpbGRyZW5baV07CiAgICAgIGlmIChpc1VuZGVmKGMpIHx8IHR5cGVvZiBjID09PSAnYm9vbGVhbicpIHsgY29udGludWUgfQogICAgICBsYXN0SW5kZXggPSByZXMubGVuZ3RoIC0gMTsKICAgICAgbGFzdCA9IHJlc1tsYXN0SW5kZXhdOwogICAgICAvLyAgbmVzdGVkCiAgICAgIGlmIChBcnJheS5pc0FycmF5KGMpKSB7CiAgICAgICAgaWYgKGMubGVuZ3RoID4gMCkgewogICAgICAgICAgYyA9IG5vcm1hbGl6ZUFycmF5Q2hpbGRyZW4oYywgKChuZXN0ZWRJbmRleCB8fCAnJykgKyAiXyIgKyBpKSk7CiAgICAgICAgICAvLyBtZXJnZSBhZGphY2VudCB0ZXh0IG5vZGVzCiAgICAgICAgICBpZiAoaXNUZXh0Tm9kZShjWzBdKSAmJiBpc1RleHROb2RlKGxhc3QpKSB7CiAgICAgICAgICAgIHJlc1tsYXN0SW5kZXhdID0gY3JlYXRlVGV4dFZOb2RlKGxhc3QudGV4dCArIChjWzBdKS50ZXh0KTsKICAgICAgICAgICAgYy5zaGlmdCgpOwogICAgICAgICAgfQogICAgICAgICAgcmVzLnB1c2guYXBwbHkocmVzLCBjKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoaXNQcmltaXRpdmUoYykpIHsKICAgICAgICBpZiAoaXNUZXh0Tm9kZShsYXN0KSkgewogICAgICAgICAgLy8gbWVyZ2UgYWRqYWNlbnQgdGV4dCBub2RlcwogICAgICAgICAgLy8gdGhpcyBpcyBuZWNlc3NhcnkgZm9yIFNTUiBoeWRyYXRpb24gYmVjYXVzZSB0ZXh0IG5vZGVzIGFyZQogICAgICAgICAgLy8gZXNzZW50aWFsbHkgbWVyZ2VkIHdoZW4gcmVuZGVyZWQgdG8gSFRNTCBzdHJpbmdzCiAgICAgICAgICByZXNbbGFzdEluZGV4XSA9IGNyZWF0ZVRleHRWTm9kZShsYXN0LnRleHQgKyBjKTsKICAgICAgICB9IGVsc2UgaWYgKGMgIT09ICcnKSB7CiAgICAgICAgICAvLyBjb252ZXJ0IHByaW1pdGl2ZSB0byB2bm9kZQogICAgICAgICAgcmVzLnB1c2goY3JlYXRlVGV4dFZOb2RlKGMpKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGlzVGV4dE5vZGUoYykgJiYgaXNUZXh0Tm9kZShsYXN0KSkgewogICAgICAgICAgLy8gbWVyZ2UgYWRqYWNlbnQgdGV4dCBub2RlcwogICAgICAgICAgcmVzW2xhc3RJbmRleF0gPSBjcmVhdGVUZXh0Vk5vZGUobGFzdC50ZXh0ICsgYy50ZXh0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gZGVmYXVsdCBrZXkgZm9yIG5lc3RlZCBhcnJheSBjaGlsZHJlbiAobGlrZWx5IGdlbmVyYXRlZCBieSB2LWZvcikKICAgICAgICAgIGlmIChpc1RydWUoY2hpbGRyZW4uX2lzVkxpc3QpICYmCiAgICAgICAgICAgIGlzRGVmKGMudGFnKSAmJgogICAgICAgICAgICBpc1VuZGVmKGMua2V5KSAmJgogICAgICAgICAgICBpc0RlZihuZXN0ZWRJbmRleCkpIHsKICAgICAgICAgICAgYy5rZXkgPSAiX192bGlzdCIgKyBuZXN0ZWRJbmRleCArICJfIiArIGkgKyAiX18iOwogICAgICAgICAgfQogICAgICAgICAgcmVzLnB1c2goYyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gcmVzCiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gaW5pdFByb3ZpZGUgKHZtKSB7CiAgICB2YXIgcHJvdmlkZSA9IHZtLiRvcHRpb25zLnByb3ZpZGU7CiAgICBpZiAocHJvdmlkZSkgewogICAgICB2bS5fcHJvdmlkZWQgPSB0eXBlb2YgcHJvdmlkZSA9PT0gJ2Z1bmN0aW9uJwogICAgICAgID8gcHJvdmlkZS5jYWxsKHZtKQogICAgICAgIDogcHJvdmlkZTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGluaXRJbmplY3Rpb25zICh2bSkgewogICAgdmFyIHJlc3VsdCA9IHJlc29sdmVJbmplY3Qodm0uJG9wdGlvbnMuaW5qZWN0LCB2bSk7CiAgICBpZiAocmVzdWx0KSB7CiAgICAgIHRvZ2dsZU9ic2VydmluZyhmYWxzZSk7CiAgICAgIE9iamVjdC5rZXlzKHJlc3VsdCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi8KICAgICAgICB7CiAgICAgICAgICBkZWZpbmVSZWFjdGl2ZSQkMSh2bSwga2V5LCByZXN1bHRba2V5XSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB3YXJuKAogICAgICAgICAgICAgICJBdm9pZCBtdXRhdGluZyBhbiBpbmplY3RlZCB2YWx1ZSBkaXJlY3RseSBzaW5jZSB0aGUgY2hhbmdlcyB3aWxsIGJlICIgKwogICAgICAgICAgICAgICJvdmVyd3JpdHRlbiB3aGVuZXZlciB0aGUgcHJvdmlkZWQgY29tcG9uZW50IHJlLXJlbmRlcnMuICIgKwogICAgICAgICAgICAgICJpbmplY3Rpb24gYmVpbmcgbXV0YXRlZDogXCIiICsga2V5ICsgIlwiIiwKICAgICAgICAgICAgICB2bQogICAgICAgICAgICApOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdG9nZ2xlT2JzZXJ2aW5nKHRydWUpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gcmVzb2x2ZUluamVjdCAoaW5qZWN0LCB2bSkgewogICAgaWYgKGluamVjdCkgewogICAgICAvLyBpbmplY3QgaXMgOmFueSBiZWNhdXNlIGZsb3cgaXMgbm90IHNtYXJ0IGVub3VnaCB0byBmaWd1cmUgb3V0IGNhY2hlZAogICAgICB2YXIgcmVzdWx0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgdmFyIGtleXMgPSBoYXNTeW1ib2wKICAgICAgICA/IFJlZmxlY3Qub3duS2V5cyhpbmplY3QpCiAgICAgICAgOiBPYmplY3Qua2V5cyhpbmplY3QpOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGtleSA9IGtleXNbaV07CiAgICAgICAgLy8gIzY1NzQgaW4gY2FzZSB0aGUgaW5qZWN0IG9iamVjdCBpcyBvYnNlcnZlZC4uLgogICAgICAgIGlmIChrZXkgPT09ICdfX29iX18nKSB7IGNvbnRpbnVlIH0KICAgICAgICB2YXIgcHJvdmlkZUtleSA9IGluamVjdFtrZXldLmZyb207CiAgICAgICAgdmFyIHNvdXJjZSA9IHZtOwogICAgICAgIHdoaWxlIChzb3VyY2UpIHsKICAgICAgICAgIGlmIChzb3VyY2UuX3Byb3ZpZGVkICYmIGhhc093bihzb3VyY2UuX3Byb3ZpZGVkLCBwcm92aWRlS2V5KSkgewogICAgICAgICAgICByZXN1bHRba2V5XSA9IHNvdXJjZS5fcHJvdmlkZWRbcHJvdmlkZUtleV07CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICB9CiAgICAgICAgICBzb3VyY2UgPSBzb3VyY2UuJHBhcmVudDsKICAgICAgICB9CiAgICAgICAgaWYgKCFzb3VyY2UpIHsKICAgICAgICAgIGlmICgnZGVmYXVsdCcgaW4gaW5qZWN0W2tleV0pIHsKICAgICAgICAgICAgdmFyIHByb3ZpZGVEZWZhdWx0ID0gaW5qZWN0W2tleV0uZGVmYXVsdDsKICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB0eXBlb2YgcHJvdmlkZURlZmF1bHQgPT09ICdmdW5jdGlvbicKICAgICAgICAgICAgICA/IHByb3ZpZGVEZWZhdWx0LmNhbGwodm0pCiAgICAgICAgICAgICAgOiBwcm92aWRlRGVmYXVsdDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHdhcm4oKCJJbmplY3Rpb24gXCIiICsga2V5ICsgIlwiIG5vdCBmb3VuZCIpLCB2bSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQKICAgIH0KICB9CgogIC8qICAqLwoKCgogIC8qKgogICAqIFJ1bnRpbWUgaGVscGVyIGZvciByZXNvbHZpbmcgcmF3IGNoaWxkcmVuIFZOb2RlcyBpbnRvIGEgc2xvdCBvYmplY3QuCiAgICovCiAgZnVuY3Rpb24gcmVzb2x2ZVNsb3RzICgKICAgIGNoaWxkcmVuLAogICAgY29udGV4dAogICkgewogICAgaWYgKCFjaGlsZHJlbiB8fCAhY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgIHJldHVybiB7fQogICAgfQogICAgdmFyIHNsb3RzID0ge307CiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTsKICAgICAgdmFyIGRhdGEgPSBjaGlsZC5kYXRhOwogICAgICAvLyByZW1vdmUgc2xvdCBhdHRyaWJ1dGUgaWYgdGhlIG5vZGUgaXMgcmVzb2x2ZWQgYXMgYSBWdWUgc2xvdCBub2RlCiAgICAgIGlmIChkYXRhICYmIGRhdGEuYXR0cnMgJiYgZGF0YS5hdHRycy5zbG90KSB7CiAgICAgICAgZGVsZXRlIGRhdGEuYXR0cnMuc2xvdDsKICAgICAgfQogICAgICAvLyBuYW1lZCBzbG90cyBzaG91bGQgb25seSBiZSByZXNwZWN0ZWQgaWYgdGhlIHZub2RlIHdhcyByZW5kZXJlZCBpbiB0aGUKICAgICAgLy8gc2FtZSBjb250ZXh0LgogICAgICBpZiAoKGNoaWxkLmNvbnRleHQgPT09IGNvbnRleHQgfHwgY2hpbGQuZm5Db250ZXh0ID09PSBjb250ZXh0KSAmJgogICAgICAgIGRhdGEgJiYgZGF0YS5zbG90ICE9IG51bGwKICAgICAgKSB7CiAgICAgICAgdmFyIG5hbWUgPSBkYXRhLnNsb3Q7CiAgICAgICAgdmFyIHNsb3QgPSAoc2xvdHNbbmFtZV0gfHwgKHNsb3RzW25hbWVdID0gW10pKTsKICAgICAgICBpZiAoY2hpbGQudGFnID09PSAndGVtcGxhdGUnKSB7CiAgICAgICAgICBzbG90LnB1c2guYXBwbHkoc2xvdCwgY2hpbGQuY2hpbGRyZW4gfHwgW10pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzbG90LnB1c2goY2hpbGQpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAoc2xvdHMuZGVmYXVsdCB8fCAoc2xvdHMuZGVmYXVsdCA9IFtdKSkucHVzaChjaGlsZCk7CiAgICAgIH0KICAgIH0KICAgIC8vIGlnbm9yZSBzbG90cyB0aGF0IGNvbnRhaW5zIG9ubHkgd2hpdGVzcGFjZQogICAgZm9yICh2YXIgbmFtZSQxIGluIHNsb3RzKSB7CiAgICAgIGlmIChzbG90c1tuYW1lJDFdLmV2ZXJ5KGlzV2hpdGVzcGFjZSkpIHsKICAgICAgICBkZWxldGUgc2xvdHNbbmFtZSQxXTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHNsb3RzCiAgfQoKICBmdW5jdGlvbiBpc1doaXRlc3BhY2UgKG5vZGUpIHsKICAgIHJldHVybiAobm9kZS5pc0NvbW1lbnQgJiYgIW5vZGUuYXN5bmNGYWN0b3J5KSB8fCBub2RlLnRleHQgPT09ICcgJwogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIG5vcm1hbGl6ZVNjb3BlZFNsb3RzICgKICAgIHNsb3RzLAogICAgbm9ybWFsU2xvdHMsCiAgICBwcmV2U2xvdHMKICApIHsKICAgIHZhciByZXM7CiAgICB2YXIgaGFzTm9ybWFsU2xvdHMgPSBPYmplY3Qua2V5cyhub3JtYWxTbG90cykubGVuZ3RoID4gMDsKICAgIHZhciBpc1N0YWJsZSA9IHNsb3RzID8gISFzbG90cy4kc3RhYmxlIDogIWhhc05vcm1hbFNsb3RzOwogICAgdmFyIGtleSA9IHNsb3RzICYmIHNsb3RzLiRrZXk7CiAgICBpZiAoIXNsb3RzKSB7CiAgICAgIHJlcyA9IHt9OwogICAgfSBlbHNlIGlmIChzbG90cy5fbm9ybWFsaXplZCkgewogICAgICAvLyBmYXN0IHBhdGggMTogY2hpbGQgY29tcG9uZW50IHJlLXJlbmRlciBvbmx5LCBwYXJlbnQgZGlkIG5vdCBjaGFuZ2UKICAgICAgcmV0dXJuIHNsb3RzLl9ub3JtYWxpemVkCiAgICB9IGVsc2UgaWYgKAogICAgICBpc1N0YWJsZSAmJgogICAgICBwcmV2U2xvdHMgJiYKICAgICAgcHJldlNsb3RzICE9PSBlbXB0eU9iamVjdCAmJgogICAgICBrZXkgPT09IHByZXZTbG90cy4ka2V5ICYmCiAgICAgICFoYXNOb3JtYWxTbG90cyAmJgogICAgICAhcHJldlNsb3RzLiRoYXNOb3JtYWwKICAgICkgewogICAgICAvLyBmYXN0IHBhdGggMjogc3RhYmxlIHNjb3BlZCBzbG90cyB3LyBubyBub3JtYWwgc2xvdHMgdG8gcHJveHksCiAgICAgIC8vIG9ubHkgbmVlZCB0byBub3JtYWxpemUgb25jZQogICAgICByZXR1cm4gcHJldlNsb3RzCiAgICB9IGVsc2UgewogICAgICByZXMgPSB7fTsKICAgICAgZm9yICh2YXIga2V5JDEgaW4gc2xvdHMpIHsKICAgICAgICBpZiAoc2xvdHNba2V5JDFdICYmIGtleSQxWzBdICE9PSAnJCcpIHsKICAgICAgICAgIHJlc1trZXkkMV0gPSBub3JtYWxpemVTY29wZWRTbG90KG5vcm1hbFNsb3RzLCBrZXkkMSwgc2xvdHNba2V5JDFdKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8vIGV4cG9zZSBub3JtYWwgc2xvdHMgb24gc2NvcGVkU2xvdHMKICAgIGZvciAodmFyIGtleSQyIGluIG5vcm1hbFNsb3RzKSB7CiAgICAgIGlmICghKGtleSQyIGluIHJlcykpIHsKICAgICAgICByZXNba2V5JDJdID0gcHJveHlOb3JtYWxTbG90KG5vcm1hbFNsb3RzLCBrZXkkMik7CiAgICAgIH0KICAgIH0KICAgIC8vIGF2b3JpYXogc2VlbXMgdG8gbW9jayBhIG5vbi1leHRlbnNpYmxlICRzY29wZWRTbG90cyBvYmplY3QKICAgIC8vIGFuZCB3aGVuIHRoYXQgaXMgcGFzc2VkIGRvd24gdGhpcyB3b3VsZCBjYXVzZSBhbiBlcnJvcgogICAgaWYgKHNsb3RzICYmIE9iamVjdC5pc0V4dGVuc2libGUoc2xvdHMpKSB7CiAgICAgIChzbG90cykuX25vcm1hbGl6ZWQgPSByZXM7CiAgICB9CiAgICBkZWYocmVzLCAnJHN0YWJsZScsIGlzU3RhYmxlKTsKICAgIGRlZihyZXMsICcka2V5Jywga2V5KTsKICAgIGRlZihyZXMsICckaGFzTm9ybWFsJywgaGFzTm9ybWFsU2xvdHMpOwogICAgcmV0dXJuIHJlcwogIH0KCiAgZnVuY3Rpb24gbm9ybWFsaXplU2NvcGVkU2xvdChub3JtYWxTbG90cywga2V5LCBmbikgewogICAgdmFyIG5vcm1hbGl6ZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciByZXMgPSBhcmd1bWVudHMubGVuZ3RoID8gZm4uYXBwbHkobnVsbCwgYXJndW1lbnRzKSA6IGZuKHt9KTsKICAgICAgcmVzID0gcmVzICYmIHR5cGVvZiByZXMgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KHJlcykKICAgICAgICA/IFtyZXNdIC8vIHNpbmdsZSB2bm9kZQogICAgICAgIDogbm9ybWFsaXplQ2hpbGRyZW4ocmVzKTsKICAgICAgcmV0dXJuIHJlcyAmJiAoCiAgICAgICAgcmVzLmxlbmd0aCA9PT0gMCB8fAogICAgICAgIChyZXMubGVuZ3RoID09PSAxICYmIHJlc1swXS5pc0NvbW1lbnQpIC8vICM5NjU4CiAgICAgICkgPyB1bmRlZmluZWQKICAgICAgICA6IHJlcwogICAgfTsKICAgIC8vIHRoaXMgaXMgYSBzbG90IHVzaW5nIHRoZSBuZXcgdi1zbG90IHN5bnRheCB3aXRob3V0IHNjb3BlLiBhbHRob3VnaCBpdCBpcwogICAgLy8gY29tcGlsZWQgYXMgYSBzY29wZWQgc2xvdCwgcmVuZGVyIGZuIHVzZXJzIHdvdWxkIGV4cGVjdCBpdCB0byBiZSBwcmVzZW50CiAgICAvLyBvbiB0aGlzLiRzbG90cyBiZWNhdXNlIHRoZSB1c2FnZSBpcyBzZW1hbnRpY2FsbHkgYSBub3JtYWwgc2xvdC4KICAgIGlmIChmbi5wcm94eSkgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobm9ybWFsU2xvdHMsIGtleSwgewogICAgICAgIGdldDogbm9ybWFsaXplZCwKICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgICB9KTsKICAgIH0KICAgIHJldHVybiBub3JtYWxpemVkCiAgfQoKICBmdW5jdGlvbiBwcm94eU5vcm1hbFNsb3Qoc2xvdHMsIGtleSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNsb3RzW2tleV07IH0KICB9CgogIC8qICAqLwoKICAvKioKICAgKiBSdW50aW1lIGhlbHBlciBmb3IgcmVuZGVyaW5nIHYtZm9yIGxpc3RzLgogICAqLwogIGZ1bmN0aW9uIHJlbmRlckxpc3QgKAogICAgdmFsLAogICAgcmVuZGVyCiAgKSB7CiAgICB2YXIgcmV0LCBpLCBsLCBrZXlzLCBrZXk7CiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpIHx8IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7CiAgICAgIHJldCA9IG5ldyBBcnJheSh2YWwubGVuZ3RoKTsKICAgICAgZm9yIChpID0gMCwgbCA9IHZhbC5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICByZXRbaV0gPSByZW5kZXIodmFsW2ldLCBpKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykgewogICAgICByZXQgPSBuZXcgQXJyYXkodmFsKTsKICAgICAgZm9yIChpID0gMDsgaSA8IHZhbDsgaSsrKSB7CiAgICAgICAgcmV0W2ldID0gcmVuZGVyKGkgKyAxLCBpKTsKICAgICAgfQogICAgfSBlbHNlIGlmIChpc09iamVjdCh2YWwpKSB7CiAgICAgIGlmIChoYXNTeW1ib2wgJiYgdmFsW1N5bWJvbC5pdGVyYXRvcl0pIHsKICAgICAgICByZXQgPSBbXTsKICAgICAgICB2YXIgaXRlcmF0b3IgPSB2YWxbU3ltYm9sLml0ZXJhdG9yXSgpOwogICAgICAgIHZhciByZXN1bHQgPSBpdGVyYXRvci5uZXh0KCk7CiAgICAgICAgd2hpbGUgKCFyZXN1bHQuZG9uZSkgewogICAgICAgICAgcmV0LnB1c2gocmVuZGVyKHJlc3VsdC52YWx1ZSwgcmV0Lmxlbmd0aCkpOwogICAgICAgICAgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBrZXlzID0gT2JqZWN0LmtleXModmFsKTsKICAgICAgICByZXQgPSBuZXcgQXJyYXkoa2V5cy5sZW5ndGgpOwogICAgICAgIGZvciAoaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAga2V5ID0ga2V5c1tpXTsKICAgICAgICAgIHJldFtpXSA9IHJlbmRlcih2YWxba2V5XSwga2V5LCBpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGlmICghaXNEZWYocmV0KSkgewogICAgICByZXQgPSBbXTsKICAgIH0KICAgIChyZXQpLl9pc1ZMaXN0ID0gdHJ1ZTsKICAgIHJldHVybiByZXQKICB9CgogIC8qICAqLwoKICAvKioKICAgKiBSdW50aW1lIGhlbHBlciBmb3IgcmVuZGVyaW5nIDxzbG90PgogICAqLwogIGZ1bmN0aW9uIHJlbmRlclNsb3QgKAogICAgbmFtZSwKICAgIGZhbGxiYWNrLAogICAgcHJvcHMsCiAgICBiaW5kT2JqZWN0CiAgKSB7CiAgICB2YXIgc2NvcGVkU2xvdEZuID0gdGhpcy4kc2NvcGVkU2xvdHNbbmFtZV07CiAgICB2YXIgbm9kZXM7CiAgICBpZiAoc2NvcGVkU2xvdEZuKSB7IC8vIHNjb3BlZCBzbG90CiAgICAgIHByb3BzID0gcHJvcHMgfHwge307CiAgICAgIGlmIChiaW5kT2JqZWN0KSB7CiAgICAgICAgaWYgKCFpc09iamVjdChiaW5kT2JqZWN0KSkgewogICAgICAgICAgd2FybigKICAgICAgICAgICAgJ3Nsb3Qgdi1iaW5kIHdpdGhvdXQgYXJndW1lbnQgZXhwZWN0cyBhbiBPYmplY3QnLAogICAgICAgICAgICB0aGlzCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBwcm9wcyA9IGV4dGVuZChleHRlbmQoe30sIGJpbmRPYmplY3QpLCBwcm9wcyk7CiAgICAgIH0KICAgICAgbm9kZXMgPSBzY29wZWRTbG90Rm4ocHJvcHMpIHx8IGZhbGxiYWNrOwogICAgfSBlbHNlIHsKICAgICAgbm9kZXMgPSB0aGlzLiRzbG90c1tuYW1lXSB8fCBmYWxsYmFjazsKICAgIH0KCiAgICB2YXIgdGFyZ2V0ID0gcHJvcHMgJiYgcHJvcHMuc2xvdDsKICAgIGlmICh0YXJnZXQpIHsKICAgICAgcmV0dXJuIHRoaXMuJGNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJywgeyBzbG90OiB0YXJnZXQgfSwgbm9kZXMpCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbm9kZXMKICAgIH0KICB9CgogIC8qICAqLwoKICAvKioKICAgKiBSdW50aW1lIGhlbHBlciBmb3IgcmVzb2x2aW5nIGZpbHRlcnMKICAgKi8KICBmdW5jdGlvbiByZXNvbHZlRmlsdGVyIChpZCkgewogICAgcmV0dXJuIHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnZmlsdGVycycsIGlkLCB0cnVlKSB8fCBpZGVudGl0eQogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGlzS2V5Tm90TWF0Y2ggKGV4cGVjdCwgYWN0dWFsKSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheShleHBlY3QpKSB7CiAgICAgIHJldHVybiBleHBlY3QuaW5kZXhPZihhY3R1YWwpID09PSAtMQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGV4cGVjdCAhPT0gYWN0dWFsCiAgICB9CiAgfQoKICAvKioKICAgKiBSdW50aW1lIGhlbHBlciBmb3IgY2hlY2tpbmcga2V5Q29kZXMgZnJvbSBjb25maWcuCiAgICogZXhwb3NlZCBhcyBWdWUucHJvdG90eXBlLl9rCiAgICogcGFzc2luZyBpbiBldmVudEtleU5hbWUgYXMgbGFzdCBhcmd1bWVudCBzZXBhcmF0ZWx5IGZvciBiYWNrd2FyZHMgY29tcGF0CiAgICovCiAgZnVuY3Rpb24gY2hlY2tLZXlDb2RlcyAoCiAgICBldmVudEtleUNvZGUsCiAgICBrZXksCiAgICBidWlsdEluS2V5Q29kZSwKICAgIGV2ZW50S2V5TmFtZSwKICAgIGJ1aWx0SW5LZXlOYW1lCiAgKSB7CiAgICB2YXIgbWFwcGVkS2V5Q29kZSA9IGNvbmZpZy5rZXlDb2Rlc1trZXldIHx8IGJ1aWx0SW5LZXlDb2RlOwogICAgaWYgKGJ1aWx0SW5LZXlOYW1lICYmIGV2ZW50S2V5TmFtZSAmJiAhY29uZmlnLmtleUNvZGVzW2tleV0pIHsKICAgICAgcmV0dXJuIGlzS2V5Tm90TWF0Y2goYnVpbHRJbktleU5hbWUsIGV2ZW50S2V5TmFtZSkKICAgIH0gZWxzZSBpZiAobWFwcGVkS2V5Q29kZSkgewogICAgICByZXR1cm4gaXNLZXlOb3RNYXRjaChtYXBwZWRLZXlDb2RlLCBldmVudEtleUNvZGUpCiAgICB9IGVsc2UgaWYgKGV2ZW50S2V5TmFtZSkgewogICAgICByZXR1cm4gaHlwaGVuYXRlKGV2ZW50S2V5TmFtZSkgIT09IGtleQogICAgfQogIH0KCiAgLyogICovCgogIC8qKgogICAqIFJ1bnRpbWUgaGVscGVyIGZvciBtZXJnaW5nIHYtYmluZD0ib2JqZWN0IiBpbnRvIGEgVk5vZGUncyBkYXRhLgogICAqLwogIGZ1bmN0aW9uIGJpbmRPYmplY3RQcm9wcyAoCiAgICBkYXRhLAogICAgdGFnLAogICAgdmFsdWUsCiAgICBhc1Byb3AsCiAgICBpc1N5bmMKICApIHsKICAgIGlmICh2YWx1ZSkgewogICAgICBpZiAoIWlzT2JqZWN0KHZhbHVlKSkgewogICAgICAgIHdhcm4oCiAgICAgICAgICAndi1iaW5kIHdpdGhvdXQgYXJndW1lbnQgZXhwZWN0cyBhbiBPYmplY3Qgb3IgQXJyYXkgdmFsdWUnLAogICAgICAgICAgdGhpcwogICAgICAgICk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7CiAgICAgICAgICB2YWx1ZSA9IHRvT2JqZWN0KHZhbHVlKTsKICAgICAgICB9CiAgICAgICAgdmFyIGhhc2g7CiAgICAgICAgdmFyIGxvb3AgPSBmdW5jdGlvbiAoIGtleSApIHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAga2V5ID09PSAnY2xhc3MnIHx8CiAgICAgICAgICAgIGtleSA9PT0gJ3N0eWxlJyB8fAogICAgICAgICAgICBpc1Jlc2VydmVkQXR0cmlidXRlKGtleSkKICAgICAgICAgICkgewogICAgICAgICAgICBoYXNoID0gZGF0YTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciB0eXBlID0gZGF0YS5hdHRycyAmJiBkYXRhLmF0dHJzLnR5cGU7CiAgICAgICAgICAgIGhhc2ggPSBhc1Byb3AgfHwgY29uZmlnLm11c3RVc2VQcm9wKHRhZywgdHlwZSwga2V5KQogICAgICAgICAgICAgID8gZGF0YS5kb21Qcm9wcyB8fCAoZGF0YS5kb21Qcm9wcyA9IHt9KQogICAgICAgICAgICAgIDogZGF0YS5hdHRycyB8fCAoZGF0YS5hdHRycyA9IHt9KTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBjYW1lbGl6ZWRLZXkgPSBjYW1lbGl6ZShrZXkpOwogICAgICAgICAgdmFyIGh5cGhlbmF0ZWRLZXkgPSBoeXBoZW5hdGUoa2V5KTsKICAgICAgICAgIGlmICghKGNhbWVsaXplZEtleSBpbiBoYXNoKSAmJiAhKGh5cGhlbmF0ZWRLZXkgaW4gaGFzaCkpIHsKICAgICAgICAgICAgaGFzaFtrZXldID0gdmFsdWVba2V5XTsKCiAgICAgICAgICAgIGlmIChpc1N5bmMpIHsKICAgICAgICAgICAgICB2YXIgb24gPSBkYXRhLm9uIHx8IChkYXRhLm9uID0ge30pOwogICAgICAgICAgICAgIG9uWygidXBkYXRlOiIgKyBrZXkpXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICAgIHZhbHVlW2tleV0gPSAkZXZlbnQ7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkgbG9vcCgga2V5ICk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBkYXRhCiAgfQoKICAvKiAgKi8KCiAgLyoqCiAgICogUnVudGltZSBoZWxwZXIgZm9yIHJlbmRlcmluZyBzdGF0aWMgdHJlZXMuCiAgICovCiAgZnVuY3Rpb24gcmVuZGVyU3RhdGljICgKICAgIGluZGV4LAogICAgaXNJbkZvcgogICkgewogICAgdmFyIGNhY2hlZCA9IHRoaXMuX3N0YXRpY1RyZWVzIHx8ICh0aGlzLl9zdGF0aWNUcmVlcyA9IFtdKTsKICAgIHZhciB0cmVlID0gY2FjaGVkW2luZGV4XTsKICAgIC8vIGlmIGhhcyBhbHJlYWR5LXJlbmRlcmVkIHN0YXRpYyB0cmVlIGFuZCBub3QgaW5zaWRlIHYtZm9yLAogICAgLy8gd2UgY2FuIHJldXNlIHRoZSBzYW1lIHRyZWUuCiAgICBpZiAodHJlZSAmJiAhaXNJbkZvcikgewogICAgICByZXR1cm4gdHJlZQogICAgfQogICAgLy8gb3RoZXJ3aXNlLCByZW5kZXIgYSBmcmVzaCB0cmVlLgogICAgdHJlZSA9IGNhY2hlZFtpbmRleF0gPSB0aGlzLiRvcHRpb25zLnN0YXRpY1JlbmRlckZuc1tpbmRleF0uY2FsbCgKICAgICAgdGhpcy5fcmVuZGVyUHJveHksCiAgICAgIG51bGwsCiAgICAgIHRoaXMgLy8gZm9yIHJlbmRlciBmbnMgZ2VuZXJhdGVkIGZvciBmdW5jdGlvbmFsIGNvbXBvbmVudCB0ZW1wbGF0ZXMKICAgICk7CiAgICBtYXJrU3RhdGljKHRyZWUsICgiX19zdGF0aWNfXyIgKyBpbmRleCksIGZhbHNlKTsKICAgIHJldHVybiB0cmVlCiAgfQoKICAvKioKICAgKiBSdW50aW1lIGhlbHBlciBmb3Igdi1vbmNlLgogICAqIEVmZmVjdGl2ZWx5IGl0IG1lYW5zIG1hcmtpbmcgdGhlIG5vZGUgYXMgc3RhdGljIHdpdGggYSB1bmlxdWUga2V5LgogICAqLwogIGZ1bmN0aW9uIG1hcmtPbmNlICgKICAgIHRyZWUsCiAgICBpbmRleCwKICAgIGtleQogICkgewogICAgbWFya1N0YXRpYyh0cmVlLCAoIl9fb25jZV9fIiArIGluZGV4ICsgKGtleSA/ICgiXyIgKyBrZXkpIDogIiIpKSwgdHJ1ZSk7CiAgICByZXR1cm4gdHJlZQogIH0KCiAgZnVuY3Rpb24gbWFya1N0YXRpYyAoCiAgICB0cmVlLAogICAga2V5LAogICAgaXNPbmNlCiAgKSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheSh0cmVlKSkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyZWUubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodHJlZVtpXSAmJiB0eXBlb2YgdHJlZVtpXSAhPT0gJ3N0cmluZycpIHsKICAgICAgICAgIG1hcmtTdGF0aWNOb2RlKHRyZWVbaV0sIChrZXkgKyAiXyIgKyBpKSwgaXNPbmNlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIG1hcmtTdGF0aWNOb2RlKHRyZWUsIGtleSwgaXNPbmNlKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIG1hcmtTdGF0aWNOb2RlIChub2RlLCBrZXksIGlzT25jZSkgewogICAgbm9kZS5pc1N0YXRpYyA9IHRydWU7CiAgICBub2RlLmtleSA9IGtleTsKICAgIG5vZGUuaXNPbmNlID0gaXNPbmNlOwogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGJpbmRPYmplY3RMaXN0ZW5lcnMgKGRhdGEsIHZhbHVlKSB7CiAgICBpZiAodmFsdWUpIHsKICAgICAgaWYgKCFpc1BsYWluT2JqZWN0KHZhbHVlKSkgewogICAgICAgIHdhcm4oCiAgICAgICAgICAndi1vbiB3aXRob3V0IGFyZ3VtZW50IGV4cGVjdHMgYW4gT2JqZWN0IHZhbHVlJywKICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBvbiA9IGRhdGEub24gPSBkYXRhLm9uID8gZXh0ZW5kKHt9LCBkYXRhLm9uKSA6IHt9OwogICAgICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkgewogICAgICAgICAgdmFyIGV4aXN0aW5nID0gb25ba2V5XTsKICAgICAgICAgIHZhciBvdXJzID0gdmFsdWVba2V5XTsKICAgICAgICAgIG9uW2tleV0gPSBleGlzdGluZyA/IFtdLmNvbmNhdChleGlzdGluZywgb3VycykgOiBvdXJzOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIGRhdGEKICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiByZXNvbHZlU2NvcGVkU2xvdHMgKAogICAgZm5zLCAvLyBzZWUgZmxvdy92bm9kZQogICAgcmVzLAogICAgLy8gdGhlIGZvbGxvd2luZyBhcmUgYWRkZWQgaW4gMi42CiAgICBoYXNEeW5hbWljS2V5cywKICAgIGNvbnRlbnRIYXNoS2V5CiAgKSB7CiAgICByZXMgPSByZXMgfHwgeyAkc3RhYmxlOiAhaGFzRHluYW1pY0tleXMgfTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZm5zLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBzbG90ID0gZm5zW2ldOwogICAgICBpZiAoQXJyYXkuaXNBcnJheShzbG90KSkgewogICAgICAgIHJlc29sdmVTY29wZWRTbG90cyhzbG90LCByZXMsIGhhc0R5bmFtaWNLZXlzKTsKICAgICAgfSBlbHNlIGlmIChzbG90KSB7CiAgICAgICAgLy8gbWFya2VyIGZvciByZXZlcnNlIHByb3h5aW5nIHYtc2xvdCB3aXRob3V0IHNjb3BlIG9uIHRoaXMuJHNsb3RzCiAgICAgICAgaWYgKHNsb3QucHJveHkpIHsKICAgICAgICAgIHNsb3QuZm4ucHJveHkgPSB0cnVlOwogICAgICAgIH0KICAgICAgICByZXNbc2xvdC5rZXldID0gc2xvdC5mbjsKICAgICAgfQogICAgfQogICAgaWYgKGNvbnRlbnRIYXNoS2V5KSB7CiAgICAgIChyZXMpLiRrZXkgPSBjb250ZW50SGFzaEtleTsKICAgIH0KICAgIHJldHVybiByZXMKICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBiaW5kRHluYW1pY0tleXMgKGJhc2VPYmosIHZhbHVlcykgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpICs9IDIpIHsKICAgICAgdmFyIGtleSA9IHZhbHVlc1tpXTsKICAgICAgaWYgKHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnICYmIGtleSkgewogICAgICAgIGJhc2VPYmpbdmFsdWVzW2ldXSA9IHZhbHVlc1tpICsgMV07CiAgICAgIH0gZWxzZSBpZiAoa2V5ICE9PSAnJyAmJiBrZXkgIT09IG51bGwpIHsKICAgICAgICAvLyBudWxsIGlzIGEgc3BlaWNhbCB2YWx1ZSBmb3IgZXhwbGljaXRseSByZW1vdmluZyBhIGJpbmRpbmcKICAgICAgICB3YXJuKAogICAgICAgICAgKCJJbnZhbGlkIHZhbHVlIGZvciBkeW5hbWljIGRpcmVjdGl2ZSBhcmd1bWVudCAoZXhwZWN0ZWQgc3RyaW5nIG9yIG51bGwpOiAiICsga2V5KSwKICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gYmFzZU9iagogIH0KCiAgLy8gaGVscGVyIHRvIGR5bmFtaWNhbGx5IGFwcGVuZCBtb2RpZmllciBydW50aW1lIG1hcmtlcnMgdG8gZXZlbnQgbmFtZXMuCiAgLy8gZW5zdXJlIG9ubHkgYXBwZW5kIHdoZW4gdmFsdWUgaXMgYWxyZWFkeSBzdHJpbmcsIG90aGVyd2lzZSBpdCB3aWxsIGJlIGNhc3QKICAvLyB0byBzdHJpbmcgYW5kIGNhdXNlIHRoZSB0eXBlIGNoZWNrIHRvIG1pc3MuCiAgZnVuY3Rpb24gcHJlcGVuZE1vZGlmaWVyICh2YWx1ZSwgc3ltYm9sKSB7CiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHN5bWJvbCArIHZhbHVlIDogdmFsdWUKICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBpbnN0YWxsUmVuZGVySGVscGVycyAodGFyZ2V0KSB7CiAgICB0YXJnZXQuX28gPSBtYXJrT25jZTsKICAgIHRhcmdldC5fbiA9IHRvTnVtYmVyOwogICAgdGFyZ2V0Ll9zID0gdG9TdHJpbmc7CiAgICB0YXJnZXQuX2wgPSByZW5kZXJMaXN0OwogICAgdGFyZ2V0Ll90ID0gcmVuZGVyU2xvdDsKICAgIHRhcmdldC5fcSA9IGxvb3NlRXF1YWw7CiAgICB0YXJnZXQuX2kgPSBsb29zZUluZGV4T2Y7CiAgICB0YXJnZXQuX20gPSByZW5kZXJTdGF0aWM7CiAgICB0YXJnZXQuX2YgPSByZXNvbHZlRmlsdGVyOwogICAgdGFyZ2V0Ll9rID0gY2hlY2tLZXlDb2RlczsKICAgIHRhcmdldC5fYiA9IGJpbmRPYmplY3RQcm9wczsKICAgIHRhcmdldC5fdiA9IGNyZWF0ZVRleHRWTm9kZTsKICAgIHRhcmdldC5fZSA9IGNyZWF0ZUVtcHR5Vk5vZGU7CiAgICB0YXJnZXQuX3UgPSByZXNvbHZlU2NvcGVkU2xvdHM7CiAgICB0YXJnZXQuX2cgPSBiaW5kT2JqZWN0TGlzdGVuZXJzOwogICAgdGFyZ2V0Ll9kID0gYmluZER5bmFtaWNLZXlzOwogICAgdGFyZ2V0Ll9wID0gcHJlcGVuZE1vZGlmaWVyOwogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIEZ1bmN0aW9uYWxSZW5kZXJDb250ZXh0ICgKICAgIGRhdGEsCiAgICBwcm9wcywKICAgIGNoaWxkcmVuLAogICAgcGFyZW50LAogICAgQ3RvcgogICkgewogICAgdmFyIHRoaXMkMSA9IHRoaXM7CgogICAgdmFyIG9wdGlvbnMgPSBDdG9yLm9wdGlvbnM7CiAgICAvLyBlbnN1cmUgdGhlIGNyZWF0ZUVsZW1lbnQgZnVuY3Rpb24gaW4gZnVuY3Rpb25hbCBjb21wb25lbnRzCiAgICAvLyBnZXRzIGEgdW5pcXVlIGNvbnRleHQgLSB0aGlzIGlzIG5lY2Vzc2FyeSBmb3IgY29ycmVjdCBuYW1lZCBzbG90IGNoZWNrCiAgICB2YXIgY29udGV4dFZtOwogICAgaWYgKGhhc093bihwYXJlbnQsICdfdWlkJykpIHsKICAgICAgY29udGV4dFZtID0gT2JqZWN0LmNyZWF0ZShwYXJlbnQpOwogICAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmUKICAgICAgY29udGV4dFZtLl9vcmlnaW5hbCA9IHBhcmVudDsKICAgIH0gZWxzZSB7CiAgICAgIC8vIHRoZSBjb250ZXh0IHZtIHBhc3NlZCBpbiBpcyBhIGZ1bmN0aW9uYWwgY29udGV4dCBhcyB3ZWxsLgogICAgICAvLyBpbiB0aGlzIGNhc2Ugd2Ugd2FudCB0byBtYWtlIHN1cmUgd2UgYXJlIGFibGUgdG8gZ2V0IGEgaG9sZCB0byB0aGUKICAgICAgLy8gcmVhbCBjb250ZXh0IGluc3RhbmNlLgogICAgICBjb250ZXh0Vm0gPSBwYXJlbnQ7CiAgICAgIC8vICRmbG93LWRpc2FibGUtbGluZQogICAgICBwYXJlbnQgPSBwYXJlbnQuX29yaWdpbmFsOwogICAgfQogICAgdmFyIGlzQ29tcGlsZWQgPSBpc1RydWUob3B0aW9ucy5fY29tcGlsZWQpOwogICAgdmFyIG5lZWROb3JtYWxpemF0aW9uID0gIWlzQ29tcGlsZWQ7CgogICAgdGhpcy5kYXRhID0gZGF0YTsKICAgIHRoaXMucHJvcHMgPSBwcm9wczsKICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjsKICAgIHRoaXMucGFyZW50ID0gcGFyZW50OwogICAgdGhpcy5saXN0ZW5lcnMgPSBkYXRhLm9uIHx8IGVtcHR5T2JqZWN0OwogICAgdGhpcy5pbmplY3Rpb25zID0gcmVzb2x2ZUluamVjdChvcHRpb25zLmluamVjdCwgcGFyZW50KTsKICAgIHRoaXMuc2xvdHMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghdGhpcyQxLiRzbG90cykgewogICAgICAgIG5vcm1hbGl6ZVNjb3BlZFNsb3RzKAogICAgICAgICAgZGF0YS5zY29wZWRTbG90cywKICAgICAgICAgIHRoaXMkMS4kc2xvdHMgPSByZXNvbHZlU2xvdHMoY2hpbGRyZW4sIHBhcmVudCkKICAgICAgICApOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzJDEuJHNsb3RzCiAgICB9OwoKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnc2NvcGVkU2xvdHMnLCAoewogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCAoKSB7CiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZVNjb3BlZFNsb3RzKGRhdGEuc2NvcGVkU2xvdHMsIHRoaXMuc2xvdHMoKSkKICAgICAgfQogICAgfSkpOwoKICAgIC8vIHN1cHBvcnQgZm9yIGNvbXBpbGVkIGZ1bmN0aW9uYWwgdGVtcGxhdGUKICAgIGlmIChpc0NvbXBpbGVkKSB7CiAgICAgIC8vIGV4cG9zaW5nICRvcHRpb25zIGZvciByZW5kZXJTdGF0aWMoKQogICAgICB0aGlzLiRvcHRpb25zID0gb3B0aW9uczsKICAgICAgLy8gcHJlLXJlc29sdmUgc2xvdHMgZm9yIHJlbmRlclNsb3QoKQogICAgICB0aGlzLiRzbG90cyA9IHRoaXMuc2xvdHMoKTsKICAgICAgdGhpcy4kc2NvcGVkU2xvdHMgPSBub3JtYWxpemVTY29wZWRTbG90cyhkYXRhLnNjb3BlZFNsb3RzLCB0aGlzLiRzbG90cyk7CiAgICB9CgogICAgaWYgKG9wdGlvbnMuX3Njb3BlSWQpIHsKICAgICAgdGhpcy5fYyA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7CiAgICAgICAgdmFyIHZub2RlID0gY3JlYXRlRWxlbWVudChjb250ZXh0Vm0sIGEsIGIsIGMsIGQsIG5lZWROb3JtYWxpemF0aW9uKTsKICAgICAgICBpZiAodm5vZGUgJiYgIUFycmF5LmlzQXJyYXkodm5vZGUpKSB7CiAgICAgICAgICB2bm9kZS5mblNjb3BlSWQgPSBvcHRpb25zLl9zY29wZUlkOwogICAgICAgICAgdm5vZGUuZm5Db250ZXh0ID0gcGFyZW50OwogICAgICAgIH0KICAgICAgICByZXR1cm4gdm5vZGUKICAgICAgfTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuX2MgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkgeyByZXR1cm4gY3JlYXRlRWxlbWVudChjb250ZXh0Vm0sIGEsIGIsIGMsIGQsIG5lZWROb3JtYWxpemF0aW9uKTsgfTsKICAgIH0KICB9CgogIGluc3RhbGxSZW5kZXJIZWxwZXJzKEZ1bmN0aW9uYWxSZW5kZXJDb250ZXh0LnByb3RvdHlwZSk7CgogIGZ1bmN0aW9uIGNyZWF0ZUZ1bmN0aW9uYWxDb21wb25lbnQgKAogICAgQ3RvciwKICAgIHByb3BzRGF0YSwKICAgIGRhdGEsCiAgICBjb250ZXh0Vm0sCiAgICBjaGlsZHJlbgogICkgewogICAgdmFyIG9wdGlvbnMgPSBDdG9yLm9wdGlvbnM7CiAgICB2YXIgcHJvcHMgPSB7fTsKICAgIHZhciBwcm9wT3B0aW9ucyA9IG9wdGlvbnMucHJvcHM7CiAgICBpZiAoaXNEZWYocHJvcE9wdGlvbnMpKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBwcm9wT3B0aW9ucykgewogICAgICAgIHByb3BzW2tleV0gPSB2YWxpZGF0ZVByb3Aoa2V5LCBwcm9wT3B0aW9ucywgcHJvcHNEYXRhIHx8IGVtcHR5T2JqZWN0KTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKGlzRGVmKGRhdGEuYXR0cnMpKSB7IG1lcmdlUHJvcHMocHJvcHMsIGRhdGEuYXR0cnMpOyB9CiAgICAgIGlmIChpc0RlZihkYXRhLnByb3BzKSkgeyBtZXJnZVByb3BzKHByb3BzLCBkYXRhLnByb3BzKTsgfQogICAgfQoKICAgIHZhciByZW5kZXJDb250ZXh0ID0gbmV3IEZ1bmN0aW9uYWxSZW5kZXJDb250ZXh0KAogICAgICBkYXRhLAogICAgICBwcm9wcywKICAgICAgY2hpbGRyZW4sCiAgICAgIGNvbnRleHRWbSwKICAgICAgQ3RvcgogICAgKTsKCiAgICB2YXIgdm5vZGUgPSBvcHRpb25zLnJlbmRlci5jYWxsKG51bGwsIHJlbmRlckNvbnRleHQuX2MsIHJlbmRlckNvbnRleHQpOwoKICAgIGlmICh2bm9kZSBpbnN0YW5jZW9mIFZOb2RlKSB7CiAgICAgIHJldHVybiBjbG9uZUFuZE1hcmtGdW5jdGlvbmFsUmVzdWx0KHZub2RlLCBkYXRhLCByZW5kZXJDb250ZXh0LnBhcmVudCwgb3B0aW9ucywgcmVuZGVyQ29udGV4dCkKICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2bm9kZSkpIHsKICAgICAgdmFyIHZub2RlcyA9IG5vcm1hbGl6ZUNoaWxkcmVuKHZub2RlKSB8fCBbXTsKICAgICAgdmFyIHJlcyA9IG5ldyBBcnJheSh2bm9kZXMubGVuZ3RoKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICByZXNbaV0gPSBjbG9uZUFuZE1hcmtGdW5jdGlvbmFsUmVzdWx0KHZub2Rlc1tpXSwgZGF0YSwgcmVuZGVyQ29udGV4dC5wYXJlbnQsIG9wdGlvbnMsIHJlbmRlckNvbnRleHQpOwogICAgICB9CiAgICAgIHJldHVybiByZXMKICAgIH0KICB9CgogIGZ1bmN0aW9uIGNsb25lQW5kTWFya0Z1bmN0aW9uYWxSZXN1bHQgKHZub2RlLCBkYXRhLCBjb250ZXh0Vm0sIG9wdGlvbnMsIHJlbmRlckNvbnRleHQpIHsKICAgIC8vICM3ODE3IGNsb25lIG5vZGUgYmVmb3JlIHNldHRpbmcgZm5Db250ZXh0LCBvdGhlcndpc2UgaWYgdGhlIG5vZGUgaXMgcmV1c2VkCiAgICAvLyAoZS5nLiBpdCB3YXMgZnJvbSBhIGNhY2hlZCBub3JtYWwgc2xvdCkgdGhlIGZuQ29udGV4dCBjYXVzZXMgbmFtZWQgc2xvdHMKICAgIC8vIHRoYXQgc2hvdWxkIG5vdCBiZSBtYXRjaGVkIHRvIG1hdGNoLgogICAgdmFyIGNsb25lID0gY2xvbmVWTm9kZSh2bm9kZSk7CiAgICBjbG9uZS5mbkNvbnRleHQgPSBjb250ZXh0Vm07CiAgICBjbG9uZS5mbk9wdGlvbnMgPSBvcHRpb25zOwogICAgewogICAgICAoY2xvbmUuZGV2dG9vbHNNZXRhID0gY2xvbmUuZGV2dG9vbHNNZXRhIHx8IHt9KS5yZW5kZXJDb250ZXh0ID0gcmVuZGVyQ29udGV4dDsKICAgIH0KICAgIGlmIChkYXRhLnNsb3QpIHsKICAgICAgKGNsb25lLmRhdGEgfHwgKGNsb25lLmRhdGEgPSB7fSkpLnNsb3QgPSBkYXRhLnNsb3Q7CiAgICB9CiAgICByZXR1cm4gY2xvbmUKICB9CgogIGZ1bmN0aW9uIG1lcmdlUHJvcHMgKHRvLCBmcm9tKSB7CiAgICBmb3IgKHZhciBrZXkgaW4gZnJvbSkgewogICAgICB0b1tjYW1lbGl6ZShrZXkpXSA9IGZyb21ba2V5XTsKICAgIH0KICB9CgogIC8qICAqLwoKICAvKiAgKi8KCiAgLyogICovCgogIC8qICAqLwoKICAvLyBpbmxpbmUgaG9va3MgdG8gYmUgaW52b2tlZCBvbiBjb21wb25lbnQgVk5vZGVzIGR1cmluZyBwYXRjaAogIHZhciBjb21wb25lbnRWTm9kZUhvb2tzID0gewogICAgaW5pdDogZnVuY3Rpb24gaW5pdCAodm5vZGUsIGh5ZHJhdGluZykgewogICAgICBpZiAoCiAgICAgICAgdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgJiYKICAgICAgICAhdm5vZGUuY29tcG9uZW50SW5zdGFuY2UuX2lzRGVzdHJveWVkICYmCiAgICAgICAgdm5vZGUuZGF0YS5rZWVwQWxpdmUKICAgICAgKSB7CiAgICAgICAgLy8ga2VwdC1hbGl2ZSBjb21wb25lbnRzLCB0cmVhdCBhcyBhIHBhdGNoCiAgICAgICAgdmFyIG1vdW50ZWROb2RlID0gdm5vZGU7IC8vIHdvcmsgYXJvdW5kIGZsb3cKICAgICAgICBjb21wb25lbnRWTm9kZUhvb2tzLnByZXBhdGNoKG1vdW50ZWROb2RlLCBtb3VudGVkTm9kZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGNoaWxkID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgPSBjcmVhdGVDb21wb25lbnRJbnN0YW5jZUZvclZub2RlKAogICAgICAgICAgdm5vZGUsCiAgICAgICAgICBhY3RpdmVJbnN0YW5jZQogICAgICAgICk7CiAgICAgICAgY2hpbGQuJG1vdW50KGh5ZHJhdGluZyA/IHZub2RlLmVsbSA6IHVuZGVmaW5lZCwgaHlkcmF0aW5nKTsKICAgICAgfQogICAgfSwKCiAgICBwcmVwYXRjaDogZnVuY3Rpb24gcHJlcGF0Y2ggKG9sZFZub2RlLCB2bm9kZSkgewogICAgICB2YXIgb3B0aW9ucyA9IHZub2RlLmNvbXBvbmVudE9wdGlvbnM7CiAgICAgIHZhciBjaGlsZCA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlID0gb2xkVm5vZGUuY29tcG9uZW50SW5zdGFuY2U7CiAgICAgIHVwZGF0ZUNoaWxkQ29tcG9uZW50KAogICAgICAgIGNoaWxkLAogICAgICAgIG9wdGlvbnMucHJvcHNEYXRhLCAvLyB1cGRhdGVkIHByb3BzCiAgICAgICAgb3B0aW9ucy5saXN0ZW5lcnMsIC8vIHVwZGF0ZWQgbGlzdGVuZXJzCiAgICAgICAgdm5vZGUsIC8vIG5ldyBwYXJlbnQgdm5vZGUKICAgICAgICBvcHRpb25zLmNoaWxkcmVuIC8vIG5ldyBjaGlsZHJlbgogICAgICApOwogICAgfSwKCiAgICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydCAodm5vZGUpIHsKICAgICAgdmFyIGNvbnRleHQgPSB2bm9kZS5jb250ZXh0OwogICAgICB2YXIgY29tcG9uZW50SW5zdGFuY2UgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZTsKICAgICAgaWYgKCFjb21wb25lbnRJbnN0YW5jZS5faXNNb3VudGVkKSB7CiAgICAgICAgY29tcG9uZW50SW5zdGFuY2UuX2lzTW91bnRlZCA9IHRydWU7CiAgICAgICAgY2FsbEhvb2soY29tcG9uZW50SW5zdGFuY2UsICdtb3VudGVkJyk7CiAgICAgIH0KICAgICAgaWYgKHZub2RlLmRhdGEua2VlcEFsaXZlKSB7CiAgICAgICAgaWYgKGNvbnRleHQuX2lzTW91bnRlZCkgewogICAgICAgICAgLy8gdnVlLXJvdXRlciMxMjEyCiAgICAgICAgICAvLyBEdXJpbmcgdXBkYXRlcywgYSBrZXB0LWFsaXZlIGNvbXBvbmVudCdzIGNoaWxkIGNvbXBvbmVudHMgbWF5CiAgICAgICAgICAvLyBjaGFuZ2UsIHNvIGRpcmVjdGx5IHdhbGtpbmcgdGhlIHRyZWUgaGVyZSBtYXkgY2FsbCBhY3RpdmF0ZWQgaG9va3MKICAgICAgICAgIC8vIG9uIGluY29ycmVjdCBjaGlsZHJlbi4gSW5zdGVhZCB3ZSBwdXNoIHRoZW0gaW50byBhIHF1ZXVlIHdoaWNoIHdpbGwKICAgICAgICAgIC8vIGJlIHByb2Nlc3NlZCBhZnRlciB0aGUgd2hvbGUgcGF0Y2ggcHJvY2VzcyBlbmRlZC4KICAgICAgICAgIHF1ZXVlQWN0aXZhdGVkQ29tcG9uZW50KGNvbXBvbmVudEluc3RhbmNlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWN0aXZhdGVDaGlsZENvbXBvbmVudChjb21wb25lbnRJbnN0YW5jZSwgdHJ1ZSAvKiBkaXJlY3QgKi8pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95ICh2bm9kZSkgewogICAgICB2YXIgY29tcG9uZW50SW5zdGFuY2UgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZTsKICAgICAgaWYgKCFjb21wb25lbnRJbnN0YW5jZS5faXNEZXN0cm95ZWQpIHsKICAgICAgICBpZiAoIXZub2RlLmRhdGEua2VlcEFsaXZlKSB7CiAgICAgICAgICBjb21wb25lbnRJbnN0YW5jZS4kZGVzdHJveSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkZWFjdGl2YXRlQ2hpbGRDb21wb25lbnQoY29tcG9uZW50SW5zdGFuY2UsIHRydWUgLyogZGlyZWN0ICovKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwoKICB2YXIgaG9va3NUb01lcmdlID0gT2JqZWN0LmtleXMoY29tcG9uZW50Vk5vZGVIb29rcyk7CgogIGZ1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudCAoCiAgICBDdG9yLAogICAgZGF0YSwKICAgIGNvbnRleHQsCiAgICBjaGlsZHJlbiwKICAgIHRhZwogICkgewogICAgaWYgKGlzVW5kZWYoQ3RvcikpIHsKICAgICAgcmV0dXJuCiAgICB9CgogICAgdmFyIGJhc2VDdG9yID0gY29udGV4dC4kb3B0aW9ucy5fYmFzZTsKCiAgICAvLyBwbGFpbiBvcHRpb25zIG9iamVjdDogdHVybiBpdCBpbnRvIGEgY29uc3RydWN0b3IKICAgIGlmIChpc09iamVjdChDdG9yKSkgewogICAgICBDdG9yID0gYmFzZUN0b3IuZXh0ZW5kKEN0b3IpOwogICAgfQoKICAgIC8vIGlmIGF0IHRoaXMgc3RhZ2UgaXQncyBub3QgYSBjb25zdHJ1Y3RvciBvciBhbiBhc3luYyBjb21wb25lbnQgZmFjdG9yeSwKICAgIC8vIHJlamVjdC4KICAgIGlmICh0eXBlb2YgQ3RvciAhPT0gJ2Z1bmN0aW9uJykgewogICAgICB7CiAgICAgICAgd2FybigoIkludmFsaWQgQ29tcG9uZW50IGRlZmluaXRpb246ICIgKyAoU3RyaW5nKEN0b3IpKSksIGNvbnRleHQpOwogICAgICB9CiAgICAgIHJldHVybgogICAgfQoKICAgIC8vIGFzeW5jIGNvbXBvbmVudAogICAgdmFyIGFzeW5jRmFjdG9yeTsKICAgIGlmIChpc1VuZGVmKEN0b3IuY2lkKSkgewogICAgICBhc3luY0ZhY3RvcnkgPSBDdG9yOwogICAgICBDdG9yID0gcmVzb2x2ZUFzeW5jQ29tcG9uZW50KGFzeW5jRmFjdG9yeSwgYmFzZUN0b3IpOwogICAgICBpZiAoQ3RvciA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgLy8gcmV0dXJuIGEgcGxhY2Vob2xkZXIgbm9kZSBmb3IgYXN5bmMgY29tcG9uZW50LCB3aGljaCBpcyByZW5kZXJlZAogICAgICAgIC8vIGFzIGEgY29tbWVudCBub2RlIGJ1dCBwcmVzZXJ2ZXMgYWxsIHRoZSByYXcgaW5mb3JtYXRpb24gZm9yIHRoZSBub2RlLgogICAgICAgIC8vIHRoZSBpbmZvcm1hdGlvbiB3aWxsIGJlIHVzZWQgZm9yIGFzeW5jIHNlcnZlci1yZW5kZXJpbmcgYW5kIGh5ZHJhdGlvbi4KICAgICAgICByZXR1cm4gY3JlYXRlQXN5bmNQbGFjZWhvbGRlcigKICAgICAgICAgIGFzeW5jRmFjdG9yeSwKICAgICAgICAgIGRhdGEsCiAgICAgICAgICBjb250ZXh0LAogICAgICAgICAgY2hpbGRyZW4sCiAgICAgICAgICB0YWcKICAgICAgICApCiAgICAgIH0KICAgIH0KCiAgICBkYXRhID0gZGF0YSB8fCB7fTsKCiAgICAvLyByZXNvbHZlIGNvbnN0cnVjdG9yIG9wdGlvbnMgaW4gY2FzZSBnbG9iYWwgbWl4aW5zIGFyZSBhcHBsaWVkIGFmdGVyCiAgICAvLyBjb21wb25lbnQgY29uc3RydWN0b3IgY3JlYXRpb24KICAgIHJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnMoQ3Rvcik7CgogICAgLy8gdHJhbnNmb3JtIGNvbXBvbmVudCB2LW1vZGVsIGRhdGEgaW50byBwcm9wcyAmIGV2ZW50cwogICAgaWYgKGlzRGVmKGRhdGEubW9kZWwpKSB7CiAgICAgIHRyYW5zZm9ybU1vZGVsKEN0b3Iub3B0aW9ucywgZGF0YSk7CiAgICB9CgogICAgLy8gZXh0cmFjdCBwcm9wcwogICAgdmFyIHByb3BzRGF0YSA9IGV4dHJhY3RQcm9wc0Zyb21WTm9kZURhdGEoZGF0YSwgQ3RvciwgdGFnKTsKCiAgICAvLyBmdW5jdGlvbmFsIGNvbXBvbmVudAogICAgaWYgKGlzVHJ1ZShDdG9yLm9wdGlvbnMuZnVuY3Rpb25hbCkpIHsKICAgICAgcmV0dXJuIGNyZWF0ZUZ1bmN0aW9uYWxDb21wb25lbnQoQ3RvciwgcHJvcHNEYXRhLCBkYXRhLCBjb250ZXh0LCBjaGlsZHJlbikKICAgIH0KCiAgICAvLyBleHRyYWN0IGxpc3RlbmVycywgc2luY2UgdGhlc2UgbmVlZHMgdG8gYmUgdHJlYXRlZCBhcwogICAgLy8gY2hpbGQgY29tcG9uZW50IGxpc3RlbmVycyBpbnN0ZWFkIG9mIERPTSBsaXN0ZW5lcnMKICAgIHZhciBsaXN0ZW5lcnMgPSBkYXRhLm9uOwogICAgLy8gcmVwbGFjZSB3aXRoIGxpc3RlbmVycyB3aXRoIC5uYXRpdmUgbW9kaWZpZXIKICAgIC8vIHNvIGl0IGdldHMgcHJvY2Vzc2VkIGR1cmluZyBwYXJlbnQgY29tcG9uZW50IHBhdGNoLgogICAgZGF0YS5vbiA9IGRhdGEubmF0aXZlT247CgogICAgaWYgKGlzVHJ1ZShDdG9yLm9wdGlvbnMuYWJzdHJhY3QpKSB7CiAgICAgIC8vIGFic3RyYWN0IGNvbXBvbmVudHMgZG8gbm90IGtlZXAgYW55dGhpbmcKICAgICAgLy8gb3RoZXIgdGhhbiBwcm9wcyAmIGxpc3RlbmVycyAmIHNsb3QKCiAgICAgIC8vIHdvcmsgYXJvdW5kIGZsb3cKICAgICAgdmFyIHNsb3QgPSBkYXRhLnNsb3Q7CiAgICAgIGRhdGEgPSB7fTsKICAgICAgaWYgKHNsb3QpIHsKICAgICAgICBkYXRhLnNsb3QgPSBzbG90OwogICAgICB9CiAgICB9CgogICAgLy8gaW5zdGFsbCBjb21wb25lbnQgbWFuYWdlbWVudCBob29rcyBvbnRvIHRoZSBwbGFjZWhvbGRlciBub2RlCiAgICBpbnN0YWxsQ29tcG9uZW50SG9va3MoZGF0YSk7CgogICAgLy8gcmV0dXJuIGEgcGxhY2Vob2xkZXIgdm5vZGUKICAgIHZhciBuYW1lID0gQ3Rvci5vcHRpb25zLm5hbWUgfHwgdGFnOwogICAgdmFyIHZub2RlID0gbmV3IFZOb2RlKAogICAgICAoInZ1ZS1jb21wb25lbnQtIiArIChDdG9yLmNpZCkgKyAobmFtZSA/ICgiLSIgKyBuYW1lKSA6ICcnKSksCiAgICAgIGRhdGEsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbnRleHQsCiAgICAgIHsgQ3RvcjogQ3RvciwgcHJvcHNEYXRhOiBwcm9wc0RhdGEsIGxpc3RlbmVyczogbGlzdGVuZXJzLCB0YWc6IHRhZywgY2hpbGRyZW46IGNoaWxkcmVuIH0sCiAgICAgIGFzeW5jRmFjdG9yeQogICAgKTsKCiAgICByZXR1cm4gdm5vZGUKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudEluc3RhbmNlRm9yVm5vZGUgKAogICAgdm5vZGUsIC8vIHdlIGtub3cgaXQncyBNb3VudGVkQ29tcG9uZW50Vk5vZGUgYnV0IGZsb3cgZG9lc24ndAogICAgcGFyZW50IC8vIGFjdGl2ZUluc3RhbmNlIGluIGxpZmVjeWNsZSBzdGF0ZQogICkgewogICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgIF9pc0NvbXBvbmVudDogdHJ1ZSwKICAgICAgX3BhcmVudFZub2RlOiB2bm9kZSwKICAgICAgcGFyZW50OiBwYXJlbnQKICAgIH07CiAgICAvLyBjaGVjayBpbmxpbmUtdGVtcGxhdGUgcmVuZGVyIGZ1bmN0aW9ucwogICAgdmFyIGlubGluZVRlbXBsYXRlID0gdm5vZGUuZGF0YS5pbmxpbmVUZW1wbGF0ZTsKICAgIGlmIChpc0RlZihpbmxpbmVUZW1wbGF0ZSkpIHsKICAgICAgb3B0aW9ucy5yZW5kZXIgPSBpbmxpbmVUZW1wbGF0ZS5yZW5kZXI7CiAgICAgIG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zID0gaW5saW5lVGVtcGxhdGUuc3RhdGljUmVuZGVyRm5zOwogICAgfQogICAgcmV0dXJuIG5ldyB2bm9kZS5jb21wb25lbnRPcHRpb25zLkN0b3Iob3B0aW9ucykKICB9CgogIGZ1bmN0aW9uIGluc3RhbGxDb21wb25lbnRIb29rcyAoZGF0YSkgewogICAgdmFyIGhvb2tzID0gZGF0YS5ob29rIHx8IChkYXRhLmhvb2sgPSB7fSk7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhvb2tzVG9NZXJnZS5sZW5ndGg7IGkrKykgewogICAgICB2YXIga2V5ID0gaG9va3NUb01lcmdlW2ldOwogICAgICB2YXIgZXhpc3RpbmcgPSBob29rc1trZXldOwogICAgICB2YXIgdG9NZXJnZSA9IGNvbXBvbmVudFZOb2RlSG9va3Nba2V5XTsKICAgICAgaWYgKGV4aXN0aW5nICE9PSB0b01lcmdlICYmICEoZXhpc3RpbmcgJiYgZXhpc3RpbmcuX21lcmdlZCkpIHsKICAgICAgICBob29rc1trZXldID0gZXhpc3RpbmcgPyBtZXJnZUhvb2skMSh0b01lcmdlLCBleGlzdGluZykgOiB0b01lcmdlOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBtZXJnZUhvb2skMSAoZjEsIGYyKSB7CiAgICB2YXIgbWVyZ2VkID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgLy8gZmxvdyBjb21wbGFpbnMgYWJvdXQgZXh0cmEgYXJncyB3aGljaCBpcyB3aHkgd2UgdXNlIGFueQogICAgICBmMShhLCBiKTsKICAgICAgZjIoYSwgYik7CiAgICB9OwogICAgbWVyZ2VkLl9tZXJnZWQgPSB0cnVlOwogICAgcmV0dXJuIG1lcmdlZAogIH0KCiAgLy8gdHJhbnNmb3JtIGNvbXBvbmVudCB2LW1vZGVsIGluZm8gKHZhbHVlIGFuZCBjYWxsYmFjaykgaW50bwogIC8vIHByb3AgYW5kIGV2ZW50IGhhbmRsZXIgcmVzcGVjdGl2ZWx5LgogIGZ1bmN0aW9uIHRyYW5zZm9ybU1vZGVsIChvcHRpb25zLCBkYXRhKSB7CiAgICB2YXIgcHJvcCA9IChvcHRpb25zLm1vZGVsICYmIG9wdGlvbnMubW9kZWwucHJvcCkgfHwgJ3ZhbHVlJzsKICAgIHZhciBldmVudCA9IChvcHRpb25zLm1vZGVsICYmIG9wdGlvbnMubW9kZWwuZXZlbnQpIHx8ICdpbnB1dCcKICAgIDsoZGF0YS5hdHRycyB8fCAoZGF0YS5hdHRycyA9IHt9KSlbcHJvcF0gPSBkYXRhLm1vZGVsLnZhbHVlOwogICAgdmFyIG9uID0gZGF0YS5vbiB8fCAoZGF0YS5vbiA9IHt9KTsKICAgIHZhciBleGlzdGluZyA9IG9uW2V2ZW50XTsKICAgIHZhciBjYWxsYmFjayA9IGRhdGEubW9kZWwuY2FsbGJhY2s7CiAgICBpZiAoaXNEZWYoZXhpc3RpbmcpKSB7CiAgICAgIGlmICgKICAgICAgICBBcnJheS5pc0FycmF5KGV4aXN0aW5nKQogICAgICAgICAgPyBleGlzdGluZy5pbmRleE9mKGNhbGxiYWNrKSA9PT0gLTEKICAgICAgICAgIDogZXhpc3RpbmcgIT09IGNhbGxiYWNrCiAgICAgICkgewogICAgICAgIG9uW2V2ZW50XSA9IFtjYWxsYmFja10uY29uY2F0KGV4aXN0aW5nKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgb25bZXZlbnRdID0gY2FsbGJhY2s7CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgdmFyIFNJTVBMRV9OT1JNQUxJWkUgPSAxOwogIHZhciBBTFdBWVNfTk9STUFMSVpFID0gMjsKCiAgLy8gd3JhcHBlciBmdW5jdGlvbiBmb3IgcHJvdmlkaW5nIGEgbW9yZSBmbGV4aWJsZSBpbnRlcmZhY2UKICAvLyB3aXRob3V0IGdldHRpbmcgeWVsbGVkIGF0IGJ5IGZsb3cKICBmdW5jdGlvbiBjcmVhdGVFbGVtZW50ICgKICAgIGNvbnRleHQsCiAgICB0YWcsCiAgICBkYXRhLAogICAgY2hpbGRyZW4sCiAgICBub3JtYWxpemF0aW9uVHlwZSwKICAgIGFsd2F5c05vcm1hbGl6ZQogICkgewogICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkgfHwgaXNQcmltaXRpdmUoZGF0YSkpIHsKICAgICAgbm9ybWFsaXphdGlvblR5cGUgPSBjaGlsZHJlbjsKICAgICAgY2hpbGRyZW4gPSBkYXRhOwogICAgICBkYXRhID0gdW5kZWZpbmVkOwogICAgfQogICAgaWYgKGlzVHJ1ZShhbHdheXNOb3JtYWxpemUpKSB7CiAgICAgIG5vcm1hbGl6YXRpb25UeXBlID0gQUxXQVlTX05PUk1BTElaRTsKICAgIH0KICAgIHJldHVybiBfY3JlYXRlRWxlbWVudChjb250ZXh0LCB0YWcsIGRhdGEsIGNoaWxkcmVuLCBub3JtYWxpemF0aW9uVHlwZSkKICB9CgogIGZ1bmN0aW9uIF9jcmVhdGVFbGVtZW50ICgKICAgIGNvbnRleHQsCiAgICB0YWcsCiAgICBkYXRhLAogICAgY2hpbGRyZW4sCiAgICBub3JtYWxpemF0aW9uVHlwZQogICkgewogICAgaWYgKGlzRGVmKGRhdGEpICYmIGlzRGVmKChkYXRhKS5fX29iX18pKSB7CiAgICAgIHdhcm4oCiAgICAgICAgIkF2b2lkIHVzaW5nIG9ic2VydmVkIGRhdGEgb2JqZWN0IGFzIHZub2RlIGRhdGE6ICIgKyAoSlNPTi5zdHJpbmdpZnkoZGF0YSkpICsgIlxuIiArCiAgICAgICAgJ0Fsd2F5cyBjcmVhdGUgZnJlc2ggdm5vZGUgZGF0YSBvYmplY3RzIGluIGVhY2ggcmVuZGVyIScsCiAgICAgICAgY29udGV4dAogICAgICApOwogICAgICByZXR1cm4gY3JlYXRlRW1wdHlWTm9kZSgpCiAgICB9CiAgICAvLyBvYmplY3Qgc3ludGF4IGluIHYtYmluZAogICAgaWYgKGlzRGVmKGRhdGEpICYmIGlzRGVmKGRhdGEuaXMpKSB7CiAgICAgIHRhZyA9IGRhdGEuaXM7CiAgICB9CiAgICBpZiAoIXRhZykgewogICAgICAvLyBpbiBjYXNlIG9mIGNvbXBvbmVudCA6aXMgc2V0IHRvIGZhbHN5IHZhbHVlCiAgICAgIHJldHVybiBjcmVhdGVFbXB0eVZOb2RlKCkKICAgIH0KICAgIC8vIHdhcm4gYWdhaW5zdCBub24tcHJpbWl0aXZlIGtleQogICAgaWYgKGlzRGVmKGRhdGEpICYmIGlzRGVmKGRhdGEua2V5KSAmJiAhaXNQcmltaXRpdmUoZGF0YS5rZXkpCiAgICApIHsKICAgICAgewogICAgICAgIHdhcm4oCiAgICAgICAgICAnQXZvaWQgdXNpbmcgbm9uLXByaW1pdGl2ZSB2YWx1ZSBhcyBrZXksICcgKwogICAgICAgICAgJ3VzZSBzdHJpbmcvbnVtYmVyIHZhbHVlIGluc3RlYWQuJywKICAgICAgICAgIGNvbnRleHQKICAgICAgICApOwogICAgICB9CiAgICB9CiAgICAvLyBzdXBwb3J0IHNpbmdsZSBmdW5jdGlvbiBjaGlsZHJlbiBhcyBkZWZhdWx0IHNjb3BlZCBzbG90CiAgICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbikgJiYKICAgICAgdHlwZW9mIGNoaWxkcmVuWzBdID09PSAnZnVuY3Rpb24nCiAgICApIHsKICAgICAgZGF0YSA9IGRhdGEgfHwge307CiAgICAgIGRhdGEuc2NvcGVkU2xvdHMgPSB7IGRlZmF1bHQ6IGNoaWxkcmVuWzBdIH07CiAgICAgIGNoaWxkcmVuLmxlbmd0aCA9IDA7CiAgICB9CiAgICBpZiAobm9ybWFsaXphdGlvblR5cGUgPT09IEFMV0FZU19OT1JNQUxJWkUpIHsKICAgICAgY2hpbGRyZW4gPSBub3JtYWxpemVDaGlsZHJlbihjaGlsZHJlbik7CiAgICB9IGVsc2UgaWYgKG5vcm1hbGl6YXRpb25UeXBlID09PSBTSU1QTEVfTk9STUFMSVpFKSB7CiAgICAgIGNoaWxkcmVuID0gc2ltcGxlTm9ybWFsaXplQ2hpbGRyZW4oY2hpbGRyZW4pOwogICAgfQogICAgdmFyIHZub2RlLCBuczsKICAgIGlmICh0eXBlb2YgdGFnID09PSAnc3RyaW5nJykgewogICAgICB2YXIgQ3RvcjsKICAgICAgbnMgPSAoY29udGV4dC4kdm5vZGUgJiYgY29udGV4dC4kdm5vZGUubnMpIHx8IGNvbmZpZy5nZXRUYWdOYW1lc3BhY2UodGFnKTsKICAgICAgaWYgKGNvbmZpZy5pc1Jlc2VydmVkVGFnKHRhZykpIHsKICAgICAgICAvLyBwbGF0Zm9ybSBidWlsdC1pbiBlbGVtZW50cwogICAgICAgIHZub2RlID0gbmV3IFZOb2RlKAogICAgICAgICAgY29uZmlnLnBhcnNlUGxhdGZvcm1UYWdOYW1lKHRhZyksIGRhdGEsIGNoaWxkcmVuLAogICAgICAgICAgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbnRleHQKICAgICAgICApOwogICAgICB9IGVsc2UgaWYgKCghZGF0YSB8fCAhZGF0YS5wcmUpICYmIGlzRGVmKEN0b3IgPSByZXNvbHZlQXNzZXQoY29udGV4dC4kb3B0aW9ucywgJ2NvbXBvbmVudHMnLCB0YWcpKSkgewogICAgICAgIC8vIGNvbXBvbmVudAogICAgICAgIHZub2RlID0gY3JlYXRlQ29tcG9uZW50KEN0b3IsIGRhdGEsIGNvbnRleHQsIGNoaWxkcmVuLCB0YWcpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIHVua25vd24gb3IgdW5saXN0ZWQgbmFtZXNwYWNlZCBlbGVtZW50cwogICAgICAgIC8vIGNoZWNrIGF0IHJ1bnRpbWUgYmVjYXVzZSBpdCBtYXkgZ2V0IGFzc2lnbmVkIGEgbmFtZXNwYWNlIHdoZW4gaXRzCiAgICAgICAgLy8gcGFyZW50IG5vcm1hbGl6ZXMgY2hpbGRyZW4KICAgICAgICB2bm9kZSA9IG5ldyBWTm9kZSgKICAgICAgICAgIHRhZywgZGF0YSwgY2hpbGRyZW4sCiAgICAgICAgICB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29udGV4dAogICAgICAgICk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIC8vIGRpcmVjdCBjb21wb25lbnQgb3B0aW9ucyAvIGNvbnN0cnVjdG9yCiAgICAgIHZub2RlID0gY3JlYXRlQ29tcG9uZW50KHRhZywgZGF0YSwgY29udGV4dCwgY2hpbGRyZW4pOwogICAgfQogICAgaWYgKEFycmF5LmlzQXJyYXkodm5vZGUpKSB7CiAgICAgIHJldHVybiB2bm9kZQogICAgfSBlbHNlIGlmIChpc0RlZih2bm9kZSkpIHsKICAgICAgaWYgKGlzRGVmKG5zKSkgeyBhcHBseU5TKHZub2RlLCBucyk7IH0KICAgICAgaWYgKGlzRGVmKGRhdGEpKSB7IHJlZ2lzdGVyRGVlcEJpbmRpbmdzKGRhdGEpOyB9CiAgICAgIHJldHVybiB2bm9kZQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGNyZWF0ZUVtcHR5Vk5vZGUoKQogICAgfQogIH0KCiAgZnVuY3Rpb24gYXBwbHlOUyAodm5vZGUsIG5zLCBmb3JjZSkgewogICAgdm5vZGUubnMgPSBuczsKICAgIGlmICh2bm9kZS50YWcgPT09ICdmb3JlaWduT2JqZWN0JykgewogICAgICAvLyB1c2UgZGVmYXVsdCBuYW1lc3BhY2UgaW5zaWRlIGZvcmVpZ25PYmplY3QKICAgICAgbnMgPSB1bmRlZmluZWQ7CiAgICAgIGZvcmNlID0gdHJ1ZTsKICAgIH0KICAgIGlmIChpc0RlZih2bm9kZS5jaGlsZHJlbikpIHsKICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2bm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICB2YXIgY2hpbGQgPSB2bm9kZS5jaGlsZHJlbltpXTsKICAgICAgICBpZiAoaXNEZWYoY2hpbGQudGFnKSAmJiAoCiAgICAgICAgICBpc1VuZGVmKGNoaWxkLm5zKSB8fCAoaXNUcnVlKGZvcmNlKSAmJiBjaGlsZC50YWcgIT09ICdzdmcnKSkpIHsKICAgICAgICAgIGFwcGx5TlMoY2hpbGQsIG5zLCBmb3JjZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICAvLyByZWYgIzUzMTgKICAvLyBuZWNlc3NhcnkgdG8gZW5zdXJlIHBhcmVudCByZS1yZW5kZXIgd2hlbiBkZWVwIGJpbmRpbmdzIGxpa2UgOnN0eWxlIGFuZAogIC8vIDpjbGFzcyBhcmUgdXNlZCBvbiBzbG90IG5vZGVzCiAgZnVuY3Rpb24gcmVnaXN0ZXJEZWVwQmluZGluZ3MgKGRhdGEpIHsKICAgIGlmIChpc09iamVjdChkYXRhLnN0eWxlKSkgewogICAgICB0cmF2ZXJzZShkYXRhLnN0eWxlKTsKICAgIH0KICAgIGlmIChpc09iamVjdChkYXRhLmNsYXNzKSkgewogICAgICB0cmF2ZXJzZShkYXRhLmNsYXNzKTsKICAgIH0KICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBpbml0UmVuZGVyICh2bSkgewogICAgdm0uX3Zub2RlID0gbnVsbDsgLy8gdGhlIHJvb3Qgb2YgdGhlIGNoaWxkIHRyZWUKICAgIHZtLl9zdGF0aWNUcmVlcyA9IG51bGw7IC8vIHYtb25jZSBjYWNoZWQgdHJlZXMKICAgIHZhciBvcHRpb25zID0gdm0uJG9wdGlvbnM7CiAgICB2YXIgcGFyZW50Vm5vZGUgPSB2bS4kdm5vZGUgPSBvcHRpb25zLl9wYXJlbnRWbm9kZTsgLy8gdGhlIHBsYWNlaG9sZGVyIG5vZGUgaW4gcGFyZW50IHRyZWUKICAgIHZhciByZW5kZXJDb250ZXh0ID0gcGFyZW50Vm5vZGUgJiYgcGFyZW50Vm5vZGUuY29udGV4dDsKICAgIHZtLiRzbG90cyA9IHJlc29sdmVTbG90cyhvcHRpb25zLl9yZW5kZXJDaGlsZHJlbiwgcmVuZGVyQ29udGV4dCk7CiAgICB2bS4kc2NvcGVkU2xvdHMgPSBlbXB0eU9iamVjdDsKICAgIC8vIGJpbmQgdGhlIGNyZWF0ZUVsZW1lbnQgZm4gdG8gdGhpcyBpbnN0YW5jZQogICAgLy8gc28gdGhhdCB3ZSBnZXQgcHJvcGVyIHJlbmRlciBjb250ZXh0IGluc2lkZSBpdC4KICAgIC8vIGFyZ3Mgb3JkZXI6IHRhZywgZGF0YSwgY2hpbGRyZW4sIG5vcm1hbGl6YXRpb25UeXBlLCBhbHdheXNOb3JtYWxpemUKICAgIC8vIGludGVybmFsIHZlcnNpb24gaXMgdXNlZCBieSByZW5kZXIgZnVuY3Rpb25zIGNvbXBpbGVkIGZyb20gdGVtcGxhdGVzCiAgICB2bS5fYyA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7IHJldHVybiBjcmVhdGVFbGVtZW50KHZtLCBhLCBiLCBjLCBkLCBmYWxzZSk7IH07CiAgICAvLyBub3JtYWxpemF0aW9uIGlzIGFsd2F5cyBhcHBsaWVkIGZvciB0aGUgcHVibGljIHZlcnNpb24sIHVzZWQgaW4KICAgIC8vIHVzZXItd3JpdHRlbiByZW5kZXIgZnVuY3Rpb25zLgogICAgdm0uJGNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkgeyByZXR1cm4gY3JlYXRlRWxlbWVudCh2bSwgYSwgYiwgYywgZCwgdHJ1ZSk7IH07CgogICAgLy8gJGF0dHJzICYgJGxpc3RlbmVycyBhcmUgZXhwb3NlZCBmb3IgZWFzaWVyIEhPQyBjcmVhdGlvbi4KICAgIC8vIHRoZXkgbmVlZCB0byBiZSByZWFjdGl2ZSBzbyB0aGF0IEhPQ3MgdXNpbmcgdGhlbSBhcmUgYWx3YXlzIHVwZGF0ZWQKICAgIHZhciBwYXJlbnREYXRhID0gcGFyZW50Vm5vZGUgJiYgcGFyZW50Vm5vZGUuZGF0YTsKCiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqLwogICAgewogICAgICBkZWZpbmVSZWFjdGl2ZSQkMSh2bSwgJyRhdHRycycsIHBhcmVudERhdGEgJiYgcGFyZW50RGF0YS5hdHRycyB8fCBlbXB0eU9iamVjdCwgZnVuY3Rpb24gKCkgewogICAgICAgICFpc1VwZGF0aW5nQ2hpbGRDb21wb25lbnQgJiYgd2FybigiJGF0dHJzIGlzIHJlYWRvbmx5LiIsIHZtKTsKICAgICAgfSwgdHJ1ZSk7CiAgICAgIGRlZmluZVJlYWN0aXZlJCQxKHZtLCAnJGxpc3RlbmVycycsIG9wdGlvbnMuX3BhcmVudExpc3RlbmVycyB8fCBlbXB0eU9iamVjdCwgZnVuY3Rpb24gKCkgewogICAgICAgICFpc1VwZGF0aW5nQ2hpbGRDb21wb25lbnQgJiYgd2FybigiJGxpc3RlbmVycyBpcyByZWFkb25seS4iLCB2bSk7CiAgICAgIH0sIHRydWUpOwogICAgfQogIH0KCiAgdmFyIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSA9IG51bGw7CgogIGZ1bmN0aW9uIHJlbmRlck1peGluIChWdWUpIHsKICAgIC8vIGluc3RhbGwgcnVudGltZSBjb252ZW5pZW5jZSBoZWxwZXJzCiAgICBpbnN0YWxsUmVuZGVySGVscGVycyhWdWUucHJvdG90eXBlKTsKCiAgICBWdWUucHJvdG90eXBlLiRuZXh0VGljayA9IGZ1bmN0aW9uIChmbikgewogICAgICByZXR1cm4gbmV4dFRpY2soZm4sIHRoaXMpCiAgICB9OwoKICAgIFZ1ZS5wcm90b3R5cGUuX3JlbmRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgdmFyIHJlZiA9IHZtLiRvcHRpb25zOwogICAgICB2YXIgcmVuZGVyID0gcmVmLnJlbmRlcjsKICAgICAgdmFyIF9wYXJlbnRWbm9kZSA9IHJlZi5fcGFyZW50Vm5vZGU7CgogICAgICBpZiAoX3BhcmVudFZub2RlKSB7CiAgICAgICAgdm0uJHNjb3BlZFNsb3RzID0gbm9ybWFsaXplU2NvcGVkU2xvdHMoCiAgICAgICAgICBfcGFyZW50Vm5vZGUuZGF0YS5zY29wZWRTbG90cywKICAgICAgICAgIHZtLiRzbG90cywKICAgICAgICAgIHZtLiRzY29wZWRTbG90cwogICAgICAgICk7CiAgICAgIH0KCiAgICAgIC8vIHNldCBwYXJlbnQgdm5vZGUuIHRoaXMgYWxsb3dzIHJlbmRlciBmdW5jdGlvbnMgdG8gaGF2ZSBhY2Nlc3MKICAgICAgLy8gdG8gdGhlIGRhdGEgb24gdGhlIHBsYWNlaG9sZGVyIG5vZGUuCiAgICAgIHZtLiR2bm9kZSA9IF9wYXJlbnRWbm9kZTsKICAgICAgLy8gcmVuZGVyIHNlbGYKICAgICAgdmFyIHZub2RlOwogICAgICB0cnkgewogICAgICAgIC8vIFRoZXJlJ3Mgbm8gbmVlZCB0byBtYWludGFpbiBhIHN0YWNrIGJlY2F1ZXMgYWxsIHJlbmRlciBmbnMgYXJlIGNhbGxlZAogICAgICAgIC8vIHNlcGFyYXRlbHkgZnJvbSBvbmUgYW5vdGhlci4gTmVzdGVkIGNvbXBvbmVudCdzIHJlbmRlciBmbnMgYXJlIGNhbGxlZAogICAgICAgIC8vIHdoZW4gcGFyZW50IGNvbXBvbmVudCBpcyBwYXRjaGVkLgogICAgICAgIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSA9IHZtOwogICAgICAgIHZub2RlID0gcmVuZGVyLmNhbGwodm0uX3JlbmRlclByb3h5LCB2bS4kY3JlYXRlRWxlbWVudCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBoYW5kbGVFcnJvcihlLCB2bSwgInJlbmRlciIpOwogICAgICAgIC8vIHJldHVybiBlcnJvciByZW5kZXIgcmVzdWx0LAogICAgICAgIC8vIG9yIHByZXZpb3VzIHZub2RlIHRvIHByZXZlbnQgcmVuZGVyIGVycm9yIGNhdXNpbmcgYmxhbmsgY29tcG9uZW50CiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi8KICAgICAgICBpZiAodm0uJG9wdGlvbnMucmVuZGVyRXJyb3IpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHZub2RlID0gdm0uJG9wdGlvbnMucmVuZGVyRXJyb3IuY2FsbCh2bS5fcmVuZGVyUHJveHksIHZtLiRjcmVhdGVFbGVtZW50LCBlKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgaGFuZGxlRXJyb3IoZSwgdm0sICJyZW5kZXJFcnJvciIpOwogICAgICAgICAgICB2bm9kZSA9IHZtLl92bm9kZTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdm5vZGUgPSB2bS5fdm5vZGU7CiAgICAgICAgfQogICAgICB9IGZpbmFsbHkgewogICAgICAgIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSA9IG51bGw7CiAgICAgIH0KICAgICAgLy8gaWYgdGhlIHJldHVybmVkIGFycmF5IGNvbnRhaW5zIG9ubHkgYSBzaW5nbGUgbm9kZSwgYWxsb3cgaXQKICAgICAgaWYgKEFycmF5LmlzQXJyYXkodm5vZGUpICYmIHZub2RlLmxlbmd0aCA9PT0gMSkgewogICAgICAgIHZub2RlID0gdm5vZGVbMF07CiAgICAgIH0KICAgICAgLy8gcmV0dXJuIGVtcHR5IHZub2RlIGluIGNhc2UgdGhlIHJlbmRlciBmdW5jdGlvbiBlcnJvcmVkIG91dAogICAgICBpZiAoISh2bm9kZSBpbnN0YW5jZW9mIFZOb2RlKSkgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZub2RlKSkgewogICAgICAgICAgd2FybigKICAgICAgICAgICAgJ011bHRpcGxlIHJvb3Qgbm9kZXMgcmV0dXJuZWQgZnJvbSByZW5kZXIgZnVuY3Rpb24uIFJlbmRlciBmdW5jdGlvbiAnICsKICAgICAgICAgICAgJ3Nob3VsZCByZXR1cm4gYSBzaW5nbGUgcm9vdCBub2RlLicsCiAgICAgICAgICAgIHZtCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICB2bm9kZSA9IGNyZWF0ZUVtcHR5Vk5vZGUoKTsKICAgICAgfQogICAgICAvLyBzZXQgcGFyZW50CiAgICAgIHZub2RlLnBhcmVudCA9IF9wYXJlbnRWbm9kZTsKICAgICAgcmV0dXJuIHZub2RlCiAgICB9OwogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGVuc3VyZUN0b3IgKGNvbXAsIGJhc2UpIHsKICAgIGlmICgKICAgICAgY29tcC5fX2VzTW9kdWxlIHx8CiAgICAgIChoYXNTeW1ib2wgJiYgY29tcFtTeW1ib2wudG9TdHJpbmdUYWddID09PSAnTW9kdWxlJykKICAgICkgewogICAgICBjb21wID0gY29tcC5kZWZhdWx0OwogICAgfQogICAgcmV0dXJuIGlzT2JqZWN0KGNvbXApCiAgICAgID8gYmFzZS5leHRlbmQoY29tcCkKICAgICAgOiBjb21wCiAgfQoKICBmdW5jdGlvbiBjcmVhdGVBc3luY1BsYWNlaG9sZGVyICgKICAgIGZhY3RvcnksCiAgICBkYXRhLAogICAgY29udGV4dCwKICAgIGNoaWxkcmVuLAogICAgdGFnCiAgKSB7CiAgICB2YXIgbm9kZSA9IGNyZWF0ZUVtcHR5Vk5vZGUoKTsKICAgIG5vZGUuYXN5bmNGYWN0b3J5ID0gZmFjdG9yeTsKICAgIG5vZGUuYXN5bmNNZXRhID0geyBkYXRhOiBkYXRhLCBjb250ZXh0OiBjb250ZXh0LCBjaGlsZHJlbjogY2hpbGRyZW4sIHRhZzogdGFnIH07CiAgICByZXR1cm4gbm9kZQogIH0KCiAgZnVuY3Rpb24gcmVzb2x2ZUFzeW5jQ29tcG9uZW50ICgKICAgIGZhY3RvcnksCiAgICBiYXNlQ3RvcgogICkgewogICAgaWYgKGlzVHJ1ZShmYWN0b3J5LmVycm9yKSAmJiBpc0RlZihmYWN0b3J5LmVycm9yQ29tcCkpIHsKICAgICAgcmV0dXJuIGZhY3RvcnkuZXJyb3JDb21wCiAgICB9CgogICAgaWYgKGlzRGVmKGZhY3RvcnkucmVzb2x2ZWQpKSB7CiAgICAgIHJldHVybiBmYWN0b3J5LnJlc29sdmVkCiAgICB9CgogICAgdmFyIG93bmVyID0gY3VycmVudFJlbmRlcmluZ0luc3RhbmNlOwogICAgaWYgKG93bmVyICYmIGlzRGVmKGZhY3Rvcnkub3duZXJzKSAmJiBmYWN0b3J5Lm93bmVycy5pbmRleE9mKG93bmVyKSA9PT0gLTEpIHsKICAgICAgLy8gYWxyZWFkeSBwZW5kaW5nCiAgICAgIGZhY3Rvcnkub3duZXJzLnB1c2gob3duZXIpOwogICAgfQoKICAgIGlmIChpc1RydWUoZmFjdG9yeS5sb2FkaW5nKSAmJiBpc0RlZihmYWN0b3J5LmxvYWRpbmdDb21wKSkgewogICAgICByZXR1cm4gZmFjdG9yeS5sb2FkaW5nQ29tcAogICAgfQoKICAgIGlmIChvd25lciAmJiAhaXNEZWYoZmFjdG9yeS5vd25lcnMpKSB7CiAgICAgIHZhciBvd25lcnMgPSBmYWN0b3J5Lm93bmVycyA9IFtvd25lcl07CiAgICAgIHZhciBzeW5jID0gdHJ1ZTsKICAgICAgdmFyIHRpbWVyTG9hZGluZyA9IG51bGw7CiAgICAgIHZhciB0aW1lclRpbWVvdXQgPSBudWxsCgogICAgICA7KG93bmVyKS4kb24oJ2hvb2s6ZGVzdHJveWVkJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVtb3ZlKG93bmVycywgb3duZXIpOyB9KTsKCiAgICAgIHZhciBmb3JjZVJlbmRlciA9IGZ1bmN0aW9uIChyZW5kZXJDb21wbGV0ZWQpIHsKICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG93bmVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICAgIChvd25lcnNbaV0pLiRmb3JjZVVwZGF0ZSgpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHJlbmRlckNvbXBsZXRlZCkgewogICAgICAgICAgb3duZXJzLmxlbmd0aCA9IDA7CiAgICAgICAgICBpZiAodGltZXJMb2FkaW5nICE9PSBudWxsKSB7CiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lckxvYWRpbmcpOwogICAgICAgICAgICB0aW1lckxvYWRpbmcgPSBudWxsOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRpbWVyVGltZW91dCAhPT0gbnVsbCkgewogICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXJUaW1lb3V0KTsKICAgICAgICAgICAgdGltZXJUaW1lb3V0ID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CgogICAgICB2YXIgcmVzb2x2ZSA9IG9uY2UoZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8vIGNhY2hlIHJlc29sdmVkCiAgICAgICAgZmFjdG9yeS5yZXNvbHZlZCA9IGVuc3VyZUN0b3IocmVzLCBiYXNlQ3Rvcik7CiAgICAgICAgLy8gaW52b2tlIGNhbGxiYWNrcyBvbmx5IGlmIHRoaXMgaXMgbm90IGEgc3luY2hyb25vdXMgcmVzb2x2ZQogICAgICAgIC8vIChhc3luYyByZXNvbHZlcyBhcmUgc2hpbW1lZCBhcyBzeW5jaHJvbm91cyBkdXJpbmcgU1NSKQogICAgICAgIGlmICghc3luYykgewogICAgICAgICAgZm9yY2VSZW5kZXIodHJ1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG93bmVycy5sZW5ndGggPSAwOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICB2YXIgcmVqZWN0ID0gb25jZShmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgd2FybigKICAgICAgICAgICJGYWlsZWQgdG8gcmVzb2x2ZSBhc3luYyBjb21wb25lbnQ6ICIgKyAoU3RyaW5nKGZhY3RvcnkpKSArCiAgICAgICAgICAocmVhc29uID8gKCJcblJlYXNvbjogIiArIHJlYXNvbikgOiAnJykKICAgICAgICApOwogICAgICAgIGlmIChpc0RlZihmYWN0b3J5LmVycm9yQ29tcCkpIHsKICAgICAgICAgIGZhY3RvcnkuZXJyb3IgPSB0cnVlOwogICAgICAgICAgZm9yY2VSZW5kZXIodHJ1ZSk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHZhciByZXMgPSBmYWN0b3J5KHJlc29sdmUsIHJlamVjdCk7CgogICAgICBpZiAoaXNPYmplY3QocmVzKSkgewogICAgICAgIGlmIChpc1Byb21pc2UocmVzKSkgewogICAgICAgICAgLy8gKCkgPT4gUHJvbWlzZQogICAgICAgICAgaWYgKGlzVW5kZWYoZmFjdG9yeS5yZXNvbHZlZCkpIHsKICAgICAgICAgICAgcmVzLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGlzUHJvbWlzZShyZXMuY29tcG9uZW50KSkgewogICAgICAgICAgcmVzLmNvbXBvbmVudC50aGVuKHJlc29sdmUsIHJlamVjdCk7CgogICAgICAgICAgaWYgKGlzRGVmKHJlcy5lcnJvcikpIHsKICAgICAgICAgICAgZmFjdG9yeS5lcnJvckNvbXAgPSBlbnN1cmVDdG9yKHJlcy5lcnJvciwgYmFzZUN0b3IpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChpc0RlZihyZXMubG9hZGluZykpIHsKICAgICAgICAgICAgZmFjdG9yeS5sb2FkaW5nQ29tcCA9IGVuc3VyZUN0b3IocmVzLmxvYWRpbmcsIGJhc2VDdG9yKTsKICAgICAgICAgICAgaWYgKHJlcy5kZWxheSA9PT0gMCkgewogICAgICAgICAgICAgIGZhY3RvcnkubG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGltZXJMb2FkaW5nID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB0aW1lckxvYWRpbmcgPSBudWxsOwogICAgICAgICAgICAgICAgaWYgKGlzVW5kZWYoZmFjdG9yeS5yZXNvbHZlZCkgJiYgaXNVbmRlZihmYWN0b3J5LmVycm9yKSkgewogICAgICAgICAgICAgICAgICBmYWN0b3J5LmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICBmb3JjZVJlbmRlcihmYWxzZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgcmVzLmRlbGF5IHx8IDIwMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoaXNEZWYocmVzLnRpbWVvdXQpKSB7CiAgICAgICAgICAgIHRpbWVyVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHRpbWVyVGltZW91dCA9IG51bGw7CiAgICAgICAgICAgICAgaWYgKGlzVW5kZWYoZmFjdG9yeS5yZXNvbHZlZCkpIHsKICAgICAgICAgICAgICAgIHJlamVjdCgKICAgICAgICAgICAgICAgICAgInRpbWVvdXQgKCIgKyAocmVzLnRpbWVvdXQpICsgIm1zKSIKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCByZXMudGltZW91dCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBzeW5jID0gZmFsc2U7CiAgICAgIC8vIHJldHVybiBpbiBjYXNlIHJlc29sdmVkIHN5bmNocm9ub3VzbHkKICAgICAgcmV0dXJuIGZhY3RvcnkubG9hZGluZwogICAgICAgID8gZmFjdG9yeS5sb2FkaW5nQ29tcAogICAgICAgIDogZmFjdG9yeS5yZXNvbHZlZAogICAgfQogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGlzQXN5bmNQbGFjZWhvbGRlciAobm9kZSkgewogICAgcmV0dXJuIG5vZGUuaXNDb21tZW50ICYmIG5vZGUuYXN5bmNGYWN0b3J5CiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gZ2V0Rmlyc3RDb21wb25lbnRDaGlsZCAoY2hpbGRyZW4pIHsKICAgIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuKSkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGMgPSBjaGlsZHJlbltpXTsKICAgICAgICBpZiAoaXNEZWYoYykgJiYgKGlzRGVmKGMuY29tcG9uZW50T3B0aW9ucykgfHwgaXNBc3luY1BsYWNlaG9sZGVyKGMpKSkgewogICAgICAgICAgcmV0dXJuIGMKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIC8qICAqLwoKICAvKiAgKi8KCiAgZnVuY3Rpb24gaW5pdEV2ZW50cyAodm0pIHsKICAgIHZtLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgdm0uX2hhc0hvb2tFdmVudCA9IGZhbHNlOwogICAgLy8gaW5pdCBwYXJlbnQgYXR0YWNoZWQgZXZlbnRzCiAgICB2YXIgbGlzdGVuZXJzID0gdm0uJG9wdGlvbnMuX3BhcmVudExpc3RlbmVyczsKICAgIGlmIChsaXN0ZW5lcnMpIHsKICAgICAgdXBkYXRlQ29tcG9uZW50TGlzdGVuZXJzKHZtLCBsaXN0ZW5lcnMpOwogICAgfQogIH0KCiAgdmFyIHRhcmdldDsKCiAgZnVuY3Rpb24gYWRkIChldmVudCwgZm4pIHsKICAgIHRhcmdldC4kb24oZXZlbnQsIGZuKTsKICB9CgogIGZ1bmN0aW9uIHJlbW92ZSQxIChldmVudCwgZm4pIHsKICAgIHRhcmdldC4kb2ZmKGV2ZW50LCBmbik7CiAgfQoKICBmdW5jdGlvbiBjcmVhdGVPbmNlSGFuZGxlciAoZXZlbnQsIGZuKSB7CiAgICB2YXIgX3RhcmdldCA9IHRhcmdldDsKICAgIHJldHVybiBmdW5jdGlvbiBvbmNlSGFuZGxlciAoKSB7CiAgICAgIHZhciByZXMgPSBmbi5hcHBseShudWxsLCBhcmd1bWVudHMpOwogICAgICBpZiAocmVzICE9PSBudWxsKSB7CiAgICAgICAgX3RhcmdldC4kb2ZmKGV2ZW50LCBvbmNlSGFuZGxlcik7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIHVwZGF0ZUNvbXBvbmVudExpc3RlbmVycyAoCiAgICB2bSwKICAgIGxpc3RlbmVycywKICAgIG9sZExpc3RlbmVycwogICkgewogICAgdGFyZ2V0ID0gdm07CiAgICB1cGRhdGVMaXN0ZW5lcnMobGlzdGVuZXJzLCBvbGRMaXN0ZW5lcnMgfHwge30sIGFkZCwgcmVtb3ZlJDEsIGNyZWF0ZU9uY2VIYW5kbGVyLCB2bSk7CiAgICB0YXJnZXQgPSB1bmRlZmluZWQ7CiAgfQoKICBmdW5jdGlvbiBldmVudHNNaXhpbiAoVnVlKSB7CiAgICB2YXIgaG9va1JFID0gL15ob29rOi87CiAgICBWdWUucHJvdG90eXBlLiRvbiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnQpKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBldmVudC5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICAgIHZtLiRvbihldmVudFtpXSwgZm4pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAodm0uX2V2ZW50c1tldmVudF0gfHwgKHZtLl9ldmVudHNbZXZlbnRdID0gW10pKS5wdXNoKGZuKTsKICAgICAgICAvLyBvcHRpbWl6ZSBob29rOmV2ZW50IGNvc3QgYnkgdXNpbmcgYSBib29sZWFuIGZsYWcgbWFya2VkIGF0IHJlZ2lzdHJhdGlvbgogICAgICAgIC8vIGluc3RlYWQgb2YgYSBoYXNoIGxvb2t1cAogICAgICAgIGlmIChob29rUkUudGVzdChldmVudCkpIHsKICAgICAgICAgIHZtLl9oYXNIb29rRXZlbnQgPSB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdm0KICAgIH07CgogICAgVnVlLnByb3RvdHlwZS4kb25jZSA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgZnVuY3Rpb24gb24gKCkgewogICAgICAgIHZtLiRvZmYoZXZlbnQsIG9uKTsKICAgICAgICBmbi5hcHBseSh2bSwgYXJndW1lbnRzKTsKICAgICAgfQogICAgICBvbi5mbiA9IGZuOwogICAgICB2bS4kb24oZXZlbnQsIG9uKTsKICAgICAgcmV0dXJuIHZtCiAgICB9OwoKICAgIFZ1ZS5wcm90b3R5cGUuJG9mZiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgLy8gYWxsCiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgewogICAgICAgIHZtLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgICAgIHJldHVybiB2bQogICAgICB9CiAgICAgIC8vIGFycmF5IG9mIGV2ZW50cwogICAgICBpZiAoQXJyYXkuaXNBcnJheShldmVudCkpIHsKICAgICAgICBmb3IgKHZhciBpJDEgPSAwLCBsID0gZXZlbnQubGVuZ3RoOyBpJDEgPCBsOyBpJDErKykgewogICAgICAgICAgdm0uJG9mZihldmVudFtpJDFdLCBmbik7CiAgICAgICAgfQogICAgICAgIHJldHVybiB2bQogICAgICB9CiAgICAgIC8vIHNwZWNpZmljIGV2ZW50CiAgICAgIHZhciBjYnMgPSB2bS5fZXZlbnRzW2V2ZW50XTsKICAgICAgaWYgKCFjYnMpIHsKICAgICAgICByZXR1cm4gdm0KICAgICAgfQogICAgICBpZiAoIWZuKSB7CiAgICAgICAgdm0uX2V2ZW50c1tldmVudF0gPSBudWxsOwogICAgICAgIHJldHVybiB2bQogICAgICB9CiAgICAgIC8vIHNwZWNpZmljIGhhbmRsZXIKICAgICAgdmFyIGNiOwogICAgICB2YXIgaSA9IGNicy5sZW5ndGg7CiAgICAgIHdoaWxlIChpLS0pIHsKICAgICAgICBjYiA9IGNic1tpXTsKICAgICAgICBpZiAoY2IgPT09IGZuIHx8IGNiLmZuID09PSBmbikgewogICAgICAgICAgY2JzLnNwbGljZShpLCAxKTsKICAgICAgICAgIGJyZWFrCiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB2bQogICAgfTsKCiAgICBWdWUucHJvdG90eXBlLiRlbWl0ID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHsKICAgICAgICB2YXIgbG93ZXJDYXNlRXZlbnQgPSBldmVudC50b0xvd2VyQ2FzZSgpOwogICAgICAgIGlmIChsb3dlckNhc2VFdmVudCAhPT0gZXZlbnQgJiYgdm0uX2V2ZW50c1tsb3dlckNhc2VFdmVudF0pIHsKICAgICAgICAgIHRpcCgKICAgICAgICAgICAgIkV2ZW50IFwiIiArIGxvd2VyQ2FzZUV2ZW50ICsgIlwiIGlzIGVtaXR0ZWQgaW4gY29tcG9uZW50ICIgKwogICAgICAgICAgICAoZm9ybWF0Q29tcG9uZW50TmFtZSh2bSkpICsgIiBidXQgdGhlIGhhbmRsZXIgaXMgcmVnaXN0ZXJlZCBmb3IgXCIiICsgZXZlbnQgKyAiXCIuICIgKwogICAgICAgICAgICAiTm90ZSB0aGF0IEhUTUwgYXR0cmlidXRlcyBhcmUgY2FzZS1pbnNlbnNpdGl2ZSBhbmQgeW91IGNhbm5vdCB1c2UgIiArCiAgICAgICAgICAgICJ2LW9uIHRvIGxpc3RlbiB0byBjYW1lbENhc2UgZXZlbnRzIHdoZW4gdXNpbmcgaW4tRE9NIHRlbXBsYXRlcy4gIiArCiAgICAgICAgICAgICJZb3Ugc2hvdWxkIHByb2JhYmx5IHVzZSBcIiIgKyAoaHlwaGVuYXRlKGV2ZW50KSkgKyAiXCIgaW5zdGVhZCBvZiBcIiIgKyBldmVudCArICJcIi4iCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfQogICAgICB2YXIgY2JzID0gdm0uX2V2ZW50c1tldmVudF07CiAgICAgIGlmIChjYnMpIHsKICAgICAgICBjYnMgPSBjYnMubGVuZ3RoID4gMSA/IHRvQXJyYXkoY2JzKSA6IGNiczsKICAgICAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTsKICAgICAgICB2YXIgaW5mbyA9ICJldmVudCBoYW5kbGVyIGZvciBcIiIgKyBldmVudCArICJcIiI7CiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjYnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICBpbnZva2VXaXRoRXJyb3JIYW5kbGluZyhjYnNbaV0sIHZtLCBhcmdzLCB2bSwgaW5mbyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB2bQogICAgfTsKICB9CgogIC8qICAqLwoKICB2YXIgYWN0aXZlSW5zdGFuY2UgPSBudWxsOwogIHZhciBpc1VwZGF0aW5nQ2hpbGRDb21wb25lbnQgPSBmYWxzZTsKCiAgZnVuY3Rpb24gc2V0QWN0aXZlSW5zdGFuY2Uodm0pIHsKICAgIHZhciBwcmV2QWN0aXZlSW5zdGFuY2UgPSBhY3RpdmVJbnN0YW5jZTsKICAgIGFjdGl2ZUluc3RhbmNlID0gdm07CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICBhY3RpdmVJbnN0YW5jZSA9IHByZXZBY3RpdmVJbnN0YW5jZTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGluaXRMaWZlY3ljbGUgKHZtKSB7CiAgICB2YXIgb3B0aW9ucyA9IHZtLiRvcHRpb25zOwoKICAgIC8vIGxvY2F0ZSBmaXJzdCBub24tYWJzdHJhY3QgcGFyZW50CiAgICB2YXIgcGFyZW50ID0gb3B0aW9ucy5wYXJlbnQ7CiAgICBpZiAocGFyZW50ICYmICFvcHRpb25zLmFic3RyYWN0KSB7CiAgICAgIHdoaWxlIChwYXJlbnQuJG9wdGlvbnMuYWJzdHJhY3QgJiYgcGFyZW50LiRwYXJlbnQpIHsKICAgICAgICBwYXJlbnQgPSBwYXJlbnQuJHBhcmVudDsKICAgICAgfQogICAgICBwYXJlbnQuJGNoaWxkcmVuLnB1c2godm0pOwogICAgfQoKICAgIHZtLiRwYXJlbnQgPSBwYXJlbnQ7CiAgICB2bS4kcm9vdCA9IHBhcmVudCA/IHBhcmVudC4kcm9vdCA6IHZtOwoKICAgIHZtLiRjaGlsZHJlbiA9IFtdOwogICAgdm0uJHJlZnMgPSB7fTsKCiAgICB2bS5fd2F0Y2hlciA9IG51bGw7CiAgICB2bS5faW5hY3RpdmUgPSBudWxsOwogICAgdm0uX2RpcmVjdEluYWN0aXZlID0gZmFsc2U7CiAgICB2bS5faXNNb3VudGVkID0gZmFsc2U7CiAgICB2bS5faXNEZXN0cm95ZWQgPSBmYWxzZTsKICAgIHZtLl9pc0JlaW5nRGVzdHJveWVkID0gZmFsc2U7CiAgfQoKICBmdW5jdGlvbiBsaWZlY3ljbGVNaXhpbiAoVnVlKSB7CiAgICBWdWUucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAodm5vZGUsIGh5ZHJhdGluZykgewogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICB2YXIgcHJldkVsID0gdm0uJGVsOwogICAgICB2YXIgcHJldlZub2RlID0gdm0uX3Zub2RlOwogICAgICB2YXIgcmVzdG9yZUFjdGl2ZUluc3RhbmNlID0gc2V0QWN0aXZlSW5zdGFuY2Uodm0pOwogICAgICB2bS5fdm5vZGUgPSB2bm9kZTsKICAgICAgLy8gVnVlLnByb3RvdHlwZS5fX3BhdGNoX18gaXMgaW5qZWN0ZWQgaW4gZW50cnkgcG9pbnRzCiAgICAgIC8vIGJhc2VkIG9uIHRoZSByZW5kZXJpbmcgYmFja2VuZCB1c2VkLgogICAgICBpZiAoIXByZXZWbm9kZSkgewogICAgICAgIC8vIGluaXRpYWwgcmVuZGVyCiAgICAgICAgdm0uJGVsID0gdm0uX19wYXRjaF9fKHZtLiRlbCwgdm5vZGUsIGh5ZHJhdGluZywgZmFsc2UgLyogcmVtb3ZlT25seSAqLyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gdXBkYXRlcwogICAgICAgIHZtLiRlbCA9IHZtLl9fcGF0Y2hfXyhwcmV2Vm5vZGUsIHZub2RlKTsKICAgICAgfQogICAgICByZXN0b3JlQWN0aXZlSW5zdGFuY2UoKTsKICAgICAgLy8gdXBkYXRlIF9fdnVlX18gcmVmZXJlbmNlCiAgICAgIGlmIChwcmV2RWwpIHsKICAgICAgICBwcmV2RWwuX192dWVfXyA9IG51bGw7CiAgICAgIH0KICAgICAgaWYgKHZtLiRlbCkgewogICAgICAgIHZtLiRlbC5fX3Z1ZV9fID0gdm07CiAgICAgIH0KICAgICAgLy8gaWYgcGFyZW50IGlzIGFuIEhPQywgdXBkYXRlIGl0cyAkZWwgYXMgd2VsbAogICAgICBpZiAodm0uJHZub2RlICYmIHZtLiRwYXJlbnQgJiYgdm0uJHZub2RlID09PSB2bS4kcGFyZW50Ll92bm9kZSkgewogICAgICAgIHZtLiRwYXJlbnQuJGVsID0gdm0uJGVsOwogICAgICB9CiAgICAgIC8vIHVwZGF0ZWQgaG9vayBpcyBjYWxsZWQgYnkgdGhlIHNjaGVkdWxlciB0byBlbnN1cmUgdGhhdCBjaGlsZHJlbiBhcmUKICAgICAgLy8gdXBkYXRlZCBpbiBhIHBhcmVudCdzIHVwZGF0ZWQgaG9vay4KICAgIH07CgogICAgVnVlLnByb3RvdHlwZS4kZm9yY2VVcGRhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIGlmICh2bS5fd2F0Y2hlcikgewogICAgICAgIHZtLl93YXRjaGVyLnVwZGF0ZSgpOwogICAgICB9CiAgICB9OwoKICAgIFZ1ZS5wcm90b3R5cGUuJGRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIGlmICh2bS5faXNCZWluZ0Rlc3Ryb3llZCkgewogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIGNhbGxIb29rKHZtLCAnYmVmb3JlRGVzdHJveScpOwogICAgICB2bS5faXNCZWluZ0Rlc3Ryb3llZCA9IHRydWU7CiAgICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gcGFyZW50CiAgICAgIHZhciBwYXJlbnQgPSB2bS4kcGFyZW50OwogICAgICBpZiAocGFyZW50ICYmICFwYXJlbnQuX2lzQmVpbmdEZXN0cm95ZWQgJiYgIXZtLiRvcHRpb25zLmFic3RyYWN0KSB7CiAgICAgICAgcmVtb3ZlKHBhcmVudC4kY2hpbGRyZW4sIHZtKTsKICAgICAgfQogICAgICAvLyB0ZWFyZG93biB3YXRjaGVycwogICAgICBpZiAodm0uX3dhdGNoZXIpIHsKICAgICAgICB2bS5fd2F0Y2hlci50ZWFyZG93bigpOwogICAgICB9CiAgICAgIHZhciBpID0gdm0uX3dhdGNoZXJzLmxlbmd0aDsKICAgICAgd2hpbGUgKGktLSkgewogICAgICAgIHZtLl93YXRjaGVyc1tpXS50ZWFyZG93bigpOwogICAgICB9CiAgICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgZnJvbSBkYXRhIG9iCiAgICAgIC8vIGZyb3plbiBvYmplY3QgbWF5IG5vdCBoYXZlIG9ic2VydmVyLgogICAgICBpZiAodm0uX2RhdGEuX19vYl9fKSB7CiAgICAgICAgdm0uX2RhdGEuX19vYl9fLnZtQ291bnQtLTsKICAgICAgfQogICAgICAvLyBjYWxsIHRoZSBsYXN0IGhvb2suLi4KICAgICAgdm0uX2lzRGVzdHJveWVkID0gdHJ1ZTsKICAgICAgLy8gaW52b2tlIGRlc3Ryb3kgaG9va3Mgb24gY3VycmVudCByZW5kZXJlZCB0cmVlCiAgICAgIHZtLl9fcGF0Y2hfXyh2bS5fdm5vZGUsIG51bGwpOwogICAgICAvLyBmaXJlIGRlc3Ryb3llZCBob29rCiAgICAgIGNhbGxIb29rKHZtLCAnZGVzdHJveWVkJyk7CiAgICAgIC8vIHR1cm4gb2ZmIGFsbCBpbnN0YW5jZSBsaXN0ZW5lcnMuCiAgICAgIHZtLiRvZmYoKTsKICAgICAgLy8gcmVtb3ZlIF9fdnVlX18gcmVmZXJlbmNlCiAgICAgIGlmICh2bS4kZWwpIHsKICAgICAgICB2bS4kZWwuX192dWVfXyA9IG51bGw7CiAgICAgIH0KICAgICAgLy8gcmVsZWFzZSBjaXJjdWxhciByZWZlcmVuY2UgKCM2NzU5KQogICAgICBpZiAodm0uJHZub2RlKSB7CiAgICAgICAgdm0uJHZub2RlLnBhcmVudCA9IG51bGw7CiAgICAgIH0KICAgIH07CiAgfQoKICBmdW5jdGlvbiBtb3VudENvbXBvbmVudCAoCiAgICB2bSwKICAgIGVsLAogICAgaHlkcmF0aW5nCiAgKSB7CiAgICB2bS4kZWwgPSBlbDsKICAgIGlmICghdm0uJG9wdGlvbnMucmVuZGVyKSB7CiAgICAgIHZtLiRvcHRpb25zLnJlbmRlciA9IGNyZWF0ZUVtcHR5Vk5vZGU7CiAgICAgIHsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgICBpZiAoKHZtLiRvcHRpb25zLnRlbXBsYXRlICYmIHZtLiRvcHRpb25zLnRlbXBsYXRlLmNoYXJBdCgwKSAhPT0gJyMnKSB8fAogICAgICAgICAgdm0uJG9wdGlvbnMuZWwgfHwgZWwpIHsKICAgICAgICAgIHdhcm4oCiAgICAgICAgICAgICdZb3UgYXJlIHVzaW5nIHRoZSBydW50aW1lLW9ubHkgYnVpbGQgb2YgVnVlIHdoZXJlIHRoZSB0ZW1wbGF0ZSAnICsKICAgICAgICAgICAgJ2NvbXBpbGVyIGlzIG5vdCBhdmFpbGFibGUuIEVpdGhlciBwcmUtY29tcGlsZSB0aGUgdGVtcGxhdGVzIGludG8gJyArCiAgICAgICAgICAgICdyZW5kZXIgZnVuY3Rpb25zLCBvciB1c2UgdGhlIGNvbXBpbGVyLWluY2x1ZGVkIGJ1aWxkLicsCiAgICAgICAgICAgIHZtCiAgICAgICAgICApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB3YXJuKAogICAgICAgICAgICAnRmFpbGVkIHRvIG1vdW50IGNvbXBvbmVudDogdGVtcGxhdGUgb3IgcmVuZGVyIGZ1bmN0aW9uIG5vdCBkZWZpbmVkLicsCiAgICAgICAgICAgIHZtCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgY2FsbEhvb2sodm0sICdiZWZvcmVNb3VudCcpOwoKICAgIHZhciB1cGRhdGVDb21wb25lbnQ7CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgIGlmIChjb25maWcucGVyZm9ybWFuY2UgJiYgbWFyaykgewogICAgICB1cGRhdGVDb21wb25lbnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG5hbWUgPSB2bS5fbmFtZTsKICAgICAgICB2YXIgaWQgPSB2bS5fdWlkOwogICAgICAgIHZhciBzdGFydFRhZyA9ICJ2dWUtcGVyZi1zdGFydDoiICsgaWQ7CiAgICAgICAgdmFyIGVuZFRhZyA9ICJ2dWUtcGVyZi1lbmQ6IiArIGlkOwoKICAgICAgICBtYXJrKHN0YXJ0VGFnKTsKICAgICAgICB2YXIgdm5vZGUgPSB2bS5fcmVuZGVyKCk7CiAgICAgICAgbWFyayhlbmRUYWcpOwogICAgICAgIG1lYXN1cmUoKCJ2dWUgIiArIG5hbWUgKyAiIHJlbmRlciIpLCBzdGFydFRhZywgZW5kVGFnKTsKCiAgICAgICAgbWFyayhzdGFydFRhZyk7CiAgICAgICAgdm0uX3VwZGF0ZSh2bm9kZSwgaHlkcmF0aW5nKTsKICAgICAgICBtYXJrKGVuZFRhZyk7CiAgICAgICAgbWVhc3VyZSgoInZ1ZSAiICsgbmFtZSArICIgcGF0Y2giKSwgc3RhcnRUYWcsIGVuZFRhZyk7CiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICB1cGRhdGVDb21wb25lbnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdm0uX3VwZGF0ZSh2bS5fcmVuZGVyKCksIGh5ZHJhdGluZyk7CiAgICAgIH07CiAgICB9CgogICAgLy8gd2Ugc2V0IHRoaXMgdG8gdm0uX3dhdGNoZXIgaW5zaWRlIHRoZSB3YXRjaGVyJ3MgY29uc3RydWN0b3IKICAgIC8vIHNpbmNlIHRoZSB3YXRjaGVyJ3MgaW5pdGlhbCBwYXRjaCBtYXkgY2FsbCAkZm9yY2VVcGRhdGUgKGUuZy4gaW5zaWRlIGNoaWxkCiAgICAvLyBjb21wb25lbnQncyBtb3VudGVkIGhvb2spLCB3aGljaCByZWxpZXMgb24gdm0uX3dhdGNoZXIgYmVpbmcgYWxyZWFkeSBkZWZpbmVkCiAgICBuZXcgV2F0Y2hlcih2bSwgdXBkYXRlQ29tcG9uZW50LCBub29wLCB7CiAgICAgIGJlZm9yZTogZnVuY3Rpb24gYmVmb3JlICgpIHsKICAgICAgICBpZiAodm0uX2lzTW91bnRlZCAmJiAhdm0uX2lzRGVzdHJveWVkKSB7CiAgICAgICAgICBjYWxsSG9vayh2bSwgJ2JlZm9yZVVwZGF0ZScpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgdHJ1ZSAvKiBpc1JlbmRlcldhdGNoZXIgKi8pOwogICAgaHlkcmF0aW5nID0gZmFsc2U7CgogICAgLy8gbWFudWFsbHkgbW91bnRlZCBpbnN0YW5jZSwgY2FsbCBtb3VudGVkIG9uIHNlbGYKICAgIC8vIG1vdW50ZWQgaXMgY2FsbGVkIGZvciByZW5kZXItY3JlYXRlZCBjaGlsZCBjb21wb25lbnRzIGluIGl0cyBpbnNlcnRlZCBob29rCiAgICBpZiAodm0uJHZub2RlID09IG51bGwpIHsKICAgICAgdm0uX2lzTW91bnRlZCA9IHRydWU7CiAgICAgIGNhbGxIb29rKHZtLCAnbW91bnRlZCcpOwogICAgfQogICAgcmV0dXJuIHZtCiAgfQoKICBmdW5jdGlvbiB1cGRhdGVDaGlsZENvbXBvbmVudCAoCiAgICB2bSwKICAgIHByb3BzRGF0YSwKICAgIGxpc3RlbmVycywKICAgIHBhcmVudFZub2RlLAogICAgcmVuZGVyQ2hpbGRyZW4KICApIHsKICAgIHsKICAgICAgaXNVcGRhdGluZ0NoaWxkQ29tcG9uZW50ID0gdHJ1ZTsKICAgIH0KCiAgICAvLyBkZXRlcm1pbmUgd2hldGhlciBjb21wb25lbnQgaGFzIHNsb3QgY2hpbGRyZW4KICAgIC8vIHdlIG5lZWQgdG8gZG8gdGhpcyBiZWZvcmUgb3ZlcndyaXRpbmcgJG9wdGlvbnMuX3JlbmRlckNoaWxkcmVuLgoKICAgIC8vIGNoZWNrIGlmIHRoZXJlIGFyZSBkeW5hbWljIHNjb3BlZFNsb3RzIChoYW5kLXdyaXR0ZW4gb3IgY29tcGlsZWQgYnV0IHdpdGgKICAgIC8vIGR5bmFtaWMgc2xvdCBuYW1lcykuIFN0YXRpYyBzY29wZWQgc2xvdHMgY29tcGlsZWQgZnJvbSB0ZW1wbGF0ZSBoYXMgdGhlCiAgICAvLyAiJHN0YWJsZSIgbWFya2VyLgogICAgdmFyIG5ld1Njb3BlZFNsb3RzID0gcGFyZW50Vm5vZGUuZGF0YS5zY29wZWRTbG90czsKICAgIHZhciBvbGRTY29wZWRTbG90cyA9IHZtLiRzY29wZWRTbG90czsKICAgIHZhciBoYXNEeW5hbWljU2NvcGVkU2xvdCA9ICEhKAogICAgICAobmV3U2NvcGVkU2xvdHMgJiYgIW5ld1Njb3BlZFNsb3RzLiRzdGFibGUpIHx8CiAgICAgIChvbGRTY29wZWRTbG90cyAhPT0gZW1wdHlPYmplY3QgJiYgIW9sZFNjb3BlZFNsb3RzLiRzdGFibGUpIHx8CiAgICAgIChuZXdTY29wZWRTbG90cyAmJiB2bS4kc2NvcGVkU2xvdHMuJGtleSAhPT0gbmV3U2NvcGVkU2xvdHMuJGtleSkKICAgICk7CgogICAgLy8gQW55IHN0YXRpYyBzbG90IGNoaWxkcmVuIGZyb20gdGhlIHBhcmVudCBtYXkgaGF2ZSBjaGFuZ2VkIGR1cmluZyBwYXJlbnQncwogICAgLy8gdXBkYXRlLiBEeW5hbWljIHNjb3BlZCBzbG90cyBtYXkgYWxzbyBoYXZlIGNoYW5nZWQuIEluIHN1Y2ggY2FzZXMsIGEgZm9yY2VkCiAgICAvLyB1cGRhdGUgaXMgbmVjZXNzYXJ5IHRvIGVuc3VyZSBjb3JyZWN0bmVzcy4KICAgIHZhciBuZWVkc0ZvcmNlVXBkYXRlID0gISEoCiAgICAgIHJlbmRlckNoaWxkcmVuIHx8ICAgICAgICAgICAgICAgLy8gaGFzIG5ldyBzdGF0aWMgc2xvdHMKICAgICAgdm0uJG9wdGlvbnMuX3JlbmRlckNoaWxkcmVuIHx8ICAvLyBoYXMgb2xkIHN0YXRpYyBzbG90cwogICAgICBoYXNEeW5hbWljU2NvcGVkU2xvdAogICAgKTsKCiAgICB2bS4kb3B0aW9ucy5fcGFyZW50Vm5vZGUgPSBwYXJlbnRWbm9kZTsKICAgIHZtLiR2bm9kZSA9IHBhcmVudFZub2RlOyAvLyB1cGRhdGUgdm0ncyBwbGFjZWhvbGRlciBub2RlIHdpdGhvdXQgcmUtcmVuZGVyCgogICAgaWYgKHZtLl92bm9kZSkgeyAvLyB1cGRhdGUgY2hpbGQgdHJlZSdzIHBhcmVudAogICAgICB2bS5fdm5vZGUucGFyZW50ID0gcGFyZW50Vm5vZGU7CiAgICB9CiAgICB2bS4kb3B0aW9ucy5fcmVuZGVyQ2hpbGRyZW4gPSByZW5kZXJDaGlsZHJlbjsKCiAgICAvLyB1cGRhdGUgJGF0dHJzIGFuZCAkbGlzdGVuZXJzIGhhc2gKICAgIC8vIHRoZXNlIGFyZSBhbHNvIHJlYWN0aXZlIHNvIHRoZXkgbWF5IHRyaWdnZXIgY2hpbGQgdXBkYXRlIGlmIHRoZSBjaGlsZAogICAgLy8gdXNlZCB0aGVtIGR1cmluZyByZW5kZXIKICAgIHZtLiRhdHRycyA9IHBhcmVudFZub2RlLmRhdGEuYXR0cnMgfHwgZW1wdHlPYmplY3Q7CiAgICB2bS4kbGlzdGVuZXJzID0gbGlzdGVuZXJzIHx8IGVtcHR5T2JqZWN0OwoKICAgIC8vIHVwZGF0ZSBwcm9wcwogICAgaWYgKHByb3BzRGF0YSAmJiB2bS4kb3B0aW9ucy5wcm9wcykgewogICAgICB0b2dnbGVPYnNlcnZpbmcoZmFsc2UpOwogICAgICB2YXIgcHJvcHMgPSB2bS5fcHJvcHM7CiAgICAgIHZhciBwcm9wS2V5cyA9IHZtLiRvcHRpb25zLl9wcm9wS2V5cyB8fCBbXTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wS2V5cy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBrZXkgPSBwcm9wS2V5c1tpXTsKICAgICAgICB2YXIgcHJvcE9wdGlvbnMgPSB2bS4kb3B0aW9ucy5wcm9wczsgLy8gd3RmIGZsb3c/CiAgICAgICAgcHJvcHNba2V5XSA9IHZhbGlkYXRlUHJvcChrZXksIHByb3BPcHRpb25zLCBwcm9wc0RhdGEsIHZtKTsKICAgICAgfQogICAgICB0b2dnbGVPYnNlcnZpbmcodHJ1ZSk7CiAgICAgIC8vIGtlZXAgYSBjb3B5IG9mIHJhdyBwcm9wc0RhdGEKICAgICAgdm0uJG9wdGlvbnMucHJvcHNEYXRhID0gcHJvcHNEYXRhOwogICAgfQoKICAgIC8vIHVwZGF0ZSBsaXN0ZW5lcnMKICAgIGxpc3RlbmVycyA9IGxpc3RlbmVycyB8fCBlbXB0eU9iamVjdDsKICAgIHZhciBvbGRMaXN0ZW5lcnMgPSB2bS4kb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzOwogICAgdm0uJG9wdGlvbnMuX3BhcmVudExpc3RlbmVycyA9IGxpc3RlbmVyczsKICAgIHVwZGF0ZUNvbXBvbmVudExpc3RlbmVycyh2bSwgbGlzdGVuZXJzLCBvbGRMaXN0ZW5lcnMpOwoKICAgIC8vIHJlc29sdmUgc2xvdHMgKyBmb3JjZSB1cGRhdGUgaWYgaGFzIGNoaWxkcmVuCiAgICBpZiAobmVlZHNGb3JjZVVwZGF0ZSkgewogICAgICB2bS4kc2xvdHMgPSByZXNvbHZlU2xvdHMocmVuZGVyQ2hpbGRyZW4sIHBhcmVudFZub2RlLmNvbnRleHQpOwogICAgICB2bS4kZm9yY2VVcGRhdGUoKTsKICAgIH0KCiAgICB7CiAgICAgIGlzVXBkYXRpbmdDaGlsZENvbXBvbmVudCA9IGZhbHNlOwogICAgfQogIH0KCiAgZnVuY3Rpb24gaXNJbkluYWN0aXZlVHJlZSAodm0pIHsKICAgIHdoaWxlICh2bSAmJiAodm0gPSB2bS4kcGFyZW50KSkgewogICAgICBpZiAodm0uX2luYWN0aXZlKSB7IHJldHVybiB0cnVlIH0KICAgIH0KICAgIHJldHVybiBmYWxzZQogIH0KCiAgZnVuY3Rpb24gYWN0aXZhdGVDaGlsZENvbXBvbmVudCAodm0sIGRpcmVjdCkgewogICAgaWYgKGRpcmVjdCkgewogICAgICB2bS5fZGlyZWN0SW5hY3RpdmUgPSBmYWxzZTsKICAgICAgaWYgKGlzSW5JbmFjdGl2ZVRyZWUodm0pKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgIH0gZWxzZSBpZiAodm0uX2RpcmVjdEluYWN0aXZlKSB7CiAgICAgIHJldHVybgogICAgfQogICAgaWYgKHZtLl9pbmFjdGl2ZSB8fCB2bS5faW5hY3RpdmUgPT09IG51bGwpIHsKICAgICAgdm0uX2luYWN0aXZlID0gZmFsc2U7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uJGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgYWN0aXZhdGVDaGlsZENvbXBvbmVudCh2bS4kY2hpbGRyZW5baV0pOwogICAgICB9CiAgICAgIGNhbGxIb29rKHZtLCAnYWN0aXZhdGVkJyk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBkZWFjdGl2YXRlQ2hpbGRDb21wb25lbnQgKHZtLCBkaXJlY3QpIHsKICAgIGlmIChkaXJlY3QpIHsKICAgICAgdm0uX2RpcmVjdEluYWN0aXZlID0gdHJ1ZTsKICAgICAgaWYgKGlzSW5JbmFjdGl2ZVRyZWUodm0pKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgIH0KICAgIGlmICghdm0uX2luYWN0aXZlKSB7CiAgICAgIHZtLl9pbmFjdGl2ZSA9IHRydWU7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uJGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZGVhY3RpdmF0ZUNoaWxkQ29tcG9uZW50KHZtLiRjaGlsZHJlbltpXSk7CiAgICAgIH0KICAgICAgY2FsbEhvb2sodm0sICdkZWFjdGl2YXRlZCcpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gY2FsbEhvb2sgKHZtLCBob29rKSB7CiAgICAvLyAjNzU3MyBkaXNhYmxlIGRlcCBjb2xsZWN0aW9uIHdoZW4gaW52b2tpbmcgbGlmZWN5Y2xlIGhvb2tzCiAgICBwdXNoVGFyZ2V0KCk7CiAgICB2YXIgaGFuZGxlcnMgPSB2bS4kb3B0aW9uc1tob29rXTsKICAgIHZhciBpbmZvID0gaG9vayArICIgaG9vayI7CiAgICBpZiAoaGFuZGxlcnMpIHsKICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHsKICAgICAgICBpbnZva2VXaXRoRXJyb3JIYW5kbGluZyhoYW5kbGVyc1tpXSwgdm0sIG51bGwsIHZtLCBpbmZvKTsKICAgICAgfQogICAgfQogICAgaWYgKHZtLl9oYXNIb29rRXZlbnQpIHsKICAgICAgdm0uJGVtaXQoJ2hvb2s6JyArIGhvb2spOwogICAgfQogICAgcG9wVGFyZ2V0KCk7CiAgfQoKICAvKiAgKi8KCiAgdmFyIE1BWF9VUERBVEVfQ09VTlQgPSAxMDA7CgogIHZhciBxdWV1ZSA9IFtdOwogIHZhciBhY3RpdmF0ZWRDaGlsZHJlbiA9IFtdOwogIHZhciBoYXMgPSB7fTsKICB2YXIgY2lyY3VsYXIgPSB7fTsKICB2YXIgd2FpdGluZyA9IGZhbHNlOwogIHZhciBmbHVzaGluZyA9IGZhbHNlOwogIHZhciBpbmRleCA9IDA7CgogIC8qKgogICAqIFJlc2V0IHRoZSBzY2hlZHVsZXIncyBzdGF0ZS4KICAgKi8KICBmdW5jdGlvbiByZXNldFNjaGVkdWxlclN0YXRlICgpIHsKICAgIGluZGV4ID0gcXVldWUubGVuZ3RoID0gYWN0aXZhdGVkQ2hpbGRyZW4ubGVuZ3RoID0gMDsKICAgIGhhcyA9IHt9OwogICAgewogICAgICBjaXJjdWxhciA9IHt9OwogICAgfQogICAgd2FpdGluZyA9IGZsdXNoaW5nID0gZmFsc2U7CiAgfQoKICAvLyBBc3luYyBlZGdlIGNhc2UgIzY1NjYgcmVxdWlyZXMgc2F2aW5nIHRoZSB0aW1lc3RhbXAgd2hlbiBldmVudCBsaXN0ZW5lcnMgYXJlCiAgLy8gYXR0YWNoZWQuIEhvd2V2ZXIsIGNhbGxpbmcgcGVyZm9ybWFuY2Uubm93KCkgaGFzIGEgcGVyZiBvdmVyaGVhZCBlc3BlY2lhbGx5CiAgLy8gaWYgdGhlIHBhZ2UgaGFzIHRob3VzYW5kcyBvZiBldmVudCBsaXN0ZW5lcnMuIEluc3RlYWQsIHdlIHRha2UgYSB0aW1lc3RhbXAKICAvLyBldmVyeSB0aW1lIHRoZSBzY2hlZHVsZXIgZmx1c2hlcyBhbmQgdXNlIHRoYXQgZm9yIGFsbCBldmVudCBsaXN0ZW5lcnMKICAvLyBhdHRhY2hlZCBkdXJpbmcgdGhhdCBmbHVzaC4KICB2YXIgY3VycmVudEZsdXNoVGltZXN0YW1wID0gMDsKCiAgLy8gQXN5bmMgZWRnZSBjYXNlIGZpeCByZXF1aXJlcyBzdG9yaW5nIGFuIGV2ZW50IGxpc3RlbmVyJ3MgYXR0YWNoIHRpbWVzdGFtcC4KICB2YXIgZ2V0Tm93ID0gRGF0ZS5ub3c7CgogIC8vIERldGVybWluZSB3aGF0IGV2ZW50IHRpbWVzdGFtcCB0aGUgYnJvd3NlciBpcyB1c2luZy4gQW5ub3lpbmdseSwgdGhlCiAgLy8gdGltZXN0YW1wIGNhbiBlaXRoZXIgYmUgaGktcmVzIChyZWxhdGl2ZSB0byBwYWdlIGxvYWQpIG9yIGxvdy1yZXMKICAvLyAocmVsYXRpdmUgdG8gVU5JWCBlcG9jaCksIHNvIGluIG9yZGVyIHRvIGNvbXBhcmUgdGltZSB3ZSBoYXZlIHRvIHVzZSB0aGUKICAvLyBzYW1lIHRpbWVzdGFtcCB0eXBlIHdoZW4gc2F2aW5nIHRoZSBmbHVzaCB0aW1lc3RhbXAuCiAgLy8gQWxsIElFIHZlcnNpb25zIHVzZSBsb3ctcmVzIGV2ZW50IHRpbWVzdGFtcHMsIGFuZCBoYXZlIHByb2JsZW1hdGljIGNsb2NrCiAgLy8gaW1wbGVtZW50YXRpb25zICgjOTYzMikKICBpZiAoaW5Ccm93c2VyICYmICFpc0lFKSB7CiAgICB2YXIgcGVyZm9ybWFuY2UgPSB3aW5kb3cucGVyZm9ybWFuY2U7CiAgICBpZiAoCiAgICAgIHBlcmZvcm1hbmNlICYmCiAgICAgIHR5cGVvZiBwZXJmb3JtYW5jZS5ub3cgPT09ICdmdW5jdGlvbicgJiYKICAgICAgZ2V0Tm93KCkgPiBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKS50aW1lU3RhbXAKICAgICkgewogICAgICAvLyBpZiB0aGUgZXZlbnQgdGltZXN0YW1wLCBhbHRob3VnaCBldmFsdWF0ZWQgQUZURVIgdGhlIERhdGUubm93KCksIGlzCiAgICAgIC8vIHNtYWxsZXIgdGhhbiBpdCwgaXQgbWVhbnMgdGhlIGV2ZW50IGlzIHVzaW5nIGEgaGktcmVzIHRpbWVzdGFtcCwKICAgICAgLy8gYW5kIHdlIG5lZWQgdG8gdXNlIHRoZSBoaS1yZXMgdmVyc2lvbiBmb3IgZXZlbnQgbGlzdGVuZXIgdGltZXN0YW1wcyBhcwogICAgICAvLyB3ZWxsLgogICAgICBnZXROb3cgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBwZXJmb3JtYW5jZS5ub3coKTsgfTsKICAgIH0KICB9CgogIC8qKgogICAqIEZsdXNoIGJvdGggcXVldWVzIGFuZCBydW4gdGhlIHdhdGNoZXJzLgogICAqLwogIGZ1bmN0aW9uIGZsdXNoU2NoZWR1bGVyUXVldWUgKCkgewogICAgY3VycmVudEZsdXNoVGltZXN0YW1wID0gZ2V0Tm93KCk7CiAgICBmbHVzaGluZyA9IHRydWU7CiAgICB2YXIgd2F0Y2hlciwgaWQ7CgogICAgLy8gU29ydCBxdWV1ZSBiZWZvcmUgZmx1c2guCiAgICAvLyBUaGlzIGVuc3VyZXMgdGhhdDoKICAgIC8vIDEuIENvbXBvbmVudHMgYXJlIHVwZGF0ZWQgZnJvbSBwYXJlbnQgdG8gY2hpbGQuIChiZWNhdXNlIHBhcmVudCBpcyBhbHdheXMKICAgIC8vICAgIGNyZWF0ZWQgYmVmb3JlIHRoZSBjaGlsZCkKICAgIC8vIDIuIEEgY29tcG9uZW50J3MgdXNlciB3YXRjaGVycyBhcmUgcnVuIGJlZm9yZSBpdHMgcmVuZGVyIHdhdGNoZXIgKGJlY2F1c2UKICAgIC8vICAgIHVzZXIgd2F0Y2hlcnMgYXJlIGNyZWF0ZWQgYmVmb3JlIHRoZSByZW5kZXIgd2F0Y2hlcikKICAgIC8vIDMuIElmIGEgY29tcG9uZW50IGlzIGRlc3Ryb3llZCBkdXJpbmcgYSBwYXJlbnQgY29tcG9uZW50J3Mgd2F0Y2hlciBydW4sCiAgICAvLyAgICBpdHMgd2F0Y2hlcnMgY2FuIGJlIHNraXBwZWQuCiAgICBxdWV1ZS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmlkIC0gYi5pZDsgfSk7CgogICAgLy8gZG8gbm90IGNhY2hlIGxlbmd0aCBiZWNhdXNlIG1vcmUgd2F0Y2hlcnMgbWlnaHQgYmUgcHVzaGVkCiAgICAvLyBhcyB3ZSBydW4gZXhpc3Rpbmcgd2F0Y2hlcnMKICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IHF1ZXVlLmxlbmd0aDsgaW5kZXgrKykgewogICAgICB3YXRjaGVyID0gcXVldWVbaW5kZXhdOwogICAgICBpZiAod2F0Y2hlci5iZWZvcmUpIHsKICAgICAgICB3YXRjaGVyLmJlZm9yZSgpOwogICAgICB9CiAgICAgIGlkID0gd2F0Y2hlci5pZDsKICAgICAgaGFzW2lkXSA9IG51bGw7CiAgICAgIHdhdGNoZXIucnVuKCk7CiAgICAgIC8vIGluIGRldiBidWlsZCwgY2hlY2sgYW5kIHN0b3AgY2lyY3VsYXIgdXBkYXRlcy4KICAgICAgaWYgKGhhc1tpZF0gIT0gbnVsbCkgewogICAgICAgIGNpcmN1bGFyW2lkXSA9IChjaXJjdWxhcltpZF0gfHwgMCkgKyAxOwogICAgICAgIGlmIChjaXJjdWxhcltpZF0gPiBNQVhfVVBEQVRFX0NPVU5UKSB7CiAgICAgICAgICB3YXJuKAogICAgICAgICAgICAnWW91IG1heSBoYXZlIGFuIGluZmluaXRlIHVwZGF0ZSBsb29wICcgKyAoCiAgICAgICAgICAgICAgd2F0Y2hlci51c2VyCiAgICAgICAgICAgICAgICA/ICgiaW4gd2F0Y2hlciB3aXRoIGV4cHJlc3Npb24gXCIiICsgKHdhdGNoZXIuZXhwcmVzc2lvbikgKyAiXCIiKQogICAgICAgICAgICAgICAgOiAiaW4gYSBjb21wb25lbnQgcmVuZGVyIGZ1bmN0aW9uLiIKICAgICAgICAgICAgKSwKICAgICAgICAgICAgd2F0Y2hlci52bQogICAgICAgICAgKTsKICAgICAgICAgIGJyZWFrCiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgLy8ga2VlcCBjb3BpZXMgb2YgcG9zdCBxdWV1ZXMgYmVmb3JlIHJlc2V0dGluZyBzdGF0ZQogICAgdmFyIGFjdGl2YXRlZFF1ZXVlID0gYWN0aXZhdGVkQ2hpbGRyZW4uc2xpY2UoKTsKICAgIHZhciB1cGRhdGVkUXVldWUgPSBxdWV1ZS5zbGljZSgpOwoKICAgIHJlc2V0U2NoZWR1bGVyU3RhdGUoKTsKCiAgICAvLyBjYWxsIGNvbXBvbmVudCB1cGRhdGVkIGFuZCBhY3RpdmF0ZWQgaG9va3MKICAgIGNhbGxBY3RpdmF0ZWRIb29rcyhhY3RpdmF0ZWRRdWV1ZSk7CiAgICBjYWxsVXBkYXRlZEhvb2tzKHVwZGF0ZWRRdWV1ZSk7CgogICAgLy8gZGV2dG9vbCBob29rCiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgIGlmIChkZXZ0b29scyAmJiBjb25maWcuZGV2dG9vbHMpIHsKICAgICAgZGV2dG9vbHMuZW1pdCgnZmx1c2gnKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGNhbGxVcGRhdGVkSG9va3MgKHF1ZXVlKSB7CiAgICB2YXIgaSA9IHF1ZXVlLmxlbmd0aDsKICAgIHdoaWxlIChpLS0pIHsKICAgICAgdmFyIHdhdGNoZXIgPSBxdWV1ZVtpXTsKICAgICAgdmFyIHZtID0gd2F0Y2hlci52bTsKICAgICAgaWYgKHZtLl93YXRjaGVyID09PSB3YXRjaGVyICYmIHZtLl9pc01vdW50ZWQgJiYgIXZtLl9pc0Rlc3Ryb3llZCkgewogICAgICAgIGNhbGxIb29rKHZtLCAndXBkYXRlZCcpOwogICAgICB9CiAgICB9CiAgfQoKICAvKioKICAgKiBRdWV1ZSBhIGtlcHQtYWxpdmUgY29tcG9uZW50IHRoYXQgd2FzIGFjdGl2YXRlZCBkdXJpbmcgcGF0Y2guCiAgICogVGhlIHF1ZXVlIHdpbGwgYmUgcHJvY2Vzc2VkIGFmdGVyIHRoZSBlbnRpcmUgdHJlZSBoYXMgYmVlbiBwYXRjaGVkLgogICAqLwogIGZ1bmN0aW9uIHF1ZXVlQWN0aXZhdGVkQ29tcG9uZW50ICh2bSkgewogICAgLy8gc2V0dGluZyBfaW5hY3RpdmUgdG8gZmFsc2UgaGVyZSBzbyB0aGF0IGEgcmVuZGVyIGZ1bmN0aW9uIGNhbgogICAgLy8gcmVseSBvbiBjaGVja2luZyB3aGV0aGVyIGl0J3MgaW4gYW4gaW5hY3RpdmUgdHJlZSAoZS5nLiByb3V0ZXItdmlldykKICAgIHZtLl9pbmFjdGl2ZSA9IGZhbHNlOwogICAgYWN0aXZhdGVkQ2hpbGRyZW4ucHVzaCh2bSk7CiAgfQoKICBmdW5jdGlvbiBjYWxsQWN0aXZhdGVkSG9va3MgKHF1ZXVlKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7CiAgICAgIHF1ZXVlW2ldLl9pbmFjdGl2ZSA9IHRydWU7CiAgICAgIGFjdGl2YXRlQ2hpbGRDb21wb25lbnQocXVldWVbaV0sIHRydWUgLyogdHJ1ZSAqLyk7CiAgICB9CiAgfQoKICAvKioKICAgKiBQdXNoIGEgd2F0Y2hlciBpbnRvIHRoZSB3YXRjaGVyIHF1ZXVlLgogICAqIEpvYnMgd2l0aCBkdXBsaWNhdGUgSURzIHdpbGwgYmUgc2tpcHBlZCB1bmxlc3MgaXQncwogICAqIHB1c2hlZCB3aGVuIHRoZSBxdWV1ZSBpcyBiZWluZyBmbHVzaGVkLgogICAqLwogIGZ1bmN0aW9uIHF1ZXVlV2F0Y2hlciAod2F0Y2hlcikgewogICAgdmFyIGlkID0gd2F0Y2hlci5pZDsKICAgIGlmIChoYXNbaWRdID09IG51bGwpIHsKICAgICAgaGFzW2lkXSA9IHRydWU7CiAgICAgIGlmICghZmx1c2hpbmcpIHsKICAgICAgICBxdWV1ZS5wdXNoKHdhdGNoZXIpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGlmIGFscmVhZHkgZmx1c2hpbmcsIHNwbGljZSB0aGUgd2F0Y2hlciBiYXNlZCBvbiBpdHMgaWQKICAgICAgICAvLyBpZiBhbHJlYWR5IHBhc3QgaXRzIGlkLCBpdCB3aWxsIGJlIHJ1biBuZXh0IGltbWVkaWF0ZWx5LgogICAgICAgIHZhciBpID0gcXVldWUubGVuZ3RoIC0gMTsKICAgICAgICB3aGlsZSAoaSA+IGluZGV4ICYmIHF1ZXVlW2ldLmlkID4gd2F0Y2hlci5pZCkgewogICAgICAgICAgaS0tOwogICAgICAgIH0KICAgICAgICBxdWV1ZS5zcGxpY2UoaSArIDEsIDAsIHdhdGNoZXIpOwogICAgICB9CiAgICAgIC8vIHF1ZXVlIHRoZSBmbHVzaAogICAgICBpZiAoIXdhaXRpbmcpIHsKICAgICAgICB3YWl0aW5nID0gdHJ1ZTsKCiAgICAgICAgaWYgKCFjb25maWcuYXN5bmMpIHsKICAgICAgICAgIGZsdXNoU2NoZWR1bGVyUXVldWUoKTsKICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgICBuZXh0VGljayhmbHVzaFNjaGVkdWxlclF1ZXVlKTsKICAgICAgfQogICAgfQogIH0KCiAgLyogICovCgoKCiAgdmFyIHVpZCQyID0gMDsKCiAgLyoqCiAgICogQSB3YXRjaGVyIHBhcnNlcyBhbiBleHByZXNzaW9uLCBjb2xsZWN0cyBkZXBlbmRlbmNpZXMsCiAgICogYW5kIGZpcmVzIGNhbGxiYWNrIHdoZW4gdGhlIGV4cHJlc3Npb24gdmFsdWUgY2hhbmdlcy4KICAgKiBUaGlzIGlzIHVzZWQgZm9yIGJvdGggdGhlICR3YXRjaCgpIGFwaSBhbmQgZGlyZWN0aXZlcy4KICAgKi8KICB2YXIgV2F0Y2hlciA9IGZ1bmN0aW9uIFdhdGNoZXIgKAogICAgdm0sCiAgICBleHBPckZuLAogICAgY2IsCiAgICBvcHRpb25zLAogICAgaXNSZW5kZXJXYXRjaGVyCiAgKSB7CiAgICB0aGlzLnZtID0gdm07CiAgICBpZiAoaXNSZW5kZXJXYXRjaGVyKSB7CiAgICAgIHZtLl93YXRjaGVyID0gdGhpczsKICAgIH0KICAgIHZtLl93YXRjaGVycy5wdXNoKHRoaXMpOwogICAgLy8gb3B0aW9ucwogICAgaWYgKG9wdGlvbnMpIHsKICAgICAgdGhpcy5kZWVwID0gISFvcHRpb25zLmRlZXA7CiAgICAgIHRoaXMudXNlciA9ICEhb3B0aW9ucy51c2VyOwogICAgICB0aGlzLmxhenkgPSAhIW9wdGlvbnMubGF6eTsKICAgICAgdGhpcy5zeW5jID0gISFvcHRpb25zLnN5bmM7CiAgICAgIHRoaXMuYmVmb3JlID0gb3B0aW9ucy5iZWZvcmU7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmRlZXAgPSB0aGlzLnVzZXIgPSB0aGlzLmxhenkgPSB0aGlzLnN5bmMgPSBmYWxzZTsKICAgIH0KICAgIHRoaXMuY2IgPSBjYjsKICAgIHRoaXMuaWQgPSArK3VpZCQyOyAvLyB1aWQgZm9yIGJhdGNoaW5nCiAgICB0aGlzLmFjdGl2ZSA9IHRydWU7CiAgICB0aGlzLmRpcnR5ID0gdGhpcy5sYXp5OyAvLyBmb3IgbGF6eSB3YXRjaGVycwogICAgdGhpcy5kZXBzID0gW107CiAgICB0aGlzLm5ld0RlcHMgPSBbXTsKICAgIHRoaXMuZGVwSWRzID0gbmV3IF9TZXQoKTsKICAgIHRoaXMubmV3RGVwSWRzID0gbmV3IF9TZXQoKTsKICAgIHRoaXMuZXhwcmVzc2lvbiA9IGV4cE9yRm4udG9TdHJpbmcoKTsKICAgIC8vIHBhcnNlIGV4cHJlc3Npb24gZm9yIGdldHRlcgogICAgaWYgKHR5cGVvZiBleHBPckZuID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIHRoaXMuZ2V0dGVyID0gZXhwT3JGbjsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuZ2V0dGVyID0gcGFyc2VQYXRoKGV4cE9yRm4pOwogICAgICBpZiAoIXRoaXMuZ2V0dGVyKSB7CiAgICAgICAgdGhpcy5nZXR0ZXIgPSBub29wOwogICAgICAgIHdhcm4oCiAgICAgICAgICAiRmFpbGVkIHdhdGNoaW5nIHBhdGg6IFwiIiArIGV4cE9yRm4gKyAiXCIgIiArCiAgICAgICAgICAnV2F0Y2hlciBvbmx5IGFjY2VwdHMgc2ltcGxlIGRvdC1kZWxpbWl0ZWQgcGF0aHMuICcgKwogICAgICAgICAgJ0ZvciBmdWxsIGNvbnRyb2wsIHVzZSBhIGZ1bmN0aW9uIGluc3RlYWQuJywKICAgICAgICAgIHZtCiAgICAgICAgKTsKICAgICAgfQogICAgfQogICAgdGhpcy52YWx1ZSA9IHRoaXMubGF6eQogICAgICA/IHVuZGVmaW5lZAogICAgICA6IHRoaXMuZ2V0KCk7CiAgfTsKCiAgLyoqCiAgICogRXZhbHVhdGUgdGhlIGdldHRlciwgYW5kIHJlLWNvbGxlY3QgZGVwZW5kZW5jaWVzLgogICAqLwogIFdhdGNoZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIGdldCAoKSB7CiAgICBwdXNoVGFyZ2V0KHRoaXMpOwogICAgdmFyIHZhbHVlOwogICAgdmFyIHZtID0gdGhpcy52bTsKICAgIHRyeSB7CiAgICAgIHZhbHVlID0gdGhpcy5nZXR0ZXIuY2FsbCh2bSwgdm0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICBpZiAodGhpcy51c2VyKSB7CiAgICAgICAgaGFuZGxlRXJyb3IoZSwgdm0sICgiZ2V0dGVyIGZvciB3YXRjaGVyIFwiIiArICh0aGlzLmV4cHJlc3Npb24pICsgIlwiIikpOwogICAgICB9IGVsc2UgewogICAgICAgIHRocm93IGUKICAgICAgfQogICAgfSBmaW5hbGx5IHsKICAgICAgLy8gInRvdWNoIiBldmVyeSBwcm9wZXJ0eSBzbyB0aGV5IGFyZSBhbGwgdHJhY2tlZCBhcwogICAgICAvLyBkZXBlbmRlbmNpZXMgZm9yIGRlZXAgd2F0Y2hpbmcKICAgICAgaWYgKHRoaXMuZGVlcCkgewogICAgICAgIHRyYXZlcnNlKHZhbHVlKTsKICAgICAgfQogICAgICBwb3BUYXJnZXQoKTsKICAgICAgdGhpcy5jbGVhbnVwRGVwcygpOwogICAgfQogICAgcmV0dXJuIHZhbHVlCiAgfTsKCiAgLyoqCiAgICogQWRkIGEgZGVwZW5kZW5jeSB0byB0aGlzIGRpcmVjdGl2ZS4KICAgKi8KICBXYXRjaGVyLnByb3RvdHlwZS5hZGREZXAgPSBmdW5jdGlvbiBhZGREZXAgKGRlcCkgewogICAgdmFyIGlkID0gZGVwLmlkOwogICAgaWYgKCF0aGlzLm5ld0RlcElkcy5oYXMoaWQpKSB7CiAgICAgIHRoaXMubmV3RGVwSWRzLmFkZChpZCk7CiAgICAgIHRoaXMubmV3RGVwcy5wdXNoKGRlcCk7CiAgICAgIGlmICghdGhpcy5kZXBJZHMuaGFzKGlkKSkgewogICAgICAgIGRlcC5hZGRTdWIodGhpcyk7CiAgICAgIH0KICAgIH0KICB9OwoKICAvKioKICAgKiBDbGVhbiB1cCBmb3IgZGVwZW5kZW5jeSBjb2xsZWN0aW9uLgogICAqLwogIFdhdGNoZXIucHJvdG90eXBlLmNsZWFudXBEZXBzID0gZnVuY3Rpb24gY2xlYW51cERlcHMgKCkgewogICAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoOwogICAgd2hpbGUgKGktLSkgewogICAgICB2YXIgZGVwID0gdGhpcy5kZXBzW2ldOwogICAgICBpZiAoIXRoaXMubmV3RGVwSWRzLmhhcyhkZXAuaWQpKSB7CiAgICAgICAgZGVwLnJlbW92ZVN1Yih0aGlzKTsKICAgICAgfQogICAgfQogICAgdmFyIHRtcCA9IHRoaXMuZGVwSWRzOwogICAgdGhpcy5kZXBJZHMgPSB0aGlzLm5ld0RlcElkczsKICAgIHRoaXMubmV3RGVwSWRzID0gdG1wOwogICAgdGhpcy5uZXdEZXBJZHMuY2xlYXIoKTsKICAgIHRtcCA9IHRoaXMuZGVwczsKICAgIHRoaXMuZGVwcyA9IHRoaXMubmV3RGVwczsKICAgIHRoaXMubmV3RGVwcyA9IHRtcDsKICAgIHRoaXMubmV3RGVwcy5sZW5ndGggPSAwOwogIH07CgogIC8qKgogICAqIFN1YnNjcmliZXIgaW50ZXJmYWNlLgogICAqIFdpbGwgYmUgY2FsbGVkIHdoZW4gYSBkZXBlbmRlbmN5IGNoYW5nZXMuCiAgICovCiAgV2F0Y2hlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlICgpIHsKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovCiAgICBpZiAodGhpcy5sYXp5KSB7CiAgICAgIHRoaXMuZGlydHkgPSB0cnVlOwogICAgfSBlbHNlIGlmICh0aGlzLnN5bmMpIHsKICAgICAgdGhpcy5ydW4oKTsKICAgIH0gZWxzZSB7CiAgICAgIHF1ZXVlV2F0Y2hlcih0aGlzKTsKICAgIH0KICB9OwoKICAvKioKICAgKiBTY2hlZHVsZXIgam9iIGludGVyZmFjZS4KICAgKiBXaWxsIGJlIGNhbGxlZCBieSB0aGUgc2NoZWR1bGVyLgogICAqLwogIFdhdGNoZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uIHJ1biAoKSB7CiAgICBpZiAodGhpcy5hY3RpdmUpIHsKICAgICAgdmFyIHZhbHVlID0gdGhpcy5nZXQoKTsKICAgICAgaWYgKAogICAgICAgIHZhbHVlICE9PSB0aGlzLnZhbHVlIHx8CiAgICAgICAgLy8gRGVlcCB3YXRjaGVycyBhbmQgd2F0Y2hlcnMgb24gT2JqZWN0L0FycmF5cyBzaG91bGQgZmlyZSBldmVuCiAgICAgICAgLy8gd2hlbiB0aGUgdmFsdWUgaXMgdGhlIHNhbWUsIGJlY2F1c2UgdGhlIHZhbHVlIG1heQogICAgICAgIC8vIGhhdmUgbXV0YXRlZC4KICAgICAgICBpc09iamVjdCh2YWx1ZSkgfHwKICAgICAgICB0aGlzLmRlZXAKICAgICAgKSB7CiAgICAgICAgLy8gc2V0IG5ldyB2YWx1ZQogICAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWU7CiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlOwogICAgICAgIGlmICh0aGlzLnVzZXIpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBoYW5kbGVFcnJvcihlLCB0aGlzLnZtLCAoImNhbGxiYWNrIGZvciB3YXRjaGVyIFwiIiArICh0aGlzLmV4cHJlc3Npb24pICsgIlwiIikpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy52bSwgdmFsdWUsIG9sZFZhbHVlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwoKICAvKioKICAgKiBFdmFsdWF0ZSB0aGUgdmFsdWUgb2YgdGhlIHdhdGNoZXIuCiAgICogVGhpcyBvbmx5IGdldHMgY2FsbGVkIGZvciBsYXp5IHdhdGNoZXJzLgogICAqLwogIFdhdGNoZXIucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24gZXZhbHVhdGUgKCkgewogICAgdGhpcy52YWx1ZSA9IHRoaXMuZ2V0KCk7CiAgICB0aGlzLmRpcnR5ID0gZmFsc2U7CiAgfTsKCiAgLyoqCiAgICogRGVwZW5kIG9uIGFsbCBkZXBzIGNvbGxlY3RlZCBieSB0aGlzIHdhdGNoZXIuCiAgICovCiAgV2F0Y2hlci5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gZGVwZW5kICgpIHsKICAgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDsKICAgIHdoaWxlIChpLS0pIHsKICAgICAgdGhpcy5kZXBzW2ldLmRlcGVuZCgpOwogICAgfQogIH07CgogIC8qKgogICAqIFJlbW92ZSBzZWxmIGZyb20gYWxsIGRlcGVuZGVuY2llcycgc3Vic2NyaWJlciBsaXN0LgogICAqLwogIFdhdGNoZXIucHJvdG90eXBlLnRlYXJkb3duID0gZnVuY3Rpb24gdGVhcmRvd24gKCkgewogICAgaWYgKHRoaXMuYWN0aXZlKSB7CiAgICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gdm0ncyB3YXRjaGVyIGxpc3QKICAgICAgLy8gdGhpcyBpcyBhIHNvbWV3aGF0IGV4cGVuc2l2ZSBvcGVyYXRpb24gc28gd2Ugc2tpcCBpdAogICAgICAvLyBpZiB0aGUgdm0gaXMgYmVpbmcgZGVzdHJveWVkLgogICAgICBpZiAoIXRoaXMudm0uX2lzQmVpbmdEZXN0cm95ZWQpIHsKICAgICAgICByZW1vdmUodGhpcy52bS5fd2F0Y2hlcnMsIHRoaXMpOwogICAgICB9CiAgICAgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDsKICAgICAgd2hpbGUgKGktLSkgewogICAgICAgIHRoaXMuZGVwc1tpXS5yZW1vdmVTdWIodGhpcyk7CiAgICAgIH0KICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTsKICAgIH0KICB9OwoKICAvKiAgKi8KCiAgdmFyIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbiA9IHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICBnZXQ6IG5vb3AsCiAgICBzZXQ6IG5vb3AKICB9OwoKICBmdW5jdGlvbiBwcm94eSAodGFyZ2V0LCBzb3VyY2VLZXksIGtleSkgewogICAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLmdldCA9IGZ1bmN0aW9uIHByb3h5R2V0dGVyICgpIHsKICAgICAgcmV0dXJuIHRoaXNbc291cmNlS2V5XVtrZXldCiAgICB9OwogICAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLnNldCA9IGZ1bmN0aW9uIHByb3h5U2V0dGVyICh2YWwpIHsKICAgICAgdGhpc1tzb3VyY2VLZXldW2tleV0gPSB2YWw7CiAgICB9OwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24pOwogIH0KCiAgZnVuY3Rpb24gaW5pdFN0YXRlICh2bSkgewogICAgdm0uX3dhdGNoZXJzID0gW107CiAgICB2YXIgb3B0cyA9IHZtLiRvcHRpb25zOwogICAgaWYgKG9wdHMucHJvcHMpIHsgaW5pdFByb3BzKHZtLCBvcHRzLnByb3BzKTsgfQogICAgaWYgKG9wdHMubWV0aG9kcykgeyBpbml0TWV0aG9kcyh2bSwgb3B0cy5tZXRob2RzKTsgfQogICAgaWYgKG9wdHMuZGF0YSkgewogICAgICBpbml0RGF0YSh2bSk7CiAgICB9IGVsc2UgewogICAgICBvYnNlcnZlKHZtLl9kYXRhID0ge30sIHRydWUgLyogYXNSb290RGF0YSAqLyk7CiAgICB9CiAgICBpZiAob3B0cy5jb21wdXRlZCkgeyBpbml0Q29tcHV0ZWQodm0sIG9wdHMuY29tcHV0ZWQpOyB9CiAgICBpZiAob3B0cy53YXRjaCAmJiBvcHRzLndhdGNoICE9PSBuYXRpdmVXYXRjaCkgewogICAgICBpbml0V2F0Y2godm0sIG9wdHMud2F0Y2gpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gaW5pdFByb3BzICh2bSwgcHJvcHNPcHRpb25zKSB7CiAgICB2YXIgcHJvcHNEYXRhID0gdm0uJG9wdGlvbnMucHJvcHNEYXRhIHx8IHt9OwogICAgdmFyIHByb3BzID0gdm0uX3Byb3BzID0ge307CiAgICAvLyBjYWNoZSBwcm9wIGtleXMgc28gdGhhdCBmdXR1cmUgcHJvcHMgdXBkYXRlcyBjYW4gaXRlcmF0ZSB1c2luZyBBcnJheQogICAgLy8gaW5zdGVhZCBvZiBkeW5hbWljIG9iamVjdCBrZXkgZW51bWVyYXRpb24uCiAgICB2YXIga2V5cyA9IHZtLiRvcHRpb25zLl9wcm9wS2V5cyA9IFtdOwogICAgdmFyIGlzUm9vdCA9ICF2bS4kcGFyZW50OwogICAgLy8gcm9vdCBpbnN0YW5jZSBwcm9wcyBzaG91bGQgYmUgY29udmVydGVkCiAgICBpZiAoIWlzUm9vdCkgewogICAgICB0b2dnbGVPYnNlcnZpbmcoZmFsc2UpOwogICAgfQogICAgdmFyIGxvb3AgPSBmdW5jdGlvbiAoIGtleSApIHsKICAgICAga2V5cy5wdXNoKGtleSk7CiAgICAgIHZhciB2YWx1ZSA9IHZhbGlkYXRlUHJvcChrZXksIHByb3BzT3B0aW9ucywgcHJvcHNEYXRhLCB2bSk7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovCiAgICAgIHsKICAgICAgICB2YXIgaHlwaGVuYXRlZEtleSA9IGh5cGhlbmF0ZShrZXkpOwogICAgICAgIGlmIChpc1Jlc2VydmVkQXR0cmlidXRlKGh5cGhlbmF0ZWRLZXkpIHx8CiAgICAgICAgICAgIGNvbmZpZy5pc1Jlc2VydmVkQXR0cihoeXBoZW5hdGVkS2V5KSkgewogICAgICAgICAgd2FybigKICAgICAgICAgICAgKCJcIiIgKyBoeXBoZW5hdGVkS2V5ICsgIlwiIGlzIGEgcmVzZXJ2ZWQgYXR0cmlidXRlIGFuZCBjYW5ub3QgYmUgdXNlZCBhcyBjb21wb25lbnQgcHJvcC4iKSwKICAgICAgICAgICAgdm0KICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGRlZmluZVJlYWN0aXZlJCQxKHByb3BzLCBrZXksIHZhbHVlLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoIWlzUm9vdCAmJiAhaXNVcGRhdGluZ0NoaWxkQ29tcG9uZW50KSB7CiAgICAgICAgICAgIHdhcm4oCiAgICAgICAgICAgICAgIkF2b2lkIG11dGF0aW5nIGEgcHJvcCBkaXJlY3RseSBzaW5jZSB0aGUgdmFsdWUgd2lsbCBiZSAiICsKICAgICAgICAgICAgICAib3ZlcndyaXR0ZW4gd2hlbmV2ZXIgdGhlIHBhcmVudCBjb21wb25lbnQgcmUtcmVuZGVycy4gIiArCiAgICAgICAgICAgICAgIkluc3RlYWQsIHVzZSBhIGRhdGEgb3IgY29tcHV0ZWQgcHJvcGVydHkgYmFzZWQgb24gdGhlIHByb3AncyAiICsKICAgICAgICAgICAgICAidmFsdWUuIFByb3AgYmVpbmcgbXV0YXRlZDogXCIiICsga2V5ICsgIlwiIiwKICAgICAgICAgICAgICB2bQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICAgIC8vIHN0YXRpYyBwcm9wcyBhcmUgYWxyZWFkeSBwcm94aWVkIG9uIHRoZSBjb21wb25lbnQncyBwcm90b3R5cGUKICAgICAgLy8gZHVyaW5nIFZ1ZS5leHRlbmQoKS4gV2Ugb25seSBuZWVkIHRvIHByb3h5IHByb3BzIGRlZmluZWQgYXQKICAgICAgLy8gaW5zdGFudGlhdGlvbiBoZXJlLgogICAgICBpZiAoIShrZXkgaW4gdm0pKSB7CiAgICAgICAgcHJveHkodm0sICJfcHJvcHMiLCBrZXkpOwogICAgICB9CiAgICB9OwoKICAgIGZvciAodmFyIGtleSBpbiBwcm9wc09wdGlvbnMpIGxvb3AoIGtleSApOwogICAgdG9nZ2xlT2JzZXJ2aW5nKHRydWUpOwogIH0KCiAgZnVuY3Rpb24gaW5pdERhdGEgKHZtKSB7CiAgICB2YXIgZGF0YSA9IHZtLiRvcHRpb25zLmRhdGE7CiAgICBkYXRhID0gdm0uX2RhdGEgPSB0eXBlb2YgZGF0YSA9PT0gJ2Z1bmN0aW9uJwogICAgICA/IGdldERhdGEoZGF0YSwgdm0pCiAgICAgIDogZGF0YSB8fCB7fTsKICAgIGlmICghaXNQbGFpbk9iamVjdChkYXRhKSkgewogICAgICBkYXRhID0ge307CiAgICAgIHdhcm4oCiAgICAgICAgJ2RhdGEgZnVuY3Rpb25zIHNob3VsZCByZXR1cm4gYW4gb2JqZWN0OlxuJyArCiAgICAgICAgJ2h0dHBzOi8vdnVlanMub3JnL3YyL2d1aWRlL2NvbXBvbmVudHMuaHRtbCNkYXRhLU11c3QtQmUtYS1GdW5jdGlvbicsCiAgICAgICAgdm0KICAgICAgKTsKICAgIH0KICAgIC8vIHByb3h5IGRhdGEgb24gaW5zdGFuY2UKICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7CiAgICB2YXIgcHJvcHMgPSB2bS4kb3B0aW9ucy5wcm9wczsKICAgIHZhciBtZXRob2RzID0gdm0uJG9wdGlvbnMubWV0aG9kczsKICAgIHZhciBpID0ga2V5cy5sZW5ndGg7CiAgICB3aGlsZSAoaS0tKSB7CiAgICAgIHZhciBrZXkgPSBrZXlzW2ldOwogICAgICB7CiAgICAgICAgaWYgKG1ldGhvZHMgJiYgaGFzT3duKG1ldGhvZHMsIGtleSkpIHsKICAgICAgICAgIHdhcm4oCiAgICAgICAgICAgICgiTWV0aG9kIFwiIiArIGtleSArICJcIiBoYXMgYWxyZWFkeSBiZWVuIGRlZmluZWQgYXMgYSBkYXRhIHByb3BlcnR5LiIpLAogICAgICAgICAgICB2bQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHByb3BzICYmIGhhc093bihwcm9wcywga2V5KSkgewogICAgICAgIHdhcm4oCiAgICAgICAgICAiVGhlIGRhdGEgcHJvcGVydHkgXCIiICsga2V5ICsgIlwiIGlzIGFscmVhZHkgZGVjbGFyZWQgYXMgYSBwcm9wLiAiICsKICAgICAgICAgICJVc2UgcHJvcCBkZWZhdWx0IHZhbHVlIGluc3RlYWQuIiwKICAgICAgICAgIHZtCiAgICAgICAgKTsKICAgICAgfSBlbHNlIGlmICghaXNSZXNlcnZlZChrZXkpKSB7CiAgICAgICAgcHJveHkodm0sICJfZGF0YSIsIGtleSk7CiAgICAgIH0KICAgIH0KICAgIC8vIG9ic2VydmUgZGF0YQogICAgb2JzZXJ2ZShkYXRhLCB0cnVlIC8qIGFzUm9vdERhdGEgKi8pOwogIH0KCiAgZnVuY3Rpb24gZ2V0RGF0YSAoZGF0YSwgdm0pIHsKICAgIC8vICM3NTczIGRpc2FibGUgZGVwIGNvbGxlY3Rpb24gd2hlbiBpbnZva2luZyBkYXRhIGdldHRlcnMKICAgIHB1c2hUYXJnZXQoKTsKICAgIHRyeSB7CiAgICAgIHJldHVybiBkYXRhLmNhbGwodm0sIHZtKQogICAgfSBjYXRjaCAoZSkgewogICAgICBoYW5kbGVFcnJvcihlLCB2bSwgImRhdGEoKSIpOwogICAgICByZXR1cm4ge30KICAgIH0gZmluYWxseSB7CiAgICAgIHBvcFRhcmdldCgpOwogICAgfQogIH0KCiAgdmFyIGNvbXB1dGVkV2F0Y2hlck9wdGlvbnMgPSB7IGxhenk6IHRydWUgfTsKCiAgZnVuY3Rpb24gaW5pdENvbXB1dGVkICh2bSwgY29tcHV0ZWQpIHsKICAgIC8vICRmbG93LWRpc2FibGUtbGluZQogICAgdmFyIHdhdGNoZXJzID0gdm0uX2NvbXB1dGVkV2F0Y2hlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgLy8gY29tcHV0ZWQgcHJvcGVydGllcyBhcmUganVzdCBnZXR0ZXJzIGR1cmluZyBTU1IKICAgIHZhciBpc1NTUiA9IGlzU2VydmVyUmVuZGVyaW5nKCk7CgogICAgZm9yICh2YXIga2V5IGluIGNvbXB1dGVkKSB7CiAgICAgIHZhciB1c2VyRGVmID0gY29tcHV0ZWRba2V5XTsKICAgICAgdmFyIGdldHRlciA9IHR5cGVvZiB1c2VyRGVmID09PSAnZnVuY3Rpb24nID8gdXNlckRlZiA6IHVzZXJEZWYuZ2V0OwogICAgICBpZiAoZ2V0dGVyID09IG51bGwpIHsKICAgICAgICB3YXJuKAogICAgICAgICAgKCJHZXR0ZXIgaXMgbWlzc2luZyBmb3IgY29tcHV0ZWQgcHJvcGVydHkgXCIiICsga2V5ICsgIlwiLiIpLAogICAgICAgICAgdm0KICAgICAgICApOwogICAgICB9CgogICAgICBpZiAoIWlzU1NSKSB7CiAgICAgICAgLy8gY3JlYXRlIGludGVybmFsIHdhdGNoZXIgZm9yIHRoZSBjb21wdXRlZCBwcm9wZXJ0eS4KICAgICAgICB3YXRjaGVyc1trZXldID0gbmV3IFdhdGNoZXIoCiAgICAgICAgICB2bSwKICAgICAgICAgIGdldHRlciB8fCBub29wLAogICAgICAgICAgbm9vcCwKICAgICAgICAgIGNvbXB1dGVkV2F0Y2hlck9wdGlvbnMKICAgICAgICApOwogICAgICB9CgogICAgICAvLyBjb21wb25lbnQtZGVmaW5lZCBjb21wdXRlZCBwcm9wZXJ0aWVzIGFyZSBhbHJlYWR5IGRlZmluZWQgb24gdGhlCiAgICAgIC8vIGNvbXBvbmVudCBwcm90b3R5cGUuIFdlIG9ubHkgbmVlZCB0byBkZWZpbmUgY29tcHV0ZWQgcHJvcGVydGllcyBkZWZpbmVkCiAgICAgIC8vIGF0IGluc3RhbnRpYXRpb24gaGVyZS4KICAgICAgaWYgKCEoa2V5IGluIHZtKSkgewogICAgICAgIGRlZmluZUNvbXB1dGVkKHZtLCBrZXksIHVzZXJEZWYpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChrZXkgaW4gdm0uJGRhdGEpIHsKICAgICAgICAgIHdhcm4oKCJUaGUgY29tcHV0ZWQgcHJvcGVydHkgXCIiICsga2V5ICsgIlwiIGlzIGFscmVhZHkgZGVmaW5lZCBpbiBkYXRhLiIpLCB2bSk7CiAgICAgICAgfSBlbHNlIGlmICh2bS4kb3B0aW9ucy5wcm9wcyAmJiBrZXkgaW4gdm0uJG9wdGlvbnMucHJvcHMpIHsKICAgICAgICAgIHdhcm4oKCJUaGUgY29tcHV0ZWQgcHJvcGVydHkgXCIiICsga2V5ICsgIlwiIGlzIGFscmVhZHkgZGVmaW5lZCBhcyBhIHByb3AuIiksIHZtKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGRlZmluZUNvbXB1dGVkICgKICAgIHRhcmdldCwKICAgIGtleSwKICAgIHVzZXJEZWYKICApIHsKICAgIHZhciBzaG91bGRDYWNoZSA9ICFpc1NlcnZlclJlbmRlcmluZygpOwogICAgaWYgKHR5cGVvZiB1c2VyRGVmID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5nZXQgPSBzaG91bGRDYWNoZQogICAgICAgID8gY3JlYXRlQ29tcHV0ZWRHZXR0ZXIoa2V5KQogICAgICAgIDogY3JlYXRlR2V0dGVySW52b2tlcih1c2VyRGVmKTsKICAgICAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLnNldCA9IG5vb3A7CiAgICB9IGVsc2UgewogICAgICBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uZ2V0ID0gdXNlckRlZi5nZXQKICAgICAgICA/IHNob3VsZENhY2hlICYmIHVzZXJEZWYuY2FjaGUgIT09IGZhbHNlCiAgICAgICAgICA/IGNyZWF0ZUNvbXB1dGVkR2V0dGVyKGtleSkKICAgICAgICAgIDogY3JlYXRlR2V0dGVySW52b2tlcih1c2VyRGVmLmdldCkKICAgICAgICA6IG5vb3A7CiAgICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5zZXQgPSB1c2VyRGVmLnNldCB8fCBub29wOwogICAgfQogICAgaWYgKHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5zZXQgPT09IG5vb3ApIHsKICAgICAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLnNldCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB3YXJuKAogICAgICAgICAgKCJDb21wdXRlZCBwcm9wZXJ0eSBcIiIgKyBrZXkgKyAiXCIgd2FzIGFzc2lnbmVkIHRvIGJ1dCBpdCBoYXMgbm8gc2V0dGVyLiIpLAogICAgICAgICAgdGhpcwogICAgICAgICk7CiAgICAgIH07CiAgICB9CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbik7CiAgfQoKICBmdW5jdGlvbiBjcmVhdGVDb21wdXRlZEdldHRlciAoa2V5KSB7CiAgICByZXR1cm4gZnVuY3Rpb24gY29tcHV0ZWRHZXR0ZXIgKCkgewogICAgICB2YXIgd2F0Y2hlciA9IHRoaXMuX2NvbXB1dGVkV2F0Y2hlcnMgJiYgdGhpcy5fY29tcHV0ZWRXYXRjaGVyc1trZXldOwogICAgICBpZiAod2F0Y2hlcikgewogICAgICAgIGlmICh3YXRjaGVyLmRpcnR5KSB7CiAgICAgICAgICB3YXRjaGVyLmV2YWx1YXRlKCk7CiAgICAgICAgfQogICAgICAgIGlmIChEZXAudGFyZ2V0KSB7CiAgICAgICAgICB3YXRjaGVyLmRlcGVuZCgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gd2F0Y2hlci52YWx1ZQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjcmVhdGVHZXR0ZXJJbnZva2VyKGZuKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gY29tcHV0ZWRHZXR0ZXIgKCkgewogICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCB0aGlzKQogICAgfQogIH0KCiAgZnVuY3Rpb24gaW5pdE1ldGhvZHMgKHZtLCBtZXRob2RzKSB7CiAgICB2YXIgcHJvcHMgPSB2bS4kb3B0aW9ucy5wcm9wczsKICAgIGZvciAodmFyIGtleSBpbiBtZXRob2RzKSB7CiAgICAgIHsKICAgICAgICBpZiAodHlwZW9mIG1ldGhvZHNba2V5XSAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgd2FybigKICAgICAgICAgICAgIk1ldGhvZCBcIiIgKyBrZXkgKyAiXCIgaGFzIHR5cGUgXCIiICsgKHR5cGVvZiBtZXRob2RzW2tleV0pICsgIlwiIGluIHRoZSBjb21wb25lbnQgZGVmaW5pdGlvbi4gIiArCiAgICAgICAgICAgICJEaWQgeW91IHJlZmVyZW5jZSB0aGUgZnVuY3Rpb24gY29ycmVjdGx5PyIsCiAgICAgICAgICAgIHZtCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBpZiAocHJvcHMgJiYgaGFzT3duKHByb3BzLCBrZXkpKSB7CiAgICAgICAgICB3YXJuKAogICAgICAgICAgICAoIk1ldGhvZCBcIiIgKyBrZXkgKyAiXCIgaGFzIGFscmVhZHkgYmVlbiBkZWZpbmVkIGFzIGEgcHJvcC4iKSwKICAgICAgICAgICAgdm0KICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGlmICgoa2V5IGluIHZtKSAmJiBpc1Jlc2VydmVkKGtleSkpIHsKICAgICAgICAgIHdhcm4oCiAgICAgICAgICAgICJNZXRob2QgXCIiICsga2V5ICsgIlwiIGNvbmZsaWN0cyB3aXRoIGFuIGV4aXN0aW5nIFZ1ZSBpbnN0YW5jZSBtZXRob2QuICIgKwogICAgICAgICAgICAiQXZvaWQgZGVmaW5pbmcgY29tcG9uZW50IG1ldGhvZHMgdGhhdCBzdGFydCB3aXRoIF8gb3IgJC4iCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfQogICAgICB2bVtrZXldID0gdHlwZW9mIG1ldGhvZHNba2V5XSAhPT0gJ2Z1bmN0aW9uJyA/IG5vb3AgOiBiaW5kKG1ldGhvZHNba2V5XSwgdm0pOwogICAgfQogIH0KCiAgZnVuY3Rpb24gaW5pdFdhdGNoICh2bSwgd2F0Y2gpIHsKICAgIGZvciAodmFyIGtleSBpbiB3YXRjaCkgewogICAgICB2YXIgaGFuZGxlciA9IHdhdGNoW2tleV07CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGhhbmRsZXIpKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoYW5kbGVyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBjcmVhdGVXYXRjaGVyKHZtLCBrZXksIGhhbmRsZXJbaV0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBjcmVhdGVXYXRjaGVyKHZtLCBrZXksIGhhbmRsZXIpOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjcmVhdGVXYXRjaGVyICgKICAgIHZtLAogICAgZXhwT3JGbiwKICAgIGhhbmRsZXIsCiAgICBvcHRpb25zCiAgKSB7CiAgICBpZiAoaXNQbGFpbk9iamVjdChoYW5kbGVyKSkgewogICAgICBvcHRpb25zID0gaGFuZGxlcjsKICAgICAgaGFuZGxlciA9IGhhbmRsZXIuaGFuZGxlcjsKICAgIH0KICAgIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gJ3N0cmluZycpIHsKICAgICAgaGFuZGxlciA9IHZtW2hhbmRsZXJdOwogICAgfQogICAgcmV0dXJuIHZtLiR3YXRjaChleHBPckZuLCBoYW5kbGVyLCBvcHRpb25zKQogIH0KCiAgZnVuY3Rpb24gc3RhdGVNaXhpbiAoVnVlKSB7CiAgICAvLyBmbG93IHNvbWVob3cgaGFzIHByb2JsZW1zIHdpdGggZGlyZWN0bHkgZGVjbGFyZWQgZGVmaW5pdGlvbiBvYmplY3QKICAgIC8vIHdoZW4gdXNpbmcgT2JqZWN0LmRlZmluZVByb3BlcnR5LCBzbyB3ZSBoYXZlIHRvIHByb2NlZHVyYWxseSBidWlsZCB1cAogICAgLy8gdGhlIG9iamVjdCBoZXJlLgogICAgdmFyIGRhdGFEZWYgPSB7fTsKICAgIGRhdGFEZWYuZ2V0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fZGF0YSB9OwogICAgdmFyIHByb3BzRGVmID0ge307CiAgICBwcm9wc0RlZi5nZXQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9wcm9wcyB9OwogICAgewogICAgICBkYXRhRGVmLnNldCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB3YXJuKAogICAgICAgICAgJ0F2b2lkIHJlcGxhY2luZyBpbnN0YW5jZSByb290ICRkYXRhLiAnICsKICAgICAgICAgICdVc2UgbmVzdGVkIGRhdGEgcHJvcGVydGllcyBpbnN0ZWFkLicsCiAgICAgICAgICB0aGlzCiAgICAgICAgKTsKICAgICAgfTsKICAgICAgcHJvcHNEZWYuc2V0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHdhcm4oIiRwcm9wcyBpcyByZWFkb25seS4iLCB0aGlzKTsKICAgICAgfTsKICAgIH0KICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJGRhdGEnLCBkYXRhRGVmKTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJHByb3BzJywgcHJvcHNEZWYpOwoKICAgIFZ1ZS5wcm90b3R5cGUuJHNldCA9IHNldDsKICAgIFZ1ZS5wcm90b3R5cGUuJGRlbGV0ZSA9IGRlbDsKCiAgICBWdWUucHJvdG90eXBlLiR3YXRjaCA9IGZ1bmN0aW9uICgKICAgICAgZXhwT3JGbiwKICAgICAgY2IsCiAgICAgIG9wdGlvbnMKICAgICkgewogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICBpZiAoaXNQbGFpbk9iamVjdChjYikpIHsKICAgICAgICByZXR1cm4gY3JlYXRlV2F0Y2hlcih2bSwgZXhwT3JGbiwgY2IsIG9wdGlvbnMpCiAgICAgIH0KICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICAgIG9wdGlvbnMudXNlciA9IHRydWU7CiAgICAgIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCBvcHRpb25zKTsKICAgICAgaWYgKG9wdGlvbnMuaW1tZWRpYXRlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNiLmNhbGwodm0sIHdhdGNoZXIudmFsdWUpOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBoYW5kbGVFcnJvcihlcnJvciwgdm0sICgiY2FsbGJhY2sgZm9yIGltbWVkaWF0ZSB3YXRjaGVyIFwiIiArICh3YXRjaGVyLmV4cHJlc3Npb24pICsgIlwiIikpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gZnVuY3Rpb24gdW53YXRjaEZuICgpIHsKICAgICAgICB3YXRjaGVyLnRlYXJkb3duKCk7CiAgICAgIH0KICAgIH07CiAgfQoKICAvKiAgKi8KCiAgdmFyIHVpZCQzID0gMDsKCiAgZnVuY3Rpb24gaW5pdE1peGluIChWdWUpIHsKICAgIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykgewogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICAvLyBhIHVpZAogICAgICB2bS5fdWlkID0gdWlkJDMrKzsKCiAgICAgIHZhciBzdGFydFRhZywgZW5kVGFnOwogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgaWYgKGNvbmZpZy5wZXJmb3JtYW5jZSAmJiBtYXJrKSB7CiAgICAgICAgc3RhcnRUYWcgPSAidnVlLXBlcmYtc3RhcnQ6IiArICh2bS5fdWlkKTsKICAgICAgICBlbmRUYWcgPSAidnVlLXBlcmYtZW5kOiIgKyAodm0uX3VpZCk7CiAgICAgICAgbWFyayhzdGFydFRhZyk7CiAgICAgIH0KCiAgICAgIC8vIGEgZmxhZyB0byBhdm9pZCB0aGlzIGJlaW5nIG9ic2VydmVkCiAgICAgIHZtLl9pc1Z1ZSA9IHRydWU7CiAgICAgIC8vIG1lcmdlIG9wdGlvbnMKICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5faXNDb21wb25lbnQpIHsKICAgICAgICAvLyBvcHRpbWl6ZSBpbnRlcm5hbCBjb21wb25lbnQgaW5zdGFudGlhdGlvbgogICAgICAgIC8vIHNpbmNlIGR5bmFtaWMgb3B0aW9ucyBtZXJnaW5nIGlzIHByZXR0eSBzbG93LCBhbmQgbm9uZSBvZiB0aGUKICAgICAgICAvLyBpbnRlcm5hbCBjb21wb25lbnQgb3B0aW9ucyBuZWVkcyBzcGVjaWFsIHRyZWF0bWVudC4KICAgICAgICBpbml0SW50ZXJuYWxDb21wb25lbnQodm0sIG9wdGlvbnMpOwogICAgICB9IGVsc2UgewogICAgICAgIHZtLiRvcHRpb25zID0gbWVyZ2VPcHRpb25zKAogICAgICAgICAgcmVzb2x2ZUNvbnN0cnVjdG9yT3B0aW9ucyh2bS5jb25zdHJ1Y3RvciksCiAgICAgICAgICBvcHRpb25zIHx8IHt9LAogICAgICAgICAgdm0KICAgICAgICApOwogICAgICB9CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovCiAgICAgIHsKICAgICAgICBpbml0UHJveHkodm0pOwogICAgICB9CiAgICAgIC8vIGV4cG9zZSByZWFsIHNlbGYKICAgICAgdm0uX3NlbGYgPSB2bTsKICAgICAgaW5pdExpZmVjeWNsZSh2bSk7CiAgICAgIGluaXRFdmVudHModm0pOwogICAgICBpbml0UmVuZGVyKHZtKTsKICAgICAgY2FsbEhvb2sodm0sICdiZWZvcmVDcmVhdGUnKTsKICAgICAgaW5pdEluamVjdGlvbnModm0pOyAvLyByZXNvbHZlIGluamVjdGlvbnMgYmVmb3JlIGRhdGEvcHJvcHMKICAgICAgaW5pdFN0YXRlKHZtKTsKICAgICAgaW5pdFByb3ZpZGUodm0pOyAvLyByZXNvbHZlIHByb3ZpZGUgYWZ0ZXIgZGF0YS9wcm9wcwogICAgICBjYWxsSG9vayh2bSwgJ2NyZWF0ZWQnKTsKCiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICBpZiAoY29uZmlnLnBlcmZvcm1hbmNlICYmIG1hcmspIHsKICAgICAgICB2bS5fbmFtZSA9IGZvcm1hdENvbXBvbmVudE5hbWUodm0sIGZhbHNlKTsKICAgICAgICBtYXJrKGVuZFRhZyk7CiAgICAgICAgbWVhc3VyZSgoInZ1ZSAiICsgKHZtLl9uYW1lKSArICIgaW5pdCIpLCBzdGFydFRhZywgZW5kVGFnKTsKICAgICAgfQoKICAgICAgaWYgKHZtLiRvcHRpb25zLmVsKSB7CiAgICAgICAgdm0uJG1vdW50KHZtLiRvcHRpb25zLmVsKTsKICAgICAgfQogICAgfTsKICB9CgogIGZ1bmN0aW9uIGluaXRJbnRlcm5hbENvbXBvbmVudCAodm0sIG9wdGlvbnMpIHsKICAgIHZhciBvcHRzID0gdm0uJG9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKHZtLmNvbnN0cnVjdG9yLm9wdGlvbnMpOwogICAgLy8gZG9pbmcgdGhpcyBiZWNhdXNlIGl0J3MgZmFzdGVyIHRoYW4gZHluYW1pYyBlbnVtZXJhdGlvbi4KICAgIHZhciBwYXJlbnRWbm9kZSA9IG9wdGlvbnMuX3BhcmVudFZub2RlOwogICAgb3B0cy5wYXJlbnQgPSBvcHRpb25zLnBhcmVudDsKICAgIG9wdHMuX3BhcmVudFZub2RlID0gcGFyZW50Vm5vZGU7CgogICAgdmFyIHZub2RlQ29tcG9uZW50T3B0aW9ucyA9IHBhcmVudFZub2RlLmNvbXBvbmVudE9wdGlvbnM7CiAgICBvcHRzLnByb3BzRGF0YSA9IHZub2RlQ29tcG9uZW50T3B0aW9ucy5wcm9wc0RhdGE7CiAgICBvcHRzLl9wYXJlbnRMaXN0ZW5lcnMgPSB2bm9kZUNvbXBvbmVudE9wdGlvbnMubGlzdGVuZXJzOwogICAgb3B0cy5fcmVuZGVyQ2hpbGRyZW4gPSB2bm9kZUNvbXBvbmVudE9wdGlvbnMuY2hpbGRyZW47CiAgICBvcHRzLl9jb21wb25lbnRUYWcgPSB2bm9kZUNvbXBvbmVudE9wdGlvbnMudGFnOwoKICAgIGlmIChvcHRpb25zLnJlbmRlcikgewogICAgICBvcHRzLnJlbmRlciA9IG9wdGlvbnMucmVuZGVyOwogICAgICBvcHRzLnN0YXRpY1JlbmRlckZucyA9IG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zOwogICAgfQogIH0KCiAgZnVuY3Rpb24gcmVzb2x2ZUNvbnN0cnVjdG9yT3B0aW9ucyAoQ3RvcikgewogICAgdmFyIG9wdGlvbnMgPSBDdG9yLm9wdGlvbnM7CiAgICBpZiAoQ3Rvci5zdXBlcikgewogICAgICB2YXIgc3VwZXJPcHRpb25zID0gcmVzb2x2ZUNvbnN0cnVjdG9yT3B0aW9ucyhDdG9yLnN1cGVyKTsKICAgICAgdmFyIGNhY2hlZFN1cGVyT3B0aW9ucyA9IEN0b3Iuc3VwZXJPcHRpb25zOwogICAgICBpZiAoc3VwZXJPcHRpb25zICE9PSBjYWNoZWRTdXBlck9wdGlvbnMpIHsKICAgICAgICAvLyBzdXBlciBvcHRpb24gY2hhbmdlZCwKICAgICAgICAvLyBuZWVkIHRvIHJlc29sdmUgbmV3IG9wdGlvbnMuCiAgICAgICAgQ3Rvci5zdXBlck9wdGlvbnMgPSBzdXBlck9wdGlvbnM7CiAgICAgICAgLy8gY2hlY2sgaWYgdGhlcmUgYXJlIGFueSBsYXRlLW1vZGlmaWVkL2F0dGFjaGVkIG9wdGlvbnMgKCM0OTc2KQogICAgICAgIHZhciBtb2RpZmllZE9wdGlvbnMgPSByZXNvbHZlTW9kaWZpZWRPcHRpb25zKEN0b3IpOwogICAgICAgIC8vIHVwZGF0ZSBiYXNlIGV4dGVuZCBvcHRpb25zCiAgICAgICAgaWYgKG1vZGlmaWVkT3B0aW9ucykgewogICAgICAgICAgZXh0ZW5kKEN0b3IuZXh0ZW5kT3B0aW9ucywgbW9kaWZpZWRPcHRpb25zKTsKICAgICAgICB9CiAgICAgICAgb3B0aW9ucyA9IEN0b3Iub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhzdXBlck9wdGlvbnMsIEN0b3IuZXh0ZW5kT3B0aW9ucyk7CiAgICAgICAgaWYgKG9wdGlvbnMubmFtZSkgewogICAgICAgICAgb3B0aW9ucy5jb21wb25lbnRzW29wdGlvbnMubmFtZV0gPSBDdG9yOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIG9wdGlvbnMKICB9CgogIGZ1bmN0aW9uIHJlc29sdmVNb2RpZmllZE9wdGlvbnMgKEN0b3IpIHsKICAgIHZhciBtb2RpZmllZDsKICAgIHZhciBsYXRlc3QgPSBDdG9yLm9wdGlvbnM7CiAgICB2YXIgc2VhbGVkID0gQ3Rvci5zZWFsZWRPcHRpb25zOwogICAgZm9yICh2YXIga2V5IGluIGxhdGVzdCkgewogICAgICBpZiAobGF0ZXN0W2tleV0gIT09IHNlYWxlZFtrZXldKSB7CiAgICAgICAgaWYgKCFtb2RpZmllZCkgeyBtb2RpZmllZCA9IHt9OyB9CiAgICAgICAgbW9kaWZpZWRba2V5XSA9IGxhdGVzdFtrZXldOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gbW9kaWZpZWQKICB9CgogIGZ1bmN0aW9uIFZ1ZSAob3B0aW9ucykgewogICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFZ1ZSkKICAgICkgewogICAgICB3YXJuKCdWdWUgaXMgYSBjb25zdHJ1Y3RvciBhbmQgc2hvdWxkIGJlIGNhbGxlZCB3aXRoIHRoZSBgbmV3YCBrZXl3b3JkJyk7CiAgICB9CiAgICB0aGlzLl9pbml0KG9wdGlvbnMpOwogIH0KCiAgaW5pdE1peGluKFZ1ZSk7CiAgc3RhdGVNaXhpbihWdWUpOwogIGV2ZW50c01peGluKFZ1ZSk7CiAgbGlmZWN5Y2xlTWl4aW4oVnVlKTsKICByZW5kZXJNaXhpbihWdWUpOwoKICAvKiAgKi8KCiAgZnVuY3Rpb24gaW5pdFVzZSAoVnVlKSB7CiAgICBWdWUudXNlID0gZnVuY3Rpb24gKHBsdWdpbikgewogICAgICB2YXIgaW5zdGFsbGVkUGx1Z2lucyA9ICh0aGlzLl9pbnN0YWxsZWRQbHVnaW5zIHx8ICh0aGlzLl9pbnN0YWxsZWRQbHVnaW5zID0gW10pKTsKICAgICAgaWYgKGluc3RhbGxlZFBsdWdpbnMuaW5kZXhPZihwbHVnaW4pID4gLTEpIHsKICAgICAgICByZXR1cm4gdGhpcwogICAgICB9CgogICAgICAvLyBhZGRpdGlvbmFsIHBhcmFtZXRlcnMKICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7CiAgICAgIGFyZ3MudW5zaGlmdCh0aGlzKTsKICAgICAgaWYgKHR5cGVvZiBwbHVnaW4uaW5zdGFsbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHBsdWdpbi5pbnN0YWxsLmFwcGx5KHBsdWdpbiwgYXJncyk7CiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHBsdWdpbiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHBsdWdpbi5hcHBseShudWxsLCBhcmdzKTsKICAgICAgfQogICAgICBpbnN0YWxsZWRQbHVnaW5zLnB1c2gocGx1Z2luKTsKICAgICAgcmV0dXJuIHRoaXMKICAgIH07CiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gaW5pdE1peGluJDEgKFZ1ZSkgewogICAgVnVlLm1peGluID0gZnVuY3Rpb24gKG1peGluKSB7CiAgICAgIHRoaXMub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyh0aGlzLm9wdGlvbnMsIG1peGluKTsKICAgICAgcmV0dXJuIHRoaXMKICAgIH07CiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gaW5pdEV4dGVuZCAoVnVlKSB7CiAgICAvKioKICAgICAqIEVhY2ggaW5zdGFuY2UgY29uc3RydWN0b3IsIGluY2x1ZGluZyBWdWUsIGhhcyBhIHVuaXF1ZQogICAgICogY2lkLiBUaGlzIGVuYWJsZXMgdXMgdG8gY3JlYXRlIHdyYXBwZWQgImNoaWxkCiAgICAgKiBjb25zdHJ1Y3RvcnMiIGZvciBwcm90b3R5cGFsIGluaGVyaXRhbmNlIGFuZCBjYWNoZSB0aGVtLgogICAgICovCiAgICBWdWUuY2lkID0gMDsKICAgIHZhciBjaWQgPSAxOwoKICAgIC8qKgogICAgICogQ2xhc3MgaW5oZXJpdGFuY2UKICAgICAqLwogICAgVnVlLmV4dGVuZCA9IGZ1bmN0aW9uIChleHRlbmRPcHRpb25zKSB7CiAgICAgIGV4dGVuZE9wdGlvbnMgPSBleHRlbmRPcHRpb25zIHx8IHt9OwogICAgICB2YXIgU3VwZXIgPSB0aGlzOwogICAgICB2YXIgU3VwZXJJZCA9IFN1cGVyLmNpZDsKICAgICAgdmFyIGNhY2hlZEN0b3JzID0gZXh0ZW5kT3B0aW9ucy5fQ3RvciB8fCAoZXh0ZW5kT3B0aW9ucy5fQ3RvciA9IHt9KTsKICAgICAgaWYgKGNhY2hlZEN0b3JzW1N1cGVySWRdKSB7CiAgICAgICAgcmV0dXJuIGNhY2hlZEN0b3JzW1N1cGVySWRdCiAgICAgIH0KCiAgICAgIHZhciBuYW1lID0gZXh0ZW5kT3B0aW9ucy5uYW1lIHx8IFN1cGVyLm9wdGlvbnMubmFtZTsKICAgICAgaWYgKG5hbWUpIHsKICAgICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUobmFtZSk7CiAgICAgIH0KCiAgICAgIHZhciBTdWIgPSBmdW5jdGlvbiBWdWVDb21wb25lbnQgKG9wdGlvbnMpIHsKICAgICAgICB0aGlzLl9pbml0KG9wdGlvbnMpOwogICAgICB9OwogICAgICBTdWIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdXBlci5wcm90b3R5cGUpOwogICAgICBTdWIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3ViOwogICAgICBTdWIuY2lkID0gY2lkKys7CiAgICAgIFN1Yi5vcHRpb25zID0gbWVyZ2VPcHRpb25zKAogICAgICAgIFN1cGVyLm9wdGlvbnMsCiAgICAgICAgZXh0ZW5kT3B0aW9ucwogICAgICApOwogICAgICBTdWJbJ3N1cGVyJ10gPSBTdXBlcjsKCiAgICAgIC8vIEZvciBwcm9wcyBhbmQgY29tcHV0ZWQgcHJvcGVydGllcywgd2UgZGVmaW5lIHRoZSBwcm94eSBnZXR0ZXJzIG9uCiAgICAgIC8vIHRoZSBWdWUgaW5zdGFuY2VzIGF0IGV4dGVuc2lvbiB0aW1lLCBvbiB0aGUgZXh0ZW5kZWQgcHJvdG90eXBlLiBUaGlzCiAgICAgIC8vIGF2b2lkcyBPYmplY3QuZGVmaW5lUHJvcGVydHkgY2FsbHMgZm9yIGVhY2ggaW5zdGFuY2UgY3JlYXRlZC4KICAgICAgaWYgKFN1Yi5vcHRpb25zLnByb3BzKSB7CiAgICAgICAgaW5pdFByb3BzJDEoU3ViKTsKICAgICAgfQogICAgICBpZiAoU3ViLm9wdGlvbnMuY29tcHV0ZWQpIHsKICAgICAgICBpbml0Q29tcHV0ZWQkMShTdWIpOwogICAgICB9CgogICAgICAvLyBhbGxvdyBmdXJ0aGVyIGV4dGVuc2lvbi9taXhpbi9wbHVnaW4gdXNhZ2UKICAgICAgU3ViLmV4dGVuZCA9IFN1cGVyLmV4dGVuZDsKICAgICAgU3ViLm1peGluID0gU3VwZXIubWl4aW47CiAgICAgIFN1Yi51c2UgPSBTdXBlci51c2U7CgogICAgICAvLyBjcmVhdGUgYXNzZXQgcmVnaXN0ZXJzLCBzbyBleHRlbmRlZCBjbGFzc2VzCiAgICAgIC8vIGNhbiBoYXZlIHRoZWlyIHByaXZhdGUgYXNzZXRzIHRvby4KICAgICAgQVNTRVRfVFlQRVMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkgewogICAgICAgIFN1Ylt0eXBlXSA9IFN1cGVyW3R5cGVdOwogICAgICB9KTsKICAgICAgLy8gZW5hYmxlIHJlY3Vyc2l2ZSBzZWxmLWxvb2t1cAogICAgICBpZiAobmFtZSkgewogICAgICAgIFN1Yi5vcHRpb25zLmNvbXBvbmVudHNbbmFtZV0gPSBTdWI7CiAgICAgIH0KCiAgICAgIC8vIGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlIHN1cGVyIG9wdGlvbnMgYXQgZXh0ZW5zaW9uIHRpbWUuCiAgICAgIC8vIGxhdGVyIGF0IGluc3RhbnRpYXRpb24gd2UgY2FuIGNoZWNrIGlmIFN1cGVyJ3Mgb3B0aW9ucyBoYXZlCiAgICAgIC8vIGJlZW4gdXBkYXRlZC4KICAgICAgU3ViLnN1cGVyT3B0aW9ucyA9IFN1cGVyLm9wdGlvbnM7CiAgICAgIFN1Yi5leHRlbmRPcHRpb25zID0gZXh0ZW5kT3B0aW9uczsKICAgICAgU3ViLnNlYWxlZE9wdGlvbnMgPSBleHRlbmQoe30sIFN1Yi5vcHRpb25zKTsKCiAgICAgIC8vIGNhY2hlIGNvbnN0cnVjdG9yCiAgICAgIGNhY2hlZEN0b3JzW1N1cGVySWRdID0gU3ViOwogICAgICByZXR1cm4gU3ViCiAgICB9OwogIH0KCiAgZnVuY3Rpb24gaW5pdFByb3BzJDEgKENvbXApIHsKICAgIHZhciBwcm9wcyA9IENvbXAub3B0aW9ucy5wcm9wczsKICAgIGZvciAodmFyIGtleSBpbiBwcm9wcykgewogICAgICBwcm94eShDb21wLnByb3RvdHlwZSwgIl9wcm9wcyIsIGtleSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBpbml0Q29tcHV0ZWQkMSAoQ29tcCkgewogICAgdmFyIGNvbXB1dGVkID0gQ29tcC5vcHRpb25zLmNvbXB1dGVkOwogICAgZm9yICh2YXIga2V5IGluIGNvbXB1dGVkKSB7CiAgICAgIGRlZmluZUNvbXB1dGVkKENvbXAucHJvdG90eXBlLCBrZXksIGNvbXB1dGVkW2tleV0pOwogICAgfQogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGluaXRBc3NldFJlZ2lzdGVycyAoVnVlKSB7CiAgICAvKioKICAgICAqIENyZWF0ZSBhc3NldCByZWdpc3RyYXRpb24gbWV0aG9kcy4KICAgICAqLwogICAgQVNTRVRfVFlQRVMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkgewogICAgICBWdWVbdHlwZV0gPSBmdW5jdGlvbiAoCiAgICAgICAgaWQsCiAgICAgICAgZGVmaW5pdGlvbgogICAgICApIHsKICAgICAgICBpZiAoIWRlZmluaXRpb24pIHsKICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICAgICAgaWYgKHR5cGUgPT09ICdjb21wb25lbnQnKSB7CiAgICAgICAgICAgIHZhbGlkYXRlQ29tcG9uZW50TmFtZShpZCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbXBvbmVudCcgJiYgaXNQbGFpbk9iamVjdChkZWZpbml0aW9uKSkgewogICAgICAgICAgICBkZWZpbml0aW9uLm5hbWUgPSBkZWZpbml0aW9uLm5hbWUgfHwgaWQ7CiAgICAgICAgICAgIGRlZmluaXRpb24gPSB0aGlzLm9wdGlvbnMuX2Jhc2UuZXh0ZW5kKGRlZmluaXRpb24pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHR5cGUgPT09ICdkaXJlY3RpdmUnICYmIHR5cGVvZiBkZWZpbml0aW9uID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIGRlZmluaXRpb24gPSB7IGJpbmQ6IGRlZmluaXRpb24sIHVwZGF0ZTogZGVmaW5pdGlvbiB9OwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXSA9IGRlZmluaXRpb247CiAgICAgICAgICByZXR1cm4gZGVmaW5pdGlvbgogICAgICAgIH0KICAgICAgfTsKICAgIH0pOwogIH0KCiAgLyogICovCgoKCiAgZnVuY3Rpb24gZ2V0Q29tcG9uZW50TmFtZSAob3B0cykgewogICAgcmV0dXJuIG9wdHMgJiYgKG9wdHMuQ3Rvci5vcHRpb25zLm5hbWUgfHwgb3B0cy50YWcpCiAgfQoKICBmdW5jdGlvbiBtYXRjaGVzIChwYXR0ZXJuLCBuYW1lKSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheShwYXR0ZXJuKSkgewogICAgICByZXR1cm4gcGF0dGVybi5pbmRleE9mKG5hbWUpID4gLTEKICAgIH0gZWxzZSBpZiAodHlwZW9mIHBhdHRlcm4gPT09ICdzdHJpbmcnKSB7CiAgICAgIHJldHVybiBwYXR0ZXJuLnNwbGl0KCcsJykuaW5kZXhPZihuYW1lKSA+IC0xCiAgICB9IGVsc2UgaWYgKGlzUmVnRXhwKHBhdHRlcm4pKSB7CiAgICAgIHJldHVybiBwYXR0ZXJuLnRlc3QobmFtZSkKICAgIH0KICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICByZXR1cm4gZmFsc2UKICB9CgogIGZ1bmN0aW9uIHBydW5lQ2FjaGUgKGtlZXBBbGl2ZUluc3RhbmNlLCBmaWx0ZXIpIHsKICAgIHZhciBjYWNoZSA9IGtlZXBBbGl2ZUluc3RhbmNlLmNhY2hlOwogICAgdmFyIGtleXMgPSBrZWVwQWxpdmVJbnN0YW5jZS5rZXlzOwogICAgdmFyIF92bm9kZSA9IGtlZXBBbGl2ZUluc3RhbmNlLl92bm9kZTsKICAgIGZvciAodmFyIGtleSBpbiBjYWNoZSkgewogICAgICB2YXIgY2FjaGVkTm9kZSA9IGNhY2hlW2tleV07CiAgICAgIGlmIChjYWNoZWROb2RlKSB7CiAgICAgICAgdmFyIG5hbWUgPSBnZXRDb21wb25lbnROYW1lKGNhY2hlZE5vZGUuY29tcG9uZW50T3B0aW9ucyk7CiAgICAgICAgaWYgKG5hbWUgJiYgIWZpbHRlcihuYW1lKSkgewogICAgICAgICAgcHJ1bmVDYWNoZUVudHJ5KGNhY2hlLCBrZXksIGtleXMsIF92bm9kZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwcnVuZUNhY2hlRW50cnkgKAogICAgY2FjaGUsCiAgICBrZXksCiAgICBrZXlzLAogICAgY3VycmVudAogICkgewogICAgdmFyIGNhY2hlZCQkMSA9IGNhY2hlW2tleV07CiAgICBpZiAoY2FjaGVkJCQxICYmICghY3VycmVudCB8fCBjYWNoZWQkJDEudGFnICE9PSBjdXJyZW50LnRhZykpIHsKICAgICAgY2FjaGVkJCQxLmNvbXBvbmVudEluc3RhbmNlLiRkZXN0cm95KCk7CiAgICB9CiAgICBjYWNoZVtrZXldID0gbnVsbDsKICAgIHJlbW92ZShrZXlzLCBrZXkpOwogIH0KCiAgdmFyIHBhdHRlcm5UeXBlcyA9IFtTdHJpbmcsIFJlZ0V4cCwgQXJyYXldOwoKICB2YXIgS2VlcEFsaXZlID0gewogICAgbmFtZTogJ2tlZXAtYWxpdmUnLAogICAgYWJzdHJhY3Q6IHRydWUsCgogICAgcHJvcHM6IHsKICAgICAgaW5jbHVkZTogcGF0dGVyblR5cGVzLAogICAgICBleGNsdWRlOiBwYXR0ZXJuVHlwZXMsCiAgICAgIG1heDogW1N0cmluZywgTnVtYmVyXQogICAgfSwKCiAgICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkICgpIHsKICAgICAgdGhpcy5jYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgIHRoaXMua2V5cyA9IFtdOwogICAgfSwKCiAgICBkZXN0cm95ZWQ6IGZ1bmN0aW9uIGRlc3Ryb3llZCAoKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmNhY2hlKSB7CiAgICAgICAgcHJ1bmVDYWNoZUVudHJ5KHRoaXMuY2FjaGUsIGtleSwgdGhpcy5rZXlzKTsKICAgICAgfQogICAgfSwKCiAgICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkICgpIHsKICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7CgogICAgICB0aGlzLiR3YXRjaCgnaW5jbHVkZScsIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICBwcnVuZUNhY2hlKHRoaXMkMSwgZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIG1hdGNoZXModmFsLCBuYW1lKTsgfSk7CiAgICAgIH0pOwogICAgICB0aGlzLiR3YXRjaCgnZXhjbHVkZScsIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICBwcnVuZUNhY2hlKHRoaXMkMSwgZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuICFtYXRjaGVzKHZhbCwgbmFtZSk7IH0pOwogICAgICB9KTsKICAgIH0sCgogICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIgKCkgewogICAgICB2YXIgc2xvdCA9IHRoaXMuJHNsb3RzLmRlZmF1bHQ7CiAgICAgIHZhciB2bm9kZSA9IGdldEZpcnN0Q29tcG9uZW50Q2hpbGQoc2xvdCk7CiAgICAgIHZhciBjb21wb25lbnRPcHRpb25zID0gdm5vZGUgJiYgdm5vZGUuY29tcG9uZW50T3B0aW9uczsKICAgICAgaWYgKGNvbXBvbmVudE9wdGlvbnMpIHsKICAgICAgICAvLyBjaGVjayBwYXR0ZXJuCiAgICAgICAgdmFyIG5hbWUgPSBnZXRDb21wb25lbnROYW1lKGNvbXBvbmVudE9wdGlvbnMpOwogICAgICAgIHZhciByZWYgPSB0aGlzOwogICAgICAgIHZhciBpbmNsdWRlID0gcmVmLmluY2x1ZGU7CiAgICAgICAgdmFyIGV4Y2x1ZGUgPSByZWYuZXhjbHVkZTsKICAgICAgICBpZiAoCiAgICAgICAgICAvLyBub3QgaW5jbHVkZWQKICAgICAgICAgIChpbmNsdWRlICYmICghbmFtZSB8fCAhbWF0Y2hlcyhpbmNsdWRlLCBuYW1lKSkpIHx8CiAgICAgICAgICAvLyBleGNsdWRlZAogICAgICAgICAgKGV4Y2x1ZGUgJiYgbmFtZSAmJiBtYXRjaGVzKGV4Y2x1ZGUsIG5hbWUpKQogICAgICAgICkgewogICAgICAgICAgcmV0dXJuIHZub2RlCiAgICAgICAgfQoKICAgICAgICB2YXIgcmVmJDEgPSB0aGlzOwogICAgICAgIHZhciBjYWNoZSA9IHJlZiQxLmNhY2hlOwogICAgICAgIHZhciBrZXlzID0gcmVmJDEua2V5czsKICAgICAgICB2YXIga2V5ID0gdm5vZGUua2V5ID09IG51bGwKICAgICAgICAgIC8vIHNhbWUgY29uc3RydWN0b3IgbWF5IGdldCByZWdpc3RlcmVkIGFzIGRpZmZlcmVudCBsb2NhbCBjb21wb25lbnRzCiAgICAgICAgICAvLyBzbyBjaWQgYWxvbmUgaXMgbm90IGVub3VnaCAoIzMyNjkpCiAgICAgICAgICA/IGNvbXBvbmVudE9wdGlvbnMuQ3Rvci5jaWQgKyAoY29tcG9uZW50T3B0aW9ucy50YWcgPyAoIjo6IiArIChjb21wb25lbnRPcHRpb25zLnRhZykpIDogJycpCiAgICAgICAgICA6IHZub2RlLmtleTsKICAgICAgICBpZiAoY2FjaGVba2V5XSkgewogICAgICAgICAgdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgPSBjYWNoZVtrZXldLmNvbXBvbmVudEluc3RhbmNlOwogICAgICAgICAgLy8gbWFrZSBjdXJyZW50IGtleSBmcmVzaGVzdAogICAgICAgICAgcmVtb3ZlKGtleXMsIGtleSk7CiAgICAgICAgICBrZXlzLnB1c2goa2V5KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2FjaGVba2V5XSA9IHZub2RlOwogICAgICAgICAga2V5cy5wdXNoKGtleSk7CiAgICAgICAgICAvLyBwcnVuZSBvbGRlc3QgZW50cnkKICAgICAgICAgIGlmICh0aGlzLm1heCAmJiBrZXlzLmxlbmd0aCA+IHBhcnNlSW50KHRoaXMubWF4KSkgewogICAgICAgICAgICBwcnVuZUNhY2hlRW50cnkoY2FjaGUsIGtleXNbMF0sIGtleXMsIHRoaXMuX3Zub2RlKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZub2RlLmRhdGEua2VlcEFsaXZlID0gdHJ1ZTsKICAgICAgfQogICAgICByZXR1cm4gdm5vZGUgfHwgKHNsb3QgJiYgc2xvdFswXSkKICAgIH0KICB9OwoKICB2YXIgYnVpbHRJbkNvbXBvbmVudHMgPSB7CiAgICBLZWVwQWxpdmU6IEtlZXBBbGl2ZQogIH07CgogIC8qICAqLwoKICBmdW5jdGlvbiBpbml0R2xvYmFsQVBJIChWdWUpIHsKICAgIC8vIGNvbmZpZwogICAgdmFyIGNvbmZpZ0RlZiA9IHt9OwogICAgY29uZmlnRGVmLmdldCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbmZpZzsgfTsKICAgIHsKICAgICAgY29uZmlnRGVmLnNldCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB3YXJuKAogICAgICAgICAgJ0RvIG5vdCByZXBsYWNlIHRoZSBWdWUuY29uZmlnIG9iamVjdCwgc2V0IGluZGl2aWR1YWwgZmllbGRzIGluc3RlYWQuJwogICAgICAgICk7CiAgICAgIH07CiAgICB9CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLCAnY29uZmlnJywgY29uZmlnRGVmKTsKCiAgICAvLyBleHBvc2VkIHV0aWwgbWV0aG9kcy4KICAgIC8vIE5PVEU6IHRoZXNlIGFyZSBub3QgY29uc2lkZXJlZCBwYXJ0IG9mIHRoZSBwdWJsaWMgQVBJIC0gYXZvaWQgcmVseWluZyBvbgogICAgLy8gdGhlbSB1bmxlc3MgeW91IGFyZSBhd2FyZSBvZiB0aGUgcmlzay4KICAgIFZ1ZS51dGlsID0gewogICAgICB3YXJuOiB3YXJuLAogICAgICBleHRlbmQ6IGV4dGVuZCwKICAgICAgbWVyZ2VPcHRpb25zOiBtZXJnZU9wdGlvbnMsCiAgICAgIGRlZmluZVJlYWN0aXZlOiBkZWZpbmVSZWFjdGl2ZSQkMQogICAgfTsKCiAgICBWdWUuc2V0ID0gc2V0OwogICAgVnVlLmRlbGV0ZSA9IGRlbDsKICAgIFZ1ZS5uZXh0VGljayA9IG5leHRUaWNrOwoKICAgIC8vIDIuNiBleHBsaWNpdCBvYnNlcnZhYmxlIEFQSQogICAgVnVlLm9ic2VydmFibGUgPSBmdW5jdGlvbiAob2JqKSB7CiAgICAgIG9ic2VydmUob2JqKTsKICAgICAgcmV0dXJuIG9iagogICAgfTsKCiAgICBWdWUub3B0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICBBU1NFVF9UWVBFUy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7CiAgICAgIFZ1ZS5vcHRpb25zW3R5cGUgKyAncyddID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgIH0pOwoKICAgIC8vIHRoaXMgaXMgdXNlZCB0byBpZGVudGlmeSB0aGUgImJhc2UiIGNvbnN0cnVjdG9yIHRvIGV4dGVuZCBhbGwgcGxhaW4tb2JqZWN0CiAgICAvLyBjb21wb25lbnRzIHdpdGggaW4gV2VleCdzIG11bHRpLWluc3RhbmNlIHNjZW5hcmlvcy4KICAgIFZ1ZS5vcHRpb25zLl9iYXNlID0gVnVlOwoKICAgIGV4dGVuZChWdWUub3B0aW9ucy5jb21wb25lbnRzLCBidWlsdEluQ29tcG9uZW50cyk7CgogICAgaW5pdFVzZShWdWUpOwogICAgaW5pdE1peGluJDEoVnVlKTsKICAgIGluaXRFeHRlbmQoVnVlKTsKICAgIGluaXRBc3NldFJlZ2lzdGVycyhWdWUpOwogIH0KCiAgaW5pdEdsb2JhbEFQSShWdWUpOwoKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRpc1NlcnZlcicsIHsKICAgIGdldDogaXNTZXJ2ZXJSZW5kZXJpbmcKICB9KTsKCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsICckc3NyQ29udGV4dCcsIHsKICAgIGdldDogZnVuY3Rpb24gZ2V0ICgpIHsKICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICAgICAgcmV0dXJuIHRoaXMuJHZub2RlICYmIHRoaXMuJHZub2RlLnNzckNvbnRleHQKICAgIH0KICB9KTsKCiAgLy8gZXhwb3NlIEZ1bmN0aW9uYWxSZW5kZXJDb250ZXh0IGZvciBzc3IgcnVudGltZSBoZWxwZXIgaW5zdGFsbGF0aW9uCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZSwgJ0Z1bmN0aW9uYWxSZW5kZXJDb250ZXh0JywgewogICAgdmFsdWU6IEZ1bmN0aW9uYWxSZW5kZXJDb250ZXh0CiAgfSk7CgogIFZ1ZS52ZXJzaW9uID0gJzIuNi4xMCc7CgogIC8qICAqLwoKICAvLyB0aGVzZSBhcmUgcmVzZXJ2ZWQgZm9yIHdlYiBiZWNhdXNlIHRoZXkgYXJlIGRpcmVjdGx5IGNvbXBpbGVkIGF3YXkKICAvLyBkdXJpbmcgdGVtcGxhdGUgY29tcGlsYXRpb24KICB2YXIgaXNSZXNlcnZlZEF0dHIgPSBtYWtlTWFwKCdzdHlsZSxjbGFzcycpOwoKICAvLyBhdHRyaWJ1dGVzIHRoYXQgc2hvdWxkIGJlIHVzaW5nIHByb3BzIGZvciBiaW5kaW5nCiAgdmFyIGFjY2VwdFZhbHVlID0gbWFrZU1hcCgnaW5wdXQsdGV4dGFyZWEsb3B0aW9uLHNlbGVjdCxwcm9ncmVzcycpOwogIHZhciBtdXN0VXNlUHJvcCA9IGZ1bmN0aW9uICh0YWcsIHR5cGUsIGF0dHIpIHsKICAgIHJldHVybiAoCiAgICAgIChhdHRyID09PSAndmFsdWUnICYmIGFjY2VwdFZhbHVlKHRhZykpICYmIHR5cGUgIT09ICdidXR0b24nIHx8CiAgICAgIChhdHRyID09PSAnc2VsZWN0ZWQnICYmIHRhZyA9PT0gJ29wdGlvbicpIHx8CiAgICAgIChhdHRyID09PSAnY2hlY2tlZCcgJiYgdGFnID09PSAnaW5wdXQnKSB8fAogICAgICAoYXR0ciA9PT0gJ211dGVkJyAmJiB0YWcgPT09ICd2aWRlbycpCiAgICApCiAgfTsKCiAgdmFyIGlzRW51bWVyYXRlZEF0dHIgPSBtYWtlTWFwKCdjb250ZW50ZWRpdGFibGUsZHJhZ2dhYmxlLHNwZWxsY2hlY2snKTsKCiAgdmFyIGlzVmFsaWRDb250ZW50RWRpdGFibGVWYWx1ZSA9IG1ha2VNYXAoJ2V2ZW50cyxjYXJldCx0eXBpbmcscGxhaW50ZXh0LW9ubHknKTsKCiAgdmFyIGNvbnZlcnRFbnVtZXJhdGVkVmFsdWUgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkgewogICAgcmV0dXJuIGlzRmFsc3lBdHRyVmFsdWUodmFsdWUpIHx8IHZhbHVlID09PSAnZmFsc2UnCiAgICAgID8gJ2ZhbHNlJwogICAgICAvLyBhbGxvdyBhcmJpdHJhcnkgc3RyaW5nIHZhbHVlIGZvciBjb250ZW50ZWRpdGFibGUKICAgICAgOiBrZXkgPT09ICdjb250ZW50ZWRpdGFibGUnICYmIGlzVmFsaWRDb250ZW50RWRpdGFibGVWYWx1ZSh2YWx1ZSkKICAgICAgICA/IHZhbHVlCiAgICAgICAgOiAndHJ1ZScKICB9OwoKICB2YXIgaXNCb29sZWFuQXR0ciA9IG1ha2VNYXAoCiAgICAnYWxsb3dmdWxsc2NyZWVuLGFzeW5jLGF1dG9mb2N1cyxhdXRvcGxheSxjaGVja2VkLGNvbXBhY3QsY29udHJvbHMsZGVjbGFyZSwnICsKICAgICdkZWZhdWx0LGRlZmF1bHRjaGVja2VkLGRlZmF1bHRtdXRlZCxkZWZhdWx0c2VsZWN0ZWQsZGVmZXIsZGlzYWJsZWQsJyArCiAgICAnZW5hYmxlZCxmb3Jtbm92YWxpZGF0ZSxoaWRkZW4saW5kZXRlcm1pbmF0ZSxpbmVydCxpc21hcCxpdGVtc2NvcGUsbG9vcCxtdWx0aXBsZSwnICsKICAgICdtdXRlZCxub2hyZWYsbm9yZXNpemUsbm9zaGFkZSxub3ZhbGlkYXRlLG5vd3JhcCxvcGVuLHBhdXNlb25leGl0LHJlYWRvbmx5LCcgKwogICAgJ3JlcXVpcmVkLHJldmVyc2VkLHNjb3BlZCxzZWFtbGVzcyxzZWxlY3RlZCxzb3J0YWJsZSx0cmFuc2xhdGUsJyArCiAgICAndHJ1ZXNwZWVkLHR5cGVtdXN0bWF0Y2gsdmlzaWJsZScKICApOwoKICB2YXIgeGxpbmtOUyA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJzsKCiAgdmFyIGlzWGxpbmsgPSBmdW5jdGlvbiAobmFtZSkgewogICAgcmV0dXJuIG5hbWUuY2hhckF0KDUpID09PSAnOicgJiYgbmFtZS5zbGljZSgwLCA1KSA9PT0gJ3hsaW5rJwogIH07CgogIHZhciBnZXRYbGlua1Byb3AgPSBmdW5jdGlvbiAobmFtZSkgewogICAgcmV0dXJuIGlzWGxpbmsobmFtZSkgPyBuYW1lLnNsaWNlKDYsIG5hbWUubGVuZ3RoKSA6ICcnCiAgfTsKCiAgdmFyIGlzRmFsc3lBdHRyVmFsdWUgPSBmdW5jdGlvbiAodmFsKSB7CiAgICByZXR1cm4gdmFsID09IG51bGwgfHwgdmFsID09PSBmYWxzZQogIH07CgogIC8qICAqLwoKICBmdW5jdGlvbiBnZW5DbGFzc0ZvclZub2RlICh2bm9kZSkgewogICAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhOwogICAgdmFyIHBhcmVudE5vZGUgPSB2bm9kZTsKICAgIHZhciBjaGlsZE5vZGUgPSB2bm9kZTsKICAgIHdoaWxlIChpc0RlZihjaGlsZE5vZGUuY29tcG9uZW50SW5zdGFuY2UpKSB7CiAgICAgIGNoaWxkTm9kZSA9IGNoaWxkTm9kZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7CiAgICAgIGlmIChjaGlsZE5vZGUgJiYgY2hpbGROb2RlLmRhdGEpIHsKICAgICAgICBkYXRhID0gbWVyZ2VDbGFzc0RhdGEoY2hpbGROb2RlLmRhdGEsIGRhdGEpOwogICAgICB9CiAgICB9CiAgICB3aGlsZSAoaXNEZWYocGFyZW50Tm9kZSA9IHBhcmVudE5vZGUucGFyZW50KSkgewogICAgICBpZiAocGFyZW50Tm9kZSAmJiBwYXJlbnROb2RlLmRhdGEpIHsKICAgICAgICBkYXRhID0gbWVyZ2VDbGFzc0RhdGEoZGF0YSwgcGFyZW50Tm9kZS5kYXRhKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlbmRlckNsYXNzKGRhdGEuc3RhdGljQ2xhc3MsIGRhdGEuY2xhc3MpCiAgfQoKICBmdW5jdGlvbiBtZXJnZUNsYXNzRGF0YSAoY2hpbGQsIHBhcmVudCkgewogICAgcmV0dXJuIHsKICAgICAgc3RhdGljQ2xhc3M6IGNvbmNhdChjaGlsZC5zdGF0aWNDbGFzcywgcGFyZW50LnN0YXRpY0NsYXNzKSwKICAgICAgY2xhc3M6IGlzRGVmKGNoaWxkLmNsYXNzKQogICAgICAgID8gW2NoaWxkLmNsYXNzLCBwYXJlbnQuY2xhc3NdCiAgICAgICAgOiBwYXJlbnQuY2xhc3MKICAgIH0KICB9CgogIGZ1bmN0aW9uIHJlbmRlckNsYXNzICgKICAgIHN0YXRpY0NsYXNzLAogICAgZHluYW1pY0NsYXNzCiAgKSB7CiAgICBpZiAoaXNEZWYoc3RhdGljQ2xhc3MpIHx8IGlzRGVmKGR5bmFtaWNDbGFzcykpIHsKICAgICAgcmV0dXJuIGNvbmNhdChzdGF0aWNDbGFzcywgc3RyaW5naWZ5Q2xhc3MoZHluYW1pY0NsYXNzKSkKICAgIH0KICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICByZXR1cm4gJycKICB9CgogIGZ1bmN0aW9uIGNvbmNhdCAoYSwgYikgewogICAgcmV0dXJuIGEgPyBiID8gKGEgKyAnICcgKyBiKSA6IGEgOiAoYiB8fCAnJykKICB9CgogIGZ1bmN0aW9uIHN0cmluZ2lmeUNsYXNzICh2YWx1ZSkgewogICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7CiAgICAgIHJldHVybiBzdHJpbmdpZnlBcnJheSh2YWx1ZSkKICAgIH0KICAgIGlmIChpc09iamVjdCh2YWx1ZSkpIHsKICAgICAgcmV0dXJuIHN0cmluZ2lmeU9iamVjdCh2YWx1ZSkKICAgIH0KICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7CiAgICAgIHJldHVybiB2YWx1ZQogICAgfQogICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICAgIHJldHVybiAnJwogIH0KCiAgZnVuY3Rpb24gc3RyaW5naWZ5QXJyYXkgKHZhbHVlKSB7CiAgICB2YXIgcmVzID0gJyc7CiAgICB2YXIgc3RyaW5naWZpZWQ7CiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBpZiAoaXNEZWYoc3RyaW5naWZpZWQgPSBzdHJpbmdpZnlDbGFzcyh2YWx1ZVtpXSkpICYmIHN0cmluZ2lmaWVkICE9PSAnJykgewogICAgICAgIGlmIChyZXMpIHsgcmVzICs9ICcgJzsgfQogICAgICAgIHJlcyArPSBzdHJpbmdpZmllZDsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgZnVuY3Rpb24gc3RyaW5naWZ5T2JqZWN0ICh2YWx1ZSkgewogICAgdmFyIHJlcyA9ICcnOwogICAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZVtrZXldKSB7CiAgICAgICAgaWYgKHJlcykgeyByZXMgKz0gJyAnOyB9CiAgICAgICAgcmVzICs9IGtleTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgLyogICovCgogIHZhciBuYW1lc3BhY2VNYXAgPSB7CiAgICBzdmc6ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsCiAgICBtYXRoOiAnaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoL01hdGhNTCcKICB9OwoKICB2YXIgaXNIVE1MVGFnID0gbWFrZU1hcCgKICAgICdodG1sLGJvZHksYmFzZSxoZWFkLGxpbmssbWV0YSxzdHlsZSx0aXRsZSwnICsKICAgICdhZGRyZXNzLGFydGljbGUsYXNpZGUsZm9vdGVyLGhlYWRlcixoMSxoMixoMyxoNCxoNSxoNixoZ3JvdXAsbmF2LHNlY3Rpb24sJyArCiAgICAnZGl2LGRkLGRsLGR0LGZpZ2NhcHRpb24sZmlndXJlLHBpY3R1cmUsaHIsaW1nLGxpLG1haW4sb2wscCxwcmUsdWwsJyArCiAgICAnYSxiLGFiYnIsYmRpLGJkbyxicixjaXRlLGNvZGUsZGF0YSxkZm4sZW0saSxrYmQsbWFyayxxLHJwLHJ0LHJ0YyxydWJ5LCcgKwogICAgJ3Msc2FtcCxzbWFsbCxzcGFuLHN0cm9uZyxzdWIsc3VwLHRpbWUsdSx2YXIsd2JyLGFyZWEsYXVkaW8sbWFwLHRyYWNrLHZpZGVvLCcgKwogICAgJ2VtYmVkLG9iamVjdCxwYXJhbSxzb3VyY2UsY2FudmFzLHNjcmlwdCxub3NjcmlwdCxkZWwsaW5zLCcgKwogICAgJ2NhcHRpb24sY29sLGNvbGdyb3VwLHRhYmxlLHRoZWFkLHRib2R5LHRkLHRoLHRyLCcgKwogICAgJ2J1dHRvbixkYXRhbGlzdCxmaWVsZHNldCxmb3JtLGlucHV0LGxhYmVsLGxlZ2VuZCxtZXRlcixvcHRncm91cCxvcHRpb24sJyArCiAgICAnb3V0cHV0LHByb2dyZXNzLHNlbGVjdCx0ZXh0YXJlYSwnICsKICAgICdkZXRhaWxzLGRpYWxvZyxtZW51LG1lbnVpdGVtLHN1bW1hcnksJyArCiAgICAnY29udGVudCxlbGVtZW50LHNoYWRvdyx0ZW1wbGF0ZSxibG9ja3F1b3RlLGlmcmFtZSx0Zm9vdCcKICApOwoKICAvLyB0aGlzIG1hcCBpcyBpbnRlbnRpb25hbGx5IHNlbGVjdGl2ZSwgb25seSBjb3ZlcmluZyBTVkcgZWxlbWVudHMgdGhhdCBtYXkKICAvLyBjb250YWluIGNoaWxkIGVsZW1lbnRzLgogIHZhciBpc1NWRyA9IG1ha2VNYXAoCiAgICAnc3ZnLGFuaW1hdGUsY2lyY2xlLGNsaXBwYXRoLGN1cnNvcixkZWZzLGRlc2MsZWxsaXBzZSxmaWx0ZXIsZm9udC1mYWNlLCcgKwogICAgJ2ZvcmVpZ25PYmplY3QsZyxnbHlwaCxpbWFnZSxsaW5lLG1hcmtlcixtYXNrLG1pc3NpbmctZ2x5cGgscGF0aCxwYXR0ZXJuLCcgKwogICAgJ3BvbHlnb24scG9seWxpbmUscmVjdCxzd2l0Y2gsc3ltYm9sLHRleHQsdGV4dHBhdGgsdHNwYW4sdXNlLHZpZXcnLAogICAgdHJ1ZQogICk7CgogIHZhciBpc1ByZVRhZyA9IGZ1bmN0aW9uICh0YWcpIHsgcmV0dXJuIHRhZyA9PT0gJ3ByZSc7IH07CgogIHZhciBpc1Jlc2VydmVkVGFnID0gZnVuY3Rpb24gKHRhZykgewogICAgcmV0dXJuIGlzSFRNTFRhZyh0YWcpIHx8IGlzU1ZHKHRhZykKICB9OwoKICBmdW5jdGlvbiBnZXRUYWdOYW1lc3BhY2UgKHRhZykgewogICAgaWYgKGlzU1ZHKHRhZykpIHsKICAgICAgcmV0dXJuICdzdmcnCiAgICB9CiAgICAvLyBiYXNpYyBzdXBwb3J0IGZvciBNYXRoTUwKICAgIC8vIG5vdGUgaXQgZG9lc24ndCBzdXBwb3J0IG90aGVyIE1hdGhNTCBlbGVtZW50cyBiZWluZyBjb21wb25lbnQgcm9vdHMKICAgIGlmICh0YWcgPT09ICdtYXRoJykgewogICAgICByZXR1cm4gJ21hdGgnCiAgICB9CiAgfQoKICB2YXIgdW5rbm93bkVsZW1lbnRDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgZnVuY3Rpb24gaXNVbmtub3duRWxlbWVudCAodGFnKSB7CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgIGlmICghaW5Ccm93c2VyKSB7CiAgICAgIHJldHVybiB0cnVlCiAgICB9CiAgICBpZiAoaXNSZXNlcnZlZFRhZyh0YWcpKSB7CiAgICAgIHJldHVybiBmYWxzZQogICAgfQogICAgdGFnID0gdGFnLnRvTG93ZXJDYXNlKCk7CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgIGlmICh1bmtub3duRWxlbWVudENhY2hlW3RhZ10gIT0gbnVsbCkgewogICAgICByZXR1cm4gdW5rbm93bkVsZW1lbnRDYWNoZVt0YWddCiAgICB9CiAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7CiAgICBpZiAodGFnLmluZGV4T2YoJy0nKSA+IC0xKSB7CiAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI4MjEwMzY0LzEwNzAyNDQKICAgICAgcmV0dXJuICh1bmtub3duRWxlbWVudENhY2hlW3RhZ10gPSAoCiAgICAgICAgZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQgfHwKICAgICAgICBlbC5jb25zdHJ1Y3RvciA9PT0gd2luZG93LkhUTUxFbGVtZW50CiAgICAgICkpCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gKHVua25vd25FbGVtZW50Q2FjaGVbdGFnXSA9IC9IVE1MVW5rbm93bkVsZW1lbnQvLnRlc3QoZWwudG9TdHJpbmcoKSkpCiAgICB9CiAgfQoKICB2YXIgaXNUZXh0SW5wdXRUeXBlID0gbWFrZU1hcCgndGV4dCxudW1iZXIscGFzc3dvcmQsc2VhcmNoLGVtYWlsLHRlbCx1cmwnKTsKCiAgLyogICovCgogIC8qKgogICAqIFF1ZXJ5IGFuIGVsZW1lbnQgc2VsZWN0b3IgaWYgaXQncyBub3QgYW4gZWxlbWVudCBhbHJlYWR5LgogICAqLwogIGZ1bmN0aW9uIHF1ZXJ5IChlbCkgewogICAgaWYgKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpIHsKICAgICAgdmFyIHNlbGVjdGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCk7CiAgICAgIGlmICghc2VsZWN0ZWQpIHsKICAgICAgICB3YXJuKAogICAgICAgICAgJ0Nhbm5vdCBmaW5kIGVsZW1lbnQ6ICcgKyBlbAogICAgICAgICk7CiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpCiAgICAgIH0KICAgICAgcmV0dXJuIHNlbGVjdGVkCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZWwKICAgIH0KICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBjcmVhdGVFbGVtZW50JDEgKHRhZ05hbWUsIHZub2RlKSB7CiAgICB2YXIgZWxtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTsKICAgIGlmICh0YWdOYW1lICE9PSAnc2VsZWN0JykgewogICAgICByZXR1cm4gZWxtCiAgICB9CiAgICAvLyBmYWxzZSBvciBudWxsIHdpbGwgcmVtb3ZlIHRoZSBhdHRyaWJ1dGUgYnV0IHVuZGVmaW5lZCB3aWxsIG5vdAogICAgaWYgKHZub2RlLmRhdGEgJiYgdm5vZGUuZGF0YS5hdHRycyAmJiB2bm9kZS5kYXRhLmF0dHJzLm11bHRpcGxlICE9PSB1bmRlZmluZWQpIHsKICAgICAgZWxtLnNldEF0dHJpYnV0ZSgnbXVsdGlwbGUnLCAnbXVsdGlwbGUnKTsKICAgIH0KICAgIHJldHVybiBlbG0KICB9CgogIGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnROUyAobmFtZXNwYWNlLCB0YWdOYW1lKSB7CiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZU1hcFtuYW1lc3BhY2VdLCB0YWdOYW1lKQogIH0KCiAgZnVuY3Rpb24gY3JlYXRlVGV4dE5vZGUgKHRleHQpIHsKICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0KQogIH0KCiAgZnVuY3Rpb24gY3JlYXRlQ29tbWVudCAodGV4dCkgewogICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQodGV4dCkKICB9CgogIGZ1bmN0aW9uIGluc2VydEJlZm9yZSAocGFyZW50Tm9kZSwgbmV3Tm9kZSwgcmVmZXJlbmNlTm9kZSkgewogICAgcGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobmV3Tm9kZSwgcmVmZXJlbmNlTm9kZSk7CiAgfQoKICBmdW5jdGlvbiByZW1vdmVDaGlsZCAobm9kZSwgY2hpbGQpIHsKICAgIG5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQpOwogIH0KCiAgZnVuY3Rpb24gYXBwZW5kQ2hpbGQgKG5vZGUsIGNoaWxkKSB7CiAgICBub2RlLmFwcGVuZENoaWxkKGNoaWxkKTsKICB9CgogIGZ1bmN0aW9uIHBhcmVudE5vZGUgKG5vZGUpIHsKICAgIHJldHVybiBub2RlLnBhcmVudE5vZGUKICB9CgogIGZ1bmN0aW9uIG5leHRTaWJsaW5nIChub2RlKSB7CiAgICByZXR1cm4gbm9kZS5uZXh0U2libGluZwogIH0KCiAgZnVuY3Rpb24gdGFnTmFtZSAobm9kZSkgewogICAgcmV0dXJuIG5vZGUudGFnTmFtZQogIH0KCiAgZnVuY3Rpb24gc2V0VGV4dENvbnRlbnQgKG5vZGUsIHRleHQpIHsKICAgIG5vZGUudGV4dENvbnRlbnQgPSB0ZXh0OwogIH0KCiAgZnVuY3Rpb24gc2V0U3R5bGVTY29wZSAobm9kZSwgc2NvcGVJZCkgewogICAgbm9kZS5zZXRBdHRyaWJ1dGUoc2NvcGVJZCwgJycpOwogIH0KCiAgdmFyIG5vZGVPcHMgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7CiAgICBjcmVhdGVFbGVtZW50OiBjcmVhdGVFbGVtZW50JDEsCiAgICBjcmVhdGVFbGVtZW50TlM6IGNyZWF0ZUVsZW1lbnROUywKICAgIGNyZWF0ZVRleHROb2RlOiBjcmVhdGVUZXh0Tm9kZSwKICAgIGNyZWF0ZUNvbW1lbnQ6IGNyZWF0ZUNvbW1lbnQsCiAgICBpbnNlcnRCZWZvcmU6IGluc2VydEJlZm9yZSwKICAgIHJlbW92ZUNoaWxkOiByZW1vdmVDaGlsZCwKICAgIGFwcGVuZENoaWxkOiBhcHBlbmRDaGlsZCwKICAgIHBhcmVudE5vZGU6IHBhcmVudE5vZGUsCiAgICBuZXh0U2libGluZzogbmV4dFNpYmxpbmcsCiAgICB0YWdOYW1lOiB0YWdOYW1lLAogICAgc2V0VGV4dENvbnRlbnQ6IHNldFRleHRDb250ZW50LAogICAgc2V0U3R5bGVTY29wZTogc2V0U3R5bGVTY29wZQogIH0pOwoKICAvKiAgKi8KCiAgdmFyIHJlZiA9IHsKICAgIGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlIChfLCB2bm9kZSkgewogICAgICByZWdpc3RlclJlZih2bm9kZSk7CiAgICB9LAogICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUgKG9sZFZub2RlLCB2bm9kZSkgewogICAgICBpZiAob2xkVm5vZGUuZGF0YS5yZWYgIT09IHZub2RlLmRhdGEucmVmKSB7CiAgICAgICAgcmVnaXN0ZXJSZWYob2xkVm5vZGUsIHRydWUpOwogICAgICAgIHJlZ2lzdGVyUmVmKHZub2RlKTsKICAgICAgfQogICAgfSwKICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3kgKHZub2RlKSB7CiAgICAgIHJlZ2lzdGVyUmVmKHZub2RlLCB0cnVlKTsKICAgIH0KICB9OwoKICBmdW5jdGlvbiByZWdpc3RlclJlZiAodm5vZGUsIGlzUmVtb3ZhbCkgewogICAgdmFyIGtleSA9IHZub2RlLmRhdGEucmVmOwogICAgaWYgKCFpc0RlZihrZXkpKSB7IHJldHVybiB9CgogICAgdmFyIHZtID0gdm5vZGUuY29udGV4dDsKICAgIHZhciByZWYgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSB8fCB2bm9kZS5lbG07CiAgICB2YXIgcmVmcyA9IHZtLiRyZWZzOwogICAgaWYgKGlzUmVtb3ZhbCkgewogICAgICBpZiAoQXJyYXkuaXNBcnJheShyZWZzW2tleV0pKSB7CiAgICAgICAgcmVtb3ZlKHJlZnNba2V5XSwgcmVmKTsKICAgICAgfSBlbHNlIGlmIChyZWZzW2tleV0gPT09IHJlZikgewogICAgICAgIHJlZnNba2V5XSA9IHVuZGVmaW5lZDsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKHZub2RlLmRhdGEucmVmSW5Gb3IpIHsKICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVmc1trZXldKSkgewogICAgICAgICAgcmVmc1trZXldID0gW3JlZl07CiAgICAgICAgfSBlbHNlIGlmIChyZWZzW2tleV0uaW5kZXhPZihyZWYpIDwgMCkgewogICAgICAgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lCiAgICAgICAgICByZWZzW2tleV0ucHVzaChyZWYpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICByZWZzW2tleV0gPSByZWY7CiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqIFZpcnR1YWwgRE9NIHBhdGNoaW5nIGFsZ29yaXRobSBiYXNlZCBvbiBTbmFiYmRvbSBieQogICAqIFNpbW9uIEZyaWlzIFZpbmR1bSAoQHBhbGRlcGluZCkKICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UKICAgKiBodHRwczovL2dpdGh1Yi5jb20vcGFsZGVwaW5kL3NuYWJiZG9tL2Jsb2IvbWFzdGVyL0xJQ0VOU0UKICAgKgogICAqIG1vZGlmaWVkIGJ5IEV2YW4gWW91IChAeXl4OTkwODAzKQogICAqCiAgICogTm90IHR5cGUtY2hlY2tpbmcgdGhpcyBiZWNhdXNlIHRoaXMgZmlsZSBpcyBwZXJmLWNyaXRpY2FsIGFuZCB0aGUgY29zdAogICAqIG9mIG1ha2luZyBmbG93IHVuZGVyc3RhbmQgaXQgaXMgbm90IHdvcnRoIGl0LgogICAqLwoKICB2YXIgZW1wdHlOb2RlID0gbmV3IFZOb2RlKCcnLCB7fSwgW10pOwoKICB2YXIgaG9va3MgPSBbJ2NyZWF0ZScsICdhY3RpdmF0ZScsICd1cGRhdGUnLCAncmVtb3ZlJywgJ2Rlc3Ryb3knXTsKCiAgZnVuY3Rpb24gc2FtZVZub2RlIChhLCBiKSB7CiAgICByZXR1cm4gKAogICAgICBhLmtleSA9PT0gYi5rZXkgJiYgKAogICAgICAgICgKICAgICAgICAgIGEudGFnID09PSBiLnRhZyAmJgogICAgICAgICAgYS5pc0NvbW1lbnQgPT09IGIuaXNDb21tZW50ICYmCiAgICAgICAgICBpc0RlZihhLmRhdGEpID09PSBpc0RlZihiLmRhdGEpICYmCiAgICAgICAgICBzYW1lSW5wdXRUeXBlKGEsIGIpCiAgICAgICAgKSB8fCAoCiAgICAgICAgICBpc1RydWUoYS5pc0FzeW5jUGxhY2Vob2xkZXIpICYmCiAgICAgICAgICBhLmFzeW5jRmFjdG9yeSA9PT0gYi5hc3luY0ZhY3RvcnkgJiYKICAgICAgICAgIGlzVW5kZWYoYi5hc3luY0ZhY3RvcnkuZXJyb3IpCiAgICAgICAgKQogICAgICApCiAgICApCiAgfQoKICBmdW5jdGlvbiBzYW1lSW5wdXRUeXBlIChhLCBiKSB7CiAgICBpZiAoYS50YWcgIT09ICdpbnB1dCcpIHsgcmV0dXJuIHRydWUgfQogICAgdmFyIGk7CiAgICB2YXIgdHlwZUEgPSBpc0RlZihpID0gYS5kYXRhKSAmJiBpc0RlZihpID0gaS5hdHRycykgJiYgaS50eXBlOwogICAgdmFyIHR5cGVCID0gaXNEZWYoaSA9IGIuZGF0YSkgJiYgaXNEZWYoaSA9IGkuYXR0cnMpICYmIGkudHlwZTsKICAgIHJldHVybiB0eXBlQSA9PT0gdHlwZUIgfHwgaXNUZXh0SW5wdXRUeXBlKHR5cGVBKSAmJiBpc1RleHRJbnB1dFR5cGUodHlwZUIpCiAgfQoKICBmdW5jdGlvbiBjcmVhdGVLZXlUb09sZElkeCAoY2hpbGRyZW4sIGJlZ2luSWR4LCBlbmRJZHgpIHsKICAgIHZhciBpLCBrZXk7CiAgICB2YXIgbWFwID0ge307CiAgICBmb3IgKGkgPSBiZWdpbklkeDsgaSA8PSBlbmRJZHg7ICsraSkgewogICAgICBrZXkgPSBjaGlsZHJlbltpXS5rZXk7CiAgICAgIGlmIChpc0RlZihrZXkpKSB7IG1hcFtrZXldID0gaTsgfQogICAgfQogICAgcmV0dXJuIG1hcAogIH0KCiAgZnVuY3Rpb24gY3JlYXRlUGF0Y2hGdW5jdGlvbiAoYmFja2VuZCkgewogICAgdmFyIGksIGo7CiAgICB2YXIgY2JzID0ge307CgogICAgdmFyIG1vZHVsZXMgPSBiYWNrZW5kLm1vZHVsZXM7CiAgICB2YXIgbm9kZU9wcyA9IGJhY2tlbmQubm9kZU9wczsKCiAgICBmb3IgKGkgPSAwOyBpIDwgaG9va3MubGVuZ3RoOyArK2kpIHsKICAgICAgY2JzW2hvb2tzW2ldXSA9IFtdOwogICAgICBmb3IgKGogPSAwOyBqIDwgbW9kdWxlcy5sZW5ndGg7ICsraikgewogICAgICAgIGlmIChpc0RlZihtb2R1bGVzW2pdW2hvb2tzW2ldXSkpIHsKICAgICAgICAgIGNic1tob29rc1tpXV0ucHVzaChtb2R1bGVzW2pdW2hvb2tzW2ldXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZW1wdHlOb2RlQXQgKGVsbSkgewogICAgICByZXR1cm4gbmV3IFZOb2RlKG5vZGVPcHMudGFnTmFtZShlbG0pLnRvTG93ZXJDYXNlKCksIHt9LCBbXSwgdW5kZWZpbmVkLCBlbG0pCiAgICB9CgogICAgZnVuY3Rpb24gY3JlYXRlUm1DYiAoY2hpbGRFbG0sIGxpc3RlbmVycykgewogICAgICBmdW5jdGlvbiByZW1vdmUkJDEgKCkgewogICAgICAgIGlmICgtLXJlbW92ZSQkMS5saXN0ZW5lcnMgPT09IDApIHsKICAgICAgICAgIHJlbW92ZU5vZGUoY2hpbGRFbG0pOwogICAgICAgIH0KICAgICAgfQogICAgICByZW1vdmUkJDEubGlzdGVuZXJzID0gbGlzdGVuZXJzOwogICAgICByZXR1cm4gcmVtb3ZlJCQxCiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlTm9kZSAoZWwpIHsKICAgICAgdmFyIHBhcmVudCA9IG5vZGVPcHMucGFyZW50Tm9kZShlbCk7CiAgICAgIC8vIGVsZW1lbnQgbWF5IGhhdmUgYWxyZWFkeSBiZWVuIHJlbW92ZWQgZHVlIHRvIHYtaHRtbCAvIHYtdGV4dAogICAgICBpZiAoaXNEZWYocGFyZW50KSkgewogICAgICAgIG5vZGVPcHMucmVtb3ZlQ2hpbGQocGFyZW50LCBlbCk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBpc1Vua25vd25FbGVtZW50JCQxICh2bm9kZSwgaW5WUHJlKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgIWluVlByZSAmJgogICAgICAgICF2bm9kZS5ucyAmJgogICAgICAgICEoCiAgICAgICAgICBjb25maWcuaWdub3JlZEVsZW1lbnRzLmxlbmd0aCAmJgogICAgICAgICAgY29uZmlnLmlnbm9yZWRFbGVtZW50cy5zb21lKGZ1bmN0aW9uIChpZ25vcmUpIHsKICAgICAgICAgICAgcmV0dXJuIGlzUmVnRXhwKGlnbm9yZSkKICAgICAgICAgICAgICA/IGlnbm9yZS50ZXN0KHZub2RlLnRhZykKICAgICAgICAgICAgICA6IGlnbm9yZSA9PT0gdm5vZGUudGFnCiAgICAgICAgICB9KQogICAgICAgICkgJiYKICAgICAgICBjb25maWcuaXNVbmtub3duRWxlbWVudCh2bm9kZS50YWcpCiAgICAgICkKICAgIH0KCiAgICB2YXIgY3JlYXRpbmdFbG1JblZQcmUgPSAwOwoKICAgIGZ1bmN0aW9uIGNyZWF0ZUVsbSAoCiAgICAgIHZub2RlLAogICAgICBpbnNlcnRlZFZub2RlUXVldWUsCiAgICAgIHBhcmVudEVsbSwKICAgICAgcmVmRWxtLAogICAgICBuZXN0ZWQsCiAgICAgIG93bmVyQXJyYXksCiAgICAgIGluZGV4CiAgICApIHsKICAgICAgaWYgKGlzRGVmKHZub2RlLmVsbSkgJiYgaXNEZWYob3duZXJBcnJheSkpIHsKICAgICAgICAvLyBUaGlzIHZub2RlIHdhcyB1c2VkIGluIGEgcHJldmlvdXMgcmVuZGVyIQogICAgICAgIC8vIG5vdyBpdCdzIHVzZWQgYXMgYSBuZXcgbm9kZSwgb3ZlcndyaXRpbmcgaXRzIGVsbSB3b3VsZCBjYXVzZQogICAgICAgIC8vIHBvdGVudGlhbCBwYXRjaCBlcnJvcnMgZG93biB0aGUgcm9hZCB3aGVuIGl0J3MgdXNlZCBhcyBhbiBpbnNlcnRpb24KICAgICAgICAvLyByZWZlcmVuY2Ugbm9kZS4gSW5zdGVhZCwgd2UgY2xvbmUgdGhlIG5vZGUgb24tZGVtYW5kIGJlZm9yZSBjcmVhdGluZwogICAgICAgIC8vIGFzc29jaWF0ZWQgRE9NIGVsZW1lbnQgZm9yIGl0LgogICAgICAgIHZub2RlID0gb3duZXJBcnJheVtpbmRleF0gPSBjbG9uZVZOb2RlKHZub2RlKTsKICAgICAgfQoKICAgICAgdm5vZGUuaXNSb290SW5zZXJ0ID0gIW5lc3RlZDsgLy8gZm9yIHRyYW5zaXRpb24gZW50ZXIgY2hlY2sKICAgICAgaWYgKGNyZWF0ZUNvbXBvbmVudCh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBwYXJlbnRFbG0sIHJlZkVsbSkpIHsKICAgICAgICByZXR1cm4KICAgICAgfQoKICAgICAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhOwogICAgICB2YXIgY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbjsKICAgICAgdmFyIHRhZyA9IHZub2RlLnRhZzsKICAgICAgaWYgKGlzRGVmKHRhZykpIHsKICAgICAgICB7CiAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLnByZSkgewogICAgICAgICAgICBjcmVhdGluZ0VsbUluVlByZSsrOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGlzVW5rbm93bkVsZW1lbnQkJDEodm5vZGUsIGNyZWF0aW5nRWxtSW5WUHJlKSkgewogICAgICAgICAgICB3YXJuKAogICAgICAgICAgICAgICdVbmtub3duIGN1c3RvbSBlbGVtZW50OiA8JyArIHRhZyArICc+IC0gZGlkIHlvdSAnICsKICAgICAgICAgICAgICAncmVnaXN0ZXIgdGhlIGNvbXBvbmVudCBjb3JyZWN0bHk/IEZvciByZWN1cnNpdmUgY29tcG9uZW50cywgJyArCiAgICAgICAgICAgICAgJ21ha2Ugc3VyZSB0byBwcm92aWRlIHRoZSAibmFtZSIgb3B0aW9uLicsCiAgICAgICAgICAgICAgdm5vZGUuY29udGV4dAogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdm5vZGUuZWxtID0gdm5vZGUubnMKICAgICAgICAgID8gbm9kZU9wcy5jcmVhdGVFbGVtZW50TlModm5vZGUubnMsIHRhZykKICAgICAgICAgIDogbm9kZU9wcy5jcmVhdGVFbGVtZW50KHRhZywgdm5vZGUpOwogICAgICAgIHNldFNjb3BlKHZub2RlKTsKCiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgICAgewogICAgICAgICAgY3JlYXRlQ2hpbGRyZW4odm5vZGUsIGNoaWxkcmVuLCBpbnNlcnRlZFZub2RlUXVldWUpOwogICAgICAgICAgaWYgKGlzRGVmKGRhdGEpKSB7CiAgICAgICAgICAgIGludm9rZUNyZWF0ZUhvb2tzKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpOwogICAgICAgICAgfQogICAgICAgICAgaW5zZXJ0KHBhcmVudEVsbSwgdm5vZGUuZWxtLCByZWZFbG0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5wcmUpIHsKICAgICAgICAgIGNyZWF0aW5nRWxtSW5WUHJlLS07CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGlzVHJ1ZSh2bm9kZS5pc0NvbW1lbnQpKSB7CiAgICAgICAgdm5vZGUuZWxtID0gbm9kZU9wcy5jcmVhdGVDb21tZW50KHZub2RlLnRleHQpOwogICAgICAgIGluc2VydChwYXJlbnRFbG0sIHZub2RlLmVsbSwgcmVmRWxtKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2bm9kZS5lbG0gPSBub2RlT3BzLmNyZWF0ZVRleHROb2RlKHZub2RlLnRleHQpOwogICAgICAgIGluc2VydChwYXJlbnRFbG0sIHZub2RlLmVsbSwgcmVmRWxtKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudCAodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCByZWZFbG0pIHsKICAgICAgdmFyIGkgPSB2bm9kZS5kYXRhOwogICAgICBpZiAoaXNEZWYoaSkpIHsKICAgICAgICB2YXIgaXNSZWFjdGl2YXRlZCA9IGlzRGVmKHZub2RlLmNvbXBvbmVudEluc3RhbmNlKSAmJiBpLmtlZXBBbGl2ZTsKICAgICAgICBpZiAoaXNEZWYoaSA9IGkuaG9vaykgJiYgaXNEZWYoaSA9IGkuaW5pdCkpIHsKICAgICAgICAgIGkodm5vZGUsIGZhbHNlIC8qIGh5ZHJhdGluZyAqLyk7CiAgICAgICAgfQogICAgICAgIC8vIGFmdGVyIGNhbGxpbmcgdGhlIGluaXQgaG9vaywgaWYgdGhlIHZub2RlIGlzIGEgY2hpbGQgY29tcG9uZW50CiAgICAgICAgLy8gaXQgc2hvdWxkJ3ZlIGNyZWF0ZWQgYSBjaGlsZCBpbnN0YW5jZSBhbmQgbW91bnRlZCBpdC4gdGhlIGNoaWxkCiAgICAgICAgLy8gY29tcG9uZW50IGFsc28gaGFzIHNldCB0aGUgcGxhY2Vob2xkZXIgdm5vZGUncyBlbG0uCiAgICAgICAgLy8gaW4gdGhhdCBjYXNlIHdlIGNhbiBqdXN0IHJldHVybiB0aGUgZWxlbWVudCBhbmQgYmUgZG9uZS4KICAgICAgICBpZiAoaXNEZWYodm5vZGUuY29tcG9uZW50SW5zdGFuY2UpKSB7CiAgICAgICAgICBpbml0Q29tcG9uZW50KHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpOwogICAgICAgICAgaW5zZXJ0KHBhcmVudEVsbSwgdm5vZGUuZWxtLCByZWZFbG0pOwogICAgICAgICAgaWYgKGlzVHJ1ZShpc1JlYWN0aXZhdGVkKSkgewogICAgICAgICAgICByZWFjdGl2YXRlQ29tcG9uZW50KHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gaW5pdENvbXBvbmVudCAodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSkgewogICAgICBpZiAoaXNEZWYodm5vZGUuZGF0YS5wZW5kaW5nSW5zZXJ0KSkgewogICAgICAgIGluc2VydGVkVm5vZGVRdWV1ZS5wdXNoLmFwcGx5KGluc2VydGVkVm5vZGVRdWV1ZSwgdm5vZGUuZGF0YS5wZW5kaW5nSW5zZXJ0KTsKICAgICAgICB2bm9kZS5kYXRhLnBlbmRpbmdJbnNlcnQgPSBudWxsOwogICAgICB9CiAgICAgIHZub2RlLmVsbSA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlLiRlbDsKICAgICAgaWYgKGlzUGF0Y2hhYmxlKHZub2RlKSkgewogICAgICAgIGludm9rZUNyZWF0ZUhvb2tzKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpOwogICAgICAgIHNldFNjb3BlKHZub2RlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBlbXB0eSBjb21wb25lbnQgcm9vdC4KICAgICAgICAvLyBza2lwIGFsbCBlbGVtZW50LXJlbGF0ZWQgbW9kdWxlcyBleGNlcHQgZm9yIHJlZiAoIzM0NTUpCiAgICAgICAgcmVnaXN0ZXJSZWYodm5vZGUpOwogICAgICAgIC8vIG1ha2Ugc3VyZSB0byBpbnZva2UgdGhlIGluc2VydCBob29rCiAgICAgICAgaW5zZXJ0ZWRWbm9kZVF1ZXVlLnB1c2godm5vZGUpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVhY3RpdmF0ZUNvbXBvbmVudCAodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCByZWZFbG0pIHsKICAgICAgdmFyIGk7CiAgICAgIC8vIGhhY2sgZm9yICM0MzM5OiBhIHJlYWN0aXZhdGVkIGNvbXBvbmVudCB3aXRoIGlubmVyIHRyYW5zaXRpb24KICAgICAgLy8gZG9lcyBub3QgdHJpZ2dlciBiZWNhdXNlIHRoZSBpbm5lciBub2RlJ3MgY3JlYXRlZCBob29rcyBhcmUgbm90IGNhbGxlZAogICAgICAvLyBhZ2Fpbi4gSXQncyBub3QgaWRlYWwgdG8gaW52b2x2ZSBtb2R1bGUtc3BlY2lmaWMgbG9naWMgaW4gaGVyZSBidXQKICAgICAgLy8gdGhlcmUgZG9lc24ndCBzZWVtIHRvIGJlIGEgYmV0dGVyIHdheSB0byBkbyBpdC4KICAgICAgdmFyIGlubmVyTm9kZSA9IHZub2RlOwogICAgICB3aGlsZSAoaW5uZXJOb2RlLmNvbXBvbmVudEluc3RhbmNlKSB7CiAgICAgICAgaW5uZXJOb2RlID0gaW5uZXJOb2RlLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZTsKICAgICAgICBpZiAoaXNEZWYoaSA9IGlubmVyTm9kZS5kYXRhKSAmJiBpc0RlZihpID0gaS50cmFuc2l0aW9uKSkgewogICAgICAgICAgZm9yIChpID0gMDsgaSA8IGNicy5hY3RpdmF0ZS5sZW5ndGg7ICsraSkgewogICAgICAgICAgICBjYnMuYWN0aXZhdGVbaV0oZW1wdHlOb2RlLCBpbm5lck5vZGUpOwogICAgICAgICAgfQogICAgICAgICAgaW5zZXJ0ZWRWbm9kZVF1ZXVlLnB1c2goaW5uZXJOb2RlKTsKICAgICAgICAgIGJyZWFrCiAgICAgICAgfQogICAgICB9CiAgICAgIC8vIHVubGlrZSBhIG5ld2x5IGNyZWF0ZWQgY29tcG9uZW50LAogICAgICAvLyBhIHJlYWN0aXZhdGVkIGtlZXAtYWxpdmUgY29tcG9uZW50IGRvZXNuJ3QgaW5zZXJ0IGl0c2VsZgogICAgICBpbnNlcnQocGFyZW50RWxtLCB2bm9kZS5lbG0sIHJlZkVsbSk7CiAgICB9CgogICAgZnVuY3Rpb24gaW5zZXJ0IChwYXJlbnQsIGVsbSwgcmVmJCQxKSB7CiAgICAgIGlmIChpc0RlZihwYXJlbnQpKSB7CiAgICAgICAgaWYgKGlzRGVmKHJlZiQkMSkpIHsKICAgICAgICAgIGlmIChub2RlT3BzLnBhcmVudE5vZGUocmVmJCQxKSA9PT0gcGFyZW50KSB7CiAgICAgICAgICAgIG5vZGVPcHMuaW5zZXJ0QmVmb3JlKHBhcmVudCwgZWxtLCByZWYkJDEpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBub2RlT3BzLmFwcGVuZENoaWxkKHBhcmVudCwgZWxtKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjcmVhdGVDaGlsZHJlbiAodm5vZGUsIGNoaWxkcmVuLCBpbnNlcnRlZFZub2RlUXVldWUpIHsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKSB7CiAgICAgICAgewogICAgICAgICAgY2hlY2tEdXBsaWNhdGVLZXlzKGNoaWxkcmVuKTsKICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7ICsraSkgewogICAgICAgICAgY3JlYXRlRWxtKGNoaWxkcmVuW2ldLCBpbnNlcnRlZFZub2RlUXVldWUsIHZub2RlLmVsbSwgbnVsbCwgdHJ1ZSwgY2hpbGRyZW4sIGkpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChpc1ByaW1pdGl2ZSh2bm9kZS50ZXh0KSkgewogICAgICAgIG5vZGVPcHMuYXBwZW5kQ2hpbGQodm5vZGUuZWxtLCBub2RlT3BzLmNyZWF0ZVRleHROb2RlKFN0cmluZyh2bm9kZS50ZXh0KSkpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gaXNQYXRjaGFibGUgKHZub2RlKSB7CiAgICAgIHdoaWxlICh2bm9kZS5jb21wb25lbnRJbnN0YW5jZSkgewogICAgICAgIHZub2RlID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UuX3Zub2RlOwogICAgICB9CiAgICAgIHJldHVybiBpc0RlZih2bm9kZS50YWcpCiAgICB9CgogICAgZnVuY3Rpb24gaW52b2tlQ3JlYXRlSG9va3MgKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpIHsKICAgICAgZm9yICh2YXIgaSQxID0gMDsgaSQxIDwgY2JzLmNyZWF0ZS5sZW5ndGg7ICsraSQxKSB7CiAgICAgICAgY2JzLmNyZWF0ZVtpJDFdKGVtcHR5Tm9kZSwgdm5vZGUpOwogICAgICB9CiAgICAgIGkgPSB2bm9kZS5kYXRhLmhvb2s7IC8vIFJldXNlIHZhcmlhYmxlCiAgICAgIGlmIChpc0RlZihpKSkgewogICAgICAgIGlmIChpc0RlZihpLmNyZWF0ZSkpIHsgaS5jcmVhdGUoZW1wdHlOb2RlLCB2bm9kZSk7IH0KICAgICAgICBpZiAoaXNEZWYoaS5pbnNlcnQpKSB7IGluc2VydGVkVm5vZGVRdWV1ZS5wdXNoKHZub2RlKTsgfQogICAgICB9CiAgICB9CgogICAgLy8gc2V0IHNjb3BlIGlkIGF0dHJpYnV0ZSBmb3Igc2NvcGVkIENTUy4KICAgIC8vIHRoaXMgaXMgaW1wbGVtZW50ZWQgYXMgYSBzcGVjaWFsIGNhc2UgdG8gYXZvaWQgdGhlIG92ZXJoZWFkCiAgICAvLyBvZiBnb2luZyB0aHJvdWdoIHRoZSBub3JtYWwgYXR0cmlidXRlIHBhdGNoaW5nIHByb2Nlc3MuCiAgICBmdW5jdGlvbiBzZXRTY29wZSAodm5vZGUpIHsKICAgICAgdmFyIGk7CiAgICAgIGlmIChpc0RlZihpID0gdm5vZGUuZm5TY29wZUlkKSkgewogICAgICAgIG5vZGVPcHMuc2V0U3R5bGVTY29wZSh2bm9kZS5lbG0sIGkpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBhbmNlc3RvciA9IHZub2RlOwogICAgICAgIHdoaWxlIChhbmNlc3RvcikgewogICAgICAgICAgaWYgKGlzRGVmKGkgPSBhbmNlc3Rvci5jb250ZXh0KSAmJiBpc0RlZihpID0gaS4kb3B0aW9ucy5fc2NvcGVJZCkpIHsKICAgICAgICAgICAgbm9kZU9wcy5zZXRTdHlsZVNjb3BlKHZub2RlLmVsbSwgaSk7CiAgICAgICAgICB9CiAgICAgICAgICBhbmNlc3RvciA9IGFuY2VzdG9yLnBhcmVudDsKICAgICAgICB9CiAgICAgIH0KICAgICAgLy8gZm9yIHNsb3QgY29udGVudCB0aGV5IHNob3VsZCBhbHNvIGdldCB0aGUgc2NvcGVJZCBmcm9tIHRoZSBob3N0IGluc3RhbmNlLgogICAgICBpZiAoaXNEZWYoaSA9IGFjdGl2ZUluc3RhbmNlKSAmJgogICAgICAgIGkgIT09IHZub2RlLmNvbnRleHQgJiYKICAgICAgICBpICE9PSB2bm9kZS5mbkNvbnRleHQgJiYKICAgICAgICBpc0RlZihpID0gaS4kb3B0aW9ucy5fc2NvcGVJZCkKICAgICAgKSB7CiAgICAgICAgbm9kZU9wcy5zZXRTdHlsZVNjb3BlKHZub2RlLmVsbSwgaSk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBhZGRWbm9kZXMgKHBhcmVudEVsbSwgcmVmRWxtLCB2bm9kZXMsIHN0YXJ0SWR4LCBlbmRJZHgsIGluc2VydGVkVm5vZGVRdWV1ZSkgewogICAgICBmb3IgKDsgc3RhcnRJZHggPD0gZW5kSWR4OyArK3N0YXJ0SWR4KSB7CiAgICAgICAgY3JlYXRlRWxtKHZub2Rlc1tzdGFydElkeF0sIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCByZWZFbG0sIGZhbHNlLCB2bm9kZXMsIHN0YXJ0SWR4KTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGludm9rZURlc3Ryb3lIb29rICh2bm9kZSkgewogICAgICB2YXIgaSwgajsKICAgICAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhOwogICAgICBpZiAoaXNEZWYoZGF0YSkpIHsKICAgICAgICBpZiAoaXNEZWYoaSA9IGRhdGEuaG9vaykgJiYgaXNEZWYoaSA9IGkuZGVzdHJveSkpIHsgaSh2bm9kZSk7IH0KICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY2JzLmRlc3Ryb3kubGVuZ3RoOyArK2kpIHsgY2JzLmRlc3Ryb3lbaV0odm5vZGUpOyB9CiAgICAgIH0KICAgICAgaWYgKGlzRGVmKGkgPSB2bm9kZS5jaGlsZHJlbikpIHsKICAgICAgICBmb3IgKGogPSAwOyBqIDwgdm5vZGUuY2hpbGRyZW4ubGVuZ3RoOyArK2opIHsKICAgICAgICAgIGludm9rZURlc3Ryb3lIb29rKHZub2RlLmNoaWxkcmVuW2pdKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmVWbm9kZXMgKHBhcmVudEVsbSwgdm5vZGVzLCBzdGFydElkeCwgZW5kSWR4KSB7CiAgICAgIGZvciAoOyBzdGFydElkeCA8PSBlbmRJZHg7ICsrc3RhcnRJZHgpIHsKICAgICAgICB2YXIgY2ggPSB2bm9kZXNbc3RhcnRJZHhdOwogICAgICAgIGlmIChpc0RlZihjaCkpIHsKICAgICAgICAgIGlmIChpc0RlZihjaC50YWcpKSB7CiAgICAgICAgICAgIHJlbW92ZUFuZEludm9rZVJlbW92ZUhvb2soY2gpOwogICAgICAgICAgICBpbnZva2VEZXN0cm95SG9vayhjaCk7CiAgICAgICAgICB9IGVsc2UgeyAvLyBUZXh0IG5vZGUKICAgICAgICAgICAgcmVtb3ZlTm9kZShjaC5lbG0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZUFuZEludm9rZVJlbW92ZUhvb2sgKHZub2RlLCBybSkgewogICAgICBpZiAoaXNEZWYocm0pIHx8IGlzRGVmKHZub2RlLmRhdGEpKSB7CiAgICAgICAgdmFyIGk7CiAgICAgICAgdmFyIGxpc3RlbmVycyA9IGNicy5yZW1vdmUubGVuZ3RoICsgMTsKICAgICAgICBpZiAoaXNEZWYocm0pKSB7CiAgICAgICAgICAvLyB3ZSBoYXZlIGEgcmVjdXJzaXZlbHkgcGFzc2VkIGRvd24gcm0gY2FsbGJhY2sKICAgICAgICAgIC8vIGluY3JlYXNlIHRoZSBsaXN0ZW5lcnMgY291bnQKICAgICAgICAgIHJtLmxpc3RlbmVycyArPSBsaXN0ZW5lcnM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIGRpcmVjdGx5IHJlbW92aW5nCiAgICAgICAgICBybSA9IGNyZWF0ZVJtQ2Iodm5vZGUuZWxtLCBsaXN0ZW5lcnMpOwogICAgICAgIH0KICAgICAgICAvLyByZWN1cnNpdmVseSBpbnZva2UgaG9va3Mgb24gY2hpbGQgY29tcG9uZW50IHJvb3Qgbm9kZQogICAgICAgIGlmIChpc0RlZihpID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UpICYmIGlzRGVmKGkgPSBpLl92bm9kZSkgJiYgaXNEZWYoaS5kYXRhKSkgewogICAgICAgICAgcmVtb3ZlQW5kSW52b2tlUmVtb3ZlSG9vayhpLCBybSk7CiAgICAgICAgfQogICAgICAgIGZvciAoaSA9IDA7IGkgPCBjYnMucmVtb3ZlLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICBjYnMucmVtb3ZlW2ldKHZub2RlLCBybSk7CiAgICAgICAgfQogICAgICAgIGlmIChpc0RlZihpID0gdm5vZGUuZGF0YS5ob29rKSAmJiBpc0RlZihpID0gaS5yZW1vdmUpKSB7CiAgICAgICAgICBpKHZub2RlLCBybSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJtKCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHJlbW92ZU5vZGUodm5vZGUuZWxtKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZUNoaWxkcmVuIChwYXJlbnRFbG0sIG9sZENoLCBuZXdDaCwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCByZW1vdmVPbmx5KSB7CiAgICAgIHZhciBvbGRTdGFydElkeCA9IDA7CiAgICAgIHZhciBuZXdTdGFydElkeCA9IDA7CiAgICAgIHZhciBvbGRFbmRJZHggPSBvbGRDaC5sZW5ndGggLSAxOwogICAgICB2YXIgb2xkU3RhcnRWbm9kZSA9IG9sZENoWzBdOwogICAgICB2YXIgb2xkRW5kVm5vZGUgPSBvbGRDaFtvbGRFbmRJZHhdOwogICAgICB2YXIgbmV3RW5kSWR4ID0gbmV3Q2gubGVuZ3RoIC0gMTsKICAgICAgdmFyIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFswXTsKICAgICAgdmFyIG5ld0VuZFZub2RlID0gbmV3Q2hbbmV3RW5kSWR4XTsKICAgICAgdmFyIG9sZEtleVRvSWR4LCBpZHhJbk9sZCwgdm5vZGVUb01vdmUsIHJlZkVsbTsKCiAgICAgIC8vIHJlbW92ZU9ubHkgaXMgYSBzcGVjaWFsIGZsYWcgdXNlZCBvbmx5IGJ5IDx0cmFuc2l0aW9uLWdyb3VwPgogICAgICAvLyB0byBlbnN1cmUgcmVtb3ZlZCBlbGVtZW50cyBzdGF5IGluIGNvcnJlY3QgcmVsYXRpdmUgcG9zaXRpb25zCiAgICAgIC8vIGR1cmluZyBsZWF2aW5nIHRyYW5zaXRpb25zCiAgICAgIHZhciBjYW5Nb3ZlID0gIXJlbW92ZU9ubHk7CgogICAgICB7CiAgICAgICAgY2hlY2tEdXBsaWNhdGVLZXlzKG5ld0NoKTsKICAgICAgfQoKICAgICAgd2hpbGUgKG9sZFN0YXJ0SWR4IDw9IG9sZEVuZElkeCAmJiBuZXdTdGFydElkeCA8PSBuZXdFbmRJZHgpIHsKICAgICAgICBpZiAoaXNVbmRlZihvbGRTdGFydFZub2RlKSkgewogICAgICAgICAgb2xkU3RhcnRWbm9kZSA9IG9sZENoWysrb2xkU3RhcnRJZHhdOyAvLyBWbm9kZSBoYXMgYmVlbiBtb3ZlZCBsZWZ0CiAgICAgICAgfSBlbHNlIGlmIChpc1VuZGVmKG9sZEVuZFZub2RlKSkgewogICAgICAgICAgb2xkRW5kVm5vZGUgPSBvbGRDaFstLW9sZEVuZElkeF07CiAgICAgICAgfSBlbHNlIGlmIChzYW1lVm5vZGUob2xkU3RhcnRWbm9kZSwgbmV3U3RhcnRWbm9kZSkpIHsKICAgICAgICAgIHBhdGNoVm5vZGUob2xkU3RhcnRWbm9kZSwgbmV3U3RhcnRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBuZXdDaCwgbmV3U3RhcnRJZHgpOwogICAgICAgICAgb2xkU3RhcnRWbm9kZSA9IG9sZENoWysrb2xkU3RhcnRJZHhdOwogICAgICAgICAgbmV3U3RhcnRWbm9kZSA9IG5ld0NoWysrbmV3U3RhcnRJZHhdOwogICAgICAgIH0gZWxzZSBpZiAoc2FtZVZub2RlKG9sZEVuZFZub2RlLCBuZXdFbmRWbm9kZSkpIHsKICAgICAgICAgIHBhdGNoVm5vZGUob2xkRW5kVm5vZGUsIG5ld0VuZFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIG5ld0NoLCBuZXdFbmRJZHgpOwogICAgICAgICAgb2xkRW5kVm5vZGUgPSBvbGRDaFstLW9sZEVuZElkeF07CiAgICAgICAgICBuZXdFbmRWbm9kZSA9IG5ld0NoWy0tbmV3RW5kSWR4XTsKICAgICAgICB9IGVsc2UgaWYgKHNhbWVWbm9kZShvbGRTdGFydFZub2RlLCBuZXdFbmRWbm9kZSkpIHsgLy8gVm5vZGUgbW92ZWQgcmlnaHQKICAgICAgICAgIHBhdGNoVm5vZGUob2xkU3RhcnRWbm9kZSwgbmV3RW5kVm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgbmV3Q2gsIG5ld0VuZElkeCk7CiAgICAgICAgICBjYW5Nb3ZlICYmIG5vZGVPcHMuaW5zZXJ0QmVmb3JlKHBhcmVudEVsbSwgb2xkU3RhcnRWbm9kZS5lbG0sIG5vZGVPcHMubmV4dFNpYmxpbmcob2xkRW5kVm5vZGUuZWxtKSk7CiAgICAgICAgICBvbGRTdGFydFZub2RlID0gb2xkQ2hbKytvbGRTdGFydElkeF07CiAgICAgICAgICBuZXdFbmRWbm9kZSA9IG5ld0NoWy0tbmV3RW5kSWR4XTsKICAgICAgICB9IGVsc2UgaWYgKHNhbWVWbm9kZShvbGRFbmRWbm9kZSwgbmV3U3RhcnRWbm9kZSkpIHsgLy8gVm5vZGUgbW92ZWQgbGVmdAogICAgICAgICAgcGF0Y2hWbm9kZShvbGRFbmRWbm9kZSwgbmV3U3RhcnRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBuZXdDaCwgbmV3U3RhcnRJZHgpOwogICAgICAgICAgY2FuTW92ZSAmJiBub2RlT3BzLmluc2VydEJlZm9yZShwYXJlbnRFbG0sIG9sZEVuZFZub2RlLmVsbSwgb2xkU3RhcnRWbm9kZS5lbG0pOwogICAgICAgICAgb2xkRW5kVm5vZGUgPSBvbGRDaFstLW9sZEVuZElkeF07CiAgICAgICAgICBuZXdTdGFydFZub2RlID0gbmV3Q2hbKytuZXdTdGFydElkeF07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChpc1VuZGVmKG9sZEtleVRvSWR4KSkgeyBvbGRLZXlUb0lkeCA9IGNyZWF0ZUtleVRvT2xkSWR4KG9sZENoLCBvbGRTdGFydElkeCwgb2xkRW5kSWR4KTsgfQogICAgICAgICAgaWR4SW5PbGQgPSBpc0RlZihuZXdTdGFydFZub2RlLmtleSkKICAgICAgICAgICAgPyBvbGRLZXlUb0lkeFtuZXdTdGFydFZub2RlLmtleV0KICAgICAgICAgICAgOiBmaW5kSWR4SW5PbGQobmV3U3RhcnRWbm9kZSwgb2xkQ2gsIG9sZFN0YXJ0SWR4LCBvbGRFbmRJZHgpOwogICAgICAgICAgaWYgKGlzVW5kZWYoaWR4SW5PbGQpKSB7IC8vIE5ldyBlbGVtZW50CiAgICAgICAgICAgIGNyZWF0ZUVsbShuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgb2xkU3RhcnRWbm9kZS5lbG0sIGZhbHNlLCBuZXdDaCwgbmV3U3RhcnRJZHgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdm5vZGVUb01vdmUgPSBvbGRDaFtpZHhJbk9sZF07CiAgICAgICAgICAgIGlmIChzYW1lVm5vZGUodm5vZGVUb01vdmUsIG5ld1N0YXJ0Vm5vZGUpKSB7CiAgICAgICAgICAgICAgcGF0Y2hWbm9kZSh2bm9kZVRvTW92ZSwgbmV3U3RhcnRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBuZXdDaCwgbmV3U3RhcnRJZHgpOwogICAgICAgICAgICAgIG9sZENoW2lkeEluT2xkXSA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICBjYW5Nb3ZlICYmIG5vZGVPcHMuaW5zZXJ0QmVmb3JlKHBhcmVudEVsbSwgdm5vZGVUb01vdmUuZWxtLCBvbGRTdGFydFZub2RlLmVsbSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gc2FtZSBrZXkgYnV0IGRpZmZlcmVudCBlbGVtZW50LiB0cmVhdCBhcyBuZXcgZWxlbWVudAogICAgICAgICAgICAgIGNyZWF0ZUVsbShuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgb2xkU3RhcnRWbm9kZS5lbG0sIGZhbHNlLCBuZXdDaCwgbmV3U3RhcnRJZHgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBuZXdTdGFydFZub2RlID0gbmV3Q2hbKytuZXdTdGFydElkeF07CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChvbGRTdGFydElkeCA+IG9sZEVuZElkeCkgewogICAgICAgIHJlZkVsbSA9IGlzVW5kZWYobmV3Q2hbbmV3RW5kSWR4ICsgMV0pID8gbnVsbCA6IG5ld0NoW25ld0VuZElkeCArIDFdLmVsbTsKICAgICAgICBhZGRWbm9kZXMocGFyZW50RWxtLCByZWZFbG0sIG5ld0NoLCBuZXdTdGFydElkeCwgbmV3RW5kSWR4LCBpbnNlcnRlZFZub2RlUXVldWUpOwogICAgICB9IGVsc2UgaWYgKG5ld1N0YXJ0SWR4ID4gbmV3RW5kSWR4KSB7CiAgICAgICAgcmVtb3ZlVm5vZGVzKHBhcmVudEVsbSwgb2xkQ2gsIG9sZFN0YXJ0SWR4LCBvbGRFbmRJZHgpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY2hlY2tEdXBsaWNhdGVLZXlzIChjaGlsZHJlbikgewogICAgICB2YXIgc2VlbktleXMgPSB7fTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciB2bm9kZSA9IGNoaWxkcmVuW2ldOwogICAgICAgIHZhciBrZXkgPSB2bm9kZS5rZXk7CiAgICAgICAgaWYgKGlzRGVmKGtleSkpIHsKICAgICAgICAgIGlmIChzZWVuS2V5c1trZXldKSB7CiAgICAgICAgICAgIHdhcm4oCiAgICAgICAgICAgICAgKCJEdXBsaWNhdGUga2V5cyBkZXRlY3RlZDogJyIgKyBrZXkgKyAiJy4gVGhpcyBtYXkgY2F1c2UgYW4gdXBkYXRlIGVycm9yLiIpLAogICAgICAgICAgICAgIHZub2RlLmNvbnRleHQKICAgICAgICAgICAgKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNlZW5LZXlzW2tleV0gPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmRJZHhJbk9sZCAobm9kZSwgb2xkQ2gsIHN0YXJ0LCBlbmQpIHsKICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHsKICAgICAgICB2YXIgYyA9IG9sZENoW2ldOwogICAgICAgIGlmIChpc0RlZihjKSAmJiBzYW1lVm5vZGUobm9kZSwgYykpIHsgcmV0dXJuIGkgfQogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcGF0Y2hWbm9kZSAoCiAgICAgIG9sZFZub2RlLAogICAgICB2bm9kZSwKICAgICAgaW5zZXJ0ZWRWbm9kZVF1ZXVlLAogICAgICBvd25lckFycmF5LAogICAgICBpbmRleCwKICAgICAgcmVtb3ZlT25seQogICAgKSB7CiAgICAgIGlmIChvbGRWbm9kZSA9PT0gdm5vZGUpIHsKICAgICAgICByZXR1cm4KICAgICAgfQoKICAgICAgaWYgKGlzRGVmKHZub2RlLmVsbSkgJiYgaXNEZWYob3duZXJBcnJheSkpIHsKICAgICAgICAvLyBjbG9uZSByZXVzZWQgdm5vZGUKICAgICAgICB2bm9kZSA9IG93bmVyQXJyYXlbaW5kZXhdID0gY2xvbmVWTm9kZSh2bm9kZSk7CiAgICAgIH0KCiAgICAgIHZhciBlbG0gPSB2bm9kZS5lbG0gPSBvbGRWbm9kZS5lbG07CgogICAgICBpZiAoaXNUcnVlKG9sZFZub2RlLmlzQXN5bmNQbGFjZWhvbGRlcikpIHsKICAgICAgICBpZiAoaXNEZWYodm5vZGUuYXN5bmNGYWN0b3J5LnJlc29sdmVkKSkgewogICAgICAgICAgaHlkcmF0ZShvbGRWbm9kZS5lbG0sIHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2bm9kZS5pc0FzeW5jUGxhY2Vob2xkZXIgPSB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4KICAgICAgfQoKICAgICAgLy8gcmV1c2UgZWxlbWVudCBmb3Igc3RhdGljIHRyZWVzLgogICAgICAvLyBub3RlIHdlIG9ubHkgZG8gdGhpcyBpZiB0aGUgdm5vZGUgaXMgY2xvbmVkIC0KICAgICAgLy8gaWYgdGhlIG5ldyBub2RlIGlzIG5vdCBjbG9uZWQgaXQgbWVhbnMgdGhlIHJlbmRlciBmdW5jdGlvbnMgaGF2ZSBiZWVuCiAgICAgIC8vIHJlc2V0IGJ5IHRoZSBob3QtcmVsb2FkLWFwaSBhbmQgd2UgbmVlZCB0byBkbyBhIHByb3BlciByZS1yZW5kZXIuCiAgICAgIGlmIChpc1RydWUodm5vZGUuaXNTdGF0aWMpICYmCiAgICAgICAgaXNUcnVlKG9sZFZub2RlLmlzU3RhdGljKSAmJgogICAgICAgIHZub2RlLmtleSA9PT0gb2xkVm5vZGUua2V5ICYmCiAgICAgICAgKGlzVHJ1ZSh2bm9kZS5pc0Nsb25lZCkgfHwgaXNUcnVlKHZub2RlLmlzT25jZSkpCiAgICAgICkgewogICAgICAgIHZub2RlLmNvbXBvbmVudEluc3RhbmNlID0gb2xkVm5vZGUuY29tcG9uZW50SW5zdGFuY2U7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIHZhciBpOwogICAgICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7CiAgICAgIGlmIChpc0RlZihkYXRhKSAmJiBpc0RlZihpID0gZGF0YS5ob29rKSAmJiBpc0RlZihpID0gaS5wcmVwYXRjaCkpIHsKICAgICAgICBpKG9sZFZub2RlLCB2bm9kZSk7CiAgICAgIH0KCiAgICAgIHZhciBvbGRDaCA9IG9sZFZub2RlLmNoaWxkcmVuOwogICAgICB2YXIgY2ggPSB2bm9kZS5jaGlsZHJlbjsKICAgICAgaWYgKGlzRGVmKGRhdGEpICYmIGlzUGF0Y2hhYmxlKHZub2RlKSkgewogICAgICAgIGZvciAoaSA9IDA7IGkgPCBjYnMudXBkYXRlLmxlbmd0aDsgKytpKSB7IGNicy51cGRhdGVbaV0ob2xkVm5vZGUsIHZub2RlKTsgfQogICAgICAgIGlmIChpc0RlZihpID0gZGF0YS5ob29rKSAmJiBpc0RlZihpID0gaS51cGRhdGUpKSB7IGkob2xkVm5vZGUsIHZub2RlKTsgfQogICAgICB9CiAgICAgIGlmIChpc1VuZGVmKHZub2RlLnRleHQpKSB7CiAgICAgICAgaWYgKGlzRGVmKG9sZENoKSAmJiBpc0RlZihjaCkpIHsKICAgICAgICAgIGlmIChvbGRDaCAhPT0gY2gpIHsgdXBkYXRlQ2hpbGRyZW4oZWxtLCBvbGRDaCwgY2gsIGluc2VydGVkVm5vZGVRdWV1ZSwgcmVtb3ZlT25seSk7IH0KICAgICAgICB9IGVsc2UgaWYgKGlzRGVmKGNoKSkgewogICAgICAgICAgewogICAgICAgICAgICBjaGVja0R1cGxpY2F0ZUtleXMoY2gpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGlzRGVmKG9sZFZub2RlLnRleHQpKSB7IG5vZGVPcHMuc2V0VGV4dENvbnRlbnQoZWxtLCAnJyk7IH0KICAgICAgICAgIGFkZFZub2RlcyhlbG0sIG51bGwsIGNoLCAwLCBjaC5sZW5ndGggLSAxLCBpbnNlcnRlZFZub2RlUXVldWUpOwogICAgICAgIH0gZWxzZSBpZiAoaXNEZWYob2xkQ2gpKSB7CiAgICAgICAgICByZW1vdmVWbm9kZXMoZWxtLCBvbGRDaCwgMCwgb2xkQ2gubGVuZ3RoIC0gMSk7CiAgICAgICAgfSBlbHNlIGlmIChpc0RlZihvbGRWbm9kZS50ZXh0KSkgewogICAgICAgICAgbm9kZU9wcy5zZXRUZXh0Q29udGVudChlbG0sICcnKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAob2xkVm5vZGUudGV4dCAhPT0gdm5vZGUudGV4dCkgewogICAgICAgIG5vZGVPcHMuc2V0VGV4dENvbnRlbnQoZWxtLCB2bm9kZS50ZXh0KTsKICAgICAgfQogICAgICBpZiAoaXNEZWYoZGF0YSkpIHsKICAgICAgICBpZiAoaXNEZWYoaSA9IGRhdGEuaG9vaykgJiYgaXNEZWYoaSA9IGkucG9zdHBhdGNoKSkgeyBpKG9sZFZub2RlLCB2bm9kZSk7IH0KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGludm9rZUluc2VydEhvb2sgKHZub2RlLCBxdWV1ZSwgaW5pdGlhbCkgewogICAgICAvLyBkZWxheSBpbnNlcnQgaG9va3MgZm9yIGNvbXBvbmVudCByb290IG5vZGVzLCBpbnZva2UgdGhlbSBhZnRlciB0aGUKICAgICAgLy8gZWxlbWVudCBpcyByZWFsbHkgaW5zZXJ0ZWQKICAgICAgaWYgKGlzVHJ1ZShpbml0aWFsKSAmJiBpc0RlZih2bm9kZS5wYXJlbnQpKSB7CiAgICAgICAgdm5vZGUucGFyZW50LmRhdGEucGVuZGluZ0luc2VydCA9IHF1ZXVlOwogICAgICB9IGVsc2UgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyArK2kpIHsKICAgICAgICAgIHF1ZXVlW2ldLmRhdGEuaG9vay5pbnNlcnQocXVldWVbaV0pOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHZhciBoeWRyYXRpb25CYWlsZWQgPSBmYWxzZTsKICAgIC8vIGxpc3Qgb2YgbW9kdWxlcyB0aGF0IGNhbiBza2lwIGNyZWF0ZSBob29rIGR1cmluZyBoeWRyYXRpb24gYmVjYXVzZSB0aGV5CiAgICAvLyBhcmUgYWxyZWFkeSByZW5kZXJlZCBvbiB0aGUgY2xpZW50IG9yIGhhcyBubyBuZWVkIGZvciBpbml0aWFsaXphdGlvbgogICAgLy8gTm90ZTogc3R5bGUgaXMgZXhjbHVkZWQgYmVjYXVzZSBpdCByZWxpZXMgb24gaW5pdGlhbCBjbG9uZSBmb3IgZnV0dXJlCiAgICAvLyBkZWVwIHVwZGF0ZXMgKCM3MDYzKS4KICAgIHZhciBpc1JlbmRlcmVkTW9kdWxlID0gbWFrZU1hcCgnYXR0cnMsY2xhc3Msc3RhdGljQ2xhc3Msc3RhdGljU3R5bGUsa2V5Jyk7CgogICAgLy8gTm90ZTogdGhpcyBpcyBhIGJyb3dzZXItb25seSBmdW5jdGlvbiBzbyB3ZSBjYW4gYXNzdW1lIGVsbXMgYXJlIERPTSBub2Rlcy4KICAgIGZ1bmN0aW9uIGh5ZHJhdGUgKGVsbSwgdm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgaW5WUHJlKSB7CiAgICAgIHZhciBpOwogICAgICB2YXIgdGFnID0gdm5vZGUudGFnOwogICAgICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7CiAgICAgIHZhciBjaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuOwogICAgICBpblZQcmUgPSBpblZQcmUgfHwgKGRhdGEgJiYgZGF0YS5wcmUpOwogICAgICB2bm9kZS5lbG0gPSBlbG07CgogICAgICBpZiAoaXNUcnVlKHZub2RlLmlzQ29tbWVudCkgJiYgaXNEZWYodm5vZGUuYXN5bmNGYWN0b3J5KSkgewogICAgICAgIHZub2RlLmlzQXN5bmNQbGFjZWhvbGRlciA9IHRydWU7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgICAvLyBhc3NlcnQgbm9kZSBtYXRjaAogICAgICB7CiAgICAgICAgaWYgKCFhc3NlcnROb2RlTWF0Y2goZWxtLCB2bm9kZSwgaW5WUHJlKSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChpc0RlZihkYXRhKSkgewogICAgICAgIGlmIChpc0RlZihpID0gZGF0YS5ob29rKSAmJiBpc0RlZihpID0gaS5pbml0KSkgeyBpKHZub2RlLCB0cnVlIC8qIGh5ZHJhdGluZyAqLyk7IH0KICAgICAgICBpZiAoaXNEZWYoaSA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlKSkgewogICAgICAgICAgLy8gY2hpbGQgY29tcG9uZW50LiBpdCBzaG91bGQgaGF2ZSBoeWRyYXRlZCBpdHMgb3duIHRyZWUuCiAgICAgICAgICBpbml0Q29tcG9uZW50KHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpOwogICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGlzRGVmKHRhZykpIHsKICAgICAgICBpZiAoaXNEZWYoY2hpbGRyZW4pKSB7CiAgICAgICAgICAvLyBlbXB0eSBlbGVtZW50LCBhbGxvdyBjbGllbnQgdG8gcGljayB1cCBhbmQgcG9wdWxhdGUgY2hpbGRyZW4KICAgICAgICAgIGlmICghZWxtLmhhc0NoaWxkTm9kZXMoKSkgewogICAgICAgICAgICBjcmVhdGVDaGlsZHJlbih2bm9kZSwgY2hpbGRyZW4sIGluc2VydGVkVm5vZGVRdWV1ZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyB2LWh0bWwgYW5kIGRvbVByb3BzOiBpbm5lckhUTUwKICAgICAgICAgICAgaWYgKGlzRGVmKGkgPSBkYXRhKSAmJiBpc0RlZihpID0gaS5kb21Qcm9wcykgJiYgaXNEZWYoaSA9IGkuaW5uZXJIVE1MKSkgewogICAgICAgICAgICAgIGlmIChpICE9PSBlbG0uaW5uZXJIVE1MKSB7CiAgICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYKICAgICAgICAgICAgICAgICAgIWh5ZHJhdGlvbkJhaWxlZAogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIGh5ZHJhdGlvbkJhaWxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignUGFyZW50OiAnLCBlbG0pOwogICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ3NlcnZlciBpbm5lckhUTUw6ICcsIGkpOwogICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ2NsaWVudCBpbm5lckhUTUw6ICcsIGVsbS5pbm5lckhUTUwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIGl0ZXJhdGUgYW5kIGNvbXBhcmUgY2hpbGRyZW4gbGlzdHMKICAgICAgICAgICAgICB2YXIgY2hpbGRyZW5NYXRjaCA9IHRydWU7CiAgICAgICAgICAgICAgdmFyIGNoaWxkTm9kZSA9IGVsbS5maXJzdENoaWxkOwogICAgICAgICAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IGNoaWxkcmVuLmxlbmd0aDsgaSQxKyspIHsKICAgICAgICAgICAgICAgIGlmICghY2hpbGROb2RlIHx8ICFoeWRyYXRlKGNoaWxkTm9kZSwgY2hpbGRyZW5baSQxXSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBpblZQcmUpKSB7CiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuTWF0Y2ggPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNoaWxkTm9kZSA9IGNoaWxkTm9kZS5uZXh0U2libGluZzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gaWYgY2hpbGROb2RlIGlzIG5vdCBudWxsLCBpdCBtZWFucyB0aGUgYWN0dWFsIGNoaWxkTm9kZXMgbGlzdCBpcwogICAgICAgICAgICAgIC8vIGxvbmdlciB0aGFuIHRoZSB2aXJ0dWFsIGNoaWxkcmVuIGxpc3QuCiAgICAgICAgICAgICAgaWYgKCFjaGlsZHJlbk1hdGNoIHx8IGNoaWxkTm9kZSkgewogICAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmCiAgICAgICAgICAgICAgICAgICFoeWRyYXRpb25CYWlsZWQKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICBoeWRyYXRpb25CYWlsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1BhcmVudDogJywgZWxtKTsKICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdNaXNtYXRjaGluZyBjaGlsZE5vZGVzIHZzLiBWTm9kZXM6ICcsIGVsbS5jaGlsZE5vZGVzLCBjaGlsZHJlbik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGlzRGVmKGRhdGEpKSB7CiAgICAgICAgICB2YXIgZnVsbEludm9rZSA9IGZhbHNlOwogICAgICAgICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHsKICAgICAgICAgICAgaWYgKCFpc1JlbmRlcmVkTW9kdWxlKGtleSkpIHsKICAgICAgICAgICAgICBmdWxsSW52b2tlID0gdHJ1ZTsKICAgICAgICAgICAgICBpbnZva2VDcmVhdGVIb29rcyh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTsKICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIWZ1bGxJbnZva2UgJiYgZGF0YVsnY2xhc3MnXSkgewogICAgICAgICAgICAvLyBlbnN1cmUgY29sbGVjdGluZyBkZXBzIGZvciBkZWVwIGNsYXNzIGJpbmRpbmdzIGZvciBmdXR1cmUgdXBkYXRlcwogICAgICAgICAgICB0cmF2ZXJzZShkYXRhWydjbGFzcyddKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZWxtLmRhdGEgIT09IHZub2RlLnRleHQpIHsKICAgICAgICBlbG0uZGF0YSA9IHZub2RlLnRleHQ7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWUKICAgIH0KCiAgICBmdW5jdGlvbiBhc3NlcnROb2RlTWF0Y2ggKG5vZGUsIHZub2RlLCBpblZQcmUpIHsKICAgICAgaWYgKGlzRGVmKHZub2RlLnRhZykpIHsKICAgICAgICByZXR1cm4gdm5vZGUudGFnLmluZGV4T2YoJ3Z1ZS1jb21wb25lbnQnKSA9PT0gMCB8fCAoCiAgICAgICAgICAhaXNVbmtub3duRWxlbWVudCQkMSh2bm9kZSwgaW5WUHJlKSAmJgogICAgICAgICAgdm5vZGUudGFnLnRvTG93ZXJDYXNlKCkgPT09IChub2RlLnRhZ05hbWUgJiYgbm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpCiAgICAgICAgKQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBub2RlLm5vZGVUeXBlID09PSAodm5vZGUuaXNDb21tZW50ID8gOCA6IDMpCiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZnVuY3Rpb24gcGF0Y2ggKG9sZFZub2RlLCB2bm9kZSwgaHlkcmF0aW5nLCByZW1vdmVPbmx5KSB7CiAgICAgIGlmIChpc1VuZGVmKHZub2RlKSkgewogICAgICAgIGlmIChpc0RlZihvbGRWbm9kZSkpIHsgaW52b2tlRGVzdHJveUhvb2sob2xkVm5vZGUpOyB9CiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIHZhciBpc0luaXRpYWxQYXRjaCA9IGZhbHNlOwogICAgICB2YXIgaW5zZXJ0ZWRWbm9kZVF1ZXVlID0gW107CgogICAgICBpZiAoaXNVbmRlZihvbGRWbm9kZSkpIHsKICAgICAgICAvLyBlbXB0eSBtb3VudCAobGlrZWx5IGFzIGNvbXBvbmVudCksIGNyZWF0ZSBuZXcgcm9vdCBlbGVtZW50CiAgICAgICAgaXNJbml0aWFsUGF0Y2ggPSB0cnVlOwogICAgICAgIGNyZWF0ZUVsbSh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgaXNSZWFsRWxlbWVudCA9IGlzRGVmKG9sZFZub2RlLm5vZGVUeXBlKTsKICAgICAgICBpZiAoIWlzUmVhbEVsZW1lbnQgJiYgc2FtZVZub2RlKG9sZFZub2RlLCB2bm9kZSkpIHsKICAgICAgICAgIC8vIHBhdGNoIGV4aXN0aW5nIHJvb3Qgbm9kZQogICAgICAgICAgcGF0Y2hWbm9kZShvbGRWbm9kZSwgdm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgbnVsbCwgbnVsbCwgcmVtb3ZlT25seSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChpc1JlYWxFbGVtZW50KSB7CiAgICAgICAgICAgIC8vIG1vdW50aW5nIHRvIGEgcmVhbCBlbGVtZW50CiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoaXMgaXMgc2VydmVyLXJlbmRlcmVkIGNvbnRlbnQgYW5kIGlmIHdlIGNhbiBwZXJmb3JtCiAgICAgICAgICAgIC8vIGEgc3VjY2Vzc2Z1bCBoeWRyYXRpb24uCiAgICAgICAgICAgIGlmIChvbGRWbm9kZS5ub2RlVHlwZSA9PT0gMSAmJiBvbGRWbm9kZS5oYXNBdHRyaWJ1dGUoU1NSX0FUVFIpKSB7CiAgICAgICAgICAgICAgb2xkVm5vZGUucmVtb3ZlQXR0cmlidXRlKFNTUl9BVFRSKTsKICAgICAgICAgICAgICBoeWRyYXRpbmcgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChpc1RydWUoaHlkcmF0aW5nKSkgewogICAgICAgICAgICAgIGlmIChoeWRyYXRlKG9sZFZub2RlLCB2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKSkgewogICAgICAgICAgICAgICAgaW52b2tlSW5zZXJ0SG9vayh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCB0cnVlKTsKICAgICAgICAgICAgICAgIHJldHVybiBvbGRWbm9kZQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB3YXJuKAogICAgICAgICAgICAgICAgICAnVGhlIGNsaWVudC1zaWRlIHJlbmRlcmVkIHZpcnR1YWwgRE9NIHRyZWUgaXMgbm90IG1hdGNoaW5nICcgKwogICAgICAgICAgICAgICAgICAnc2VydmVyLXJlbmRlcmVkIGNvbnRlbnQuIFRoaXMgaXMgbGlrZWx5IGNhdXNlZCBieSBpbmNvcnJlY3QgJyArCiAgICAgICAgICAgICAgICAgICdIVE1MIG1hcmt1cCwgZm9yIGV4YW1wbGUgbmVzdGluZyBibG9jay1sZXZlbCBlbGVtZW50cyBpbnNpZGUgJyArCiAgICAgICAgICAgICAgICAgICc8cD4sIG9yIG1pc3NpbmcgPHRib2R5Pi4gQmFpbGluZyBoeWRyYXRpb24gYW5kIHBlcmZvcm1pbmcgJyArCiAgICAgICAgICAgICAgICAgICdmdWxsIGNsaWVudC1zaWRlIHJlbmRlci4nCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBlaXRoZXIgbm90IHNlcnZlci1yZW5kZXJlZCwgb3IgaHlkcmF0aW9uIGZhaWxlZC4KICAgICAgICAgICAgLy8gY3JlYXRlIGFuIGVtcHR5IG5vZGUgYW5kIHJlcGxhY2UgaXQKICAgICAgICAgICAgb2xkVm5vZGUgPSBlbXB0eU5vZGVBdChvbGRWbm9kZSk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gcmVwbGFjaW5nIGV4aXN0aW5nIGVsZW1lbnQKICAgICAgICAgIHZhciBvbGRFbG0gPSBvbGRWbm9kZS5lbG07CiAgICAgICAgICB2YXIgcGFyZW50RWxtID0gbm9kZU9wcy5wYXJlbnROb2RlKG9sZEVsbSk7CgogICAgICAgICAgLy8gY3JlYXRlIG5ldyBub2RlCiAgICAgICAgICBjcmVhdGVFbG0oCiAgICAgICAgICAgIHZub2RlLAogICAgICAgICAgICBpbnNlcnRlZFZub2RlUXVldWUsCiAgICAgICAgICAgIC8vIGV4dHJlbWVseSByYXJlIGVkZ2UgY2FzZTogZG8gbm90IGluc2VydCBpZiBvbGQgZWxlbWVudCBpcyBpbiBhCiAgICAgICAgICAgIC8vIGxlYXZpbmcgdHJhbnNpdGlvbi4gT25seSBoYXBwZW5zIHdoZW4gY29tYmluaW5nIHRyYW5zaXRpb24gKwogICAgICAgICAgICAvLyBrZWVwLWFsaXZlICsgSE9Dcy4gKCM0NTkwKQogICAgICAgICAgICBvbGRFbG0uX2xlYXZlQ2IgPyBudWxsIDogcGFyZW50RWxtLAogICAgICAgICAgICBub2RlT3BzLm5leHRTaWJsaW5nKG9sZEVsbSkKICAgICAgICAgICk7CgogICAgICAgICAgLy8gdXBkYXRlIHBhcmVudCBwbGFjZWhvbGRlciBub2RlIGVsZW1lbnQsIHJlY3Vyc2l2ZWx5CiAgICAgICAgICBpZiAoaXNEZWYodm5vZGUucGFyZW50KSkgewogICAgICAgICAgICB2YXIgYW5jZXN0b3IgPSB2bm9kZS5wYXJlbnQ7CiAgICAgICAgICAgIHZhciBwYXRjaGFibGUgPSBpc1BhdGNoYWJsZSh2bm9kZSk7CiAgICAgICAgICAgIHdoaWxlIChhbmNlc3RvcikgewogICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2JzLmRlc3Ryb3kubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgICAgIGNicy5kZXN0cm95W2ldKGFuY2VzdG9yKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYW5jZXN0b3IuZWxtID0gdm5vZGUuZWxtOwogICAgICAgICAgICAgIGlmIChwYXRjaGFibGUpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IGNicy5jcmVhdGUubGVuZ3RoOyArK2kkMSkgewogICAgICAgICAgICAgICAgICBjYnMuY3JlYXRlW2kkMV0oZW1wdHlOb2RlLCBhbmNlc3Rvcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyAjNjUxMwogICAgICAgICAgICAgICAgLy8gaW52b2tlIGluc2VydCBob29rcyB0aGF0IG1heSBoYXZlIGJlZW4gbWVyZ2VkIGJ5IGNyZWF0ZSBob29rcy4KICAgICAgICAgICAgICAgIC8vIGUuZy4gZm9yIGRpcmVjdGl2ZXMgdGhhdCB1c2VzIHRoZSAiaW5zZXJ0ZWQiIGhvb2suCiAgICAgICAgICAgICAgICB2YXIgaW5zZXJ0ID0gYW5jZXN0b3IuZGF0YS5ob29rLmluc2VydDsKICAgICAgICAgICAgICAgIGlmIChpbnNlcnQubWVyZ2VkKSB7CiAgICAgICAgICAgICAgICAgIC8vIHN0YXJ0IGF0IGluZGV4IDEgdG8gYXZvaWQgcmUtaW52b2tpbmcgY29tcG9uZW50IG1vdW50ZWQgaG9vawogICAgICAgICAgICAgICAgICBmb3IgKHZhciBpJDIgPSAxOyBpJDIgPCBpbnNlcnQuZm5zLmxlbmd0aDsgaSQyKyspIHsKICAgICAgICAgICAgICAgICAgICBpbnNlcnQuZm5zW2kkMl0oKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZWdpc3RlclJlZihhbmNlc3Rvcik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGFuY2VzdG9yID0gYW5jZXN0b3IucGFyZW50OwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgLy8gZGVzdHJveSBvbGQgbm9kZQogICAgICAgICAgaWYgKGlzRGVmKHBhcmVudEVsbSkpIHsKICAgICAgICAgICAgcmVtb3ZlVm5vZGVzKHBhcmVudEVsbSwgW29sZFZub2RlXSwgMCwgMCk7CiAgICAgICAgICB9IGVsc2UgaWYgKGlzRGVmKG9sZFZub2RlLnRhZykpIHsKICAgICAgICAgICAgaW52b2tlRGVzdHJveUhvb2sob2xkVm5vZGUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgaW52b2tlSW5zZXJ0SG9vayh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBpc0luaXRpYWxQYXRjaCk7CiAgICAgIHJldHVybiB2bm9kZS5lbG0KICAgIH0KICB9CgogIC8qICAqLwoKICB2YXIgZGlyZWN0aXZlcyA9IHsKICAgIGNyZWF0ZTogdXBkYXRlRGlyZWN0aXZlcywKICAgIHVwZGF0ZTogdXBkYXRlRGlyZWN0aXZlcywKICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIHVuYmluZERpcmVjdGl2ZXMgKHZub2RlKSB7CiAgICAgIHVwZGF0ZURpcmVjdGl2ZXModm5vZGUsIGVtcHR5Tm9kZSk7CiAgICB9CiAgfTsKCiAgZnVuY3Rpb24gdXBkYXRlRGlyZWN0aXZlcyAob2xkVm5vZGUsIHZub2RlKSB7CiAgICBpZiAob2xkVm5vZGUuZGF0YS5kaXJlY3RpdmVzIHx8IHZub2RlLmRhdGEuZGlyZWN0aXZlcykgewogICAgICBfdXBkYXRlKG9sZFZub2RlLCB2bm9kZSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBfdXBkYXRlIChvbGRWbm9kZSwgdm5vZGUpIHsKICAgIHZhciBpc0NyZWF0ZSA9IG9sZFZub2RlID09PSBlbXB0eU5vZGU7CiAgICB2YXIgaXNEZXN0cm95ID0gdm5vZGUgPT09IGVtcHR5Tm9kZTsKICAgIHZhciBvbGREaXJzID0gbm9ybWFsaXplRGlyZWN0aXZlcyQxKG9sZFZub2RlLmRhdGEuZGlyZWN0aXZlcywgb2xkVm5vZGUuY29udGV4dCk7CiAgICB2YXIgbmV3RGlycyA9IG5vcm1hbGl6ZURpcmVjdGl2ZXMkMSh2bm9kZS5kYXRhLmRpcmVjdGl2ZXMsIHZub2RlLmNvbnRleHQpOwoKICAgIHZhciBkaXJzV2l0aEluc2VydCA9IFtdOwogICAgdmFyIGRpcnNXaXRoUG9zdHBhdGNoID0gW107CgogICAgdmFyIGtleSwgb2xkRGlyLCBkaXI7CiAgICBmb3IgKGtleSBpbiBuZXdEaXJzKSB7CiAgICAgIG9sZERpciA9IG9sZERpcnNba2V5XTsKICAgICAgZGlyID0gbmV3RGlyc1trZXldOwogICAgICBpZiAoIW9sZERpcikgewogICAgICAgIC8vIG5ldyBkaXJlY3RpdmUsIGJpbmQKICAgICAgICBjYWxsSG9vayQxKGRpciwgJ2JpbmQnLCB2bm9kZSwgb2xkVm5vZGUpOwogICAgICAgIGlmIChkaXIuZGVmICYmIGRpci5kZWYuaW5zZXJ0ZWQpIHsKICAgICAgICAgIGRpcnNXaXRoSW5zZXJ0LnB1c2goZGlyKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gZXhpc3RpbmcgZGlyZWN0aXZlLCB1cGRhdGUKICAgICAgICBkaXIub2xkVmFsdWUgPSBvbGREaXIudmFsdWU7CiAgICAgICAgZGlyLm9sZEFyZyA9IG9sZERpci5hcmc7CiAgICAgICAgY2FsbEhvb2skMShkaXIsICd1cGRhdGUnLCB2bm9kZSwgb2xkVm5vZGUpOwogICAgICAgIGlmIChkaXIuZGVmICYmIGRpci5kZWYuY29tcG9uZW50VXBkYXRlZCkgewogICAgICAgICAgZGlyc1dpdGhQb3N0cGF0Y2gucHVzaChkaXIpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGlmIChkaXJzV2l0aEluc2VydC5sZW5ndGgpIHsKICAgICAgdmFyIGNhbGxJbnNlcnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXJzV2l0aEluc2VydC5sZW5ndGg7IGkrKykgewogICAgICAgICAgY2FsbEhvb2skMShkaXJzV2l0aEluc2VydFtpXSwgJ2luc2VydGVkJywgdm5vZGUsIG9sZFZub2RlKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIGlmIChpc0NyZWF0ZSkgewogICAgICAgIG1lcmdlVk5vZGVIb29rKHZub2RlLCAnaW5zZXJ0JywgY2FsbEluc2VydCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbEluc2VydCgpOwogICAgICB9CiAgICB9CgogICAgaWYgKGRpcnNXaXRoUG9zdHBhdGNoLmxlbmd0aCkgewogICAgICBtZXJnZVZOb2RlSG9vayh2bm9kZSwgJ3Bvc3RwYXRjaCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpcnNXaXRoUG9zdHBhdGNoLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBjYWxsSG9vayQxKGRpcnNXaXRoUG9zdHBhdGNoW2ldLCAnY29tcG9uZW50VXBkYXRlZCcsIHZub2RlLCBvbGRWbm9kZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICBpZiAoIWlzQ3JlYXRlKSB7CiAgICAgIGZvciAoa2V5IGluIG9sZERpcnMpIHsKICAgICAgICBpZiAoIW5ld0RpcnNba2V5XSkgewogICAgICAgICAgLy8gbm8gbG9uZ2VyIHByZXNlbnQsIHVuYmluZAogICAgICAgICAgY2FsbEhvb2skMShvbGREaXJzW2tleV0sICd1bmJpbmQnLCBvbGRWbm9kZSwgb2xkVm5vZGUsIGlzRGVzdHJveSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICB2YXIgZW1wdHlNb2RpZmllcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwoKICBmdW5jdGlvbiBub3JtYWxpemVEaXJlY3RpdmVzJDEgKAogICAgZGlycywKICAgIHZtCiAgKSB7CiAgICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgIGlmICghZGlycykgewogICAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmUKICAgICAgcmV0dXJuIHJlcwogICAgfQogICAgdmFyIGksIGRpcjsKICAgIGZvciAoaSA9IDA7IGkgPCBkaXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGRpciA9IGRpcnNbaV07CiAgICAgIGlmICghZGlyLm1vZGlmaWVycykgewogICAgICAgIC8vICRmbG93LWRpc2FibGUtbGluZQogICAgICAgIGRpci5tb2RpZmllcnMgPSBlbXB0eU1vZGlmaWVyczsKICAgICAgfQogICAgICByZXNbZ2V0UmF3RGlyTmFtZShkaXIpXSA9IGRpcjsKICAgICAgZGlyLmRlZiA9IHJlc29sdmVBc3NldCh2bS4kb3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBkaXIubmFtZSwgdHJ1ZSk7CiAgICB9CiAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmUKICAgIHJldHVybiByZXMKICB9CgogIGZ1bmN0aW9uIGdldFJhd0Rpck5hbWUgKGRpcikgewogICAgcmV0dXJuIGRpci5yYXdOYW1lIHx8ICgoZGlyLm5hbWUpICsgIi4iICsgKE9iamVjdC5rZXlzKGRpci5tb2RpZmllcnMgfHwge30pLmpvaW4oJy4nKSkpCiAgfQoKICBmdW5jdGlvbiBjYWxsSG9vayQxIChkaXIsIGhvb2ssIHZub2RlLCBvbGRWbm9kZSwgaXNEZXN0cm95KSB7CiAgICB2YXIgZm4gPSBkaXIuZGVmICYmIGRpci5kZWZbaG9va107CiAgICBpZiAoZm4pIHsKICAgICAgdHJ5IHsKICAgICAgICBmbih2bm9kZS5lbG0sIGRpciwgdm5vZGUsIG9sZFZub2RlLCBpc0Rlc3Ryb3kpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgaGFuZGxlRXJyb3IoZSwgdm5vZGUuY29udGV4dCwgKCJkaXJlY3RpdmUgIiArIChkaXIubmFtZSkgKyAiICIgKyBob29rICsgIiBob29rIikpOwogICAgICB9CiAgICB9CiAgfQoKICB2YXIgYmFzZU1vZHVsZXMgPSBbCiAgICByZWYsCiAgICBkaXJlY3RpdmVzCiAgXTsKCiAgLyogICovCgogIGZ1bmN0aW9uIHVwZGF0ZUF0dHJzIChvbGRWbm9kZSwgdm5vZGUpIHsKICAgIHZhciBvcHRzID0gdm5vZGUuY29tcG9uZW50T3B0aW9uczsKICAgIGlmIChpc0RlZihvcHRzKSAmJiBvcHRzLkN0b3Iub3B0aW9ucy5pbmhlcml0QXR0cnMgPT09IGZhbHNlKSB7CiAgICAgIHJldHVybgogICAgfQogICAgaWYgKGlzVW5kZWYob2xkVm5vZGUuZGF0YS5hdHRycykgJiYgaXNVbmRlZih2bm9kZS5kYXRhLmF0dHJzKSkgewogICAgICByZXR1cm4KICAgIH0KICAgIHZhciBrZXksIGN1ciwgb2xkOwogICAgdmFyIGVsbSA9IHZub2RlLmVsbTsKICAgIHZhciBvbGRBdHRycyA9IG9sZFZub2RlLmRhdGEuYXR0cnMgfHwge307CiAgICB2YXIgYXR0cnMgPSB2bm9kZS5kYXRhLmF0dHJzIHx8IHt9OwogICAgLy8gY2xvbmUgb2JzZXJ2ZWQgb2JqZWN0cywgYXMgdGhlIHVzZXIgcHJvYmFibHkgd2FudHMgdG8gbXV0YXRlIGl0CiAgICBpZiAoaXNEZWYoYXR0cnMuX19vYl9fKSkgewogICAgICBhdHRycyA9IHZub2RlLmRhdGEuYXR0cnMgPSBleHRlbmQoe30sIGF0dHJzKTsKICAgIH0KCiAgICBmb3IgKGtleSBpbiBhdHRycykgewogICAgICBjdXIgPSBhdHRyc1trZXldOwogICAgICBvbGQgPSBvbGRBdHRyc1trZXldOwogICAgICBpZiAob2xkICE9PSBjdXIpIHsKICAgICAgICBzZXRBdHRyKGVsbSwga2V5LCBjdXIpOwogICAgICB9CiAgICB9CiAgICAvLyAjNDM5MTogaW4gSUU5LCBzZXR0aW5nIHR5cGUgY2FuIHJlc2V0IHZhbHVlIGZvciBpbnB1dFt0eXBlPXJhZGlvXQogICAgLy8gIzY2NjY6IElFL0VkZ2UgZm9yY2VzIHByb2dyZXNzIHZhbHVlIGRvd24gdG8gMSBiZWZvcmUgc2V0dGluZyBhIG1heAogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoKGlzSUUgfHwgaXNFZGdlKSAmJiBhdHRycy52YWx1ZSAhPT0gb2xkQXR0cnMudmFsdWUpIHsKICAgICAgc2V0QXR0cihlbG0sICd2YWx1ZScsIGF0dHJzLnZhbHVlKTsKICAgIH0KICAgIGZvciAoa2V5IGluIG9sZEF0dHJzKSB7CiAgICAgIGlmIChpc1VuZGVmKGF0dHJzW2tleV0pKSB7CiAgICAgICAgaWYgKGlzWGxpbmsoa2V5KSkgewogICAgICAgICAgZWxtLnJlbW92ZUF0dHJpYnV0ZU5TKHhsaW5rTlMsIGdldFhsaW5rUHJvcChrZXkpKTsKICAgICAgICB9IGVsc2UgaWYgKCFpc0VudW1lcmF0ZWRBdHRyKGtleSkpIHsKICAgICAgICAgIGVsbS5yZW1vdmVBdHRyaWJ1dGUoa2V5KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIHNldEF0dHIgKGVsLCBrZXksIHZhbHVlKSB7CiAgICBpZiAoZWwudGFnTmFtZS5pbmRleE9mKCctJykgPiAtMSkgewogICAgICBiYXNlU2V0QXR0cihlbCwga2V5LCB2YWx1ZSk7CiAgICB9IGVsc2UgaWYgKGlzQm9vbGVhbkF0dHIoa2V5KSkgewogICAgICAvLyBzZXQgYXR0cmlidXRlIGZvciBibGFuayB2YWx1ZQogICAgICAvLyBlLmcuIDxvcHRpb24gZGlzYWJsZWQ+U2VsZWN0IG9uZTwvb3B0aW9uPgogICAgICBpZiAoaXNGYWxzeUF0dHJWYWx1ZSh2YWx1ZSkpIHsKICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyB0ZWNobmljYWxseSBhbGxvd2Z1bGxzY3JlZW4gaXMgYSBib29sZWFuIGF0dHJpYnV0ZSBmb3IgPGlmcmFtZT4sCiAgICAgICAgLy8gYnV0IEZsYXNoIGV4cGVjdHMgYSB2YWx1ZSBvZiAidHJ1ZSIgd2hlbiB1c2VkIG9uIDxlbWJlZD4gdGFnCiAgICAgICAgdmFsdWUgPSBrZXkgPT09ICdhbGxvd2Z1bGxzY3JlZW4nICYmIGVsLnRhZ05hbWUgPT09ICdFTUJFRCcKICAgICAgICAgID8gJ3RydWUnCiAgICAgICAgICA6IGtleTsKICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoaXNFbnVtZXJhdGVkQXR0cihrZXkpKSB7CiAgICAgIGVsLnNldEF0dHJpYnV0ZShrZXksIGNvbnZlcnRFbnVtZXJhdGVkVmFsdWUoa2V5LCB2YWx1ZSkpOwogICAgfSBlbHNlIGlmIChpc1hsaW5rKGtleSkpIHsKICAgICAgaWYgKGlzRmFsc3lBdHRyVmFsdWUodmFsdWUpKSB7CiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlTlMoeGxpbmtOUywgZ2V0WGxpbmtQcm9wKGtleSkpOwogICAgICB9IGVsc2UgewogICAgICAgIGVsLnNldEF0dHJpYnV0ZU5TKHhsaW5rTlMsIGtleSwgdmFsdWUpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBiYXNlU2V0QXR0cihlbCwga2V5LCB2YWx1ZSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBiYXNlU2V0QXR0ciAoZWwsIGtleSwgdmFsdWUpIHsKICAgIGlmIChpc0ZhbHN5QXR0clZhbHVlKHZhbHVlKSkgewogICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTsKICAgIH0gZWxzZSB7CiAgICAgIC8vICM3MTM4OiBJRTEwICYgMTEgZmlyZXMgaW5wdXQgZXZlbnQgd2hlbiBzZXR0aW5nIHBsYWNlaG9sZGVyIG9uCiAgICAgIC8vIDx0ZXh0YXJlYT4uLi4gYmxvY2sgdGhlIGZpcnN0IGlucHV0IGV2ZW50IGFuZCByZW1vdmUgdGhlIGJsb2NrZXIKICAgICAgLy8gaW1tZWRpYXRlbHkuCiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICBpZiAoCiAgICAgICAgaXNJRSAmJiAhaXNJRTkgJiYKICAgICAgICBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnICYmCiAgICAgICAga2V5ID09PSAncGxhY2Vob2xkZXInICYmIHZhbHVlICE9PSAnJyAmJiAhZWwuX19pZXBoCiAgICAgICkgewogICAgICAgIHZhciBibG9ja2VyID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7CiAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdpbnB1dCcsIGJsb2NrZXIpOwogICAgICAgIH07CiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBibG9ja2VyKTsKICAgICAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmUKICAgICAgICBlbC5fX2llcGggPSB0cnVlOyAvKiBJRSBwbGFjZWhvbGRlciBwYXRjaGVkICovCiAgICAgIH0KICAgICAgZWwuc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpOwogICAgfQogIH0KCiAgdmFyIGF0dHJzID0gewogICAgY3JlYXRlOiB1cGRhdGVBdHRycywKICAgIHVwZGF0ZTogdXBkYXRlQXR0cnMKICB9OwoKICAvKiAgKi8KCiAgZnVuY3Rpb24gdXBkYXRlQ2xhc3MgKG9sZFZub2RlLCB2bm9kZSkgewogICAgdmFyIGVsID0gdm5vZGUuZWxtOwogICAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhOwogICAgdmFyIG9sZERhdGEgPSBvbGRWbm9kZS5kYXRhOwogICAgaWYgKAogICAgICBpc1VuZGVmKGRhdGEuc3RhdGljQ2xhc3MpICYmCiAgICAgIGlzVW5kZWYoZGF0YS5jbGFzcykgJiYgKAogICAgICAgIGlzVW5kZWYob2xkRGF0YSkgfHwgKAogICAgICAgICAgaXNVbmRlZihvbGREYXRhLnN0YXRpY0NsYXNzKSAmJgogICAgICAgICAgaXNVbmRlZihvbGREYXRhLmNsYXNzKQogICAgICAgICkKICAgICAgKQogICAgKSB7CiAgICAgIHJldHVybgogICAgfQoKICAgIHZhciBjbHMgPSBnZW5DbGFzc0ZvclZub2RlKHZub2RlKTsKCiAgICAvLyBoYW5kbGUgdHJhbnNpdGlvbiBjbGFzc2VzCiAgICB2YXIgdHJhbnNpdGlvbkNsYXNzID0gZWwuX3RyYW5zaXRpb25DbGFzc2VzOwogICAgaWYgKGlzRGVmKHRyYW5zaXRpb25DbGFzcykpIHsKICAgICAgY2xzID0gY29uY2F0KGNscywgc3RyaW5naWZ5Q2xhc3ModHJhbnNpdGlvbkNsYXNzKSk7CiAgICB9CgogICAgLy8gc2V0IHRoZSBjbGFzcwogICAgaWYgKGNscyAhPT0gZWwuX3ByZXZDbGFzcykgewogICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY2xzKTsKICAgICAgZWwuX3ByZXZDbGFzcyA9IGNsczsKICAgIH0KICB9CgogIHZhciBrbGFzcyA9IHsKICAgIGNyZWF0ZTogdXBkYXRlQ2xhc3MsCiAgICB1cGRhdGU6IHVwZGF0ZUNsYXNzCiAgfTsKCiAgLyogICovCgogIHZhciB2YWxpZERpdmlzaW9uQ2hhclJFID0gL1tcdykuK1wtXyRcXV0vOwoKICBmdW5jdGlvbiBwYXJzZUZpbHRlcnMgKGV4cCkgewogICAgdmFyIGluU2luZ2xlID0gZmFsc2U7CiAgICB2YXIgaW5Eb3VibGUgPSBmYWxzZTsKICAgIHZhciBpblRlbXBsYXRlU3RyaW5nID0gZmFsc2U7CiAgICB2YXIgaW5SZWdleCA9IGZhbHNlOwogICAgdmFyIGN1cmx5ID0gMDsKICAgIHZhciBzcXVhcmUgPSAwOwogICAgdmFyIHBhcmVuID0gMDsKICAgIHZhciBsYXN0RmlsdGVySW5kZXggPSAwOwogICAgdmFyIGMsIHByZXYsIGksIGV4cHJlc3Npb24sIGZpbHRlcnM7CgogICAgZm9yIChpID0gMDsgaSA8IGV4cC5sZW5ndGg7IGkrKykgewogICAgICBwcmV2ID0gYzsKICAgICAgYyA9IGV4cC5jaGFyQ29kZUF0KGkpOwogICAgICBpZiAoaW5TaW5nbGUpIHsKICAgICAgICBpZiAoYyA9PT0gMHgyNyAmJiBwcmV2ICE9PSAweDVDKSB7IGluU2luZ2xlID0gZmFsc2U7IH0KICAgICAgfSBlbHNlIGlmIChpbkRvdWJsZSkgewogICAgICAgIGlmIChjID09PSAweDIyICYmIHByZXYgIT09IDB4NUMpIHsgaW5Eb3VibGUgPSBmYWxzZTsgfQogICAgICB9IGVsc2UgaWYgKGluVGVtcGxhdGVTdHJpbmcpIHsKICAgICAgICBpZiAoYyA9PT0gMHg2MCAmJiBwcmV2ICE9PSAweDVDKSB7IGluVGVtcGxhdGVTdHJpbmcgPSBmYWxzZTsgfQogICAgICB9IGVsc2UgaWYgKGluUmVnZXgpIHsKICAgICAgICBpZiAoYyA9PT0gMHgyZiAmJiBwcmV2ICE9PSAweDVDKSB7IGluUmVnZXggPSBmYWxzZTsgfQogICAgICB9IGVsc2UgaWYgKAogICAgICAgIGMgPT09IDB4N0MgJiYgLy8gcGlwZQogICAgICAgIGV4cC5jaGFyQ29kZUF0KGkgKyAxKSAhPT0gMHg3QyAmJgogICAgICAgIGV4cC5jaGFyQ29kZUF0KGkgLSAxKSAhPT0gMHg3QyAmJgogICAgICAgICFjdXJseSAmJiAhc3F1YXJlICYmICFwYXJlbgogICAgICApIHsKICAgICAgICBpZiAoZXhwcmVzc2lvbiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAvLyBmaXJzdCBmaWx0ZXIsIGVuZCBvZiBleHByZXNzaW9uCiAgICAgICAgICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTsKICAgICAgICAgIGV4cHJlc3Npb24gPSBleHAuc2xpY2UoMCwgaSkudHJpbSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwdXNoRmlsdGVyKCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHN3aXRjaCAoYykgewogICAgICAgICAgY2FzZSAweDIyOiBpbkRvdWJsZSA9IHRydWU7IGJyZWFrICAgICAgICAgLy8gIgogICAgICAgICAgY2FzZSAweDI3OiBpblNpbmdsZSA9IHRydWU7IGJyZWFrICAgICAgICAgLy8gJwogICAgICAgICAgY2FzZSAweDYwOiBpblRlbXBsYXRlU3RyaW5nID0gdHJ1ZTsgYnJlYWsgLy8gYAogICAgICAgICAgY2FzZSAweDI4OiBwYXJlbisrOyBicmVhayAgICAgICAgICAgICAgICAgLy8gKAogICAgICAgICAgY2FzZSAweDI5OiBwYXJlbi0tOyBicmVhayAgICAgICAgICAgICAgICAgLy8gKQogICAgICAgICAgY2FzZSAweDVCOiBzcXVhcmUrKzsgYnJlYWsgICAgICAgICAgICAgICAgLy8gWwogICAgICAgICAgY2FzZSAweDVEOiBzcXVhcmUtLTsgYnJlYWsgICAgICAgICAgICAgICAgLy8gXQogICAgICAgICAgY2FzZSAweDdCOiBjdXJseSsrOyBicmVhayAgICAgICAgICAgICAgICAgLy8gewogICAgICAgICAgY2FzZSAweDdEOiBjdXJseS0tOyBicmVhayAgICAgICAgICAgICAgICAgLy8gfQogICAgICAgIH0KICAgICAgICBpZiAoYyA9PT0gMHgyZikgeyAvLyAvCiAgICAgICAgICB2YXIgaiA9IGkgLSAxOwogICAgICAgICAgdmFyIHAgPSAodm9pZCAwKTsKICAgICAgICAgIC8vIGZpbmQgZmlyc3Qgbm9uLXdoaXRlc3BhY2UgcHJldiBjaGFyCiAgICAgICAgICBmb3IgKDsgaiA+PSAwOyBqLS0pIHsKICAgICAgICAgICAgcCA9IGV4cC5jaGFyQXQoaik7CiAgICAgICAgICAgIGlmIChwICE9PSAnICcpIHsgYnJlYWsgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKCFwIHx8ICF2YWxpZERpdmlzaW9uQ2hhclJFLnRlc3QocCkpIHsKICAgICAgICAgICAgaW5SZWdleCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaWYgKGV4cHJlc3Npb24gPT09IHVuZGVmaW5lZCkgewogICAgICBleHByZXNzaW9uID0gZXhwLnNsaWNlKDAsIGkpLnRyaW0oKTsKICAgIH0gZWxzZSBpZiAobGFzdEZpbHRlckluZGV4ICE9PSAwKSB7CiAgICAgIHB1c2hGaWx0ZXIoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwdXNoRmlsdGVyICgpIHsKICAgICAgKGZpbHRlcnMgfHwgKGZpbHRlcnMgPSBbXSkpLnB1c2goZXhwLnNsaWNlKGxhc3RGaWx0ZXJJbmRleCwgaSkudHJpbSgpKTsKICAgICAgbGFzdEZpbHRlckluZGV4ID0gaSArIDE7CiAgICB9CgogICAgaWYgKGZpbHRlcnMpIHsKICAgICAgZm9yIChpID0gMDsgaSA8IGZpbHRlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBleHByZXNzaW9uID0gd3JhcEZpbHRlcihleHByZXNzaW9uLCBmaWx0ZXJzW2ldKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBleHByZXNzaW9uCiAgfQoKICBmdW5jdGlvbiB3cmFwRmlsdGVyIChleHAsIGZpbHRlcikgewogICAgdmFyIGkgPSBmaWx0ZXIuaW5kZXhPZignKCcpOwogICAgaWYgKGkgPCAwKSB7CiAgICAgIC8vIF9mOiByZXNvbHZlRmlsdGVyCiAgICAgIHJldHVybiAoIl9mKFwiIiArIGZpbHRlciArICJcIikoIiArIGV4cCArICIpIikKICAgIH0gZWxzZSB7CiAgICAgIHZhciBuYW1lID0gZmlsdGVyLnNsaWNlKDAsIGkpOwogICAgICB2YXIgYXJncyA9IGZpbHRlci5zbGljZShpICsgMSk7CiAgICAgIHJldHVybiAoIl9mKFwiIiArIG5hbWUgKyAiXCIpKCIgKyBleHAgKyAoYXJncyAhPT0gJyknID8gJywnICsgYXJncyA6IGFyZ3MpKQogICAgfQogIH0KCiAgLyogICovCgoKCiAgLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi8KICBmdW5jdGlvbiBiYXNlV2FybiAobXNnLCByYW5nZSkgewogICAgY29uc29sZS5lcnJvcigoIltWdWUgY29tcGlsZXJdOiAiICsgbXNnKSk7CiAgfQogIC8qIGVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMgKi8KCiAgZnVuY3Rpb24gcGx1Y2tNb2R1bGVGdW5jdGlvbiAoCiAgICBtb2R1bGVzLAogICAga2V5CiAgKSB7CiAgICByZXR1cm4gbW9kdWxlcwogICAgICA/IG1vZHVsZXMubWFwKGZ1bmN0aW9uIChtKSB7IHJldHVybiBtW2tleV07IH0pLmZpbHRlcihmdW5jdGlvbiAoXykgeyByZXR1cm4gXzsgfSkKICAgICAgOiBbXQogIH0KCiAgZnVuY3Rpb24gYWRkUHJvcCAoZWwsIG5hbWUsIHZhbHVlLCByYW5nZSwgZHluYW1pYykgewogICAgKGVsLnByb3BzIHx8IChlbC5wcm9wcyA9IFtdKSkucHVzaChyYW5nZVNldEl0ZW0oeyBuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWUsIGR5bmFtaWM6IGR5bmFtaWMgfSwgcmFuZ2UpKTsKICAgIGVsLnBsYWluID0gZmFsc2U7CiAgfQoKICBmdW5jdGlvbiBhZGRBdHRyIChlbCwgbmFtZSwgdmFsdWUsIHJhbmdlLCBkeW5hbWljKSB7CiAgICB2YXIgYXR0cnMgPSBkeW5hbWljCiAgICAgID8gKGVsLmR5bmFtaWNBdHRycyB8fCAoZWwuZHluYW1pY0F0dHJzID0gW10pKQogICAgICA6IChlbC5hdHRycyB8fCAoZWwuYXR0cnMgPSBbXSkpOwogICAgYXR0cnMucHVzaChyYW5nZVNldEl0ZW0oeyBuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWUsIGR5bmFtaWM6IGR5bmFtaWMgfSwgcmFuZ2UpKTsKICAgIGVsLnBsYWluID0gZmFsc2U7CiAgfQoKICAvLyBhZGQgYSByYXcgYXR0ciAodXNlIHRoaXMgaW4gcHJlVHJhbnNmb3JtcykKICBmdW5jdGlvbiBhZGRSYXdBdHRyIChlbCwgbmFtZSwgdmFsdWUsIHJhbmdlKSB7CiAgICBlbC5hdHRyc01hcFtuYW1lXSA9IHZhbHVlOwogICAgZWwuYXR0cnNMaXN0LnB1c2gocmFuZ2VTZXRJdGVtKHsgbmFtZTogbmFtZSwgdmFsdWU6IHZhbHVlIH0sIHJhbmdlKSk7CiAgfQoKICBmdW5jdGlvbiBhZGREaXJlY3RpdmUgKAogICAgZWwsCiAgICBuYW1lLAogICAgcmF3TmFtZSwKICAgIHZhbHVlLAogICAgYXJnLAogICAgaXNEeW5hbWljQXJnLAogICAgbW9kaWZpZXJzLAogICAgcmFuZ2UKICApIHsKICAgIChlbC5kaXJlY3RpdmVzIHx8IChlbC5kaXJlY3RpdmVzID0gW10pKS5wdXNoKHJhbmdlU2V0SXRlbSh7CiAgICAgIG5hbWU6IG5hbWUsCiAgICAgIHJhd05hbWU6IHJhd05hbWUsCiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgYXJnOiBhcmcsCiAgICAgIGlzRHluYW1pY0FyZzogaXNEeW5hbWljQXJnLAogICAgICBtb2RpZmllcnM6IG1vZGlmaWVycwogICAgfSwgcmFuZ2UpKTsKICAgIGVsLnBsYWluID0gZmFsc2U7CiAgfQoKICBmdW5jdGlvbiBwcmVwZW5kTW9kaWZpZXJNYXJrZXIgKHN5bWJvbCwgbmFtZSwgZHluYW1pYykgewogICAgcmV0dXJuIGR5bmFtaWMKICAgICAgPyAoIl9wKCIgKyBuYW1lICsgIixcIiIgKyBzeW1ib2wgKyAiXCIpIikKICAgICAgOiBzeW1ib2wgKyBuYW1lIC8vIG1hcmsgdGhlIGV2ZW50IGFzIGNhcHR1cmVkCiAgfQoKICBmdW5jdGlvbiBhZGRIYW5kbGVyICgKICAgIGVsLAogICAgbmFtZSwKICAgIHZhbHVlLAogICAgbW9kaWZpZXJzLAogICAgaW1wb3J0YW50LAogICAgd2FybiwKICAgIHJhbmdlLAogICAgZHluYW1pYwogICkgewogICAgbW9kaWZpZXJzID0gbW9kaWZpZXJzIHx8IGVtcHR5T2JqZWN0OwogICAgLy8gd2FybiBwcmV2ZW50IGFuZCBwYXNzaXZlIG1vZGlmaWVyCiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgIGlmICgKICAgICAgd2FybiAmJgogICAgICBtb2RpZmllcnMucHJldmVudCAmJiBtb2RpZmllcnMucGFzc2l2ZQogICAgKSB7CiAgICAgIHdhcm4oCiAgICAgICAgJ3Bhc3NpdmUgYW5kIHByZXZlbnQgY2FuXCd0IGJlIHVzZWQgdG9nZXRoZXIuICcgKwogICAgICAgICdQYXNzaXZlIGhhbmRsZXIgY2FuXCd0IHByZXZlbnQgZGVmYXVsdCBldmVudC4nLAogICAgICAgIHJhbmdlCiAgICAgICk7CiAgICB9CgogICAgLy8gbm9ybWFsaXplIGNsaWNrLnJpZ2h0IGFuZCBjbGljay5taWRkbGUgc2luY2UgdGhleSBkb24ndCBhY3R1YWxseSBmaXJlCiAgICAvLyB0aGlzIGlzIHRlY2huaWNhbGx5IGJyb3dzZXItc3BlY2lmaWMsIGJ1dCBhdCBsZWFzdCBmb3Igbm93IGJyb3dzZXJzIGFyZQogICAgLy8gdGhlIG9ubHkgdGFyZ2V0IGVudnMgdGhhdCBoYXZlIHJpZ2h0L21pZGRsZSBjbGlja3MuCiAgICBpZiAobW9kaWZpZXJzLnJpZ2h0KSB7CiAgICAgIGlmIChkeW5hbWljKSB7CiAgICAgICAgbmFtZSA9ICIoIiArIG5hbWUgKyAiKT09PSdjbGljayc/J2NvbnRleHRtZW51JzooIiArIG5hbWUgKyAiKSI7CiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ2NsaWNrJykgewogICAgICAgIG5hbWUgPSAnY29udGV4dG1lbnUnOwogICAgICAgIGRlbGV0ZSBtb2RpZmllcnMucmlnaHQ7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAobW9kaWZpZXJzLm1pZGRsZSkgewogICAgICBpZiAoZHluYW1pYykgewogICAgICAgIG5hbWUgPSAiKCIgKyBuYW1lICsgIik9PT0nY2xpY2snPydtb3VzZXVwJzooIiArIG5hbWUgKyAiKSI7CiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ2NsaWNrJykgewogICAgICAgIG5hbWUgPSAnbW91c2V1cCc7CiAgICAgIH0KICAgIH0KCiAgICAvLyBjaGVjayBjYXB0dXJlIG1vZGlmaWVyCiAgICBpZiAobW9kaWZpZXJzLmNhcHR1cmUpIHsKICAgICAgZGVsZXRlIG1vZGlmaWVycy5jYXB0dXJlOwogICAgICBuYW1lID0gcHJlcGVuZE1vZGlmaWVyTWFya2VyKCchJywgbmFtZSwgZHluYW1pYyk7CiAgICB9CiAgICBpZiAobW9kaWZpZXJzLm9uY2UpIHsKICAgICAgZGVsZXRlIG1vZGlmaWVycy5vbmNlOwogICAgICBuYW1lID0gcHJlcGVuZE1vZGlmaWVyTWFya2VyKCd+JywgbmFtZSwgZHluYW1pYyk7CiAgICB9CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgIGlmIChtb2RpZmllcnMucGFzc2l2ZSkgewogICAgICBkZWxldGUgbW9kaWZpZXJzLnBhc3NpdmU7CiAgICAgIG5hbWUgPSBwcmVwZW5kTW9kaWZpZXJNYXJrZXIoJyYnLCBuYW1lLCBkeW5hbWljKTsKICAgIH0KCiAgICB2YXIgZXZlbnRzOwogICAgaWYgKG1vZGlmaWVycy5uYXRpdmUpIHsKICAgICAgZGVsZXRlIG1vZGlmaWVycy5uYXRpdmU7CiAgICAgIGV2ZW50cyA9IGVsLm5hdGl2ZUV2ZW50cyB8fCAoZWwubmF0aXZlRXZlbnRzID0ge30pOwogICAgfSBlbHNlIHsKICAgICAgZXZlbnRzID0gZWwuZXZlbnRzIHx8IChlbC5ldmVudHMgPSB7fSk7CiAgICB9CgogICAgdmFyIG5ld0hhbmRsZXIgPSByYW5nZVNldEl0ZW0oeyB2YWx1ZTogdmFsdWUudHJpbSgpLCBkeW5hbWljOiBkeW5hbWljIH0sIHJhbmdlKTsKICAgIGlmIChtb2RpZmllcnMgIT09IGVtcHR5T2JqZWN0KSB7CiAgICAgIG5ld0hhbmRsZXIubW9kaWZpZXJzID0gbW9kaWZpZXJzOwogICAgfQoKICAgIHZhciBoYW5kbGVycyA9IGV2ZW50c1tuYW1lXTsKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKEFycmF5LmlzQXJyYXkoaGFuZGxlcnMpKSB7CiAgICAgIGltcG9ydGFudCA/IGhhbmRsZXJzLnVuc2hpZnQobmV3SGFuZGxlcikgOiBoYW5kbGVycy5wdXNoKG5ld0hhbmRsZXIpOwogICAgfSBlbHNlIGlmIChoYW5kbGVycykgewogICAgICBldmVudHNbbmFtZV0gPSBpbXBvcnRhbnQgPyBbbmV3SGFuZGxlciwgaGFuZGxlcnNdIDogW2hhbmRsZXJzLCBuZXdIYW5kbGVyXTsKICAgIH0gZWxzZSB7CiAgICAgIGV2ZW50c1tuYW1lXSA9IG5ld0hhbmRsZXI7CiAgICB9CgogICAgZWwucGxhaW4gPSBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIGdldFJhd0JpbmRpbmdBdHRyICgKICAgIGVsLAogICAgbmFtZQogICkgewogICAgcmV0dXJuIGVsLnJhd0F0dHJzTWFwWyc6JyArIG5hbWVdIHx8CiAgICAgIGVsLnJhd0F0dHJzTWFwWyd2LWJpbmQ6JyArIG5hbWVdIHx8CiAgICAgIGVsLnJhd0F0dHJzTWFwW25hbWVdCiAgfQoKICBmdW5jdGlvbiBnZXRCaW5kaW5nQXR0ciAoCiAgICBlbCwKICAgIG5hbWUsCiAgICBnZXRTdGF0aWMKICApIHsKICAgIHZhciBkeW5hbWljVmFsdWUgPQogICAgICBnZXRBbmRSZW1vdmVBdHRyKGVsLCAnOicgKyBuYW1lKSB8fAogICAgICBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1iaW5kOicgKyBuYW1lKTsKICAgIGlmIChkeW5hbWljVmFsdWUgIT0gbnVsbCkgewogICAgICByZXR1cm4gcGFyc2VGaWx0ZXJzKGR5bmFtaWNWYWx1ZSkKICAgIH0gZWxzZSBpZiAoZ2V0U3RhdGljICE9PSBmYWxzZSkgewogICAgICB2YXIgc3RhdGljVmFsdWUgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCBuYW1lKTsKICAgICAgaWYgKHN0YXRpY1ZhbHVlICE9IG51bGwpIHsKICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoc3RhdGljVmFsdWUpCiAgICAgIH0KICAgIH0KICB9CgogIC8vIG5vdGU6IHRoaXMgb25seSByZW1vdmVzIHRoZSBhdHRyIGZyb20gdGhlIEFycmF5IChhdHRyc0xpc3QpIHNvIHRoYXQgaXQKICAvLyBkb2Vzbid0IGdldCBwcm9jZXNzZWQgYnkgcHJvY2Vzc0F0dHJzLgogIC8vIEJ5IGRlZmF1bHQgaXQgZG9lcyBOT1QgcmVtb3ZlIGl0IGZyb20gdGhlIG1hcCAoYXR0cnNNYXApIGJlY2F1c2UgdGhlIG1hcCBpcwogIC8vIG5lZWRlZCBkdXJpbmcgY29kZWdlbi4KICBmdW5jdGlvbiBnZXRBbmRSZW1vdmVBdHRyICgKICAgIGVsLAogICAgbmFtZSwKICAgIHJlbW92ZUZyb21NYXAKICApIHsKICAgIHZhciB2YWw7CiAgICBpZiAoKHZhbCA9IGVsLmF0dHJzTWFwW25hbWVdKSAhPSBudWxsKSB7CiAgICAgIHZhciBsaXN0ID0gZWwuYXR0cnNMaXN0OwogICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGxpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgaWYgKGxpc3RbaV0ubmFtZSA9PT0gbmFtZSkgewogICAgICAgICAgbGlzdC5zcGxpY2UoaSwgMSk7CiAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgfQogICAgfQogICAgaWYgKHJlbW92ZUZyb21NYXApIHsKICAgICAgZGVsZXRlIGVsLmF0dHJzTWFwW25hbWVdOwogICAgfQogICAgcmV0dXJuIHZhbAogIH0KCiAgZnVuY3Rpb24gZ2V0QW5kUmVtb3ZlQXR0ckJ5UmVnZXggKAogICAgZWwsCiAgICBuYW1lCiAgKSB7CiAgICB2YXIgbGlzdCA9IGVsLmF0dHJzTGlzdDsKICAgIGZvciAodmFyIGkgPSAwLCBsID0gbGlzdC5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgdmFyIGF0dHIgPSBsaXN0W2ldOwogICAgICBpZiAobmFtZS50ZXN0KGF0dHIubmFtZSkpIHsKICAgICAgICBsaXN0LnNwbGljZShpLCAxKTsKICAgICAgICByZXR1cm4gYXR0cgogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiByYW5nZVNldEl0ZW0gKAogICAgaXRlbSwKICAgIHJhbmdlCiAgKSB7CiAgICBpZiAocmFuZ2UpIHsKICAgICAgaWYgKHJhbmdlLnN0YXJ0ICE9IG51bGwpIHsKICAgICAgICBpdGVtLnN0YXJ0ID0gcmFuZ2Uuc3RhcnQ7CiAgICAgIH0KICAgICAgaWYgKHJhbmdlLmVuZCAhPSBudWxsKSB7CiAgICAgICAgaXRlbS5lbmQgPSByYW5nZS5lbmQ7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBpdGVtCiAgfQoKICAvKiAgKi8KCiAgLyoqCiAgICogQ3Jvc3MtcGxhdGZvcm0gY29kZSBnZW5lcmF0aW9uIGZvciBjb21wb25lbnQgdi1tb2RlbAogICAqLwogIGZ1bmN0aW9uIGdlbkNvbXBvbmVudE1vZGVsICgKICAgIGVsLAogICAgdmFsdWUsCiAgICBtb2RpZmllcnMKICApIHsKICAgIHZhciByZWYgPSBtb2RpZmllcnMgfHwge307CiAgICB2YXIgbnVtYmVyID0gcmVmLm51bWJlcjsKICAgIHZhciB0cmltID0gcmVmLnRyaW07CgogICAgdmFyIGJhc2VWYWx1ZUV4cHJlc3Npb24gPSAnJCR2JzsKICAgIHZhciB2YWx1ZUV4cHJlc3Npb24gPSBiYXNlVmFsdWVFeHByZXNzaW9uOwogICAgaWYgKHRyaW0pIHsKICAgICAgdmFsdWVFeHByZXNzaW9uID0KICAgICAgICAiKHR5cGVvZiAiICsgYmFzZVZhbHVlRXhwcmVzc2lvbiArICIgPT09ICdzdHJpbmcnIiArCiAgICAgICAgIj8gIiArIGJhc2VWYWx1ZUV4cHJlc3Npb24gKyAiLnRyaW0oKSIgKwogICAgICAgICI6ICIgKyBiYXNlVmFsdWVFeHByZXNzaW9uICsgIikiOwogICAgfQogICAgaWYgKG51bWJlcikgewogICAgICB2YWx1ZUV4cHJlc3Npb24gPSAiX24oIiArIHZhbHVlRXhwcmVzc2lvbiArICIpIjsKICAgIH0KICAgIHZhciBhc3NpZ25tZW50ID0gZ2VuQXNzaWdubWVudENvZGUodmFsdWUsIHZhbHVlRXhwcmVzc2lvbik7CgogICAgZWwubW9kZWwgPSB7CiAgICAgIHZhbHVlOiAoIigiICsgdmFsdWUgKyAiKSIpLAogICAgICBleHByZXNzaW9uOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSksCiAgICAgIGNhbGxiYWNrOiAoImZ1bmN0aW9uICgiICsgYmFzZVZhbHVlRXhwcmVzc2lvbiArICIpIHsiICsgYXNzaWdubWVudCArICJ9IikKICAgIH07CiAgfQoKICAvKioKICAgKiBDcm9zcy1wbGF0Zm9ybSBjb2RlZ2VuIGhlbHBlciBmb3IgZ2VuZXJhdGluZyB2LW1vZGVsIHZhbHVlIGFzc2lnbm1lbnQgY29kZS4KICAgKi8KICBmdW5jdGlvbiBnZW5Bc3NpZ25tZW50Q29kZSAoCiAgICB2YWx1ZSwKICAgIGFzc2lnbm1lbnQKICApIHsKICAgIHZhciByZXMgPSBwYXJzZU1vZGVsKHZhbHVlKTsKICAgIGlmIChyZXMua2V5ID09PSBudWxsKSB7CiAgICAgIHJldHVybiAodmFsdWUgKyAiPSIgKyBhc3NpZ25tZW50KQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICgiJHNldCgiICsgKHJlcy5leHApICsgIiwgIiArIChyZXMua2V5KSArICIsICIgKyBhc3NpZ25tZW50ICsgIikiKQogICAgfQogIH0KCiAgLyoqCiAgICogUGFyc2UgYSB2LW1vZGVsIGV4cHJlc3Npb24gaW50byBhIGJhc2UgcGF0aCBhbmQgYSBmaW5hbCBrZXkgc2VnbWVudC4KICAgKiBIYW5kbGVzIGJvdGggZG90LXBhdGggYW5kIHBvc3NpYmxlIHNxdWFyZSBicmFja2V0cy4KICAgKgogICAqIFBvc3NpYmxlIGNhc2VzOgogICAqCiAgICogLSB0ZXN0CiAgICogLSB0ZXN0W2tleV0KICAgKiAtIHRlc3RbdGVzdDFba2V5XV0KICAgKiAtIHRlc3RbImEiXVtrZXldCiAgICogLSB4eHgudGVzdFthW2FdLnRlc3QxW2tleV1dCiAgICogLSB0ZXN0Lnh4eC5hWyJhc2EiXVt0ZXN0MVtrZXldXQogICAqCiAgICovCgogIHZhciBsZW4sIHN0ciwgY2hyLCBpbmRleCQxLCBleHByZXNzaW9uUG9zLCBleHByZXNzaW9uRW5kUG9zOwoKCgogIGZ1bmN0aW9uIHBhcnNlTW9kZWwgKHZhbCkgewogICAgLy8gRml4IGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUvcHVsbC83NzMwCiAgICAvLyBhbGxvdyB2LW1vZGVsPSJvYmoudmFsICIgKHRyYWlsaW5nIHdoaXRlc3BhY2UpCiAgICB2YWwgPSB2YWwudHJpbSgpOwogICAgbGVuID0gdmFsLmxlbmd0aDsKCiAgICBpZiAodmFsLmluZGV4T2YoJ1snKSA8IDAgfHwgdmFsLmxhc3RJbmRleE9mKCddJykgPCBsZW4gLSAxKSB7CiAgICAgIGluZGV4JDEgPSB2YWwubGFzdEluZGV4T2YoJy4nKTsKICAgICAgaWYgKGluZGV4JDEgPiAtMSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBleHA6IHZhbC5zbGljZSgwLCBpbmRleCQxKSwKICAgICAgICAgIGtleTogJyInICsgdmFsLnNsaWNlKGluZGV4JDEgKyAxKSArICciJwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZXhwOiB2YWwsCiAgICAgICAgICBrZXk6IG51bGwKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzdHIgPSB2YWw7CiAgICBpbmRleCQxID0gZXhwcmVzc2lvblBvcyA9IGV4cHJlc3Npb25FbmRQb3MgPSAwOwoKICAgIHdoaWxlICghZW9mKCkpIHsKICAgICAgY2hyID0gbmV4dCgpOwogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgaWYgKGlzU3RyaW5nU3RhcnQoY2hyKSkgewogICAgICAgIHBhcnNlU3RyaW5nKGNocik7CiAgICAgIH0gZWxzZSBpZiAoY2hyID09PSAweDVCKSB7CiAgICAgICAgcGFyc2VCcmFja2V0KGNocik7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gewogICAgICBleHA6IHZhbC5zbGljZSgwLCBleHByZXNzaW9uUG9zKSwKICAgICAga2V5OiB2YWwuc2xpY2UoZXhwcmVzc2lvblBvcyArIDEsIGV4cHJlc3Npb25FbmRQb3MpCiAgICB9CiAgfQoKICBmdW5jdGlvbiBuZXh0ICgpIHsKICAgIHJldHVybiBzdHIuY2hhckNvZGVBdCgrK2luZGV4JDEpCiAgfQoKICBmdW5jdGlvbiBlb2YgKCkgewogICAgcmV0dXJuIGluZGV4JDEgPj0gbGVuCiAgfQoKICBmdW5jdGlvbiBpc1N0cmluZ1N0YXJ0IChjaHIpIHsKICAgIHJldHVybiBjaHIgPT09IDB4MjIgfHwgY2hyID09PSAweDI3CiAgfQoKICBmdW5jdGlvbiBwYXJzZUJyYWNrZXQgKGNocikgewogICAgdmFyIGluQnJhY2tldCA9IDE7CiAgICBleHByZXNzaW9uUG9zID0gaW5kZXgkMTsKICAgIHdoaWxlICghZW9mKCkpIHsKICAgICAgY2hyID0gbmV4dCgpOwogICAgICBpZiAoaXNTdHJpbmdTdGFydChjaHIpKSB7CiAgICAgICAgcGFyc2VTdHJpbmcoY2hyKTsKICAgICAgICBjb250aW51ZQogICAgICB9CiAgICAgIGlmIChjaHIgPT09IDB4NUIpIHsgaW5CcmFja2V0Kys7IH0KICAgICAgaWYgKGNociA9PT0gMHg1RCkgeyBpbkJyYWNrZXQtLTsgfQogICAgICBpZiAoaW5CcmFja2V0ID09PSAwKSB7CiAgICAgICAgZXhwcmVzc2lvbkVuZFBvcyA9IGluZGV4JDE7CiAgICAgICAgYnJlYWsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gcGFyc2VTdHJpbmcgKGNocikgewogICAgdmFyIHN0cmluZ1F1b3RlID0gY2hyOwogICAgd2hpbGUgKCFlb2YoKSkgewogICAgICBjaHIgPSBuZXh0KCk7CiAgICAgIGlmIChjaHIgPT09IHN0cmluZ1F1b3RlKSB7CiAgICAgICAgYnJlYWsKICAgICAgfQogICAgfQogIH0KCiAgLyogICovCgogIHZhciB3YXJuJDE7CgogIC8vIGluIHNvbWUgY2FzZXMsIHRoZSBldmVudCB1c2VkIGhhcyB0byBiZSBkZXRlcm1pbmVkIGF0IHJ1bnRpbWUKICAvLyBzbyB3ZSB1c2VkIHNvbWUgcmVzZXJ2ZWQgdG9rZW5zIGR1cmluZyBjb21waWxlLgogIHZhciBSQU5HRV9UT0tFTiA9ICdfX3InOwogIHZhciBDSEVDS0JPWF9SQURJT19UT0tFTiA9ICdfX2MnOwoKICBmdW5jdGlvbiBtb2RlbCAoCiAgICBlbCwKICAgIGRpciwKICAgIF93YXJuCiAgKSB7CiAgICB3YXJuJDEgPSBfd2FybjsKICAgIHZhciB2YWx1ZSA9IGRpci52YWx1ZTsKICAgIHZhciBtb2RpZmllcnMgPSBkaXIubW9kaWZpZXJzOwogICAgdmFyIHRhZyA9IGVsLnRhZzsKICAgIHZhciB0eXBlID0gZWwuYXR0cnNNYXAudHlwZTsKCiAgICB7CiAgICAgIC8vIGlucHV0cyB3aXRoIHR5cGU9ImZpbGUiIGFyZSByZWFkIG9ubHkgYW5kIHNldHRpbmcgdGhlIGlucHV0J3MKICAgICAgLy8gdmFsdWUgd2lsbCB0aHJvdyBhbiBlcnJvci4KICAgICAgaWYgKHRhZyA9PT0gJ2lucHV0JyAmJiB0eXBlID09PSAnZmlsZScpIHsKICAgICAgICB3YXJuJDEoCiAgICAgICAgICAiPCIgKyAoZWwudGFnKSArICIgdi1tb2RlbD1cIiIgKyB2YWx1ZSArICJcIiB0eXBlPVwiZmlsZVwiPjpcbiIgKwogICAgICAgICAgIkZpbGUgaW5wdXRzIGFyZSByZWFkIG9ubHkuIFVzZSBhIHYtb246Y2hhbmdlIGxpc3RlbmVyIGluc3RlYWQuIiwKICAgICAgICAgIGVsLnJhd0F0dHJzTWFwWyd2LW1vZGVsJ10KICAgICAgICApOwogICAgICB9CiAgICB9CgogICAgaWYgKGVsLmNvbXBvbmVudCkgewogICAgICBnZW5Db21wb25lbnRNb2RlbChlbCwgdmFsdWUsIG1vZGlmaWVycyk7CiAgICAgIC8vIGNvbXBvbmVudCB2LW1vZGVsIGRvZXNuJ3QgbmVlZCBleHRyYSBydW50aW1lCiAgICAgIHJldHVybiBmYWxzZQogICAgfSBlbHNlIGlmICh0YWcgPT09ICdzZWxlY3QnKSB7CiAgICAgIGdlblNlbGVjdChlbCwgdmFsdWUsIG1vZGlmaWVycyk7CiAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ2lucHV0JyAmJiB0eXBlID09PSAnY2hlY2tib3gnKSB7CiAgICAgIGdlbkNoZWNrYm94TW9kZWwoZWwsIHZhbHVlLCBtb2RpZmllcnMpOwogICAgfSBlbHNlIGlmICh0YWcgPT09ICdpbnB1dCcgJiYgdHlwZSA9PT0gJ3JhZGlvJykgewogICAgICBnZW5SYWRpb01vZGVsKGVsLCB2YWx1ZSwgbW9kaWZpZXJzKTsKICAgIH0gZWxzZSBpZiAodGFnID09PSAnaW5wdXQnIHx8IHRhZyA9PT0gJ3RleHRhcmVhJykgewogICAgICBnZW5EZWZhdWx0TW9kZWwoZWwsIHZhbHVlLCBtb2RpZmllcnMpOwogICAgfSBlbHNlIGlmICghY29uZmlnLmlzUmVzZXJ2ZWRUYWcodGFnKSkgewogICAgICBnZW5Db21wb25lbnRNb2RlbChlbCwgdmFsdWUsIG1vZGlmaWVycyk7CiAgICAgIC8vIGNvbXBvbmVudCB2LW1vZGVsIGRvZXNuJ3QgbmVlZCBleHRyYSBydW50aW1lCiAgICAgIHJldHVybiBmYWxzZQogICAgfSBlbHNlIHsKICAgICAgd2FybiQxKAogICAgICAgICI8IiArIChlbC50YWcpICsgIiB2LW1vZGVsPVwiIiArIHZhbHVlICsgIlwiPjogIiArCiAgICAgICAgInYtbW9kZWwgaXMgbm90IHN1cHBvcnRlZCBvbiB0aGlzIGVsZW1lbnQgdHlwZS4gIiArCiAgICAgICAgJ0lmIHlvdSBhcmUgd29ya2luZyB3aXRoIGNvbnRlbnRlZGl0YWJsZSwgaXRcJ3MgcmVjb21tZW5kZWQgdG8gJyArCiAgICAgICAgJ3dyYXAgYSBsaWJyYXJ5IGRlZGljYXRlZCBmb3IgdGhhdCBwdXJwb3NlIGluc2lkZSBhIGN1c3RvbSBjb21wb25lbnQuJywKICAgICAgICBlbC5yYXdBdHRyc01hcFsndi1tb2RlbCddCiAgICAgICk7CiAgICB9CgogICAgLy8gZW5zdXJlIHJ1bnRpbWUgZGlyZWN0aXZlIG1ldGFkYXRhCiAgICByZXR1cm4gdHJ1ZQogIH0KCiAgZnVuY3Rpb24gZ2VuQ2hlY2tib3hNb2RlbCAoCiAgICBlbCwKICAgIHZhbHVlLAogICAgbW9kaWZpZXJzCiAgKSB7CiAgICB2YXIgbnVtYmVyID0gbW9kaWZpZXJzICYmIG1vZGlmaWVycy5udW1iZXI7CiAgICB2YXIgdmFsdWVCaW5kaW5nID0gZ2V0QmluZGluZ0F0dHIoZWwsICd2YWx1ZScpIHx8ICdudWxsJzsKICAgIHZhciB0cnVlVmFsdWVCaW5kaW5nID0gZ2V0QmluZGluZ0F0dHIoZWwsICd0cnVlLXZhbHVlJykgfHwgJ3RydWUnOwogICAgdmFyIGZhbHNlVmFsdWVCaW5kaW5nID0gZ2V0QmluZGluZ0F0dHIoZWwsICdmYWxzZS12YWx1ZScpIHx8ICdmYWxzZSc7CiAgICBhZGRQcm9wKGVsLCAnY2hlY2tlZCcsCiAgICAgICJBcnJheS5pc0FycmF5KCIgKyB2YWx1ZSArICIpIiArCiAgICAgICI/X2koIiArIHZhbHVlICsgIiwiICsgdmFsdWVCaW5kaW5nICsgIik+LTEiICsgKAogICAgICAgIHRydWVWYWx1ZUJpbmRpbmcgPT09ICd0cnVlJwogICAgICAgICAgPyAoIjooIiArIHZhbHVlICsgIikiKQogICAgICAgICAgOiAoIjpfcSgiICsgdmFsdWUgKyAiLCIgKyB0cnVlVmFsdWVCaW5kaW5nICsgIikiKQogICAgICApCiAgICApOwogICAgYWRkSGFuZGxlcihlbCwgJ2NoYW5nZScsCiAgICAgICJ2YXIgJCRhPSIgKyB2YWx1ZSArICIsIiArCiAgICAgICAgICAnJCRlbD0kZXZlbnQudGFyZ2V0LCcgKwogICAgICAgICAgIiQkYz0kJGVsLmNoZWNrZWQ/KCIgKyB0cnVlVmFsdWVCaW5kaW5nICsgIik6KCIgKyBmYWxzZVZhbHVlQmluZGluZyArICIpOyIgKwogICAgICAnaWYoQXJyYXkuaXNBcnJheSgkJGEpKXsnICsKICAgICAgICAidmFyICQkdj0iICsgKG51bWJlciA/ICdfbignICsgdmFsdWVCaW5kaW5nICsgJyknIDogdmFsdWVCaW5kaW5nKSArICIsIiArCiAgICAgICAgICAgICckJGk9X2koJCRhLCQkdik7JyArCiAgICAgICAgImlmKCQkZWwuY2hlY2tlZCl7JCRpPDAmJigiICsgKGdlbkFzc2lnbm1lbnRDb2RlKHZhbHVlLCAnJCRhLmNvbmNhdChbJCR2XSknKSkgKyAiKX0iICsKICAgICAgICAiZWxzZXskJGk+LTEmJigiICsgKGdlbkFzc2lnbm1lbnRDb2RlKHZhbHVlLCAnJCRhLnNsaWNlKDAsJCRpKS5jb25jYXQoJCRhLnNsaWNlKCQkaSsxKSknKSkgKyAiKX0iICsKICAgICAgIn1lbHNleyIgKyAoZ2VuQXNzaWdubWVudENvZGUodmFsdWUsICckJGMnKSkgKyAifSIsCiAgICAgIG51bGwsIHRydWUKICAgICk7CiAgfQoKICBmdW5jdGlvbiBnZW5SYWRpb01vZGVsICgKICAgIGVsLAogICAgdmFsdWUsCiAgICBtb2RpZmllcnMKICApIHsKICAgIHZhciBudW1iZXIgPSBtb2RpZmllcnMgJiYgbW9kaWZpZXJzLm51bWJlcjsKICAgIHZhciB2YWx1ZUJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3ZhbHVlJykgfHwgJ251bGwnOwogICAgdmFsdWVCaW5kaW5nID0gbnVtYmVyID8gKCJfbigiICsgdmFsdWVCaW5kaW5nICsgIikiKSA6IHZhbHVlQmluZGluZzsKICAgIGFkZFByb3AoZWwsICdjaGVja2VkJywgKCJfcSgiICsgdmFsdWUgKyAiLCIgKyB2YWx1ZUJpbmRpbmcgKyAiKSIpKTsKICAgIGFkZEhhbmRsZXIoZWwsICdjaGFuZ2UnLCBnZW5Bc3NpZ25tZW50Q29kZSh2YWx1ZSwgdmFsdWVCaW5kaW5nKSwgbnVsbCwgdHJ1ZSk7CiAgfQoKICBmdW5jdGlvbiBnZW5TZWxlY3QgKAogICAgZWwsCiAgICB2YWx1ZSwKICAgIG1vZGlmaWVycwogICkgewogICAgdmFyIG51bWJlciA9IG1vZGlmaWVycyAmJiBtb2RpZmllcnMubnVtYmVyOwogICAgdmFyIHNlbGVjdGVkVmFsID0gIkFycmF5LnByb3RvdHlwZS5maWx0ZXIiICsKICAgICAgIi5jYWxsKCRldmVudC50YXJnZXQub3B0aW9ucyxmdW5jdGlvbihvKXtyZXR1cm4gby5zZWxlY3RlZH0pIiArCiAgICAgICIubWFwKGZ1bmN0aW9uKG8pe3ZhciB2YWwgPSBcIl92YWx1ZVwiIGluIG8gPyBvLl92YWx1ZSA6IG8udmFsdWU7IiArCiAgICAgICJyZXR1cm4gIiArIChudW1iZXIgPyAnX24odmFsKScgOiAndmFsJykgKyAifSkiOwoKICAgIHZhciBhc3NpZ25tZW50ID0gJyRldmVudC50YXJnZXQubXVsdGlwbGUgPyAkJHNlbGVjdGVkVmFsIDogJCRzZWxlY3RlZFZhbFswXSc7CiAgICB2YXIgY29kZSA9ICJ2YXIgJCRzZWxlY3RlZFZhbCA9ICIgKyBzZWxlY3RlZFZhbCArICI7IjsKICAgIGNvZGUgPSBjb2RlICsgIiAiICsgKGdlbkFzc2lnbm1lbnRDb2RlKHZhbHVlLCBhc3NpZ25tZW50KSk7CiAgICBhZGRIYW5kbGVyKGVsLCAnY2hhbmdlJywgY29kZSwgbnVsbCwgdHJ1ZSk7CiAgfQoKICBmdW5jdGlvbiBnZW5EZWZhdWx0TW9kZWwgKAogICAgZWwsCiAgICB2YWx1ZSwKICAgIG1vZGlmaWVycwogICkgewogICAgdmFyIHR5cGUgPSBlbC5hdHRyc01hcC50eXBlOwoKICAgIC8vIHdhcm4gaWYgdi1iaW5kOnZhbHVlIGNvbmZsaWN0cyB3aXRoIHYtbW9kZWwKICAgIC8vIGV4Y2VwdCBmb3IgaW5wdXRzIHdpdGggdi1iaW5kOnR5cGUKICAgIHsKICAgICAgdmFyIHZhbHVlJDEgPSBlbC5hdHRyc01hcFsndi1iaW5kOnZhbHVlJ10gfHwgZWwuYXR0cnNNYXBbJzp2YWx1ZSddOwogICAgICB2YXIgdHlwZUJpbmRpbmcgPSBlbC5hdHRyc01hcFsndi1iaW5kOnR5cGUnXSB8fCBlbC5hdHRyc01hcFsnOnR5cGUnXTsKICAgICAgaWYgKHZhbHVlJDEgJiYgIXR5cGVCaW5kaW5nKSB7CiAgICAgICAgdmFyIGJpbmRpbmcgPSBlbC5hdHRyc01hcFsndi1iaW5kOnZhbHVlJ10gPyAndi1iaW5kOnZhbHVlJyA6ICc6dmFsdWUnOwogICAgICAgIHdhcm4kMSgKICAgICAgICAgIGJpbmRpbmcgKyAiPVwiIiArIHZhbHVlJDEgKyAiXCIgY29uZmxpY3RzIHdpdGggdi1tb2RlbCBvbiB0aGUgc2FtZSBlbGVtZW50ICIgKwogICAgICAgICAgJ2JlY2F1c2UgdGhlIGxhdHRlciBhbHJlYWR5IGV4cGFuZHMgdG8gYSB2YWx1ZSBiaW5kaW5nIGludGVybmFsbHknLAogICAgICAgICAgZWwucmF3QXR0cnNNYXBbYmluZGluZ10KICAgICAgICApOwogICAgICB9CiAgICB9CgogICAgdmFyIHJlZiA9IG1vZGlmaWVycyB8fCB7fTsKICAgIHZhciBsYXp5ID0gcmVmLmxhenk7CiAgICB2YXIgbnVtYmVyID0gcmVmLm51bWJlcjsKICAgIHZhciB0cmltID0gcmVmLnRyaW07CiAgICB2YXIgbmVlZENvbXBvc2l0aW9uR3VhcmQgPSAhbGF6eSAmJiB0eXBlICE9PSAncmFuZ2UnOwogICAgdmFyIGV2ZW50ID0gbGF6eQogICAgICA/ICdjaGFuZ2UnCiAgICAgIDogdHlwZSA9PT0gJ3JhbmdlJwogICAgICAgID8gUkFOR0VfVE9LRU4KICAgICAgICA6ICdpbnB1dCc7CgogICAgdmFyIHZhbHVlRXhwcmVzc2lvbiA9ICckZXZlbnQudGFyZ2V0LnZhbHVlJzsKICAgIGlmICh0cmltKSB7CiAgICAgIHZhbHVlRXhwcmVzc2lvbiA9ICIkZXZlbnQudGFyZ2V0LnZhbHVlLnRyaW0oKSI7CiAgICB9CiAgICBpZiAobnVtYmVyKSB7CiAgICAgIHZhbHVlRXhwcmVzc2lvbiA9ICJfbigiICsgdmFsdWVFeHByZXNzaW9uICsgIikiOwogICAgfQoKICAgIHZhciBjb2RlID0gZ2VuQXNzaWdubWVudENvZGUodmFsdWUsIHZhbHVlRXhwcmVzc2lvbik7CiAgICBpZiAobmVlZENvbXBvc2l0aW9uR3VhcmQpIHsKICAgICAgY29kZSA9ICJpZigkZXZlbnQudGFyZ2V0LmNvbXBvc2luZylyZXR1cm47IiArIGNvZGU7CiAgICB9CgogICAgYWRkUHJvcChlbCwgJ3ZhbHVlJywgKCIoIiArIHZhbHVlICsgIikiKSk7CiAgICBhZGRIYW5kbGVyKGVsLCBldmVudCwgY29kZSwgbnVsbCwgdHJ1ZSk7CiAgICBpZiAodHJpbSB8fCBudW1iZXIpIHsKICAgICAgYWRkSGFuZGxlcihlbCwgJ2JsdXInLCAnJGZvcmNlVXBkYXRlKCknKTsKICAgIH0KICB9CgogIC8qICAqLwoKICAvLyBub3JtYWxpemUgdi1tb2RlbCBldmVudCB0b2tlbnMgdGhhdCBjYW4gb25seSBiZSBkZXRlcm1pbmVkIGF0IHJ1bnRpbWUuCiAgLy8gaXQncyBpbXBvcnRhbnQgdG8gcGxhY2UgdGhlIGV2ZW50IGFzIHRoZSBmaXJzdCBpbiB0aGUgYXJyYXkgYmVjYXVzZQogIC8vIHRoZSB3aG9sZSBwb2ludCBpcyBlbnN1cmluZyB0aGUgdi1tb2RlbCBjYWxsYmFjayBnZXRzIGNhbGxlZCBiZWZvcmUKICAvLyB1c2VyLWF0dGFjaGVkIGhhbmRsZXJzLgogIGZ1bmN0aW9uIG5vcm1hbGl6ZUV2ZW50cyAob24pIHsKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKGlzRGVmKG9uW1JBTkdFX1RPS0VOXSkpIHsKICAgICAgLy8gSUUgaW5wdXRbdHlwZT1yYW5nZV0gb25seSBzdXBwb3J0cyBgY2hhbmdlYCBldmVudAogICAgICB2YXIgZXZlbnQgPSBpc0lFID8gJ2NoYW5nZScgOiAnaW5wdXQnOwogICAgICBvbltldmVudF0gPSBbXS5jb25jYXQob25bUkFOR0VfVE9LRU5dLCBvbltldmVudF0gfHwgW10pOwogICAgICBkZWxldGUgb25bUkFOR0VfVE9LRU5dOwogICAgfQogICAgLy8gVGhpcyB3YXMgb3JpZ2luYWxseSBpbnRlbmRlZCB0byBmaXggIzQ1MjEgYnV0IG5vIGxvbmdlciBuZWNlc3NhcnkKICAgIC8vIGFmdGVyIDIuNS4gS2VlcGluZyBpdCBmb3IgYmFja3dhcmRzIGNvbXBhdCB3aXRoIGdlbmVyYXRlZCBjb2RlIGZyb20gPCAyLjQKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKGlzRGVmKG9uW0NIRUNLQk9YX1JBRElPX1RPS0VOXSkpIHsKICAgICAgb24uY2hhbmdlID0gW10uY29uY2F0KG9uW0NIRUNLQk9YX1JBRElPX1RPS0VOXSwgb24uY2hhbmdlIHx8IFtdKTsKICAgICAgZGVsZXRlIG9uW0NIRUNLQk9YX1JBRElPX1RPS0VOXTsKICAgIH0KICB9CgogIHZhciB0YXJnZXQkMTsKCiAgZnVuY3Rpb24gY3JlYXRlT25jZUhhbmRsZXIkMSAoZXZlbnQsIGhhbmRsZXIsIGNhcHR1cmUpIHsKICAgIHZhciBfdGFyZ2V0ID0gdGFyZ2V0JDE7IC8vIHNhdmUgY3VycmVudCB0YXJnZXQgZWxlbWVudCBpbiBjbG9zdXJlCiAgICByZXR1cm4gZnVuY3Rpb24gb25jZUhhbmRsZXIgKCkgewogICAgICB2YXIgcmVzID0gaGFuZGxlci5hcHBseShudWxsLCBhcmd1bWVudHMpOwogICAgICBpZiAocmVzICE9PSBudWxsKSB7CiAgICAgICAgcmVtb3ZlJDIoZXZlbnQsIG9uY2VIYW5kbGVyLCBjYXB0dXJlLCBfdGFyZ2V0KTsKICAgICAgfQogICAgfQogIH0KCiAgLy8gIzk0NDY6IEZpcmVmb3ggPD0gNTMgKGluIHBhcnRpY3VsYXIsIEVTUiA1MikgaGFzIGluY29ycmVjdCBFdmVudC50aW1lU3RhbXAKICAvLyBpbXBsZW1lbnRhdGlvbiBhbmQgZG9lcyBub3QgZmlyZSBtaWNyb3Rhc2tzIGluIGJldHdlZW4gZXZlbnQgcHJvcGFnYXRpb24sIHNvCiAgLy8gc2FmZSB0byBleGNsdWRlLgogIHZhciB1c2VNaWNyb3Rhc2tGaXggPSBpc1VzaW5nTWljcm9UYXNrICYmICEoaXNGRiAmJiBOdW1iZXIoaXNGRlsxXSkgPD0gNTMpOwoKICBmdW5jdGlvbiBhZGQkMSAoCiAgICBuYW1lLAogICAgaGFuZGxlciwKICAgIGNhcHR1cmUsCiAgICBwYXNzaXZlCiAgKSB7CiAgICAvLyBhc3luYyBlZGdlIGNhc2UgIzY1NjY6IGlubmVyIGNsaWNrIGV2ZW50IHRyaWdnZXJzIHBhdGNoLCBldmVudCBoYW5kbGVyCiAgICAvLyBhdHRhY2hlZCB0byBvdXRlciBlbGVtZW50IGR1cmluZyBwYXRjaCwgYW5kIHRyaWdnZXJlZCBhZ2Fpbi4gVGhpcwogICAgLy8gaGFwcGVucyBiZWNhdXNlIGJyb3dzZXJzIGZpcmUgbWljcm90YXNrIHRpY2tzIGJldHdlZW4gZXZlbnQgcHJvcGFnYXRpb24uCiAgICAvLyB0aGUgc29sdXRpb24gaXMgc2ltcGxlOiB3ZSBzYXZlIHRoZSB0aW1lc3RhbXAgd2hlbiBhIGhhbmRsZXIgaXMgYXR0YWNoZWQsCiAgICAvLyBhbmQgdGhlIGhhbmRsZXIgd291bGQgb25seSBmaXJlIGlmIHRoZSBldmVudCBwYXNzZWQgdG8gaXQgd2FzIGZpcmVkCiAgICAvLyBBRlRFUiBpdCB3YXMgYXR0YWNoZWQuCiAgICBpZiAodXNlTWljcm90YXNrRml4KSB7CiAgICAgIHZhciBhdHRhY2hlZFRpbWVzdGFtcCA9IGN1cnJlbnRGbHVzaFRpbWVzdGFtcDsKICAgICAgdmFyIG9yaWdpbmFsID0gaGFuZGxlcjsKICAgICAgaGFuZGxlciA9IG9yaWdpbmFsLl93cmFwcGVyID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoCiAgICAgICAgICAvLyBubyBidWJibGluZywgc2hvdWxkIGFsd2F5cyBmaXJlLgogICAgICAgICAgLy8gdGhpcyBpcyBqdXN0IGEgc2FmZXR5IG5ldCBpbiBjYXNlIGV2ZW50LnRpbWVTdGFtcCBpcyB1bnJlbGlhYmxlIGluCiAgICAgICAgICAvLyBjZXJ0YWluIHdlaXJkIGVudmlyb25tZW50cy4uLgogICAgICAgICAgZS50YXJnZXQgPT09IGUuY3VycmVudFRhcmdldCB8fAogICAgICAgICAgLy8gZXZlbnQgaXMgZmlyZWQgYWZ0ZXIgaGFuZGxlciBhdHRhY2htZW50CiAgICAgICAgICBlLnRpbWVTdGFtcCA+PSBhdHRhY2hlZFRpbWVzdGFtcCB8fAogICAgICAgICAgLy8gYmFpbCBmb3IgZW52aXJvbm1lbnRzIHRoYXQgaGF2ZSBidWdneSBldmVudC50aW1lU3RhbXAgaW1wbGVtZW50YXRpb25zCiAgICAgICAgICAvLyAjOTQ2MiBpT1MgOSBidWc6IGV2ZW50LnRpbWVTdGFtcCBpcyAwIGFmdGVyIGhpc3RvcnkucHVzaFN0YXRlCiAgICAgICAgICAvLyAjOTY4MSBRdFdlYkVuZ2luZSBldmVudC50aW1lU3RhbXAgaXMgbmVnYXRpdmUgdmFsdWUKICAgICAgICAgIGUudGltZVN0YW1wIDw9IDAgfHwKICAgICAgICAgIC8vICM5NDQ4IGJhaWwgaWYgZXZlbnQgaXMgZmlyZWQgaW4gYW5vdGhlciBkb2N1bWVudCBpbiBhIG11bHRpLXBhZ2UKICAgICAgICAgIC8vIGVsZWN0cm9uL253LmpzIGFwcCwgc2luY2UgZXZlbnQudGltZVN0YW1wIHdpbGwgYmUgdXNpbmcgYSBkaWZmZXJlbnQKICAgICAgICAgIC8vIHN0YXJ0aW5nIHJlZmVyZW5jZQogICAgICAgICAgZS50YXJnZXQub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQKICAgICAgICApIHsKICAgICAgICAgIHJldHVybiBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgfQogICAgICB9OwogICAgfQogICAgdGFyZ2V0JDEuYWRkRXZlbnRMaXN0ZW5lcigKICAgICAgbmFtZSwKICAgICAgaGFuZGxlciwKICAgICAgc3VwcG9ydHNQYXNzaXZlCiAgICAgICAgPyB7IGNhcHR1cmU6IGNhcHR1cmUsIHBhc3NpdmU6IHBhc3NpdmUgfQogICAgICAgIDogY2FwdHVyZQogICAgKTsKICB9CgogIGZ1bmN0aW9uIHJlbW92ZSQyICgKICAgIG5hbWUsCiAgICBoYW5kbGVyLAogICAgY2FwdHVyZSwKICAgIF90YXJnZXQKICApIHsKICAgIChfdGFyZ2V0IHx8IHRhcmdldCQxKS5yZW1vdmVFdmVudExpc3RlbmVyKAogICAgICBuYW1lLAogICAgICBoYW5kbGVyLl93cmFwcGVyIHx8IGhhbmRsZXIsCiAgICAgIGNhcHR1cmUKICAgICk7CiAgfQoKICBmdW5jdGlvbiB1cGRhdGVET01MaXN0ZW5lcnMgKG9sZFZub2RlLCB2bm9kZSkgewogICAgaWYgKGlzVW5kZWYob2xkVm5vZGUuZGF0YS5vbikgJiYgaXNVbmRlZih2bm9kZS5kYXRhLm9uKSkgewogICAgICByZXR1cm4KICAgIH0KICAgIHZhciBvbiA9IHZub2RlLmRhdGEub24gfHwge307CiAgICB2YXIgb2xkT24gPSBvbGRWbm9kZS5kYXRhLm9uIHx8IHt9OwogICAgdGFyZ2V0JDEgPSB2bm9kZS5lbG07CiAgICBub3JtYWxpemVFdmVudHMob24pOwogICAgdXBkYXRlTGlzdGVuZXJzKG9uLCBvbGRPbiwgYWRkJDEsIHJlbW92ZSQyLCBjcmVhdGVPbmNlSGFuZGxlciQxLCB2bm9kZS5jb250ZXh0KTsKICAgIHRhcmdldCQxID0gdW5kZWZpbmVkOwogIH0KCiAgdmFyIGV2ZW50cyA9IHsKICAgIGNyZWF0ZTogdXBkYXRlRE9NTGlzdGVuZXJzLAogICAgdXBkYXRlOiB1cGRhdGVET01MaXN0ZW5lcnMKICB9OwoKICAvKiAgKi8KCiAgdmFyIHN2Z0NvbnRhaW5lcjsKCiAgZnVuY3Rpb24gdXBkYXRlRE9NUHJvcHMgKG9sZFZub2RlLCB2bm9kZSkgewogICAgaWYgKGlzVW5kZWYob2xkVm5vZGUuZGF0YS5kb21Qcm9wcykgJiYgaXNVbmRlZih2bm9kZS5kYXRhLmRvbVByb3BzKSkgewogICAgICByZXR1cm4KICAgIH0KICAgIHZhciBrZXksIGN1cjsKICAgIHZhciBlbG0gPSB2bm9kZS5lbG07CiAgICB2YXIgb2xkUHJvcHMgPSBvbGRWbm9kZS5kYXRhLmRvbVByb3BzIHx8IHt9OwogICAgdmFyIHByb3BzID0gdm5vZGUuZGF0YS5kb21Qcm9wcyB8fCB7fTsKICAgIC8vIGNsb25lIG9ic2VydmVkIG9iamVjdHMsIGFzIHRoZSB1c2VyIHByb2JhYmx5IHdhbnRzIHRvIG11dGF0ZSBpdAogICAgaWYgKGlzRGVmKHByb3BzLl9fb2JfXykpIHsKICAgICAgcHJvcHMgPSB2bm9kZS5kYXRhLmRvbVByb3BzID0gZXh0ZW5kKHt9LCBwcm9wcyk7CiAgICB9CgogICAgZm9yIChrZXkgaW4gb2xkUHJvcHMpIHsKICAgICAgaWYgKCEoa2V5IGluIHByb3BzKSkgewogICAgICAgIGVsbVtrZXldID0gJyc7CiAgICAgIH0KICAgIH0KCiAgICBmb3IgKGtleSBpbiBwcm9wcykgewogICAgICBjdXIgPSBwcm9wc1trZXldOwogICAgICAvLyBpZ25vcmUgY2hpbGRyZW4gaWYgdGhlIG5vZGUgaGFzIHRleHRDb250ZW50IG9yIGlubmVySFRNTCwKICAgICAgLy8gYXMgdGhlc2Ugd2lsbCB0aHJvdyBhd2F5IGV4aXN0aW5nIERPTSBub2RlcyBhbmQgY2F1c2UgcmVtb3ZhbCBlcnJvcnMKICAgICAgLy8gb24gc3Vic2VxdWVudCBwYXRjaGVzICgjMzM2MCkKICAgICAgaWYgKGtleSA9PT0gJ3RleHRDb250ZW50JyB8fCBrZXkgPT09ICdpbm5lckhUTUwnKSB7CiAgICAgICAgaWYgKHZub2RlLmNoaWxkcmVuKSB7IHZub2RlLmNoaWxkcmVuLmxlbmd0aCA9IDA7IH0KICAgICAgICBpZiAoY3VyID09PSBvbGRQcm9wc1trZXldKSB7IGNvbnRpbnVlIH0KICAgICAgICAvLyAjNjYwMSB3b3JrIGFyb3VuZCBDaHJvbWUgdmVyc2lvbiA8PSA1NSBidWcgd2hlcmUgc2luZ2xlIHRleHROb2RlCiAgICAgICAgLy8gcmVwbGFjZWQgYnkgaW5uZXJIVE1ML3RleHRDb250ZW50IHJldGFpbnMgaXRzIHBhcmVudE5vZGUgcHJvcGVydHkKICAgICAgICBpZiAoZWxtLmNoaWxkTm9kZXMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICBlbG0ucmVtb3ZlQ2hpbGQoZWxtLmNoaWxkTm9kZXNbMF0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKGtleSA9PT0gJ3ZhbHVlJyAmJiBlbG0udGFnTmFtZSAhPT0gJ1BST0dSRVNTJykgewogICAgICAgIC8vIHN0b3JlIHZhbHVlIGFzIF92YWx1ZSBhcyB3ZWxsIHNpbmNlCiAgICAgICAgLy8gbm9uLXN0cmluZyB2YWx1ZXMgd2lsbCBiZSBzdHJpbmdpZmllZAogICAgICAgIGVsbS5fdmFsdWUgPSBjdXI7CiAgICAgICAgLy8gYXZvaWQgcmVzZXR0aW5nIGN1cnNvciBwb3NpdGlvbiB3aGVuIHZhbHVlIGlzIHRoZSBzYW1lCiAgICAgICAgdmFyIHN0ckN1ciA9IGlzVW5kZWYoY3VyKSA/ICcnIDogU3RyaW5nKGN1cik7CiAgICAgICAgaWYgKHNob3VsZFVwZGF0ZVZhbHVlKGVsbSwgc3RyQ3VyKSkgewogICAgICAgICAgZWxtLnZhbHVlID0gc3RyQ3VyOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdpbm5lckhUTUwnICYmIGlzU1ZHKGVsbS50YWdOYW1lKSAmJiBpc1VuZGVmKGVsbS5pbm5lckhUTUwpKSB7CiAgICAgICAgLy8gSUUgZG9lc24ndCBzdXBwb3J0IGlubmVySFRNTCBmb3IgU1ZHIGVsZW1lbnRzCiAgICAgICAgc3ZnQ29udGFpbmVyID0gc3ZnQ29udGFpbmVyIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIHN2Z0NvbnRhaW5lci5pbm5lckhUTUwgPSAiPHN2Zz4iICsgY3VyICsgIjwvc3ZnPiI7CiAgICAgICAgdmFyIHN2ZyA9IHN2Z0NvbnRhaW5lci5maXJzdENoaWxkOwogICAgICAgIHdoaWxlIChlbG0uZmlyc3RDaGlsZCkgewogICAgICAgICAgZWxtLnJlbW92ZUNoaWxkKGVsbS5maXJzdENoaWxkKTsKICAgICAgICB9CiAgICAgICAgd2hpbGUgKHN2Zy5maXJzdENoaWxkKSB7CiAgICAgICAgICBlbG0uYXBwZW5kQ2hpbGQoc3ZnLmZpcnN0Q2hpbGQpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICgKICAgICAgICAvLyBza2lwIHRoZSB1cGRhdGUgaWYgb2xkIGFuZCBuZXcgVkRPTSBzdGF0ZSBpcyB0aGUgc2FtZS4KICAgICAgICAvLyBgdmFsdWVgIGlzIGhhbmRsZWQgc2VwYXJhdGVseSBiZWNhdXNlIHRoZSBET00gdmFsdWUgbWF5IGJlIHRlbXBvcmFyaWx5CiAgICAgICAgLy8gb3V0IG9mIHN5bmMgd2l0aCBWRE9NIHN0YXRlIGR1ZSB0byBmb2N1cywgY29tcG9zaXRpb24gYW5kIG1vZGlmaWVycy4KICAgICAgICAvLyBUaGlzICAjNDUyMSBieSBza2lwcGluZyB0aGUgdW5uZWNlc2FycnkgYGNoZWNrZWRgIHVwZGF0ZS4KICAgICAgICBjdXIgIT09IG9sZFByb3BzW2tleV0KICAgICAgKSB7CiAgICAgICAgLy8gc29tZSBwcm9wZXJ0eSB1cGRhdGVzIGNhbiB0aHJvdwogICAgICAgIC8vIGUuZy4gYHZhbHVlYCBvbiA8cHJvZ3Jlc3M+IHcvIG5vbi1maW5pdGUgdmFsdWUKICAgICAgICB0cnkgewogICAgICAgICAgZWxtW2tleV0gPSBjdXI7CiAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgfQogICAgfQogIH0KCiAgLy8gY2hlY2sgcGxhdGZvcm1zL3dlYi91dGlsL2F0dHJzLmpzIGFjY2VwdFZhbHVlCgoKICBmdW5jdGlvbiBzaG91bGRVcGRhdGVWYWx1ZSAoZWxtLCBjaGVja1ZhbCkgewogICAgcmV0dXJuICghZWxtLmNvbXBvc2luZyAmJiAoCiAgICAgIGVsbS50YWdOYW1lID09PSAnT1BUSU9OJyB8fAogICAgICBpc05vdEluRm9jdXNBbmREaXJ0eShlbG0sIGNoZWNrVmFsKSB8fAogICAgICBpc0RpcnR5V2l0aE1vZGlmaWVycyhlbG0sIGNoZWNrVmFsKQogICAgKSkKICB9CgogIGZ1bmN0aW9uIGlzTm90SW5Gb2N1c0FuZERpcnR5IChlbG0sIGNoZWNrVmFsKSB7CiAgICAvLyByZXR1cm4gdHJ1ZSB3aGVuIHRleHRib3ggKC5udW1iZXIgYW5kIC50cmltKSBsb3NlcyBmb2N1cyBhbmQgaXRzIHZhbHVlIGlzCiAgICAvLyBub3QgZXF1YWwgdG8gdGhlIHVwZGF0ZWQgdmFsdWUKICAgIHZhciBub3RJbkZvY3VzID0gdHJ1ZTsKICAgIC8vICM2MTU3CiAgICAvLyB3b3JrIGFyb3VuZCBJRSBidWcgd2hlbiBhY2Nlc3NpbmcgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBpbiBhbiBpZnJhbWUKICAgIHRyeSB7IG5vdEluRm9jdXMgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICE9PSBlbG07IH0gY2F0Y2ggKGUpIHt9CiAgICByZXR1cm4gbm90SW5Gb2N1cyAmJiBlbG0udmFsdWUgIT09IGNoZWNrVmFsCiAgfQoKICBmdW5jdGlvbiBpc0RpcnR5V2l0aE1vZGlmaWVycyAoZWxtLCBuZXdWYWwpIHsKICAgIHZhciB2YWx1ZSA9IGVsbS52YWx1ZTsKICAgIHZhciBtb2RpZmllcnMgPSBlbG0uX3ZNb2RpZmllcnM7IC8vIGluamVjdGVkIGJ5IHYtbW9kZWwgcnVudGltZQogICAgaWYgKGlzRGVmKG1vZGlmaWVycykpIHsKICAgICAgaWYgKG1vZGlmaWVycy5udW1iZXIpIHsKICAgICAgICByZXR1cm4gdG9OdW1iZXIodmFsdWUpICE9PSB0b051bWJlcihuZXdWYWwpCiAgICAgIH0KICAgICAgaWYgKG1vZGlmaWVycy50cmltKSB7CiAgICAgICAgcmV0dXJuIHZhbHVlLnRyaW0oKSAhPT0gbmV3VmFsLnRyaW0oKQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdmFsdWUgIT09IG5ld1ZhbAogIH0KCiAgdmFyIGRvbVByb3BzID0gewogICAgY3JlYXRlOiB1cGRhdGVET01Qcm9wcywKICAgIHVwZGF0ZTogdXBkYXRlRE9NUHJvcHMKICB9OwoKICAvKiAgKi8KCiAgdmFyIHBhcnNlU3R5bGVUZXh0ID0gY2FjaGVkKGZ1bmN0aW9uIChjc3NUZXh0KSB7CiAgICB2YXIgcmVzID0ge307CiAgICB2YXIgbGlzdERlbGltaXRlciA9IC87KD8hW14oXSpcKSkvZzsKICAgIHZhciBwcm9wZXJ0eURlbGltaXRlciA9IC86KC4rKS87CiAgICBjc3NUZXh0LnNwbGl0KGxpc3REZWxpbWl0ZXIpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgaWYgKGl0ZW0pIHsKICAgICAgICB2YXIgdG1wID0gaXRlbS5zcGxpdChwcm9wZXJ0eURlbGltaXRlcik7CiAgICAgICAgdG1wLmxlbmd0aCA+IDEgJiYgKHJlc1t0bXBbMF0udHJpbSgpXSA9IHRtcFsxXS50cmltKCkpOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiByZXMKICB9KTsKCiAgLy8gbWVyZ2Ugc3RhdGljIGFuZCBkeW5hbWljIHN0eWxlIGRhdGEgb24gdGhlIHNhbWUgdm5vZGUKICBmdW5jdGlvbiBub3JtYWxpemVTdHlsZURhdGEgKGRhdGEpIHsKICAgIHZhciBzdHlsZSA9IG5vcm1hbGl6ZVN0eWxlQmluZGluZyhkYXRhLnN0eWxlKTsKICAgIC8vIHN0YXRpYyBzdHlsZSBpcyBwcmUtcHJvY2Vzc2VkIGludG8gYW4gb2JqZWN0IGR1cmluZyBjb21waWxhdGlvbgogICAgLy8gYW5kIGlzIGFsd2F5cyBhIGZyZXNoIG9iamVjdCwgc28gaXQncyBzYWZlIHRvIG1lcmdlIGludG8gaXQKICAgIHJldHVybiBkYXRhLnN0YXRpY1N0eWxlCiAgICAgID8gZXh0ZW5kKGRhdGEuc3RhdGljU3R5bGUsIHN0eWxlKQogICAgICA6IHN0eWxlCiAgfQoKICAvLyBub3JtYWxpemUgcG9zc2libGUgYXJyYXkgLyBzdHJpbmcgdmFsdWVzIGludG8gT2JqZWN0CiAgZnVuY3Rpb24gbm9ybWFsaXplU3R5bGVCaW5kaW5nIChiaW5kaW5nU3R5bGUpIHsKICAgIGlmIChBcnJheS5pc0FycmF5KGJpbmRpbmdTdHlsZSkpIHsKICAgICAgcmV0dXJuIHRvT2JqZWN0KGJpbmRpbmdTdHlsZSkKICAgIH0KICAgIGlmICh0eXBlb2YgYmluZGluZ1N0eWxlID09PSAnc3RyaW5nJykgewogICAgICByZXR1cm4gcGFyc2VTdHlsZVRleHQoYmluZGluZ1N0eWxlKQogICAgfQogICAgcmV0dXJuIGJpbmRpbmdTdHlsZQogIH0KCiAgLyoqCiAgICogcGFyZW50IGNvbXBvbmVudCBzdHlsZSBzaG91bGQgYmUgYWZ0ZXIgY2hpbGQncwogICAqIHNvIHRoYXQgcGFyZW50IGNvbXBvbmVudCdzIHN0eWxlIGNvdWxkIG92ZXJyaWRlIGl0CiAgICovCiAgZnVuY3Rpb24gZ2V0U3R5bGUgKHZub2RlLCBjaGVja0NoaWxkKSB7CiAgICB2YXIgcmVzID0ge307CiAgICB2YXIgc3R5bGVEYXRhOwoKICAgIGlmIChjaGVja0NoaWxkKSB7CiAgICAgIHZhciBjaGlsZE5vZGUgPSB2bm9kZTsKICAgICAgd2hpbGUgKGNoaWxkTm9kZS5jb21wb25lbnRJbnN0YW5jZSkgewogICAgICAgIGNoaWxkTm9kZSA9IGNoaWxkTm9kZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7CiAgICAgICAgaWYgKAogICAgICAgICAgY2hpbGROb2RlICYmIGNoaWxkTm9kZS5kYXRhICYmCiAgICAgICAgICAoc3R5bGVEYXRhID0gbm9ybWFsaXplU3R5bGVEYXRhKGNoaWxkTm9kZS5kYXRhKSkKICAgICAgICApIHsKICAgICAgICAgIGV4dGVuZChyZXMsIHN0eWxlRGF0YSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaWYgKChzdHlsZURhdGEgPSBub3JtYWxpemVTdHlsZURhdGEodm5vZGUuZGF0YSkpKSB7CiAgICAgIGV4dGVuZChyZXMsIHN0eWxlRGF0YSk7CiAgICB9CgogICAgdmFyIHBhcmVudE5vZGUgPSB2bm9kZTsKICAgIHdoaWxlICgocGFyZW50Tm9kZSA9IHBhcmVudE5vZGUucGFyZW50KSkgewogICAgICBpZiAocGFyZW50Tm9kZS5kYXRhICYmIChzdHlsZURhdGEgPSBub3JtYWxpemVTdHlsZURhdGEocGFyZW50Tm9kZS5kYXRhKSkpIHsKICAgICAgICBleHRlbmQocmVzLCBzdHlsZURhdGEpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gcmVzCiAgfQoKICAvKiAgKi8KCiAgdmFyIGNzc1ZhclJFID0gL14tLS87CiAgdmFyIGltcG9ydGFudFJFID0gL1xzKiFpbXBvcnRhbnQkLzsKICB2YXIgc2V0UHJvcCA9IGZ1bmN0aW9uIChlbCwgbmFtZSwgdmFsKSB7CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgIGlmIChjc3NWYXJSRS50ZXN0KG5hbWUpKSB7CiAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHZhbCk7CiAgICB9IGVsc2UgaWYgKGltcG9ydGFudFJFLnRlc3QodmFsKSkgewogICAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eShoeXBoZW5hdGUobmFtZSksIHZhbC5yZXBsYWNlKGltcG9ydGFudFJFLCAnJyksICdpbXBvcnRhbnQnKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBub3JtYWxpemVkTmFtZSA9IG5vcm1hbGl6ZShuYW1lKTsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkgewogICAgICAgIC8vIFN1cHBvcnQgdmFsdWVzIGFycmF5IGNyZWF0ZWQgYnkgYXV0b3ByZWZpeGVyLCBlLmcuCiAgICAgICAgLy8ge2Rpc3BsYXk6IFsiLXdlYmtpdC1ib3giLCAiLW1zLWZsZXhib3giLCAiZmxleCJdfQogICAgICAgIC8vIFNldCB0aGVtIG9uZSBieSBvbmUsIGFuZCB0aGUgYnJvd3NlciB3aWxsIG9ubHkgc2V0IHRob3NlIGl0IGNhbiByZWNvZ25pemUKICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdmFsLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICBlbC5zdHlsZVtub3JtYWxpemVkTmFtZV0gPSB2YWxbaV07CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGVsLnN0eWxlW25vcm1hbGl6ZWROYW1lXSA9IHZhbDsKICAgICAgfQogICAgfQogIH07CgogIHZhciB2ZW5kb3JOYW1lcyA9IFsnV2Via2l0JywgJ01veicsICdtcyddOwoKICB2YXIgZW1wdHlTdHlsZTsKICB2YXIgbm9ybWFsaXplID0gY2FjaGVkKGZ1bmN0aW9uIChwcm9wKSB7CiAgICBlbXB0eVN0eWxlID0gZW1wdHlTdHlsZSB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKS5zdHlsZTsKICAgIHByb3AgPSBjYW1lbGl6ZShwcm9wKTsKICAgIGlmIChwcm9wICE9PSAnZmlsdGVyJyAmJiAocHJvcCBpbiBlbXB0eVN0eWxlKSkgewogICAgICByZXR1cm4gcHJvcAogICAgfQogICAgdmFyIGNhcE5hbWUgPSBwcm9wLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcHJvcC5zbGljZSgxKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVuZG9yTmFtZXMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIG5hbWUgPSB2ZW5kb3JOYW1lc1tpXSArIGNhcE5hbWU7CiAgICAgIGlmIChuYW1lIGluIGVtcHR5U3R5bGUpIHsKICAgICAgICByZXR1cm4gbmFtZQogICAgICB9CiAgICB9CiAgfSk7CgogIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlIChvbGRWbm9kZSwgdm5vZGUpIHsKICAgIHZhciBkYXRhID0gdm5vZGUuZGF0YTsKICAgIHZhciBvbGREYXRhID0gb2xkVm5vZGUuZGF0YTsKCiAgICBpZiAoaXNVbmRlZihkYXRhLnN0YXRpY1N0eWxlKSAmJiBpc1VuZGVmKGRhdGEuc3R5bGUpICYmCiAgICAgIGlzVW5kZWYob2xkRGF0YS5zdGF0aWNTdHlsZSkgJiYgaXNVbmRlZihvbGREYXRhLnN0eWxlKQogICAgKSB7CiAgICAgIHJldHVybgogICAgfQoKICAgIHZhciBjdXIsIG5hbWU7CiAgICB2YXIgZWwgPSB2bm9kZS5lbG07CiAgICB2YXIgb2xkU3RhdGljU3R5bGUgPSBvbGREYXRhLnN0YXRpY1N0eWxlOwogICAgdmFyIG9sZFN0eWxlQmluZGluZyA9IG9sZERhdGEubm9ybWFsaXplZFN0eWxlIHx8IG9sZERhdGEuc3R5bGUgfHwge307CgogICAgLy8gaWYgc3RhdGljIHN0eWxlIGV4aXN0cywgc3R5bGViaW5kaW5nIGFscmVhZHkgbWVyZ2VkIGludG8gaXQgd2hlbiBkb2luZyBub3JtYWxpemVTdHlsZURhdGEKICAgIHZhciBvbGRTdHlsZSA9IG9sZFN0YXRpY1N0eWxlIHx8IG9sZFN0eWxlQmluZGluZzsKCiAgICB2YXIgc3R5bGUgPSBub3JtYWxpemVTdHlsZUJpbmRpbmcodm5vZGUuZGF0YS5zdHlsZSkgfHwge307CgogICAgLy8gc3RvcmUgbm9ybWFsaXplZCBzdHlsZSB1bmRlciBhIGRpZmZlcmVudCBrZXkgZm9yIG5leHQgZGlmZgogICAgLy8gbWFrZSBzdXJlIHRvIGNsb25lIGl0IGlmIGl0J3MgcmVhY3RpdmUsIHNpbmNlIHRoZSB1c2VyIGxpa2VseSB3YW50cwogICAgLy8gdG8gbXV0YXRlIGl0LgogICAgdm5vZGUuZGF0YS5ub3JtYWxpemVkU3R5bGUgPSBpc0RlZihzdHlsZS5fX29iX18pCiAgICAgID8gZXh0ZW5kKHt9LCBzdHlsZSkKICAgICAgOiBzdHlsZTsKCiAgICB2YXIgbmV3U3R5bGUgPSBnZXRTdHlsZSh2bm9kZSwgdHJ1ZSk7CgogICAgZm9yIChuYW1lIGluIG9sZFN0eWxlKSB7CiAgICAgIGlmIChpc1VuZGVmKG5ld1N0eWxlW25hbWVdKSkgewogICAgICAgIHNldFByb3AoZWwsIG5hbWUsICcnKTsKICAgICAgfQogICAgfQogICAgZm9yIChuYW1lIGluIG5ld1N0eWxlKSB7CiAgICAgIGN1ciA9IG5ld1N0eWxlW25hbWVdOwogICAgICBpZiAoY3VyICE9PSBvbGRTdHlsZVtuYW1lXSkgewogICAgICAgIC8vIGllOSBzZXR0aW5nIHRvIG51bGwgaGFzIG5vIGVmZmVjdCwgbXVzdCB1c2UgZW1wdHkgc3RyaW5nCiAgICAgICAgc2V0UHJvcChlbCwgbmFtZSwgY3VyID09IG51bGwgPyAnJyA6IGN1cik7CiAgICAgIH0KICAgIH0KICB9CgogIHZhciBzdHlsZSA9IHsKICAgIGNyZWF0ZTogdXBkYXRlU3R5bGUsCiAgICB1cGRhdGU6IHVwZGF0ZVN0eWxlCiAgfTsKCiAgLyogICovCgogIHZhciB3aGl0ZXNwYWNlUkUgPSAvXHMrLzsKCiAgLyoqCiAgICogQWRkIGNsYXNzIHdpdGggY29tcGF0aWJpbGl0eSBmb3IgU1ZHIHNpbmNlIGNsYXNzTGlzdCBpcyBub3Qgc3VwcG9ydGVkIG9uCiAgICogU1ZHIGVsZW1lbnRzIGluIElFCiAgICovCiAgZnVuY3Rpb24gYWRkQ2xhc3MgKGVsLCBjbHMpIHsKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKCFjbHMgfHwgIShjbHMgPSBjbHMudHJpbSgpKSkgewogICAgICByZXR1cm4KICAgIH0KCiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqLwogICAgaWYgKGVsLmNsYXNzTGlzdCkgewogICAgICBpZiAoY2xzLmluZGV4T2YoJyAnKSA+IC0xKSB7CiAgICAgICAgY2xzLnNwbGl0KHdoaXRlc3BhY2VSRSkuZm9yRWFjaChmdW5jdGlvbiAoYykgeyByZXR1cm4gZWwuY2xhc3NMaXN0LmFkZChjKTsgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChjbHMpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB2YXIgY3VyID0gIiAiICsgKGVsLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJykgKyAiICI7CiAgICAgIGlmIChjdXIuaW5kZXhPZignICcgKyBjbHMgKyAnICcpIDwgMCkgewogICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAoY3VyICsgY2xzKS50cmltKCkpOwogICAgICB9CiAgICB9CiAgfQoKICAvKioKICAgKiBSZW1vdmUgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBTVkcgc2luY2UgY2xhc3NMaXN0IGlzIG5vdCBzdXBwb3J0ZWQgb24KICAgKiBTVkcgZWxlbWVudHMgaW4gSUUKICAgKi8KICBmdW5jdGlvbiByZW1vdmVDbGFzcyAoZWwsIGNscykgewogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoIWNscyB8fCAhKGNscyA9IGNscy50cmltKCkpKSB7CiAgICAgIHJldHVybgogICAgfQoKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovCiAgICBpZiAoZWwuY2xhc3NMaXN0KSB7CiAgICAgIGlmIChjbHMuaW5kZXhPZignICcpID4gLTEpIHsKICAgICAgICBjbHMuc3BsaXQod2hpdGVzcGFjZVJFKS5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7IHJldHVybiBlbC5jbGFzc0xpc3QucmVtb3ZlKGMpOyB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNscyk7CiAgICAgIH0KICAgICAgaWYgKCFlbC5jbGFzc0xpc3QubGVuZ3RoKSB7CiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB2YXIgY3VyID0gIiAiICsgKGVsLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJykgKyAiICI7CiAgICAgIHZhciB0YXIgPSAnICcgKyBjbHMgKyAnICc7CiAgICAgIHdoaWxlIChjdXIuaW5kZXhPZih0YXIpID49IDApIHsKICAgICAgICBjdXIgPSBjdXIucmVwbGFjZSh0YXIsICcgJyk7CiAgICAgIH0KICAgICAgY3VyID0gY3VyLnRyaW0oKTsKICAgICAgaWYgKGN1cikgewogICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjdXIpOwogICAgICB9IGVsc2UgewogICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKTsKICAgICAgfQogICAgfQogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIHJlc29sdmVUcmFuc2l0aW9uIChkZWYkJDEpIHsKICAgIGlmICghZGVmJCQxKSB7CiAgICAgIHJldHVybgogICAgfQogICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi8KICAgIGlmICh0eXBlb2YgZGVmJCQxID09PSAnb2JqZWN0JykgewogICAgICB2YXIgcmVzID0ge307CiAgICAgIGlmIChkZWYkJDEuY3NzICE9PSBmYWxzZSkgewogICAgICAgIGV4dGVuZChyZXMsIGF1dG9Dc3NUcmFuc2l0aW9uKGRlZiQkMS5uYW1lIHx8ICd2JykpOwogICAgICB9CiAgICAgIGV4dGVuZChyZXMsIGRlZiQkMSk7CiAgICAgIHJldHVybiByZXMKICAgIH0gZWxzZSBpZiAodHlwZW9mIGRlZiQkMSA9PT0gJ3N0cmluZycpIHsKICAgICAgcmV0dXJuIGF1dG9Dc3NUcmFuc2l0aW9uKGRlZiQkMSkKICAgIH0KICB9CgogIHZhciBhdXRvQ3NzVHJhbnNpdGlvbiA9IGNhY2hlZChmdW5jdGlvbiAobmFtZSkgewogICAgcmV0dXJuIHsKICAgICAgZW50ZXJDbGFzczogKG5hbWUgKyAiLWVudGVyIiksCiAgICAgIGVudGVyVG9DbGFzczogKG5hbWUgKyAiLWVudGVyLXRvIiksCiAgICAgIGVudGVyQWN0aXZlQ2xhc3M6IChuYW1lICsgIi1lbnRlci1hY3RpdmUiKSwKICAgICAgbGVhdmVDbGFzczogKG5hbWUgKyAiLWxlYXZlIiksCiAgICAgIGxlYXZlVG9DbGFzczogKG5hbWUgKyAiLWxlYXZlLXRvIiksCiAgICAgIGxlYXZlQWN0aXZlQ2xhc3M6IChuYW1lICsgIi1sZWF2ZS1hY3RpdmUiKQogICAgfQogIH0pOwoKICB2YXIgaGFzVHJhbnNpdGlvbiA9IGluQnJvd3NlciAmJiAhaXNJRTk7CiAgdmFyIFRSQU5TSVRJT04gPSAndHJhbnNpdGlvbic7CiAgdmFyIEFOSU1BVElPTiA9ICdhbmltYXRpb24nOwoKICAvLyBUcmFuc2l0aW9uIHByb3BlcnR5L2V2ZW50IHNuaWZmaW5nCiAgdmFyIHRyYW5zaXRpb25Qcm9wID0gJ3RyYW5zaXRpb24nOwogIHZhciB0cmFuc2l0aW9uRW5kRXZlbnQgPSAndHJhbnNpdGlvbmVuZCc7CiAgdmFyIGFuaW1hdGlvblByb3AgPSAnYW5pbWF0aW9uJzsKICB2YXIgYW5pbWF0aW9uRW5kRXZlbnQgPSAnYW5pbWF0aW9uZW5kJzsKICBpZiAoaGFzVHJhbnNpdGlvbikgewogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAod2luZG93Lm9udHJhbnNpdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmCiAgICAgIHdpbmRvdy5vbndlYmtpdHRyYW5zaXRpb25lbmQgIT09IHVuZGVmaW5lZAogICAgKSB7CiAgICAgIHRyYW5zaXRpb25Qcm9wID0gJ1dlYmtpdFRyYW5zaXRpb24nOwogICAgICB0cmFuc2l0aW9uRW5kRXZlbnQgPSAnd2Via2l0VHJhbnNpdGlvbkVuZCc7CiAgICB9CiAgICBpZiAod2luZG93Lm9uYW5pbWF0aW9uZW5kID09PSB1bmRlZmluZWQgJiYKICAgICAgd2luZG93Lm9ud2Via2l0YW5pbWF0aW9uZW5kICE9PSB1bmRlZmluZWQKICAgICkgewogICAgICBhbmltYXRpb25Qcm9wID0gJ1dlYmtpdEFuaW1hdGlvbic7CiAgICAgIGFuaW1hdGlvbkVuZEV2ZW50ID0gJ3dlYmtpdEFuaW1hdGlvbkVuZCc7CiAgICB9CiAgfQoKICAvLyBiaW5kaW5nIHRvIHdpbmRvdyBpcyBuZWNlc3NhcnkgdG8gbWFrZSBob3QgcmVsb2FkIHdvcmsgaW4gSUUgaW4gc3RyaWN0IG1vZGUKICB2YXIgcmFmID0gaW5Ccm93c2VyCiAgICA/IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUKICAgICAgPyB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lLmJpbmQod2luZG93KQogICAgICA6IHNldFRpbWVvdXQKICAgIDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKGZuKSB7IHJldHVybiBmbigpOyB9OwoKICBmdW5jdGlvbiBuZXh0RnJhbWUgKGZuKSB7CiAgICByYWYoZnVuY3Rpb24gKCkgewogICAgICByYWYoZm4pOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBhZGRUcmFuc2l0aW9uQ2xhc3MgKGVsLCBjbHMpIHsKICAgIHZhciB0cmFuc2l0aW9uQ2xhc3NlcyA9IGVsLl90cmFuc2l0aW9uQ2xhc3NlcyB8fCAoZWwuX3RyYW5zaXRpb25DbGFzc2VzID0gW10pOwogICAgaWYgKHRyYW5zaXRpb25DbGFzc2VzLmluZGV4T2YoY2xzKSA8IDApIHsKICAgICAgdHJhbnNpdGlvbkNsYXNzZXMucHVzaChjbHMpOwogICAgICBhZGRDbGFzcyhlbCwgY2xzKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHJlbW92ZVRyYW5zaXRpb25DbGFzcyAoZWwsIGNscykgewogICAgaWYgKGVsLl90cmFuc2l0aW9uQ2xhc3NlcykgewogICAgICByZW1vdmUoZWwuX3RyYW5zaXRpb25DbGFzc2VzLCBjbHMpOwogICAgfQogICAgcmVtb3ZlQ2xhc3MoZWwsIGNscyk7CiAgfQoKICBmdW5jdGlvbiB3aGVuVHJhbnNpdGlvbkVuZHMgKAogICAgZWwsCiAgICBleHBlY3RlZFR5cGUsCiAgICBjYgogICkgewogICAgdmFyIHJlZiA9IGdldFRyYW5zaXRpb25JbmZvKGVsLCBleHBlY3RlZFR5cGUpOwogICAgdmFyIHR5cGUgPSByZWYudHlwZTsKICAgIHZhciB0aW1lb3V0ID0gcmVmLnRpbWVvdXQ7CiAgICB2YXIgcHJvcENvdW50ID0gcmVmLnByb3BDb3VudDsKICAgIGlmICghdHlwZSkgeyByZXR1cm4gY2IoKSB9CiAgICB2YXIgZXZlbnQgPSB0eXBlID09PSBUUkFOU0lUSU9OID8gdHJhbnNpdGlvbkVuZEV2ZW50IDogYW5pbWF0aW9uRW5kRXZlbnQ7CiAgICB2YXIgZW5kZWQgPSAwOwogICAgdmFyIGVuZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgb25FbmQpOwogICAgICBjYigpOwogICAgfTsKICAgIHZhciBvbkVuZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmIChlLnRhcmdldCA9PT0gZWwpIHsKICAgICAgICBpZiAoKytlbmRlZCA+PSBwcm9wQ291bnQpIHsKICAgICAgICAgIGVuZCgpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBpZiAoZW5kZWQgPCBwcm9wQ291bnQpIHsKICAgICAgICBlbmQoKTsKICAgICAgfQogICAgfSwgdGltZW91dCArIDEpOwogICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgb25FbmQpOwogIH0KCiAgdmFyIHRyYW5zZm9ybVJFID0gL1xiKHRyYW5zZm9ybXxhbGwpKCx8JCkvOwoKICBmdW5jdGlvbiBnZXRUcmFuc2l0aW9uSW5mbyAoZWwsIGV4cGVjdGVkVHlwZSkgewogICAgdmFyIHN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsKTsKICAgIC8vIEpTRE9NIG1heSByZXR1cm4gdW5kZWZpbmVkIGZvciB0cmFuc2l0aW9uIHByb3BlcnRpZXMKICAgIHZhciB0cmFuc2l0aW9uRGVsYXlzID0gKHN0eWxlc1t0cmFuc2l0aW9uUHJvcCArICdEZWxheSddIHx8ICcnKS5zcGxpdCgnLCAnKTsKICAgIHZhciB0cmFuc2l0aW9uRHVyYXRpb25zID0gKHN0eWxlc1t0cmFuc2l0aW9uUHJvcCArICdEdXJhdGlvbiddIHx8ICcnKS5zcGxpdCgnLCAnKTsKICAgIHZhciB0cmFuc2l0aW9uVGltZW91dCA9IGdldFRpbWVvdXQodHJhbnNpdGlvbkRlbGF5cywgdHJhbnNpdGlvbkR1cmF0aW9ucyk7CiAgICB2YXIgYW5pbWF0aW9uRGVsYXlzID0gKHN0eWxlc1thbmltYXRpb25Qcm9wICsgJ0RlbGF5J10gfHwgJycpLnNwbGl0KCcsICcpOwogICAgdmFyIGFuaW1hdGlvbkR1cmF0aW9ucyA9IChzdHlsZXNbYW5pbWF0aW9uUHJvcCArICdEdXJhdGlvbiddIHx8ICcnKS5zcGxpdCgnLCAnKTsKICAgIHZhciBhbmltYXRpb25UaW1lb3V0ID0gZ2V0VGltZW91dChhbmltYXRpb25EZWxheXMsIGFuaW1hdGlvbkR1cmF0aW9ucyk7CgogICAgdmFyIHR5cGU7CiAgICB2YXIgdGltZW91dCA9IDA7CiAgICB2YXIgcHJvcENvdW50ID0gMDsKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKGV4cGVjdGVkVHlwZSA9PT0gVFJBTlNJVElPTikgewogICAgICBpZiAodHJhbnNpdGlvblRpbWVvdXQgPiAwKSB7CiAgICAgICAgdHlwZSA9IFRSQU5TSVRJT047CiAgICAgICAgdGltZW91dCA9IHRyYW5zaXRpb25UaW1lb3V0OwogICAgICAgIHByb3BDb3VudCA9IHRyYW5zaXRpb25EdXJhdGlvbnMubGVuZ3RoOwogICAgICB9CiAgICB9IGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gQU5JTUFUSU9OKSB7CiAgICAgIGlmIChhbmltYXRpb25UaW1lb3V0ID4gMCkgewogICAgICAgIHR5cGUgPSBBTklNQVRJT047CiAgICAgICAgdGltZW91dCA9IGFuaW1hdGlvblRpbWVvdXQ7CiAgICAgICAgcHJvcENvdW50ID0gYW5pbWF0aW9uRHVyYXRpb25zLmxlbmd0aDsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdGltZW91dCA9IE1hdGgubWF4KHRyYW5zaXRpb25UaW1lb3V0LCBhbmltYXRpb25UaW1lb3V0KTsKICAgICAgdHlwZSA9IHRpbWVvdXQgPiAwCiAgICAgICAgPyB0cmFuc2l0aW9uVGltZW91dCA+IGFuaW1hdGlvblRpbWVvdXQKICAgICAgICAgID8gVFJBTlNJVElPTgogICAgICAgICAgOiBBTklNQVRJT04KICAgICAgICA6IG51bGw7CiAgICAgIHByb3BDb3VudCA9IHR5cGUKICAgICAgICA/IHR5cGUgPT09IFRSQU5TSVRJT04KICAgICAgICAgID8gdHJhbnNpdGlvbkR1cmF0aW9ucy5sZW5ndGgKICAgICAgICAgIDogYW5pbWF0aW9uRHVyYXRpb25zLmxlbmd0aAogICAgICAgIDogMDsKICAgIH0KICAgIHZhciBoYXNUcmFuc2Zvcm0gPQogICAgICB0eXBlID09PSBUUkFOU0lUSU9OICYmCiAgICAgIHRyYW5zZm9ybVJFLnRlc3Qoc3R5bGVzW3RyYW5zaXRpb25Qcm9wICsgJ1Byb3BlcnR5J10pOwogICAgcmV0dXJuIHsKICAgICAgdHlwZTogdHlwZSwKICAgICAgdGltZW91dDogdGltZW91dCwKICAgICAgcHJvcENvdW50OiBwcm9wQ291bnQsCiAgICAgIGhhc1RyYW5zZm9ybTogaGFzVHJhbnNmb3JtCiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZXRUaW1lb3V0IChkZWxheXMsIGR1cmF0aW9ucykgewogICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICAgIHdoaWxlIChkZWxheXMubGVuZ3RoIDwgZHVyYXRpb25zLmxlbmd0aCkgewogICAgICBkZWxheXMgPSBkZWxheXMuY29uY2F0KGRlbGF5cyk7CiAgICB9CgogICAgcmV0dXJuIE1hdGgubWF4LmFwcGx5KG51bGwsIGR1cmF0aW9ucy5tYXAoZnVuY3Rpb24gKGQsIGkpIHsKICAgICAgcmV0dXJuIHRvTXMoZCkgKyB0b01zKGRlbGF5c1tpXSkKICAgIH0pKQogIH0KCiAgLy8gT2xkIHZlcnNpb25zIG9mIENocm9taXVtIChiZWxvdyA2MS4wLjMxNjMuMTAwKSBmb3JtYXRzIGZsb2F0aW5nIHBvaW50ZXIgbnVtYmVycwogIC8vIGluIGEgbG9jYWxlLWRlcGVuZGVudCB3YXksIHVzaW5nIGEgY29tbWEgaW5zdGVhZCBvZiBhIGRvdC4KICAvLyBJZiBjb21tYSBpcyBub3QgcmVwbGFjZWQgd2l0aCBhIGRvdCwgdGhlIGlucHV0IHdpbGwgYmUgcm91bmRlZCBkb3duIChpLmUuIGFjdGluZwogIC8vIGFzIGEgZmxvb3IgZnVuY3Rpb24pIGNhdXNpbmcgdW5leHBlY3RlZCBiZWhhdmlvcnMKICBmdW5jdGlvbiB0b01zIChzKSB7CiAgICByZXR1cm4gTnVtYmVyKHMuc2xpY2UoMCwgLTEpLnJlcGxhY2UoJywnLCAnLicpKSAqIDEwMDAKICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBlbnRlciAodm5vZGUsIHRvZ2dsZURpc3BsYXkpIHsKICAgIHZhciBlbCA9IHZub2RlLmVsbTsKCiAgICAvLyBjYWxsIGxlYXZlIGNhbGxiYWNrIG5vdwogICAgaWYgKGlzRGVmKGVsLl9sZWF2ZUNiKSkgewogICAgICBlbC5fbGVhdmVDYi5jYW5jZWxsZWQgPSB0cnVlOwogICAgICBlbC5fbGVhdmVDYigpOwogICAgfQoKICAgIHZhciBkYXRhID0gcmVzb2x2ZVRyYW5zaXRpb24odm5vZGUuZGF0YS50cmFuc2l0aW9uKTsKICAgIGlmIChpc1VuZGVmKGRhdGEpKSB7CiAgICAgIHJldHVybgogICAgfQoKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKGlzRGVmKGVsLl9lbnRlckNiKSB8fCBlbC5ub2RlVHlwZSAhPT0gMSkgewogICAgICByZXR1cm4KICAgIH0KCiAgICB2YXIgY3NzID0gZGF0YS5jc3M7CiAgICB2YXIgdHlwZSA9IGRhdGEudHlwZTsKICAgIHZhciBlbnRlckNsYXNzID0gZGF0YS5lbnRlckNsYXNzOwogICAgdmFyIGVudGVyVG9DbGFzcyA9IGRhdGEuZW50ZXJUb0NsYXNzOwogICAgdmFyIGVudGVyQWN0aXZlQ2xhc3MgPSBkYXRhLmVudGVyQWN0aXZlQ2xhc3M7CiAgICB2YXIgYXBwZWFyQ2xhc3MgPSBkYXRhLmFwcGVhckNsYXNzOwogICAgdmFyIGFwcGVhclRvQ2xhc3MgPSBkYXRhLmFwcGVhclRvQ2xhc3M7CiAgICB2YXIgYXBwZWFyQWN0aXZlQ2xhc3MgPSBkYXRhLmFwcGVhckFjdGl2ZUNsYXNzOwogICAgdmFyIGJlZm9yZUVudGVyID0gZGF0YS5iZWZvcmVFbnRlcjsKICAgIHZhciBlbnRlciA9IGRhdGEuZW50ZXI7CiAgICB2YXIgYWZ0ZXJFbnRlciA9IGRhdGEuYWZ0ZXJFbnRlcjsKICAgIHZhciBlbnRlckNhbmNlbGxlZCA9IGRhdGEuZW50ZXJDYW5jZWxsZWQ7CiAgICB2YXIgYmVmb3JlQXBwZWFyID0gZGF0YS5iZWZvcmVBcHBlYXI7CiAgICB2YXIgYXBwZWFyID0gZGF0YS5hcHBlYXI7CiAgICB2YXIgYWZ0ZXJBcHBlYXIgPSBkYXRhLmFmdGVyQXBwZWFyOwogICAgdmFyIGFwcGVhckNhbmNlbGxlZCA9IGRhdGEuYXBwZWFyQ2FuY2VsbGVkOwogICAgdmFyIGR1cmF0aW9uID0gZGF0YS5kdXJhdGlvbjsKCiAgICAvLyBhY3RpdmVJbnN0YW5jZSB3aWxsIGFsd2F5cyBiZSB0aGUgPHRyYW5zaXRpb24+IGNvbXBvbmVudCBtYW5hZ2luZyB0aGlzCiAgICAvLyB0cmFuc2l0aW9uLiBPbmUgZWRnZSBjYXNlIHRvIGNoZWNrIGlzIHdoZW4gdGhlIDx0cmFuc2l0aW9uPiBpcyBwbGFjZWQKICAgIC8vIGFzIHRoZSByb290IG5vZGUgb2YgYSBjaGlsZCBjb21wb25lbnQuIEluIHRoYXQgY2FzZSB3ZSBuZWVkIHRvIGNoZWNrCiAgICAvLyA8dHJhbnNpdGlvbj4ncyBwYXJlbnQgZm9yIGFwcGVhciBjaGVjay4KICAgIHZhciBjb250ZXh0ID0gYWN0aXZlSW5zdGFuY2U7CiAgICB2YXIgdHJhbnNpdGlvbk5vZGUgPSBhY3RpdmVJbnN0YW5jZS4kdm5vZGU7CiAgICB3aGlsZSAodHJhbnNpdGlvbk5vZGUgJiYgdHJhbnNpdGlvbk5vZGUucGFyZW50KSB7CiAgICAgIGNvbnRleHQgPSB0cmFuc2l0aW9uTm9kZS5jb250ZXh0OwogICAgICB0cmFuc2l0aW9uTm9kZSA9IHRyYW5zaXRpb25Ob2RlLnBhcmVudDsKICAgIH0KCiAgICB2YXIgaXNBcHBlYXIgPSAhY29udGV4dC5faXNNb3VudGVkIHx8ICF2bm9kZS5pc1Jvb3RJbnNlcnQ7CgogICAgaWYgKGlzQXBwZWFyICYmICFhcHBlYXIgJiYgYXBwZWFyICE9PSAnJykgewogICAgICByZXR1cm4KICAgIH0KCiAgICB2YXIgc3RhcnRDbGFzcyA9IGlzQXBwZWFyICYmIGFwcGVhckNsYXNzCiAgICAgID8gYXBwZWFyQ2xhc3MKICAgICAgOiBlbnRlckNsYXNzOwogICAgdmFyIGFjdGl2ZUNsYXNzID0gaXNBcHBlYXIgJiYgYXBwZWFyQWN0aXZlQ2xhc3MKICAgICAgPyBhcHBlYXJBY3RpdmVDbGFzcwogICAgICA6IGVudGVyQWN0aXZlQ2xhc3M7CiAgICB2YXIgdG9DbGFzcyA9IGlzQXBwZWFyICYmIGFwcGVhclRvQ2xhc3MKICAgICAgPyBhcHBlYXJUb0NsYXNzCiAgICAgIDogZW50ZXJUb0NsYXNzOwoKICAgIHZhciBiZWZvcmVFbnRlckhvb2sgPSBpc0FwcGVhcgogICAgICA/IChiZWZvcmVBcHBlYXIgfHwgYmVmb3JlRW50ZXIpCiAgICAgIDogYmVmb3JlRW50ZXI7CiAgICB2YXIgZW50ZXJIb29rID0gaXNBcHBlYXIKICAgICAgPyAodHlwZW9mIGFwcGVhciA9PT0gJ2Z1bmN0aW9uJyA/IGFwcGVhciA6IGVudGVyKQogICAgICA6IGVudGVyOwogICAgdmFyIGFmdGVyRW50ZXJIb29rID0gaXNBcHBlYXIKICAgICAgPyAoYWZ0ZXJBcHBlYXIgfHwgYWZ0ZXJFbnRlcikKICAgICAgOiBhZnRlckVudGVyOwogICAgdmFyIGVudGVyQ2FuY2VsbGVkSG9vayA9IGlzQXBwZWFyCiAgICAgID8gKGFwcGVhckNhbmNlbGxlZCB8fCBlbnRlckNhbmNlbGxlZCkKICAgICAgOiBlbnRlckNhbmNlbGxlZDsKCiAgICB2YXIgZXhwbGljaXRFbnRlckR1cmF0aW9uID0gdG9OdW1iZXIoCiAgICAgIGlzT2JqZWN0KGR1cmF0aW9uKQogICAgICAgID8gZHVyYXRpb24uZW50ZXIKICAgICAgICA6IGR1cmF0aW9uCiAgICApOwoKICAgIGlmIChleHBsaWNpdEVudGVyRHVyYXRpb24gIT0gbnVsbCkgewogICAgICBjaGVja0R1cmF0aW9uKGV4cGxpY2l0RW50ZXJEdXJhdGlvbiwgJ2VudGVyJywgdm5vZGUpOwogICAgfQoKICAgIHZhciBleHBlY3RzQ1NTID0gY3NzICE9PSBmYWxzZSAmJiAhaXNJRTk7CiAgICB2YXIgdXNlcldhbnRzQ29udHJvbCA9IGdldEhvb2tBcmd1bWVudHNMZW5ndGgoZW50ZXJIb29rKTsKCiAgICB2YXIgY2IgPSBlbC5fZW50ZXJDYiA9IG9uY2UoZnVuY3Rpb24gKCkgewogICAgICBpZiAoZXhwZWN0c0NTUykgewogICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgdG9DbGFzcyk7CiAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBhY3RpdmVDbGFzcyk7CiAgICAgIH0KICAgICAgaWYgKGNiLmNhbmNlbGxlZCkgewogICAgICAgIGlmIChleHBlY3RzQ1NTKSB7CiAgICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIHN0YXJ0Q2xhc3MpOwogICAgICAgIH0KICAgICAgICBlbnRlckNhbmNlbGxlZEhvb2sgJiYgZW50ZXJDYW5jZWxsZWRIb29rKGVsKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhZnRlckVudGVySG9vayAmJiBhZnRlckVudGVySG9vayhlbCk7CiAgICAgIH0KICAgICAgZWwuX2VudGVyQ2IgPSBudWxsOwogICAgfSk7CgogICAgaWYgKCF2bm9kZS5kYXRhLnNob3cpIHsKICAgICAgLy8gcmVtb3ZlIHBlbmRpbmcgbGVhdmUgZWxlbWVudCBvbiBlbnRlciBieSBpbmplY3RpbmcgYW4gaW5zZXJ0IGhvb2sKICAgICAgbWVyZ2VWTm9kZUhvb2sodm5vZGUsICdpbnNlcnQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHBhcmVudCA9IGVsLnBhcmVudE5vZGU7CiAgICAgICAgdmFyIHBlbmRpbmdOb2RlID0gcGFyZW50ICYmIHBhcmVudC5fcGVuZGluZyAmJiBwYXJlbnQuX3BlbmRpbmdbdm5vZGUua2V5XTsKICAgICAgICBpZiAocGVuZGluZ05vZGUgJiYKICAgICAgICAgIHBlbmRpbmdOb2RlLnRhZyA9PT0gdm5vZGUudGFnICYmCiAgICAgICAgICBwZW5kaW5nTm9kZS5lbG0uX2xlYXZlQ2IKICAgICAgICApIHsKICAgICAgICAgIHBlbmRpbmdOb2RlLmVsbS5fbGVhdmVDYigpOwogICAgICAgIH0KICAgICAgICBlbnRlckhvb2sgJiYgZW50ZXJIb29rKGVsLCBjYik7CiAgICAgIH0pOwogICAgfQoKICAgIC8vIHN0YXJ0IGVudGVyIHRyYW5zaXRpb24KICAgIGJlZm9yZUVudGVySG9vayAmJiBiZWZvcmVFbnRlckhvb2soZWwpOwogICAgaWYgKGV4cGVjdHNDU1MpIHsKICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBzdGFydENsYXNzKTsKICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBhY3RpdmVDbGFzcyk7CiAgICAgIG5leHRGcmFtZShmdW5jdGlvbiAoKSB7CiAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBzdGFydENsYXNzKTsKICAgICAgICBpZiAoIWNiLmNhbmNlbGxlZCkgewogICAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCB0b0NsYXNzKTsKICAgICAgICAgIGlmICghdXNlcldhbnRzQ29udHJvbCkgewogICAgICAgICAgICBpZiAoaXNWYWxpZER1cmF0aW9uKGV4cGxpY2l0RW50ZXJEdXJhdGlvbikpIHsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGNiLCBleHBsaWNpdEVudGVyRHVyYXRpb24pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHdoZW5UcmFuc2l0aW9uRW5kcyhlbCwgdHlwZSwgY2IpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICBpZiAodm5vZGUuZGF0YS5zaG93KSB7CiAgICAgIHRvZ2dsZURpc3BsYXkgJiYgdG9nZ2xlRGlzcGxheSgpOwogICAgICBlbnRlckhvb2sgJiYgZW50ZXJIb29rKGVsLCBjYik7CiAgICB9CgogICAgaWYgKCFleHBlY3RzQ1NTICYmICF1c2VyV2FudHNDb250cm9sKSB7CiAgICAgIGNiKCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBsZWF2ZSAodm5vZGUsIHJtKSB7CiAgICB2YXIgZWwgPSB2bm9kZS5lbG07CgogICAgLy8gY2FsbCBlbnRlciBjYWxsYmFjayBub3cKICAgIGlmIChpc0RlZihlbC5fZW50ZXJDYikpIHsKICAgICAgZWwuX2VudGVyQ2IuY2FuY2VsbGVkID0gdHJ1ZTsKICAgICAgZWwuX2VudGVyQ2IoKTsKICAgIH0KCiAgICB2YXIgZGF0YSA9IHJlc29sdmVUcmFuc2l0aW9uKHZub2RlLmRhdGEudHJhbnNpdGlvbik7CiAgICBpZiAoaXNVbmRlZihkYXRhKSB8fCBlbC5ub2RlVHlwZSAhPT0gMSkgewogICAgICByZXR1cm4gcm0oKQogICAgfQoKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKGlzRGVmKGVsLl9sZWF2ZUNiKSkgewogICAgICByZXR1cm4KICAgIH0KCiAgICB2YXIgY3NzID0gZGF0YS5jc3M7CiAgICB2YXIgdHlwZSA9IGRhdGEudHlwZTsKICAgIHZhciBsZWF2ZUNsYXNzID0gZGF0YS5sZWF2ZUNsYXNzOwogICAgdmFyIGxlYXZlVG9DbGFzcyA9IGRhdGEubGVhdmVUb0NsYXNzOwogICAgdmFyIGxlYXZlQWN0aXZlQ2xhc3MgPSBkYXRhLmxlYXZlQWN0aXZlQ2xhc3M7CiAgICB2YXIgYmVmb3JlTGVhdmUgPSBkYXRhLmJlZm9yZUxlYXZlOwogICAgdmFyIGxlYXZlID0gZGF0YS5sZWF2ZTsKICAgIHZhciBhZnRlckxlYXZlID0gZGF0YS5hZnRlckxlYXZlOwogICAgdmFyIGxlYXZlQ2FuY2VsbGVkID0gZGF0YS5sZWF2ZUNhbmNlbGxlZDsKICAgIHZhciBkZWxheUxlYXZlID0gZGF0YS5kZWxheUxlYXZlOwogICAgdmFyIGR1cmF0aW9uID0gZGF0YS5kdXJhdGlvbjsKCiAgICB2YXIgZXhwZWN0c0NTUyA9IGNzcyAhPT0gZmFsc2UgJiYgIWlzSUU5OwogICAgdmFyIHVzZXJXYW50c0NvbnRyb2wgPSBnZXRIb29rQXJndW1lbnRzTGVuZ3RoKGxlYXZlKTsKCiAgICB2YXIgZXhwbGljaXRMZWF2ZUR1cmF0aW9uID0gdG9OdW1iZXIoCiAgICAgIGlzT2JqZWN0KGR1cmF0aW9uKQogICAgICAgID8gZHVyYXRpb24ubGVhdmUKICAgICAgICA6IGR1cmF0aW9uCiAgICApOwoKICAgIGlmIChpc0RlZihleHBsaWNpdExlYXZlRHVyYXRpb24pKSB7CiAgICAgIGNoZWNrRHVyYXRpb24oZXhwbGljaXRMZWF2ZUR1cmF0aW9uLCAnbGVhdmUnLCB2bm9kZSk7CiAgICB9CgogICAgdmFyIGNiID0gZWwuX2xlYXZlQ2IgPSBvbmNlKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKGVsLnBhcmVudE5vZGUgJiYgZWwucGFyZW50Tm9kZS5fcGVuZGluZykgewogICAgICAgIGVsLnBhcmVudE5vZGUuX3BlbmRpbmdbdm5vZGUua2V5XSA9IG51bGw7CiAgICAgIH0KICAgICAgaWYgKGV4cGVjdHNDU1MpIHsKICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlVG9DbGFzcyk7CiAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUFjdGl2ZUNsYXNzKTsKICAgICAgfQogICAgICBpZiAoY2IuY2FuY2VsbGVkKSB7CiAgICAgICAgaWYgKGV4cGVjdHNDU1MpIHsKICAgICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVDbGFzcyk7CiAgICAgICAgfQogICAgICAgIGxlYXZlQ2FuY2VsbGVkICYmIGxlYXZlQ2FuY2VsbGVkKGVsKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBybSgpOwogICAgICAgIGFmdGVyTGVhdmUgJiYgYWZ0ZXJMZWF2ZShlbCk7CiAgICAgIH0KICAgICAgZWwuX2xlYXZlQ2IgPSBudWxsOwogICAgfSk7CgogICAgaWYgKGRlbGF5TGVhdmUpIHsKICAgICAgZGVsYXlMZWF2ZShwZXJmb3JtTGVhdmUpOwogICAgfSBlbHNlIHsKICAgICAgcGVyZm9ybUxlYXZlKCk7CiAgICB9CgogICAgZnVuY3Rpb24gcGVyZm9ybUxlYXZlICgpIHsKICAgICAgLy8gdGhlIGRlbGF5ZWQgbGVhdmUgbWF5IGhhdmUgYWxyZWFkeSBiZWVuIGNhbmNlbGxlZAogICAgICBpZiAoY2IuY2FuY2VsbGVkKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgLy8gcmVjb3JkIGxlYXZpbmcgZWxlbWVudAogICAgICBpZiAoIXZub2RlLmRhdGEuc2hvdyAmJiBlbC5wYXJlbnROb2RlKSB7CiAgICAgICAgKGVsLnBhcmVudE5vZGUuX3BlbmRpbmcgfHwgKGVsLnBhcmVudE5vZGUuX3BlbmRpbmcgPSB7fSkpWyh2bm9kZS5rZXkpXSA9IHZub2RlOwogICAgICB9CiAgICAgIGJlZm9yZUxlYXZlICYmIGJlZm9yZUxlYXZlKGVsKTsKICAgICAgaWYgKGV4cGVjdHNDU1MpIHsKICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQ2xhc3MpOwogICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVBY3RpdmVDbGFzcyk7CiAgICAgICAgbmV4dEZyYW1lKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVDbGFzcyk7CiAgICAgICAgICBpZiAoIWNiLmNhbmNlbGxlZCkgewogICAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlVG9DbGFzcyk7CiAgICAgICAgICAgIGlmICghdXNlcldhbnRzQ29udHJvbCkgewogICAgICAgICAgICAgIGlmIChpc1ZhbGlkRHVyYXRpb24oZXhwbGljaXRMZWF2ZUR1cmF0aW9uKSkgewogICAgICAgICAgICAgICAgc2V0VGltZW91dChjYiwgZXhwbGljaXRMZWF2ZUR1cmF0aW9uKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgd2hlblRyYW5zaXRpb25FbmRzKGVsLCB0eXBlLCBjYik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgbGVhdmUgJiYgbGVhdmUoZWwsIGNiKTsKICAgICAgaWYgKCFleHBlY3RzQ1NTICYmICF1c2VyV2FudHNDb250cm9sKSB7CiAgICAgICAgY2IoKTsKICAgICAgfQogICAgfQogIH0KCiAgLy8gb25seSB1c2VkIGluIGRldiBtb2RlCiAgZnVuY3Rpb24gY2hlY2tEdXJhdGlvbiAodmFsLCBuYW1lLCB2bm9kZSkgewogICAgaWYgKHR5cGVvZiB2YWwgIT09ICdudW1iZXInKSB7CiAgICAgIHdhcm4oCiAgICAgICAgIjx0cmFuc2l0aW9uPiBleHBsaWNpdCAiICsgbmFtZSArICIgZHVyYXRpb24gaXMgbm90IGEgdmFsaWQgbnVtYmVyIC0gIiArCiAgICAgICAgImdvdCAiICsgKEpTT04uc3RyaW5naWZ5KHZhbCkpICsgIi4iLAogICAgICAgIHZub2RlLmNvbnRleHQKICAgICAgKTsKICAgIH0gZWxzZSBpZiAoaXNOYU4odmFsKSkgewogICAgICB3YXJuKAogICAgICAgICI8dHJhbnNpdGlvbj4gZXhwbGljaXQgIiArIG5hbWUgKyAiIGR1cmF0aW9uIGlzIE5hTiAtICIgKwogICAgICAgICd0aGUgZHVyYXRpb24gZXhwcmVzc2lvbiBtaWdodCBiZSBpbmNvcnJlY3QuJywKICAgICAgICB2bm9kZS5jb250ZXh0CiAgICAgICk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBpc1ZhbGlkRHVyYXRpb24gKHZhbCkgewogICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdudW1iZXInICYmICFpc05hTih2YWwpCiAgfQoKICAvKioKICAgKiBOb3JtYWxpemUgYSB0cmFuc2l0aW9uIGhvb2sncyBhcmd1bWVudCBsZW5ndGguIFRoZSBob29rIG1heSBiZToKICAgKiAtIGEgbWVyZ2VkIGhvb2sgKGludm9rZXIpIHdpdGggdGhlIG9yaWdpbmFsIGluIC5mbnMKICAgKiAtIGEgd3JhcHBlZCBjb21wb25lbnQgbWV0aG9kIChjaGVjayAuX2xlbmd0aCkKICAgKiAtIGEgcGxhaW4gZnVuY3Rpb24gKC5sZW5ndGgpCiAgICovCiAgZnVuY3Rpb24gZ2V0SG9va0FyZ3VtZW50c0xlbmd0aCAoZm4pIHsKICAgIGlmIChpc1VuZGVmKGZuKSkgewogICAgICByZXR1cm4gZmFsc2UKICAgIH0KICAgIHZhciBpbnZva2VyRm5zID0gZm4uZm5zOwogICAgaWYgKGlzRGVmKGludm9rZXJGbnMpKSB7CiAgICAgIC8vIGludm9rZXIKICAgICAgcmV0dXJuIGdldEhvb2tBcmd1bWVudHNMZW5ndGgoCiAgICAgICAgQXJyYXkuaXNBcnJheShpbnZva2VyRm5zKQogICAgICAgICAgPyBpbnZva2VyRm5zWzBdCiAgICAgICAgICA6IGludm9rZXJGbnMKICAgICAgKQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIChmbi5fbGVuZ3RoIHx8IGZuLmxlbmd0aCkgPiAxCiAgICB9CiAgfQoKICBmdW5jdGlvbiBfZW50ZXIgKF8sIHZub2RlKSB7CiAgICBpZiAodm5vZGUuZGF0YS5zaG93ICE9PSB0cnVlKSB7CiAgICAgIGVudGVyKHZub2RlKTsKICAgIH0KICB9CgogIHZhciB0cmFuc2l0aW9uID0gaW5Ccm93c2VyID8gewogICAgY3JlYXRlOiBfZW50ZXIsCiAgICBhY3RpdmF0ZTogX2VudGVyLAogICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUkJDEgKHZub2RlLCBybSkgewogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqLwogICAgICBpZiAodm5vZGUuZGF0YS5zaG93ICE9PSB0cnVlKSB7CiAgICAgICAgbGVhdmUodm5vZGUsIHJtKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBybSgpOwogICAgICB9CiAgICB9CiAgfSA6IHt9OwoKICB2YXIgcGxhdGZvcm1Nb2R1bGVzID0gWwogICAgYXR0cnMsCiAgICBrbGFzcywKICAgIGV2ZW50cywKICAgIGRvbVByb3BzLAogICAgc3R5bGUsCiAgICB0cmFuc2l0aW9uCiAgXTsKCiAgLyogICovCgogIC8vIHRoZSBkaXJlY3RpdmUgbW9kdWxlIHNob3VsZCBiZSBhcHBsaWVkIGxhc3QsIGFmdGVyIGFsbAogIC8vIGJ1aWx0LWluIG1vZHVsZXMgaGF2ZSBiZWVuIGFwcGxpZWQuCiAgdmFyIG1vZHVsZXMgPSBwbGF0Zm9ybU1vZHVsZXMuY29uY2F0KGJhc2VNb2R1bGVzKTsKCiAgdmFyIHBhdGNoID0gY3JlYXRlUGF0Y2hGdW5jdGlvbih7IG5vZGVPcHM6IG5vZGVPcHMsIG1vZHVsZXM6IG1vZHVsZXMgfSk7CgogIC8qKgogICAqIE5vdCB0eXBlIGNoZWNraW5nIHRoaXMgZmlsZSBiZWNhdXNlIGZsb3cgZG9lc24ndCBsaWtlIGF0dGFjaGluZwogICAqIHByb3BlcnRpZXMgdG8gRWxlbWVudHMuCiAgICovCgogIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogIGlmIChpc0lFOSkgewogICAgLy8gaHR0cDovL3d3dy5tYXR0czQxMS5jb20vcG9zdC9pbnRlcm5ldC1leHBsb3Jlci05LW9uaW5wdXQvCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3Rpb25jaGFuZ2UnLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlbCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7CiAgICAgIGlmIChlbCAmJiBlbC52bW9kZWwpIHsKICAgICAgICB0cmlnZ2VyKGVsLCAnaW5wdXQnKTsKICAgICAgfQogICAgfSk7CiAgfQoKICB2YXIgZGlyZWN0aXZlID0gewogICAgaW5zZXJ0ZWQ6IGZ1bmN0aW9uIGluc2VydGVkIChlbCwgYmluZGluZywgdm5vZGUsIG9sZFZub2RlKSB7CiAgICAgIGlmICh2bm9kZS50YWcgPT09ICdzZWxlY3QnKSB7CiAgICAgICAgLy8gIzY5MDMKICAgICAgICBpZiAob2xkVm5vZGUuZWxtICYmICFvbGRWbm9kZS5lbG0uX3ZPcHRpb25zKSB7CiAgICAgICAgICBtZXJnZVZOb2RlSG9vayh2bm9kZSwgJ3Bvc3RwYXRjaCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZGlyZWN0aXZlLmNvbXBvbmVudFVwZGF0ZWQoZWwsIGJpbmRpbmcsIHZub2RlKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZXRTZWxlY3RlZChlbCwgYmluZGluZywgdm5vZGUuY29udGV4dCk7CiAgICAgICAgfQogICAgICAgIGVsLl92T3B0aW9ucyA9IFtdLm1hcC5jYWxsKGVsLm9wdGlvbnMsIGdldFZhbHVlKTsKICAgICAgfSBlbHNlIGlmICh2bm9kZS50YWcgPT09ICd0ZXh0YXJlYScgfHwgaXNUZXh0SW5wdXRUeXBlKGVsLnR5cGUpKSB7CiAgICAgICAgZWwuX3ZNb2RpZmllcnMgPSBiaW5kaW5nLm1vZGlmaWVyczsKICAgICAgICBpZiAoIWJpbmRpbmcubW9kaWZpZXJzLmxhenkpIHsKICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBvc2l0aW9uc3RhcnQnLCBvbkNvbXBvc2l0aW9uU3RhcnQpOwogICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY29tcG9zaXRpb25lbmQnLCBvbkNvbXBvc2l0aW9uRW5kKTsKICAgICAgICAgIC8vIFNhZmFyaSA8IDEwLjIgJiBVSVdlYlZpZXcgZG9lc24ndCBmaXJlIGNvbXBvc2l0aW9uZW5kIHdoZW4KICAgICAgICAgIC8vIHN3aXRjaGluZyBmb2N1cyBiZWZvcmUgY29uZmlybWluZyBjb21wb3NpdGlvbiBjaG9pY2UKICAgICAgICAgIC8vIHRoaXMgYWxzbyBmaXhlcyB0aGUgaXNzdWUgd2hlcmUgc29tZSBicm93c2VycyBlLmcuIGlPUyBDaHJvbWUKICAgICAgICAgIC8vIGZpcmVzICJjaGFuZ2UiIGluc3RlYWQgb2YgImlucHV0IiBvbiBhdXRvY29tcGxldGUuCiAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkNvbXBvc2l0aW9uRW5kKTsKICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICAgICAgaWYgKGlzSUU5KSB7CiAgICAgICAgICAgIGVsLnZtb2RlbCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIGNvbXBvbmVudFVwZGF0ZWQ6IGZ1bmN0aW9uIGNvbXBvbmVudFVwZGF0ZWQgKGVsLCBiaW5kaW5nLCB2bm9kZSkgewogICAgICBpZiAodm5vZGUudGFnID09PSAnc2VsZWN0JykgewogICAgICAgIHNldFNlbGVjdGVkKGVsLCBiaW5kaW5nLCB2bm9kZS5jb250ZXh0KTsKICAgICAgICAvLyBpbiBjYXNlIHRoZSBvcHRpb25zIHJlbmRlcmVkIGJ5IHYtZm9yIGhhdmUgY2hhbmdlZCwKICAgICAgICAvLyBpdCdzIHBvc3NpYmxlIHRoYXQgdGhlIHZhbHVlIGlzIG91dC1vZi1zeW5jIHdpdGggdGhlIHJlbmRlcmVkIG9wdGlvbnMuCiAgICAgICAgLy8gZGV0ZWN0IHN1Y2ggY2FzZXMgYW5kIGZpbHRlciBvdXQgdmFsdWVzIHRoYXQgbm8gbG9uZ2VyIGhhcyBhIG1hdGNoaW5nCiAgICAgICAgLy8gb3B0aW9uIGluIHRoZSBET00uCiAgICAgICAgdmFyIHByZXZPcHRpb25zID0gZWwuX3ZPcHRpb25zOwogICAgICAgIHZhciBjdXJPcHRpb25zID0gZWwuX3ZPcHRpb25zID0gW10ubWFwLmNhbGwoZWwub3B0aW9ucywgZ2V0VmFsdWUpOwogICAgICAgIGlmIChjdXJPcHRpb25zLnNvbWUoZnVuY3Rpb24gKG8sIGkpIHsgcmV0dXJuICFsb29zZUVxdWFsKG8sIHByZXZPcHRpb25zW2ldKTsgfSkpIHsKICAgICAgICAgIC8vIHRyaWdnZXIgY2hhbmdlIGV2ZW50IGlmCiAgICAgICAgICAvLyBubyBtYXRjaGluZyBvcHRpb24gZm91bmQgZm9yIGF0IGxlYXN0IG9uZSB2YWx1ZQogICAgICAgICAgdmFyIG5lZWRSZXNldCA9IGVsLm11bHRpcGxlCiAgICAgICAgICAgID8gYmluZGluZy52YWx1ZS5zb21lKGZ1bmN0aW9uICh2KSB7IHJldHVybiBoYXNOb01hdGNoaW5nT3B0aW9uKHYsIGN1ck9wdGlvbnMpOyB9KQogICAgICAgICAgICA6IGJpbmRpbmcudmFsdWUgIT09IGJpbmRpbmcub2xkVmFsdWUgJiYgaGFzTm9NYXRjaGluZ09wdGlvbihiaW5kaW5nLnZhbHVlLCBjdXJPcHRpb25zKTsKICAgICAgICAgIGlmIChuZWVkUmVzZXQpIHsKICAgICAgICAgICAgdHJpZ2dlcihlbCwgJ2NoYW5nZScpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIGZ1bmN0aW9uIHNldFNlbGVjdGVkIChlbCwgYmluZGluZywgdm0pIHsKICAgIGFjdHVhbGx5U2V0U2VsZWN0ZWQoZWwsIGJpbmRpbmcsIHZtKTsKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKGlzSUUgfHwgaXNFZGdlKSB7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIGFjdHVhbGx5U2V0U2VsZWN0ZWQoZWwsIGJpbmRpbmcsIHZtKTsKICAgICAgfSwgMCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBhY3R1YWxseVNldFNlbGVjdGVkIChlbCwgYmluZGluZywgdm0pIHsKICAgIHZhciB2YWx1ZSA9IGJpbmRpbmcudmFsdWU7CiAgICB2YXIgaXNNdWx0aXBsZSA9IGVsLm11bHRpcGxlOwogICAgaWYgKGlzTXVsdGlwbGUgJiYgIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7CiAgICAgIHdhcm4oCiAgICAgICAgIjxzZWxlY3QgbXVsdGlwbGUgdi1tb2RlbD1cIiIgKyAoYmluZGluZy5leHByZXNzaW9uKSArICJcIj4gIiArCiAgICAgICAgImV4cGVjdHMgYW4gQXJyYXkgdmFsdWUgZm9yIGl0cyBiaW5kaW5nLCBidXQgZ290ICIgKyAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKS5zbGljZSg4LCAtMSkpLAogICAgICAgIHZtCiAgICAgICk7CiAgICAgIHJldHVybgogICAgfQogICAgdmFyIHNlbGVjdGVkLCBvcHRpb247CiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGVsLm9wdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIG9wdGlvbiA9IGVsLm9wdGlvbnNbaV07CiAgICAgIGlmIChpc011bHRpcGxlKSB7CiAgICAgICAgc2VsZWN0ZWQgPSBsb29zZUluZGV4T2YodmFsdWUsIGdldFZhbHVlKG9wdGlvbikpID4gLTE7CiAgICAgICAgaWYgKG9wdGlvbi5zZWxlY3RlZCAhPT0gc2VsZWN0ZWQpIHsKICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHNlbGVjdGVkOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAobG9vc2VFcXVhbChnZXRWYWx1ZShvcHRpb24pLCB2YWx1ZSkpIHsKICAgICAgICAgIGlmIChlbC5zZWxlY3RlZEluZGV4ICE9PSBpKSB7CiAgICAgICAgICAgIGVsLnNlbGVjdGVkSW5kZXggPSBpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZiAoIWlzTXVsdGlwbGUpIHsKICAgICAgZWwuc2VsZWN0ZWRJbmRleCA9IC0xOwogICAgfQogIH0KCiAgZnVuY3Rpb24gaGFzTm9NYXRjaGluZ09wdGlvbiAodmFsdWUsIG9wdGlvbnMpIHsKICAgIHJldHVybiBvcHRpb25zLmV2ZXJ5KGZ1bmN0aW9uIChvKSB7IHJldHVybiAhbG9vc2VFcXVhbChvLCB2YWx1ZSk7IH0pCiAgfQoKICBmdW5jdGlvbiBnZXRWYWx1ZSAob3B0aW9uKSB7CiAgICByZXR1cm4gJ192YWx1ZScgaW4gb3B0aW9uCiAgICAgID8gb3B0aW9uLl92YWx1ZQogICAgICA6IG9wdGlvbi52YWx1ZQogIH0KCiAgZnVuY3Rpb24gb25Db21wb3NpdGlvblN0YXJ0IChlKSB7CiAgICBlLnRhcmdldC5jb21wb3NpbmcgPSB0cnVlOwogIH0KCiAgZnVuY3Rpb24gb25Db21wb3NpdGlvbkVuZCAoZSkgewogICAgLy8gcHJldmVudCB0cmlnZ2VyaW5nIGFuIGlucHV0IGV2ZW50IGZvciBubyByZWFzb24KICAgIGlmICghZS50YXJnZXQuY29tcG9zaW5nKSB7IHJldHVybiB9CiAgICBlLnRhcmdldC5jb21wb3NpbmcgPSBmYWxzZTsKICAgIHRyaWdnZXIoZS50YXJnZXQsICdpbnB1dCcpOwogIH0KCiAgZnVuY3Rpb24gdHJpZ2dlciAoZWwsIHR5cGUpIHsKICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0hUTUxFdmVudHMnKTsKICAgIGUuaW5pdEV2ZW50KHR5cGUsIHRydWUsIHRydWUpOwogICAgZWwuZGlzcGF0Y2hFdmVudChlKTsKICB9CgogIC8qICAqLwoKICAvLyByZWN1cnNpdmVseSBzZWFyY2ggZm9yIHBvc3NpYmxlIHRyYW5zaXRpb24gZGVmaW5lZCBpbnNpZGUgdGhlIGNvbXBvbmVudCByb290CiAgZnVuY3Rpb24gbG9jYXRlTm9kZSAodm5vZGUpIHsKICAgIHJldHVybiB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSAmJiAoIXZub2RlLmRhdGEgfHwgIXZub2RlLmRhdGEudHJhbnNpdGlvbikKICAgICAgPyBsb2NhdGVOb2RlKHZub2RlLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZSkKICAgICAgOiB2bm9kZQogIH0KCiAgdmFyIHNob3cgPSB7CiAgICBiaW5kOiBmdW5jdGlvbiBiaW5kIChlbCwgcmVmLCB2bm9kZSkgewogICAgICB2YXIgdmFsdWUgPSByZWYudmFsdWU7CgogICAgICB2bm9kZSA9IGxvY2F0ZU5vZGUodm5vZGUpOwogICAgICB2YXIgdHJhbnNpdGlvbiQkMSA9IHZub2RlLmRhdGEgJiYgdm5vZGUuZGF0YS50cmFuc2l0aW9uOwogICAgICB2YXIgb3JpZ2luYWxEaXNwbGF5ID0gZWwuX192T3JpZ2luYWxEaXNwbGF5ID0KICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgPyAnJyA6IGVsLnN0eWxlLmRpc3BsYXk7CiAgICAgIGlmICh2YWx1ZSAmJiB0cmFuc2l0aW9uJCQxKSB7CiAgICAgICAgdm5vZGUuZGF0YS5zaG93ID0gdHJ1ZTsKICAgICAgICBlbnRlcih2bm9kZSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IG9yaWdpbmFsRGlzcGxheTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gdmFsdWUgPyBvcmlnaW5hbERpc3BsYXkgOiAnbm9uZSc7CiAgICAgIH0KICAgIH0sCgogICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUgKGVsLCByZWYsIHZub2RlKSB7CiAgICAgIHZhciB2YWx1ZSA9IHJlZi52YWx1ZTsKICAgICAgdmFyIG9sZFZhbHVlID0gcmVmLm9sZFZhbHVlOwoKICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgIGlmICghdmFsdWUgPT09ICFvbGRWYWx1ZSkgeyByZXR1cm4gfQogICAgICB2bm9kZSA9IGxvY2F0ZU5vZGUodm5vZGUpOwogICAgICB2YXIgdHJhbnNpdGlvbiQkMSA9IHZub2RlLmRhdGEgJiYgdm5vZGUuZGF0YS50cmFuc2l0aW9uOwogICAgICBpZiAodHJhbnNpdGlvbiQkMSkgewogICAgICAgIHZub2RlLmRhdGEuc2hvdyA9IHRydWU7CiAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICBlbnRlcih2bm9kZSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gZWwuX192T3JpZ2luYWxEaXNwbGF5OwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGxlYXZlKHZub2RlLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gZWwuX192T3JpZ2luYWxEaXNwbGF5IDogJ25vbmUnOwogICAgICB9CiAgICB9LAoKICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kICgKICAgICAgZWwsCiAgICAgIGJpbmRpbmcsCiAgICAgIHZub2RlLAogICAgICBvbGRWbm9kZSwKICAgICAgaXNEZXN0cm95CiAgICApIHsKICAgICAgaWYgKCFpc0Rlc3Ryb3kpIHsKICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gZWwuX192T3JpZ2luYWxEaXNwbGF5OwogICAgICB9CiAgICB9CiAgfTsKCiAgdmFyIHBsYXRmb3JtRGlyZWN0aXZlcyA9IHsKICAgIG1vZGVsOiBkaXJlY3RpdmUsCiAgICBzaG93OiBzaG93CiAgfTsKCiAgLyogICovCgogIHZhciB0cmFuc2l0aW9uUHJvcHMgPSB7CiAgICBuYW1lOiBTdHJpbmcsCiAgICBhcHBlYXI6IEJvb2xlYW4sCiAgICBjc3M6IEJvb2xlYW4sCiAgICBtb2RlOiBTdHJpbmcsCiAgICB0eXBlOiBTdHJpbmcsCiAgICBlbnRlckNsYXNzOiBTdHJpbmcsCiAgICBsZWF2ZUNsYXNzOiBTdHJpbmcsCiAgICBlbnRlclRvQ2xhc3M6IFN0cmluZywKICAgIGxlYXZlVG9DbGFzczogU3RyaW5nLAogICAgZW50ZXJBY3RpdmVDbGFzczogU3RyaW5nLAogICAgbGVhdmVBY3RpdmVDbGFzczogU3RyaW5nLAogICAgYXBwZWFyQ2xhc3M6IFN0cmluZywKICAgIGFwcGVhckFjdGl2ZUNsYXNzOiBTdHJpbmcsCiAgICBhcHBlYXJUb0NsYXNzOiBTdHJpbmcsCiAgICBkdXJhdGlvbjogW051bWJlciwgU3RyaW5nLCBPYmplY3RdCiAgfTsKCiAgLy8gaW4gY2FzZSB0aGUgY2hpbGQgaXMgYWxzbyBhbiBhYnN0cmFjdCBjb21wb25lbnQsIGUuZy4gPGtlZXAtYWxpdmU+CiAgLy8gd2Ugd2FudCB0byByZWN1cnNpdmVseSByZXRyaWV2ZSB0aGUgcmVhbCBjb21wb25lbnQgdG8gYmUgcmVuZGVyZWQKICBmdW5jdGlvbiBnZXRSZWFsQ2hpbGQgKHZub2RlKSB7CiAgICB2YXIgY29tcE9wdGlvbnMgPSB2bm9kZSAmJiB2bm9kZS5jb21wb25lbnRPcHRpb25zOwogICAgaWYgKGNvbXBPcHRpb25zICYmIGNvbXBPcHRpb25zLkN0b3Iub3B0aW9ucy5hYnN0cmFjdCkgewogICAgICByZXR1cm4gZ2V0UmVhbENoaWxkKGdldEZpcnN0Q29tcG9uZW50Q2hpbGQoY29tcE9wdGlvbnMuY2hpbGRyZW4pKQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHZub2RlCiAgICB9CiAgfQoKICBmdW5jdGlvbiBleHRyYWN0VHJhbnNpdGlvbkRhdGEgKGNvbXApIHsKICAgIHZhciBkYXRhID0ge307CiAgICB2YXIgb3B0aW9ucyA9IGNvbXAuJG9wdGlvbnM7CiAgICAvLyBwcm9wcwogICAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMucHJvcHNEYXRhKSB7CiAgICAgIGRhdGFba2V5XSA9IGNvbXBba2V5XTsKICAgIH0KICAgIC8vIGV2ZW50cy4KICAgIC8vIGV4dHJhY3QgbGlzdGVuZXJzIGFuZCBwYXNzIHRoZW0gZGlyZWN0bHkgdG8gdGhlIHRyYW5zaXRpb24gbWV0aG9kcwogICAgdmFyIGxpc3RlbmVycyA9IG9wdGlvbnMuX3BhcmVudExpc3RlbmVyczsKICAgIGZvciAodmFyIGtleSQxIGluIGxpc3RlbmVycykgewogICAgICBkYXRhW2NhbWVsaXplKGtleSQxKV0gPSBsaXN0ZW5lcnNba2V5JDFdOwogICAgfQogICAgcmV0dXJuIGRhdGEKICB9CgogIGZ1bmN0aW9uIHBsYWNlaG9sZGVyIChoLCByYXdDaGlsZCkgewogICAgaWYgKC9cZC1rZWVwLWFsaXZlJC8udGVzdChyYXdDaGlsZC50YWcpKSB7CiAgICAgIHJldHVybiBoKCdrZWVwLWFsaXZlJywgewogICAgICAgIHByb3BzOiByYXdDaGlsZC5jb21wb25lbnRPcHRpb25zLnByb3BzRGF0YQogICAgICB9KQogICAgfQogIH0KCiAgZnVuY3Rpb24gaGFzUGFyZW50VHJhbnNpdGlvbiAodm5vZGUpIHsKICAgIHdoaWxlICgodm5vZGUgPSB2bm9kZS5wYXJlbnQpKSB7CiAgICAgIGlmICh2bm9kZS5kYXRhLnRyYW5zaXRpb24pIHsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBpc1NhbWVDaGlsZCAoY2hpbGQsIG9sZENoaWxkKSB7CiAgICByZXR1cm4gb2xkQ2hpbGQua2V5ID09PSBjaGlsZC5rZXkgJiYgb2xkQ2hpbGQudGFnID09PSBjaGlsZC50YWcKICB9CgogIHZhciBpc05vdFRleHROb2RlID0gZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMudGFnIHx8IGlzQXN5bmNQbGFjZWhvbGRlcihjKTsgfTsKCiAgdmFyIGlzVlNob3dEaXJlY3RpdmUgPSBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5uYW1lID09PSAnc2hvdyc7IH07CgogIHZhciBUcmFuc2l0aW9uID0gewogICAgbmFtZTogJ3RyYW5zaXRpb24nLAogICAgcHJvcHM6IHRyYW5zaXRpb25Qcm9wcywKICAgIGFic3RyYWN0OiB0cnVlLAoKICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyIChoKSB7CiAgICAgIHZhciB0aGlzJDEgPSB0aGlzOwoKICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy4kc2xvdHMuZGVmYXVsdDsKICAgICAgaWYgKCFjaGlsZHJlbikgewogICAgICAgIHJldHVybgogICAgICB9CgogICAgICAvLyBmaWx0ZXIgb3V0IHRleHQgbm9kZXMgKHBvc3NpYmxlIHdoaXRlc3BhY2VzKQogICAgICBjaGlsZHJlbiA9IGNoaWxkcmVuLmZpbHRlcihpc05vdFRleHROb2RlKTsKICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIC8vIHdhcm4gbXVsdGlwbGUgZWxlbWVudHMKICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA+IDEpIHsKICAgICAgICB3YXJuKAogICAgICAgICAgJzx0cmFuc2l0aW9uPiBjYW4gb25seSBiZSB1c2VkIG9uIGEgc2luZ2xlIGVsZW1lbnQuIFVzZSAnICsKICAgICAgICAgICc8dHJhbnNpdGlvbi1ncm91cD4gZm9yIGxpc3RzLicsCiAgICAgICAgICB0aGlzLiRwYXJlbnQKICAgICAgICApOwogICAgICB9CgogICAgICB2YXIgbW9kZSA9IHRoaXMubW9kZTsKCiAgICAgIC8vIHdhcm4gaW52YWxpZCBtb2RlCiAgICAgIGlmIChtb2RlICYmIG1vZGUgIT09ICdpbi1vdXQnICYmIG1vZGUgIT09ICdvdXQtaW4nCiAgICAgICkgewogICAgICAgIHdhcm4oCiAgICAgICAgICAnaW52YWxpZCA8dHJhbnNpdGlvbj4gbW9kZTogJyArIG1vZGUsCiAgICAgICAgICB0aGlzLiRwYXJlbnQKICAgICAgICApOwogICAgICB9CgogICAgICB2YXIgcmF3Q2hpbGQgPSBjaGlsZHJlblswXTsKCiAgICAgIC8vIGlmIHRoaXMgaXMgYSBjb21wb25lbnQgcm9vdCBub2RlIGFuZCB0aGUgY29tcG9uZW50J3MKICAgICAgLy8gcGFyZW50IGNvbnRhaW5lciBub2RlIGFsc28gaGFzIHRyYW5zaXRpb24sIHNraXAuCiAgICAgIGlmIChoYXNQYXJlbnRUcmFuc2l0aW9uKHRoaXMuJHZub2RlKSkgewogICAgICAgIHJldHVybiByYXdDaGlsZAogICAgICB9CgogICAgICAvLyBhcHBseSB0cmFuc2l0aW9uIGRhdGEgdG8gY2hpbGQKICAgICAgLy8gdXNlIGdldFJlYWxDaGlsZCgpIHRvIGlnbm9yZSBhYnN0cmFjdCBjb21wb25lbnRzIGUuZy4ga2VlcC1hbGl2ZQogICAgICB2YXIgY2hpbGQgPSBnZXRSZWFsQ2hpbGQocmF3Q2hpbGQpOwogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgaWYgKCFjaGlsZCkgewogICAgICAgIHJldHVybiByYXdDaGlsZAogICAgICB9CgogICAgICBpZiAodGhpcy5fbGVhdmluZykgewogICAgICAgIHJldHVybiBwbGFjZWhvbGRlcihoLCByYXdDaGlsZCkKICAgICAgfQoKICAgICAgLy8gZW5zdXJlIGEga2V5IHRoYXQgaXMgdW5pcXVlIHRvIHRoZSB2bm9kZSB0eXBlIGFuZCB0byB0aGlzIHRyYW5zaXRpb24KICAgICAgLy8gY29tcG9uZW50IGluc3RhbmNlLiBUaGlzIGtleSB3aWxsIGJlIHVzZWQgdG8gcmVtb3ZlIHBlbmRpbmcgbGVhdmluZyBub2RlcwogICAgICAvLyBkdXJpbmcgZW50ZXJpbmcuCiAgICAgIHZhciBpZCA9ICJfX3RyYW5zaXRpb24tIiArICh0aGlzLl91aWQpICsgIi0iOwogICAgICBjaGlsZC5rZXkgPSBjaGlsZC5rZXkgPT0gbnVsbAogICAgICAgID8gY2hpbGQuaXNDb21tZW50CiAgICAgICAgICA/IGlkICsgJ2NvbW1lbnQnCiAgICAgICAgICA6IGlkICsgY2hpbGQudGFnCiAgICAgICAgOiBpc1ByaW1pdGl2ZShjaGlsZC5rZXkpCiAgICAgICAgICA/IChTdHJpbmcoY2hpbGQua2V5KS5pbmRleE9mKGlkKSA9PT0gMCA/IGNoaWxkLmtleSA6IGlkICsgY2hpbGQua2V5KQogICAgICAgICAgOiBjaGlsZC5rZXk7CgogICAgICB2YXIgZGF0YSA9IChjaGlsZC5kYXRhIHx8IChjaGlsZC5kYXRhID0ge30pKS50cmFuc2l0aW9uID0gZXh0cmFjdFRyYW5zaXRpb25EYXRhKHRoaXMpOwogICAgICB2YXIgb2xkUmF3Q2hpbGQgPSB0aGlzLl92bm9kZTsKICAgICAgdmFyIG9sZENoaWxkID0gZ2V0UmVhbENoaWxkKG9sZFJhd0NoaWxkKTsKCiAgICAgIC8vIG1hcmsgdi1zaG93CiAgICAgIC8vIHNvIHRoYXQgdGhlIHRyYW5zaXRpb24gbW9kdWxlIGNhbiBoYW5kIG92ZXIgdGhlIGNvbnRyb2wgdG8gdGhlIGRpcmVjdGl2ZQogICAgICBpZiAoY2hpbGQuZGF0YS5kaXJlY3RpdmVzICYmIGNoaWxkLmRhdGEuZGlyZWN0aXZlcy5zb21lKGlzVlNob3dEaXJlY3RpdmUpKSB7CiAgICAgICAgY2hpbGQuZGF0YS5zaG93ID0gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKAogICAgICAgIG9sZENoaWxkICYmCiAgICAgICAgb2xkQ2hpbGQuZGF0YSAmJgogICAgICAgICFpc1NhbWVDaGlsZChjaGlsZCwgb2xkQ2hpbGQpICYmCiAgICAgICAgIWlzQXN5bmNQbGFjZWhvbGRlcihvbGRDaGlsZCkgJiYKICAgICAgICAvLyAjNjY4NyBjb21wb25lbnQgcm9vdCBpcyBhIGNvbW1lbnQgbm9kZQogICAgICAgICEob2xkQ2hpbGQuY29tcG9uZW50SW5zdGFuY2UgJiYgb2xkQ2hpbGQuY29tcG9uZW50SW5zdGFuY2UuX3Zub2RlLmlzQ29tbWVudCkKICAgICAgKSB7CiAgICAgICAgLy8gcmVwbGFjZSBvbGQgY2hpbGQgdHJhbnNpdGlvbiBkYXRhIHdpdGggZnJlc2ggb25lCiAgICAgICAgLy8gaW1wb3J0YW50IGZvciBkeW5hbWljIHRyYW5zaXRpb25zIQogICAgICAgIHZhciBvbGREYXRhID0gb2xkQ2hpbGQuZGF0YS50cmFuc2l0aW9uID0gZXh0ZW5kKHt9LCBkYXRhKTsKICAgICAgICAvLyBoYW5kbGUgdHJhbnNpdGlvbiBtb2RlCiAgICAgICAgaWYgKG1vZGUgPT09ICdvdXQtaW4nKSB7CiAgICAgICAgICAvLyByZXR1cm4gcGxhY2Vob2xkZXIgbm9kZSBhbmQgcXVldWUgdXBkYXRlIHdoZW4gbGVhdmUgZmluaXNoZXMKICAgICAgICAgIHRoaXMuX2xlYXZpbmcgPSB0cnVlOwogICAgICAgICAgbWVyZ2VWTm9kZUhvb2sob2xkRGF0YSwgJ2FmdGVyTGVhdmUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoaXMkMS5fbGVhdmluZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzJDEuJGZvcmNlVXBkYXRlKCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBwbGFjZWhvbGRlcihoLCByYXdDaGlsZCkKICAgICAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdpbi1vdXQnKSB7CiAgICAgICAgICBpZiAoaXNBc3luY1BsYWNlaG9sZGVyKGNoaWxkKSkgewogICAgICAgICAgICByZXR1cm4gb2xkUmF3Q2hpbGQKICAgICAgICAgIH0KICAgICAgICAgIHZhciBkZWxheWVkTGVhdmU7CiAgICAgICAgICB2YXIgcGVyZm9ybUxlYXZlID0gZnVuY3Rpb24gKCkgeyBkZWxheWVkTGVhdmUoKTsgfTsKICAgICAgICAgIG1lcmdlVk5vZGVIb29rKGRhdGEsICdhZnRlckVudGVyJywgcGVyZm9ybUxlYXZlKTsKICAgICAgICAgIG1lcmdlVk5vZGVIb29rKGRhdGEsICdlbnRlckNhbmNlbGxlZCcsIHBlcmZvcm1MZWF2ZSk7CiAgICAgICAgICBtZXJnZVZOb2RlSG9vayhvbGREYXRhLCAnZGVsYXlMZWF2ZScsIGZ1bmN0aW9uIChsZWF2ZSkgeyBkZWxheWVkTGVhdmUgPSBsZWF2ZTsgfSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmF3Q2hpbGQKICAgIH0KICB9OwoKICAvKiAgKi8KCiAgdmFyIHByb3BzID0gZXh0ZW5kKHsKICAgIHRhZzogU3RyaW5nLAogICAgbW92ZUNsYXNzOiBTdHJpbmcKICB9LCB0cmFuc2l0aW9uUHJvcHMpOwoKICBkZWxldGUgcHJvcHMubW9kZTsKCiAgdmFyIFRyYW5zaXRpb25Hcm91cCA9IHsKICAgIHByb3BzOiBwcm9wcywKCiAgICBiZWZvcmVNb3VudDogZnVuY3Rpb24gYmVmb3JlTW91bnQgKCkgewogICAgICB2YXIgdGhpcyQxID0gdGhpczsKCiAgICAgIHZhciB1cGRhdGUgPSB0aGlzLl91cGRhdGU7CiAgICAgIHRoaXMuX3VwZGF0ZSA9IGZ1bmN0aW9uICh2bm9kZSwgaHlkcmF0aW5nKSB7CiAgICAgICAgdmFyIHJlc3RvcmVBY3RpdmVJbnN0YW5jZSA9IHNldEFjdGl2ZUluc3RhbmNlKHRoaXMkMSk7CiAgICAgICAgLy8gZm9yY2UgcmVtb3ZpbmcgcGFzcwogICAgICAgIHRoaXMkMS5fX3BhdGNoX18oCiAgICAgICAgICB0aGlzJDEuX3Zub2RlLAogICAgICAgICAgdGhpcyQxLmtlcHQsCiAgICAgICAgICBmYWxzZSwgLy8gaHlkcmF0aW5nCiAgICAgICAgICB0cnVlIC8vIHJlbW92ZU9ubHkgKCFpbXBvcnRhbnQsIGF2b2lkcyB1bm5lY2Vzc2FyeSBtb3ZlcykKICAgICAgICApOwogICAgICAgIHRoaXMkMS5fdm5vZGUgPSB0aGlzJDEua2VwdDsKICAgICAgICByZXN0b3JlQWN0aXZlSW5zdGFuY2UoKTsKICAgICAgICB1cGRhdGUuY2FsbCh0aGlzJDEsIHZub2RlLCBoeWRyYXRpbmcpOwogICAgICB9OwogICAgfSwKCiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlciAoaCkgewogICAgICB2YXIgdGFnID0gdGhpcy50YWcgfHwgdGhpcy4kdm5vZGUuZGF0YS50YWcgfHwgJ3NwYW4nOwogICAgICB2YXIgbWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgdmFyIHByZXZDaGlsZHJlbiA9IHRoaXMucHJldkNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbjsKICAgICAgdmFyIHJhd0NoaWxkcmVuID0gdGhpcy4kc2xvdHMuZGVmYXVsdCB8fCBbXTsKICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbiA9IFtdOwogICAgICB2YXIgdHJhbnNpdGlvbkRhdGEgPSBleHRyYWN0VHJhbnNpdGlvbkRhdGEodGhpcyk7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhd0NoaWxkcmVuLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGMgPSByYXdDaGlsZHJlbltpXTsKICAgICAgICBpZiAoYy50YWcpIHsKICAgICAgICAgIGlmIChjLmtleSAhPSBudWxsICYmIFN0cmluZyhjLmtleSkuaW5kZXhPZignX192bGlzdCcpICE9PSAwKSB7CiAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goYyk7CiAgICAgICAgICAgIG1hcFtjLmtleV0gPSBjCiAgICAgICAgICAgIDsoYy5kYXRhIHx8IChjLmRhdGEgPSB7fSkpLnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uRGF0YTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciBvcHRzID0gYy5jb21wb25lbnRPcHRpb25zOwogICAgICAgICAgICB2YXIgbmFtZSA9IG9wdHMgPyAob3B0cy5DdG9yLm9wdGlvbnMubmFtZSB8fCBvcHRzLnRhZyB8fCAnJykgOiBjLnRhZzsKICAgICAgICAgICAgd2FybigoIjx0cmFuc2l0aW9uLWdyb3VwPiBjaGlsZHJlbiBtdXN0IGJlIGtleWVkOiA8IiArIG5hbWUgKyAiPiIpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChwcmV2Q2hpbGRyZW4pIHsKICAgICAgICB2YXIga2VwdCA9IFtdOwogICAgICAgIHZhciByZW1vdmVkID0gW107CiAgICAgICAgZm9yICh2YXIgaSQxID0gMDsgaSQxIDwgcHJldkNoaWxkcmVuLmxlbmd0aDsgaSQxKyspIHsKICAgICAgICAgIHZhciBjJDEgPSBwcmV2Q2hpbGRyZW5baSQxXTsKICAgICAgICAgIGMkMS5kYXRhLnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uRGF0YTsKICAgICAgICAgIGMkMS5kYXRhLnBvcyA9IGMkMS5lbG0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICBpZiAobWFwW2MkMS5rZXldKSB7CiAgICAgICAgICAgIGtlcHQucHVzaChjJDEpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVtb3ZlZC5wdXNoKGMkMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRoaXMua2VwdCA9IGgodGFnLCBudWxsLCBrZXB0KTsKICAgICAgICB0aGlzLnJlbW92ZWQgPSByZW1vdmVkOwogICAgICB9CgogICAgICByZXR1cm4gaCh0YWcsIG51bGwsIGNoaWxkcmVuKQogICAgfSwKCiAgICB1cGRhdGVkOiBmdW5jdGlvbiB1cGRhdGVkICgpIHsKICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5wcmV2Q2hpbGRyZW47CiAgICAgIHZhciBtb3ZlQ2xhc3MgPSB0aGlzLm1vdmVDbGFzcyB8fCAoKHRoaXMubmFtZSB8fCAndicpICsgJy1tb3ZlJyk7CiAgICAgIGlmICghY2hpbGRyZW4ubGVuZ3RoIHx8ICF0aGlzLmhhc01vdmUoY2hpbGRyZW5bMF0uZWxtLCBtb3ZlQ2xhc3MpKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIC8vIHdlIGRpdmlkZSB0aGUgd29yayBpbnRvIHRocmVlIGxvb3BzIHRvIGF2b2lkIG1peGluZyBET00gcmVhZHMgYW5kIHdyaXRlcwogICAgICAvLyBpbiBlYWNoIGl0ZXJhdGlvbiAtIHdoaWNoIGhlbHBzIHByZXZlbnQgbGF5b3V0IHRocmFzaGluZy4KICAgICAgY2hpbGRyZW4uZm9yRWFjaChjYWxsUGVuZGluZ0Nicyk7CiAgICAgIGNoaWxkcmVuLmZvckVhY2gocmVjb3JkUG9zaXRpb24pOwogICAgICBjaGlsZHJlbi5mb3JFYWNoKGFwcGx5VHJhbnNsYXRpb24pOwoKICAgICAgLy8gZm9yY2UgcmVmbG93IHRvIHB1dCBldmVyeXRoaW5nIGluIHBvc2l0aW9uCiAgICAgIC8vIGFzc2lnbiB0byB0aGlzIHRvIGF2b2lkIGJlaW5nIHJlbW92ZWQgaW4gdHJlZS1zaGFraW5nCiAgICAgIC8vICRmbG93LWRpc2FibGUtbGluZQogICAgICB0aGlzLl9yZWZsb3cgPSBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodDsKCiAgICAgIGNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGMpIHsKICAgICAgICBpZiAoYy5kYXRhLm1vdmVkKSB7CiAgICAgICAgICB2YXIgZWwgPSBjLmVsbTsKICAgICAgICAgIHZhciBzID0gZWwuc3R5bGU7CiAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIG1vdmVDbGFzcyk7CiAgICAgICAgICBzLnRyYW5zZm9ybSA9IHMuV2Via2l0VHJhbnNmb3JtID0gcy50cmFuc2l0aW9uRHVyYXRpb24gPSAnJzsKICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkVuZEV2ZW50LCBlbC5fbW92ZUNiID0gZnVuY3Rpb24gY2IgKGUpIHsKICAgICAgICAgICAgaWYgKGUgJiYgZS50YXJnZXQgIT09IGVsKSB7CiAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFlIHx8IC90cmFuc2Zvcm0kLy50ZXN0KGUucHJvcGVydHlOYW1lKSkgewogICAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkVuZEV2ZW50LCBjYik7CiAgICAgICAgICAgICAgZWwuX21vdmVDYiA9IG51bGw7CiAgICAgICAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBtb3ZlQ2xhc3MpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBtZXRob2RzOiB7CiAgICAgIGhhc01vdmU6IGZ1bmN0aW9uIGhhc01vdmUgKGVsLCBtb3ZlQ2xhc3MpIHsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgICBpZiAoIWhhc1RyYW5zaXRpb24pIHsKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgICBpZiAodGhpcy5faGFzTW92ZSkgewogICAgICAgICAgcmV0dXJuIHRoaXMuX2hhc01vdmUKICAgICAgICB9CiAgICAgICAgLy8gRGV0ZWN0IHdoZXRoZXIgYW4gZWxlbWVudCB3aXRoIHRoZSBtb3ZlIGNsYXNzIGFwcGxpZWQgaGFzCiAgICAgICAgLy8gQ1NTIHRyYW5zaXRpb25zLiBTaW5jZSB0aGUgZWxlbWVudCBtYXkgYmUgaW5zaWRlIGFuIGVudGVyaW5nCiAgICAgICAgLy8gdHJhbnNpdGlvbiBhdCB0aGlzIHZlcnkgbW9tZW50LCB3ZSBtYWtlIGEgY2xvbmUgb2YgaXQgYW5kIHJlbW92ZQogICAgICAgIC8vIGFsbCBvdGhlciB0cmFuc2l0aW9uIGNsYXNzZXMgYXBwbGllZCB0byBlbnN1cmUgb25seSB0aGUgbW92ZSBjbGFzcwogICAgICAgIC8vIGlzIGFwcGxpZWQuCiAgICAgICAgdmFyIGNsb25lID0gZWwuY2xvbmVOb2RlKCk7CiAgICAgICAgaWYgKGVsLl90cmFuc2l0aW9uQ2xhc3NlcykgewogICAgICAgICAgZWwuX3RyYW5zaXRpb25DbGFzc2VzLmZvckVhY2goZnVuY3Rpb24gKGNscykgeyByZW1vdmVDbGFzcyhjbG9uZSwgY2xzKTsgfSk7CiAgICAgICAgfQogICAgICAgIGFkZENsYXNzKGNsb25lLCBtb3ZlQ2xhc3MpOwogICAgICAgIGNsb25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgdGhpcy4kZWwuYXBwZW5kQ2hpbGQoY2xvbmUpOwogICAgICAgIHZhciBpbmZvID0gZ2V0VHJhbnNpdGlvbkluZm8oY2xvbmUpOwogICAgICAgIHRoaXMuJGVsLnJlbW92ZUNoaWxkKGNsb25lKTsKICAgICAgICByZXR1cm4gKHRoaXMuX2hhc01vdmUgPSBpbmZvLmhhc1RyYW5zZm9ybSkKICAgICAgfQogICAgfQogIH07CgogIGZ1bmN0aW9uIGNhbGxQZW5kaW5nQ2JzIChjKSB7CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgIGlmIChjLmVsbS5fbW92ZUNiKSB7CiAgICAgIGMuZWxtLl9tb3ZlQ2IoKTsKICAgIH0KICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKGMuZWxtLl9lbnRlckNiKSB7CiAgICAgIGMuZWxtLl9lbnRlckNiKCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiByZWNvcmRQb3NpdGlvbiAoYykgewogICAgYy5kYXRhLm5ld1BvcyA9IGMuZWxtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogIH0KCiAgZnVuY3Rpb24gYXBwbHlUcmFuc2xhdGlvbiAoYykgewogICAgdmFyIG9sZFBvcyA9IGMuZGF0YS5wb3M7CiAgICB2YXIgbmV3UG9zID0gYy5kYXRhLm5ld1BvczsKICAgIHZhciBkeCA9IG9sZFBvcy5sZWZ0IC0gbmV3UG9zLmxlZnQ7CiAgICB2YXIgZHkgPSBvbGRQb3MudG9wIC0gbmV3UG9zLnRvcDsKICAgIGlmIChkeCB8fCBkeSkgewogICAgICBjLmRhdGEubW92ZWQgPSB0cnVlOwogICAgICB2YXIgcyA9IGMuZWxtLnN0eWxlOwogICAgICBzLnRyYW5zZm9ybSA9IHMuV2Via2l0VHJhbnNmb3JtID0gInRyYW5zbGF0ZSgiICsgZHggKyAicHgsIiArIGR5ICsgInB4KSI7CiAgICAgIHMudHJhbnNpdGlvbkR1cmF0aW9uID0gJzBzJzsKICAgIH0KICB9CgogIHZhciBwbGF0Zm9ybUNvbXBvbmVudHMgPSB7CiAgICBUcmFuc2l0aW9uOiBUcmFuc2l0aW9uLAogICAgVHJhbnNpdGlvbkdyb3VwOiBUcmFuc2l0aW9uR3JvdXAKICB9OwoKICAvKiAgKi8KCiAgLy8gaW5zdGFsbCBwbGF0Zm9ybSBzcGVjaWZpYyB1dGlscwogIFZ1ZS5jb25maWcubXVzdFVzZVByb3AgPSBtdXN0VXNlUHJvcDsKICBWdWUuY29uZmlnLmlzUmVzZXJ2ZWRUYWcgPSBpc1Jlc2VydmVkVGFnOwogIFZ1ZS5jb25maWcuaXNSZXNlcnZlZEF0dHIgPSBpc1Jlc2VydmVkQXR0cjsKICBWdWUuY29uZmlnLmdldFRhZ05hbWVzcGFjZSA9IGdldFRhZ05hbWVzcGFjZTsKICBWdWUuY29uZmlnLmlzVW5rbm93bkVsZW1lbnQgPSBpc1Vua25vd25FbGVtZW50OwoKICAvLyBpbnN0YWxsIHBsYXRmb3JtIHJ1bnRpbWUgZGlyZWN0aXZlcyAmIGNvbXBvbmVudHMKICBleHRlbmQoVnVlLm9wdGlvbnMuZGlyZWN0aXZlcywgcGxhdGZvcm1EaXJlY3RpdmVzKTsKICBleHRlbmQoVnVlLm9wdGlvbnMuY29tcG9uZW50cywgcGxhdGZvcm1Db21wb25lbnRzKTsKCiAgLy8gaW5zdGFsbCBwbGF0Zm9ybSBwYXRjaCBmdW5jdGlvbgogIFZ1ZS5wcm90b3R5cGUuX19wYXRjaF9fID0gaW5Ccm93c2VyID8gcGF0Y2ggOiBub29wOwoKICAvLyBwdWJsaWMgbW91bnQgbWV0aG9kCiAgVnVlLnByb3RvdHlwZS4kbW91bnQgPSBmdW5jdGlvbiAoCiAgICBlbCwKICAgIGh5ZHJhdGluZwogICkgewogICAgZWwgPSBlbCAmJiBpbkJyb3dzZXIgPyBxdWVyeShlbCkgOiB1bmRlZmluZWQ7CiAgICByZXR1cm4gbW91bnRDb21wb25lbnQodGhpcywgZWwsIGh5ZHJhdGluZykKICB9OwoKICAvLyBkZXZ0b29scyBnbG9iYWwgaG9vawogIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgaWYgKGluQnJvd3NlcikgewogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChjb25maWcuZGV2dG9vbHMpIHsKICAgICAgICBpZiAoZGV2dG9vbHMpIHsKICAgICAgICAgIGRldnRvb2xzLmVtaXQoJ2luaXQnLCBWdWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlW2NvbnNvbGUuaW5mbyA/ICdpbmZvJyA6ICdsb2cnXSgKICAgICAgICAgICAgJ0Rvd25sb2FkIHRoZSBWdWUgRGV2dG9vbHMgZXh0ZW5zaW9uIGZvciBhIGJldHRlciBkZXZlbG9wbWVudCBleHBlcmllbmNlOlxuJyArCiAgICAgICAgICAgICdodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWRldnRvb2xzJwogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGNvbmZpZy5wcm9kdWN0aW9uVGlwICE9PSBmYWxzZSAmJgogICAgICAgIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJwogICAgICApIHsKICAgICAgICBjb25zb2xlW2NvbnNvbGUuaW5mbyA/ICdpbmZvJyA6ICdsb2cnXSgKICAgICAgICAgICJZb3UgYXJlIHJ1bm5pbmcgVnVlIGluIGRldmVsb3BtZW50IG1vZGUuXG4iICsKICAgICAgICAgICJNYWtlIHN1cmUgdG8gdHVybiBvbiBwcm9kdWN0aW9uIG1vZGUgd2hlbiBkZXBsb3lpbmcgZm9yIHByb2R1Y3Rpb24uXG4iICsKICAgICAgICAgICJTZWUgbW9yZSB0aXBzIGF0IGh0dHBzOi8vdnVlanMub3JnL2d1aWRlL2RlcGxveW1lbnQuaHRtbCIKICAgICAgICApOwogICAgICB9CiAgICB9LCAwKTsKICB9CgogIC8qICAqLwoKICB2YXIgZGVmYXVsdFRhZ1JFID0gL1x7XHsoKD86Lnxccj9cbikrPylcfVx9L2c7CiAgdmFyIHJlZ2V4RXNjYXBlUkUgPSAvWy0uKis/XiR7fSgpfFtcXVwvXFxdL2c7CgogIHZhciBidWlsZFJlZ2V4ID0gY2FjaGVkKGZ1bmN0aW9uIChkZWxpbWl0ZXJzKSB7CiAgICB2YXIgb3BlbiA9IGRlbGltaXRlcnNbMF0ucmVwbGFjZShyZWdleEVzY2FwZVJFLCAnXFwkJicpOwogICAgdmFyIGNsb3NlID0gZGVsaW1pdGVyc1sxXS5yZXBsYWNlKHJlZ2V4RXNjYXBlUkUsICdcXCQmJyk7CiAgICByZXR1cm4gbmV3IFJlZ0V4cChvcGVuICsgJygoPzoufFxcbikrPyknICsgY2xvc2UsICdnJykKICB9KTsKCgoKICBmdW5jdGlvbiBwYXJzZVRleHQgKAogICAgdGV4dCwKICAgIGRlbGltaXRlcnMKICApIHsKICAgIHZhciB0YWdSRSA9IGRlbGltaXRlcnMgPyBidWlsZFJlZ2V4KGRlbGltaXRlcnMpIDogZGVmYXVsdFRhZ1JFOwogICAgaWYgKCF0YWdSRS50ZXN0KHRleHQpKSB7CiAgICAgIHJldHVybgogICAgfQogICAgdmFyIHRva2VucyA9IFtdOwogICAgdmFyIHJhd1Rva2VucyA9IFtdOwogICAgdmFyIGxhc3RJbmRleCA9IHRhZ1JFLmxhc3RJbmRleCA9IDA7CiAgICB2YXIgbWF0Y2gsIGluZGV4LCB0b2tlblZhbHVlOwogICAgd2hpbGUgKChtYXRjaCA9IHRhZ1JFLmV4ZWModGV4dCkpKSB7CiAgICAgIGluZGV4ID0gbWF0Y2guaW5kZXg7CiAgICAgIC8vIHB1c2ggdGV4dCB0b2tlbgogICAgICBpZiAoaW5kZXggPiBsYXN0SW5kZXgpIHsKICAgICAgICByYXdUb2tlbnMucHVzaCh0b2tlblZhbHVlID0gdGV4dC5zbGljZShsYXN0SW5kZXgsIGluZGV4KSk7CiAgICAgICAgdG9rZW5zLnB1c2goSlNPTi5zdHJpbmdpZnkodG9rZW5WYWx1ZSkpOwogICAgICB9CiAgICAgIC8vIHRhZyB0b2tlbgogICAgICB2YXIgZXhwID0gcGFyc2VGaWx0ZXJzKG1hdGNoWzFdLnRyaW0oKSk7CiAgICAgIHRva2Vucy5wdXNoKCgiX3MoIiArIGV4cCArICIpIikpOwogICAgICByYXdUb2tlbnMucHVzaCh7ICdAYmluZGluZyc6IGV4cCB9KTsKICAgICAgbGFzdEluZGV4ID0gaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7CiAgICB9CiAgICBpZiAobGFzdEluZGV4IDwgdGV4dC5sZW5ndGgpIHsKICAgICAgcmF3VG9rZW5zLnB1c2godG9rZW5WYWx1ZSA9IHRleHQuc2xpY2UobGFzdEluZGV4KSk7CiAgICAgIHRva2Vucy5wdXNoKEpTT04uc3RyaW5naWZ5KHRva2VuVmFsdWUpKTsKICAgIH0KICAgIHJldHVybiB7CiAgICAgIGV4cHJlc3Npb246IHRva2Vucy5qb2luKCcrJyksCiAgICAgIHRva2VuczogcmF3VG9rZW5zCiAgICB9CiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gdHJhbnNmb3JtTm9kZSAoZWwsIG9wdGlvbnMpIHsKICAgIHZhciB3YXJuID0gb3B0aW9ucy53YXJuIHx8IGJhc2VXYXJuOwogICAgdmFyIHN0YXRpY0NsYXNzID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ2NsYXNzJyk7CiAgICBpZiAoc3RhdGljQ2xhc3MpIHsKICAgICAgdmFyIHJlcyA9IHBhcnNlVGV4dChzdGF0aWNDbGFzcywgb3B0aW9ucy5kZWxpbWl0ZXJzKTsKICAgICAgaWYgKHJlcykgewogICAgICAgIHdhcm4oCiAgICAgICAgICAiY2xhc3M9XCIiICsgc3RhdGljQ2xhc3MgKyAiXCI6ICIgKwogICAgICAgICAgJ0ludGVycG9sYXRpb24gaW5zaWRlIGF0dHJpYnV0ZXMgaGFzIGJlZW4gcmVtb3ZlZC4gJyArCiAgICAgICAgICAnVXNlIHYtYmluZCBvciB0aGUgY29sb24gc2hvcnRoYW5kIGluc3RlYWQuIEZvciBleGFtcGxlLCAnICsKICAgICAgICAgICdpbnN0ZWFkIG9mIDxkaXYgY2xhc3M9Int7IHZhbCB9fSI+LCB1c2UgPGRpdiA6Y2xhc3M9InZhbCI+LicsCiAgICAgICAgICBlbC5yYXdBdHRyc01hcFsnY2xhc3MnXQogICAgICAgICk7CiAgICAgIH0KICAgIH0KICAgIGlmIChzdGF0aWNDbGFzcykgewogICAgICBlbC5zdGF0aWNDbGFzcyA9IEpTT04uc3RyaW5naWZ5KHN0YXRpY0NsYXNzKTsKICAgIH0KICAgIHZhciBjbGFzc0JpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ2NsYXNzJywgZmFsc2UgLyogZ2V0U3RhdGljICovKTsKICAgIGlmIChjbGFzc0JpbmRpbmcpIHsKICAgICAgZWwuY2xhc3NCaW5kaW5nID0gY2xhc3NCaW5kaW5nOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZ2VuRGF0YSAoZWwpIHsKICAgIHZhciBkYXRhID0gJyc7CiAgICBpZiAoZWwuc3RhdGljQ2xhc3MpIHsKICAgICAgZGF0YSArPSAic3RhdGljQ2xhc3M6IiArIChlbC5zdGF0aWNDbGFzcykgKyAiLCI7CiAgICB9CiAgICBpZiAoZWwuY2xhc3NCaW5kaW5nKSB7CiAgICAgIGRhdGEgKz0gImNsYXNzOiIgKyAoZWwuY2xhc3NCaW5kaW5nKSArICIsIjsKICAgIH0KICAgIHJldHVybiBkYXRhCiAgfQoKICB2YXIga2xhc3MkMSA9IHsKICAgIHN0YXRpY0tleXM6IFsnc3RhdGljQ2xhc3MnXSwKICAgIHRyYW5zZm9ybU5vZGU6IHRyYW5zZm9ybU5vZGUsCiAgICBnZW5EYXRhOiBnZW5EYXRhCiAgfTsKCiAgLyogICovCgogIGZ1bmN0aW9uIHRyYW5zZm9ybU5vZGUkMSAoZWwsIG9wdGlvbnMpIHsKICAgIHZhciB3YXJuID0gb3B0aW9ucy53YXJuIHx8IGJhc2VXYXJuOwogICAgdmFyIHN0YXRpY1N0eWxlID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3N0eWxlJyk7CiAgICBpZiAoc3RhdGljU3R5bGUpIHsKICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgIHsKICAgICAgICB2YXIgcmVzID0gcGFyc2VUZXh0KHN0YXRpY1N0eWxlLCBvcHRpb25zLmRlbGltaXRlcnMpOwogICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgIHdhcm4oCiAgICAgICAgICAgICJzdHlsZT1cIiIgKyBzdGF0aWNTdHlsZSArICJcIjogIiArCiAgICAgICAgICAgICdJbnRlcnBvbGF0aW9uIGluc2lkZSBhdHRyaWJ1dGVzIGhhcyBiZWVuIHJlbW92ZWQuICcgKwogICAgICAgICAgICAnVXNlIHYtYmluZCBvciB0aGUgY29sb24gc2hvcnRoYW5kIGluc3RlYWQuIEZvciBleGFtcGxlLCAnICsKICAgICAgICAgICAgJ2luc3RlYWQgb2YgPGRpdiBzdHlsZT0ie3sgdmFsIH19Ij4sIHVzZSA8ZGl2IDpzdHlsZT0idmFsIj4uJywKICAgICAgICAgICAgZWwucmF3QXR0cnNNYXBbJ3N0eWxlJ10KICAgICAgICAgICk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGVsLnN0YXRpY1N0eWxlID0gSlNPTi5zdHJpbmdpZnkocGFyc2VTdHlsZVRleHQoc3RhdGljU3R5bGUpKTsKICAgIH0KCiAgICB2YXIgc3R5bGVCaW5kaW5nID0gZ2V0QmluZGluZ0F0dHIoZWwsICdzdHlsZScsIGZhbHNlIC8qIGdldFN0YXRpYyAqLyk7CiAgICBpZiAoc3R5bGVCaW5kaW5nKSB7CiAgICAgIGVsLnN0eWxlQmluZGluZyA9IHN0eWxlQmluZGluZzsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGdlbkRhdGEkMSAoZWwpIHsKICAgIHZhciBkYXRhID0gJyc7CiAgICBpZiAoZWwuc3RhdGljU3R5bGUpIHsKICAgICAgZGF0YSArPSAic3RhdGljU3R5bGU6IiArIChlbC5zdGF0aWNTdHlsZSkgKyAiLCI7CiAgICB9CiAgICBpZiAoZWwuc3R5bGVCaW5kaW5nKSB7CiAgICAgIGRhdGEgKz0gInN0eWxlOigiICsgKGVsLnN0eWxlQmluZGluZykgKyAiKSwiOwogICAgfQogICAgcmV0dXJuIGRhdGEKICB9CgogIHZhciBzdHlsZSQxID0gewogICAgc3RhdGljS2V5czogWydzdGF0aWNTdHlsZSddLAogICAgdHJhbnNmb3JtTm9kZTogdHJhbnNmb3JtTm9kZSQxLAogICAgZ2VuRGF0YTogZ2VuRGF0YSQxCiAgfTsKCiAgLyogICovCgogIHZhciBkZWNvZGVyOwoKICB2YXIgaGUgPSB7CiAgICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZSAoaHRtbCkgewogICAgICBkZWNvZGVyID0gZGVjb2RlciB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgZGVjb2Rlci5pbm5lckhUTUwgPSBodG1sOwogICAgICByZXR1cm4gZGVjb2Rlci50ZXh0Q29udGVudAogICAgfQogIH07CgogIC8qICAqLwoKICB2YXIgaXNVbmFyeVRhZyA9IG1ha2VNYXAoCiAgICAnYXJlYSxiYXNlLGJyLGNvbCxlbWJlZCxmcmFtZSxocixpbWcsaW5wdXQsaXNpbmRleCxrZXlnZW4sJyArCiAgICAnbGluayxtZXRhLHBhcmFtLHNvdXJjZSx0cmFjayx3YnInCiAgKTsKCiAgLy8gRWxlbWVudHMgdGhhdCB5b3UgY2FuLCBpbnRlbnRpb25hbGx5LCBsZWF2ZSBvcGVuCiAgLy8gKGFuZCB3aGljaCBjbG9zZSB0aGVtc2VsdmVzKQogIHZhciBjYW5CZUxlZnRPcGVuVGFnID0gbWFrZU1hcCgKICAgICdjb2xncm91cCxkZCxkdCxsaSxvcHRpb25zLHAsdGQsdGZvb3QsdGgsdGhlYWQsdHIsc291cmNlJwogICk7CgogIC8vIEhUTUw1IHRhZ3MgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvaW5kaWNlcy5odG1sI2VsZW1lbnRzLTMKICAvLyBQaHJhc2luZyBDb250ZW50IGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2RvbS5odG1sI3BocmFzaW5nLWNvbnRlbnQKICB2YXIgaXNOb25QaHJhc2luZ1RhZyA9IG1ha2VNYXAoCiAgICAnYWRkcmVzcyxhcnRpY2xlLGFzaWRlLGJhc2UsYmxvY2txdW90ZSxib2R5LGNhcHRpb24sY29sLGNvbGdyb3VwLGRkLCcgKwogICAgJ2RldGFpbHMsZGlhbG9nLGRpdixkbCxkdCxmaWVsZHNldCxmaWdjYXB0aW9uLGZpZ3VyZSxmb290ZXIsZm9ybSwnICsKICAgICdoMSxoMixoMyxoNCxoNSxoNixoZWFkLGhlYWRlcixoZ3JvdXAsaHIsaHRtbCxsZWdlbmQsbGksbWVudWl0ZW0sbWV0YSwnICsKICAgICdvcHRncm91cCxvcHRpb24scGFyYW0scnAscnQsc291cmNlLHN0eWxlLHN1bW1hcnksdGJvZHksdGQsdGZvb3QsdGgsdGhlYWQsJyArCiAgICAndGl0bGUsdHIsdHJhY2snCiAgKTsKCiAgLyoqCiAgICogTm90IHR5cGUtY2hlY2tpbmcgdGhpcyBmaWxlIGJlY2F1c2UgaXQncyBtb3N0bHkgdmVuZG9yIGNvZGUuCiAgICovCgogIC8vIFJlZ3VsYXIgRXhwcmVzc2lvbnMgZm9yIHBhcnNpbmcgdGFncyBhbmQgYXR0cmlidXRlcwogIHZhciBhdHRyaWJ1dGUgPSAvXlxzKihbXlxzIic8PlwvPV0rKSg/OlxzKig9KVxzKig/OiIoW14iXSopIit8JyhbXiddKiknK3woW15ccyInPTw+YF0rKSkpPy87CiAgdmFyIGR5bmFtaWNBcmdBdHRyaWJ1dGUgPSAvXlxzKigoPzp2LVtcdy1dKzp8QHw6fCMpXFtbXj1dK1xdW15ccyInPD5cLz1dKikoPzpccyooPSlccyooPzoiKFteIl0qKSIrfCcoW14nXSopJyt8KFteXHMiJz08PmBdKykpKT8vOwogIHZhciBuY25hbWUgPSAiW2EtekEtWl9dW1xcLVxcLjAtOV9hLXpBLVoiICsgKHVuaWNvZGVSZWdFeHAuc291cmNlKSArICJdKiI7CiAgdmFyIHFuYW1lQ2FwdHVyZSA9ICIoKD86IiArIG5jbmFtZSArICJcXDopPyIgKyBuY25hbWUgKyAiKSI7CiAgdmFyIHN0YXJ0VGFnT3BlbiA9IG5ldyBSZWdFeHAoKCJePCIgKyBxbmFtZUNhcHR1cmUpKTsKICB2YXIgc3RhcnRUYWdDbG9zZSA9IC9eXHMqKFwvPyk+LzsKICB2YXIgZW5kVGFnID0gbmV3IFJlZ0V4cCgoIl48XFwvIiArIHFuYW1lQ2FwdHVyZSArICJbXj5dKj4iKSk7CiAgdmFyIGRvY3R5cGUgPSAvXjwhRE9DVFlQRSBbXj5dKz4vaTsKICAvLyAjNzI5ODogZXNjYXBlIC0gdG8gYXZvaWQgYmVpbmcgcGFzZWQgYXMgSFRNTCBjb21tZW50IHdoZW4gaW5saW5lZCBpbiBwYWdlCiAgdmFyIGNvbW1lbnQgPSAvXjwhXC0tLzsKICB2YXIgY29uZGl0aW9uYWxDb21tZW50ID0gL148IVxbLzsKCiAgLy8gU3BlY2lhbCBFbGVtZW50cyAoY2FuIGNvbnRhaW4gYW55dGhpbmcpCiAgdmFyIGlzUGxhaW5UZXh0RWxlbWVudCA9IG1ha2VNYXAoJ3NjcmlwdCxzdHlsZSx0ZXh0YXJlYScsIHRydWUpOwogIHZhciByZUNhY2hlID0ge307CgogIHZhciBkZWNvZGluZ01hcCA9IHsKICAgICcmbHQ7JzogJzwnLAogICAgJyZndDsnOiAnPicsCiAgICAnJnF1b3Q7JzogJyInLAogICAgJyZhbXA7JzogJyYnLAogICAgJyYjMTA7JzogJ1xuJywKICAgICcmIzk7JzogJ1x0JywKICAgICcmIzM5Oyc6ICInIgogIH07CiAgdmFyIGVuY29kZWRBdHRyID0gLyYoPzpsdHxndHxxdW90fGFtcHwjMzkpOy9nOwogIHZhciBlbmNvZGVkQXR0cldpdGhOZXdMaW5lcyA9IC8mKD86bHR8Z3R8cXVvdHxhbXB8IzM5fCMxMHwjOSk7L2c7CgogIC8vICM1OTkyCiAgdmFyIGlzSWdub3JlTmV3bGluZVRhZyA9IG1ha2VNYXAoJ3ByZSx0ZXh0YXJlYScsIHRydWUpOwogIHZhciBzaG91bGRJZ25vcmVGaXJzdE5ld2xpbmUgPSBmdW5jdGlvbiAodGFnLCBodG1sKSB7IHJldHVybiB0YWcgJiYgaXNJZ25vcmVOZXdsaW5lVGFnKHRhZykgJiYgaHRtbFswXSA9PT0gJ1xuJzsgfTsKCiAgZnVuY3Rpb24gZGVjb2RlQXR0ciAodmFsdWUsIHNob3VsZERlY29kZU5ld2xpbmVzKSB7CiAgICB2YXIgcmUgPSBzaG91bGREZWNvZGVOZXdsaW5lcyA/IGVuY29kZWRBdHRyV2l0aE5ld0xpbmVzIDogZW5jb2RlZEF0dHI7CiAgICByZXR1cm4gdmFsdWUucmVwbGFjZShyZSwgZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBkZWNvZGluZ01hcFttYXRjaF07IH0pCiAgfQoKICBmdW5jdGlvbiBwYXJzZUhUTUwgKGh0bWwsIG9wdGlvbnMpIHsKICAgIHZhciBzdGFjayA9IFtdOwogICAgdmFyIGV4cGVjdEhUTUwgPSBvcHRpb25zLmV4cGVjdEhUTUw7CiAgICB2YXIgaXNVbmFyeVRhZyQkMSA9IG9wdGlvbnMuaXNVbmFyeVRhZyB8fCBubzsKICAgIHZhciBjYW5CZUxlZnRPcGVuVGFnJCQxID0gb3B0aW9ucy5jYW5CZUxlZnRPcGVuVGFnIHx8IG5vOwogICAgdmFyIGluZGV4ID0gMDsKICAgIHZhciBsYXN0LCBsYXN0VGFnOwogICAgd2hpbGUgKGh0bWwpIHsKICAgICAgbGFzdCA9IGh0bWw7CiAgICAgIC8vIE1ha2Ugc3VyZSB3ZSdyZSBub3QgaW4gYSBwbGFpbnRleHQgY29udGVudCBlbGVtZW50IGxpa2Ugc2NyaXB0L3N0eWxlCiAgICAgIGlmICghbGFzdFRhZyB8fCAhaXNQbGFpblRleHRFbGVtZW50KGxhc3RUYWcpKSB7CiAgICAgICAgdmFyIHRleHRFbmQgPSBodG1sLmluZGV4T2YoJzwnKTsKICAgICAgICBpZiAodGV4dEVuZCA9PT0gMCkgewogICAgICAgICAgLy8gQ29tbWVudDoKICAgICAgICAgIGlmIChjb21tZW50LnRlc3QoaHRtbCkpIHsKICAgICAgICAgICAgdmFyIGNvbW1lbnRFbmQgPSBodG1sLmluZGV4T2YoJy0tPicpOwoKICAgICAgICAgICAgaWYgKGNvbW1lbnRFbmQgPj0gMCkgewogICAgICAgICAgICAgIGlmIChvcHRpb25zLnNob3VsZEtlZXBDb21tZW50KSB7CiAgICAgICAgICAgICAgICBvcHRpb25zLmNvbW1lbnQoaHRtbC5zdWJzdHJpbmcoNCwgY29tbWVudEVuZCksIGluZGV4LCBpbmRleCArIGNvbW1lbnRFbmQgKyAzKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYWR2YW5jZShjb21tZW50RW5kICsgMyk7CiAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29uZGl0aW9uYWxfY29tbWVudCNEb3dubGV2ZWwtcmV2ZWFsZWRfY29uZGl0aW9uYWxfY29tbWVudAogICAgICAgICAgaWYgKGNvbmRpdGlvbmFsQ29tbWVudC50ZXN0KGh0bWwpKSB7CiAgICAgICAgICAgIHZhciBjb25kaXRpb25hbEVuZCA9IGh0bWwuaW5kZXhPZignXT4nKTsKCiAgICAgICAgICAgIGlmIChjb25kaXRpb25hbEVuZCA+PSAwKSB7CiAgICAgICAgICAgICAgYWR2YW5jZShjb25kaXRpb25hbEVuZCArIDIpOwogICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICAvLyBEb2N0eXBlOgogICAgICAgICAgdmFyIGRvY3R5cGVNYXRjaCA9IGh0bWwubWF0Y2goZG9jdHlwZSk7CiAgICAgICAgICBpZiAoZG9jdHlwZU1hdGNoKSB7CiAgICAgICAgICAgIGFkdmFuY2UoZG9jdHlwZU1hdGNoWzBdLmxlbmd0aCk7CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICB9CgogICAgICAgICAgLy8gRW5kIHRhZzoKICAgICAgICAgIHZhciBlbmRUYWdNYXRjaCA9IGh0bWwubWF0Y2goZW5kVGFnKTsKICAgICAgICAgIGlmIChlbmRUYWdNYXRjaCkgewogICAgICAgICAgICB2YXIgY3VySW5kZXggPSBpbmRleDsKICAgICAgICAgICAgYWR2YW5jZShlbmRUYWdNYXRjaFswXS5sZW5ndGgpOwogICAgICAgICAgICBwYXJzZUVuZFRhZyhlbmRUYWdNYXRjaFsxXSwgY3VySW5kZXgsIGluZGV4KTsKICAgICAgICAgICAgY29udGludWUKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBTdGFydCB0YWc6CiAgICAgICAgICB2YXIgc3RhcnRUYWdNYXRjaCA9IHBhcnNlU3RhcnRUYWcoKTsKICAgICAgICAgIGlmIChzdGFydFRhZ01hdGNoKSB7CiAgICAgICAgICAgIGhhbmRsZVN0YXJ0VGFnKHN0YXJ0VGFnTWF0Y2gpOwogICAgICAgICAgICBpZiAoc2hvdWxkSWdub3JlRmlyc3ROZXdsaW5lKHN0YXJ0VGFnTWF0Y2gudGFnTmFtZSwgaHRtbCkpIHsKICAgICAgICAgICAgICBhZHZhbmNlKDEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgdGV4dCA9ICh2b2lkIDApLCByZXN0ID0gKHZvaWQgMCksIG5leHQgPSAodm9pZCAwKTsKICAgICAgICBpZiAodGV4dEVuZCA+PSAwKSB7CiAgICAgICAgICByZXN0ID0gaHRtbC5zbGljZSh0ZXh0RW5kKTsKICAgICAgICAgIHdoaWxlICgKICAgICAgICAgICAgIWVuZFRhZy50ZXN0KHJlc3QpICYmCiAgICAgICAgICAgICFzdGFydFRhZ09wZW4udGVzdChyZXN0KSAmJgogICAgICAgICAgICAhY29tbWVudC50ZXN0KHJlc3QpICYmCiAgICAgICAgICAgICFjb25kaXRpb25hbENvbW1lbnQudGVzdChyZXN0KQogICAgICAgICAgKSB7CiAgICAgICAgICAgIC8vIDwgaW4gcGxhaW4gdGV4dCwgYmUgZm9yZ2l2aW5nIGFuZCB0cmVhdCBpdCBhcyB0ZXh0CiAgICAgICAgICAgIG5leHQgPSByZXN0LmluZGV4T2YoJzwnLCAxKTsKICAgICAgICAgICAgaWYgKG5leHQgPCAwKSB7IGJyZWFrIH0KICAgICAgICAgICAgdGV4dEVuZCArPSBuZXh0OwogICAgICAgICAgICByZXN0ID0gaHRtbC5zbGljZSh0ZXh0RW5kKTsKICAgICAgICAgIH0KICAgICAgICAgIHRleHQgPSBodG1sLnN1YnN0cmluZygwLCB0ZXh0RW5kKTsKICAgICAgICB9CgogICAgICAgIGlmICh0ZXh0RW5kIDwgMCkgewogICAgICAgICAgdGV4dCA9IGh0bWw7CiAgICAgICAgfQoKICAgICAgICBpZiAodGV4dCkgewogICAgICAgICAgYWR2YW5jZSh0ZXh0Lmxlbmd0aCk7CiAgICAgICAgfQoKICAgICAgICBpZiAob3B0aW9ucy5jaGFycyAmJiB0ZXh0KSB7CiAgICAgICAgICBvcHRpb25zLmNoYXJzKHRleHQsIGluZGV4IC0gdGV4dC5sZW5ndGgsIGluZGV4KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGVuZFRhZ0xlbmd0aCA9IDA7CiAgICAgICAgdmFyIHN0YWNrZWRUYWcgPSBsYXN0VGFnLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgdmFyIHJlU3RhY2tlZFRhZyA9IHJlQ2FjaGVbc3RhY2tlZFRhZ10gfHwgKHJlQ2FjaGVbc3RhY2tlZFRhZ10gPSBuZXcgUmVnRXhwKCcoW1xcc1xcU10qPykoPC8nICsgc3RhY2tlZFRhZyArICdbXj5dKj4pJywgJ2knKSk7CiAgICAgICAgdmFyIHJlc3QkMSA9IGh0bWwucmVwbGFjZShyZVN0YWNrZWRUYWcsIGZ1bmN0aW9uIChhbGwsIHRleHQsIGVuZFRhZykgewogICAgICAgICAgZW5kVGFnTGVuZ3RoID0gZW5kVGFnLmxlbmd0aDsKICAgICAgICAgIGlmICghaXNQbGFpblRleHRFbGVtZW50KHN0YWNrZWRUYWcpICYmIHN0YWNrZWRUYWcgIT09ICdub3NjcmlwdCcpIHsKICAgICAgICAgICAgdGV4dCA9IHRleHQKICAgICAgICAgICAgICAucmVwbGFjZSgvPCFcLS0oW1xzXFNdKj8pLS0+L2csICckMScpIC8vICM3Mjk4CiAgICAgICAgICAgICAgLnJlcGxhY2UoLzwhXFtDREFUQVxbKFtcc1xTXSo/KV1dPi9nLCAnJDEnKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzaG91bGRJZ25vcmVGaXJzdE5ld2xpbmUoc3RhY2tlZFRhZywgdGV4dCkpIHsKICAgICAgICAgICAgdGV4dCA9IHRleHQuc2xpY2UoMSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAob3B0aW9ucy5jaGFycykgewogICAgICAgICAgICBvcHRpb25zLmNoYXJzKHRleHQpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuICcnCiAgICAgICAgfSk7CiAgICAgICAgaW5kZXggKz0gaHRtbC5sZW5ndGggLSByZXN0JDEubGVuZ3RoOwogICAgICAgIGh0bWwgPSByZXN0JDE7CiAgICAgICAgcGFyc2VFbmRUYWcoc3RhY2tlZFRhZywgaW5kZXggLSBlbmRUYWdMZW5ndGgsIGluZGV4KTsKICAgICAgfQoKICAgICAgaWYgKGh0bWwgPT09IGxhc3QpIHsKICAgICAgICBvcHRpb25zLmNoYXJzICYmIG9wdGlvbnMuY2hhcnMoaHRtbCk7CiAgICAgICAgaWYgKCFzdGFjay5sZW5ndGggJiYgb3B0aW9ucy53YXJuKSB7CiAgICAgICAgICBvcHRpb25zLndhcm4oKCJNYWwtZm9ybWF0dGVkIHRhZyBhdCBlbmQgb2YgdGVtcGxhdGU6IFwiIiArIGh0bWwgKyAiXCIiKSwgeyBzdGFydDogaW5kZXggKyBodG1sLmxlbmd0aCB9KTsKICAgICAgICB9CiAgICAgICAgYnJlYWsKICAgICAgfQogICAgfQoKICAgIC8vIENsZWFuIHVwIGFueSByZW1haW5pbmcgdGFncwogICAgcGFyc2VFbmRUYWcoKTsKCiAgICBmdW5jdGlvbiBhZHZhbmNlIChuKSB7CiAgICAgIGluZGV4ICs9IG47CiAgICAgIGh0bWwgPSBodG1sLnN1YnN0cmluZyhuKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwYXJzZVN0YXJ0VGFnICgpIHsKICAgICAgdmFyIHN0YXJ0ID0gaHRtbC5tYXRjaChzdGFydFRhZ09wZW4pOwogICAgICBpZiAoc3RhcnQpIHsKICAgICAgICB2YXIgbWF0Y2ggPSB7CiAgICAgICAgICB0YWdOYW1lOiBzdGFydFsxXSwKICAgICAgICAgIGF0dHJzOiBbXSwKICAgICAgICAgIHN0YXJ0OiBpbmRleAogICAgICAgIH07CiAgICAgICAgYWR2YW5jZShzdGFydFswXS5sZW5ndGgpOwogICAgICAgIHZhciBlbmQsIGF0dHI7CiAgICAgICAgd2hpbGUgKCEoZW5kID0gaHRtbC5tYXRjaChzdGFydFRhZ0Nsb3NlKSkgJiYgKGF0dHIgPSBodG1sLm1hdGNoKGR5bmFtaWNBcmdBdHRyaWJ1dGUpIHx8IGh0bWwubWF0Y2goYXR0cmlidXRlKSkpIHsKICAgICAgICAgIGF0dHIuc3RhcnQgPSBpbmRleDsKICAgICAgICAgIGFkdmFuY2UoYXR0clswXS5sZW5ndGgpOwogICAgICAgICAgYXR0ci5lbmQgPSBpbmRleDsKICAgICAgICAgIG1hdGNoLmF0dHJzLnB1c2goYXR0cik7CiAgICAgICAgfQogICAgICAgIGlmIChlbmQpIHsKICAgICAgICAgIG1hdGNoLnVuYXJ5U2xhc2ggPSBlbmRbMV07CiAgICAgICAgICBhZHZhbmNlKGVuZFswXS5sZW5ndGgpOwogICAgICAgICAgbWF0Y2guZW5kID0gaW5kZXg7CiAgICAgICAgICByZXR1cm4gbWF0Y2gKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBoYW5kbGVTdGFydFRhZyAobWF0Y2gpIHsKICAgICAgdmFyIHRhZ05hbWUgPSBtYXRjaC50YWdOYW1lOwogICAgICB2YXIgdW5hcnlTbGFzaCA9IG1hdGNoLnVuYXJ5U2xhc2g7CgogICAgICBpZiAoZXhwZWN0SFRNTCkgewogICAgICAgIGlmIChsYXN0VGFnID09PSAncCcgJiYgaXNOb25QaHJhc2luZ1RhZyh0YWdOYW1lKSkgewogICAgICAgICAgcGFyc2VFbmRUYWcobGFzdFRhZyk7CiAgICAgICAgfQogICAgICAgIGlmIChjYW5CZUxlZnRPcGVuVGFnJCQxKHRhZ05hbWUpICYmIGxhc3RUYWcgPT09IHRhZ05hbWUpIHsKICAgICAgICAgIHBhcnNlRW5kVGFnKHRhZ05hbWUpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIHVuYXJ5ID0gaXNVbmFyeVRhZyQkMSh0YWdOYW1lKSB8fCAhIXVuYXJ5U2xhc2g7CgogICAgICB2YXIgbCA9IG1hdGNoLmF0dHJzLmxlbmd0aDsKICAgICAgdmFyIGF0dHJzID0gbmV3IEFycmF5KGwpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykgewogICAgICAgIHZhciBhcmdzID0gbWF0Y2guYXR0cnNbaV07CiAgICAgICAgdmFyIHZhbHVlID0gYXJnc1szXSB8fCBhcmdzWzRdIHx8IGFyZ3NbNV0gfHwgJyc7CiAgICAgICAgdmFyIHNob3VsZERlY29kZU5ld2xpbmVzID0gdGFnTmFtZSA9PT0gJ2EnICYmIGFyZ3NbMV0gPT09ICdocmVmJwogICAgICAgICAgPyBvcHRpb25zLnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZgogICAgICAgICAgOiBvcHRpb25zLnNob3VsZERlY29kZU5ld2xpbmVzOwogICAgICAgIGF0dHJzW2ldID0gewogICAgICAgICAgbmFtZTogYXJnc1sxXSwKICAgICAgICAgIHZhbHVlOiBkZWNvZGVBdHRyKHZhbHVlLCBzaG91bGREZWNvZGVOZXdsaW5lcykKICAgICAgICB9OwogICAgICAgIGlmIChvcHRpb25zLm91dHB1dFNvdXJjZVJhbmdlKSB7CiAgICAgICAgICBhdHRyc1tpXS5zdGFydCA9IGFyZ3Muc3RhcnQgKyBhcmdzWzBdLm1hdGNoKC9eXHMqLykubGVuZ3RoOwogICAgICAgICAgYXR0cnNbaV0uZW5kID0gYXJncy5lbmQ7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoIXVuYXJ5KSB7CiAgICAgICAgc3RhY2sucHVzaCh7IHRhZzogdGFnTmFtZSwgbG93ZXJDYXNlZFRhZzogdGFnTmFtZS50b0xvd2VyQ2FzZSgpLCBhdHRyczogYXR0cnMsIHN0YXJ0OiBtYXRjaC5zdGFydCwgZW5kOiBtYXRjaC5lbmQgfSk7CiAgICAgICAgbGFzdFRhZyA9IHRhZ05hbWU7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnN0YXJ0KSB7CiAgICAgICAgb3B0aW9ucy5zdGFydCh0YWdOYW1lLCBhdHRycywgdW5hcnksIG1hdGNoLnN0YXJ0LCBtYXRjaC5lbmQpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcGFyc2VFbmRUYWcgKHRhZ05hbWUsIHN0YXJ0LCBlbmQpIHsKICAgICAgdmFyIHBvcywgbG93ZXJDYXNlZFRhZ05hbWU7CiAgICAgIGlmIChzdGFydCA9PSBudWxsKSB7IHN0YXJ0ID0gaW5kZXg7IH0KICAgICAgaWYgKGVuZCA9PSBudWxsKSB7IGVuZCA9IGluZGV4OyB9CgogICAgICAvLyBGaW5kIHRoZSBjbG9zZXN0IG9wZW5lZCB0YWcgb2YgdGhlIHNhbWUgdHlwZQogICAgICBpZiAodGFnTmFtZSkgewogICAgICAgIGxvd2VyQ2FzZWRUYWdOYW1lID0gdGFnTmFtZS50b0xvd2VyQ2FzZSgpOwogICAgICAgIGZvciAocG9zID0gc3RhY2subGVuZ3RoIC0gMTsgcG9zID49IDA7IHBvcy0tKSB7CiAgICAgICAgICBpZiAoc3RhY2tbcG9zXS5sb3dlckNhc2VkVGFnID09PSBsb3dlckNhc2VkVGFnTmFtZSkgewogICAgICAgICAgICBicmVhawogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBJZiBubyB0YWcgbmFtZSBpcyBwcm92aWRlZCwgY2xlYW4gc2hvcAogICAgICAgIHBvcyA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChwb3MgPj0gMCkgewogICAgICAgIC8vIENsb3NlIGFsbCB0aGUgb3BlbiBlbGVtZW50cywgdXAgdGhlIHN0YWNrCiAgICAgICAgZm9yICh2YXIgaSA9IHN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gcG9zOyBpLS0pIHsKICAgICAgICAgIGlmIChpID4gcG9zIHx8ICF0YWdOYW1lICYmCiAgICAgICAgICAgIG9wdGlvbnMud2FybgogICAgICAgICAgKSB7CiAgICAgICAgICAgIG9wdGlvbnMud2FybigKICAgICAgICAgICAgICAoInRhZyA8IiArIChzdGFja1tpXS50YWcpICsgIj4gaGFzIG5vIG1hdGNoaW5nIGVuZCB0YWcuIiksCiAgICAgICAgICAgICAgeyBzdGFydDogc3RhY2tbaV0uc3RhcnQsIGVuZDogc3RhY2tbaV0uZW5kIH0KICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChvcHRpb25zLmVuZCkgewogICAgICAgICAgICBvcHRpb25zLmVuZChzdGFja1tpXS50YWcsIHN0YXJ0LCBlbmQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gUmVtb3ZlIHRoZSBvcGVuIGVsZW1lbnRzIGZyb20gdGhlIHN0YWNrCiAgICAgICAgc3RhY2subGVuZ3RoID0gcG9zOwogICAgICAgIGxhc3RUYWcgPSBwb3MgJiYgc3RhY2tbcG9zIC0gMV0udGFnOwogICAgICB9IGVsc2UgaWYgKGxvd2VyQ2FzZWRUYWdOYW1lID09PSAnYnInKSB7CiAgICAgICAgaWYgKG9wdGlvbnMuc3RhcnQpIHsKICAgICAgICAgIG9wdGlvbnMuc3RhcnQodGFnTmFtZSwgW10sIHRydWUsIHN0YXJ0LCBlbmQpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChsb3dlckNhc2VkVGFnTmFtZSA9PT0gJ3AnKSB7CiAgICAgICAgaWYgKG9wdGlvbnMuc3RhcnQpIHsKICAgICAgICAgIG9wdGlvbnMuc3RhcnQodGFnTmFtZSwgW10sIGZhbHNlLCBzdGFydCwgZW5kKTsKICAgICAgICB9CiAgICAgICAgaWYgKG9wdGlvbnMuZW5kKSB7CiAgICAgICAgICBvcHRpb25zLmVuZCh0YWdOYW1lLCBzdGFydCwgZW5kKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIC8qICAqLwoKICB2YXIgb25SRSA9IC9eQHxedi1vbjovOwogIHZhciBkaXJSRSA9IC9edi18XkB8XjovOwogIHZhciBmb3JBbGlhc1JFID0gLyhbXHNcU10qPylccysoPzppbnxvZilccysoW1xzXFNdKikvOwogIHZhciBmb3JJdGVyYXRvclJFID0gLywoW14sXH1cXV0qKSg/OiwoW14sXH1cXV0qKSk/JC87CiAgdmFyIHN0cmlwUGFyZW5zUkUgPSAvXlwofFwpJC9nOwogIHZhciBkeW5hbWljQXJnUkUgPSAvXlxbLipcXSQvOwoKICB2YXIgYXJnUkUgPSAvOiguKikkLzsKICB2YXIgYmluZFJFID0gL146fF5cLnxedi1iaW5kOi87CiAgdmFyIG1vZGlmaWVyUkUgPSAvXC5bXi5cXV0rKD89W15cXV0qJCkvZzsKCiAgdmFyIHNsb3RSRSA9IC9edi1zbG90KDp8JCl8XiMvOwoKICB2YXIgbGluZUJyZWFrUkUgPSAvW1xyXG5dLzsKICB2YXIgd2hpdGVzcGFjZVJFJDEgPSAvXHMrL2c7CgogIHZhciBpbnZhbGlkQXR0cmlidXRlUkUgPSAvW1xzIic8PlwvPV0vOwoKICB2YXIgZGVjb2RlSFRNTENhY2hlZCA9IGNhY2hlZChoZS5kZWNvZGUpOwoKICB2YXIgZW1wdHlTbG90U2NvcGVUb2tlbiA9ICJfZW1wdHlfIjsKCiAgLy8gY29uZmlndXJhYmxlIHN0YXRlCiAgdmFyIHdhcm4kMjsKICB2YXIgZGVsaW1pdGVyczsKICB2YXIgdHJhbnNmb3JtczsKICB2YXIgcHJlVHJhbnNmb3JtczsKICB2YXIgcG9zdFRyYW5zZm9ybXM7CiAgdmFyIHBsYXRmb3JtSXNQcmVUYWc7CiAgdmFyIHBsYXRmb3JtTXVzdFVzZVByb3A7CiAgdmFyIHBsYXRmb3JtR2V0VGFnTmFtZXNwYWNlOwogIHZhciBtYXliZUNvbXBvbmVudDsKCiAgZnVuY3Rpb24gY3JlYXRlQVNURWxlbWVudCAoCiAgICB0YWcsCiAgICBhdHRycywKICAgIHBhcmVudAogICkgewogICAgcmV0dXJuIHsKICAgICAgdHlwZTogMSwKICAgICAgdGFnOiB0YWcsCiAgICAgIGF0dHJzTGlzdDogYXR0cnMsCiAgICAgIGF0dHJzTWFwOiBtYWtlQXR0cnNNYXAoYXR0cnMpLAogICAgICByYXdBdHRyc01hcDoge30sCiAgICAgIHBhcmVudDogcGFyZW50LAogICAgICBjaGlsZHJlbjogW10KICAgIH0KICB9CgogIC8qKgogICAqIENvbnZlcnQgSFRNTCBzdHJpbmcgdG8gQVNULgogICAqLwogIGZ1bmN0aW9uIHBhcnNlICgKICAgIHRlbXBsYXRlLAogICAgb3B0aW9ucwogICkgewogICAgd2FybiQyID0gb3B0aW9ucy53YXJuIHx8IGJhc2VXYXJuOwoKICAgIHBsYXRmb3JtSXNQcmVUYWcgPSBvcHRpb25zLmlzUHJlVGFnIHx8IG5vOwogICAgcGxhdGZvcm1NdXN0VXNlUHJvcCA9IG9wdGlvbnMubXVzdFVzZVByb3AgfHwgbm87CiAgICBwbGF0Zm9ybUdldFRhZ05hbWVzcGFjZSA9IG9wdGlvbnMuZ2V0VGFnTmFtZXNwYWNlIHx8IG5vOwogICAgdmFyIGlzUmVzZXJ2ZWRUYWcgPSBvcHRpb25zLmlzUmVzZXJ2ZWRUYWcgfHwgbm87CiAgICBtYXliZUNvbXBvbmVudCA9IGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gISFlbC5jb21wb25lbnQgfHwgIWlzUmVzZXJ2ZWRUYWcoZWwudGFnKTsgfTsKCiAgICB0cmFuc2Zvcm1zID0gcGx1Y2tNb2R1bGVGdW5jdGlvbihvcHRpb25zLm1vZHVsZXMsICd0cmFuc2Zvcm1Ob2RlJyk7CiAgICBwcmVUcmFuc2Zvcm1zID0gcGx1Y2tNb2R1bGVGdW5jdGlvbihvcHRpb25zLm1vZHVsZXMsICdwcmVUcmFuc2Zvcm1Ob2RlJyk7CiAgICBwb3N0VHJhbnNmb3JtcyA9IHBsdWNrTW9kdWxlRnVuY3Rpb24ob3B0aW9ucy5tb2R1bGVzLCAncG9zdFRyYW5zZm9ybU5vZGUnKTsKCiAgICBkZWxpbWl0ZXJzID0gb3B0aW9ucy5kZWxpbWl0ZXJzOwoKICAgIHZhciBzdGFjayA9IFtdOwogICAgdmFyIHByZXNlcnZlV2hpdGVzcGFjZSA9IG9wdGlvbnMucHJlc2VydmVXaGl0ZXNwYWNlICE9PSBmYWxzZTsKICAgIHZhciB3aGl0ZXNwYWNlT3B0aW9uID0gb3B0aW9ucy53aGl0ZXNwYWNlOwogICAgdmFyIHJvb3Q7CiAgICB2YXIgY3VycmVudFBhcmVudDsKICAgIHZhciBpblZQcmUgPSBmYWxzZTsKICAgIHZhciBpblByZSA9IGZhbHNlOwogICAgdmFyIHdhcm5lZCA9IGZhbHNlOwoKICAgIGZ1bmN0aW9uIHdhcm5PbmNlIChtc2csIHJhbmdlKSB7CiAgICAgIGlmICghd2FybmVkKSB7CiAgICAgICAgd2FybmVkID0gdHJ1ZTsKICAgICAgICB3YXJuJDIobXNnLCByYW5nZSk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjbG9zZUVsZW1lbnQgKGVsZW1lbnQpIHsKICAgICAgdHJpbUVuZGluZ1doaXRlc3BhY2UoZWxlbWVudCk7CiAgICAgIGlmICghaW5WUHJlICYmICFlbGVtZW50LnByb2Nlc3NlZCkgewogICAgICAgIGVsZW1lbnQgPSBwcm9jZXNzRWxlbWVudChlbGVtZW50LCBvcHRpb25zKTsKICAgICAgfQogICAgICAvLyB0cmVlIG1hbmFnZW1lbnQKICAgICAgaWYgKCFzdGFjay5sZW5ndGggJiYgZWxlbWVudCAhPT0gcm9vdCkgewogICAgICAgIC8vIGFsbG93IHJvb3QgZWxlbWVudHMgd2l0aCB2LWlmLCB2LWVsc2UtaWYgYW5kIHYtZWxzZQogICAgICAgIGlmIChyb290LmlmICYmIChlbGVtZW50LmVsc2VpZiB8fCBlbGVtZW50LmVsc2UpKSB7CiAgICAgICAgICB7CiAgICAgICAgICAgIGNoZWNrUm9vdENvbnN0cmFpbnRzKGVsZW1lbnQpOwogICAgICAgICAgfQogICAgICAgICAgYWRkSWZDb25kaXRpb24ocm9vdCwgewogICAgICAgICAgICBleHA6IGVsZW1lbnQuZWxzZWlmLAogICAgICAgICAgICBibG9jazogZWxlbWVudAogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHdhcm5PbmNlKAogICAgICAgICAgICAiQ29tcG9uZW50IHRlbXBsYXRlIHNob3VsZCBjb250YWluIGV4YWN0bHkgb25lIHJvb3QgZWxlbWVudC4gIiArCiAgICAgICAgICAgICJJZiB5b3UgYXJlIHVzaW5nIHYtaWYgb24gbXVsdGlwbGUgZWxlbWVudHMsICIgKwogICAgICAgICAgICAidXNlIHYtZWxzZS1pZiB0byBjaGFpbiB0aGVtIGluc3RlYWQuIiwKICAgICAgICAgICAgeyBzdGFydDogZWxlbWVudC5zdGFydCB9CiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoY3VycmVudFBhcmVudCAmJiAhZWxlbWVudC5mb3JiaWRkZW4pIHsKICAgICAgICBpZiAoZWxlbWVudC5lbHNlaWYgfHwgZWxlbWVudC5lbHNlKSB7CiAgICAgICAgICBwcm9jZXNzSWZDb25kaXRpb25zKGVsZW1lbnQsIGN1cnJlbnRQYXJlbnQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoZWxlbWVudC5zbG90U2NvcGUpIHsKICAgICAgICAgICAgLy8gc2NvcGVkIHNsb3QKICAgICAgICAgICAgLy8ga2VlcCBpdCBpbiB0aGUgY2hpbGRyZW4gbGlzdCBzbyB0aGF0IHYtZWxzZSgtaWYpIGNvbmRpdGlvbnMgY2FuCiAgICAgICAgICAgIC8vIGZpbmQgaXQgYXMgdGhlIHByZXYgbm9kZS4KICAgICAgICAgICAgdmFyIG5hbWUgPSBlbGVtZW50LnNsb3RUYXJnZXQgfHwgJyJkZWZhdWx0IicKICAgICAgICAgICAgOyhjdXJyZW50UGFyZW50LnNjb3BlZFNsb3RzIHx8IChjdXJyZW50UGFyZW50LnNjb3BlZFNsb3RzID0ge30pKVtuYW1lXSA9IGVsZW1lbnQ7CiAgICAgICAgICB9CiAgICAgICAgICBjdXJyZW50UGFyZW50LmNoaWxkcmVuLnB1c2goZWxlbWVudCk7CiAgICAgICAgICBlbGVtZW50LnBhcmVudCA9IGN1cnJlbnRQYXJlbnQ7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBmaW5hbCBjaGlsZHJlbiBjbGVhbnVwCiAgICAgIC8vIGZpbHRlciBvdXQgc2NvcGVkIHNsb3RzCiAgICAgIGVsZW1lbnQuY2hpbGRyZW4gPSBlbGVtZW50LmNoaWxkcmVuLmZpbHRlcihmdW5jdGlvbiAoYykgeyByZXR1cm4gIShjKS5zbG90U2NvcGU7IH0pOwogICAgICAvLyByZW1vdmUgdHJhaWxpbmcgd2hpdGVzcGFjZSBub2RlIGFnYWluCiAgICAgIHRyaW1FbmRpbmdXaGl0ZXNwYWNlKGVsZW1lbnQpOwoKICAgICAgLy8gY2hlY2sgcHJlIHN0YXRlCiAgICAgIGlmIChlbGVtZW50LnByZSkgewogICAgICAgIGluVlByZSA9IGZhbHNlOwogICAgICB9CiAgICAgIGlmIChwbGF0Zm9ybUlzUHJlVGFnKGVsZW1lbnQudGFnKSkgewogICAgICAgIGluUHJlID0gZmFsc2U7CiAgICAgIH0KICAgICAgLy8gYXBwbHkgcG9zdC10cmFuc2Zvcm1zCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zdFRyYW5zZm9ybXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBwb3N0VHJhbnNmb3Jtc1tpXShlbGVtZW50LCBvcHRpb25zKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRyaW1FbmRpbmdXaGl0ZXNwYWNlIChlbCkgewogICAgICAvLyByZW1vdmUgdHJhaWxpbmcgd2hpdGVzcGFjZSBub2RlCiAgICAgIGlmICghaW5QcmUpIHsKICAgICAgICB2YXIgbGFzdE5vZGU7CiAgICAgICAgd2hpbGUgKAogICAgICAgICAgKGxhc3ROb2RlID0gZWwuY2hpbGRyZW5bZWwuY2hpbGRyZW4ubGVuZ3RoIC0gMV0pICYmCiAgICAgICAgICBsYXN0Tm9kZS50eXBlID09PSAzICYmCiAgICAgICAgICBsYXN0Tm9kZS50ZXh0ID09PSAnICcKICAgICAgICApIHsKICAgICAgICAgIGVsLmNoaWxkcmVuLnBvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNoZWNrUm9vdENvbnN0cmFpbnRzIChlbCkgewogICAgICBpZiAoZWwudGFnID09PSAnc2xvdCcgfHwgZWwudGFnID09PSAndGVtcGxhdGUnKSB7CiAgICAgICAgd2Fybk9uY2UoCiAgICAgICAgICAiQ2Fubm90IHVzZSA8IiArIChlbC50YWcpICsgIj4gYXMgY29tcG9uZW50IHJvb3QgZWxlbWVudCBiZWNhdXNlIGl0IG1heSAiICsKICAgICAgICAgICdjb250YWluIG11bHRpcGxlIG5vZGVzLicsCiAgICAgICAgICB7IHN0YXJ0OiBlbC5zdGFydCB9CiAgICAgICAgKTsKICAgICAgfQogICAgICBpZiAoZWwuYXR0cnNNYXAuaGFzT3duUHJvcGVydHkoJ3YtZm9yJykpIHsKICAgICAgICB3YXJuT25jZSgKICAgICAgICAgICdDYW5ub3QgdXNlIHYtZm9yIG9uIHN0YXRlZnVsIGNvbXBvbmVudCByb290IGVsZW1lbnQgYmVjYXVzZSAnICsKICAgICAgICAgICdpdCByZW5kZXJzIG11bHRpcGxlIGVsZW1lbnRzLicsCiAgICAgICAgICBlbC5yYXdBdHRyc01hcFsndi1mb3InXQogICAgICAgICk7CiAgICAgIH0KICAgIH0KCiAgICBwYXJzZUhUTUwodGVtcGxhdGUsIHsKICAgICAgd2Fybjogd2FybiQyLAogICAgICBleHBlY3RIVE1MOiBvcHRpb25zLmV4cGVjdEhUTUwsCiAgICAgIGlzVW5hcnlUYWc6IG9wdGlvbnMuaXNVbmFyeVRhZywKICAgICAgY2FuQmVMZWZ0T3BlblRhZzogb3B0aW9ucy5jYW5CZUxlZnRPcGVuVGFnLAogICAgICBzaG91bGREZWNvZGVOZXdsaW5lczogb3B0aW9ucy5zaG91bGREZWNvZGVOZXdsaW5lcywKICAgICAgc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmOiBvcHRpb25zLnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZiwKICAgICAgc2hvdWxkS2VlcENvbW1lbnQ6IG9wdGlvbnMuY29tbWVudHMsCiAgICAgIG91dHB1dFNvdXJjZVJhbmdlOiBvcHRpb25zLm91dHB1dFNvdXJjZVJhbmdlLAogICAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQgKHRhZywgYXR0cnMsIHVuYXJ5LCBzdGFydCQxLCBlbmQpIHsKICAgICAgICAvLyBjaGVjayBuYW1lc3BhY2UuCiAgICAgICAgLy8gaW5oZXJpdCBwYXJlbnQgbnMgaWYgdGhlcmUgaXMgb25lCiAgICAgICAgdmFyIG5zID0gKGN1cnJlbnRQYXJlbnQgJiYgY3VycmVudFBhcmVudC5ucykgfHwgcGxhdGZvcm1HZXRUYWdOYW1lc3BhY2UodGFnKTsKCiAgICAgICAgLy8gaGFuZGxlIElFIHN2ZyBidWcKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgICBpZiAoaXNJRSAmJiBucyA9PT0gJ3N2ZycpIHsKICAgICAgICAgIGF0dHJzID0gZ3VhcmRJRVNWR0J1ZyhhdHRycyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgZWxlbWVudCA9IGNyZWF0ZUFTVEVsZW1lbnQodGFnLCBhdHRycywgY3VycmVudFBhcmVudCk7CiAgICAgICAgaWYgKG5zKSB7CiAgICAgICAgICBlbGVtZW50Lm5zID0gbnM7CiAgICAgICAgfQoKICAgICAgICB7CiAgICAgICAgICBpZiAob3B0aW9ucy5vdXRwdXRTb3VyY2VSYW5nZSkgewogICAgICAgICAgICBlbGVtZW50LnN0YXJ0ID0gc3RhcnQkMTsKICAgICAgICAgICAgZWxlbWVudC5lbmQgPSBlbmQ7CiAgICAgICAgICAgIGVsZW1lbnQucmF3QXR0cnNNYXAgPSBlbGVtZW50LmF0dHJzTGlzdC5yZWR1Y2UoZnVuY3Rpb24gKGN1bXVsYXRlZCwgYXR0cikgewogICAgICAgICAgICAgIGN1bXVsYXRlZFthdHRyLm5hbWVdID0gYXR0cjsKICAgICAgICAgICAgICByZXR1cm4gY3VtdWxhdGVkCiAgICAgICAgICAgIH0sIHt9KTsKICAgICAgICAgIH0KICAgICAgICAgIGF0dHJzLmZvckVhY2goZnVuY3Rpb24gKGF0dHIpIHsKICAgICAgICAgICAgaWYgKGludmFsaWRBdHRyaWJ1dGVSRS50ZXN0KGF0dHIubmFtZSkpIHsKICAgICAgICAgICAgICB3YXJuJDIoCiAgICAgICAgICAgICAgICAiSW52YWxpZCBkeW5hbWljIGFyZ3VtZW50IGV4cHJlc3Npb246IGF0dHJpYnV0ZSBuYW1lcyBjYW5ub3QgY29udGFpbiAiICsKICAgICAgICAgICAgICAgICJzcGFjZXMsIHF1b3RlcywgPCwgPiwgLyBvciA9LiIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHN0YXJ0OiBhdHRyLnN0YXJ0ICsgYXR0ci5uYW1lLmluZGV4T2YoIlsiKSwKICAgICAgICAgICAgICAgICAgZW5kOiBhdHRyLnN0YXJ0ICsgYXR0ci5uYW1lLmxlbmd0aAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKGlzRm9yYmlkZGVuVGFnKGVsZW1lbnQpICYmICFpc1NlcnZlclJlbmRlcmluZygpKSB7CiAgICAgICAgICBlbGVtZW50LmZvcmJpZGRlbiA9IHRydWU7CiAgICAgICAgICB3YXJuJDIoCiAgICAgICAgICAgICdUZW1wbGF0ZXMgc2hvdWxkIG9ubHkgYmUgcmVzcG9uc2libGUgZm9yIG1hcHBpbmcgdGhlIHN0YXRlIHRvIHRoZSAnICsKICAgICAgICAgICAgJ1VJLiBBdm9pZCBwbGFjaW5nIHRhZ3Mgd2l0aCBzaWRlLWVmZmVjdHMgaW4geW91ciB0ZW1wbGF0ZXMsIHN1Y2ggYXMgJyArCiAgICAgICAgICAgICI8IiArIHRhZyArICI+IiArICcsIGFzIHRoZXkgd2lsbCBub3QgYmUgcGFyc2VkLicsCiAgICAgICAgICAgIHsgc3RhcnQ6IGVsZW1lbnQuc3RhcnQgfQogICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIC8vIGFwcGx5IHByZS10cmFuc2Zvcm1zCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmVUcmFuc2Zvcm1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBlbGVtZW50ID0gcHJlVHJhbnNmb3Jtc1tpXShlbGVtZW50LCBvcHRpb25zKSB8fCBlbGVtZW50OwogICAgICAgIH0KCiAgICAgICAgaWYgKCFpblZQcmUpIHsKICAgICAgICAgIHByb2Nlc3NQcmUoZWxlbWVudCk7CiAgICAgICAgICBpZiAoZWxlbWVudC5wcmUpIHsKICAgICAgICAgICAgaW5WUHJlID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHBsYXRmb3JtSXNQcmVUYWcoZWxlbWVudC50YWcpKSB7CiAgICAgICAgICBpblByZSA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGlmIChpblZQcmUpIHsKICAgICAgICAgIHByb2Nlc3NSYXdBdHRycyhlbGVtZW50KTsKICAgICAgICB9IGVsc2UgaWYgKCFlbGVtZW50LnByb2Nlc3NlZCkgewogICAgICAgICAgLy8gc3RydWN0dXJhbCBkaXJlY3RpdmVzCiAgICAgICAgICBwcm9jZXNzRm9yKGVsZW1lbnQpOwogICAgICAgICAgcHJvY2Vzc0lmKGVsZW1lbnQpOwogICAgICAgICAgcHJvY2Vzc09uY2UoZWxlbWVudCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIXJvb3QpIHsKICAgICAgICAgIHJvb3QgPSBlbGVtZW50OwogICAgICAgICAgewogICAgICAgICAgICBjaGVja1Jvb3RDb25zdHJhaW50cyhyb290KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICghdW5hcnkpIHsKICAgICAgICAgIGN1cnJlbnRQYXJlbnQgPSBlbGVtZW50OwogICAgICAgICAgc3RhY2sucHVzaChlbGVtZW50KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2xvc2VFbGVtZW50KGVsZW1lbnQpOwogICAgICAgIH0KICAgICAgfSwKCiAgICAgIGVuZDogZnVuY3Rpb24gZW5kICh0YWcsIHN0YXJ0LCBlbmQkMSkgewogICAgICAgIHZhciBlbGVtZW50ID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07CiAgICAgICAgLy8gcG9wIHN0YWNrCiAgICAgICAgc3RhY2subGVuZ3RoIC09IDE7CiAgICAgICAgY3VycmVudFBhcmVudCA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdOwogICAgICAgIGlmIChvcHRpb25zLm91dHB1dFNvdXJjZVJhbmdlKSB7CiAgICAgICAgICBlbGVtZW50LmVuZCA9IGVuZCQxOwogICAgICAgIH0KICAgICAgICBjbG9zZUVsZW1lbnQoZWxlbWVudCk7CiAgICAgIH0sCgogICAgICBjaGFyczogZnVuY3Rpb24gY2hhcnMgKHRleHQsIHN0YXJ0LCBlbmQpIHsKICAgICAgICBpZiAoIWN1cnJlbnRQYXJlbnQpIHsKICAgICAgICAgIHsKICAgICAgICAgICAgaWYgKHRleHQgPT09IHRlbXBsYXRlKSB7CiAgICAgICAgICAgICAgd2Fybk9uY2UoCiAgICAgICAgICAgICAgICAnQ29tcG9uZW50IHRlbXBsYXRlIHJlcXVpcmVzIGEgcm9vdCBlbGVtZW50LCByYXRoZXIgdGhhbiBqdXN0IHRleHQuJywKICAgICAgICAgICAgICAgIHsgc3RhcnQ6IHN0YXJ0IH0KICAgICAgICAgICAgICApOwogICAgICAgICAgICB9IGVsc2UgaWYgKCh0ZXh0ID0gdGV4dC50cmltKCkpKSB7CiAgICAgICAgICAgICAgd2Fybk9uY2UoCiAgICAgICAgICAgICAgICAoInRleHQgXCIiICsgdGV4dCArICJcIiBvdXRzaWRlIHJvb3QgZWxlbWVudCB3aWxsIGJlIGlnbm9yZWQuIiksCiAgICAgICAgICAgICAgICB7IHN0YXJ0OiBzdGFydCB9CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIC8vIElFIHRleHRhcmVhIHBsYWNlaG9sZGVyIGJ1ZwogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICAgIGlmIChpc0lFICYmCiAgICAgICAgICBjdXJyZW50UGFyZW50LnRhZyA9PT0gJ3RleHRhcmVhJyAmJgogICAgICAgICAgY3VycmVudFBhcmVudC5hdHRyc01hcC5wbGFjZWhvbGRlciA9PT0gdGV4dAogICAgICAgICkgewogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIHZhciBjaGlsZHJlbiA9IGN1cnJlbnRQYXJlbnQuY2hpbGRyZW47CiAgICAgICAgaWYgKGluUHJlIHx8IHRleHQudHJpbSgpKSB7CiAgICAgICAgICB0ZXh0ID0gaXNUZXh0VGFnKGN1cnJlbnRQYXJlbnQpID8gdGV4dCA6IGRlY29kZUhUTUxDYWNoZWQodGV4dCk7CiAgICAgICAgfSBlbHNlIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgICAvLyByZW1vdmUgdGhlIHdoaXRlc3BhY2Utb25seSBub2RlIHJpZ2h0IGFmdGVyIGFuIG9wZW5pbmcgdGFnCiAgICAgICAgICB0ZXh0ID0gJyc7CiAgICAgICAgfSBlbHNlIGlmICh3aGl0ZXNwYWNlT3B0aW9uKSB7CiAgICAgICAgICBpZiAod2hpdGVzcGFjZU9wdGlvbiA9PT0gJ2NvbmRlbnNlJykgewogICAgICAgICAgICAvLyBpbiBjb25kZW5zZSBtb2RlLCByZW1vdmUgdGhlIHdoaXRlc3BhY2Ugbm9kZSBpZiBpdCBjb250YWlucwogICAgICAgICAgICAvLyBsaW5lIGJyZWFrLCBvdGhlcndpc2UgY29uZGVuc2UgdG8gYSBzaW5nbGUgc3BhY2UKICAgICAgICAgICAgdGV4dCA9IGxpbmVCcmVha1JFLnRlc3QodGV4dCkgPyAnJyA6ICcgJzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRleHQgPSAnICc7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRleHQgPSBwcmVzZXJ2ZVdoaXRlc3BhY2UgPyAnICcgOiAnJzsKICAgICAgICB9CiAgICAgICAgaWYgKHRleHQpIHsKICAgICAgICAgIGlmICghaW5QcmUgJiYgd2hpdGVzcGFjZU9wdGlvbiA9PT0gJ2NvbmRlbnNlJykgewogICAgICAgICAgICAvLyBjb25kZW5zZSBjb25zZWN1dGl2ZSB3aGl0ZXNwYWNlcyBpbnRvIHNpbmdsZSBzcGFjZQogICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKHdoaXRlc3BhY2VSRSQxLCAnICcpOwogICAgICAgICAgfQogICAgICAgICAgdmFyIHJlczsKICAgICAgICAgIHZhciBjaGlsZDsKICAgICAgICAgIGlmICghaW5WUHJlICYmIHRleHQgIT09ICcgJyAmJiAocmVzID0gcGFyc2VUZXh0KHRleHQsIGRlbGltaXRlcnMpKSkgewogICAgICAgICAgICBjaGlsZCA9IHsKICAgICAgICAgICAgICB0eXBlOiAyLAogICAgICAgICAgICAgIGV4cHJlc3Npb246IHJlcy5leHByZXNzaW9uLAogICAgICAgICAgICAgIHRva2VuczogcmVzLnRva2VucywKICAgICAgICAgICAgICB0ZXh0OiB0ZXh0CiAgICAgICAgICAgIH07CiAgICAgICAgICB9IGVsc2UgaWYgKHRleHQgIT09ICcgJyB8fCAhY2hpbGRyZW4ubGVuZ3RoIHx8IGNoaWxkcmVuW2NoaWxkcmVuLmxlbmd0aCAtIDFdLnRleHQgIT09ICcgJykgewogICAgICAgICAgICBjaGlsZCA9IHsKICAgICAgICAgICAgICB0eXBlOiAzLAogICAgICAgICAgICAgIHRleHQ6IHRleHQKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjaGlsZCkgewogICAgICAgICAgICBpZiAob3B0aW9ucy5vdXRwdXRTb3VyY2VSYW5nZSkgewogICAgICAgICAgICAgIGNoaWxkLnN0YXJ0ID0gc3RhcnQ7CiAgICAgICAgICAgICAgY2hpbGQuZW5kID0gZW5kOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goY2hpbGQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgY29tbWVudDogZnVuY3Rpb24gY29tbWVudCAodGV4dCwgc3RhcnQsIGVuZCkgewogICAgICAgIC8vIGFkZGluZyBhbnl0aW5nIGFzIGEgc2libGluZyB0byB0aGUgcm9vdCBub2RlIGlzIGZvcmJpZGRlbgogICAgICAgIC8vIGNvbW1lbnRzIHNob3VsZCBzdGlsbCBiZSBhbGxvd2VkLCBidXQgaWdub3JlZAogICAgICAgIGlmIChjdXJyZW50UGFyZW50KSB7CiAgICAgICAgICB2YXIgY2hpbGQgPSB7CiAgICAgICAgICAgIHR5cGU6IDMsCiAgICAgICAgICAgIHRleHQ6IHRleHQsCiAgICAgICAgICAgIGlzQ29tbWVudDogdHJ1ZQogICAgICAgICAgfTsKICAgICAgICAgIGlmIChvcHRpb25zLm91dHB1dFNvdXJjZVJhbmdlKSB7CiAgICAgICAgICAgIGNoaWxkLnN0YXJ0ID0gc3RhcnQ7CiAgICAgICAgICAgIGNoaWxkLmVuZCA9IGVuZDsKICAgICAgICAgIH0KICAgICAgICAgIGN1cnJlbnRQYXJlbnQuY2hpbGRyZW4ucHVzaChjaGlsZCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIHJldHVybiByb290CiAgfQoKICBmdW5jdGlvbiBwcm9jZXNzUHJlIChlbCkgewogICAgaWYgKGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LXByZScpICE9IG51bGwpIHsKICAgICAgZWwucHJlID0gdHJ1ZTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHByb2Nlc3NSYXdBdHRycyAoZWwpIHsKICAgIHZhciBsaXN0ID0gZWwuYXR0cnNMaXN0OwogICAgdmFyIGxlbiA9IGxpc3QubGVuZ3RoOwogICAgaWYgKGxlbikgewogICAgICB2YXIgYXR0cnMgPSBlbC5hdHRycyA9IG5ldyBBcnJheShsZW4pOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgYXR0cnNbaV0gPSB7CiAgICAgICAgICBuYW1lOiBsaXN0W2ldLm5hbWUsCiAgICAgICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkobGlzdFtpXS52YWx1ZSkKICAgICAgICB9OwogICAgICAgIGlmIChsaXN0W2ldLnN0YXJ0ICE9IG51bGwpIHsKICAgICAgICAgIGF0dHJzW2ldLnN0YXJ0ID0gbGlzdFtpXS5zdGFydDsKICAgICAgICAgIGF0dHJzW2ldLmVuZCA9IGxpc3RbaV0uZW5kOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIGlmICghZWwucHJlKSB7CiAgICAgIC8vIG5vbiByb290IG5vZGUgaW4gcHJlIGJsb2NrcyB3aXRoIG5vIGF0dHJpYnV0ZXMKICAgICAgZWwucGxhaW4gPSB0cnVlOwogICAgfQogIH0KCiAgZnVuY3Rpb24gcHJvY2Vzc0VsZW1lbnQgKAogICAgZWxlbWVudCwKICAgIG9wdGlvbnMKICApIHsKICAgIHByb2Nlc3NLZXkoZWxlbWVudCk7CgogICAgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhpcyBpcyBhIHBsYWluIGVsZW1lbnQgYWZ0ZXIKICAgIC8vIHJlbW92aW5nIHN0cnVjdHVyYWwgYXR0cmlidXRlcwogICAgZWxlbWVudC5wbGFpbiA9ICgKICAgICAgIWVsZW1lbnQua2V5ICYmCiAgICAgICFlbGVtZW50LnNjb3BlZFNsb3RzICYmCiAgICAgICFlbGVtZW50LmF0dHJzTGlzdC5sZW5ndGgKICAgICk7CgogICAgcHJvY2Vzc1JlZihlbGVtZW50KTsKICAgIHByb2Nlc3NTbG90Q29udGVudChlbGVtZW50KTsKICAgIHByb2Nlc3NTbG90T3V0bGV0KGVsZW1lbnQpOwogICAgcHJvY2Vzc0NvbXBvbmVudChlbGVtZW50KTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhbnNmb3Jtcy5sZW5ndGg7IGkrKykgewogICAgICBlbGVtZW50ID0gdHJhbnNmb3Jtc1tpXShlbGVtZW50LCBvcHRpb25zKSB8fCBlbGVtZW50OwogICAgfQogICAgcHJvY2Vzc0F0dHJzKGVsZW1lbnQpOwogICAgcmV0dXJuIGVsZW1lbnQKICB9CgogIGZ1bmN0aW9uIHByb2Nlc3NLZXkgKGVsKSB7CiAgICB2YXIgZXhwID0gZ2V0QmluZGluZ0F0dHIoZWwsICdrZXknKTsKICAgIGlmIChleHApIHsKICAgICAgewogICAgICAgIGlmIChlbC50YWcgPT09ICd0ZW1wbGF0ZScpIHsKICAgICAgICAgIHdhcm4kMigKICAgICAgICAgICAgIjx0ZW1wbGF0ZT4gY2Fubm90IGJlIGtleWVkLiBQbGFjZSB0aGUga2V5IG9uIHJlYWwgZWxlbWVudHMgaW5zdGVhZC4iLAogICAgICAgICAgICBnZXRSYXdCaW5kaW5nQXR0cihlbCwgJ2tleScpCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBpZiAoZWwuZm9yKSB7CiAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBlbC5pdGVyYXRvcjIgfHwgZWwuaXRlcmF0b3IxOwogICAgICAgICAgdmFyIHBhcmVudCA9IGVsLnBhcmVudDsKICAgICAgICAgIGlmIChpdGVyYXRvciAmJiBpdGVyYXRvciA9PT0gZXhwICYmIHBhcmVudCAmJiBwYXJlbnQudGFnID09PSAndHJhbnNpdGlvbi1ncm91cCcpIHsKICAgICAgICAgICAgd2FybiQyKAogICAgICAgICAgICAgICJEbyBub3QgdXNlIHYtZm9yIGluZGV4IGFzIGtleSBvbiA8dHJhbnNpdGlvbi1ncm91cD4gY2hpbGRyZW4sICIgKwogICAgICAgICAgICAgICJ0aGlzIGlzIHRoZSBzYW1lIGFzIG5vdCB1c2luZyBrZXlzLiIsCiAgICAgICAgICAgICAgZ2V0UmF3QmluZGluZ0F0dHIoZWwsICdrZXknKSwKICAgICAgICAgICAgICB0cnVlIC8qIHRpcCAqLwogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBlbC5rZXkgPSBleHA7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwcm9jZXNzUmVmIChlbCkgewogICAgdmFyIHJlZiA9IGdldEJpbmRpbmdBdHRyKGVsLCAncmVmJyk7CiAgICBpZiAocmVmKSB7CiAgICAgIGVsLnJlZiA9IHJlZjsKICAgICAgZWwucmVmSW5Gb3IgPSBjaGVja0luRm9yKGVsKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHByb2Nlc3NGb3IgKGVsKSB7CiAgICB2YXIgZXhwOwogICAgaWYgKChleHAgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1mb3InKSkpIHsKICAgICAgdmFyIHJlcyA9IHBhcnNlRm9yKGV4cCk7CiAgICAgIGlmIChyZXMpIHsKICAgICAgICBleHRlbmQoZWwsIHJlcyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgd2FybiQyKAogICAgICAgICAgKCJJbnZhbGlkIHYtZm9yIGV4cHJlc3Npb246ICIgKyBleHApLAogICAgICAgICAgZWwucmF3QXR0cnNNYXBbJ3YtZm9yJ10KICAgICAgICApOwogICAgICB9CiAgICB9CiAgfQoKCgogIGZ1bmN0aW9uIHBhcnNlRm9yIChleHApIHsKICAgIHZhciBpbk1hdGNoID0gZXhwLm1hdGNoKGZvckFsaWFzUkUpOwogICAgaWYgKCFpbk1hdGNoKSB7IHJldHVybiB9CiAgICB2YXIgcmVzID0ge307CiAgICByZXMuZm9yID0gaW5NYXRjaFsyXS50cmltKCk7CiAgICB2YXIgYWxpYXMgPSBpbk1hdGNoWzFdLnRyaW0oKS5yZXBsYWNlKHN0cmlwUGFyZW5zUkUsICcnKTsKICAgIHZhciBpdGVyYXRvck1hdGNoID0gYWxpYXMubWF0Y2goZm9ySXRlcmF0b3JSRSk7CiAgICBpZiAoaXRlcmF0b3JNYXRjaCkgewogICAgICByZXMuYWxpYXMgPSBhbGlhcy5yZXBsYWNlKGZvckl0ZXJhdG9yUkUsICcnKS50cmltKCk7CiAgICAgIHJlcy5pdGVyYXRvcjEgPSBpdGVyYXRvck1hdGNoWzFdLnRyaW0oKTsKICAgICAgaWYgKGl0ZXJhdG9yTWF0Y2hbMl0pIHsKICAgICAgICByZXMuaXRlcmF0b3IyID0gaXRlcmF0b3JNYXRjaFsyXS50cmltKCk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHJlcy5hbGlhcyA9IGFsaWFzOwogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgZnVuY3Rpb24gcHJvY2Vzc0lmIChlbCkgewogICAgdmFyIGV4cCA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LWlmJyk7CiAgICBpZiAoZXhwKSB7CiAgICAgIGVsLmlmID0gZXhwOwogICAgICBhZGRJZkNvbmRpdGlvbihlbCwgewogICAgICAgIGV4cDogZXhwLAogICAgICAgIGJsb2NrOiBlbAogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1lbHNlJykgIT0gbnVsbCkgewogICAgICAgIGVsLmVsc2UgPSB0cnVlOwogICAgICB9CiAgICAgIHZhciBlbHNlaWYgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1lbHNlLWlmJyk7CiAgICAgIGlmIChlbHNlaWYpIHsKICAgICAgICBlbC5lbHNlaWYgPSBlbHNlaWY7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIHByb2Nlc3NJZkNvbmRpdGlvbnMgKGVsLCBwYXJlbnQpIHsKICAgIHZhciBwcmV2ID0gZmluZFByZXZFbGVtZW50KHBhcmVudC5jaGlsZHJlbik7CiAgICBpZiAocHJldiAmJiBwcmV2LmlmKSB7CiAgICAgIGFkZElmQ29uZGl0aW9uKHByZXYsIHsKICAgICAgICBleHA6IGVsLmVsc2VpZiwKICAgICAgICBibG9jazogZWwKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICB3YXJuJDIoCiAgICAgICAgInYtIiArIChlbC5lbHNlaWYgPyAoJ2Vsc2UtaWY9IicgKyBlbC5lbHNlaWYgKyAnIicpIDogJ2Vsc2UnKSArICIgIiArCiAgICAgICAgInVzZWQgb24gZWxlbWVudCA8IiArIChlbC50YWcpICsgIj4gd2l0aG91dCBjb3JyZXNwb25kaW5nIHYtaWYuIiwKICAgICAgICBlbC5yYXdBdHRyc01hcFtlbC5lbHNlaWYgPyAndi1lbHNlLWlmJyA6ICd2LWVsc2UnXQogICAgICApOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZmluZFByZXZFbGVtZW50IChjaGlsZHJlbikgewogICAgdmFyIGkgPSBjaGlsZHJlbi5sZW5ndGg7CiAgICB3aGlsZSAoaS0tKSB7CiAgICAgIGlmIChjaGlsZHJlbltpXS50eXBlID09PSAxKSB7CiAgICAgICAgcmV0dXJuIGNoaWxkcmVuW2ldCiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGNoaWxkcmVuW2ldLnRleHQgIT09ICcgJykgewogICAgICAgICAgd2FybiQyKAogICAgICAgICAgICAidGV4dCBcIiIgKyAoY2hpbGRyZW5baV0udGV4dC50cmltKCkpICsgIlwiIGJldHdlZW4gdi1pZiBhbmQgdi1lbHNlKC1pZikgIiArCiAgICAgICAgICAgICJ3aWxsIGJlIGlnbm9yZWQuIiwKICAgICAgICAgICAgY2hpbGRyZW5baV0KICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGNoaWxkcmVuLnBvcCgpOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBhZGRJZkNvbmRpdGlvbiAoZWwsIGNvbmRpdGlvbikgewogICAgaWYgKCFlbC5pZkNvbmRpdGlvbnMpIHsKICAgICAgZWwuaWZDb25kaXRpb25zID0gW107CiAgICB9CiAgICBlbC5pZkNvbmRpdGlvbnMucHVzaChjb25kaXRpb24pOwogIH0KCiAgZnVuY3Rpb24gcHJvY2Vzc09uY2UgKGVsKSB7CiAgICB2YXIgb25jZSQkMSA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LW9uY2UnKTsKICAgIGlmIChvbmNlJCQxICE9IG51bGwpIHsKICAgICAgZWwub25jZSA9IHRydWU7CiAgICB9CiAgfQoKICAvLyBoYW5kbGUgY29udGVudCBiZWluZyBwYXNzZWQgdG8gYSBjb21wb25lbnQgYXMgc2xvdCwKICAvLyBlLmcuIDx0ZW1wbGF0ZSBzbG90PSJ4eHgiPiwgPGRpdiBzbG90LXNjb3BlPSJ4eHgiPgogIGZ1bmN0aW9uIHByb2Nlc3NTbG90Q29udGVudCAoZWwpIHsKICAgIHZhciBzbG90U2NvcGU7CiAgICBpZiAoZWwudGFnID09PSAndGVtcGxhdGUnKSB7CiAgICAgIHNsb3RTY29wZSA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICdzY29wZScpOwogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgaWYgKHNsb3RTY29wZSkgewogICAgICAgIHdhcm4kMigKICAgICAgICAgICJ0aGUgXCJzY29wZVwiIGF0dHJpYnV0ZSBmb3Igc2NvcGVkIHNsb3RzIGhhdmUgYmVlbiBkZXByZWNhdGVkIGFuZCAiICsKICAgICAgICAgICJyZXBsYWNlZCBieSBcInNsb3Qtc2NvcGVcIiBzaW5jZSAyLjUuIFRoZSBuZXcgXCJzbG90LXNjb3BlXCIgYXR0cmlidXRlICIgKwogICAgICAgICAgImNhbiBhbHNvIGJlIHVzZWQgb24gcGxhaW4gZWxlbWVudHMgaW4gYWRkaXRpb24gdG8gPHRlbXBsYXRlPiB0byAiICsKICAgICAgICAgICJkZW5vdGUgc2NvcGVkIHNsb3RzLiIsCiAgICAgICAgICBlbC5yYXdBdHRyc01hcFsnc2NvcGUnXSwKICAgICAgICAgIHRydWUKICAgICAgICApOwogICAgICB9CiAgICAgIGVsLnNsb3RTY29wZSA9IHNsb3RTY29wZSB8fCBnZXRBbmRSZW1vdmVBdHRyKGVsLCAnc2xvdC1zY29wZScpOwogICAgfSBlbHNlIGlmICgoc2xvdFNjb3BlID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3Nsb3Qtc2NvcGUnKSkpIHsKICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgIGlmIChlbC5hdHRyc01hcFsndi1mb3InXSkgewogICAgICAgIHdhcm4kMigKICAgICAgICAgICJBbWJpZ3VvdXMgY29tYmluZWQgdXNhZ2Ugb2Ygc2xvdC1zY29wZSBhbmQgdi1mb3Igb24gPCIgKyAoZWwudGFnKSArICI+ICIgKwogICAgICAgICAgIih2LWZvciB0YWtlcyBoaWdoZXIgcHJpb3JpdHkpLiBVc2UgYSB3cmFwcGVyIDx0ZW1wbGF0ZT4gZm9yIHRoZSAiICsKICAgICAgICAgICJzY29wZWQgc2xvdCB0byBtYWtlIGl0IGNsZWFyZXIuIiwKICAgICAgICAgIGVsLnJhd0F0dHJzTWFwWydzbG90LXNjb3BlJ10sCiAgICAgICAgICB0cnVlCiAgICAgICAgKTsKICAgICAgfQogICAgICBlbC5zbG90U2NvcGUgPSBzbG90U2NvcGU7CiAgICB9CgogICAgLy8gc2xvdD0ieHh4IgogICAgdmFyIHNsb3RUYXJnZXQgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3Nsb3QnKTsKICAgIGlmIChzbG90VGFyZ2V0KSB7CiAgICAgIGVsLnNsb3RUYXJnZXQgPSBzbG90VGFyZ2V0ID09PSAnIiInID8gJyJkZWZhdWx0IicgOiBzbG90VGFyZ2V0OwogICAgICBlbC5zbG90VGFyZ2V0RHluYW1pYyA9ICEhKGVsLmF0dHJzTWFwWyc6c2xvdCddIHx8IGVsLmF0dHJzTWFwWyd2LWJpbmQ6c2xvdCddKTsKICAgICAgLy8gcHJlc2VydmUgc2xvdCBhcyBhbiBhdHRyaWJ1dGUgZm9yIG5hdGl2ZSBzaGFkb3cgRE9NIGNvbXBhdAogICAgICAvLyBvbmx5IGZvciBub24tc2NvcGVkIHNsb3RzLgogICAgICBpZiAoZWwudGFnICE9PSAndGVtcGxhdGUnICYmICFlbC5zbG90U2NvcGUpIHsKICAgICAgICBhZGRBdHRyKGVsLCAnc2xvdCcsIHNsb3RUYXJnZXQsIGdldFJhd0JpbmRpbmdBdHRyKGVsLCAnc2xvdCcpKTsKICAgICAgfQogICAgfQoKICAgIC8vIDIuNiB2LXNsb3Qgc3ludGF4CiAgICB7CiAgICAgIGlmIChlbC50YWcgPT09ICd0ZW1wbGF0ZScpIHsKICAgICAgICAvLyB2LXNsb3Qgb24gPHRlbXBsYXRlPgogICAgICAgIHZhciBzbG90QmluZGluZyA9IGdldEFuZFJlbW92ZUF0dHJCeVJlZ2V4KGVsLCBzbG90UkUpOwogICAgICAgIGlmIChzbG90QmluZGluZykgewogICAgICAgICAgewogICAgICAgICAgICBpZiAoZWwuc2xvdFRhcmdldCB8fCBlbC5zbG90U2NvcGUpIHsKICAgICAgICAgICAgICB3YXJuJDIoCiAgICAgICAgICAgICAgICAiVW5leHBlY3RlZCBtaXhlZCB1c2FnZSBvZiBkaWZmZXJlbnQgc2xvdCBzeW50YXhlcy4iLAogICAgICAgICAgICAgICAgZWwKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChlbC5wYXJlbnQgJiYgIW1heWJlQ29tcG9uZW50KGVsLnBhcmVudCkpIHsKICAgICAgICAgICAgICB3YXJuJDIoCiAgICAgICAgICAgICAgICAiPHRlbXBsYXRlIHYtc2xvdD4gY2FuIG9ubHkgYXBwZWFyIGF0IHRoZSByb290IGxldmVsIGluc2lkZSAiICsKICAgICAgICAgICAgICAgICJ0aGUgcmVjZWl2aW5nIHRoZSBjb21wb25lbnQiLAogICAgICAgICAgICAgICAgZWwKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgcmVmID0gZ2V0U2xvdE5hbWUoc2xvdEJpbmRpbmcpOwogICAgICAgICAgdmFyIG5hbWUgPSByZWYubmFtZTsKICAgICAgICAgIHZhciBkeW5hbWljID0gcmVmLmR5bmFtaWM7CiAgICAgICAgICBlbC5zbG90VGFyZ2V0ID0gbmFtZTsKICAgICAgICAgIGVsLnNsb3RUYXJnZXREeW5hbWljID0gZHluYW1pYzsKICAgICAgICAgIGVsLnNsb3RTY29wZSA9IHNsb3RCaW5kaW5nLnZhbHVlIHx8IGVtcHR5U2xvdFNjb3BlVG9rZW47IC8vIGZvcmNlIGl0IGludG8gYSBzY29wZWQgc2xvdCBmb3IgcGVyZgogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyB2LXNsb3Qgb24gY29tcG9uZW50LCBkZW5vdGVzIGRlZmF1bHQgc2xvdAogICAgICAgIHZhciBzbG90QmluZGluZyQxID0gZ2V0QW5kUmVtb3ZlQXR0ckJ5UmVnZXgoZWwsIHNsb3RSRSk7CiAgICAgICAgaWYgKHNsb3RCaW5kaW5nJDEpIHsKICAgICAgICAgIHsKICAgICAgICAgICAgaWYgKCFtYXliZUNvbXBvbmVudChlbCkpIHsKICAgICAgICAgICAgICB3YXJuJDIoCiAgICAgICAgICAgICAgICAidi1zbG90IGNhbiBvbmx5IGJlIHVzZWQgb24gY29tcG9uZW50cyBvciA8dGVtcGxhdGU+LiIsCiAgICAgICAgICAgICAgICBzbG90QmluZGluZyQxCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoZWwuc2xvdFNjb3BlIHx8IGVsLnNsb3RUYXJnZXQpIHsKICAgICAgICAgICAgICB3YXJuJDIoCiAgICAgICAgICAgICAgICAiVW5leHBlY3RlZCBtaXhlZCB1c2FnZSBvZiBkaWZmZXJlbnQgc2xvdCBzeW50YXhlcy4iLAogICAgICAgICAgICAgICAgZWwKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChlbC5zY29wZWRTbG90cykgewogICAgICAgICAgICAgIHdhcm4kMigKICAgICAgICAgICAgICAgICJUbyBhdm9pZCBzY29wZSBhbWJpZ3VpdHksIHRoZSBkZWZhdWx0IHNsb3Qgc2hvdWxkIGFsc28gdXNlICIgKwogICAgICAgICAgICAgICAgIjx0ZW1wbGF0ZT4gc3ludGF4IHdoZW4gdGhlcmUgYXJlIG90aGVyIG5hbWVkIHNsb3RzLiIsCiAgICAgICAgICAgICAgICBzbG90QmluZGluZyQxCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgLy8gYWRkIHRoZSBjb21wb25lbnQncyBjaGlsZHJlbiB0byBpdHMgZGVmYXVsdCBzbG90CiAgICAgICAgICB2YXIgc2xvdHMgPSBlbC5zY29wZWRTbG90cyB8fCAoZWwuc2NvcGVkU2xvdHMgPSB7fSk7CiAgICAgICAgICB2YXIgcmVmJDEgPSBnZXRTbG90TmFtZShzbG90QmluZGluZyQxKTsKICAgICAgICAgIHZhciBuYW1lJDEgPSByZWYkMS5uYW1lOwogICAgICAgICAgdmFyIGR5bmFtaWMkMSA9IHJlZiQxLmR5bmFtaWM7CiAgICAgICAgICB2YXIgc2xvdENvbnRhaW5lciA9IHNsb3RzW25hbWUkMV0gPSBjcmVhdGVBU1RFbGVtZW50KCd0ZW1wbGF0ZScsIFtdLCBlbCk7CiAgICAgICAgICBzbG90Q29udGFpbmVyLnNsb3RUYXJnZXQgPSBuYW1lJDE7CiAgICAgICAgICBzbG90Q29udGFpbmVyLnNsb3RUYXJnZXREeW5hbWljID0gZHluYW1pYyQxOwogICAgICAgICAgc2xvdENvbnRhaW5lci5jaGlsZHJlbiA9IGVsLmNoaWxkcmVuLmZpbHRlcihmdW5jdGlvbiAoYykgewogICAgICAgICAgICBpZiAoIWMuc2xvdFNjb3BlKSB7CiAgICAgICAgICAgICAgYy5wYXJlbnQgPSBzbG90Q29udGFpbmVyOwogICAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgc2xvdENvbnRhaW5lci5zbG90U2NvcGUgPSBzbG90QmluZGluZyQxLnZhbHVlIHx8IGVtcHR5U2xvdFNjb3BlVG9rZW47CiAgICAgICAgICAvLyByZW1vdmUgY2hpbGRyZW4gYXMgdGhleSBhcmUgcmV0dXJuZWQgZnJvbSBzY29wZWRTbG90cyBub3cKICAgICAgICAgIGVsLmNoaWxkcmVuID0gW107CiAgICAgICAgICAvLyBtYXJrIGVsIG5vbi1wbGFpbiBzbyBkYXRhIGdldHMgZ2VuZXJhdGVkCiAgICAgICAgICBlbC5wbGFpbiA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gZ2V0U2xvdE5hbWUgKGJpbmRpbmcpIHsKICAgIHZhciBuYW1lID0gYmluZGluZy5uYW1lLnJlcGxhY2Uoc2xvdFJFLCAnJyk7CiAgICBpZiAoIW5hbWUpIHsKICAgICAgaWYgKGJpbmRpbmcubmFtZVswXSAhPT0gJyMnKSB7CiAgICAgICAgbmFtZSA9ICdkZWZhdWx0JzsKICAgICAgfSBlbHNlIHsKICAgICAgICB3YXJuJDIoCiAgICAgICAgICAidi1zbG90IHNob3J0aGFuZCBzeW50YXggcmVxdWlyZXMgYSBzbG90IG5hbWUuIiwKICAgICAgICAgIGJpbmRpbmcKICAgICAgICApOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gZHluYW1pY0FyZ1JFLnRlc3QobmFtZSkKICAgICAgLy8gZHluYW1pYyBbbmFtZV0KICAgICAgPyB7IG5hbWU6IG5hbWUuc2xpY2UoMSwgLTEpLCBkeW5hbWljOiB0cnVlIH0KICAgICAgLy8gc3RhdGljIG5hbWUKICAgICAgOiB7IG5hbWU6ICgiXCIiICsgbmFtZSArICJcIiIpLCBkeW5hbWljOiBmYWxzZSB9CiAgfQoKICAvLyBoYW5kbGUgPHNsb3QvPiBvdXRsZXRzCiAgZnVuY3Rpb24gcHJvY2Vzc1Nsb3RPdXRsZXQgKGVsKSB7CiAgICBpZiAoZWwudGFnID09PSAnc2xvdCcpIHsKICAgICAgZWwuc2xvdE5hbWUgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ25hbWUnKTsKICAgICAgaWYgKGVsLmtleSkgewogICAgICAgIHdhcm4kMigKICAgICAgICAgICJga2V5YCBkb2VzIG5vdCB3b3JrIG9uIDxzbG90PiBiZWNhdXNlIHNsb3RzIGFyZSBhYnN0cmFjdCBvdXRsZXRzICIgKwogICAgICAgICAgImFuZCBjYW4gcG9zc2libHkgZXhwYW5kIGludG8gbXVsdGlwbGUgZWxlbWVudHMuICIgKwogICAgICAgICAgIlVzZSB0aGUga2V5IG9uIGEgd3JhcHBpbmcgZWxlbWVudCBpbnN0ZWFkLiIsCiAgICAgICAgICBnZXRSYXdCaW5kaW5nQXR0cihlbCwgJ2tleScpCiAgICAgICAgKTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gcHJvY2Vzc0NvbXBvbmVudCAoZWwpIHsKICAgIHZhciBiaW5kaW5nOwogICAgaWYgKChiaW5kaW5nID0gZ2V0QmluZGluZ0F0dHIoZWwsICdpcycpKSkgewogICAgICBlbC5jb21wb25lbnQgPSBiaW5kaW5nOwogICAgfQogICAgaWYgKGdldEFuZFJlbW92ZUF0dHIoZWwsICdpbmxpbmUtdGVtcGxhdGUnKSAhPSBudWxsKSB7CiAgICAgIGVsLmlubGluZVRlbXBsYXRlID0gdHJ1ZTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHByb2Nlc3NBdHRycyAoZWwpIHsKICAgIHZhciBsaXN0ID0gZWwuYXR0cnNMaXN0OwogICAgdmFyIGksIGwsIG5hbWUsIHJhd05hbWUsIHZhbHVlLCBtb2RpZmllcnMsIHN5bmNHZW4sIGlzRHluYW1pYzsKICAgIGZvciAoaSA9IDAsIGwgPSBsaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBuYW1lID0gcmF3TmFtZSA9IGxpc3RbaV0ubmFtZTsKICAgICAgdmFsdWUgPSBsaXN0W2ldLnZhbHVlOwogICAgICBpZiAoZGlyUkUudGVzdChuYW1lKSkgewogICAgICAgIC8vIG1hcmsgZWxlbWVudCBhcyBkeW5hbWljCiAgICAgICAgZWwuaGFzQmluZGluZ3MgPSB0cnVlOwogICAgICAgIC8vIG1vZGlmaWVycwogICAgICAgIG1vZGlmaWVycyA9IHBhcnNlTW9kaWZpZXJzKG5hbWUucmVwbGFjZShkaXJSRSwgJycpKTsKICAgICAgICAvLyBzdXBwb3J0IC5mb28gc2hvcnRoYW5kIHN5bnRheCBmb3IgdGhlIC5wcm9wIG1vZGlmaWVyCiAgICAgICAgaWYgKG1vZGlmaWVycykgewogICAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShtb2RpZmllclJFLCAnJyk7CiAgICAgICAgfQogICAgICAgIGlmIChiaW5kUkUudGVzdChuYW1lKSkgeyAvLyB2LWJpbmQKICAgICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoYmluZFJFLCAnJyk7CiAgICAgICAgICB2YWx1ZSA9IHBhcnNlRmlsdGVycyh2YWx1ZSk7CiAgICAgICAgICBpc0R5bmFtaWMgPSBkeW5hbWljQXJnUkUudGVzdChuYW1lKTsKICAgICAgICAgIGlmIChpc0R5bmFtaWMpIHsKICAgICAgICAgICAgbmFtZSA9IG5hbWUuc2xpY2UoMSwgLTEpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKAogICAgICAgICAgICB2YWx1ZS50cmltKCkubGVuZ3RoID09PSAwCiAgICAgICAgICApIHsKICAgICAgICAgICAgd2FybiQyKAogICAgICAgICAgICAgICgiVGhlIHZhbHVlIGZvciBhIHYtYmluZCBleHByZXNzaW9uIGNhbm5vdCBiZSBlbXB0eS4gRm91bmQgaW4gXCJ2LWJpbmQ6IiArIG5hbWUgKyAiXCIiKQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgaWYgKG1vZGlmaWVycykgewogICAgICAgICAgICBpZiAobW9kaWZpZXJzLnByb3AgJiYgIWlzRHluYW1pYykgewogICAgICAgICAgICAgIG5hbWUgPSBjYW1lbGl6ZShuYW1lKTsKICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gJ2lubmVySHRtbCcpIHsgbmFtZSA9ICdpbm5lckhUTUwnOyB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1vZGlmaWVycy5jYW1lbCAmJiAhaXNEeW5hbWljKSB7CiAgICAgICAgICAgICAgbmFtZSA9IGNhbWVsaXplKG5hbWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChtb2RpZmllcnMuc3luYykgewogICAgICAgICAgICAgIHN5bmNHZW4gPSBnZW5Bc3NpZ25tZW50Q29kZSh2YWx1ZSwgIiRldmVudCIpOwogICAgICAgICAgICAgIGlmICghaXNEeW5hbWljKSB7CiAgICAgICAgICAgICAgICBhZGRIYW5kbGVyKAogICAgICAgICAgICAgICAgICBlbCwKICAgICAgICAgICAgICAgICAgKCJ1cGRhdGU6IiArIChjYW1lbGl6ZShuYW1lKSkpLAogICAgICAgICAgICAgICAgICBzeW5jR2VuLAogICAgICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgICBmYWxzZSwKICAgICAgICAgICAgICAgICAgd2FybiQyLAogICAgICAgICAgICAgICAgICBsaXN0W2ldCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgaWYgKGh5cGhlbmF0ZShuYW1lKSAhPT0gY2FtZWxpemUobmFtZSkpIHsKICAgICAgICAgICAgICAgICAgYWRkSGFuZGxlcigKICAgICAgICAgICAgICAgICAgICBlbCwKICAgICAgICAgICAgICAgICAgICAoInVwZGF0ZToiICsgKGh5cGhlbmF0ZShuYW1lKSkpLAogICAgICAgICAgICAgICAgICAgIHN5bmNHZW4sCiAgICAgICAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICAgICAgICBmYWxzZSwKICAgICAgICAgICAgICAgICAgICB3YXJuJDIsCiAgICAgICAgICAgICAgICAgICAgbGlzdFtpXQogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBoYW5kbGVyIHcvIGR5bmFtaWMgZXZlbnQgbmFtZQogICAgICAgICAgICAgICAgYWRkSGFuZGxlcigKICAgICAgICAgICAgICAgICAgZWwsCiAgICAgICAgICAgICAgICAgICgiXCJ1cGRhdGU6XCIrKCIgKyBuYW1lICsgIikiKSwKICAgICAgICAgICAgICAgICAgc3luY0dlbiwKICAgICAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICAgICAgZmFsc2UsCiAgICAgICAgICAgICAgICAgIHdhcm4kMiwKICAgICAgICAgICAgICAgICAgbGlzdFtpXSwKICAgICAgICAgICAgICAgICAgdHJ1ZSAvLyBkeW5hbWljCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKChtb2RpZmllcnMgJiYgbW9kaWZpZXJzLnByb3ApIHx8ICgKICAgICAgICAgICAgIWVsLmNvbXBvbmVudCAmJiBwbGF0Zm9ybU11c3RVc2VQcm9wKGVsLnRhZywgZWwuYXR0cnNNYXAudHlwZSwgbmFtZSkKICAgICAgICAgICkpIHsKICAgICAgICAgICAgYWRkUHJvcChlbCwgbmFtZSwgdmFsdWUsIGxpc3RbaV0sIGlzRHluYW1pYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhZGRBdHRyKGVsLCBuYW1lLCB2YWx1ZSwgbGlzdFtpXSwgaXNEeW5hbWljKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKG9uUkUudGVzdChuYW1lKSkgeyAvLyB2LW9uCiAgICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKG9uUkUsICcnKTsKICAgICAgICAgIGlzRHluYW1pYyA9IGR5bmFtaWNBcmdSRS50ZXN0KG5hbWUpOwogICAgICAgICAgaWYgKGlzRHluYW1pYykgewogICAgICAgICAgICBuYW1lID0gbmFtZS5zbGljZSgxLCAtMSk7CiAgICAgICAgICB9CiAgICAgICAgICBhZGRIYW5kbGVyKGVsLCBuYW1lLCB2YWx1ZSwgbW9kaWZpZXJzLCBmYWxzZSwgd2FybiQyLCBsaXN0W2ldLCBpc0R5bmFtaWMpOwogICAgICAgIH0gZWxzZSB7IC8vIG5vcm1hbCBkaXJlY3RpdmVzCiAgICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKGRpclJFLCAnJyk7CiAgICAgICAgICAvLyBwYXJzZSBhcmcKICAgICAgICAgIHZhciBhcmdNYXRjaCA9IG5hbWUubWF0Y2goYXJnUkUpOwogICAgICAgICAgdmFyIGFyZyA9IGFyZ01hdGNoICYmIGFyZ01hdGNoWzFdOwogICAgICAgICAgaXNEeW5hbWljID0gZmFsc2U7CiAgICAgICAgICBpZiAoYXJnKSB7CiAgICAgICAgICAgIG5hbWUgPSBuYW1lLnNsaWNlKDAsIC0oYXJnLmxlbmd0aCArIDEpKTsKICAgICAgICAgICAgaWYgKGR5bmFtaWNBcmdSRS50ZXN0KGFyZykpIHsKICAgICAgICAgICAgICBhcmcgPSBhcmcuc2xpY2UoMSwgLTEpOwogICAgICAgICAgICAgIGlzRHluYW1pYyA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGFkZERpcmVjdGl2ZShlbCwgbmFtZSwgcmF3TmFtZSwgdmFsdWUsIGFyZywgaXNEeW5hbWljLCBtb2RpZmllcnMsIGxpc3RbaV0pOwogICAgICAgICAgaWYgKG5hbWUgPT09ICdtb2RlbCcpIHsKICAgICAgICAgICAgY2hlY2tGb3JBbGlhc01vZGVsKGVsLCB2YWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIGxpdGVyYWwgYXR0cmlidXRlCiAgICAgICAgewogICAgICAgICAgdmFyIHJlcyA9IHBhcnNlVGV4dCh2YWx1ZSwgZGVsaW1pdGVycyk7CiAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgIHdhcm4kMigKICAgICAgICAgICAgICBuYW1lICsgIj1cIiIgKyB2YWx1ZSArICJcIjogIiArCiAgICAgICAgICAgICAgJ0ludGVycG9sYXRpb24gaW5zaWRlIGF0dHJpYnV0ZXMgaGFzIGJlZW4gcmVtb3ZlZC4gJyArCiAgICAgICAgICAgICAgJ1VzZSB2LWJpbmQgb3IgdGhlIGNvbG9uIHNob3J0aGFuZCBpbnN0ZWFkLiBGb3IgZXhhbXBsZSwgJyArCiAgICAgICAgICAgICAgJ2luc3RlYWQgb2YgPGRpdiBpZD0ie3sgdmFsIH19Ij4sIHVzZSA8ZGl2IDppZD0idmFsIj4uJywKICAgICAgICAgICAgICBsaXN0W2ldCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGFkZEF0dHIoZWwsIG5hbWUsIEpTT04uc3RyaW5naWZ5KHZhbHVlKSwgbGlzdFtpXSk7CiAgICAgICAgLy8gIzY4ODcgZmlyZWZveCBkb2Vzbid0IHVwZGF0ZSBtdXRlZCBzdGF0ZSBpZiBzZXQgdmlhIGF0dHJpYnV0ZQogICAgICAgIC8vIGV2ZW4gaW1tZWRpYXRlbHkgYWZ0ZXIgZWxlbWVudCBjcmVhdGlvbgogICAgICAgIGlmICghZWwuY29tcG9uZW50ICYmCiAgICAgICAgICAgIG5hbWUgPT09ICdtdXRlZCcgJiYKICAgICAgICAgICAgcGxhdGZvcm1NdXN0VXNlUHJvcChlbC50YWcsIGVsLmF0dHJzTWFwLnR5cGUsIG5hbWUpKSB7CiAgICAgICAgICBhZGRQcm9wKGVsLCBuYW1lLCAndHJ1ZScsIGxpc3RbaV0pOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gY2hlY2tJbkZvciAoZWwpIHsKICAgIHZhciBwYXJlbnQgPSBlbDsKICAgIHdoaWxlIChwYXJlbnQpIHsKICAgICAgaWYgKHBhcmVudC5mb3IgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDsKICAgIH0KICAgIHJldHVybiBmYWxzZQogIH0KCiAgZnVuY3Rpb24gcGFyc2VNb2RpZmllcnMgKG5hbWUpIHsKICAgIHZhciBtYXRjaCA9IG5hbWUubWF0Y2gobW9kaWZpZXJSRSk7CiAgICBpZiAobWF0Y2gpIHsKICAgICAgdmFyIHJldCA9IHt9OwogICAgICBtYXRjaC5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7IHJldFttLnNsaWNlKDEpXSA9IHRydWU7IH0pOwogICAgICByZXR1cm4gcmV0CiAgICB9CiAgfQoKICBmdW5jdGlvbiBtYWtlQXR0cnNNYXAgKGF0dHJzKSB7CiAgICB2YXIgbWFwID0ge307CiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBpZiAoCiAgICAgICAgbWFwW2F0dHJzW2ldLm5hbWVdICYmICFpc0lFICYmICFpc0VkZ2UKICAgICAgKSB7CiAgICAgICAgd2FybiQyKCdkdXBsaWNhdGUgYXR0cmlidXRlOiAnICsgYXR0cnNbaV0ubmFtZSwgYXR0cnNbaV0pOwogICAgICB9CiAgICAgIG1hcFthdHRyc1tpXS5uYW1lXSA9IGF0dHJzW2ldLnZhbHVlOwogICAgfQogICAgcmV0dXJuIG1hcAogIH0KCiAgLy8gZm9yIHNjcmlwdCAoZS5nLiB0eXBlPSJ4L3RlbXBsYXRlIikgb3Igc3R5bGUsIGRvIG5vdCBkZWNvZGUgY29udGVudAogIGZ1bmN0aW9uIGlzVGV4dFRhZyAoZWwpIHsKICAgIHJldHVybiBlbC50YWcgPT09ICdzY3JpcHQnIHx8IGVsLnRhZyA9PT0gJ3N0eWxlJwogIH0KCiAgZnVuY3Rpb24gaXNGb3JiaWRkZW5UYWcgKGVsKSB7CiAgICByZXR1cm4gKAogICAgICBlbC50YWcgPT09ICdzdHlsZScgfHwKICAgICAgKGVsLnRhZyA9PT0gJ3NjcmlwdCcgJiYgKAogICAgICAgICFlbC5hdHRyc01hcC50eXBlIHx8CiAgICAgICAgZWwuYXR0cnNNYXAudHlwZSA9PT0gJ3RleHQvamF2YXNjcmlwdCcKICAgICAgKSkKICAgICkKICB9CgogIHZhciBpZU5TQnVnID0gL154bWxuczpOU1xkKy87CiAgdmFyIGllTlNQcmVmaXggPSAvXk5TXGQrOi87CgogIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgZnVuY3Rpb24gZ3VhcmRJRVNWR0J1ZyAoYXR0cnMpIHsKICAgIHZhciByZXMgPSBbXTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXR0cnMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIGF0dHIgPSBhdHRyc1tpXTsKICAgICAgaWYgKCFpZU5TQnVnLnRlc3QoYXR0ci5uYW1lKSkgewogICAgICAgIGF0dHIubmFtZSA9IGF0dHIubmFtZS5yZXBsYWNlKGllTlNQcmVmaXgsICcnKTsKICAgICAgICByZXMucHVzaChhdHRyKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgZnVuY3Rpb24gY2hlY2tGb3JBbGlhc01vZGVsIChlbCwgdmFsdWUpIHsKICAgIHZhciBfZWwgPSBlbDsKICAgIHdoaWxlIChfZWwpIHsKICAgICAgaWYgKF9lbC5mb3IgJiYgX2VsLmFsaWFzID09PSB2YWx1ZSkgewogICAgICAgIHdhcm4kMigKICAgICAgICAgICI8IiArIChlbC50YWcpICsgIiB2LW1vZGVsPVwiIiArIHZhbHVlICsgIlwiPjogIiArCiAgICAgICAgICAiWW91IGFyZSBiaW5kaW5nIHYtbW9kZWwgZGlyZWN0bHkgdG8gYSB2LWZvciBpdGVyYXRpb24gYWxpYXMuICIgKwogICAgICAgICAgIlRoaXMgd2lsbCBub3QgYmUgYWJsZSB0byBtb2RpZnkgdGhlIHYtZm9yIHNvdXJjZSBhcnJheSBiZWNhdXNlICIgKwogICAgICAgICAgIndyaXRpbmcgdG8gdGhlIGFsaWFzIGlzIGxpa2UgbW9kaWZ5aW5nIGEgZnVuY3Rpb24gbG9jYWwgdmFyaWFibGUuICIgKwogICAgICAgICAgIkNvbnNpZGVyIHVzaW5nIGFuIGFycmF5IG9mIG9iamVjdHMgYW5kIHVzZSB2LW1vZGVsIG9uIGFuIG9iamVjdCBwcm9wZXJ0eSBpbnN0ZWFkLiIsCiAgICAgICAgICBlbC5yYXdBdHRyc01hcFsndi1tb2RlbCddCiAgICAgICAgKTsKICAgICAgfQogICAgICBfZWwgPSBfZWwucGFyZW50OwogICAgfQogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIHByZVRyYW5zZm9ybU5vZGUgKGVsLCBvcHRpb25zKSB7CiAgICBpZiAoZWwudGFnID09PSAnaW5wdXQnKSB7CiAgICAgIHZhciBtYXAgPSBlbC5hdHRyc01hcDsKICAgICAgaWYgKCFtYXBbJ3YtbW9kZWwnXSkgewogICAgICAgIHJldHVybgogICAgICB9CgogICAgICB2YXIgdHlwZUJpbmRpbmc7CiAgICAgIGlmIChtYXBbJzp0eXBlJ10gfHwgbWFwWyd2LWJpbmQ6dHlwZSddKSB7CiAgICAgICAgdHlwZUJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3R5cGUnKTsKICAgICAgfQogICAgICBpZiAoIW1hcC50eXBlICYmICF0eXBlQmluZGluZyAmJiBtYXBbJ3YtYmluZCddKSB7CiAgICAgICAgdHlwZUJpbmRpbmcgPSAiKCIgKyAobWFwWyd2LWJpbmQnXSkgKyAiKS50eXBlIjsKICAgICAgfQoKICAgICAgaWYgKHR5cGVCaW5kaW5nKSB7CiAgICAgICAgdmFyIGlmQ29uZGl0aW9uID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3YtaWYnLCB0cnVlKTsKICAgICAgICB2YXIgaWZDb25kaXRpb25FeHRyYSA9IGlmQ29uZGl0aW9uID8gKCImJigiICsgaWZDb25kaXRpb24gKyAiKSIpIDogIiI7CiAgICAgICAgdmFyIGhhc0Vsc2UgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1lbHNlJywgdHJ1ZSkgIT0gbnVsbDsKICAgICAgICB2YXIgZWxzZUlmQ29uZGl0aW9uID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3YtZWxzZS1pZicsIHRydWUpOwogICAgICAgIC8vIDEuIGNoZWNrYm94CiAgICAgICAgdmFyIGJyYW5jaDAgPSBjbG9uZUFTVEVsZW1lbnQoZWwpOwogICAgICAgIC8vIHByb2Nlc3MgZm9yIG9uIHRoZSBtYWluIG5vZGUKICAgICAgICBwcm9jZXNzRm9yKGJyYW5jaDApOwogICAgICAgIGFkZFJhd0F0dHIoYnJhbmNoMCwgJ3R5cGUnLCAnY2hlY2tib3gnKTsKICAgICAgICBwcm9jZXNzRWxlbWVudChicmFuY2gwLCBvcHRpb25zKTsKICAgICAgICBicmFuY2gwLnByb2Nlc3NlZCA9IHRydWU7IC8vIHByZXZlbnQgaXQgZnJvbSBkb3VibGUtcHJvY2Vzc2VkCiAgICAgICAgYnJhbmNoMC5pZiA9ICIoIiArIHR5cGVCaW5kaW5nICsgIik9PT0nY2hlY2tib3gnIiArIGlmQ29uZGl0aW9uRXh0cmE7CiAgICAgICAgYWRkSWZDb25kaXRpb24oYnJhbmNoMCwgewogICAgICAgICAgZXhwOiBicmFuY2gwLmlmLAogICAgICAgICAgYmxvY2s6IGJyYW5jaDAKICAgICAgICB9KTsKICAgICAgICAvLyAyLiBhZGQgcmFkaW8gZWxzZS1pZiBjb25kaXRpb24KICAgICAgICB2YXIgYnJhbmNoMSA9IGNsb25lQVNURWxlbWVudChlbCk7CiAgICAgICAgZ2V0QW5kUmVtb3ZlQXR0cihicmFuY2gxLCAndi1mb3InLCB0cnVlKTsKICAgICAgICBhZGRSYXdBdHRyKGJyYW5jaDEsICd0eXBlJywgJ3JhZGlvJyk7CiAgICAgICAgcHJvY2Vzc0VsZW1lbnQoYnJhbmNoMSwgb3B0aW9ucyk7CiAgICAgICAgYWRkSWZDb25kaXRpb24oYnJhbmNoMCwgewogICAgICAgICAgZXhwOiAiKCIgKyB0eXBlQmluZGluZyArICIpPT09J3JhZGlvJyIgKyBpZkNvbmRpdGlvbkV4dHJhLAogICAgICAgICAgYmxvY2s6IGJyYW5jaDEKICAgICAgICB9KTsKICAgICAgICAvLyAzLiBvdGhlcgogICAgICAgIHZhciBicmFuY2gyID0gY2xvbmVBU1RFbGVtZW50KGVsKTsKICAgICAgICBnZXRBbmRSZW1vdmVBdHRyKGJyYW5jaDIsICd2LWZvcicsIHRydWUpOwogICAgICAgIGFkZFJhd0F0dHIoYnJhbmNoMiwgJzp0eXBlJywgdHlwZUJpbmRpbmcpOwogICAgICAgIHByb2Nlc3NFbGVtZW50KGJyYW5jaDIsIG9wdGlvbnMpOwogICAgICAgIGFkZElmQ29uZGl0aW9uKGJyYW5jaDAsIHsKICAgICAgICAgIGV4cDogaWZDb25kaXRpb24sCiAgICAgICAgICBibG9jazogYnJhbmNoMgogICAgICAgIH0pOwoKICAgICAgICBpZiAoaGFzRWxzZSkgewogICAgICAgICAgYnJhbmNoMC5lbHNlID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKGVsc2VJZkNvbmRpdGlvbikgewogICAgICAgICAgYnJhbmNoMC5lbHNlaWYgPSBlbHNlSWZDb25kaXRpb247CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYnJhbmNoMAogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjbG9uZUFTVEVsZW1lbnQgKGVsKSB7CiAgICByZXR1cm4gY3JlYXRlQVNURWxlbWVudChlbC50YWcsIGVsLmF0dHJzTGlzdC5zbGljZSgpLCBlbC5wYXJlbnQpCiAgfQoKICB2YXIgbW9kZWwkMSA9IHsKICAgIHByZVRyYW5zZm9ybU5vZGU6IHByZVRyYW5zZm9ybU5vZGUKICB9OwoKICB2YXIgbW9kdWxlcyQxID0gWwogICAga2xhc3MkMSwKICAgIHN0eWxlJDEsCiAgICBtb2RlbCQxCiAgXTsKCiAgLyogICovCgogIGZ1bmN0aW9uIHRleHQgKGVsLCBkaXIpIHsKICAgIGlmIChkaXIudmFsdWUpIHsKICAgICAgYWRkUHJvcChlbCwgJ3RleHRDb250ZW50JywgKCJfcygiICsgKGRpci52YWx1ZSkgKyAiKSIpLCBkaXIpOwogICAgfQogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGh0bWwgKGVsLCBkaXIpIHsKICAgIGlmIChkaXIudmFsdWUpIHsKICAgICAgYWRkUHJvcChlbCwgJ2lubmVySFRNTCcsICgiX3MoIiArIChkaXIudmFsdWUpICsgIikiKSwgZGlyKTsKICAgIH0KICB9CgogIHZhciBkaXJlY3RpdmVzJDEgPSB7CiAgICBtb2RlbDogbW9kZWwsCiAgICB0ZXh0OiB0ZXh0LAogICAgaHRtbDogaHRtbAogIH07CgogIC8qICAqLwoKICB2YXIgYmFzZU9wdGlvbnMgPSB7CiAgICBleHBlY3RIVE1MOiB0cnVlLAogICAgbW9kdWxlczogbW9kdWxlcyQxLAogICAgZGlyZWN0aXZlczogZGlyZWN0aXZlcyQxLAogICAgaXNQcmVUYWc6IGlzUHJlVGFnLAogICAgaXNVbmFyeVRhZzogaXNVbmFyeVRhZywKICAgIG11c3RVc2VQcm9wOiBtdXN0VXNlUHJvcCwKICAgIGNhbkJlTGVmdE9wZW5UYWc6IGNhbkJlTGVmdE9wZW5UYWcsCiAgICBpc1Jlc2VydmVkVGFnOiBpc1Jlc2VydmVkVGFnLAogICAgZ2V0VGFnTmFtZXNwYWNlOiBnZXRUYWdOYW1lc3BhY2UsCiAgICBzdGF0aWNLZXlzOiBnZW5TdGF0aWNLZXlzKG1vZHVsZXMkMSkKICB9OwoKICAvKiAgKi8KCiAgdmFyIGlzU3RhdGljS2V5OwogIHZhciBpc1BsYXRmb3JtUmVzZXJ2ZWRUYWc7CgogIHZhciBnZW5TdGF0aWNLZXlzQ2FjaGVkID0gY2FjaGVkKGdlblN0YXRpY0tleXMkMSk7CgogIC8qKgogICAqIEdvYWwgb2YgdGhlIG9wdGltaXplcjogd2FsayB0aGUgZ2VuZXJhdGVkIHRlbXBsYXRlIEFTVCB0cmVlCiAgICogYW5kIGRldGVjdCBzdWItdHJlZXMgdGhhdCBhcmUgcHVyZWx5IHN0YXRpYywgaS5lLiBwYXJ0cyBvZgogICAqIHRoZSBET00gdGhhdCBuZXZlciBuZWVkcyB0byBjaGFuZ2UuCiAgICoKICAgKiBPbmNlIHdlIGRldGVjdCB0aGVzZSBzdWItdHJlZXMsIHdlIGNhbjoKICAgKgogICAqIDEuIEhvaXN0IHRoZW0gaW50byBjb25zdGFudHMsIHNvIHRoYXQgd2Ugbm8gbG9uZ2VyIG5lZWQgdG8KICAgKiAgICBjcmVhdGUgZnJlc2ggbm9kZXMgZm9yIHRoZW0gb24gZWFjaCByZS1yZW5kZXI7CiAgICogMi4gQ29tcGxldGVseSBza2lwIHRoZW0gaW4gdGhlIHBhdGNoaW5nIHByb2Nlc3MuCiAgICovCiAgZnVuY3Rpb24gb3B0aW1pemUgKHJvb3QsIG9wdGlvbnMpIHsKICAgIGlmICghcm9vdCkgeyByZXR1cm4gfQogICAgaXNTdGF0aWNLZXkgPSBnZW5TdGF0aWNLZXlzQ2FjaGVkKG9wdGlvbnMuc3RhdGljS2V5cyB8fCAnJyk7CiAgICBpc1BsYXRmb3JtUmVzZXJ2ZWRUYWcgPSBvcHRpb25zLmlzUmVzZXJ2ZWRUYWcgfHwgbm87CiAgICAvLyBmaXJzdCBwYXNzOiBtYXJrIGFsbCBub24tc3RhdGljIG5vZGVzLgogICAgbWFya1N0YXRpYyQxKHJvb3QpOwogICAgLy8gc2Vjb25kIHBhc3M6IG1hcmsgc3RhdGljIHJvb3RzLgogICAgbWFya1N0YXRpY1Jvb3RzKHJvb3QsIGZhbHNlKTsKICB9CgogIGZ1bmN0aW9uIGdlblN0YXRpY0tleXMkMSAoa2V5cykgewogICAgcmV0dXJuIG1ha2VNYXAoCiAgICAgICd0eXBlLHRhZyxhdHRyc0xpc3QsYXR0cnNNYXAscGxhaW4scGFyZW50LGNoaWxkcmVuLGF0dHJzLHN0YXJ0LGVuZCxyYXdBdHRyc01hcCcgKwogICAgICAoa2V5cyA/ICcsJyArIGtleXMgOiAnJykKICAgICkKICB9CgogIGZ1bmN0aW9uIG1hcmtTdGF0aWMkMSAobm9kZSkgewogICAgbm9kZS5zdGF0aWMgPSBpc1N0YXRpYyhub2RlKTsKICAgIGlmIChub2RlLnR5cGUgPT09IDEpIHsKICAgICAgLy8gZG8gbm90IG1ha2UgY29tcG9uZW50IHNsb3QgY29udGVudCBzdGF0aWMuIHRoaXMgYXZvaWRzCiAgICAgIC8vIDEuIGNvbXBvbmVudHMgbm90IGFibGUgdG8gbXV0YXRlIHNsb3Qgbm9kZXMKICAgICAgLy8gMi4gc3RhdGljIHNsb3QgY29udGVudCBmYWlscyBmb3IgaG90LXJlbG9hZGluZwogICAgICBpZiAoCiAgICAgICAgIWlzUGxhdGZvcm1SZXNlcnZlZFRhZyhub2RlLnRhZykgJiYKICAgICAgICBub2RlLnRhZyAhPT0gJ3Nsb3QnICYmCiAgICAgICAgbm9kZS5hdHRyc01hcFsnaW5saW5lLXRlbXBsYXRlJ10gPT0gbnVsbAogICAgICApIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgdmFyIGNoaWxkID0gbm9kZS5jaGlsZHJlbltpXTsKICAgICAgICBtYXJrU3RhdGljJDEoY2hpbGQpOwogICAgICAgIGlmICghY2hpbGQuc3RhdGljKSB7CiAgICAgICAgICBub2RlLnN0YXRpYyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAobm9kZS5pZkNvbmRpdGlvbnMpIHsKICAgICAgICBmb3IgKHZhciBpJDEgPSAxLCBsJDEgPSBub2RlLmlmQ29uZGl0aW9ucy5sZW5ndGg7IGkkMSA8IGwkMTsgaSQxKyspIHsKICAgICAgICAgIHZhciBibG9jayA9IG5vZGUuaWZDb25kaXRpb25zW2kkMV0uYmxvY2s7CiAgICAgICAgICBtYXJrU3RhdGljJDEoYmxvY2spOwogICAgICAgICAgaWYgKCFibG9jay5zdGF0aWMpIHsKICAgICAgICAgICAgbm9kZS5zdGF0aWMgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIG1hcmtTdGF0aWNSb290cyAobm9kZSwgaXNJbkZvcikgewogICAgaWYgKG5vZGUudHlwZSA9PT0gMSkgewogICAgICBpZiAobm9kZS5zdGF0aWMgfHwgbm9kZS5vbmNlKSB7CiAgICAgICAgbm9kZS5zdGF0aWNJbkZvciA9IGlzSW5Gb3I7CiAgICAgIH0KICAgICAgLy8gRm9yIGEgbm9kZSB0byBxdWFsaWZ5IGFzIGEgc3RhdGljIHJvb3QsIGl0IHNob3VsZCBoYXZlIGNoaWxkcmVuIHRoYXQKICAgICAgLy8gYXJlIG5vdCBqdXN0IHN0YXRpYyB0ZXh0LiBPdGhlcndpc2UgdGhlIGNvc3Qgb2YgaG9pc3Rpbmcgb3V0IHdpbGwKICAgICAgLy8gb3V0d2VpZ2ggdGhlIGJlbmVmaXRzIGFuZCBpdCdzIGJldHRlciBvZmYgdG8ganVzdCBhbHdheXMgcmVuZGVyIGl0IGZyZXNoLgogICAgICBpZiAobm9kZS5zdGF0aWMgJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggJiYgISgKICAgICAgICBub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJgogICAgICAgIG5vZGUuY2hpbGRyZW5bMF0udHlwZSA9PT0gMwogICAgICApKSB7CiAgICAgICAgbm9kZS5zdGF0aWNSb290ID0gdHJ1ZTsKICAgICAgICByZXR1cm4KICAgICAgfSBlbHNlIHsKICAgICAgICBub2RlLnN0YXRpY1Jvb3QgPSBmYWxzZTsKICAgICAgfQogICAgICBpZiAobm9kZS5jaGlsZHJlbikgewogICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICAgIG1hcmtTdGF0aWNSb290cyhub2RlLmNoaWxkcmVuW2ldLCBpc0luRm9yIHx8ICEhbm9kZS5mb3IpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAobm9kZS5pZkNvbmRpdGlvbnMpIHsKICAgICAgICBmb3IgKHZhciBpJDEgPSAxLCBsJDEgPSBub2RlLmlmQ29uZGl0aW9ucy5sZW5ndGg7IGkkMSA8IGwkMTsgaSQxKyspIHsKICAgICAgICAgIG1hcmtTdGF0aWNSb290cyhub2RlLmlmQ29uZGl0aW9uc1tpJDFdLmJsb2NrLCBpc0luRm9yKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGlzU3RhdGljIChub2RlKSB7CiAgICBpZiAobm9kZS50eXBlID09PSAyKSB7IC8vIGV4cHJlc3Npb24KICAgICAgcmV0dXJuIGZhbHNlCiAgICB9CiAgICBpZiAobm9kZS50eXBlID09PSAzKSB7IC8vIHRleHQKICAgICAgcmV0dXJuIHRydWUKICAgIH0KICAgIHJldHVybiAhIShub2RlLnByZSB8fCAoCiAgICAgICFub2RlLmhhc0JpbmRpbmdzICYmIC8vIG5vIGR5bmFtaWMgYmluZGluZ3MKICAgICAgIW5vZGUuaWYgJiYgIW5vZGUuZm9yICYmIC8vIG5vdCB2LWlmIG9yIHYtZm9yIG9yIHYtZWxzZQogICAgICAhaXNCdWlsdEluVGFnKG5vZGUudGFnKSAmJiAvLyBub3QgYSBidWlsdC1pbgogICAgICBpc1BsYXRmb3JtUmVzZXJ2ZWRUYWcobm9kZS50YWcpICYmIC8vIG5vdCBhIGNvbXBvbmVudAogICAgICAhaXNEaXJlY3RDaGlsZE9mVGVtcGxhdGVGb3Iobm9kZSkgJiYKICAgICAgT2JqZWN0LmtleXMobm9kZSkuZXZlcnkoaXNTdGF0aWNLZXkpCiAgICApKQogIH0KCiAgZnVuY3Rpb24gaXNEaXJlY3RDaGlsZE9mVGVtcGxhdGVGb3IgKG5vZGUpIHsKICAgIHdoaWxlIChub2RlLnBhcmVudCkgewogICAgICBub2RlID0gbm9kZS5wYXJlbnQ7CiAgICAgIGlmIChub2RlLnRhZyAhPT0gJ3RlbXBsYXRlJykgewogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9CiAgICAgIGlmIChub2RlLmZvcikgewogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgIH0KICAgIHJldHVybiBmYWxzZQogIH0KCiAgLyogICovCgogIHZhciBmbkV4cFJFID0gL14oW1x3JF9dK3xcKFteKV0qP1wpKVxzKj0+fF5mdW5jdGlvblxzKig/OltcdyRdKyk/XHMqXCgvOwogIHZhciBmbkludm9rZVJFID0gL1woW14pXSo/XCk7KiQvOwogIHZhciBzaW1wbGVQYXRoUkUgPSAvXltBLVphLXpfJF1bXHckXSooPzpcLltBLVphLXpfJF1bXHckXSp8XFsnW14nXSo/J118XFsiW14iXSo/Il18XFtcZCtdfFxbW0EtWmEtel8kXVtcdyRdKl0pKiQvOwoKICAvLyBLZXlib2FyZEV2ZW50LmtleUNvZGUgYWxpYXNlcwogIHZhciBrZXlDb2RlcyA9IHsKICAgIGVzYzogMjcsCiAgICB0YWI6IDksCiAgICBlbnRlcjogMTMsCiAgICBzcGFjZTogMzIsCiAgICB1cDogMzgsCiAgICBsZWZ0OiAzNywKICAgIHJpZ2h0OiAzOSwKICAgIGRvd246IDQwLAogICAgJ2RlbGV0ZSc6IFs4LCA0Nl0KICB9OwoKICAvLyBLZXlib2FyZEV2ZW50LmtleSBhbGlhc2VzCiAgdmFyIGtleU5hbWVzID0gewogICAgLy8gIzc4ODA6IElFMTEgYW5kIEVkZ2UgdXNlIGBFc2NgIGZvciBFc2NhcGUga2V5IG5hbWUuCiAgICBlc2M6IFsnRXNjJywgJ0VzY2FwZSddLAogICAgdGFiOiAnVGFiJywKICAgIGVudGVyOiAnRW50ZXInLAogICAgLy8gIzkxMTI6IElFMTEgdXNlcyBgU3BhY2ViYXJgIGZvciBTcGFjZSBrZXkgbmFtZS4KICAgIHNwYWNlOiBbJyAnLCAnU3BhY2ViYXInXSwKICAgIC8vICM3ODA2OiBJRTExIHVzZXMga2V5IG5hbWVzIHdpdGhvdXQgYEFycm93YCBwcmVmaXggZm9yIGFycm93IGtleXMuCiAgICB1cDogWydVcCcsICdBcnJvd1VwJ10sCiAgICBsZWZ0OiBbJ0xlZnQnLCAnQXJyb3dMZWZ0J10sCiAgICByaWdodDogWydSaWdodCcsICdBcnJvd1JpZ2h0J10sCiAgICBkb3duOiBbJ0Rvd24nLCAnQXJyb3dEb3duJ10sCiAgICAvLyAjOTExMjogSUUxMSB1c2VzIGBEZWxgIGZvciBEZWxldGUga2V5IG5hbWUuCiAgICAnZGVsZXRlJzogWydCYWNrc3BhY2UnLCAnRGVsZXRlJywgJ0RlbCddCiAgfTsKCiAgLy8gIzQ4Njg6IG1vZGlmaWVycyB0aGF0IHByZXZlbnQgdGhlIGV4ZWN1dGlvbiBvZiB0aGUgbGlzdGVuZXIKICAvLyBuZWVkIHRvIGV4cGxpY2l0bHkgcmV0dXJuIG51bGwgc28gdGhhdCB3ZSBjYW4gZGV0ZXJtaW5lIHdoZXRoZXIgdG8gcmVtb3ZlCiAgLy8gdGhlIGxpc3RlbmVyIGZvciAub25jZQogIHZhciBnZW5HdWFyZCA9IGZ1bmN0aW9uIChjb25kaXRpb24pIHsgcmV0dXJuICgiaWYoIiArIGNvbmRpdGlvbiArICIpcmV0dXJuIG51bGw7Iik7IH07CgogIHZhciBtb2RpZmllckNvZGUgPSB7CiAgICBzdG9wOiAnJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOycsCiAgICBwcmV2ZW50OiAnJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7JywKICAgIHNlbGY6IGdlbkd1YXJkKCIkZXZlbnQudGFyZ2V0ICE9PSAkZXZlbnQuY3VycmVudFRhcmdldCIpLAogICAgY3RybDogZ2VuR3VhcmQoIiEkZXZlbnQuY3RybEtleSIpLAogICAgc2hpZnQ6IGdlbkd1YXJkKCIhJGV2ZW50LnNoaWZ0S2V5IiksCiAgICBhbHQ6IGdlbkd1YXJkKCIhJGV2ZW50LmFsdEtleSIpLAogICAgbWV0YTogZ2VuR3VhcmQoIiEkZXZlbnQubWV0YUtleSIpLAogICAgbGVmdDogZ2VuR3VhcmQoIididXR0b24nIGluICRldmVudCAmJiAkZXZlbnQuYnV0dG9uICE9PSAwIiksCiAgICBtaWRkbGU6IGdlbkd1YXJkKCInYnV0dG9uJyBpbiAkZXZlbnQgJiYgJGV2ZW50LmJ1dHRvbiAhPT0gMSIpLAogICAgcmlnaHQ6IGdlbkd1YXJkKCInYnV0dG9uJyBpbiAkZXZlbnQgJiYgJGV2ZW50LmJ1dHRvbiAhPT0gMiIpCiAgfTsKCiAgZnVuY3Rpb24gZ2VuSGFuZGxlcnMgKAogICAgZXZlbnRzLAogICAgaXNOYXRpdmUKICApIHsKICAgIHZhciBwcmVmaXggPSBpc05hdGl2ZSA/ICduYXRpdmVPbjonIDogJ29uOic7CiAgICB2YXIgc3RhdGljSGFuZGxlcnMgPSAiIjsKICAgIHZhciBkeW5hbWljSGFuZGxlcnMgPSAiIjsKICAgIGZvciAodmFyIG5hbWUgaW4gZXZlbnRzKSB7CiAgICAgIHZhciBoYW5kbGVyQ29kZSA9IGdlbkhhbmRsZXIoZXZlbnRzW25hbWVdKTsKICAgICAgaWYgKGV2ZW50c1tuYW1lXSAmJiBldmVudHNbbmFtZV0uZHluYW1pYykgewogICAgICAgIGR5bmFtaWNIYW5kbGVycyArPSBuYW1lICsgIiwiICsgaGFuZGxlckNvZGUgKyAiLCI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhdGljSGFuZGxlcnMgKz0gIlwiIiArIG5hbWUgKyAiXCI6IiArIGhhbmRsZXJDb2RlICsgIiwiOwogICAgICB9CiAgICB9CiAgICBzdGF0aWNIYW5kbGVycyA9ICJ7IiArIChzdGF0aWNIYW5kbGVycy5zbGljZSgwLCAtMSkpICsgIn0iOwogICAgaWYgKGR5bmFtaWNIYW5kbGVycykgewogICAgICByZXR1cm4gcHJlZml4ICsgIl9kKCIgKyBzdGF0aWNIYW5kbGVycyArICIsWyIgKyAoZHluYW1pY0hhbmRsZXJzLnNsaWNlKDAsIC0xKSkgKyAiXSkiCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gcHJlZml4ICsgc3RhdGljSGFuZGxlcnMKICAgIH0KICB9CgogIGZ1bmN0aW9uIGdlbkhhbmRsZXIgKGhhbmRsZXIpIHsKICAgIGlmICghaGFuZGxlcikgewogICAgICByZXR1cm4gJ2Z1bmN0aW9uKCl7fScKICAgIH0KCiAgICBpZiAoQXJyYXkuaXNBcnJheShoYW5kbGVyKSkgewogICAgICByZXR1cm4gKCJbIiArIChoYW5kbGVyLm1hcChmdW5jdGlvbiAoaGFuZGxlcikgeyByZXR1cm4gZ2VuSGFuZGxlcihoYW5kbGVyKTsgfSkuam9pbignLCcpKSArICJdIikKICAgIH0KCiAgICB2YXIgaXNNZXRob2RQYXRoID0gc2ltcGxlUGF0aFJFLnRlc3QoaGFuZGxlci52YWx1ZSk7CiAgICB2YXIgaXNGdW5jdGlvbkV4cHJlc3Npb24gPSBmbkV4cFJFLnRlc3QoaGFuZGxlci52YWx1ZSk7CiAgICB2YXIgaXNGdW5jdGlvbkludm9jYXRpb24gPSBzaW1wbGVQYXRoUkUudGVzdChoYW5kbGVyLnZhbHVlLnJlcGxhY2UoZm5JbnZva2VSRSwgJycpKTsKCiAgICBpZiAoIWhhbmRsZXIubW9kaWZpZXJzKSB7CiAgICAgIGlmIChpc01ldGhvZFBhdGggfHwgaXNGdW5jdGlvbkV4cHJlc3Npb24pIHsKICAgICAgICByZXR1cm4gaGFuZGxlci52YWx1ZQogICAgICB9CiAgICAgIHJldHVybiAoImZ1bmN0aW9uKCRldmVudCl7IiArIChpc0Z1bmN0aW9uSW52b2NhdGlvbiA/ICgicmV0dXJuICIgKyAoaGFuZGxlci52YWx1ZSkpIDogaGFuZGxlci52YWx1ZSkgKyAifSIpIC8vIGlubGluZSBzdGF0ZW1lbnQKICAgIH0gZWxzZSB7CiAgICAgIHZhciBjb2RlID0gJyc7CiAgICAgIHZhciBnZW5Nb2RpZmllckNvZGUgPSAnJzsKICAgICAgdmFyIGtleXMgPSBbXTsKICAgICAgZm9yICh2YXIga2V5IGluIGhhbmRsZXIubW9kaWZpZXJzKSB7CiAgICAgICAgaWYgKG1vZGlmaWVyQ29kZVtrZXldKSB7CiAgICAgICAgICBnZW5Nb2RpZmllckNvZGUgKz0gbW9kaWZpZXJDb2RlW2tleV07CiAgICAgICAgICAvLyBsZWZ0L3JpZ2h0CiAgICAgICAgICBpZiAoa2V5Q29kZXNba2V5XSkgewogICAgICAgICAgICBrZXlzLnB1c2goa2V5KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2V4YWN0JykgewogICAgICAgICAgdmFyIG1vZGlmaWVycyA9IChoYW5kbGVyLm1vZGlmaWVycyk7CiAgICAgICAgICBnZW5Nb2RpZmllckNvZGUgKz0gZ2VuR3VhcmQoCiAgICAgICAgICAgIFsnY3RybCcsICdzaGlmdCcsICdhbHQnLCAnbWV0YSddCiAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoa2V5TW9kaWZpZXIpIHsgcmV0dXJuICFtb2RpZmllcnNba2V5TW9kaWZpZXJdOyB9KQogICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGtleU1vZGlmaWVyKSB7IHJldHVybiAoIiRldmVudC4iICsga2V5TW9kaWZpZXIgKyAiS2V5Iik7IH0pCiAgICAgICAgICAgICAgLmpvaW4oJ3x8JykKICAgICAgICAgICk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGtleXMucHVzaChrZXkpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoa2V5cy5sZW5ndGgpIHsKICAgICAgICBjb2RlICs9IGdlbktleUZpbHRlcihrZXlzKTsKICAgICAgfQogICAgICAvLyBNYWtlIHN1cmUgbW9kaWZpZXJzIGxpa2UgcHJldmVudCBhbmQgc3RvcCBnZXQgZXhlY3V0ZWQgYWZ0ZXIga2V5IGZpbHRlcmluZwogICAgICBpZiAoZ2VuTW9kaWZpZXJDb2RlKSB7CiAgICAgICAgY29kZSArPSBnZW5Nb2RpZmllckNvZGU7CiAgICAgIH0KICAgICAgdmFyIGhhbmRsZXJDb2RlID0gaXNNZXRob2RQYXRoCiAgICAgICAgPyAoInJldHVybiAiICsgKGhhbmRsZXIudmFsdWUpICsgIigkZXZlbnQpIikKICAgICAgICA6IGlzRnVuY3Rpb25FeHByZXNzaW9uCiAgICAgICAgICA/ICgicmV0dXJuICgiICsgKGhhbmRsZXIudmFsdWUpICsgIikoJGV2ZW50KSIpCiAgICAgICAgICA6IGlzRnVuY3Rpb25JbnZvY2F0aW9uCiAgICAgICAgICAgID8gKCJyZXR1cm4gIiArIChoYW5kbGVyLnZhbHVlKSkKICAgICAgICAgICAgOiBoYW5kbGVyLnZhbHVlOwogICAgICByZXR1cm4gKCJmdW5jdGlvbigkZXZlbnQpeyIgKyBjb2RlICsgaGFuZGxlckNvZGUgKyAifSIpCiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZW5LZXlGaWx0ZXIgKGtleXMpIHsKICAgIHJldHVybiAoCiAgICAgIC8vIG1ha2Ugc3VyZSB0aGUga2V5IGZpbHRlcnMgb25seSBhcHBseSB0byBLZXlib2FyZEV2ZW50cwogICAgICAvLyAjOTQ0MTogY2FuJ3QgdXNlICdrZXlDb2RlJyBpbiAkZXZlbnQgYmVjYXVzZSBDaHJvbWUgYXV0b2ZpbGwgZmlyZXMgZmFrZQogICAgICAvLyBrZXkgZXZlbnRzIHRoYXQgZG8gbm90IGhhdmUga2V5Q29kZSBwcm9wZXJ0eS4uLgogICAgICAiaWYoISRldmVudC50eXBlLmluZGV4T2YoJ2tleScpJiYiICsKICAgICAgKGtleXMubWFwKGdlbkZpbHRlckNvZGUpLmpvaW4oJyYmJykpICsgIilyZXR1cm4gbnVsbDsiCiAgICApCiAgfQoKICBmdW5jdGlvbiBnZW5GaWx0ZXJDb2RlIChrZXkpIHsKICAgIHZhciBrZXlWYWwgPSBwYXJzZUludChrZXksIDEwKTsKICAgIGlmIChrZXlWYWwpIHsKICAgICAgcmV0dXJuICgiJGV2ZW50LmtleUNvZGUhPT0iICsga2V5VmFsKQogICAgfQogICAgdmFyIGtleUNvZGUgPSBrZXlDb2Rlc1trZXldOwogICAgdmFyIGtleU5hbWUgPSBrZXlOYW1lc1trZXldOwogICAgcmV0dXJuICgKICAgICAgIl9rKCRldmVudC5rZXlDb2RlLCIgKwogICAgICAoSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAiLCIgKwogICAgICAoSlNPTi5zdHJpbmdpZnkoa2V5Q29kZSkpICsgIiwiICsKICAgICAgIiRldmVudC5rZXksIiArCiAgICAgICIiICsgKEpTT04uc3RyaW5naWZ5KGtleU5hbWUpKSArCiAgICAgICIpIgogICAgKQogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIG9uIChlbCwgZGlyKSB7CiAgICBpZiAoZGlyLm1vZGlmaWVycykgewogICAgICB3YXJuKCJ2LW9uIHdpdGhvdXQgYXJndW1lbnQgZG9lcyBub3Qgc3VwcG9ydCBtb2RpZmllcnMuIik7CiAgICB9CiAgICBlbC53cmFwTGlzdGVuZXJzID0gZnVuY3Rpb24gKGNvZGUpIHsgcmV0dXJuICgiX2coIiArIGNvZGUgKyAiLCIgKyAoZGlyLnZhbHVlKSArICIpIik7IH07CiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gYmluZCQxIChlbCwgZGlyKSB7CiAgICBlbC53cmFwRGF0YSA9IGZ1bmN0aW9uIChjb2RlKSB7CiAgICAgIHJldHVybiAoIl9iKCIgKyBjb2RlICsgIiwnIiArIChlbC50YWcpICsgIicsIiArIChkaXIudmFsdWUpICsgIiwiICsgKGRpci5tb2RpZmllcnMgJiYgZGlyLm1vZGlmaWVycy5wcm9wID8gJ3RydWUnIDogJ2ZhbHNlJykgKyAoZGlyLm1vZGlmaWVycyAmJiBkaXIubW9kaWZpZXJzLnN5bmMgPyAnLHRydWUnIDogJycpICsgIikiKQogICAgfTsKICB9CgogIC8qICAqLwoKICB2YXIgYmFzZURpcmVjdGl2ZXMgPSB7CiAgICBvbjogb24sCiAgICBiaW5kOiBiaW5kJDEsCiAgICBjbG9hazogbm9vcAogIH07CgogIC8qICAqLwoKCgoKCiAgdmFyIENvZGVnZW5TdGF0ZSA9IGZ1bmN0aW9uIENvZGVnZW5TdGF0ZSAob3B0aW9ucykgewogICAgdGhpcy5vcHRpb25zID0gb3B0aW9uczsKICAgIHRoaXMud2FybiA9IG9wdGlvbnMud2FybiB8fCBiYXNlV2FybjsKICAgIHRoaXMudHJhbnNmb3JtcyA9IHBsdWNrTW9kdWxlRnVuY3Rpb24ob3B0aW9ucy5tb2R1bGVzLCAndHJhbnNmb3JtQ29kZScpOwogICAgdGhpcy5kYXRhR2VuRm5zID0gcGx1Y2tNb2R1bGVGdW5jdGlvbihvcHRpb25zLm1vZHVsZXMsICdnZW5EYXRhJyk7CiAgICB0aGlzLmRpcmVjdGl2ZXMgPSBleHRlbmQoZXh0ZW5kKHt9LCBiYXNlRGlyZWN0aXZlcyksIG9wdGlvbnMuZGlyZWN0aXZlcyk7CiAgICB2YXIgaXNSZXNlcnZlZFRhZyA9IG9wdGlvbnMuaXNSZXNlcnZlZFRhZyB8fCBubzsKICAgIHRoaXMubWF5YmVDb21wb25lbnQgPSBmdW5jdGlvbiAoZWwpIHsgcmV0dXJuICEhZWwuY29tcG9uZW50IHx8ICFpc1Jlc2VydmVkVGFnKGVsLnRhZyk7IH07CiAgICB0aGlzLm9uY2VJZCA9IDA7CiAgICB0aGlzLnN0YXRpY1JlbmRlckZucyA9IFtdOwogICAgdGhpcy5wcmUgPSBmYWxzZTsKICB9OwoKCgogIGZ1bmN0aW9uIGdlbmVyYXRlICgKICAgIGFzdCwKICAgIG9wdGlvbnMKICApIHsKICAgIHZhciBzdGF0ZSA9IG5ldyBDb2RlZ2VuU3RhdGUob3B0aW9ucyk7CiAgICB2YXIgY29kZSA9IGFzdCA/IGdlbkVsZW1lbnQoYXN0LCBzdGF0ZSkgOiAnX2MoImRpdiIpJzsKICAgIHJldHVybiB7CiAgICAgIHJlbmRlcjogKCJ3aXRoKHRoaXMpe3JldHVybiAiICsgY29kZSArICJ9IiksCiAgICAgIHN0YXRpY1JlbmRlckZuczogc3RhdGUuc3RhdGljUmVuZGVyRm5zCiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZW5FbGVtZW50IChlbCwgc3RhdGUpIHsKICAgIGlmIChlbC5wYXJlbnQpIHsKICAgICAgZWwucHJlID0gZWwucHJlIHx8IGVsLnBhcmVudC5wcmU7CiAgICB9CgogICAgaWYgKGVsLnN0YXRpY1Jvb3QgJiYgIWVsLnN0YXRpY1Byb2Nlc3NlZCkgewogICAgICByZXR1cm4gZ2VuU3RhdGljKGVsLCBzdGF0ZSkKICAgIH0gZWxzZSBpZiAoZWwub25jZSAmJiAhZWwub25jZVByb2Nlc3NlZCkgewogICAgICByZXR1cm4gZ2VuT25jZShlbCwgc3RhdGUpCiAgICB9IGVsc2UgaWYgKGVsLmZvciAmJiAhZWwuZm9yUHJvY2Vzc2VkKSB7CiAgICAgIHJldHVybiBnZW5Gb3IoZWwsIHN0YXRlKQogICAgfSBlbHNlIGlmIChlbC5pZiAmJiAhZWwuaWZQcm9jZXNzZWQpIHsKICAgICAgcmV0dXJuIGdlbklmKGVsLCBzdGF0ZSkKICAgIH0gZWxzZSBpZiAoZWwudGFnID09PSAndGVtcGxhdGUnICYmICFlbC5zbG90VGFyZ2V0ICYmICFzdGF0ZS5wcmUpIHsKICAgICAgcmV0dXJuIGdlbkNoaWxkcmVuKGVsLCBzdGF0ZSkgfHwgJ3ZvaWQgMCcKICAgIH0gZWxzZSBpZiAoZWwudGFnID09PSAnc2xvdCcpIHsKICAgICAgcmV0dXJuIGdlblNsb3QoZWwsIHN0YXRlKQogICAgfSBlbHNlIHsKICAgICAgLy8gY29tcG9uZW50IG9yIGVsZW1lbnQKICAgICAgdmFyIGNvZGU7CiAgICAgIGlmIChlbC5jb21wb25lbnQpIHsKICAgICAgICBjb2RlID0gZ2VuQ29tcG9uZW50KGVsLmNvbXBvbmVudCwgZWwsIHN0YXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgZGF0YTsKICAgICAgICBpZiAoIWVsLnBsYWluIHx8IChlbC5wcmUgJiYgc3RhdGUubWF5YmVDb21wb25lbnQoZWwpKSkgewogICAgICAgICAgZGF0YSA9IGdlbkRhdGEkMihlbCwgc3RhdGUpOwogICAgICAgIH0KCiAgICAgICAgdmFyIGNoaWxkcmVuID0gZWwuaW5saW5lVGVtcGxhdGUgPyBudWxsIDogZ2VuQ2hpbGRyZW4oZWwsIHN0YXRlLCB0cnVlKTsKICAgICAgICBjb2RlID0gIl9jKCciICsgKGVsLnRhZykgKyAiJyIgKyAoZGF0YSA/ICgiLCIgKyBkYXRhKSA6ICcnKSArIChjaGlsZHJlbiA/ICgiLCIgKyBjaGlsZHJlbikgOiAnJykgKyAiKSI7CiAgICAgIH0KICAgICAgLy8gbW9kdWxlIHRyYW5zZm9ybXMKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGF0ZS50cmFuc2Zvcm1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29kZSA9IHN0YXRlLnRyYW5zZm9ybXNbaV0oZWwsIGNvZGUpOwogICAgICB9CiAgICAgIHJldHVybiBjb2RlCiAgICB9CiAgfQoKICAvLyBob2lzdCBzdGF0aWMgc3ViLXRyZWVzIG91dAogIGZ1bmN0aW9uIGdlblN0YXRpYyAoZWwsIHN0YXRlKSB7CiAgICBlbC5zdGF0aWNQcm9jZXNzZWQgPSB0cnVlOwogICAgLy8gU29tZSBlbGVtZW50cyAodGVtcGxhdGVzKSBuZWVkIHRvIGJlaGF2ZSBkaWZmZXJlbnRseSBpbnNpZGUgb2YgYSB2LXByZQogICAgLy8gbm9kZS4gIEFsbCBwcmUgbm9kZXMgYXJlIHN0YXRpYyByb290cywgc28gd2UgY2FuIHVzZSB0aGlzIGFzIGEgbG9jYXRpb24gdG8KICAgIC8vIHdyYXAgYSBzdGF0ZSBjaGFuZ2UgYW5kIHJlc2V0IGl0IHVwb24gZXhpdGluZyB0aGUgcHJlIG5vZGUuCiAgICB2YXIgb3JpZ2luYWxQcmVTdGF0ZSA9IHN0YXRlLnByZTsKICAgIGlmIChlbC5wcmUpIHsKICAgICAgc3RhdGUucHJlID0gZWwucHJlOwogICAgfQogICAgc3RhdGUuc3RhdGljUmVuZGVyRm5zLnB1c2goKCJ3aXRoKHRoaXMpe3JldHVybiAiICsgKGdlbkVsZW1lbnQoZWwsIHN0YXRlKSkgKyAifSIpKTsKICAgIHN0YXRlLnByZSA9IG9yaWdpbmFsUHJlU3RhdGU7CiAgICByZXR1cm4gKCJfbSgiICsgKHN0YXRlLnN0YXRpY1JlbmRlckZucy5sZW5ndGggLSAxKSArIChlbC5zdGF0aWNJbkZvciA/ICcsdHJ1ZScgOiAnJykgKyAiKSIpCiAgfQoKICAvLyB2LW9uY2UKICBmdW5jdGlvbiBnZW5PbmNlIChlbCwgc3RhdGUpIHsKICAgIGVsLm9uY2VQcm9jZXNzZWQgPSB0cnVlOwogICAgaWYgKGVsLmlmICYmICFlbC5pZlByb2Nlc3NlZCkgewogICAgICByZXR1cm4gZ2VuSWYoZWwsIHN0YXRlKQogICAgfSBlbHNlIGlmIChlbC5zdGF0aWNJbkZvcikgewogICAgICB2YXIga2V5ID0gJyc7CiAgICAgIHZhciBwYXJlbnQgPSBlbC5wYXJlbnQ7CiAgICAgIHdoaWxlIChwYXJlbnQpIHsKICAgICAgICBpZiAocGFyZW50LmZvcikgewogICAgICAgICAga2V5ID0gcGFyZW50LmtleTsKICAgICAgICAgIGJyZWFrCiAgICAgICAgfQogICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7CiAgICAgIH0KICAgICAgaWYgKCFrZXkpIHsKICAgICAgICBzdGF0ZS53YXJuKAogICAgICAgICAgInYtb25jZSBjYW4gb25seSBiZSB1c2VkIGluc2lkZSB2LWZvciB0aGF0IGlzIGtleWVkLiAiLAogICAgICAgICAgZWwucmF3QXR0cnNNYXBbJ3Ytb25jZSddCiAgICAgICAgKTsKICAgICAgICByZXR1cm4gZ2VuRWxlbWVudChlbCwgc3RhdGUpCiAgICAgIH0KICAgICAgcmV0dXJuICgiX28oIiArIChnZW5FbGVtZW50KGVsLCBzdGF0ZSkpICsgIiwiICsgKHN0YXRlLm9uY2VJZCsrKSArICIsIiArIGtleSArICIpIikKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBnZW5TdGF0aWMoZWwsIHN0YXRlKQogICAgfQogIH0KCiAgZnVuY3Rpb24gZ2VuSWYgKAogICAgZWwsCiAgICBzdGF0ZSwKICAgIGFsdEdlbiwKICAgIGFsdEVtcHR5CiAgKSB7CiAgICBlbC5pZlByb2Nlc3NlZCA9IHRydWU7IC8vIGF2b2lkIHJlY3Vyc2lvbgogICAgcmV0dXJuIGdlbklmQ29uZGl0aW9ucyhlbC5pZkNvbmRpdGlvbnMuc2xpY2UoKSwgc3RhdGUsIGFsdEdlbiwgYWx0RW1wdHkpCiAgfQoKICBmdW5jdGlvbiBnZW5JZkNvbmRpdGlvbnMgKAogICAgY29uZGl0aW9ucywKICAgIHN0YXRlLAogICAgYWx0R2VuLAogICAgYWx0RW1wdHkKICApIHsKICAgIGlmICghY29uZGl0aW9ucy5sZW5ndGgpIHsKICAgICAgcmV0dXJuIGFsdEVtcHR5IHx8ICdfZSgpJwogICAgfQoKICAgIHZhciBjb25kaXRpb24gPSBjb25kaXRpb25zLnNoaWZ0KCk7CiAgICBpZiAoY29uZGl0aW9uLmV4cCkgewogICAgICByZXR1cm4gKCIoIiArIChjb25kaXRpb24uZXhwKSArICIpPyIgKyAoZ2VuVGVybmFyeUV4cChjb25kaXRpb24uYmxvY2spKSArICI6IiArIChnZW5JZkNvbmRpdGlvbnMoY29uZGl0aW9ucywgc3RhdGUsIGFsdEdlbiwgYWx0RW1wdHkpKSkKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiAoIiIgKyAoZ2VuVGVybmFyeUV4cChjb25kaXRpb24uYmxvY2spKSkKICAgIH0KCiAgICAvLyB2LWlmIHdpdGggdi1vbmNlIHNob3VsZCBnZW5lcmF0ZSBjb2RlIGxpa2UgKGEpP19tKDApOl9tKDEpCiAgICBmdW5jdGlvbiBnZW5UZXJuYXJ5RXhwIChlbCkgewogICAgICByZXR1cm4gYWx0R2VuCiAgICAgICAgPyBhbHRHZW4oZWwsIHN0YXRlKQogICAgICAgIDogZWwub25jZQogICAgICAgICAgPyBnZW5PbmNlKGVsLCBzdGF0ZSkKICAgICAgICAgIDogZ2VuRWxlbWVudChlbCwgc3RhdGUpCiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZW5Gb3IgKAogICAgZWwsCiAgICBzdGF0ZSwKICAgIGFsdEdlbiwKICAgIGFsdEhlbHBlcgogICkgewogICAgdmFyIGV4cCA9IGVsLmZvcjsKICAgIHZhciBhbGlhcyA9IGVsLmFsaWFzOwogICAgdmFyIGl0ZXJhdG9yMSA9IGVsLml0ZXJhdG9yMSA/ICgiLCIgKyAoZWwuaXRlcmF0b3IxKSkgOiAnJzsKICAgIHZhciBpdGVyYXRvcjIgPSBlbC5pdGVyYXRvcjIgPyAoIiwiICsgKGVsLml0ZXJhdG9yMikpIDogJyc7CgogICAgaWYgKHN0YXRlLm1heWJlQ29tcG9uZW50KGVsKSAmJgogICAgICBlbC50YWcgIT09ICdzbG90JyAmJgogICAgICBlbC50YWcgIT09ICd0ZW1wbGF0ZScgJiYKICAgICAgIWVsLmtleQogICAgKSB7CiAgICAgIHN0YXRlLndhcm4oCiAgICAgICAgIjwiICsgKGVsLnRhZykgKyAiIHYtZm9yPVwiIiArIGFsaWFzICsgIiBpbiAiICsgZXhwICsgIlwiPjogY29tcG9uZW50IGxpc3RzIHJlbmRlcmVkIHdpdGggIiArCiAgICAgICAgInYtZm9yIHNob3VsZCBoYXZlIGV4cGxpY2l0IGtleXMuICIgKwogICAgICAgICJTZWUgaHR0cHM6Ly92dWVqcy5vcmcvZ3VpZGUvbGlzdC5odG1sI2tleSBmb3IgbW9yZSBpbmZvLiIsCiAgICAgICAgZWwucmF3QXR0cnNNYXBbJ3YtZm9yJ10sCiAgICAgICAgdHJ1ZSAvKiB0aXAgKi8KICAgICAgKTsKICAgIH0KCiAgICBlbC5mb3JQcm9jZXNzZWQgPSB0cnVlOyAvLyBhdm9pZCByZWN1cnNpb24KICAgIHJldHVybiAoYWx0SGVscGVyIHx8ICdfbCcpICsgIigoIiArIGV4cCArICIpLCIgKwogICAgICAiZnVuY3Rpb24oIiArIGFsaWFzICsgaXRlcmF0b3IxICsgaXRlcmF0b3IyICsgIil7IiArCiAgICAgICAgInJldHVybiAiICsgKChhbHRHZW4gfHwgZ2VuRWxlbWVudCkoZWwsIHN0YXRlKSkgKwogICAgICAnfSknCiAgfQoKICBmdW5jdGlvbiBnZW5EYXRhJDIgKGVsLCBzdGF0ZSkgewogICAgdmFyIGRhdGEgPSAneyc7CgogICAgLy8gZGlyZWN0aXZlcyBmaXJzdC4KICAgIC8vIGRpcmVjdGl2ZXMgbWF5IG11dGF0ZSB0aGUgZWwncyBvdGhlciBwcm9wZXJ0aWVzIGJlZm9yZSB0aGV5IGFyZSBnZW5lcmF0ZWQuCiAgICB2YXIgZGlycyA9IGdlbkRpcmVjdGl2ZXMoZWwsIHN0YXRlKTsKICAgIGlmIChkaXJzKSB7IGRhdGEgKz0gZGlycyArICcsJzsgfQoKICAgIC8vIGtleQogICAgaWYgKGVsLmtleSkgewogICAgICBkYXRhICs9ICJrZXk6IiArIChlbC5rZXkpICsgIiwiOwogICAgfQogICAgLy8gcmVmCiAgICBpZiAoZWwucmVmKSB7CiAgICAgIGRhdGEgKz0gInJlZjoiICsgKGVsLnJlZikgKyAiLCI7CiAgICB9CiAgICBpZiAoZWwucmVmSW5Gb3IpIHsKICAgICAgZGF0YSArPSAicmVmSW5Gb3I6dHJ1ZSwiOwogICAgfQogICAgLy8gcHJlCiAgICBpZiAoZWwucHJlKSB7CiAgICAgIGRhdGEgKz0gInByZTp0cnVlLCI7CiAgICB9CiAgICAvLyByZWNvcmQgb3JpZ2luYWwgdGFnIG5hbWUgZm9yIGNvbXBvbmVudHMgdXNpbmcgImlzIiBhdHRyaWJ1dGUKICAgIGlmIChlbC5jb21wb25lbnQpIHsKICAgICAgZGF0YSArPSAidGFnOlwiIiArIChlbC50YWcpICsgIlwiLCI7CiAgICB9CiAgICAvLyBtb2R1bGUgZGF0YSBnZW5lcmF0aW9uIGZ1bmN0aW9ucwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGF0ZS5kYXRhR2VuRm5zLmxlbmd0aDsgaSsrKSB7CiAgICAgIGRhdGEgKz0gc3RhdGUuZGF0YUdlbkZuc1tpXShlbCk7CiAgICB9CiAgICAvLyBhdHRyaWJ1dGVzCiAgICBpZiAoZWwuYXR0cnMpIHsKICAgICAgZGF0YSArPSAiYXR0cnM6IiArIChnZW5Qcm9wcyhlbC5hdHRycykpICsgIiwiOwogICAgfQogICAgLy8gRE9NIHByb3BzCiAgICBpZiAoZWwucHJvcHMpIHsKICAgICAgZGF0YSArPSAiZG9tUHJvcHM6IiArIChnZW5Qcm9wcyhlbC5wcm9wcykpICsgIiwiOwogICAgfQogICAgLy8gZXZlbnQgaGFuZGxlcnMKICAgIGlmIChlbC5ldmVudHMpIHsKICAgICAgZGF0YSArPSAoZ2VuSGFuZGxlcnMoZWwuZXZlbnRzLCBmYWxzZSkpICsgIiwiOwogICAgfQogICAgaWYgKGVsLm5hdGl2ZUV2ZW50cykgewogICAgICBkYXRhICs9IChnZW5IYW5kbGVycyhlbC5uYXRpdmVFdmVudHMsIHRydWUpKSArICIsIjsKICAgIH0KICAgIC8vIHNsb3QgdGFyZ2V0CiAgICAvLyBvbmx5IGZvciBub24tc2NvcGVkIHNsb3RzCiAgICBpZiAoZWwuc2xvdFRhcmdldCAmJiAhZWwuc2xvdFNjb3BlKSB7CiAgICAgIGRhdGEgKz0gInNsb3Q6IiArIChlbC5zbG90VGFyZ2V0KSArICIsIjsKICAgIH0KICAgIC8vIHNjb3BlZCBzbG90cwogICAgaWYgKGVsLnNjb3BlZFNsb3RzKSB7CiAgICAgIGRhdGEgKz0gKGdlblNjb3BlZFNsb3RzKGVsLCBlbC5zY29wZWRTbG90cywgc3RhdGUpKSArICIsIjsKICAgIH0KICAgIC8vIGNvbXBvbmVudCB2LW1vZGVsCiAgICBpZiAoZWwubW9kZWwpIHsKICAgICAgZGF0YSArPSAibW9kZWw6e3ZhbHVlOiIgKyAoZWwubW9kZWwudmFsdWUpICsgIixjYWxsYmFjazoiICsgKGVsLm1vZGVsLmNhbGxiYWNrKSArICIsZXhwcmVzc2lvbjoiICsgKGVsLm1vZGVsLmV4cHJlc3Npb24pICsgIn0sIjsKICAgIH0KICAgIC8vIGlubGluZS10ZW1wbGF0ZQogICAgaWYgKGVsLmlubGluZVRlbXBsYXRlKSB7CiAgICAgIHZhciBpbmxpbmVUZW1wbGF0ZSA9IGdlbklubGluZVRlbXBsYXRlKGVsLCBzdGF0ZSk7CiAgICAgIGlmIChpbmxpbmVUZW1wbGF0ZSkgewogICAgICAgIGRhdGEgKz0gaW5saW5lVGVtcGxhdGUgKyAiLCI7CiAgICAgIH0KICAgIH0KICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoLywkLywgJycpICsgJ30nOwogICAgLy8gdi1iaW5kIGR5bmFtaWMgYXJndW1lbnQgd3JhcAogICAgLy8gdi1iaW5kIHdpdGggZHluYW1pYyBhcmd1bWVudHMgbXVzdCBiZSBhcHBsaWVkIHVzaW5nIHRoZSBzYW1lIHYtYmluZCBvYmplY3QKICAgIC8vIG1lcmdlIGhlbHBlciBzbyB0aGF0IGNsYXNzL3N0eWxlL211c3RVc2VQcm9wIGF0dHJzIGFyZSBoYW5kbGVkIGNvcnJlY3RseS4KICAgIGlmIChlbC5keW5hbWljQXR0cnMpIHsKICAgICAgZGF0YSA9ICJfYigiICsgZGF0YSArICIsXCIiICsgKGVsLnRhZykgKyAiXCIsIiArIChnZW5Qcm9wcyhlbC5keW5hbWljQXR0cnMpKSArICIpIjsKICAgIH0KICAgIC8vIHYtYmluZCBkYXRhIHdyYXAKICAgIGlmIChlbC53cmFwRGF0YSkgewogICAgICBkYXRhID0gZWwud3JhcERhdGEoZGF0YSk7CiAgICB9CiAgICAvLyB2LW9uIGRhdGEgd3JhcAogICAgaWYgKGVsLndyYXBMaXN0ZW5lcnMpIHsKICAgICAgZGF0YSA9IGVsLndyYXBMaXN0ZW5lcnMoZGF0YSk7CiAgICB9CiAgICByZXR1cm4gZGF0YQogIH0KCiAgZnVuY3Rpb24gZ2VuRGlyZWN0aXZlcyAoZWwsIHN0YXRlKSB7CiAgICB2YXIgZGlycyA9IGVsLmRpcmVjdGl2ZXM7CiAgICBpZiAoIWRpcnMpIHsgcmV0dXJuIH0KICAgIHZhciByZXMgPSAnZGlyZWN0aXZlczpbJzsKICAgIHZhciBoYXNSdW50aW1lID0gZmFsc2U7CiAgICB2YXIgaSwgbCwgZGlyLCBuZWVkUnVudGltZTsKICAgIGZvciAoaSA9IDAsIGwgPSBkaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBkaXIgPSBkaXJzW2ldOwogICAgICBuZWVkUnVudGltZSA9IHRydWU7CiAgICAgIHZhciBnZW4gPSBzdGF0ZS5kaXJlY3RpdmVzW2Rpci5uYW1lXTsKICAgICAgaWYgKGdlbikgewogICAgICAgIC8vIGNvbXBpbGUtdGltZSBkaXJlY3RpdmUgdGhhdCBtYW5pcHVsYXRlcyBBU1QuCiAgICAgICAgLy8gcmV0dXJucyB0cnVlIGlmIGl0IGFsc28gbmVlZHMgYSBydW50aW1lIGNvdW50ZXJwYXJ0LgogICAgICAgIG5lZWRSdW50aW1lID0gISFnZW4oZWwsIGRpciwgc3RhdGUud2Fybik7CiAgICAgIH0KICAgICAgaWYgKG5lZWRSdW50aW1lKSB7CiAgICAgICAgaGFzUnVudGltZSA9IHRydWU7CiAgICAgICAgcmVzICs9ICJ7bmFtZTpcIiIgKyAoZGlyLm5hbWUpICsgIlwiLHJhd05hbWU6XCIiICsgKGRpci5yYXdOYW1lKSArICJcIiIgKyAoZGlyLnZhbHVlID8gKCIsdmFsdWU6KCIgKyAoZGlyLnZhbHVlKSArICIpLGV4cHJlc3Npb246IiArIChKU09OLnN0cmluZ2lmeShkaXIudmFsdWUpKSkgOiAnJykgKyAoZGlyLmFyZyA/ICgiLGFyZzoiICsgKGRpci5pc0R5bmFtaWNBcmcgPyBkaXIuYXJnIDogKCJcIiIgKyAoZGlyLmFyZykgKyAiXCIiKSkpIDogJycpICsgKGRpci5tb2RpZmllcnMgPyAoIixtb2RpZmllcnM6IiArIChKU09OLnN0cmluZ2lmeShkaXIubW9kaWZpZXJzKSkpIDogJycpICsgIn0sIjsKICAgICAgfQogICAgfQogICAgaWYgKGhhc1J1bnRpbWUpIHsKICAgICAgcmV0dXJuIHJlcy5zbGljZSgwLCAtMSkgKyAnXScKICAgIH0KICB9CgogIGZ1bmN0aW9uIGdlbklubGluZVRlbXBsYXRlIChlbCwgc3RhdGUpIHsKICAgIHZhciBhc3QgPSBlbC5jaGlsZHJlblswXTsKICAgIGlmIChlbC5jaGlsZHJlbi5sZW5ndGggIT09IDEgfHwgYXN0LnR5cGUgIT09IDEpIHsKICAgICAgc3RhdGUud2FybigKICAgICAgICAnSW5saW5lLXRlbXBsYXRlIGNvbXBvbmVudHMgbXVzdCBoYXZlIGV4YWN0bHkgb25lIGNoaWxkIGVsZW1lbnQuJywKICAgICAgICB7IHN0YXJ0OiBlbC5zdGFydCB9CiAgICAgICk7CiAgICB9CiAgICBpZiAoYXN0ICYmIGFzdC50eXBlID09PSAxKSB7CiAgICAgIHZhciBpbmxpbmVSZW5kZXJGbnMgPSBnZW5lcmF0ZShhc3QsIHN0YXRlLm9wdGlvbnMpOwogICAgICByZXR1cm4gKCJpbmxpbmVUZW1wbGF0ZTp7cmVuZGVyOmZ1bmN0aW9uKCl7IiArIChpbmxpbmVSZW5kZXJGbnMucmVuZGVyKSArICJ9LHN0YXRpY1JlbmRlckZuczpbIiArIChpbmxpbmVSZW5kZXJGbnMuc3RhdGljUmVuZGVyRm5zLm1hcChmdW5jdGlvbiAoY29kZSkgeyByZXR1cm4gKCJmdW5jdGlvbigpeyIgKyBjb2RlICsgIn0iKTsgfSkuam9pbignLCcpKSArICJdfSIpCiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZW5TY29wZWRTbG90cyAoCiAgICBlbCwKICAgIHNsb3RzLAogICAgc3RhdGUKICApIHsKICAgIC8vIGJ5IGRlZmF1bHQgc2NvcGVkIHNsb3RzIGFyZSBjb25zaWRlcmVkICJzdGFibGUiLCB0aGlzIGFsbG93cyBjaGlsZAogICAgLy8gY29tcG9uZW50cyB3aXRoIG9ubHkgc2NvcGVkIHNsb3RzIHRvIHNraXAgZm9yY2VkIHVwZGF0ZXMgZnJvbSBwYXJlbnQuCiAgICAvLyBidXQgaW4gc29tZSBjYXNlcyB3ZSBoYXZlIHRvIGJhaWwtb3V0IG9mIHRoaXMgb3B0aW1pemF0aW9uCiAgICAvLyBmb3IgZXhhbXBsZSBpZiB0aGUgc2xvdCBjb250YWlucyBkeW5hbWljIG5hbWVzLCBoYXMgdi1pZiBvciB2LWZvciBvbiB0aGVtLi4uCiAgICB2YXIgbmVlZHNGb3JjZVVwZGF0ZSA9IGVsLmZvciB8fCBPYmplY3Qua2V5cyhzbG90cykuc29tZShmdW5jdGlvbiAoa2V5KSB7CiAgICAgIHZhciBzbG90ID0gc2xvdHNba2V5XTsKICAgICAgcmV0dXJuICgKICAgICAgICBzbG90LnNsb3RUYXJnZXREeW5hbWljIHx8CiAgICAgICAgc2xvdC5pZiB8fAogICAgICAgIHNsb3QuZm9yIHx8CiAgICAgICAgY29udGFpbnNTbG90Q2hpbGQoc2xvdCkgLy8gaXMgcGFzc2luZyBkb3duIHNsb3QgZnJvbSBwYXJlbnQgd2hpY2ggbWF5IGJlIGR5bmFtaWMKICAgICAgKQogICAgfSk7CgogICAgLy8gIzk1MzQ6IGlmIGEgY29tcG9uZW50IHdpdGggc2NvcGVkIHNsb3RzIGlzIGluc2lkZSBhIGNvbmRpdGlvbmFsIGJyYW5jaCwKICAgIC8vIGl0J3MgcG9zc2libGUgZm9yIHRoZSBzYW1lIGNvbXBvbmVudCB0byBiZSByZXVzZWQgYnV0IHdpdGggZGlmZmVyZW50CiAgICAvLyBjb21waWxlZCBzbG90IGNvbnRlbnQuIFRvIGF2b2lkIHRoYXQsIHdlIGdlbmVyYXRlIGEgdW5pcXVlIGtleSBiYXNlZCBvbgogICAgLy8gdGhlIGdlbmVyYXRlZCBjb2RlIG9mIGFsbCB0aGUgc2xvdCBjb250ZW50cy4KICAgIHZhciBuZWVkc0tleSA9ICEhZWwuaWY7CgogICAgLy8gT1Igd2hlbiBpdCBpcyBpbnNpZGUgYW5vdGhlciBzY29wZWQgc2xvdCBvciB2LWZvciAodGhlIHJlYWN0aXZpdHkgbWF5IGJlCiAgICAvLyBkaXNjb25uZWN0ZWQgZHVlIHRvIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgdmFyaWFibGUpCiAgICAvLyAjOTQzOCwgIzk1MDYKICAgIC8vIFRPRE86IHRoaXMgY2FuIGJlIGZ1cnRoZXIgb3B0aW1pemVkIGJ5IHByb3Blcmx5IGFuYWx5emluZyBpbi1zY29wZSBiaW5kaW5ncwogICAgLy8gYW5kIHNraXAgZm9yY2UgdXBkYXRpbmcgb25lcyB0aGF0IGRvIG5vdCBhY3R1YWxseSB1c2Ugc2NvcGUgdmFyaWFibGVzLgogICAgaWYgKCFuZWVkc0ZvcmNlVXBkYXRlKSB7CiAgICAgIHZhciBwYXJlbnQgPSBlbC5wYXJlbnQ7CiAgICAgIHdoaWxlIChwYXJlbnQpIHsKICAgICAgICBpZiAoCiAgICAgICAgICAocGFyZW50LnNsb3RTY29wZSAmJiBwYXJlbnQuc2xvdFNjb3BlICE9PSBlbXB0eVNsb3RTY29wZVRva2VuKSB8fAogICAgICAgICAgcGFyZW50LmZvcgogICAgICAgICkgewogICAgICAgICAgbmVlZHNGb3JjZVVwZGF0ZSA9IHRydWU7CiAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgICBpZiAocGFyZW50LmlmKSB7CiAgICAgICAgICBuZWVkc0tleSA9IHRydWU7CiAgICAgICAgfQogICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7CiAgICAgIH0KICAgIH0KCiAgICB2YXIgZ2VuZXJhdGVkU2xvdHMgPSBPYmplY3Qua2V5cyhzbG90cykKICAgICAgLm1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBnZW5TY29wZWRTbG90KHNsb3RzW2tleV0sIHN0YXRlKTsgfSkKICAgICAgLmpvaW4oJywnKTsKCiAgICByZXR1cm4gKCJzY29wZWRTbG90czpfdShbIiArIGdlbmVyYXRlZFNsb3RzICsgIl0iICsgKG5lZWRzRm9yY2VVcGRhdGUgPyAiLG51bGwsdHJ1ZSIgOiAiIikgKyAoIW5lZWRzRm9yY2VVcGRhdGUgJiYgbmVlZHNLZXkgPyAoIixudWxsLGZhbHNlLCIgKyAoaGFzaChnZW5lcmF0ZWRTbG90cykpKSA6ICIiKSArICIpIikKICB9CgogIGZ1bmN0aW9uIGhhc2goc3RyKSB7CiAgICB2YXIgaGFzaCA9IDUzODE7CiAgICB2YXIgaSA9IHN0ci5sZW5ndGg7CiAgICB3aGlsZShpKSB7CiAgICAgIGhhc2ggPSAoaGFzaCAqIDMzKSBeIHN0ci5jaGFyQ29kZUF0KC0taSk7CiAgICB9CiAgICByZXR1cm4gaGFzaCA+Pj4gMAogIH0KCiAgZnVuY3Rpb24gY29udGFpbnNTbG90Q2hpbGQgKGVsKSB7CiAgICBpZiAoZWwudHlwZSA9PT0gMSkgewogICAgICBpZiAoZWwudGFnID09PSAnc2xvdCcpIHsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICAgIHJldHVybiBlbC5jaGlsZHJlbi5zb21lKGNvbnRhaW5zU2xvdENoaWxkKQogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfQoKICBmdW5jdGlvbiBnZW5TY29wZWRTbG90ICgKICAgIGVsLAogICAgc3RhdGUKICApIHsKICAgIHZhciBpc0xlZ2FjeVN5bnRheCA9IGVsLmF0dHJzTWFwWydzbG90LXNjb3BlJ107CiAgICBpZiAoZWwuaWYgJiYgIWVsLmlmUHJvY2Vzc2VkICYmICFpc0xlZ2FjeVN5bnRheCkgewogICAgICByZXR1cm4gZ2VuSWYoZWwsIHN0YXRlLCBnZW5TY29wZWRTbG90LCAibnVsbCIpCiAgICB9CiAgICBpZiAoZWwuZm9yICYmICFlbC5mb3JQcm9jZXNzZWQpIHsKICAgICAgcmV0dXJuIGdlbkZvcihlbCwgc3RhdGUsIGdlblNjb3BlZFNsb3QpCiAgICB9CiAgICB2YXIgc2xvdFNjb3BlID0gZWwuc2xvdFNjb3BlID09PSBlbXB0eVNsb3RTY29wZVRva2VuCiAgICAgID8gIiIKICAgICAgOiBTdHJpbmcoZWwuc2xvdFNjb3BlKTsKICAgIHZhciBmbiA9ICJmdW5jdGlvbigiICsgc2xvdFNjb3BlICsgIil7IiArCiAgICAgICJyZXR1cm4gIiArIChlbC50YWcgPT09ICd0ZW1wbGF0ZScKICAgICAgICA/IGVsLmlmICYmIGlzTGVnYWN5U3ludGF4CiAgICAgICAgICA/ICgiKCIgKyAoZWwuaWYpICsgIik/IiArIChnZW5DaGlsZHJlbihlbCwgc3RhdGUpIHx8ICd1bmRlZmluZWQnKSArICI6dW5kZWZpbmVkIikKICAgICAgICAgIDogZ2VuQ2hpbGRyZW4oZWwsIHN0YXRlKSB8fCAndW5kZWZpbmVkJwogICAgICAgIDogZ2VuRWxlbWVudChlbCwgc3RhdGUpKSArICJ9IjsKICAgIC8vIHJldmVyc2UgcHJveHkgdi1zbG90IHdpdGhvdXQgc2NvcGUgb24gdGhpcy4kc2xvdHMKICAgIHZhciByZXZlcnNlUHJveHkgPSBzbG90U2NvcGUgPyAiIiA6ICIscHJveHk6dHJ1ZSI7CiAgICByZXR1cm4gKCJ7a2V5OiIgKyAoZWwuc2xvdFRhcmdldCB8fCAiXCJkZWZhdWx0XCIiKSArICIsZm46IiArIGZuICsgcmV2ZXJzZVByb3h5ICsgIn0iKQogIH0KCiAgZnVuY3Rpb24gZ2VuQ2hpbGRyZW4gKAogICAgZWwsCiAgICBzdGF0ZSwKICAgIGNoZWNrU2tpcCwKICAgIGFsdEdlbkVsZW1lbnQsCiAgICBhbHRHZW5Ob2RlCiAgKSB7CiAgICB2YXIgY2hpbGRyZW4gPSBlbC5jaGlsZHJlbjsKICAgIGlmIChjaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgdmFyIGVsJDEgPSBjaGlsZHJlblswXTsKICAgICAgLy8gb3B0aW1pemUgc2luZ2xlIHYtZm9yCiAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPT09IDEgJiYKICAgICAgICBlbCQxLmZvciAmJgogICAgICAgIGVsJDEudGFnICE9PSAndGVtcGxhdGUnICYmCiAgICAgICAgZWwkMS50YWcgIT09ICdzbG90JwogICAgICApIHsKICAgICAgICB2YXIgbm9ybWFsaXphdGlvblR5cGUgPSBjaGVja1NraXAKICAgICAgICAgID8gc3RhdGUubWF5YmVDb21wb25lbnQoZWwkMSkgPyAiLDEiIDogIiwwIgogICAgICAgICAgOiAiIjsKICAgICAgICByZXR1cm4gKCIiICsgKChhbHRHZW5FbGVtZW50IHx8IGdlbkVsZW1lbnQpKGVsJDEsIHN0YXRlKSkgKyBub3JtYWxpemF0aW9uVHlwZSkKICAgICAgfQogICAgICB2YXIgbm9ybWFsaXphdGlvblR5cGUkMSA9IGNoZWNrU2tpcAogICAgICAgID8gZ2V0Tm9ybWFsaXphdGlvblR5cGUoY2hpbGRyZW4sIHN0YXRlLm1heWJlQ29tcG9uZW50KQogICAgICAgIDogMDsKICAgICAgdmFyIGdlbiA9IGFsdEdlbk5vZGUgfHwgZ2VuTm9kZTsKICAgICAgcmV0dXJuICgiWyIgKyAoY2hpbGRyZW4ubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBnZW4oYywgc3RhdGUpOyB9KS5qb2luKCcsJykpICsgIl0iICsgKG5vcm1hbGl6YXRpb25UeXBlJDEgPyAoIiwiICsgbm9ybWFsaXphdGlvblR5cGUkMSkgOiAnJykpCiAgICB9CiAgfQoKICAvLyBkZXRlcm1pbmUgdGhlIG5vcm1hbGl6YXRpb24gbmVlZGVkIGZvciB0aGUgY2hpbGRyZW4gYXJyYXkuCiAgLy8gMDogbm8gbm9ybWFsaXphdGlvbiBuZWVkZWQKICAvLyAxOiBzaW1wbGUgbm9ybWFsaXphdGlvbiBuZWVkZWQgKHBvc3NpYmxlIDEtbGV2ZWwgZGVlcCBuZXN0ZWQgYXJyYXkpCiAgLy8gMjogZnVsbCBub3JtYWxpemF0aW9uIG5lZWRlZAogIGZ1bmN0aW9uIGdldE5vcm1hbGl6YXRpb25UeXBlICgKICAgIGNoaWxkcmVuLAogICAgbWF5YmVDb21wb25lbnQKICApIHsKICAgIHZhciByZXMgPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykgewogICAgICB2YXIgZWwgPSBjaGlsZHJlbltpXTsKICAgICAgaWYgKGVsLnR5cGUgIT09IDEpIHsKICAgICAgICBjb250aW51ZQogICAgICB9CiAgICAgIGlmIChuZWVkc05vcm1hbGl6YXRpb24oZWwpIHx8CiAgICAgICAgICAoZWwuaWZDb25kaXRpb25zICYmIGVsLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uIChjKSB7IHJldHVybiBuZWVkc05vcm1hbGl6YXRpb24oYy5ibG9jayk7IH0pKSkgewogICAgICAgIHJlcyA9IDI7CiAgICAgICAgYnJlYWsKICAgICAgfQogICAgICBpZiAobWF5YmVDb21wb25lbnQoZWwpIHx8CiAgICAgICAgICAoZWwuaWZDb25kaXRpb25zICYmIGVsLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uIChjKSB7IHJldHVybiBtYXliZUNvbXBvbmVudChjLmJsb2NrKTsgfSkpKSB7CiAgICAgICAgcmVzID0gMTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgZnVuY3Rpb24gbmVlZHNOb3JtYWxpemF0aW9uIChlbCkgewogICAgcmV0dXJuIGVsLmZvciAhPT0gdW5kZWZpbmVkIHx8IGVsLnRhZyA9PT0gJ3RlbXBsYXRlJyB8fCBlbC50YWcgPT09ICdzbG90JwogIH0KCiAgZnVuY3Rpb24gZ2VuTm9kZSAobm9kZSwgc3RhdGUpIHsKICAgIGlmIChub2RlLnR5cGUgPT09IDEpIHsKICAgICAgcmV0dXJuIGdlbkVsZW1lbnQobm9kZSwgc3RhdGUpCiAgICB9IGVsc2UgaWYgKG5vZGUudHlwZSA9PT0gMyAmJiBub2RlLmlzQ29tbWVudCkgewogICAgICByZXR1cm4gZ2VuQ29tbWVudChub2RlKQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGdlblRleHQobm9kZSkKICAgIH0KICB9CgogIGZ1bmN0aW9uIGdlblRleHQgKHRleHQpIHsKICAgIHJldHVybiAoIl92KCIgKyAodGV4dC50eXBlID09PSAyCiAgICAgID8gdGV4dC5leHByZXNzaW9uIC8vIG5vIG5lZWQgZm9yICgpIGJlY2F1c2UgYWxyZWFkeSB3cmFwcGVkIGluIF9zKCkKICAgICAgOiB0cmFuc2Zvcm1TcGVjaWFsTmV3bGluZXMoSlNPTi5zdHJpbmdpZnkodGV4dC50ZXh0KSkpICsgIikiKQogIH0KCiAgZnVuY3Rpb24gZ2VuQ29tbWVudCAoY29tbWVudCkgewogICAgcmV0dXJuICgiX2UoIiArIChKU09OLnN0cmluZ2lmeShjb21tZW50LnRleHQpKSArICIpIikKICB9CgogIGZ1bmN0aW9uIGdlblNsb3QgKGVsLCBzdGF0ZSkgewogICAgdmFyIHNsb3ROYW1lID0gZWwuc2xvdE5hbWUgfHwgJyJkZWZhdWx0Iic7CiAgICB2YXIgY2hpbGRyZW4gPSBnZW5DaGlsZHJlbihlbCwgc3RhdGUpOwogICAgdmFyIHJlcyA9ICJfdCgiICsgc2xvdE5hbWUgKyAoY2hpbGRyZW4gPyAoIiwiICsgY2hpbGRyZW4pIDogJycpOwogICAgdmFyIGF0dHJzID0gZWwuYXR0cnMgfHwgZWwuZHluYW1pY0F0dHJzCiAgICAgID8gZ2VuUHJvcHMoKGVsLmF0dHJzIHx8IFtdKS5jb25jYXQoZWwuZHluYW1pY0F0dHJzIHx8IFtdKS5tYXAoZnVuY3Rpb24gKGF0dHIpIHsgcmV0dXJuICh7CiAgICAgICAgICAvLyBzbG90IHByb3BzIGFyZSBjYW1lbGl6ZWQKICAgICAgICAgIG5hbWU6IGNhbWVsaXplKGF0dHIubmFtZSksCiAgICAgICAgICB2YWx1ZTogYXR0ci52YWx1ZSwKICAgICAgICAgIGR5bmFtaWM6IGF0dHIuZHluYW1pYwogICAgICAgIH0pOyB9KSkKICAgICAgOiBudWxsOwogICAgdmFyIGJpbmQkJDEgPSBlbC5hdHRyc01hcFsndi1iaW5kJ107CiAgICBpZiAoKGF0dHJzIHx8IGJpbmQkJDEpICYmICFjaGlsZHJlbikgewogICAgICByZXMgKz0gIixudWxsIjsKICAgIH0KICAgIGlmIChhdHRycykgewogICAgICByZXMgKz0gIiwiICsgYXR0cnM7CiAgICB9CiAgICBpZiAoYmluZCQkMSkgewogICAgICByZXMgKz0gKGF0dHJzID8gJycgOiAnLG51bGwnKSArICIsIiArIGJpbmQkJDE7CiAgICB9CiAgICByZXR1cm4gcmVzICsgJyknCiAgfQoKICAvLyBjb21wb25lbnROYW1lIGlzIGVsLmNvbXBvbmVudCwgdGFrZSBpdCBhcyBhcmd1bWVudCB0byBzaHVuIGZsb3cncyBwZXNzaW1pc3RpYyByZWZpbmVtZW50CiAgZnVuY3Rpb24gZ2VuQ29tcG9uZW50ICgKICAgIGNvbXBvbmVudE5hbWUsCiAgICBlbCwKICAgIHN0YXRlCiAgKSB7CiAgICB2YXIgY2hpbGRyZW4gPSBlbC5pbmxpbmVUZW1wbGF0ZSA/IG51bGwgOiBnZW5DaGlsZHJlbihlbCwgc3RhdGUsIHRydWUpOwogICAgcmV0dXJuICgiX2MoIiArIGNvbXBvbmVudE5hbWUgKyAiLCIgKyAoZ2VuRGF0YSQyKGVsLCBzdGF0ZSkpICsgKGNoaWxkcmVuID8gKCIsIiArIGNoaWxkcmVuKSA6ICcnKSArICIpIikKICB9CgogIGZ1bmN0aW9uIGdlblByb3BzIChwcm9wcykgewogICAgdmFyIHN0YXRpY1Byb3BzID0gIiI7CiAgICB2YXIgZHluYW1pY1Byb3BzID0gIiI7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBwcm9wID0gcHJvcHNbaV07CiAgICAgIHZhciB2YWx1ZSA9IHRyYW5zZm9ybVNwZWNpYWxOZXdsaW5lcyhwcm9wLnZhbHVlKTsKICAgICAgaWYgKHByb3AuZHluYW1pYykgewogICAgICAgIGR5bmFtaWNQcm9wcyArPSAocHJvcC5uYW1lKSArICIsIiArIHZhbHVlICsgIiwiOwogICAgICB9IGVsc2UgewogICAgICAgIHN0YXRpY1Byb3BzICs9ICJcIiIgKyAocHJvcC5uYW1lKSArICJcIjoiICsgdmFsdWUgKyAiLCI7CiAgICAgIH0KICAgIH0KICAgIHN0YXRpY1Byb3BzID0gInsiICsgKHN0YXRpY1Byb3BzLnNsaWNlKDAsIC0xKSkgKyAifSI7CiAgICBpZiAoZHluYW1pY1Byb3BzKSB7CiAgICAgIHJldHVybiAoIl9kKCIgKyBzdGF0aWNQcm9wcyArICIsWyIgKyAoZHluYW1pY1Byb3BzLnNsaWNlKDAsIC0xKSkgKyAiXSkiKQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHN0YXRpY1Byb3BzCiAgICB9CiAgfQoKICAvLyAjMzg5NSwgIzQyNjgKICBmdW5jdGlvbiB0cmFuc2Zvcm1TcGVjaWFsTmV3bGluZXMgKHRleHQpIHsKICAgIHJldHVybiB0ZXh0CiAgICAgIC5yZXBsYWNlKC9cdTIwMjgvZywgJ1xcdTIwMjgnKQogICAgICAucmVwbGFjZSgvXHUyMDI5L2csICdcXHUyMDI5JykKICB9CgogIC8qICAqLwoKCgogIC8vIHRoZXNlIGtleXdvcmRzIHNob3VsZCBub3QgYXBwZWFyIGluc2lkZSBleHByZXNzaW9ucywgYnV0IG9wZXJhdG9ycyBsaWtlCiAgLy8gdHlwZW9mLCBpbnN0YW5jZW9mIGFuZCBpbiBhcmUgYWxsb3dlZAogIHZhciBwcm9oaWJpdGVkS2V5d29yZFJFID0gbmV3IFJlZ0V4cCgnXFxiJyArICgKICAgICdkbyxpZixmb3IsbGV0LG5ldyx0cnksdmFyLGNhc2UsZWxzZSx3aXRoLGF3YWl0LGJyZWFrLGNhdGNoLGNsYXNzLGNvbnN0LCcgKwogICAgJ3N1cGVyLHRocm93LHdoaWxlLHlpZWxkLGRlbGV0ZSxleHBvcnQsaW1wb3J0LHJldHVybixzd2l0Y2gsZGVmYXVsdCwnICsKICAgICdleHRlbmRzLGZpbmFsbHksY29udGludWUsZGVidWdnZXIsZnVuY3Rpb24sYXJndW1lbnRzJwogICkuc3BsaXQoJywnKS5qb2luKCdcXGJ8XFxiJykgKyAnXFxiJyk7CgogIC8vIHRoZXNlIHVuYXJ5IG9wZXJhdG9ycyBzaG91bGQgbm90IGJlIHVzZWQgYXMgcHJvcGVydHkvbWV0aG9kIG5hbWVzCiAgdmFyIHVuYXJ5T3BlcmF0b3JzUkUgPSBuZXcgUmVnRXhwKCdcXGInICsgKAogICAgJ2RlbGV0ZSx0eXBlb2Ysdm9pZCcKICApLnNwbGl0KCcsJykuam9pbignXFxzKlxcKFteXFwpXSpcXCl8XFxiJykgKyAnXFxzKlxcKFteXFwpXSpcXCknKTsKCiAgLy8gc3RyaXAgc3RyaW5ncyBpbiBleHByZXNzaW9ucwogIHZhciBzdHJpcFN0cmluZ1JFID0gLycoPzpbXidcXF18XFwuKSonfCIoPzpbXiJcXF18XFwuKSoifGAoPzpbXmBcXF18XFwuKSpcJFx7fFx9KD86W15gXFxdfFxcLikqYHxgKD86W15gXFxdfFxcLikqYC9nOwoKICAvLyBkZXRlY3QgcHJvYmxlbWF0aWMgZXhwcmVzc2lvbnMgaW4gYSB0ZW1wbGF0ZQogIGZ1bmN0aW9uIGRldGVjdEVycm9ycyAoYXN0LCB3YXJuKSB7CiAgICBpZiAoYXN0KSB7CiAgICAgIGNoZWNrTm9kZShhc3QsIHdhcm4pOwogICAgfQogIH0KCiAgZnVuY3Rpb24gY2hlY2tOb2RlIChub2RlLCB3YXJuKSB7CiAgICBpZiAobm9kZS50eXBlID09PSAxKSB7CiAgICAgIGZvciAodmFyIG5hbWUgaW4gbm9kZS5hdHRyc01hcCkgewogICAgICAgIGlmIChkaXJSRS50ZXN0KG5hbWUpKSB7CiAgICAgICAgICB2YXIgdmFsdWUgPSBub2RlLmF0dHJzTWFwW25hbWVdOwogICAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICAgIHZhciByYW5nZSA9IG5vZGUucmF3QXR0cnNNYXBbbmFtZV07CiAgICAgICAgICAgIGlmIChuYW1lID09PSAndi1mb3InKSB7CiAgICAgICAgICAgICAgY2hlY2tGb3Iobm9kZSwgKCJ2LWZvcj1cIiIgKyB2YWx1ZSArICJcIiIpLCB3YXJuLCByYW5nZSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAob25SRS50ZXN0KG5hbWUpKSB7CiAgICAgICAgICAgICAgY2hlY2tFdmVudCh2YWx1ZSwgKG5hbWUgKyAiPVwiIiArIHZhbHVlICsgIlwiIiksIHdhcm4sIHJhbmdlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjaGVja0V4cHJlc3Npb24odmFsdWUsIChuYW1lICsgIj1cIiIgKyB2YWx1ZSArICJcIiIpLCB3YXJuLCByYW5nZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKG5vZGUuY2hpbGRyZW4pIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNoZWNrTm9kZShub2RlLmNoaWxkcmVuW2ldLCB3YXJuKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAobm9kZS50eXBlID09PSAyKSB7CiAgICAgIGNoZWNrRXhwcmVzc2lvbihub2RlLmV4cHJlc3Npb24sIG5vZGUudGV4dCwgd2Fybiwgbm9kZSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjaGVja0V2ZW50IChleHAsIHRleHQsIHdhcm4sIHJhbmdlKSB7CiAgICB2YXIgc3RpcHBlZCA9IGV4cC5yZXBsYWNlKHN0cmlwU3RyaW5nUkUsICcnKTsKICAgIHZhciBrZXl3b3JkTWF0Y2ggPSBzdGlwcGVkLm1hdGNoKHVuYXJ5T3BlcmF0b3JzUkUpOwogICAgaWYgKGtleXdvcmRNYXRjaCAmJiBzdGlwcGVkLmNoYXJBdChrZXl3b3JkTWF0Y2guaW5kZXggLSAxKSAhPT0gJyQnKSB7CiAgICAgIHdhcm4oCiAgICAgICAgImF2b2lkIHVzaW5nIEphdmFTY3JpcHQgdW5hcnkgb3BlcmF0b3IgYXMgcHJvcGVydHkgbmFtZTogIiArCiAgICAgICAgIlwiIiArIChrZXl3b3JkTWF0Y2hbMF0pICsgIlwiIGluIGV4cHJlc3Npb24gIiArICh0ZXh0LnRyaW0oKSksCiAgICAgICAgcmFuZ2UKICAgICAgKTsKICAgIH0KICAgIGNoZWNrRXhwcmVzc2lvbihleHAsIHRleHQsIHdhcm4sIHJhbmdlKTsKICB9CgogIGZ1bmN0aW9uIGNoZWNrRm9yIChub2RlLCB0ZXh0LCB3YXJuLCByYW5nZSkgewogICAgY2hlY2tFeHByZXNzaW9uKG5vZGUuZm9yIHx8ICcnLCB0ZXh0LCB3YXJuLCByYW5nZSk7CiAgICBjaGVja0lkZW50aWZpZXIobm9kZS5hbGlhcywgJ3YtZm9yIGFsaWFzJywgdGV4dCwgd2FybiwgcmFuZ2UpOwogICAgY2hlY2tJZGVudGlmaWVyKG5vZGUuaXRlcmF0b3IxLCAndi1mb3IgaXRlcmF0b3InLCB0ZXh0LCB3YXJuLCByYW5nZSk7CiAgICBjaGVja0lkZW50aWZpZXIobm9kZS5pdGVyYXRvcjIsICd2LWZvciBpdGVyYXRvcicsIHRleHQsIHdhcm4sIHJhbmdlKTsKICB9CgogIGZ1bmN0aW9uIGNoZWNrSWRlbnRpZmllciAoCiAgICBpZGVudCwKICAgIHR5cGUsCiAgICB0ZXh0LAogICAgd2FybiwKICAgIHJhbmdlCiAgKSB7CiAgICBpZiAodHlwZW9mIGlkZW50ID09PSAnc3RyaW5nJykgewogICAgICB0cnkgewogICAgICAgIG5ldyBGdW5jdGlvbigoInZhciAiICsgaWRlbnQgKyAiPV8iKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB3YXJuKCgiaW52YWxpZCAiICsgdHlwZSArICIgXCIiICsgaWRlbnQgKyAiXCIgaW4gZXhwcmVzc2lvbjogIiArICh0ZXh0LnRyaW0oKSkpLCByYW5nZSk7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGNoZWNrRXhwcmVzc2lvbiAoZXhwLCB0ZXh0LCB3YXJuLCByYW5nZSkgewogICAgdHJ5IHsKICAgICAgbmV3IEZ1bmN0aW9uKCgicmV0dXJuICIgKyBleHApKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdmFyIGtleXdvcmRNYXRjaCA9IGV4cC5yZXBsYWNlKHN0cmlwU3RyaW5nUkUsICcnKS5tYXRjaChwcm9oaWJpdGVkS2V5d29yZFJFKTsKICAgICAgaWYgKGtleXdvcmRNYXRjaCkgewogICAgICAgIHdhcm4oCiAgICAgICAgICAiYXZvaWQgdXNpbmcgSmF2YVNjcmlwdCBrZXl3b3JkIGFzIHByb3BlcnR5IG5hbWU6ICIgKwogICAgICAgICAgIlwiIiArIChrZXl3b3JkTWF0Y2hbMF0pICsgIlwiXG4gIFJhdyBleHByZXNzaW9uOiAiICsgKHRleHQudHJpbSgpKSwKICAgICAgICAgIHJhbmdlCiAgICAgICAgKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB3YXJuKAogICAgICAgICAgImludmFsaWQgZXhwcmVzc2lvbjogIiArIChlLm1lc3NhZ2UpICsgIiBpblxuXG4iICsKICAgICAgICAgICIgICAgIiArIGV4cCArICJcblxuIiArCiAgICAgICAgICAiICBSYXcgZXhwcmVzc2lvbjogIiArICh0ZXh0LnRyaW0oKSkgKyAiXG4iLAogICAgICAgICAgcmFuZ2UKICAgICAgICApOwogICAgICB9CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgdmFyIHJhbmdlID0gMjsKCiAgZnVuY3Rpb24gZ2VuZXJhdGVDb2RlRnJhbWUgKAogICAgc291cmNlLAogICAgc3RhcnQsCiAgICBlbmQKICApIHsKICAgIGlmICggc3RhcnQgPT09IHZvaWQgMCApIHN0YXJ0ID0gMDsKICAgIGlmICggZW5kID09PSB2b2lkIDAgKSBlbmQgPSBzb3VyY2UubGVuZ3RoOwoKICAgIHZhciBsaW5lcyA9IHNvdXJjZS5zcGxpdCgvXHI/XG4vKTsKICAgIHZhciBjb3VudCA9IDA7CiAgICB2YXIgcmVzID0gW107CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGNvdW50ICs9IGxpbmVzW2ldLmxlbmd0aCArIDE7CiAgICAgIGlmIChjb3VudCA+PSBzdGFydCkgewogICAgICAgIGZvciAodmFyIGogPSBpIC0gcmFuZ2U7IGogPD0gaSArIHJhbmdlIHx8IGVuZCA+IGNvdW50OyBqKyspIHsKICAgICAgICAgIGlmIChqIDwgMCB8fCBqID49IGxpbmVzLmxlbmd0aCkgeyBjb250aW51ZSB9CiAgICAgICAgICByZXMucHVzaCgoIiIgKyAoaiArIDEpICsgKHJlcGVhdCQxKCIgIiwgMyAtIFN0cmluZyhqICsgMSkubGVuZ3RoKSkgKyAifCAgIiArIChsaW5lc1tqXSkpKTsKICAgICAgICAgIHZhciBsaW5lTGVuZ3RoID0gbGluZXNbal0ubGVuZ3RoOwogICAgICAgICAgaWYgKGogPT09IGkpIHsKICAgICAgICAgICAgLy8gcHVzaCB1bmRlcmxpbmUKICAgICAgICAgICAgdmFyIHBhZCA9IHN0YXJ0IC0gKGNvdW50IC0gbGluZUxlbmd0aCkgKyAxOwogICAgICAgICAgICB2YXIgbGVuZ3RoID0gZW5kID4gY291bnQgPyBsaW5lTGVuZ3RoIC0gcGFkIDogZW5kIC0gc3RhcnQ7CiAgICAgICAgICAgIHJlcy5wdXNoKCIgICB8ICAiICsgcmVwZWF0JDEoIiAiLCBwYWQpICsgcmVwZWF0JDEoIl4iLCBsZW5ndGgpKTsKICAgICAgICAgIH0gZWxzZSBpZiAoaiA+IGkpIHsKICAgICAgICAgICAgaWYgKGVuZCA+IGNvdW50KSB7CiAgICAgICAgICAgICAgdmFyIGxlbmd0aCQxID0gTWF0aC5taW4oZW5kIC0gY291bnQsIGxpbmVMZW5ndGgpOwogICAgICAgICAgICAgIHJlcy5wdXNoKCIgICB8ICAiICsgcmVwZWF0JDEoIl4iLCBsZW5ndGgkMSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvdW50ICs9IGxpbmVMZW5ndGggKyAxOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBicmVhawogICAgICB9CiAgICB9CiAgICByZXR1cm4gcmVzLmpvaW4oJ1xuJykKICB9CgogIGZ1bmN0aW9uIHJlcGVhdCQxIChzdHIsIG4pIHsKICAgIHZhciByZXN1bHQgPSAnJzsKICAgIGlmIChuID4gMCkgewogICAgICB3aGlsZSAodHJ1ZSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICAgICAgaWYgKG4gJiAxKSB7IHJlc3VsdCArPSBzdHI7IH0KICAgICAgICBuID4+Pj0gMTsKICAgICAgICBpZiAobiA8PSAwKSB7IGJyZWFrIH0KICAgICAgICBzdHIgKz0gc3RyOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gcmVzdWx0CiAgfQoKICAvKiAgKi8KCgoKICBmdW5jdGlvbiBjcmVhdGVGdW5jdGlvbiAoY29kZSwgZXJyb3JzKSB7CiAgICB0cnkgewogICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKGNvZGUpCiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgZXJyb3JzLnB1c2goeyBlcnI6IGVyciwgY29kZTogY29kZSB9KTsKICAgICAgcmV0dXJuIG5vb3AKICAgIH0KICB9CgogIGZ1bmN0aW9uIGNyZWF0ZUNvbXBpbGVUb0Z1bmN0aW9uRm4gKGNvbXBpbGUpIHsKICAgIHZhciBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIGNvbXBpbGVUb0Z1bmN0aW9ucyAoCiAgICAgIHRlbXBsYXRlLAogICAgICBvcHRpb25zLAogICAgICB2bQogICAgKSB7CiAgICAgIG9wdGlvbnMgPSBleHRlbmQoe30sIG9wdGlvbnMpOwogICAgICB2YXIgd2FybiQkMSA9IG9wdGlvbnMud2FybiB8fCB3YXJuOwogICAgICBkZWxldGUgb3B0aW9ucy53YXJuOwoKICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgIHsKICAgICAgICAvLyBkZXRlY3QgcG9zc2libGUgQ1NQIHJlc3RyaWN0aW9uCiAgICAgICAgdHJ5IHsKICAgICAgICAgIG5ldyBGdW5jdGlvbigncmV0dXJuIDEnKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBpZiAoZS50b1N0cmluZygpLm1hdGNoKC91bnNhZmUtZXZhbHxDU1AvKSkgewogICAgICAgICAgICB3YXJuJCQxKAogICAgICAgICAgICAgICdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIHRoZSBzdGFuZGFsb25lIGJ1aWxkIG9mIFZ1ZS5qcyBpbiBhbiAnICsKICAgICAgICAgICAgICAnZW52aXJvbm1lbnQgd2l0aCBDb250ZW50IFNlY3VyaXR5IFBvbGljeSB0aGF0IHByb2hpYml0cyB1bnNhZmUtZXZhbC4gJyArCiAgICAgICAgICAgICAgJ1RoZSB0ZW1wbGF0ZSBjb21waWxlciBjYW5ub3Qgd29yayBpbiB0aGlzIGVudmlyb25tZW50LiBDb25zaWRlciAnICsKICAgICAgICAgICAgICAncmVsYXhpbmcgdGhlIHBvbGljeSB0byBhbGxvdyB1bnNhZmUtZXZhbCBvciBwcmUtY29tcGlsaW5nIHlvdXIgJyArCiAgICAgICAgICAgICAgJ3RlbXBsYXRlcyBpbnRvIHJlbmRlciBmdW5jdGlvbnMuJwogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gY2hlY2sgY2FjaGUKICAgICAgdmFyIGtleSA9IG9wdGlvbnMuZGVsaW1pdGVycwogICAgICAgID8gU3RyaW5nKG9wdGlvbnMuZGVsaW1pdGVycykgKyB0ZW1wbGF0ZQogICAgICAgIDogdGVtcGxhdGU7CiAgICAgIGlmIChjYWNoZVtrZXldKSB7CiAgICAgICAgcmV0dXJuIGNhY2hlW2tleV0KICAgICAgfQoKICAgICAgLy8gY29tcGlsZQogICAgICB2YXIgY29tcGlsZWQgPSBjb21waWxlKHRlbXBsYXRlLCBvcHRpb25zKTsKCiAgICAgIC8vIGNoZWNrIGNvbXBpbGF0aW9uIGVycm9ycy90aXBzCiAgICAgIHsKICAgICAgICBpZiAoY29tcGlsZWQuZXJyb3JzICYmIGNvbXBpbGVkLmVycm9ycy5sZW5ndGgpIHsKICAgICAgICAgIGlmIChvcHRpb25zLm91dHB1dFNvdXJjZVJhbmdlKSB7CiAgICAgICAgICAgIGNvbXBpbGVkLmVycm9ycy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgd2FybiQkMSgKICAgICAgICAgICAgICAgICJFcnJvciBjb21waWxpbmcgdGVtcGxhdGU6XG5cbiIgKyAoZS5tc2cpICsgIlxuXG4iICsKICAgICAgICAgICAgICAgIGdlbmVyYXRlQ29kZUZyYW1lKHRlbXBsYXRlLCBlLnN0YXJ0LCBlLmVuZCksCiAgICAgICAgICAgICAgICB2bQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgd2FybiQkMSgKICAgICAgICAgICAgICAiRXJyb3IgY29tcGlsaW5nIHRlbXBsYXRlOlxuXG4iICsgdGVtcGxhdGUgKyAiXG5cbiIgKwogICAgICAgICAgICAgIGNvbXBpbGVkLmVycm9ycy5tYXAoZnVuY3Rpb24gKGUpIHsgcmV0dXJuICgiLSAiICsgZSk7IH0pLmpvaW4oJ1xuJykgKyAnXG4nLAogICAgICAgICAgICAgIHZtCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChjb21waWxlZC50aXBzICYmIGNvbXBpbGVkLnRpcHMubGVuZ3RoKSB7CiAgICAgICAgICBpZiAob3B0aW9ucy5vdXRwdXRTb3VyY2VSYW5nZSkgewogICAgICAgICAgICBjb21waWxlZC50aXBzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHRpcChlLm1zZywgdm0pOyB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbXBpbGVkLnRpcHMuZm9yRWFjaChmdW5jdGlvbiAobXNnKSB7IHJldHVybiB0aXAobXNnLCB2bSk7IH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gdHVybiBjb2RlIGludG8gZnVuY3Rpb25zCiAgICAgIHZhciByZXMgPSB7fTsKICAgICAgdmFyIGZuR2VuRXJyb3JzID0gW107CiAgICAgIHJlcy5yZW5kZXIgPSBjcmVhdGVGdW5jdGlvbihjb21waWxlZC5yZW5kZXIsIGZuR2VuRXJyb3JzKTsKICAgICAgcmVzLnN0YXRpY1JlbmRlckZucyA9IGNvbXBpbGVkLnN0YXRpY1JlbmRlckZucy5tYXAoZnVuY3Rpb24gKGNvZGUpIHsKICAgICAgICByZXR1cm4gY3JlYXRlRnVuY3Rpb24oY29kZSwgZm5HZW5FcnJvcnMpCiAgICAgIH0pOwoKICAgICAgLy8gY2hlY2sgZnVuY3Rpb24gZ2VuZXJhdGlvbiBlcnJvcnMuCiAgICAgIC8vIHRoaXMgc2hvdWxkIG9ubHkgaGFwcGVuIGlmIHRoZXJlIGlzIGEgYnVnIGluIHRoZSBjb21waWxlciBpdHNlbGYuCiAgICAgIC8vIG1vc3RseSBmb3IgY29kZWdlbiBkZXZlbG9wbWVudCB1c2UKICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgIHsKICAgICAgICBpZiAoKCFjb21waWxlZC5lcnJvcnMgfHwgIWNvbXBpbGVkLmVycm9ycy5sZW5ndGgpICYmIGZuR2VuRXJyb3JzLmxlbmd0aCkgewogICAgICAgICAgd2FybiQkMSgKICAgICAgICAgICAgIkZhaWxlZCB0byBnZW5lcmF0ZSByZW5kZXIgZnVuY3Rpb246XG5cbiIgKwogICAgICAgICAgICBmbkdlbkVycm9ycy5tYXAoZnVuY3Rpb24gKHJlZikgewogICAgICAgICAgICAgIHZhciBlcnIgPSByZWYuZXJyOwogICAgICAgICAgICAgIHZhciBjb2RlID0gcmVmLmNvZGU7CgogICAgICAgICAgICAgIHJldHVybiAoKGVyci50b1N0cmluZygpKSArICIgaW5cblxuIiArIGNvZGUgKyAiXG4iKTsKICAgICAgICAgIH0pLmpvaW4oJ1xuJyksCiAgICAgICAgICAgIHZtCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIChjYWNoZVtrZXldID0gcmVzKQogICAgfQogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGNyZWF0ZUNvbXBpbGVyQ3JlYXRvciAoYmFzZUNvbXBpbGUpIHsKICAgIHJldHVybiBmdW5jdGlvbiBjcmVhdGVDb21waWxlciAoYmFzZU9wdGlvbnMpIHsKICAgICAgZnVuY3Rpb24gY29tcGlsZSAoCiAgICAgICAgdGVtcGxhdGUsCiAgICAgICAgb3B0aW9ucwogICAgICApIHsKICAgICAgICB2YXIgZmluYWxPcHRpb25zID0gT2JqZWN0LmNyZWF0ZShiYXNlT3B0aW9ucyk7CiAgICAgICAgdmFyIGVycm9ycyA9IFtdOwogICAgICAgIHZhciB0aXBzID0gW107CgogICAgICAgIHZhciB3YXJuID0gZnVuY3Rpb24gKG1zZywgcmFuZ2UsIHRpcCkgewogICAgICAgICAgKHRpcCA/IHRpcHMgOiBlcnJvcnMpLnB1c2gobXNnKTsKICAgICAgICB9OwoKICAgICAgICBpZiAob3B0aW9ucykgewogICAgICAgICAgaWYgKG9wdGlvbnMub3V0cHV0U291cmNlUmFuZ2UpIHsKICAgICAgICAgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lCiAgICAgICAgICAgIHZhciBsZWFkaW5nU3BhY2VMZW5ndGggPSB0ZW1wbGF0ZS5tYXRjaCgvXlxzKi8pWzBdLmxlbmd0aDsKCiAgICAgICAgICAgIHdhcm4gPSBmdW5jdGlvbiAobXNnLCByYW5nZSwgdGlwKSB7CiAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7IG1zZzogbXNnIH07CiAgICAgICAgICAgICAgaWYgKHJhbmdlKSB7CiAgICAgICAgICAgICAgICBpZiAocmFuZ2Uuc3RhcnQgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICBkYXRhLnN0YXJ0ID0gcmFuZ2Uuc3RhcnQgKyBsZWFkaW5nU3BhY2VMZW5ndGg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAocmFuZ2UuZW5kICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgZGF0YS5lbmQgPSByYW5nZS5lbmQgKyBsZWFkaW5nU3BhY2VMZW5ndGg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICh0aXAgPyB0aXBzIDogZXJyb3JzKS5wdXNoKGRhdGEpOwogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgLy8gbWVyZ2UgY3VzdG9tIG1vZHVsZXMKICAgICAgICAgIGlmIChvcHRpb25zLm1vZHVsZXMpIHsKICAgICAgICAgICAgZmluYWxPcHRpb25zLm1vZHVsZXMgPQogICAgICAgICAgICAgIChiYXNlT3B0aW9ucy5tb2R1bGVzIHx8IFtdKS5jb25jYXQob3B0aW9ucy5tb2R1bGVzKTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIG1lcmdlIGN1c3RvbSBkaXJlY3RpdmVzCiAgICAgICAgICBpZiAob3B0aW9ucy5kaXJlY3RpdmVzKSB7CiAgICAgICAgICAgIGZpbmFsT3B0aW9ucy5kaXJlY3RpdmVzID0gZXh0ZW5kKAogICAgICAgICAgICAgIE9iamVjdC5jcmVhdGUoYmFzZU9wdGlvbnMuZGlyZWN0aXZlcyB8fCBudWxsKSwKICAgICAgICAgICAgICBvcHRpb25zLmRpcmVjdGl2ZXMKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIGNvcHkgb3RoZXIgb3B0aW9ucwogICAgICAgICAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMpIHsKICAgICAgICAgICAgaWYgKGtleSAhPT0gJ21vZHVsZXMnICYmIGtleSAhPT0gJ2RpcmVjdGl2ZXMnKSB7CiAgICAgICAgICAgICAgZmluYWxPcHRpb25zW2tleV0gPSBvcHRpb25zW2tleV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZpbmFsT3B0aW9ucy53YXJuID0gd2FybjsKCiAgICAgICAgdmFyIGNvbXBpbGVkID0gYmFzZUNvbXBpbGUodGVtcGxhdGUudHJpbSgpLCBmaW5hbE9wdGlvbnMpOwogICAgICAgIHsKICAgICAgICAgIGRldGVjdEVycm9ycyhjb21waWxlZC5hc3QsIHdhcm4pOwogICAgICAgIH0KICAgICAgICBjb21waWxlZC5lcnJvcnMgPSBlcnJvcnM7CiAgICAgICAgY29tcGlsZWQudGlwcyA9IHRpcHM7CiAgICAgICAgcmV0dXJuIGNvbXBpbGVkCiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgY29tcGlsZTogY29tcGlsZSwKICAgICAgICBjb21waWxlVG9GdW5jdGlvbnM6IGNyZWF0ZUNvbXBpbGVUb0Z1bmN0aW9uRm4oY29tcGlsZSkKICAgICAgfQogICAgfQogIH0KCiAgLyogICovCgogIC8vIGBjcmVhdGVDb21waWxlckNyZWF0b3JgIGFsbG93cyBjcmVhdGluZyBjb21waWxlcnMgdGhhdCB1c2UgYWx0ZXJuYXRpdmUKICAvLyBwYXJzZXIvb3B0aW1pemVyL2NvZGVnZW4sIGUuZyB0aGUgU1NSIG9wdGltaXppbmcgY29tcGlsZXIuCiAgLy8gSGVyZSB3ZSBqdXN0IGV4cG9ydCBhIGRlZmF1bHQgY29tcGlsZXIgdXNpbmcgdGhlIGRlZmF1bHQgcGFydHMuCiAgdmFyIGNyZWF0ZUNvbXBpbGVyID0gY3JlYXRlQ29tcGlsZXJDcmVhdG9yKGZ1bmN0aW9uIGJhc2VDb21waWxlICgKICAgIHRlbXBsYXRlLAogICAgb3B0aW9ucwogICkgewogICAgdmFyIGFzdCA9IHBhcnNlKHRlbXBsYXRlLnRyaW0oKSwgb3B0aW9ucyk7CiAgICBpZiAob3B0aW9ucy5vcHRpbWl6ZSAhPT0gZmFsc2UpIHsKICAgICAgb3B0aW1pemUoYXN0LCBvcHRpb25zKTsKICAgIH0KICAgIHZhciBjb2RlID0gZ2VuZXJhdGUoYXN0LCBvcHRpb25zKTsKICAgIHJldHVybiB7CiAgICAgIGFzdDogYXN0LAogICAgICByZW5kZXI6IGNvZGUucmVuZGVyLAogICAgICBzdGF0aWNSZW5kZXJGbnM6IGNvZGUuc3RhdGljUmVuZGVyRm5zCiAgICB9CiAgfSk7CgogIC8qICAqLwoKICB2YXIgcmVmJDEgPSBjcmVhdGVDb21waWxlcihiYXNlT3B0aW9ucyk7CiAgdmFyIGNvbXBpbGUgPSByZWYkMS5jb21waWxlOwogIHZhciBjb21waWxlVG9GdW5jdGlvbnMgPSByZWYkMS5jb21waWxlVG9GdW5jdGlvbnM7CgogIC8qICAqLwoKICAvLyBjaGVjayB3aGV0aGVyIGN1cnJlbnQgYnJvd3NlciBlbmNvZGVzIGEgY2hhciBpbnNpZGUgYXR0cmlidXRlIHZhbHVlcwogIHZhciBkaXY7CiAgZnVuY3Rpb24gZ2V0U2hvdWxkRGVjb2RlIChocmVmKSB7CiAgICBkaXYgPSBkaXYgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBkaXYuaW5uZXJIVE1MID0gaHJlZiA/ICI8YSBocmVmPVwiXG5cIi8+IiA6ICI8ZGl2IGE9XCJcblwiLz4iOwogICAgcmV0dXJuIGRpdi5pbm5lckhUTUwuaW5kZXhPZignJiMxMDsnKSA+IDAKICB9CgogIC8vICMzNjYzOiBJRSBlbmNvZGVzIG5ld2xpbmVzIGluc2lkZSBhdHRyaWJ1dGUgdmFsdWVzIHdoaWxlIG90aGVyIGJyb3dzZXJzIGRvbid0CiAgdmFyIHNob3VsZERlY29kZU5ld2xpbmVzID0gaW5Ccm93c2VyID8gZ2V0U2hvdWxkRGVjb2RlKGZhbHNlKSA6IGZhbHNlOwogIC8vICM2ODI4OiBjaHJvbWUgZW5jb2RlcyBjb250ZW50IGluIGFbaHJlZl0KICB2YXIgc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmID0gaW5Ccm93c2VyID8gZ2V0U2hvdWxkRGVjb2RlKHRydWUpIDogZmFsc2U7CgogIC8qICAqLwoKICB2YXIgaWRUb1RlbXBsYXRlID0gY2FjaGVkKGZ1bmN0aW9uIChpZCkgewogICAgdmFyIGVsID0gcXVlcnkoaWQpOwogICAgcmV0dXJuIGVsICYmIGVsLmlubmVySFRNTAogIH0pOwoKICB2YXIgbW91bnQgPSBWdWUucHJvdG90eXBlLiRtb3VudDsKICBWdWUucHJvdG90eXBlLiRtb3VudCA9IGZ1bmN0aW9uICgKICAgIGVsLAogICAgaHlkcmF0aW5nCiAgKSB7CiAgICBlbCA9IGVsICYmIHF1ZXJ5KGVsKTsKCiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgIGlmIChlbCA9PT0gZG9jdW1lbnQuYm9keSB8fCBlbCA9PT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7CiAgICAgIHdhcm4oCiAgICAgICAgIkRvIG5vdCBtb3VudCBWdWUgdG8gPGh0bWw+IG9yIDxib2R5PiAtIG1vdW50IHRvIG5vcm1hbCBlbGVtZW50cyBpbnN0ZWFkLiIKICAgICAgKTsKICAgICAgcmV0dXJuIHRoaXMKICAgIH0KCiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7CiAgICAvLyByZXNvbHZlIHRlbXBsYXRlL2VsIGFuZCBjb252ZXJ0IHRvIHJlbmRlciBmdW5jdGlvbgogICAgaWYgKCFvcHRpb25zLnJlbmRlcikgewogICAgICB2YXIgdGVtcGxhdGUgPSBvcHRpb25zLnRlbXBsYXRlOwogICAgICBpZiAodGVtcGxhdGUpIHsKICAgICAgICBpZiAodHlwZW9mIHRlbXBsYXRlID09PSAnc3RyaW5nJykgewogICAgICAgICAgaWYgKHRlbXBsYXRlLmNoYXJBdCgwKSA9PT0gJyMnKSB7CiAgICAgICAgICAgIHRlbXBsYXRlID0gaWRUb1RlbXBsYXRlKHRlbXBsYXRlKTsKICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgICAgICAgIGlmICghdGVtcGxhdGUpIHsKICAgICAgICAgICAgICB3YXJuKAogICAgICAgICAgICAgICAgKCJUZW1wbGF0ZSBlbGVtZW50IG5vdCBmb3VuZCBvciBpcyBlbXB0eTogIiArIChvcHRpb25zLnRlbXBsYXRlKSksCiAgICAgICAgICAgICAgICB0aGlzCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodGVtcGxhdGUubm9kZVR5cGUpIHsKICAgICAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGUuaW5uZXJIVE1MOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB7CiAgICAgICAgICAgIHdhcm4oJ2ludmFsaWQgdGVtcGxhdGUgb3B0aW9uOicgKyB0ZW1wbGF0ZSwgdGhpcyk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdGhpcwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChlbCkgewogICAgICAgIHRlbXBsYXRlID0gZ2V0T3V0ZXJIVE1MKGVsKTsKICAgICAgfQogICAgICBpZiAodGVtcGxhdGUpIHsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgICBpZiAoY29uZmlnLnBlcmZvcm1hbmNlICYmIG1hcmspIHsKICAgICAgICAgIG1hcmsoJ2NvbXBpbGUnKTsKICAgICAgICB9CgogICAgICAgIHZhciByZWYgPSBjb21waWxlVG9GdW5jdGlvbnModGVtcGxhdGUsIHsKICAgICAgICAgIG91dHB1dFNvdXJjZVJhbmdlOiAiZGV2ZWxvcG1lbnQiICE9PSAncHJvZHVjdGlvbicsCiAgICAgICAgICBzaG91bGREZWNvZGVOZXdsaW5lczogc2hvdWxkRGVjb2RlTmV3bGluZXMsCiAgICAgICAgICBzaG91bGREZWNvZGVOZXdsaW5lc0ZvckhyZWY6IHNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZiwKICAgICAgICAgIGRlbGltaXRlcnM6IG9wdGlvbnMuZGVsaW1pdGVycywKICAgICAgICAgIGNvbW1lbnRzOiBvcHRpb25zLmNvbW1lbnRzCiAgICAgICAgfSwgdGhpcyk7CiAgICAgICAgdmFyIHJlbmRlciA9IHJlZi5yZW5kZXI7CiAgICAgICAgdmFyIHN0YXRpY1JlbmRlckZucyA9IHJlZi5zdGF0aWNSZW5kZXJGbnM7CiAgICAgICAgb3B0aW9ucy5yZW5kZXIgPSByZW5kZXI7CiAgICAgICAgb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnMgPSBzdGF0aWNSZW5kZXJGbnM7CgogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICAgIGlmIChjb25maWcucGVyZm9ybWFuY2UgJiYgbWFyaykgewogICAgICAgICAgbWFyaygnY29tcGlsZSBlbmQnKTsKICAgICAgICAgIG1lYXN1cmUoKCJ2dWUgIiArICh0aGlzLl9uYW1lKSArICIgY29tcGlsZSIpLCAnY29tcGlsZScsICdjb21waWxlIGVuZCcpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIG1vdW50LmNhbGwodGhpcywgZWwsIGh5ZHJhdGluZykKICB9OwoKICAvKioKICAgKiBHZXQgb3V0ZXJIVE1MIG9mIGVsZW1lbnRzLCB0YWtpbmcgY2FyZQogICAqIG9mIFNWRyBlbGVtZW50cyBpbiBJRSBhcyB3ZWxsLgogICAqLwogIGZ1bmN0aW9uIGdldE91dGVySFRNTCAoZWwpIHsKICAgIGlmIChlbC5vdXRlckhUTUwpIHsKICAgICAgcmV0dXJuIGVsLm91dGVySFRNTAogICAgfSBlbHNlIHsKICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZWwuY2xvbmVOb2RlKHRydWUpKTsKICAgICAgcmV0dXJuIGNvbnRhaW5lci5pbm5lckhUTUwKICAgIH0KICB9CgogIFZ1ZS5jb21waWxlID0gY29tcGlsZVRvRnVuY3Rpb25zOwoKICByZXR1cm4gVnVlOwoKfSkpOwo="},{"meta":{"name":"xfetch.min.js","url":"https://unpkg.com/xfetch-js@0.3.4/xfetch.min.js","ts":1608788131037,"mimetype":"text/javascript"},"source":"KChhLGIpPT57ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sYik6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWIoKTphLnhmPWIoKX0pKHRoaXMsKCk9Pntjb25zdCBhPVsiZ2V0IiwicG9zdCIsInB1dCIsInBhdGNoIiwiZGVsZXRlIiwiaGVhZCJdO2NsYXNzIGIgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3RvcihhKXtzdXBlcihhLnN0YXR1c1RleHQpLHRoaXMubmFtZT0iSFRUUEVycm9yIix0aGlzLnJlc3BvbnNlPWF9fWNsYXNzIGMgZXh0ZW5kcyBQcm9taXNle31mb3IoY29uc3QgYSBvZlsiYXJyYXlCdWZmZXIiLCJibG9iIiwiZm9ybURhdGEiLCJqc29uIiwidGV4dCJdKWMucHJvdG90eXBlW2FdPWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnRoZW4oYj0+YlthXSgpKS50aGVuKGJ8fChhPT5hKSl9O2NvbnN0e2Fzc2lnbjpkfT1PYmplY3QsZT1hPT5hLnJlZHVjZSgoYSxbYixjXSk9PihhW2JdPWMsYSkse30pLGY9KC4uLmEpPT5iPT5hLnNvbWUoYT0+InN0cmluZyI9PXR5cGVvZiBhP3R5cGVvZiBiPT1hOmIgaW5zdGFuY2VvZiBhKSxnPWYoInN0cmluZyIpLGg9Zigib2JqZWN0IiksaT1hPT5nKGEpfHxoKGEpLGo9YT0+e2lmKCFhLm9rKXRocm93IG5ldyBiKGEpO3JldHVybiBhfSxrPShoPXt9KT0+e2NvbnN0IGw9KGEsYj17fSk9PntkKGIsaCk7Y29uc3Qgaz1hPT5uZXcgYi5VUkxTZWFyY2hQYXJhbXMoYSkudG9TdHJpbmcoKSxsPW5ldyBiLlVSTChhLGIuYmFzZVVSSXx8dm9pZCAwKTtpZihiLmhlYWRlcnM/ZihiLkhlYWRlcnMpKGIuaGVhZGVycykmJihiLmhlYWRlcnM9ZShbLi4uYi5oZWFkZXJzLmVudHJpZXMoKV0pKTpiLmhlYWRlcnM9e30sYi5qc29uKWIuYm9keT1KU09OLnN0cmluZ2lmeShiLmpzb24pLGIuaGVhZGVyc1siQ29udGVudC1UeXBlIl09ImFwcGxpY2F0aW9uL2pzb24iO2Vsc2UgaWYoaShiLnVybGVuY29kZWQpKWIuYm9keT1nKGIudXJsZW5jb2RlZCk/Yi51cmxlbmNvZGVkOmsoYi51cmxlbmNvZGVkKSxiLmhlYWRlcnNbIkNvbnRlbnQtVHlwZSJdPSJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiO2Vsc2UgaWYoZihiLkZvcm1EYXRhLCJvYmplY3QiKShiLmZvcm1EYXRhKSl7aWYoIWYoYi5Gb3JtRGF0YSkoYi5mb3JtRGF0YSkpe2NvbnN0IGE9bmV3IGIuRm9ybURhdGE7Zm9yKGNvbnN0W2MsZF1vZiBPYmplY3QuZW50cmllcyhiLmZvcm1EYXRhKSlhLmFwcGVuZChjLGQpO2IuZm9ybURhdGE9YX1iLmJvZHk9Yi5mb3JtRGF0YX1yZXR1cm4gYi5xcyYmKGcoYi5xcykmJihiLnFzPShhPT5lKFsuLi5uZXcgYi5VUkxTZWFyY2hQYXJhbXMoYSkuZW50cmllcygpXSkpKGIucXMpKSxsLnNlYXJjaD1rKGQoZShbLi4ubC5zZWFyY2hQYXJhbXMuZW50cmllcygpXSksYi5xcykpKSxiLmNyZWRlbnRpYWxzfHwoYi5jcmVkZW50aWFscz0ic2FtZS1vcmlnaW4iKSxjLnJlc29sdmUoYi5mZXRjaChsLGIpLnRoZW4oaikpfTtmb3IoY29uc3QgYiBvZiBhKWxbYl09KGEsYz17fSk9PihjLm1ldGhvZD1iLnRvVXBwZXJDYXNlKCksbChhLGMpKTtyZXR1cm4gbC5leHRlbmQ9YT0+ayhkKHt9LGgsYSkpLGwuSFRUUEVycm9yPWIsbH0sbD0idW5kZWZpbmVkIiE9dHlwZW9mIGRvY3VtZW50LG09InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmO3JldHVybiBtP2soe2ZldGNoOmZldGNoLmJpbmQoc2VsZiksVVJMLFJlc3BvbnNlLFVSTFNlYXJjaFBhcmFtcyxIZWFkZXJzLEZvcm1EYXRhLGJhc2VVUkk6bD9kb2N1bWVudC5iYXNlVVJJOiIifSk6aygpfSk7"},{"meta":{"name":"ffmpeg.min.js","url":"https://unpkg.com/@ffmpeg/ffmpeg@0.6.1/dist/ffmpeg.min.js","ts":1608788131857,"mimetype":"text/javascript"},"source":"IWZ1bmN0aW9uKHQsZSl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sZSk6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuRkZtcGVnPWUoKTp0LkZGbXBlZz1lKCl9KHdpbmRvdywoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGU9e307ZnVuY3Rpb24gcihuKXtpZihlW25dKXJldHVybiBlW25dLmV4cG9ydHM7dmFyIG89ZVtuXT17aTpuLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIHRbbl0uY2FsbChvLmV4cG9ydHMsbyxvLmV4cG9ydHMsciksby5sPSEwLG8uZXhwb3J0c31yZXR1cm4gci5tPXQsci5jPWUsci5kPWZ1bmN0aW9uKHQsZSxuKXtyLm8odCxlKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7ZW51bWVyYWJsZTohMCxnZXQ6bn0pfSxyLnI9ZnVuY3Rpb24odCl7InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KX0sci50PWZ1bmN0aW9uKHQsZSl7aWYoMSZlJiYodD1yKHQpKSw4JmUpcmV0dXJuIHQ7aWYoNCZlJiYib2JqZWN0Ij09dHlwZW9mIHQmJnQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO2lmKHIucihuKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobiwiZGVmYXVsdCIse2VudW1lcmFibGU6ITAsdmFsdWU6dH0pLDImZSYmInN0cmluZyIhPXR5cGVvZiB0KWZvcih2YXIgbyBpbiB0KXIuZChuLG8sZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19LmJpbmQobnVsbCxvKSk7cmV0dXJuIG59LHIubj1mdW5jdGlvbih0KXt2YXIgZT10JiZ0Ll9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gdC5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiB0fTtyZXR1cm4gci5kKGUsImEiLGUpLGV9LHIubz1mdW5jdGlvbih0LGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX0sci5wPSIiLHIoci5zPTQpfShbZnVuY3Rpb24odCxlKXt2YXIgcixuLG89dC5leHBvcnRzPXt9O2Z1bmN0aW9uIGkoKXt0aHJvdyBuZXcgRXJyb3IoInNldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQiKX1mdW5jdGlvbiBhKCl7dGhyb3cgbmV3IEVycm9yKCJjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQiKX1mdW5jdGlvbiBjKHQpe2lmKHI9PT1zZXRUaW1lb3V0KXJldHVybiBzZXRUaW1lb3V0KHQsMCk7aWYoKHI9PT1pfHwhcikmJnNldFRpbWVvdXQpcmV0dXJuIHI9c2V0VGltZW91dCxzZXRUaW1lb3V0KHQsMCk7dHJ5e3JldHVybiByKHQsMCl9Y2F0Y2goZSl7dHJ5e3JldHVybiByLmNhbGwobnVsbCx0LDApfWNhdGNoKGUpe3JldHVybiByLmNhbGwodGhpcyx0LDApfX19IWZ1bmN0aW9uKCl7dHJ5e3I9ImZ1bmN0aW9uIj09dHlwZW9mIHNldFRpbWVvdXQ/c2V0VGltZW91dDppfWNhdGNoKHQpe3I9aX10cnl7bj0iZnVuY3Rpb24iPT10eXBlb2YgY2xlYXJUaW1lb3V0P2NsZWFyVGltZW91dDphfWNhdGNoKHQpe249YX19KCk7dmFyIHUscz1bXSxmPSExLGw9LTE7ZnVuY3Rpb24gcCgpe2YmJnUmJihmPSExLHUubGVuZ3RoP3M9dS5jb25jYXQocyk6bD0tMSxzLmxlbmd0aCYmZCgpKX1mdW5jdGlvbiBkKCl7aWYoIWYpe3ZhciB0PWMocCk7Zj0hMDtmb3IodmFyIGU9cy5sZW5ndGg7ZTspe2Zvcih1PXMscz1bXTsrK2w8ZTspdSYmdVtsXS5ydW4oKTtsPS0xLGU9cy5sZW5ndGh9dT1udWxsLGY9ITEsZnVuY3Rpb24odCl7aWYobj09PWNsZWFyVGltZW91dClyZXR1cm4gY2xlYXJUaW1lb3V0KHQpO2lmKChuPT09YXx8IW4pJiZjbGVhclRpbWVvdXQpcmV0dXJuIG49Y2xlYXJUaW1lb3V0LGNsZWFyVGltZW91dCh0KTt0cnl7bih0KX1jYXRjaChlKXt0cnl7cmV0dXJuIG4uY2FsbChudWxsLHQpfWNhdGNoKGUpe3JldHVybiBuLmNhbGwodGhpcyx0KX19fSh0KX19ZnVuY3Rpb24gaCh0LGUpe3RoaXMuZnVuPXQsdGhpcy5hcnJheT1lfWZ1bmN0aW9uIHkoKXt9by5uZXh0VGljaz1mdW5jdGlvbih0KXt2YXIgZT1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKTtpZihhcmd1bWVudHMubGVuZ3RoPjEpZm9yKHZhciByPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyllW3ItMV09YXJndW1lbnRzW3JdO3MucHVzaChuZXcgaCh0LGUpKSwxIT09cy5sZW5ndGh8fGZ8fGMoZCl9LGgucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3RoaXMuZnVuLmFwcGx5KG51bGwsdGhpcy5hcnJheSl9LG8udGl0bGU9ImJyb3dzZXIiLG8uYnJvd3Nlcj0hMCxvLmVudj17fSxvLmFyZ3Y9W10sby52ZXJzaW9uPSIiLG8udmVyc2lvbnM9e30sby5vbj15LG8uYWRkTGlzdGVuZXI9eSxvLm9uY2U9eSxvLm9mZj15LG8ucmVtb3ZlTGlzdGVuZXI9eSxvLnJlbW92ZUFsbExpc3RlbmVycz15LG8uZW1pdD15LG8ucHJlcGVuZExpc3RlbmVyPXksby5wcmVwZW5kT25jZUxpc3RlbmVyPXksby5saXN0ZW5lcnM9ZnVuY3Rpb24odCl7cmV0dXJuW119LG8uYmluZGluZz1mdW5jdGlvbih0KXt0aHJvdyBuZXcgRXJyb3IoInByb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkIil9LG8uY3dkPWZ1bmN0aW9uKCl7cmV0dXJuIi8ifSxvLmNoZGlyPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBFcnJvcigicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkIil9LG8udW1hc2s9ZnVuY3Rpb24oKXtyZXR1cm4gMH19LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbixvO3ZvaWQgMD09PShvPSJmdW5jdGlvbiI9PXR5cGVvZihuPWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aDtpZigwPT09dCl0aHJvdyBuZXcgRXJyb3IoInJlc29sdmVVcmwgcmVxdWlyZXMgYXQgbGVhc3Qgb25lIGFyZ3VtZW50OyBnb3Qgbm9uZS4iKTt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiYXNlIik7aWYoZS5ocmVmPWFyZ3VtZW50c1swXSwxPT09dClyZXR1cm4gZS5ocmVmO3ZhciByPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF07ci5pbnNlcnRCZWZvcmUoZSxyLmZpcnN0Q2hpbGQpO2Zvcih2YXIgbixvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKSxpPTE7aTx0O2krKylvLmhyZWY9YXJndW1lbnRzW2ldLG49by5ocmVmLGUuaHJlZj1uO3JldHVybiByLnJlbW92ZUNoaWxkKGUpLG59fSk/bi5jYWxsKGUscixlLHQpOm4pfHwodC5leHBvcnRzPW8pfSxmdW5jdGlvbih0LGUpe3ZhciByPXRoaXMsbj0hMTtlLmxvZ2dpbmc9bixlLnNldExvZ2dpbmc9ZnVuY3Rpb24odCl7bj10fSxlLmxvZz1mdW5jdGlvbigpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLGU9bmV3IEFycmF5KHQpLG89MDtvPHQ7bysrKWVbb109YXJndW1lbnRzW29dO3JldHVybiBuP2NvbnNvbGUubG9nLmFwcGx5KHIsZSk6bnVsbH19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIiIuY29uY2F0KHQsIi0iKS5jb25jYXQoZSwiLSIpLmNvbmNhdChNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zbGljZSgzLDgpKX19LGZ1bmN0aW9uKHQsZSxyKXtyKDUpO3ZhciBuPXIoMiksbz1uLmxvZ2dpbmcsaT1uLnNldExvZ2dpbmcsYT1yKDYpO3QuZXhwb3J0cz17bG9nZ2luZzpvLHNldExvZ2dpbmc6aSxjcmVhdGVXb3JrZXI6YX19LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1mdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9T2JqZWN0LnByb3RvdHlwZSxyPWUuaGFzT3duUHJvcGVydHksbj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sP1N5bWJvbDp7fSxvPW4uaXRlcmF0b3J8fCJAQGl0ZXJhdG9yIixpPW4uYXN5bmNJdGVyYXRvcnx8IkBAYXN5bmNJdGVyYXRvciIsYT1uLnRvU3RyaW5nVGFnfHwiQEB0b1N0cmluZ1RhZyI7ZnVuY3Rpb24gYyh0LGUscixuKXt2YXIgbz1lJiZlLnByb3RvdHlwZSBpbnN0YW5jZW9mIGY/ZTpmLGk9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSksYT1uZXcgaihufHxbXSk7cmV0dXJuIGkuX2ludm9rZT1mdW5jdGlvbih0LGUscil7dmFyIG49InN1c3BlbmRlZFN0YXJ0IjtyZXR1cm4gZnVuY3Rpb24obyxpKXtpZigiZXhlY3V0aW5nIj09PW4pdGhyb3cgbmV3IEVycm9yKCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nIik7aWYoImNvbXBsZXRlZCI9PT1uKXtpZigidGhyb3ciPT09byl0aHJvdyBpO3JldHVybiBrKCl9Zm9yKHIubWV0aG9kPW8sci5hcmc9aTs7KXt2YXIgYT1yLmRlbGVnYXRlO2lmKGEpe3ZhciBjPWIoYSxyKTtpZihjKXtpZihjPT09cyljb250aW51ZTtyZXR1cm4gY319aWYoIm5leHQiPT09ci5tZXRob2Qpci5zZW50PXIuX3NlbnQ9ci5hcmc7ZWxzZSBpZigidGhyb3ciPT09ci5tZXRob2Qpe2lmKCJzdXNwZW5kZWRTdGFydCI9PT1uKXRocm93IG49ImNvbXBsZXRlZCIsci5hcmc7ci5kaXNwYXRjaEV4Y2VwdGlvbihyLmFyZyl9ZWxzZSJyZXR1cm4iPT09ci5tZXRob2QmJnIuYWJydXB0KCJyZXR1cm4iLHIuYXJnKTtuPSJleGVjdXRpbmciO3ZhciBmPXUodCxlLHIpO2lmKCJub3JtYWwiPT09Zi50eXBlKXtpZihuPXIuZG9uZT8iY29tcGxldGVkIjoic3VzcGVuZGVkWWllbGQiLGYuYXJnPT09cyljb250aW51ZTtyZXR1cm57dmFsdWU6Zi5hcmcsZG9uZTpyLmRvbmV9fSJ0aHJvdyI9PT1mLnR5cGUmJihuPSJjb21wbGV0ZWQiLHIubWV0aG9kPSJ0aHJvdyIsci5hcmc9Zi5hcmcpfX19KHQscixhKSxpfWZ1bmN0aW9uIHUodCxlLHIpe3RyeXtyZXR1cm57dHlwZToibm9ybWFsIixhcmc6dC5jYWxsKGUscil9fWNhdGNoKHQpe3JldHVybnt0eXBlOiJ0aHJvdyIsYXJnOnR9fX10LndyYXA9Yzt2YXIgcz17fTtmdW5jdGlvbiBmKCl7fWZ1bmN0aW9uIGwoKXt9ZnVuY3Rpb24gcCgpe312YXIgZD17fTtkW29dPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O3ZhciBoPU9iamVjdC5nZXRQcm90b3R5cGVPZix5PWgmJmgoaChPKFtdKSkpO3kmJnkhPT1lJiZyLmNhbGwoeSxvKSYmKGQ9eSk7dmFyIGc9cC5wcm90b3R5cGU9Zi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkKTtmdW5jdGlvbiB2KHQpe1sibmV4dCIsInRocm93IiwicmV0dXJuIl0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dFtlXT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faW52b2tlKGUsdCl9fSkpfWZ1bmN0aW9uIG0odCl7dmFyIGU7dGhpcy5faW52b2tlPWZ1bmN0aW9uKG4sbyl7ZnVuY3Rpb24gaSgpe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSxpKXshZnVuY3Rpb24gZShuLG8saSxhKXt2YXIgYz11KHRbbl0sdCxvKTtpZigidGhyb3ciIT09Yy50eXBlKXt2YXIgcz1jLmFyZyxmPXMudmFsdWU7cmV0dXJuIGYmJiJvYmplY3QiPT10eXBlb2YgZiYmci5jYWxsKGYsIl9fYXdhaXQiKT9Qcm9taXNlLnJlc29sdmUoZi5fX2F3YWl0KS50aGVuKChmdW5jdGlvbih0KXtlKCJuZXh0Iix0LGksYSl9KSwoZnVuY3Rpb24odCl7ZSgidGhyb3ciLHQsaSxhKX0pKTpQcm9taXNlLnJlc29sdmUoZikudGhlbigoZnVuY3Rpb24odCl7cy52YWx1ZT10LGkocyl9KSwoZnVuY3Rpb24odCl7cmV0dXJuIGUoInRocm93Iix0LGksYSl9KSl9YShjLmFyZyl9KG4sbyxlLGkpfSkpfXJldHVybiBlPWU/ZS50aGVuKGksaSk6aSgpfX1mdW5jdGlvbiBiKHQsZSl7dmFyIHI9dC5pdGVyYXRvcltlLm1ldGhvZF07aWYodm9pZCAwPT09cil7aWYoZS5kZWxlZ2F0ZT1udWxsLCJ0aHJvdyI9PT1lLm1ldGhvZCl7aWYodC5pdGVyYXRvci5yZXR1cm4mJihlLm1ldGhvZD0icmV0dXJuIixlLmFyZz12b2lkIDAsYih0LGUpLCJ0aHJvdyI9PT1lLm1ldGhvZCkpcmV0dXJuIHM7ZS5tZXRob2Q9InRocm93IixlLmFyZz1uZXcgVHlwZUVycm9yKCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kIil9cmV0dXJuIHN9dmFyIG49dShyLHQuaXRlcmF0b3IsZS5hcmcpO2lmKCJ0aHJvdyI9PT1uLnR5cGUpcmV0dXJuIGUubWV0aG9kPSJ0aHJvdyIsZS5hcmc9bi5hcmcsZS5kZWxlZ2F0ZT1udWxsLHM7dmFyIG89bi5hcmc7cmV0dXJuIG8/by5kb25lPyhlW3QucmVzdWx0TmFtZV09by52YWx1ZSxlLm5leHQ9dC5uZXh0TG9jLCJyZXR1cm4iIT09ZS5tZXRob2QmJihlLm1ldGhvZD0ibmV4dCIsZS5hcmc9dm9pZCAwKSxlLmRlbGVnYXRlPW51bGwscyk6bzooZS5tZXRob2Q9InRocm93IixlLmFyZz1uZXcgVHlwZUVycm9yKCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdCIpLGUuZGVsZWdhdGU9bnVsbCxzKX1mdW5jdGlvbiB3KHQpe3ZhciBlPXt0cnlMb2M6dFswXX07MSBpbiB0JiYoZS5jYXRjaExvYz10WzFdKSwyIGluIHQmJihlLmZpbmFsbHlMb2M9dFsyXSxlLmFmdGVyTG9jPXRbM10pLHRoaXMudHJ5RW50cmllcy5wdXNoKGUpfWZ1bmN0aW9uIHgodCl7dmFyIGU9dC5jb21wbGV0aW9ufHx7fTtlLnR5cGU9Im5vcm1hbCIsZGVsZXRlIGUuYXJnLHQuY29tcGxldGlvbj1lfWZ1bmN0aW9uIGoodCl7dGhpcy50cnlFbnRyaWVzPVt7dHJ5TG9jOiJyb290In1dLHQuZm9yRWFjaCh3LHRoaXMpLHRoaXMucmVzZXQoITApfWZ1bmN0aW9uIE8odCl7aWYodCl7dmFyIGU9dFtvXTtpZihlKXJldHVybiBlLmNhbGwodCk7aWYoImZ1bmN0aW9uIj09dHlwZW9mIHQubmV4dClyZXR1cm4gdDtpZighaXNOYU4odC5sZW5ndGgpKXt2YXIgbj0tMSxpPWZ1bmN0aW9uIGUoKXtmb3IoOysrbjx0Lmxlbmd0aDspaWYoci5jYWxsKHQsbikpcmV0dXJuIGUudmFsdWU9dFtuXSxlLmRvbmU9ITEsZTtyZXR1cm4gZS52YWx1ZT12b2lkIDAsZS5kb25lPSEwLGV9O3JldHVybiBpLm5leHQ9aX19cmV0dXJue25leHQ6a319ZnVuY3Rpb24gaygpe3JldHVybnt2YWx1ZTp2b2lkIDAsZG9uZTohMH19cmV0dXJuIGwucHJvdG90eXBlPWcuY29uc3RydWN0b3I9cCxwLmNvbnN0cnVjdG9yPWwscFthXT1sLmRpc3BsYXlOYW1lPSJHZW5lcmF0b3JGdW5jdGlvbiIsdC5pc0dlbmVyYXRvckZ1bmN0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPSJmdW5jdGlvbiI9PXR5cGVvZiB0JiZ0LmNvbnN0cnVjdG9yO3JldHVybiEhZSYmKGU9PT1sfHwiR2VuZXJhdG9yRnVuY3Rpb24iPT09KGUuZGlzcGxheU5hbWV8fGUubmFtZSkpfSx0Lm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxwKToodC5fX3Byb3RvX189cCxhIGluIHR8fCh0W2FdPSJHZW5lcmF0b3JGdW5jdGlvbiIpKSx0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGcpLHR9LHQuYXdyYXA9ZnVuY3Rpb24odCl7cmV0dXJue19fYXdhaXQ6dH19LHYobS5wcm90b3R5cGUpLG0ucHJvdG90eXBlW2ldPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHQuQXN5bmNJdGVyYXRvcj1tLHQuYXN5bmM9ZnVuY3Rpb24oZSxyLG4sbyl7dmFyIGk9bmV3IG0oYyhlLHIsbixvKSk7cmV0dXJuIHQuaXNHZW5lcmF0b3JGdW5jdGlvbihyKT9pOmkubmV4dCgpLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiB0LmRvbmU/dC52YWx1ZTppLm5leHQoKX0pKX0sdihnKSxnW2FdPSJHZW5lcmF0b3IiLGdbb109ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sZy50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbb2JqZWN0IEdlbmVyYXRvcl0ifSx0LmtleXM9ZnVuY3Rpb24odCl7dmFyIGU9W107Zm9yKHZhciByIGluIHQpZS5wdXNoKHIpO3JldHVybiBlLnJldmVyc2UoKSxmdW5jdGlvbiByKCl7Zm9yKDtlLmxlbmd0aDspe3ZhciBuPWUucG9wKCk7aWYobiBpbiB0KXJldHVybiByLnZhbHVlPW4sci5kb25lPSExLHJ9cmV0dXJuIHIuZG9uZT0hMCxyfX0sdC52YWx1ZXM9TyxqLnByb3RvdHlwZT17Y29uc3RydWN0b3I6aixyZXNldDpmdW5jdGlvbih0KXtpZih0aGlzLnByZXY9MCx0aGlzLm5leHQ9MCx0aGlzLnNlbnQ9dGhpcy5fc2VudD12b2lkIDAsdGhpcy5kb25lPSExLHRoaXMuZGVsZWdhdGU9bnVsbCx0aGlzLm1ldGhvZD0ibmV4dCIsdGhpcy5hcmc9dm9pZCAwLHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHgpLCF0KWZvcih2YXIgZSBpbiB0aGlzKSJ0Ij09PWUuY2hhckF0KDApJiZyLmNhbGwodGhpcyxlKSYmIWlzTmFOKCtlLnNsaWNlKDEpKSYmKHRoaXNbZV09dm9pZCAwKX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuZG9uZT0hMDt2YXIgdD10aGlzLnRyeUVudHJpZXNbMF0uY29tcGxldGlvbjtpZigidGhyb3ciPT09dC50eXBlKXRocm93IHQuYXJnO3JldHVybiB0aGlzLnJ2YWx9LGRpc3BhdGNoRXhjZXB0aW9uOmZ1bmN0aW9uKHQpe2lmKHRoaXMuZG9uZSl0aHJvdyB0O3ZhciBlPXRoaXM7ZnVuY3Rpb24gbihyLG4pe3JldHVybiBhLnR5cGU9InRocm93IixhLmFyZz10LGUubmV4dD1yLG4mJihlLm1ldGhvZD0ibmV4dCIsZS5hcmc9dm9pZCAwKSwhIW59Zm9yKHZhciBvPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtvPj0wOy0tbyl7dmFyIGk9dGhpcy50cnlFbnRyaWVzW29dLGE9aS5jb21wbGV0aW9uO2lmKCJyb290Ij09PWkudHJ5TG9jKXJldHVybiBuKCJlbmQiKTtpZihpLnRyeUxvYzw9dGhpcy5wcmV2KXt2YXIgYz1yLmNhbGwoaSwiY2F0Y2hMb2MiKSx1PXIuY2FsbChpLCJmaW5hbGx5TG9jIik7aWYoYyYmdSl7aWYodGhpcy5wcmV2PGkuY2F0Y2hMb2MpcmV0dXJuIG4oaS5jYXRjaExvYywhMCk7aWYodGhpcy5wcmV2PGkuZmluYWxseUxvYylyZXR1cm4gbihpLmZpbmFsbHlMb2MpfWVsc2UgaWYoYyl7aWYodGhpcy5wcmV2PGkuY2F0Y2hMb2MpcmV0dXJuIG4oaS5jYXRjaExvYywhMCl9ZWxzZXtpZighdSl0aHJvdyBuZXcgRXJyb3IoInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5Iik7aWYodGhpcy5wcmV2PGkuZmluYWxseUxvYylyZXR1cm4gbihpLmZpbmFsbHlMb2MpfX19fSxhYnJ1cHQ6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO24+PTA7LS1uKXt2YXIgbz10aGlzLnRyeUVudHJpZXNbbl07aWYoby50cnlMb2M8PXRoaXMucHJldiYmci5jYWxsKG8sImZpbmFsbHlMb2MiKSYmdGhpcy5wcmV2PG8uZmluYWxseUxvYyl7dmFyIGk9bzticmVha319aSYmKCJicmVhayI9PT10fHwiY29udGludWUiPT09dCkmJmkudHJ5TG9jPD1lJiZlPD1pLmZpbmFsbHlMb2MmJihpPW51bGwpO3ZhciBhPWk/aS5jb21wbGV0aW9uOnt9O3JldHVybiBhLnR5cGU9dCxhLmFyZz1lLGk/KHRoaXMubWV0aG9kPSJuZXh0Iix0aGlzLm5leHQ9aS5maW5hbGx5TG9jLHMpOnRoaXMuY29tcGxldGUoYSl9LGNvbXBsZXRlOmZ1bmN0aW9uKHQsZSl7aWYoInRocm93Ij09PXQudHlwZSl0aHJvdyB0LmFyZztyZXR1cm4iYnJlYWsiPT09dC50eXBlfHwiY29udGludWUiPT09dC50eXBlP3RoaXMubmV4dD10LmFyZzoicmV0dXJuIj09PXQudHlwZT8odGhpcy5ydmFsPXRoaXMuYXJnPXQuYXJnLHRoaXMubWV0aG9kPSJyZXR1cm4iLHRoaXMubmV4dD0iZW5kIik6Im5vcm1hbCI9PT10LnR5cGUmJmUmJih0aGlzLm5leHQ9ZSksc30sZmluaXNoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7ZT49MDstLWUpe3ZhciByPXRoaXMudHJ5RW50cmllc1tlXTtpZihyLmZpbmFsbHlMb2M9PT10KXJldHVybiB0aGlzLmNvbXBsZXRlKHIuY29tcGxldGlvbixyLmFmdGVyTG9jKSx4KHIpLHN9fSxjYXRjaDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2U+PTA7LS1lKXt2YXIgcj10aGlzLnRyeUVudHJpZXNbZV07aWYoci50cnlMb2M9PT10KXt2YXIgbj1yLmNvbXBsZXRpb247aWYoInRocm93Ij09PW4udHlwZSl7dmFyIG89bi5hcmc7eChyKX1yZXR1cm4gb319dGhyb3cgbmV3IEVycm9yKCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHQiKX0sZGVsZWdhdGVZaWVsZDpmdW5jdGlvbih0LGUscil7cmV0dXJuIHRoaXMuZGVsZWdhdGU9e2l0ZXJhdG9yOk8odCkscmVzdWx0TmFtZTplLG5leHRMb2M6cn0sIm5leHQiPT09dGhpcy5tZXRob2QmJih0aGlzLmFyZz12b2lkIDApLHN9fSx0fSh0LmV4cG9ydHMpO3RyeXtyZWdlbmVyYXRvclJ1bnRpbWU9bn1jYXRjaCh0KXtGdW5jdGlvbigiciIsInJlZ2VuZXJhdG9yUnVudGltZSA9IHIiKShuKX19LGZ1bmN0aW9uKHQsZSxyKXtmdW5jdGlvbiBuKHQsZSxyLG4sbyxpLGEpe3RyeXt2YXIgYz10W2ldKGEpLHU9Yy52YWx1ZX1jYXRjaCh0KXtyZXR1cm4gdm9pZCByKHQpfWMuZG9uZT9lKHUpOlByb21pc2UucmVzb2x2ZSh1KS50aGVuKG4sbyl9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT10aGlzLHI9YXJndW1lbnRzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24obyxpKXt2YXIgYT10LmFwcGx5KGUscik7ZnVuY3Rpb24gYyh0KXtuKGEsbyxpLGMsdSwibmV4dCIsdCl9ZnVuY3Rpb24gdSh0KXtuKGEsbyxpLGMsdSwidGhyb3ciLHQpfWModm9pZCAwKX0pKX19ZnVuY3Rpb24gaSh0LGUpe3ZhciByPU9iamVjdC5rZXlzKHQpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciBuPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModCk7ZSYmKG49bi5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsZSkuZW51bWVyYWJsZX0pKSksci5wdXNoLmFwcGx5KHIsbil9cmV0dXJuIHJ9ZnVuY3Rpb24gYSh0KXtmb3IodmFyIGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgcj1udWxsIT1hcmd1bWVudHNbZV0/YXJndW1lbnRzW2VdOnt9O2UlMj9pKHIsITApLmZvckVhY2goKGZ1bmN0aW9uKGUpe2ModCxlLHJbZV0pfSkpOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHQsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMocikpOmkocikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHIsZSkpfSkpfXJldHVybiB0fWZ1bmN0aW9uIGModCxlLHIpe3JldHVybiBlIGluIHQ/T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7dmFsdWU6cixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOnRbZV09cix0fWZ1bmN0aW9uIHUodCxlKXtpZihudWxsPT10KXJldHVybnt9O3ZhciByLG4sbz1mdW5jdGlvbih0LGUpe2lmKG51bGw9PXQpcmV0dXJue307dmFyIHIsbixvPXt9LGk9T2JqZWN0LmtleXModCk7Zm9yKG49MDtuPGkubGVuZ3RoO24rKylyPWlbbl0sZS5pbmRleE9mKHIpPj0wfHwob1tyXT10W3JdKTtyZXR1cm4gb30odCxlKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpO2ZvcihuPTA7bjxpLmxlbmd0aDtuKyspcj1pW25dLGUuaW5kZXhPZihyKT49MHx8T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHQscikmJihvW3JdPXRbcl0pfXJldHVybiBvfXZhciBzPXIoNyksZj1yKDIpLmxvZyxsPXIoMykscD1yKDgpLGQ9cig5KSxoPXIoMTIpLHk9cigxMyksZz15LmRlZmF1bHRPcHRpb25zLHY9eS5zcGF3bldvcmtlcixtPXkub25NZXNzYWdlLGI9eS5mZXRjaEZpbGUsdz0wO3QuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxlPWwoIldvcmtlciIsdykscj1kKGEoe30sZyx7fSx0KSksbj1yLmxvZ2dlcixpPXIucHJvZ3Jlc3MsYz11KHIsWyJsb2dnZXIiLCJwcm9ncmVzcyJdKSx5PXt9LHg9e30saj12KGMpO3crPTE7dmFyIE89ZnVuY3Rpb24odCxlKXt5W3RdPWV9LGs9ZnVuY3Rpb24odCxlKXt4W3RdPWV9LFA9ZnVuY3Rpb24odCl7dmFyIHI9dC5pZCxuPXQuYWN0aW9uLG89dC5wYXlsb2FkO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCxpKXt2YXIgYT17d29ya2VySWQ6ZSxqb2JJZDpyLGFjdGlvbjpuLHBheWxvYWQ6b307ZigiWyIuY29uY2F0KGUsIl06IFN0YXJ0ICIpLmNvbmNhdChyLCIsIGFjdGlvbj0iKS5jb25jYXQobikpLE8obix0KSxrKG4saSksai5wb3N0TWVzc2FnZShhLGgoYSkpfSkpfSxFPWZ1bmN0aW9uKHQpe3JldHVybiBQKHMoe2lkOnQsYWN0aW9uOiJsb2FkIixwYXlsb2FkOntvcHRpb25zOmN9fSkpfSxMPWZ1bmN0aW9uKCl7dmFyIHQ9byhyZWdlbmVyYXRvclJ1bnRpbWUubWFyaygoZnVuY3Rpb24gdChlLHIsbil7cmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDpyZXR1cm4gdC50MD1QLHQudDE9cyx0LnQyPW4sdC50Mz1lLHQubmV4dD02LGIocik7Y2FzZSA2OnJldHVybiB0LnQ0PXQuc2VudCx0LnQ1PVt0LnQzLHQudDRdLHQudDY9e21ldGhvZDoid3JpdGVGaWxlIixhcmdzOnQudDV9LHQudDc9e2lkOnQudDIsYWN0aW9uOiJGUyIscGF5bG9hZDp0LnQ2fSx0LnQ4PSgwLHQudDEpKHQudDcpLHQuYWJydXB0KCJyZXR1cm4iLCgwLHQudDApKHQudDgpKTtjYXNlIDEyOmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSksdCl9KSkpO3JldHVybiBmdW5jdGlvbihlLHIsbil7cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0oKSxTPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gUChzKHtpZDpyLGFjdGlvbjoiRlMiLHBheWxvYWQ6e21ldGhvZDoid3JpdGVGaWxlIixhcmdzOlt0LGVdfX0pKX0sRj1mdW5jdGlvbih0LGUpe3JldHVybiBQKHMoe2lkOmUsYWN0aW9uOiJGUyIscGF5bG9hZDp7bWV0aG9kOiJyZWFkRmlsZSIsYXJnczpbdF19fSkpfSxUPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFAocyh7aWQ6ZSxhY3Rpb246IkZTIixwYXlsb2FkOnttZXRob2Q6InVubGluayIsYXJnczpbdF19fSkpfSxfPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFAocyh7aWQ6ZSxhY3Rpb246InJ1biIscGF5bG9hZDp7YXJnczp0fX0pKX0sQT1mdW5jdGlvbih0LGUpe3JldHVybiBQKHMoe2lkOmUsYWN0aW9uOiJGUyIscGF5bG9hZDp7bWV0aG9kOiJyZWFkZGlyIixhcmdzOlt0XX19KSl9LFI9ZnVuY3Rpb24odCxlKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06IiIsbj1hcmd1bWVudHMubGVuZ3RoPjM/YXJndW1lbnRzWzNdOnZvaWQgMDtyZXR1cm4gXygiLWkgIi5jb25jYXQodCwiICIpLmNvbmNhdChyLCIgIikuY29uY2F0KGUpLG4pfSxEPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBvPWFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdP2FyZ3VtZW50c1s0XToiIixpPWFyZ3VtZW50cy5sZW5ndGg+NT9hcmd1bWVudHNbNV06dm9pZCAwO3JldHVybiBfKCItaSAiLmNvbmNhdCh0LCIgLXNzICIpLmNvbmNhdChyLCIgLXRvICIpLmNvbmNhdChuLCIgIikuY29uY2F0KG8sIiAiKS5jb25jYXQoZSksaSl9LEk9ZnVuY3Rpb24oKXt2YXIgdD1vKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKChmdW5jdGlvbiB0KGUscil7dmFyIG4sbyxpLGE9YXJndW1lbnRzO3JldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcCgoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6cmV0dXJuIG49YS5sZW5ndGg+MiYmdm9pZCAwIT09YVsyXT9hWzJdOiIiLG89YS5sZW5ndGg+Mz9hWzNdOnZvaWQgMCxpPWUucmVkdWNlKChmdW5jdGlvbih0LGUpe3JldHVybiIiLmNvbmNhdCh0LCJcbmZpbGUgIikuY29uY2F0KGUpfSksIiIpLHQubmV4dD01LFMoImNvbmNhdF9saXN0LnR4dCIsaSk7Y2FzZSA1OnJldHVybiB0LmFicnVwdCgicmV0dXJuIixfKCItZiBjb25jYXQgLXNhZmUgMCAtaSBjb25jYXRfbGlzdC50eHQgIi5jb25jYXQobiwiICIpLmNvbmNhdChyKSxvKSk7Y2FzZSA2OmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSksdCl9KSkpO3JldHVybiBmdW5jdGlvbihlLHIpe3JldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KCksVz1mdW5jdGlvbigpe3ZhciB0PW8ocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoKGZ1bmN0aW9uIHQoZSl7cmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDppZihudWxsPT09ail7dC5uZXh0PTU7YnJlYWt9cmV0dXJuIHQubmV4dD0zLFAocyh7aWQ6ZSxhY3Rpb246InRlcm1pbmF0ZSJ9KSk7Y2FzZSAzOmoudGVybWluYXRlKCksaj1udWxsO2Nhc2UgNTpyZXR1cm4gdC5hYnJ1cHQoInJldHVybiIsUHJvbWlzZS5yZXNvbHZlKCkpO2Nhc2UgNjpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0pLHQpfSkpKTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0oKTtyZXR1cm4gbShqLChmdW5jdGlvbih0KXt2YXIgZT10LndvcmtlcklkLHI9dC5qb2JJZCxvPXQuYWN0aW9uLGE9dC5zdGF0dXMsYz10LnBheWxvYWQ7aWYoInJlc29sdmUiPT09YSl7dmFyIHU9Yy5tZXNzYWdlLHM9Yy5kYXRhO2YoIlsiLmNvbmNhdChlLCJdOiBDb21wbGV0ZSAiKS5jb25jYXQocikpLHlbb10oe3dvcmtlcklkOmUsam9iSWQ6cixtZXNzYWdlOnUsZGF0YTpzfSl9ZWxzZXtpZigicmVqZWN0Ij09PWEpdGhyb3cgeFtvXShjKSxFcnJvcihjKTsicHJvZ3Jlc3MiPT09YSYmKHAoYyxpKSxuKGMpKX19KSkse2lkOmUsd29ya2VyOmosc2V0UmVzb2x2ZTpPLHNldFJlamVjdDprLGxvYWQ6RSx3cml0ZTpMLHdyaXRlVGV4dDpTLHJlYWQ6RixyZW1vdmU6VCxsczpBLHJ1bjpfLHRyYW5zY29kZTpSLHRyaW06RCxjb25jYXREZW11eGVyOkksdGVybWluYXRlOld9fX0sZnVuY3Rpb24odCxlLHIpe3ZhciBuPXIoMyksbz0wO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT10LmlkLHI9dC5hY3Rpb24saT10LnBheWxvYWQsYT12b2lkIDA9PT1pP3t9OmksYz1lO3JldHVybiB2b2lkIDA9PT1jJiYoYz1uKCJKb2IiLG8pLG8rPTEpLHtpZDpjLGFjdGlvbjpyLHBheWxvYWQ6YX19fSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIHIodCxlKXtyZXR1cm4gZnVuY3Rpb24odCl7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gdH0odCl8fGZ1bmN0aW9uKHQsZSl7aWYoIShTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KHQpfHwiW29iamVjdCBBcmd1bWVudHNdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSkpcmV0dXJuO3ZhciByPVtdLG49ITAsbz0hMSxpPXZvaWQgMDt0cnl7Zm9yKHZhciBhLGM9dFtTeW1ib2wuaXRlcmF0b3JdKCk7IShuPShhPWMubmV4dCgpKS5kb25lKSYmKHIucHVzaChhLnZhbHVlKSwhZXx8ci5sZW5ndGghPT1lKTtuPSEwKTt9Y2F0Y2godCl7bz0hMCxpPXR9ZmluYWxseXt0cnl7bnx8bnVsbD09Yy5yZXR1cm58fGMucmV0dXJuKCl9ZmluYWxseXtpZihvKXRocm93IGl9fXJldHVybiByfSh0LGUpfHxmdW5jdGlvbigpe3Rocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKX0oKX12YXIgbj0wLG89ZnVuY3Rpb24odCl7dmFyIGU9cih0LnNwbGl0KCI6IiksMyksbj1lWzBdLG89ZVsxXSxpPWVbMl07cmV0dXJuIDYwKnBhcnNlRmxvYXQobikqNjArNjAqcGFyc2VGbG9hdChvKStwYXJzZUZsb2F0KGkpfTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt2YXIgcj10Lm1lc3NhZ2U7aWYoInN0cmluZyI9PXR5cGVvZiByKWlmKHIuc3RhcnRzV2l0aCgiICBEdXJhdGlvbiIpKXt2YXIgaT1yLnNwbGl0KCIsICIpWzBdLnNwbGl0KCI6ICIpWzFdLGE9byhpKTsoMD09PW58fG4+YSkmJihuPWEpfWVsc2UgaWYoci5zdGFydHNXaXRoKCJmcmFtZSIpKXt2YXIgYz1yLnNwbGl0KCJ0aW1lPSIpWzFdLnNwbGl0KCIgIilbMF07ZSh7cmF0aW86byhjKS9ufSl9ZWxzZSByLnN0YXJ0c1dpdGgoInZpZGVvOiIpJiZlKHtyYXRpbzoxfSl9fSxmdW5jdGlvbih0LGUscil7ZnVuY3Rpb24gbih0LGUpe3ZhciByPU9iamVjdC5rZXlzKHQpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciBuPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModCk7ZSYmKG49bi5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsZSkuZW51bWVyYWJsZX0pKSksci5wdXNoLmFwcGx5KHIsbil9cmV0dXJuIHJ9ZnVuY3Rpb24gbyh0LGUscil7cmV0dXJuIGUgaW4gdD9PYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHt2YWx1ZTpyLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6dFtlXT1yLHR9dmFyIGk9ImJyb3dzZXIiPT09cigxMCkoInR5cGUiKT9yKDEpOmZ1bmN0aW9uKHQpe3JldHVybiB0fTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTE7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dmFyIHI9bnVsbCE9YXJndW1lbnRzW2VdP2FyZ3VtZW50c1tlXTp7fTtlJTI/bihyLCEwKS5mb3JFYWNoKChmdW5jdGlvbihlKXtvKHQsZSxyW2VdKX0pKTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyh0LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHIpKTpuKHIpLmZvckVhY2goKGZ1bmN0aW9uKGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihyLGUpKX0pKX1yZXR1cm4gdH0oe30sdCk7cmV0dXJuWyJjb3JlUGF0aCIsIndvcmtlclBhdGgiXS5mb3JFYWNoKChmdW5jdGlvbihyKXt2b2lkIDAhPT10W3JdJiYoZVtyXT1pKGVbcl0pKX0pKSxlfX0sZnVuY3Rpb24odCxlLHIpeyhmdW5jdGlvbihlKXtmdW5jdGlvbiBuKHQpe3JldHVybihuPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJiJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiB0fSkodCl9dmFyIG89cigxMSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciByPXt9O3JldHVybiBvKCk/ci50eXBlPSJlbGVjdHJvbiI6Im9iamVjdCI9PT0oInVuZGVmaW5lZCI9PXR5cGVvZiB3aW5kb3c/InVuZGVmaW5lZCI6bih3aW5kb3cpKT9yLnR5cGU9ImJyb3dzZXIiOiJmdW5jdGlvbiI9PXR5cGVvZiBpbXBvcnRTY3JpcHRzP3IudHlwZT0id2Vid29ya2VyIjoib2JqZWN0Ij09PSh2b2lkIDA9PT1lPyJ1bmRlZmluZWQiOm4oZSkpJiYoci50eXBlPSJub2RlIiksdm9pZCAwPT09dD9yOnJbdF19fSkuY2FsbCh0aGlzLHIoMCkpfSxmdW5jdGlvbih0LGUscil7KGZ1bmN0aW9uKGUpe3QuZXhwb3J0cz1mdW5jdGlvbigpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiYib2JqZWN0Ij09dHlwZW9mIHdpbmRvdy5wcm9jZXNzJiYicmVuZGVyZXIiPT09d2luZG93LnByb2Nlc3MudHlwZXx8KCEodm9pZCAwPT09ZXx8Im9iamVjdCIhPXR5cGVvZiBlLnZlcnNpb25zfHwhZS52ZXJzaW9ucy5lbGVjdHJvbil8fCJvYmplY3QiPT10eXBlb2YgbmF2aWdhdG9yJiYic3RyaW5nIj09dHlwZW9mIG5hdmlnYXRvci51c2VyQWdlbnQmJm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiRWxlY3Ryb24iKT49MCl9fSkuY2FsbCh0aGlzLHIoMCkpfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT1bXSxyPWZ1bmN0aW9uKHQpe3QgaW5zdGFuY2VvZiBVaW50OEFycmF5P2UucHVzaCh0LmJ1ZmZlcik6dCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyJiZlLnB1c2godCl9LG49dC5wYXlsb2FkLG89bi5hcmdzLGk9bi5kYXRhO3JldHVybiByKGkpLEFycmF5LmlzQXJyYXkobykmJm8uZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHIodCl9KSksZX19LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDE0KSxvPXIoMTcpLGk9cigxOCksYT1yKDE5KTt0LmV4cG9ydHM9e2RlZmF1bHRPcHRpb25zOm4sc3Bhd25Xb3JrZXI6byxvbk1lc3NhZ2U6aSxmZXRjaEZpbGU6YX19LGZ1bmN0aW9uKHQsZSxyKXsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gbih0LGUpe3ZhciByPU9iamVjdC5rZXlzKHQpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciBuPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModCk7ZSYmKG49bi5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsZSkuZW51bWVyYWJsZX0pKSksci5wdXNoLmFwcGx5KHIsbil9cmV0dXJuIHJ9ZnVuY3Rpb24gbyh0LGUscil7cmV0dXJuIGUgaW4gdD9PYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHt2YWx1ZTpyLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6dFtlXT1yLHR9dmFyIGk9cigxKSxhPXIoMTUpLGM9YS52ZXJzaW9uLHU9YS5kZXBlbmRlbmNpZXMscz1yKDE2KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTE7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dmFyIHI9bnVsbCE9YXJndW1lbnRzW2VdP2FyZ3VtZW50c1tlXTp7fTtlJTI/bihyLCEwKS5mb3JFYWNoKChmdW5jdGlvbihlKXtvKHQsZSxyW2VdKX0pKTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyh0LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHIpKTpuKHIpLmZvckVhY2goKGZ1bmN0aW9uKGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihyLGUpKX0pKX1yZXR1cm4gdH0oe30scyx7d29ya2VyUGF0aDp2b2lkIDAhPT1lJiYiZGV2ZWxvcG1lbnQiPT09ZS5lbnYuRkZNUEVHX0VOVj9pKCIvZGlzdC93b3JrZXIuZGV2LmpzP25vY2FjaGU9Ii5jb25jYXQoTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMykpKToiaHR0cHM6Ly91bnBrZy5jb20vQGZmbXBlZy9mZm1wZWdAdiIuY29uY2F0KGMsIi9kaXN0L3dvcmtlci5taW4uanMiKSxjb3JlUGF0aDoiaHR0cHM6Ly91bnBrZy5jb20vQGZmbXBlZy9jb3JlQHYiLmNvbmNhdCh1WyJAZmZtcGVnL2NvcmUiXS5zdWJzdHJpbmcoMSksIi9mZm1wZWctY29yZS5qcyIpLHdvcmtlckJsb2JVUkw6ITB9KX0pLmNhbGwodGhpcyxyKDApKX0sZnVuY3Rpb24odCl7dC5leHBvcnRzPUpTT04ucGFyc2UoJ3sibmFtZSI6IkBmZm1wZWcvZmZtcGVnIiwidmVyc2lvbiI6IjAuNi4xIiwiZGVzY3JpcHRpb24iOiJGRm1wZWcgV2ViQXNzZW1ibHkgdmVyc2lvbiIsIm1haW4iOiJzcmMvaW5kZXguanMiLCJkaXJlY3RvcmllcyI6eyJleGFtcGxlIjoiZXhhbXBsZXMifSwic2NyaXB0cyI6eyJzdGFydCI6Im5vZGUgc2NyaXB0cy9zZXJ2ZXIuanMiLCJidWlsZCI6InJpbXJhZiBkaXN0ICYmIHdlYnBhY2sgLS1jb25maWcgc2NyaXB0cy93ZWJwYWNrLmNvbmZpZy5wcm9kLmpzIiwicHJlcHVibGlzaE9ubHkiOiJucG0gcnVuIGJ1aWxkIiwibGludCI6ImVzbGludCBzcmMiLCJ3YWl0IjoicmltcmFmIGRpc3QgJiYgd2FpdC1vbiBodHRwOi8vbG9jYWxob3N0OjMwMDAvZGlzdC9mZm1wZWcuZGV2LmpzIiwidGVzdCI6Im5wbS1ydW4tYWxsIC1wIC1yIHN0YXJ0IHRlc3Q6YWxsIiwidGVzdDphbGwiOiJucG0tcnVuLWFsbCB3YWl0IHRlc3Q6YnJvd3NlcjpmZm1wZWcgdGVzdDpub2RlOmFsbCIsInRlc3Q6bm9kZSI6Im55YyBtb2NoYSAtLWV4aXQgLS1iYWlsIC0tcmVxdWlyZSAuL3NjcmlwdHMvdGVzdC1oZWxwZXIuanMiLCJ0ZXN0Om5vZGU6YWxsIjoibnBtIHJ1biB0ZXN0Om5vZGUgLS0gLi90ZXN0cy8qLnRlc3QuanMiLCJ0ZXN0OmJyb3dzZXIiOiJtb2NoYS1oZWFkbGVzcy1jaHJvbWUgLWEgaW5jb2duaXRvIC1hIG5vLXNhbmRib3ggLWEgZGlzYWJsZS1zZXR1aWQtc2FuZGJveCAtYSBkaXNhYmxlLWxvZ2dpbmcgLXQgMzAwMDAwIiwidGVzdDpicm93c2VyOmZmbXBlZyI6Im5wbSBydW4gdGVzdDpicm93c2VyIC0tIC1mIC4vdGVzdHMvZmZtcGVnLnRlc3QuaHRtbCJ9LCJicm93c2VyIjp7Ii4vc3JjL3dvcmtlci9ub2RlL2luZGV4LmpzIjoiLi9zcmMvd29ya2VyL2Jyb3dzZXIvaW5kZXguanMifSwicmVwb3NpdG9yeSI6eyJ0eXBlIjoiZ2l0IiwidXJsIjoiZ2l0K2h0dHBzOi8vZ2l0aHViLmNvbS9mZm1wZWdqcy9mZm1wZWcuanMuZ2l0In0sImtleXdvcmRzIjpbImZmbXBlZyIsIldlYkFzc2VtYmx5IiwidmlkZW8iXSwiYXV0aG9yIjoiSmVyb21lIFd1IDxqZXJvbWV3dXNAZ21haWwuY29tPiIsImxpY2Vuc2UiOiJNSVQiLCJidWdzIjp7InVybCI6Imh0dHBzOi8vZ2l0aHViLmNvbS9mZm1wZWdqcy9mZm1wZWcuanMvaXNzdWVzIn0sImVuZ2luZXMiOnsibm9kZSI6Ij49MTAuNS4wIn0sImhvbWVwYWdlIjoiaHR0cHM6Ly9naXRodWIuY29tL2ZmbXBlZ2pzL2ZmbXBlZy5qcyNyZWFkbWUiLCJkZXBlbmRlbmNpZXMiOnsiQGZmbXBlZy9jb3JlIjoiXjAuNi4wIiwiaWRiIjoiXjQuMC41IiwiaXMtZWxlY3Ryb24iOiJeMi4yLjAiLCJpcy11cmwiOiJeMS4yLjQiLCJub2RlLWZldGNoIjoiXjIuNi4wIiwicmVnZW5lcmF0b3ItcnVudGltZSI6Il4wLjEzLjMiLCJyZXNvbHZlLXVybCI6Il4wLjIuMSJ9LCJkZXZEZXBlbmRlbmNpZXMiOnsiQGJhYmVsL2NvcmUiOiJeNy42LjQiLCJAYmFiZWwvcHJlc2V0LWVudiI6Il43LjYuMyIsImJhYmVsLWxvYWRlciI6Il44LjAuNiIsImNvcnMiOiJeMi44LjUiLCJlc2xpbnQiOiJeNi4xLjAiLCJlc2xpbnQtY29uZmlnLWFpcmJuYi1iYXNlIjoiXjE0LjAuMCIsImVzbGludC1wbHVnaW4taW1wb3J0IjoiXjIuMTguMiIsImV4cGVjdC5qcyI6Il4wLjMuMSIsImV4cHJlc3MiOiJeNC4xNy4xIiwibW9jaGEiOiJeNi4yLjIiLCJtb2NoYS1oZWFkbGVzcy1jaHJvbWUiOiJeMi4wLjMiLCJucG0tcnVuLWFsbCI6Il40LjEuNSIsIm55YyI6Il4xNC4xLjEiLCJ3YWl0LW9uIjoiXjMuMy4wIiwid2VicGFjayI6Il40LjQxLjIiLCJ3ZWJwYWNrLWNsaSI6Il4zLjMuOSIsIndlYnBhY2stZGV2LW1pZGRsZXdhcmUiOiJeMy43LjIifX0nKX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e2xvZ2dlcjpmdW5jdGlvbigpe30scHJvZ3Jlc3M6ZnVuY3Rpb24oKXt9fX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGUscj10LndvcmtlclBhdGgsbj10LndvcmtlckJsb2JVUkw7aWYoQmxvYiYmVVJMJiZuKXt2YXIgbz1uZXcgQmxvYihbJ2ltcG9ydFNjcmlwdHMoIicuY29uY2F0KHIsJyIpOycpXSx7dHlwZToiYXBwbGljYXRpb24vamF2YXNjcmlwdCJ9KTtlPW5ldyBXb3JrZXIoVVJMLmNyZWF0ZU9iamVjdFVSTChvKSl9ZWxzZSBlPW5ldyBXb3JrZXIocik7cmV0dXJuIGV9fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3Qub25tZXNzYWdlPWZ1bmN0aW9uKHQpe3ZhciByPXQuZGF0YTtlKHIpfX19LGZ1bmN0aW9uKHQsZSxyKXtmdW5jdGlvbiBuKHQsZSxyLG4sbyxpLGEpe3RyeXt2YXIgYz10W2ldKGEpLHU9Yy52YWx1ZX1jYXRjaCh0KXtyZXR1cm4gdm9pZCByKHQpfWMuZG9uZT9lKHUpOlByb21pc2UucmVzb2x2ZSh1KS50aGVuKG4sbyl9dmFyIG89cigxKSxpPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSxyKXt2YXIgbj1uZXcgRmlsZVJlYWRlcjtuLm9ubG9hZD1mdW5jdGlvbigpe2Uobi5yZXN1bHQpfSxuLm9uZXJyb3I9ZnVuY3Rpb24odCl7dmFyIGU9dC50YXJnZXQuZXJyb3IuY29kZTtyKEVycm9yKCJGaWxlIGNvdWxkIG5vdCBiZSByZWFkISBDb2RlPSIuY29uY2F0KGUpKSl9LG4ucmVhZEFzQXJyYXlCdWZmZXIodCl9KSl9O3QuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciB0LGU9KHQ9cmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoKGZ1bmN0aW9uIHQoZSl7dmFyIHIsbjtyZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOmlmKHI9ZSx2b2lkIDAhPT1lKXt0Lm5leHQ9MzticmVha31yZXR1cm4gdC5hYnJ1cHQoInJldHVybiIsInVuZGVmaW5lZCIpO2Nhc2UgMzppZigic3RyaW5nIiE9dHlwZW9mIGUpe3QubmV4dD0xNjticmVha31pZighL2RhdGE6X2RhdGFcLyhbYS16QS1aXSopO2Jhc2U2NCwoW14iXSopLy50ZXN0KGUpKXt0Lm5leHQ9ODticmVha31yPWF0b2IoZS5zcGxpdCgiLCIpWzFdKS5zcGxpdCgiIikubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jaGFyQ29kZUF0KDApfSkpLHQubmV4dD0xNDticmVhaztjYXNlIDg6cmV0dXJuIHQubmV4dD0xMCxmZXRjaChvKGUpKTtjYXNlIDEwOnJldHVybiBuPXQuc2VudCx0Lm5leHQ9MTMsbi5hcnJheUJ1ZmZlcigpO2Nhc2UgMTM6cj10LnNlbnQ7Y2FzZSAxNDp0Lm5leHQ9MjA7YnJlYWs7Y2FzZSAxNjppZighKGUgaW5zdGFuY2VvZiBGaWxlfHxlIGluc3RhbmNlb2YgQmxvYikpe3QubmV4dD0yMDticmVha31yZXR1cm4gdC5uZXh0PTE5LGkoZSk7Y2FzZSAxOTpyPXQuc2VudDtjYXNlIDIwOnJldHVybiB0LmFicnVwdCgicmV0dXJuIixuZXcgVWludDhBcnJheShyKSk7Y2FzZSAyMTpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0pLHQpfSkpLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxyPWFyZ3VtZW50cztyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKG8saSl7dmFyIGE9dC5hcHBseShlLHIpO2Z1bmN0aW9uIGModCl7bihhLG8saSxjLHUsIm5leHQiLHQpfWZ1bmN0aW9uIHUodCl7bihhLG8saSxjLHUsInRocm93Iix0KX1jKHZvaWQgMCl9KSl9KTtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0oKX1dKX0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmZtcGVnLm1pbi5qcy5tYXA="},{"meta":{"name":"p-queue@6.3.0","url":"https://bundle.run/p-queue@6.3.0","ts":1608788133238,"mimetype":"text/plain"},"source":"IWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmInVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9ZSgpO2Vsc2UgaWYoImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sZSk7ZWxzZXsoInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzKS5wUXVldWU9ZSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0LHIsbil7ZnVuY3Rpb24gaShzLHUpe2lmKCFyW3NdKXtpZighdFtzXSl7dmFyIGE9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEocywhMCk7aWYobylyZXR1cm4gbyhzLCEwKTt2YXIgbD1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitzKyInIik7dGhyb3cgbC5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixsfXZhciBjPXJbc109e2V4cG9ydHM6e319O3Rbc11bMF0uY2FsbChjLmV4cG9ydHMsZnVuY3Rpb24oZSl7cmV0dXJuIGkodFtzXVsxXVtlXXx8ZSl9LGMsYy5leHBvcnRzLGUsdCxyLG4pfXJldHVybiByW3NdLmV4cG9ydHN9Zm9yKHZhciBvPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHM9MDtzPG4ubGVuZ3RoO3MrKylpKG5bc10pO3JldHVybiBpfX0oKSh7MTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7Y29uc3Qgbj1lKCJldmVudGVtaXR0ZXIzIiksaT1lKCJwLXRpbWVvdXQiKSxvPWUoIi4vcHJpb3JpdHktcXVldWUiKSxzPSgpPT57fSx1PW5ldyBpLlRpbWVvdXRFcnJvcjtyLmRlZmF1bHQ9Y2xhc3MgZXh0ZW5kcyBue2NvbnN0cnVjdG9yKGUpe2lmKHN1cGVyKCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIl9jYXJyeW92ZXJDb25jdXJyZW5jeUNvdW50Iix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIl9pc0ludGVydmFsSWdub3JlZCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnZvaWQgMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJfaW50ZXJ2YWxDb3VudCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOjB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiX2ludGVydmFsQ2FwIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIl9pbnRlcnZhbCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnZvaWQgMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJfaW50ZXJ2YWxFbmQiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTowfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIl9pbnRlcnZhbElkIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIl90aW1lb3V0SWQiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp2b2lkIDB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiX3F1ZXVlIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIl9xdWV1ZUNsYXNzIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIl9wZW5kaW5nQ291bnQiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTowfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIl9jb25jdXJyZW5jeSIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnZvaWQgMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJfaXNQYXVzZWQiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp2b2lkIDB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiX3Jlc29sdmVFbXB0eSIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnN9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiX3Jlc29sdmVJZGxlIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6c30pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJfdGltZW91dCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnZvaWQgMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJfdGhyb3dPblRpbWVvdXQiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp2b2lkIDB9KSwhKCJudW1iZXIiPT10eXBlb2YoZT1PYmplY3QuYXNzaWduKHtjYXJyeW92ZXJDb25jdXJyZW5jeUNvdW50OiExLGludGVydmFsQ2FwOjEvMCxpbnRlcnZhbDowLGNvbmN1cnJlbmN5OjEvMCxhdXRvU3RhcnQ6ITAscXVldWVDbGFzczpvLmRlZmF1bHR9LGUpKS5pbnRlcnZhbENhcCYmZS5pbnRlcnZhbENhcD49MSkpdGhyb3cgbmV3IFR5cGVFcnJvcihgRXhwZWN0ZWQgXGBpbnRlcnZhbENhcFxgIHRvIGJlIGEgbnVtYmVyIGZyb20gMSBhbmQgdXAsIGdvdCBcYCR7ZS5pbnRlcnZhbENhcH1cYCAoJHt0eXBlb2YgZS5pbnRlcnZhbENhcH0pYCk7aWYodm9pZCAwPT09ZS5pbnRlcnZhbHx8IShOdW1iZXIuaXNGaW5pdGUoZS5pbnRlcnZhbCkmJmUuaW50ZXJ2YWw+PTApKXRocm93IG5ldyBUeXBlRXJyb3IoYEV4cGVjdGVkIFxgaW50ZXJ2YWxcYCB0byBiZSBhIGZpbml0ZSBudW1iZXIgPj0gMCwgZ290IFxgJHtlLmludGVydmFsfVxgICgke3R5cGVvZiBlLmludGVydmFsfSlgKTt0aGlzLl9jYXJyeW92ZXJDb25jdXJyZW5jeUNvdW50PWUuY2FycnlvdmVyQ29uY3VycmVuY3lDb3VudCx0aGlzLl9pc0ludGVydmFsSWdub3JlZD1lLmludGVydmFsQ2FwPT09MS8wfHwwPT09ZS5pbnRlcnZhbCx0aGlzLl9pbnRlcnZhbENhcD1lLmludGVydmFsQ2FwLHRoaXMuX2ludGVydmFsPWUuaW50ZXJ2YWwsdGhpcy5fcXVldWU9bmV3IGUucXVldWVDbGFzcyx0aGlzLl9xdWV1ZUNsYXNzPWUucXVldWVDbGFzcyx0aGlzLmNvbmN1cnJlbmN5PWUuY29uY3VycmVuY3ksdGhpcy5fdGltZW91dD1lLnRpbWVvdXQsdGhpcy5fdGhyb3dPblRpbWVvdXQ9ITA9PT1lLnRocm93T25UaW1lb3V0LHRoaXMuX2lzUGF1c2VkPSExPT09ZS5hdXRvU3RhcnR9Z2V0IF9kb2VzSW50ZXJ2YWxBbGxvd0Fub3RoZXIoKXtyZXR1cm4gdGhpcy5faXNJbnRlcnZhbElnbm9yZWR8fHRoaXMuX2ludGVydmFsQ291bnQ8dGhpcy5faW50ZXJ2YWxDYXB9Z2V0IF9kb2VzQ29uY3VycmVudEFsbG93QW5vdGhlcigpe3JldHVybiB0aGlzLl9wZW5kaW5nQ291bnQ8dGhpcy5fY29uY3VycmVuY3l9X25leHQoKXt0aGlzLl9wZW5kaW5nQ291bnQtLSx0aGlzLl90cnlUb1N0YXJ0QW5vdGhlcigpfV9yZXNvbHZlUHJvbWlzZXMoKXt0aGlzLl9yZXNvbHZlRW1wdHkoKSx0aGlzLl9yZXNvbHZlRW1wdHk9cywwPT09dGhpcy5fcGVuZGluZ0NvdW50JiYodGhpcy5fcmVzb2x2ZUlkbGUoKSx0aGlzLl9yZXNvbHZlSWRsZT1zKX1fb25SZXN1bWVJbnRlcnZhbCgpe3RoaXMuX29uSW50ZXJ2YWwoKSx0aGlzLl9pbml0aWFsaXplSW50ZXJ2YWxJZk5lZWRlZCgpLHRoaXMuX3RpbWVvdXRJZD12b2lkIDB9X2lzSW50ZXJ2YWxQYXVzZWQoKXtjb25zdCBlPURhdGUubm93KCk7aWYodm9pZCAwPT09dGhpcy5faW50ZXJ2YWxJZCl7Y29uc3QgdD10aGlzLl9pbnRlcnZhbEVuZC1lO2lmKCEodDwwKSlyZXR1cm4gdm9pZCAwPT09dGhpcy5fdGltZW91dElkJiYodGhpcy5fdGltZW91dElkPXNldFRpbWVvdXQoKCk9Pnt0aGlzLl9vblJlc3VtZUludGVydmFsKCl9LHQpKSwhMDt0aGlzLl9pbnRlcnZhbENvdW50PXRoaXMuX2NhcnJ5b3ZlckNvbmN1cnJlbmN5Q291bnQ/dGhpcy5fcGVuZGluZ0NvdW50OjB9cmV0dXJuITF9X3RyeVRvU3RhcnRBbm90aGVyKCl7aWYoMD09PXRoaXMuX3F1ZXVlLnNpemUpcmV0dXJuIHRoaXMuX2ludGVydmFsSWQmJmNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWxJZCksdGhpcy5faW50ZXJ2YWxJZD12b2lkIDAsdGhpcy5fcmVzb2x2ZVByb21pc2VzKCksITE7aWYoIXRoaXMuX2lzUGF1c2VkKXtjb25zdCBlPSF0aGlzLl9pc0ludGVydmFsUGF1c2VkKCk7aWYodGhpcy5fZG9lc0ludGVydmFsQWxsb3dBbm90aGVyJiZ0aGlzLl9kb2VzQ29uY3VycmVudEFsbG93QW5vdGhlcilyZXR1cm4gdGhpcy5lbWl0KCJhY3RpdmUiKSx0aGlzLl9xdWV1ZS5kZXF1ZXVlKCkoKSxlJiZ0aGlzLl9pbml0aWFsaXplSW50ZXJ2YWxJZk5lZWRlZCgpLCEwfXJldHVybiExfV9pbml0aWFsaXplSW50ZXJ2YWxJZk5lZWRlZCgpe3RoaXMuX2lzSW50ZXJ2YWxJZ25vcmVkfHx2b2lkIDAhPT10aGlzLl9pbnRlcnZhbElkfHwodGhpcy5faW50ZXJ2YWxJZD1zZXRJbnRlcnZhbCgoKT0+e3RoaXMuX29uSW50ZXJ2YWwoKX0sdGhpcy5faW50ZXJ2YWwpLHRoaXMuX2ludGVydmFsRW5kPURhdGUubm93KCkrdGhpcy5faW50ZXJ2YWwpfV9vbkludGVydmFsKCl7MD09PXRoaXMuX2ludGVydmFsQ291bnQmJjA9PT10aGlzLl9wZW5kaW5nQ291bnQmJnRoaXMuX2ludGVydmFsSWQmJihjbGVhckludGVydmFsKHRoaXMuX2ludGVydmFsSWQpLHRoaXMuX2ludGVydmFsSWQ9dm9pZCAwKSx0aGlzLl9pbnRlcnZhbENvdW50PXRoaXMuX2NhcnJ5b3ZlckNvbmN1cnJlbmN5Q291bnQ/dGhpcy5fcGVuZGluZ0NvdW50OjAsdGhpcy5fcHJvY2Vzc1F1ZXVlKCl9X3Byb2Nlc3NRdWV1ZSgpe2Zvcig7dGhpcy5fdHJ5VG9TdGFydEFub3RoZXIoKTspO31nZXQgY29uY3VycmVuY3koKXtyZXR1cm4gdGhpcy5fY29uY3VycmVuY3l9c2V0IGNvbmN1cnJlbmN5KGUpe2lmKCEoIm51bWJlciI9PXR5cGVvZiBlJiZlPj0xKSl0aHJvdyBuZXcgVHlwZUVycm9yKGBFeHBlY3RlZCBcYGNvbmN1cnJlbmN5XGAgdG8gYmUgYSBudW1iZXIgZnJvbSAxIGFuZCB1cCwgZ290IFxgJHtlfVxgICgke3R5cGVvZiBlfSlgKTt0aGlzLl9jb25jdXJyZW5jeT1lLHRoaXMuX3Byb2Nlc3NRdWV1ZSgpfWFzeW5jIGFkZChlLHQ9e30pe3JldHVybiBuZXcgUHJvbWlzZSgocixuKT0+e3RoaXMuX3F1ZXVlLmVucXVldWUoYXN5bmMoKT0+e3RoaXMuX3BlbmRpbmdDb3VudCsrLHRoaXMuX2ludGVydmFsQ291bnQrKzt0cnl7Y29uc3Qgbz12b2lkIDA9PT10aGlzLl90aW1lb3V0JiZ2b2lkIDA9PT10LnRpbWVvdXQ/ZSgpOmkuZGVmYXVsdChQcm9taXNlLnJlc29sdmUoZSgpKSx2b2lkIDA9PT10LnRpbWVvdXQ/dGhpcy5fdGltZW91dDp0LnRpbWVvdXQsKCk9Pnsodm9pZCAwPT09dC50aHJvd09uVGltZW91dD90aGlzLl90aHJvd09uVGltZW91dDp0LnRocm93T25UaW1lb3V0KSYmbih1KX0pO3IoYXdhaXQgbyl9Y2F0Y2goZSl7bihlKX10aGlzLl9uZXh0KCl9LHQpLHRoaXMuX3RyeVRvU3RhcnRBbm90aGVyKCl9KX1hc3luYyBhZGRBbGwoZSx0KXtyZXR1cm4gUHJvbWlzZS5hbGwoZS5tYXAoYXN5bmMgZT0+dGhpcy5hZGQoZSx0KSkpfXN0YXJ0KCl7cmV0dXJuIHRoaXMuX2lzUGF1c2VkPyh0aGlzLl9pc1BhdXNlZD0hMSx0aGlzLl9wcm9jZXNzUXVldWUoKSx0aGlzKTp0aGlzfXBhdXNlKCl7dGhpcy5faXNQYXVzZWQ9ITB9Y2xlYXIoKXt0aGlzLl9xdWV1ZT1uZXcgdGhpcy5fcXVldWVDbGFzc31hc3luYyBvbkVtcHR5KCl7aWYoMCE9PXRoaXMuX3F1ZXVlLnNpemUpcmV0dXJuIG5ldyBQcm9taXNlKGU9Pntjb25zdCB0PXRoaXMuX3Jlc29sdmVFbXB0eTt0aGlzLl9yZXNvbHZlRW1wdHk9KCgpPT57dCgpLGUoKX0pfSl9YXN5bmMgb25JZGxlKCl7aWYoMCE9PXRoaXMuX3BlbmRpbmdDb3VudHx8MCE9PXRoaXMuX3F1ZXVlLnNpemUpcmV0dXJuIG5ldyBQcm9taXNlKGU9Pntjb25zdCB0PXRoaXMuX3Jlc29sdmVJZGxlO3RoaXMuX3Jlc29sdmVJZGxlPSgoKT0+e3QoKSxlKCl9KX0pfWdldCBzaXplKCl7cmV0dXJuIHRoaXMuX3F1ZXVlLnNpemV9c2l6ZUJ5KGUpe3JldHVybiB0aGlzLl9xdWV1ZS5maWx0ZXIoZSkubGVuZ3RofWdldCBwZW5kaW5nKCl7cmV0dXJuIHRoaXMuX3BlbmRpbmdDb3VudH1nZXQgaXNQYXVzZWQoKXtyZXR1cm4gdGhpcy5faXNQYXVzZWR9c2V0IHRpbWVvdXQoZSl7dGhpcy5fdGltZW91dD1lfWdldCB0aW1lb3V0KCl7cmV0dXJuIHRoaXMuX3RpbWVvdXR9fX0seyIuL3ByaW9yaXR5LXF1ZXVlIjozLGV2ZW50ZW1pdHRlcjM6NCwicC10aW1lb3V0Ijo2fV0sMjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksci5kZWZhdWx0PWZ1bmN0aW9uKGUsdCxyKXtsZXQgbj0wLGk9ZS5sZW5ndGg7Zm9yKDtpPjA7KXtjb25zdCBvPWkvMnwwO2xldCBzPW4rbztyKGVbc10sdCk8PTA/KG49KytzLGktPW8rMSk6aT1vfXJldHVybiBufX0se31dLDM6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2NvbnN0IG49ZSgiLi9sb3dlci1ib3VuZCIpO3IuZGVmYXVsdD1jbGFzc3tjb25zdHJ1Y3Rvcigpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJfcXVldWUiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpbXX0pfWVucXVldWUoZSx0KXtjb25zdCByPXtwcmlvcml0eToodD1PYmplY3QuYXNzaWduKHtwcmlvcml0eTowfSx0KSkucHJpb3JpdHkscnVuOmV9O2lmKHRoaXMuc2l6ZSYmdGhpcy5fcXVldWVbdGhpcy5zaXplLTFdLnByaW9yaXR5Pj10LnByaW9yaXR5KXJldHVybiB2b2lkIHRoaXMuX3F1ZXVlLnB1c2gocik7Y29uc3QgaT1uLmRlZmF1bHQodGhpcy5fcXVldWUsciwoZSx0KT0+dC5wcmlvcml0eS1lLnByaW9yaXR5KTt0aGlzLl9xdWV1ZS5zcGxpY2UoaSwwLHIpfWRlcXVldWUoKXtjb25zdCBlPXRoaXMuX3F1ZXVlLnNoaWZ0KCk7cmV0dXJuIGUmJmUucnVufWZpbHRlcihlKXtyZXR1cm4gdGhpcy5fcXVldWUuZmlsdGVyKHQ9PnQucHJpb3JpdHk9PT1lLnByaW9yaXR5KS5tYXAoZT0+ZS5ydW4pfWdldCBzaXplKCl7cmV0dXJuIHRoaXMuX3F1ZXVlLmxlbmd0aH19fSx7Ii4vbG93ZXItYm91bmQiOjJ9XSw0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksaT0ifiI7ZnVuY3Rpb24gbygpe31mdW5jdGlvbiBzKGUsdCxyKXt0aGlzLmZuPWUsdGhpcy5jb250ZXh0PXQsdGhpcy5vbmNlPXJ8fCExfWZ1bmN0aW9uIHUoZSx0LHIsbixvKXtpZigiZnVuY3Rpb24iIT10eXBlb2Ygcil0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGUgbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uIik7dmFyIHU9bmV3IHMocixufHxlLG8pLGE9aT9pK3Q6dDtyZXR1cm4gZS5fZXZlbnRzW2FdP2UuX2V2ZW50c1thXS5mbj9lLl9ldmVudHNbYV09W2UuX2V2ZW50c1thXSx1XTplLl9ldmVudHNbYV0ucHVzaCh1KTooZS5fZXZlbnRzW2FdPXUsZS5fZXZlbnRzQ291bnQrKyksZX1mdW5jdGlvbiBhKGUsdCl7MD09LS1lLl9ldmVudHNDb3VudD9lLl9ldmVudHM9bmV3IG86ZGVsZXRlIGUuX2V2ZW50c1t0XX1mdW5jdGlvbiBsKCl7dGhpcy5fZXZlbnRzPW5ldyBvLHRoaXMuX2V2ZW50c0NvdW50PTB9T2JqZWN0LmNyZWF0ZSYmKG8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobnVsbCksKG5ldyBvKS5fX3Byb3RvX198fChpPSExKSksbC5wcm90b3R5cGUuZXZlbnROYW1lcz1mdW5jdGlvbigpe3ZhciBlLHQscj1bXTtpZigwPT09dGhpcy5fZXZlbnRzQ291bnQpcmV0dXJuIHI7Zm9yKHQgaW4gZT10aGlzLl9ldmVudHMpbi5jYWxsKGUsdCkmJnIucHVzaChpP3Quc2xpY2UoMSk6dCk7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM/ci5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKSk6cn0sbC5wcm90b3R5cGUubGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0PWk/aStlOmUscj10aGlzLl9ldmVudHNbdF07aWYoIXIpcmV0dXJuW107aWYoci5mbilyZXR1cm5bci5mbl07Zm9yKHZhciBuPTAsbz1yLmxlbmd0aCxzPW5ldyBBcnJheShvKTtuPG87bisrKXNbbl09cltuXS5mbjtyZXR1cm4gc30sbC5wcm90b3R5cGUubGlzdGVuZXJDb3VudD1mdW5jdGlvbihlKXt2YXIgdD1pP2krZTplLHI9dGhpcy5fZXZlbnRzW3RdO3JldHVybiByP3IuZm4/MTpyLmxlbmd0aDowfSxsLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGUsdCxyLG4sbyxzKXt2YXIgdT1pP2krZTplO2lmKCF0aGlzLl9ldmVudHNbdV0pcmV0dXJuITE7dmFyIGEsbCxjPXRoaXMuX2V2ZW50c1t1XSxoPWFyZ3VtZW50cy5sZW5ndGg7aWYoYy5mbil7c3dpdGNoKGMub25jZSYmdGhpcy5yZW1vdmVMaXN0ZW5lcihlLGMuZm4sdm9pZCAwLCEwKSxoKXtjYXNlIDE6cmV0dXJuIGMuZm4uY2FsbChjLmNvbnRleHQpLCEwO2Nhc2UgMjpyZXR1cm4gYy5mbi5jYWxsKGMuY29udGV4dCx0KSwhMDtjYXNlIDM6cmV0dXJuIGMuZm4uY2FsbChjLmNvbnRleHQsdCxyKSwhMDtjYXNlIDQ6cmV0dXJuIGMuZm4uY2FsbChjLmNvbnRleHQsdCxyLG4pLCEwO2Nhc2UgNTpyZXR1cm4gYy5mbi5jYWxsKGMuY29udGV4dCx0LHIsbixvKSwhMDtjYXNlIDY6cmV0dXJuIGMuZm4uY2FsbChjLmNvbnRleHQsdCxyLG4sbyxzKSwhMH1mb3IobD0xLGE9bmV3IEFycmF5KGgtMSk7bDxoO2wrKylhW2wtMV09YXJndW1lbnRzW2xdO2MuZm4uYXBwbHkoYy5jb250ZXh0LGEpfWVsc2V7dmFyIGYsdj1jLmxlbmd0aDtmb3IobD0wO2w8djtsKyspc3dpdGNoKGNbbF0ub25jZSYmdGhpcy5yZW1vdmVMaXN0ZW5lcihlLGNbbF0uZm4sdm9pZCAwLCEwKSxoKXtjYXNlIDE6Y1tsXS5mbi5jYWxsKGNbbF0uY29udGV4dCk7YnJlYWs7Y2FzZSAyOmNbbF0uZm4uY2FsbChjW2xdLmNvbnRleHQsdCk7YnJlYWs7Y2FzZSAzOmNbbF0uZm4uY2FsbChjW2xdLmNvbnRleHQsdCxyKTticmVhaztjYXNlIDQ6Y1tsXS5mbi5jYWxsKGNbbF0uY29udGV4dCx0LHIsbik7YnJlYWs7ZGVmYXVsdDppZighYSlmb3IoZj0xLGE9bmV3IEFycmF5KGgtMSk7ZjxoO2YrKylhW2YtMV09YXJndW1lbnRzW2ZdO2NbbF0uZm4uYXBwbHkoY1tsXS5jb250ZXh0LGEpfX1yZXR1cm4hMH0sbC5wcm90b3R5cGUub249ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB1KHRoaXMsZSx0LHIsITEpfSxsLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdSh0aGlzLGUsdCxyLCEwKX0sbC5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89aT9pK2U6ZTtpZighdGhpcy5fZXZlbnRzW29dKXJldHVybiB0aGlzO2lmKCF0KXJldHVybiBhKHRoaXMsbyksdGhpczt2YXIgcz10aGlzLl9ldmVudHNbb107aWYocy5mbilzLmZuIT09dHx8biYmIXMub25jZXx8ciYmcy5jb250ZXh0IT09cnx8YSh0aGlzLG8pO2Vsc2V7Zm9yKHZhciB1PTAsbD1bXSxjPXMubGVuZ3RoO3U8Yzt1KyspKHNbdV0uZm4hPT10fHxuJiYhc1t1XS5vbmNlfHxyJiZzW3VdLmNvbnRleHQhPT1yKSYmbC5wdXNoKHNbdV0pO2wubGVuZ3RoP3RoaXMuX2V2ZW50c1tvXT0xPT09bC5sZW5ndGg/bFswXTpsOmEodGhpcyxvKX1yZXR1cm4gdGhpc30sbC5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlPyh0PWk/aStlOmUsdGhpcy5fZXZlbnRzW3RdJiZhKHRoaXMsdCkpOih0aGlzLl9ldmVudHM9bmV3IG8sdGhpcy5fZXZlbnRzQ291bnQ9MCksdGhpc30sbC5wcm90b3R5cGUub2ZmPWwucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyLGwucHJvdG90eXBlLmFkZExpc3RlbmVyPWwucHJvdG90eXBlLm9uLGwucHJlZml4ZWQ9aSxsLkV2ZW50RW1pdHRlcj1sLHZvaWQgMCE9PXQmJih0LmV4cG9ydHM9bCl9LHt9XSw1OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3QuZXhwb3J0cz0oKGUsdCk9Pih0PXR8fCgoKT0+e30pLGUudGhlbihlPT5uZXcgUHJvbWlzZShlPT57ZSh0KCkpfSkudGhlbigoKT0+ZSksZT0+bmV3IFByb21pc2UoZT0+e2UodCgpKX0pLnRoZW4oKCk9Pnt0aHJvdyBlfSkpKSl9LHt9XSw2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2NvbnN0IG49ZSgicC1maW5hbGx5Iik7Y2xhc3MgaSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMubmFtZT0iVGltZW91dEVycm9yIn19Y29uc3Qgbz0oZSx0LHIpPT5uZXcgUHJvbWlzZSgobyxzKT0+e2lmKCJudW1iZXIiIT10eXBlb2YgdHx8dDwwKXRocm93IG5ldyBUeXBlRXJyb3IoIkV4cGVjdGVkIGBtaWxsaXNlY29uZHNgIHRvIGJlIGEgcG9zaXRpdmUgbnVtYmVyIik7aWYodD09PTEvMClyZXR1cm4gdm9pZCBvKGUpO2NvbnN0IHU9c2V0VGltZW91dCgoKT0+e2lmKCJmdW5jdGlvbiI9PXR5cGVvZiByKXt0cnl7byhyKCkpfWNhdGNoKGUpe3MoZSl9cmV0dXJufWNvbnN0IG49ciBpbnN0YW5jZW9mIEVycm9yP3I6bmV3IGkoInN0cmluZyI9PXR5cGVvZiByP3I6YFByb21pc2UgdGltZWQgb3V0IGFmdGVyICR7dH0gbWlsbGlzZWNvbmRzYCk7ImZ1bmN0aW9uIj09dHlwZW9mIGUuY2FuY2VsJiZlLmNhbmNlbCgpLHMobil9LHQpO24oZS50aGVuKG8scyksKCk9PntjbGVhclRpbWVvdXQodSl9KX0pO3QuZXhwb3J0cz1vLHQuZXhwb3J0cy5kZWZhdWx0PW8sdC5leHBvcnRzLlRpbWVvdXRFcnJvcj1pfSx7InAtZmluYWxseSI6NX1dfSx7fSxbMV0pKDEpfSk7"}]},{"name":"【3年老脚本 继续稳定】 全网音乐一键免费下载 一键搜索 在线试听 增加手机端app和[无损音乐的下载]2020.11.6更新 全新服务器单独运行","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["*://music.163.com/*","*://y.qq.com/*","*://www.kugou.com/*","*://www.kuwo.cn/*","*://www.xiami.com/*","*://music.baidu.com/*","*://www.qingting.fm/*","*://www.lizhi.fm/*","*://music.migu.cn/*","*://www.ximalaya.com/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-end","orig_noframes":null,"orig_connects":[]}},"storage":{"data":{},"ts":1587235898523},"enabled":true,"position":2,"file_url":"https://greasyfork.org/scripts/37058-%E5%85%A8%E7%BD%91%E9%9F%B3%E4%B9%90%E4%B8%80%E9%94%AE%E5%85%8D%E8%B4%B9%E4%B8%8B%E8%BD%BD-%E4%B8%80%E9%94%AE%E6%90%9C%E7%B4%A2-%E5%9C%A8%E7%BA%BF%E8%AF%95%E5%90%AC-%E9%AB%98%E6%B8%85%E5%93%81%E8%B4%A8%E8%AF%B7%E9%80%89%E6%8B%A9qq%E4%B8%8B%E8%BD%BD%E6%BA%90-2018-11-13%E6%9B%B4%E6%96%B0/code/%E5%85%A8%E7%BD%91%E9%9F%B3%E4%B9%90%E4%B8%80%E9%94%AE%E5%85%8D%E8%B4%B9%E4%B8%8B%E8%BD%BD%20%E4%B8%80%E9%94%AE%E6%90%9C%E7%B4%A2%20%E5%9C%A8%E7%BA%BF%E8%AF%95%E5%90%AC%20%E3%80%90%E9%AB%98%E6%B8%85%E5%93%81%E8%B4%A8%E8%AF%B7%E9%80%89%E6%8B%A9QQ%E4%B8%8B%E8%BD%BD%E6%BA%90%E3%80%9120181113%E6%9B%B4%E6%96%B0.user.js","uuid":"76372edc-0b91-42ae-9baa-74fc4c1216fa","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIOOAkDPlubTogIHohJrmnKwg57un57ut56iz5a6a44CRIOWFqOe9kemfs+S5kOS4gOmUruWFjei0ueS4i+i9vSDkuIDplK7mkJzntKIg5Zyo57q/6K+V5ZCsIOWinuWKoOaJi+acuuerr2FwcOWSjFvml6DmjZ/pn7PkuZDnmoTkuIvovb1dMjAyMC4xMS425pu05pawIOWFqOaWsOacjeWKoeWZqOWNleeLrOi/kOihjAovLyBAdmVyc2lvbiAgICAgIDMuMAovLyBAaG9tZXBhZ2UgICAgIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtQ04vc2NyaXB0cy8zNzA1OAovLyBAbWF0Y2ggICAgICAgICo6Ly9tdXNpYy4xNjMuY29tLyoKLy8gQG1hdGNoICAgICAgICAqOi8veS5xcS5jb20vKgovLyBAbWF0Y2ggICAgICAgICo6Ly93d3cua3Vnb3UuY29tLyoKLy8gQG1hdGNoICAgICAgICAqOi8vd3d3Lmt1d28uY24vKgovLyBAbWF0Y2ggICAgICAgICo6Ly93d3cueGlhbWkuY29tLyoKLy8gQG1hdGNoICAgICAgICAqOi8vbXVzaWMuYmFpZHUuY29tLyoKLy8gQG1hdGNoICAgICAgICAqOi8vd3d3LnFpbmd0aW5nLmZtLyoKLy8gQG1hdGNoICAgICAgICAqOi8vd3d3LmxpemhpLmZtLyoKLy8gQG1hdGNoICAgICAgICAqOi8vbXVzaWMubWlndS5jbi8qCi8vIEBtYXRjaCAgICAgICAgKjovL3d3dy54aW1hbGF5YS5jb20vKgovLyBAZGVzY3JpcHRpb24gIOWFqOe9kemfs+S5kOWcqOe6v+ivleWQrCDkuIDplK7lhY3otLnkuIvovb0g5LiA6ZSu5pCc57SiIOaPkOS+m+WkmuermeWQiOS4gCDpn7PkuZDor5XlkKwg6Z+z5LmQ5LiL6L29IOmfs+S5kOaQnOe0ouino+WGs+aWueahiO+8jOe9keaYk+S6kemfs+S5kO+8jFFR6Z+z5LmQ77yM6YW354uX6Z+z5LmQ77yM6YW35oiR6Z+z5LmQ77yM6Jm+57Gz6Z+z5LmQ77yM55m+5bqm6Z+z5LmQ77yM6Jy76JyTRk3vvIzojZTmnp1GTe+8jOWWnOmprOaLiembhQovLyBAZ3JhbnQgICAgICAgIHVuc2FmZVdpbmRvdwovLyBAcmVxdWlyZSAgICAgIGh0dHA6Ly9jZG4uYm9vdGNzcy5jb20vanF1ZXJ5LzEuOC4zL2pxdWVyeS5taW4uanMKLy8gQGljb24gICAgICAgICBodHRwOi8vbXVzaWMuc29uaW1laS5jbi9mYXZpY29uLmljbwovLyBAcnVuLWF0ICAgICAgIGRvY3VtZW50LWVuZAovLyBAbmFtZXNwYWNlIAovLyA9PS9Vc2VyU2NyaXB0PT0KKGZ1bmN0aW9uKCkgewoJJ3VzZSBzdHJpY3QnOwoJdmFyIGN1clBsYXlTaXRlID0gJyc7Cgl2YXIgY3VyV29yZHMgPSAnJzsKCXZhciB2aWRlb1NpdGUgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsKCXZhciByZVdZID0gLzE2MyguKilzb25nL2k7Cgl2YXIgcmVRUSA9IC9RUSguKilzb25nL2k7Cgl2YXIgcmVLRyA9IC9rdWdvdSguKilzb25nL2k7Cgl2YXIgcmVLVyA9IC9rdXdvKC4qKXlpbnl1ZS9pOwoJdmFyIHJlWE0gPSAveGlhbWkvaTsKCXZhciByZUJEID0gL2JhaWR1L2k7Cgl2YXIgcmVRVCA9IC9xaW5ndGluZy9pOwoJdmFyIHJlTFogPSAvbGl6aGkvaTsKCXZhciByZU1HID0gL21pZ3UvaTsKCXZhciByZVhNTFkgPSAveGltYWxheWEvaTsKCXZhciB2aXBCdG4gPSAnPGEgdGFyZ2V0PSJfYmxhbmsiIGlkPSJWaXBNdXNpY0J0biIgc3R5bGU9Im1hcmdpbjoxMHB4IDA7ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzowIDVweDtoZWlnaHQ6MjJweDtib3JkZXI6MXB4IHNvbGlkIHJlZDtjb2xvcjpyZWQ7dmVydGljYWwtYWxpZ246Ym90dG9tO3RleHQtZGVjb3JhdGlvbjpub25lO2ZvbnQtc2l6ZToxN3B4O2xpbmUtaGVpZ2h0OjIycHg7Y3Vyc29yOnBvaW50ZXI7Ij7kuIDplK7lhY3otLnkuIvovb08L2E+JzsKCiAgLy/nvZHmmJPkupHpn7PkuZAKICBpZihyZVdZLnRlc3QodmlkZW9TaXRlKSl7CiAgICB2YXIgVGl0bGUgPSAkKCcudS1pY24tMzcnKTsKICAgIFRpdGxlLnBhcmVudCgnLmhkJykuYWZ0ZXIodmlwQnRuKTsKICAgICQoJyNWaXBNdXNpY0J0bicpLmF0dHIoJ2hyZWYnLCdodHRwOi8vd3d3Lmpic291LmNuLz91cmw9JyArIGVuY29kZVVSSUNvbXBvbmVudCh3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKCdodHRwOi8vbXVzaWMuMTYzLmNvbScsICJodHRwOi8vbXVzaWMuMTYzLmNvbS8jIikpKTsKICB9CiAgCiAgLy9RUemfs+S5kAogIGlmKHJlUVEudGVzdCh2aWRlb1NpdGUpKXsKICAgIHZhciBUaXRsZSA9ICQoJy5kYXRhX19uYW1lX3R4dCcpOwogICAgVGl0bGUucGFyZW50KCcuZGF0YV9fbmFtZScpLmFmdGVyKHZpcEJ0bik7CiAgICAkKCcjVmlwTXVzaWNCdG4nKS5hdHRyKCdocmVmJywnaHR0cDovL3d3dy5qYnNvdS5jbi8/dXJsPScgKyBlbmNvZGVVUklDb21wb25lbnQod2luZG93LmxvY2F0aW9uLmhyZWYpKTsKICB9CiAgCiAgLy/phbfni5fpn7PkuZAKICBpZihyZUtHLnRlc3QodmlkZW9TaXRlKSl7CglLR2FkZCgpOwoJc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtLR2FkZCgpfSwxMDAwKTsKCWZ1bmN0aW9uIEtHYWRkKCl7CgkJaWYoJCgiI1ZpcE11c2ljQnRuIikubGVuZ3RoPT0wICYmICQoIi5hdWRpb05hbWUiKS5sZW5ndGg+MCl7CgkJCXZhciBUaXRsZSA9ICQoJy5hdWRpb05hbWUnKTsKCQkJVGl0bGUucGFyZW50KCcuc29uZ05hbWUnKS5hZnRlcih2aXBCdG4pOwoJCX0KCQkkKCIjVmlwTXVzaWNCdG4iKS5hdHRyKCJocmVmIiwiaHR0cDovL3d3dy5qYnNvdS5jbi8/dXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQod2luZG93LmxvY2F0aW9uLmhyZWYpKTsKCX0KICB9CgogIC8v6YW35oiR6Z+z5LmQCiAgaWYocmVLVy50ZXN0KHZpZGVvU2l0ZSkpewogICAgdmFyIFRpdGxlID0gJCgnI3Npbmxlc0Rvd25CdG4nKTsKICAgIFRpdGxlLnBhcmVudCgnLmRvd24nKS5hZnRlcih2aXBCdG4pOwogICAgJCgnI1ZpcE11c2ljQnRuJykuYXR0cignaHJlZicsJ2h0dHA6Ly93d3cuamJzb3UuY24vP3VybD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5ocmVmKSk7CiAgfQoKICAvL+iZvuexs+mfs+S5kAogIGlmKHJlWE0udGVzdCh2aWRlb1NpdGUpKXsKICAgIHZhciBUaXRsZSA9ICQoJy5wbGF5ZXInKTsKICAgIFRpdGxlLnBhcmVudCgnLnNvbmdfaW5mbycpLmFmdGVyKHZpcEJ0bik7CiAgICAkKCcjVmlwTXVzaWNCdG4nKS5hdHRyKCdocmVmJywnaHR0cDovL3d3dy5qYnNvdS5jbi8/dXJsPScgKyBlbmNvZGVVUklDb21wb25lbnQod2luZG93LmxvY2F0aW9uLmhyZWYpKTsKICB9CiAgCiAgLy/nmb7luqbpn7PkuZAKICBpZihyZUJELnRlc3QodmlkZW9TaXRlKSl7CiAgICB2YXIgVGl0bGUgPSAkKCcuc29uZ3BhZ2UtdGl0bGUnKTsKICAgIFRpdGxlLnBhcmVudCgnLnNvbmcnKS5hZnRlcih2aXBCdG4pOwogICAgJCgnI1ZpcE11c2ljQnRuJykuYXR0cignaHJlZicsJ2h0dHA6Ly93d3cuamJzb3UuY24vP3VybD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5ocmVmKSk7CiAgfQogIAogIC8v6Jy76JyTRk0KICBpZihyZVFULnRlc3QodmlkZW9TaXRlKSl7CglRVGFkZCgpOwoJc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtRVGFkZCgpfSwxMDAwKTsKCWZ1bmN0aW9uIFFUYWRkKCl7CgkJaWYoJCgiI1ZpcE11c2ljQnRuIikubGVuZ3RoPT0wICYmICQoIi5zcHJpdGUtcHJvZ3JhbSIpLmxlbmd0aD4wICYmIC9xaW5ndGluZyguKilwcm9ncmFtcy9pLnRlc3Qod2luZG93LmxvY2F0aW9uLmhyZWYpKXsKCQkJJCgiLnNwcml0ZS1wcm9ncmFtIikucGFyZW50KCkuYWZ0ZXIodmlwQnRuKTsKCQl9CgkJJCgiI1ZpcE11c2ljQnRuIikuYXR0cigiaHJlZiIsImh0dHA6Ly93d3cuamJzb3UuY24vP3VybD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5ocmVmKSk7Cgl9CiAgfQoKICAvL+iNlOaenUZNCiAgaWYocmVMWi50ZXN0KHZpZGVvU2l0ZSkpewogICAgdmFyIFRpdGxlID0gJCgnLmF1ZGlvTmFtZScpOwogICAgVGl0bGUucGFyZW50KCcuYXVkaW9JbmZvJykuYWZ0ZXIodmlwQnRuKTsKICAgICQoJyNWaXBNdXNpY0J0bicpLmF0dHIoJ2hyZWYnLCdodHRwOi8vd3d3Lmpic291LmNuLz91cmw9JyArIGVuY29kZVVSSUNvbXBvbmVudCh3aW5kb3cubG9jYXRpb24uaHJlZikpOwogIH0KICAKICAvL+WWnOmprOaLiembhQogIGlmKHJlWE1MWS50ZXN0KHZpZGVvU2l0ZSkpewoJWE1hZGQoKTsKCXNldEludGVydmFsKGZ1bmN0aW9uKCl7WE1hZGQoKX0sMTAwMCk7CglmdW5jdGlvbiBYTWFkZCgpewoJCWlmKCQoIiNWaXBNdXNpY0J0biIpLmxlbmd0aD09MCAmJiAkKCIuZGV0YWlsQ29udGVudF90aXRsZSIpLmxlbmd0aD4wICYmIC94aW1hbGF5YSguKilzb3VuZC9pLnRlc3Qod2luZG93LmxvY2F0aW9uLmhyZWYpKXsKCQkJdmFyIFRpdGxlID0gJCgnLmRldGFpbENvbnRlbnRfdGl0bGUnKTsKCQkJVGl0bGUucGFyZW50KCcucmlnaHQnKS5hZnRlcih2aXBCdG4pOwoJCX0KCQkkKCIjVmlwTXVzaWNCdG4iKS5hdHRyKCJocmVmIiwiaHR0cDovL3d3dy5qYnNvdS5jbi8/dXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQod2luZG93LmxvY2F0aW9uLmhyZWYpKTsKCX0KICB9IAogIAp9KSgpOw==","requires":[{"meta":{"name":"jquery.min.js","url":"http://cdn.bootcss.com/jquery/1.8.3/jquery.min.js","ts":1608663681864,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2MS44LjMganF1ZXJ5LmNvbSB8IGpxdWVyeS5vcmcvbGljZW5zZSAqLwooZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBfKGUpe3ZhciB0PU1bZV09e307cmV0dXJuIHYuZWFjaChlLnNwbGl0KHkpLGZ1bmN0aW9uKGUsbil7dFtuXT0hMH0pLHR9ZnVuY3Rpb24gSChlLG4scil7aWYocj09PXQmJmUubm9kZVR5cGU9PT0xKXt2YXIgaT0iZGF0YS0iK24ucmVwbGFjZShQLCItJDEiKS50b0xvd2VyQ2FzZSgpO3I9ZS5nZXRBdHRyaWJ1dGUoaSk7aWYodHlwZW9mIHI9PSJzdHJpbmciKXt0cnl7cj1yPT09InRydWUiPyEwOnI9PT0iZmFsc2UiPyExOnI9PT0ibnVsbCI/bnVsbDorcisiIj09PXI/K3I6RC50ZXN0KHIpP3YucGFyc2VKU09OKHIpOnJ9Y2F0Y2gocyl7fXYuZGF0YShlLG4scil9ZWxzZSByPXR9cmV0dXJuIHJ9ZnVuY3Rpb24gQihlKXt2YXIgdDtmb3IodCBpbiBlKXtpZih0PT09ImRhdGEiJiZ2LmlzRW1wdHlPYmplY3QoZVt0XSkpY29udGludWU7aWYodCE9PSJ0b0pTT04iKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIGV0KCl7cmV0dXJuITF9ZnVuY3Rpb24gdHQoKXtyZXR1cm4hMH1mdW5jdGlvbiB1dChlKXtyZXR1cm4hZXx8IWUucGFyZW50Tm9kZXx8ZS5wYXJlbnROb2RlLm5vZGVUeXBlPT09MTF9ZnVuY3Rpb24gYXQoZSx0KXtkbyBlPWVbdF07d2hpbGUoZSYmZS5ub2RlVHlwZSE9PTEpO3JldHVybiBlfWZ1bmN0aW9uIGZ0KGUsdCxuKXt0PXR8fDA7aWYodi5pc0Z1bmN0aW9uKHQpKXJldHVybiB2LmdyZXAoZSxmdW5jdGlvbihlLHIpe3ZhciBpPSEhdC5jYWxsKGUscixlKTtyZXR1cm4gaT09PW59KTtpZih0Lm5vZGVUeXBlKXJldHVybiB2LmdyZXAoZSxmdW5jdGlvbihlLHIpe3JldHVybiBlPT09dD09PW59KTtpZih0eXBlb2YgdD09InN0cmluZyIpe3ZhciByPXYuZ3JlcChlLGZ1bmN0aW9uKGUpe3JldHVybiBlLm5vZGVUeXBlPT09MX0pO2lmKGl0LnRlc3QodCkpcmV0dXJuIHYuZmlsdGVyKHQsciwhbik7dD12LmZpbHRlcih0LHIpfXJldHVybiB2LmdyZXAoZSxmdW5jdGlvbihlLHIpe3JldHVybiB2LmluQXJyYXkoZSx0KT49MD09PW59KX1mdW5jdGlvbiBsdChlKXt2YXIgdD1jdC5zcGxpdCgifCIpLG49ZS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7aWYobi5jcmVhdGVFbGVtZW50KXdoaWxlKHQubGVuZ3RoKW4uY3JlYXRlRWxlbWVudCh0LnBvcCgpKTtyZXR1cm4gbn1mdW5jdGlvbiBMdChlLHQpe3JldHVybiBlLmdldEVsZW1lbnRzQnlUYWdOYW1lKHQpWzBdfHxlLmFwcGVuZENoaWxkKGUub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KHQpKX1mdW5jdGlvbiBBdChlLHQpe2lmKHQubm9kZVR5cGUhPT0xfHwhdi5oYXNEYXRhKGUpKXJldHVybjt2YXIgbixyLGkscz12Ll9kYXRhKGUpLG89di5fZGF0YSh0LHMpLHU9cy5ldmVudHM7aWYodSl7ZGVsZXRlIG8uaGFuZGxlLG8uZXZlbnRzPXt9O2ZvcihuIGluIHUpZm9yKHI9MCxpPXVbbl0ubGVuZ3RoO3I8aTtyKyspdi5ldmVudC5hZGQodCxuLHVbbl1bcl0pfW8uZGF0YSYmKG8uZGF0YT12LmV4dGVuZCh7fSxvLmRhdGEpKX1mdW5jdGlvbiBPdChlLHQpe3ZhciBuO2lmKHQubm9kZVR5cGUhPT0xKXJldHVybjt0LmNsZWFyQXR0cmlidXRlcyYmdC5jbGVhckF0dHJpYnV0ZXMoKSx0Lm1lcmdlQXR0cmlidXRlcyYmdC5tZXJnZUF0dHJpYnV0ZXMoZSksbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksbj09PSJvYmplY3QiPyh0LnBhcmVudE5vZGUmJih0Lm91dGVySFRNTD1lLm91dGVySFRNTCksdi5zdXBwb3J0Lmh0bWw1Q2xvbmUmJmUuaW5uZXJIVE1MJiYhdi50cmltKHQuaW5uZXJIVE1MKSYmKHQuaW5uZXJIVE1MPWUuaW5uZXJIVE1MKSk6bj09PSJpbnB1dCImJkV0LnRlc3QoZS50eXBlKT8odC5kZWZhdWx0Q2hlY2tlZD10LmNoZWNrZWQ9ZS5jaGVja2VkLHQudmFsdWUhPT1lLnZhbHVlJiYodC52YWx1ZT1lLnZhbHVlKSk6bj09PSJvcHRpb24iP3Quc2VsZWN0ZWQ9ZS5kZWZhdWx0U2VsZWN0ZWQ6bj09PSJpbnB1dCJ8fG49PT0idGV4dGFyZWEiP3QuZGVmYXVsdFZhbHVlPWUuZGVmYXVsdFZhbHVlOm49PT0ic2NyaXB0IiYmdC50ZXh0IT09ZS50ZXh0JiYodC50ZXh0PWUudGV4dCksdC5yZW1vdmVBdHRyaWJ1dGUodi5leHBhbmRvKX1mdW5jdGlvbiBNdChlKXtyZXR1cm4gdHlwZW9mIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPSJ1bmRlZmluZWQiP2UuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKTp0eXBlb2YgZS5xdWVyeVNlbGVjdG9yQWxsIT0idW5kZWZpbmVkIj9lLnF1ZXJ5U2VsZWN0b3JBbGwoIioiKTpbXX1mdW5jdGlvbiBfdChlKXtFdC50ZXN0KGUudHlwZSkmJihlLmRlZmF1bHRDaGVja2VkPWUuY2hlY2tlZCl9ZnVuY3Rpb24gUXQoZSx0KXtpZih0IGluIGUpcmV0dXJuIHQ7dmFyIG49dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpLHI9dCxpPUp0Lmxlbmd0aDt3aGlsZShpLS0pe3Q9SnRbaV0rbjtpZih0IGluIGUpcmV0dXJuIHR9cmV0dXJuIHJ9ZnVuY3Rpb24gR3QoZSx0KXtyZXR1cm4gZT10fHxlLHYuY3NzKGUsImRpc3BsYXkiKT09PSJub25lInx8IXYuY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfWZ1bmN0aW9uIFl0KGUsdCl7dmFyIG4scixpPVtdLHM9MCxvPWUubGVuZ3RoO2Zvcig7czxvO3MrKyl7bj1lW3NdO2lmKCFuLnN0eWxlKWNvbnRpbnVlO2lbc109di5fZGF0YShuLCJvbGRkaXNwbGF5IiksdD8oIWlbc10mJm4uc3R5bGUuZGlzcGxheT09PSJub25lIiYmKG4uc3R5bGUuZGlzcGxheT0iIiksbi5zdHlsZS5kaXNwbGF5PT09IiImJkd0KG4pJiYoaVtzXT12Ll9kYXRhKG4sIm9sZGRpc3BsYXkiLG5uKG4ubm9kZU5hbWUpKSkpOihyPUR0KG4sImRpc3BsYXkiKSwhaVtzXSYmciE9PSJub25lIiYmdi5fZGF0YShuLCJvbGRkaXNwbGF5IixyKSl9Zm9yKHM9MDtzPG87cysrKXtuPWVbc107aWYoIW4uc3R5bGUpY29udGludWU7aWYoIXR8fG4uc3R5bGUuZGlzcGxheT09PSJub25lInx8bi5zdHlsZS5kaXNwbGF5PT09IiIpbi5zdHlsZS5kaXNwbGF5PXQ/aVtzXXx8IiI6Im5vbmUifXJldHVybiBlfWZ1bmN0aW9uIFp0KGUsdCxuKXt2YXIgcj1SdC5leGVjKHQpO3JldHVybiByP01hdGgubWF4KDAsclsxXS0obnx8MCkpKyhyWzJdfHwicHgiKTp0fWZ1bmN0aW9uIGVuKGUsdCxuLHIpe3ZhciBpPW49PT0ocj8iYm9yZGVyIjoiY29udGVudCIpPzQ6dD09PSJ3aWR0aCI/MTowLHM9MDtmb3IoO2k8NDtpKz0yKW49PT0ibWFyZ2luIiYmKHMrPXYuY3NzKGUsbiskdFtpXSwhMCkpLHI/KG49PT0iY29udGVudCImJihzLT1wYXJzZUZsb2F0KER0KGUsInBhZGRpbmciKyR0W2ldKSl8fDApLG4hPT0ibWFyZ2luIiYmKHMtPXBhcnNlRmxvYXQoRHQoZSwiYm9yZGVyIiskdFtpXSsiV2lkdGgiKSl8fDApKToocys9cGFyc2VGbG9hdChEdChlLCJwYWRkaW5nIiskdFtpXSkpfHwwLG4hPT0icGFkZGluZyImJihzKz1wYXJzZUZsb2F0KER0KGUsImJvcmRlciIrJHRbaV0rIldpZHRoIikpfHwwKSk7cmV0dXJuIHN9ZnVuY3Rpb24gdG4oZSx0LG4pe3ZhciByPXQ9PT0id2lkdGgiP2Uub2Zmc2V0V2lkdGg6ZS5vZmZzZXRIZWlnaHQsaT0hMCxzPXYuc3VwcG9ydC5ib3hTaXppbmcmJnYuY3NzKGUsImJveFNpemluZyIpPT09ImJvcmRlci1ib3giO2lmKHI8PTB8fHI9PW51bGwpe3I9RHQoZSx0KTtpZihyPDB8fHI9PW51bGwpcj1lLnN0eWxlW3RdO2lmKFV0LnRlc3QocikpcmV0dXJuIHI7aT1zJiYodi5zdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlfHxyPT09ZS5zdHlsZVt0XSkscj1wYXJzZUZsb2F0KHIpfHwwfXJldHVybiByK2VuKGUsdCxufHwocz8iYm9yZGVyIjoiY29udGVudCIpLGkpKyJweCJ9ZnVuY3Rpb24gbm4oZSl7aWYoV3RbZV0pcmV0dXJuIFd0W2VdO3ZhciB0PXYoIjwiK2UrIj4iKS5hcHBlbmRUbyhpLmJvZHkpLG49dC5jc3MoImRpc3BsYXkiKTt0LnJlbW92ZSgpO2lmKG49PT0ibm9uZSJ8fG49PT0iIil7UHQ9aS5ib2R5LmFwcGVuZENoaWxkKFB0fHx2LmV4dGVuZChpLmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpLHtmcmFtZUJvcmRlcjowLHdpZHRoOjAsaGVpZ2h0OjB9KSk7aWYoIUh0fHwhUHQuY3JlYXRlRWxlbWVudClIdD0oUHQuY29udGVudFdpbmRvd3x8UHQuY29udGVudERvY3VtZW50KS5kb2N1bWVudCxIdC53cml0ZSgiPCFkb2N0eXBlIGh0bWw+PGh0bWw+PGJvZHk+IiksSHQuY2xvc2UoKTt0PUh0LmJvZHkuYXBwZW5kQ2hpbGQoSHQuY3JlYXRlRWxlbWVudChlKSksbj1EdCh0LCJkaXNwbGF5IiksaS5ib2R5LnJlbW92ZUNoaWxkKFB0KX1yZXR1cm4gV3RbZV09bixufWZ1bmN0aW9uIGZuKGUsdCxuLHIpe3ZhciBpO2lmKHYuaXNBcnJheSh0KSl2LmVhY2godCxmdW5jdGlvbih0LGkpe258fHNuLnRlc3QoZSk/cihlLGkpOmZuKGUrIlsiKyh0eXBlb2YgaT09Im9iamVjdCI/dDoiIikrIl0iLGksbixyKX0pO2Vsc2UgaWYoIW4mJnYudHlwZSh0KT09PSJvYmplY3QiKWZvcihpIGluIHQpZm4oZSsiWyIraSsiXSIsdFtpXSxuLHIpO2Vsc2UgcihlLHQpfWZ1bmN0aW9uIENuKGUpe3JldHVybiBmdW5jdGlvbih0LG4pe3R5cGVvZiB0IT0ic3RyaW5nIiYmKG49dCx0PSIqIik7dmFyIHIsaSxzLG89dC50b0xvd2VyQ2FzZSgpLnNwbGl0KHkpLHU9MCxhPW8ubGVuZ3RoO2lmKHYuaXNGdW5jdGlvbihuKSlmb3IoO3U8YTt1Kyspcj1vW3VdLHM9L15cKy8udGVzdChyKSxzJiYocj1yLnN1YnN0cigxKXx8IioiKSxpPWVbcl09ZVtyXXx8W10saVtzPyJ1bnNoaWZ0IjoicHVzaCJdKG4pfX1mdW5jdGlvbiBrbihlLG4scixpLHMsbyl7cz1zfHxuLmRhdGFUeXBlc1swXSxvPW98fHt9LG9bc109ITA7dmFyIHUsYT1lW3NdLGY9MCxsPWE/YS5sZW5ndGg6MCxjPWU9PT1Tbjtmb3IoO2Y8bCYmKGN8fCF1KTtmKyspdT1hW2ZdKG4scixpKSx0eXBlb2YgdT09InN0cmluZyImJighY3x8b1t1XT91PXQ6KG4uZGF0YVR5cGVzLnVuc2hpZnQodSksdT1rbihlLG4scixpLHUsbykpKTtyZXR1cm4oY3x8IXUpJiYhb1siKiJdJiYodT1rbihlLG4scixpLCIqIixvKSksdX1mdW5jdGlvbiBMbihlLG4pe3ZhciByLGkscz12LmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKHIgaW4gbiluW3JdIT09dCYmKChzW3JdP2U6aXx8KGk9e30pKVtyXT1uW3JdKTtpJiZ2LmV4dGVuZCghMCxlLGkpfWZ1bmN0aW9uIEFuKGUsbixyKXt2YXIgaSxzLG8sdSxhPWUuY29udGVudHMsZj1lLmRhdGFUeXBlcyxsPWUucmVzcG9uc2VGaWVsZHM7Zm9yKHMgaW4gbClzIGluIHImJihuW2xbc11dPXJbc10pO3doaWxlKGZbMF09PT0iKiIpZi5zaGlmdCgpLGk9PT10JiYoaT1lLm1pbWVUeXBlfHxuLmdldFJlc3BvbnNlSGVhZGVyKCJjb250ZW50LXR5cGUiKSk7aWYoaSlmb3IocyBpbiBhKWlmKGFbc10mJmFbc10udGVzdChpKSl7Zi51bnNoaWZ0KHMpO2JyZWFrfWlmKGZbMF1pbiByKW89ZlswXTtlbHNle2ZvcihzIGluIHIpe2lmKCFmWzBdfHxlLmNvbnZlcnRlcnNbcysiICIrZlswXV0pe289czticmVha311fHwodT1zKX1vPW98fHV9aWYobylyZXR1cm4gbyE9PWZbMF0mJmYudW5zaGlmdChvKSxyW29dfWZ1bmN0aW9uIE9uKGUsdCl7dmFyIG4scixpLHMsbz1lLmRhdGFUeXBlcy5zbGljZSgpLHU9b1swXSxhPXt9LGY9MDtlLmRhdGFGaWx0ZXImJih0PWUuZGF0YUZpbHRlcih0LGUuZGF0YVR5cGUpKTtpZihvWzFdKWZvcihuIGluIGUuY29udmVydGVycylhW24udG9Mb3dlckNhc2UoKV09ZS5jb252ZXJ0ZXJzW25dO2Zvcig7aT1vWysrZl07KWlmKGkhPT0iKiIpe2lmKHUhPT0iKiImJnUhPT1pKXtuPWFbdSsiICIraV18fGFbIiogIitpXTtpZighbilmb3IociBpbiBhKXtzPXIuc3BsaXQoIiAiKTtpZihzWzFdPT09aSl7bj1hW3UrIiAiK3NbMF1dfHxhWyIqICIrc1swXV07aWYobil7bj09PSEwP249YVtyXTphW3JdIT09ITAmJihpPXNbMF0sby5zcGxpY2UoZi0tLDAsaSkpO2JyZWFrfX19aWYobiE9PSEwKWlmKG4mJmVbInRocm93cyJdKXQ9bih0KTtlbHNlIHRyeXt0PW4odCl9Y2F0Y2gobCl7cmV0dXJue3N0YXRlOiJwYXJzZXJlcnJvciIsZXJyb3I6bj9sOiJObyBjb252ZXJzaW9uIGZyb20gIit1KyIgdG8gIitpfX19dT1pfXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTp0fX1mdW5jdGlvbiBGbigpe3RyeXtyZXR1cm4gbmV3IGUuWE1MSHR0cFJlcXVlc3R9Y2F0Y2godCl7fX1mdW5jdGlvbiBJbigpe3RyeXtyZXR1cm4gbmV3IGUuQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKX1jYXRjaCh0KXt9fWZ1bmN0aW9uICRuKCl7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtxbj10fSwwKSxxbj12Lm5vdygpfWZ1bmN0aW9uIEpuKGUsdCl7di5lYWNoKHQsZnVuY3Rpb24odCxuKXt2YXIgcj0oVm5bdF18fFtdKS5jb25jYXQoVm5bIioiXSksaT0wLHM9ci5sZW5ndGg7Zm9yKDtpPHM7aSsrKWlmKHJbaV0uY2FsbChlLHQsbikpcmV0dXJufSl9ZnVuY3Rpb24gS24oZSx0LG4pe3ZhciByLGk9MCxzPTAsbz1Ybi5sZW5ndGgsdT12LkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIGEuZWxlbX0pLGE9ZnVuY3Rpb24oKXt2YXIgdD1xbnx8JG4oKSxuPU1hdGgubWF4KDAsZi5zdGFydFRpbWUrZi5kdXJhdGlvbi10KSxyPW4vZi5kdXJhdGlvbnx8MCxpPTEtcixzPTAsbz1mLnR3ZWVucy5sZW5ndGg7Zm9yKDtzPG87cysrKWYudHdlZW5zW3NdLnJ1bihpKTtyZXR1cm4gdS5ub3RpZnlXaXRoKGUsW2YsaSxuXSksaTwxJiZvP246KHUucmVzb2x2ZVdpdGgoZSxbZl0pLCExKX0sZj11LnByb21pc2Uoe2VsZW06ZSxwcm9wczp2LmV4dGVuZCh7fSx0KSxvcHRzOnYuZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9fSxuKSxvcmlnaW5hbFByb3BlcnRpZXM6dCxvcmlnaW5hbE9wdGlvbnM6bixzdGFydFRpbWU6cW58fCRuKCksZHVyYXRpb246bi5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24odCxuLHIpe3ZhciBpPXYuVHdlZW4oZSxmLm9wdHMsdCxuLGYub3B0cy5zcGVjaWFsRWFzaW5nW3RdfHxmLm9wdHMuZWFzaW5nKTtyZXR1cm4gZi50d2VlbnMucHVzaChpKSxpfSxzdG9wOmZ1bmN0aW9uKHQpe3ZhciBuPTAscj10P2YudHdlZW5zLmxlbmd0aDowO2Zvcig7bjxyO24rKylmLnR3ZWVuc1tuXS5ydW4oMSk7cmV0dXJuIHQ/dS5yZXNvbHZlV2l0aChlLFtmLHRdKTp1LnJlamVjdFdpdGgoZSxbZix0XSksdGhpc319KSxsPWYucHJvcHM7UW4obCxmLm9wdHMuc3BlY2lhbEVhc2luZyk7Zm9yKDtpPG87aSsrKXtyPVhuW2ldLmNhbGwoZixlLGwsZi5vcHRzKTtpZihyKXJldHVybiByfXJldHVybiBKbihmLGwpLHYuaXNGdW5jdGlvbihmLm9wdHMuc3RhcnQpJiZmLm9wdHMuc3RhcnQuY2FsbChlLGYpLHYuZngudGltZXIodi5leHRlbmQoYSx7YW5pbTpmLHF1ZXVlOmYub3B0cy5xdWV1ZSxlbGVtOmV9KSksZi5wcm9ncmVzcyhmLm9wdHMucHJvZ3Jlc3MpLmRvbmUoZi5vcHRzLmRvbmUsZi5vcHRzLmNvbXBsZXRlKS5mYWlsKGYub3B0cy5mYWlsKS5hbHdheXMoZi5vcHRzLmFsd2F5cyl9ZnVuY3Rpb24gUW4oZSx0KXt2YXIgbixyLGkscyxvO2ZvcihuIGluIGUpe3I9di5jYW1lbENhc2UobiksaT10W3JdLHM9ZVtuXSx2LmlzQXJyYXkocykmJihpPXNbMV0scz1lW25dPXNbMF0pLG4hPT1yJiYoZVtyXT1zLGRlbGV0ZSBlW25dKSxvPXYuY3NzSG9va3Nbcl07aWYobyYmImV4cGFuZCJpbiBvKXtzPW8uZXhwYW5kKHMpLGRlbGV0ZSBlW3JdO2ZvcihuIGluIHMpbiBpbiBlfHwoZVtuXT1zW25dLHRbbl09aSl9ZWxzZSB0W3JdPWl9fWZ1bmN0aW9uIEduKGUsdCxuKXt2YXIgcixpLHMsbyx1LGEsZixsLGMsaD10aGlzLHA9ZS5zdHlsZSxkPXt9LG09W10sZz1lLm5vZGVUeXBlJiZHdChlKTtuLnF1ZXVlfHwobD12Ll9xdWV1ZUhvb2tzKGUsImZ4IiksbC51bnF1ZXVlZD09bnVsbCYmKGwudW5xdWV1ZWQ9MCxjPWwuZW1wdHkuZmlyZSxsLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtsLnVucXVldWVkfHxjKCl9KSxsLnVucXVldWVkKyssaC5hbHdheXMoZnVuY3Rpb24oKXtoLmFsd2F5cyhmdW5jdGlvbigpe2wudW5xdWV1ZWQtLSx2LnF1ZXVlKGUsImZ4IikubGVuZ3RofHxsLmVtcHR5LmZpcmUoKX0pfSkpLGUubm9kZVR5cGU9PT0xJiYoImhlaWdodCJpbiB0fHwid2lkdGgiaW4gdCkmJihuLm92ZXJmbG93PVtwLm92ZXJmbG93LHAub3ZlcmZsb3dYLHAub3ZlcmZsb3dZXSx2LmNzcyhlLCJkaXNwbGF5Iik9PT0iaW5saW5lIiYmdi5jc3MoZSwiZmxvYXQiKT09PSJub25lIiYmKCF2LnN1cHBvcnQuaW5saW5lQmxvY2tOZWVkc0xheW91dHx8bm4oZS5ub2RlTmFtZSk9PT0iaW5saW5lIj9wLmRpc3BsYXk9ImlubGluZS1ibG9jayI6cC56b29tPTEpKSxuLm92ZXJmbG93JiYocC5vdmVyZmxvdz0iaGlkZGVuIix2LnN1cHBvcnQuc2hyaW5rV3JhcEJsb2Nrc3x8aC5kb25lKGZ1bmN0aW9uKCl7cC5vdmVyZmxvdz1uLm92ZXJmbG93WzBdLHAub3ZlcmZsb3dYPW4ub3ZlcmZsb3dbMV0scC5vdmVyZmxvd1k9bi5vdmVyZmxvd1syXX0pKTtmb3IociBpbiB0KXtzPXRbcl07aWYoVW4uZXhlYyhzKSl7ZGVsZXRlIHRbcl0sYT1hfHxzPT09InRvZ2dsZSI7aWYocz09PShnPyJoaWRlIjoic2hvdyIpKWNvbnRpbnVlO20ucHVzaChyKX19bz1tLmxlbmd0aDtpZihvKXt1PXYuX2RhdGEoZSwiZnhzaG93Iil8fHYuX2RhdGEoZSwiZnhzaG93Iix7fSksImhpZGRlbiJpbiB1JiYoZz11LmhpZGRlbiksYSYmKHUuaGlkZGVuPSFnKSxnP3YoZSkuc2hvdygpOmguZG9uZShmdW5jdGlvbigpe3YoZSkuaGlkZSgpfSksaC5kb25lKGZ1bmN0aW9uKCl7dmFyIHQ7di5yZW1vdmVEYXRhKGUsImZ4c2hvdyIsITApO2Zvcih0IGluIGQpdi5zdHlsZShlLHQsZFt0XSl9KTtmb3Iocj0wO3I8bztyKyspaT1tW3JdLGY9aC5jcmVhdGVUd2VlbihpLGc/dVtpXTowKSxkW2ldPXVbaV18fHYuc3R5bGUoZSxpKSxpIGluIHV8fCh1W2ldPWYuc3RhcnQsZyYmKGYuZW5kPWYuc3RhcnQsZi5zdGFydD1pPT09IndpZHRoInx8aT09PSJoZWlnaHQiPzE6MCkpfX1mdW5jdGlvbiBZbihlLHQsbixyLGkpe3JldHVybiBuZXcgWW4ucHJvdG90eXBlLmluaXQoZSx0LG4scixpKX1mdW5jdGlvbiBabihlLHQpe3ZhciBuLHI9e2hlaWdodDplfSxpPTA7dD10PzE6MDtmb3IoO2k8NDtpKz0yLXQpbj0kdFtpXSxyWyJtYXJnaW4iK25dPXJbInBhZGRpbmciK25dPWU7cmV0dXJuIHQmJihyLm9wYWNpdHk9ci53aWR0aD1lKSxyfWZ1bmN0aW9uIHRyKGUpe3JldHVybiB2LmlzV2luZG93KGUpP2U6ZS5ub2RlVHlwZT09PTk/ZS5kZWZhdWx0Vmlld3x8ZS5wYXJlbnRXaW5kb3c6ITF9dmFyIG4scixpPWUuZG9jdW1lbnQscz1lLmxvY2F0aW9uLG89ZS5uYXZpZ2F0b3IsdT1lLmpRdWVyeSxhPWUuJCxmPUFycmF5LnByb3RvdHlwZS5wdXNoLGw9QXJyYXkucHJvdG90eXBlLnNsaWNlLGM9QXJyYXkucHJvdG90eXBlLmluZGV4T2YsaD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLHA9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxkPVN0cmluZy5wcm90b3R5cGUudHJpbSx2PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyB2LmZuLmluaXQoZSx0LG4pfSxtPS9bXC0rXT8oPzpcZCpcLnwpXGQrKD86W2VFXVtcLStdP1xkK3wpLy5zb3VyY2UsZz0vXFMvLHk9L1xzKy8sYj0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2csdz0vXig/OlteIzxdKig8W1x3XFddKz4pW14+XSokfCMoW1x3XC1dKikkKS8sRT0vXjwoXHcrKVxzKlwvPz4oPzo8XC9cMT58KSQvLFM9L15bXF0sOnt9XHNdKiQvLHg9Lyg/Ol58OnwsKSg/OlxzKlxbKSsvZyxUPS9cXCg/OlsiXFxcL2JmbnJ0XXx1W1xkYS1mQS1GXXs0fSkvZyxOPS8iW14iXFxcclxuXSoifHRydWV8ZmFsc2V8bnVsbHwtPyg/OlxkXGQqXC58KVxkKyg/OltlRV1bXC0rXT9cZCt8KS9nLEM9L14tbXMtLyxrPS8tKFtcZGEtel0pL2dpLEw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4odCsiIikudG9VcHBlckNhc2UoKX0sQT1mdW5jdGlvbigpe2kuYWRkRXZlbnRMaXN0ZW5lcj8oaS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixBLCExKSx2LnJlYWR5KCkpOmkucmVhZHlTdGF0ZT09PSJjb21wbGV0ZSImJihpLmRldGFjaEV2ZW50KCJvbnJlYWR5c3RhdGVjaGFuZ2UiLEEpLHYucmVhZHkoKSl9LE89e307di5mbj12LnByb3RvdHlwZT17Y29uc3RydWN0b3I6dixpbml0OmZ1bmN0aW9uKGUsbixyKXt2YXIgcyxvLHUsYTtpZighZSlyZXR1cm4gdGhpcztpZihlLm5vZGVUeXBlKXJldHVybiB0aGlzLmNvbnRleHQ9dGhpc1swXT1lLHRoaXMubGVuZ3RoPTEsdGhpcztpZih0eXBlb2YgZT09InN0cmluZyIpe2UuY2hhckF0KDApPT09IjwiJiZlLmNoYXJBdChlLmxlbmd0aC0xKT09PSI+IiYmZS5sZW5ndGg+PTM/cz1bbnVsbCxlLG51bGxdOnM9dy5leGVjKGUpO2lmKHMmJihzWzFdfHwhbikpe2lmKHNbMV0pcmV0dXJuIG49biBpbnN0YW5jZW9mIHY/blswXTpuLGE9biYmbi5ub2RlVHlwZT9uLm93bmVyRG9jdW1lbnR8fG46aSxlPXYucGFyc2VIVE1MKHNbMV0sYSwhMCksRS50ZXN0KHNbMV0pJiZ2LmlzUGxhaW5PYmplY3QobikmJnRoaXMuYXR0ci5jYWxsKGUsbiwhMCksdi5tZXJnZSh0aGlzLGUpO289aS5nZXRFbGVtZW50QnlJZChzWzJdKTtpZihvJiZvLnBhcmVudE5vZGUpe2lmKG8uaWQhPT1zWzJdKXJldHVybiByLmZpbmQoZSk7dGhpcy5sZW5ndGg9MSx0aGlzWzBdPW99cmV0dXJuIHRoaXMuY29udGV4dD1pLHRoaXMuc2VsZWN0b3I9ZSx0aGlzfXJldHVybiFufHxuLmpxdWVyeT8obnx8cikuZmluZChlKTp0aGlzLmNvbnN0cnVjdG9yKG4pLmZpbmQoZSl9cmV0dXJuIHYuaXNGdW5jdGlvbihlKT9yLnJlYWR5KGUpOihlLnNlbGVjdG9yIT09dCYmKHRoaXMuc2VsZWN0b3I9ZS5zZWxlY3Rvcix0aGlzLmNvbnRleHQ9ZS5jb250ZXh0KSx2Lm1ha2VBcnJheShlLHRoaXMpKX0sc2VsZWN0b3I6IiIsanF1ZXJ5OiIxLjguMyIsbGVuZ3RoOjAsc2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBsLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gZT09bnVsbD90aGlzLnRvQXJyYXkoKTplPDA/dGhpc1t0aGlzLmxlbmd0aCtlXTp0aGlzW2VdfSxwdXNoU3RhY2s6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXYubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGUpO3JldHVybiByLnByZXZPYmplY3Q9dGhpcyxyLmNvbnRleHQ9dGhpcy5jb250ZXh0LHQ9PT0iZmluZCI/ci5zZWxlY3Rvcj10aGlzLnNlbGVjdG9yKyh0aGlzLnNlbGVjdG9yPyIgIjoiIikrbjp0JiYoci5zZWxlY3Rvcj10aGlzLnNlbGVjdG9yKyIuIit0KyIoIituKyIpIikscn0sZWFjaDpmdW5jdGlvbihlLHQpe3JldHVybiB2LmVhY2godGhpcyxlLHQpfSxyZWFkeTpmdW5jdGlvbihlKXtyZXR1cm4gdi5yZWFkeS5wcm9taXNlKCkuZG9uZShlKSx0aGlzfSxlcTpmdW5jdGlvbihlKXtyZXR1cm4gZT0rZSxlPT09LTE/dGhpcy5zbGljZShlKTp0aGlzLnNsaWNlKGUsZSsxKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobC5hcHBseSh0aGlzLGFyZ3VtZW50cyksInNsaWNlIixsLmNhbGwoYXJndW1lbnRzKS5qb2luKCIsIikpfSxtYXA6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHYubWFwKHRoaXMsZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5jYWxsKHQsbix0KX0pKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8dGhpcy5jb25zdHJ1Y3RvcihudWxsKX0scHVzaDpmLHNvcnQ6W10uc29ydCxzcGxpY2U6W10uc3BsaWNlfSx2LmZuLmluaXQucHJvdG90eXBlPXYuZm4sdi5leHRlbmQ9di5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgZSxuLHIsaSxzLG8sdT1hcmd1bWVudHNbMF18fHt9LGE9MSxmPWFyZ3VtZW50cy5sZW5ndGgsbD0hMTt0eXBlb2YgdT09ImJvb2xlYW4iJiYobD11LHU9YXJndW1lbnRzWzFdfHx7fSxhPTIpLHR5cGVvZiB1IT0ib2JqZWN0IiYmIXYuaXNGdW5jdGlvbih1KSYmKHU9e30pLGY9PT1hJiYodT10aGlzLC0tYSk7Zm9yKDthPGY7YSsrKWlmKChlPWFyZ3VtZW50c1thXSkhPW51bGwpZm9yKG4gaW4gZSl7cj11W25dLGk9ZVtuXTtpZih1PT09aSljb250aW51ZTtsJiZpJiYodi5pc1BsYWluT2JqZWN0KGkpfHwocz12LmlzQXJyYXkoaSkpKT8ocz8ocz0hMSxvPXImJnYuaXNBcnJheShyKT9yOltdKTpvPXImJnYuaXNQbGFpbk9iamVjdChyKT9yOnt9LHVbbl09di5leHRlbmQobCxvLGkpKTppIT09dCYmKHVbbl09aSl9cmV0dXJuIHV9LHYuZXh0ZW5kKHtub0NvbmZsaWN0OmZ1bmN0aW9uKHQpe3JldHVybiBlLiQ9PT12JiYoZS4kPWEpLHQmJmUualF1ZXJ5PT09diYmKGUualF1ZXJ5PXUpLHZ9LGlzUmVhZHk6ITEscmVhZHlXYWl0OjEsaG9sZFJlYWR5OmZ1bmN0aW9uKGUpe2U/di5yZWFkeVdhaXQrKzp2LnJlYWR5KCEwKX0scmVhZHk6ZnVuY3Rpb24oZSl7aWYoZT09PSEwPy0tdi5yZWFkeVdhaXQ6di5pc1JlYWR5KXJldHVybjtpZighaS5ib2R5KXJldHVybiBzZXRUaW1lb3V0KHYucmVhZHksMSk7di5pc1JlYWR5PSEwO2lmKGUhPT0hMCYmLS12LnJlYWR5V2FpdD4wKXJldHVybjtyLnJlc29sdmVXaXRoKGksW3ZdKSx2LmZuLnRyaWdnZXImJnYoaSkudHJpZ2dlcigicmVhZHkiKS5vZmYoInJlYWR5Iil9LGlzRnVuY3Rpb246ZnVuY3Rpb24oZSl7cmV0dXJuIHYudHlwZShlKT09PSJmdW5jdGlvbiJ9LGlzQXJyYXk6QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIHYudHlwZShlKT09PSJhcnJheSJ9LGlzV2luZG93OmZ1bmN0aW9uKGUpe3JldHVybiBlIT1udWxsJiZlPT1lLndpbmRvd30saXNOdW1lcmljOmZ1bmN0aW9uKGUpe3JldHVybiFpc05hTihwYXJzZUZsb2F0KGUpKSYmaXNGaW5pdGUoZSl9LHR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PW51bGw/U3RyaW5nKGUpOk9baC5jYWxsKGUpXXx8Im9iamVjdCJ9LGlzUGxhaW5PYmplY3Q6ZnVuY3Rpb24oZSl7aWYoIWV8fHYudHlwZShlKSE9PSJvYmplY3QifHxlLm5vZGVUeXBlfHx2LmlzV2luZG93KGUpKXJldHVybiExO3RyeXtpZihlLmNvbnN0cnVjdG9yJiYhcC5jYWxsKGUsImNvbnN0cnVjdG9yIikmJiFwLmNhbGwoZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsImlzUHJvdG90eXBlT2YiKSlyZXR1cm4hMX1jYXRjaChuKXtyZXR1cm4hMX12YXIgcjtmb3IociBpbiBlKTtyZXR1cm4gcj09PXR8fHAuY2FsbChlLHIpfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIGUpcmV0dXJuITE7cmV0dXJuITB9LGVycm9yOmZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihlKX0scGFyc2VIVE1MOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtyZXR1cm4hZXx8dHlwZW9mIGUhPSJzdHJpbmciP251bGw6KHR5cGVvZiB0PT0iYm9vbGVhbiImJihuPXQsdD0wKSx0PXR8fGksKHI9RS5leGVjKGUpKT9bdC5jcmVhdGVFbGVtZW50KHJbMV0pXToocj12LmJ1aWxkRnJhZ21lbnQoW2VdLHQsbj9udWxsOltdKSx2Lm1lcmdlKFtdLChyLmNhY2hlYWJsZT92LmNsb25lKHIuZnJhZ21lbnQpOnIuZnJhZ21lbnQpLmNoaWxkTm9kZXMpKSl9LHBhcnNlSlNPTjpmdW5jdGlvbih0KXtpZighdHx8dHlwZW9mIHQhPSJzdHJpbmciKXJldHVybiBudWxsO3Q9di50cmltKHQpO2lmKGUuSlNPTiYmZS5KU09OLnBhcnNlKXJldHVybiBlLkpTT04ucGFyc2UodCk7aWYoUy50ZXN0KHQucmVwbGFjZShULCJAIikucmVwbGFjZShOLCJdIikucmVwbGFjZSh4LCIiKSkpcmV0dXJuKG5ldyBGdW5jdGlvbigicmV0dXJuICIrdCkpKCk7di5lcnJvcigiSW52YWxpZCBKU09OOiAiK3QpfSxwYXJzZVhNTDpmdW5jdGlvbihuKXt2YXIgcixpO2lmKCFufHx0eXBlb2YgbiE9InN0cmluZyIpcmV0dXJuIG51bGw7dHJ5e2UuRE9NUGFyc2VyPyhpPW5ldyBET01QYXJzZXIscj1pLnBhcnNlRnJvbVN0cmluZyhuLCJ0ZXh0L3htbCIpKToocj1uZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTERPTSIpLHIuYXN5bmM9ImZhbHNlIixyLmxvYWRYTUwobikpfWNhdGNoKHMpe3I9dH1yZXR1cm4oIXJ8fCFyLmRvY3VtZW50RWxlbWVudHx8ci5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGFyc2VyZXJyb3IiKS5sZW5ndGgpJiZ2LmVycm9yKCJJbnZhbGlkIFhNTDogIituKSxyfSxub29wOmZ1bmN0aW9uKCl7fSxnbG9iYWxFdmFsOmZ1bmN0aW9uKHQpe3QmJmcudGVzdCh0KSYmKGUuZXhlY1NjcmlwdHx8ZnVuY3Rpb24odCl7ZS5ldmFsLmNhbGwoZSx0KX0pKHQpfSxjYW1lbENhc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShDLCJtcy0iKS5yZXBsYWNlKGssTCl9LG5vZGVOYW1lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubm9kZU5hbWUmJmUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXQudG9Mb3dlckNhc2UoKX0sZWFjaDpmdW5jdGlvbihlLG4scil7dmFyIGkscz0wLG89ZS5sZW5ndGgsdT1vPT09dHx8di5pc0Z1bmN0aW9uKGUpO2lmKHIpe2lmKHUpe2ZvcihpIGluIGUpaWYobi5hcHBseShlW2ldLHIpPT09ITEpYnJlYWt9ZWxzZSBmb3IoO3M8bzspaWYobi5hcHBseShlW3MrK10scik9PT0hMSlicmVha31lbHNlIGlmKHUpe2ZvcihpIGluIGUpaWYobi5jYWxsKGVbaV0saSxlW2ldKT09PSExKWJyZWFrfWVsc2UgZm9yKDtzPG87KWlmKG4uY2FsbChlW3NdLHMsZVtzKytdKT09PSExKWJyZWFrO3JldHVybiBlfSx0cmltOmQmJiFkLmNhbGwoIlx1ZmVmZlx1MDBhMCIpP2Z1bmN0aW9uKGUpe3JldHVybiBlPT1udWxsPyIiOmQuY2FsbChlKX06ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PW51bGw/IiI6KGUrIiIpLnJlcGxhY2UoYiwiIil9LG1ha2VBcnJheTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9dHx8W107cmV0dXJuIGUhPW51bGwmJihuPXYudHlwZShlKSxlLmxlbmd0aD09bnVsbHx8bj09PSJzdHJpbmcifHxuPT09ImZ1bmN0aW9uInx8bj09PSJyZWdleHAifHx2LmlzV2luZG93KGUpP2YuY2FsbChyLGUpOnYubWVyZ2UocixlKSkscn0saW5BcnJheTpmdW5jdGlvbihlLHQsbil7dmFyIHI7aWYodCl7aWYoYylyZXR1cm4gYy5jYWxsKHQsZSxuKTtyPXQubGVuZ3RoLG49bj9uPDA/TWF0aC5tYXgoMCxyK24pOm46MDtmb3IoO248cjtuKyspaWYobiBpbiB0JiZ0W25dPT09ZSlyZXR1cm4gbn1yZXR1cm4tMX0sbWVyZ2U6ZnVuY3Rpb24oZSxuKXt2YXIgcj1uLmxlbmd0aCxpPWUubGVuZ3RoLHM9MDtpZih0eXBlb2Ygcj09Im51bWJlciIpZm9yKDtzPHI7cysrKWVbaSsrXT1uW3NdO2Vsc2Ugd2hpbGUobltzXSE9PXQpZVtpKytdPW5bcysrXTtyZXR1cm4gZS5sZW5ndGg9aSxlfSxncmVwOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPVtdLHM9MCxvPWUubGVuZ3RoO249ISFuO2Zvcig7czxvO3MrKylyPSEhdChlW3NdLHMpLG4hPT1yJiZpLnB1c2goZVtzXSk7cmV0dXJuIGl9LG1hcDpmdW5jdGlvbihlLG4scil7dmFyIGkscyxvPVtdLHU9MCxhPWUubGVuZ3RoLGY9ZSBpbnN0YW5jZW9mIHZ8fGEhPT10JiZ0eXBlb2YgYT09Im51bWJlciImJihhPjAmJmVbMF0mJmVbYS0xXXx8YT09PTB8fHYuaXNBcnJheShlKSk7aWYoZilmb3IoO3U8YTt1KyspaT1uKGVbdV0sdSxyKSxpIT1udWxsJiYob1tvLmxlbmd0aF09aSk7ZWxzZSBmb3IocyBpbiBlKWk9bihlW3NdLHMsciksaSE9bnVsbCYmKG9bby5sZW5ndGhdPWkpO3JldHVybiBvLmNvbmNhdC5hcHBseShbXSxvKX0sZ3VpZDoxLHByb3h5OmZ1bmN0aW9uKGUsbil7dmFyIHIsaSxzO3JldHVybiB0eXBlb2Ygbj09InN0cmluZyImJihyPWVbbl0sbj1lLGU9ciksdi5pc0Z1bmN0aW9uKGUpPyhpPWwuY2FsbChhcmd1bWVudHMsMikscz1mdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KG4saS5jb25jYXQobC5jYWxsKGFyZ3VtZW50cykpKX0scy5ndWlkPWUuZ3VpZD1lLmd1aWR8fHYuZ3VpZCsrLHMpOnR9LGFjY2VzczpmdW5jdGlvbihlLG4scixpLHMsbyx1KXt2YXIgYSxmPXI9PW51bGwsbD0wLGM9ZS5sZW5ndGg7aWYociYmdHlwZW9mIHI9PSJvYmplY3QiKXtmb3IobCBpbiByKXYuYWNjZXNzKGUsbixsLHJbbF0sMSxvLGkpO3M9MX1lbHNlIGlmKGkhPT10KXthPXU9PT10JiZ2LmlzRnVuY3Rpb24oaSksZiYmKGE/KGE9bixuPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gYS5jYWxsKHYoZSksbil9KToobi5jYWxsKGUsaSksbj1udWxsKSk7aWYobilmb3IoO2w8YztsKyspbihlW2xdLHIsYT9pLmNhbGwoZVtsXSxsLG4oZVtsXSxyKSk6aSx1KTtzPTF9cmV0dXJuIHM/ZTpmP24uY2FsbChlKTpjP24oZVswXSxyKTpvfSxub3c6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX19KSx2LnJlYWR5LnByb21pc2U9ZnVuY3Rpb24odCl7aWYoIXIpe3I9di5EZWZlcnJlZCgpO2lmKGkucmVhZHlTdGF0ZT09PSJjb21wbGV0ZSIpc2V0VGltZW91dCh2LnJlYWR5LDEpO2Vsc2UgaWYoaS5hZGRFdmVudExpc3RlbmVyKWkuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsQSwhMSksZS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIix2LnJlYWR5LCExKTtlbHNle2kuYXR0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsQSksZS5hdHRhY2hFdmVudCgib25sb2FkIix2LnJlYWR5KTt2YXIgbj0hMTt0cnl7bj1lLmZyYW1lRWxlbWVudD09bnVsbCYmaS5kb2N1bWVudEVsZW1lbnR9Y2F0Y2gocyl7fW4mJm4uZG9TY3JvbGwmJmZ1bmN0aW9uIG8oKXtpZighdi5pc1JlYWR5KXt0cnl7bi5kb1Njcm9sbCgibGVmdCIpfWNhdGNoKGUpe3JldHVybiBzZXRUaW1lb3V0KG8sNTApfXYucmVhZHkoKX19KCl9fXJldHVybiByLnByb21pc2UodCl9LHYuZWFjaCgiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe09bIltvYmplY3QgIit0KyJdIl09dC50b0xvd2VyQ2FzZSgpfSksbj12KGkpO3ZhciBNPXt9O3YuQ2FsbGJhY2tzPWZ1bmN0aW9uKGUpe2U9dHlwZW9mIGU9PSJzdHJpbmciP01bZV18fF8oZSk6di5leHRlbmQoe30sZSk7dmFyIG4scixpLHMsbyx1LGE9W10sZj0hZS5vbmNlJiZbXSxsPWZ1bmN0aW9uKHQpe249ZS5tZW1vcnkmJnQscj0hMCx1PXN8fDAscz0wLG89YS5sZW5ndGgsaT0hMDtmb3IoO2EmJnU8bzt1KyspaWYoYVt1XS5hcHBseSh0WzBdLHRbMV0pPT09ITEmJmUuc3RvcE9uRmFsc2Upe249ITE7YnJlYWt9aT0hMSxhJiYoZj9mLmxlbmd0aCYmbChmLnNoaWZ0KCkpOm4/YT1bXTpjLmRpc2FibGUoKSl9LGM9e2FkZDpmdW5jdGlvbigpe2lmKGEpe3ZhciB0PWEubGVuZ3RoOyhmdW5jdGlvbiByKHQpe3YuZWFjaCh0LGZ1bmN0aW9uKHQsbil7dmFyIGk9di50eXBlKG4pO2k9PT0iZnVuY3Rpb24iPyghZS51bmlxdWV8fCFjLmhhcyhuKSkmJmEucHVzaChuKTpuJiZuLmxlbmd0aCYmaSE9PSJzdHJpbmciJiZyKG4pfSl9KShhcmd1bWVudHMpLGk/bz1hLmxlbmd0aDpuJiYocz10LGwobikpfXJldHVybiB0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gYSYmdi5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihlLHQpe3ZhciBuO3doaWxlKChuPXYuaW5BcnJheSh0LGEsbikpPi0xKWEuc3BsaWNlKG4sMSksaSYmKG48PW8mJm8tLSxuPD11JiZ1LS0pfSksdGhpc30saGFzOmZ1bmN0aW9uKGUpe3JldHVybiB2LmluQXJyYXkoZSxhKT4tMX0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gYT1bXSx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGE9Zj1uPXQsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hYX0sbG9jazpmdW5jdGlvbigpe3JldHVybiBmPXQsbnx8Yy5kaXNhYmxlKCksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIWZ9LGZpcmVXaXRoOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ9dHx8W10sdD1bZSx0LnNsaWNlP3Quc2xpY2UoKTp0XSxhJiYoIXJ8fGYpJiYoaT9mLnB1c2godCk6bCh0KSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBjLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhcn19O3JldHVybiBjfSx2LmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9W1sicmVzb2x2ZSIsImRvbmUiLHYuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCJyZXNvbHZlZCJdLFsicmVqZWN0IiwiZmFpbCIsdi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlamVjdGVkIl0sWyJub3RpZnkiLCJwcm9ncmVzcyIsdi5DYWxsYmFja3MoIm1lbW9yeSIpXV0sbj0icGVuZGluZyIscj17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gbn0sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGkuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVybiB2LkRlZmVycmVkKGZ1bmN0aW9uKG4pe3YuZWFjaCh0LGZ1bmN0aW9uKHQscil7dmFyIHM9clswXSxvPWVbdF07aVtyWzFdXSh2LmlzRnVuY3Rpb24obyk/ZnVuY3Rpb24oKXt2YXIgZT1vLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtlJiZ2LmlzRnVuY3Rpb24oZS5wcm9taXNlKT9lLnByb21pc2UoKS5kb25lKG4ucmVzb2x2ZSkuZmFpbChuLnJlamVjdCkucHJvZ3Jlc3Mobi5ub3RpZnkpOm5bcysiV2l0aCJdKHRoaXM9PT1pP246dGhpcyxbZV0pfTpuW3NdKX0pLGU9bnVsbH0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihlKXtyZXR1cm4gZSE9bnVsbD92LmV4dGVuZChlLHIpOnJ9fSxpPXt9O3JldHVybiByLnBpcGU9ci50aGVuLHYuZWFjaCh0LGZ1bmN0aW9uKGUscyl7dmFyIG89c1syXSx1PXNbM107cltzWzFdXT1vLmFkZCx1JiZvLmFkZChmdW5jdGlvbigpe249dX0sdFtlXjFdWzJdLmRpc2FibGUsdFsyXVsyXS5sb2NrKSxpW3NbMF1dPW8uZmlyZSxpW3NbMF0rIldpdGgiXT1vLmZpcmVXaXRofSksci5wcm9taXNlKGkpLGUmJmUuY2FsbChpLGkpLGl9LHdoZW46ZnVuY3Rpb24oZSl7dmFyIHQ9MCxuPWwuY2FsbChhcmd1bWVudHMpLHI9bi5sZW5ndGgsaT1yIT09MXx8ZSYmdi5pc0Z1bmN0aW9uKGUucHJvbWlzZSk/cjowLHM9aT09PTE/ZTp2LkRlZmVycmVkKCksbz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3RbZV09dGhpcyxuW2VdPWFyZ3VtZW50cy5sZW5ndGg+MT9sLmNhbGwoYXJndW1lbnRzKTpyLG49PT11P3Mubm90aWZ5V2l0aCh0LG4pOi0taXx8cy5yZXNvbHZlV2l0aCh0LG4pfX0sdSxhLGY7aWYocj4xKXt1PW5ldyBBcnJheShyKSxhPW5ldyBBcnJheShyKSxmPW5ldyBBcnJheShyKTtmb3IoO3Q8cjt0Kyspblt0XSYmdi5pc0Z1bmN0aW9uKG5bdF0ucHJvbWlzZSk/blt0XS5wcm9taXNlKCkuZG9uZShvKHQsZixuKSkuZmFpbChzLnJlamVjdCkucHJvZ3Jlc3Mobyh0LGEsdSkpOi0taX1yZXR1cm4gaXx8cy5yZXNvbHZlV2l0aChmLG4pLHMucHJvbWlzZSgpfX0pLHYuc3VwcG9ydD1mdW5jdGlvbigpe3ZhciB0LG4scixzLG8sdSxhLGYsbCxjLGgscD1pLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3Auc2V0QXR0cmlidXRlKCJjbGFzc05hbWUiLCJ0IikscC5pbm5lckhUTUw9IiAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9Jy9hJz5hPC9hPjxpbnB1dCB0eXBlPSdjaGVja2JveCcvPiIsbj1wLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikscj1wLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJhIilbMF07aWYoIW58fCFyfHwhbi5sZW5ndGgpcmV0dXJue307cz1pLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLG89cy5hcHBlbmRDaGlsZChpLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKSx1PXAuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0IilbMF0sci5zdHlsZS5jc3NUZXh0PSJ0b3A6MXB4O2Zsb2F0OmxlZnQ7b3BhY2l0eTouNSIsdD17bGVhZGluZ1doaXRlc3BhY2U6cC5maXJzdENoaWxkLm5vZGVUeXBlPT09Myx0Ym9keTohcC5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKS5sZW5ndGgsaHRtbFNlcmlhbGl6ZTohIXAuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImxpbmsiKS5sZW5ndGgsc3R5bGU6L3RvcC8udGVzdChyLmdldEF0dHJpYnV0ZSgic3R5bGUiKSksaHJlZk5vcm1hbGl6ZWQ6ci5nZXRBdHRyaWJ1dGUoImhyZWYiKT09PSIvYSIsb3BhY2l0eTovXjAuNS8udGVzdChyLnN0eWxlLm9wYWNpdHkpLGNzc0Zsb2F0OiEhci5zdHlsZS5jc3NGbG9hdCxjaGVja09uOnUudmFsdWU9PT0ib24iLG9wdFNlbGVjdGVkOm8uc2VsZWN0ZWQsZ2V0U2V0QXR0cmlidXRlOnAuY2xhc3NOYW1lIT09InQiLGVuY3R5cGU6ISFpLmNyZWF0ZUVsZW1lbnQoImZvcm0iKS5lbmN0eXBlLGh0bWw1Q2xvbmU6aS5jcmVhdGVFbGVtZW50KCJuYXYiKS5jbG9uZU5vZGUoITApLm91dGVySFRNTCE9PSI8Om5hdj48LzpuYXY+Iixib3hNb2RlbDppLmNvbXBhdE1vZGU9PT0iQ1NTMUNvbXBhdCIsc3VibWl0QnViYmxlczohMCxjaGFuZ2VCdWJibGVzOiEwLGZvY3VzaW5CdWJibGVzOiExLGRlbGV0ZUV4cGFuZG86ITAsbm9DbG9uZUV2ZW50OiEwLGlubGluZUJsb2NrTmVlZHNMYXlvdXQ6ITEsc2hyaW5rV3JhcEJsb2NrczohMSxyZWxpYWJsZU1hcmdpblJpZ2h0OiEwLGJveFNpemluZ1JlbGlhYmxlOiEwLHBpeGVsUG9zaXRpb246ITF9LHUuY2hlY2tlZD0hMCx0Lm5vQ2xvbmVDaGVja2VkPXUuY2xvbmVOb2RlKCEwKS5jaGVja2VkLHMuZGlzYWJsZWQ9ITAsdC5vcHREaXNhYmxlZD0hby5kaXNhYmxlZDt0cnl7ZGVsZXRlIHAudGVzdH1jYXRjaChkKXt0LmRlbGV0ZUV4cGFuZG89ITF9IXAuYWRkRXZlbnRMaXN0ZW5lciYmcC5hdHRhY2hFdmVudCYmcC5maXJlRXZlbnQmJihwLmF0dGFjaEV2ZW50KCJvbmNsaWNrIixoPWZ1bmN0aW9uKCl7dC5ub0Nsb25lRXZlbnQ9ITF9KSxwLmNsb25lTm9kZSghMCkuZmlyZUV2ZW50KCJvbmNsaWNrIikscC5kZXRhY2hFdmVudCgib25jbGljayIsaCkpLHU9aS5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLHUudmFsdWU9InQiLHUuc2V0QXR0cmlidXRlKCJ0eXBlIiwicmFkaW8iKSx0LnJhZGlvVmFsdWU9dS52YWx1ZT09PSJ0Iix1LnNldEF0dHJpYnV0ZSgiY2hlY2tlZCIsImNoZWNrZWQiKSx1LnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKSxwLmFwcGVuZENoaWxkKHUpLGE9aS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYS5hcHBlbmRDaGlsZChwLmxhc3RDaGlsZCksdC5jaGVja0Nsb25lPWEuY2xvbmVOb2RlKCEwKS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5jaGVja2VkLHQuYXBwZW5kQ2hlY2tlZD11LmNoZWNrZWQsYS5yZW1vdmVDaGlsZCh1KSxhLmFwcGVuZENoaWxkKHApO2lmKHAuYXR0YWNoRXZlbnQpZm9yKGwgaW57c3VibWl0OiEwLGNoYW5nZTohMCxmb2N1c2luOiEwfSlmPSJvbiIrbCxjPWYgaW4gcCxjfHwocC5zZXRBdHRyaWJ1dGUoZiwicmV0dXJuOyIpLGM9dHlwZW9mIHBbZl09PSJmdW5jdGlvbiIpLHRbbCsiQnViYmxlcyJdPWM7cmV0dXJuIHYoZnVuY3Rpb24oKXt2YXIgbixyLHMsbyx1PSJwYWRkaW5nOjA7bWFyZ2luOjA7Ym9yZGVyOjA7ZGlzcGxheTpibG9jaztvdmVyZmxvdzpoaWRkZW47IixhPWkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXTtpZighYSlyZXR1cm47bj1pLmNyZWF0ZUVsZW1lbnQoImRpdiIpLG4uc3R5bGUuY3NzVGV4dD0idmlzaWJpbGl0eTpoaWRkZW47Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDtwb3NpdGlvbjpzdGF0aWM7dG9wOjA7bWFyZ2luLXRvcDoxcHgiLGEuaW5zZXJ0QmVmb3JlKG4sYS5maXJzdENoaWxkKSxyPWkuY3JlYXRlRWxlbWVudCgiZGl2Iiksbi5hcHBlbmRDaGlsZChyKSxyLmlubmVySFRNTD0iPHRhYmxlPjx0cj48dGQ+PC90ZD48dGQ+dDwvdGQ+PC90cj48L3RhYmxlPiIscz1yLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZCIpLHNbMF0uc3R5bGUuY3NzVGV4dD0icGFkZGluZzowO21hcmdpbjowO2JvcmRlcjowO2Rpc3BsYXk6bm9uZSIsYz1zWzBdLm9mZnNldEhlaWdodD09PTAsc1swXS5zdHlsZS5kaXNwbGF5PSIiLHNbMV0uc3R5bGUuZGlzcGxheT0ibm9uZSIsdC5yZWxpYWJsZUhpZGRlbk9mZnNldHM9YyYmc1swXS5vZmZzZXRIZWlnaHQ9PT0wLHIuaW5uZXJIVE1MPSIiLHIuc3R5bGUuY3NzVGV4dD0iYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94Oy13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94O3BhZGRpbmc6MXB4O2JvcmRlcjoxcHg7ZGlzcGxheTpibG9jazt3aWR0aDo0cHg7bWFyZ2luLXRvcDoxJTtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MSU7Iix0LmJveFNpemluZz1yLm9mZnNldFdpZHRoPT09NCx0LmRvZXNOb3RJbmNsdWRlTWFyZ2luSW5Cb2R5T2Zmc2V0PWEub2Zmc2V0VG9wIT09MSxlLmdldENvbXB1dGVkU3R5bGUmJih0LnBpeGVsUG9zaXRpb249KGUuZ2V0Q29tcHV0ZWRTdHlsZShyLG51bGwpfHx7fSkudG9wIT09IjElIix0LmJveFNpemluZ1JlbGlhYmxlPShlLmdldENvbXB1dGVkU3R5bGUocixudWxsKXx8e3dpZHRoOiI0cHgifSkud2lkdGg9PT0iNHB4IixvPWkuY3JlYXRlRWxlbWVudCgiZGl2Iiksby5zdHlsZS5jc3NUZXh0PXIuc3R5bGUuY3NzVGV4dD11LG8uc3R5bGUubWFyZ2luUmlnaHQ9by5zdHlsZS53aWR0aD0iMCIsci5zdHlsZS53aWR0aD0iMXB4IixyLmFwcGVuZENoaWxkKG8pLHQucmVsaWFibGVNYXJnaW5SaWdodD0hcGFyc2VGbG9hdCgoZS5nZXRDb21wdXRlZFN0eWxlKG8sbnVsbCl8fHt9KS5tYXJnaW5SaWdodCkpLHR5cGVvZiByLnN0eWxlLnpvb20hPSJ1bmRlZmluZWQiJiYoci5pbm5lckhUTUw9IiIsci5zdHlsZS5jc3NUZXh0PXUrIndpZHRoOjFweDtwYWRkaW5nOjFweDtkaXNwbGF5OmlubGluZTt6b29tOjEiLHQuaW5saW5lQmxvY2tOZWVkc0xheW91dD1yLm9mZnNldFdpZHRoPT09MyxyLnN0eWxlLmRpc3BsYXk9ImJsb2NrIixyLnN0eWxlLm92ZXJmbG93PSJ2aXNpYmxlIixyLmlubmVySFRNTD0iPGRpdj48L2Rpdj4iLHIuZmlyc3RDaGlsZC5zdHlsZS53aWR0aD0iNXB4Iix0LnNocmlua1dyYXBCbG9ja3M9ci5vZmZzZXRXaWR0aCE9PTMsbi5zdHlsZS56b29tPTEpLGEucmVtb3ZlQ2hpbGQobiksbj1yPXM9bz1udWxsfSksYS5yZW1vdmVDaGlsZChwKSxuPXI9cz1vPXU9YT1wPW51bGwsdH0oKTt2YXIgRD0vKD86XHtbXHNcU10qXH18XFtbXHNcU10qXF0pJC8sUD0vKFtBLVpdKS9nO3YuZXh0ZW5kKHtjYWNoZTp7fSxkZWxldGVkSWRzOltdLHV1aWQ6MCxleHBhbmRvOiJqUXVlcnkiKyh2LmZuLmpxdWVyeStNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cRC9nLCIiKSxub0RhdGE6e2VtYmVkOiEwLG9iamVjdDoiY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwIixhcHBsZXQ6ITB9LGhhc0RhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZS5ub2RlVHlwZT92LmNhY2hlW2Vbdi5leHBhbmRvXV06ZVt2LmV4cGFuZG9dLCEhZSYmIUIoZSl9LGRhdGE6ZnVuY3Rpb24oZSxuLHIsaSl7aWYoIXYuYWNjZXB0RGF0YShlKSlyZXR1cm47dmFyIHMsbyx1PXYuZXhwYW5kbyxhPXR5cGVvZiBuPT0ic3RyaW5nIixmPWUubm9kZVR5cGUsbD1mP3YuY2FjaGU6ZSxjPWY/ZVt1XTplW3VdJiZ1O2lmKCghY3x8IWxbY118fCFpJiYhbFtjXS5kYXRhKSYmYSYmcj09PXQpcmV0dXJuO2N8fChmP2VbdV09Yz12LmRlbGV0ZWRJZHMucG9wKCl8fHYuZ3VpZCsrOmM9dSksbFtjXXx8KGxbY109e30sZnx8KGxbY10udG9KU09OPXYubm9vcCkpO2lmKHR5cGVvZiBuPT0ib2JqZWN0Inx8dHlwZW9mIG49PSJmdW5jdGlvbiIpaT9sW2NdPXYuZXh0ZW5kKGxbY10sbik6bFtjXS5kYXRhPXYuZXh0ZW5kKGxbY10uZGF0YSxuKTtyZXR1cm4gcz1sW2NdLGl8fChzLmRhdGF8fChzLmRhdGE9e30pLHM9cy5kYXRhKSxyIT09dCYmKHNbdi5jYW1lbENhc2UobildPXIpLGE/KG89c1tuXSxvPT1udWxsJiYobz1zW3YuY2FtZWxDYXNlKG4pXSkpOm89cyxvfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGUsdCxuKXtpZighdi5hY2NlcHREYXRhKGUpKXJldHVybjt2YXIgcixpLHMsbz1lLm5vZGVUeXBlLHU9bz92LmNhY2hlOmUsYT1vP2Vbdi5leHBhbmRvXTp2LmV4cGFuZG87aWYoIXVbYV0pcmV0dXJuO2lmKHQpe3I9bj91W2FdOnVbYV0uZGF0YTtpZihyKXt2LmlzQXJyYXkodCl8fCh0IGluIHI/dD1bdF06KHQ9di5jYW1lbENhc2UodCksdCBpbiByP3Q9W3RdOnQ9dC5zcGxpdCgiICIpKSk7Zm9yKGk9MCxzPXQubGVuZ3RoO2k8cztpKyspZGVsZXRlIHJbdFtpXV07aWYoIShuP0I6di5pc0VtcHR5T2JqZWN0KShyKSlyZXR1cm59fWlmKCFuKXtkZWxldGUgdVthXS5kYXRhO2lmKCFCKHVbYV0pKXJldHVybn1vP3YuY2xlYW5EYXRhKFtlXSwhMCk6di5zdXBwb3J0LmRlbGV0ZUV4cGFuZG98fHUhPXUud2luZG93P2RlbGV0ZSB1W2FdOnVbYV09bnVsbH0sX2RhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2LmRhdGEoZSx0LG4sITApfSxhY2NlcHREYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUmJnYubm9EYXRhW2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKV07cmV0dXJuIXR8fHQhPT0hMCYmZS5nZXRBdHRyaWJ1dGUoImNsYXNzaWQiKT09PXR9fSksdi5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oZSxuKXt2YXIgcixpLHMsbyx1LGE9dGhpc1swXSxmPTAsbD1udWxsO2lmKGU9PT10KXtpZih0aGlzLmxlbmd0aCl7bD12LmRhdGEoYSk7aWYoYS5ub2RlVHlwZT09PTEmJiF2Ll9kYXRhKGEsInBhcnNlZEF0dHJzIikpe3M9YS5hdHRyaWJ1dGVzO2Zvcih1PXMubGVuZ3RoO2Y8dTtmKyspbz1zW2ZdLm5hbWUsby5pbmRleE9mKCJkYXRhLSIpfHwobz12LmNhbWVsQ2FzZShvLnN1YnN0cmluZyg1KSksSChhLG8sbFtvXSkpO3YuX2RhdGEoYSwicGFyc2VkQXR0cnMiLCEwKX19cmV0dXJuIGx9cmV0dXJuIHR5cGVvZiBlPT0ib2JqZWN0Ij90aGlzLmVhY2goZnVuY3Rpb24oKXt2LmRhdGEodGhpcyxlKX0pOihyPWUuc3BsaXQoIi4iLDIpLHJbMV09clsxXT8iLiIrclsxXToiIixpPXJbMV0rIiEiLHYuYWNjZXNzKHRoaXMsZnVuY3Rpb24obil7aWYobj09PXQpcmV0dXJuIGw9dGhpcy50cmlnZ2VySGFuZGxlcigiZ2V0RGF0YSIraSxbclswXV0pLGw9PT10JiZhJiYobD12LmRhdGEoYSxlKSxsPUgoYSxlLGwpKSxsPT09dCYmclsxXT90aGlzLmRhdGEoclswXSk6bDtyWzFdPW4sdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9dih0aGlzKTt0LnRyaWdnZXJIYW5kbGVyKCJzZXREYXRhIitpLHIpLHYuZGF0YSh0aGlzLGUsbiksdC50cmlnZ2VySGFuZGxlcigiY2hhbmdlRGF0YSIraSxyKX0pfSxudWxsLG4sYXJndW1lbnRzLmxlbmd0aD4xLG51bGwsITEpKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7di5yZW1vdmVEYXRhKHRoaXMsZSl9KX19KSx2LmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByO2lmKGUpcmV0dXJuIHQ9KHR8fCJmeCIpKyJxdWV1ZSIscj12Ll9kYXRhKGUsdCksbiYmKCFyfHx2LmlzQXJyYXkobik/cj12Ll9kYXRhKGUsdCx2Lm1ha2VBcnJheShuKSk6ci5wdXNoKG4pKSxyfHxbXX0sZGVxdWV1ZTpmdW5jdGlvbihlLHQpe3Q9dHx8ImZ4Ijt2YXIgbj12LnF1ZXVlKGUsdCkscj1uLmxlbmd0aCxpPW4uc2hpZnQoKSxzPXYuX3F1ZXVlSG9va3MoZSx0KSxvPWZ1bmN0aW9uKCl7di5kZXF1ZXVlKGUsdCl9O2k9PT0iaW5wcm9ncmVzcyImJihpPW4uc2hpZnQoKSxyLS0pLGkmJih0PT09ImZ4IiYmbi51bnNoaWZ0KCJpbnByb2dyZXNzIiksZGVsZXRlIHMuc3RvcCxpLmNhbGwoZSxvLHMpKSwhciYmcyYmcy5lbXB0eS5maXJlKCl9LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGUsdCl7dmFyIG49dCsicXVldWVIb29rcyI7cmV0dXJuIHYuX2RhdGEoZSxuKXx8di5fZGF0YShlLG4se2VtcHR5OnYuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLmFkZChmdW5jdGlvbigpe3YucmVtb3ZlRGF0YShlLHQrInF1ZXVlIiwhMCksdi5yZW1vdmVEYXRhKGUsbiwhMCl9KX0pfX0pLHYuZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLG4pe3ZhciByPTI7cmV0dXJuIHR5cGVvZiBlIT0ic3RyaW5nIiYmKG49ZSxlPSJmeCIsci0tKSxhcmd1bWVudHMubGVuZ3RoPHI/di5xdWV1ZSh0aGlzWzBdLGUpOm49PT10P3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9di5xdWV1ZSh0aGlzLGUsbik7di5fcXVldWVIb29rcyh0aGlzLGUpLGU9PT0iZngiJiZ0WzBdIT09ImlucHJvZ3Jlc3MiJiZ2LmRlcXVldWUodGhpcyxlKX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2LmRlcXVldWUodGhpcyxlKX0pfSxkZWxheTpmdW5jdGlvbihlLHQpe3JldHVybiBlPXYuZng/di5meC5zcGVlZHNbZV18fGU6ZSx0PXR8fCJmeCIsdGhpcy5xdWV1ZSh0LGZ1bmN0aW9uKHQsbil7dmFyIHI9c2V0VGltZW91dCh0LGUpO24uc3RvcD1mdW5jdGlvbigpe2NsZWFyVGltZW91dChyKX19KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5xdWV1ZShlfHwiZngiLFtdKX0scHJvbWlzZTpmdW5jdGlvbihlLG4pe3ZhciByLGk9MSxzPXYuRGVmZXJyZWQoKSxvPXRoaXMsdT10aGlzLmxlbmd0aCxhPWZ1bmN0aW9uKCl7LS1pfHxzLnJlc29sdmVXaXRoKG8sW29dKX07dHlwZW9mIGUhPSJzdHJpbmciJiYobj1lLGU9dCksZT1lfHwiZngiO3doaWxlKHUtLSlyPXYuX2RhdGEob1t1XSxlKyJxdWV1ZUhvb2tzIiksciYmci5lbXB0eSYmKGkrKyxyLmVtcHR5LmFkZChhKSk7cmV0dXJuIGEoKSxzLnByb21pc2Uobil9fSk7dmFyIGosRixJLHE9L1tcdFxyXG5dL2csUj0vXHIvZyxVPS9eKD86YnV0dG9ufGlucHV0KSQvaSx6PS9eKD86YnV0dG9ufGlucHV0fG9iamVjdHxzZWxlY3R8dGV4dGFyZWEpJC9pLFc9L15hKD86cmVhfCkkL2ksWD0vXig/OmF1dG9mb2N1c3xhdXRvcGxheXxhc3luY3xjaGVja2VkfGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkfHNlbGVjdGVkKSQvaSxWPXYuc3VwcG9ydC5nZXRTZXRBdHRyaWJ1dGU7di5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdi5hY2Nlc3ModGhpcyx2LmF0dHIsZSx0LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3YucmVtb3ZlQXR0cih0aGlzLGUpfSl9LHByb3A6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdi5hY2Nlc3ModGhpcyx2LnByb3AsZSx0LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9di5wcm9wRml4W2VdfHxlLHRoaXMuZWFjaChmdW5jdGlvbigpe3RyeXt0aGlzW2VdPXQsZGVsZXRlIHRoaXNbZV19Y2F0Y2gobil7fX0pfSxhZGRDbGFzczpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxzLG8sdTtpZih2LmlzRnVuY3Rpb24oZSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih0KXt2KHRoaXMpLmFkZENsYXNzKGUuY2FsbCh0aGlzLHQsdGhpcy5jbGFzc05hbWUpKX0pO2lmKGUmJnR5cGVvZiBlPT0ic3RyaW5nIil7dD1lLnNwbGl0KHkpO2ZvcihuPTAscj10aGlzLmxlbmd0aDtuPHI7bisrKXtpPXRoaXNbbl07aWYoaS5ub2RlVHlwZT09PTEpaWYoIWkuY2xhc3NOYW1lJiZ0Lmxlbmd0aD09PTEpaS5jbGFzc05hbWU9ZTtlbHNle3M9IiAiK2kuY2xhc3NOYW1lKyIgIjtmb3Iobz0wLHU9dC5sZW5ndGg7bzx1O28rKylzLmluZGV4T2YoIiAiK3Rbb10rIiAiKTwwJiYocys9dFtvXSsiICIpO2kuY2xhc3NOYW1lPXYudHJpbShzKX19fXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihlKXt2YXIgbixyLGkscyxvLHUsYTtpZih2LmlzRnVuY3Rpb24oZSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih0KXt2KHRoaXMpLnJlbW92ZUNsYXNzKGUuY2FsbCh0aGlzLHQsdGhpcy5jbGFzc05hbWUpKX0pO2lmKGUmJnR5cGVvZiBlPT0ic3RyaW5nInx8ZT09PXQpe249KGV8fCIiKS5zcGxpdCh5KTtmb3IodT0wLGE9dGhpcy5sZW5ndGg7dTxhO3UrKyl7aT10aGlzW3VdO2lmKGkubm9kZVR5cGU9PT0xJiZpLmNsYXNzTmFtZSl7cj0oIiAiK2kuY2xhc3NOYW1lKyIgIikucmVwbGFjZShxLCIgIik7Zm9yKHM9MCxvPW4ubGVuZ3RoO3M8bztzKyspd2hpbGUoci5pbmRleE9mKCIgIituW3NdKyIgIik+PTApcj1yLnJlcGxhY2UoIiAiK25bc10rIiAiLCIgIik7aS5jbGFzc05hbWU9ZT92LnRyaW0ocik6IiJ9fX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10eXBlb2YgZSxyPXR5cGVvZiB0PT0iYm9vbGVhbiI7cmV0dXJuIHYuaXNGdW5jdGlvbihlKT90aGlzLmVhY2goZnVuY3Rpb24obil7dih0aGlzKS50b2dnbGVDbGFzcyhlLmNhbGwodGhpcyxuLHRoaXMuY2xhc3NOYW1lLHQpLHQpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7aWYobj09PSJzdHJpbmciKXt2YXIgaSxzPTAsbz12KHRoaXMpLHU9dCxhPWUuc3BsaXQoeSk7d2hpbGUoaT1hW3MrK10pdT1yP3U6IW8uaGFzQ2xhc3MoaSksb1t1PyJhZGRDbGFzcyI6InJlbW92ZUNsYXNzIl0oaSl9ZWxzZSBpZihuPT09InVuZGVmaW5lZCJ8fG49PT0iYm9vbGVhbiIpdGhpcy5jbGFzc05hbWUmJnYuX2RhdGEodGhpcywiX19jbGFzc05hbWVfXyIsdGhpcy5jbGFzc05hbWUpLHRoaXMuY2xhc3NOYW1lPXRoaXMuY2xhc3NOYW1lfHxlPT09ITE/IiI6di5fZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIifSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0PSIgIitlKyIgIixuPTAscj10aGlzLmxlbmd0aDtmb3IoO248cjtuKyspaWYodGhpc1tuXS5ub2RlVHlwZT09PTEmJigiICIrdGhpc1tuXS5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKHEsIiAiKS5pbmRleE9mKHQpPj0wKXJldHVybiEwO3JldHVybiExfSx2YWw6ZnVuY3Rpb24oZSl7dmFyIG4scixpLHM9dGhpc1swXTtpZighYXJndW1lbnRzLmxlbmd0aCl7aWYocylyZXR1cm4gbj12LnZhbEhvb2tzW3MudHlwZV18fHYudmFsSG9va3Nbcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxuJiYiZ2V0ImluIG4mJihyPW4uZ2V0KHMsInZhbHVlIikpIT09dD9yOihyPXMudmFsdWUsdHlwZW9mIHI9PSJzdHJpbmciP3IucmVwbGFjZShSLCIiKTpyPT1udWxsPyIiOnIpO3JldHVybn1yZXR1cm4gaT12LmlzRnVuY3Rpb24oZSksdGhpcy5lYWNoKGZ1bmN0aW9uKHIpe3ZhciBzLG89dih0aGlzKTtpZih0aGlzLm5vZGVUeXBlIT09MSlyZXR1cm47aT9zPWUuY2FsbCh0aGlzLHIsby52YWwoKSk6cz1lLHM9PW51bGw/cz0iIjp0eXBlb2Ygcz09Im51bWJlciI/cys9IiI6di5pc0FycmF5KHMpJiYocz12Lm1hcChzLGZ1bmN0aW9uKGUpe3JldHVybiBlPT1udWxsPyIiOmUrIiJ9KSksbj12LnZhbEhvb2tzW3RoaXMudHlwZV18fHYudmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXTtpZighbnx8ISgic2V0ImluIG4pfHxuLnNldCh0aGlzLHMsInZhbHVlIik9PT10KXRoaXMudmFsdWU9c30pfX0pLHYuZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5hdHRyaWJ1dGVzLnZhbHVlO3JldHVybiF0fHx0LnNwZWNpZmllZD9lLnZhbHVlOmUudGV4dH19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0LG4scj1lLm9wdGlvbnMsaT1lLnNlbGVjdGVkSW5kZXgscz1lLnR5cGU9PT0ic2VsZWN0LW9uZSJ8fGk8MCxvPXM/bnVsbDpbXSx1PXM/aSsxOnIubGVuZ3RoLGE9aTwwP3U6cz9pOjA7Zm9yKDthPHU7YSsrKXtuPXJbYV07aWYoKG4uc2VsZWN0ZWR8fGE9PT1pKSYmKHYuc3VwcG9ydC5vcHREaXNhYmxlZD8hbi5kaXNhYmxlZDpuLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKT09PW51bGwpJiYoIW4ucGFyZW50Tm9kZS5kaXNhYmxlZHx8IXYubm9kZU5hbWUobi5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7dD12KG4pLnZhbCgpO2lmKHMpcmV0dXJuIHQ7by5wdXNoKHQpfX1yZXR1cm4gb30sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG49di5tYWtlQXJyYXkodCk7cmV0dXJuIHYoZSkuZmluZCgib3B0aW9uIikuZWFjaChmdW5jdGlvbigpe3RoaXMuc2VsZWN0ZWQ9di5pbkFycmF5KHYodGhpcykudmFsKCksbik+PTB9KSxuLmxlbmd0aHx8KGUuc2VsZWN0ZWRJbmRleD0tMSksbn19fSxhdHRyRm46e30sYXR0cjpmdW5jdGlvbihlLG4scixpKXt2YXIgcyxvLHUsYT1lLm5vZGVUeXBlO2lmKCFlfHxhPT09M3x8YT09PTh8fGE9PT0yKXJldHVybjtpZihpJiZ2LmlzRnVuY3Rpb24odi5mbltuXSkpcmV0dXJuIHYoZSlbbl0ocik7aWYodHlwZW9mIGUuZ2V0QXR0cmlidXRlPT0idW5kZWZpbmVkIilyZXR1cm4gdi5wcm9wKGUsbixyKTt1PWEhPT0xfHwhdi5pc1hNTERvYyhlKSx1JiYobj1uLnRvTG93ZXJDYXNlKCksbz12LmF0dHJIb29rc1tuXXx8KFgudGVzdChuKT9GOmopKTtpZihyIT09dCl7aWYocj09PW51bGwpe3YucmVtb3ZlQXR0cihlLG4pO3JldHVybn1yZXR1cm4gbyYmInNldCJpbiBvJiZ1JiYocz1vLnNldChlLHIsbikpIT09dD9zOihlLnNldEF0dHJpYnV0ZShuLHIrIiIpLHIpfXJldHVybiBvJiYiZ2V0ImluIG8mJnUmJihzPW8uZ2V0KGUsbikpIT09bnVsbD9zOihzPWUuZ2V0QXR0cmlidXRlKG4pLHM9PT1udWxsP3Q6cyl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGkscyxvPTA7aWYodCYmZS5ub2RlVHlwZT09PTEpe3I9dC5zcGxpdCh5KTtmb3IoO288ci5sZW5ndGg7bysrKWk9cltvXSxpJiYobj12LnByb3BGaXhbaV18fGkscz1YLnRlc3QoaSksc3x8di5hdHRyKGUsaSwiIiksZS5yZW1vdmVBdHRyaWJ1dGUoVj9pOm4pLHMmJm4gaW4gZSYmKGVbbl09ITEpKX19LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGUsdCl7aWYoVS50ZXN0KGUubm9kZU5hbWUpJiZlLnBhcmVudE5vZGUpdi5lcnJvcigidHlwZSBwcm9wZXJ0eSBjYW4ndCBiZSBjaGFuZ2VkIik7ZWxzZSBpZighdi5zdXBwb3J0LnJhZGlvVmFsdWUmJnQ9PT0icmFkaW8iJiZ2Lm5vZGVOYW1lKGUsImlucHV0Iikpe3ZhciBuPWUudmFsdWU7cmV0dXJuIGUuc2V0QXR0cmlidXRlKCJ0eXBlIix0KSxuJiYoZS52YWx1ZT1uKSx0fX19LHZhbHVlOntnZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaiYmdi5ub2RlTmFtZShlLCJidXR0b24iKT9qLmdldChlLHQpOnQgaW4gZT9lLnZhbHVlOm51bGx9LHNldDpmdW5jdGlvbihlLHQsbil7aWYoaiYmdi5ub2RlTmFtZShlLCJidXR0b24iKSlyZXR1cm4gai5zZXQoZSx0LG4pO2UudmFsdWU9dH19fSxwcm9wRml4Ont0YWJpbmRleDoidGFiSW5kZXgiLHJlYWRvbmx5OiJyZWFkT25seSIsImZvciI6Imh0bWxGb3IiLCJjbGFzcyI6ImNsYXNzTmFtZSIsbWF4bGVuZ3RoOiJtYXhMZW5ndGgiLGNlbGxzcGFjaW5nOiJjZWxsU3BhY2luZyIsY2VsbHBhZGRpbmc6ImNlbGxQYWRkaW5nIixyb3dzcGFuOiJyb3dTcGFuIixjb2xzcGFuOiJjb2xTcGFuIix1c2VtYXA6InVzZU1hcCIsZnJhbWVib3JkZXI6ImZyYW1lQm9yZGVyIixjb250ZW50ZWRpdGFibGU6ImNvbnRlbnRFZGl0YWJsZSJ9LHByb3A6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpLHMsbyx1PWUubm9kZVR5cGU7aWYoIWV8fHU9PT0zfHx1PT09OHx8dT09PTIpcmV0dXJuO3JldHVybiBvPXUhPT0xfHwhdi5pc1hNTERvYyhlKSxvJiYobj12LnByb3BGaXhbbl18fG4scz12LnByb3BIb29rc1tuXSksciE9PXQ/cyYmInNldCJpbiBzJiYoaT1zLnNldChlLHIsbikpIT09dD9pOmVbbl09cjpzJiYiZ2V0ImluIHMmJihpPXMuZ2V0KGUsbikpIT09bnVsbD9pOmVbbl19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihlKXt2YXIgbj1lLmdldEF0dHJpYnV0ZU5vZGUoInRhYmluZGV4Iik7cmV0dXJuIG4mJm4uc3BlY2lmaWVkP3BhcnNlSW50KG4udmFsdWUsMTApOnoudGVzdChlLm5vZGVOYW1lKXx8Vy50ZXN0KGUubm9kZU5hbWUpJiZlLmhyZWY/MDp0fX19fSksRj17Z2V0OmZ1bmN0aW9uKGUsbil7dmFyIHIsaT12LnByb3AoZSxuKTtyZXR1cm4gaT09PSEwfHx0eXBlb2YgaSE9ImJvb2xlYW4iJiYocj1lLmdldEF0dHJpYnV0ZU5vZGUobikpJiZyLm5vZGVWYWx1ZSE9PSExP24udG9Mb3dlckNhc2UoKTp0fSxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByO3JldHVybiB0PT09ITE/di5yZW1vdmVBdHRyKGUsbik6KHI9di5wcm9wRml4W25dfHxuLHIgaW4gZSYmKGVbcl09ITApLGUuc2V0QXR0cmlidXRlKG4sbi50b0xvd2VyQ2FzZSgpKSksbn19LFZ8fChJPXtuYW1lOiEwLGlkOiEwLGNvb3JkczohMH0saj12LnZhbEhvb2tzLmJ1dHRvbj17Z2V0OmZ1bmN0aW9uKGUsbil7dmFyIHI7cmV0dXJuIHI9ZS5nZXRBdHRyaWJ1dGVOb2RlKG4pLHImJihJW25dP3IudmFsdWUhPT0iIjpyLnNwZWNpZmllZCk/ci52YWx1ZTp0fSxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUuZ2V0QXR0cmlidXRlTm9kZShuKTtyZXR1cm4gcnx8KHI9aS5jcmVhdGVBdHRyaWJ1dGUobiksZS5zZXRBdHRyaWJ1dGVOb2RlKHIpKSxyLnZhbHVlPXQrIiJ9fSx2LmVhY2goWyJ3aWR0aCIsImhlaWdodCJdLGZ1bmN0aW9uKGUsdCl7di5hdHRySG9va3NbdF09di5leHRlbmQodi5hdHRySG9va3NbdF0se3NldDpmdW5jdGlvbihlLG4pe2lmKG49PT0iIilyZXR1cm4gZS5zZXRBdHRyaWJ1dGUodCwiYXV0byIpLG59fSl9KSx2LmF0dHJIb29rcy5jb250ZW50ZWRpdGFibGU9e2dldDpqLmdldCxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3Q9PT0iIiYmKHQ9ImZhbHNlIiksai5zZXQoZSx0LG4pfX0pLHYuc3VwcG9ydC5ocmVmTm9ybWFsaXplZHx8di5lYWNoKFsiaHJlZiIsInNyYyIsIndpZHRoIiwiaGVpZ2h0Il0sZnVuY3Rpb24oZSxuKXt2LmF0dHJIb29rc1tuXT12LmV4dGVuZCh2LmF0dHJIb29rc1tuXSx7Z2V0OmZ1bmN0aW9uKGUpe3ZhciByPWUuZ2V0QXR0cmlidXRlKG4sMik7cmV0dXJuIHI9PT1udWxsP3Q6cn19KX0pLHYuc3VwcG9ydC5zdHlsZXx8KHYuYXR0ckhvb2tzLnN0eWxlPXtnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3R5bGUuY3NzVGV4dC50b0xvd2VyQ2FzZSgpfHx0fSxzZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5zdHlsZS5jc3NUZXh0PXQrIiJ9fSksdi5zdXBwb3J0Lm9wdFNlbGVjdGVkfHwodi5wcm9wSG9va3Muc2VsZWN0ZWQ9di5leHRlbmQodi5wcm9wSG9va3Muc2VsZWN0ZWQse2dldDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJih0LnNlbGVjdGVkSW5kZXgsdC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCksbnVsbH19KSksdi5zdXBwb3J0LmVuY3R5cGV8fCh2LnByb3BGaXguZW5jdHlwZT0iZW5jb2RpbmciKSx2LnN1cHBvcnQuY2hlY2tPbnx8di5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7di52YWxIb29rc1t0aGlzXT17Z2V0OmZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSgidmFsdWUiKT09PW51bGw/Im9uIjplLnZhbHVlfX19KSx2LmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXt2LnZhbEhvb2tzW3RoaXNdPXYuZXh0ZW5kKHYudmFsSG9va3NbdGhpc10se3NldDpmdW5jdGlvbihlLHQpe2lmKHYuaXNBcnJheSh0KSlyZXR1cm4gZS5jaGVja2VkPXYuaW5BcnJheSh2KGUpLnZhbCgpLHQpPj0wfX0pfSk7dmFyICQ9L14oPzp0ZXh0YXJlYXxpbnB1dHxzZWxlY3QpJC9pLEo9L14oW15cLl0qfCkoPzpcLiguKyl8KSQvLEs9Lyg/Ol58XHMpaG92ZXIoXC5cUyt8KVxiLyxRPS9ea2V5LyxHPS9eKD86bW91c2V8Y29udGV4dG1lbnUpfGNsaWNrLyxZPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxaPWZ1bmN0aW9uKGUpe3JldHVybiB2LmV2ZW50LnNwZWNpYWwuaG92ZXI/ZTplLnJlcGxhY2UoSywibW91c2VlbnRlciQxIG1vdXNlbGVhdmUkMSIpfTt2LmV2ZW50PXthZGQ6ZnVuY3Rpb24oZSxuLHIsaSxzKXt2YXIgbyx1LGEsZixsLGMsaCxwLGQsbSxnO2lmKGUubm9kZVR5cGU9PT0zfHxlLm5vZGVUeXBlPT09OHx8IW58fCFyfHwhKG89di5fZGF0YShlKSkpcmV0dXJuO3IuaGFuZGxlciYmKGQ9cixyPWQuaGFuZGxlcixzPWQuc2VsZWN0b3IpLHIuZ3VpZHx8KHIuZ3VpZD12Lmd1aWQrKyksYT1vLmV2ZW50cyxhfHwoby5ldmVudHM9YT17fSksdT1vLmhhbmRsZSx1fHwoby5oYW5kbGU9dT1mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIHY9PSJ1bmRlZmluZWQifHwhIWUmJnYuZXZlbnQudHJpZ2dlcmVkPT09ZS50eXBlP3Q6di5ldmVudC5kaXNwYXRjaC5hcHBseSh1LmVsZW0sYXJndW1lbnRzKX0sdS5lbGVtPWUpLG49di50cmltKFoobikpLnNwbGl0KCIgIik7Zm9yKGY9MDtmPG4ubGVuZ3RoO2YrKyl7bD1KLmV4ZWMobltmXSl8fFtdLGM9bFsxXSxoPShsWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksZz12LmV2ZW50LnNwZWNpYWxbY118fHt9LGM9KHM/Zy5kZWxlZ2F0ZVR5cGU6Zy5iaW5kVHlwZSl8fGMsZz12LmV2ZW50LnNwZWNpYWxbY118fHt9LHA9di5leHRlbmQoe3R5cGU6YyxvcmlnVHlwZTpsWzFdLGRhdGE6aSxoYW5kbGVyOnIsZ3VpZDpyLmd1aWQsc2VsZWN0b3I6cyxuZWVkc0NvbnRleHQ6cyYmdi5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KHMpLG5hbWVzcGFjZTpoLmpvaW4oIi4iKX0sZCksbT1hW2NdO2lmKCFtKXttPWFbY109W10sbS5kZWxlZ2F0ZUNvdW50PTA7aWYoIWcuc2V0dXB8fGcuc2V0dXAuY2FsbChlLGksaCx1KT09PSExKWUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoYyx1LCExKTplLmF0dGFjaEV2ZW50JiZlLmF0dGFjaEV2ZW50KCJvbiIrYyx1KX1nLmFkZCYmKGcuYWRkLmNhbGwoZSxwKSxwLmhhbmRsZXIuZ3VpZHx8KHAuaGFuZGxlci5ndWlkPXIuZ3VpZCkpLHM/bS5zcGxpY2UobS5kZWxlZ2F0ZUNvdW50KyssMCxwKTptLnB1c2gocCksdi5ldmVudC5nbG9iYWxbY109ITB9ZT1udWxsfSxnbG9iYWw6e30scmVtb3ZlOmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIHMsbyx1LGEsZixsLGMsaCxwLGQsbSxnPXYuaGFzRGF0YShlKSYmdi5fZGF0YShlKTtpZighZ3x8IShoPWcuZXZlbnRzKSlyZXR1cm47dD12LnRyaW0oWih0fHwiIikpLnNwbGl0KCIgIik7Zm9yKHM9MDtzPHQubGVuZ3RoO3MrKyl7bz1KLmV4ZWModFtzXSl8fFtdLHU9YT1vWzFdLGY9b1syXTtpZighdSl7Zm9yKHUgaW4gaCl2LmV2ZW50LnJlbW92ZShlLHUrdFtzXSxuLHIsITApO2NvbnRpbnVlfXA9di5ldmVudC5zcGVjaWFsW3VdfHx7fSx1PShyP3AuZGVsZWdhdGVUeXBlOnAuYmluZFR5cGUpfHx1LGQ9aFt1XXx8W10sbD1kLmxlbmd0aCxmPWY/bmV3IFJlZ0V4cCgiKF58XFwuKSIrZi5zcGxpdCgiLiIpLnNvcnQoKS5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTpudWxsO2ZvcihjPTA7YzxkLmxlbmd0aDtjKyspbT1kW2NdLChpfHxhPT09bS5vcmlnVHlwZSkmJighbnx8bi5ndWlkPT09bS5ndWlkKSYmKCFmfHxmLnRlc3QobS5uYW1lc3BhY2UpKSYmKCFyfHxyPT09bS5zZWxlY3Rvcnx8cj09PSIqKiImJm0uc2VsZWN0b3IpJiYoZC5zcGxpY2UoYy0tLDEpLG0uc2VsZWN0b3ImJmQuZGVsZWdhdGVDb3VudC0tLHAucmVtb3ZlJiZwLnJlbW92ZS5jYWxsKGUsbSkpO2QubGVuZ3RoPT09MCYmbCE9PWQubGVuZ3RoJiYoKCFwLnRlYXJkb3dufHxwLnRlYXJkb3duLmNhbGwoZSxmLGcuaGFuZGxlKT09PSExKSYmdi5yZW1vdmVFdmVudChlLHUsZy5oYW5kbGUpLGRlbGV0ZSBoW3VdKX12LmlzRW1wdHlPYmplY3QoaCkmJihkZWxldGUgZy5oYW5kbGUsdi5yZW1vdmVEYXRhKGUsImV2ZW50cyIsITApKX0sY3VzdG9tRXZlbnQ6e2dldERhdGE6ITAsc2V0RGF0YTohMCxjaGFuZ2VEYXRhOiEwfSx0cmlnZ2VyOmZ1bmN0aW9uKG4scixzLG8pe2lmKCFzfHxzLm5vZGVUeXBlIT09MyYmcy5ub2RlVHlwZSE9PTgpe3ZhciB1LGEsZixsLGMsaCxwLGQsbSxnLHk9bi50eXBlfHxuLGI9W107aWYoWS50ZXN0KHkrdi5ldmVudC50cmlnZ2VyZWQpKXJldHVybjt5LmluZGV4T2YoIiEiKT49MCYmKHk9eS5zbGljZSgwLC0xKSxhPSEwKSx5LmluZGV4T2YoIi4iKT49MCYmKGI9eS5zcGxpdCgiLiIpLHk9Yi5zaGlmdCgpLGIuc29ydCgpKTtpZigoIXN8fHYuZXZlbnQuY3VzdG9tRXZlbnRbeV0pJiYhdi5ldmVudC5nbG9iYWxbeV0pcmV0dXJuO249dHlwZW9mIG49PSJvYmplY3QiP25bdi5leHBhbmRvXT9uOm5ldyB2LkV2ZW50KHksbik6bmV3IHYuRXZlbnQoeSksbi50eXBlPXksbi5pc1RyaWdnZXI9ITAsbi5leGNsdXNpdmU9YSxuLm5hbWVzcGFjZT1iLmpvaW4oIi4iKSxuLm5hbWVzcGFjZV9yZT1uLm5hbWVzcGFjZT9uZXcgUmVnRXhwKCIoXnxcXC4pIitiLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpOm51bGwsaD15LmluZGV4T2YoIjoiKTwwPyJvbiIreToiIjtpZighcyl7dT12LmNhY2hlO2ZvcihmIGluIHUpdVtmXS5ldmVudHMmJnVbZl0uZXZlbnRzW3ldJiZ2LmV2ZW50LnRyaWdnZXIobixyLHVbZl0uaGFuZGxlLmVsZW0sITApO3JldHVybn1uLnJlc3VsdD10LG4udGFyZ2V0fHwobi50YXJnZXQ9cykscj1yIT1udWxsP3YubWFrZUFycmF5KHIpOltdLHIudW5zaGlmdChuKSxwPXYuZXZlbnQuc3BlY2lhbFt5XXx8e307aWYocC50cmlnZ2VyJiZwLnRyaWdnZXIuYXBwbHkocyxyKT09PSExKXJldHVybjttPVtbcyxwLmJpbmRUeXBlfHx5XV07aWYoIW8mJiFwLm5vQnViYmxlJiYhdi5pc1dpbmRvdyhzKSl7Zz1wLmRlbGVnYXRlVHlwZXx8eSxsPVkudGVzdChnK3kpP3M6cy5wYXJlbnROb2RlO2ZvcihjPXM7bDtsPWwucGFyZW50Tm9kZSltLnB1c2goW2wsZ10pLGM9bDtjPT09KHMub3duZXJEb2N1bWVudHx8aSkmJm0ucHVzaChbYy5kZWZhdWx0Vmlld3x8Yy5wYXJlbnRXaW5kb3d8fGUsZ10pfWZvcihmPTA7ZjxtLmxlbmd0aCYmIW4uaXNQcm9wYWdhdGlvblN0b3BwZWQoKTtmKyspbD1tW2ZdWzBdLG4udHlwZT1tW2ZdWzFdLGQ9KHYuX2RhdGEobCwiZXZlbnRzIil8fHt9KVtuLnR5cGVdJiZ2Ll9kYXRhKGwsImhhbmRsZSIpLGQmJmQuYXBwbHkobCxyKSxkPWgmJmxbaF0sZCYmdi5hY2NlcHREYXRhKGwpJiZkLmFwcGx5JiZkLmFwcGx5KGwscik9PT0hMSYmbi5wcmV2ZW50RGVmYXVsdCgpO3JldHVybiBuLnR5cGU9eSwhbyYmIW4uaXNEZWZhdWx0UHJldmVudGVkKCkmJighcC5fZGVmYXVsdHx8cC5fZGVmYXVsdC5hcHBseShzLm93bmVyRG9jdW1lbnQscik9PT0hMSkmJih5IT09ImNsaWNrInx8IXYubm9kZU5hbWUocywiYSIpKSYmdi5hY2NlcHREYXRhKHMpJiZoJiZzW3ldJiYoeSE9PSJmb2N1cyImJnkhPT0iYmx1ciJ8fG4udGFyZ2V0Lm9mZnNldFdpZHRoIT09MCkmJiF2LmlzV2luZG93KHMpJiYoYz1zW2hdLGMmJihzW2hdPW51bGwpLHYuZXZlbnQudHJpZ2dlcmVkPXksc1t5XSgpLHYuZXZlbnQudHJpZ2dlcmVkPXQsYyYmKHNbaF09YykpLG4ucmVzdWx0fXJldHVybn0sZGlzcGF0Y2g6ZnVuY3Rpb24obil7bj12LmV2ZW50LmZpeChufHxlLmV2ZW50KTt2YXIgcixpLHMsbyx1LGEsZixjLGgscCxkPSh2Ll9kYXRhKHRoaXMsImV2ZW50cyIpfHx7fSlbbi50eXBlXXx8W10sbT1kLmRlbGVnYXRlQ291bnQsZz1sLmNhbGwoYXJndW1lbnRzKSx5PSFuLmV4Y2x1c2l2ZSYmIW4ubmFtZXNwYWNlLGI9di5ldmVudC5zcGVjaWFsW24udHlwZV18fHt9LHc9W107Z1swXT1uLG4uZGVsZWdhdGVUYXJnZXQ9dGhpcztpZihiLnByZURpc3BhdGNoJiZiLnByZURpc3BhdGNoLmNhbGwodGhpcyxuKT09PSExKXJldHVybjtpZihtJiYoIW4uYnV0dG9ufHxuLnR5cGUhPT0iY2xpY2siKSlmb3Iocz1uLnRhcmdldDtzIT10aGlzO3M9cy5wYXJlbnROb2RlfHx0aGlzKWlmKHMuZGlzYWJsZWQhPT0hMHx8bi50eXBlIT09ImNsaWNrIil7dT17fSxmPVtdO2ZvcihyPTA7cjxtO3IrKyljPWRbcl0saD1jLnNlbGVjdG9yLHVbaF09PT10JiYodVtoXT1jLm5lZWRzQ29udGV4dD92KGgsdGhpcykuaW5kZXgocyk+PTA6di5maW5kKGgsdGhpcyxudWxsLFtzXSkubGVuZ3RoKSx1W2hdJiZmLnB1c2goYyk7Zi5sZW5ndGgmJncucHVzaCh7ZWxlbTpzLG1hdGNoZXM6Zn0pfWQubGVuZ3RoPm0mJncucHVzaCh7ZWxlbTp0aGlzLG1hdGNoZXM6ZC5zbGljZShtKX0pO2ZvcihyPTA7cjx3Lmxlbmd0aCYmIW4uaXNQcm9wYWdhdGlvblN0b3BwZWQoKTtyKyspe2E9d1tyXSxuLmN1cnJlbnRUYXJnZXQ9YS5lbGVtO2ZvcihpPTA7aTxhLm1hdGNoZXMubGVuZ3RoJiYhbi5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpO2krKyl7Yz1hLm1hdGNoZXNbaV07aWYoeXx8IW4ubmFtZXNwYWNlJiYhYy5uYW1lc3BhY2V8fG4ubmFtZXNwYWNlX3JlJiZuLm5hbWVzcGFjZV9yZS50ZXN0KGMubmFtZXNwYWNlKSluLmRhdGE9Yy5kYXRhLG4uaGFuZGxlT2JqPWMsbz0oKHYuZXZlbnQuc3BlY2lhbFtjLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8Yy5oYW5kbGVyKS5hcHBseShhLmVsZW0sZyksbyE9PXQmJihuLnJlc3VsdD1vLG89PT0hMSYmKG4ucHJldmVudERlZmF1bHQoKSxuLnN0b3BQcm9wYWdhdGlvbigpKSl9fXJldHVybiBiLnBvc3REaXNwYXRjaCYmYi5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLG4pLG4ucmVzdWx0fSxwcm9wczoiYXR0ckNoYW5nZSBhdHRyTmFtZSByZWxhdGVkTm9kZSBzcmNFbGVtZW50IGFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaCIuc3BsaXQoIiAiKSxmaXhIb29rczp7fSxrZXlIb29rczp7cHJvcHM6ImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGUiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUud2hpY2g9PW51bGwmJihlLndoaWNoPXQuY2hhckNvZGUhPW51bGw/dC5jaGFyQ29kZTp0LmtleUNvZGUpLGV9fSxtb3VzZUhvb2tzOntwcm9wczoiYnV0dG9uIGJ1dHRvbnMgY2xpZW50WCBjbGllbnRZIGZyb21FbGVtZW50IG9mZnNldFggb2Zmc2V0WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkgdG9FbGVtZW50Ii5zcGxpdCgiICIpLGZpbHRlcjpmdW5jdGlvbihlLG4pe3ZhciByLHMsbyx1PW4uYnV0dG9uLGE9bi5mcm9tRWxlbWVudDtyZXR1cm4gZS5wYWdlWD09bnVsbCYmbi5jbGllbnRYIT1udWxsJiYocj1lLnRhcmdldC5vd25lckRvY3VtZW50fHxpLHM9ci5kb2N1bWVudEVsZW1lbnQsbz1yLmJvZHksZS5wYWdlWD1uLmNsaWVudFgrKHMmJnMuc2Nyb2xsTGVmdHx8byYmby5zY3JvbGxMZWZ0fHwwKS0ocyYmcy5jbGllbnRMZWZ0fHxvJiZvLmNsaWVudExlZnR8fDApLGUucGFnZVk9bi5jbGllbnRZKyhzJiZzLnNjcm9sbFRvcHx8byYmby5zY3JvbGxUb3B8fDApLShzJiZzLmNsaWVudFRvcHx8byYmby5jbGllbnRUb3B8fDApKSwhZS5yZWxhdGVkVGFyZ2V0JiZhJiYoZS5yZWxhdGVkVGFyZ2V0PWE9PT1lLnRhcmdldD9uLnRvRWxlbWVudDphKSwhZS53aGljaCYmdSE9PXQmJihlLndoaWNoPXUmMT8xOnUmMj8zOnUmND8yOjApLGV9fSxmaXg6ZnVuY3Rpb24oZSl7aWYoZVt2LmV4cGFuZG9dKXJldHVybiBlO3ZhciB0LG4scj1lLHM9di5ldmVudC5maXhIb29rc1tlLnR5cGVdfHx7fSxvPXMucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQocy5wcm9wcyk6dGhpcy5wcm9wcztlPXYuRXZlbnQocik7Zm9yKHQ9by5sZW5ndGg7dDspbj1vWy0tdF0sZVtuXT1yW25dO3JldHVybiBlLnRhcmdldHx8KGUudGFyZ2V0PXIuc3JjRWxlbWVudHx8aSksZS50YXJnZXQubm9kZVR5cGU9PT0zJiYoZS50YXJnZXQ9ZS50YXJnZXQucGFyZW50Tm9kZSksZS5tZXRhS2V5PSEhZS5tZXRhS2V5LHMuZmlsdGVyP3MuZmlsdGVyKGUscik6ZX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGZvY3VzOntkZWxlZ2F0ZVR5cGU6ImZvY3VzaW4ifSxibHVyOntkZWxlZ2F0ZVR5cGU6ImZvY3Vzb3V0In0sYmVmb3JldW5sb2FkOntzZXR1cDpmdW5jdGlvbihlLHQsbil7di5pc1dpbmRvdyh0aGlzKSYmKHRoaXMub25iZWZvcmV1bmxvYWQ9bil9LHRlYXJkb3duOmZ1bmN0aW9uKGUsdCl7dGhpcy5vbmJlZm9yZXVubG9hZD09PXQmJih0aGlzLm9uYmVmb3JldW5sb2FkPW51bGwpfX19LHNpbXVsYXRlOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpPXYuZXh0ZW5kKG5ldyB2LkV2ZW50LG4se3R5cGU6ZSxpc1NpbXVsYXRlZDohMCxvcmlnaW5hbEV2ZW50Ont9fSk7cj92LmV2ZW50LnRyaWdnZXIoaSxudWxsLHQpOnYuZXZlbnQuZGlzcGF0Y2guY2FsbCh0LGkpLGkuaXNEZWZhdWx0UHJldmVudGVkKCkmJm4ucHJldmVudERlZmF1bHQoKX19LHYuZXZlbnQuaGFuZGxlPXYuZXZlbnQuZGlzcGF0Y2gsdi5yZW1vdmVFdmVudD1pLnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oZSx0LG4pe2UucmVtb3ZlRXZlbnRMaXN0ZW5lciYmZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsbiwhMSl9OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj0ib24iK3Q7ZS5kZXRhY2hFdmVudCYmKHR5cGVvZiBlW3JdPT0idW5kZWZpbmVkIiYmKGVbcl09bnVsbCksZS5kZXRhY2hFdmVudChyLG4pKX0sdi5FdmVudD1mdW5jdGlvbihlLHQpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHYuRXZlbnQpKXJldHVybiBuZXcgdi5FdmVudChlLHQpO2UmJmUudHlwZT8odGhpcy5vcmlnaW5hbEV2ZW50PWUsdGhpcy50eXBlPWUudHlwZSx0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1lLmRlZmF1bHRQcmV2ZW50ZWR8fGUucmV0dXJuVmFsdWU9PT0hMXx8ZS5nZXRQcmV2ZW50RGVmYXVsdCYmZS5nZXRQcmV2ZW50RGVmYXVsdCgpP3R0OmV0KTp0aGlzLnR5cGU9ZSx0JiZ2LmV4dGVuZCh0aGlzLHQpLHRoaXMudGltZVN0YW1wPWUmJmUudGltZVN0YW1wfHx2Lm5vdygpLHRoaXNbdi5leHBhbmRvXT0hMH0sdi5FdmVudC5wcm90b3R5cGU9e3ByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9dHQ7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O2lmKCFlKXJldHVybjtlLnByZXZlbnREZWZhdWx0P2UucHJldmVudERlZmF1bHQoKTplLnJldHVyblZhbHVlPSExfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPXR0O3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDtpZighZSlyZXR1cm47ZS5zdG9wUHJvcGFnYXRpb24mJmUuc3RvcFByb3BhZ2F0aW9uKCksZS5jYW5jZWxCdWJibGU9ITB9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9dHQsdGhpcy5zdG9wUHJvcGFnYXRpb24oKX0saXNEZWZhdWx0UHJldmVudGVkOmV0LGlzUHJvcGFnYXRpb25TdG9wcGVkOmV0LGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOmV0fSx2LmVhY2goe21vdXNlZW50ZXI6Im1vdXNlb3ZlciIsbW91c2VsZWF2ZToibW91c2VvdXQifSxmdW5jdGlvbihlLHQpe3YuZXZlbnQuc3BlY2lhbFtlXT17ZGVsZWdhdGVUeXBlOnQsYmluZFR5cGU6dCxoYW5kbGU6ZnVuY3Rpb24oZSl7dmFyIG4scj10aGlzLGk9ZS5yZWxhdGVkVGFyZ2V0LHM9ZS5oYW5kbGVPYmosbz1zLnNlbGVjdG9yO2lmKCFpfHxpIT09ciYmIXYuY29udGFpbnMocixpKSllLnR5cGU9cy5vcmlnVHlwZSxuPXMuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksZS50eXBlPXQ7cmV0dXJuIG59fX0pLHYuc3VwcG9ydC5zdWJtaXRCdWJibGVzfHwodi5ldmVudC5zcGVjaWFsLnN1Ym1pdD17c2V0dXA6ZnVuY3Rpb24oKXtpZih2Lm5vZGVOYW1lKHRoaXMsImZvcm0iKSlyZXR1cm4hMTt2LmV2ZW50LmFkZCh0aGlzLCJjbGljay5fc3VibWl0IGtleXByZXNzLl9zdWJtaXQiLGZ1bmN0aW9uKGUpe3ZhciBuPWUudGFyZ2V0LHI9di5ub2RlTmFtZShuLCJpbnB1dCIpfHx2Lm5vZGVOYW1lKG4sImJ1dHRvbiIpP24uZm9ybTp0O3ImJiF2Ll9kYXRhKHIsIl9zdWJtaXRfYXR0YWNoZWQiKSYmKHYuZXZlbnQuYWRkKHIsInN1Ym1pdC5fc3VibWl0IixmdW5jdGlvbihlKXtlLl9zdWJtaXRfYnViYmxlPSEwfSksdi5fZGF0YShyLCJfc3VibWl0X2F0dGFjaGVkIiwhMCkpfSl9LHBvc3REaXNwYXRjaDpmdW5jdGlvbihlKXtlLl9zdWJtaXRfYnViYmxlJiYoZGVsZXRlIGUuX3N1Ym1pdF9idWJibGUsdGhpcy5wYXJlbnROb2RlJiYhZS5pc1RyaWdnZXImJnYuZXZlbnQuc2ltdWxhdGUoInN1Ym1pdCIsdGhpcy5wYXJlbnROb2RlLGUsITApKX0sdGVhcmRvd246ZnVuY3Rpb24oKXtpZih2Lm5vZGVOYW1lKHRoaXMsImZvcm0iKSlyZXR1cm4hMTt2LmV2ZW50LnJlbW92ZSh0aGlzLCIuX3N1Ym1pdCIpfX0pLHYuc3VwcG9ydC5jaGFuZ2VCdWJibGVzfHwodi5ldmVudC5zcGVjaWFsLmNoYW5nZT17c2V0dXA6ZnVuY3Rpb24oKXtpZigkLnRlc3QodGhpcy5ub2RlTmFtZSkpe2lmKHRoaXMudHlwZT09PSJjaGVja2JveCJ8fHRoaXMudHlwZT09PSJyYWRpbyIpdi5ldmVudC5hZGQodGhpcywicHJvcGVydHljaGFuZ2UuX2NoYW5nZSIsZnVuY3Rpb24oZSl7ZS5vcmlnaW5hbEV2ZW50LnByb3BlcnR5TmFtZT09PSJjaGVja2VkIiYmKHRoaXMuX2p1c3RfY2hhbmdlZD0hMCl9KSx2LmV2ZW50LmFkZCh0aGlzLCJjbGljay5fY2hhbmdlIixmdW5jdGlvbihlKXt0aGlzLl9qdXN0X2NoYW5nZWQmJiFlLmlzVHJpZ2dlciYmKHRoaXMuX2p1c3RfY2hhbmdlZD0hMSksdi5ldmVudC5zaW11bGF0ZSgiY2hhbmdlIix0aGlzLGUsITApfSk7cmV0dXJuITF9di5ldmVudC5hZGQodGhpcywiYmVmb3JlYWN0aXZhdGUuX2NoYW5nZSIsZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YXJnZXQ7JC50ZXN0KHQubm9kZU5hbWUpJiYhdi5fZGF0YSh0LCJfY2hhbmdlX2F0dGFjaGVkIikmJih2LmV2ZW50LmFkZCh0LCJjaGFuZ2UuX2NoYW5nZSIsZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnROb2RlJiYhZS5pc1NpbXVsYXRlZCYmIWUuaXNUcmlnZ2VyJiZ2LmV2ZW50LnNpbXVsYXRlKCJjaGFuZ2UiLHRoaXMucGFyZW50Tm9kZSxlLCEwKX0pLHYuX2RhdGEodCwiX2NoYW5nZV9hdHRhY2hlZCIsITApKX0pfSxoYW5kbGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YXJnZXQ7aWYodGhpcyE9PXR8fGUuaXNTaW11bGF0ZWR8fGUuaXNUcmlnZ2VyfHx0LnR5cGUhPT0icmFkaW8iJiZ0LnR5cGUhPT0iY2hlY2tib3giKXJldHVybiBlLmhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sdGVhcmRvd246ZnVuY3Rpb24oKXtyZXR1cm4gdi5ldmVudC5yZW1vdmUodGhpcywiLl9jaGFuZ2UiKSwhJC50ZXN0KHRoaXMubm9kZU5hbWUpfX0pLHYuc3VwcG9ydC5mb2N1c2luQnViYmxlc3x8di5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihlLHQpe3ZhciBuPTAscj1mdW5jdGlvbihlKXt2LmV2ZW50LnNpbXVsYXRlKHQsZS50YXJnZXQsdi5ldmVudC5maXgoZSksITApfTt2LmV2ZW50LnNwZWNpYWxbdF09e3NldHVwOmZ1bmN0aW9uKCl7bisrPT09MCYmaS5hZGRFdmVudExpc3RlbmVyKGUsciwhMCl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7LS1uPT09MCYmaS5yZW1vdmVFdmVudExpc3RlbmVyKGUsciwhMCl9fX0pLHYuZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihlLG4scixpLHMpe3ZhciBvLHU7aWYodHlwZW9mIGU9PSJvYmplY3QiKXt0eXBlb2YgbiE9InN0cmluZyImJihyPXJ8fG4sbj10KTtmb3IodSBpbiBlKXRoaXMub24odSxuLHIsZVt1XSxzKTtyZXR1cm4gdGhpc31yPT1udWxsJiZpPT1udWxsPyhpPW4scj1uPXQpOmk9PW51bGwmJih0eXBlb2Ygbj09InN0cmluZyI/KGk9cixyPXQpOihpPXIscj1uLG49dCkpO2lmKGk9PT0hMSlpPWV0O2Vsc2UgaWYoIWkpcmV0dXJuIHRoaXM7cmV0dXJuIHM9PT0xJiYobz1pLGk9ZnVuY3Rpb24oZSl7cmV0dXJuIHYoKS5vZmYoZSksby5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGkuZ3VpZD1vLmd1aWR8fChvLmd1aWQ9di5ndWlkKyspKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2LmV2ZW50LmFkZCh0aGlzLGUsaSxyLG4pfSl9LG9uZTpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5vbihlLHQsbixyLDEpfSxvZmY6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpLHM7aWYoZSYmZS5wcmV2ZW50RGVmYXVsdCYmZS5oYW5kbGVPYmopcmV0dXJuIGk9ZS5oYW5kbGVPYmosdihlLmRlbGVnYXRlVGFyZ2V0KS5vZmYoaS5uYW1lc3BhY2U/aS5vcmlnVHlwZSsiLiIraS5uYW1lc3BhY2U6aS5vcmlnVHlwZSxpLnNlbGVjdG9yLGkuaGFuZGxlciksdGhpcztpZih0eXBlb2YgZT09Im9iamVjdCIpe2ZvcihzIGluIGUpdGhpcy5vZmYocyxuLGVbc10pO3JldHVybiB0aGlzfWlmKG49PT0hMXx8dHlwZW9mIG49PSJmdW5jdGlvbiIpcj1uLG49dDtyZXR1cm4gcj09PSExJiYocj1ldCksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7di5ldmVudC5yZW1vdmUodGhpcyxlLHIsbil9KX0sYmluZDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMub24oZSxudWxsLHQsbil9LHVuYmluZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm9mZihlLG51bGwsdCl9LGxpdmU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2KHRoaXMuY29udGV4dCkub24oZSx0aGlzLnNlbGVjdG9yLHQsbiksdGhpc30sZGllOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHYodGhpcy5jb250ZXh0KS5vZmYoZSx0aGlzLnNlbGVjdG9yfHwiKioiLHQpLHRoaXN9LGRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLm9uKHQsZSxuLHIpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD09PTE/dGhpcy5vZmYoZSwiKioiKTp0aGlzLm9mZih0LGV8fCIqKiIsbil9LHRyaWdnZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7di5ldmVudC50cmlnZ2VyKGUsdCx0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihlLHQpe2lmKHRoaXNbMF0pcmV0dXJuIHYuZXZlbnQudHJpZ2dlcihlLHQsdGhpc1swXSwhMCl9LHRvZ2dsZTpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMsbj1lLmd1aWR8fHYuZ3VpZCsrLHI9MCxpPWZ1bmN0aW9uKG4pe3ZhciBpPSh2Ll9kYXRhKHRoaXMsImxhc3RUb2dnbGUiK2UuZ3VpZCl8fDApJXI7cmV0dXJuIHYuX2RhdGEodGhpcywibGFzdFRvZ2dsZSIrZS5ndWlkLGkrMSksbi5wcmV2ZW50RGVmYXVsdCgpLHRbaV0uYXBwbHkodGhpcyxhcmd1bWVudHMpfHwhMX07aS5ndWlkPW47d2hpbGUocjx0Lmxlbmd0aCl0W3IrK10uZ3VpZD1uO3JldHVybiB0aGlzLmNsaWNrKGkpfSxob3ZlcjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoZSkubW91c2VsZWF2ZSh0fHxlKX19KSx2LmVhY2goImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnUiLnNwbGl0KCIgIiksZnVuY3Rpb24oZSx0KXt2LmZuW3RdPWZ1bmN0aW9uKGUsbil7cmV0dXJuIG49PW51bGwmJihuPWUsZT1udWxsKSxhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbih0LG51bGwsZSxuKTp0aGlzLnRyaWdnZXIodCl9LFEudGVzdCh0KSYmKHYuZXZlbnQuZml4SG9va3NbdF09di5ldmVudC5rZXlIb29rcyksRy50ZXN0KHQpJiYodi5ldmVudC5maXhIb29rc1t0XT12LmV2ZW50Lm1vdXNlSG9va3MpfSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBudChlLHQsbixyKXtuPW58fFtdLHQ9dHx8Zzt2YXIgaSxzLGEsZixsPXQubm9kZVR5cGU7aWYoIWV8fHR5cGVvZiBlIT0ic3RyaW5nIilyZXR1cm4gbjtpZihsIT09MSYmbCE9PTkpcmV0dXJuW107YT1vKHQpO2lmKCFhJiYhcilpZihpPVIuZXhlYyhlKSlpZihmPWlbMV0pe2lmKGw9PT05KXtzPXQuZ2V0RWxlbWVudEJ5SWQoZik7aWYoIXN8fCFzLnBhcmVudE5vZGUpcmV0dXJuIG47aWYocy5pZD09PWYpcmV0dXJuIG4ucHVzaChzKSxufWVsc2UgaWYodC5vd25lckRvY3VtZW50JiYocz10Lm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZikpJiZ1KHQscykmJnMuaWQ9PT1mKXJldHVybiBuLnB1c2gocyksbn1lbHNle2lmKGlbMl0pcmV0dXJuIFMuYXBwbHkobix4LmNhbGwodC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKSwwKSksbjtpZigoZj1pWzNdKSYmWiYmdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBTLmFwcGx5KG4seC5jYWxsKHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShmKSwwKSksbn1yZXR1cm4gdnQoZS5yZXBsYWNlKGosIiQxIiksdCxuLHIsYSl9ZnVuY3Rpb24gcnQoZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBuPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4gbj09PSJpbnB1dCImJnQudHlwZT09PWV9fWZ1bmN0aW9uIGl0KGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKG49PT0iaW5wdXQifHxuPT09ImJ1dHRvbiIpJiZ0LnR5cGU9PT1lfX1mdW5jdGlvbiBzdChlKXtyZXR1cm4gTihmdW5jdGlvbih0KXtyZXR1cm4gdD0rdCxOKGZ1bmN0aW9uKG4scil7dmFyIGkscz1lKFtdLG4ubGVuZ3RoLHQpLG89cy5sZW5ndGg7d2hpbGUoby0tKW5baT1zW29dXSYmKG5baV09IShyW2ldPW5baV0pKX0pfSl9ZnVuY3Rpb24gb3QoZSx0LG4pe2lmKGU9PT10KXJldHVybiBuO3ZhciByPWUubmV4dFNpYmxpbmc7d2hpbGUocil7aWYocj09PXQpcmV0dXJuLTE7cj1yLm5leHRTaWJsaW5nfXJldHVybiAxfWZ1bmN0aW9uIHV0KGUsdCl7dmFyIG4scixzLG8sdSxhLGYsbD1MW2RdW2UrIiAiXTtpZihsKXJldHVybiB0PzA6bC5zbGljZSgwKTt1PWUsYT1bXSxmPWkucHJlRmlsdGVyO3doaWxlKHUpe2lmKCFufHwocj1GLmV4ZWModSkpKXImJih1PXUuc2xpY2UoclswXS5sZW5ndGgpfHx1KSxhLnB1c2gocz1bXSk7bj0hMTtpZihyPUkuZXhlYyh1KSlzLnB1c2gobj1uZXcgbShyLnNoaWZ0KCkpKSx1PXUuc2xpY2Uobi5sZW5ndGgpLG4udHlwZT1yWzBdLnJlcGxhY2UoaiwiICIpO2ZvcihvIGluIGkuZmlsdGVyKShyPUpbb10uZXhlYyh1KSkmJighZltvXXx8KHI9ZltvXShyKSkpJiYocy5wdXNoKG49bmV3IG0oci5zaGlmdCgpKSksdT11LnNsaWNlKG4ubGVuZ3RoKSxuLnR5cGU9byxuLm1hdGNoZXM9cik7aWYoIW4pYnJlYWt9cmV0dXJuIHQ/dS5sZW5ndGg6dT9udC5lcnJvcihlKTpMKGUsYSkuc2xpY2UoMCl9ZnVuY3Rpb24gYXQoZSx0LHIpe3ZhciBpPXQuZGlyLHM9ciYmdC5kaXI9PT0icGFyZW50Tm9kZSIsbz13Kys7cmV0dXJuIHQuZmlyc3Q/ZnVuY3Rpb24odCxuLHIpe3doaWxlKHQ9dFtpXSlpZihzfHx0Lm5vZGVUeXBlPT09MSlyZXR1cm4gZSh0LG4scil9OmZ1bmN0aW9uKHQscix1KXtpZighdSl7dmFyIGEsZj1iKyIgIitvKyIgIixsPWYrbjt3aGlsZSh0PXRbaV0paWYoc3x8dC5ub2RlVHlwZT09PTEpe2lmKChhPXRbZF0pPT09bClyZXR1cm4gdC5zaXpzZXQ7aWYodHlwZW9mIGE9PSJzdHJpbmciJiZhLmluZGV4T2YoZik9PT0wKXtpZih0LnNpenNldClyZXR1cm4gdH1lbHNle3RbZF09bDtpZihlKHQscix1KSlyZXR1cm4gdC5zaXpzZXQ9ITAsdDt0LnNpenNldD0hMX19fWVsc2Ugd2hpbGUodD10W2ldKWlmKHN8fHQubm9kZVR5cGU9PT0xKWlmKGUodCxyLHUpKXJldHVybiB0fX1mdW5jdGlvbiBmdChlKXtyZXR1cm4gZS5sZW5ndGg+MT9mdW5jdGlvbih0LG4scil7dmFyIGk9ZS5sZW5ndGg7d2hpbGUoaS0tKWlmKCFlW2ldKHQsbixyKSlyZXR1cm4hMTtyZXR1cm4hMH06ZVswXX1mdW5jdGlvbiBsdChlLHQsbixyLGkpe3ZhciBzLG89W10sdT0wLGE9ZS5sZW5ndGgsZj10IT1udWxsO2Zvcig7dTxhO3UrKylpZihzPWVbdV0paWYoIW58fG4ocyxyLGkpKW8ucHVzaChzKSxmJiZ0LnB1c2godSk7cmV0dXJuIG99ZnVuY3Rpb24gY3QoZSx0LG4scixpLHMpe3JldHVybiByJiYhcltkXSYmKHI9Y3QocikpLGkmJiFpW2RdJiYoaT1jdChpLHMpKSxOKGZ1bmN0aW9uKHMsbyx1LGEpe3ZhciBmLGwsYyxoPVtdLHA9W10sZD1vLmxlbmd0aCx2PXN8fGR0KHR8fCIqIix1Lm5vZGVUeXBlP1t1XTp1LFtdKSxtPWUmJihzfHwhdCk/bHQodixoLGUsdSxhKTp2LGc9bj9pfHwocz9lOmR8fHIpP1tdOm86bTtuJiZuKG0sZyx1LGEpO2lmKHIpe2Y9bHQoZyxwKSxyKGYsW10sdSxhKSxsPWYubGVuZ3RoO3doaWxlKGwtLSlpZihjPWZbbF0pZ1twW2xdXT0hKG1bcFtsXV09Yyl9aWYocyl7aWYoaXx8ZSl7aWYoaSl7Zj1bXSxsPWcubGVuZ3RoO3doaWxlKGwtLSkoYz1nW2xdKSYmZi5wdXNoKG1bbF09Yyk7aShudWxsLGc9W10sZixhKX1sPWcubGVuZ3RoO3doaWxlKGwtLSkoYz1nW2xdKSYmKGY9aT9ULmNhbGwocyxjKTpoW2xdKT4tMSYmKHNbZl09IShvW2ZdPWMpKX19ZWxzZSBnPWx0KGc9PT1vP2cuc3BsaWNlKGQsZy5sZW5ndGgpOmcpLGk/aShudWxsLG8sZyxhKTpTLmFwcGx5KG8sZyl9KX1mdW5jdGlvbiBodChlKXt2YXIgdCxuLHIscz1lLmxlbmd0aCxvPWkucmVsYXRpdmVbZVswXS50eXBlXSx1PW98fGkucmVsYXRpdmVbIiAiXSxhPW8/MTowLGY9YXQoZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10fSx1LCEwKSxsPWF0KGZ1bmN0aW9uKGUpe3JldHVybiBULmNhbGwodCxlKT4tMX0sdSwhMCksaD1bZnVuY3Rpb24oZSxuLHIpe3JldHVybiFvJiYocnx8biE9PWMpfHwoKHQ9bikubm9kZVR5cGU/ZihlLG4scik6bChlLG4scikpfV07Zm9yKDthPHM7YSsrKWlmKG49aS5yZWxhdGl2ZVtlW2FdLnR5cGVdKWg9W2F0KGZ0KGgpLG4pXTtlbHNle249aS5maWx0ZXJbZVthXS50eXBlXS5hcHBseShudWxsLGVbYV0ubWF0Y2hlcyk7aWYobltkXSl7cj0rK2E7Zm9yKDtyPHM7cisrKWlmKGkucmVsYXRpdmVbZVtyXS50eXBlXSlicmVhaztyZXR1cm4gY3QoYT4xJiZmdChoKSxhPjEmJmUuc2xpY2UoMCxhLTEpLmpvaW4oIiIpLnJlcGxhY2UoaiwiJDEiKSxuLGE8ciYmaHQoZS5zbGljZShhLHIpKSxyPHMmJmh0KGU9ZS5zbGljZShyKSkscjxzJiZlLmpvaW4oIiIpKX1oLnB1c2gobil9cmV0dXJuIGZ0KGgpfWZ1bmN0aW9uIHB0KGUsdCl7dmFyIHI9dC5sZW5ndGg+MCxzPWUubGVuZ3RoPjAsbz1mdW5jdGlvbih1LGEsZixsLGgpe3ZhciBwLGQsdixtPVtdLHk9MCx3PSIwIix4PXUmJltdLFQ9aCE9bnVsbCxOPWMsQz11fHxzJiZpLmZpbmQuVEFHKCIqIixoJiZhLnBhcmVudE5vZGV8fGEpLGs9Yis9Tj09bnVsbD8xOk1hdGguRTtUJiYoYz1hIT09ZyYmYSxuPW8uZWwpO2Zvcig7KHA9Q1t3XSkhPW51bGw7dysrKXtpZihzJiZwKXtmb3IoZD0wO3Y9ZVtkXTtkKyspaWYodihwLGEsZikpe2wucHVzaChwKTticmVha31UJiYoYj1rLG49KytvLmVsKX1yJiYoKHA9IXYmJnApJiZ5LS0sdSYmeC5wdXNoKHApKX15Kz13O2lmKHImJnchPT15KXtmb3IoZD0wO3Y9dFtkXTtkKyspdih4LG0sYSxmKTtpZih1KXtpZih5PjApd2hpbGUody0tKSF4W3ddJiYhbVt3XSYmKG1bd109RS5jYWxsKGwpKTttPWx0KG0pfVMuYXBwbHkobCxtKSxUJiYhdSYmbS5sZW5ndGg+MCYmeSt0Lmxlbmd0aD4xJiZudC51bmlxdWVTb3J0KGwpfXJldHVybiBUJiYoYj1rLGM9TikseH07cmV0dXJuIG8uZWw9MCxyP04obyk6b31mdW5jdGlvbiBkdChlLHQsbil7dmFyIHI9MCxpPXQubGVuZ3RoO2Zvcig7cjxpO3IrKyludChlLHRbcl0sbik7cmV0dXJuIG59ZnVuY3Rpb24gdnQoZSx0LG4scixzKXt2YXIgbyx1LGYsbCxjLGg9dXQoZSkscD1oLmxlbmd0aDtpZighciYmaC5sZW5ndGg9PT0xKXt1PWhbMF09aFswXS5zbGljZSgwKTtpZih1Lmxlbmd0aD4yJiYoZj11WzBdKS50eXBlPT09IklEIiYmdC5ub2RlVHlwZT09PTkmJiFzJiZpLnJlbGF0aXZlW3VbMV0udHlwZV0pe3Q9aS5maW5kLklEKGYubWF0Y2hlc1swXS5yZXBsYWNlKCQsIiIpLHQscylbMF07aWYoIXQpcmV0dXJuIG47ZT1lLnNsaWNlKHUuc2hpZnQoKS5sZW5ndGgpfWZvcihvPUouUE9TLnRlc3QoZSk/LTE6dS5sZW5ndGgtMTtvPj0wO28tLSl7Zj11W29dO2lmKGkucmVsYXRpdmVbbD1mLnR5cGVdKWJyZWFrO2lmKGM9aS5maW5kW2xdKWlmKHI9YyhmLm1hdGNoZXNbMF0ucmVwbGFjZSgkLCIiKSx6LnRlc3QodVswXS50eXBlKSYmdC5wYXJlbnROb2RlfHx0LHMpKXt1LnNwbGljZShvLDEpLGU9ci5sZW5ndGgmJnUuam9pbigiIik7aWYoIWUpcmV0dXJuIFMuYXBwbHkobix4LmNhbGwociwwKSksbjticmVha319fXJldHVybiBhKGUsaCkocix0LHMsbix6LnRlc3QoZSkpLG59ZnVuY3Rpb24gbXQoKXt9dmFyIG4scixpLHMsbyx1LGEsZixsLGMsaD0hMCxwPSJ1bmRlZmluZWQiLGQ9KCJzaXpjYWNoZSIrTWF0aC5yYW5kb20oKSkucmVwbGFjZSgiLiIsIiIpLG09U3RyaW5nLGc9ZS5kb2N1bWVudCx5PWcuZG9jdW1lbnRFbGVtZW50LGI9MCx3PTAsRT1bXS5wb3AsUz1bXS5wdXNoLHg9W10uc2xpY2UsVD1bXS5pbmRleE9mfHxmdW5jdGlvbihlKXt2YXIgdD0wLG49dGhpcy5sZW5ndGg7Zm9yKDt0PG47dCsrKWlmKHRoaXNbdF09PT1lKXJldHVybiB0O3JldHVybi0xfSxOPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGVbZF09dD09bnVsbHx8dCxlfSxDPWZ1bmN0aW9uKCl7dmFyIGU9e30sdD1bXTtyZXR1cm4gTihmdW5jdGlvbihuLHIpe3JldHVybiB0LnB1c2gobik+aS5jYWNoZUxlbmd0aCYmZGVsZXRlIGVbdC5zaGlmdCgpXSxlW24rIiAiXT1yfSxlKX0saz1DKCksTD1DKCksQT1DKCksTz0iW1xceDIwXFx0XFxyXFxuXFxmXSIsTT0iKD86XFxcXC58Wy1cXHddfFteXFx4MDAtXFx4YTBdKSsiLF89TS5yZXBsYWNlKCJ3IiwidyMiKSxEPSIoWypeJHwhfl0/PSkiLFA9IlxcWyIrTysiKigiK00rIikiK08rIiooPzoiK0QrTysiKig/OihbJ1wiXSkoKD86XFxcXC58W15cXFxcXSkqPylcXDN8KCIrXysiKXwpfCkiK08rIipcXF0iLEg9IjooIitNKyIpKD86XFwoKD86KFsnXCJdKSgoPzpcXFxcLnxbXlxcXFxdKSo/KVxcMnwoW14oKVtcXF1dKnwoPzooPzoiK1ArIil8W146XXxcXFxcLikqfC4qKSlcXCl8KSIsQj0iOihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiK08rIiooKD86LVxcZCk/XFxkKikiK08rIipcXCl8KSg/PVteLV18JCkiLGo9bmV3IFJlZ0V4cCgiXiIrTysiK3woKD86XnxbXlxcXFxdKSg/OlxcXFwuKSopIitPKyIrJCIsImciKSxGPW5ldyBSZWdFeHAoIl4iK08rIiosIitPKyIqIiksST1uZXcgUmVnRXhwKCJeIitPKyIqKFtcXHgyMFxcdFxcclxcblxcZj4rfl0pIitPKyIqIikscT1uZXcgUmVnRXhwKEgpLFI9L14oPzojKFtcd1wtXSspfChcdyspfFwuKFtcd1wtXSspKSQvLFU9L146bm90Lyx6PS9bXHgyMFx0XHJcblxmXSpbK35dLyxXPS86bm90XCgkLyxYPS9oXGQvaSxWPS9pbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uL2ksJD0vXFwoPyFcXCkvZyxKPXtJRDpuZXcgUmVnRXhwKCJeIygiK00rIikiKSxDTEFTUzpuZXcgUmVnRXhwKCJeXFwuKCIrTSsiKSIpLE5BTUU6bmV3IFJlZ0V4cCgiXlxcW25hbWU9WydcIl0/KCIrTSsiKVsnXCJdP1xcXSIpLFRBRzpuZXcgUmVnRXhwKCJeKCIrTS5yZXBsYWNlKCJ3IiwidyoiKSsiKSIpLEFUVFI6bmV3IFJlZ0V4cCgiXiIrUCksUFNFVURPOm5ldyBSZWdFeHAoIl4iK0gpLFBPUzpuZXcgUmVnRXhwKEIsImkiKSxDSElMRDpuZXcgUmVnRXhwKCJeOihvbmx5fG50aHxmaXJzdHxsYXN0KS1jaGlsZCg/OlxcKCIrTysiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIrTysiKig/OihbKy1dfCkiK08rIiooXFxkKyl8KSkiK08rIipcXCl8KSIsImkiKSxuZWVkc0NvbnRleHQ6bmV3IFJlZ0V4cCgiXiIrTysiKls+K35dfCIrQiwiaSIpfSxLPWZ1bmN0aW9uKGUpe3ZhciB0PWcuY3JlYXRlRWxlbWVudCgiZGl2Iik7dHJ5e3JldHVybiBlKHQpfWNhdGNoKG4pe3JldHVybiExfWZpbmFsbHl7dD1udWxsfX0sUT1LKGZ1bmN0aW9uKGUpe3JldHVybiBlLmFwcGVuZENoaWxkKGcuY3JlYXRlQ29tbWVudCgiIikpLCFlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksRz1LKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsZS5maXJzdENoaWxkJiZ0eXBlb2YgZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSE9PXAmJmUuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImhyZWYiKT09PSIjIn0pLFk9SyhmdW5jdGlvbihlKXtlLmlubmVySFRNTD0iPHNlbGVjdD48L3NlbGVjdD4iO3ZhciB0PXR5cGVvZiBlLmxhc3RDaGlsZC5nZXRBdHRyaWJ1dGUoIm11bHRpcGxlIik7cmV0dXJuIHQhPT0iYm9vbGVhbiImJnQhPT0ic3RyaW5nIn0pLFo9SyhmdW5jdGlvbihlKXtyZXR1cm4gZS5pbm5lckhUTUw9IjxkaXYgY2xhc3M9J2hpZGRlbiBlJz48L2Rpdj48ZGl2IGNsYXNzPSdoaWRkZW4nPjwvZGl2PiIsIWUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZXx8IWUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiZSIpLmxlbmd0aD8hMTooZS5sYXN0Q2hpbGQuY2xhc3NOYW1lPSJlIixlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImUiKS5sZW5ndGg9PT0yKX0pLGV0PUsoZnVuY3Rpb24oZSl7ZS5pZD1kKzAsZS5pbm5lckhUTUw9IjxhIG5hbWU9JyIrZCsiJz48L2E+PGRpdiBuYW1lPSciK2QrIic+PC9kaXY+Iix5Lmluc2VydEJlZm9yZShlLHkuZmlyc3RDaGlsZCk7dmFyIHQ9Zy5nZXRFbGVtZW50c0J5TmFtZSYmZy5nZXRFbGVtZW50c0J5TmFtZShkKS5sZW5ndGg9PT0yK2cuZ2V0RWxlbWVudHNCeU5hbWUoZCswKS5sZW5ndGg7cmV0dXJuIHI9IWcuZ2V0RWxlbWVudEJ5SWQoZCkseS5yZW1vdmVDaGlsZChlKSx0fSk7dHJ5e3guY2FsbCh5LmNoaWxkTm9kZXMsMClbMF0ubm9kZVR5cGV9Y2F0Y2godHQpe3g9ZnVuY3Rpb24oZSl7dmFyIHQsbj1bXTtmb3IoO3Q9dGhpc1tlXTtlKyspbi5wdXNoKHQpO3JldHVybiBufX1udC5tYXRjaGVzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG50KGUsbnVsbCxudWxsLHQpfSxudC5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnQodCxudWxsLG51bGwsW2VdKS5sZW5ndGg+MH0scz1udC5nZXRUZXh0PWZ1bmN0aW9uKGUpe3ZhciB0LG49IiIscj0wLGk9ZS5ub2RlVHlwZTtpZihpKXtpZihpPT09MXx8aT09PTl8fGk9PT0xMSl7aWYodHlwZW9mIGUudGV4dENvbnRlbnQ9PSJzdHJpbmciKXJldHVybiBlLnRleHRDb250ZW50O2ZvcihlPWUuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyluKz1zKGUpfWVsc2UgaWYoaT09PTN8fGk9PT00KXJldHVybiBlLm5vZGVWYWx1ZX1lbHNlIGZvcig7dD1lW3JdO3IrKyluKz1zKHQpO3JldHVybiBufSxvPW50LmlzWE1MPWZ1bmN0aW9uKGUpe3ZhciB0PWUmJihlLm93bmVyRG9jdW1lbnR8fGUpLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gdD90Lm5vZGVOYW1lIT09IkhUTUwiOiExfSx1PW50LmNvbnRhaW5zPXkuY29udGFpbnM/ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLm5vZGVUeXBlPT09OT9lLmRvY3VtZW50RWxlbWVudDplLHI9dCYmdC5wYXJlbnROb2RlO3JldHVybiBlPT09cnx8ISEociYmci5ub2RlVHlwZT09PTEmJm4uY29udGFpbnMmJm4uY29udGFpbnMocikpfTp5LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uP2Z1bmN0aW9uKGUsdCl7cmV0dXJuIHQmJiEhKGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24odCkmMTYpfTpmdW5jdGlvbihlLHQpe3doaWxlKHQ9dC5wYXJlbnROb2RlKWlmKHQ9PT1lKXJldHVybiEwO3JldHVybiExfSxudC5hdHRyPWZ1bmN0aW9uKGUsdCl7dmFyIG4scj1vKGUpO3JldHVybiByfHwodD10LnRvTG93ZXJDYXNlKCkpLChuPWkuYXR0ckhhbmRsZVt0XSk/bihlKTpyfHxZP2UuZ2V0QXR0cmlidXRlKHQpOihuPWUuZ2V0QXR0cmlidXRlTm9kZSh0KSxuP3R5cGVvZiBlW3RdPT0iYm9vbGVhbiI/ZVt0XT90Om51bGw6bi5zcGVjaWZpZWQ/bi52YWx1ZTpudWxsOm51bGwpfSxpPW50LnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOk4sbWF0Y2g6SixhdHRySGFuZGxlOkc/e306e2hyZWY6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKCJocmVmIiwyKX0sdHlwZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUoInR5cGUiKX19LGZpbmQ6e0lEOnI/ZnVuY3Rpb24oZSx0LG4pe2lmKHR5cGVvZiB0LmdldEVsZW1lbnRCeUlkIT09cCYmIW4pe3ZhciByPXQuZ2V0RWxlbWVudEJ5SWQoZSk7cmV0dXJuIHImJnIucGFyZW50Tm9kZT9bcl06W119fTpmdW5jdGlvbihlLG4scil7aWYodHlwZW9mIG4uZ2V0RWxlbWVudEJ5SWQhPT1wJiYhcil7dmFyIGk9bi5nZXRFbGVtZW50QnlJZChlKTtyZXR1cm4gaT9pLmlkPT09ZXx8dHlwZW9mIGkuZ2V0QXR0cmlidXRlTm9kZSE9PXAmJmkuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKS52YWx1ZT09PWU/W2ldOnQ6W119fSxUQUc6UT9mdW5jdGlvbihlLHQpe2lmKHR5cGVvZiB0LmdldEVsZW1lbnRzQnlUYWdOYW1lIT09cClyZXR1cm4gdC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKX06ZnVuY3Rpb24oZSx0KXt2YXIgbj10LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpO2lmKGU9PT0iKiIpe3ZhciByLGk9W10scz0wO2Zvcig7cj1uW3NdO3MrKylyLm5vZGVUeXBlPT09MSYmaS5wdXNoKHIpO3JldHVybiBpfXJldHVybiBufSxOQU1FOmV0JiZmdW5jdGlvbihlLHQpe2lmKHR5cGVvZiB0LmdldEVsZW1lbnRzQnlOYW1lIT09cClyZXR1cm4gdC5nZXRFbGVtZW50c0J5TmFtZShuYW1lKX0sQ0xBU1M6WiYmZnVuY3Rpb24oZSx0LG4pe2lmKHR5cGVvZiB0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUhPT1wJiYhbilyZXR1cm4gdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGUpfX0scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS5yZXBsYWNlKCQsIiIpLGVbM109KGVbNF18fGVbNV18fCIiKS5yZXBsYWNlKCQsIiIpLGVbMl09PT0ifj0iJiYoZVszXT0iICIrZVszXSsiICIpLGUuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS50b0xvd2VyQ2FzZSgpLGVbMV09PT0ibnRoIj8oZVsyXXx8bnQuZXJyb3IoZVswXSksZVszXT0rKGVbM10/ZVs0XSsoZVs1XXx8MSk6MiooZVsyXT09PSJldmVuInx8ZVsyXT09PSJvZGQiKSksZVs0XT0rKGVbNl0rZVs3XXx8ZVsyXT09PSJvZGQiKSk6ZVsyXSYmbnQuZXJyb3IoZVswXSksZX0sUFNFVURPOmZ1bmN0aW9uKGUpe3ZhciB0LG47aWYoSi5DSElMRC50ZXN0KGVbMF0pKXJldHVybiBudWxsO2lmKGVbM10pZVsyXT1lWzNdO2Vsc2UgaWYodD1lWzRdKXEudGVzdCh0KSYmKG49dXQodCwhMCkpJiYobj10LmluZGV4T2YoIikiLHQubGVuZ3RoLW4pLXQubGVuZ3RoKSYmKHQ9dC5zbGljZSgwLG4pLGVbMF09ZVswXS5zbGljZSgwLG4pKSxlWzJdPXQ7cmV0dXJuIGUuc2xpY2UoMCwzKX19LGZpbHRlcjp7SUQ6cj9mdW5jdGlvbihlKXtyZXR1cm4gZT1lLnJlcGxhY2UoJCwiIiksZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2V0QXR0cmlidXRlKCJpZCIpPT09ZX19OmZ1bmN0aW9uKGUpe3JldHVybiBlPWUucmVwbGFjZSgkLCIiKSxmdW5jdGlvbih0KXt2YXIgbj10eXBlb2YgdC5nZXRBdHRyaWJ1dGVOb2RlIT09cCYmdC5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiBuJiZuLnZhbHVlPT09ZX19LFRBRzpmdW5jdGlvbihlKXtyZXR1cm4gZT09PSIqIj9mdW5jdGlvbigpe3JldHVybiEwfTooZT1lLnJlcGxhY2UoJCwiIikudG9Mb3dlckNhc2UoKSxmdW5jdGlvbih0KXtyZXR1cm4gdC5ub2RlTmFtZSYmdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09ZX0pfSxDTEFTUzpmdW5jdGlvbihlKXt2YXIgdD1rW2RdW2UrIiAiXTtyZXR1cm4gdHx8KHQ9bmV3IFJlZ0V4cCgiKF58IitPKyIpIitlKyIoIitPKyJ8JCkiKSkmJmsoZSxmdW5jdGlvbihlKXtyZXR1cm4gdC50ZXN0KGUuY2xhc3NOYW1lfHx0eXBlb2YgZS5nZXRBdHRyaWJ1dGUhPT1wJiZlLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpfSl9LEFUVFI6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBmdW5jdGlvbihyLGkpe3ZhciBzPW50LmF0dHIocixlKTtyZXR1cm4gcz09bnVsbD90PT09IiE9Ijp0PyhzKz0iIix0PT09Ij0iP3M9PT1uOnQ9PT0iIT0iP3MhPT1uOnQ9PT0iXj0iP24mJnMuaW5kZXhPZihuKT09PTA6dD09PSIqPSI/biYmcy5pbmRleE9mKG4pPi0xOnQ9PT0iJD0iP24mJnMuc3Vic3RyKHMubGVuZ3RoLW4ubGVuZ3RoKT09PW46dD09PSJ+PSI/KCIgIitzKyIgIikuaW5kZXhPZihuKT4tMTp0PT09Inw9Ij9zPT09bnx8cy5zdWJzdHIoMCxuLmxlbmd0aCsxKT09PW4rIi0iOiExKTohMH19LENISUxEOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBlPT09Im50aCI/ZnVuY3Rpb24oZSl7dmFyIHQsaSxzPWUucGFyZW50Tm9kZTtpZihuPT09MSYmcj09PTApcmV0dXJuITA7aWYocyl7aT0wO2Zvcih0PXMuZmlyc3RDaGlsZDt0O3Q9dC5uZXh0U2libGluZylpZih0Lm5vZGVUeXBlPT09MSl7aSsrO2lmKGU9PT10KWJyZWFrfX1yZXR1cm4gaS09cixpPT09bnx8aSVuPT09MCYmaS9uPj0wfTpmdW5jdGlvbih0KXt2YXIgbj10O3N3aXRjaChlKXtjYXNlIm9ubHkiOmNhc2UiZmlyc3QiOndoaWxlKG49bi5wcmV2aW91c1NpYmxpbmcpaWYobi5ub2RlVHlwZT09PTEpcmV0dXJuITE7aWYoZT09PSJmaXJzdCIpcmV0dXJuITA7bj10O2Nhc2UibGFzdCI6d2hpbGUobj1uLm5leHRTaWJsaW5nKWlmKG4ubm9kZVR5cGU9PT0xKXJldHVybiExO3JldHVybiEwfX19LFBTRVVETzpmdW5jdGlvbihlLHQpe3ZhciBuLHI9aS5wc2V1ZG9zW2VdfHxpLnNldEZpbHRlcnNbZS50b0xvd2VyQ2FzZSgpXXx8bnQuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIitlKTtyZXR1cm4gcltkXT9yKHQpOnIubGVuZ3RoPjE/KG49W2UsZSwiIix0XSxpLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoZS50b0xvd2VyQ2FzZSgpKT9OKGZ1bmN0aW9uKGUsbil7dmFyIGkscz1yKGUsdCksbz1zLmxlbmd0aDt3aGlsZShvLS0paT1ULmNhbGwoZSxzW29dKSxlW2ldPSEobltpXT1zW29dKX0pOmZ1bmN0aW9uKGUpe3JldHVybiByKGUsMCxuKX0pOnJ9fSxwc2V1ZG9zOntub3Q6TihmdW5jdGlvbihlKXt2YXIgdD1bXSxuPVtdLHI9YShlLnJlcGxhY2UoaiwiJDEiKSk7cmV0dXJuIHJbZF0/TihmdW5jdGlvbihlLHQsbixpKXt2YXIgcyxvPXIoZSxudWxsLGksW10pLHU9ZS5sZW5ndGg7d2hpbGUodS0tKWlmKHM9b1t1XSllW3VdPSEodFt1XT1zKX0pOmZ1bmN0aW9uKGUsaSxzKXtyZXR1cm4gdFswXT1lLHIodCxudWxsLHMsbiksIW4ucG9wKCl9fSksaGFzOk4oZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBudChlLHQpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOk4oZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybih0LnRleHRDb250ZW50fHx0LmlubmVyVGV4dHx8cyh0KSkuaW5kZXhPZihlKT4tMX19KSxlbmFibGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLmRpc2FibGVkPT09ITF9LGRpc2FibGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLmRpc2FibGVkPT09ITB9LGNoZWNrZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiB0PT09ImlucHV0IiYmISFlLmNoZWNrZWR8fHQ9PT0ib3B0aW9uIiYmISFlLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5wYXJlbnROb2RlJiZlLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxlLnNlbGVjdGVkPT09ITB9LHBhcmVudDpmdW5jdGlvbihlKXtyZXR1cm4haS5wc2V1ZG9zLmVtcHR5KGUpfSxlbXB0eTpmdW5jdGlvbihlKXt2YXIgdDtlPWUuZmlyc3RDaGlsZDt3aGlsZShlKXtpZihlLm5vZGVOYW1lPiJAInx8KHQ9ZS5ub2RlVHlwZSk9PT0zfHx0PT09NClyZXR1cm4hMTtlPWUubmV4dFNpYmxpbmd9cmV0dXJuITB9LGhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gWC50ZXN0KGUubm9kZU5hbWUpfSx0ZXh0OmZ1bmN0aW9uKGUpe3ZhciB0LG47cmV0dXJuIGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PSJpbnB1dCImJih0PWUudHlwZSk9PT0idGV4dCImJigobj1lLmdldEF0dHJpYnV0ZSgidHlwZSIpKT09bnVsbHx8bi50b0xvd2VyQ2FzZSgpPT09dCl9LHJhZGlvOnJ0KCJyYWRpbyIpLGNoZWNrYm94OnJ0KCJjaGVja2JveCIpLGZpbGU6cnQoImZpbGUiKSxwYXNzd29yZDpydCgicGFzc3dvcmQiKSxpbWFnZTpydCgiaW1hZ2UiKSxzdWJtaXQ6aXQoInN1Ym1pdCIpLHJlc2V0Oml0KCJyZXNldCIpLGJ1dHRvbjpmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIHQ9PT0iaW5wdXQiJiZlLnR5cGU9PT0iYnV0dG9uInx8dD09PSJidXR0b24ifSxpbnB1dDpmdW5jdGlvbihlKXtyZXR1cm4gVi50ZXN0KGUubm9kZU5hbWUpfSxmb2N1czpmdW5jdGlvbihlKXt2YXIgdD1lLm93bmVyRG9jdW1lbnQ7cmV0dXJuIGU9PT10LmFjdGl2ZUVsZW1lbnQmJighdC5oYXNGb2N1c3x8dC5oYXNGb2N1cygpKSYmISEoZS50eXBlfHxlLmhyZWZ8fH5lLnRhYkluZGV4KX0sYWN0aXZlOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09ZS5vd25lckRvY3VtZW50LmFjdGl2ZUVsZW1lbnR9LGZpcnN0OnN0KGZ1bmN0aW9uKCl7cmV0dXJuWzBdfSksbGFzdDpzdChmdW5jdGlvbihlLHQpe3JldHVyblt0LTFdfSksZXE6c3QoZnVuY3Rpb24oZSx0LG4pe3JldHVybltuPDA/bit0Om5dfSksZXZlbjpzdChmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wO248dDtuKz0yKWUucHVzaChuKTtyZXR1cm4gZX0pLG9kZDpzdChmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0xO248dDtuKz0yKWUucHVzaChuKTtyZXR1cm4gZX0pLGx0OnN0KGZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9bjwwP24rdDpuOy0tcj49MDspZS5wdXNoKHIpO3JldHVybiBlfSksZ3Q6c3QoZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1uPDA/bit0Om47KytyPHQ7KWUucHVzaChyKTtyZXR1cm4gZX0pfX0sZj15LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uP2Z1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PyhsPSEwLDApOighZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbnx8IXQuY29tcGFyZURvY3VtZW50UG9zaXRpb24/ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjplLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHQpJjQpPy0xOjF9OmZ1bmN0aW9uKGUsdCl7aWYoZT09PXQpcmV0dXJuIGw9ITAsMDtpZihlLnNvdXJjZUluZGV4JiZ0LnNvdXJjZUluZGV4KXJldHVybiBlLnNvdXJjZUluZGV4LXQuc291cmNlSW5kZXg7dmFyIG4scixpPVtdLHM9W10sbz1lLnBhcmVudE5vZGUsdT10LnBhcmVudE5vZGUsYT1vO2lmKG89PT11KXJldHVybiBvdChlLHQpO2lmKCFvKXJldHVybi0xO2lmKCF1KXJldHVybiAxO3doaWxlKGEpaS51bnNoaWZ0KGEpLGE9YS5wYXJlbnROb2RlO2E9dTt3aGlsZShhKXMudW5zaGlmdChhKSxhPWEucGFyZW50Tm9kZTtuPWkubGVuZ3RoLHI9cy5sZW5ndGg7Zm9yKHZhciBmPTA7ZjxuJiZmPHI7ZisrKWlmKGlbZl0hPT1zW2ZdKXJldHVybiBvdChpW2ZdLHNbZl0pO3JldHVybiBmPT09bj9vdChlLHNbZl0sLTEpOm90KGlbZl0sdCwxKX0sWzAsMF0uc29ydChmKSxoPSFsLG50LnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj1bXSxyPTEsaT0wO2w9aCxlLnNvcnQoZik7aWYobCl7Zm9yKDt0PWVbcl07cisrKXQ9PT1lW3ItMV0mJihpPW4ucHVzaChyKSk7d2hpbGUoaS0tKWUuc3BsaWNlKG5baV0sMSl9cmV0dXJuIGV9LG50LmVycm9yPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIitlKX0sYT1udC5jb21waWxlPWZ1bmN0aW9uKGUsdCl7dmFyIG4scj1bXSxpPVtdLHM9QVtkXVtlKyIgIl07aWYoIXMpe3R8fCh0PXV0KGUpKSxuPXQubGVuZ3RoO3doaWxlKG4tLSlzPWh0KHRbbl0pLHNbZF0/ci5wdXNoKHMpOmkucHVzaChzKTtzPUEoZSxwdChpLHIpKX1yZXR1cm4gc30sZy5xdWVyeVNlbGVjdG9yQWxsJiZmdW5jdGlvbigpe3ZhciBlLHQ9dnQsbj0vJ3xcXC9nLHI9L1w9W1x4MjBcdFxyXG5cZl0qKFteJyJcXV0qKVtceDIwXHRcclxuXGZdKlxdL2csaT1bIjpmb2N1cyJdLHM9WyI6YWN0aXZlIl0sdT15Lm1hdGNoZXNTZWxlY3Rvcnx8eS5tb3pNYXRjaGVzU2VsZWN0b3J8fHkud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHx5Lm9NYXRjaGVzU2VsZWN0b3J8fHkubXNNYXRjaGVzU2VsZWN0b3I7SyhmdW5jdGlvbihlKXtlLmlubmVySFRNTD0iPHNlbGVjdD48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PiIsZS5xdWVyeVNlbGVjdG9yQWxsKCJbc2VsZWN0ZWRdIikubGVuZ3RofHxpLnB1c2goIlxcWyIrTysiKig/OmNoZWNrZWR8ZGlzYWJsZWR8aXNtYXB8bXVsdGlwbGV8cmVhZG9ubHl8c2VsZWN0ZWR8dmFsdWUpIiksZS5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aHx8aS5wdXNoKCI6Y2hlY2tlZCIpfSksSyhmdW5jdGlvbihlKXtlLmlubmVySFRNTD0iPHAgdGVzdD0nJz48L3A+IixlLnF1ZXJ5U2VsZWN0b3JBbGwoIlt0ZXN0Xj0nJ10iKS5sZW5ndGgmJmkucHVzaCgiWypeJF09IitPKyIqKD86XCJcInwnJykiKSxlLmlubmVySFRNTD0iPGlucHV0IHR5cGU9J2hpZGRlbicvPiIsZS5xdWVyeVNlbGVjdG9yQWxsKCI6ZW5hYmxlZCIpLmxlbmd0aHx8aS5wdXNoKCI6ZW5hYmxlZCIsIjpkaXNhYmxlZCIpfSksaT1uZXcgUmVnRXhwKGkuam9pbigifCIpKSx2dD1mdW5jdGlvbihlLHIscyxvLHUpe2lmKCFvJiYhdSYmIWkudGVzdChlKSl7dmFyIGEsZixsPSEwLGM9ZCxoPXIscD1yLm5vZGVUeXBlPT09OSYmZTtpZihyLm5vZGVUeXBlPT09MSYmci5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09Im9iamVjdCIpe2E9dXQoZSksKGw9ci5nZXRBdHRyaWJ1dGUoImlkIikpP2M9bC5yZXBsYWNlKG4sIlxcJCYiKTpyLnNldEF0dHJpYnV0ZSgiaWQiLGMpLGM9IltpZD0nIitjKyInXSAiLGY9YS5sZW5ndGg7d2hpbGUoZi0tKWFbZl09YythW2ZdLmpvaW4oIiIpO2g9ei50ZXN0KGUpJiZyLnBhcmVudE5vZGV8fHIscD1hLmpvaW4oIiwiKX1pZihwKXRyeXtyZXR1cm4gUy5hcHBseShzLHguY2FsbChoLnF1ZXJ5U2VsZWN0b3JBbGwocCksMCkpLHN9Y2F0Y2godil7fWZpbmFsbHl7bHx8ci5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fXJldHVybiB0KGUscixzLG8sdSl9LHUmJihLKGZ1bmN0aW9uKHQpe2U9dS5jYWxsKHQsImRpdiIpO3RyeXt1LmNhbGwodCwiW3Rlc3QhPScnXTpzaXp6bGUiKSxzLnB1c2goIiE9IixIKX1jYXRjaChuKXt9fSkscz1uZXcgUmVnRXhwKHMuam9pbigifCIpKSxudC5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24odCxuKXtuPW4ucmVwbGFjZShyLCI9JyQxJ10iKTtpZighbyh0KSYmIXMudGVzdChuKSYmIWkudGVzdChuKSl0cnl7dmFyIGE9dS5jYWxsKHQsbik7aWYoYXx8ZXx8dC5kb2N1bWVudCYmdC5kb2N1bWVudC5ub2RlVHlwZSE9PTExKXJldHVybiBhfWNhdGNoKGYpe31yZXR1cm4gbnQobixudWxsLG51bGwsW3RdKS5sZW5ndGg+MH0pfSgpLGkucHNldWRvcy5udGg9aS5wc2V1ZG9zLmVxLGkuZmlsdGVycz1tdC5wcm90b3R5cGU9aS5wc2V1ZG9zLGkuc2V0RmlsdGVycz1uZXcgbXQsbnQuYXR0cj12LmF0dHIsdi5maW5kPW50LHYuZXhwcj1udC5zZWxlY3RvcnMsdi5leHByWyI6Il09di5leHByLnBzZXVkb3Msdi51bmlxdWU9bnQudW5pcXVlU29ydCx2LnRleHQ9bnQuZ2V0VGV4dCx2LmlzWE1MRG9jPW50LmlzWE1MLHYuY29udGFpbnM9bnQuY29udGFpbnN9KGUpO3ZhciBudD0vVW50aWwkLyxydD0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxpdD0vXi5bXjojXFtcLixdKiQvLHN0PXYuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQsb3Q9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07di5mbi5leHRlbmQoe2ZpbmQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGkscyxvLHU9dGhpcztpZih0eXBlb2YgZSE9InN0cmluZyIpcmV0dXJuIHYoZSkuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHQ9MCxuPXUubGVuZ3RoO3Q8bjt0KyspaWYodi5jb250YWlucyh1W3RdLHRoaXMpKXJldHVybiEwfSk7bz10aGlzLnB1c2hTdGFjaygiIiwiZmluZCIsZSk7Zm9yKHQ9MCxuPXRoaXMubGVuZ3RoO3Q8bjt0Kyspe3I9by5sZW5ndGgsdi5maW5kKGUsdGhpc1t0XSxvKTtpZih0PjApZm9yKGk9cjtpPG8ubGVuZ3RoO2krKylmb3Iocz0wO3M8cjtzKyspaWYob1tzXT09PW9baV0pe28uc3BsaWNlKGktLSwxKTticmVha319cmV0dXJuIG99LGhhczpmdW5jdGlvbihlKXt2YXIgdCxuPXYoZSx0aGlzKSxyPW4ubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih0PTA7dDxyO3QrKylpZih2LmNvbnRhaW5zKHRoaXMsblt0XSkpcmV0dXJuITB9KX0sbm90OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhmdCh0aGlzLGUsITEpLCJub3QiLGUpfSxmaWx0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGZ0KHRoaXMsZSwhMCksImZpbHRlciIsZSl9LGlzOmZ1bmN0aW9uKGUpe3JldHVybiEhZSYmKHR5cGVvZiBlPT0ic3RyaW5nIj9zdC50ZXN0KGUpP3YoZSx0aGlzLmNvbnRleHQpLmluZGV4KHRoaXNbMF0pPj0wOnYuZmlsdGVyKGUsdGhpcykubGVuZ3RoPjA6dGhpcy5maWx0ZXIoZSkubGVuZ3RoPjApfSxjbG9zZXN0OmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0wLGk9dGhpcy5sZW5ndGgscz1bXSxvPXN0LnRlc3QoZSl8fHR5cGVvZiBlIT0ic3RyaW5nIj92KGUsdHx8dGhpcy5jb250ZXh0KTowO2Zvcig7cjxpO3IrKyl7bj10aGlzW3JdO3doaWxlKG4mJm4ub3duZXJEb2N1bWVudCYmbiE9PXQmJm4ubm9kZVR5cGUhPT0xMSl7aWYobz9vLmluZGV4KG4pPi0xOnYuZmluZC5tYXRjaGVzU2VsZWN0b3IobixlKSl7cy5wdXNoKG4pO2JyZWFrfW49bi5wYXJlbnROb2RlfX1yZXR1cm4gcz1zLmxlbmd0aD4xP3YudW5pcXVlKHMpOnMsdGhpcy5wdXNoU3RhY2socywiY2xvc2VzdCIsZSl9LGluZGV4OmZ1bmN0aW9uKGUpe3JldHVybiBlP3R5cGVvZiBlPT0ic3RyaW5nIj92LmluQXJyYXkodGhpc1swXSx2KGUpKTp2LmluQXJyYXkoZS5qcXVlcnk/ZVswXTplLHRoaXMpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihlLHQpe3ZhciBuPXR5cGVvZiBlPT0ic3RyaW5nIj92KGUsdCk6di5tYWtlQXJyYXkoZSYmZS5ub2RlVHlwZT9bZV06ZSkscj12Lm1lcmdlKHRoaXMuZ2V0KCksbik7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHV0KG5bMF0pfHx1dChyWzBdKT9yOnYudW5pcXVlKHIpKX0sYWRkQmFjazpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hZGQoZT09bnVsbD90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihlKSl9fSksdi5mbi5hbmRTZWxmPXYuZm4uYWRkQmFjayx2LmVhY2goe3BhcmVudDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJnQubm9kZVR5cGUhPT0xMT90Om51bGx9LHBhcmVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIHYuZGlyKGUsInBhcmVudE5vZGUiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdi5kaXIoZSwicGFyZW50Tm9kZSIsbil9LG5leHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGF0KGUsIm5leHRTaWJsaW5nIil9LHByZXY6ZnVuY3Rpb24oZSl7cmV0dXJuIGF0KGUsInByZXZpb3VzU2libGluZyIpfSxuZXh0QWxsOmZ1bmN0aW9uKGUpe3JldHVybiB2LmRpcihlLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGUpe3JldHVybiB2LmRpcihlLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdi5kaXIoZSwibmV4dFNpYmxpbmciLG4pfSxwcmV2VW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2LmRpcihlLCJwcmV2aW91c1NpYmxpbmciLG4pfSxzaWJsaW5nczpmdW5jdGlvbihlKXtyZXR1cm4gdi5zaWJsaW5nKChlLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGUpfSxjaGlsZHJlbjpmdW5jdGlvbihlKXtyZXR1cm4gdi5zaWJsaW5nKGUuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGUpe3JldHVybiB2Lm5vZGVOYW1lKGUsImlmcmFtZSIpP2UuY29udGVudERvY3VtZW50fHxlLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ6di5tZXJnZShbXSxlLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24oZSx0KXt2LmZuW2VdPWZ1bmN0aW9uKG4scil7dmFyIGk9di5tYXAodGhpcyx0LG4pO3JldHVybiBudC50ZXN0KGUpfHwocj1uKSxyJiZ0eXBlb2Ygcj09InN0cmluZyImJihpPXYuZmlsdGVyKHIsaSkpLGk9dGhpcy5sZW5ndGg+MSYmIW90W2VdP3YudW5pcXVlKGkpOmksdGhpcy5sZW5ndGg+MSYmcnQudGVzdChlKSYmKGk9aS5yZXZlcnNlKCkpLHRoaXMucHVzaFN0YWNrKGksZSxsLmNhbGwoYXJndW1lbnRzKS5qb2luKCIsIikpfX0pLHYuZXh0ZW5kKHtmaWx0ZXI6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBuJiYoZT0iOm5vdCgiK2UrIikiKSx0Lmxlbmd0aD09PTE/di5maW5kLm1hdGNoZXNTZWxlY3Rvcih0WzBdLGUpP1t0WzBdXTpbXTp2LmZpbmQubWF0Y2hlcyhlLHQpfSxkaXI6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpPVtdLHM9ZVtuXTt3aGlsZShzJiZzLm5vZGVUeXBlIT09OSYmKHI9PT10fHxzLm5vZGVUeXBlIT09MXx8IXYocykuaXMocikpKXMubm9kZVR5cGU9PT0xJiZpLnB1c2gocykscz1zW25dO3JldHVybiBpfSxzaWJsaW5nOmZ1bmN0aW9uKGUsdCl7dmFyIG49W107Zm9yKDtlO2U9ZS5uZXh0U2libGluZyllLm5vZGVUeXBlPT09MSYmZSE9PXQmJm4ucHVzaChlKTtyZXR1cm4gbn19KTt2YXIgY3Q9ImFiYnJ8YXJ0aWNsZXxhc2lkZXxhdWRpb3xiZGl8Y2FudmFzfGRhdGF8ZGF0YWxpc3R8ZGV0YWlsc3xmaWdjYXB0aW9ufGZpZ3VyZXxmb290ZXJ8aGVhZGVyfGhncm91cHxtYXJrfG1ldGVyfG5hdnxvdXRwdXR8cHJvZ3Jlc3N8c2VjdGlvbnxzdW1tYXJ5fHRpbWV8dmlkZW8iLGh0PS8galF1ZXJ5XGQrPSIoPzpudWxsfFxkKykiL2cscHQ9L15ccysvLGR0PS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzpdKylbXj5dKilcLz4vZ2ksdnQ9LzwoW1x3Ol0rKS8sbXQ9Lzx0Ym9keS9pLGd0PS88fCYjP1x3KzsvLHl0PS88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksYnQ9LzwoPzpzY3JpcHR8b2JqZWN0fGVtYmVkfG9wdGlvbnxzdHlsZSkvaSx3dD1uZXcgUmVnRXhwKCI8KD86IitjdCsiKVtcXHMvPl0iLCJpIiksRXQ9L14oPzpjaGVja2JveHxyYWRpbykkLyxTdD0vY2hlY2tlZFxzKig/OltePV18PVxzKi5jaGVja2VkLikvaSx4dD0vXC8oamF2YXxlY21hKXNjcmlwdC9pLFR0PS9eXHMqPCEoPzpcW0NEQVRBXFt8XC1cLSl8W1xdXC1dezJ9PlxzKiQvZyxOdD17b3B0aW9uOlsxLCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+IiwiPC9zZWxlY3Q+Il0sbGVnZW5kOlsxLCI8ZmllbGRzZXQ+IiwiPC9maWVsZHNldD4iXSx0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sdHI6WzIsIjx0YWJsZT48dGJvZHk+IiwiPC90Ym9keT48L3RhYmxlPiJdLHRkOlszLCI8dGFibGU+PHRib2R5Pjx0cj4iLCI8L3RyPjwvdGJvZHk+PC90YWJsZT4iXSxjb2w6WzIsIjx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3RhYmxlPiJdLGFyZWE6WzEsIjxtYXA+IiwiPC9tYXA+Il0sX2RlZmF1bHQ6WzAsIiIsIiJdfSxDdD1sdChpKSxrdD1DdC5hcHBlbmRDaGlsZChpLmNyZWF0ZUVsZW1lbnQoImRpdiIpKTtOdC5vcHRncm91cD1OdC5vcHRpb24sTnQudGJvZHk9TnQudGZvb3Q9TnQuY29sZ3JvdXA9TnQuY2FwdGlvbj1OdC50aGVhZCxOdC50aD1OdC50ZCx2LnN1cHBvcnQuaHRtbFNlcmlhbGl6ZXx8KE50Ll9kZWZhdWx0PVsxLCJYPGRpdj4iLCI8L2Rpdj4iXSksdi5mbi5leHRlbmQoe3RleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHYuYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10P3YudGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuYXBwZW5kKCh0aGlzWzBdJiZ0aGlzWzBdLm93bmVyRG9jdW1lbnR8fGkpLmNyZWF0ZVRleHROb2RlKGUpKX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSx3cmFwQWxsOmZ1bmN0aW9uKGUpe2lmKHYuaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3YodGhpcykud3JhcEFsbChlLmNhbGwodGhpcyx0KSl9KTtpZih0aGlzWzBdKXt2YXIgdD12KGUsdGhpc1swXS5vd25lckRvY3VtZW50KS5lcSgwKS5jbG9uZSghMCk7dGhpc1swXS5wYXJlbnROb2RlJiZ0Lmluc2VydEJlZm9yZSh0aGlzWzBdKSx0Lm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXM7d2hpbGUoZS5maXJzdENoaWxkJiZlLmZpcnN0Q2hpbGQubm9kZVR5cGU9PT0xKWU9ZS5maXJzdENoaWxkO3JldHVybiBlfSkuYXBwZW5kKHRoaXMpfXJldHVybiB0aGlzfSx3cmFwSW5uZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHYuaXNGdW5jdGlvbihlKT90aGlzLmVhY2goZnVuY3Rpb24odCl7dih0aGlzKS53cmFwSW5uZXIoZS5jYWxsKHRoaXMsdCkpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9dih0aGlzKSxuPXQuY29udGVudHMoKTtuLmxlbmd0aD9uLndyYXBBbGwoZSk6dC5hcHBlbmQoZSl9KX0sd3JhcDpmdW5jdGlvbihlKXt2YXIgdD12LmlzRnVuY3Rpb24oZSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihuKXt2KHRoaXMpLndyYXBBbGwodD9lLmNhbGwodGhpcyxuKTplKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7di5ub2RlTmFtZSh0aGlzLCJib2R5Iil8fHYodGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLmVuZCgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsITAsZnVuY3Rpb24oZSl7KHRoaXMubm9kZVR5cGU9PT0xfHx0aGlzLm5vZGVUeXBlPT09MTEpJiZ0aGlzLmFwcGVuZENoaWxkKGUpfSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsITAsZnVuY3Rpb24oZSl7KHRoaXMubm9kZVR5cGU9PT0xfHx0aGlzLm5vZGVUeXBlPT09MTEpJiZ0aGlzLmluc2VydEJlZm9yZShlLHRoaXMuZmlyc3RDaGlsZCl9KX0sYmVmb3JlOmZ1bmN0aW9uKCl7aWYoIXV0KHRoaXNbMF0pKXJldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cywhMSxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcyl9KTtpZihhcmd1bWVudHMubGVuZ3RoKXt2YXIgZT12LmNsZWFuKGFyZ3VtZW50cyk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHYubWVyZ2UoZSx0aGlzKSwiYmVmb3JlIix0aGlzLnNlbGVjdG9yKX19LGFmdGVyOmZ1bmN0aW9uKCl7aWYoIXV0KHRoaXNbMF0pKXJldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cywhMSxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcy5uZXh0U2libGluZyl9KTtpZihhcmd1bWVudHMubGVuZ3RoKXt2YXIgZT12LmNsZWFuKGFyZ3VtZW50cyk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHYubWVyZ2UodGhpcyxlKSwiYWZ0ZXIiLHRoaXMuc2VsZWN0b3IpfX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0wO2Zvcig7KG49dGhpc1tyXSkhPW51bGw7cisrKWlmKCFlfHx2LmZpbHRlcihlLFtuXSkubGVuZ3RoKSF0JiZuLm5vZGVUeXBlPT09MSYmKHYuY2xlYW5EYXRhKG4uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSksdi5jbGVhbkRhdGEoW25dKSksbi5wYXJlbnROb2RlJiZuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobik7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7dmFyIGUsdD0wO2Zvcig7KGU9dGhpc1t0XSkhPW51bGw7dCsrKXtlLm5vZGVUeXBlPT09MSYmdi5jbGVhbkRhdGEoZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpKTt3aGlsZShlLmZpcnN0Q2hpbGQpZS5yZW1vdmVDaGlsZChlLmZpcnN0Q2hpbGQpfXJldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihlLHQpe3JldHVybiBlPWU9PW51bGw/ITE6ZSx0PXQ9PW51bGw/ZTp0LHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHYuY2xvbmUodGhpcyxlLHQpfSl9LGh0bWw6ZnVuY3Rpb24oZSl7cmV0dXJuIHYuYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSl7dmFyIG49dGhpc1swXXx8e30scj0wLGk9dGhpcy5sZW5ndGg7aWYoZT09PXQpcmV0dXJuIG4ubm9kZVR5cGU9PT0xP24uaW5uZXJIVE1MLnJlcGxhY2UoaHQsIiIpOnQ7aWYodHlwZW9mIGU9PSJzdHJpbmciJiYheXQudGVzdChlKSYmKHYuc3VwcG9ydC5odG1sU2VyaWFsaXplfHwhd3QudGVzdChlKSkmJih2LnN1cHBvcnQubGVhZGluZ1doaXRlc3BhY2V8fCFwdC50ZXN0KGUpKSYmIU50Wyh2dC5leGVjKGUpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7ZT1lLnJlcGxhY2UoZHQsIjwkMT48LyQyPiIpO3RyeXtmb3IoO3I8aTtyKyspbj10aGlzW3JdfHx7fSxuLm5vZGVUeXBlPT09MSYmKHYuY2xlYW5EYXRhKG4uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSksbi5pbm5lckhUTUw9ZSk7bj0wfWNhdGNoKHMpe319biYmdGhpcy5lbXB0eSgpLmFwcGVuZChlKX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbihlKXtyZXR1cm4gdXQodGhpc1swXSk/dGhpcy5sZW5ndGg/dGhpcy5wdXNoU3RhY2sodih2LmlzRnVuY3Rpb24oZSk/ZSgpOmUpLCJyZXBsYWNlV2l0aCIsZSk6dGhpczp2LmlzRnVuY3Rpb24oZSk/dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPXYodGhpcykscj1uLmh0bWwoKTtuLnJlcGxhY2VXaXRoKGUuY2FsbCh0aGlzLHQscikpfSk6KHR5cGVvZiBlIT0ic3RyaW5nIiYmKGU9dihlKS5kZXRhY2goKSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5uZXh0U2libGluZyxuPXRoaXMucGFyZW50Tm9kZTt2KHRoaXMpLnJlbW92ZSgpLHQ/dih0KS5iZWZvcmUoZSk6dihuKS5hcHBlbmQoZSl9KSl9LGRldGFjaDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZW1vdmUoZSwhMCl9LGRvbU1hbmlwOmZ1bmN0aW9uKGUsbixyKXtlPVtdLmNvbmNhdC5hcHBseShbXSxlKTt2YXIgaSxzLG8sdSxhPTAsZj1lWzBdLGw9W10sYz10aGlzLmxlbmd0aDtpZighdi5zdXBwb3J0LmNoZWNrQ2xvbmUmJmM+MSYmdHlwZW9mIGY9PSJzdHJpbmciJiZTdC50ZXN0KGYpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2KHRoaXMpLmRvbU1hbmlwKGUsbixyKX0pO2lmKHYuaXNGdW5jdGlvbihmKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpe3ZhciBzPXYodGhpcyk7ZVswXT1mLmNhbGwodGhpcyxpLG4/cy5odG1sKCk6dCkscy5kb21NYW5pcChlLG4scil9KTtpZih0aGlzWzBdKXtpPXYuYnVpbGRGcmFnbWVudChlLHRoaXMsbCksbz1pLmZyYWdtZW50LHM9by5maXJzdENoaWxkLG8uY2hpbGROb2Rlcy5sZW5ndGg9PT0xJiYobz1zKTtpZihzKXtuPW4mJnYubm9kZU5hbWUocywidHIiKTtmb3IodT1pLmNhY2hlYWJsZXx8Yy0xO2E8YzthKyspci5jYWxsKG4mJnYubm9kZU5hbWUodGhpc1thXSwidGFibGUiKT9MdCh0aGlzW2FdLCJ0Ym9keSIpOnRoaXNbYV0sYT09PXU/bzp2LmNsb25lKG8sITAsITApKX1vPXM9bnVsbCxsLmxlbmd0aCYmdi5lYWNoKGwsZnVuY3Rpb24oZSx0KXt0LnNyYz92LmFqYXg/di5hamF4KHt1cmw6dC5zcmMsdHlwZToiR0VUIixkYXRhVHlwZToic2NyaXB0Iixhc3luYzohMSxnbG9iYWw6ITEsInRocm93cyI6ITB9KTp2LmVycm9yKCJubyBhamF4Iik6di5nbG9iYWxFdmFsKCh0LnRleHR8fHQudGV4dENvbnRlbnR8fHQuaW5uZXJIVE1MfHwiIikucmVwbGFjZShUdCwiIikpLHQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpfSl9cmV0dXJuIHRoaXN9fSksdi5idWlsZEZyYWdtZW50PWZ1bmN0aW9uKGUsbixyKXt2YXIgcyxvLHUsYT1lWzBdO3JldHVybiBuPW58fGksbj0hbi5ub2RlVHlwZSYmblswXXx8bixuPW4ub3duZXJEb2N1bWVudHx8bixlLmxlbmd0aD09PTEmJnR5cGVvZiBhPT0ic3RyaW5nIiYmYS5sZW5ndGg8NTEyJiZuPT09aSYmYS5jaGFyQXQoMCk9PT0iPCImJiFidC50ZXN0KGEpJiYodi5zdXBwb3J0LmNoZWNrQ2xvbmV8fCFTdC50ZXN0KGEpKSYmKHYuc3VwcG9ydC5odG1sNUNsb25lfHwhd3QudGVzdChhKSkmJihvPSEwLHM9di5mcmFnbWVudHNbYV0sdT1zIT09dCksc3x8KHM9bi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksdi5jbGVhbihlLG4scyxyKSxvJiYodi5mcmFnbWVudHNbYV09dSYmcykpLHtmcmFnbWVudDpzLGNhY2hlYWJsZTpvfX0sdi5mcmFnbWVudHM9e30sdi5lYWNoKHthcHBlbmRUbzoiYXBwZW5kIixwcmVwZW5kVG86InByZXBlbmQiLGluc2VydEJlZm9yZToiYmVmb3JlIixpbnNlcnRBZnRlcjoiYWZ0ZXIiLHJlcGxhY2VBbGw6InJlcGxhY2VXaXRoIn0sZnVuY3Rpb24oZSx0KXt2LmZuW2VdPWZ1bmN0aW9uKG4pe3ZhciByLGk9MCxzPVtdLG89dihuKSx1PW8ubGVuZ3RoLGE9dGhpcy5sZW5ndGg9PT0xJiZ0aGlzWzBdLnBhcmVudE5vZGU7aWYoKGE9PW51bGx8fGEmJmEubm9kZVR5cGU9PT0xMSYmYS5jaGlsZE5vZGVzLmxlbmd0aD09PTEpJiZ1PT09MSlyZXR1cm4gb1t0XSh0aGlzWzBdKSx0aGlzO2Zvcig7aTx1O2krKylyPShpPjA/dGhpcy5jbG9uZSghMCk6dGhpcykuZ2V0KCksdihvW2ldKVt0XShyKSxzPXMuY29uY2F0KHIpO3JldHVybiB0aGlzLnB1c2hTdGFjayhzLGUsby5zZWxlY3Rvcil9fSksdi5leHRlbmQoe2Nsb25lOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLHMsbzt2LnN1cHBvcnQuaHRtbDVDbG9uZXx8di5pc1hNTERvYyhlKXx8IXd0LnRlc3QoIjwiK2Uubm9kZU5hbWUrIj4iKT9vPWUuY2xvbmVOb2RlKCEwKTooa3QuaW5uZXJIVE1MPWUub3V0ZXJIVE1MLGt0LnJlbW92ZUNoaWxkKG89a3QuZmlyc3RDaGlsZCkpO2lmKCghdi5zdXBwb3J0Lm5vQ2xvbmVFdmVudHx8IXYuc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCkmJihlLm5vZGVUeXBlPT09MXx8ZS5ub2RlVHlwZT09PTExKSYmIXYuaXNYTUxEb2MoZSkpe090KGUsbykscj1NdChlKSxpPU10KG8pO2ZvcihzPTA7cltzXTsrK3MpaVtzXSYmT3QocltzXSxpW3NdKX1pZih0KXtBdChlLG8pO2lmKG4pe3I9TXQoZSksaT1NdChvKTtmb3Iocz0wO3Jbc107KytzKUF0KHJbc10saVtzXSl9fXJldHVybiByPWk9bnVsbCxvfSxjbGVhbjpmdW5jdGlvbihlLHQsbixyKXt2YXIgcyxvLHUsYSxmLGwsYyxoLHAsZCxtLGcseT10PT09aSYmQ3QsYj1bXTtpZighdHx8dHlwZW9mIHQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudD09InVuZGVmaW5lZCIpdD1pO2ZvcihzPTA7KHU9ZVtzXSkhPW51bGw7cysrKXt0eXBlb2YgdT09Im51bWJlciImJih1Kz0iIik7aWYoIXUpY29udGludWU7aWYodHlwZW9mIHU9PSJzdHJpbmciKWlmKCFndC50ZXN0KHUpKXU9dC5jcmVhdGVUZXh0Tm9kZSh1KTtlbHNle3k9eXx8bHQodCksYz10LmNyZWF0ZUVsZW1lbnQoImRpdiIpLHkuYXBwZW5kQ2hpbGQoYyksdT11LnJlcGxhY2UoZHQsIjwkMT48LyQyPiIpLGE9KHZ0LmV4ZWModSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCksZj1OdFthXXx8TnQuX2RlZmF1bHQsbD1mWzBdLGMuaW5uZXJIVE1MPWZbMV0rdStmWzJdO3doaWxlKGwtLSljPWMubGFzdENoaWxkO2lmKCF2LnN1cHBvcnQudGJvZHkpe2g9bXQudGVzdCh1KSxwPWE9PT0idGFibGUiJiYhaD9jLmZpcnN0Q2hpbGQmJmMuZmlyc3RDaGlsZC5jaGlsZE5vZGVzOmZbMV09PT0iPHRhYmxlPiImJiFoP2MuY2hpbGROb2RlczpbXTtmb3Iobz1wLmxlbmd0aC0xO28+PTA7LS1vKXYubm9kZU5hbWUocFtvXSwidGJvZHkiKSYmIXBbb10uY2hpbGROb2Rlcy5sZW5ndGgmJnBbb10ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwW29dKX0hdi5zdXBwb3J0LmxlYWRpbmdXaGl0ZXNwYWNlJiZwdC50ZXN0KHUpJiZjLmluc2VydEJlZm9yZSh0LmNyZWF0ZVRleHROb2RlKHB0LmV4ZWModSlbMF0pLGMuZmlyc3RDaGlsZCksdT1jLmNoaWxkTm9kZXMsYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpfXUubm9kZVR5cGU/Yi5wdXNoKHUpOnYubWVyZ2UoYix1KX1jJiYodT1jPXk9bnVsbCk7aWYoIXYuc3VwcG9ydC5hcHBlbmRDaGVja2VkKWZvcihzPTA7KHU9YltzXSkhPW51bGw7cysrKXYubm9kZU5hbWUodSwiaW5wdXQiKT9fdCh1KTp0eXBlb2YgdS5nZXRFbGVtZW50c0J5VGFnTmFtZSE9InVuZGVmaW5lZCImJnYuZ3JlcCh1LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbnB1dCIpLF90KTtpZihuKXttPWZ1bmN0aW9uKGUpe2lmKCFlLnR5cGV8fHh0LnRlc3QoZS50eXBlKSlyZXR1cm4gcj9yLnB1c2goZS5wYXJlbnROb2RlP2UucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKTplKTpuLmFwcGVuZENoaWxkKGUpfTtmb3Iocz0wOyh1PWJbc10pIT1udWxsO3MrKylpZighdi5ub2RlTmFtZSh1LCJzY3JpcHQiKXx8IW0odSkpbi5hcHBlbmRDaGlsZCh1KSx0eXBlb2YgdS5nZXRFbGVtZW50c0J5VGFnTmFtZSE9InVuZGVmaW5lZCImJihnPXYuZ3JlcCh2Lm1lcmdlKFtdLHUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNjcmlwdCIpKSxtKSxiLnNwbGljZS5hcHBseShiLFtzKzEsMF0uY29uY2F0KGcpKSxzKz1nLmxlbmd0aCl9cmV0dXJuIGJ9LGNsZWFuRGF0YTpmdW5jdGlvbihlLHQpe3ZhciBuLHIsaSxzLG89MCx1PXYuZXhwYW5kbyxhPXYuY2FjaGUsZj12LnN1cHBvcnQuZGVsZXRlRXhwYW5kbyxsPXYuZXZlbnQuc3BlY2lhbDtmb3IoOyhpPWVbb10pIT1udWxsO28rKylpZih0fHx2LmFjY2VwdERhdGEoaSkpe3I9aVt1XSxuPXImJmFbcl07aWYobil7aWYobi5ldmVudHMpZm9yKHMgaW4gbi5ldmVudHMpbFtzXT92LmV2ZW50LnJlbW92ZShpLHMpOnYucmVtb3ZlRXZlbnQoaSxzLG4uaGFuZGxlKTthW3JdJiYoZGVsZXRlIGFbcl0sZj9kZWxldGUgaVt1XTppLnJlbW92ZUF0dHJpYnV0ZT9pLnJlbW92ZUF0dHJpYnV0ZSh1KTppW3VdPW51bGwsdi5kZWxldGVkSWRzLnB1c2gocikpfX19fSksZnVuY3Rpb24oKXt2YXIgZSx0O3YudWFNYXRjaD1mdW5jdGlvbihlKXtlPWUudG9Mb3dlckNhc2UoKTt2YXIgdD0vKGNocm9tZSlbIFwvXShbXHcuXSspLy5leGVjKGUpfHwvKHdlYmtpdClbIFwvXShbXHcuXSspLy5leGVjKGUpfHwvKG9wZXJhKSg/Oi4qdmVyc2lvbnwpWyBcL10oW1x3Ll0rKS8uZXhlYyhlKXx8Lyhtc2llKSAoW1x3Ll0rKS8uZXhlYyhlKXx8ZS5pbmRleE9mKCJjb21wYXRpYmxlIik8MCYmLyhtb3ppbGxhKSg/Oi4qPyBydjooW1x3Ll0rKXwpLy5leGVjKGUpfHxbXTtyZXR1cm57YnJvd3Nlcjp0WzFdfHwiIix2ZXJzaW9uOnRbMl18fCIwIn19LGU9di51YU1hdGNoKG8udXNlckFnZW50KSx0PXt9LGUuYnJvd3NlciYmKHRbZS5icm93c2VyXT0hMCx0LnZlcnNpb249ZS52ZXJzaW9uKSx0LmNocm9tZT90LndlYmtpdD0hMDp0LndlYmtpdCYmKHQuc2FmYXJpPSEwKSx2LmJyb3dzZXI9dCx2LnN1Yj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuKXtyZXR1cm4gbmV3IGUuZm4uaW5pdCh0LG4pfXYuZXh0ZW5kKCEwLGUsdGhpcyksZS5zdXBlcmNsYXNzPXRoaXMsZS5mbj1lLnByb3RvdHlwZT10aGlzKCksZS5mbi5jb25zdHJ1Y3Rvcj1lLGUuc3ViPXRoaXMuc3ViLGUuZm4uaW5pdD1mdW5jdGlvbihyLGkpe3JldHVybiBpJiZpIGluc3RhbmNlb2YgdiYmIShpIGluc3RhbmNlb2YgZSkmJihpPWUoaSkpLHYuZm4uaW5pdC5jYWxsKHRoaXMscixpLHQpfSxlLmZuLmluaXQucHJvdG90eXBlPWUuZm47dmFyIHQ9ZShpKTtyZXR1cm4gZX19KCk7dmFyIER0LFB0LEh0LEJ0PS9hbHBoYVwoW14pXSpcKS9pLGp0PS9vcGFjaXR5PShbXildKikvLEZ0PS9eKHRvcHxyaWdodHxib3R0b218bGVmdCkkLyxJdD0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8scXQ9L15tYXJnaW4vLFJ0PW5ldyBSZWdFeHAoIl4oIittKyIpKC4qKSQiLCJpIiksVXQ9bmV3IFJlZ0V4cCgiXigiK20rIikoPyFweClbYS16JV0rJCIsImkiKSx6dD1uZXcgUmVnRXhwKCJeKFstK10pPSgiK20rIikiLCJpIiksV3Q9e0JPRFk6ImJsb2NrIn0sWHQ9e3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdmlzaWJpbGl0eToiaGlkZGVuIixkaXNwbGF5OiJibG9jayJ9LFZ0PXtsZXR0ZXJTcGFjaW5nOjAsZm9udFdlaWdodDo0MDB9LCR0PVsiVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il0sSnQ9WyJXZWJraXQiLCJPIiwiTW96IiwibXMiXSxLdD12LmZuLnRvZ2dsZTt2LmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGUsbil7cmV0dXJuIHYuYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSxuLHIpe3JldHVybiByIT09dD92LnN0eWxlKGUsbixyKTp2LmNzcyhlLG4pfSxlLG4sYXJndW1lbnRzLmxlbmd0aD4xKX0sc2hvdzpmdW5jdGlvbigpe3JldHVybiBZdCh0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBZdCh0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dHlwZW9mIGU9PSJib29sZWFuIjtyZXR1cm4gdi5pc0Z1bmN0aW9uKGUpJiZ2LmlzRnVuY3Rpb24odCk/S3QuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuZWFjaChmdW5jdGlvbigpeyhuP2U6R3QodGhpcykpP3YodGhpcykuc2hvdygpOnYodGhpcykuaGlkZSgpfSl9fSksdi5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oZSx0KXtpZih0KXt2YXIgbj1EdChlLCJvcGFjaXR5Iik7cmV0dXJuIG49PT0iIj8iMSI6bn19fX0sY3NzTnVtYmVyOntmaWxsT3BhY2l0eTohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6eyJmbG9hdCI6di5zdXBwb3J0LmNzc0Zsb2F0PyJjc3NGbG9hdCI6InN0eWxlRmxvYXQifSxzdHlsZTpmdW5jdGlvbihlLG4scixpKXtpZighZXx8ZS5ub2RlVHlwZT09PTN8fGUubm9kZVR5cGU9PT04fHwhZS5zdHlsZSlyZXR1cm47dmFyIHMsbyx1LGE9di5jYW1lbENhc2UobiksZj1lLnN0eWxlO249di5jc3NQcm9wc1thXXx8KHYuY3NzUHJvcHNbYV09UXQoZixhKSksdT12LmNzc0hvb2tzW25dfHx2LmNzc0hvb2tzW2FdO2lmKHI9PT10KXJldHVybiB1JiYiZ2V0ImluIHUmJihzPXUuZ2V0KGUsITEsaSkpIT09dD9zOmZbbl07bz10eXBlb2YgcixvPT09InN0cmluZyImJihzPXp0LmV4ZWMocikpJiYocj0oc1sxXSsxKSpzWzJdK3BhcnNlRmxvYXQodi5jc3MoZSxuKSksbz0ibnVtYmVyIik7aWYocj09bnVsbHx8bz09PSJudW1iZXIiJiZpc05hTihyKSlyZXR1cm47bz09PSJudW1iZXIiJiYhdi5jc3NOdW1iZXJbYV0mJihyKz0icHgiKTtpZighdXx8ISgic2V0ImluIHUpfHwocj11LnNldChlLHIsaSkpIT09dCl0cnl7ZltuXT1yfWNhdGNoKGwpe319LGNzczpmdW5jdGlvbihlLG4scixpKXt2YXIgcyxvLHUsYT12LmNhbWVsQ2FzZShuKTtyZXR1cm4gbj12LmNzc1Byb3BzW2FdfHwodi5jc3NQcm9wc1thXT1RdChlLnN0eWxlLGEpKSx1PXYuY3NzSG9va3Nbbl18fHYuY3NzSG9va3NbYV0sdSYmImdldCJpbiB1JiYocz11LmdldChlLCEwLGkpKSxzPT09dCYmKHM9RHQoZSxuKSkscz09PSJub3JtYWwiJiZuIGluIFZ0JiYocz1WdFtuXSkscnx8aSE9PXQ/KG89cGFyc2VGbG9hdChzKSxyfHx2LmlzTnVtZXJpYyhvKT9vfHwwOnMpOnN9LHN3YXA6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGkscz17fTtmb3IoaSBpbiB0KXNbaV09ZS5zdHlsZVtpXSxlLnN0eWxlW2ldPXRbaV07cj1uLmNhbGwoZSk7Zm9yKGkgaW4gdCllLnN0eWxlW2ldPXNbaV07cmV0dXJuIHJ9fSksZS5nZXRDb21wdXRlZFN0eWxlP0R0PWZ1bmN0aW9uKHQsbil7dmFyIHIsaSxzLG8sdT1lLmdldENvbXB1dGVkU3R5bGUodCxudWxsKSxhPXQuc3R5bGU7cmV0dXJuIHUmJihyPXUuZ2V0UHJvcGVydHlWYWx1ZShuKXx8dVtuXSxyPT09IiImJiF2LmNvbnRhaW5zKHQub3duZXJEb2N1bWVudCx0KSYmKHI9di5zdHlsZSh0LG4pKSxVdC50ZXN0KHIpJiZxdC50ZXN0KG4pJiYoaT1hLndpZHRoLHM9YS5taW5XaWR0aCxvPWEubWF4V2lkdGgsYS5taW5XaWR0aD1hLm1heFdpZHRoPWEud2lkdGg9cixyPXUud2lkdGgsYS53aWR0aD1pLGEubWluV2lkdGg9cyxhLm1heFdpZHRoPW8pKSxyfTppLmRvY3VtZW50RWxlbWVudC5jdXJyZW50U3R5bGUmJihEdD1mdW5jdGlvbihlLHQpe3ZhciBuLHIsaT1lLmN1cnJlbnRTdHlsZSYmZS5jdXJyZW50U3R5bGVbdF0scz1lLnN0eWxlO3JldHVybiBpPT1udWxsJiZzJiZzW3RdJiYoaT1zW3RdKSxVdC50ZXN0KGkpJiYhRnQudGVzdCh0KSYmKG49cy5sZWZ0LHI9ZS5ydW50aW1lU3R5bGUmJmUucnVudGltZVN0eWxlLmxlZnQsciYmKGUucnVudGltZVN0eWxlLmxlZnQ9ZS5jdXJyZW50U3R5bGUubGVmdCkscy5sZWZ0PXQ9PT0iZm9udFNpemUiPyIxZW0iOmksaT1zLnBpeGVsTGVmdCsicHgiLHMubGVmdD1uLHImJihlLnJ1bnRpbWVTdHlsZS5sZWZ0PXIpKSxpPT09IiI/ImF1dG8iOml9KSx2LmVhY2goWyJoZWlnaHQiLCJ3aWR0aCJdLGZ1bmN0aW9uKGUsdCl7di5jc3NIb29rc1t0XT17Z2V0OmZ1bmN0aW9uKGUsbixyKXtpZihuKXJldHVybiBlLm9mZnNldFdpZHRoPT09MCYmSXQudGVzdChEdChlLCJkaXNwbGF5IikpP3Yuc3dhcChlLFh0LGZ1bmN0aW9uKCl7cmV0dXJuIHRuKGUsdCxyKX0pOnRuKGUsdCxyKX0sc2V0OmZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gWnQoZSxuLHI/ZW4oZSx0LHIsdi5zdXBwb3J0LmJveFNpemluZyYmdi5jc3MoZSwiYm94U2l6aW5nIik9PT0iYm9yZGVyLWJveCIpOjApfX19KSx2LnN1cHBvcnQub3BhY2l0eXx8KHYuY3NzSG9va3Mub3BhY2l0eT17Z2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGp0LnRlc3QoKHQmJmUuY3VycmVudFN0eWxlP2UuY3VycmVudFN0eWxlLmZpbHRlcjplLnN0eWxlLmZpbHRlcil8fCIiKT8uMDEqcGFyc2VGbG9hdChSZWdFeHAuJDEpKyIiOnQ/IjEiOiIifSxzZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnN0eWxlLHI9ZS5jdXJyZW50U3R5bGUsaT12LmlzTnVtZXJpYyh0KT8iYWxwaGEob3BhY2l0eT0iK3QqMTAwKyIpIjoiIixzPXImJnIuZmlsdGVyfHxuLmZpbHRlcnx8IiI7bi56b29tPTE7aWYodD49MSYmdi50cmltKHMucmVwbGFjZShCdCwiIikpPT09IiImJm4ucmVtb3ZlQXR0cmlidXRlKXtuLnJlbW92ZUF0dHJpYnV0ZSgiZmlsdGVyIik7aWYociYmIXIuZmlsdGVyKXJldHVybn1uLmZpbHRlcj1CdC50ZXN0KHMpP3MucmVwbGFjZShCdCxpKTpzKyIgIitpfX0pLHYoZnVuY3Rpb24oKXt2LnN1cHBvcnQucmVsaWFibGVNYXJnaW5SaWdodHx8KHYuY3NzSG9va3MubWFyZ2luUmlnaHQ9e2dldDpmdW5jdGlvbihlLHQpe3JldHVybiB2LnN3YXAoZSx7ZGlzcGxheToiaW5saW5lLWJsb2NrIn0sZnVuY3Rpb24oKXtpZih0KXJldHVybiBEdChlLCJtYXJnaW5SaWdodCIpfSl9fSksIXYuc3VwcG9ydC5waXhlbFBvc2l0aW9uJiZ2LmZuLnBvc2l0aW9uJiZ2LmVhY2goWyJ0b3AiLCJsZWZ0Il0sZnVuY3Rpb24oZSx0KXt2LmNzc0hvb2tzW3RdPXtnZXQ6ZnVuY3Rpb24oZSxuKXtpZihuKXt2YXIgcj1EdChlLHQpO3JldHVybiBVdC50ZXN0KHIpP3YoZSkucG9zaXRpb24oKVt0XSsicHgiOnJ9fX19KX0pLHYuZXhwciYmdi5leHByLmZpbHRlcnMmJih2LmV4cHIuZmlsdGVycy5oaWRkZW49ZnVuY3Rpb24oZSl7cmV0dXJuIGUub2Zmc2V0V2lkdGg9PT0wJiZlLm9mZnNldEhlaWdodD09PTB8fCF2LnN1cHBvcnQucmVsaWFibGVIaWRkZW5PZmZzZXRzJiYoZS5zdHlsZSYmZS5zdHlsZS5kaXNwbGF5fHxEdChlLCJkaXNwbGF5IikpPT09Im5vbmUifSx2LmV4cHIuZmlsdGVycy52aXNpYmxlPWZ1bmN0aW9uKGUpe3JldHVybiF2LmV4cHIuZmlsdGVycy5oaWRkZW4oZSl9KSx2LmVhY2goe21hcmdpbjoiIixwYWRkaW5nOiIiLGJvcmRlcjoiV2lkdGgifSxmdW5jdGlvbihlLHQpe3YuY3NzSG9va3NbZSt0XT17ZXhwYW5kOmZ1bmN0aW9uKG4pe3ZhciByLGk9dHlwZW9mIG49PSJzdHJpbmciP24uc3BsaXQoIiAiKTpbbl0scz17fTtmb3Iocj0wO3I8NDtyKyspc1tlKyR0W3JdK3RdPWlbcl18fGlbci0yXXx8aVswXTtyZXR1cm4gc319LHF0LnRlc3QoZSl8fCh2LmNzc0hvb2tzW2UrdF0uc2V0PVp0KX0pO3ZhciBybj0vJTIwL2csc249L1xbXF0kLyxvbj0vXHI/XG4vZyx1bj0vXig/OmNvbG9yfGRhdGV8ZGF0ZXRpbWV8ZGF0ZXRpbWUtbG9jYWx8ZW1haWx8aGlkZGVufG1vbnRofG51bWJlcnxwYXNzd29yZHxyYW5nZXxzZWFyY2h8dGVsfHRleHR8dGltZXx1cmx8d2VlaykkL2ksYW49L14oPzpzZWxlY3R8dGV4dGFyZWEpL2k7di5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiB2LnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudHM/di5tYWtlQXJyYXkodGhpcy5lbGVtZW50cyk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiB0aGlzLm5hbWUmJiF0aGlzLmRpc2FibGVkJiYodGhpcy5jaGVja2VkfHxhbi50ZXN0KHRoaXMubm9kZU5hbWUpfHx1bi50ZXN0KHRoaXMudHlwZSkpfSkubWFwKGZ1bmN0aW9uKGUsdCl7dmFyIG49dih0aGlzKS52YWwoKTtyZXR1cm4gbj09bnVsbD9udWxsOnYuaXNBcnJheShuKT92Lm1hcChuLGZ1bmN0aW9uKGUsbil7cmV0dXJue25hbWU6dC5uYW1lLHZhbHVlOmUucmVwbGFjZShvbiwiXHJcbiIpfX0pOntuYW1lOnQubmFtZSx2YWx1ZTpuLnJlcGxhY2Uob24sIlxyXG4iKX19KS5nZXQoKX19KSx2LnBhcmFtPWZ1bmN0aW9uKGUsbil7dmFyIHIsaT1bXSxzPWZ1bmN0aW9uKGUsdCl7dD12LmlzRnVuY3Rpb24odCk/dCgpOnQ9PW51bGw/IiI6dCxpW2kubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoZSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudCh0KX07bj09PXQmJihuPXYuYWpheFNldHRpbmdzJiZ2LmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbCk7aWYodi5pc0FycmF5KGUpfHxlLmpxdWVyeSYmIXYuaXNQbGFpbk9iamVjdChlKSl2LmVhY2goZSxmdW5jdGlvbigpe3ModGhpcy5uYW1lLHRoaXMudmFsdWUpfSk7ZWxzZSBmb3IociBpbiBlKWZuKHIsZVtyXSxuLHMpO3JldHVybiBpLmpvaW4oIiYiKS5yZXBsYWNlKHJuLCIrIil9O3ZhciBsbixjbixobj0vIy4qJC8scG49L14oLio/KTpbIFx0XSooW15cclxuXSopXHI/JC9tZyxkbj0vXig/OmFib3V0fGFwcHxhcHBcLXN0b3JhZ2V8LitcLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLHZuPS9eKD86R0VUfEhFQUQpJC8sbW49L15cL1wvLyxnbj0vXD8vLHluPS88c2NyaXB0XGJbXjxdKig/Oig/ITxcL3NjcmlwdD4pPFtePF0qKSo8XC9zY3JpcHQ+L2dpLGJuPS8oWz8mXSlfPVteJl0qLyx3bj0vXihbXHdcK1wuXC1dKzopKD86XC9cLyhbXlwvPyM6XSopKD86OihcZCspfCl8KS8sRW49di5mbi5sb2FkLFNuPXt9LHhuPXt9LFRuPVsiKi8iXStbIioiXTt0cnl7Y249cy5ocmVmfWNhdGNoKE5uKXtjbj1pLmNyZWF0ZUVsZW1lbnQoImEiKSxjbi5ocmVmPSIiLGNuPWNuLmhyZWZ9bG49d24uZXhlYyhjbi50b0xvd2VyQ2FzZSgpKXx8W10sdi5mbi5sb2FkPWZ1bmN0aW9uKGUsbixyKXtpZih0eXBlb2YgZSE9InN0cmluZyImJkVuKXJldHVybiBFbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoIXRoaXMubGVuZ3RoKXJldHVybiB0aGlzO3ZhciBpLHMsbyx1PXRoaXMsYT1lLmluZGV4T2YoIiAiKTtyZXR1cm4gYT49MCYmKGk9ZS5zbGljZShhLGUubGVuZ3RoKSxlPWUuc2xpY2UoMCxhKSksdi5pc0Z1bmN0aW9uKG4pPyhyPW4sbj10KTpuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihzPSJQT1NUIiksdi5hamF4KHt1cmw6ZSx0eXBlOnMsZGF0YVR5cGU6Imh0bWwiLGRhdGE6bixjb21wbGV0ZTpmdW5jdGlvbihlLHQpe3ImJnUuZWFjaChyLG98fFtlLnJlc3BvbnNlVGV4dCx0LGVdKX19KS5kb25lKGZ1bmN0aW9uKGUpe289YXJndW1lbnRzLHUuaHRtbChpP3YoIjxkaXY+IikuYXBwZW5kKGUucmVwbGFjZSh5biwiIikpLmZpbmQoaSk6ZSl9KSx0aGlzfSx2LmVhY2goImFqYXhTdGFydCBhamF4U3RvcCBhamF4Q29tcGxldGUgYWpheEVycm9yIGFqYXhTdWNjZXNzIGFqYXhTZW5kIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGUsdCl7di5mblt0XT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vbih0LGUpfX0pLHYuZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihlLG4pe3Zbbl09ZnVuY3Rpb24oZSxyLGkscyl7cmV0dXJuIHYuaXNGdW5jdGlvbihyKSYmKHM9c3x8aSxpPXIscj10KSx2LmFqYXgoe3R5cGU6bix1cmw6ZSxkYXRhOnIsc3VjY2VzczppLGRhdGFUeXBlOnN9KX19KSx2LmV4dGVuZCh7Z2V0U2NyaXB0OmZ1bmN0aW9uKGUsbil7cmV0dXJuIHYuZ2V0KGUsdCxuLCJzY3JpcHQiKX0sZ2V0SlNPTjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHYuZ2V0KGUsdCxuLCJqc29uIil9LGFqYXhTZXR1cDpmdW5jdGlvbihlLHQpe3JldHVybiB0P0xuKGUsdi5hamF4U2V0dGluZ3MpOih0PWUsZT12LmFqYXhTZXR0aW5ncyksTG4oZSx0KSxlfSxhamF4U2V0dGluZ3M6e3VybDpjbixpc0xvY2FsOmRuLnRlc3QobG5bMV0pLGdsb2JhbDohMCx0eXBlOiJHRVQiLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGFjY2VwdHM6e3htbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsaHRtbDoidGV4dC9odG1sIix0ZXh0OiJ0ZXh0L3BsYWluIixqc29uOiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQiLCIqIjpUbn0sY29udGVudHM6e3htbDoveG1sLyxodG1sOi9odG1sLyxqc29uOi9qc29uL30scmVzcG9uc2VGaWVsZHM6e3htbDoicmVzcG9uc2VYTUwiLHRleHQ6InJlc3BvbnNlVGV4dCJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOmUuU3RyaW5nLCJ0ZXh0IGh0bWwiOiEwLCJ0ZXh0IGpzb24iOnYucGFyc2VKU09OLCJ0ZXh0IHhtbCI6di5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e2NvbnRleHQ6ITAsdXJsOiEwfX0sYWpheFByZWZpbHRlcjpDbihTbiksYWpheFRyYW5zcG9ydDpDbih4biksYWpheDpmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIFQoZSxuLHMsYSl7dmFyIGwseSxiLHcsUyxUPW47aWYoRT09PTIpcmV0dXJuO0U9Mix1JiZjbGVhclRpbWVvdXQodSksbz10LGk9YXx8IiIseC5yZWFkeVN0YXRlPWU+MD80OjAscyYmKHc9QW4oYyx4LHMpKTtpZihlPj0yMDAmJmU8MzAwfHxlPT09MzA0KWMuaWZNb2RpZmllZCYmKFM9eC5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLFMmJih2Lmxhc3RNb2RpZmllZFtyXT1TKSxTPXguZ2V0UmVzcG9uc2VIZWFkZXIoIkV0YWciKSxTJiYodi5ldGFnW3JdPVMpKSxlPT09MzA0PyhUPSJub3Rtb2RpZmllZCIsbD0hMCk6KGw9T24oYyx3KSxUPWwuc3RhdGUseT1sLmRhdGEsYj1sLmVycm9yLGw9IWIpO2Vsc2V7Yj1UO2lmKCFUfHxlKVQ9ImVycm9yIixlPDAmJihlPTApfXguc3RhdHVzPWUseC5zdGF0dXNUZXh0PShufHxUKSsiIixsP2QucmVzb2x2ZVdpdGgoaCxbeSxULHhdKTpkLnJlamVjdFdpdGgoaCxbeCxULGJdKSx4LnN0YXR1c0NvZGUoZyksZz10LGYmJnAudHJpZ2dlcigiYWpheCIrKGw/IlN1Y2Nlc3MiOiJFcnJvciIpLFt4LGMsbD95OmJdKSxtLmZpcmVXaXRoKGgsW3gsVF0pLGYmJihwLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW3gsY10pLC0tdi5hY3RpdmV8fHYuZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSl9dHlwZW9mIGU9PSJvYmplY3QiJiYobj1lLGU9dCksbj1ufHx7fTt2YXIgcixpLHMsbyx1LGEsZixsLGM9di5hamF4U2V0dXAoe30sbiksaD1jLmNvbnRleHR8fGMscD1oIT09YyYmKGgubm9kZVR5cGV8fGggaW5zdGFuY2VvZiB2KT92KGgpOnYuZXZlbnQsZD12LkRlZmVycmVkKCksbT12LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxnPWMuc3RhdHVzQ29kZXx8e30sYj17fSx3PXt9LEU9MCxTPSJjYW5jZWxlZCIseD17cmVhZHlTdGF0ZTowLHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oZSx0KXtpZighRSl7dmFyIG49ZS50b0xvd2VyQ2FzZSgpO2U9d1tuXT13W25dfHxlLGJbZV09dH1yZXR1cm4gdGhpc30sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIEU9PT0yP2k6bnVsbH0sZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oZSl7dmFyIG47aWYoRT09PTIpe2lmKCFzKXtzPXt9O3doaWxlKG49cG4uZXhlYyhpKSlzW25bMV0udG9Mb3dlckNhc2UoKV09blsyXX1uPXNbZS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbj09PXQ/bnVsbDpufSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGUpe3JldHVybiBFfHwoYy5taW1lVHlwZT1lKSx0aGlzfSxhYm9ydDpmdW5jdGlvbihlKXtyZXR1cm4gZT1lfHxTLG8mJm8uYWJvcnQoZSksVCgwLGUpLHRoaXN9fTtkLnByb21pc2UoeCkseC5zdWNjZXNzPXguZG9uZSx4LmVycm9yPXguZmFpbCx4LmNvbXBsZXRlPW0uYWRkLHguc3RhdHVzQ29kZT1mdW5jdGlvbihlKXtpZihlKXt2YXIgdDtpZihFPDIpZm9yKHQgaW4gZSlnW3RdPVtnW3RdLGVbdF1dO2Vsc2UgdD1lW3guc3RhdHVzXSx4LmFsd2F5cyh0KX1yZXR1cm4gdGhpc30sYy51cmw9KChlfHxjLnVybCkrIiIpLnJlcGxhY2UoaG4sIiIpLnJlcGxhY2UobW4sbG5bMV0rIi8vIiksYy5kYXRhVHlwZXM9di50cmltKGMuZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5zcGxpdCh5KSxjLmNyb3NzRG9tYWluPT1udWxsJiYoYT13bi5leGVjKGMudXJsLnRvTG93ZXJDYXNlKCkpLGMuY3Jvc3NEb21haW49ISghYXx8YVsxXT09PWxuWzFdJiZhWzJdPT09bG5bMl0mJihhWzNdfHwoYVsxXT09PSJodHRwOiI/ODA6NDQzKSk9PShsblszXXx8KGxuWzFdPT09Imh0dHA6Ij84MDo0NDMpKSkpLGMuZGF0YSYmYy5wcm9jZXNzRGF0YSYmdHlwZW9mIGMuZGF0YSE9InN0cmluZyImJihjLmRhdGE9di5wYXJhbShjLmRhdGEsYy50cmFkaXRpb25hbCkpLGtuKFNuLGMsbix4KTtpZihFPT09MilyZXR1cm4geDtmPWMuZ2xvYmFsLGMudHlwZT1jLnR5cGUudG9VcHBlckNhc2UoKSxjLmhhc0NvbnRlbnQ9IXZuLnRlc3QoYy50eXBlKSxmJiZ2LmFjdGl2ZSsrPT09MCYmdi5ldmVudC50cmlnZ2VyKCJhamF4U3RhcnQiKTtpZighYy5oYXNDb250ZW50KXtjLmRhdGEmJihjLnVybCs9KGduLnRlc3QoYy51cmwpPyImIjoiPyIpK2MuZGF0YSxkZWxldGUgYy5kYXRhKSxyPWMudXJsO2lmKGMuY2FjaGU9PT0hMSl7dmFyIE49di5ub3coKSxDPWMudXJsLnJlcGxhY2UoYm4sIiQxXz0iK04pO2MudXJsPUMrKEM9PT1jLnVybD8oZ24udGVzdChjLnVybCk/IiYiOiI/IikrIl89IitOOiIiKX19KGMuZGF0YSYmYy5oYXNDb250ZW50JiZjLmNvbnRlbnRUeXBlIT09ITF8fG4uY29udGVudFR5cGUpJiZ4LnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsYy5jb250ZW50VHlwZSksYy5pZk1vZGlmaWVkJiYocj1yfHxjLnVybCx2Lmxhc3RNb2RpZmllZFtyXSYmeC5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Nb2RpZmllZC1TaW5jZSIsdi5sYXN0TW9kaWZpZWRbcl0pLHYuZXRhZ1tyXSYmeC5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Ob25lLU1hdGNoIix2LmV0YWdbcl0pKSx4LnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIsYy5kYXRhVHlwZXNbMF0mJmMuYWNjZXB0c1tjLmRhdGFUeXBlc1swXV0/Yy5hY2NlcHRzW2MuZGF0YVR5cGVzWzBdXSsoYy5kYXRhVHlwZXNbMF0hPT0iKiI/IiwgIitUbisiOyBxPTAuMDEiOiIiKTpjLmFjY2VwdHNbIioiXSk7Zm9yKGwgaW4gYy5oZWFkZXJzKXguc2V0UmVxdWVzdEhlYWRlcihsLGMuaGVhZGVyc1tsXSk7aWYoIWMuYmVmb3JlU2VuZHx8Yy5iZWZvcmVTZW5kLmNhbGwoaCx4LGMpIT09ITEmJkUhPT0yKXtTPSJhYm9ydCI7Zm9yKGwgaW57c3VjY2VzczoxLGVycm9yOjEsY29tcGxldGU6MX0peFtsXShjW2xdKTtvPWtuKHhuLGMsbix4KTtpZighbylUKC0xLCJObyBUcmFuc3BvcnQiKTtlbHNle3gucmVhZHlTdGF0ZT0xLGYmJnAudHJpZ2dlcigiYWpheFNlbmQiLFt4LGNdKSxjLmFzeW5jJiZjLnRpbWVvdXQ+MCYmKHU9c2V0VGltZW91dChmdW5jdGlvbigpe3guYWJvcnQoInRpbWVvdXQiKX0sYy50aW1lb3V0KSk7dHJ5e0U9MSxvLnNlbmQoYixUKX1jYXRjaChrKXtpZighKEU8MikpdGhyb3cgaztUKC0xLGspfX1yZXR1cm4geH1yZXR1cm4geC5hYm9ydCgpfSxhY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fX0pO3ZhciBNbj1bXSxfbj0vXD8vLERuPS8oPSlcPyg/PSZ8JCl8XD9cPy8sUG49di5ub3coKTt2LmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGU9TW4ucG9wKCl8fHYuZXhwYW5kbysiXyIrUG4rKztyZXR1cm4gdGhpc1tlXT0hMCxlfX0pLHYuYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24obixyLGkpe3ZhciBzLG8sdSxhPW4uZGF0YSxmPW4udXJsLGw9bi5qc29ucCE9PSExLGM9bCYmRG4udGVzdChmKSxoPWwmJiFjJiZ0eXBlb2YgYT09InN0cmluZyImJiEobi5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpJiZEbi50ZXN0KGEpO2lmKG4uZGF0YVR5cGVzWzBdPT09Impzb25wInx8Y3x8aClyZXR1cm4gcz1uLmpzb25wQ2FsbGJhY2s9di5pc0Z1bmN0aW9uKG4uanNvbnBDYWxsYmFjayk/bi5qc29ucENhbGxiYWNrKCk6bi5qc29ucENhbGxiYWNrLG89ZVtzXSxjP24udXJsPWYucmVwbGFjZShEbiwiJDEiK3MpOmg/bi5kYXRhPWEucmVwbGFjZShEbiwiJDEiK3MpOmwmJihuLnVybCs9KF9uLnRlc3QoZik/IiYiOiI/Iikrbi5qc29ucCsiPSIrcyksbi5jb252ZXJ0ZXJzWyJzY3JpcHQganNvbiJdPWZ1bmN0aW9uKCl7cmV0dXJuIHV8fHYuZXJyb3IocysiIHdhcyBub3QgY2FsbGVkIiksdVswXX0sbi5kYXRhVHlwZXNbMF09Impzb24iLGVbc109ZnVuY3Rpb24oKXt1PWFyZ3VtZW50c30saS5hbHdheXMoZnVuY3Rpb24oKXtlW3NdPW8sbltzXSYmKG4uanNvbnBDYWxsYmFjaz1yLmpzb25wQ2FsbGJhY2ssTW4ucHVzaChzKSksdSYmdi5pc0Z1bmN0aW9uKG8pJiZvKHVbMF0pLHU9bz10fSksInNjcmlwdCJ9KSx2LmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6L2phdmFzY3JpcHR8ZWNtYXNjcmlwdC99LGNvbnZlcnRlcnM6eyJ0ZXh0IHNjcmlwdCI6ZnVuY3Rpb24oZSl7cmV0dXJuIHYuZ2xvYmFsRXZhbChlKSxlfX19KSx2LmFqYXhQcmVmaWx0ZXIoInNjcmlwdCIsZnVuY3Rpb24oZSl7ZS5jYWNoZT09PXQmJihlLmNhY2hlPSExKSxlLmNyb3NzRG9tYWluJiYoZS50eXBlPSJHRVQiLGUuZ2xvYmFsPSExKX0pLHYuYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihlKXtpZihlLmNyb3NzRG9tYWluKXt2YXIgbixyPWkuaGVhZHx8aS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdfHxpLmRvY3VtZW50RWxlbWVudDtyZXR1cm57c2VuZDpmdW5jdGlvbihzLG8pe249aS5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSxuLmFzeW5jPSJhc3luYyIsZS5zY3JpcHRDaGFyc2V0JiYobi5jaGFyc2V0PWUuc2NyaXB0Q2hhcnNldCksbi5zcmM9ZS51cmwsbi5vbmxvYWQ9bi5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oZSxpKXtpZihpfHwhbi5yZWFkeVN0YXRlfHwvbG9hZGVkfGNvbXBsZXRlLy50ZXN0KG4ucmVhZHlTdGF0ZSkpbi5vbmxvYWQ9bi5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCxyJiZuLnBhcmVudE5vZGUmJnIucmVtb3ZlQ2hpbGQobiksbj10LGl8fG8oMjAwLCJzdWNjZXNzIil9LHIuaW5zZXJ0QmVmb3JlKG4sci5maXJzdENoaWxkKX0sYWJvcnQ6ZnVuY3Rpb24oKXtuJiZuLm9ubG9hZCgwLDEpfX19fSk7dmFyIEhuLEJuPWUuQWN0aXZlWE9iamVjdD9mdW5jdGlvbigpe2Zvcih2YXIgZSBpbiBIbilIbltlXSgwLDEpfTohMSxqbj0wO3YuYWpheFNldHRpbmdzLnhocj1lLkFjdGl2ZVhPYmplY3Q/ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc0xvY2FsJiZGbigpfHxJbigpfTpGbixmdW5jdGlvbihlKXt2LmV4dGVuZCh2LnN1cHBvcnQse2FqYXg6ISFlLGNvcnM6ISFlJiYid2l0aENyZWRlbnRpYWxzImluIGV9KX0odi5hamF4U2V0dGluZ3MueGhyKCkpLHYuc3VwcG9ydC5hamF4JiZ2LmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24obil7aWYoIW4uY3Jvc3NEb21haW58fHYuc3VwcG9ydC5jb3JzKXt2YXIgcjtyZXR1cm57c2VuZDpmdW5jdGlvbihpLHMpe3ZhciBvLHUsYT1uLnhocigpO24udXNlcm5hbWU/YS5vcGVuKG4udHlwZSxuLnVybCxuLmFzeW5jLG4udXNlcm5hbWUsbi5wYXNzd29yZCk6YS5vcGVuKG4udHlwZSxuLnVybCxuLmFzeW5jKTtpZihuLnhockZpZWxkcylmb3IodSBpbiBuLnhockZpZWxkcylhW3VdPW4ueGhyRmllbGRzW3VdO24ubWltZVR5cGUmJmEub3ZlcnJpZGVNaW1lVHlwZSYmYS5vdmVycmlkZU1pbWVUeXBlKG4ubWltZVR5cGUpLCFuLmNyb3NzRG9tYWluJiYhaVsiWC1SZXF1ZXN0ZWQtV2l0aCJdJiYoaVsiWC1SZXF1ZXN0ZWQtV2l0aCJdPSJYTUxIdHRwUmVxdWVzdCIpO3RyeXtmb3IodSBpbiBpKWEuc2V0UmVxdWVzdEhlYWRlcih1LGlbdV0pfWNhdGNoKGYpe31hLnNlbmQobi5oYXNDb250ZW50JiZuLmRhdGF8fG51bGwpLHI9ZnVuY3Rpb24oZSxpKXt2YXIgdSxmLGwsYyxoO3RyeXtpZihyJiYoaXx8YS5yZWFkeVN0YXRlPT09NCkpe3I9dCxvJiYoYS5vbnJlYWR5c3RhdGVjaGFuZ2U9di5ub29wLEJuJiZkZWxldGUgSG5bb10pO2lmKGkpYS5yZWFkeVN0YXRlIT09NCYmYS5hYm9ydCgpO2Vsc2V7dT1hLnN0YXR1cyxsPWEuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCksYz17fSxoPWEucmVzcG9uc2VYTUwsaCYmaC5kb2N1bWVudEVsZW1lbnQmJihjLnhtbD1oKTt0cnl7Yy50ZXh0PWEucmVzcG9uc2VUZXh0fWNhdGNoKHApe310cnl7Zj1hLnN0YXR1c1RleHR9Y2F0Y2gocCl7Zj0iIn0hdSYmbi5pc0xvY2FsJiYhbi5jcm9zc0RvbWFpbj91PWMudGV4dD8yMDA6NDA0OnU9PT0xMjIzJiYodT0yMDQpfX19Y2F0Y2goZCl7aXx8cygtMSxkKX1jJiZzKHUsZixjLGwpfSxuLmFzeW5jP2EucmVhZHlTdGF0ZT09PTQ/c2V0VGltZW91dChyLDApOihvPSsram4sQm4mJihIbnx8KEhuPXt9LHYoZSkudW5sb2FkKEJuKSksSG5bb109ciksYS5vbnJlYWR5c3RhdGVjaGFuZ2U9cik6cigpfSxhYm9ydDpmdW5jdGlvbigpe3ImJnIoMCwxKX19fX0pO3ZhciBxbixSbixVbj0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sem49bmV3IFJlZ0V4cCgiXig/OihbLStdKT18KSgiK20rIikoW2EteiVdKikkIiwiaSIpLFduPS9xdWV1ZUhvb2tzJC8sWG49W0duXSxWbj17IioiOltmdW5jdGlvbihlLHQpe3ZhciBuLHIsaT10aGlzLmNyZWF0ZVR3ZWVuKGUsdCkscz16bi5leGVjKHQpLG89aS5jdXIoKSx1PStvfHwwLGE9MSxmPTIwO2lmKHMpe249K3NbMl0scj1zWzNdfHwodi5jc3NOdW1iZXJbZV0/IiI6InB4Iik7aWYociE9PSJweCImJnUpe3U9di5jc3MoaS5lbGVtLGUsITApfHxufHwxO2RvIGE9YXx8Ii41Iix1Lz1hLHYuc3R5bGUoaS5lbGVtLGUsdStyKTt3aGlsZShhIT09KGE9aS5jdXIoKS9vKSYmYSE9PTEmJi0tZil9aS51bml0PXIsaS5zdGFydD11LGkuZW5kPXNbMV0/dSsoc1sxXSsxKSpuOm59cmV0dXJuIGl9XX07di5BbmltYXRpb249di5leHRlbmQoS24se3R3ZWVuZXI6ZnVuY3Rpb24oZSx0KXt2LmlzRnVuY3Rpb24oZSk/KHQ9ZSxlPVsiKiJdKTplPWUuc3BsaXQoIiAiKTt2YXIgbixyPTAsaT1lLmxlbmd0aDtmb3IoO3I8aTtyKyspbj1lW3JdLFZuW25dPVZuW25dfHxbXSxWbltuXS51bnNoaWZ0KHQpfSxwcmVmaWx0ZXI6ZnVuY3Rpb24oZSx0KXt0P1huLnVuc2hpZnQoZSk6WG4ucHVzaChlKX19KSx2LlR3ZWVuPVluLFluLnByb3RvdHlwZT17Y29uc3RydWN0b3I6WW4saW5pdDpmdW5jdGlvbihlLHQsbixyLGkscyl7dGhpcy5lbGVtPWUsdGhpcy5wcm9wPW4sdGhpcy5lYXNpbmc9aXx8InN3aW5nIix0aGlzLm9wdGlvbnM9dCx0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9cix0aGlzLnVuaXQ9c3x8KHYuY3NzTnVtYmVyW25dPyIiOiJweCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgZT1Zbi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gZSYmZS5nZXQ/ZS5nZXQodGhpcyk6WW4ucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGUpe3ZhciB0LG49WW4ucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMub3B0aW9ucy5kdXJhdGlvbj90aGlzLnBvcz10PXYuZWFzaW5nW3RoaXMuZWFzaW5nXShlLHRoaXMub3B0aW9ucy5kdXJhdGlvbiplLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOnRoaXMucG9zPXQ9ZSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqdCt0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxuJiZuLnNldD9uLnNldCh0aGlzKTpZbi5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSxZbi5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9WW4ucHJvdG90eXBlLFluLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZS5lbGVtW2UucHJvcF09PW51bGx8fCEhZS5lbGVtLnN0eWxlJiZlLmVsZW0uc3R5bGVbZS5wcm9wXSE9bnVsbD8odD12LmNzcyhlLmVsZW0sZS5wcm9wLCExLCIiKSwhdHx8dD09PSJhdXRvIj8wOnQpOmUuZWxlbVtlLnByb3BdfSxzZXQ6ZnVuY3Rpb24oZSl7di5meC5zdGVwW2UucHJvcF0/di5meC5zdGVwW2UucHJvcF0oZSk6ZS5lbGVtLnN0eWxlJiYoZS5lbGVtLnN0eWxlW3YuY3NzUHJvcHNbZS5wcm9wXV0hPW51bGx8fHYuY3NzSG9va3NbZS5wcm9wXSk/di5zdHlsZShlLmVsZW0sZS5wcm9wLGUubm93K2UudW5pdCk6ZS5lbGVtW2UucHJvcF09ZS5ub3d9fX0sWW4ucHJvcEhvb2tzLnNjcm9sbFRvcD1Zbi5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGUpe2UuZWxlbS5ub2RlVHlwZSYmZS5lbGVtLnBhcmVudE5vZGUmJihlLmVsZW1bZS5wcm9wXT1lLm5vdyl9fSx2LmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGUsdCl7dmFyIG49di5mblt0XTt2LmZuW3RdPWZ1bmN0aW9uKHIsaSxzKXtyZXR1cm4gcj09bnVsbHx8dHlwZW9mIHI9PSJib29sZWFuInx8IWUmJnYuaXNGdW5jdGlvbihyKSYmdi5pc0Z1bmN0aW9uKGkpP24uYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShabih0LCEwKSxyLGkscyl9fSksdi5mbi5leHRlbmQoe2ZhZGVUbzpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5maWx0ZXIoR3QpLmNzcygib3BhY2l0eSIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6dH0sZSxuLHIpfSxhbmltYXRlOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpPXYuaXNFbXB0eU9iamVjdChlKSxzPXYuc3BlZWQodCxuLHIpLG89ZnVuY3Rpb24oKXt2YXIgdD1Lbih0aGlzLHYuZXh0ZW5kKHt9LGUpLHMpO2kmJnQuc3RvcCghMCl9O3JldHVybiBpfHxzLnF1ZXVlPT09ITE/dGhpcy5lYWNoKG8pOnRoaXMucXVldWUocy5xdWV1ZSxvKX0sc3RvcDpmdW5jdGlvbihlLG4scil7dmFyIGk9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdG9wO2RlbGV0ZSBlLnN0b3AsdChyKX07cmV0dXJuIHR5cGVvZiBlIT0ic3RyaW5nIiYmKHI9bixuPWUsZT10KSxuJiZlIT09ITEmJnRoaXMucXVldWUoZXx8ImZ4IixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ITAsbj1lIT1udWxsJiZlKyJxdWV1ZUhvb2tzIixzPXYudGltZXJzLG89di5fZGF0YSh0aGlzKTtpZihuKW9bbl0mJm9bbl0uc3RvcCYmaShvW25dKTtlbHNlIGZvcihuIGluIG8pb1tuXSYmb1tuXS5zdG9wJiZXbi50ZXN0KG4pJiZpKG9bbl0pO2ZvcihuPXMubGVuZ3RoO24tLTspc1tuXS5lbGVtPT09dGhpcyYmKGU9PW51bGx8fHNbbl0ucXVldWU9PT1lKSYmKHNbbl0uYW5pbS5zdG9wKHIpLHQ9ITEscy5zcGxpY2UobiwxKSk7KHR8fCFyKSYmdi5kZXF1ZXVlKHRoaXMsZSl9KX19KSx2LmVhY2goe3NsaWRlRG93bjpabigic2hvdyIpLHNsaWRlVXA6Wm4oImhpZGUiKSxzbGlkZVRvZ2dsZTpabigidG9nZ2xlIiksZmFkZUluOntvcGFjaXR5OiJzaG93In0sZmFkZU91dDp7b3BhY2l0eToiaGlkZSJ9LGZhZGVUb2dnbGU6e29wYWNpdHk6InRvZ2dsZSJ9fSxmdW5jdGlvbihlLHQpe3YuZm5bZV09ZnVuY3Rpb24oZSxuLHIpe3JldHVybiB0aGlzLmFuaW1hdGUodCxlLG4scil9fSksdi5zcGVlZD1mdW5jdGlvbihlLHQsbil7dmFyIHI9ZSYmdHlwZW9mIGU9PSJvYmplY3QiP3YuZXh0ZW5kKHt9LGUpOntjb21wbGV0ZTpufHwhbiYmdHx8di5pc0Z1bmN0aW9uKGUpJiZlLGR1cmF0aW9uOmUsZWFzaW5nOm4mJnR8fHQmJiF2LmlzRnVuY3Rpb24odCkmJnR9O3IuZHVyYXRpb249di5meC5vZmY/MDp0eXBlb2Ygci5kdXJhdGlvbj09Im51bWJlciI/ci5kdXJhdGlvbjpyLmR1cmF0aW9uIGluIHYuZnguc3BlZWRzP3YuZnguc3BlZWRzW3IuZHVyYXRpb25dOnYuZnguc3BlZWRzLl9kZWZhdWx0O2lmKHIucXVldWU9PW51bGx8fHIucXVldWU9PT0hMClyLnF1ZXVlPSJmeCI7cmV0dXJuIHIub2xkPXIuY29tcGxldGUsci5jb21wbGV0ZT1mdW5jdGlvbigpe3YuaXNGdW5jdGlvbihyLm9sZCkmJnIub2xkLmNhbGwodGhpcyksci5xdWV1ZSYmdi5kZXF1ZXVlKHRoaXMsci5xdWV1ZSl9LHJ9LHYuZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHN3aW5nOmZ1bmN0aW9uKGUpe3JldHVybi41LU1hdGguY29zKGUqTWF0aC5QSSkvMn19LHYudGltZXJzPVtdLHYuZng9WW4ucHJvdG90eXBlLmluaXQsdi5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGUsbj12LnRpbWVycyxyPTA7cW49di5ub3coKTtmb3IoO3I8bi5sZW5ndGg7cisrKWU9bltyXSwhZSgpJiZuW3JdPT09ZSYmbi5zcGxpY2Uoci0tLDEpO24ubGVuZ3RofHx2LmZ4LnN0b3AoKSxxbj10fSx2LmZ4LnRpbWVyPWZ1bmN0aW9uKGUpe2UoKSYmdi50aW1lcnMucHVzaChlKSYmIVJuJiYoUm49c2V0SW50ZXJ2YWwodi5meC50aWNrLHYuZnguaW50ZXJ2YWwpKX0sdi5meC5pbnRlcnZhbD0xMyx2LmZ4LnN0b3A9ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKFJuKSxSbj1udWxsfSx2LmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSx2LmZ4LnN0ZXA9e30sdi5leHByJiZ2LmV4cHIuZmlsdGVycyYmKHYuZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGUpe3JldHVybiB2LmdyZXAodi50aW1lcnMsZnVuY3Rpb24odCl7cmV0dXJuIGU9PT10LmVsZW19KS5sZW5ndGh9KTt2YXIgZXI9L14oPzpib2R5fGh0bWwpJC9pO3YuZm4ub2Zmc2V0PWZ1bmN0aW9uKGUpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGU9PT10P3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3Yub2Zmc2V0LnNldE9mZnNldCh0aGlzLGUsdCl9KTt2YXIgbixyLGkscyxvLHUsYSxmPXt0b3A6MCxsZWZ0OjB9LGw9dGhpc1swXSxjPWwmJmwub3duZXJEb2N1bWVudDtpZighYylyZXR1cm47cmV0dXJuKHI9Yy5ib2R5KT09PWw/di5vZmZzZXQuYm9keU9mZnNldChsKToobj1jLmRvY3VtZW50RWxlbWVudCx2LmNvbnRhaW5zKG4sbCk/KHR5cGVvZiBsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCE9InVuZGVmaW5lZCImJihmPWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLGk9dHIoYykscz1uLmNsaWVudFRvcHx8ci5jbGllbnRUb3B8fDAsbz1uLmNsaWVudExlZnR8fHIuY2xpZW50TGVmdHx8MCx1PWkucGFnZVlPZmZzZXR8fG4uc2Nyb2xsVG9wLGE9aS5wYWdlWE9mZnNldHx8bi5zY3JvbGxMZWZ0LHt0b3A6Zi50b3ArdS1zLGxlZnQ6Zi5sZWZ0K2Etb30pOmYpfSx2Lm9mZnNldD17Ym9keU9mZnNldDpmdW5jdGlvbihlKXt2YXIgdD1lLm9mZnNldFRvcCxuPWUub2Zmc2V0TGVmdDtyZXR1cm4gdi5zdXBwb3J0LmRvZXNOb3RJbmNsdWRlTWFyZ2luSW5Cb2R5T2Zmc2V0JiYodCs9cGFyc2VGbG9hdCh2LmNzcyhlLCJtYXJnaW5Ub3AiKSl8fDAsbis9cGFyc2VGbG9hdCh2LmNzcyhlLCJtYXJnaW5MZWZ0IikpfHwwKSx7dG9wOnQsbGVmdDpufX0sc2V0T2Zmc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj12LmNzcyhlLCJwb3NpdGlvbiIpO3I9PT0ic3RhdGljIiYmKGUuc3R5bGUucG9zaXRpb249InJlbGF0aXZlIik7dmFyIGk9dihlKSxzPWkub2Zmc2V0KCksbz12LmNzcyhlLCJ0b3AiKSx1PXYuY3NzKGUsImxlZnQiKSxhPShyPT09ImFic29sdXRlInx8cj09PSJmaXhlZCIpJiZ2LmluQXJyYXkoImF1dG8iLFtvLHVdKT4tMSxmPXt9LGw9e30sYyxoO2E/KGw9aS5wb3NpdGlvbigpLGM9bC50b3AsaD1sLmxlZnQpOihjPXBhcnNlRmxvYXQobyl8fDAsaD1wYXJzZUZsb2F0KHUpfHwwKSx2LmlzRnVuY3Rpb24odCkmJih0PXQuY2FsbChlLG4scykpLHQudG9wIT1udWxsJiYoZi50b3A9dC50b3Atcy50b3ArYyksdC5sZWZ0IT1udWxsJiYoZi5sZWZ0PXQubGVmdC1zLmxlZnQraCksInVzaW5nImluIHQ/dC51c2luZy5jYWxsKGUsZik6aS5jc3MoZil9fSx2LmZuLmV4dGVuZCh7cG9zaXRpb246ZnVuY3Rpb24oKXtpZighdGhpc1swXSlyZXR1cm47dmFyIGU9dGhpc1swXSx0PXRoaXMub2Zmc2V0UGFyZW50KCksbj10aGlzLm9mZnNldCgpLHI9ZXIudGVzdCh0WzBdLm5vZGVOYW1lKT97dG9wOjAsbGVmdDowfTp0Lm9mZnNldCgpO3JldHVybiBuLnRvcC09cGFyc2VGbG9hdCh2LmNzcyhlLCJtYXJnaW5Ub3AiKSl8fDAsbi5sZWZ0LT1wYXJzZUZsb2F0KHYuY3NzKGUsIm1hcmdpbkxlZnQiKSl8fDAsci50b3ArPXBhcnNlRmxvYXQodi5jc3ModFswXSwiYm9yZGVyVG9wV2lkdGgiKSl8fDAsci5sZWZ0Kz1wYXJzZUZsb2F0KHYuY3NzKHRbMF0sImJvcmRlckxlZnRXaWR0aCIpKXx8MCx7dG9wOm4udG9wLXIudG9wLGxlZnQ6bi5sZWZ0LXIubGVmdH19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXMub2Zmc2V0UGFyZW50fHxpLmJvZHk7d2hpbGUoZSYmIWVyLnRlc3QoZS5ub2RlTmFtZSkmJnYuY3NzKGUsInBvc2l0aW9uIik9PT0ic3RhdGljIillPWUub2Zmc2V0UGFyZW50O3JldHVybiBlfHxpLmJvZHl9KX19KSx2LmVhY2goe3Njcm9sbExlZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24oZSxuKXt2YXIgcj0vWS8udGVzdChuKTt2LmZuW2VdPWZ1bmN0aW9uKGkpe3JldHVybiB2LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKGUsaSxzKXt2YXIgbz10cihlKTtpZihzPT09dClyZXR1cm4gbz9uIGluIG8/b1tuXTpvLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtpXTplW2ldO28/by5zY3JvbGxUbyhyP3Yobykuc2Nyb2xsTGVmdCgpOnMscj9zOnYobykuc2Nyb2xsVG9wKCkpOmVbaV09c30sZSxpLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSksdi5lYWNoKHtIZWlnaHQ6ImhlaWdodCIsV2lkdGg6IndpZHRoIn0sZnVuY3Rpb24oZSxuKXt2LmVhY2goe3BhZGRpbmc6ImlubmVyIitlLGNvbnRlbnQ6biwiIjoib3V0ZXIiK2V9LGZ1bmN0aW9uKHIsaSl7di5mbltpXT1mdW5jdGlvbihpLHMpe3ZhciBvPWFyZ3VtZW50cy5sZW5ndGgmJihyfHx0eXBlb2YgaSE9ImJvb2xlYW4iKSx1PXJ8fChpPT09ITB8fHM9PT0hMD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIHYuYWNjZXNzKHRoaXMsZnVuY3Rpb24obixyLGkpe3ZhciBzO3JldHVybiB2LmlzV2luZG93KG4pP24uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyJjbGllbnQiK2VdOm4ubm9kZVR5cGU9PT05PyhzPW4uZG9jdW1lbnRFbGVtZW50LE1hdGgubWF4KG4uYm9keVsic2Nyb2xsIitlXSxzWyJzY3JvbGwiK2VdLG4uYm9keVsib2Zmc2V0IitlXSxzWyJvZmZzZXQiK2VdLHNbImNsaWVudCIrZV0pKTppPT09dD92LmNzcyhuLHIsaSx1KTp2LnN0eWxlKG4scixpLHUpfSxuLG8/aTp0LG8sbnVsbCl9fSl9KSxlLmpRdWVyeT1lLiQ9dix0eXBlb2YgZGVmaW5lPT0iZnVuY3Rpb24iJiZkZWZpbmUuYW1kJiZkZWZpbmUuYW1kLmpRdWVyeSYmZGVmaW5lKCJqcXVlcnkiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIHZ9KX0pKHdpbmRvdyk7"}]},{"name":"视频网HTML5播放小工具","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":["https://*.qq.com/*","https://www.weiyun.com/video_*","https://v.youku.com/v_show/id_*","https://vku.youku.com/live/*","https://video.tudou.com/v/*","https://www.iqiyi.com/*","https://www.bilibili.com/*","https://www.ixigua.com/*","http://www.le.com/ptv/vplay/*","https://www.le.com/ptv/vplay/*","https://www.acfun.cn/*","http://v.pptv.com/show/*","https://v.pptv.com/show/*","http://www.miguvideo.com/*","https://www.miguvideo.com/*","https://tv.sohu.com/*","https://film.sohu.com/album/*","https://www.mgtv.com/*","http://m.fun.tv/*","https://m.fun.tv/*","http://www.fun.tv/vplay/*","https://www.fun.tv/vplay/*","https://*.163.com/*","https://*.icourse163.org/*","https://*.sina.com.cn/*","https://video.sina.cn/*","https://k.sina.cn/*","https://weibo.com/*","https://*.weibo.com/*","https://pan.baidu.com/*","https://yun.baidu.com/*","http://v.ifeng.com/*","https://v.ifeng.com/*","http://news.mtime.com/*","http://video.mtime.com/*","https://www.youtube.com/watch?v=*","https://www.ted.com/talks/*","https://www.yy.com/*","https://v.huya.com/play/*","https://www.huya.com/*","https://v.douyu.com/*","https://www.douyu.com/*","http://star.longzhu.com/*","https://star.longzhu.com/*","https://www.zhanqi.tv/*","https://www.yunbtv.com/vodplay/*","*://www.dililitv.com/*","*://www.dynamicpuer.com/tv-play-*","http://www.kalidm.com/bangumi/v_*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":["/(^[^:\\/#\\?]*:\\/\\/([^#\\?\\/]*\\.)?weibo\\.com(:[0-9]{1,5})?\\/.*$)/"],"orig_excludes":["https://user.qzone.qq.com/*"],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-start","orig_noframes":true,"orig_connects":[]}},"storage":{"data":{"yk_switchQuality":"btrue"},"ts":1605096227696},"enabled":true,"position":3,"file_url":"https://greasyfork.org/scripts/30545-%E8%A7%86%E9%A2%91%E7%AB%99%E5%90%AF%E7%94%A8html5%E6%92%AD%E6%94%BE%E5%99%A8/code/%E8%A7%86%E9%A2%91%E7%AB%99%E5%90%AF%E7%94%A8html5%E6%92%AD%E6%94%BE%E5%99%A8.user.js","uuid":"4135410d-5e42-4172-b95a-5f0f4eae8c6d","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAg6KeG6aKR572RSFRNTDXmkq3mlL7lsI/lt6XlhbcKLy8gQGRlc2NyaXB0aW9uIOS4ieWkp+WKn+iDvSDjgILlkK/nlKhIVE1MNeaSreaUvu+8m+S4h+iDvee9kemhteWFqOWxj++8m+a3u+WKoOW/q+aNt+mUru+8muW/q+i/m+OAgeW/q+mAgOOAgeaaguWBnC/mkq3mlL7jgIHpn7Pph4/jgIHkuIvkuIDpm4bjgIHliIfmjaIo572R6aG1KeWFqOWxj+OAgeS4iuS4i+W4p+OAgeaSreaUvumAn+W6puOAguaUr+aMgeinhumikeermeeCue+8muayueeuoeOAgVRFROOAgeS8mC7lnJ/jgIFRUeOAgULnq5njgIHopb/nk5zop4bpopHjgIHniLHlpYfoibrjgIFB56uZ44CBUFBUVuOAgeiKkuaenFRW44CB5ZKq5ZKV6KeG6aKR44CB5paw5rWq44CB5b6u5Y2a44CB572R5piTW+WoseS5kOOAgeS6keivvuWgguOAgeaWsOmXu13jgIHmkJzni5DjgIHpo47ooYzjgIHnmb7luqbkupHop4bpopHnrYnvvJvnm7Tmkq3vvJrmlpfpsbzjgIFZWeOAgeiZjueJmeOAgem+meePoOOAgeaImOaXl+OAguWPr+WinuWKoOiHquWumuS5ieermeeCuQovLyBAaG9tZXBhZ2UgICBodHRwczovL2Jicy5rYWZhbi5jbi90aHJlYWQtMjA5MzAxNC0xLTEuaHRtbAovLyBAaW5jbHVkZSAgICBodHRwczovLyoucXEuY29tLyoKLy8gQGV4Y2x1ZGUgICAgaHR0cHM6Ly91c2VyLnF6b25lLnFxLmNvbS8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vd3d3LndlaXl1bi5jb20vdmlkZW9fKgovLyBAaW5jbHVkZSAgICBodHRwczovL3YueW91a3UuY29tL3Zfc2hvdy9pZF8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vdmt1LnlvdWt1LmNvbS9saXZlLyoKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly92aWRlby50dWRvdS5jb20vdi8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vd3d3LmlxaXlpLmNvbS8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vd3d3LmJpbGliaWxpLmNvbS8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vd3d3Lml4aWd1YS5jb20vKgovLyBAaW5jbHVkZSAgICBodHRwOi8vd3d3LmxlLmNvbS9wdHYvdnBsYXkvKgovLyBAaW5jbHVkZSAgICBodHRwczovL3d3dy5sZS5jb20vcHR2L3ZwbGF5LyoKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly93d3cuYWNmdW4uY24vKgovLyBAaW5jbHVkZSAgICBodHRwOi8vdi5wcHR2LmNvbS9zaG93LyoKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly92LnBwdHYuY29tL3Nob3cvKgovLyBAaW5jbHVkZSAgICBodHRwOi8vd3d3Lm1pZ3V2aWRlby5jb20vKgovLyBAaW5jbHVkZSAgICBodHRwczovL3d3dy5taWd1dmlkZW8uY29tLyoKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly90di5zb2h1LmNvbS8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vZmlsbS5zb2h1LmNvbS9hbGJ1bS8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vd3d3Lm1ndHYuY29tLyoKLy8gQGluY2x1ZGUgICAgaHR0cDovL20uZnVuLnR2LyoKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly9tLmZ1bi50di8qCi8vIEBpbmNsdWRlICAgIGh0dHA6Ly93d3cuZnVuLnR2L3ZwbGF5LyoKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly93d3cuZnVuLnR2L3ZwbGF5LyoKLy8gQHZlcnNpb24gICAgMS43LjAKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly8qLjE2My5jb20vKgovLyBAaW5jbHVkZSAgICBodHRwczovLyouaWNvdXJzZTE2My5vcmcvKgovLyBAaW5jbHVkZSAgICBodHRwczovLyouc2luYS5jb20uY24vKgovLyBAaW5jbHVkZSAgICBodHRwczovL3ZpZGVvLnNpbmEuY24vKgovLyBAaW5jbHVkZSAgICBodHRwczovL2suc2luYS5jbi8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vd2VpYm8uY29tLyoKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly8qLndlaWJvLmNvbS8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vcGFuLmJhaWR1LmNvbS8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8veXVuLmJhaWR1LmNvbS8qCi8vIEBpbmNsdWRlICAgIGh0dHA6Ly92LmlmZW5nLmNvbS8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vdi5pZmVuZy5jb20vKgovLyBAaW5jbHVkZSAgICBodHRwOi8vbmV3cy5tdGltZS5jb20vKgovLyBAaW5jbHVkZSAgICBodHRwOi8vdmlkZW8ubXRpbWUuY29tLyoKLy8gQEdNX2luZm8KLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj0qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vd3d3LnRlZC5jb20vdGFsa3MvKgovLyBAbm9mcmFtZXMKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly93d3cueXkuY29tLyoKLy8gQGluY2x1ZGUgICAgaHR0cHM6Ly92Lmh1eWEuY29tL3BsYXkvKgovLyBAaW5jbHVkZSAgICBodHRwczovL3d3dy5odXlhLmNvbS8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vdi5kb3V5dS5jb20vKgovLyBAaW5jbHVkZSAgICBodHRwczovL3d3dy5kb3V5dS5jb20vKgovLyBAaW5jbHVkZSAgICBodHRwOi8vc3Rhci5sb25nemh1LmNvbS8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vc3Rhci5sb25nemh1LmNvbS8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vd3d3LnpoYW5xaS50di8qCi8vIEBydW4tYXQgICAgIGRvY3VtZW50LXN0YXJ0Ci8vIEBpbmNsdWRlICAgIGh0dHBzOi8vd3d3Lnl1bmJ0di5jb20vdm9kcGxheS8qCi8vIEBpbmNsdWRlICAgICo6Ly93d3cuZGlsaWxpdHYuY29tLyoKLy8gQGluY2x1ZGUgICAgKjovL3d3dy5keW5hbWljcHVlci5jb20vdHYtcGxheS0qCi8vIEBpbmNsdWRlICAgIGh0dHA6Ly93d3cua2FsaWRtLmNvbS9iYW5ndW1pL3ZfKgovLyBAZ3JhbnQgICAgICB1bnNhZmVXaW5kb3cKLy8gQGdyYW50ICAgICAgR01fYWRkU3R5bGUKLy8gQGdyYW50ICAgICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZAovLyBAZ3JhbnQgICAgICBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgICAgICBHTV9nZXRWYWx1ZQovLyBAbmFtZXNwYWNlICBodHRwczovL2dyZWFzeWZvcmsub3JnL3VzZXJzLzcwMzYKLy8gPT0vVXNlclNjcmlwdD09CgondXNlIHN0cmljdCc7CmNvbnN0IHcgPSB1bnNhZmVXaW5kb3cgfHwgd2luZG93Owpjb25zdCB7IGhvc3QsIHBhdGhuYW1lOiBwYXRoIH0gPSBsb2NhdGlvbjsKY29uc3QgZCA9IGRvY3VtZW50LCBmaW5kID0gW10uZmluZDsKbGV0IHYsIF9mcCwgX2ZzLCBieTsgLy8gZG9jdW1lbnQuYm9keQpjb25zdCBvYnNlcnZlT3B0ID0ge2NoaWxkTGlzdCA6IHRydWUsIHN1YnRyZWUgOiB0cnVlfTsKY29uc3Qgbm9vcEZuID0gKCkgPT4ge307CmNvbnN0IHEgPSAoY3NzLCBwID0gZCkgPT4gcC5xdWVyeVNlbGVjdG9yKGNzcyk7CmNvbnN0IGRlbEVsZW0gPSBlID0+IGUucmVtb3ZlKCk7CmNvbnN0ICQkID0gZnVuY3Rpb24oYywgY2IgPSBkZWxFbGVtLCBkb2MgPSBkKSB7CglpZiAoIWMgfHwgIWMubGVuZ3RoKSByZXR1cm47CglpZiAodHlwZW9mIGMgPT09ICdzdHJpbmcnKSBjID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoYyk7CglpZiAoIWNiKSByZXR1cm4gYzsKCWZvciAobGV0IGUgb2YgYykgaWYgKGUgJiYgY2IoZSk9PT0gITEpIGJyZWFrOwp9Owpjb25zdCBnbUZ1bmNPZkNoZWNrTWVudSA9ICh0aXRsZSwgc2F2ZU5hbWUsIGRlZmF1bHRWYWwgPSB0cnVlKSA9PiB7Cgljb25zdCByID0gR01fZ2V0VmFsdWUoc2F2ZU5hbWUsIGRlZmF1bHRWYWwpOwoJaWYgKHIpIHRpdGxlID0gJ+KImiAgJysgdGl0bGU7CglHTV9yZWdpc3Rlck1lbnVDb21tYW5kKHRpdGxlLCAoKSA9PiB7CgkJR01fc2V0VmFsdWUoc2F2ZU5hbWUsICFyKTsKCQlsb2NhdGlvbi5yZWxvYWQoKTsKCX0pOwoJcmV0dXJuIHI7Cn07CmNvbnN0IHIxID0gKHJlZ3AsIHMpID0+IHJlZ3AudGVzdChzKSAmJiBSZWdFeHAuJDE7CmNvbnN0IGxvZyA9IGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSwgJyVj6ISa5pysWyVzXSDlj43ppojvvJolc1xuJXMnLCAnY29sb3I6I2MzYztmb250LXNpemU6MS41ZW0nLAoJR01faW5mby5zY3JpcHQubmFtZSwgR01faW5mby5zY3JpcHQuaG9tZXBhZ2UpOwpjb25zdCBzbGVlcCA9IG1zID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4geyBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSB9KTsKY29uc3QgZ2V0U3R5bGUgPSAobywgcykgPT4gewoJaWYgKG8uc3R5bGVbc10pIHJldHVybiBvLnN0eWxlW3NdOwoJaWYgKGdldENvbXB1dGVkU3R5bGUpIHsKCQljb25zdCB4ID0gZ2V0Q29tcHV0ZWRTdHlsZShvLCAnJyk7CgkJcyA9IHMucmVwbGFjZSgvKFtBLVpdKS9nLCctJDEnKS50b0xvd2VyQ2FzZSgpOwoJCXJldHVybiB4ICYmIHguZ2V0UHJvcGVydHlWYWx1ZShzKTsKCX0KfTsKY29uc3QgZG9DbGljayA9IGUgPT4gewoJaWYgKHR5cGVvZiBlID09PSAnc3RyaW5nJykgZSA9IHEoZSk7CglpZiAoZSkgeyBlLmNsaWNrID8gZS5jbGljaygpIDogZS5kaXNwYXRjaEV2ZW50KG5ldyBNb3VzZUV2ZW50KCdjbGljaycpKSB9Owp9Owpjb25zdCBjbGlja0R1YWxCdXR0b24gPSBidG4gPT4geyAvLyAy5ZCIMSDmjInpkq4KCSFidG4ubmV4dFNpYmxpbmcgfHwgZ2V0U3R5bGUoYnRuLCAnZGlzcGxheScpICE9PSAnbm9uZScgPyBkb0NsaWNrKGJ0bikgOiBkb0NsaWNrKGJ0bi5uZXh0U2libGluZyk7Cn07CmNvbnN0IGludGVydmFsUXVlcnkgPSAoY2IsIGNvbmRpdGlvbiwgc3RvcCA9IHRydWUpID0+IHsKCWNvbnN0IGZuID0gdHlwZW9mIGNvbmRpdGlvbiA9PT0gJ3N0cmluZycgPyBxLmJpbmQobnVsbCwgY29uZGl0aW9uKSA6IGNvbmRpdGlvbjsKCWNvbnN0IHQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CgkJY29uc3QgciA9IGZuKCk7CgkJaWYgKHIpIHsKCQkJc3RvcCAmJiBjbGVhckludGVydmFsKHQpOwoJCQljYihyKTsKCQl9Cgl9LCAzMDApOwp9Owpjb25zdCBnb05leHRNViA9ICgpID0+IHsKCWNvbnN0IG0gPSBwYXRoLm1hdGNoKC9eKC4rKShcZCspKFxEKikkLyk7Cgljb25zdCBkID0gK21bMl0gKyAxOwoJbG9jYXRpb24uYXNzaWduKG1bMV0gKyBkICsgbVszXSk7Cn07CmNvbnN0IGZpcmVmb3hWZXIgPSByMSgvRmlyZWZveFwvKFxkKykvLCBuYXZpZ2F0b3IudXNlckFnZW50KTsKY29uc3QgaXNFZGdlID0gLyBFZGdlP1wvLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOwpjb25zdCBmYWtlVUEgPSB1YSA9PiBPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLCAndXNlckFnZW50JywgewoJdmFsdWU6IHVhLAoJd3JpdGFibGU6IGZhbHNlLAoJY29uZmlndXJhYmxlOiBmYWxzZSwKCWVudW1lcmFibGU6IHRydWUKfSk7CmNvbnN0IGdldE1haW5Eb21haW4gPSBob3N0ID0+IHsKCWNvbnN0IGEgPSBob3N0LnNwbGl0KCcuJyk7CglsZXQgaSA9IGEubGVuZ3RoIC0gMjsKCWlmICgvXihjb218dHZ8bmV0fG9yZ3xnb3Z8ZWR1KSQvLnRlc3QoYVtpXSkpIGktLTsKCXJldHVybiBhW2ldOwp9Owpjb25zdCB1YV9jaHJvbWUgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4xOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNjYuMC4zNjI2LjEyMSBTYWZhcmkvNTM3LjM2JzsKCmNsYXNzIEZ1bGxTY3JlZW4gewoJY29uc3RydWN0b3IoZSkgewoJCWxldCBmbiA9IGQuZXhpdEZ1bGxzY3JlZW4gfHwgZC53ZWJraXRFeGl0RnVsbHNjcmVlbiB8fCBkLm1vekNhbmNlbEZ1bGxTY3JlZW4gfHwgZC5tc0V4aXRGdWxsc2NyZWVuIHx8IG5vb3BGbjsKCQl0aGlzLmV4aXQgPSBmbi5iaW5kKGQpOwoJCWZuID0gZS5yZXF1ZXN0RnVsbHNjcmVlbiB8fCBlLndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuIHx8IGUubW96UmVxdWVzdEZ1bGxTY3JlZW4gfHwgZS5tc1JlcXVlc3RGdWxsU2NyZWVuIHx8IG5vb3BGbjsKCQl0aGlzLmVudGVyID0gZm4uYmluZChlKTsKCX0KCglzdGF0aWMgaXNGdWxsKCkgewoJCXJldHVybiAhIShkLmZ1bGxzY3JlZW4gfHwgZC53ZWJraXRJc0Z1bGxTY3JlZW4gfHwgZC5tb3pGdWxsU2NyZWVuIHx8CgkJZC5mdWxsc2NyZWVuRWxlbWVudCB8fCBkLndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50IHx8IGQubW96RnVsbFNjcmVlbkVsZW1lbnQpOwoJfQoKCXRvZ2dsZSgpIHsKCQlGdWxsU2NyZWVuLmlzRnVsbCgpID8gdGhpcy5leGl0KCkgOiB0aGlzLmVudGVyKCk7Cgl9Cn0KCi8v5LiH6IO9572R6aG15YWo5bGPLCDlj4LogIPkuobvvJpodHRwczovL2dpdGh1Yi5jb20vZ29veWllL3lraDVwCmNsYXNzIEZ1bGxQYWdlIHsKCWNvbnN0cnVjdG9yKHZpZGVvLCBvblN3aXRjaCkgewoJCXRoaXMuX3ZpZGVvID0gdmlkZW87CgkJdGhpcy5faXNGdWxsID0gITE7CgkJdGhpcy5fb25Td2l0Y2ggPSBvblN3aXRjaDsKCQl0aGlzLl9jaGVja0NvbnRhaW5lcigpOwoJCUdNX2FkZFN0eWxlKAoJCQlgLmdtLWZwLWJvZHkgLmdtLWZwLXpUb3AgewoJCQkJcG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7CgkJCQl6LWluZGV4OiAyMTQ3NDgzNjQ3ICFpbXBvcnRhbnQ7CgkJCX0KCQkJLmdtLWZwLXdyYXBwZXIsIC5nbS1mcC1ib2R5eyBvdmVyZmxvdzpoaWRkZW4gIWltcG9ydGFudDsgfQoJCQkuZ20tZnAtd3JhcHBlciAuZ20tZnAtaW5uZXJCb3ggewoJCQkJd2lkdGg6IDEwMCUgIWltcG9ydGFudDsKCQkJCWhlaWdodDogMTAwJSAhaW1wb3J0YW50OwoJCQl9CgkJCS5nbS1mcC13cmFwcGVyIHsKCQkJCWRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7CgkJCQlwb3NpdGlvbjogZml4ZWQgIWltcG9ydGFudDsKCQkJCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7CgkJCQloZWlnaHQ6IDEwMCUgIWltcG9ydGFudDsKCQkJCXRvcDogMCAhaW1wb3J0YW50OwoJCQkJbGVmdDogMCAhaW1wb3J0YW50OwoJCQkJYmFja2dyb3VuZDogIzAwMCAhaW1wb3J0YW50OwoJCQkJei1pbmRleDogMjE0NzQ4MzY0NyAhaW1wb3J0YW50OwoJCQl9YAoJCSk7Cgl9CgoJZ2V0UGxheWVyQ29udGFpbmVyKHZpZGVvKSB7CgkJbGV0IGUgPSB2aWRlbywgcCA9IGUucGFyZW50Tm9kZTsKCQljb25zdCB7IGNsaWVudFdpZHRoOiB3aWQsIGNsaWVudEhlaWdodDogaCB9ID0gZTsKCQlkbyB7CgkJCWUuY2xhc3NMaXN0LmFkZCgnZ20tZnAtaW5uZXJCb3gnKTsKCQkJZSA9IHA7CgkJCXAgPSBlLnBhcmVudE5vZGU7CgkJfSB3aGlsZSAoZS5ub2RlTmFtZSA9PSAnRElWJyAmJiBwLmNsaWVudFdpZHRoLXdpZCA8IDUgJiYgcC5jbGllbnRIZWlnaHQtaCA8IDUpOwoJCS8vZSDkuLrov5Tlm57lgLzvvIzlnKjmraTkuYvlkI7kuI3og73lj5jkuoYKCQl3aGlsZSAocCAhPT0gYnkpIHsKCQkJcC5jbGFzc0xpc3QuYWRkKCdnbS1mcC16VG9wJyk7CgkJCXAgPSBwLnBhcmVudE5vZGU7CgkJfQoJCXJldHVybiBlOwoJfQoKCV9jaGVja0NvbnRhaW5lcigpIHsKCQl0aGlzLl9jb250YWluZXIgPSB0aGlzLl9jb250YWluZXIgfHwgdGhpcy5nZXRQbGF5ZXJDb250YWluZXIodGhpcy5fdmlkZW8pOwoJfQoKCWdldCBjb250YWluZXIoKSB7CgkJdGhpcy5fY2hlY2tDb250YWluZXIoKTsKCQlyZXR1cm4gdGhpcy5fY29udGFpbmVyOwoJfQoKCXN0YXRpYyBpc0Z1bGwoZSkgewoJCXJldHVybiB3LmlubmVyV2lkdGggLSBlLmNsaWVudFdpZHRoIDwgNSAmJiB3LmlubmVySGVpZ2h0IC0gZS5jbGllbnRIZWlnaHQgPCA1OwoJfQoKCXRvZ2dsZSgpIHsKCQljb25zdCBjYiA9IHRoaXMuX29uU3dpdGNoOwoJCWlmICghdGhpcy5faXNGdWxsICYmIGNiKSBjYih0cnVlKTsKCQlieS5jbGFzc0xpc3QudG9nZ2xlKCdnbS1mcC1ib2R5Jyk7CgkJdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgnZ20tZnAtd3JhcHBlcicpOwoJCXRoaXMuX2lzRnVsbCA9ICF0aGlzLl9pc0Z1bGw7CgkJaWYgKCF0aGlzLl9pc0Z1bGwgJiYgY2IpIHNldFRpbWVvdXQoY2IsIDE5OSwgITEpOwoJfQp9Cgpjb25zdCB1ID0gZ2V0TWFpbkRvbWFpbihob3N0KTsKY29uc3QgZXZlbnRzID0gewoJb24obmFtZSwgZm4pIHsKCQl0aGlzW25hbWVdID0gZm47Cgl9Cn07CmNvbnN0IGFwcCA9IHsKCWlzTGl2ZTogITEsCglkaXNhYmxlU3BhY2U6ICExLAoJbXVsdGlwbGVWOiAhMSwgLy/lpJrop4bpopHpobXpnaIKCWlzTnVtVVJMOiAhMSwgLy/nvZHlnYDmlbDlrZfliIbpm4YKCWNoZWNrTVYoKSB7CgkJaWYgKCF2IHx8ICF2Lm9mZnNldFdpZHRoKSB2ID0gdGhpcy5maW5kTVYoKTsKCQlyZXR1cm4gdjsKCX0sCgljaGVja0RQbGF5ZXIoKSB7CgkJaWYgKHRoaXMuZHBTaGVsbCkgcmV0dXJuIHRydWU7CgkJaWYgKHRoaXMuZHBTaGVsbCA9IHYuY2xvc2VzdCgnLmRwbGF5ZXInKSkgewoJCQl0aGlzLmJ0bkZQID0gcSgnLmRwbGF5ZXItZnVsbC1pbi1pY29uID4gc3BhbicsIHRoaXMuZHBTaGVsbCk7CgkJCXRoaXMuYnRuRlMgPSBxKCcuZHBsYXllci1mdWxsLWljb24nLCB0aGlzLmRwU2hlbGwpOwoJCQl0aGlzLmJ0blBsYXkgPSB0aGlzLmJ0bk5leHQgPSBfZnMgPSBfZnAgPSBudWxsOwoJCQlpZiAodGhpcy5uZXh0Q1NTKSB0aGlzLmJ0bk5leHQgPSBxKHRoaXMubmV4dENTUyk7CgkJCXRoaXMuZGlzYWJsZVNwYWNlID0gITE7CgkJCXRoaXMuZHBTaGVsbC5jbG9zZXN0KCdib2R5ID4gKicpLmNsYXNzTGlzdC5hZGQoJ2dtLWRwLXpUb3AnKTsKCQkJdGhpcy5kcFNoZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgZXYgPT4gewoJCQkJdGhpcy5idG5GUC5jbGljaygpOwoJCQl9LCB0cnVlKTsKCQl9CgkJcmV0dXJuICEhdGhpcy5kcFNoZWxsOwoJfSwKCWhvdEtleShlKSB7CgkJaWYgKGUuY3RybEtleSB8fCBlLmFsdEtleSB8fCBlLnRhcmdldC5jb250ZW50RWRpdGFibGU9PSd0cnVlJyB8fAoJCQkvSU5QVVR8VEVYVEFSRUF8U0VMRUNULy50ZXN0KGUudGFyZ2V0Lm5vZGVOYW1lKSkgcmV0dXJuOwoJCWlmIChlLnNoaWZ0S2V5ICYmICFbMzIsMTMsMzcsMzldLmluY2x1ZGVzKGUua2V5Q29kZSkpIHJldHVybjsKCQlpZiAodGhpcy5pc0xpdmUgJiYgWzM3LDM5LDc4LDg4LDY3LDkwXS5pbmNsdWRlcyhlLmtleUNvZGUpKSByZXR1cm47CgkJaWYgKHRoaXMuZXh0UGxheWVyICYmIHRoaXMuZXh0UGxheWVyLmNvbnRhaW5zKGUudGFyZ2V0KSAmJiBbMzIsMzcsMzldLmluY2x1ZGVzKGUua2V5Q29kZSkpIHJldHVybjsKCQlpZiAoIXRoaXMuY2hlY2tNVigpKSByZXR1cm47CgkJIXRoaXMuY2hlY2tEUGxheWVyKCkgJiYgdGhpcy5jaGVja1VJKCk7CgkJaWYgKGV2ZW50cy5rZXlkb3duICYmIGV2ZW50cy5rZXlkb3duKGUpKSByZXR1cm47CgkJbGV0IG47CgkJc3dpdGNoIChlLmtleUNvZGUpIHsKCQljYXNlIDMyOiAvL3NwYWNlCgkJCWlmIChlLnNoaWZ0S2V5KSB7CgkJCQl2LnNjcm9sbEludG9WaWV3KCk7CgkJCQl2LmZvY3VzKCk7CgkJCX0gZWxzZSB7CgkJCQlpZiAodGhpcy5kaXNhYmxlU3BhY2UgJiYgYnkgIT0gZS50YXJnZXQpIHJldHVybjsKCQkJCWlmICh0aGlzLmJ0blBsYXkpIGNsaWNrRHVhbEJ1dHRvbih0aGlzLmJ0blBsYXkpOwoJCQkJZWxzZSB2LnBhdXNlZCA/IHYucGxheSgpIDogdi5wYXVzZSgpOwoJCQl9CgkJCWUucHJldmVudERlZmF1bHQoKTsKCQkJYnJlYWs7CgkJY2FzZSAzNzogbiA9IGUuc2hpZnRLZXkgPyAtMjAgOiAtNTsgLy9sZWZ0ICDlv6vpgIA156eSLHNoaWZ05Yqg6YCfCgkJY2FzZSAzOTogLy9yaWdodAoJCQluID0gbiB8fCAoZS5zaGlmdEtleSA/IDIwIDogNSk7IC8v5b+r6L+bNeenkixzaGlmdOWKoOmAnwoJCQl2LmN1cnJlbnRUaW1lICs9IG47CgkJCWJyZWFrOwoJCWNhc2UgNzg6IC8vIE4g5LiL5LiA6aaWCgkJCWlmICh0aGlzLmJ0bk5leHQpIGRvQ2xpY2sodGhpcy5idG5OZXh0KTsKCQkJZWxzZSBpZiAodGhpcy5pc051bVVSTCkgZ29OZXh0TVYoKTsKCQkJYnJlYWs7CgkJY2FzZSAzODogbiA9IDAuMTsgLy/liqDpn7Pph48KCQljYXNlIDQwOiAvL+mZjemfs+mHjwoJCQluID0gbiB8fCAtMC4xOwoJCQluICs9IHYudm9sdW1lOwoJCQluID0gKyBuLnRvRml4ZWQoMSk7CgkJCWlmICgwIDw9IG4gJiYgbiA8PSAxKSB2LnZvbHVtZSA9IG47CgkJCWUucHJldmVudERlZmF1bHQoKTsKCQkJYnJlYWs7CgkJY2FzZSAxMzogLy/lm57ovabplK7jgIIg5YWo5bGPCgkJCWlmIChlLnNoaWZ0S2V5KSB7CgkJCQlfZnAgPyBfZnAudG9nZ2xlKCkgOiBjbGlja0R1YWxCdXR0b24odGhpcy5idG5GUCk7CgkJCX0gZWxzZSB7CgkJCQlfZnMgPyBfZnMudG9nZ2xlKCkgOiBjbGlja0R1YWxCdXR0b24odGhpcy5idG5GUyk7CgkJCX0KCQkJYnJlYWs7CgkJY2FzZSAyNzogLy9lc2MKCQkJaWYgKHRoaXMuZHBTaGVsbCkgcmV0dXJuOwoJCQlpZiAoRnVsbFNjcmVlbi5pc0Z1bGwoKSkgewoJCQkJX2ZzID8gX2ZzLmV4aXQoKSA6IGNsaWNrRHVhbEJ1dHRvbih0aGlzLmJ0bkZTKTsKCQkJfSBlbHNlIGlmIChGdWxsUGFnZS5pc0Z1bGwodikpIHsKCQkJCV9mcCA/IF9mcC50b2dnbGUoKSA6IGNsaWNrRHVhbEJ1dHRvbih0aGlzLmJ0bkZQKTsKCQkJfQoJCQlicmVhazsKCQljYXNlIDY3OiBuID0gMC4xOyAvL+aMiemUrkPvvJrliqDpgJ/mkq3mlL4gKzAuMQoJCWNhc2UgODg6IC8v5oyJ6ZSuWO+8muWHj+mAn+aSreaUviAtMC4xCgkJCW4gPSBuIHx8IC0wLjE7CgkJCW4gKz0gdi5wbGF5YmFja1JhdGU7CgkJCW4gPSArIG4udG9GaXhlZCgyKTsKCQkJaWYgKDAgPCBuICYmIG4gPD0gMTYpIHYucGxheWJhY2tSYXRlID0gbjsKCQkJYnJlYWs7CgkJY2FzZSA5MDogLy/mjInplK5a77ya5q2j5bi46YCf5bqm5pKt5pS+CgkJCXYucGxheWJhY2tSYXRlID0gMTsKCQkJYnJlYWs7CgkJY2FzZSA3MDogbiA9IDAuMDM7IC8v5oyJ6ZSuRu+8muS4i+S4gOW4pwoJCWNhc2UgNjg6IC8v5oyJ6ZSuRO+8muS4iuS4gOW4pwoJCQluID0gbiB8fCAtMC4wMzsKCQkJaWYgKCF2LnBhdXNlZCkgdi5wYXVzZSgpOwoJCQl2LmN1cnJlbnRUaW1lICs9IG47CgkJCWJyZWFrOwoJCWRlZmF1bHQ6IHJldHVybjsKCQl9CgkJZS5zdG9wUHJvcGFnYXRpb24oKTsKCX0sCgljaGVja1VJKCkgewoJCWlmICh0aGlzLndlYmZ1bGxDU1MgJiYgIXRoaXMuYnRuRlApIHRoaXMuYnRuRlAgPSBxKHRoaXMud2ViZnVsbENTUyk7CgkJaWYgKHRoaXMuYnRuRlApIF9mcCA9IG51bGw7CgkJZWxzZSBpZiAoIV9mcCkgX2ZwID0gbmV3IEZ1bGxQYWdlKHYsIHRoaXMuc3dpdGNoRlApOwoKCQlpZiAodGhpcy5mdWxsQ1NTICYmICF0aGlzLmJ0bkZTKSB0aGlzLmJ0bkZTID0gcSh0aGlzLmZ1bGxDU1MpOwoJCWlmICh0aGlzLmJ0bkZTKSBfZnMgPSBudWxsOwoJCWVsc2UgaWYgKCFfZnMpIF9mcyA9IG5ldyBGdWxsU2NyZWVuKHYpOwoKCQlpZiAodGhpcy5uZXh0Q1NTICYmICF0aGlzLmJ0bk5leHQpIHRoaXMuYnRuTmV4dCA9IHEodGhpcy5uZXh0Q1NTKTsKCQlpZiAodGhpcy5wbGF5Q1NTICYmICF0aGlzLmJ0blBsYXkpIHRoaXMuYnRuUGxheSA9IHEodGhpcy5wbGF5Q1NTKTsKCX0sCglzd2l0Y2hGUCh0b0Z1bGwpIHsKCQlpZiAodG9GdWxsKSB7CgkJCWZvciAobGV0IGUgb2YgdGhpcy52U2V0KSB0aGlzLnZpZXdPYnNlcnZlci51bm9ic2VydmUoZSk7CgkJfSBlbHNlIHsKCQkJZm9yIChsZXQgZSBvZiB0aGlzLnZMaXN0KSB0aGlzLnZpZXdPYnNlcnZlci5vYnNlcnZlKGUpOwoJCX0KCX0sCglvbkdyb3dWTGlzdCgpIHsKCQlpZiAodGhpcy52TGlzdC5sZW5ndGggPT0gdGhpcy52Q291bnQpIHJldHVybjsKCQlpZiAodGhpcy52aWV3T2JzZXJ2ZXIpIHsKCQkJZm9yIChsZXQgZSBvZiB0aGlzLnZMaXN0KSB7CgkJCQlpZiAoIXRoaXMudlNldC5oYXMoZSkpIHRoaXMudmlld09ic2VydmVyLm9ic2VydmUoZSk7CgkJCX0KCQl9IGVsc2UgewoJCQljb25zdCBjb25maWcgPSB7CgkJCQlyb290TWFyZ2luOiAnMHB4JywKCQkJCXRocmVzaG9sZDogMC45CgkJCX07CgkJCXRoaXMudmlld09ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKHRoaXMub25JbnRlcnNlY3Rpb24uYmluZCh0aGlzKSwgY29uZmlnKTsKCQkJZm9yIChsZXQgZSBvZiB0aGlzLnZMaXN0KSB0aGlzLnZpZXdPYnNlcnZlci5vYnNlcnZlKGUpOwoJCX0KCQl0aGlzLnZTZXQgPSBuZXcgU2V0KHRoaXMudkxpc3QpOwoJCXRoaXMudkNvdW50ID0gdGhpcy52TGlzdC5sZW5ndGg7Cgl9LAoJb25JbnRlcnNlY3Rpb24oZW50cmllcykgewoJCWlmICh0aGlzLnZMaXN0Lmxlbmd0aCA8IDIpIHJldHVybjsKCQljb25zdCBlbnRyeSA9IGZpbmQuY2FsbChlbnRyaWVzLCBrID0+IGsuaXNJbnRlcnNlY3RpbmcpOwoJCWlmICghZW50cnkgfHwgdiA9PSBlbnRyeS50YXJnZXQpIHJldHVybjsKCQl2ID0gZW50cnkudGFyZ2V0OwoJCV9mcyA9IG5ldyBGdWxsU2NyZWVuKHYpOwoJCV9mcCA9IG5ldyBGdWxsUGFnZSh2LCB0aGlzLnN3aXRjaEZQKTsKCQlldmVudHMuc3dpdGNoTVYgJiYgZXZlbnRzLnN3aXRjaE1WKCk7Cgl9LAoJYmluZEV2ZW50KCkgewoJCWJ5ID0gZC5ib2R5OwoJCWxvZygnYmluZCBldmVudFxuJywgdik7CgkJZXZlbnRzLmZvdW5kTVYgJiYgZXZlbnRzLmZvdW5kTVYoKTsKCQlpZiAoIXRoaXMuaXNMaXZlKSB7CgkJCWNvbnN0IG9uQ2FucGxheSA9IGV2ID0+IHsKCQkJCXYucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheScsIG9uQ2FucGxheSk7CgkJCQl2LnBsYXliYWNrUmF0ZSA9IGxvY2FsU3RvcmFnZS5tdlBsYXlSYXRlIHx8IDE7CgkJCQl2LmFkZEV2ZW50TGlzdGVuZXIoJ3JhdGVjaGFuZ2UnLCBldiA9PiB7CgkJCQkJbG9jYWxTdG9yYWdlLm12UGxheVJhdGUgPSB2LnBsYXliYWNrUmF0ZTsKCQkJCX0pOwoJCQl9OwoJCQl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCBvbkNhbnBsYXkpOwoJCX0KCQljb25zdCBmbiA9IGV2ID0+IHsKCQkJZXZlbnRzLmNhbnBsYXkgJiYgZXZlbnRzLmNhbnBsYXkoKTsKCQkJdi5yZW1vdmVFdmVudExpc3RlbmVyKCdjYW5wbGF5dGhyb3VnaCcsIGZuKTsKCQl9OwoJCWlmICh2LnJlYWR5U3RhdGUgPiAzKSBmbigpOwoJCWVsc2Ugdi5hZGRFdmVudExpc3RlbmVyKCdjYW5wbGF5dGhyb3VnaCcsIGZuKTsKCQlieS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5ob3RLZXkpOwoJCWlmICh0aGlzLmV4dFBsYXllckNTUykgewoJCQljb25zdCB4ID0gdGhpcy5leHRQbGF5ZXIgPSB2LmNsb3Nlc3QodGhpcy5leHRQbGF5ZXJDU1MpOwoJCQl4ICYmIHguYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaG90S2V5KTsKCQl9CgoJCWlmICh0aGlzLm11bHRpcGxlVikgewoJCQluZXcgTXV0YXRpb25PYnNlcnZlcih0aGlzLm9uR3Jvd1ZMaXN0LmJpbmQodGhpcykpLm9ic2VydmUoYnksIG9ic2VydmVPcHQpOwoJCQl0aGlzLnZDb3VudCA9IDA7CgkJCXRoaXMub25Hcm93Vkxpc3QoKTsKCQl9CgkJdGhpcy5jaGVja0RQbGF5ZXIoKTsKCX0sCglpbml0KCkgewoJCXRoaXMuaG90S2V5ID0gdGhpcy5ob3RLZXkuYmluZCh0aGlzKTsKCQl0aGlzLnN3aXRjaEZQID0gdGhpcy5tdWx0aXBsZVYgPyB0aGlzLnN3aXRjaEZQLmJpbmQodGhpcykgOiBudWxsOwoJCXRoaXMudkxpc3QgPSBkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd2aWRlbycpOwoJCWNvbnN0IGZuID0gZSA9PiB0aGlzLmNzc01WID8gZS5tYXRjaGVzKHRoaXMuY3NzTVYpIDogZS5vZmZzZXRXaWR0aCA+IDk7CgkJdGhpcy5maW5kTVYgPSBmaW5kLmJpbmQodGhpcy52TGlzdCwgZm4pOwoJCWludGVydmFsUXVlcnkoZSA9PiB7CgkJCXYgPSBlOwoJCQkkJCh0aGlzLmFkc0NTUyk7CgkJCXRoaXMuYmluZEV2ZW50KCk7CgkJfSwgdGhpcy5maW5kTVYpOwoJfQp9OwoKbGV0IHJvdXRlciA9IHsKCXRlZCgpIHsKCQlhcHAuZnVsbENTUyA9ICdidXR0b25bdGl0bGU9IkVudGVyIEZ1bGxzY3JlZW4iXSc7CgkJYXBwLnBsYXlDU1MgPSAnYnV0dG9uW3RpdGxlPSJwbGF5IHZpZGVvIl0nOwoJCWlmICghZ21GdW5jT2ZDaGVja01lbnUoJ1RFROW8uuWItumrmOa4hScsICd0ZWRfZm9yY2VIRCcpKSByZXR1cm47CgkJY29uc3QgZ2V0SERTb3VyY2UgPSBhc3luYyAoKSA9PiB7CgkJCWNvbnN0IHBuID0gcjEoL14oXC90YWxrc1wvXHcrKS8sIHBhdGgpOwoJCQljb25zdCByZXNwID0gYXdhaXQgZmV0Y2gocG4gKyAnL21ldGFkYXRhLmpzb24nKTsKCQkJY29uc3QgZGF0YSA9IGF3YWl0IHJlc3AuanNvbigpOwoJCQlyZXR1cm4gZGF0YS50YWxrc1swXS5kb3dubG9hZHMubmF0aXZlRG93bmxvYWRzLmhpZ2g7CgkJfTsKCQljb25zdCBjaGVjayA9IGFzeW5jIChycykgPT4gewoJCQlpZiAoIXYuc3JjIHx8IHYuc3JjLnN0YXJ0c1dpdGgoJ2h0dHAnKSkgcmV0dXJuOwoJCQkkJChhcHAudkxpc3QsIGUgPT4geyBlLnJlbW92ZUF0dHJpYnV0ZSgnc3JjJykgfSk7IC8vIOWPlua2iOWkmuS9meeahOWqkuS9k+i1hOa6kOivt+axggoJCQl0cnkgewoJCQkJdi5zcmMgPSBhd2FpdCBnZXRIRFNvdXJjZSgpOwoJCQl9IGNhdGNoKGV4KSB7CgkJCQljb25zb2xlLmVycm9yKGV4KTsKCQkJfQoJCX07CgkJZXZlbnRzLm9uKCdmb3VuZE1WJywgKCkgPT4gewoJCQluZXcgTXV0YXRpb25PYnNlcnZlcihjaGVjaykub2JzZXJ2ZSh2LCB7CgkJCQlhdHRyaWJ1dGVzOiB0cnVlLAoJCQkJYXR0cmlidXRlRmlsdGVyOiBbJ3NyYyddCgkJCX0pOwoJCQljaGVjaygpOwoJCX0pOwoJfSwKCXlvdXR1YmUoKSB7CgkJYXBwLnBsYXlDU1MgPSAnYnV0dG9uLnl0cC1wbGF5LWJ1dHRvbic7CgkJYXBwLmZ1bGxDU1MgPSAnYnV0dG9uLnl0cC1mdWxsc2NyZWVuLWJ1dHRvbic7Cgl9LAoJcXEoKSB7CgkJYXBwLm5leHRDU1MgPSAnLnR4cF9idG5fbmV4dCc7CgkJYXBwLndlYmZ1bGxDU1MgPSAnLnR4cF9idG5fZmFrZSc7CgkJYXBwLmZ1bGxDU1MgPSAnLnR4cF9idG5fZnVsbHNjcmVlbic7CgkJYXBwLmV4dFBsYXllckNTUyA9ICcjbW9kX3BsYXllcic7CgkJZXZlbnRzLm9uKCdjYW5wbGF5JywgKCkgPT4gewoJCQlsZXQgZSwgYSA9IFsuLi5hcHAudkxpc3RdOwoJCQlhLnNoaWZ0KCk7CgkJCXdoaWxlIChlID0gYS5wb3AoKSkgZS5wbGF5YmFja1JhdGUgPSAxNjsKCQl9KTsKCX0sCgl5b3VrdSgpIHsKCQlpZiAoaG9zdC5zdGFydHNXaXRoKCd2a3UuJykpIHsKCQkJZXZlbnRzLm9uKCdjYW5wbGF5JywgKCkgPT4gewoJCQkJYXBwLmlzTGl2ZSA9ICFxKCcuc3B2X3Byb2dyZXNzJyk7CgkJCX0pOwoJCQlhcHAuZnVsbENTUyA9ICcubGl2ZV9pY29uX2Z1bGwnOwoJCX0gZWxzZSB7CgkJCWNvbnN0IHN3aXRjaFF1YWxpdHkgPSBnbUZ1bmNPZkNoZWNrTWVudSgn6Ieq5Yqo5YiH5o2i5pyA6auY5riF5pmw5bqmJywgJ3lrX3N3aXRjaFF1YWxpdHknLCAhMSk7CgkJCWNvbnN0IGZuID0gKCkgPT4gewoJCQkJdy4kKCcuc2V0dGluZ3MtaXRlbS5xdWFsaXR5LWl0ZW0nKS5yZW1vdmUoJ1tkYXRhLXZhbD1kb3dubG9hZF0nKQoJCQkJCS5yZW1vdmVDbGFzcygnZGlzYWJsZSB5b3VrdV92aXBfcGF5X2J0biBsb2dpbi1jYW51c2UnKQoJCQkJCS5jaGlsZHJlbignc3BhbicpLnJlbW92ZSgpOwoJCQkJc3dpdGNoUXVhbGl0eSAmJiB3LiQoJy5xdWFsaXR5LWl0ZW06Zmlyc3QnKS5jbGljaygpOwoJCQl9OwoJCQlldmVudHMub24oJ2NhbnBsYXknLCBmbik7CgkJCWV2ZW50cy5vbignZm91bmRNVicsKCkgPT4gewoJCQkJYnkuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpOwoJCQl9KTsKCQkJR01fcmVnaXN0ZXJNZW51Q29tbWFuZCgn6Kej6Zmk5riF5pmw5bqm6YCJ5oup6ZmQ5Yi2JywgZm4pOwoJCQlhcHAud2ViZnVsbENTUyA9ICcuY29udHJvbC13ZWJmdWxsc2NyZWVuLWljb24nOwoJCQlhcHAuZnVsbENTUyA9ICcuY29udHJvbC1mdWxsc2NyZWVuLWljb24nOwoJCQlhcHAubmV4dENTUyA9ICdzcGFuLmljb24tbmV4dCc7CgkJfQoJfSwKCWJpbGliaWxpKCkgewoJCWFwcC5uZXh0Q1NTID0gJy5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tYnRuLW5leHQnOwoJCWFwcC53ZWJmdWxsQ1NTID0gJy5iaWxpYmlsaS1wbGF5ZXItdmlkZW8td2ViLWZ1bGxzY3JlZW4nOwoJCWFwcC5mdWxsQ1NTID0gJy5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tYnRuLWZ1bGxzY3JlZW4nOwoJCWFwcC5leHRQbGF5ZXJDU1MgPSAnI3BsYXllcldyYXAnOwoJCWNvbnN0IGRhbm11ID0gZ21GdW5jT2ZDaGVja01lbnUoJ+W8ueW5lScsICdiaWxpX2Rhbm11Jyk7CgkJY29uc3QgZGFubXVDU1MgPSAnLmJpbGliaWxpLXBsYXllci12aWRlby1kYW5tYWt1LXN3aXRjaCBpbnB1dCc7CgkJZXZlbnRzLm9uKCdmb3VuZE1WJywgKCkgPT4gewoJCQlpbnRlcnZhbFF1ZXJ5KGUgPT4ge2lmIChlLmNoZWNrZWQgIT0gZGFubXUpIGUuY2xpY2soKX0sIGRhbm11Q1NTKTsKCQl9KTsKCgkJY29uc3QgZk5hbWU9IHBhdGguc3RhcnRzV2l0aCgnL2Jhbmd1bWkvJykgPyAncmVwbGFjZVN0YXRlJyA6ICdwdXNoU3RhdGUnOwoJCWNvbnN0IHJhd0ZuID0gaGlzdG9yeVtmTmFtZV07IC8v5LqM5pa55rOV5LiN6Kem5Y+Rb25wb3BzdGF0ZeS6i+S7tgoJCWhpc3RvcnlbZk5hbWVdID0gZnVuY3Rpb24oLi4uYXJncykgewoJCQlyYXdGbi5hcHBseSh0aGlzLCBhcmdzKTsKCQkJZXZlbnRzLmZvdW5kTVYoKTsKCQkJYXBwLmJ0bk5leHQgPSBhcHAuYnRuRlAgPSBhcHAuYnRuRlMgPSBudWxsOwoJCX07Cgl9LAoJcHB0digpIHsKCQlhcHAuZnVsbENTUyA9ICcudy16b29tLWNvbnRhaW5lciA+IGRpdic7CgkJYXBwLndlYmZ1bGxDU1MgPSAnLnctZXhwYW5kLWNvbnRhaW5lciA+IGRpdic7CgkJYXBwLm5leHRDU1MgPSAnLnctbmV4dCc7Cgl9LAoJbWd0digpIHsKCQlhcHAuZnVsbENTUyA9ICdtYW5nby1zY3JlZW4nOwoJCWFwcC53ZWJmdWxsQ1NTID0gJ21hbmdvLXdlYnNjcmVlbiA+IGEnOwoJCWFwcC5uZXh0Q1NTID0gJ21hbmdvLWNvbnRyb2wtcGxheW5leHQtYnRuJzsKCX0sCglpeGlndWEoKSB7CgkJYXBwLmZ1bGxDU1MgPSAnLnhncGxheWVyLWZ1bGxzY3JlZW4nOwoJCWFwcC53ZWJmdWxsQ1NTID0gJy54Z3BsYXllci1jc3NmdWxsc2NyZWVuJzsKCQlhcHAubmV4dENTUyA9ICcueGdwbGF5ZXItcGxheU5leHQnOwoJCWV2ZW50cy5vbignZm91bmRNVicsICgpID0+IHsKCQkJdi5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgYXBwLmhvdEtleSk7CgkJfSk7Cgl9LAoJbWlndXZpZGVvKCkgewoJCWFwcC5wbGF5Q1NTID0gJy5wbGF5LWJ0bic7CgkJYXBwLmZ1bGxDU1MgPSAnLnpvb20tYnRuJzsKCQlhcHAud2ViZnVsbENTUyA9ICcucGFnZS16b29tLWJ0bic7CgkJYXBwLm5leHRDU1MgPSAnLm5leHQtYnRuJzsKCX0sCgl3ZWlibygpIHsKCQlhcHAubXVsdGlwbGVWID0gcGF0aC5zdGFydHNXaXRoKCcvdS8nKTsKCX0sCgliYWlkdSgpIHsKCQlldmVudHMub24oJ2tleWRvd24nLCBlID0+IHsKCQkJaWYgKCF3LnZpZGVvanMpIHJldHVybjsKCQkJbGV0IG4sIHAgPSB3LnZpZGVvanMuZ2V0UGxheWVycygidmlkZW8tcGxheWVyIikuaHRtbDVwbGF5ZXIudGVjaF87CgkJCXN3aXRjaCAoZS5rZXlDb2RlKSB7CgkJCWNhc2UgNjc6IG4gPSAwLjE7CgkJCWNhc2UgODg6CgkJCQluID0gbiB8fCAtMC4xOwoJCQkJbiArPSBwLnBsYXliYWNrUmF0ZSgpLnRvRml4ZWQoMik7CgkJCQlpZiAoMCA8IG4gJiYgbiA8PSAxNikgcC5zZXRQbGF5YmFja1JhdGUoK24pOwoJCQkJcmV0dXJuIHRydWU7CgkJCWNhc2UgOTA6CgkJCQlwLnNldFBsYXliYWNrUmF0ZSgxKTsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfSk7CgkJYXBwLmV4dFBsYXllckNTUyA9ICcudmlkZW8tY29udGVudCc7Cgl9LAoJYWNmdW4oKSB7CgkJYXBwLm5leHRDU1MgPSAnLmJ0bi1uZXh0LXBhcnQgLmNvbnRyb2wtYnRuJzsKCQlhcHAud2ViZnVsbENTUyA9ICcuZnVsbHNjcmVlbi13ZWInOwoJCWFwcC5mdWxsQ1NTID0gJy5mdWxsc2NyZWVuLXNjcmVlbic7Cgl9LAoJWycxNjMnXSgpIHsKCQlhcHAubXVsdGlwbGVWID0gaG9zdC5zdGFydHNXaXRoKCduZXdzLicpOwoJCUdNX2FkZFN0eWxlKCdkaXYudmlkZW8sdmlkZW97bWF4LWhlaWdodDogMTAwJSAhaW1wb3J0YW50O30nKTsKCQlyZXR1cm4gaG9zdC5zcGxpdCgnLicpLmxlbmd0aCA+IDM7Cgl9LAoJc29odSgpIHsKCQlhcHAubmV4dENTUyA9ICdsaS5vbltkYXRhLXZpZF0rbGkgYSc7CgkJYXBwLmZ1bGxDU1MgPSAnLngtZnVsbHNjcmVlbi1idG4nOwoJCWFwcC53ZWJmdWxsQ1NTID0gJy54LXBhZ2Vmcy1idG4nOwoJfSwKCWZ1bigpIHsKCQlhcHAubmV4dENTUyA9ICcuYnRuLWl0ZW0uYnRuLW5leHQnOwoJfSwKCWthbGlkbSgpIHsKCQlhcHAubmV4dENTUyA9IGBhW2hyZWY9IiR7cGF0aH0iXSthYDsKCQlldmVudHMub24oJ2ZvdW5kTVYnLCAoKSA9PiB7CgkJCXYuY2xvc2VzdCgnI3BsYXllcicpLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgdGVzdCk7CgkJfSk7CgkJR01fYWRkU3R5bGUoJy5kcGxheWVyLWxvYWRlZHsgYmFja2dyb3VuZC1jb2xvcjpvcmFuZ2UgIWltcG9ydGFudDsgfScpOwoJfQp9OwphcHAuZGlzYWJsZVNwYWNlID0gL14oeW91dHViZXxpeGlndWF8cXF8cHB0dnxmdW4pJC8udGVzdCh1KTsKCmlmICghcm91dGVyW3VdKSB7IC8v55u05pKt56uZ54K5Cglyb3V0ZXIgPSB7CgkJZG91eXUoKSB7CgkJCWNvbnN0IGluUm9vbSA9IGhvc3Quc3RhcnRzV2l0aCgnd3d3LicpOwoJCQlldmVudHMub24oJ2ZvdW5kTVYnLCAoKSA9PiB7CgkJCQlpZiAoaW5Sb29tICYmIHBhdGggIT0gJy8nKSB7CgkJCQkJaW50ZXJ2YWxRdWVyeShkb0NsaWNrLCAnLnJvb21TbWFsbFBsYXllckZsb2F0TGF5b3V0LWNsb3NlQnRuJyk7CgkJCQkJcSgnI2pzLXBsYXllci1hc2lkZS1zdGF0ZScpLmNoZWNrZWQgPSB0cnVlOwoJCQkJfQoJCQl9KTsKCQkJYXBwLmNzc01WID0gJ1tzcmNePWJsb2JdJzsKCQkJYXBwLnBsYXlDU1MgPSBpblJvb20gPyAnZGl2W2NsYXNzfD1wbGF5XScgOiAnLnBsYXktYTQ3M2I2JzsKCQkJYXBwLndlYmZ1bGxDU1MgPSBpblJvb20gPyAnZGl2W2NsYXNzfD13ZnNdJyA6ICcucGFnZWZ1bGwxLWNkMzU5Yic7CgkJCWlmIChpblJvb20pIGFwcC5mdWxsQ1NTID0gJ2RpdltjbGFzc3w9ZnNdJzsgLy8gJy53aW5kb3dmdWxsMS0yMjgzMjEnCgkJCWFwcC5hZHNDU1MgPSAnYVtocmVmKj0id2FuLmRvdXl1LmNvbSJdJzsKCQl9LAoJCXl5KCkgewoJCQlhcHAuaXNMaXZlID0gIXBhdGguc3RhcnRzV2l0aCgnL3gvJyk7CgkJCWlmIChhcHAuaXNMaXZlKSB7CgkJCQlhcHAuZnVsbENTUyA9ICcueWNfX2Z1bGxzY3JlZW4tYnRuJzsKCQkJCWFwcC53ZWJmdWxsQ1NTID0gJy55Y19fY2luZW1hLW1vZGUtYnRuJzsKCQkJCWFwcC5wbGF5Q1NTID0gJy55Y19fcGxheS1idG4nOwoJCQl9CgkJfSwKCQlodXlhKCkgewoJCQlpZiAoZmlyZWZveFZlciAmJiBmaXJlZm94VmVyIDwgNTcpIHJldHVybiB0cnVlOwoJCQlhcHAud2ViZnVsbENTUyA9ICcucGxheWVyLWZ1bGxwYWdlLWJ0bic7CgkJCWFwcC5mdWxsQ1NTID0gJy5wbGF5ZXItZnVsbHNjcmVlbi1idG4nOwoJCQlhcHAucGxheUNTUyA9ICcjcGxheWVyLWJ0bic7CgkJCWFwcC5hZHNDU1MgPSAnI3BsYXllci1zdWJzY3JpYmUtd2FwLCN3cmFwLWluY29tZSc7CgkJCWludGVydmFsUXVlcnkoZG9DbGljaywgJy5sb2dpbi10aXBzLWNsb3NlJyk7CgkJCWxvY2FsU3RvcmFnZVsnc2lkZWJhci9hZHMnXSA9ICd7fSc7CgkJCWxvY2FsU3RvcmFnZVsnc2lkZWJhci9zdGF0ZSddID0gMDsKCQkJbG9jYWxTdG9yYWdlLlRUX1JPT01fU0hJRUxEX0NGR18wXyA9ICd7IjEwMDAwIjoxLCIyMDAwMSI6MSwiMjAwMDIiOjEsIjIwMDAzIjoxLCIzMDAwMCI6MX0nOwoJCX0sCgkJbG9uZ3podSgpIHsKCQkJYXBwLmZ1bGxDU1MgPSAnYS55YS1zY3JlZW4tYnRuJzsKCQl9LAoJCXpoYW5xaSgpIHsKCQkJbG9jYWxTdG9yYWdlLmxhc3RQbGF5ZXIgPSAnaDUnOwoJCQlhcHAuZnVsbENTUyA9ICcudmlkZW8tZnVsbHNjcmVlbic7CgkJfQoJfTsKCWlmIChyb3V0ZXJbdV0pIHsKCQlhcHAuaXNMaXZlID0gYXBwLmlzTGl2ZSB8fCAhaG9zdC5zdGFydHNXaXRoKCd2LicpOwoJCSghdy5jaHJvbWUgfHwgaXNFZGdlKSAmJiBmYWtlVUEodWFfY2hyb21lKTsKCX0KfQoKUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eShuYXZpZ2F0b3IsICdwbHVnaW5zJywgewoJZ2V0KCkgeyByZXR1cm4geyBsZW5ndGg6IDAgfSB9Cn0pOwpHTV9yZWdpc3Rlck1lbnVDb21tYW5kKCfohJrmnKzlip/og73lv6vmjbfplK7ooagnICwgYWxlcnQuYmluZCh3LApg5bem5Y+z5pa55ZCR6ZSu77ya5b+r6YCA44CB5b+r6L+bNeenkjsgK3NoaWZ0OiAyMOenkgrkuIrkuIvmlrnlkJHplK7vvJrpn7Pph4/osIPoioIK56m65qC86ZSu77ya5pqC5YGcL+aSreaUvjsgK3NoaWZ0OiDlrprkvY3mkq3mlL7lmajnqpflj6MKTu+8muaSreaUvuS4i+S4gOmbhgrlm57ovabplK7vvJrliIfmjaLlhajlsY87ICtzaGlmdDog5YiH5o2i572R6aG15YWo5bGPCkVTQ++8mumAgOWHuu+8iOe9kemhte+8ieWFqOWxjwpD77ya5Yqg6YCfMC4x5YCN5pKt5pS+ICAgICAgIFjvvJrlh4/pgJ8wLjHlgI3mkq3mlL4gICAgICAgWu+8muato+W4uOmAn+W6puaSreaUvgpE77ya5LiK5LiA5binICAgICAgICBG77ya5LiL5LiA5binYAopKTsKaWYgKCFyb3V0ZXJbdV0gfHwgIXJvdXRlclt1XSgpKSBhcHAuaW5pdCgpOwppZiAoIXJvdXRlclt1XSAmJiAhYXBwLmlzTnVtVVJMKSBhcHAuaXNOdW1VUkwgPSAvXFdcZCsoXC5bYS16XXszLDh9KT8kLy50ZXN0KHBhdGgpOw=="},{"name":"破解VIP会员视频集合","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["*://*.iqiyi.com/*","*://*.youku.com/*","*://*.le.com/*","*://*.letv.com/*","*://v.qq.com/*","*://*.tudou.com/*","*://*.mgtv.com/*","*://film.sohu.com/*","*://tv.sohu.com/*","*://*.acfun.cn/*","*://*.bilibili.com/*","*://vip.1905.com/play/*","*://*.pptv.com/*","*://v.yinyuetai.com/video/*","*://v.yinyuetai.com/playlist/*","*://*.fun.tv/vplay/*","*://*.wasu.cn/Play/show/*","*://*.56.com/*"],"merge_matches":true,"use_excludes":["/(^[^:\\/#\\?]*:\\/\\/([^#\\?\\/]*\\.)?www\\.bilibili\\.com(:[0-9]{1,5})?\\/.*$)/"],"orig_excludes":["*://*.bilibili.com/blackboard/*"],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":true,"orig_connects":[]}},"storage":{"data":{"topSet":"o{\"vqqcom\":50}"},"ts":1599070844327},"enabled":true,"position":4,"file_url":"https://greasyfork.org/scripts/27530-%E7%A0%B4%E8%A7%A3vip%E4%BC%9A%E5%91%98%E8%A7%86%E9%A2%91%E9%9B%86%E5%90%88/code/%E7%A0%B4%E8%A7%A3VIP%E4%BC%9A%E5%91%98%E8%A7%86%E9%A2%91%E9%9B%86%E5%90%88.user.js","uuid":"c14a0759-4f6e-4584-80c0-ab3b597898f5","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgIOegtOino1ZJUOS8muWRmOinhumikembhuWQiAovLyBAbmFtZXNwYWNlICBodHRwczovL2dyZWFzeWZvcmsub3JnL3poLUNOL3VzZXJzLzEwNDIwMQovLyBAdmVyc2lvbiAgICA1LjQyCi8vIEBkZXNjcmlwdGlvbiAgMjAyMC03LTE2IOaVtOWQiOS7o+eggeabtOaWsOOAguS4gOmUruegtOino1vkvJjphbd86IW+6K6vfOS5kOinhnzniLHlpYfoibp86IqS5p6cfEFC56uZfOmfs+aCpuWPsF3nrYlWSVDmiJbkvJrlkZjop4bpopHvvIzop6PmnpDmjqXlj6PotLXnsr7kuI3otLXlpJrvvIznu53lr7nlpJ/nlKjjgILor6bnu4bmlrnms5XnnIvor7TmmI7lkozlm77niYfjgILljIXlkKvkuoZb5oeS5Lq65LiT55SoKioq5pS+5b+D5L2/55So44CC4pa25oeS6Juk6JukXVvjgJDnjqnnmoTll6jjgJFWSVDlt6XlhbfnrrEqKipNYXggemhhbmdd55qE6YOo5YiG5o6l5Y+j44CCW1RhbXBlcm1vbmtleSB8IFZpb2xlbnRtb25rZXkgfCBHcmVhc3ltb25rZXkgNC4wK10KLy8gQGF1dGhvciAgICAg6buE55uQCi8vIHJlcXVpcmUgIGh0dHBzOi8vZ3JlYXNlbW9ua2V5LmdpdGh1Yi5pby9nbTQtcG9seWZpbGwvZ200LXBvbHlmaWxsLmpzCi8vIEBub2ZyYW1lcwovLyBAbWF0Y2ggICAgKjovLyouaXFpeWkuY29tLyoKLy8gQG1hdGNoICAgICo6Ly8qLnlvdWt1LmNvbS8qCi8vIEBtYXRjaCAgICAqOi8vKi5sZS5jb20vKgovLyBAbWF0Y2ggICAgKjovLyoubGV0di5jb20vKgovLyBAbWF0Y2ggICAgKjovL3YucXEuY29tLyoKLy8gQG1hdGNoICAgICo6Ly8qLnR1ZG91LmNvbS8qCi8vIEBtYXRjaCAgICAqOi8vKi5tZ3R2LmNvbS8qCi8vIEBtYXRjaCAgICAqOi8vZmlsbS5zb2h1LmNvbS8qCi8vIEBtYXRjaCAgICAqOi8vdHYuc29odS5jb20vKgovLyBAbWF0Y2ggICAgKjovLyouYWNmdW4uY24vKgovLyBAbWF0Y2ggICAgKjovLyouYmlsaWJpbGkuY29tLyoKLy8gQG1hdGNoICAgICo6Ly92aXAuMTkwNS5jb20vcGxheS8qCi8vIEBtYXRjaCAgICAqOi8vKi5wcHR2LmNvbS8qCi8vIEBtYXRjaCAgICAqOi8vdi55aW55dWV0YWkuY29tL3ZpZGVvLyoKLy8gQG1hdGNoICAgICo6Ly92Lnlpbnl1ZXRhaS5jb20vcGxheWxpc3QvKgovLyBAbWF0Y2ggICAgKjovLyouZnVuLnR2L3ZwbGF5LyoKLy8gQG1hdGNoICAgICo6Ly8qLndhc3UuY24vUGxheS9zaG93LyoKLy8gQG1hdGNoICAgICo6Ly8qLjU2LmNvbS8qCi8vIEBleGNsdWRlICAqOi8vKi5iaWxpYmlsaS5jb20vYmxhY2tib2FyZC8qCi8vIEBncmFudCAgICBHTS5nZXRWYWx1ZQovLyBAZ3JhbnQgICAgR00uc2V0VmFsdWUKLy8gQGdyYW50ICAgIEdNX2dldFZhbHVlCi8vIEBncmFudCAgICBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgICAgdW5zYWZlV2luZG93Ci8vIEBncmFudCAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgR00ueG1sSHR0cFJlcXVlc3QKLy8gQGdyYW50ICAgIEdNX29wZW5JblRhYgovLyBAZ3JhbnQgICAgR00ub3BlbkluVGFiCi8vIEByZXF1aXJlICBodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL3Z1ZUAyLjYuMTEvZGlzdC92dWUubWluLmpzCi8vID09L1VzZXJTY3JpcHQ9PQovKiohCiAqIOesrOS4gOmDqOWIhu+8jOWHveaVsOWKn+iDveWMugogKiDku6Xlj4rmjqXlj6PmlbDmja4KICovCi8qKgogKiBhZGRTdHlsZSAgR01nZXRWYWx1ZSAgR01zZXRWYWx1ZSAKICog6L+Z5Yeg5Liq5Ye95pWw77yM56iN5Yqg5pS56L+b77yM5bCx5Y+v5Lul5YW85a65IFRhbXBlcm1vbmtleSB8IFZpb2xlbnRtb25rZXkgfCBHcmVhc3ltb25rZXkgNC4wKwogKi8KZnVuY3Rpb24gYWRkU3R5bGUoY3NzVGV4dCkgewogICAgbGV0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgYS50ZXh0Q29udGVudCA9IGNzc1RleHQ7CiAgICBsZXQgZG9jID0gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CiAgICBkb2MuYXBwZW5kQ2hpbGQoYSk7Cn0KCmZ1bmN0aW9uIEdNZ2V0VmFsdWUobmFtZSwgZGVmYXVsdFZhbHVlKSB7CiAgICByZXR1cm4gR01fZ2V0VmFsdWUobmFtZSwgZGVmYXVsdFZhbHVlKQp9CgpmdW5jdGlvbiBHTXNldFZhbHVlKG5hbWUsIHZhbHVlKSB7CiAgICBHTV9zZXRWYWx1ZShuYW1lLCB2YWx1ZSkKfQoKZnVuY3Rpb24gZnVsbFNjcmVlbihlbGVtKSB7CiAgICBpZiAoZWxlbS5yZXF1ZXN0RnVsbHNjcmVlbikgewogICAgICAgIGVsZW0ucmVxdWVzdEZ1bGxzY3JlZW4oKTsKICAgIH0gZWxzZSBpZiAoZWxlbS53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbikgewogICAgICAgIGVsZW0ud2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4oKTsKICAgIH0gZWxzZSBpZiAoZWxlbS5tb3pSZXF1ZXN0RnVsbFNjcmVlbikgewogICAgICAgIGVsZW0ubW96UmVxdWVzdEZ1bGxTY3JlZW4oKTsKICAgIH0gZWxzZSB7CiAgICAgICAgZWxlbS5tc1JlcXVlc3RGdWxsc2NyZWVuKCk7CiAgICB9Cn0KCmZ1bmN0aW9uIGV4aXRGdWxsU2NyZWVuKCkgewogICAgaWYgKGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKSB7CiAgICAgICAgZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKTsKICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbikgewogICAgICAgIGRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4oKTsKICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbikgewogICAgICAgIGRvY3VtZW50Lm1zRXhpRnVsbHNjcmVlbigpOwogICAgfSBlbHNlIGlmIChkb2N1bWVudC53ZWJraXRDYW5jZWxGdWxsU2NyZWVuKSB7CiAgICAgICAgZG9jdW1lbnQud2Via2l0Q2FuY2VsRnVsbFNjcmVlbigpOwogICAgfQp9CgpmdW5jdGlvbiBnZXRTaXRlKCkgewogICAgcmV0dXJuIGxvY2F0aW9uLmhvc3RuYW1lLnJlcGxhY2UoL1wuL2csICcnKTsKfQoKLy8g5oqK5LiN5ZCM55qE6ZuG5pWw5o2u77yM5Lul56uZ54K55ZCN5Li66ZSu77yM5YiG5byA5a2Y5YKoCmZ1bmN0aW9uIHNhdmVTZXQobmFtZSwgdmFsdWUpIHsKICAgIGxldCBzaXRlID0gZ2V0U2l0ZSgpOwogICAgbGV0IHRoaXNTZXQgPSBHTV9nZXRWYWx1ZShuYW1lLCB7fSk7CiAgICB0aGlzU2V0W3NpdGVdID0gdmFsdWU7CiAgICBHTV9zZXRWYWx1ZShuYW1lLCB0aGlzU2V0KTsKfQoKZnVuY3Rpb24gZ2V0U2V0KG5hbWUsIGRlZmF1bHRWYWx1ZSkgewogICAgbGV0IHNpdGUgPSBnZXRTaXRlKCk7CiAgICBsZXQgdGhpc1NldCA9IEdNX2dldFZhbHVlKG5hbWUsIHt9KTsKICAgIHJldHVybiB0aGlzU2V0W3NpdGVdIHx8IGRlZmF1bHRWYWx1ZTsKfQoKLy8g5oqK5omA5pyJ55qE6ZuG5pWw5o2u77yM5Lul56uZ54K55ZCN5Li66ZSu5pS+5Zyo5LiA6LW377yM57uf5LiA5a2Y5YKoCmZ1bmN0aW9uIHNhdmVTZXRWYWx1ZUJ5TmFtZShuYW1lLCB2YWx1ZSkgewogICAgbGV0IHNpdGUgPSBnZXRTaXRlKCk7CiAgICBsZXQgdGhpc1NldCA9IEdNX2dldFZhbHVlKCJTZXRWYWx1ZXMiLCB7fSk7CiAgICBpZiAoIXRoaXNTZXQuaGFzT3duUHJvcGVydHkoc2l0ZSkpIHsgdGhpc1NldFtzaXRlXSA9IHt9IH0KICAgIHRoaXNTZXRbc2l0ZV1bbmFtZV0gPSB2YWx1ZTsKICAgIEdNX3NldFZhbHVlKFNldFZhbHVlcywgdGhpc1NldCk7Cn0KCmZ1bmN0aW9uIGdldFNldFZhbHVlQnlOYW1lKG5hbWUsIGRlZmF1bHRWYWx1ZSkgewogICAgbGV0IHNpdGUgPSBnZXRTaXRlKCk7CiAgICBsZXQgdGhpc1NldCA9IEdNX2dldFZhbHVlKCdTZXRWYWx1ZXMnLCB7fSk7CiAgICB0cnkgewogICAgICAgIHJldHVybiB0aGlzU2V0W3NpdGVdW25hbWVdOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlOwogICAgfQp9CgovKioKICog56C06KejIEFQSe+8jDIwMjAtOS0zIOabtOaWsO+8jOWIoOmZpOS6hui3s+i9rOm7hOiJsumTvuaOpeeahAogKi8KY29uc3QgQVBJUyA9IFsKICAgIHsgbmFtZTogIue7hOWQiOino+aekCIsIHVybDogImh0dHA6Ly9raXdpOC50b3AvbW92L3M/dXJsPSIsIHRpdGxlOiAiS0lXSeino+aekO+8jOe7hOWQiOWei+ino+aekO+8jOermemVv+S8mue7tOaKpOaOkuWQjSIsIGludGFiOiAwIH0sCiAgICB7IG5hbWU6ICJNMTkwNyIsIHVybDogImh0dHBzOi8vejEubTE5MDcuY24vP2p4PSIsIHRpdGxlOiAi5oeS5Lq65LiT55SoLOWFqOe9kVZJUCoqKuOAkOS9nOiAheaHkuibpOibpOOAkeiEmuacrOeahOaOpeWPoyIsIGludGFiOiAxIH0sCiAgICB7IG5hbWU6ICIxN+S6kSIsIHVybDogImh0dHBzOi8vd3d3LjE3MTd5dW4uY29tL2p4L3R5LnBocD91cmw9IiwgdGl0bGU6ICJNMTkwNyIsIGludGFiOiAxIH0sCiAgICB7IG5hbWU6ICLpu5HnsbMiLCB1cmw6ICJodHRwczovL3d3dy5teXhpbi50b3AvangvYXBpLz91cmw9IiwgdGl0bGU6ICLpu5HnsbMiLCBpbnRhYjogMSB9LAogICAgLy8geyBuYW1lOiAi5YyX5p6BWFMiLCB1cmw6ICJodHRwOi8vYmVpaml4cy5jbi8/dXJsPSIsIHRpdGxlOiAi5YyX5p6BWFMiLCBpbnRhYjogMSB9LAogICAgeyBuYW1lOiAiNjE4RyIsIHVybDogImh0dHA6Ly9qeC42MThnLmNvbS8/dXJsPSIsIHRpdGxlOiAiNjE4RyIsIGludGFiOiAxIH0sCiAgICB7IG5hbWU6ICLnjqnnmoTll6giLCB1cmw6ICJodHRwOi8vdHYud2FuZGhpLmNvbS9nby5odG1sP3VybD0iLCB0aXRsZTogIue7vOWQiOaOpeWPoyzkuIDplK5WSVAqKiog5pu05paw5Y+v55So44CQ5L2c6ICFbWFyayB6aGFuZ+OAkeiEmuacrOeahOaOpeWPoyIsIGludGFiOiAwIH0sCiAgICB7IG5hbWU6ICLmkJzkvaDlprkxIiwgdXJsOiAiaHR0cHM6Ly93d3cuc291bm0uY29tLz91cmw9IiwgdGl0bGU6ICLnu7zlkIjmjqXlj6MsVklQ6KeG6aKRKioqIOabtOaWsOWPr+eUqOOAkOS9nOiAhXNvbmltZWkxMzTjgJHohJrmnKznmoTmjqXlj6MiLCBpbnRhYjogMCB9LAogICAgeyBuYW1lOiAi55+z5aS06Kej5p6QIiwgdXJsOiAiaHR0cHM6Ly9qaWV4aS4wNzE4MTEuY2MvangucGhwP3VybD0iLCB0aXRsZTogIuaJi+WKqOeCueaSreaUviIsIGludGFiOiAxIH0sCiAgICB7IG5hbWU6ICLlsI/nq6XlvbHop4YiLCB1cmw6ICJodHRwOi8vd3d3LmhiMjM4ODgudmlwL2p4dXJsLnBocD91cmw9IiwgdGl0bGU6ICLpgJ/luqbli4nlvLrvvIzpnIDopoHmiYvliqjngrnmkq3mlL4iLCBpbnRhYjogMSB9LAogICAgeyBuYW1lOiAi5Y2D5Y+26Kej5p6QIiwgdXJsOiAiaHR0cHM6Ly95aTI5Zi5jbi92aXAucGhwP3VybD0iLCB0aXRsZTogIuaJi+WKqOeCueaSreaUviIsIGludGFiOiAxIH0sCiAgICB7IG5hbWU6ICLmmJ/nqbrop6PmnpAiLCB1cmw6ICJodHRwczovL2p4LmZvOTcuY24vP3VybD0iLCB0aXRsZTogIuaJi+WKqOeCueaSreaUviIsIGludGFiOiAxIH0sCiAgICB7IG5hbWU6ICLml6DlkI3lsI/nq5kiLCB1cmw6ICJodHRwOi8vd3d3LnNmc2Z0LmNvbS9hZG1pbi5waHA/dXJsPSIsIHRpdGxlOiAi5peg5ZCN5bCP56uZ5ZCM5rqQIiwgaW50YWI6IDAgfSwKICAgIHsgbmFtZTogIuaXoOWQjeWwj+ermTIiLCB1cmw6ICJodHRwOi8vd3d3LndteHoud2FuZy92aWRlby5waHA/dXJsPSIsIHRpdGxlOiAi6L2s5ZyI5ZyI5bCx5o2i57q/6LevIiwgaW50YWI6IDAgfSwKICAgIHsgbmFtZTogIuS6uuS6uuWPkeW4gyIsIHVybDogImh0dHA6Ly92LnJlbnJlbmZhYnUuY29tL2ppZXhpLnBocD91cmw9IiwgdGl0bGU6ICLnu7zlkIjvvIzlpJrnur/ot68iLCBpbnRhYjogMCB9LAogICAgeyBuYW1lOiAi5LqM5bqm6Kej5p6QIiwgdXJsOiAiaHR0cHM6Ly9qeC5kdTIuY2MvP3VybD0iLCB0aXRsZTogIuaJi+WKqOeCueaSreaUviIsIGludGFiOiAxIH0sCiAgICB7IG5hbWU6ICLmgJ3lj6QiLCB1cmw6ICJodHRwczovL2FwaS5zaWd1anguY29tLz91cmw9IiwgdGl0bGU6ICLmgJ3lj6QiLCBpbnRhYjogMSB9LAogICAgeyBuYW1lOiAi5LmQ5LmQ5LqRIiwgdXJsOiAiaHR0cHM6Ly82NjBlLmNvbS8/dXJsPSIsIHRpdGxlOiAi5LmQ5LmQ5LqR77yM5pyq55+l5pWI5p6cIiwgaW50YWI6IDEgfSwKXTsKCi8qKgogKiDpobXlhoXmkq3mlL7lmajnu4Tku7YgaW50YWJQbGF5ZXIudnVlCiAqLwpjb25zdCBjb21JbnRhYlBsYXllciA9IHsKICAgIHRlbXBsYXRlOiBgPGRpdiBpZD0iaW50YWJQbGF5ZXIiIHYtaWY9ImlzU2hvdyIgcmVmPSJpbnRhYlBsYXllciIgOnN0eWxlPSJpbnRhYlBsYXllclN0eWxlIj4KICAgIDxkaXYgaWQ9ImJhciIgQG1vdXNlZG93bj0ibW92ZSI+CiAgICAgIDxidXR0b24gQGNsaWNrPSJzaXplQ29kZT0nc21hbGwnIj7wn5eVPC9idXR0b24+CiAgICAgIDxidXR0b24gQGNsaWNrPSJzaXplQ29kZT0nbWVkaXVtJyI+8J+XlzwvYnV0dG9uPgogICAgICA8YnV0dG9uIEBjbGljaz0ic2l6ZUNvZGU9J2xhcmdlJyI+8J+XljwvYnV0dG9uPgogICAgICA8YnV0dG9uIEBjbGljaz0ic2l6ZUNvZGU9J2ZpbGwnIj7wn5eUPC9idXR0b24+CiAgICAgIDxidXR0b24gQGNsaWNrPSJmdWxsU2NyZWVuIj7wn6Gn8J+hpTwvYnV0dG9uPgogICAgICA8YnV0dG9uIEBjbGljaz0iY2xvc2VQbGF5ZXIiPvCfl5k8L2J1dHRvbj4KICAgIDwvZGl2PgogICAgPGlmcmFtZSB2LWlmPSJzcmMubGVuZ3RoIiA6c3JjPSJzcmMiPjwvaWZyYW1lPgogIDwvZGl2PmAsCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHNyYzogJycsCiAgICAgICAgICAgIGlzU2hvdzogMCwKICAgICAgICAgICAgcG9zaXRpb246IHsgbGVmdDogMTAwLCB0b3A6IDEwMCB9LAogICAgICAgICAgICBzaXplQ29kZTogJ21lZGl1bScsCiAgICAgICAgICAgIHNpemU6IHsgc21hbGw6IDQwLCBtZWRpdW06IDY1LCBsYXJnZTogOTAsIGZpbGw6IDEwMCB9LAogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgbW92ZShlKSB7CiAgICAgICAgICAgIGxldCBkaXYgPSB0aGlzLiRyZWZzLmludGFiUGxheWVyOwogICAgICAgICAgICBsZXQgZGlzWCA9IGUuY2xpZW50WCAtIGRpdi5vZmZzZXRMZWZ0OwogICAgICAgICAgICBsZXQgZGlzWSA9IGUuY2xpZW50WSAtIGRpdi5vZmZzZXRUb3A7CiAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2Vtb3ZlID0gKGUpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24ubGVmdCA9IGUuY2xpZW50WCAtIGRpc1g7CiAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnRvcCA9IGUuY2xpZW50WSAtIGRpc1k7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2V1cCA9IChlKSA9PiB7CiAgICAgICAgICAgICAgICBzYXZlU2V0KCdpbnRhYlBvc2l0aW9uJywgdGhpcy5wb3NpdGlvbik7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5vbm1vdXNlbW92ZSA9IG51bGw7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5vbm1vdXNldXAgPSBudWxsOwogICAgICAgICAgICB9OwogICAgICAgIH0sCiAgICAgICAgZnVsbFNjcmVlbigpIHsKICAgICAgICAgICAgbGV0IGVsZW0gPSB0aGlzLiRyZWZzLmludGFiUGxheWVyOwogICAgICAgICAgICBmdWxsU2NyZWVuKGVsZW0pOwogICAgICAgIH0sCiAgICAgICAgY2xvc2VQbGF5ZXIoKSB7CiAgICAgICAgICAgIHRoaXMuc3JjID0gJyc7CiAgICAgICAgICAgIHRoaXMuaXNTaG93ID0gMDsKICAgICAgICB9CiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICBpbnRhYlBsYXllclN0eWxlKCkgewogICAgICAgICAgICBsZXQgd2lkdGgsIGhlaWdodCwgb3ZlcnJpZGUgPSAnJzsKICAgICAgICAgICAgaWYgKHRoaXMuc2l6ZUNvZGUgPT0gJ2ZpbGwnKSB7CiAgICAgICAgICAgICAgICB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoICsgJ3B4JzsKICAgICAgICAgICAgICAgIGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCArICdweCc7CiAgICAgICAgICAgICAgICBvdmVycmlkZSA9ICJsZWZ0OiAwOyB0b3A6IDA7IgogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgd2lkdGggPSB0aGlzLnNpemVbdGhpcy5zaXplQ29kZV0gKyAnJSc7CiAgICAgICAgICAgICAgICBoZWlnaHQgPSAodGhpcy5zaXplW3RoaXMuc2l6ZUNvZGVdIC8gMTAwICogMC42ICogd2luZG93LmlubmVyV2lkdGgpICsgJ3B4JzsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gYGxlZnQ6JHt0aGlzLnBvc2l0aW9uLmxlZnR9cHg7dG9wOiR7dGhpcy5wb3NpdGlvbi50b3B9cHg7d2lkdGg6JHt3aWR0aH07aGVpZ2h0OiR7aGVpZ2h0fTske292ZXJyaWRlfWA7CiAgICAgICAgfQogICAgfSwKICAgIG1vdW50ZWQ6IGZ1bmN0aW9uKCkgewogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgdGhpcy4kdGVsZS4kb24oJ3VwZGF0ZVNyYycsIHNyYyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnNyYyA9IHNyYzsKICAgICAgICAgICAgICAgIHRoaXMuaXNTaG93ID0gMTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGxldCBwb3NpdGlvbiA9IGdldFNldCgnaW50YWJQb3NpdGlvbicsIHsgbGVmdDogMTAwLCB0b3A6IDEwMCB9KQogICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247CiAgICAgICAgfSk7CiAgICB9Cn07CgovKioKICogaW50YWJQbGF5ZXIgQ1NTCiAqLwphZGRTdHlsZShgCiAgYnV0dG9ue2N1cnNvcjpwb2ludGVyfQogICNpbnRhYlBsYXllcnt6LWluZGV4Ojk5OTk5ODtwb3NpdGlvbjpmaXhlZDtkaXNwbGF5OmJsb2NrO292ZXJmbG93OmhpZGRlbjtyZXNpemU6Ym90aCFpbXBvcnRhbnQ7Ym94LXNoYWRvdzowIDAgNXB4IDVweCAjZmZmZjMzY2M7Y29sb3I6IzNhM2EzYSFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206MTBweH0KICAjaW50YWJQbGF5ZXIgI2Jhcnt2aXNpYmlsaXR5OmhpZGRlbjtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDoxMDAlfQogICNpbnRhYlBsYXllcjpob3ZlciAjYmFye3Zpc2liaWxpdHk6dmlzaWJsZTtjdXJzb3I6bW92ZX0KICAjaW50YWJQbGF5ZXIgI2JhciBidXR0b257YmFja2dyb3VuZDp5ZWxsb3c7cGFkZGluZzowcHggMTBweDtmb250LXNpemU6MjBweDtsaW5lLWhlaWdodDozMHB4O2JvcmRlcjoxcHggc29saWQgIzNhM2EzYX0KICAjaW50YWJQbGF5ZXIgI2JhciBidXR0b246aG92ZXJ7YmFja2dyb3VuZDpyZWR9CiAgI2ludGFiUGxheWVyIGlmcmFtZXt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2JvcmRlcjowfQpgKTsKCgovKioKICog57yW6L6RQVBJ57uE5Lu2IGVkaXRBcGlzLnZ1ZQogKi8KY29uc3QgY29tRWRpdEFwaXMgPSB7CiAgICB0ZW1wbGF0ZTogYDxkaXYgdi1pZj0iaXNTaG93IiBpZD0iZWRpdEFwaXMiPgogICAgPGRpdj4KICAgICAgPGJ1dHRvbiBAY2xpY2s9InNhdmVBcGlzIiBjbGFzcz0iYmlnZ2VyIj7kv53lrZg8L2J1dHRvbj4KICAgICAgPGJ1dHRvbiBAY2xpY2s9ImNsb3NlRWRpdCIgY2xhc3M9ImJpZ2dlciI+5YWz6ZetPC9idXR0b24+CiAgICA8L2Rpdj4KICAgIDxsaSB2LWZvcj0iKGFwaSxpbmRleCkgaW4gZGVmYXVsdEFwaXMuYXBpcyIgOmtleT0iJ2RlZmF1bHQnK2luZGV4Ij4KICAgICAgPGlucHV0IHYtbW9kZWw9ImFwaS5uYW1lIiBjbGFzcz0ic2hvcnQiIHBsYWNlaG9sZGVyPSLlkI3np7AiIEBjaGFuZ2U9ImlzQ2hhbmdlZD0xIj4KICAgICAgPGlucHV0IHYtbW9kZWw9ImFwaS51cmwiIGNsYXNzPSJsb25nIiBwbGFjZWhvbGRlcj0iQVBJ5Zyw5Z2AIiBAY2hhbmdlPSJpc0NoYW5nZWQ9MSI+CiAgICAgIDxpbnB1dCB2LW1vZGVsPSJhcGkudGl0bGUiIGNsYXNzPSJzaG9ydCIgcGxhY2Vob2xkZXI9IuWkh+azqCIgQGNoYW5nZT0iaXNDaGFuZ2VkPTEiPgogICAgICA8bGFiZWw+PGlucHV0IHYtbW9kZWw9ImFwaS5pbnRhYiIgdHlwZT0iY2hlY2tib3giPjxzcGFuPumhteWGheaSreaUvjwvc3Bhbj48L2xhYmVsPgogICAgICA8YnV0dG9uIEBjbGljaz0idGVzdEFwaShpbmRleCwgMSkiPua1i+ivlTwvYnV0dG9uPgogICAgICA8YnV0dG9uIEBjbGljaz0iYWRkQXBpKGluZGV4LCAxKSI+5aKe5YqgPC9idXR0b24+CiAgICAgIDxidXR0b24gQGNsaWNrPSJkZWxldGVBcGkoaW5kZXgsIDEpIj7liKDpmaQ8L2J1dHRvbj4KICAgIDwvbGk+CiAgICA8aHI+CiAgICA8bGkgdi1mb3I9IihhcGksaW5kZXgpIGluIG15QXBpcy5hcGlzIiA6a2V5PSInbXknK2luZGV4Ij4KICAgICAgPGlucHV0IHYtbW9kZWw9ImFwaS5uYW1lIiBjbGFzcz0ic2hvcnQiIHBsYWNlaG9sZGVyPSLlkI3np7AiIEBjaGFuZ2U9ImlzQ2hhbmdlZD0xIj4KICAgICAgPGlucHV0IHYtbW9kZWw9ImFwaS51cmwiIGNsYXNzPSJsb25nIiBwbGFjZWhvbGRlcj0iQVBJ5Zyw5Z2AIiBAY2hhbmdlPSJpc0NoYW5nZWQ9MSI+CiAgICAgIDxpbnB1dCB2LW1vZGVsPSJhcGkudGl0bGUiIGNsYXNzPSJzaG9ydCIgcGxhY2Vob2xkZXI9IuWkh+azqCIgQGNoYW5nZT0iaXNDaGFuZ2VkPTEiPgogICAgICA8bGFiZWw+PGlucHV0IHYtbW9kZWw9ImFwaS5pbnRhYiIgdHlwZT0iY2hlY2tib3giPjxzcGFuPumhteWGheaSreaUvjwvc3Bhbj48L2xhYmVsPgogICAgICA8YnV0dG9uIEBjbGljaz0idGVzdEFwaShpbmRleCwgMCkiPua1i+ivlTwvYnV0dG9uPgogICAgICA8YnV0dG9uIEBjbGljaz0iYWRkQXBpKGluZGV4LCAwKSI+5aKe5YqgPC9idXR0b24+CiAgICAgIDxidXR0b24gQGNsaWNrPSJkZWxldGVBcGkoaW5kZXgsIDApIj7liKDpmaQ8L2J1dHRvbj4KICAgIDwvbGk+CiAgPC9kaXY+YCwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaXNTaG93OiAwLAogICAgICAgICAgICBpc0NoYW5nZWQ6IDAsCiAgICAgICAgICAgIGRlZmF1bHRBcGlzOiB7IGFwaXM6IFtdIH0sCiAgICAgICAgICAgIG15QXBpczogeyBhcGlzOiBbXSB9CiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBzYXZlQXBpcygpIHsKICAgICAgICAgICAgbGV0IGRlZmF1bHRBcGlzID0gdGhpcy5kZWZhdWx0QXBpcy5hcGlzLmZpbHRlcihpdGVtID0+IHsKICAgICAgICAgICAgICAgIGlmIChpdGVtLnVybCkgeyByZXR1cm4gaXRlbTsgfQogICAgICAgICAgICB9KQogICAgICAgICAgICBsZXQgbXlBcGlzID0gdGhpcy5teUFwaXMuYXBpcy5maWx0ZXIoaXRlbSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoaXRlbS51cmwpIHsgcmV0dXJuIGl0ZW07IH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRlZmF1bHRBcGlzLG15QXBpcyk7CiAgICAgICAgICAgIEdNc2V0VmFsdWUoImRlZmF1bHRBcGlzIiwgZGVmYXVsdEFwaXMpOwogICAgICAgICAgICBHTXNldFZhbHVlKCJteUFwaXMiLCBteUFwaXMpOwogICAgICAgICAgICB0aGlzLiR0ZWxlLiRlbWl0KCJ1cGRhdGVBcGlzIiwgMCk7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5pc1Nob3cgPSAwOwogICAgICAgICAgICAgICAgdGhpcy5pc0NoYW5nZWQgPSAwOwogICAgICAgICAgICB9LCA1MDApOwogICAgICAgIH0sCiAgICAgICAgY2xvc2VFZGl0KCkgewogICAgICAgICAgICBpZiAodGhpcy5pc0NoYW5nZWQpIHsKICAgICAgICAgICAgICAgIGxldCBjZiA9IGNvbmZpcm0oIuacieaUueWKqO+8jOacquS/neWtmOWwseWFs+mXreWQlz8iKTsKICAgICAgICAgICAgICAgIGlmIChjZikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaXNTaG93ID0gMDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ2hhbmdlZCA9IDA7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuaXNTaG93ID0gMDsKICAgICAgICAgICAgICAgIHRoaXMuaXNDaGFuZ2VkID0gMDsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdGVzdEFwaShpbmRleCwgaXNEZWZhdWx0KSB7CiAgICAgICAgICAgIGxldCBhcGkgPSBpc0RlZmF1bHQgPyB0aGlzLmRlZmF1bHRBcGlzLmFwaXNbaW5kZXhdLnVybCA6IHRoaXMubXlBcGlzLmFwaXNbaW5kZXhdLnVybDsKICAgICAgICAgICAgd2luZG93Lm9wZW4oYXBpICsgbG9jYXRpb24uaHJlZiwgJ19ibGFuaycpOwogICAgICAgIH0sCiAgICAgICAgYWRkQXBpKGluZGV4LCBpc0RlZmF1bHQpIHsKICAgICAgICAgICAgbGV0IGJsYW5rSXRlbSA9IHsgbmFtZTogJycsIHVybDogJycsIHRpdGxlOiAnJywgaW50YWI6IDAgfTsKICAgICAgICAgICAgaWYgKGlzRGVmYXVsdCkgewogICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0QXBpcy5hcGlzLnNwbGljZShpbmRleCArIDEsIDAsIGJsYW5rSXRlbSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLm15QXBpcy5hcGlzLnNwbGljZShpbmRleCArIDEsIDAsIGJsYW5rSXRlbSkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZGVsZXRlQXBpKGluZGV4LCBpc0RlZmF1bHQpIHsKICAgICAgICAgICAgaWYgKGlzRGVmYXVsdCkgewogICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0QXBpcy5hcGlzLnNwbGljZShpbmRleCwgMSkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMubXlBcGlzLmFwaXMuc3BsaWNlKGluZGV4LCAxKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIG1vdW50ZWQ6IGZ1bmN0aW9uKCkgewogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgdGhpcy4kdGVsZS4kb24oImVkaXRBcGlzIiwgKGRlZmF1bHRBcGlzKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRBcGlzLmFwaXMgPSBHTWdldFZhbHVlKCdkZWZhdWx0QXBpcycsIGRlZmF1bHRBcGlzKTsKICAgICAgICAgICAgICAgIGxldCBteUFwaXMgPSBHTWdldFZhbHVlKCdteUFwaXMnLCBbXSk7CiAgICAgICAgICAgICAgICB0aGlzLm15QXBpcy5hcGlzID0gbXlBcGlzLmxlbmd0aCA/IG15QXBpcyA6IFt7IG5hbWU6ICcnLCB1cmw6ICcnLCB0aXRsZTogJycsIGludGFiOiAwIH1dOwogICAgICAgICAgICAgICAgdGhpcy5pc1Nob3cgPSAxOwogICAgICAgICAgICB9KQogICAgICAgIH0pCiAgICB9Cn07CgovKioKICogZWRpdEFwaXMudnVlIENTUwogKi8KYWRkU3R5bGUoYAogICNlZGl0QXBpc3t6LWluZGV4Ojk5OTk5ODtwb3NpdGlvbjpmaXhlZDt0b3A6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2JhY2tncm91bmQ6IzNhM2EzYWNjO2NvbG9yOndoaXRlO3RleHQtYWxpZ246Y2VudGVyO292ZXJmbG93OmF1dG99CiAgI2VkaXRBcGlzIGxpe2xpc3Qtc3R5bGUtdHlwZTpub25lO2Rpc3BsYXk6YmxvY2s7bWFyZ2luLWJvdHRvbTozcHh9CiAgI2VkaXRBcGlzIGlucHV0e2JvcmRlcjoxcHggc29saWQgIzk5OTtwYWRkaW5nOjNweDttYXJnaW4tcmlnaHQ6NXB4O2JvcmRlci1yYWRpdXM6M3B4fQogICNlZGl0QXBpcyAuc2hvcnR7d2lkdGg6MTAwcHh9CiAgI2VkaXRBcGlzIC5sb25ne3dpZHRoOjI1MHB4fQogICNlZGl0QXBpcyBidXR0b257ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzozcHg7bWFyZ2luOjJweDtjb2xvcjojM2EzYTNhO2JhY2tncm91bmQ6I2ZmMDtib3JkZXI6MH0KICAjZWRpdEFwaXMgLmJpZ2dlcntmb250LXNpemU6MjBweDtwYWRkaW5nOjVweCAxMHB4fQpgKTsKCi8qKgogKiDkuLvnlYzpnaIg57uE5Lu2CiAqLwpjb25zdCBjb21NYWluID0gewogICAgdGVtcGxhdGU6IGA8ZGl2IGlkPSJjcmFja1ZJUFNldCIgcmVmPSJjcmFja1ZJUFNldCIgOnN0eWxlPSJzdHlsZVRvcCI+CiAgICA8ZGl2IGlkPSJuYXYiPgogICAgPGJ1dHRvbiBAbW91c2VvdmVyPSJuYXY9J2FwaXMnIiBAY2xpY2s9InF1aWNrSnVtcCIgQG1vdXNlZG93bi5wcmV2ZW50PSJtb3ZlWSIgbmFtZT0icXVpY2tKdW1wIj7ilrY8L2J1dHRvbj4KICAgIDxidXR0b24gQG1vdXNlb3Zlcj0ibmF2PSdzZXR0aW5ncyciPuKYkTwvYnV0dG9uPgogICAgPC9kaXY+CiAgICA8ZGl2IGlkPSJsaXN0Ij4KICAgICAgPGRpdiB2LWlmPSJuYXY9PSdhcGlzJyI+CiAgICAgICAgPGIgdi1mb3I9IihhcGksaW5kZXgpIGluIGFwaXMiCiAgICAgICAgICBAY2xpY2s9Imp1bXAoaW5kZXgpIgogICAgICAgICAgOmtleT0iaW5kZXgiIDp0aXRsZT0iYXBpLnRpdGxlfHwnJyIKICAgICAgICAgIDpkYXRhLWljb249ImFwaS5pbnRhYiA/ICfwn5eWJyA6ICfwn5eXJyI+e3thcGkubmFtZXx8J+acquWRveWQjSd9fTwvYj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgdi1lbHNlLWlmPSJuYXY9PSdzZXR0aW5ncyciIHN0eWxlPSJwb3NpdGlvbjpyZWxhdGl2ZTt0b3A6NTBweDsiPgogICAgICAgIDxiIHYtZm9yPSIoa2V5LGluZGV4KSBpbiBPYmplY3Qua2V5cyhzZXR0aW5ncykiIDprZXk9ImluZGV4Ij4KICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgPGlucHV0IHYtbW9kZWw9InNldHRpbmdzW2tleV0udmFsdWUiIEBjaGFuZ2U9ImNoYW5nZVNldHRpbmcoa2V5KSIgdHlwZT0iY2hlY2tib3giPgogICAgICAgICAgICA8c3Bhbj57e3NldHRpbmdzW2tleV0ubmFtZX19PC9zcGFuPgogICAgICAgICAgPC9sYWJlbD4KICAgICAgICA8L2I+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgICA8aW50YWItcGxheWVyPjwvaW50YWItcGxheWVyPgogICAgPGVkaXQtYXBpcz48L2VkaXQtYXBpcz4KICA8L2Rpdj5gLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBhcGlzOiBbXSwKICAgICAgICAgICAgZGVmYXVsdEFwaXM6IFtdLAogICAgICAgICAgICBteUFwaXM6IFtdLAogICAgICAgICAgICBzZXR0aW5nczogewogICAgICAgICAgICAgICAgb3BlbkludGFiOiB7IHZhbHVlOiAwLCBuYW1lOiAi6aG15YaF5pKt5pS+IiB9LAogICAgICAgICAgICAgICAgbXlBcGlzRmlyc3Q6IHsgdmFsdWU6IDAsIG5hbWU6ICLmiJHnmoRBUEnkvJjlhYgiIH0sCiAgICAgICAgICAgICAgICBlZGl0QXBpczogeyB2YWx1ZTogMCwgbmFtZTogIueuoeeQhkFQSSIgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbmF2OiAnYXBpcycsCiAgICAgICAgICAgIHRvcE9mZnNldDogNTAsCiAgICAgICAgfQogICAgfSwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICAnaW50YWItcGxheWVyJzogY29tSW50YWJQbGF5ZXIsCiAgICAgICAgJ2VkaXQtYXBpcyc6IGNvbUVkaXRBcGlzLAogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBtb3ZlWShlKSB7CiAgICAgICAgICAgIGxldCBkaXYgPSB0aGlzLiRyZWZzLmNyYWNrVklQU2V0OwogICAgICAgICAgICBsZXQgZGlzWSA9IGUuY2xpZW50WSAtIGRpdi5vZmZzZXRUb3A7CiAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2Vtb3ZlID0gKGUpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMudG9wT2Zmc2V0ID0gZS5jbGllbnRZIC0gZGlzWTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZG9jdW1lbnQub25tb3VzZXVwID0gKGUpID0+IHsKICAgICAgICAgICAgICAgIHNhdmVTZXQoInRvcFNldCIsIHRoaXMudG9wT2Zmc2V0KTsKICAgICAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2Vtb3ZlID0gbnVsbDsKICAgICAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2V1cCA9IG51bGw7CiAgICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICBxdWlja0p1bXAoKSB7CiAgICAgICAgICAgIHRoaXMuanVtcCgwKTsKICAgICAgICB9LAogICAgICAgIGp1bXAoaW5kZXgpIHsKICAgICAgICAgICAgbGV0IGxpbmsgPSB0aGlzLmFwaXNbaW5kZXhdLnVybCArIGxvY2F0aW9uLmhyZWY7CiAgICAgICAgICAgIC8vIGxldCBsaW5rID0gdGhpcy5hcGlzW2luZGV4XS51cmwrJ2h0dHBzOi8vd3d3LmlxaXlpLmNvbS92XzE5cnIyYWlobmMuaHRtbD92ZnJtPXBjd19ob21lJnZmcm1ibGs9Q1cmdmZybXJzdD04MTIyMTFfd2RsanhrX2ltYWdlMSc7CiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLm9wZW5JbnRhYi52YWx1ZSAmJiB0aGlzLmFwaXNbaW5kZXhdLmludGFiKSB7CiAgICAgICAgICAgICAgICAvLyDnoa7kv53plIDmr4Hljp/mnaXnmoRpZnJhbWUKICAgICAgICAgICAgICAgIHRoaXMuJHRlbGUuJGVtaXQoJ3VwZGF0ZVNyYycsICcnKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHRlbGUuJGVtaXQoJ3VwZGF0ZVNyYycsIGxpbmspOwogICAgICAgICAgICAgICAgfSwgMjAwKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKGxpbmssICdfYmxhbmsnKTsKICAgICAgICAgICAgfQoKICAgICAgICB9LAogICAgICAgIGNoYW5nZVNldHRpbmcobmFtZSkgewogICAgICAgICAgICBHTXNldFZhbHVlKCJTZXR0aW5ncyIsIHRoaXMuc2V0dGluZ3MpOwogICAgICAgICAgICBpZiAobmFtZSA9PSAnZWRpdEFwaXMnKSB7CiAgICAgICAgICAgICAgICB0aGlzLiR0ZWxlLiRlbWl0KCdlZGl0QXBpcycsIHRoaXMuZGVmYXVsdEFwaXMpCiAgICAgICAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAnbXlBcGlzRmlyc3QnKSB7CiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUFwaXMoKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdXBkYXRlQXBpcygpIHsKICAgICAgICAgICAgdGhpcy5kZWZhdWx0QXBpcyA9IEdNZ2V0VmFsdWUoJ2RlZmF1bHRBcGlzJywgQVBJUyk7CiAgICAgICAgICAgIHRoaXMubXlBcGlzID0gR01nZXRWYWx1ZSgibXlBcGlzIiwgW10pOwogICAgICAgICAgICBsZXQgc2V0dGluZ3MgPSBHTWdldFZhbHVlKCJTZXR0aW5ncyIsIHt9KTsKICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MubXlBcGlzRmlyc3QudmFsdWUpIHsKICAgICAgICAgICAgICAgIHRoaXMuYXBpcyA9IHRoaXMubXlBcGlzLmNvbmNhdCh0aGlzLmRlZmF1bHRBcGlzKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuYXBpcyA9IHRoaXMuZGVmYXVsdEFwaXMuY29uY2F0KHRoaXMubXlBcGlzKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIHN0eWxlVG9wKCkgewogICAgICAgICAgICByZXR1cm4gYHRvcDoke3RoaXMudG9wT2Zmc2V0fXB4O2A7CiAgICAgICAgfQogICAgfSwKICAgIG1vdW50ZWQ6IGZ1bmN0aW9uKCkgewogICAgICAgIHRoaXMuJHRlbGUuJG9uKCd1cGRhdGVBcGlzJywgKCkgPT4geyB0aGlzLnVwZGF0ZUFwaXMoKSB9KTsKICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgIGxldCB0b3BPZmZzZXQgPSBnZXRTZXQoJ3RvcFNldCcsIDUwKTsKICAgICAgICAgICAgdGhpcy50b3BPZmZzZXQgPSB0b3BPZmZzZXQ7CgogICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuc2V0dGluZ3MsIEdNZ2V0VmFsdWUoIlNldHRpbmdzIiwge30pKTsKICAgICAgICAgICAgdGhpcy51cGRhdGVBcGlzKCk7CiAgICAgICAgfSk7CiAgICB9Cn07CgovKioKICog5Li755WM6Z2iIENTUwogKi8KYWRkU3R5bGUoYAogIGJvZHl7cGFkZGluZzowO21hcmdpbjowfQogICNjcmFja1ZJUFNldCBpbnB1dFt0eXBlPWNoZWNrYm94XSwjZWRpdEFwaXMgaW5wdXRbdHlwZT1jaGVja2JveF17ZGlzcGxheTpub25lfQogICNjcmFja1ZJUFNldCBpbnB1dFt0eXBlPWNoZWNrYm94XSArIHNwYW46YmVmb3JlLCNlZGl0QXBpcyBpbnB1dFt0eXBlPWNoZWNrYm94XSArIHNwYW46YmVmb3Jle2NvbnRlbnQ6J+KYkic7bWFyZ2luLXJpZ2h0OjVweH0KICAjY3JhY2tWSVBTZXQgaW5wdXRbdHlwZT1jaGVja2JveF06Y2hlY2tlZCArIHNwYW46YmVmb3JlLCNlZGl0QXBpcyBpbnB1dFt0eXBlPWNoZWNrYm94XTpjaGVja2VkICsgc3BhbjpiZWZvcmV7Y29udGVudDon4piRJzttYXJnaW4tcmlnaHQ6NXB4fQogICNjcmFja1ZJUFNldCwjZWRpdEFwaXMsI2ludGFiUGxheWVye2ZvbnQtZmFtaWx5OiLlvq7ova/pm4Xpu5EifQogICNjcmFja1ZJUFNldHt6LWluZGV4Ojk5OTk5OTtwb3NpdGlvbjpmaXhlZDtkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjMwcHggMTUwcHg7d2lkdGg6MzBweDtoZWlnaHQ6NTBweDtvdmVyZmxvdzpoaWRkZW47cGFkZGluZzo1cHggMCA1cHggMDtvcGFjaXR5OjAuNDtmb250LXNpemU6MTJweH0KICAjY3JhY2tWSVBTZXQgYnV0dG9ue2N1cnNvcjpwb2ludGVyfQogICNjcmFja1ZJUFNldDpob3Zlcnt3aWR0aDoxODBweDtoZWlnaHQ6NDUwcHg7cGFkZGluZzo1cHggNXB4IDVweCAwO29wYWNpdHk6MX0KICAjY3JhY2tWSVBTZXQgI25hdntkaXNwbGF5OmdyaWQ7Z3JpZC1hdXRvLXJvd3M6NTBweCA1MHB4IDIwMHB4O2dyaWQtcm93LWdhcDo1cHh9CiAgI2NyYWNrVklQU2V0ICNuYXYgW25hbWU9cXVpY2tKdW1wXTphY3RpdmV7Y3Vyc29yOm1vdmV9CiAgI2NyYWNrVklQU2V0ICNuYXYgYnV0dG9ue2JhY2tncm91bmQ6eWVsbG93O2NvbG9yOnJlZDtmb250LXNpemU6MjBweDtwYWRkaW5nOjA7Ym9yZGVyOjA7Y3Vyc29yOnBvaW50ZXI7Ym9yZGVyLXJhZGl1czowIDVweCA1cHggMH0KICAjY3JhY2tWSVBTZXQgI2xpc3R7b3ZlcmZsb3c6YXV0bzttYXJnaW4tbGVmdDoycHh9CiAgI2NyYWNrVklQU2V0ICNsaXN0IGJ7ZGlzcGxheTpibG9jaztjdXJzb3I6cG9pbnRlcjtjb2xvcjojM2EzYTNhO2ZvbnQtd2VpZ2h0Om5vcm1hbDtmb250LXNpemU6MTRweDtwYWRkaW5nOjVweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmZmMDBjYztib3JkZXItYm90dG9tOjFweCBkYXNoZWQgIzNhM2EzYX0KICAjY3JhY2tWSVBTZXQgI2xpc3QgYjpiZWZvcmV7Y29udGVudDphdHRyKGRhdGEtaWNvbik7cGFkZGluZy1yaWdodDo1cHh9CiAgI2NyYWNrVklQU2V0ICNsaXN0IGI6Zmlyc3QtY2hpbGR7Ym9yZGVyLXJhZGl1czo1cHggNXB4IDAgMH0KICAjY3JhY2tWSVBTZXQgI2xpc3QgYjpsYXN0LWNoaWxke2JvcmRlci1yYWRpdXM6MCAwIDVweCA1cHh9CiAgI2NyYWNrVklQU2V0ICNsaXN0IGI6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojM2EzYTNhO2NvbG9yOndoaXRlfQpgKTsKCgovKioKICog56ys5LqM6YOo5YiG77yM5byA5aeL55Sf5oiQ5Li755WM6Z2iCiAqLwovLyDpgJrorq/mgLvnur8KVnVlLnByb3RvdHlwZS4kdGVsZSA9IG5ldyBWdWUoKTsKCmxldCBjcmFja0FwcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpjcmFja0FwcC5pZCA9ICJjcmFja1ZJUFNldCI7CmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY3JhY2tBcHApOwoKbmV3IFZ1ZSh7CiAgICBlbDogIiNjcmFja1ZJUFNldCIsCiAgICByZW5kZXI6IGggPT4gaChjb21NYWluKQp9KTsK","requires":[{"meta":{"name":"vue.min.js","url":"https://cdn.jsdelivr.net/npm/vue@2.6.11/dist/vue.min.js","ts":1608841123454,"mimetype":"text/javascript"},"source":"LyohCiAqIFZ1ZS5qcyB2Mi42LjExCiAqIChjKSAyMDE0LTIwMTkgRXZhbiBZb3UKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLgogKi8KIWZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUodCk6KGU9ZXx8c2VsZikuVnVlPXQoKX0odGhpcyxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1PYmplY3QuZnJlZXplKHt9KTtmdW5jdGlvbiB0KGUpe3JldHVybiBudWxsPT1lfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIG51bGwhPWV9ZnVuY3Rpb24gcihlKXtyZXR1cm4hMD09PWV9ZnVuY3Rpb24gaShlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGV8fCJudW1iZXIiPT10eXBlb2YgZXx8InN5bWJvbCI9PXR5cGVvZiBlfHwiYm9vbGVhbiI9PXR5cGVvZiBlfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIG51bGwhPT1lJiYib2JqZWN0Ij09dHlwZW9mIGV9dmFyIGE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztmdW5jdGlvbiBzKGUpe3JldHVybiJbb2JqZWN0IE9iamVjdF0iPT09YS5jYWxsKGUpfWZ1bmN0aW9uIGMoZSl7dmFyIHQ9cGFyc2VGbG9hdChTdHJpbmcoZSkpO3JldHVybiB0Pj0wJiZNYXRoLmZsb29yKHQpPT09dCYmaXNGaW5pdGUoZSl9ZnVuY3Rpb24gdShlKXtyZXR1cm4gbihlKSYmImZ1bmN0aW9uIj09dHlwZW9mIGUudGhlbiYmImZ1bmN0aW9uIj09dHlwZW9mIGUuY2F0Y2h9ZnVuY3Rpb24gbChlKXtyZXR1cm4gbnVsbD09ZT8iIjpBcnJheS5pc0FycmF5KGUpfHxzKGUpJiZlLnRvU3RyaW5nPT09YT9KU09OLnN0cmluZ2lmeShlLG51bGwsMik6U3RyaW5nKGUpfWZ1bmN0aW9uIGYoZSl7dmFyIHQ9cGFyc2VGbG9hdChlKTtyZXR1cm4gaXNOYU4odCk/ZTp0fWZ1bmN0aW9uIHAoZSx0KXtmb3IodmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPWUuc3BsaXQoIiwiKSxpPTA7aTxyLmxlbmd0aDtpKyspbltyW2ldXT0hMDtyZXR1cm4gdD9mdW5jdGlvbihlKXtyZXR1cm4gbltlLnRvTG93ZXJDYXNlKCldfTpmdW5jdGlvbihlKXtyZXR1cm4gbltlXX19dmFyIGQ9cCgic2xvdCxjb21wb25lbnQiLCEwKSx2PXAoImtleSxyZWYsc2xvdCxzbG90LXNjb3BlLGlzIik7ZnVuY3Rpb24gaChlLHQpe2lmKGUubGVuZ3RoKXt2YXIgbj1lLmluZGV4T2YodCk7aWYobj4tMSlyZXR1cm4gZS5zcGxpY2UobiwxKX19dmFyIG09T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtmdW5jdGlvbiB5KGUsdCl7cmV0dXJuIG0uY2FsbChlLHQpfWZ1bmN0aW9uIGcoZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHRbbl18fCh0W25dPWUobikpfX12YXIgXz0vLShcdykvZyxiPWcoZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShfLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/dC50b1VwcGVyQ2FzZSgpOiIifSl9KSwkPWcoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKX0pLHc9L1xCKFtBLVpdKS9nLEM9ZyhmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKHcsIi0kMSIpLnRvTG93ZXJDYXNlKCl9KTt2YXIgeD1GdW5jdGlvbi5wcm90b3R5cGUuYmluZD9mdW5jdGlvbihlLHQpe3JldHVybiBlLmJpbmQodCl9OmZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihuKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoO3JldHVybiByP3I+MT9lLmFwcGx5KHQsYXJndW1lbnRzKTplLmNhbGwodCxuKTplLmNhbGwodCl9cmV0dXJuIG4uX2xlbmd0aD1lLmxlbmd0aCxufTtmdW5jdGlvbiBrKGUsdCl7dD10fHwwO2Zvcih2YXIgbj1lLmxlbmd0aC10LHI9bmV3IEFycmF5KG4pO24tLTspcltuXT1lW24rdF07cmV0dXJuIHJ9ZnVuY3Rpb24gQShlLHQpe2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX1mdW5jdGlvbiBPKGUpe2Zvcih2YXIgdD17fSxuPTA7bjxlLmxlbmd0aDtuKyspZVtuXSYmQSh0LGVbbl0pO3JldHVybiB0fWZ1bmN0aW9uIFMoZSx0LG4pe312YXIgVD1mdW5jdGlvbihlLHQsbil7cmV0dXJuITF9LEU9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9O2Z1bmN0aW9uIE4oZSx0KXtpZihlPT09dClyZXR1cm4hMDt2YXIgbj1vKGUpLHI9byh0KTtpZighbnx8IXIpcmV0dXJuIW4mJiFyJiZTdHJpbmcoZSk9PT1TdHJpbmcodCk7dHJ5e3ZhciBpPUFycmF5LmlzQXJyYXkoZSksYT1BcnJheS5pc0FycmF5KHQpO2lmKGkmJmEpcmV0dXJuIGUubGVuZ3RoPT09dC5sZW5ndGgmJmUuZXZlcnkoZnVuY3Rpb24oZSxuKXtyZXR1cm4gTihlLHRbbl0pfSk7aWYoZSBpbnN0YW5jZW9mIERhdGUmJnQgaW5zdGFuY2VvZiBEYXRlKXJldHVybiBlLmdldFRpbWUoKT09PXQuZ2V0VGltZSgpO2lmKGl8fGEpcmV0dXJuITE7dmFyIHM9T2JqZWN0LmtleXMoZSksYz1PYmplY3Qua2V5cyh0KTtyZXR1cm4gcy5sZW5ndGg9PT1jLmxlbmd0aCYmcy5ldmVyeShmdW5jdGlvbihuKXtyZXR1cm4gTihlW25dLHRbbl0pfSl9Y2F0Y2goZSl7cmV0dXJuITF9fWZ1bmN0aW9uIGooZSx0KXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKylpZihOKGVbbl0sdCkpcmV0dXJuIG47cmV0dXJuLTF9ZnVuY3Rpb24gRChlKXt2YXIgdD0hMTtyZXR1cm4gZnVuY3Rpb24oKXt0fHwodD0hMCxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fXZhciBMPSJkYXRhLXNlcnZlci1yZW5kZXJlZCIsTT1bImNvbXBvbmVudCIsImRpcmVjdGl2ZSIsImZpbHRlciJdLEk9WyJiZWZvcmVDcmVhdGUiLCJjcmVhdGVkIiwiYmVmb3JlTW91bnQiLCJtb3VudGVkIiwiYmVmb3JlVXBkYXRlIiwidXBkYXRlZCIsImJlZm9yZURlc3Ryb3kiLCJkZXN0cm95ZWQiLCJhY3RpdmF0ZWQiLCJkZWFjdGl2YXRlZCIsImVycm9yQ2FwdHVyZWQiLCJzZXJ2ZXJQcmVmZXRjaCJdLEY9e29wdGlvbk1lcmdlU3RyYXRlZ2llczpPYmplY3QuY3JlYXRlKG51bGwpLHNpbGVudDohMSxwcm9kdWN0aW9uVGlwOiExLGRldnRvb2xzOiExLHBlcmZvcm1hbmNlOiExLGVycm9ySGFuZGxlcjpudWxsLHdhcm5IYW5kbGVyOm51bGwsaWdub3JlZEVsZW1lbnRzOltdLGtleUNvZGVzOk9iamVjdC5jcmVhdGUobnVsbCksaXNSZXNlcnZlZFRhZzpULGlzUmVzZXJ2ZWRBdHRyOlQsaXNVbmtub3duRWxlbWVudDpULGdldFRhZ05hbWVzcGFjZTpTLHBhcnNlUGxhdGZvcm1UYWdOYW1lOkUsbXVzdFVzZVByb3A6VCxhc3luYzohMCxfbGlmZWN5Y2xlSG9va3M6SX0sUD0vYS16QS1aXHUwMEI3XHUwMEMwLVx1MDBENlx1MDBEOC1cdTAwRjZcdTAwRjgtXHUwMzdEXHUwMzdGLVx1MUZGRlx1MjAwQy1cdTIwMERcdTIwM0YtXHUyMDQwXHUyMDcwLVx1MjE4Rlx1MkMwMC1cdTJGRUZcdTMwMDEtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRkQvO2Z1bmN0aW9uIFIoZSx0LG4scil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6bixlbnVtZXJhYmxlOiEhcix3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KX12YXIgSD1uZXcgUmVnRXhwKCJbXiIrUC5zb3VyY2UrIi4kX1xcZF0iKTt2YXIgQixVPSJfX3Byb3RvX18iaW57fSx6PSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93LFY9InVuZGVmaW5lZCIhPXR5cGVvZiBXWEVudmlyb25tZW50JiYhIVdYRW52aXJvbm1lbnQucGxhdGZvcm0sSz1WJiZXWEVudmlyb25tZW50LnBsYXRmb3JtLnRvTG93ZXJDYXNlKCksSj16JiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLHE9SiYmL21zaWV8dHJpZGVudC8udGVzdChKKSxXPUomJkouaW5kZXhPZigibXNpZSA5LjAiKT4wLFo9SiYmSi5pbmRleE9mKCJlZGdlLyIpPjAsRz0oSiYmSi5pbmRleE9mKCJhbmRyb2lkIiksSiYmL2lwaG9uZXxpcGFkfGlwb2R8aW9zLy50ZXN0KEopfHwiaW9zIj09PUspLFg9KEomJi9jaHJvbWVcL1xkKy8udGVzdChKKSxKJiYvcGhhbnRvbWpzLy50ZXN0KEopLEomJkoubWF0Y2goL2ZpcmVmb3hcLyhcZCspLykpLFk9e30ud2F0Y2gsUT0hMTtpZih6KXRyeXt2YXIgZWU9e307T2JqZWN0LmRlZmluZVByb3BlcnR5KGVlLCJwYXNzaXZlIix7Z2V0OmZ1bmN0aW9uKCl7UT0hMH19KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigidGVzdC1wYXNzaXZlIixudWxsLGVlKX1jYXRjaChlKXt9dmFyIHRlPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PUImJihCPSF6JiYhViYmInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWwmJihnbG9iYWwucHJvY2VzcyYmInNlcnZlciI9PT1nbG9iYWwucHJvY2Vzcy5lbnYuVlVFX0VOVikpLEJ9LG5lPXomJndpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO2Z1bmN0aW9uIHJlKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlJiYvbmF0aXZlIGNvZGUvLnRlc3QoZS50b1N0cmluZygpKX12YXIgaWUsb2U9InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJnJlKFN5bWJvbCkmJiJ1bmRlZmluZWQiIT10eXBlb2YgUmVmbGVjdCYmcmUoUmVmbGVjdC5vd25LZXlzKTtpZT0idW5kZWZpbmVkIiE9dHlwZW9mIFNldCYmcmUoU2V0KT9TZXQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5zZXQ9T2JqZWN0LmNyZWF0ZShudWxsKX1yZXR1cm4gZS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiEwPT09dGhpcy5zZXRbZV19LGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXt0aGlzLnNldFtlXT0hMH0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLnNldD1PYmplY3QuY3JlYXRlKG51bGwpfSxlfSgpO3ZhciBhZT1TLHNlPTAsY2U9ZnVuY3Rpb24oKXt0aGlzLmlkPXNlKyssdGhpcy5zdWJzPVtdfTtjZS5wcm90b3R5cGUuYWRkU3ViPWZ1bmN0aW9uKGUpe3RoaXMuc3Vicy5wdXNoKGUpfSxjZS5wcm90b3R5cGUucmVtb3ZlU3ViPWZ1bmN0aW9uKGUpe2godGhpcy5zdWJzLGUpfSxjZS5wcm90b3R5cGUuZGVwZW5kPWZ1bmN0aW9uKCl7Y2UudGFyZ2V0JiZjZS50YXJnZXQuYWRkRGVwKHRoaXMpfSxjZS5wcm90b3R5cGUubm90aWZ5PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuc3Vicy5zbGljZSgpLHQ9MCxuPWUubGVuZ3RoO3Q8bjt0KyspZVt0XS51cGRhdGUoKX0sY2UudGFyZ2V0PW51bGw7dmFyIHVlPVtdO2Z1bmN0aW9uIGxlKGUpe3VlLnB1c2goZSksY2UudGFyZ2V0PWV9ZnVuY3Rpb24gZmUoKXt1ZS5wb3AoKSxjZS50YXJnZXQ9dWVbdWUubGVuZ3RoLTFdfXZhciBwZT1mdW5jdGlvbihlLHQsbixyLGksbyxhLHMpe3RoaXMudGFnPWUsdGhpcy5kYXRhPXQsdGhpcy5jaGlsZHJlbj1uLHRoaXMudGV4dD1yLHRoaXMuZWxtPWksdGhpcy5ucz12b2lkIDAsdGhpcy5jb250ZXh0PW8sdGhpcy5mbkNvbnRleHQ9dm9pZCAwLHRoaXMuZm5PcHRpb25zPXZvaWQgMCx0aGlzLmZuU2NvcGVJZD12b2lkIDAsdGhpcy5rZXk9dCYmdC5rZXksdGhpcy5jb21wb25lbnRPcHRpb25zPWEsdGhpcy5jb21wb25lbnRJbnN0YW5jZT12b2lkIDAsdGhpcy5wYXJlbnQ9dm9pZCAwLHRoaXMucmF3PSExLHRoaXMuaXNTdGF0aWM9ITEsdGhpcy5pc1Jvb3RJbnNlcnQ9ITAsdGhpcy5pc0NvbW1lbnQ9ITEsdGhpcy5pc0Nsb25lZD0hMSx0aGlzLmlzT25jZT0hMSx0aGlzLmFzeW5jRmFjdG9yeT1zLHRoaXMuYXN5bmNNZXRhPXZvaWQgMCx0aGlzLmlzQXN5bmNQbGFjZWhvbGRlcj0hMX0sZGU9e2NoaWxkOntjb25maWd1cmFibGU6ITB9fTtkZS5jaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21wb25lbnRJbnN0YW5jZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocGUucHJvdG90eXBlLGRlKTt2YXIgdmU9ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9IiIpO3ZhciB0PW5ldyBwZTtyZXR1cm4gdC50ZXh0PWUsdC5pc0NvbW1lbnQ9ITAsdH07ZnVuY3Rpb24gaGUoZSl7cmV0dXJuIG5ldyBwZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCxTdHJpbmcoZSkpfWZ1bmN0aW9uIG1lKGUpe3ZhciB0PW5ldyBwZShlLnRhZyxlLmRhdGEsZS5jaGlsZHJlbiYmZS5jaGlsZHJlbi5zbGljZSgpLGUudGV4dCxlLmVsbSxlLmNvbnRleHQsZS5jb21wb25lbnRPcHRpb25zLGUuYXN5bmNGYWN0b3J5KTtyZXR1cm4gdC5ucz1lLm5zLHQuaXNTdGF0aWM9ZS5pc1N0YXRpYyx0LmtleT1lLmtleSx0LmlzQ29tbWVudD1lLmlzQ29tbWVudCx0LmZuQ29udGV4dD1lLmZuQ29udGV4dCx0LmZuT3B0aW9ucz1lLmZuT3B0aW9ucyx0LmZuU2NvcGVJZD1lLmZuU2NvcGVJZCx0LmFzeW5jTWV0YT1lLmFzeW5jTWV0YSx0LmlzQ2xvbmVkPSEwLHR9dmFyIHllPUFycmF5LnByb3RvdHlwZSxnZT1PYmplY3QuY3JlYXRlKHllKTtbInB1c2giLCJwb3AiLCJzaGlmdCIsInVuc2hpZnQiLCJzcGxpY2UiLCJzb3J0IiwicmV2ZXJzZSJdLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9eWVbZV07UihnZSxlLGZ1bmN0aW9uKCl7Zm9yKHZhciBuPVtdLHI9YXJndW1lbnRzLmxlbmd0aDtyLS07KW5bcl09YXJndW1lbnRzW3JdO3ZhciBpLG89dC5hcHBseSh0aGlzLG4pLGE9dGhpcy5fX29iX187c3dpdGNoKGUpe2Nhc2UicHVzaCI6Y2FzZSJ1bnNoaWZ0IjppPW47YnJlYWs7Y2FzZSJzcGxpY2UiOmk9bi5zbGljZSgyKX1yZXR1cm4gaSYmYS5vYnNlcnZlQXJyYXkoaSksYS5kZXAubm90aWZ5KCksb30pfSk7dmFyIF9lPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGdlKSxiZT0hMDtmdW5jdGlvbiAkZShlKXtiZT1lfXZhciB3ZT1mdW5jdGlvbihlKXt2YXIgdDt0aGlzLnZhbHVlPWUsdGhpcy5kZXA9bmV3IGNlLHRoaXMudm1Db3VudD0wLFIoZSwiX19vYl9fIix0aGlzKSxBcnJheS5pc0FycmF5KGUpPyhVPyh0PWdlLGUuX19wcm90b19fPXQpOmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9MCxpPW4ubGVuZ3RoO3I8aTtyKyspe3ZhciBvPW5bcl07UihlLG8sdFtvXSl9fShlLGdlLF9lKSx0aGlzLm9ic2VydmVBcnJheShlKSk6dGhpcy53YWxrKGUpfTtmdW5jdGlvbiBDZShlLHQpe3ZhciBuO2lmKG8oZSkmJiEoZSBpbnN0YW5jZW9mIHBlKSlyZXR1cm4geShlLCJfX29iX18iKSYmZS5fX29iX18gaW5zdGFuY2VvZiB3ZT9uPWUuX19vYl9fOmJlJiYhdGUoKSYmKEFycmF5LmlzQXJyYXkoZSl8fHMoZSkpJiZPYmplY3QuaXNFeHRlbnNpYmxlKGUpJiYhZS5faXNWdWUmJihuPW5ldyB3ZShlKSksdCYmbiYmbi52bUNvdW50Kyssbn1mdW5jdGlvbiB4ZShlLHQsbixyLGkpe3ZhciBvPW5ldyBjZSxhPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KTtpZighYXx8ITEhPT1hLmNvbmZpZ3VyYWJsZSl7dmFyIHM9YSYmYS5nZXQsYz1hJiZhLnNldDtzJiYhY3x8MiE9PWFyZ3VtZW50cy5sZW5ndGh8fChuPWVbdF0pO3ZhciB1PSFpJiZDZShuKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXt2YXIgdD1zP3MuY2FsbChlKTpuO3JldHVybiBjZS50YXJnZXQmJihvLmRlcGVuZCgpLHUmJih1LmRlcC5kZXBlbmQoKSxBcnJheS5pc0FycmF5KHQpJiZmdW5jdGlvbiBlKHQpe2Zvcih2YXIgbj12b2lkIDAscj0wLGk9dC5sZW5ndGg7cjxpO3IrKykobj10W3JdKSYmbi5fX29iX18mJm4uX19vYl9fLmRlcC5kZXBlbmQoKSxBcnJheS5pc0FycmF5KG4pJiZlKG4pfSh0KSkpLHR9LHNldDpmdW5jdGlvbih0KXt2YXIgcj1zP3MuY2FsbChlKTpuO3Q9PT1yfHx0IT10JiZyIT1yfHxzJiYhY3x8KGM/Yy5jYWxsKGUsdCk6bj10LHU9IWkmJkNlKHQpLG8ubm90aWZ5KCkpfX0pfX1mdW5jdGlvbiBrZShlLHQsbil7aWYoQXJyYXkuaXNBcnJheShlKSYmYyh0KSlyZXR1cm4gZS5sZW5ndGg9TWF0aC5tYXgoZS5sZW5ndGgsdCksZS5zcGxpY2UodCwxLG4pLG47aWYodCBpbiBlJiYhKHQgaW4gT2JqZWN0LnByb3RvdHlwZSkpcmV0dXJuIGVbdF09bixuO3ZhciByPWUuX19vYl9fO3JldHVybiBlLl9pc1Z1ZXx8ciYmci52bUNvdW50P246cj8oeGUoci52YWx1ZSx0LG4pLHIuZGVwLm5vdGlmeSgpLG4pOihlW3RdPW4sbil9ZnVuY3Rpb24gQWUoZSx0KXtpZihBcnJheS5pc0FycmF5KGUpJiZjKHQpKWUuc3BsaWNlKHQsMSk7ZWxzZXt2YXIgbj1lLl9fb2JfXztlLl9pc1Z1ZXx8biYmbi52bUNvdW50fHx5KGUsdCkmJihkZWxldGUgZVt0XSxuJiZuLmRlcC5ub3RpZnkoKSl9fXdlLnByb3RvdHlwZS53YWxrPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxuPTA7bjx0Lmxlbmd0aDtuKyspeGUoZSx0W25dKX0sd2UucHJvdG90eXBlLm9ic2VydmVBcnJheT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxuPWUubGVuZ3RoO3Q8bjt0KyspQ2UoZVt0XSl9O3ZhciBPZT1GLm9wdGlvbk1lcmdlU3RyYXRlZ2llcztmdW5jdGlvbiBTZShlLHQpe2lmKCF0KXJldHVybiBlO2Zvcih2YXIgbixyLGksbz1vZT9SZWZsZWN0Lm93bktleXModCk6T2JqZWN0LmtleXModCksYT0wO2E8by5sZW5ndGg7YSsrKSJfX29iX18iIT09KG49b1thXSkmJihyPWVbbl0saT10W25dLHkoZSxuKT9yIT09aSYmcyhyKSYmcyhpKSYmU2UocixpKTprZShlLG4saSkpO3JldHVybiBlfWZ1bmN0aW9uIFRlKGUsdCxuKXtyZXR1cm4gbj9mdW5jdGlvbigpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3QuY2FsbChuLG4pOnQsaT0iZnVuY3Rpb24iPT10eXBlb2YgZT9lLmNhbGwobixuKTplO3JldHVybiByP1NlKHIsaSk6aX06dD9lP2Z1bmN0aW9uKCl7cmV0dXJuIFNlKCJmdW5jdGlvbiI9PXR5cGVvZiB0P3QuY2FsbCh0aGlzLHRoaXMpOnQsImZ1bmN0aW9uIj09dHlwZW9mIGU/ZS5jYWxsKHRoaXMsdGhpcyk6ZSl9OnQ6ZX1mdW5jdGlvbiBFZShlLHQpe3ZhciBuPXQ/ZT9lLmNvbmNhdCh0KTpBcnJheS5pc0FycmF5KHQpP3Q6W3RdOmU7cmV0dXJuIG4/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49MDtuPGUubGVuZ3RoO24rKyktMT09PXQuaW5kZXhPZihlW25dKSYmdC5wdXNoKGVbbl0pO3JldHVybiB0fShuKTpufWZ1bmN0aW9uIE5lKGUsdCxuLHIpe3ZhciBpPU9iamVjdC5jcmVhdGUoZXx8bnVsbCk7cmV0dXJuIHQ/QShpLHQpOml9T2UuZGF0YT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIG4/VGUoZSx0LG4pOnQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0P2U6VGUoZSx0KX0sSS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09lW2VdPUVlfSksTS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09lW2UrInMiXT1OZX0pLE9lLndhdGNoPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKGU9PT1ZJiYoZT12b2lkIDApLHQ9PT1ZJiYodD12b2lkIDApLCF0KXJldHVybiBPYmplY3QuY3JlYXRlKGV8fG51bGwpO2lmKCFlKXJldHVybiB0O3ZhciBpPXt9O2Zvcih2YXIgbyBpbiBBKGksZSksdCl7dmFyIGE9aVtvXSxzPXRbb107YSYmIUFycmF5LmlzQXJyYXkoYSkmJihhPVthXSksaVtvXT1hP2EuY29uY2F0KHMpOkFycmF5LmlzQXJyYXkocyk/czpbc119cmV0dXJuIGl9LE9lLnByb3BzPU9lLm1ldGhvZHM9T2UuaW5qZWN0PU9lLmNvbXB1dGVkPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKCFlKXJldHVybiB0O3ZhciBpPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIEEoaSxlKSx0JiZBKGksdCksaX0sT2UucHJvdmlkZT1UZTt2YXIgamU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD9lOnR9O2Z1bmN0aW9uIERlKGUsdCxuKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHQ9dC5vcHRpb25zKSxmdW5jdGlvbihlLHQpe3ZhciBuPWUucHJvcHM7aWYobil7dmFyIHIsaSxvPXt9O2lmKEFycmF5LmlzQXJyYXkobikpZm9yKHI9bi5sZW5ndGg7ci0tOykic3RyaW5nIj09dHlwZW9mKGk9bltyXSkmJihvW2IoaSldPXt0eXBlOm51bGx9KTtlbHNlIGlmKHMobikpZm9yKHZhciBhIGluIG4paT1uW2FdLG9bYihhKV09cyhpKT9pOnt0eXBlOml9O2UucHJvcHM9b319KHQpLGZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5pbmplY3Q7aWYobil7dmFyIHI9ZS5pbmplY3Q9e307aWYoQXJyYXkuaXNBcnJheShuKSlmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKylyW25baV1dPXtmcm9tOm5baV19O2Vsc2UgaWYocyhuKSlmb3IodmFyIG8gaW4gbil7dmFyIGE9bltvXTtyW29dPXMoYSk/QSh7ZnJvbTpvfSxhKTp7ZnJvbTphfX19fSh0KSxmdW5jdGlvbihlKXt2YXIgdD1lLmRpcmVjdGl2ZXM7aWYodClmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXTsiZnVuY3Rpb24iPT10eXBlb2YgciYmKHRbbl09e2JpbmQ6cix1cGRhdGU6cn0pfX0odCksIXQuX2Jhc2UmJih0LmV4dGVuZHMmJihlPURlKGUsdC5leHRlbmRzLG4pKSx0Lm1peGlucykpZm9yKHZhciByPTAsaT10Lm1peGlucy5sZW5ndGg7cjxpO3IrKyllPURlKGUsdC5taXhpbnNbcl0sbik7dmFyIG8sYT17fTtmb3IobyBpbiBlKWMobyk7Zm9yKG8gaW4gdCl5KGUsbyl8fGMobyk7ZnVuY3Rpb24gYyhyKXt2YXIgaT1PZVtyXXx8amU7YVtyXT1pKGVbcl0sdFtyXSxuLHIpfXJldHVybiBhfWZ1bmN0aW9uIExlKGUsdCxuLHIpe2lmKCJzdHJpbmciPT10eXBlb2Ygbil7dmFyIGk9ZVt0XTtpZih5KGksbikpcmV0dXJuIGlbbl07dmFyIG89YihuKTtpZih5KGksbykpcmV0dXJuIGlbb107dmFyIGE9JChvKTtyZXR1cm4geShpLGEpP2lbYV06aVtuXXx8aVtvXXx8aVthXX19ZnVuY3Rpb24gTWUoZSx0LG4scil7dmFyIGk9dFtlXSxvPSF5KG4sZSksYT1uW2VdLHM9UGUoQm9vbGVhbixpLnR5cGUpO2lmKHM+LTEpaWYobyYmIXkoaSwiZGVmYXVsdCIpKWE9ITE7ZWxzZSBpZigiIj09PWF8fGE9PT1DKGUpKXt2YXIgYz1QZShTdHJpbmcsaS50eXBlKTsoYzwwfHxzPGMpJiYoYT0hMCl9aWYodm9pZCAwPT09YSl7YT1mdW5jdGlvbihlLHQsbil7aWYoIXkodCwiZGVmYXVsdCIpKXJldHVybjt2YXIgcj10LmRlZmF1bHQ7aWYoZSYmZS4kb3B0aW9ucy5wcm9wc0RhdGEmJnZvaWQgMD09PWUuJG9wdGlvbnMucHJvcHNEYXRhW25dJiZ2b2lkIDAhPT1lLl9wcm9wc1tuXSlyZXR1cm4gZS5fcHJvcHNbbl07cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHImJiJGdW5jdGlvbiIhPT1JZSh0LnR5cGUpP3IuY2FsbChlKTpyfShyLGksZSk7dmFyIHU9YmU7JGUoITApLENlKGEpLCRlKHUpfXJldHVybiBhfWZ1bmN0aW9uIEllKGUpe3ZhciB0PWUmJmUudG9TdHJpbmcoKS5tYXRjaCgvXlxzKmZ1bmN0aW9uIChcdyspLyk7cmV0dXJuIHQ/dFsxXToiIn1mdW5jdGlvbiBGZShlLHQpe3JldHVybiBJZShlKT09PUllKHQpfWZ1bmN0aW9uIFBlKGUsdCl7aWYoIUFycmF5LmlzQXJyYXkodCkpcmV0dXJuIEZlKHQsZSk/MDotMTtmb3IodmFyIG49MCxyPXQubGVuZ3RoO248cjtuKyspaWYoRmUodFtuXSxlKSlyZXR1cm4gbjtyZXR1cm4tMX1mdW5jdGlvbiBSZShlLHQsbil7bGUoKTt0cnl7aWYodClmb3IodmFyIHI9dDtyPXIuJHBhcmVudDspe3ZhciBpPXIuJG9wdGlvbnMuZXJyb3JDYXB0dXJlZDtpZihpKWZvcih2YXIgbz0wO288aS5sZW5ndGg7bysrKXRyeXtpZighMT09PWlbb10uY2FsbChyLGUsdCxuKSlyZXR1cm59Y2F0Y2goZSl7QmUoZSxyLCJlcnJvckNhcHR1cmVkIGhvb2siKX19QmUoZSx0LG4pfWZpbmFsbHl7ZmUoKX19ZnVuY3Rpb24gSGUoZSx0LG4scixpKXt2YXIgbzt0cnl7KG89bj9lLmFwcGx5KHQsbik6ZS5jYWxsKHQpKSYmIW8uX2lzVnVlJiZ1KG8pJiYhby5faGFuZGxlZCYmKG8uY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIFJlKGUscixpKyIgKFByb21pc2UvYXN5bmMpIil9KSxvLl9oYW5kbGVkPSEwKX1jYXRjaChlKXtSZShlLHIsaSl9cmV0dXJuIG99ZnVuY3Rpb24gQmUoZSx0LG4pe2lmKEYuZXJyb3JIYW5kbGVyKXRyeXtyZXR1cm4gRi5lcnJvckhhbmRsZXIuY2FsbChudWxsLGUsdCxuKX1jYXRjaCh0KXt0IT09ZSYmVWUodCxudWxsLCJjb25maWcuZXJyb3JIYW5kbGVyIil9VWUoZSx0LG4pfWZ1bmN0aW9uIFVlKGUsdCxuKXtpZigheiYmIVZ8fCJ1bmRlZmluZWQiPT10eXBlb2YgY29uc29sZSl0aHJvdyBlO2NvbnNvbGUuZXJyb3IoZSl9dmFyIHplLFZlPSExLEtlPVtdLEplPSExO2Z1bmN0aW9uIHFlKCl7SmU9ITE7dmFyIGU9S2Uuc2xpY2UoMCk7S2UubGVuZ3RoPTA7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0KyspZVt0XSgpfWlmKCJ1bmRlZmluZWQiIT10eXBlb2YgUHJvbWlzZSYmcmUoUHJvbWlzZSkpe3ZhciBXZT1Qcm9taXNlLnJlc29sdmUoKTt6ZT1mdW5jdGlvbigpe1dlLnRoZW4ocWUpLEcmJnNldFRpbWVvdXQoUyl9LFZlPSEwfWVsc2UgaWYocXx8InVuZGVmaW5lZCI9PXR5cGVvZiBNdXRhdGlvbk9ic2VydmVyfHwhcmUoTXV0YXRpb25PYnNlcnZlcikmJiJbb2JqZWN0IE11dGF0aW9uT2JzZXJ2ZXJDb25zdHJ1Y3Rvcl0iIT09TXV0YXRpb25PYnNlcnZlci50b1N0cmluZygpKXplPSJ1bmRlZmluZWQiIT10eXBlb2Ygc2V0SW1tZWRpYXRlJiZyZShzZXRJbW1lZGlhdGUpP2Z1bmN0aW9uKCl7c2V0SW1tZWRpYXRlKHFlKX06ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KHFlLDApfTtlbHNle3ZhciBaZT0xLEdlPW5ldyBNdXRhdGlvbk9ic2VydmVyKHFlKSxYZT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShTdHJpbmcoWmUpKTtHZS5vYnNlcnZlKFhlLHtjaGFyYWN0ZXJEYXRhOiEwfSksemU9ZnVuY3Rpb24oKXtaZT0oWmUrMSklMixYZS5kYXRhPVN0cmluZyhaZSl9LFZlPSEwfWZ1bmN0aW9uIFllKGUsdCl7dmFyIG47aWYoS2UucHVzaChmdW5jdGlvbigpe2lmKGUpdHJ5e2UuY2FsbCh0KX1jYXRjaChlKXtSZShlLHQsIm5leHRUaWNrIil9ZWxzZSBuJiZuKHQpfSksSmV8fChKZT0hMCx6ZSgpKSwhZSYmInVuZGVmaW5lZCIhPXR5cGVvZiBQcm9taXNlKXJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXtuPWV9KX12YXIgUWU9bmV3IGllO2Z1bmN0aW9uIGV0KGUpeyFmdW5jdGlvbiBlKHQsbil7dmFyIHIsaTt2YXIgYT1BcnJheS5pc0FycmF5KHQpO2lmKCFhJiYhbyh0KXx8T2JqZWN0LmlzRnJvemVuKHQpfHx0IGluc3RhbmNlb2YgcGUpcmV0dXJuO2lmKHQuX19vYl9fKXt2YXIgcz10Ll9fb2JfXy5kZXAuaWQ7aWYobi5oYXMocykpcmV0dXJuO24uYWRkKHMpfWlmKGEpZm9yKHI9dC5sZW5ndGg7ci0tOyllKHRbcl0sbik7ZWxzZSBmb3IoaT1PYmplY3Qua2V5cyh0KSxyPWkubGVuZ3RoO3ItLTspZSh0W2lbcl1dLG4pfShlLFFlKSxRZS5jbGVhcigpfXZhciB0dD1nKGZ1bmN0aW9uKGUpe3ZhciB0PSImIj09PWUuY2hhckF0KDApLG49In4iPT09KGU9dD9lLnNsaWNlKDEpOmUpLmNoYXJBdCgwKSxyPSIhIj09PShlPW4/ZS5zbGljZSgxKTplKS5jaGFyQXQoMCk7cmV0dXJue25hbWU6ZT1yP2Uuc2xpY2UoMSk6ZSxvbmNlOm4sY2FwdHVyZTpyLHBhc3NpdmU6dH19KTtmdW5jdGlvbiBudChlLHQpe2Z1bmN0aW9uIG4oKXt2YXIgZT1hcmd1bWVudHMscj1uLmZucztpZighQXJyYXkuaXNBcnJheShyKSlyZXR1cm4gSGUocixudWxsLGFyZ3VtZW50cyx0LCJ2LW9uIGhhbmRsZXIiKTtmb3IodmFyIGk9ci5zbGljZSgpLG89MDtvPGkubGVuZ3RoO28rKylIZShpW29dLG51bGwsZSx0LCJ2LW9uIGhhbmRsZXIiKX1yZXR1cm4gbi5mbnM9ZSxufWZ1bmN0aW9uIHJ0KGUsbixpLG8sYSxzKXt2YXIgYyx1LGwsZjtmb3IoYyBpbiBlKXU9ZVtjXSxsPW5bY10sZj10dChjKSx0KHUpfHwodChsKT8odCh1LmZucykmJih1PWVbY109bnQodSxzKSkscihmLm9uY2UpJiYodT1lW2NdPWEoZi5uYW1lLHUsZi5jYXB0dXJlKSksaShmLm5hbWUsdSxmLmNhcHR1cmUsZi5wYXNzaXZlLGYucGFyYW1zKSk6dSE9PWwmJihsLmZucz11LGVbY109bCkpO2ZvcihjIGluIG4pdChlW2NdKSYmbygoZj10dChjKSkubmFtZSxuW2NdLGYuY2FwdHVyZSl9ZnVuY3Rpb24gaXQoZSxpLG8pe3ZhciBhO2UgaW5zdGFuY2VvZiBwZSYmKGU9ZS5kYXRhLmhvb2t8fChlLmRhdGEuaG9vaz17fSkpO3ZhciBzPWVbaV07ZnVuY3Rpb24gYygpe28uYXBwbHkodGhpcyxhcmd1bWVudHMpLGgoYS5mbnMsYyl9dChzKT9hPW50KFtjXSk6bihzLmZucykmJnIocy5tZXJnZWQpPyhhPXMpLmZucy5wdXNoKGMpOmE9bnQoW3MsY10pLGEubWVyZ2VkPSEwLGVbaV09YX1mdW5jdGlvbiBvdChlLHQscixpLG8pe2lmKG4odCkpe2lmKHkodCxyKSlyZXR1cm4gZVtyXT10W3JdLG98fGRlbGV0ZSB0W3JdLCEwO2lmKHkodCxpKSlyZXR1cm4gZVtyXT10W2ldLG98fGRlbGV0ZSB0W2ldLCEwfXJldHVybiExfWZ1bmN0aW9uIGF0KGUpe3JldHVybiBpKGUpP1toZShlKV06QXJyYXkuaXNBcnJheShlKT9mdW5jdGlvbiBlKG8sYSl7dmFyIHM9W107dmFyIGMsdSxsLGY7Zm9yKGM9MDtjPG8ubGVuZ3RoO2MrKyl0KHU9b1tjXSl8fCJib29sZWFuIj09dHlwZW9mIHV8fChsPXMubGVuZ3RoLTEsZj1zW2xdLEFycmF5LmlzQXJyYXkodSk/dS5sZW5ndGg+MCYmKHN0KCh1PWUodSwoYXx8IiIpKyJfIitjKSlbMF0pJiZzdChmKSYmKHNbbF09aGUoZi50ZXh0K3VbMF0udGV4dCksdS5zaGlmdCgpKSxzLnB1c2guYXBwbHkocyx1KSk6aSh1KT9zdChmKT9zW2xdPWhlKGYudGV4dCt1KToiIiE9PXUmJnMucHVzaChoZSh1KSk6c3QodSkmJnN0KGYpP3NbbF09aGUoZi50ZXh0K3UudGV4dCk6KHIoby5faXNWTGlzdCkmJm4odS50YWcpJiZ0KHUua2V5KSYmbihhKSYmKHUua2V5PSJfX3ZsaXN0IithKyJfIitjKyJfXyIpLHMucHVzaCh1KSkpO3JldHVybiBzfShlKTp2b2lkIDB9ZnVuY3Rpb24gc3QoZSl7cmV0dXJuIG4oZSkmJm4oZS50ZXh0KSYmITE9PT1lLmlzQ29tbWVudH1mdW5jdGlvbiBjdChlLHQpe2lmKGUpe2Zvcih2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9b2U/UmVmbGVjdC5vd25LZXlzKGUpOk9iamVjdC5rZXlzKGUpLGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIG89cltpXTtpZigiX19vYl9fIiE9PW8pe2Zvcih2YXIgYT1lW29dLmZyb20scz10O3M7KXtpZihzLl9wcm92aWRlZCYmeShzLl9wcm92aWRlZCxhKSl7bltvXT1zLl9wcm92aWRlZFthXTticmVha31zPXMuJHBhcmVudH1pZighcyYmImRlZmF1bHQiaW4gZVtvXSl7dmFyIGM9ZVtvXS5kZWZhdWx0O25bb109ImZ1bmN0aW9uIj09dHlwZW9mIGM/Yy5jYWxsKHQpOmN9fX1yZXR1cm4gbn19ZnVuY3Rpb24gdXQoZSx0KXtpZighZXx8IWUubGVuZ3RoKXJldHVybnt9O2Zvcih2YXIgbj17fSxyPTAsaT1lLmxlbmd0aDtyPGk7cisrKXt2YXIgbz1lW3JdLGE9by5kYXRhO2lmKGEmJmEuYXR0cnMmJmEuYXR0cnMuc2xvdCYmZGVsZXRlIGEuYXR0cnMuc2xvdCxvLmNvbnRleHQhPT10JiZvLmZuQ29udGV4dCE9PXR8fCFhfHxudWxsPT1hLnNsb3QpKG4uZGVmYXVsdHx8KG4uZGVmYXVsdD1bXSkpLnB1c2gobyk7ZWxzZXt2YXIgcz1hLnNsb3QsYz1uW3NdfHwobltzXT1bXSk7InRlbXBsYXRlIj09PW8udGFnP2MucHVzaC5hcHBseShjLG8uY2hpbGRyZW58fFtdKTpjLnB1c2gobyl9fWZvcih2YXIgdSBpbiBuKW5bdV0uZXZlcnkobHQpJiZkZWxldGUgblt1XTtyZXR1cm4gbn1mdW5jdGlvbiBsdChlKXtyZXR1cm4gZS5pc0NvbW1lbnQmJiFlLmFzeW5jRmFjdG9yeXx8IiAiPT09ZS50ZXh0fWZ1bmN0aW9uIGZ0KHQsbixyKXt2YXIgaSxvPU9iamVjdC5rZXlzKG4pLmxlbmd0aD4wLGE9dD8hIXQuJHN0YWJsZTohbyxzPXQmJnQuJGtleTtpZih0KXtpZih0Ll9ub3JtYWxpemVkKXJldHVybiB0Ll9ub3JtYWxpemVkO2lmKGEmJnImJnIhPT1lJiZzPT09ci4ka2V5JiYhbyYmIXIuJGhhc05vcm1hbClyZXR1cm4gcjtmb3IodmFyIGMgaW4gaT17fSx0KXRbY10mJiIkIiE9PWNbMF0mJihpW2NdPXB0KG4sYyx0W2NdKSl9ZWxzZSBpPXt9O2Zvcih2YXIgdSBpbiBuKXUgaW4gaXx8KGlbdV09ZHQobix1KSk7cmV0dXJuIHQmJk9iamVjdC5pc0V4dGVuc2libGUodCkmJih0Ll9ub3JtYWxpemVkPWkpLFIoaSwiJHN0YWJsZSIsYSksUihpLCIka2V5IixzKSxSKGksIiRoYXNOb3JtYWwiLG8pLGl9ZnVuY3Rpb24gcHQoZSx0LG4pe3ZhciByPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD9uLmFwcGx5KG51bGwsYXJndW1lbnRzKTpuKHt9KTtyZXR1cm4oZT1lJiYib2JqZWN0Ij09dHlwZW9mIGUmJiFBcnJheS5pc0FycmF5KGUpP1tlXTphdChlKSkmJigwPT09ZS5sZW5ndGh8fDE9PT1lLmxlbmd0aCYmZVswXS5pc0NvbW1lbnQpP3ZvaWQgMDplfTtyZXR1cm4gbi5wcm94eSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7Z2V0OnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxyfWZ1bmN0aW9uIGR0KGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGVbdF19fWZ1bmN0aW9uIHZ0KGUsdCl7dmFyIHIsaSxhLHMsYztpZihBcnJheS5pc0FycmF5KGUpfHwic3RyaW5nIj09dHlwZW9mIGUpZm9yKHI9bmV3IEFycmF5KGUubGVuZ3RoKSxpPTAsYT1lLmxlbmd0aDtpPGE7aSsrKXJbaV09dChlW2ldLGkpO2Vsc2UgaWYoIm51bWJlciI9PXR5cGVvZiBlKWZvcihyPW5ldyBBcnJheShlKSxpPTA7aTxlO2krKylyW2ldPXQoaSsxLGkpO2Vsc2UgaWYobyhlKSlpZihvZSYmZVtTeW1ib2wuaXRlcmF0b3JdKXtyPVtdO2Zvcih2YXIgdT1lW1N5bWJvbC5pdGVyYXRvcl0oKSxsPXUubmV4dCgpOyFsLmRvbmU7KXIucHVzaCh0KGwudmFsdWUsci5sZW5ndGgpKSxsPXUubmV4dCgpfWVsc2UgZm9yKHM9T2JqZWN0LmtleXMoZSkscj1uZXcgQXJyYXkocy5sZW5ndGgpLGk9MCxhPXMubGVuZ3RoO2k8YTtpKyspYz1zW2ldLHJbaV09dChlW2NdLGMsaSk7cmV0dXJuIG4ocil8fChyPVtdKSxyLl9pc1ZMaXN0PSEwLHJ9ZnVuY3Rpb24gaHQoZSx0LG4scil7dmFyIGksbz10aGlzLiRzY29wZWRTbG90c1tlXTtvPyhuPW58fHt9LHImJihuPUEoQSh7fSxyKSxuKSksaT1vKG4pfHx0KTppPXRoaXMuJHNsb3RzW2VdfHx0O3ZhciBhPW4mJm4uc2xvdDtyZXR1cm4gYT90aGlzLiRjcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIse3Nsb3Q6YX0saSk6aX1mdW5jdGlvbiBtdChlKXtyZXR1cm4gTGUodGhpcy4kb3B0aW9ucywiZmlsdGVycyIsZSl8fEV9ZnVuY3Rpb24geXQoZSx0KXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT8tMT09PWUuaW5kZXhPZih0KTplIT09dH1mdW5jdGlvbiBndChlLHQsbixyLGkpe3ZhciBvPUYua2V5Q29kZXNbdF18fG47cmV0dXJuIGkmJnImJiFGLmtleUNvZGVzW3RdP3l0KGkscik6bz95dChvLGUpOnI/QyhyKSE9PXQ6dm9pZCAwfWZ1bmN0aW9uIF90KGUsdCxuLHIsaSl7aWYobilpZihvKG4pKXt2YXIgYTtBcnJheS5pc0FycmF5KG4pJiYobj1PKG4pKTt2YXIgcz1mdW5jdGlvbihvKXtpZigiY2xhc3MiPT09b3x8InN0eWxlIj09PW98fHYobykpYT1lO2Vsc2V7dmFyIHM9ZS5hdHRycyYmZS5hdHRycy50eXBlO2E9cnx8Ri5tdXN0VXNlUHJvcCh0LHMsbyk/ZS5kb21Qcm9wc3x8KGUuZG9tUHJvcHM9e30pOmUuYXR0cnN8fChlLmF0dHJzPXt9KX12YXIgYz1iKG8pLHU9QyhvKTtjIGluIGF8fHUgaW4gYXx8KGFbb109bltvXSxpJiYoKGUub258fChlLm9uPXt9KSlbInVwZGF0ZToiK29dPWZ1bmN0aW9uKGUpe25bb109ZX0pKX07Zm9yKHZhciBjIGluIG4pcyhjKX1lbHNlO3JldHVybiBlfWZ1bmN0aW9uIGJ0KGUsdCl7dmFyIG49dGhpcy5fc3RhdGljVHJlZXN8fCh0aGlzLl9zdGF0aWNUcmVlcz1bXSkscj1uW2VdO3JldHVybiByJiYhdD9yOih3dChyPW5bZV09dGhpcy4kb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnNbZV0uY2FsbCh0aGlzLl9yZW5kZXJQcm94eSxudWxsLHRoaXMpLCJfX3N0YXRpY19fIitlLCExKSxyKX1mdW5jdGlvbiAkdChlLHQsbil7cmV0dXJuIHd0KGUsIl9fb25jZV9fIit0KyhuPyJfIituOiIiKSwhMCksZX1mdW5jdGlvbiB3dChlLHQsbil7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyllW3JdJiYic3RyaW5nIiE9dHlwZW9mIGVbcl0mJkN0KGVbcl0sdCsiXyIrcixuKTtlbHNlIEN0KGUsdCxuKX1mdW5jdGlvbiBDdChlLHQsbil7ZS5pc1N0YXRpYz0hMCxlLmtleT10LGUuaXNPbmNlPW59ZnVuY3Rpb24geHQoZSx0KXtpZih0KWlmKHModCkpe3ZhciBuPWUub249ZS5vbj9BKHt9LGUub24pOnt9O2Zvcih2YXIgciBpbiB0KXt2YXIgaT1uW3JdLG89dFtyXTtuW3JdPWk/W10uY29uY2F0KGksbyk6b319ZWxzZTtyZXR1cm4gZX1mdW5jdGlvbiBrdChlLHQsbixyKXt0PXR8fHskc3RhYmxlOiFufTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIG89ZVtpXTtBcnJheS5pc0FycmF5KG8pP2t0KG8sdCxuKTpvJiYoby5wcm94eSYmKG8uZm4ucHJveHk9ITApLHRbby5rZXldPW8uZm4pfXJldHVybiByJiYodC4ka2V5PXIpLHR9ZnVuY3Rpb24gQXQoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rPTIpe3ZhciByPXRbbl07InN0cmluZyI9PXR5cGVvZiByJiZyJiYoZVt0W25dXT10W24rMV0pfXJldHVybiBlfWZ1bmN0aW9uIE90KGUsdCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlP3QrZTplfWZ1bmN0aW9uIFN0KGUpe2UuX289JHQsZS5fbj1mLGUuX3M9bCxlLl9sPXZ0LGUuX3Q9aHQsZS5fcT1OLGUuX2k9aixlLl9tPWJ0LGUuX2Y9bXQsZS5faz1ndCxlLl9iPV90LGUuX3Y9aGUsZS5fZT12ZSxlLl91PWt0LGUuX2c9eHQsZS5fZD1BdCxlLl9wPU90fWZ1bmN0aW9uIFR0KHQsbixpLG8sYSl7dmFyIHMsYz10aGlzLHU9YS5vcHRpb25zO3kobywiX3VpZCIpPyhzPU9iamVjdC5jcmVhdGUobykpLl9vcmlnaW5hbD1vOihzPW8sbz1vLl9vcmlnaW5hbCk7dmFyIGw9cih1Ll9jb21waWxlZCksZj0hbDt0aGlzLmRhdGE9dCx0aGlzLnByb3BzPW4sdGhpcy5jaGlsZHJlbj1pLHRoaXMucGFyZW50PW8sdGhpcy5saXN0ZW5lcnM9dC5vbnx8ZSx0aGlzLmluamVjdGlvbnM9Y3QodS5pbmplY3QsbyksdGhpcy5zbG90cz1mdW5jdGlvbigpe3JldHVybiBjLiRzbG90c3x8ZnQodC5zY29wZWRTbG90cyxjLiRzbG90cz11dChpLG8pKSxjLiRzbG90c30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsInNjb3BlZFNsb3RzIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZnQodC5zY29wZWRTbG90cyx0aGlzLnNsb3RzKCkpfX0pLGwmJih0aGlzLiRvcHRpb25zPXUsdGhpcy4kc2xvdHM9dGhpcy5zbG90cygpLHRoaXMuJHNjb3BlZFNsb3RzPWZ0KHQuc2NvcGVkU2xvdHMsdGhpcy4kc2xvdHMpKSx1Ll9zY29wZUlkP3RoaXMuX2M9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9UHQocyxlLHQsbixyLGYpO3JldHVybiBpJiYhQXJyYXkuaXNBcnJheShpKSYmKGkuZm5TY29wZUlkPXUuX3Njb3BlSWQsaS5mbkNvbnRleHQ9byksaX06dGhpcy5fYz1mdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gUHQocyxlLHQsbixyLGYpfX1mdW5jdGlvbiBFdChlLHQsbixyLGkpe3ZhciBvPW1lKGUpO3JldHVybiBvLmZuQ29udGV4dD1uLG8uZm5PcHRpb25zPXIsdC5zbG90JiYoKG8uZGF0YXx8KG8uZGF0YT17fSkpLnNsb3Q9dC5zbG90KSxvfWZ1bmN0aW9uIE50KGUsdCl7Zm9yKHZhciBuIGluIHQpZVtiKG4pXT10W25dfVN0KFR0LnByb3RvdHlwZSk7dmFyIGp0PXtpbml0OmZ1bmN0aW9uKGUsdCl7aWYoZS5jb21wb25lbnRJbnN0YW5jZSYmIWUuY29tcG9uZW50SW5zdGFuY2UuX2lzRGVzdHJveWVkJiZlLmRhdGEua2VlcEFsaXZlKXt2YXIgcj1lO2p0LnByZXBhdGNoKHIscil9ZWxzZXsoZS5jb21wb25lbnRJbnN0YW5jZT1mdW5jdGlvbihlLHQpe3ZhciByPXtfaXNDb21wb25lbnQ6ITAsX3BhcmVudFZub2RlOmUscGFyZW50OnR9LGk9ZS5kYXRhLmlubGluZVRlbXBsYXRlO24oaSkmJihyLnJlbmRlcj1pLnJlbmRlcixyLnN0YXRpY1JlbmRlckZucz1pLnN0YXRpY1JlbmRlckZucyk7cmV0dXJuIG5ldyBlLmNvbXBvbmVudE9wdGlvbnMuQ3RvcihyKX0oZSxXdCkpLiRtb3VudCh0P2UuZWxtOnZvaWQgMCx0KX19LHByZXBhdGNoOmZ1bmN0aW9uKHQsbil7dmFyIHI9bi5jb21wb25lbnRPcHRpb25zOyFmdW5jdGlvbih0LG4scixpLG8pe3ZhciBhPWkuZGF0YS5zY29wZWRTbG90cyxzPXQuJHNjb3BlZFNsb3RzLGM9ISEoYSYmIWEuJHN0YWJsZXx8cyE9PWUmJiFzLiRzdGFibGV8fGEmJnQuJHNjb3BlZFNsb3RzLiRrZXkhPT1hLiRrZXkpLHU9ISEob3x8dC4kb3B0aW9ucy5fcmVuZGVyQ2hpbGRyZW58fGMpO3QuJG9wdGlvbnMuX3BhcmVudFZub2RlPWksdC4kdm5vZGU9aSx0Ll92bm9kZSYmKHQuX3Zub2RlLnBhcmVudD1pKTtpZih0LiRvcHRpb25zLl9yZW5kZXJDaGlsZHJlbj1vLHQuJGF0dHJzPWkuZGF0YS5hdHRyc3x8ZSx0LiRsaXN0ZW5lcnM9cnx8ZSxuJiZ0LiRvcHRpb25zLnByb3BzKXskZSghMSk7Zm9yKHZhciBsPXQuX3Byb3BzLGY9dC4kb3B0aW9ucy5fcHJvcEtleXN8fFtdLHA9MDtwPGYubGVuZ3RoO3ArKyl7dmFyIGQ9ZltwXSx2PXQuJG9wdGlvbnMucHJvcHM7bFtkXT1NZShkLHYsbix0KX0kZSghMCksdC4kb3B0aW9ucy5wcm9wc0RhdGE9bn1yPXJ8fGU7dmFyIGg9dC4kb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzO3QuJG9wdGlvbnMuX3BhcmVudExpc3RlbmVycz1yLHF0KHQscixoKSx1JiYodC4kc2xvdHM9dXQobyxpLmNvbnRleHQpLHQuJGZvcmNlVXBkYXRlKCkpfShuLmNvbXBvbmVudEluc3RhbmNlPXQuY29tcG9uZW50SW5zdGFuY2Usci5wcm9wc0RhdGEsci5saXN0ZW5lcnMsbixyLmNoaWxkcmVuKX0saW5zZXJ0OmZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5jb250ZXh0LHI9ZS5jb21wb25lbnRJbnN0YW5jZTtyLl9pc01vdW50ZWR8fChyLl9pc01vdW50ZWQ9ITAsWXQociwibW91bnRlZCIpKSxlLmRhdGEua2VlcEFsaXZlJiYobi5faXNNb3VudGVkPygodD1yKS5faW5hY3RpdmU9ITEsZW4ucHVzaCh0KSk6WHQociwhMCkpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29tcG9uZW50SW5zdGFuY2U7dC5faXNEZXN0cm95ZWR8fChlLmRhdGEua2VlcEFsaXZlP2Z1bmN0aW9uIGUodCxuKXtpZihuJiYodC5fZGlyZWN0SW5hY3RpdmU9ITAsR3QodCkpKXJldHVybjtpZighdC5faW5hY3RpdmUpe3QuX2luYWN0aXZlPSEwO2Zvcih2YXIgcj0wO3I8dC4kY2hpbGRyZW4ubGVuZ3RoO3IrKyllKHQuJGNoaWxkcmVuW3JdKTtZdCh0LCJkZWFjdGl2YXRlZCIpfX0odCwhMCk6dC4kZGVzdHJveSgpKX19LER0PU9iamVjdC5rZXlzKGp0KTtmdW5jdGlvbiBMdChpLGEscyxjLGwpe2lmKCF0KGkpKXt2YXIgZj1zLiRvcHRpb25zLl9iYXNlO2lmKG8oaSkmJihpPWYuZXh0ZW5kKGkpKSwiZnVuY3Rpb24iPT10eXBlb2YgaSl7dmFyIHA7aWYodChpLmNpZCkmJnZvaWQgMD09PShpPWZ1bmN0aW9uKGUsaSl7aWYocihlLmVycm9yKSYmbihlLmVycm9yQ29tcCkpcmV0dXJuIGUuZXJyb3JDb21wO2lmKG4oZS5yZXNvbHZlZCkpcmV0dXJuIGUucmVzb2x2ZWQ7dmFyIGE9SHQ7YSYmbihlLm93bmVycykmJi0xPT09ZS5vd25lcnMuaW5kZXhPZihhKSYmZS5vd25lcnMucHVzaChhKTtpZihyKGUubG9hZGluZykmJm4oZS5sb2FkaW5nQ29tcCkpcmV0dXJuIGUubG9hZGluZ0NvbXA7aWYoYSYmIW4oZS5vd25lcnMpKXt2YXIgcz1lLm93bmVycz1bYV0sYz0hMCxsPW51bGwsZj1udWxsO2EuJG9uKCJob29rOmRlc3Ryb3llZCIsZnVuY3Rpb24oKXtyZXR1cm4gaChzLGEpfSk7dmFyIHA9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj1zLmxlbmd0aDt0PG47dCsrKXNbdF0uJGZvcmNlVXBkYXRlKCk7ZSYmKHMubGVuZ3RoPTAsbnVsbCE9PWwmJihjbGVhclRpbWVvdXQobCksbD1udWxsKSxudWxsIT09ZiYmKGNsZWFyVGltZW91dChmKSxmPW51bGwpKX0sZD1EKGZ1bmN0aW9uKHQpe2UucmVzb2x2ZWQ9QnQodCxpKSxjP3MubGVuZ3RoPTA6cCghMCl9KSx2PUQoZnVuY3Rpb24odCl7bihlLmVycm9yQ29tcCkmJihlLmVycm9yPSEwLHAoITApKX0pLG09ZShkLHYpO3JldHVybiBvKG0pJiYodShtKT90KGUucmVzb2x2ZWQpJiZtLnRoZW4oZCx2KTp1KG0uY29tcG9uZW50KSYmKG0uY29tcG9uZW50LnRoZW4oZCx2KSxuKG0uZXJyb3IpJiYoZS5lcnJvckNvbXA9QnQobS5lcnJvcixpKSksbihtLmxvYWRpbmcpJiYoZS5sb2FkaW5nQ29tcD1CdChtLmxvYWRpbmcsaSksMD09PW0uZGVsYXk/ZS5sb2FkaW5nPSEwOmw9c2V0VGltZW91dChmdW5jdGlvbigpe2w9bnVsbCx0KGUucmVzb2x2ZWQpJiZ0KGUuZXJyb3IpJiYoZS5sb2FkaW5nPSEwLHAoITEpKX0sbS5kZWxheXx8MjAwKSksbihtLnRpbWVvdXQpJiYoZj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zj1udWxsLHQoZS5yZXNvbHZlZCkmJnYobnVsbCl9LG0udGltZW91dCkpKSksYz0hMSxlLmxvYWRpbmc/ZS5sb2FkaW5nQ29tcDplLnJlc29sdmVkfX0ocD1pLGYpKSlyZXR1cm4gZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbz12ZSgpO3JldHVybiBvLmFzeW5jRmFjdG9yeT1lLG8uYXN5bmNNZXRhPXtkYXRhOnQsY29udGV4dDpuLGNoaWxkcmVuOnIsdGFnOml9LG99KHAsYSxzLGMsbCk7YT1hfHx7fSwkbihpKSxuKGEubW9kZWwpJiZmdW5jdGlvbihlLHQpe3ZhciByPWUubW9kZWwmJmUubW9kZWwucHJvcHx8InZhbHVlIixpPWUubW9kZWwmJmUubW9kZWwuZXZlbnR8fCJpbnB1dCI7KHQuYXR0cnN8fCh0LmF0dHJzPXt9KSlbcl09dC5tb2RlbC52YWx1ZTt2YXIgbz10Lm9ufHwodC5vbj17fSksYT1vW2ldLHM9dC5tb2RlbC5jYWxsYmFjaztuKGEpPyhBcnJheS5pc0FycmF5KGEpPy0xPT09YS5pbmRleE9mKHMpOmEhPT1zKSYmKG9baV09W3NdLmNvbmNhdChhKSk6b1tpXT1zfShpLm9wdGlvbnMsYSk7dmFyIGQ9ZnVuY3Rpb24oZSxyLGkpe3ZhciBvPXIub3B0aW9ucy5wcm9wcztpZighdChvKSl7dmFyIGE9e30scz1lLmF0dHJzLGM9ZS5wcm9wcztpZihuKHMpfHxuKGMpKWZvcih2YXIgdSBpbiBvKXt2YXIgbD1DKHUpO290KGEsYyx1LGwsITApfHxvdChhLHMsdSxsLCExKX1yZXR1cm4gYX19KGEsaSk7aWYocihpLm9wdGlvbnMuZnVuY3Rpb25hbCkpcmV0dXJuIGZ1bmN0aW9uKHQscixpLG8sYSl7dmFyIHM9dC5vcHRpb25zLGM9e30sdT1zLnByb3BzO2lmKG4odSkpZm9yKHZhciBsIGluIHUpY1tsXT1NZShsLHUscnx8ZSk7ZWxzZSBuKGkuYXR0cnMpJiZOdChjLGkuYXR0cnMpLG4oaS5wcm9wcykmJk50KGMsaS5wcm9wcyk7dmFyIGY9bmV3IFR0KGksYyxhLG8sdCkscD1zLnJlbmRlci5jYWxsKG51bGwsZi5fYyxmKTtpZihwIGluc3RhbmNlb2YgcGUpcmV0dXJuIEV0KHAsaSxmLnBhcmVudCxzKTtpZihBcnJheS5pc0FycmF5KHApKXtmb3IodmFyIGQ9YXQocCl8fFtdLHY9bmV3IEFycmF5KGQubGVuZ3RoKSxoPTA7aDxkLmxlbmd0aDtoKyspdltoXT1FdChkW2hdLGksZi5wYXJlbnQscyk7cmV0dXJuIHZ9fShpLGQsYSxzLGMpO3ZhciB2PWEub247aWYoYS5vbj1hLm5hdGl2ZU9uLHIoaS5vcHRpb25zLmFic3RyYWN0KSl7dmFyIG09YS5zbG90O2E9e30sbSYmKGEuc2xvdD1tKX0hZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuaG9va3x8KGUuaG9vaz17fSksbj0wO248RHQubGVuZ3RoO24rKyl7dmFyIHI9RHRbbl0saT10W3JdLG89anRbcl07aT09PW98fGkmJmkuX21lcmdlZHx8KHRbcl09aT9NdChvLGkpOm8pfX0oYSk7dmFyIHk9aS5vcHRpb25zLm5hbWV8fGw7cmV0dXJuIG5ldyBwZSgidnVlLWNvbXBvbmVudC0iK2kuY2lkKyh5PyItIit5OiIiKSxhLHZvaWQgMCx2b2lkIDAsdm9pZCAwLHMse0N0b3I6aSxwcm9wc0RhdGE6ZCxsaXN0ZW5lcnM6dix0YWc6bCxjaGlsZHJlbjpjfSxwKX19fWZ1bmN0aW9uIE10KGUsdCl7dmFyIG49ZnVuY3Rpb24obixyKXtlKG4sciksdChuLHIpfTtyZXR1cm4gbi5fbWVyZ2VkPSEwLG59dmFyIEl0PTEsRnQ9MjtmdW5jdGlvbiBQdChlLGEscyxjLHUsbCl7cmV0dXJuKEFycmF5LmlzQXJyYXkocyl8fGkocykpJiYodT1jLGM9cyxzPXZvaWQgMCkscihsKSYmKHU9RnQpLGZ1bmN0aW9uKGUsaSxhLHMsYyl7aWYobihhKSYmbihhLl9fb2JfXykpcmV0dXJuIHZlKCk7bihhKSYmbihhLmlzKSYmKGk9YS5pcyk7aWYoIWkpcmV0dXJuIHZlKCk7QXJyYXkuaXNBcnJheShzKSYmImZ1bmN0aW9uIj09dHlwZW9mIHNbMF0mJigoYT1hfHx7fSkuc2NvcGVkU2xvdHM9e2RlZmF1bHQ6c1swXX0scy5sZW5ndGg9MCk7Yz09PUZ0P3M9YXQocyk6Yz09PUl0JiYocz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKylpZihBcnJheS5pc0FycmF5KGVbdF0pKXJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGUpO3JldHVybiBlfShzKSk7dmFyIHUsbDtpZigic3RyaW5nIj09dHlwZW9mIGkpe3ZhciBmO2w9ZS4kdm5vZGUmJmUuJHZub2RlLm5zfHxGLmdldFRhZ05hbWVzcGFjZShpKSx1PUYuaXNSZXNlcnZlZFRhZyhpKT9uZXcgcGUoRi5wYXJzZVBsYXRmb3JtVGFnTmFtZShpKSxhLHMsdm9pZCAwLHZvaWQgMCxlKTphJiZhLnByZXx8IW4oZj1MZShlLiRvcHRpb25zLCJjb21wb25lbnRzIixpKSk/bmV3IHBlKGksYSxzLHZvaWQgMCx2b2lkIDAsZSk6THQoZixhLGUscyxpKX1lbHNlIHU9THQoaSxhLGUscyk7cmV0dXJuIEFycmF5LmlzQXJyYXkodSk/dTpuKHUpPyhuKGwpJiZmdW5jdGlvbiBlKGksbyxhKXtpLm5zPW87ImZvcmVpZ25PYmplY3QiPT09aS50YWcmJihvPXZvaWQgMCxhPSEwKTtpZihuKGkuY2hpbGRyZW4pKWZvcih2YXIgcz0wLGM9aS5jaGlsZHJlbi5sZW5ndGg7czxjO3MrKyl7dmFyIHU9aS5jaGlsZHJlbltzXTtuKHUudGFnKSYmKHQodS5ucyl8fHIoYSkmJiJzdmciIT09dS50YWcpJiZlKHUsbyxhKX19KHUsbCksbihhKSYmZnVuY3Rpb24oZSl7byhlLnN0eWxlKSYmZXQoZS5zdHlsZSk7byhlLmNsYXNzKSYmZXQoZS5jbGFzcyl9KGEpLHUpOnZlKCl9KGUsYSxzLGMsdSl9dmFyIFJ0LEh0PW51bGw7ZnVuY3Rpb24gQnQoZSx0KXtyZXR1cm4oZS5fX2VzTW9kdWxlfHxvZSYmIk1vZHVsZSI9PT1lW1N5bWJvbC50b1N0cmluZ1RhZ10pJiYoZT1lLmRlZmF1bHQpLG8oZSk/dC5leHRlbmQoZSk6ZX1mdW5jdGlvbiBVdChlKXtyZXR1cm4gZS5pc0NvbW1lbnQmJmUuYXN5bmNGYWN0b3J5fWZ1bmN0aW9uIHp0KGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0Kyspe3ZhciByPWVbdF07aWYobihyKSYmKG4oci5jb21wb25lbnRPcHRpb25zKXx8VXQocikpKXJldHVybiByfX1mdW5jdGlvbiBWdChlLHQpe1J0LiRvbihlLHQpfWZ1bmN0aW9uIEt0KGUsdCl7UnQuJG9mZihlLHQpfWZ1bmN0aW9uIEp0KGUsdCl7dmFyIG49UnQ7cmV0dXJuIGZ1bmN0aW9uIHIoKXtudWxsIT09dC5hcHBseShudWxsLGFyZ3VtZW50cykmJm4uJG9mZihlLHIpfX1mdW5jdGlvbiBxdChlLHQsbil7UnQ9ZSxydCh0LG58fHt9LFZ0LEt0LEp0LGUpLFJ0PXZvaWQgMH12YXIgV3Q9bnVsbDtmdW5jdGlvbiBadChlKXt2YXIgdD1XdDtyZXR1cm4gV3Q9ZSxmdW5jdGlvbigpe1d0PXR9fWZ1bmN0aW9uIEd0KGUpe2Zvcig7ZSYmKGU9ZS4kcGFyZW50KTspaWYoZS5faW5hY3RpdmUpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gWHQoZSx0KXtpZih0KXtpZihlLl9kaXJlY3RJbmFjdGl2ZT0hMSxHdChlKSlyZXR1cm59ZWxzZSBpZihlLl9kaXJlY3RJbmFjdGl2ZSlyZXR1cm47aWYoZS5faW5hY3RpdmV8fG51bGw9PT1lLl9pbmFjdGl2ZSl7ZS5faW5hY3RpdmU9ITE7Zm9yKHZhciBuPTA7bjxlLiRjaGlsZHJlbi5sZW5ndGg7bisrKVh0KGUuJGNoaWxkcmVuW25dKTtZdChlLCJhY3RpdmF0ZWQiKX19ZnVuY3Rpb24gWXQoZSx0KXtsZSgpO3ZhciBuPWUuJG9wdGlvbnNbdF0scj10KyIgaG9vayI7aWYobilmb3IodmFyIGk9MCxvPW4ubGVuZ3RoO2k8bztpKyspSGUobltpXSxlLG51bGwsZSxyKTtlLl9oYXNIb29rRXZlbnQmJmUuJGVtaXQoImhvb2s6Iit0KSxmZSgpfXZhciBRdD1bXSxlbj1bXSx0bj17fSxubj0hMSxybj0hMSxvbj0wO3ZhciBhbj0wLHNuPURhdGUubm93O2lmKHomJiFxKXt2YXIgY249d2luZG93LnBlcmZvcm1hbmNlO2NuJiYiZnVuY3Rpb24iPT10eXBlb2YgY24ubm93JiZzbigpPmRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpLnRpbWVTdGFtcCYmKHNuPWZ1bmN0aW9uKCl7cmV0dXJuIGNuLm5vdygpfSl9ZnVuY3Rpb24gdW4oKXt2YXIgZSx0O2Zvcihhbj1zbigpLHJuPSEwLFF0LnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5pZC10LmlkfSksb249MDtvbjxRdC5sZW5ndGg7b24rKykoZT1RdFtvbl0pLmJlZm9yZSYmZS5iZWZvcmUoKSx0PWUuaWQsdG5bdF09bnVsbCxlLnJ1bigpO3ZhciBuPWVuLnNsaWNlKCkscj1RdC5zbGljZSgpO29uPVF0Lmxlbmd0aD1lbi5sZW5ndGg9MCx0bj17fSxubj1ybj0hMSxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyllW3RdLl9pbmFjdGl2ZT0hMCxYdChlW3RdLCEwKX0obiksZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGg7Zm9yKDt0LS07KXt2YXIgbj1lW3RdLHI9bi52bTtyLl93YXRjaGVyPT09biYmci5faXNNb3VudGVkJiYhci5faXNEZXN0cm95ZWQmJll0KHIsInVwZGF0ZWQiKX19KHIpLG5lJiZGLmRldnRvb2xzJiZuZS5lbWl0KCJmbHVzaCIpfXZhciBsbj0wLGZuPWZ1bmN0aW9uKGUsdCxuLHIsaSl7dGhpcy52bT1lLGkmJihlLl93YXRjaGVyPXRoaXMpLGUuX3dhdGNoZXJzLnB1c2godGhpcykscj8odGhpcy5kZWVwPSEhci5kZWVwLHRoaXMudXNlcj0hIXIudXNlcix0aGlzLmxhenk9ISFyLmxhenksdGhpcy5zeW5jPSEhci5zeW5jLHRoaXMuYmVmb3JlPXIuYmVmb3JlKTp0aGlzLmRlZXA9dGhpcy51c2VyPXRoaXMubGF6eT10aGlzLnN5bmM9ITEsdGhpcy5jYj1uLHRoaXMuaWQ9Kytsbix0aGlzLmFjdGl2ZT0hMCx0aGlzLmRpcnR5PXRoaXMubGF6eSx0aGlzLmRlcHM9W10sdGhpcy5uZXdEZXBzPVtdLHRoaXMuZGVwSWRzPW5ldyBpZSx0aGlzLm5ld0RlcElkcz1uZXcgaWUsdGhpcy5leHByZXNzaW9uPSIiLCJmdW5jdGlvbiI9PXR5cGVvZiB0P3RoaXMuZ2V0dGVyPXQ6KHRoaXMuZ2V0dGVyPWZ1bmN0aW9uKGUpe2lmKCFILnRlc3QoZSkpe3ZhciB0PWUuc3BsaXQoIi4iKTtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe2lmKCFlKXJldHVybjtlPWVbdFtuXV19cmV0dXJuIGV9fX0odCksdGhpcy5nZXR0ZXJ8fCh0aGlzLmdldHRlcj1TKSksdGhpcy52YWx1ZT10aGlzLmxhenk/dm9pZCAwOnRoaXMuZ2V0KCl9O2ZuLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgZTtsZSh0aGlzKTt2YXIgdD10aGlzLnZtO3RyeXtlPXRoaXMuZ2V0dGVyLmNhbGwodCx0KX1jYXRjaChlKXtpZighdGhpcy51c2VyKXRocm93IGU7UmUoZSx0LCdnZXR0ZXIgZm9yIHdhdGNoZXIgIicrdGhpcy5leHByZXNzaW9uKyciJyl9ZmluYWxseXt0aGlzLmRlZXAmJmV0KGUpLGZlKCksdGhpcy5jbGVhbnVwRGVwcygpfXJldHVybiBlfSxmbi5wcm90b3R5cGUuYWRkRGVwPWZ1bmN0aW9uKGUpe3ZhciB0PWUuaWQ7dGhpcy5uZXdEZXBJZHMuaGFzKHQpfHwodGhpcy5uZXdEZXBJZHMuYWRkKHQpLHRoaXMubmV3RGVwcy5wdXNoKGUpLHRoaXMuZGVwSWRzLmhhcyh0KXx8ZS5hZGRTdWIodGhpcykpfSxmbi5wcm90b3R5cGUuY2xlYW51cERlcHM9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5kZXBzLmxlbmd0aDtlLS07KXt2YXIgdD10aGlzLmRlcHNbZV07dGhpcy5uZXdEZXBJZHMuaGFzKHQuaWQpfHx0LnJlbW92ZVN1Yih0aGlzKX12YXIgbj10aGlzLmRlcElkczt0aGlzLmRlcElkcz10aGlzLm5ld0RlcElkcyx0aGlzLm5ld0RlcElkcz1uLHRoaXMubmV3RGVwSWRzLmNsZWFyKCksbj10aGlzLmRlcHMsdGhpcy5kZXBzPXRoaXMubmV3RGVwcyx0aGlzLm5ld0RlcHM9bix0aGlzLm5ld0RlcHMubGVuZ3RoPTB9LGZuLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt0aGlzLmxhenk/dGhpcy5kaXJ0eT0hMDp0aGlzLnN5bmM/dGhpcy5ydW4oKTpmdW5jdGlvbihlKXt2YXIgdD1lLmlkO2lmKG51bGw9PXRuW3RdKXtpZih0blt0XT0hMCxybil7Zm9yKHZhciBuPVF0Lmxlbmd0aC0xO24+b24mJlF0W25dLmlkPmUuaWQ7KW4tLTtRdC5zcGxpY2UobisxLDAsZSl9ZWxzZSBRdC5wdXNoKGUpO25ufHwobm49ITAsWWUodW4pKX19KHRoaXMpfSxmbi5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7aWYodGhpcy5hY3RpdmUpe3ZhciBlPXRoaXMuZ2V0KCk7aWYoZSE9PXRoaXMudmFsdWV8fG8oZSl8fHRoaXMuZGVlcCl7dmFyIHQ9dGhpcy52YWx1ZTtpZih0aGlzLnZhbHVlPWUsdGhpcy51c2VyKXRyeXt0aGlzLmNiLmNhbGwodGhpcy52bSxlLHQpfWNhdGNoKGUpe1JlKGUsdGhpcy52bSwnY2FsbGJhY2sgZm9yIHdhdGNoZXIgIicrdGhpcy5leHByZXNzaW9uKyciJyl9ZWxzZSB0aGlzLmNiLmNhbGwodGhpcy52bSxlLHQpfX19LGZuLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbigpe3RoaXMudmFsdWU9dGhpcy5nZXQoKSx0aGlzLmRpcnR5PSExfSxmbi5wcm90b3R5cGUuZGVwZW5kPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuZGVwcy5sZW5ndGg7ZS0tOyl0aGlzLmRlcHNbZV0uZGVwZW5kKCl9LGZuLnByb3RvdHlwZS50ZWFyZG93bj1mdW5jdGlvbigpe2lmKHRoaXMuYWN0aXZlKXt0aGlzLnZtLl9pc0JlaW5nRGVzdHJveWVkfHxoKHRoaXMudm0uX3dhdGNoZXJzLHRoaXMpO2Zvcih2YXIgZT10aGlzLmRlcHMubGVuZ3RoO2UtLTspdGhpcy5kZXBzW2VdLnJlbW92ZVN1Yih0aGlzKTt0aGlzLmFjdGl2ZT0hMX19O3ZhciBwbj17ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsZ2V0OlMsc2V0OlN9O2Z1bmN0aW9uIGRuKGUsdCxuKXtwbi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1t0XVtuXX0scG4uc2V0PWZ1bmN0aW9uKGUpe3RoaXNbdF1bbl09ZX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbixwbil9ZnVuY3Rpb24gdm4oZSl7ZS5fd2F0Y2hlcnM9W107dmFyIHQ9ZS4kb3B0aW9uczt0LnByb3BzJiZmdW5jdGlvbihlLHQpe3ZhciBuPWUuJG9wdGlvbnMucHJvcHNEYXRhfHx7fSxyPWUuX3Byb3BzPXt9LGk9ZS4kb3B0aW9ucy5fcHJvcEtleXM9W107ZS4kcGFyZW50JiYkZSghMSk7dmFyIG89ZnVuY3Rpb24obyl7aS5wdXNoKG8pO3ZhciBhPU1lKG8sdCxuLGUpO3hlKHIsbyxhKSxvIGluIGV8fGRuKGUsIl9wcm9wcyIsbyl9O2Zvcih2YXIgYSBpbiB0KW8oYSk7JGUoITApfShlLHQucHJvcHMpLHQubWV0aG9kcyYmZnVuY3Rpb24oZSx0KXtlLiRvcHRpb25zLnByb3BzO2Zvcih2YXIgbiBpbiB0KWVbbl09ImZ1bmN0aW9uIiE9dHlwZW9mIHRbbl0/Uzp4KHRbbl0sZSl9KGUsdC5tZXRob2RzKSx0LmRhdGE/ZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucy5kYXRhO3ModD1lLl9kYXRhPSJmdW5jdGlvbiI9PXR5cGVvZiB0P2Z1bmN0aW9uKGUsdCl7bGUoKTt0cnl7cmV0dXJuIGUuY2FsbCh0LHQpfWNhdGNoKGUpe3JldHVybiBSZShlLHQsImRhdGEoKSIpLHt9fWZpbmFsbHl7ZmUoKX19KHQsZSk6dHx8e30pfHwodD17fSk7dmFyIG49T2JqZWN0LmtleXModCkscj1lLiRvcHRpb25zLnByb3BzLGk9KGUuJG9wdGlvbnMubWV0aG9kcyxuLmxlbmd0aCk7Zm9yKDtpLS07KXt2YXIgbz1uW2ldO3ImJnkocixvKXx8KGE9dm9pZCAwLDM2IT09KGE9KG8rIiIpLmNoYXJDb2RlQXQoMCkpJiY5NSE9PWEmJmRuKGUsIl9kYXRhIixvKSl9dmFyIGE7Q2UodCwhMCl9KGUpOkNlKGUuX2RhdGE9e30sITApLHQuY29tcHV0ZWQmJmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5fY29tcHV0ZWRXYXRjaGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHI9dGUoKTtmb3IodmFyIGkgaW4gdCl7dmFyIG89dFtpXSxhPSJmdW5jdGlvbiI9PXR5cGVvZiBvP286by5nZXQ7cnx8KG5baV09bmV3IGZuKGUsYXx8UyxTLGhuKSksaSBpbiBlfHxtbihlLGksbyl9fShlLHQuY29tcHV0ZWQpLHQud2F0Y2gmJnQud2F0Y2ghPT1ZJiZmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0KXt2YXIgcj10W25dO2lmKEFycmF5LmlzQXJyYXkocikpZm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspX24oZSxuLHJbaV0pO2Vsc2UgX24oZSxuLHIpfX0oZSx0LndhdGNoKX12YXIgaG49e2xhenk6ITB9O2Z1bmN0aW9uIG1uKGUsdCxuKXt2YXIgcj0hdGUoKTsiZnVuY3Rpb24iPT10eXBlb2Ygbj8ocG4uZ2V0PXI/eW4odCk6Z24obikscG4uc2V0PVMpOihwbi5nZXQ9bi5nZXQ/ciYmITEhPT1uLmNhY2hlP3luKHQpOmduKG4uZ2V0KTpTLHBuLnNldD1uLnNldHx8UyksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxwbil9ZnVuY3Rpb24geW4oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fY29tcHV0ZWRXYXRjaGVycyYmdGhpcy5fY29tcHV0ZWRXYXRjaGVyc1tlXTtpZih0KXJldHVybiB0LmRpcnR5JiZ0LmV2YWx1YXRlKCksY2UudGFyZ2V0JiZ0LmRlcGVuZCgpLHQudmFsdWV9fWZ1bmN0aW9uIGduKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmNhbGwodGhpcyx0aGlzKX19ZnVuY3Rpb24gX24oZSx0LG4scil7cmV0dXJuIHMobikmJihyPW4sbj1uLmhhbmRsZXIpLCJzdHJpbmciPT10eXBlb2YgbiYmKG49ZVtuXSksZS4kd2F0Y2godCxuLHIpfXZhciBibj0wO2Z1bmN0aW9uICRuKGUpe3ZhciB0PWUub3B0aW9ucztpZihlLnN1cGVyKXt2YXIgbj0kbihlLnN1cGVyKTtpZihuIT09ZS5zdXBlck9wdGlvbnMpe2Uuc3VwZXJPcHRpb25zPW47dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLm9wdGlvbnMscj1lLnNlYWxlZE9wdGlvbnM7Zm9yKHZhciBpIGluIG4pbltpXSE9PXJbaV0mJih0fHwodD17fSksdFtpXT1uW2ldKTtyZXR1cm4gdH0oZSk7ciYmQShlLmV4dGVuZE9wdGlvbnMsciksKHQ9ZS5vcHRpb25zPURlKG4sZS5leHRlbmRPcHRpb25zKSkubmFtZSYmKHQuY29tcG9uZW50c1t0Lm5hbWVdPWUpfX1yZXR1cm4gdH1mdW5jdGlvbiB3bihlKXt0aGlzLl9pbml0KGUpfWZ1bmN0aW9uIENuKGUpe2UuY2lkPTA7dmFyIHQ9MTtlLmV4dGVuZD1mdW5jdGlvbihlKXtlPWV8fHt9O3ZhciBuPXRoaXMscj1uLmNpZCxpPWUuX0N0b3J8fChlLl9DdG9yPXt9KTtpZihpW3JdKXJldHVybiBpW3JdO3ZhciBvPWUubmFtZXx8bi5vcHRpb25zLm5hbWUsYT1mdW5jdGlvbihlKXt0aGlzLl9pbml0KGUpfTtyZXR1cm4oYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPWEsYS5jaWQ9dCsrLGEub3B0aW9ucz1EZShuLm9wdGlvbnMsZSksYS5zdXBlcj1uLGEub3B0aW9ucy5wcm9wcyYmZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vcHRpb25zLnByb3BzO2Zvcih2YXIgbiBpbiB0KWRuKGUucHJvdG90eXBlLCJfcHJvcHMiLG4pfShhKSxhLm9wdGlvbnMuY29tcHV0ZWQmJmZ1bmN0aW9uKGUpe3ZhciB0PWUub3B0aW9ucy5jb21wdXRlZDtmb3IodmFyIG4gaW4gdCltbihlLnByb3RvdHlwZSxuLHRbbl0pfShhKSxhLmV4dGVuZD1uLmV4dGVuZCxhLm1peGluPW4ubWl4aW4sYS51c2U9bi51c2UsTS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2FbZV09bltlXX0pLG8mJihhLm9wdGlvbnMuY29tcG9uZW50c1tvXT1hKSxhLnN1cGVyT3B0aW9ucz1uLm9wdGlvbnMsYS5leHRlbmRPcHRpb25zPWUsYS5zZWFsZWRPcHRpb25zPUEoe30sYS5vcHRpb25zKSxpW3JdPWEsYX19ZnVuY3Rpb24geG4oZSl7cmV0dXJuIGUmJihlLkN0b3Iub3B0aW9ucy5uYW1lfHxlLnRhZyl9ZnVuY3Rpb24ga24oZSx0KXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9lLmluZGV4T2YodCk+LTE6InN0cmluZyI9PXR5cGVvZiBlP2Uuc3BsaXQoIiwiKS5pbmRleE9mKHQpPi0xOihuPWUsIltvYmplY3QgUmVnRXhwXSI9PT1hLmNhbGwobikmJmUudGVzdCh0KSk7dmFyIG59ZnVuY3Rpb24gQW4oZSx0KXt2YXIgbj1lLmNhY2hlLHI9ZS5rZXlzLGk9ZS5fdm5vZGU7Zm9yKHZhciBvIGluIG4pe3ZhciBhPW5bb107aWYoYSl7dmFyIHM9eG4oYS5jb21wb25lbnRPcHRpb25zKTtzJiYhdChzKSYmT24obixvLHIsaSl9fX1mdW5jdGlvbiBPbihlLHQsbixyKXt2YXIgaT1lW3RdOyFpfHxyJiZpLnRhZz09PXIudGFnfHxpLmNvbXBvbmVudEluc3RhbmNlLiRkZXN0cm95KCksZVt0XT1udWxsLGgobix0KX0hZnVuY3Rpb24odCl7dC5wcm90b3R5cGUuX2luaXQ9ZnVuY3Rpb24odCl7dmFyIG49dGhpcztuLl91aWQ9Ym4rKyxuLl9pc1Z1ZT0hMCx0JiZ0Ll9pc0NvbXBvbmVudD9mdW5jdGlvbihlLHQpe3ZhciBuPWUuJG9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLmNvbnN0cnVjdG9yLm9wdGlvbnMpLHI9dC5fcGFyZW50Vm5vZGU7bi5wYXJlbnQ9dC5wYXJlbnQsbi5fcGFyZW50Vm5vZGU9cjt2YXIgaT1yLmNvbXBvbmVudE9wdGlvbnM7bi5wcm9wc0RhdGE9aS5wcm9wc0RhdGEsbi5fcGFyZW50TGlzdGVuZXJzPWkubGlzdGVuZXJzLG4uX3JlbmRlckNoaWxkcmVuPWkuY2hpbGRyZW4sbi5fY29tcG9uZW50VGFnPWkudGFnLHQucmVuZGVyJiYobi5yZW5kZXI9dC5yZW5kZXIsbi5zdGF0aWNSZW5kZXJGbnM9dC5zdGF0aWNSZW5kZXJGbnMpfShuLHQpOm4uJG9wdGlvbnM9RGUoJG4obi5jb25zdHJ1Y3RvciksdHx8e30sbiksbi5fcmVuZGVyUHJveHk9bixuLl9zZWxmPW4sZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucyxuPXQucGFyZW50O2lmKG4mJiF0LmFic3RyYWN0KXtmb3IoO24uJG9wdGlvbnMuYWJzdHJhY3QmJm4uJHBhcmVudDspbj1uLiRwYXJlbnQ7bi4kY2hpbGRyZW4ucHVzaChlKX1lLiRwYXJlbnQ9bixlLiRyb290PW4/bi4kcm9vdDplLGUuJGNoaWxkcmVuPVtdLGUuJHJlZnM9e30sZS5fd2F0Y2hlcj1udWxsLGUuX2luYWN0aXZlPW51bGwsZS5fZGlyZWN0SW5hY3RpdmU9ITEsZS5faXNNb3VudGVkPSExLGUuX2lzRGVzdHJveWVkPSExLGUuX2lzQmVpbmdEZXN0cm95ZWQ9ITF9KG4pLGZ1bmN0aW9uKGUpe2UuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLGUuX2hhc0hvb2tFdmVudD0hMTt2YXIgdD1lLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7dCYmcXQoZSx0KX0obiksZnVuY3Rpb24odCl7dC5fdm5vZGU9bnVsbCx0Ll9zdGF0aWNUcmVlcz1udWxsO3ZhciBuPXQuJG9wdGlvbnMscj10LiR2bm9kZT1uLl9wYXJlbnRWbm9kZSxpPXImJnIuY29udGV4dDt0LiRzbG90cz11dChuLl9yZW5kZXJDaGlsZHJlbixpKSx0LiRzY29wZWRTbG90cz1lLHQuX2M9ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIFB0KHQsZSxuLHIsaSwhMSl9LHQuJGNyZWF0ZUVsZW1lbnQ9ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIFB0KHQsZSxuLHIsaSwhMCl9O3ZhciBvPXImJnIuZGF0YTt4ZSh0LCIkYXR0cnMiLG8mJm8uYXR0cnN8fGUsbnVsbCwhMCkseGUodCwiJGxpc3RlbmVycyIsbi5fcGFyZW50TGlzdGVuZXJzfHxlLG51bGwsITApfShuKSxZdChuLCJiZWZvcmVDcmVhdGUiKSxmdW5jdGlvbihlKXt2YXIgdD1jdChlLiRvcHRpb25zLmluamVjdCxlKTt0JiYoJGUoITEpLE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24obil7eGUoZSxuLHRbbl0pfSksJGUoITApKX0obiksdm4obiksZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucy5wcm92aWRlO3QmJihlLl9wcm92aWRlZD0iZnVuY3Rpb24iPT10eXBlb2YgdD90LmNhbGwoZSk6dCl9KG4pLFl0KG4sImNyZWF0ZWQiKSxuLiRvcHRpb25zLmVsJiZuLiRtb3VudChuLiRvcHRpb25zLmVsKX19KHduKSxmdW5jdGlvbihlKXt2YXIgdD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fSxuPXtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvcHN9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIiRkYXRhIix0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIiRwcm9wcyIsbiksZS5wcm90b3R5cGUuJHNldD1rZSxlLnByb3RvdHlwZS4kZGVsZXRlPUFlLGUucHJvdG90eXBlLiR3YXRjaD1mdW5jdGlvbihlLHQsbil7aWYocyh0KSlyZXR1cm4gX24odGhpcyxlLHQsbik7KG49bnx8e30pLnVzZXI9ITA7dmFyIHI9bmV3IGZuKHRoaXMsZSx0LG4pO2lmKG4uaW1tZWRpYXRlKXRyeXt0LmNhbGwodGhpcyxyLnZhbHVlKX1jYXRjaChlKXtSZShlLHRoaXMsJ2NhbGxiYWNrIGZvciBpbW1lZGlhdGUgd2F0Y2hlciAiJytyLmV4cHJlc3Npb24rJyInKX1yZXR1cm4gZnVuY3Rpb24oKXtyLnRlYXJkb3duKCl9fX0od24pLGZ1bmN0aW9uKGUpe3ZhciB0PS9eaG9vazovO2UucHJvdG90eXBlLiRvbj1mdW5jdGlvbihlLG4pe3ZhciByPXRoaXM7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIGk9MCxvPWUubGVuZ3RoO2k8bztpKyspci4kb24oZVtpXSxuKTtlbHNlKHIuX2V2ZW50c1tlXXx8KHIuX2V2ZW50c1tlXT1bXSkpLnB1c2gobiksdC50ZXN0KGUpJiYoci5faGFzSG9va0V2ZW50PSEwKTtyZXR1cm4gcn0sZS5wcm90b3R5cGUuJG9uY2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO2Z1bmN0aW9uIHIoKXtuLiRvZmYoZSxyKSx0LmFwcGx5KG4sYXJndW1lbnRzKX1yZXR1cm4gci5mbj10LG4uJG9uKGUsciksbn0sZS5wcm90b3R5cGUuJG9mZj1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIG4uX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLG47aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciByPTAsaT1lLmxlbmd0aDtyPGk7cisrKW4uJG9mZihlW3JdLHQpO3JldHVybiBufXZhciBvLGE9bi5fZXZlbnRzW2VdO2lmKCFhKXJldHVybiBuO2lmKCF0KXJldHVybiBuLl9ldmVudHNbZV09bnVsbCxuO2Zvcih2YXIgcz1hLmxlbmd0aDtzLS07KWlmKChvPWFbc10pPT09dHx8by5mbj09PXQpe2Euc3BsaWNlKHMsMSk7YnJlYWt9cmV0dXJuIG59LGUucHJvdG90eXBlLiRlbWl0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2V2ZW50c1tlXTtpZih0KXt0PXQubGVuZ3RoPjE/ayh0KTp0O2Zvcih2YXIgbj1rKGFyZ3VtZW50cywxKSxyPSdldmVudCBoYW5kbGVyIGZvciAiJytlKyciJyxpPTAsbz10Lmxlbmd0aDtpPG87aSsrKUhlKHRbaV0sdGhpcyxuLHRoaXMscil9cmV0dXJuIHRoaXN9fSh3biksZnVuY3Rpb24oZSl7ZS5wcm90b3R5cGUuX3VwZGF0ZT1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMscj1uLiRlbCxpPW4uX3Zub2RlLG89WnQobik7bi5fdm5vZGU9ZSxuLiRlbD1pP24uX19wYXRjaF9fKGksZSk6bi5fX3BhdGNoX18obi4kZWwsZSx0LCExKSxvKCksciYmKHIuX192dWVfXz1udWxsKSxuLiRlbCYmKG4uJGVsLl9fdnVlX189biksbi4kdm5vZGUmJm4uJHBhcmVudCYmbi4kdm5vZGU9PT1uLiRwYXJlbnQuX3Zub2RlJiYobi4kcGFyZW50LiRlbD1uLiRlbCl9LGUucHJvdG90eXBlLiRmb3JjZVVwZGF0ZT1mdW5jdGlvbigpe3RoaXMuX3dhdGNoZXImJnRoaXMuX3dhdGNoZXIudXBkYXRlKCl9LGUucHJvdG90eXBlLiRkZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZighZS5faXNCZWluZ0Rlc3Ryb3llZCl7WXQoZSwiYmVmb3JlRGVzdHJveSIpLGUuX2lzQmVpbmdEZXN0cm95ZWQ9ITA7dmFyIHQ9ZS4kcGFyZW50OyF0fHx0Ll9pc0JlaW5nRGVzdHJveWVkfHxlLiRvcHRpb25zLmFic3RyYWN0fHxoKHQuJGNoaWxkcmVuLGUpLGUuX3dhdGNoZXImJmUuX3dhdGNoZXIudGVhcmRvd24oKTtmb3IodmFyIG49ZS5fd2F0Y2hlcnMubGVuZ3RoO24tLTspZS5fd2F0Y2hlcnNbbl0udGVhcmRvd24oKTtlLl9kYXRhLl9fb2JfXyYmZS5fZGF0YS5fX29iX18udm1Db3VudC0tLGUuX2lzRGVzdHJveWVkPSEwLGUuX19wYXRjaF9fKGUuX3Zub2RlLG51bGwpLFl0KGUsImRlc3Ryb3llZCIpLGUuJG9mZigpLGUuJGVsJiYoZS4kZWwuX192dWVfXz1udWxsKSxlLiR2bm9kZSYmKGUuJHZub2RlLnBhcmVudD1udWxsKX19fSh3biksZnVuY3Rpb24oZSl7U3QoZS5wcm90b3R5cGUpLGUucHJvdG90eXBlLiRuZXh0VGljaz1mdW5jdGlvbihlKXtyZXR1cm4gWWUoZSx0aGlzKX0sZS5wcm90b3R5cGUuX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQuJG9wdGlvbnMscj1uLnJlbmRlcixpPW4uX3BhcmVudFZub2RlO2kmJih0LiRzY29wZWRTbG90cz1mdChpLmRhdGEuc2NvcGVkU2xvdHMsdC4kc2xvdHMsdC4kc2NvcGVkU2xvdHMpKSx0LiR2bm9kZT1pO3RyeXtIdD10LGU9ci5jYWxsKHQuX3JlbmRlclByb3h5LHQuJGNyZWF0ZUVsZW1lbnQpfWNhdGNoKG4pe1JlKG4sdCwicmVuZGVyIiksZT10Ll92bm9kZX1maW5hbGx5e0h0PW51bGx9cmV0dXJuIEFycmF5LmlzQXJyYXkoZSkmJjE9PT1lLmxlbmd0aCYmKGU9ZVswXSksZSBpbnN0YW5jZW9mIHBlfHwoZT12ZSgpKSxlLnBhcmVudD1pLGV9fSh3bik7dmFyIFNuPVtTdHJpbmcsUmVnRXhwLEFycmF5XSxUbj17S2VlcEFsaXZlOntuYW1lOiJrZWVwLWFsaXZlIixhYnN0cmFjdDohMCxwcm9wczp7aW5jbHVkZTpTbixleGNsdWRlOlNuLG1heDpbU3RyaW5nLE51bWJlcl19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLmNhY2hlPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5rZXlzPVtdfSxkZXN0cm95ZWQ6ZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4gdGhpcy5jYWNoZSlPbih0aGlzLmNhY2hlLGUsdGhpcy5rZXlzKX0sbW91bnRlZDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy4kd2F0Y2goImluY2x1ZGUiLGZ1bmN0aW9uKHQpe0FuKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGtuKHQsZSl9KX0pLHRoaXMuJHdhdGNoKCJleGNsdWRlIixmdW5jdGlvbih0KXtBbihlLGZ1bmN0aW9uKGUpe3JldHVybiFrbih0LGUpfSl9KX0scmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kc2xvdHMuZGVmYXVsdCx0PXp0KGUpLG49dCYmdC5jb21wb25lbnRPcHRpb25zO2lmKG4pe3ZhciByPXhuKG4pLGk9dGhpcy5pbmNsdWRlLG89dGhpcy5leGNsdWRlO2lmKGkmJighcnx8IWtuKGkscikpfHxvJiZyJiZrbihvLHIpKXJldHVybiB0O3ZhciBhPXRoaXMuY2FjaGUscz10aGlzLmtleXMsYz1udWxsPT10LmtleT9uLkN0b3IuY2lkKyhuLnRhZz8iOjoiK24udGFnOiIiKTp0LmtleTthW2NdPyh0LmNvbXBvbmVudEluc3RhbmNlPWFbY10uY29tcG9uZW50SW5zdGFuY2UsaChzLGMpLHMucHVzaChjKSk6KGFbY109dCxzLnB1c2goYyksdGhpcy5tYXgmJnMubGVuZ3RoPnBhcnNlSW50KHRoaXMubWF4KSYmT24oYSxzWzBdLHMsdGhpcy5fdm5vZGUpKSx0LmRhdGEua2VlcEFsaXZlPSEwfXJldHVybiB0fHxlJiZlWzBdfX19OyFmdW5jdGlvbihlKXt2YXIgdD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEZ9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiY29uZmlnIix0KSxlLnV0aWw9e3dhcm46YWUsZXh0ZW5kOkEsbWVyZ2VPcHRpb25zOkRlLGRlZmluZVJlYWN0aXZlOnhlfSxlLnNldD1rZSxlLmRlbGV0ZT1BZSxlLm5leHRUaWNrPVllLGUub2JzZXJ2YWJsZT1mdW5jdGlvbihlKXtyZXR1cm4gQ2UoZSksZX0sZS5vcHRpb25zPU9iamVjdC5jcmVhdGUobnVsbCksTS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2Uub3B0aW9uc1t0KyJzIl09T2JqZWN0LmNyZWF0ZShudWxsKX0pLGUub3B0aW9ucy5fYmFzZT1lLEEoZS5vcHRpb25zLmNvbXBvbmVudHMsVG4pLGZ1bmN0aW9uKGUpe2UudXNlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2luc3RhbGxlZFBsdWdpbnN8fCh0aGlzLl9pbnN0YWxsZWRQbHVnaW5zPVtdKTtpZih0LmluZGV4T2YoZSk+LTEpcmV0dXJuIHRoaXM7dmFyIG49ayhhcmd1bWVudHMsMSk7cmV0dXJuIG4udW5zaGlmdCh0aGlzKSwiZnVuY3Rpb24iPT10eXBlb2YgZS5pbnN0YWxsP2UuaW5zdGFsbC5hcHBseShlLG4pOiJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLmFwcGx5KG51bGwsbiksdC5wdXNoKGUpLHRoaXN9fShlKSxmdW5jdGlvbihlKXtlLm1peGluPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9wdGlvbnM9RGUodGhpcy5vcHRpb25zLGUpLHRoaXN9fShlKSxDbihlKSxmdW5jdGlvbihlKXtNLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XT1mdW5jdGlvbihlLG4pe3JldHVybiBuPygiY29tcG9uZW50Ij09PXQmJnMobikmJihuLm5hbWU9bi5uYW1lfHxlLG49dGhpcy5vcHRpb25zLl9iYXNlLmV4dGVuZChuKSksImRpcmVjdGl2ZSI9PT10JiYiZnVuY3Rpb24iPT10eXBlb2YgbiYmKG49e2JpbmQ6bix1cGRhdGU6bn0pLHRoaXMub3B0aW9uc1t0KyJzIl1bZV09bixuKTp0aGlzLm9wdGlvbnNbdCsicyJdW2VdfX0pfShlKX0od24pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3bi5wcm90b3R5cGUsIiRpc1NlcnZlciIse2dldDp0ZX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3bi5wcm90b3R5cGUsIiRzc3JDb250ZXh0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHZub2RlJiZ0aGlzLiR2bm9kZS5zc3JDb250ZXh0fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3biwiRnVuY3Rpb25hbFJlbmRlckNvbnRleHQiLHt2YWx1ZTpUdH0pLHduLnZlcnNpb249IjIuNi4xMSI7dmFyIEVuPXAoInN0eWxlLGNsYXNzIiksTm49cCgiaW5wdXQsdGV4dGFyZWEsb3B0aW9uLHNlbGVjdCxwcm9ncmVzcyIpLGpuPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4idmFsdWUiPT09biYmTm4oZSkmJiJidXR0b24iIT09dHx8InNlbGVjdGVkIj09PW4mJiJvcHRpb24iPT09ZXx8ImNoZWNrZWQiPT09biYmImlucHV0Ij09PWV8fCJtdXRlZCI9PT1uJiYidmlkZW8iPT09ZX0sRG49cCgiY29udGVudGVkaXRhYmxlLGRyYWdnYWJsZSxzcGVsbGNoZWNrIiksTG49cCgiZXZlbnRzLGNhcmV0LHR5cGluZyxwbGFpbnRleHQtb25seSIpLE1uPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEhuKHQpfHwiZmFsc2UiPT09dD8iZmFsc2UiOiJjb250ZW50ZWRpdGFibGUiPT09ZSYmTG4odCk/dDoidHJ1ZSJ9LEluPXAoImFsbG93ZnVsbHNjcmVlbixhc3luYyxhdXRvZm9jdXMsYXV0b3BsYXksY2hlY2tlZCxjb21wYWN0LGNvbnRyb2xzLGRlY2xhcmUsZGVmYXVsdCxkZWZhdWx0Y2hlY2tlZCxkZWZhdWx0bXV0ZWQsZGVmYXVsdHNlbGVjdGVkLGRlZmVyLGRpc2FibGVkLGVuYWJsZWQsZm9ybW5vdmFsaWRhdGUsaGlkZGVuLGluZGV0ZXJtaW5hdGUsaW5lcnQsaXNtYXAsaXRlbXNjb3BlLGxvb3AsbXVsdGlwbGUsbXV0ZWQsbm9ocmVmLG5vcmVzaXplLG5vc2hhZGUsbm92YWxpZGF0ZSxub3dyYXAsb3BlbixwYXVzZW9uZXhpdCxyZWFkb25seSxyZXF1aXJlZCxyZXZlcnNlZCxzY29wZWQsc2VhbWxlc3Msc2VsZWN0ZWQsc29ydGFibGUsdHJhbnNsYXRlLHRydWVzcGVlZCx0eXBlbXVzdG1hdGNoLHZpc2libGUiKSxGbj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsUG49ZnVuY3Rpb24oZSl7cmV0dXJuIjoiPT09ZS5jaGFyQXQoNSkmJiJ4bGluayI9PT1lLnNsaWNlKDAsNSl9LFJuPWZ1bmN0aW9uKGUpe3JldHVybiBQbihlKT9lLnNsaWNlKDYsZS5sZW5ndGgpOiIifSxIbj1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZXx8ITE9PT1lfTtmdW5jdGlvbiBCbihlKXtmb3IodmFyIHQ9ZS5kYXRhLHI9ZSxpPWU7bihpLmNvbXBvbmVudEluc3RhbmNlKTspKGk9aS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpJiZpLmRhdGEmJih0PVVuKGkuZGF0YSx0KSk7Zm9yKDtuKHI9ci5wYXJlbnQpOylyJiZyLmRhdGEmJih0PVVuKHQsci5kYXRhKSk7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7aWYobihlKXx8bih0KSlyZXR1cm4gem4oZSxWbih0KSk7cmV0dXJuIiJ9KHQuc3RhdGljQ2xhc3MsdC5jbGFzcyl9ZnVuY3Rpb24gVW4oZSx0KXtyZXR1cm57c3RhdGljQ2xhc3M6em4oZS5zdGF0aWNDbGFzcyx0LnN0YXRpY0NsYXNzKSxjbGFzczpuKGUuY2xhc3MpP1tlLmNsYXNzLHQuY2xhc3NdOnQuY2xhc3N9fWZ1bmN0aW9uIHpuKGUsdCl7cmV0dXJuIGU/dD9lKyIgIit0OmU6dHx8IiJ9ZnVuY3Rpb24gVm4oZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9IiIsaT0wLG89ZS5sZW5ndGg7aTxvO2krKyluKHQ9Vm4oZVtpXSkpJiYiIiE9PXQmJihyJiYocis9IiAiKSxyKz10KTtyZXR1cm4gcn0oZSk6byhlKT9mdW5jdGlvbihlKXt2YXIgdD0iIjtmb3IodmFyIG4gaW4gZSllW25dJiYodCYmKHQrPSIgIiksdCs9bik7cmV0dXJuIHR9KGUpOiJzdHJpbmciPT10eXBlb2YgZT9lOiIifXZhciBLbj17c3ZnOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsbWF0aDoiaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoL01hdGhNTCJ9LEpuPXAoImh0bWwsYm9keSxiYXNlLGhlYWQsbGluayxtZXRhLHN0eWxlLHRpdGxlLGFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxmb290ZXIsaGVhZGVyLGgxLGgyLGgzLGg0LGg1LGg2LGhncm91cCxuYXYsc2VjdGlvbixkaXYsZGQsZGwsZHQsZmlnY2FwdGlvbixmaWd1cmUscGljdHVyZSxocixpbWcsbGksbWFpbixvbCxwLHByZSx1bCxhLGIsYWJicixiZGksYmRvLGJyLGNpdGUsY29kZSxkYXRhLGRmbixlbSxpLGtiZCxtYXJrLHEscnAscnQscnRjLHJ1YnkscyxzYW1wLHNtYWxsLHNwYW4sc3Ryb25nLHN1YixzdXAsdGltZSx1LHZhcix3YnIsYXJlYSxhdWRpbyxtYXAsdHJhY2ssdmlkZW8sZW1iZWQsb2JqZWN0LHBhcmFtLHNvdXJjZSxjYW52YXMsc2NyaXB0LG5vc2NyaXB0LGRlbCxpbnMsY2FwdGlvbixjb2wsY29sZ3JvdXAsdGFibGUsdGhlYWQsdGJvZHksdGQsdGgsdHIsYnV0dG9uLGRhdGFsaXN0LGZpZWxkc2V0LGZvcm0saW5wdXQsbGFiZWwsbGVnZW5kLG1ldGVyLG9wdGdyb3VwLG9wdGlvbixvdXRwdXQscHJvZ3Jlc3Msc2VsZWN0LHRleHRhcmVhLGRldGFpbHMsZGlhbG9nLG1lbnUsbWVudWl0ZW0sc3VtbWFyeSxjb250ZW50LGVsZW1lbnQsc2hhZG93LHRlbXBsYXRlLGJsb2NrcXVvdGUsaWZyYW1lLHRmb290IikscW49cCgic3ZnLGFuaW1hdGUsY2lyY2xlLGNsaXBwYXRoLGN1cnNvcixkZWZzLGRlc2MsZWxsaXBzZSxmaWx0ZXIsZm9udC1mYWNlLGZvcmVpZ25PYmplY3QsZyxnbHlwaCxpbWFnZSxsaW5lLG1hcmtlcixtYXNrLG1pc3NpbmctZ2x5cGgscGF0aCxwYXR0ZXJuLHBvbHlnb24scG9seWxpbmUscmVjdCxzd2l0Y2gsc3ltYm9sLHRleHQsdGV4dHBhdGgsdHNwYW4sdXNlLHZpZXciLCEwKSxXbj1mdW5jdGlvbihlKXtyZXR1cm4gSm4oZSl8fHFuKGUpfTtmdW5jdGlvbiBabihlKXtyZXR1cm4gcW4oZSk/InN2ZyI6Im1hdGgiPT09ZT8ibWF0aCI6dm9pZCAwfXZhciBHbj1PYmplY3QuY3JlYXRlKG51bGwpO3ZhciBYbj1wKCJ0ZXh0LG51bWJlcixwYXNzd29yZCxzZWFyY2gsZW1haWwsdGVsLHVybCIpO2Z1bmN0aW9uIFluKGUpe2lmKCJzdHJpbmciPT10eXBlb2YgZSl7dmFyIHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKTtyZXR1cm4gdHx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iil9cmV0dXJuIGV9dmFyIFFuPU9iamVjdC5mcmVlemUoe2NyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpO3JldHVybiJzZWxlY3QiIT09ZT9uOih0LmRhdGEmJnQuZGF0YS5hdHRycyYmdm9pZCAwIT09dC5kYXRhLmF0dHJzLm11bHRpcGxlJiZuLnNldEF0dHJpYnV0ZSgibXVsdGlwbGUiLCJtdWx0aXBsZSIpLG4pfSxjcmVhdGVFbGVtZW50TlM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKEtuW2VdLHQpfSxjcmVhdGVUZXh0Tm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZSl9LGNyZWF0ZUNvbW1lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoZSl9LGluc2VydEJlZm9yZTpmdW5jdGlvbihlLHQsbil7ZS5pbnNlcnRCZWZvcmUodCxuKX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oZSx0KXtlLnJlbW92ZUNoaWxkKHQpfSxhcHBlbmRDaGlsZDpmdW5jdGlvbihlLHQpe2UuYXBwZW5kQ2hpbGQodCl9LHBhcmVudE5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyZW50Tm9kZX0sbmV4dFNpYmxpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIGUubmV4dFNpYmxpbmd9LHRhZ05hbWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGFnTmFtZX0sc2V0VGV4dENvbnRlbnQ6ZnVuY3Rpb24oZSx0KXtlLnRleHRDb250ZW50PXR9LHNldFN0eWxlU2NvcGU6ZnVuY3Rpb24oZSx0KXtlLnNldEF0dHJpYnV0ZSh0LCIiKX19KSxlcj17Y3JlYXRlOmZ1bmN0aW9uKGUsdCl7dHIodCl9LHVwZGF0ZTpmdW5jdGlvbihlLHQpe2UuZGF0YS5yZWYhPT10LmRhdGEucmVmJiYodHIoZSwhMCksdHIodCkpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3RyKGUsITApfX07ZnVuY3Rpb24gdHIoZSx0KXt2YXIgcj1lLmRhdGEucmVmO2lmKG4ocikpe3ZhciBpPWUuY29udGV4dCxvPWUuY29tcG9uZW50SW5zdGFuY2V8fGUuZWxtLGE9aS4kcmVmczt0P0FycmF5LmlzQXJyYXkoYVtyXSk/aChhW3JdLG8pOmFbcl09PT1vJiYoYVtyXT12b2lkIDApOmUuZGF0YS5yZWZJbkZvcj9BcnJheS5pc0FycmF5KGFbcl0pP2Fbcl0uaW5kZXhPZihvKTwwJiZhW3JdLnB1c2gobyk6YVtyXT1bb106YVtyXT1vfX12YXIgbnI9bmV3IHBlKCIiLHt9LFtdKSxycj1bImNyZWF0ZSIsImFjdGl2YXRlIiwidXBkYXRlIiwicmVtb3ZlIiwiZGVzdHJveSJdO2Z1bmN0aW9uIGlyKGUsaSl7cmV0dXJuIGUua2V5PT09aS5rZXkmJihlLnRhZz09PWkudGFnJiZlLmlzQ29tbWVudD09PWkuaXNDb21tZW50JiZuKGUuZGF0YSk9PT1uKGkuZGF0YSkmJmZ1bmN0aW9uKGUsdCl7aWYoImlucHV0IiE9PWUudGFnKXJldHVybiEwO3ZhciByLGk9bihyPWUuZGF0YSkmJm4ocj1yLmF0dHJzKSYmci50eXBlLG89bihyPXQuZGF0YSkmJm4ocj1yLmF0dHJzKSYmci50eXBlO3JldHVybiBpPT09b3x8WG4oaSkmJlhuKG8pfShlLGkpfHxyKGUuaXNBc3luY1BsYWNlaG9sZGVyKSYmZS5hc3luY0ZhY3Rvcnk9PT1pLmFzeW5jRmFjdG9yeSYmdChpLmFzeW5jRmFjdG9yeS5lcnJvcikpfWZ1bmN0aW9uIG9yKGUsdCxyKXt2YXIgaSxvLGE9e307Zm9yKGk9dDtpPD1yOysraSluKG89ZVtpXS5rZXkpJiYoYVtvXT1pKTtyZXR1cm4gYX12YXIgYXI9e2NyZWF0ZTpzcix1cGRhdGU6c3IsZGVzdHJveTpmdW5jdGlvbihlKXtzcihlLG5yKX19O2Z1bmN0aW9uIHNyKGUsdCl7KGUuZGF0YS5kaXJlY3RpdmVzfHx0LmRhdGEuZGlyZWN0aXZlcykmJmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLG89ZT09PW5yLGE9dD09PW5yLHM9dXIoZS5kYXRhLmRpcmVjdGl2ZXMsZS5jb250ZXh0KSxjPXVyKHQuZGF0YS5kaXJlY3RpdmVzLHQuY29udGV4dCksdT1bXSxsPVtdO2ZvcihuIGluIGMpcj1zW25dLGk9Y1tuXSxyPyhpLm9sZFZhbHVlPXIudmFsdWUsaS5vbGRBcmc9ci5hcmcsZnIoaSwidXBkYXRlIix0LGUpLGkuZGVmJiZpLmRlZi5jb21wb25lbnRVcGRhdGVkJiZsLnB1c2goaSkpOihmcihpLCJiaW5kIix0LGUpLGkuZGVmJiZpLmRlZi5pbnNlcnRlZCYmdS5wdXNoKGkpKTtpZih1Lmxlbmd0aCl7dmFyIGY9ZnVuY3Rpb24oKXtmb3IodmFyIG49MDtuPHUubGVuZ3RoO24rKylmcih1W25dLCJpbnNlcnRlZCIsdCxlKX07bz9pdCh0LCJpbnNlcnQiLGYpOmYoKX1sLmxlbmd0aCYmaXQodCwicG9zdHBhdGNoIixmdW5jdGlvbigpe2Zvcih2YXIgbj0wO248bC5sZW5ndGg7bisrKWZyKGxbbl0sImNvbXBvbmVudFVwZGF0ZWQiLHQsZSl9KTtpZighbylmb3IobiBpbiBzKWNbbl18fGZyKHNbbl0sInVuYmluZCIsZSxlLGEpfShlLHQpfXZhciBjcj1PYmplY3QuY3JlYXRlKG51bGwpO2Z1bmN0aW9uIHVyKGUsdCl7dmFyIG4scixpPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoIWUpcmV0dXJuIGk7Zm9yKG49MDtuPGUubGVuZ3RoO24rKykocj1lW25dKS5tb2RpZmllcnN8fChyLm1vZGlmaWVycz1jciksaVtscihyKV09cixyLmRlZj1MZSh0LiRvcHRpb25zLCJkaXJlY3RpdmVzIixyLm5hbWUpO3JldHVybiBpfWZ1bmN0aW9uIGxyKGUpe3JldHVybiBlLnJhd05hbWV8fGUubmFtZSsiLiIrT2JqZWN0LmtleXMoZS5tb2RpZmllcnN8fHt9KS5qb2luKCIuIil9ZnVuY3Rpb24gZnIoZSx0LG4scixpKXt2YXIgbz1lLmRlZiYmZS5kZWZbdF07aWYobyl0cnl7byhuLmVsbSxlLG4scixpKX1jYXRjaChyKXtSZShyLG4uY29udGV4dCwiZGlyZWN0aXZlICIrZS5uYW1lKyIgIit0KyIgaG9vayIpfX12YXIgcHI9W2VyLGFyXTtmdW5jdGlvbiBkcihlLHIpe3ZhciBpPXIuY29tcG9uZW50T3B0aW9ucztpZighKG4oaSkmJiExPT09aS5DdG9yLm9wdGlvbnMuaW5oZXJpdEF0dHJzfHx0KGUuZGF0YS5hdHRycykmJnQoci5kYXRhLmF0dHJzKSkpe3ZhciBvLGEscz1yLmVsbSxjPWUuZGF0YS5hdHRyc3x8e30sdT1yLmRhdGEuYXR0cnN8fHt9O2ZvcihvIGluIG4odS5fX29iX18pJiYodT1yLmRhdGEuYXR0cnM9QSh7fSx1KSksdSlhPXVbb10sY1tvXSE9PWEmJnZyKHMsbyxhKTtmb3IobyBpbihxfHxaKSYmdS52YWx1ZSE9PWMudmFsdWUmJnZyKHMsInZhbHVlIix1LnZhbHVlKSxjKXQodVtvXSkmJihQbihvKT9zLnJlbW92ZUF0dHJpYnV0ZU5TKEZuLFJuKG8pKTpEbihvKXx8cy5yZW1vdmVBdHRyaWJ1dGUobykpfX1mdW5jdGlvbiB2cihlLHQsbil7ZS50YWdOYW1lLmluZGV4T2YoIi0iKT4tMT9ocihlLHQsbik6SW4odCk/SG4obik/ZS5yZW1vdmVBdHRyaWJ1dGUodCk6KG49ImFsbG93ZnVsbHNjcmVlbiI9PT10JiYiRU1CRUQiPT09ZS50YWdOYW1lPyJ0cnVlIjp0LGUuc2V0QXR0cmlidXRlKHQsbikpOkRuKHQpP2Uuc2V0QXR0cmlidXRlKHQsTW4odCxuKSk6UG4odCk/SG4obik/ZS5yZW1vdmVBdHRyaWJ1dGVOUyhGbixSbih0KSk6ZS5zZXRBdHRyaWJ1dGVOUyhGbix0LG4pOmhyKGUsdCxuKX1mdW5jdGlvbiBocihlLHQsbil7aWYoSG4obikpZS5yZW1vdmVBdHRyaWJ1dGUodCk7ZWxzZXtpZihxJiYhVyYmIlRFWFRBUkVBIj09PWUudGFnTmFtZSYmInBsYWNlaG9sZGVyIj09PXQmJiIiIT09biYmIWUuX19pZXBoKXt2YXIgcj1mdW5jdGlvbih0KXt0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigiaW5wdXQiLHIpfTtlLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IixyKSxlLl9faWVwaD0hMH1lLnNldEF0dHJpYnV0ZSh0LG4pfX12YXIgbXI9e2NyZWF0ZTpkcix1cGRhdGU6ZHJ9O2Z1bmN0aW9uIHlyKGUscil7dmFyIGk9ci5lbG0sbz1yLmRhdGEsYT1lLmRhdGE7aWYoISh0KG8uc3RhdGljQ2xhc3MpJiZ0KG8uY2xhc3MpJiYodChhKXx8dChhLnN0YXRpY0NsYXNzKSYmdChhLmNsYXNzKSkpKXt2YXIgcz1CbihyKSxjPWkuX3RyYW5zaXRpb25DbGFzc2VzO24oYykmJihzPXpuKHMsVm4oYykpKSxzIT09aS5fcHJldkNsYXNzJiYoaS5zZXRBdHRyaWJ1dGUoImNsYXNzIixzKSxpLl9wcmV2Q2xhc3M9cyl9fXZhciBncixfcixiciwkcix3cixDcix4cj17Y3JlYXRlOnlyLHVwZGF0ZTp5cn0sa3I9L1tcdykuK1wtXyRcXV0vO2Z1bmN0aW9uIEFyKGUpe3ZhciB0LG4scixpLG8sYT0hMSxzPSExLGM9ITEsdT0hMSxsPTAsZj0wLHA9MCxkPTA7Zm9yKHI9MDtyPGUubGVuZ3RoO3IrKylpZihuPXQsdD1lLmNoYXJDb2RlQXQociksYSkzOT09PXQmJjkyIT09biYmKGE9ITEpO2Vsc2UgaWYocykzND09PXQmJjkyIT09biYmKHM9ITEpO2Vsc2UgaWYoYyk5Nj09PXQmJjkyIT09biYmKGM9ITEpO2Vsc2UgaWYodSk0Nz09PXQmJjkyIT09biYmKHU9ITEpO2Vsc2UgaWYoMTI0IT09dHx8MTI0PT09ZS5jaGFyQ29kZUF0KHIrMSl8fDEyND09PWUuY2hhckNvZGVBdChyLTEpfHxsfHxmfHxwKXtzd2l0Y2godCl7Y2FzZSAzNDpzPSEwO2JyZWFrO2Nhc2UgMzk6YT0hMDticmVhaztjYXNlIDk2OmM9ITA7YnJlYWs7Y2FzZSA0MDpwKys7YnJlYWs7Y2FzZSA0MTpwLS07YnJlYWs7Y2FzZSA5MTpmKys7YnJlYWs7Y2FzZSA5MzpmLS07YnJlYWs7Y2FzZSAxMjM6bCsrO2JyZWFrO2Nhc2UgMTI1OmwtLX1pZig0Nz09PXQpe2Zvcih2YXIgdj1yLTEsaD12b2lkIDA7dj49MCYmIiAiPT09KGg9ZS5jaGFyQXQodikpO3YtLSk7aCYma3IudGVzdChoKXx8KHU9ITApfX1lbHNlIHZvaWQgMD09PWk/KGQ9cisxLGk9ZS5zbGljZSgwLHIpLnRyaW0oKSk6bSgpO2Z1bmN0aW9uIG0oKXsob3x8KG89W10pKS5wdXNoKGUuc2xpY2UoZCxyKS50cmltKCkpLGQ9cisxfWlmKHZvaWQgMD09PWk/aT1lLnNsaWNlKDAscikudHJpbSgpOjAhPT1kJiZtKCksbylmb3Iocj0wO3I8by5sZW5ndGg7cisrKWk9T3IoaSxvW3JdKTtyZXR1cm4gaX1mdW5jdGlvbiBPcihlLHQpe3ZhciBuPXQuaW5kZXhPZigiKCIpO2lmKG48MClyZXR1cm4nX2YoIicrdCsnIikoJytlKyIpIjt2YXIgcj10LnNsaWNlKDAsbiksaT10LnNsaWNlKG4rMSk7cmV0dXJuJ19mKCInK3IrJyIpKCcrZSsoIikiIT09aT8iLCIraTppKX1mdW5jdGlvbiBTcihlLHQpe2NvbnNvbGUuZXJyb3IoIltWdWUgY29tcGlsZXJdOiAiK2UpfWZ1bmN0aW9uIFRyKGUsdCl7cmV0dXJuIGU/ZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGVbdF19KS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KTpbXX1mdW5jdGlvbiBFcihlLHQsbixyLGkpeyhlLnByb3BzfHwoZS5wcm9wcz1bXSkpLnB1c2goUnIoe25hbWU6dCx2YWx1ZTpuLGR5bmFtaWM6aX0scikpLGUucGxhaW49ITF9ZnVuY3Rpb24gTnIoZSx0LG4scixpKXsoaT9lLmR5bmFtaWNBdHRyc3x8KGUuZHluYW1pY0F0dHJzPVtdKTplLmF0dHJzfHwoZS5hdHRycz1bXSkpLnB1c2goUnIoe25hbWU6dCx2YWx1ZTpuLGR5bmFtaWM6aX0scikpLGUucGxhaW49ITF9ZnVuY3Rpb24ganIoZSx0LG4scil7ZS5hdHRyc01hcFt0XT1uLGUuYXR0cnNMaXN0LnB1c2goUnIoe25hbWU6dCx2YWx1ZTpufSxyKSl9ZnVuY3Rpb24gRHIoZSx0LG4scixpLG8sYSxzKXsoZS5kaXJlY3RpdmVzfHwoZS5kaXJlY3RpdmVzPVtdKSkucHVzaChScih7bmFtZTp0LHJhd05hbWU6bix2YWx1ZTpyLGFyZzppLGlzRHluYW1pY0FyZzpvLG1vZGlmaWVyczphfSxzKSksZS5wbGFpbj0hMX1mdW5jdGlvbiBMcihlLHQsbil7cmV0dXJuIG4/Il9wKCIrdCsnLCInK2UrJyIpJzplK3R9ZnVuY3Rpb24gTXIodCxuLHIsaSxvLGEscyxjKXt2YXIgdTsoaT1pfHxlKS5yaWdodD9jP249IigiK24rIik9PT0nY2xpY2snPydjb250ZXh0bWVudSc6KCIrbisiKSI6ImNsaWNrIj09PW4mJihuPSJjb250ZXh0bWVudSIsZGVsZXRlIGkucmlnaHQpOmkubWlkZGxlJiYoYz9uPSIoIituKyIpPT09J2NsaWNrJz8nbW91c2V1cCc6KCIrbisiKSI6ImNsaWNrIj09PW4mJihuPSJtb3VzZXVwIikpLGkuY2FwdHVyZSYmKGRlbGV0ZSBpLmNhcHR1cmUsbj1McigiISIsbixjKSksaS5vbmNlJiYoZGVsZXRlIGkub25jZSxuPUxyKCJ+IixuLGMpKSxpLnBhc3NpdmUmJihkZWxldGUgaS5wYXNzaXZlLG49THIoIiYiLG4sYykpLGkubmF0aXZlPyhkZWxldGUgaS5uYXRpdmUsdT10Lm5hdGl2ZUV2ZW50c3x8KHQubmF0aXZlRXZlbnRzPXt9KSk6dT10LmV2ZW50c3x8KHQuZXZlbnRzPXt9KTt2YXIgbD1Scih7dmFsdWU6ci50cmltKCksZHluYW1pYzpjfSxzKTtpIT09ZSYmKGwubW9kaWZpZXJzPWkpO3ZhciBmPXVbbl07QXJyYXkuaXNBcnJheShmKT9vP2YudW5zaGlmdChsKTpmLnB1c2gobCk6dVtuXT1mP28/W2wsZl06W2YsbF06bCx0LnBsYWluPSExfWZ1bmN0aW9uIElyKGUsdCxuKXt2YXIgcj1GcihlLCI6Iit0KXx8RnIoZSwidi1iaW5kOiIrdCk7aWYobnVsbCE9cilyZXR1cm4gQXIocik7aWYoITEhPT1uKXt2YXIgaT1GcihlLHQpO2lmKG51bGwhPWkpcmV0dXJuIEpTT04uc3RyaW5naWZ5KGkpfX1mdW5jdGlvbiBGcihlLHQsbil7dmFyIHI7aWYobnVsbCE9KHI9ZS5hdHRyc01hcFt0XSkpZm9yKHZhciBpPWUuYXR0cnNMaXN0LG89MCxhPWkubGVuZ3RoO288YTtvKyspaWYoaVtvXS5uYW1lPT09dCl7aS5zcGxpY2UobywxKTticmVha31yZXR1cm4gbiYmZGVsZXRlIGUuYXR0cnNNYXBbdF0scn1mdW5jdGlvbiBQcihlLHQpe2Zvcih2YXIgbj1lLmF0dHJzTGlzdCxyPTAsaT1uLmxlbmd0aDtyPGk7cisrKXt2YXIgbz1uW3JdO2lmKHQudGVzdChvLm5hbWUpKXJldHVybiBuLnNwbGljZShyLDEpLG99fWZ1bmN0aW9uIFJyKGUsdCl7cmV0dXJuIHQmJihudWxsIT10LnN0YXJ0JiYoZS5zdGFydD10LnN0YXJ0KSxudWxsIT10LmVuZCYmKGUuZW5kPXQuZW5kKSksZX1mdW5jdGlvbiBIcihlLHQsbil7dmFyIHI9bnx8e30saT1yLm51bWJlcixvPSIkJHYiO3IudHJpbSYmKG89Iih0eXBlb2YgJCR2ID09PSAnc3RyaW5nJz8gJCR2LnRyaW0oKTogJCR2KSIpLGkmJihvPSJfbigiK28rIikiKTt2YXIgYT1Ccih0LG8pO2UubW9kZWw9e3ZhbHVlOiIoIit0KyIpIixleHByZXNzaW9uOkpTT04uc3RyaW5naWZ5KHQpLGNhbGxiYWNrOiJmdW5jdGlvbiAoJCR2KSB7IithKyJ9In19ZnVuY3Rpb24gQnIoZSx0KXt2YXIgbj1mdW5jdGlvbihlKXtpZihlPWUudHJpbSgpLGdyPWUubGVuZ3RoLGUuaW5kZXhPZigiWyIpPDB8fGUubGFzdEluZGV4T2YoIl0iKTxnci0xKXJldHVybigkcj1lLmxhc3RJbmRleE9mKCIuIikpPi0xP3tleHA6ZS5zbGljZSgwLCRyKSxrZXk6JyInK2Uuc2xpY2UoJHIrMSkrJyInfTp7ZXhwOmUsa2V5Om51bGx9O19yPWUsJHI9d3I9Q3I9MDtmb3IoOyF6cigpOylWcihicj1VcigpKT9Kcihicik6OTE9PT1iciYmS3IoYnIpO3JldHVybntleHA6ZS5zbGljZSgwLHdyKSxrZXk6ZS5zbGljZSh3cisxLENyKX19KGUpO3JldHVybiBudWxsPT09bi5rZXk/ZSsiPSIrdDoiJHNldCgiK24uZXhwKyIsICIrbi5rZXkrIiwgIit0KyIpIn1mdW5jdGlvbiBVcigpe3JldHVybiBfci5jaGFyQ29kZUF0KCsrJHIpfWZ1bmN0aW9uIHpyKCl7cmV0dXJuICRyPj1ncn1mdW5jdGlvbiBWcihlKXtyZXR1cm4gMzQ9PT1lfHwzOT09PWV9ZnVuY3Rpb24gS3IoZSl7dmFyIHQ9MTtmb3Iod3I9JHI7IXpyKCk7KWlmKFZyKGU9VXIoKSkpSnIoZSk7ZWxzZSBpZig5MT09PWUmJnQrKyw5Mz09PWUmJnQtLSwwPT09dCl7Q3I9JHI7YnJlYWt9fWZ1bmN0aW9uIEpyKGUpe2Zvcih2YXIgdD1lOyF6cigpJiYoZT1VcigpKSE9PXQ7KTt9dmFyIHFyLFdyPSJfX3IiLFpyPSJfX2MiO2Z1bmN0aW9uIEdyKGUsdCxuKXt2YXIgcj1xcjtyZXR1cm4gZnVuY3Rpb24gaSgpe251bGwhPT10LmFwcGx5KG51bGwsYXJndW1lbnRzKSYmUXIoZSxpLG4scil9fXZhciBYcj1WZSYmIShYJiZOdW1iZXIoWFsxXSk8PTUzKTtmdW5jdGlvbiBZcihlLHQsbixyKXtpZihYcil7dmFyIGk9YW4sbz10O3Q9by5fd3JhcHBlcj1mdW5jdGlvbihlKXtpZihlLnRhcmdldD09PWUuY3VycmVudFRhcmdldHx8ZS50aW1lU3RhbXA+PWl8fGUudGltZVN0YW1wPD0wfHxlLnRhcmdldC5vd25lckRvY3VtZW50IT09ZG9jdW1lbnQpcmV0dXJuIG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfX1xci5hZGRFdmVudExpc3RlbmVyKGUsdCxRP3tjYXB0dXJlOm4scGFzc2l2ZTpyfTpuKX1mdW5jdGlvbiBRcihlLHQsbixyKXsocnx8cXIpLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0Ll93cmFwcGVyfHx0LG4pfWZ1bmN0aW9uIGVpKGUscil7aWYoIXQoZS5kYXRhLm9uKXx8IXQoci5kYXRhLm9uKSl7dmFyIGk9ci5kYXRhLm9ufHx7fSxvPWUuZGF0YS5vbnx8e307cXI9ci5lbG0sZnVuY3Rpb24oZSl7aWYobihlW1dyXSkpe3ZhciB0PXE/ImNoYW5nZSI6ImlucHV0IjtlW3RdPVtdLmNvbmNhdChlW1dyXSxlW3RdfHxbXSksZGVsZXRlIGVbV3JdfW4oZVtacl0pJiYoZS5jaGFuZ2U9W10uY29uY2F0KGVbWnJdLGUuY2hhbmdlfHxbXSksZGVsZXRlIGVbWnJdKX0oaSkscnQoaSxvLFlyLFFyLEdyLHIuY29udGV4dCkscXI9dm9pZCAwfX12YXIgdGksbmk9e2NyZWF0ZTplaSx1cGRhdGU6ZWl9O2Z1bmN0aW9uIHJpKGUscil7aWYoIXQoZS5kYXRhLmRvbVByb3BzKXx8IXQoci5kYXRhLmRvbVByb3BzKSl7dmFyIGksbyxhPXIuZWxtLHM9ZS5kYXRhLmRvbVByb3BzfHx7fSxjPXIuZGF0YS5kb21Qcm9wc3x8e307Zm9yKGkgaW4gbihjLl9fb2JfXykmJihjPXIuZGF0YS5kb21Qcm9wcz1BKHt9LGMpKSxzKWkgaW4gY3x8KGFbaV09IiIpO2ZvcihpIGluIGMpe2lmKG89Y1tpXSwidGV4dENvbnRlbnQiPT09aXx8ImlubmVySFRNTCI9PT1pKXtpZihyLmNoaWxkcmVuJiYoci5jaGlsZHJlbi5sZW5ndGg9MCksbz09PXNbaV0pY29udGludWU7MT09PWEuY2hpbGROb2Rlcy5sZW5ndGgmJmEucmVtb3ZlQ2hpbGQoYS5jaGlsZE5vZGVzWzBdKX1pZigidmFsdWUiPT09aSYmIlBST0dSRVNTIiE9PWEudGFnTmFtZSl7YS5fdmFsdWU9bzt2YXIgdT10KG8pPyIiOlN0cmluZyhvKTtpaShhLHUpJiYoYS52YWx1ZT11KX1lbHNlIGlmKCJpbm5lckhUTUwiPT09aSYmcW4oYS50YWdOYW1lKSYmdChhLmlubmVySFRNTCkpeyh0aT10aXx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLmlubmVySFRNTD0iPHN2Zz4iK28rIjwvc3ZnPiI7Zm9yKHZhciBsPXRpLmZpcnN0Q2hpbGQ7YS5maXJzdENoaWxkOylhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCk7Zm9yKDtsLmZpcnN0Q2hpbGQ7KWEuYXBwZW5kQ2hpbGQobC5maXJzdENoaWxkKX1lbHNlIGlmKG8hPT1zW2ldKXRyeXthW2ldPW99Y2F0Y2goZSl7fX19fWZ1bmN0aW9uIGlpKGUsdCl7cmV0dXJuIWUuY29tcG9zaW5nJiYoIk9QVElPTiI9PT1lLnRhZ05hbWV8fGZ1bmN0aW9uKGUsdCl7dmFyIG49ITA7dHJ5e249ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCE9PWV9Y2F0Y2goZSl7fXJldHVybiBuJiZlLnZhbHVlIT09dH0oZSx0KXx8ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnZhbHVlLGk9ZS5fdk1vZGlmaWVycztpZihuKGkpKXtpZihpLm51bWJlcilyZXR1cm4gZihyKSE9PWYodCk7aWYoaS50cmltKXJldHVybiByLnRyaW0oKSE9PXQudHJpbSgpfXJldHVybiByIT09dH0oZSx0KSl9dmFyIG9pPXtjcmVhdGU6cmksdXBkYXRlOnJpfSxhaT1nKGZ1bmN0aW9uKGUpe3ZhciB0PXt9LG49LzooLispLztyZXR1cm4gZS5zcGxpdCgvOyg/IVteKF0qXCkpL2cpLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZSl7dmFyIHI9ZS5zcGxpdChuKTtyLmxlbmd0aD4xJiYodFtyWzBdLnRyaW0oKV09clsxXS50cmltKCkpfX0pLHR9KTtmdW5jdGlvbiBzaShlKXt2YXIgdD1jaShlLnN0eWxlKTtyZXR1cm4gZS5zdGF0aWNTdHlsZT9BKGUuc3RhdGljU3R5bGUsdCk6dH1mdW5jdGlvbiBjaShlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9PKGUpOiJzdHJpbmciPT10eXBlb2YgZT9haShlKTplfXZhciB1aSxsaT0vXi0tLyxmaT0vXHMqIWltcG9ydGFudCQvLHBpPWZ1bmN0aW9uKGUsdCxuKXtpZihsaS50ZXN0KHQpKWUuc3R5bGUuc2V0UHJvcGVydHkodCxuKTtlbHNlIGlmKGZpLnRlc3QobikpZS5zdHlsZS5zZXRQcm9wZXJ0eShDKHQpLG4ucmVwbGFjZShmaSwiIiksImltcG9ydGFudCIpO2Vsc2V7dmFyIHI9dmkodCk7aWYoQXJyYXkuaXNBcnJheShuKSlmb3IodmFyIGk9MCxvPW4ubGVuZ3RoO2k8bztpKyspZS5zdHlsZVtyXT1uW2ldO2Vsc2UgZS5zdHlsZVtyXT1ufX0sZGk9WyJXZWJraXQiLCJNb3oiLCJtcyJdLHZpPWcoZnVuY3Rpb24oZSl7aWYodWk9dWl8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlLCJmaWx0ZXIiIT09KGU9YihlKSkmJmUgaW4gdWkpcmV0dXJuIGU7Zm9yKHZhciB0PWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKSxuPTA7bjxkaS5sZW5ndGg7bisrKXt2YXIgcj1kaVtuXSt0O2lmKHIgaW4gdWkpcmV0dXJuIHJ9fSk7ZnVuY3Rpb24gaGkoZSxyKXt2YXIgaT1yLmRhdGEsbz1lLmRhdGE7aWYoISh0KGkuc3RhdGljU3R5bGUpJiZ0KGkuc3R5bGUpJiZ0KG8uc3RhdGljU3R5bGUpJiZ0KG8uc3R5bGUpKSl7dmFyIGEscyxjPXIuZWxtLHU9by5zdGF0aWNTdHlsZSxsPW8ubm9ybWFsaXplZFN0eWxlfHxvLnN0eWxlfHx7fSxmPXV8fGwscD1jaShyLmRhdGEuc3R5bGUpfHx7fTtyLmRhdGEubm9ybWFsaXplZFN0eWxlPW4ocC5fX29iX18pP0Eoe30scCk6cDt2YXIgZD1mdW5jdGlvbihlLHQpe3ZhciBuLHI9e307aWYodClmb3IodmFyIGk9ZTtpLmNvbXBvbmVudEluc3RhbmNlOykoaT1pLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZSkmJmkuZGF0YSYmKG49c2koaS5kYXRhKSkmJkEocixuKTsobj1zaShlLmRhdGEpKSYmQShyLG4pO2Zvcih2YXIgbz1lO289by5wYXJlbnQ7KW8uZGF0YSYmKG49c2koby5kYXRhKSkmJkEocixuKTtyZXR1cm4gcn0ociwhMCk7Zm9yKHMgaW4gZil0KGRbc10pJiZwaShjLHMsIiIpO2ZvcihzIGluIGQpKGE9ZFtzXSkhPT1mW3NdJiZwaShjLHMsbnVsbD09YT8iIjphKX19dmFyIG1pPXtjcmVhdGU6aGksdXBkYXRlOmhpfSx5aT0vXHMrLztmdW5jdGlvbiBnaShlLHQpe2lmKHQmJih0PXQudHJpbSgpKSlpZihlLmNsYXNzTGlzdCl0LmluZGV4T2YoIiAiKT4tMT90LnNwbGl0KHlpKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBlLmNsYXNzTGlzdC5hZGQodCl9KTplLmNsYXNzTGlzdC5hZGQodCk7ZWxzZXt2YXIgbj0iICIrKGUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIikrIiAiO24uaW5kZXhPZigiICIrdCsiICIpPDAmJmUuc2V0QXR0cmlidXRlKCJjbGFzcyIsKG4rdCkudHJpbSgpKX19ZnVuY3Rpb24gX2koZSx0KXtpZih0JiYodD10LnRyaW0oKSkpaWYoZS5jbGFzc0xpc3QpdC5pbmRleE9mKCIgIik+LTE/dC5zcGxpdCh5aSkuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gZS5jbGFzc0xpc3QucmVtb3ZlKHQpfSk6ZS5jbGFzc0xpc3QucmVtb3ZlKHQpLGUuY2xhc3NMaXN0Lmxlbmd0aHx8ZS5yZW1vdmVBdHRyaWJ1dGUoImNsYXNzIik7ZWxzZXtmb3IodmFyIG49IiAiKyhlLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpKyIgIixyPSIgIit0KyIgIjtuLmluZGV4T2Yocik+PTA7KW49bi5yZXBsYWNlKHIsIiAiKTsobj1uLnRyaW0oKSk/ZS5zZXRBdHRyaWJ1dGUoImNsYXNzIixuKTplLnJlbW92ZUF0dHJpYnV0ZSgiY2xhc3MiKX19ZnVuY3Rpb24gYmkoZSl7aWYoZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBlKXt2YXIgdD17fTtyZXR1cm4hMSE9PWUuY3NzJiZBKHQsJGkoZS5uYW1lfHwidiIpKSxBKHQsZSksdH1yZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/JGkoZSk6dm9pZCAwfX12YXIgJGk9ZyhmdW5jdGlvbihlKXtyZXR1cm57ZW50ZXJDbGFzczplKyItZW50ZXIiLGVudGVyVG9DbGFzczplKyItZW50ZXItdG8iLGVudGVyQWN0aXZlQ2xhc3M6ZSsiLWVudGVyLWFjdGl2ZSIsbGVhdmVDbGFzczplKyItbGVhdmUiLGxlYXZlVG9DbGFzczplKyItbGVhdmUtdG8iLGxlYXZlQWN0aXZlQ2xhc3M6ZSsiLWxlYXZlLWFjdGl2ZSJ9fSksd2k9eiYmIVcsQ2k9InRyYW5zaXRpb24iLHhpPSJhbmltYXRpb24iLGtpPSJ0cmFuc2l0aW9uIixBaT0idHJhbnNpdGlvbmVuZCIsT2k9ImFuaW1hdGlvbiIsU2k9ImFuaW1hdGlvbmVuZCI7d2kmJih2b2lkIDA9PT13aW5kb3cub250cmFuc2l0aW9uZW5kJiZ2b2lkIDAhPT13aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kJiYoa2k9IldlYmtpdFRyYW5zaXRpb24iLEFpPSJ3ZWJraXRUcmFuc2l0aW9uRW5kIiksdm9pZCAwPT09d2luZG93Lm9uYW5pbWF0aW9uZW5kJiZ2b2lkIDAhPT13aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQmJihPaT0iV2Via2l0QW5pbWF0aW9uIixTaT0id2Via2l0QW5pbWF0aW9uRW5kIikpO3ZhciBUaT16P3dpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU/d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKHdpbmRvdyk6c2V0VGltZW91dDpmdW5jdGlvbihlKXtyZXR1cm4gZSgpfTtmdW5jdGlvbiBFaShlKXtUaShmdW5jdGlvbigpe1RpKGUpfSl9ZnVuY3Rpb24gTmkoZSx0KXt2YXIgbj1lLl90cmFuc2l0aW9uQ2xhc3Nlc3x8KGUuX3RyYW5zaXRpb25DbGFzc2VzPVtdKTtuLmluZGV4T2YodCk8MCYmKG4ucHVzaCh0KSxnaShlLHQpKX1mdW5jdGlvbiBqaShlLHQpe2UuX3RyYW5zaXRpb25DbGFzc2VzJiZoKGUuX3RyYW5zaXRpb25DbGFzc2VzLHQpLF9pKGUsdCl9ZnVuY3Rpb24gRGkoZSx0LG4pe3ZhciByPU1pKGUsdCksaT1yLnR5cGUsbz1yLnRpbWVvdXQsYT1yLnByb3BDb3VudDtpZighaSlyZXR1cm4gbigpO3ZhciBzPWk9PT1DaT9BaTpTaSxjPTAsdT1mdW5jdGlvbigpe2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihzLGwpLG4oKX0sbD1mdW5jdGlvbih0KXt0LnRhcmdldD09PWUmJisrYz49YSYmdSgpfTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YzxhJiZ1KCl9LG8rMSksZS5hZGRFdmVudExpc3RlbmVyKHMsbCl9dmFyIExpPS9cYih0cmFuc2Zvcm18YWxsKSgsfCQpLztmdW5jdGlvbiBNaShlLHQpe3ZhciBuLHI9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZSksaT0ocltraSsiRGVsYXkiXXx8IiIpLnNwbGl0KCIsICIpLG89KHJba2krIkR1cmF0aW9uIl18fCIiKS5zcGxpdCgiLCAiKSxhPUlpKGksbykscz0ocltPaSsiRGVsYXkiXXx8IiIpLnNwbGl0KCIsICIpLGM9KHJbT2krIkR1cmF0aW9uIl18fCIiKS5zcGxpdCgiLCAiKSx1PUlpKHMsYyksbD0wLGY9MDtyZXR1cm4gdD09PUNpP2E+MCYmKG49Q2ksbD1hLGY9by5sZW5ndGgpOnQ9PT14aT91PjAmJihuPXhpLGw9dSxmPWMubGVuZ3RoKTpmPShuPShsPU1hdGgubWF4KGEsdSkpPjA/YT51P0NpOnhpOm51bGwpP249PT1DaT9vLmxlbmd0aDpjLmxlbmd0aDowLHt0eXBlOm4sdGltZW91dDpsLHByb3BDb3VudDpmLGhhc1RyYW5zZm9ybTpuPT09Q2kmJkxpLnRlc3QocltraSsiUHJvcGVydHkiXSl9fWZ1bmN0aW9uIElpKGUsdCl7Zm9yKDtlLmxlbmd0aDx0Lmxlbmd0aDspZT1lLmNvbmNhdChlKTtyZXR1cm4gTWF0aC5tYXguYXBwbHkobnVsbCx0Lm1hcChmdW5jdGlvbih0LG4pe3JldHVybiBGaSh0KStGaShlW25dKX0pKX1mdW5jdGlvbiBGaShlKXtyZXR1cm4gMWUzKk51bWJlcihlLnNsaWNlKDAsLTEpLnJlcGxhY2UoIiwiLCIuIikpfWZ1bmN0aW9uIFBpKGUscil7dmFyIGk9ZS5lbG07bihpLl9sZWF2ZUNiKSYmKGkuX2xlYXZlQ2IuY2FuY2VsbGVkPSEwLGkuX2xlYXZlQ2IoKSk7dmFyIGE9YmkoZS5kYXRhLnRyYW5zaXRpb24pO2lmKCF0KGEpJiYhbihpLl9lbnRlckNiKSYmMT09PWkubm9kZVR5cGUpe2Zvcih2YXIgcz1hLmNzcyxjPWEudHlwZSx1PWEuZW50ZXJDbGFzcyxsPWEuZW50ZXJUb0NsYXNzLHA9YS5lbnRlckFjdGl2ZUNsYXNzLGQ9YS5hcHBlYXJDbGFzcyx2PWEuYXBwZWFyVG9DbGFzcyxoPWEuYXBwZWFyQWN0aXZlQ2xhc3MsbT1hLmJlZm9yZUVudGVyLHk9YS5lbnRlcixnPWEuYWZ0ZXJFbnRlcixfPWEuZW50ZXJDYW5jZWxsZWQsYj1hLmJlZm9yZUFwcGVhciwkPWEuYXBwZWFyLHc9YS5hZnRlckFwcGVhcixDPWEuYXBwZWFyQ2FuY2VsbGVkLHg9YS5kdXJhdGlvbixrPVd0LEE9V3QuJHZub2RlO0EmJkEucGFyZW50OylrPUEuY29udGV4dCxBPUEucGFyZW50O3ZhciBPPSFrLl9pc01vdW50ZWR8fCFlLmlzUm9vdEluc2VydDtpZighT3x8JHx8IiI9PT0kKXt2YXIgUz1PJiZkP2Q6dSxUPU8mJmg/aDpwLEU9TyYmdj92OmwsTj1PJiZifHxtLGo9TyYmImZ1bmN0aW9uIj09dHlwZW9mICQ/JDp5LEw9TyYmd3x8ZyxNPU8mJkN8fF8sST1mKG8oeCk/eC5lbnRlcjp4KSxGPSExIT09cyYmIVcsUD1CaShqKSxSPWkuX2VudGVyQ2I9RChmdW5jdGlvbigpe0YmJihqaShpLEUpLGppKGksVCkpLFIuY2FuY2VsbGVkPyhGJiZqaShpLFMpLE0mJk0oaSkpOkwmJkwoaSksaS5fZW50ZXJDYj1udWxsfSk7ZS5kYXRhLnNob3d8fGl0KGUsImluc2VydCIsZnVuY3Rpb24oKXt2YXIgdD1pLnBhcmVudE5vZGUsbj10JiZ0Ll9wZW5kaW5nJiZ0Ll9wZW5kaW5nW2Uua2V5XTtuJiZuLnRhZz09PWUudGFnJiZuLmVsbS5fbGVhdmVDYiYmbi5lbG0uX2xlYXZlQ2IoKSxqJiZqKGksUil9KSxOJiZOKGkpLEYmJihOaShpLFMpLE5pKGksVCksRWkoZnVuY3Rpb24oKXtqaShpLFMpLFIuY2FuY2VsbGVkfHwoTmkoaSxFKSxQfHwoSGkoSSk/c2V0VGltZW91dChSLEkpOkRpKGksYyxSKSkpfSkpLGUuZGF0YS5zaG93JiYociYmcigpLGomJmooaSxSKSksRnx8UHx8UigpfX19ZnVuY3Rpb24gUmkoZSxyKXt2YXIgaT1lLmVsbTtuKGkuX2VudGVyQ2IpJiYoaS5fZW50ZXJDYi5jYW5jZWxsZWQ9ITAsaS5fZW50ZXJDYigpKTt2YXIgYT1iaShlLmRhdGEudHJhbnNpdGlvbik7aWYodChhKXx8MSE9PWkubm9kZVR5cGUpcmV0dXJuIHIoKTtpZighbihpLl9sZWF2ZUNiKSl7dmFyIHM9YS5jc3MsYz1hLnR5cGUsdT1hLmxlYXZlQ2xhc3MsbD1hLmxlYXZlVG9DbGFzcyxwPWEubGVhdmVBY3RpdmVDbGFzcyxkPWEuYmVmb3JlTGVhdmUsdj1hLmxlYXZlLGg9YS5hZnRlckxlYXZlLG09YS5sZWF2ZUNhbmNlbGxlZCx5PWEuZGVsYXlMZWF2ZSxnPWEuZHVyYXRpb24sXz0hMSE9PXMmJiFXLGI9QmkodiksJD1mKG8oZyk/Zy5sZWF2ZTpnKSx3PWkuX2xlYXZlQ2I9RChmdW5jdGlvbigpe2kucGFyZW50Tm9kZSYmaS5wYXJlbnROb2RlLl9wZW5kaW5nJiYoaS5wYXJlbnROb2RlLl9wZW5kaW5nW2Uua2V5XT1udWxsKSxfJiYoamkoaSxsKSxqaShpLHApKSx3LmNhbmNlbGxlZD8oXyYmamkoaSx1KSxtJiZtKGkpKToocigpLGgmJmgoaSkpLGkuX2xlYXZlQ2I9bnVsbH0pO3k/eShDKTpDKCl9ZnVuY3Rpb24gQygpe3cuY2FuY2VsbGVkfHwoIWUuZGF0YS5zaG93JiZpLnBhcmVudE5vZGUmJigoaS5wYXJlbnROb2RlLl9wZW5kaW5nfHwoaS5wYXJlbnROb2RlLl9wZW5kaW5nPXt9KSlbZS5rZXldPWUpLGQmJmQoaSksXyYmKE5pKGksdSksTmkoaSxwKSxFaShmdW5jdGlvbigpe2ppKGksdSksdy5jYW5jZWxsZWR8fChOaShpLGwpLGJ8fChIaSgkKT9zZXRUaW1lb3V0KHcsJCk6RGkoaSxjLHcpKSl9KSksdiYmdihpLHcpLF98fGJ8fHcoKSl9fWZ1bmN0aW9uIEhpKGUpe3JldHVybiJudW1iZXIiPT10eXBlb2YgZSYmIWlzTmFOKGUpfWZ1bmN0aW9uIEJpKGUpe2lmKHQoZSkpcmV0dXJuITE7dmFyIHI9ZS5mbnM7cmV0dXJuIG4ocik/QmkoQXJyYXkuaXNBcnJheShyKT9yWzBdOnIpOihlLl9sZW5ndGh8fGUubGVuZ3RoKT4xfWZ1bmN0aW9uIFVpKGUsdCl7ITAhPT10LmRhdGEuc2hvdyYmUGkodCl9dmFyIHppPWZ1bmN0aW9uKGUpe3ZhciBvLGEscz17fSxjPWUubW9kdWxlcyx1PWUubm9kZU9wcztmb3Iobz0wO288cnIubGVuZ3RoOysrbylmb3Ioc1tycltvXV09W10sYT0wO2E8Yy5sZW5ndGg7KythKW4oY1thXVtycltvXV0pJiZzW3JyW29dXS5wdXNoKGNbYV1bcnJbb11dKTtmdW5jdGlvbiBsKGUpe3ZhciB0PXUucGFyZW50Tm9kZShlKTtuKHQpJiZ1LnJlbW92ZUNoaWxkKHQsZSl9ZnVuY3Rpb24gZihlLHQsaSxvLGEsYyxsKXtpZihuKGUuZWxtKSYmbihjKSYmKGU9Y1tsXT1tZShlKSksZS5pc1Jvb3RJbnNlcnQ9IWEsIWZ1bmN0aW9uKGUsdCxpLG8pe3ZhciBhPWUuZGF0YTtpZihuKGEpKXt2YXIgYz1uKGUuY29tcG9uZW50SW5zdGFuY2UpJiZhLmtlZXBBbGl2ZTtpZihuKGE9YS5ob29rKSYmbihhPWEuaW5pdCkmJmEoZSwhMSksbihlLmNvbXBvbmVudEluc3RhbmNlKSlyZXR1cm4gZChlLHQpLHYoaSxlLmVsbSxvKSxyKGMpJiZmdW5jdGlvbihlLHQscixpKXtmb3IodmFyIG8sYT1lO2EuY29tcG9uZW50SW5zdGFuY2U7KWlmKGE9YS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUsbihvPWEuZGF0YSkmJm4obz1vLnRyYW5zaXRpb24pKXtmb3Iobz0wO288cy5hY3RpdmF0ZS5sZW5ndGg7KytvKXMuYWN0aXZhdGVbb10obnIsYSk7dC5wdXNoKGEpO2JyZWFrfXYocixlLmVsbSxpKX0oZSx0LGksbyksITB9fShlLHQsaSxvKSl7dmFyIGY9ZS5kYXRhLHA9ZS5jaGlsZHJlbixtPWUudGFnO24obSk/KGUuZWxtPWUubnM/dS5jcmVhdGVFbGVtZW50TlMoZS5ucyxtKTp1LmNyZWF0ZUVsZW1lbnQobSxlKSxnKGUpLGgoZSxwLHQpLG4oZikmJnkoZSx0KSx2KGksZS5lbG0sbykpOnIoZS5pc0NvbW1lbnQpPyhlLmVsbT11LmNyZWF0ZUNvbW1lbnQoZS50ZXh0KSx2KGksZS5lbG0sbykpOihlLmVsbT11LmNyZWF0ZVRleHROb2RlKGUudGV4dCksdihpLGUuZWxtLG8pKX19ZnVuY3Rpb24gZChlLHQpe24oZS5kYXRhLnBlbmRpbmdJbnNlcnQpJiYodC5wdXNoLmFwcGx5KHQsZS5kYXRhLnBlbmRpbmdJbnNlcnQpLGUuZGF0YS5wZW5kaW5nSW5zZXJ0PW51bGwpLGUuZWxtPWUuY29tcG9uZW50SW5zdGFuY2UuJGVsLG0oZSk/KHkoZSx0KSxnKGUpKToodHIoZSksdC5wdXNoKGUpKX1mdW5jdGlvbiB2KGUsdCxyKXtuKGUpJiYobihyKT91LnBhcmVudE5vZGUocik9PT1lJiZ1Lmluc2VydEJlZm9yZShlLHQscik6dS5hcHBlbmRDaGlsZChlLHQpKX1mdW5jdGlvbiBoKGUsdCxuKXtpZihBcnJheS5pc0FycmF5KHQpKWZvcih2YXIgcj0wO3I8dC5sZW5ndGg7KytyKWYodFtyXSxuLGUuZWxtLG51bGwsITAsdCxyKTtlbHNlIGkoZS50ZXh0KSYmdS5hcHBlbmRDaGlsZChlLmVsbSx1LmNyZWF0ZVRleHROb2RlKFN0cmluZyhlLnRleHQpKSl9ZnVuY3Rpb24gbShlKXtmb3IoO2UuY29tcG9uZW50SW5zdGFuY2U7KWU9ZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7cmV0dXJuIG4oZS50YWcpfWZ1bmN0aW9uIHkoZSx0KXtmb3IodmFyIHI9MDtyPHMuY3JlYXRlLmxlbmd0aDsrK3Ipcy5jcmVhdGVbcl0obnIsZSk7bihvPWUuZGF0YS5ob29rKSYmKG4oby5jcmVhdGUpJiZvLmNyZWF0ZShucixlKSxuKG8uaW5zZXJ0KSYmdC5wdXNoKGUpKX1mdW5jdGlvbiBnKGUpe3ZhciB0O2lmKG4odD1lLmZuU2NvcGVJZCkpdS5zZXRTdHlsZVNjb3BlKGUuZWxtLHQpO2Vsc2UgZm9yKHZhciByPWU7cjspbih0PXIuY29udGV4dCkmJm4odD10LiRvcHRpb25zLl9zY29wZUlkKSYmdS5zZXRTdHlsZVNjb3BlKGUuZWxtLHQpLHI9ci5wYXJlbnQ7bih0PVd0KSYmdCE9PWUuY29udGV4dCYmdCE9PWUuZm5Db250ZXh0JiZuKHQ9dC4kb3B0aW9ucy5fc2NvcGVJZCkmJnUuc2V0U3R5bGVTY29wZShlLmVsbSx0KX1mdW5jdGlvbiBfKGUsdCxuLHIsaSxvKXtmb3IoO3I8PWk7KytyKWYobltyXSxvLGUsdCwhMSxuLHIpfWZ1bmN0aW9uIGIoZSl7dmFyIHQscixpPWUuZGF0YTtpZihuKGkpKWZvcihuKHQ9aS5ob29rKSYmbih0PXQuZGVzdHJveSkmJnQoZSksdD0wO3Q8cy5kZXN0cm95Lmxlbmd0aDsrK3Qpcy5kZXN0cm95W3RdKGUpO2lmKG4odD1lLmNoaWxkcmVuKSlmb3Iocj0wO3I8ZS5jaGlsZHJlbi5sZW5ndGg7KytyKWIoZS5jaGlsZHJlbltyXSl9ZnVuY3Rpb24gJChlLHQscil7Zm9yKDt0PD1yOysrdCl7dmFyIGk9ZVt0XTtuKGkpJiYobihpLnRhZyk/KHcoaSksYihpKSk6bChpLmVsbSkpfX1mdW5jdGlvbiB3KGUsdCl7aWYobih0KXx8bihlLmRhdGEpKXt2YXIgcixpPXMucmVtb3ZlLmxlbmd0aCsxO2ZvcihuKHQpP3QubGlzdGVuZXJzKz1pOnQ9ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKCl7MD09LS1uLmxpc3RlbmVycyYmbChlKX1yZXR1cm4gbi5saXN0ZW5lcnM9dCxufShlLmVsbSxpKSxuKHI9ZS5jb21wb25lbnRJbnN0YW5jZSkmJm4ocj1yLl92bm9kZSkmJm4oci5kYXRhKSYmdyhyLHQpLHI9MDtyPHMucmVtb3ZlLmxlbmd0aDsrK3Ipcy5yZW1vdmVbcl0oZSx0KTtuKHI9ZS5kYXRhLmhvb2spJiZuKHI9ci5yZW1vdmUpP3IoZSx0KTp0KCl9ZWxzZSBsKGUuZWxtKX1mdW5jdGlvbiBDKGUsdCxyLGkpe2Zvcih2YXIgbz1yO288aTtvKyspe3ZhciBhPXRbb107aWYobihhKSYmaXIoZSxhKSlyZXR1cm4gb319ZnVuY3Rpb24geChlLGksbyxhLGMsbCl7aWYoZSE9PWkpe24oaS5lbG0pJiZuKGEpJiYoaT1hW2NdPW1lKGkpKTt2YXIgcD1pLmVsbT1lLmVsbTtpZihyKGUuaXNBc3luY1BsYWNlaG9sZGVyKSluKGkuYXN5bmNGYWN0b3J5LnJlc29sdmVkKT9PKGUuZWxtLGksbyk6aS5pc0FzeW5jUGxhY2Vob2xkZXI9ITA7ZWxzZSBpZihyKGkuaXNTdGF0aWMpJiZyKGUuaXNTdGF0aWMpJiZpLmtleT09PWUua2V5JiYocihpLmlzQ2xvbmVkKXx8cihpLmlzT25jZSkpKWkuY29tcG9uZW50SW5zdGFuY2U9ZS5jb21wb25lbnRJbnN0YW5jZTtlbHNle3ZhciBkLHY9aS5kYXRhO24odikmJm4oZD12Lmhvb2spJiZuKGQ9ZC5wcmVwYXRjaCkmJmQoZSxpKTt2YXIgaD1lLmNoaWxkcmVuLHk9aS5jaGlsZHJlbjtpZihuKHYpJiZtKGkpKXtmb3IoZD0wO2Q8cy51cGRhdGUubGVuZ3RoOysrZClzLnVwZGF0ZVtkXShlLGkpO24oZD12Lmhvb2spJiZuKGQ9ZC51cGRhdGUpJiZkKGUsaSl9dChpLnRleHQpP24oaCkmJm4oeSk/aCE9PXkmJmZ1bmN0aW9uKGUscixpLG8sYSl7Zm9yKHZhciBzLGMsbCxwPTAsZD0wLHY9ci5sZW5ndGgtMSxoPXJbMF0sbT1yW3ZdLHk9aS5sZW5ndGgtMSxnPWlbMF0sYj1pW3ldLHc9IWE7cDw9diYmZDw9eTspdChoKT9oPXJbKytwXTp0KG0pP209clstLXZdOmlyKGgsZyk/KHgoaCxnLG8saSxkKSxoPXJbKytwXSxnPWlbKytkXSk6aXIobSxiKT8oeChtLGIsbyxpLHkpLG09clstLXZdLGI9aVstLXldKTppcihoLGIpPyh4KGgsYixvLGkseSksdyYmdS5pbnNlcnRCZWZvcmUoZSxoLmVsbSx1Lm5leHRTaWJsaW5nKG0uZWxtKSksaD1yWysrcF0sYj1pWy0teV0pOmlyKG0sZyk/KHgobSxnLG8saSxkKSx3JiZ1Lmluc2VydEJlZm9yZShlLG0uZWxtLGguZWxtKSxtPXJbLS12XSxnPWlbKytkXSk6KHQocykmJihzPW9yKHIscCx2KSksdChjPW4oZy5rZXkpP3NbZy5rZXldOkMoZyxyLHAsdikpP2YoZyxvLGUsaC5lbG0sITEsaSxkKTppcihsPXJbY10sZyk/KHgobCxnLG8saSxkKSxyW2NdPXZvaWQgMCx3JiZ1Lmluc2VydEJlZm9yZShlLGwuZWxtLGguZWxtKSk6ZihnLG8sZSxoLmVsbSwhMSxpLGQpLGc9aVsrK2RdKTtwPnY/XyhlLHQoaVt5KzFdKT9udWxsOmlbeSsxXS5lbG0saSxkLHksbyk6ZD55JiYkKHIscCx2KX0ocCxoLHksbyxsKTpuKHkpPyhuKGUudGV4dCkmJnUuc2V0VGV4dENvbnRlbnQocCwiIiksXyhwLG51bGwseSwwLHkubGVuZ3RoLTEsbykpOm4oaCk/JChoLDAsaC5sZW5ndGgtMSk6bihlLnRleHQpJiZ1LnNldFRleHRDb250ZW50KHAsIiIpOmUudGV4dCE9PWkudGV4dCYmdS5zZXRUZXh0Q29udGVudChwLGkudGV4dCksbih2KSYmbihkPXYuaG9vaykmJm4oZD1kLnBvc3RwYXRjaCkmJmQoZSxpKX19fWZ1bmN0aW9uIGsoZSx0LGkpe2lmKHIoaSkmJm4oZS5wYXJlbnQpKWUucGFyZW50LmRhdGEucGVuZGluZ0luc2VydD10O2Vsc2UgZm9yKHZhciBvPTA7bzx0Lmxlbmd0aDsrK28pdFtvXS5kYXRhLmhvb2suaW5zZXJ0KHRbb10pfXZhciBBPXAoImF0dHJzLGNsYXNzLHN0YXRpY0NsYXNzLHN0YXRpY1N0eWxlLGtleSIpO2Z1bmN0aW9uIE8oZSx0LGksbyl7dmFyIGEscz10LnRhZyxjPXQuZGF0YSx1PXQuY2hpbGRyZW47aWYobz1vfHxjJiZjLnByZSx0LmVsbT1lLHIodC5pc0NvbW1lbnQpJiZuKHQuYXN5bmNGYWN0b3J5KSlyZXR1cm4gdC5pc0FzeW5jUGxhY2Vob2xkZXI9ITAsITA7aWYobihjKSYmKG4oYT1jLmhvb2spJiZuKGE9YS5pbml0KSYmYSh0LCEwKSxuKGE9dC5jb21wb25lbnRJbnN0YW5jZSkpKXJldHVybiBkKHQsaSksITA7aWYobihzKSl7aWYobih1KSlpZihlLmhhc0NoaWxkTm9kZXMoKSlpZihuKGE9YykmJm4oYT1hLmRvbVByb3BzKSYmbihhPWEuaW5uZXJIVE1MKSl7aWYoYSE9PWUuaW5uZXJIVE1MKXJldHVybiExfWVsc2V7Zm9yKHZhciBsPSEwLGY9ZS5maXJzdENoaWxkLHA9MDtwPHUubGVuZ3RoO3ArKyl7aWYoIWZ8fCFPKGYsdVtwXSxpLG8pKXtsPSExO2JyZWFrfWY9Zi5uZXh0U2libGluZ31pZighbHx8ZilyZXR1cm4hMX1lbHNlIGgodCx1LGkpO2lmKG4oYykpe3ZhciB2PSExO2Zvcih2YXIgbSBpbiBjKWlmKCFBKG0pKXt2PSEwLHkodCxpKTticmVha30hdiYmYy5jbGFzcyYmZXQoYy5jbGFzcyl9fWVsc2UgZS5kYXRhIT09dC50ZXh0JiYoZS5kYXRhPXQudGV4dCk7cmV0dXJuITB9cmV0dXJuIGZ1bmN0aW9uKGUsaSxvLGEpe2lmKCF0KGkpKXt2YXIgYyxsPSExLHA9W107aWYodChlKSlsPSEwLGYoaSxwKTtlbHNle3ZhciBkPW4oZS5ub2RlVHlwZSk7aWYoIWQmJmlyKGUsaSkpeChlLGkscCxudWxsLG51bGwsYSk7ZWxzZXtpZihkKXtpZigxPT09ZS5ub2RlVHlwZSYmZS5oYXNBdHRyaWJ1dGUoTCkmJihlLnJlbW92ZUF0dHJpYnV0ZShMKSxvPSEwKSxyKG8pJiZPKGUsaSxwKSlyZXR1cm4gayhpLHAsITApLGU7Yz1lLGU9bmV3IHBlKHUudGFnTmFtZShjKS50b0xvd2VyQ2FzZSgpLHt9LFtdLHZvaWQgMCxjKX12YXIgdj1lLmVsbSxoPXUucGFyZW50Tm9kZSh2KTtpZihmKGkscCx2Ll9sZWF2ZUNiP251bGw6aCx1Lm5leHRTaWJsaW5nKHYpKSxuKGkucGFyZW50KSlmb3IodmFyIHk9aS5wYXJlbnQsZz1tKGkpO3k7KXtmb3IodmFyIF89MDtfPHMuZGVzdHJveS5sZW5ndGg7KytfKXMuZGVzdHJveVtfXSh5KTtpZih5LmVsbT1pLmVsbSxnKXtmb3IodmFyIHc9MDt3PHMuY3JlYXRlLmxlbmd0aDsrK3cpcy5jcmVhdGVbd10obnIseSk7dmFyIEM9eS5kYXRhLmhvb2suaW5zZXJ0O2lmKEMubWVyZ2VkKWZvcih2YXIgQT0xO0E8Qy5mbnMubGVuZ3RoO0ErKylDLmZuc1tBXSgpfWVsc2UgdHIoeSk7eT15LnBhcmVudH1uKGgpPyQoW2VdLDAsMCk6bihlLnRhZykmJmIoZSl9fXJldHVybiBrKGkscCxsKSxpLmVsbX1uKGUpJiZiKGUpfX0oe25vZGVPcHM6UW4sbW9kdWxlczpbbXIseHIsbmksb2ksbWksej97Y3JlYXRlOlVpLGFjdGl2YXRlOlVpLHJlbW92ZTpmdW5jdGlvbihlLHQpeyEwIT09ZS5kYXRhLnNob3c/UmkoZSx0KTp0KCl9fTp7fV0uY29uY2F0KHByKX0pO1cmJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5hY3RpdmVFbGVtZW50O2UmJmUudm1vZGVsJiZYaShlLCJpbnB1dCIpfSk7dmFyIFZpPXtpbnNlcnRlZDpmdW5jdGlvbihlLHQsbixyKXsic2VsZWN0Ij09PW4udGFnPyhyLmVsbSYmIXIuZWxtLl92T3B0aW9ucz9pdChuLCJwb3N0cGF0Y2giLGZ1bmN0aW9uKCl7VmkuY29tcG9uZW50VXBkYXRlZChlLHQsbil9KTpLaShlLHQsbi5jb250ZXh0KSxlLl92T3B0aW9ucz1bXS5tYXAuY2FsbChlLm9wdGlvbnMsV2kpKTooInRleHRhcmVhIj09PW4udGFnfHxYbihlLnR5cGUpKSYmKGUuX3ZNb2RpZmllcnM9dC5tb2RpZmllcnMsdC5tb2RpZmllcnMubGF6eXx8KGUuYWRkRXZlbnRMaXN0ZW5lcigiY29tcG9zaXRpb25zdGFydCIsWmkpLGUuYWRkRXZlbnRMaXN0ZW5lcigiY29tcG9zaXRpb25lbmQiLEdpKSxlLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsR2kpLFcmJihlLnZtb2RlbD0hMCkpKX0sY29tcG9uZW50VXBkYXRlZDpmdW5jdGlvbihlLHQsbil7aWYoInNlbGVjdCI9PT1uLnRhZyl7S2koZSx0LG4uY29udGV4dCk7dmFyIHI9ZS5fdk9wdGlvbnMsaT1lLl92T3B0aW9ucz1bXS5tYXAuY2FsbChlLm9wdGlvbnMsV2kpO2lmKGkuc29tZShmdW5jdGlvbihlLHQpe3JldHVybiFOKGUsclt0XSl9KSkoZS5tdWx0aXBsZT90LnZhbHVlLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuIHFpKGUsaSl9KTp0LnZhbHVlIT09dC5vbGRWYWx1ZSYmcWkodC52YWx1ZSxpKSkmJlhpKGUsImNoYW5nZSIpfX19O2Z1bmN0aW9uIEtpKGUsdCxuKXtKaShlLHQsbiksKHF8fFopJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7SmkoZSx0LG4pfSwwKX1mdW5jdGlvbiBKaShlLHQsbil7dmFyIHI9dC52YWx1ZSxpPWUubXVsdGlwbGU7aWYoIWl8fEFycmF5LmlzQXJyYXkocikpe2Zvcih2YXIgbyxhLHM9MCxjPWUub3B0aW9ucy5sZW5ndGg7czxjO3MrKylpZihhPWUub3B0aW9uc1tzXSxpKW89aihyLFdpKGEpKT4tMSxhLnNlbGVjdGVkIT09byYmKGEuc2VsZWN0ZWQ9byk7ZWxzZSBpZihOKFdpKGEpLHIpKXJldHVybiB2b2lkKGUuc2VsZWN0ZWRJbmRleCE9PXMmJihlLnNlbGVjdGVkSW5kZXg9cykpO2l8fChlLnNlbGVjdGVkSW5kZXg9LTEpfX1mdW5jdGlvbiBxaShlLHQpe3JldHVybiB0LmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVybiFOKHQsZSl9KX1mdW5jdGlvbiBXaShlKXtyZXR1cm4iX3ZhbHVlImluIGU/ZS5fdmFsdWU6ZS52YWx1ZX1mdW5jdGlvbiBaaShlKXtlLnRhcmdldC5jb21wb3Npbmc9ITB9ZnVuY3Rpb24gR2koZSl7ZS50YXJnZXQuY29tcG9zaW5nJiYoZS50YXJnZXQuY29tcG9zaW5nPSExLFhpKGUudGFyZ2V0LCJpbnB1dCIpKX1mdW5jdGlvbiBYaShlLHQpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7bi5pbml0RXZlbnQodCwhMCwhMCksZS5kaXNwYXRjaEV2ZW50KG4pfWZ1bmN0aW9uIFlpKGUpe3JldHVybiFlLmNvbXBvbmVudEluc3RhbmNlfHxlLmRhdGEmJmUuZGF0YS50cmFuc2l0aW9uP2U6WWkoZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpfXZhciBRaT17bW9kZWw6Vmksc2hvdzp7YmluZDpmdW5jdGlvbihlLHQsbil7dmFyIHI9dC52YWx1ZSxpPShuPVlpKG4pKS5kYXRhJiZuLmRhdGEudHJhbnNpdGlvbixvPWUuX192T3JpZ2luYWxEaXNwbGF5PSJub25lIj09PWUuc3R5bGUuZGlzcGxheT8iIjplLnN0eWxlLmRpc3BsYXk7ciYmaT8obi5kYXRhLnNob3c9ITAsUGkobixmdW5jdGlvbigpe2Uuc3R5bGUuZGlzcGxheT1vfSkpOmUuc3R5bGUuZGlzcGxheT1yP286Im5vbmUifSx1cGRhdGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQudmFsdWU7IXIhPSF0Lm9sZFZhbHVlJiYoKG49WWkobikpLmRhdGEmJm4uZGF0YS50cmFuc2l0aW9uPyhuLmRhdGEuc2hvdz0hMCxyP1BpKG4sZnVuY3Rpb24oKXtlLnN0eWxlLmRpc3BsYXk9ZS5fX3ZPcmlnaW5hbERpc3BsYXl9KTpSaShuLGZ1bmN0aW9uKCl7ZS5zdHlsZS5kaXNwbGF5PSJub25lIn0pKTplLnN0eWxlLmRpc3BsYXk9cj9lLl9fdk9yaWdpbmFsRGlzcGxheToibm9uZSIpfSx1bmJpbmQ6ZnVuY3Rpb24oZSx0LG4scixpKXtpfHwoZS5zdHlsZS5kaXNwbGF5PWUuX192T3JpZ2luYWxEaXNwbGF5KX19fSxlbz17bmFtZTpTdHJpbmcsYXBwZWFyOkJvb2xlYW4sY3NzOkJvb2xlYW4sbW9kZTpTdHJpbmcsdHlwZTpTdHJpbmcsZW50ZXJDbGFzczpTdHJpbmcsbGVhdmVDbGFzczpTdHJpbmcsZW50ZXJUb0NsYXNzOlN0cmluZyxsZWF2ZVRvQ2xhc3M6U3RyaW5nLGVudGVyQWN0aXZlQ2xhc3M6U3RyaW5nLGxlYXZlQWN0aXZlQ2xhc3M6U3RyaW5nLGFwcGVhckNsYXNzOlN0cmluZyxhcHBlYXJBY3RpdmVDbGFzczpTdHJpbmcsYXBwZWFyVG9DbGFzczpTdHJpbmcsZHVyYXRpb246W051bWJlcixTdHJpbmcsT2JqZWN0XX07ZnVuY3Rpb24gdG8oZSl7dmFyIHQ9ZSYmZS5jb21wb25lbnRPcHRpb25zO3JldHVybiB0JiZ0LkN0b3Iub3B0aW9ucy5hYnN0cmFjdD90byh6dCh0LmNoaWxkcmVuKSk6ZX1mdW5jdGlvbiBubyhlKXt2YXIgdD17fSxuPWUuJG9wdGlvbnM7Zm9yKHZhciByIGluIG4ucHJvcHNEYXRhKXRbcl09ZVtyXTt2YXIgaT1uLl9wYXJlbnRMaXN0ZW5lcnM7Zm9yKHZhciBvIGluIGkpdFtiKG8pXT1pW29dO3JldHVybiB0fWZ1bmN0aW9uIHJvKGUsdCl7aWYoL1xkLWtlZXAtYWxpdmUkLy50ZXN0KHQudGFnKSlyZXR1cm4gZSgia2VlcC1hbGl2ZSIse3Byb3BzOnQuY29tcG9uZW50T3B0aW9ucy5wcm9wc0RhdGF9KX12YXIgaW89ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGFnfHxVdChlKX0sb289ZnVuY3Rpb24oZSl7cmV0dXJuInNob3ciPT09ZS5uYW1lfSxhbz17bmFtZToidHJhbnNpdGlvbiIscHJvcHM6ZW8sYWJzdHJhY3Q6ITAscmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10aGlzLiRzbG90cy5kZWZhdWx0O2lmKG4mJihuPW4uZmlsdGVyKGlvKSkubGVuZ3RoKXt2YXIgcj10aGlzLm1vZGUsbz1uWzBdO2lmKGZ1bmN0aW9uKGUpe2Zvcig7ZT1lLnBhcmVudDspaWYoZS5kYXRhLnRyYW5zaXRpb24pcmV0dXJuITB9KHRoaXMuJHZub2RlKSlyZXR1cm4gbzt2YXIgYT10byhvKTtpZighYSlyZXR1cm4gbztpZih0aGlzLl9sZWF2aW5nKXJldHVybiBybyhlLG8pO3ZhciBzPSJfX3RyYW5zaXRpb24tIit0aGlzLl91aWQrIi0iO2Eua2V5PW51bGw9PWEua2V5P2EuaXNDb21tZW50P3MrImNvbW1lbnQiOnMrYS50YWc6aShhLmtleSk/MD09PVN0cmluZyhhLmtleSkuaW5kZXhPZihzKT9hLmtleTpzK2Eua2V5OmEua2V5O3ZhciBjPShhLmRhdGF8fChhLmRhdGE9e30pKS50cmFuc2l0aW9uPW5vKHRoaXMpLHU9dGhpcy5fdm5vZGUsbD10byh1KTtpZihhLmRhdGEuZGlyZWN0aXZlcyYmYS5kYXRhLmRpcmVjdGl2ZXMuc29tZShvbykmJihhLmRhdGEuc2hvdz0hMCksbCYmbC5kYXRhJiYhZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5rZXk9PT1lLmtleSYmdC50YWc9PT1lLnRhZ30oYSxsKSYmIVV0KGwpJiYoIWwuY29tcG9uZW50SW5zdGFuY2V8fCFsLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZS5pc0NvbW1lbnQpKXt2YXIgZj1sLmRhdGEudHJhbnNpdGlvbj1BKHt9LGMpO2lmKCJvdXQtaW4iPT09cilyZXR1cm4gdGhpcy5fbGVhdmluZz0hMCxpdChmLCJhZnRlckxlYXZlIixmdW5jdGlvbigpe3QuX2xlYXZpbmc9ITEsdC4kZm9yY2VVcGRhdGUoKX0pLHJvKGUsbyk7aWYoImluLW91dCI9PT1yKXtpZihVdChhKSlyZXR1cm4gdTt2YXIgcCxkPWZ1bmN0aW9uKCl7cCgpfTtpdChjLCJhZnRlckVudGVyIixkKSxpdChjLCJlbnRlckNhbmNlbGxlZCIsZCksaXQoZiwiZGVsYXlMZWF2ZSIsZnVuY3Rpb24oZSl7cD1lfSl9fXJldHVybiBvfX19LHNvPUEoe3RhZzpTdHJpbmcsbW92ZUNsYXNzOlN0cmluZ30sZW8pO2Z1bmN0aW9uIGNvKGUpe2UuZWxtLl9tb3ZlQ2ImJmUuZWxtLl9tb3ZlQ2IoKSxlLmVsbS5fZW50ZXJDYiYmZS5lbG0uX2VudGVyQ2IoKX1mdW5jdGlvbiB1byhlKXtlLmRhdGEubmV3UG9zPWUuZWxtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfWZ1bmN0aW9uIGxvKGUpe3ZhciB0PWUuZGF0YS5wb3Msbj1lLmRhdGEubmV3UG9zLHI9dC5sZWZ0LW4ubGVmdCxpPXQudG9wLW4udG9wO2lmKHJ8fGkpe2UuZGF0YS5tb3ZlZD0hMDt2YXIgbz1lLmVsbS5zdHlsZTtvLnRyYW5zZm9ybT1vLldlYmtpdFRyYW5zZm9ybT0idHJhbnNsYXRlKCIrcisicHgsIitpKyJweCkiLG8udHJhbnNpdGlvbkR1cmF0aW9uPSIwcyJ9fWRlbGV0ZSBzby5tb2RlO3ZhciBmbz17VHJhbnNpdGlvbjphbyxUcmFuc2l0aW9uR3JvdXA6e3Byb3BzOnNvLGJlZm9yZU1vdW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuX3VwZGF0ZTt0aGlzLl91cGRhdGU9ZnVuY3Rpb24obixyKXt2YXIgaT1adChlKTtlLl9fcGF0Y2hfXyhlLl92bm9kZSxlLmtlcHQsITEsITApLGUuX3Zub2RlPWUua2VwdCxpKCksdC5jYWxsKGUsbixyKX19LHJlbmRlcjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy50YWd8fHRoaXMuJHZub2RlLmRhdGEudGFnfHwic3BhbiIsbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9dGhpcy5wcmV2Q2hpbGRyZW49dGhpcy5jaGlsZHJlbixpPXRoaXMuJHNsb3RzLmRlZmF1bHR8fFtdLG89dGhpcy5jaGlsZHJlbj1bXSxhPW5vKHRoaXMpLHM9MDtzPGkubGVuZ3RoO3MrKyl7dmFyIGM9aVtzXTtjLnRhZyYmbnVsbCE9Yy5rZXkmJjAhPT1TdHJpbmcoYy5rZXkpLmluZGV4T2YoIl9fdmxpc3QiKSYmKG8ucHVzaChjKSxuW2Mua2V5XT1jLChjLmRhdGF8fChjLmRhdGE9e30pKS50cmFuc2l0aW9uPWEpfWlmKHIpe2Zvcih2YXIgdT1bXSxsPVtdLGY9MDtmPHIubGVuZ3RoO2YrKyl7dmFyIHA9cltmXTtwLmRhdGEudHJhbnNpdGlvbj1hLHAuZGF0YS5wb3M9cC5lbG0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbltwLmtleV0/dS5wdXNoKHApOmwucHVzaChwKX10aGlzLmtlcHQ9ZSh0LG51bGwsdSksdGhpcy5yZW1vdmVkPWx9cmV0dXJuIGUodCxudWxsLG8pfSx1cGRhdGVkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcmV2Q2hpbGRyZW4sdD10aGlzLm1vdmVDbGFzc3x8KHRoaXMubmFtZXx8InYiKSsiLW1vdmUiO2UubGVuZ3RoJiZ0aGlzLmhhc01vdmUoZVswXS5lbG0sdCkmJihlLmZvckVhY2goY28pLGUuZm9yRWFjaCh1byksZS5mb3JFYWNoKGxvKSx0aGlzLl9yZWZsb3c9ZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQsZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUuZGF0YS5tb3ZlZCl7dmFyIG49ZS5lbG0scj1uLnN0eWxlO05pKG4sdCksci50cmFuc2Zvcm09ci5XZWJraXRUcmFuc2Zvcm09ci50cmFuc2l0aW9uRHVyYXRpb249IiIsbi5hZGRFdmVudExpc3RlbmVyKEFpLG4uX21vdmVDYj1mdW5jdGlvbiBlKHIpe3ImJnIudGFyZ2V0IT09bnx8ciYmIS90cmFuc2Zvcm0kLy50ZXN0KHIucHJvcGVydHlOYW1lKXx8KG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihBaSxlKSxuLl9tb3ZlQ2I9bnVsbCxqaShuLHQpKX0pfX0pKX0sbWV0aG9kczp7aGFzTW92ZTpmdW5jdGlvbihlLHQpe2lmKCF3aSlyZXR1cm4hMTtpZih0aGlzLl9oYXNNb3ZlKXJldHVybiB0aGlzLl9oYXNNb3ZlO3ZhciBuPWUuY2xvbmVOb2RlKCk7ZS5fdHJhbnNpdGlvbkNsYXNzZXMmJmUuX3RyYW5zaXRpb25DbGFzc2VzLmZvckVhY2goZnVuY3Rpb24oZSl7X2kobixlKX0pLGdpKG4sdCksbi5zdHlsZS5kaXNwbGF5PSJub25lIix0aGlzLiRlbC5hcHBlbmRDaGlsZChuKTt2YXIgcj1NaShuKTtyZXR1cm4gdGhpcy4kZWwucmVtb3ZlQ2hpbGQobiksdGhpcy5faGFzTW92ZT1yLmhhc1RyYW5zZm9ybX19fX07d24uY29uZmlnLm11c3RVc2VQcm9wPWpuLHduLmNvbmZpZy5pc1Jlc2VydmVkVGFnPVduLHduLmNvbmZpZy5pc1Jlc2VydmVkQXR0cj1Fbix3bi5jb25maWcuZ2V0VGFnTmFtZXNwYWNlPVpuLHduLmNvbmZpZy5pc1Vua25vd25FbGVtZW50PWZ1bmN0aW9uKGUpe2lmKCF6KXJldHVybiEwO2lmKFduKGUpKXJldHVybiExO2lmKGU9ZS50b0xvd2VyQ2FzZSgpLG51bGwhPUduW2VdKXJldHVybiBHbltlXTt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpO3JldHVybiBlLmluZGV4T2YoIi0iKT4tMT9HbltlXT10LmNvbnN0cnVjdG9yPT09d2luZG93LkhUTUxVbmtub3duRWxlbWVudHx8dC5jb25zdHJ1Y3Rvcj09PXdpbmRvdy5IVE1MRWxlbWVudDpHbltlXT0vSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KHQudG9TdHJpbmcoKSl9LEEod24ub3B0aW9ucy5kaXJlY3RpdmVzLFFpKSxBKHduLm9wdGlvbnMuY29tcG9uZW50cyxmbyksd24ucHJvdG90eXBlLl9fcGF0Y2hfXz16P3ppOlMsd24ucHJvdG90eXBlLiRtb3VudD1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihlLHQsbil7dmFyIHI7cmV0dXJuIGUuJGVsPXQsZS4kb3B0aW9ucy5yZW5kZXJ8fChlLiRvcHRpb25zLnJlbmRlcj12ZSksWXQoZSwiYmVmb3JlTW91bnQiKSxyPWZ1bmN0aW9uKCl7ZS5fdXBkYXRlKGUuX3JlbmRlcigpLG4pfSxuZXcgZm4oZSxyLFMse2JlZm9yZTpmdW5jdGlvbigpe2UuX2lzTW91bnRlZCYmIWUuX2lzRGVzdHJveWVkJiZZdChlLCJiZWZvcmVVcGRhdGUiKX19LCEwKSxuPSExLG51bGw9PWUuJHZub2RlJiYoZS5faXNNb3VudGVkPSEwLFl0KGUsIm1vdW50ZWQiKSksZX0odGhpcyxlPWUmJno/WW4oZSk6dm9pZCAwLHQpfSx6JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Ri5kZXZ0b29scyYmbmUmJm5lLmVtaXQoImluaXQiLHduKX0sMCk7dmFyIHBvPS9ce1x7KCg/Oi58XHI/XG4pKz8pXH1cfS9nLHZvPS9bLS4qKz9eJHt9KCl8W1xdXC9cXF0vZyxobz1nKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0ucmVwbGFjZSh2bywiXFwkJiIpLG49ZVsxXS5yZXBsYWNlKHZvLCJcXCQmIik7cmV0dXJuIG5ldyBSZWdFeHAodCsiKCg/Oi58XFxuKSs/KSIrbiwiZyIpfSk7dmFyIG1vPXtzdGF0aWNLZXlzOlsic3RhdGljQ2xhc3MiXSx0cmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7dC53YXJuO3ZhciBuPUZyKGUsImNsYXNzIik7biYmKGUuc3RhdGljQ2xhc3M9SlNPTi5zdHJpbmdpZnkobikpO3ZhciByPUlyKGUsImNsYXNzIiwhMSk7ciYmKGUuY2xhc3NCaW5kaW5nPXIpfSxnZW5EYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PSIiO3JldHVybiBlLnN0YXRpY0NsYXNzJiYodCs9InN0YXRpY0NsYXNzOiIrZS5zdGF0aWNDbGFzcysiLCIpLGUuY2xhc3NCaW5kaW5nJiYodCs9ImNsYXNzOiIrZS5jbGFzc0JpbmRpbmcrIiwiKSx0fX07dmFyIHlvLGdvPXtzdGF0aWNLZXlzOlsic3RhdGljU3R5bGUiXSx0cmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7dC53YXJuO3ZhciBuPUZyKGUsInN0eWxlIik7biYmKGUuc3RhdGljU3R5bGU9SlNPTi5zdHJpbmdpZnkoYWkobikpKTt2YXIgcj1JcihlLCJzdHlsZSIsITEpO3ImJihlLnN0eWxlQmluZGluZz1yKX0sZ2VuRGF0YTpmdW5jdGlvbihlKXt2YXIgdD0iIjtyZXR1cm4gZS5zdGF0aWNTdHlsZSYmKHQrPSJzdGF0aWNTdHlsZToiK2Uuc3RhdGljU3R5bGUrIiwiKSxlLnN0eWxlQmluZGluZyYmKHQrPSJzdHlsZTooIitlLnN0eWxlQmluZGluZysiKSwiKSx0fX0sX289ZnVuY3Rpb24oZSl7cmV0dXJuKHlvPXlvfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuaW5uZXJIVE1MPWUseW8udGV4dENvbnRlbnR9LGJvPXAoImFyZWEsYmFzZSxicixjb2wsZW1iZWQsZnJhbWUsaHIsaW1nLGlucHV0LGlzaW5kZXgsa2V5Z2VuLGxpbmssbWV0YSxwYXJhbSxzb3VyY2UsdHJhY2ssd2JyIiksJG89cCgiY29sZ3JvdXAsZGQsZHQsbGksb3B0aW9ucyxwLHRkLHRmb290LHRoLHRoZWFkLHRyLHNvdXJjZSIpLHdvPXAoImFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxiYXNlLGJsb2NrcXVvdGUsYm9keSxjYXB0aW9uLGNvbCxjb2xncm91cCxkZCxkZXRhaWxzLGRpYWxvZyxkaXYsZGwsZHQsZmllbGRzZXQsZmlnY2FwdGlvbixmaWd1cmUsZm9vdGVyLGZvcm0saDEsaDIsaDMsaDQsaDUsaDYsaGVhZCxoZWFkZXIsaGdyb3VwLGhyLGh0bWwsbGVnZW5kLGxpLG1lbnVpdGVtLG1ldGEsb3B0Z3JvdXAsb3B0aW9uLHBhcmFtLHJwLHJ0LHNvdXJjZSxzdHlsZSxzdW1tYXJ5LHRib2R5LHRkLHRmb290LHRoLHRoZWFkLHRpdGxlLHRyLHRyYWNrIiksQ289L15ccyooW15ccyInPD5cLz1dKykoPzpccyooPSlccyooPzoiKFteIl0qKSIrfCcoW14nXSopJyt8KFteXHMiJz08PmBdKykpKT8vLHhvPS9eXHMqKCg/OnYtW1x3LV0rOnxAfDp8IylcW1tePV0rXF1bXlxzIic8PlwvPV0qKSg/OlxzKig9KVxzKig/OiIoW14iXSopIit8JyhbXiddKiknK3woW15ccyInPTw+YF0rKSkpPy8sa289IlthLXpBLVpfXVtcXC1cXC4wLTlfYS16QS1aIitQLnNvdXJjZSsiXSoiLEFvPSIoKD86IitrbysiXFw6KT8iK2tvKyIpIixPbz1uZXcgUmVnRXhwKCJePCIrQW8pLFNvPS9eXHMqKFwvPyk+LyxUbz1uZXcgUmVnRXhwKCJePFxcLyIrQW8rIltePl0qPiIpLEVvPS9ePCFET0NUWVBFIFtePl0rPi9pLE5vPS9ePCFcLS0vLGpvPS9ePCFcWy8sRG89cCgic2NyaXB0LHN0eWxlLHRleHRhcmVhIiwhMCksTG89e30sTW89eyImbHQ7IjoiPCIsIiZndDsiOiI+IiwiJnF1b3Q7IjonIicsIiZhbXA7IjoiJiIsIiYjMTA7IjoiXG4iLCImIzk7IjoiXHQiLCImIzM5OyI6IicifSxJbz0vJig/Omx0fGd0fHF1b3R8YW1wfCMzOSk7L2csRm89LyYoPzpsdHxndHxxdW90fGFtcHwjMzl8IzEwfCM5KTsvZyxQbz1wKCJwcmUsdGV4dGFyZWEiLCEwKSxSbz1mdW5jdGlvbihlLHQpe3JldHVybiBlJiZQbyhlKSYmIlxuIj09PXRbMF19O2Z1bmN0aW9uIEhvKGUsdCl7dmFyIG49dD9GbzpJbztyZXR1cm4gZS5yZXBsYWNlKG4sZnVuY3Rpb24oZSl7cmV0dXJuIE1vW2VdfSl9dmFyIEJvLFVvLHpvLFZvLEtvLEpvLHFvLFdvLFpvPS9eQHxedi1vbjovLEdvPS9edi18XkB8Xjp8XiMvLFhvPS8oW1xzXFNdKj8pXHMrKD86aW58b2YpXHMrKFtcc1xTXSopLyxZbz0vLChbXixcfVxdXSopKD86LChbXixcfVxdXSopKT8kLyxRbz0vXlwofFwpJC9nLGVhPS9eXFsuKlxdJC8sdGE9LzooLiopJC8sbmE9L146fF5cLnxedi1iaW5kOi8scmE9L1wuW14uXF1dKyg/PVteXF1dKiQpL2csaWE9L152LXNsb3QoOnwkKXxeIy8sb2E9L1tcclxuXS8sYWE9L1xzKy9nLHNhPWcoX28pLGNhPSJfZW1wdHlfIjtmdW5jdGlvbiB1YShlLHQsbil7cmV0dXJue3R5cGU6MSx0YWc6ZSxhdHRyc0xpc3Q6dCxhdHRyc01hcDptYSh0KSxyYXdBdHRyc01hcDp7fSxwYXJlbnQ6bixjaGlsZHJlbjpbXX19ZnVuY3Rpb24gbGEoZSx0KXtCbz10Lndhcm58fFNyLEpvPXQuaXNQcmVUYWd8fFQscW89dC5tdXN0VXNlUHJvcHx8VCxXbz10LmdldFRhZ05hbWVzcGFjZXx8VDt0LmlzUmVzZXJ2ZWRUYWc7em89VHIodC5tb2R1bGVzLCJ0cmFuc2Zvcm1Ob2RlIiksVm89VHIodC5tb2R1bGVzLCJwcmVUcmFuc2Zvcm1Ob2RlIiksS289VHIodC5tb2R1bGVzLCJwb3N0VHJhbnNmb3JtTm9kZSIpLFVvPXQuZGVsaW1pdGVyczt2YXIgbixyLGk9W10sbz0hMSE9PXQucHJlc2VydmVXaGl0ZXNwYWNlLGE9dC53aGl0ZXNwYWNlLHM9ITEsYz0hMTtmdW5jdGlvbiB1KGUpe2lmKGwoZSksc3x8ZS5wcm9jZXNzZWR8fChlPWZhKGUsdCkpLGkubGVuZ3RofHxlPT09bnx8bi5pZiYmKGUuZWxzZWlmfHxlLmVsc2UpJiZkYShuLHtleHA6ZS5lbHNlaWYsYmxvY2s6ZX0pLHImJiFlLmZvcmJpZGRlbilpZihlLmVsc2VpZnx8ZS5lbHNlKWE9ZSwodT1mdW5jdGlvbihlKXt2YXIgdD1lLmxlbmd0aDtmb3IoO3QtLTspe2lmKDE9PT1lW3RdLnR5cGUpcmV0dXJuIGVbdF07ZS5wb3AoKX19KHIuY2hpbGRyZW4pKSYmdS5pZiYmZGEodSx7ZXhwOmEuZWxzZWlmLGJsb2NrOmF9KTtlbHNle2lmKGUuc2xvdFNjb3BlKXt2YXIgbz1lLnNsb3RUYXJnZXR8fCciZGVmYXVsdCInOyhyLnNjb3BlZFNsb3RzfHwoci5zY29wZWRTbG90cz17fSkpW29dPWV9ci5jaGlsZHJlbi5wdXNoKGUpLGUucGFyZW50PXJ9dmFyIGEsdTtlLmNoaWxkcmVuPWUuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFlLnNsb3RTY29wZX0pLGwoZSksZS5wcmUmJihzPSExKSxKbyhlLnRhZykmJihjPSExKTtmb3IodmFyIGY9MDtmPEtvLmxlbmd0aDtmKyspS29bZl0oZSx0KX1mdW5jdGlvbiBsKGUpe2lmKCFjKWZvcih2YXIgdDsodD1lLmNoaWxkcmVuW2UuY2hpbGRyZW4ubGVuZ3RoLTFdKSYmMz09PXQudHlwZSYmIiAiPT09dC50ZXh0OyllLmNoaWxkcmVuLnBvcCgpfXJldHVybiBmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixyLGk9W10sbz10LmV4cGVjdEhUTUwsYT10LmlzVW5hcnlUYWd8fFQscz10LmNhbkJlTGVmdE9wZW5UYWd8fFQsYz0wO2U7KXtpZihuPWUsciYmRG8ocikpe3ZhciB1PTAsbD1yLnRvTG93ZXJDYXNlKCksZj1Mb1tsXXx8KExvW2xdPW5ldyBSZWdFeHAoIihbXFxzXFxTXSo/KSg8LyIrbCsiW14+XSo+KSIsImkiKSkscD1lLnJlcGxhY2UoZixmdW5jdGlvbihlLG4scil7cmV0dXJuIHU9ci5sZW5ndGgsRG8obCl8fCJub3NjcmlwdCI9PT1sfHwobj1uLnJlcGxhY2UoLzwhXC0tKFtcc1xTXSo/KS0tPi9nLCIkMSIpLnJlcGxhY2UoLzwhXFtDREFUQVxbKFtcc1xTXSo/KV1dPi9nLCIkMSIpKSxSbyhsLG4pJiYobj1uLnNsaWNlKDEpKSx0LmNoYXJzJiZ0LmNoYXJzKG4pLCIifSk7Yys9ZS5sZW5ndGgtcC5sZW5ndGgsZT1wLEEobCxjLXUsYyl9ZWxzZXt2YXIgZD1lLmluZGV4T2YoIjwiKTtpZigwPT09ZCl7aWYoTm8udGVzdChlKSl7dmFyIHY9ZS5pbmRleE9mKCItLVx4M2UiKTtpZih2Pj0wKXt0LnNob3VsZEtlZXBDb21tZW50JiZ0LmNvbW1lbnQoZS5zdWJzdHJpbmcoNCx2KSxjLGMrdiszKSxDKHYrMyk7Y29udGludWV9fWlmKGpvLnRlc3QoZSkpe3ZhciBoPWUuaW5kZXhPZigiXT4iKTtpZihoPj0wKXtDKGgrMik7Y29udGludWV9fXZhciBtPWUubWF0Y2goRW8pO2lmKG0pe0MobVswXS5sZW5ndGgpO2NvbnRpbnVlfXZhciB5PWUubWF0Y2goVG8pO2lmKHkpe3ZhciBnPWM7Qyh5WzBdLmxlbmd0aCksQSh5WzFdLGcsYyk7Y29udGludWV9dmFyIF89eCgpO2lmKF8pe2soXyksUm8oXy50YWdOYW1lLGUpJiZDKDEpO2NvbnRpbnVlfX12YXIgYj12b2lkIDAsJD12b2lkIDAsdz12b2lkIDA7aWYoZD49MCl7Zm9yKCQ9ZS5zbGljZShkKTshKFRvLnRlc3QoJCl8fE9vLnRlc3QoJCl8fE5vLnRlc3QoJCl8fGpvLnRlc3QoJCl8fCh3PSQuaW5kZXhPZigiPCIsMSkpPDApOylkKz13LCQ9ZS5zbGljZShkKTtiPWUuc3Vic3RyaW5nKDAsZCl9ZDwwJiYoYj1lKSxiJiZDKGIubGVuZ3RoKSx0LmNoYXJzJiZiJiZ0LmNoYXJzKGIsYy1iLmxlbmd0aCxjKX1pZihlPT09bil7dC5jaGFycyYmdC5jaGFycyhlKTticmVha319ZnVuY3Rpb24gQyh0KXtjKz10LGU9ZS5zdWJzdHJpbmcodCl9ZnVuY3Rpb24geCgpe3ZhciB0PWUubWF0Y2goT28pO2lmKHQpe3ZhciBuLHIsaT17dGFnTmFtZTp0WzFdLGF0dHJzOltdLHN0YXJ0OmN9O2ZvcihDKHRbMF0ubGVuZ3RoKTshKG49ZS5tYXRjaChTbykpJiYocj1lLm1hdGNoKHhvKXx8ZS5tYXRjaChDbykpOylyLnN0YXJ0PWMsQyhyWzBdLmxlbmd0aCksci5lbmQ9YyxpLmF0dHJzLnB1c2gocik7aWYobilyZXR1cm4gaS51bmFyeVNsYXNoPW5bMV0sQyhuWzBdLmxlbmd0aCksaS5lbmQ9YyxpfX1mdW5jdGlvbiBrKGUpe3ZhciBuPWUudGFnTmFtZSxjPWUudW5hcnlTbGFzaDtvJiYoInAiPT09ciYmd28obikmJkEocikscyhuKSYmcj09PW4mJkEobikpO2Zvcih2YXIgdT1hKG4pfHwhIWMsbD1lLmF0dHJzLmxlbmd0aCxmPW5ldyBBcnJheShsKSxwPTA7cDxsO3ArKyl7dmFyIGQ9ZS5hdHRyc1twXSx2PWRbM118fGRbNF18fGRbNV18fCIiLGg9ImEiPT09biYmImhyZWYiPT09ZFsxXT90LnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZjp0LnNob3VsZERlY29kZU5ld2xpbmVzO2ZbcF09e25hbWU6ZFsxXSx2YWx1ZTpIbyh2LGgpfX11fHwoaS5wdXNoKHt0YWc6bixsb3dlckNhc2VkVGFnOm4udG9Mb3dlckNhc2UoKSxhdHRyczpmLHN0YXJ0OmUuc3RhcnQsZW5kOmUuZW5kfSkscj1uKSx0LnN0YXJ0JiZ0LnN0YXJ0KG4sZix1LGUuc3RhcnQsZS5lbmQpfWZ1bmN0aW9uIEEoZSxuLG8pe3ZhciBhLHM7aWYobnVsbD09biYmKG49YyksbnVsbD09byYmKG89YyksZSlmb3Iocz1lLnRvTG93ZXJDYXNlKCksYT1pLmxlbmd0aC0xO2E+PTAmJmlbYV0ubG93ZXJDYXNlZFRhZyE9PXM7YS0tKTtlbHNlIGE9MDtpZihhPj0wKXtmb3IodmFyIHU9aS5sZW5ndGgtMTt1Pj1hO3UtLSl0LmVuZCYmdC5lbmQoaVt1XS50YWcsbixvKTtpLmxlbmd0aD1hLHI9YSYmaVthLTFdLnRhZ31lbHNlImJyIj09PXM/dC5zdGFydCYmdC5zdGFydChlLFtdLCEwLG4sbyk6InAiPT09cyYmKHQuc3RhcnQmJnQuc3RhcnQoZSxbXSwhMSxuLG8pLHQuZW5kJiZ0LmVuZChlLG4sbykpfUEoKX0oZSx7d2FybjpCbyxleHBlY3RIVE1MOnQuZXhwZWN0SFRNTCxpc1VuYXJ5VGFnOnQuaXNVbmFyeVRhZyxjYW5CZUxlZnRPcGVuVGFnOnQuY2FuQmVMZWZ0T3BlblRhZyxzaG91bGREZWNvZGVOZXdsaW5lczp0LnNob3VsZERlY29kZU5ld2xpbmVzLHNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZjp0LnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZixzaG91bGRLZWVwQ29tbWVudDp0LmNvbW1lbnRzLG91dHB1dFNvdXJjZVJhbmdlOnQub3V0cHV0U291cmNlUmFuZ2Usc3RhcnQ6ZnVuY3Rpb24oZSxvLGEsbCxmKXt2YXIgcD1yJiZyLm5zfHxXbyhlKTtxJiYic3ZnIj09PXAmJihvPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07eWEudGVzdChyLm5hbWUpfHwoci5uYW1lPXIubmFtZS5yZXBsYWNlKGdhLCIiKSx0LnB1c2gocikpfXJldHVybiB0fShvKSk7dmFyIGQsdj11YShlLG8scik7cCYmKHYubnM9cCksInN0eWxlIiE9PShkPXYpLnRhZyYmKCJzY3JpcHQiIT09ZC50YWd8fGQuYXR0cnNNYXAudHlwZSYmInRleHQvamF2YXNjcmlwdCIhPT1kLmF0dHJzTWFwLnR5cGUpfHx0ZSgpfHwodi5mb3JiaWRkZW49ITApO2Zvcih2YXIgaD0wO2g8Vm8ubGVuZ3RoO2grKyl2PVZvW2hdKHYsdCl8fHY7c3x8KCFmdW5jdGlvbihlKXtudWxsIT1GcihlLCJ2LXByZSIpJiYoZS5wcmU9ITApfSh2KSx2LnByZSYmKHM9ITApKSxKbyh2LnRhZykmJihjPSEwKSxzP2Z1bmN0aW9uKGUpe3ZhciB0PWUuYXR0cnNMaXN0LG49dC5sZW5ndGg7aWYobilmb3IodmFyIHI9ZS5hdHRycz1uZXcgQXJyYXkobiksaT0wO2k8bjtpKyspcltpXT17bmFtZTp0W2ldLm5hbWUsdmFsdWU6SlNPTi5zdHJpbmdpZnkodFtpXS52YWx1ZSl9LG51bGwhPXRbaV0uc3RhcnQmJihyW2ldLnN0YXJ0PXRbaV0uc3RhcnQscltpXS5lbmQ9dFtpXS5lbmQpO2Vsc2UgZS5wcmV8fChlLnBsYWluPSEwKX0odik6di5wcm9jZXNzZWR8fChwYSh2KSxmdW5jdGlvbihlKXt2YXIgdD1GcihlLCJ2LWlmIik7aWYodCllLmlmPXQsZGEoZSx7ZXhwOnQsYmxvY2s6ZX0pO2Vsc2V7bnVsbCE9RnIoZSwidi1lbHNlIikmJihlLmVsc2U9ITApO3ZhciBuPUZyKGUsInYtZWxzZS1pZiIpO24mJihlLmVsc2VpZj1uKX19KHYpLGZ1bmN0aW9uKGUpe251bGwhPUZyKGUsInYtb25jZSIpJiYoZS5vbmNlPSEwKX0odikpLG58fChuPXYpLGE/dSh2KToocj12LGkucHVzaCh2KSl9LGVuZDpmdW5jdGlvbihlLHQsbil7dmFyIG89aVtpLmxlbmd0aC0xXTtpLmxlbmd0aC09MSxyPWlbaS5sZW5ndGgtMV0sdShvKX0sY2hhcnM6ZnVuY3Rpb24oZSx0LG4pe2lmKHImJighcXx8InRleHRhcmVhIiE9PXIudGFnfHxyLmF0dHJzTWFwLnBsYWNlaG9sZGVyIT09ZSkpe3ZhciBpLHUsbCxmPXIuY2hpbGRyZW47aWYoZT1jfHxlLnRyaW0oKT8ic2NyaXB0Ij09PShpPXIpLnRhZ3x8InN0eWxlIj09PWkudGFnP2U6c2EoZSk6Zi5sZW5ndGg/YT8iY29uZGVuc2UiPT09YSYmb2EudGVzdChlKT8iIjoiICI6bz8iICI6IiI6IiIpY3x8ImNvbmRlbnNlIiE9PWF8fChlPWUucmVwbGFjZShhYSwiICIpKSwhcyYmIiAiIT09ZSYmKHU9ZnVuY3Rpb24oZSx0KXt2YXIgbj10P2hvKHQpOnBvO2lmKG4udGVzdChlKSl7Zm9yKHZhciByLGksbyxhPVtdLHM9W10sYz1uLmxhc3RJbmRleD0wO3I9bi5leGVjKGUpOyl7KGk9ci5pbmRleCk+YyYmKHMucHVzaChvPWUuc2xpY2UoYyxpKSksYS5wdXNoKEpTT04uc3RyaW5naWZ5KG8pKSk7dmFyIHU9QXIoclsxXS50cmltKCkpO2EucHVzaCgiX3MoIit1KyIpIikscy5wdXNoKHsiQGJpbmRpbmciOnV9KSxjPWkrclswXS5sZW5ndGh9cmV0dXJuIGM8ZS5sZW5ndGgmJihzLnB1c2gobz1lLnNsaWNlKGMpKSxhLnB1c2goSlNPTi5zdHJpbmdpZnkobykpKSx7ZXhwcmVzc2lvbjphLmpvaW4oIisiKSx0b2tlbnM6c319fShlLFVvKSk/bD17dHlwZToyLGV4cHJlc3Npb246dS5leHByZXNzaW9uLHRva2Vuczp1LnRva2Vucyx0ZXh0OmV9OiIgIj09PWUmJmYubGVuZ3RoJiYiICI9PT1mW2YubGVuZ3RoLTFdLnRleHR8fChsPXt0eXBlOjMsdGV4dDplfSksbCYmZi5wdXNoKGwpfX0sY29tbWVudDpmdW5jdGlvbihlLHQsbil7aWYocil7dmFyIGk9e3R5cGU6Myx0ZXh0OmUsaXNDb21tZW50OiEwfTtyLmNoaWxkcmVuLnB1c2goaSl9fX0pLG59ZnVuY3Rpb24gZmEoZSx0KXt2YXIgbixyOyhyPUlyKG49ZSwia2V5IikpJiYobi5rZXk9ciksZS5wbGFpbj0hZS5rZXkmJiFlLnNjb3BlZFNsb3RzJiYhZS5hdHRyc0xpc3QubGVuZ3RoLGZ1bmN0aW9uKGUpe3ZhciB0PUlyKGUsInJlZiIpO3QmJihlLnJlZj10LGUucmVmSW5Gb3I9ZnVuY3Rpb24oZSl7dmFyIHQ9ZTtmb3IoO3Q7KXtpZih2b2lkIDAhPT10LmZvcilyZXR1cm4hMDt0PXQucGFyZW50fXJldHVybiExfShlKSl9KGUpLGZ1bmN0aW9uKGUpe3ZhciB0OyJ0ZW1wbGF0ZSI9PT1lLnRhZz8odD1GcihlLCJzY29wZSIpLGUuc2xvdFNjb3BlPXR8fEZyKGUsInNsb3Qtc2NvcGUiKSk6KHQ9RnIoZSwic2xvdC1zY29wZSIpKSYmKGUuc2xvdFNjb3BlPXQpO3ZhciBuPUlyKGUsInNsb3QiKTtuJiYoZS5zbG90VGFyZ2V0PSciIic9PT1uPyciZGVmYXVsdCInOm4sZS5zbG90VGFyZ2V0RHluYW1pYz0hKCFlLmF0dHJzTWFwWyI6c2xvdCJdJiYhZS5hdHRyc01hcFsidi1iaW5kOnNsb3QiXSksInRlbXBsYXRlIj09PWUudGFnfHxlLnNsb3RTY29wZXx8TnIoZSwic2xvdCIsbixmdW5jdGlvbihlLHQpe3JldHVybiBlLnJhd0F0dHJzTWFwWyI6Iit0XXx8ZS5yYXdBdHRyc01hcFsidi1iaW5kOiIrdF18fGUucmF3QXR0cnNNYXBbdF19KGUsInNsb3QiKSkpO2lmKCJ0ZW1wbGF0ZSI9PT1lLnRhZyl7dmFyIHI9UHIoZSxpYSk7aWYocil7dmFyIGk9dmEociksbz1pLm5hbWUsYT1pLmR5bmFtaWM7ZS5zbG90VGFyZ2V0PW8sZS5zbG90VGFyZ2V0RHluYW1pYz1hLGUuc2xvdFNjb3BlPXIudmFsdWV8fGNhfX1lbHNle3ZhciBzPVByKGUsaWEpO2lmKHMpe3ZhciBjPWUuc2NvcGVkU2xvdHN8fChlLnNjb3BlZFNsb3RzPXt9KSx1PXZhKHMpLGw9dS5uYW1lLGY9dS5keW5hbWljLHA9Y1tsXT11YSgidGVtcGxhdGUiLFtdLGUpO3Auc2xvdFRhcmdldD1sLHAuc2xvdFRhcmdldER5bmFtaWM9ZixwLmNoaWxkcmVuPWUuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGUpe2lmKCFlLnNsb3RTY29wZSlyZXR1cm4gZS5wYXJlbnQ9cCwhMH0pLHAuc2xvdFNjb3BlPXMudmFsdWV8fGNhLGUuY2hpbGRyZW49W10sZS5wbGFpbj0hMX19fShlKSxmdW5jdGlvbihlKXsic2xvdCI9PT1lLnRhZyYmKGUuc2xvdE5hbWU9SXIoZSwibmFtZSIpKX0oZSksZnVuY3Rpb24oZSl7dmFyIHQ7KHQ9SXIoZSwiaXMiKSkmJihlLmNvbXBvbmVudD10KTtudWxsIT1GcihlLCJpbmxpbmUtdGVtcGxhdGUiKSYmKGUuaW5saW5lVGVtcGxhdGU9ITApfShlKTtmb3IodmFyIGk9MDtpPHpvLmxlbmd0aDtpKyspZT16b1tpXShlLHQpfHxlO3JldHVybiBmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLGEscyxjLHU9ZS5hdHRyc0xpc3Q7Zm9yKHQ9MCxuPXUubGVuZ3RoO3Q8bjt0KyspaWYocj1pPXVbdF0ubmFtZSxvPXVbdF0udmFsdWUsR28udGVzdChyKSlpZihlLmhhc0JpbmRpbmdzPSEwLChhPWhhKHIucmVwbGFjZShHbywiIikpKSYmKHI9ci5yZXBsYWNlKHJhLCIiKSksbmEudGVzdChyKSlyPXIucmVwbGFjZShuYSwiIiksbz1BcihvKSwoYz1lYS50ZXN0KHIpKSYmKHI9ci5zbGljZSgxLC0xKSksYSYmKGEucHJvcCYmIWMmJiJpbm5lckh0bWwiPT09KHI9YihyKSkmJihyPSJpbm5lckhUTUwiKSxhLmNhbWVsJiYhYyYmKHI9YihyKSksYS5zeW5jJiYocz1CcihvLCIkZXZlbnQiKSxjP01yKGUsJyJ1cGRhdGU6IisoJytyKyIpIixzLG51bGwsITEsMCx1W3RdLCEwKTooTXIoZSwidXBkYXRlOiIrYihyKSxzLG51bGwsITEsMCx1W3RdKSxDKHIpIT09YihyKSYmTXIoZSwidXBkYXRlOiIrQyhyKSxzLG51bGwsITEsMCx1W3RdKSkpKSxhJiZhLnByb3B8fCFlLmNvbXBvbmVudCYmcW8oZS50YWcsZS5hdHRyc01hcC50eXBlLHIpP0VyKGUscixvLHVbdF0sYyk6TnIoZSxyLG8sdVt0XSxjKTtlbHNlIGlmKFpvLnRlc3Qocikpcj1yLnJlcGxhY2UoWm8sIiIpLChjPWVhLnRlc3QocikpJiYocj1yLnNsaWNlKDEsLTEpKSxNcihlLHIsbyxhLCExLDAsdVt0XSxjKTtlbHNle3ZhciBsPShyPXIucmVwbGFjZShHbywiIikpLm1hdGNoKHRhKSxmPWwmJmxbMV07Yz0hMSxmJiYocj1yLnNsaWNlKDAsLShmLmxlbmd0aCsxKSksZWEudGVzdChmKSYmKGY9Zi5zbGljZSgxLC0xKSxjPSEwKSksRHIoZSxyLGksbyxmLGMsYSx1W3RdKX1lbHNlIE5yKGUscixKU09OLnN0cmluZ2lmeShvKSx1W3RdKSwhZS5jb21wb25lbnQmJiJtdXRlZCI9PT1yJiZxbyhlLnRhZyxlLmF0dHJzTWFwLnR5cGUscikmJkVyKGUsciwidHJ1ZSIsdVt0XSl9KGUpLGV9ZnVuY3Rpb24gcGEoZSl7dmFyIHQ7aWYodD1GcihlLCJ2LWZvciIpKXt2YXIgbj1mdW5jdGlvbihlKXt2YXIgdD1lLm1hdGNoKFhvKTtpZighdClyZXR1cm47dmFyIG49e307bi5mb3I9dFsyXS50cmltKCk7dmFyIHI9dFsxXS50cmltKCkucmVwbGFjZShRbywiIiksaT1yLm1hdGNoKFlvKTtpPyhuLmFsaWFzPXIucmVwbGFjZShZbywiIikudHJpbSgpLG4uaXRlcmF0b3IxPWlbMV0udHJpbSgpLGlbMl0mJihuLml0ZXJhdG9yMj1pWzJdLnRyaW0oKSkpOm4uYWxpYXM9cjtyZXR1cm4gbn0odCk7biYmQShlLG4pfX1mdW5jdGlvbiBkYShlLHQpe2UuaWZDb25kaXRpb25zfHwoZS5pZkNvbmRpdGlvbnM9W10pLGUuaWZDb25kaXRpb25zLnB1c2godCl9ZnVuY3Rpb24gdmEoZSl7dmFyIHQ9ZS5uYW1lLnJlcGxhY2UoaWEsIiIpO3JldHVybiB0fHwiIyIhPT1lLm5hbWVbMF0mJih0PSJkZWZhdWx0IiksZWEudGVzdCh0KT97bmFtZTp0LnNsaWNlKDEsLTEpLGR5bmFtaWM6ITB9OntuYW1lOiciJyt0KyciJyxkeW5hbWljOiExfX1mdW5jdGlvbiBoYShlKXt2YXIgdD1lLm1hdGNoKHJhKTtpZih0KXt2YXIgbj17fTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKGUpe25bZS5zbGljZSgxKV09ITB9KSxufX1mdW5jdGlvbiBtYShlKXtmb3IodmFyIHQ9e30sbj0wLHI9ZS5sZW5ndGg7bjxyO24rKyl0W2Vbbl0ubmFtZV09ZVtuXS52YWx1ZTtyZXR1cm4gdH12YXIgeWE9L154bWxuczpOU1xkKy8sZ2E9L15OU1xkKzovO2Z1bmN0aW9uIF9hKGUpe3JldHVybiB1YShlLnRhZyxlLmF0dHJzTGlzdC5zbGljZSgpLGUucGFyZW50KX12YXIgYmE9W21vLGdvLHtwcmVUcmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7aWYoImlucHV0Ij09PWUudGFnKXt2YXIgbixyPWUuYXR0cnNNYXA7aWYoIXJbInYtbW9kZWwiXSlyZXR1cm47aWYoKHJbIjp0eXBlIl18fHJbInYtYmluZDp0eXBlIl0pJiYobj1JcihlLCJ0eXBlIikpLHIudHlwZXx8bnx8IXJbInYtYmluZCJdfHwobj0iKCIrclsidi1iaW5kIl0rIikudHlwZSIpLG4pe3ZhciBpPUZyKGUsInYtaWYiLCEwKSxvPWk/IiYmKCIraSsiKSI6IiIsYT1udWxsIT1GcihlLCJ2LWVsc2UiLCEwKSxzPUZyKGUsInYtZWxzZS1pZiIsITApLGM9X2EoZSk7cGEoYyksanIoYywidHlwZSIsImNoZWNrYm94IiksZmEoYyx0KSxjLnByb2Nlc3NlZD0hMCxjLmlmPSIoIituKyIpPT09J2NoZWNrYm94JyIrbyxkYShjLHtleHA6Yy5pZixibG9jazpjfSk7dmFyIHU9X2EoZSk7RnIodSwidi1mb3IiLCEwKSxqcih1LCJ0eXBlIiwicmFkaW8iKSxmYSh1LHQpLGRhKGMse2V4cDoiKCIrbisiKT09PSdyYWRpbyciK28sYmxvY2s6dX0pO3ZhciBsPV9hKGUpO3JldHVybiBGcihsLCJ2LWZvciIsITApLGpyKGwsIjp0eXBlIixuKSxmYShsLHQpLGRhKGMse2V4cDppLGJsb2NrOmx9KSxhP2MuZWxzZT0hMDpzJiYoYy5lbHNlaWY9cyksY319fX1dO3ZhciAkYSx3YSxDYT17ZXhwZWN0SFRNTDohMCxtb2R1bGVzOmJhLGRpcmVjdGl2ZXM6e21vZGVsOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10LnZhbHVlLGk9dC5tb2RpZmllcnMsbz1lLnRhZyxhPWUuYXR0cnNNYXAudHlwZTtpZihlLmNvbXBvbmVudClyZXR1cm4gSHIoZSxyLGkpLCExO2lmKCJzZWxlY3QiPT09bykhZnVuY3Rpb24oZSx0LG4pe3ZhciByPSd2YXIgJCRzZWxlY3RlZFZhbCA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCgkZXZlbnQudGFyZ2V0Lm9wdGlvbnMsZnVuY3Rpb24obyl7cmV0dXJuIG8uc2VsZWN0ZWR9KS5tYXAoZnVuY3Rpb24obyl7dmFyIHZhbCA9ICJfdmFsdWUiIGluIG8gPyBvLl92YWx1ZSA6IG8udmFsdWU7cmV0dXJuICcrKG4mJm4ubnVtYmVyPyJfbih2YWwpIjoidmFsIikrIn0pOyI7cj1yKyIgIitCcih0LCIkZXZlbnQudGFyZ2V0Lm11bHRpcGxlID8gJCRzZWxlY3RlZFZhbCA6ICQkc2VsZWN0ZWRWYWxbMF0iKSxNcihlLCJjaGFuZ2UiLHIsbnVsbCwhMCl9KGUscixpKTtlbHNlIGlmKCJpbnB1dCI9PT1vJiYiY2hlY2tib3giPT09YSkhZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4mJm4ubnVtYmVyLGk9SXIoZSwidmFsdWUiKXx8Im51bGwiLG89SXIoZSwidHJ1ZS12YWx1ZSIpfHwidHJ1ZSIsYT1JcihlLCJmYWxzZS12YWx1ZSIpfHwiZmFsc2UiO0VyKGUsImNoZWNrZWQiLCJBcnJheS5pc0FycmF5KCIrdCsiKT9faSgiK3QrIiwiK2krIik+LTEiKygidHJ1ZSI9PT1vPyI6KCIrdCsiKSI6IjpfcSgiK3QrIiwiK28rIikiKSksTXIoZSwiY2hhbmdlIiwidmFyICQkYT0iK3QrIiwkJGVsPSRldmVudC50YXJnZXQsJCRjPSQkZWwuY2hlY2tlZD8oIitvKyIpOigiK2ErIik7aWYoQXJyYXkuaXNBcnJheSgkJGEpKXt2YXIgJCR2PSIrKHI/Il9uKCIraSsiKSI6aSkrIiwkJGk9X2koJCRhLCQkdik7aWYoJCRlbC5jaGVja2VkKXskJGk8MCYmKCIrQnIodCwiJCRhLmNvbmNhdChbJCR2XSkiKSsiKX1lbHNleyQkaT4tMSYmKCIrQnIodCwiJCRhLnNsaWNlKDAsJCRpKS5jb25jYXQoJCRhLnNsaWNlKCQkaSsxKSkiKSsiKX19ZWxzZXsiK0JyKHQsIiQkYyIpKyJ9IixudWxsLCEwKX0oZSxyLGkpO2Vsc2UgaWYoImlucHV0Ij09PW8mJiJyYWRpbyI9PT1hKSFmdW5jdGlvbihlLHQsbil7dmFyIHI9biYmbi5udW1iZXIsaT1JcihlLCJ2YWx1ZSIpfHwibnVsbCI7RXIoZSwiY2hlY2tlZCIsIl9xKCIrdCsiLCIrKGk9cj8iX24oIitpKyIpIjppKSsiKSIpLE1yKGUsImNoYW5nZSIsQnIodCxpKSxudWxsLCEwKX0oZSxyLGkpO2Vsc2UgaWYoImlucHV0Ij09PW98fCJ0ZXh0YXJlYSI9PT1vKSFmdW5jdGlvbihlLHQsbil7dmFyIHI9ZS5hdHRyc01hcC50eXBlLGk9bnx8e30sbz1pLmxhenksYT1pLm51bWJlcixzPWkudHJpbSxjPSFvJiYicmFuZ2UiIT09cix1PW8/ImNoYW5nZSI6InJhbmdlIj09PXI/V3I6ImlucHV0IixsPSIkZXZlbnQudGFyZ2V0LnZhbHVlIjtzJiYobD0iJGV2ZW50LnRhcmdldC52YWx1ZS50cmltKCkiKSxhJiYobD0iX24oIitsKyIpIik7dmFyIGY9QnIodCxsKTtjJiYoZj0iaWYoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpcmV0dXJuOyIrZiksRXIoZSwidmFsdWUiLCIoIit0KyIpIiksTXIoZSx1LGYsbnVsbCwhMCksKHN8fGEpJiZNcihlLCJibHVyIiwiJGZvcmNlVXBkYXRlKCkiKX0oZSxyLGkpO2Vsc2UgaWYoIUYuaXNSZXNlcnZlZFRhZyhvKSlyZXR1cm4gSHIoZSxyLGkpLCExO3JldHVybiEwfSx0ZXh0OmZ1bmN0aW9uKGUsdCl7dC52YWx1ZSYmRXIoZSwidGV4dENvbnRlbnQiLCJfcygiK3QudmFsdWUrIikiLHQpfSxodG1sOmZ1bmN0aW9uKGUsdCl7dC52YWx1ZSYmRXIoZSwiaW5uZXJIVE1MIiwiX3MoIit0LnZhbHVlKyIpIix0KX19LGlzUHJlVGFnOmZ1bmN0aW9uKGUpe3JldHVybiJwcmUiPT09ZX0saXNVbmFyeVRhZzpibyxtdXN0VXNlUHJvcDpqbixjYW5CZUxlZnRPcGVuVGFnOiRvLGlzUmVzZXJ2ZWRUYWc6V24sZ2V0VGFnTmFtZXNwYWNlOlpuLHN0YXRpY0tleXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuY29uY2F0KHQuc3RhdGljS2V5c3x8W10pfSxbXSkuam9pbigiLCIpfShiYSl9LHhhPWcoZnVuY3Rpb24oZSl7cmV0dXJuIHAoInR5cGUsdGFnLGF0dHJzTGlzdCxhdHRyc01hcCxwbGFpbixwYXJlbnQsY2hpbGRyZW4sYXR0cnMsc3RhcnQsZW5kLHJhd0F0dHJzTWFwIisoZT8iLCIrZToiIikpfSk7ZnVuY3Rpb24ga2EoZSx0KXtlJiYoJGE9eGEodC5zdGF0aWNLZXlzfHwiIiksd2E9dC5pc1Jlc2VydmVkVGFnfHxULGZ1bmN0aW9uIGUodCl7dC5zdGF0aWM9ZnVuY3Rpb24oZSl7aWYoMj09PWUudHlwZSlyZXR1cm4hMTtpZigzPT09ZS50eXBlKXJldHVybiEwO3JldHVybiEoIWUucHJlJiYoZS5oYXNCaW5kaW5nc3x8ZS5pZnx8ZS5mb3J8fGQoZS50YWcpfHwhd2EoZS50YWcpfHxmdW5jdGlvbihlKXtmb3IoO2UucGFyZW50Oyl7aWYoInRlbXBsYXRlIiE9PShlPWUucGFyZW50KS50YWcpcmV0dXJuITE7aWYoZS5mb3IpcmV0dXJuITB9cmV0dXJuITF9KGUpfHwhT2JqZWN0LmtleXMoZSkuZXZlcnkoJGEpKSl9KHQpO2lmKDE9PT10LnR5cGUpe2lmKCF3YSh0LnRhZykmJiJzbG90IiE9PXQudGFnJiZudWxsPT10LmF0dHJzTWFwWyJpbmxpbmUtdGVtcGxhdGUiXSlyZXR1cm47Zm9yKHZhciBuPTAscj10LmNoaWxkcmVuLmxlbmd0aDtuPHI7bisrKXt2YXIgaT10LmNoaWxkcmVuW25dO2UoaSksaS5zdGF0aWN8fCh0LnN0YXRpYz0hMSl9aWYodC5pZkNvbmRpdGlvbnMpZm9yKHZhciBvPTEsYT10LmlmQ29uZGl0aW9ucy5sZW5ndGg7bzxhO28rKyl7dmFyIHM9dC5pZkNvbmRpdGlvbnNbb10uYmxvY2s7ZShzKSxzLnN0YXRpY3x8KHQuc3RhdGljPSExKX19fShlKSxmdW5jdGlvbiBlKHQsbil7aWYoMT09PXQudHlwZSl7aWYoKHQuc3RhdGljfHx0Lm9uY2UpJiYodC5zdGF0aWNJbkZvcj1uKSx0LnN0YXRpYyYmdC5jaGlsZHJlbi5sZW5ndGgmJigxIT09dC5jaGlsZHJlbi5sZW5ndGh8fDMhPT10LmNoaWxkcmVuWzBdLnR5cGUpKXJldHVybiB2b2lkKHQuc3RhdGljUm9vdD0hMCk7aWYodC5zdGF0aWNSb290PSExLHQuY2hpbGRyZW4pZm9yKHZhciByPTAsaT10LmNoaWxkcmVuLmxlbmd0aDtyPGk7cisrKWUodC5jaGlsZHJlbltyXSxufHwhIXQuZm9yKTtpZih0LmlmQ29uZGl0aW9ucylmb3IodmFyIG89MSxhPXQuaWZDb25kaXRpb25zLmxlbmd0aDtvPGE7bysrKWUodC5pZkNvbmRpdGlvbnNbb10uYmxvY2ssbil9fShlLCExKSl9dmFyIEFhPS9eKFtcdyRfXSt8XChbXildKj9cKSlccyo9PnxeZnVuY3Rpb24oPzpccytbXHckXSspP1xzKlwoLyxPYT0vXChbXildKj9cKTsqJC8sU2E9L15bQS1aYS16XyRdW1x3JF0qKD86XC5bQS1aYS16XyRdW1x3JF0qfFxbJ1teJ10qPyddfFxbIlteIl0qPyJdfFxbXGQrXXxcW1tBLVphLXpfJF1bXHckXSpdKSokLyxUYT17ZXNjOjI3LHRhYjo5LGVudGVyOjEzLHNwYWNlOjMyLHVwOjM4LGxlZnQ6MzcscmlnaHQ6MzksZG93bjo0MCxkZWxldGU6WzgsNDZdfSxFYT17ZXNjOlsiRXNjIiwiRXNjYXBlIl0sdGFiOiJUYWIiLGVudGVyOiJFbnRlciIsc3BhY2U6WyIgIiwiU3BhY2ViYXIiXSx1cDpbIlVwIiwiQXJyb3dVcCJdLGxlZnQ6WyJMZWZ0IiwiQXJyb3dMZWZ0Il0scmlnaHQ6WyJSaWdodCIsIkFycm93UmlnaHQiXSxkb3duOlsiRG93biIsIkFycm93RG93biJdLGRlbGV0ZTpbIkJhY2tzcGFjZSIsIkRlbGV0ZSIsIkRlbCJdfSxOYT1mdW5jdGlvbihlKXtyZXR1cm4iaWYoIitlKyIpcmV0dXJuIG51bGw7In0samE9e3N0b3A6IiRldmVudC5zdG9wUHJvcGFnYXRpb24oKTsiLHByZXZlbnQ6IiRldmVudC5wcmV2ZW50RGVmYXVsdCgpOyIsc2VsZjpOYSgiJGV2ZW50LnRhcmdldCAhPT0gJGV2ZW50LmN1cnJlbnRUYXJnZXQiKSxjdHJsOk5hKCIhJGV2ZW50LmN0cmxLZXkiKSxzaGlmdDpOYSgiISRldmVudC5zaGlmdEtleSIpLGFsdDpOYSgiISRldmVudC5hbHRLZXkiKSxtZXRhOk5hKCIhJGV2ZW50Lm1ldGFLZXkiKSxsZWZ0Ok5hKCInYnV0dG9uJyBpbiAkZXZlbnQgJiYgJGV2ZW50LmJ1dHRvbiAhPT0gMCIpLG1pZGRsZTpOYSgiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDEiKSxyaWdodDpOYSgiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDIiKX07ZnVuY3Rpb24gRGEoZSx0KXt2YXIgbj10PyJuYXRpdmVPbjoiOiJvbjoiLHI9IiIsaT0iIjtmb3IodmFyIG8gaW4gZSl7dmFyIGE9TGEoZVtvXSk7ZVtvXSYmZVtvXS5keW5hbWljP2krPW8rIiwiK2ErIiwiOnIrPSciJytvKyciOicrYSsiLCJ9cmV0dXJuIHI9InsiK3Iuc2xpY2UoMCwtMSkrIn0iLGk/bisiX2QoIityKyIsWyIraS5zbGljZSgwLC0xKSsiXSkiOm4rcn1mdW5jdGlvbiBMYShlKXtpZighZSlyZXR1cm4iZnVuY3Rpb24oKXt9IjtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiJbIitlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gTGEoZSl9KS5qb2luKCIsIikrIl0iO3ZhciB0PVNhLnRlc3QoZS52YWx1ZSksbj1BYS50ZXN0KGUudmFsdWUpLHI9U2EudGVzdChlLnZhbHVlLnJlcGxhY2UoT2EsIiIpKTtpZihlLm1vZGlmaWVycyl7dmFyIGk9IiIsbz0iIixhPVtdO2Zvcih2YXIgcyBpbiBlLm1vZGlmaWVycylpZihqYVtzXSlvKz1qYVtzXSxUYVtzXSYmYS5wdXNoKHMpO2Vsc2UgaWYoImV4YWN0Ij09PXMpe3ZhciBjPWUubW9kaWZpZXJzO28rPU5hKFsiY3RybCIsInNoaWZ0IiwiYWx0IiwibWV0YSJdLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hY1tlXX0pLm1hcChmdW5jdGlvbihlKXtyZXR1cm4iJGV2ZW50LiIrZSsiS2V5In0pLmpvaW4oInx8IikpfWVsc2UgYS5wdXNoKHMpO3JldHVybiBhLmxlbmd0aCYmKGkrPWZ1bmN0aW9uKGUpe3JldHVybiJpZighJGV2ZW50LnR5cGUuaW5kZXhPZigna2V5JykmJiIrZS5tYXAoTWEpLmpvaW4oIiYmIikrIilyZXR1cm4gbnVsbDsifShhKSksbyYmKGkrPW8pLCJmdW5jdGlvbigkZXZlbnQpeyIraSsodD8icmV0dXJuICIrZS52YWx1ZSsiKCRldmVudCkiOm4/InJldHVybiAoIitlLnZhbHVlKyIpKCRldmVudCkiOnI/InJldHVybiAiK2UudmFsdWU6ZS52YWx1ZSkrIn0ifXJldHVybiB0fHxuP2UudmFsdWU6ImZ1bmN0aW9uKCRldmVudCl7Iisocj8icmV0dXJuICIrZS52YWx1ZTplLnZhbHVlKSsifSJ9ZnVuY3Rpb24gTWEoZSl7dmFyIHQ9cGFyc2VJbnQoZSwxMCk7aWYodClyZXR1cm4iJGV2ZW50LmtleUNvZGUhPT0iK3Q7dmFyIG49VGFbZV0scj1FYVtlXTtyZXR1cm4iX2soJGV2ZW50LmtleUNvZGUsIitKU09OLnN0cmluZ2lmeShlKSsiLCIrSlNPTi5zdHJpbmdpZnkobikrIiwkZXZlbnQua2V5LCIrSlNPTi5zdHJpbmdpZnkocikrIikifXZhciBJYT17b246ZnVuY3Rpb24oZSx0KXtlLndyYXBMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7cmV0dXJuIl9nKCIrZSsiLCIrdC52YWx1ZSsiKSJ9fSxiaW5kOmZ1bmN0aW9uKGUsdCl7ZS53cmFwRGF0YT1mdW5jdGlvbihuKXtyZXR1cm4iX2IoIituKyIsJyIrZS50YWcrIicsIit0LnZhbHVlKyIsIisodC5tb2RpZmllcnMmJnQubW9kaWZpZXJzLnByb3A/InRydWUiOiJmYWxzZSIpKyh0Lm1vZGlmaWVycyYmdC5tb2RpZmllcnMuc3luYz8iLHRydWUiOiIiKSsiKSJ9fSxjbG9hazpTfSxGYT1mdW5jdGlvbihlKXt0aGlzLm9wdGlvbnM9ZSx0aGlzLndhcm49ZS53YXJufHxTcix0aGlzLnRyYW5zZm9ybXM9VHIoZS5tb2R1bGVzLCJ0cmFuc2Zvcm1Db2RlIiksdGhpcy5kYXRhR2VuRm5zPVRyKGUubW9kdWxlcywiZ2VuRGF0YSIpLHRoaXMuZGlyZWN0aXZlcz1BKEEoe30sSWEpLGUuZGlyZWN0aXZlcyk7dmFyIHQ9ZS5pc1Jlc2VydmVkVGFnfHxUO3RoaXMubWF5YmVDb21wb25lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuISFlLmNvbXBvbmVudHx8IXQoZS50YWcpfSx0aGlzLm9uY2VJZD0wLHRoaXMuc3RhdGljUmVuZGVyRm5zPVtdLHRoaXMucHJlPSExfTtmdW5jdGlvbiBQYShlLHQpe3ZhciBuPW5ldyBGYSh0KTtyZXR1cm57cmVuZGVyOiJ3aXRoKHRoaXMpe3JldHVybiAiKyhlP1JhKGUsbik6J19jKCJkaXYiKScpKyJ9IixzdGF0aWNSZW5kZXJGbnM6bi5zdGF0aWNSZW5kZXJGbnN9fWZ1bmN0aW9uIFJhKGUsdCl7aWYoZS5wYXJlbnQmJihlLnByZT1lLnByZXx8ZS5wYXJlbnQucHJlKSxlLnN0YXRpY1Jvb3QmJiFlLnN0YXRpY1Byb2Nlc3NlZClyZXR1cm4gSGEoZSx0KTtpZihlLm9uY2UmJiFlLm9uY2VQcm9jZXNzZWQpcmV0dXJuIEJhKGUsdCk7aWYoZS5mb3ImJiFlLmZvclByb2Nlc3NlZClyZXR1cm4gemEoZSx0KTtpZihlLmlmJiYhZS5pZlByb2Nlc3NlZClyZXR1cm4gVWEoZSx0KTtpZigidGVtcGxhdGUiIT09ZS50YWd8fGUuc2xvdFRhcmdldHx8dC5wcmUpe2lmKCJzbG90Ij09PWUudGFnKXJldHVybiBmdW5jdGlvbihlLHQpe3ZhciBuPWUuc2xvdE5hbWV8fCciZGVmYXVsdCInLHI9cWEoZSx0KSxpPSJfdCgiK24rKHI/IiwiK3I6IiIpLG89ZS5hdHRyc3x8ZS5keW5hbWljQXR0cnM/R2EoKGUuYXR0cnN8fFtdKS5jb25jYXQoZS5keW5hbWljQXR0cnN8fFtdKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6YihlLm5hbWUpLHZhbHVlOmUudmFsdWUsZHluYW1pYzplLmR5bmFtaWN9fSkpOm51bGwsYT1lLmF0dHJzTWFwWyJ2LWJpbmQiXTshbyYmIWF8fHJ8fChpKz0iLG51bGwiKTtvJiYoaSs9IiwiK28pO2EmJihpKz0obz8iIjoiLG51bGwiKSsiLCIrYSk7cmV0dXJuIGkrIikifShlLHQpO3ZhciBuO2lmKGUuY29tcG9uZW50KW49ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQuaW5saW5lVGVtcGxhdGU/bnVsbDpxYSh0LG4sITApO3JldHVybiJfYygiK2UrIiwiK1ZhKHQsbikrKHI/IiwiK3I6IiIpKyIpIn0oZS5jb21wb25lbnQsZSx0KTtlbHNle3ZhciByOyghZS5wbGFpbnx8ZS5wcmUmJnQubWF5YmVDb21wb25lbnQoZSkpJiYocj1WYShlLHQpKTt2YXIgaT1lLmlubGluZVRlbXBsYXRlP251bGw6cWEoZSx0LCEwKTtuPSJfYygnIitlLnRhZysiJyIrKHI/IiwiK3I6IiIpKyhpPyIsIitpOiIiKSsiKSJ9Zm9yKHZhciBvPTA7bzx0LnRyYW5zZm9ybXMubGVuZ3RoO28rKyluPXQudHJhbnNmb3Jtc1tvXShlLG4pO3JldHVybiBufXJldHVybiBxYShlLHQpfHwidm9pZCAwIn1mdW5jdGlvbiBIYShlLHQpe2Uuc3RhdGljUHJvY2Vzc2VkPSEwO3ZhciBuPXQucHJlO3JldHVybiBlLnByZSYmKHQucHJlPWUucHJlKSx0LnN0YXRpY1JlbmRlckZucy5wdXNoKCJ3aXRoKHRoaXMpe3JldHVybiAiK1JhKGUsdCkrIn0iKSx0LnByZT1uLCJfbSgiKyh0LnN0YXRpY1JlbmRlckZucy5sZW5ndGgtMSkrKGUuc3RhdGljSW5Gb3I/Iix0cnVlIjoiIikrIikifWZ1bmN0aW9uIEJhKGUsdCl7aWYoZS5vbmNlUHJvY2Vzc2VkPSEwLGUuaWYmJiFlLmlmUHJvY2Vzc2VkKXJldHVybiBVYShlLHQpO2lmKGUuc3RhdGljSW5Gb3Ipe2Zvcih2YXIgbj0iIixyPWUucGFyZW50O3I7KXtpZihyLmZvcil7bj1yLmtleTticmVha31yPXIucGFyZW50fXJldHVybiBuPyJfbygiK1JhKGUsdCkrIiwiK3Qub25jZUlkKysrIiwiK24rIikiOlJhKGUsdCl9cmV0dXJuIEhhKGUsdCl9ZnVuY3Rpb24gVWEoZSx0LG4scil7cmV0dXJuIGUuaWZQcm9jZXNzZWQ9ITAsZnVuY3Rpb24gZSh0LG4scixpKXtpZighdC5sZW5ndGgpcmV0dXJuIGl8fCJfZSgpIjt2YXIgbz10LnNoaWZ0KCk7cmV0dXJuIG8uZXhwPyIoIitvLmV4cCsiKT8iK2Eoby5ibG9jaykrIjoiK2UodCxuLHIsaSk6IiIrYShvLmJsb2NrKTtmdW5jdGlvbiBhKGUpe3JldHVybiByP3IoZSxuKTplLm9uY2U/QmEoZSxuKTpSYShlLG4pfX0oZS5pZkNvbmRpdGlvbnMuc2xpY2UoKSx0LG4scil9ZnVuY3Rpb24gemEoZSx0LG4scil7dmFyIGk9ZS5mb3Isbz1lLmFsaWFzLGE9ZS5pdGVyYXRvcjE/IiwiK2UuaXRlcmF0b3IxOiIiLHM9ZS5pdGVyYXRvcjI/IiwiK2UuaXRlcmF0b3IyOiIiO3JldHVybiBlLmZvclByb2Nlc3NlZD0hMCwocnx8Il9sIikrIigoIitpKyIpLGZ1bmN0aW9uKCIrbythK3MrIil7cmV0dXJuICIrKG58fFJhKShlLHQpKyJ9KSJ9ZnVuY3Rpb24gVmEoZSx0KXt2YXIgbj0ieyIscj1mdW5jdGlvbihlLHQpe3ZhciBuPWUuZGlyZWN0aXZlcztpZighbilyZXR1cm47dmFyIHIsaSxvLGEscz0iZGlyZWN0aXZlczpbIixjPSExO2ZvcihyPTAsaT1uLmxlbmd0aDtyPGk7cisrKXtvPW5bcl0sYT0hMDt2YXIgdT10LmRpcmVjdGl2ZXNbby5uYW1lXTt1JiYoYT0hIXUoZSxvLHQud2FybikpLGEmJihjPSEwLHMrPSd7bmFtZToiJytvLm5hbWUrJyIscmF3TmFtZToiJytvLnJhd05hbWUrJyInKyhvLnZhbHVlPyIsdmFsdWU6KCIrby52YWx1ZSsiKSxleHByZXNzaW9uOiIrSlNPTi5zdHJpbmdpZnkoby52YWx1ZSk6IiIpKyhvLmFyZz8iLGFyZzoiKyhvLmlzRHluYW1pY0FyZz9vLmFyZzonIicrby5hcmcrJyInKToiIikrKG8ubW9kaWZpZXJzPyIsbW9kaWZpZXJzOiIrSlNPTi5zdHJpbmdpZnkoby5tb2RpZmllcnMpOiIiKSsifSwiKX1pZihjKXJldHVybiBzLnNsaWNlKDAsLTEpKyJdIn0oZSx0KTtyJiYobis9cisiLCIpLGUua2V5JiYobis9ImtleToiK2Uua2V5KyIsIiksZS5yZWYmJihuKz0icmVmOiIrZS5yZWYrIiwiKSxlLnJlZkluRm9yJiYobis9InJlZkluRm9yOnRydWUsIiksZS5wcmUmJihuKz0icHJlOnRydWUsIiksZS5jb21wb25lbnQmJihuKz0ndGFnOiInK2UudGFnKyciLCcpO2Zvcih2YXIgaT0wO2k8dC5kYXRhR2VuRm5zLmxlbmd0aDtpKyspbis9dC5kYXRhR2VuRm5zW2ldKGUpO2lmKGUuYXR0cnMmJihuKz0iYXR0cnM6IitHYShlLmF0dHJzKSsiLCIpLGUucHJvcHMmJihuKz0iZG9tUHJvcHM6IitHYShlLnByb3BzKSsiLCIpLGUuZXZlbnRzJiYobis9RGEoZS5ldmVudHMsITEpKyIsIiksZS5uYXRpdmVFdmVudHMmJihuKz1EYShlLm5hdGl2ZUV2ZW50cywhMCkrIiwiKSxlLnNsb3RUYXJnZXQmJiFlLnNsb3RTY29wZSYmKG4rPSJzbG90OiIrZS5zbG90VGFyZ2V0KyIsIiksZS5zY29wZWRTbG90cyYmKG4rPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1lLmZvcnx8T2JqZWN0LmtleXModCkuc29tZShmdW5jdGlvbihlKXt2YXIgbj10W2VdO3JldHVybiBuLnNsb3RUYXJnZXREeW5hbWljfHxuLmlmfHxuLmZvcnx8S2Eobil9KSxpPSEhZS5pZjtpZighcilmb3IodmFyIG89ZS5wYXJlbnQ7bzspe2lmKG8uc2xvdFNjb3BlJiZvLnNsb3RTY29wZSE9PWNhfHxvLmZvcil7cj0hMDticmVha31vLmlmJiYoaT0hMCksbz1vLnBhcmVudH12YXIgYT1PYmplY3Qua2V5cyh0KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIEphKHRbZV0sbil9KS5qb2luKCIsIik7cmV0dXJuInNjb3BlZFNsb3RzOl91KFsiK2ErIl0iKyhyPyIsbnVsbCx0cnVlIjoiIikrKCFyJiZpPyIsbnVsbCxmYWxzZSwiK2Z1bmN0aW9uKGUpe3ZhciB0PTUzODEsbj1lLmxlbmd0aDtmb3IoO247KXQ9MzMqdF5lLmNoYXJDb2RlQXQoLS1uKTtyZXR1cm4gdD4+PjB9KGEpOiIiKSsiKSJ9KGUsZS5zY29wZWRTbG90cyx0KSsiLCIpLGUubW9kZWwmJihuKz0ibW9kZWw6e3ZhbHVlOiIrZS5tb2RlbC52YWx1ZSsiLGNhbGxiYWNrOiIrZS5tb2RlbC5jYWxsYmFjaysiLGV4cHJlc3Npb246IitlLm1vZGVsLmV4cHJlc3Npb24rIn0sIiksZS5pbmxpbmVUZW1wbGF0ZSl7dmFyIG89ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmNoaWxkcmVuWzBdO2lmKG4mJjE9PT1uLnR5cGUpe3ZhciByPVBhKG4sdC5vcHRpb25zKTtyZXR1cm4iaW5saW5lVGVtcGxhdGU6e3JlbmRlcjpmdW5jdGlvbigpeyIrci5yZW5kZXIrIn0sc3RhdGljUmVuZGVyRm5zOlsiK3Iuc3RhdGljUmVuZGVyRm5zLm1hcChmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24oKXsiK2UrIn0ifSkuam9pbigiLCIpKyJdfSJ9fShlLHQpO28mJihuKz1vKyIsIil9cmV0dXJuIG49bi5yZXBsYWNlKC8sJC8sIiIpKyJ9IixlLmR5bmFtaWNBdHRycyYmKG49Il9iKCIrbisnLCInK2UudGFnKyciLCcrR2EoZS5keW5hbWljQXR0cnMpKyIpIiksZS53cmFwRGF0YSYmKG49ZS53cmFwRGF0YShuKSksZS53cmFwTGlzdGVuZXJzJiYobj1lLndyYXBMaXN0ZW5lcnMobikpLG59ZnVuY3Rpb24gS2EoZSl7cmV0dXJuIDE9PT1lLnR5cGUmJigic2xvdCI9PT1lLnRhZ3x8ZS5jaGlsZHJlbi5zb21lKEthKSl9ZnVuY3Rpb24gSmEoZSx0KXt2YXIgbj1lLmF0dHJzTWFwWyJzbG90LXNjb3BlIl07aWYoZS5pZiYmIWUuaWZQcm9jZXNzZWQmJiFuKXJldHVybiBVYShlLHQsSmEsIm51bGwiKTtpZihlLmZvciYmIWUuZm9yUHJvY2Vzc2VkKXJldHVybiB6YShlLHQsSmEpO3ZhciByPWUuc2xvdFNjb3BlPT09Y2E/IiI6U3RyaW5nKGUuc2xvdFNjb3BlKSxpPSJmdW5jdGlvbigiK3IrIil7cmV0dXJuICIrKCJ0ZW1wbGF0ZSI9PT1lLnRhZz9lLmlmJiZuPyIoIitlLmlmKyIpPyIrKHFhKGUsdCl8fCJ1bmRlZmluZWQiKSsiOnVuZGVmaW5lZCI6cWEoZSx0KXx8InVuZGVmaW5lZCI6UmEoZSx0KSkrIn0iLG89cj8iIjoiLHByb3h5OnRydWUiO3JldHVybiJ7a2V5OiIrKGUuc2xvdFRhcmdldHx8JyJkZWZhdWx0IicpKyIsZm46IitpK28rIn0ifWZ1bmN0aW9uIHFhKGUsdCxuLHIsaSl7dmFyIG89ZS5jaGlsZHJlbjtpZihvLmxlbmd0aCl7dmFyIGE9b1swXTtpZigxPT09by5sZW5ndGgmJmEuZm9yJiYidGVtcGxhdGUiIT09YS50YWcmJiJzbG90IiE9PWEudGFnKXt2YXIgcz1uP3QubWF5YmVDb21wb25lbnQoYSk/IiwxIjoiLDAiOiIiO3JldHVybiIiKyhyfHxSYSkoYSx0KStzfXZhciBjPW4/ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MCxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBpPWVbcl07aWYoMT09PWkudHlwZSl7aWYoV2EoaSl8fGkuaWZDb25kaXRpb25zJiZpLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiBXYShlLmJsb2NrKX0pKXtuPTI7YnJlYWt9KHQoaSl8fGkuaWZDb25kaXRpb25zJiZpLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiB0KGUuYmxvY2spfSkpJiYobj0xKX19cmV0dXJuIG59KG8sdC5tYXliZUNvbXBvbmVudCk6MCx1PWl8fFphO3JldHVybiJbIitvLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdShlLHQpfSkuam9pbigiLCIpKyJdIisoYz8iLCIrYzoiIil9fWZ1bmN0aW9uIFdhKGUpe3JldHVybiB2b2lkIDAhPT1lLmZvcnx8InRlbXBsYXRlIj09PWUudGFnfHwic2xvdCI9PT1lLnRhZ31mdW5jdGlvbiBaYShlLHQpe3JldHVybiAxPT09ZS50eXBlP1JhKGUsdCk6Mz09PWUudHlwZSYmZS5pc0NvbW1lbnQ/KHI9ZSwiX2UoIitKU09OLnN0cmluZ2lmeShyLnRleHQpKyIpIik6Il92KCIrKDI9PT0obj1lKS50eXBlP24uZXhwcmVzc2lvbjpYYShKU09OLnN0cmluZ2lmeShuLnRleHQpKSkrIikiO3ZhciBuLHJ9ZnVuY3Rpb24gR2EoZSl7Zm9yKHZhciB0PSIiLG49IiIscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgaT1lW3JdLG89WGEoaS52YWx1ZSk7aS5keW5hbWljP24rPWkubmFtZSsiLCIrbysiLCI6dCs9JyInK2kubmFtZSsnIjonK28rIiwifXJldHVybiB0PSJ7Iit0LnNsaWNlKDAsLTEpKyJ9IixuPyJfZCgiK3QrIixbIituLnNsaWNlKDAsLTEpKyJdKSI6dH1mdW5jdGlvbiBYYShlKXtyZXR1cm4gZS5yZXBsYWNlKC9cdTIwMjgvZywiXFx1MjAyOCIpLnJlcGxhY2UoL1x1MjAyOS9nLCJcXHUyMDI5Iil9bmV3IFJlZ0V4cCgiXFxiIisiZG8saWYsZm9yLGxldCxuZXcsdHJ5LHZhcixjYXNlLGVsc2Usd2l0aCxhd2FpdCxicmVhayxjYXRjaCxjbGFzcyxjb25zdCxzdXBlcix0aHJvdyx3aGlsZSx5aWVsZCxkZWxldGUsZXhwb3J0LGltcG9ydCxyZXR1cm4sc3dpdGNoLGRlZmF1bHQsZXh0ZW5kcyxmaW5hbGx5LGNvbnRpbnVlLGRlYnVnZ2VyLGZ1bmN0aW9uLGFyZ3VtZW50cyIuc3BsaXQoIiwiKS5qb2luKCJcXGJ8XFxiIikrIlxcYiIpO2Z1bmN0aW9uIFlhKGUsdCl7dHJ5e3JldHVybiBuZXcgRnVuY3Rpb24oZSl9Y2F0Y2gobil7cmV0dXJuIHQucHVzaCh7ZXJyOm4sY29kZTplfSksU319ZnVuY3Rpb24gUWEoZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZnVuY3Rpb24obixyLGkpeyhyPUEoe30scikpLndhcm47ZGVsZXRlIHIud2Fybjt2YXIgbz1yLmRlbGltaXRlcnM/U3RyaW5nKHIuZGVsaW1pdGVycykrbjpuO2lmKHRbb10pcmV0dXJuIHRbb107dmFyIGE9ZShuLHIpLHM9e30sYz1bXTtyZXR1cm4gcy5yZW5kZXI9WWEoYS5yZW5kZXIsYykscy5zdGF0aWNSZW5kZXJGbnM9YS5zdGF0aWNSZW5kZXJGbnMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBZYShlLGMpfSksdFtvXT1zfX12YXIgZXMsdHMsbnM9KGVzPWZ1bmN0aW9uKGUsdCl7dmFyIG49bGEoZS50cmltKCksdCk7ITEhPT10Lm9wdGltaXplJiZrYShuLHQpO3ZhciByPVBhKG4sdCk7cmV0dXJue2FzdDpuLHJlbmRlcjpyLnJlbmRlcixzdGF0aWNSZW5kZXJGbnM6ci5zdGF0aWNSZW5kZXJGbnN9fSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbil7dmFyIHI9T2JqZWN0LmNyZWF0ZShlKSxpPVtdLG89W107aWYobilmb3IodmFyIGEgaW4gbi5tb2R1bGVzJiYoci5tb2R1bGVzPShlLm1vZHVsZXN8fFtdKS5jb25jYXQobi5tb2R1bGVzKSksbi5kaXJlY3RpdmVzJiYoci5kaXJlY3RpdmVzPUEoT2JqZWN0LmNyZWF0ZShlLmRpcmVjdGl2ZXN8fG51bGwpLG4uZGlyZWN0aXZlcykpLG4pIm1vZHVsZXMiIT09YSYmImRpcmVjdGl2ZXMiIT09YSYmKHJbYV09blthXSk7ci53YXJuPWZ1bmN0aW9uKGUsdCxuKXsobj9vOmkpLnB1c2goZSl9O3ZhciBzPWVzKHQudHJpbSgpLHIpO3JldHVybiBzLmVycm9ycz1pLHMudGlwcz1vLHN9cmV0dXJue2NvbXBpbGU6dCxjb21waWxlVG9GdW5jdGlvbnM6UWEodCl9fSkoQ2EpLHJzPShucy5jb21waWxlLG5zLmNvbXBpbGVUb0Z1bmN0aW9ucyk7ZnVuY3Rpb24gaXMoZSl7cmV0dXJuKHRzPXRzfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuaW5uZXJIVE1MPWU/JzxhIGhyZWY9IlxuIi8+JzonPGRpdiBhPSJcbiIvPicsdHMuaW5uZXJIVE1MLmluZGV4T2YoIiYjMTA7Iik+MH12YXIgb3M9ISF6JiZpcyghMSksYXM9ISF6JiZpcyghMCksc3M9ZyhmdW5jdGlvbihlKXt2YXIgdD1ZbihlKTtyZXR1cm4gdCYmdC5pbm5lckhUTUx9KSxjcz13bi5wcm90b3R5cGUuJG1vdW50O3JldHVybiB3bi5wcm90b3R5cGUuJG1vdW50PWZ1bmN0aW9uKGUsdCl7aWYoKGU9ZSYmWW4oZSkpPT09ZG9jdW1lbnQuYm9keXx8ZT09PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudClyZXR1cm4gdGhpczt2YXIgbj10aGlzLiRvcHRpb25zO2lmKCFuLnJlbmRlcil7dmFyIHI9bi50ZW1wbGF0ZTtpZihyKWlmKCJzdHJpbmciPT10eXBlb2YgcikiIyI9PT1yLmNoYXJBdCgwKSYmKHI9c3MocikpO2Vsc2V7aWYoIXIubm9kZVR5cGUpcmV0dXJuIHRoaXM7cj1yLmlubmVySFRNTH1lbHNlIGUmJihyPWZ1bmN0aW9uKGUpe2lmKGUub3V0ZXJIVE1MKXJldHVybiBlLm91dGVySFRNTDt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gdC5hcHBlbmRDaGlsZChlLmNsb25lTm9kZSghMCkpLHQuaW5uZXJIVE1MfShlKSk7aWYocil7dmFyIGk9cnMocix7b3V0cHV0U291cmNlUmFuZ2U6ITEsc2hvdWxkRGVjb2RlTmV3bGluZXM6b3Msc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmOmFzLGRlbGltaXRlcnM6bi5kZWxpbWl0ZXJzLGNvbW1lbnRzOm4uY29tbWVudHN9LHRoaXMpLG89aS5yZW5kZXIsYT1pLnN0YXRpY1JlbmRlckZucztuLnJlbmRlcj1vLG4uc3RhdGljUmVuZGVyRm5zPWF9fXJldHVybiBjcy5jYWxsKHRoaXMsZSx0KX0sd24uY29tcGlsZT1ycyx3bn0pOw=="}]},{"name":"计时器掌控者|视频广告跳过|视频广告加速器","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":["*"],"merge_includes":true,"use_matches":[],"orig_matches":["http://*/*"],"merge_matches":true,"use_excludes":["/(^[^:\\/#\\?]*:\\/\\/([^#\\?\\/]*\\.)?www\\.sonimei\\.cn(:[0-9]{1,5})?\\/.*$)/","/(^[^:\\/#\\?]*:\\/\\/([^#\\?\\/]*\\.)?www\\.1717yun\\.com(:[0-9]{1,5})?\\/.*$)/"],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-start","orig_noframes":null}},"storage":{"data":{},"ts":1587235898621},"enabled":false,"position":5,"file_url":"https://greasyfork.org/scripts/372673-%E8%AE%A1%E6%97%B6%E5%99%A8%E6%8E%8C%E6%8E%A7%E8%80%85-%E8%A7%86%E9%A2%91%E5%B9%BF%E5%91%8A%E8%B7%B3%E8%BF%87-%E5%B9%BF%E5%91%8A%E5%8A%A0%E9%80%9F%E5%99%A8/code/%E8%AE%A1%E6%97%B6%E5%99%A8%E6%8E%8C%E6%8E%A7%E8%80%85%7C%E8%A7%86%E9%A2%91%E5%B9%BF%E5%91%8A%E8%B7%B3%E8%BF%87%7C%E5%B9%BF%E5%91%8A%E5%8A%A0%E9%80%9F%E5%99%A8.user.js","uuid":"921c6503-ff93-4a23-958f-a947e15dc326","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIOiuoeaXtuWZqOaOjOaOp+iAhXzop4bpopHlub/lkYrot7Pov4d86KeG6aKR5bm/5ZGK5Yqg6YCf5ZmoCi8vIEBuYW1lOmVuICAgICAgVGltZXJIb29rZXIKLy8gQG5hbWU6emgtQ04gICDorqHml7blmajmjozmjqfogIV86KeG6aKR5bm/5ZGK6Lez6L+HfOinhumikeW5v+WRiuWKoOmAn+WZqAovLyBAbmFtZXNwYWNlICAgIGh0dHBzOi8vZ2l0ZWUuY29tL0hHSmluZy9ldmVydGhpbmctaG9vay8KLy8gQHZlcnNpb24gICAgICAxLjAuMzkKLy8gQGRlc2NyaXB0aW9uICAgICAgIOaOp+WItue9kemhteiuoeaXtuWZqOmAn+W6pnzliqDpgJ/ot7Pov4fpobXpnaLorqHml7blub/lkYp86KeG6aKR5b+r6L+b77yI5oWi5pS+77yJfOi3s+i/h+W5v+WRinzmlK/mjIHlh6DkuY7miYDmnInnvZHpobUuCi8vIEBkZXNjcmlwdGlvbjplbiAgaXQgY2FuIGhvb2sgdGhlIHRpbWVyIHNwZWVkIHRvIGNoYW5nZS4KLy8gQGRlc2NyaXB0aW9uOnpoLUNOICDmjqfliLbnvZHpobXorqHml7blmajpgJ/luqZ85Yqg6YCf6Lez6L+H6aG16Z2i6K6h5pe25bm/5ZGKfOi3s+i/h+W5v+WRinzmlK/mjIHlh6DkuY7miYDmnInnvZHpobUuCi8vIEBpbmNsdWRlICAgICAgKgovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy8zNzI2NzItZXZlcnl0aGluZy1ob29rL2NvZGUvRXZlcnl0aGluZy1Ib29rLmpzP3ZlcnNpb249Nzg0OTcyCi8vIEBhdXRob3IgICAgICAgQ2FuZ3NoaQovLyBAbWF0Y2ggICAgICAgIGh0dHA6Ly8qLyoKLy8gQHJ1bi1hdCAgICAgICBkb2N1bWVudC1zdGFydAovLyBAZ3JhbnQgICAgICAgIG5vbmUKLy8gPT0vVXNlclNjcmlwdD09Ci8qKgogKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICogVGltZTogMjAxNy8xMS8yMCAxOToyOC4KICogQXV0aG9yOiBDYW5nc2hpCiAqIFZpZXc6IGh0dHA6Ly9wYWxlcm9jay5jbgogKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICovCndpbmRvdy5pc0RPTUxvYWRlZCA9IGZhbHNlOwp3aW5kb3cuaXNET01SZW5kZXJlZCA9IGZhbHNlOwoKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmVhZHlzdGF0ZWNoYW5nZScsIGZ1bmN0aW9uICgpIHsKICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAiaW50ZXJhY3RpdmUiIHx8IGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICJjb21wbGV0ZSIpIHsKICAgICAgICB3aW5kb3cuaXNET01Mb2FkZWQgPSB0cnVlOwogICAgfQp9KTsKCn5mdW5jdGlvbiAoZ2xvYmFsKSB7CgogICAgdmFyIHdvcmtlclVSTHMgPSBbXTsKICAgIHZhciBleHRyYUVsZW1lbnRzID0gW107CgogICAgdmFyIGhlbHBlciA9IGZ1bmN0aW9uIChlSG9va0NvbnRleHQsIHRpbWVyQ29udGV4dCwgdXRpbCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGFwcGx5VUk6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9ICcuX3RoLWNvbnRhaW5lciAuX3RoLWl0ZW17bWFyZ2luLWJvdHRvbTozcHg7cG9zaXRpb246cmVsYXRpdmU7d2lkdGg6MzBweDtoZWlnaHQ6MzBweDtjdXJzb3I6cG9pbnRlcjtvcGFjaXR5Oi4zO2JhY2tncm91bmQtY29sb3I6YXF1YW1hcmluZTtib3JkZXItcmFkaXVzOjEwMCU7dGV4dC1hbGlnbjpjZW50ZXI7bGluZS1oZWlnaHQ6MzBweDstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zNXM7LW8tdHJhbnNpdGlvbjphbGwgLjM1czt0cmFuc2l0aW9uOmFsbCAuMzVzO3JpZ2h0OjMwcHh9Ll90aC1jb250YWluZXIgLl90aC1pdGVtLl9pdGVtLXgye21hcmdpbi1sZWZ0OjE4cHg7d2lkdGg6NDBweDtoZWlnaHQ6NDBweDtsaW5lLWhlaWdodDo0MHB4fS5fdGgtY29udGFpbmVyIC5fdGgtaXRlbS5faXRlbS14LTJ7bWFyZ2luLWxlZnQ6MTdweDt3aWR0aDozOHB4O2hlaWdodDozOHB4O2xpbmUtaGVpZ2h0OjM4cHh9Ll90aC1jb250YWluZXIgLl90aC1pdGVtLl9pdGVtLXg0e3dpZHRoOjM2cHg7aGVpZ2h0OjM2cHg7bWFyZ2luLWxlZnQ6MTZweDtsaW5lLWhlaWdodDozNnB4fS5fdGgtY29udGFpbmVyIC5fdGgtaXRlbS5faXRlbS14LTR7d2lkdGg6MzJweDtoZWlnaHQ6MzJweDtsaW5lLWhlaWdodDozMnB4O21hcmdpbi1sZWZ0OjE0cHh9Ll90aC1jb250YWluZXIgLl90aC1pdGVtLl9pdGVtLXJlc2V0e3dpZHRoOjMwcHg7bGluZS1oZWlnaHQ6MzBweDtoZWlnaHQ6MzBweDttYXJnaW4tbGVmdDoxMHB4fS5fdGgtY2xpY2staG92ZXJ7cG9zaXRpb246cmVsYXRpdmU7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuNXM7LW8tdHJhbnNpdGlvbjphbGwgLjVzO3RyYW5zaXRpb246YWxsIC41cztoZWlnaHQ6NTBweDt3aWR0aDo1MHB4O2N1cnNvcjpwb2ludGVyO29wYWNpdHk6LjM7Ym9yZGVyLXJhZGl1czoxMDAlO2JhY2tncm91bmQtY29sb3I6YXF1YW1hcmluZTt0ZXh0LWFsaWduOmNlbnRlcjtsaW5lLWhlaWdodDo1MHB4O3JpZ2h0OjB9Ll90aC1jb250YWluZXI6aG92ZXJ7bGVmdDotMTBweH0uX3RoLWNvbnRhaW5lcntmb250LXNpemU6MTJweDstd2Via2l0LXRyYW5zaXRpb246YWxsIC41czstby10cmFuc2l0aW9uOmFsbCAuNXM7dHJhbnNpdGlvbjphbGwgLjVzO2xlZnQ6LTQwcHg7dG9wOjIwJTtwb3NpdGlvbjpmaXhlZDstd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3g7ei1pbmRleDoxMDAwMDA7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lfS5fdGgtY29udGFpbmVyIC5fdGgtaXRlbTpob3ZlcntvcGFjaXR5Oi44O2JhY2tncm91bmQtY29sb3I6IzVmYjQ5Mjtjb2xvcjphbGljZWJsdWV9Ll90aC1jb250YWluZXIgLl90aC1pdGVtOmFjdGl2ZXtvcGFjaXR5Oi45O2JhY2tncm91bmQtY29sb3I6IzMxNjM0Nztjb2xvcjphbGljZWJsdWV9Ll90aC1jb250YWluZXI6aG92ZXIgLl90aC1jbGljay1ob3ZlcntvcGFjaXR5Oi44fS5fdGgtY29udGFpbmVyOmhvdmVyIC5fdGgtaXRlbXtvcGFjaXR5Oi42O3JpZ2h0OjB9Ll90aC1jb250YWluZXIgLl90aC1jbGljay1ob3Zlcjpob3ZlcntvcGFjaXR5Oi44O2JhY2tncm91bmQtY29sb3I6IzVmYjQ5Mjtjb2xvcjphbGljZWJsdWV9Ll90aF9jb3Zlci1hbGwtc2hvdy10aW1lc3twb3NpdGlvbjpmaXhlZDt0b3A6MDtyaWdodDowO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7ei1pbmRleDo5OTk5OTtvcGFjaXR5OjE7Zm9udC13ZWlnaHQ6OTAwO2ZvbnQtc2l6ZTozMHB4O2NvbG9yOiM0ZjRmNGY7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLDAuMSl9Ll90aF9jb3Zlci1hbGwtc2hvdy10aW1lcy5fdGhfaGlkZGVue3otaW5kZXg6LTk5OTk5O29wYWNpdHk6MDstd2Via2l0LXRyYW5zaXRpb246MXMgYWxsOy1vLXRyYW5zaXRpb246MXMgYWxsO3RyYW5zaXRpb246MXMgYWxsfS5fdGhfY292ZXItYWxsLXNob3ctdGltZXMgLl90aF90aW1lc3t3aWR0aDozMDBweDtoZWlnaHQ6MzAwcHg7Ym9yZGVyLXJhZGl1czo1MCU7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDEyNywyNTUsMjEyLDAuNTEpO3RleHQtYWxpZ246Y2VudGVyO2xpbmUtaGVpZ2h0OjMwMHB4O3Bvc2l0aW9uOmFic29sdXRlO3RvcDo1MCU7cmlnaHQ6NTAlO21hcmdpbi10b3A6LTE1MHB4O21hcmdpbi1yaWdodDotMTUwcHg7fSc7CgogICAgICAgICAgICAgICAgLy8g5Zyo6aG16Z2i5bem6L655re75Yqg5LiA5Liq5Y2K5ZyG5L6/5LqO5L+u5pS5CiAgICAgICAgICAgICAgICB2YXIgaHRtbCA9ICc8ZGl2IGNsYXNzPSJfdGgtY29udGFpbmVyIj5cbicgKwogICAgICAgICAgICAgICAgICAgICcgICAgPGRpdiBjbGFzcz0iX3RoLWNsaWNrLWhvdmVyIiBvbmNsaWNrPSJjaGFuZ2VUaW1lKCkiPlxuJyArCiAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgeCcgKyAxIC8gdGltZXJDb250ZXh0Ll9wZXJjZW50YWdlICsgJ1xuJyArCiAgICAgICAgICAgICAgICAgICAgJyAgICA8L2Rpdj5cbicgKwogICAgICAgICAgICAgICAgICAgICcgICAgPGRpdiBjbGFzcz0iX3RoLWl0ZW0gX2l0ZW0teDIiIG9uY2xpY2s9ImNoYW5nZVRpbWUoMiwwLHRydWUpIj4mZ3Q7PC9kaXY+XG4nICsKICAgICAgICAgICAgICAgICAgICAnICAgIDxkaXYgY2xhc3M9Il90aC1pdGVtIF9pdGVtLXgtMiIgb25jbGljaz0iY2hhbmdlVGltZSgtMiwwLHRydWUpIj4mbHQ7PC9kaXY+XG4nICsKICAgICAgICAgICAgICAgICAgICAnICAgIDxkaXYgY2xhc3M9Il90aC1pdGVtIF9pdGVtLXg0IiBvbmNsaWNrPSJjaGFuZ2VUaW1lKDAsNCkiPiZndDsmZ3Q7PC9kaXY+XG4nICsKICAgICAgICAgICAgICAgICAgICAnICAgIDxkaXYgY2xhc3M9Il90aC1pdGVtIF9pdGVtLXgtNCIgb25jbGljaz0iY2hhbmdlVGltZSgwLC00KSI+Jmx0OyZsdDs8L2Rpdj5cbicgKwogICAgICAgICAgICAgICAgICAgICcgICAgPGRpdiBjbGFzcz0iX3RoLWl0ZW0gX2l0ZW0tcmVzZXQiIG9uY2xpY2s9ImNoYW5nZVRpbWUoMCwwLGZhbHNlLHRydWUpIj5PPC9kaXY+XG4nICsKICAgICAgICAgICAgICAgICAgICAnPC9kaXY+XG4nICsKICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0iX3RoX2NvdmVyLWFsbC1zaG93LXRpbWVzIF90aF9oaWRkZW4iPlxuJyArCiAgICAgICAgICAgICAgICAgICAgJyAgICA8ZGl2IGNsYXNzPSJfdGhfdGltZXMiPngnICsgMSAvIHRpbWVyQ29udGV4dC5fcGVyY2VudGFnZSArICc8L2Rpdj5cbicgKwogICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICsKICAgICAgICAgICAgICAgICAgICAnJzsKICAgICAgICAgICAgICAgIHZhciBzdHlsZW5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgICAgICAgICAgICAgc3R5bGVub2RlLnNldEF0dHJpYnV0ZSgidHlwZSIsICJ0ZXh0L2NzcyIpOwogICAgICAgICAgICAgICAgaWYgKHN0eWxlbm9kZS5zdHlsZVNoZWV0KSB7Ly8gSUUKICAgICAgICAgICAgICAgICAgICBzdHlsZW5vZGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gc3R5bGU7CiAgICAgICAgICAgICAgICB9IGVsc2Ugey8vIHczYwogICAgICAgICAgICAgICAgICAgIHZhciBjc3NUZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoc3R5bGUpOwogICAgICAgICAgICAgICAgICAgIHN0eWxlbm9kZS5hcHBlbmRDaGlsZChjc3NUZXh0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICBub2RlLmlubmVySFRNTCA9IGh0bWw7CiAgICAgICAgICAgICAgICBpZiAoIWdsb2JhbC5pc0RPTUxvYWRlZCkgewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3JlYWR5c3RhdGVjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gImludGVyYWN0aXZlIiB8fCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSAiY29tcGxldGUiKSAmJiAhZ2xvYmFsLmlzRE9NUmVuZGVyZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVub2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWwuaXNET01SZW5kZXJlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVGltZSBIb29rZXIgV29ya3MhJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZW5vZGUpOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobm9kZSk7CiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsLmlzRE9NUmVuZGVyZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUaW1lIEhvb2tlciBXb3JrcyEnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXBwbHlHbG9iYWxBY3Rpb246IGZ1bmN0aW9uICh0aW1lcikgewogICAgICAgICAgICAgICAgLy8g55WM6Z2i5Y2K5ZyG5oyJ6ZKu54K55Ye755qE5pa55rOVCiAgICAgICAgICAgICAgICB0aW1lci5jaGFuZ2VUaW1lID0gZnVuY3Rpb24gKGFudW0sIGNudW0sIGlzYSwgaXNyKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzcikgewogICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWwudGltZXIuY2hhbmdlKDEpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICghZ2xvYmFsLnRpbWVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICAgICAgICAgICAgICBpZiAoIWFudW0gJiYgIWNudW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBwcm9tcHQoIui+k+WFpeassuaUueWPmOiuoeaXtuWZqOWPmOWMluWAjeeOh++8iOW9k+WJje+8miIgKyAxIC8gdGltZXJDb250ZXh0Ll9wZXJjZW50YWdlICsgIu+8iSIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodCA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmFOKHBhcnNlRmxvYXQodCkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgi6K+36L6T5YWl5q2j56Gu55qE5pWw5a2XIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lci5jaGFuZ2VUaW1lKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlRmxvYXQodCkgPD0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuWAjeeOh+S4jeiDveWwj+S6juetieS6jjAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyLmNoYW5nZVRpbWUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAxIC8gcGFyc2VGbG9hdCh0KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNhICYmIGFudW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgxIC8gdGltZXJDb250ZXh0Ll9wZXJjZW50YWdlIDw9IDEgJiYgYW51bSA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAxIC8gKDEgLyB0aW1lckNvbnRleHQuX3BlcmNlbnRhZ2UgKyBhbnVtKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbnVtIDwgMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNudW0gPSAxIC8gLWNudW0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IDEgLyAoKDEgLyB0aW1lckNvbnRleHQuX3BlcmNlbnRhZ2UpICogY251bSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGltZXIuY2hhbmdlKHJlc3VsdCk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2xvYmFsLmNoYW5nZVRpbWUgPSB0aW1lci5jaGFuZ2VUaW1lOwogICAgICAgICAgICB9LAogICAgICAgICAgICBhcHBseUhvb2tpbmc6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIC8vIOWKq+aMgeW+queOr+iuoeaXtuWZqAogICAgICAgICAgICAgICAgZUhvb2tDb250ZXh0Lmhvb2tSZXBsYWNlKHdpbmRvdywgJ3NldEludGVydmFsJywgZnVuY3Rpb24gKHNldEludGVydmFsKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8g5YKo5a2Y5Y6f5aeL5pe26Ze06Ze06ZqUCiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1syXSA9IGFyZ3VtZW50c1sxXTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8g6I635Y+W5Y+Y6YCf5pe26Ze06Ze06ZqUCiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1sxXSAqPSB0aW1lckNvbnRleHQuX3BlcmNlbnRhZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRJZCA9IHNldEludGVydmFsLmFwcGx5KHdpbmRvdywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8g5L+d5a2Y5q+P5qyh5L2/55So6K6h5pe25Zmo5b6X5Yiw55qEaWTku6Xlj4rlj4LmlbDnrYkKICAgICAgICAgICAgICAgICAgICAgICAgdGltZXJDb250ZXh0Ll9pbnRlcnZhbElkc1tyZXN1bHRJZF0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzOiBhcmd1bWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3dJZDogcmVzdWx0SWQKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdElkOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIC8vIOWKq+aMgeW+queOr+iuoeaXtuWZqOeahOa4hemZpOaWueazlQogICAgICAgICAgICAgICAgZUhvb2tDb250ZXh0Lmhvb2tCZWZvcmUod2luZG93LCAnY2xlYXJJbnRlcnZhbCcsIGZ1bmN0aW9uIChtZXRob2QsIGFyZ3MpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSBhcmdzWzBdOwogICAgICAgICAgICAgICAgICAgIGlmICh0aW1lckNvbnRleHQuX2ludGVydmFsSWRzW2lkXSkgewogICAgICAgICAgICAgICAgICAgICAgICBhcmdzWzBdID0gdGltZXJDb250ZXh0Ll9pbnRlcnZhbElkc1tpZF0ubm93SWQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vIOa4hemZpOivpeiusOW9lWlkCiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRpbWVyQ29udGV4dC5faW50ZXJ2YWxJZHNbaWRdOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAvLyDliqvmjIHlvqrnjq/orqHml7blmajnmoTmuIXpmaTmlrnms5UKICAgICAgICAgICAgICAgIGVIb29rQ29udGV4dC5ob29rQmVmb3JlKHdpbmRvdywgJ2NsZWFyVGltZW91dCcsIGZ1bmN0aW9uIChtZXRob2QsIGFyZ3MpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSBhcmdzWzBdOwogICAgICAgICAgICAgICAgICAgIGlmICh0aW1lckNvbnRleHQuX2ludGVydmFsSWRzW2lkXSkgewogICAgICAgICAgICAgICAgICAgICAgICBhcmdzWzBdID0gdGltZXJDb250ZXh0Ll9pbnRlcnZhbElkc1tpZF0ubm93SWQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vIOa4hemZpOivpeiusOW9lWlkCiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRpbWVyQ29udGV4dC5faW50ZXJ2YWxJZHNbaWRdOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAvLyDliqvmjIHljZXmrKHorqHml7blmahzZXRUaW1lb3V0CiAgICAgICAgICAgICAgICBlSG9va0NvbnRleHQuaG9va0JlZm9yZSh3aW5kb3csICdzZXRUaW1lb3V0JywgZnVuY3Rpb24gKG1ldGhvZCwgYXJncykgewogICAgICAgICAgICAgICAgICAgIGFyZ3NbMV0gKj0gdGltZXJDb250ZXh0Ll9wZXJjZW50YWdlOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB2YXIgbmV3RnVuYyA9IHRoaXMuZ2V0SG9va2VkRGF0ZUNvbnN0cnVjdG9yKCk7CiAgICAgICAgICAgICAgICBlSG9va0NvbnRleHQuaG9va0NsYXNzKHdpbmRvdywgJ0RhdGUnLCBuZXdGdW5jLCAnX2lubmVyRGF0ZScsIFsnbm93J10pOwogICAgICAgICAgICAgICAgRGF0ZS5ub3cgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGVIb29rQ29udGV4dC5ob29rZWRUb1N0cmluZyh0aW1lckNvbnRleHQuX0RhdGUubm93LCBEYXRlLm5vdyk7CiAgICAgICAgICAgICAgICB2YXIgb2JqVG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOwoKICAgICAgICAgICAgICAgIGVIb29rQ29udGV4dC5ob29rQWZ0ZXIoT2JqZWN0LnByb3RvdHlwZSwgJ3RvU3RyaW5nJywgZnVuY3Rpb24gKG0sIGFyZ3MsIHJlc3VsdCkgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgdGltZXJDb250ZXh0Ll9tRGF0ZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1tvYmplY3QgRGF0ZV0nOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgZmFsc2UpOwoKICAgICAgICAgICAgICAgIGVIb29rQ29udGV4dC5ob29rZWRUb1N0cmluZyhvYmpUb1N0cmluZywgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyk7CiAgICAgICAgICAgICAgICBlSG9va0NvbnRleHQuaG9va2VkVG9TdHJpbmcodGltZXJDb250ZXh0Ll9zZXRJbnRlcnZhbCwgc2V0SW50ZXJ2YWwpOwogICAgICAgICAgICAgICAgZUhvb2tDb250ZXh0Lmhvb2tlZFRvU3RyaW5nKHRpbWVyQ29udGV4dC5fc2V0VGltZW91dCwgc2V0VGltZW91dCk7CiAgICAgICAgICAgICAgICBlSG9va0NvbnRleHQuaG9va2VkVG9TdHJpbmcodGltZXJDb250ZXh0Ll9jbGVhckludGVydmFsLCBjbGVhckludGVydmFsKTsKICAgICAgICAgICAgICAgIHRpbWVyQ29udGV4dC5fbURhdGUgPSB3aW5kb3cuRGF0ZTsKICAgICAgICAgICAgICAgIHRoaXMuaG9va1NoYWRvd1Jvb3QoKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0SG9va2VkRGF0ZUNvbnN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnX2lubmVyRGF0ZScsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuZXcgdGltZXJDb250ZXh0Ll9EYXRlKGFyZ3VtZW50c1swXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWZpbmVkVmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZWRWYWx1ZSA9IG5ldyB0aW1lckNvbnRleHQuX0RhdGUoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1swXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzWzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVkVmFsdWUgPSBuZXcgdGltZXJDb250ZXh0Ll9EYXRlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1sxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5lZFZhbHVlID0gbmV3IHRpbWVyQ29udGV4dC5fRGF0ZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1syXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzWzNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5lZFZhbHVlID0gbmV3IHRpbWVyQ29udGV4dC5fRGF0ZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1syXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzWzNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbNF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZWRWYWx1ZSA9IG5ldyB0aW1lckNvbnRleHQuX0RhdGUoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1swXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1szXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzWzRdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbNV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVkVmFsdWUgPSBuZXcgdGltZXJDb250ZXh0Ll9EYXRlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1sxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbM10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1s0XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzWzVdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbNl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ19pbm5lckRhdGUnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZGVmaW5lZFZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBub3cgPSB0aW1lckNvbnRleHQuX0RhdGUubm93KCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBhc3NUaW1lID0gbm93IC0gdGltZXJDb250ZXh0Ll9fbGFzdERhdGV0aW1lOwogICAgICAgICAgICAgICAgICAgIHZhciBob29rUGFzc1RpbWUgPSBwYXNzVGltZSAqICgxIC8gdGltZXJDb250ZXh0Ll9wZXJjZW50YWdlKTsKICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhfX3RoaXMuX19sYXN0RGF0ZXRpbWUgKyBob29rUGFzc1RpbWUsIG5vdyxfX3RoaXMuX19sYXN0RGF0ZXRpbWUgKyBob29rUGFzc1RpbWUgLSBub3cpOwogICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnX2lubmVyRGF0ZScsIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuZXcgdGltZXJDb250ZXh0Ll9EYXRlKHRpbWVyQ29udGV4dC5fX2xhc3RNRGF0ZXRpbWUgKyBob29rUGFzc1RpbWUpLAogICAgICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogZmFsc2UKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlZ2lzdGVyU2hvcnRjdXRLZXlzOiBmdW5jdGlvbiAodGltZXIpIHsKICAgICAgICAgICAgICAgIC8vIOW/q+aNt+mUruazqOWGjAogICAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlLmtleUNvZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gWz1dCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTkwOgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE4NzogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuY3RybEtleSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCcrMicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyLmNoYW5nZVRpbWUoMiwgMCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUuYWx0S2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3g0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXIuY2hhbmdlVGltZSgwLCA0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFstXQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE4ODoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxODk6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmN0cmxLZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnLTInKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lci5jaGFuZ2VUaW1lKC0yLCAwLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5hbHRLZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygneC00Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXIuY2hhbmdlVGltZSgwLCAtNCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAvLyBbMF0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0ODogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuY3RybEtleSB8fCBlLmFsdEtleSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZXNldCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyLmNoYW5nZVRpbWUoMCwgMCwgZmFsc2UsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDlvZPorqHml7blmajpgJ/njofooqvmlLnlj5jml7bosIPnlKjnmoTlm57osIPmlrnms5UKICAgICAgICAgICAgICogQHBhcmFtIHBlcmNlbnRhZ2UKICAgICAgICAgICAgICogQHByaXZhdGUKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHBlcmNlbnRhZ2VDaGFuZ2VIYW5kbGVyOiBmdW5jdGlvbiAocGVyY2VudGFnZSkgewogICAgICAgICAgICAgICAgLy8g5pS55Y+Y5omA5pyJ55qE5b6q546v6K6h5pe2CiAgICAgICAgICAgICAgICB1dGlsLmVyZ29kaWNPYmplY3QodGltZXJDb250ZXh0LCB0aW1lckNvbnRleHQuX2ludGVydmFsSWRzLCBmdW5jdGlvbiAoaWRPYmosIGlkKSB7CiAgICAgICAgICAgICAgICAgICAgaWRPYmouYXJnc1sxXSA9IE1hdGguZmxvb3IoaWRPYmouYXJnc1syXSAqIHBlcmNlbnRhZ2UpOwogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGlkT2JqLmFyZ3NbMV0pOwogICAgICAgICAgICAgICAgICAgIC8vIOe7k+adn+WOn+adpeeahOiuoeaXtuWZqAogICAgICAgICAgICAgICAgICAgIHRoaXMuX2NsZWFySW50ZXJ2YWwuY2FsbCh3aW5kb3csIGlkT2JqLm5vd0lkKTsKICAgICAgICAgICAgICAgICAgICAvLyDmlrDlvIDkuIDkuKrorqHml7blmagKICAgICAgICAgICAgICAgICAgICBpZE9iai5ub3dJZCA9IHRoaXMuX3NldEludGVydmFsLmFwcGx5KHdpbmRvdywgaWRPYmouYXJncyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaG9va1NoYWRvd1Jvb3Q6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBvcmlnaW4gPSBFbGVtZW50LnByb3RvdHlwZS5hdHRhY2hTaGFkb3c7CiAgICAgICAgICAgICAgICBlSG9va0NvbnRleHQuaG9va0FmdGVyKEVsZW1lbnQucHJvdG90eXBlLCAnYXR0YWNoU2hhZG93JywKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAobSwgYXJncywgcmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhRWxlbWVudHMucHVzaChyZXN1bHQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgICAgICAgICAgIH0sIGZhbHNlKTsKICAgICAgICAgICAgICAgIGVIb29rQ29udGV4dC5ob29rZWRUb1N0cmluZyhvcmlnaW4sIEVsZW1lbnQucHJvdG90eXBlLmF0dGFjaFNoYWRvdyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwoKICAgIHZhciBub3JtYWxVdGlsID0gewogICAgICAgIGlzSW5JZnJhbWU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbGV0IGlzID0gZ2xvYmFsLnBhcmVudCAhPT0gZ2xvYmFsOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaXMgPSBpcyAmJiBnbG9iYWwucGFyZW50LmRvY3VtZW50LmJvZHkudGFnTmFtZSAhPT0gJ0ZSQU1FU0VUJwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAvLyBpZ25vcmUKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gaXM7CiAgICAgICAgfSwKICAgICAgICBsaXN0ZW5QYXJlbnRFdmVudDogZnVuY3Rpb24gKGhhbmRsZXIpIHsKICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBlLmRhdGE7CiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IGRhdGEudHlwZSB8fCAnJzsKICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnY2hhbmdlUGVyY2VudGFnZScpIHsKICAgICAgICAgICAgICAgICAgICBoYW5kbGVyKGRhdGEucGVyY2VudGFnZSB8fCAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIHNlbnRDaGFuZ2VzVG9JZnJhbWU6IGZ1bmN0aW9uIChwZXJjZW50YWdlKSB7CiAgICAgICAgICAgIHZhciBpZnJhbWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaWZyYW1lJykgfHwgW107CiAgICAgICAgICAgIHZhciBmcmFtZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdmcmFtZScpOwogICAgICAgICAgICBpZiAoaWZyYW1lcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaWZyYW1lcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmcmFtZXNbaV0uY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSgKICAgICAgICAgICAgICAgICAgICAgICAge3R5cGU6ICdjaGFuZ2VQZXJjZW50YWdlJywgcGVyY2VudGFnZTogcGVyY2VudGFnZX0sICcqJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGZyYW1lcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZnJhbWVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgZnJhbWVzW2pdLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoCiAgICAgICAgICAgICAgICAgICAgICAgIHt0eXBlOiAnY2hhbmdlUGVyY2VudGFnZScsIHBlcmNlbnRhZ2U6IHBlcmNlbnRhZ2V9LCAnKicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKCiAgICB2YXIgcXVlcnlTZWxlY3RvckFsbCA9IGZ1bmN0aW9uIChlbGUsIHNlbGVjdG9yLCBpbmNsdWRlRXh0cmEpIHsKICAgICAgICB2YXIgZWxlbWVudHMgPSBlbGUucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7CiAgICAgICAgZWxlbWVudHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlbGVtZW50cyB8fCBbXSk7CiAgICAgICAgaWYgKGluY2x1ZGVFeHRyYSkgewogICAgICAgICAgICBleHRyYUVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgIGVsZW1lbnRzID0gZWxlbWVudHMuY29uY2F0KHF1ZXJ5U2VsZWN0b3JBbGwoZWxlbWVudCwgc2VsZWN0b3IsIGZhbHNlKSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICAgIHJldHVybiBlbGVtZW50czsKICAgIH07CgogICAgdmFyIGdlbmVyYXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAodXRpbCkgewogICAgICAgICAgICAvLyBkaXNhYmxlIHdvcmtlcgogICAgICAgICAgICB3b3JrZXJVUkxzLmZvckVhY2goZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICAgICAgaWYgKHV0aWwudXJsTWF0Y2hpbmcobG9jYXRpb24uaHJlZiwgJ2h0dHAuKjovLy4qJyArIHVybCArICcuKicpKSB7CiAgICAgICAgICAgICAgICAgICAgd2luZG93WydXb3JrZXInXSA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnV29ya2VyIGRpc2FibGVkJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgZUhvb2tDb250ZXh0ID0gdGhpczsKICAgICAgICAgICAgdmFyIHRpbWVySG9va2VyID0gewogICAgICAgICAgICAgICAgLy8g55So5LqO5YKo5a2Y6K6h5pe25Zmo55qEaWTlkozlj4LmlbAKICAgICAgICAgICAgICAgIF9pbnRlcnZhbElkczoge30sCiAgICAgICAgICAgICAgICAvLyDorqHml7blmajpgJ/njocKICAgICAgICAgICAgICAgIF9fcGVyY2VudGFnZTogMS4wLAogICAgICAgICAgICAgICAgLy8g5Yqr5oyB5YmN55qE5Y6f5aeL55qE5pa55rOVCiAgICAgICAgICAgICAgICBfc2V0SW50ZXJ2YWw6IHdpbmRvd1snc2V0SW50ZXJ2YWwnXSwKICAgICAgICAgICAgICAgIF9jbGVhckludGVydmFsOiB3aW5kb3dbJ2NsZWFySW50ZXJ2YWwnXSwKICAgICAgICAgICAgICAgIF9jbGVhclRpbWVvdXQ6IHdpbmRvd1snY2xlYXJUaW1lb3V0J10sCiAgICAgICAgICAgICAgICBfc2V0VGltZW91dDogd2luZG93WydzZXRUaW1lb3V0J10sCiAgICAgICAgICAgICAgICBfRGF0ZTogd2luZG93WydEYXRlJ10sCiAgICAgICAgICAgICAgICBfX2xhc3REYXRldGltZTogbmV3IERhdGUoKS5nZXRUaW1lKCksCiAgICAgICAgICAgICAgICBfX2xhc3RNRGF0ZXRpbWU6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLAogICAgICAgICAgICAgICAgdmlkZW9TcGVlZEludGVydmFsOiAxMDAwLAogICAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICAgKiDliJ3lp4vljJbmlrnms5UKICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0aW1lckNvbnRleHQgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIHZhciBoID0gaGVscGVyKGVIb29rQ29udGV4dCwgdGltZXJDb250ZXh0LCB1dGlsKTsKCiAgICAgICAgICAgICAgICAgICAgaC5hcHBseUhvb2tpbmcoKTsKCiAgICAgICAgICAgICAgICAgICAgLy8g6K6+5a6a55m+5YiG5q+U5bGe5oCn6KKr5L+u5pS555qE5Zue6LCDCiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRpbWVyQ29udGV4dCwgJ19wZXJjZW50YWdlJywgewogICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aW1lckNvbnRleHQuX19wZXJjZW50YWdlOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChwZXJjZW50YWdlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVyY2VudGFnZSA9PT0gdGltZXJDb250ZXh0Ll9fcGVyY2VudGFnZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwZXJjZW50YWdlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaC5wZXJjZW50YWdlQ2hhbmdlSGFuZGxlcihwZXJjZW50YWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyQ29udGV4dC5fX3BlcmNlbnRhZ2UgPSBwZXJjZW50YWdlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBlcmNlbnRhZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCFub3JtYWxVdGlsLmlzSW5JZnJhbWUoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1RpbWVIb29rZXJdJywgJ2xvYWRpbmcgb3V0ZXIgd2luZG93Li4uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGguYXBwbHlVSSgpOwogICAgICAgICAgICAgICAgICAgICAgICBoLmFwcGx5R2xvYmFsQWN0aW9uKHRpbWVyQ29udGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGgucmVnaXN0ZXJTaG9ydGN1dEtleXModGltZXJDb250ZXh0KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1RpbWVIb29rZXJdJywgJ2xvYWRpbmcgaW5uZXIgd2luZG93Li4uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFV0aWwubGlzdGVuUGFyZW50RXZlbnQoKGZ1bmN0aW9uIChwZXJjZW50YWdlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1RpbWVIb29rZXJdJywgJ0lubmVyIENoYW5nZWQnLCBwZXJjZW50YWdlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2UocGVyY2VudGFnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmJpbmQodGhpcykpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAgICog6LCD55So6K+l5pa55rOV5pS55Y+Y6K6h5pe25Zmo6YCf546HCiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gcGVyY2VudGFnZQogICAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgICBjaGFuZ2U6IGZ1bmN0aW9uIChwZXJjZW50YWdlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9fbGFzdE1EYXRldGltZSA9IHRoaXMuX21EYXRlLm5vdygpOwogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuX21EYXRlLnRvU3RyaW5nKCkpOwogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG5ldyB0aGlzLl9tRGF0ZSgpKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9fbGFzdERhdGV0aW1lID0gdGhpcy5fRGF0ZS5ub3coKTsKICAgICAgICAgICAgICAgICAgICAvLyBkZWJ1Z2dlcjsKICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcGVyY2VudGFnZSA9IHBlcmNlbnRhZ2U7CiAgICAgICAgICAgICAgICAgICAgdmFyIG9sZE5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdfdGgtY2xpY2staG92ZXInKTsKICAgICAgICAgICAgICAgICAgICB2YXIgb2xkTm9kZTEgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdfdGhfdGltZXMnKTsKICAgICAgICAgICAgICAgICAgICAob2xkTm9kZVswXSB8fCB7fSkuaW5uZXJIVE1MID0gJ3gnICsgMSAvIHRoaXMuX3BlcmNlbnRhZ2U7CiAgICAgICAgICAgICAgICAgICAgKG9sZE5vZGUxWzBdIHx8IHt9KS5pbm5lckhUTUwgPSAneCcgKyAxIC8gdGhpcy5fcGVyY2VudGFnZTsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ190aF9jb3Zlci1hbGwtc2hvdy10aW1lcycpWzBdIHx8IHt9OwogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGEuY2xhc3NOYW1lKTsKICAgICAgICAgICAgICAgICAgICBhLmNsYXNzTmFtZSA9ICdfdGhfY292ZXItYWxsLXNob3ctdGltZXMnOwogICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldFRpbWVvdXQuYmluZCh3aW5kb3cpKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYS5jbGFzc05hbWUgPSAnX3RoX2NvdmVyLWFsbC1zaG93LXRpbWVzIF90aF9oaWRkZW4nOwogICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VWaWRlb1NwZWVkKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2xlYXJJbnRlcnZhbC5iaW5kKHdpbmRvdykodGhpcy52aWRlb1NwZWVkSW50ZXJ2YWxJZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb1NwZWVkSW50ZXJ2YWxJZCA9IHRoaXMuX3NldEludGVydmFsLmJpbmQod2luZG93KShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNoYW5nZVZpZGVvU3BlZWQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhdGUgPSAxIC8gX3RoaXMuX3BlcmNlbnRhZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYXRlID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fY2xlYXJJbnRlcnZhbC5iaW5kKHdpbmRvdykoX3RoaXMudmlkZW9TcGVlZEludGVydmFsSWQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy52aWRlb1NwZWVkSW50ZXJ2YWwpOwogICAgICAgICAgICAgICAgICAgIG5vcm1hbFV0aWwuc2VudENoYW5nZXNUb0lmcmFtZShwZXJjZW50YWdlKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjaGFuZ2VWaWRlb1NwZWVkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJhdGUgPSAxIC8gdGhpcy5fcGVyY2VudGFnZTsKICAgICAgICAgICAgICAgICAgICByYXRlID4gMTYgJiYgKHJhdGUgPSAxNik7CiAgICAgICAgICAgICAgICAgICAgcmF0ZSA8IDAuMDY1ICYmIChyYXRlID0gMC4wNjUpOwogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJhdGUpOwogICAgICAgICAgICAgICAgICAgIHZhciB2aWRlb3MgPSBxdWVyeVNlbGVjdG9yQWxsKGRvY3VtZW50LCAndmlkZW8nLCB0cnVlKSB8fCBbXTsKICAgICAgICAgICAgICAgICAgICBpZiAodmlkZW9zLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZGVvcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9zW2ldLnBsYXliYWNrUmF0ZSA9IHJhdGU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIC8vIOm7mOiupOWIneWni+WMlgogICAgICAgICAgICB0aW1lckhvb2tlci5pbml0KCk7CiAgICAgICAgICAgIHJldHVybiB0aW1lckhvb2tlcjsKICAgICAgICB9CiAgICB9OwoKICAgIGlmIChnbG9iYWwuZUhvb2spIHsKICAgICAgICBnbG9iYWwuZUhvb2sucGx1Z2lucyh7CiAgICAgICAgICAgIG5hbWU6ICd0aW1lcicsCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDmj5Lku7boo4Xovb0KICAgICAgICAgICAgICogQHBhcmFtIHV0aWwKICAgICAgICAgICAgICovCiAgICAgICAgICAgIG1vdW50OiBnZW5lcmF0ZSgpCiAgICAgICAgfSk7CiAgICB9Cn0od2luZG93KTs=","requires":[{"meta":{"name":"Everything-Hook.js","url":"https://greasyfork.org/scripts/372672-everything-hook/code/Everything-Hook.js?version=784972","ts":1590749562702,"mimetype":"text/javascript"},"source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBFdmVyeXRoaW5nLUhvb2sKLy8gQG5hbWVzcGFjZSAgICBodHRwczovL2dpdGVlLmNvbS9IR0ppbmcvZXZlcnRoaW5nLWhvb2svCi8vIEB1cGRhdGVVUkwgICAgaHR0cHM6Ly9naXRlZS5jb20vSEdKaW5nL2V2ZXJ0aGluZy1ob29rL3Jhdy9tYXN0ZXIvc3JjL2V2ZXJ5dGhpbmctaG9vay5qcwovLyBAdmVyc2lvbiAgICAgIDAuNS45MDU0Ci8vIEBpbmNsdWRlICAgICAgKgovLyBAZGVzY3JpcHRpb24gIGl0IGNhbiBob29rIGV2ZXJ5dGhpbmcKLy8gQGF1dGhvciAgICAgICBDYW5nc2hpCi8vIEBtYXRjaCAgICAgICAgaHR0cDovLyovKgovLyBAZ3JhbnQgICAgICAgIG5vbmUKLy8gQHJ1bi1hdCAgICAgICBkb2N1bWVudC1zdGFydAovLyA9PS9Vc2VyU2NyaXB0PT0KCi8qKgogKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICogVGltZTogMjAxNy85LzIwIDE4OjMzLgogKiBBdXRob3I6IENhbmdzaGkKICogVmlldzogaHR0cDovL3BhbGVyb2NrLmNuCiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogKi8KJ3VzZSBzdHJpY3QnOwovKioKICogRXZlcnktVXRpbHMKICogdmVyc2lvbjowLjAuMjAwMQogKi8KKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHsKCiAgICAidXNlIHN0cmljdCI7CgogICAgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICJvYmplY3QiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gIm9iamVjdCIpIHsKCiAgICAgICAgLy8gRm9yIENvbW1vbkpTIGFuZCBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB3aGVyZSBhIHByb3BlciBgd2luZG93YAogICAgICAgIC8vIGlzIHByZXNlbnQsIGV4ZWN1dGUgdGhlIGZhY3RvcnkgYW5kIGdldCBqUXVlcnkuCiAgICAgICAgLy8gRm9yIGVudmlyb25tZW50cyB0aGF0IGRvIG5vdCBoYXZlIGEgYHdpbmRvd2Agd2l0aCBhIGBkb2N1bWVudGAKICAgICAgICAvLyAoc3VjaCBhcyBOb2RlLmpzKSwgZXhwb3NlIGEgZmFjdG9yeSBhcyBtb2R1bGUuZXhwb3J0cy4KICAgICAgICAvLyBUaGlzIGFjY2VudHVhdGVzIHRoZSBuZWVkIGZvciB0aGUgY3JlYXRpb24gb2YgYSByZWFsIGB3aW5kb3dgLgogICAgICAgIC8vIGUuZy4gdmFyIGpRdWVyeSA9IHJlcXVpcmUoImpxdWVyeSIpKHdpbmRvdyk7CiAgICAgICAgLy8gU2VlIHRpY2tldCAjMTQ1NDkgZm9yIG1vcmUgaW5mby4KICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbC5kb2N1bWVudCA/CiAgICAgICAgICAgIGZhY3RvcnkoZ2xvYmFsLCB0cnVlKSA6CiAgICAgICAgICAgIGZ1bmN0aW9uICh3KSB7CiAgICAgICAgICAgICAgICBpZiAoIXcuZG9jdW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoImVVdGlscyByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnQiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBmYWN0b3J5KHcpOwogICAgICAgICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgICBmYWN0b3J5KGdsb2JhbCk7CiAgICB9Cgp9KHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24gKF9nbG9iYWwsIG5vR2xvYmFsKSB7CgogICAgLy8gYmFzZQogICAgdmFyIEJhc2VVdGlscyA9IHsKICAgICAgICAvKioKICAgICAgICAgKiDlr7nosaHmmK/lkKbkuLrmlbDnu4QKICAgICAgICAgKiBAcGFyYW0gYXJyCiAgICAgICAgICovCiAgICAgICAgaXNBcnJheTogZnVuY3Rpb24gKGFycikgewogICAgICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhcnIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcnIpID09PSAiW29iamVjdCBBcnJheV0iOwogICAgICAgIH0sCiAgICAgICAgLyoqCiAgICAgICAgICog5Yik5pat5piv5ZCm5Li65pa55rOVCiAgICAgICAgICogQHBhcmFtIGZ1bmMKICAgICAgICAgKiBAcmV0dXJuIHtib29sZWFufQogICAgICAgICAqLwogICAgICAgIGlzRnVuY3Rpb246IGZ1bmN0aW9uIChmdW5jKSB7CiAgICAgICAgICAgIGlmICghZnVuYykgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgZnVuYyA9PT0gJ2Z1bmN0aW9uJzsKICAgICAgICB9LAogICAgICAgIC8qKgogICAgICAgICAqIOWIpOaWreaYr+WQpuaYr+S4gOS4quacieaViOeahOWvueixoQogICAgICAgICAqIEBwYXJhbSBvYmoKICAgICAgICAgKiBAcmV0dXJuIHsqfGJvb2xlYW59CiAgICAgICAgICovCiAgICAgICAgaXNFeGlzdE9iamVjdDogZnVuY3Rpb24gKG9iaikgewogICAgICAgICAgICByZXR1cm4gb2JqICYmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jyk7CiAgICAgICAgfSwKICAgICAgICBpc1N0cmluZzogZnVuY3Rpb24gKHN0cikgewogICAgICAgICAgICBpZiAoc3RyID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnOwogICAgICAgIH0sCiAgICAgICAgdW5pcXVlTnVtOiAxMDAwLAogICAgICAgIC8qKgogICAgICAgICAqIOagueaNruW9k+WJjeaXtumXtOaIs+eUn+S6p+S4gOS4qumaj+acumlkCiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30KICAgICAgICAgKi8KICAgICAgICBidWlsZFVuaXF1ZUlkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBwcmVmaXggPSBuZXcgRGF0ZSgpLmdldFRpbWUoKS50b1N0cmluZygpOwogICAgICAgICAgICB2YXIgc3VmZml4ID0gdGhpcy51bmlxdWVOdW0udG9TdHJpbmcoKTsKICAgICAgICAgICAgdGhpcy51bmlxdWVOdW0rKzsKICAgICAgICAgICAgcmV0dXJuIHByZWZpeCArIHN1ZmZpeDsKICAgICAgICB9LAogICAgICAgIGtleXM6ZnVuY3Rpb24gKG9iaikgewogICAgICAgICAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgICAgICAgICBmb3IodmFyIGtleSBpbiBvYmopewogICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGtleSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7CiAgICAgICAgfQogICAgfTsKCiAgICAvLwogICAgdmFyIHNlcnZpY2VQcm92aWRlciA9IHsKICAgICAgICBfcGFyc2VEZXBlbmRzOiBmdW5jdGlvbiAoZGVwZW5kcykgewogICAgICAgICAgICB2YXIgZGVwZW5kc0FyciA9IFtdOwogICAgICAgICAgICBpZiAoIUJhc2VVdGlscy5pc0FycmF5KGRlcGVuZHMpKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGVwZW5kcy5mb3JFYWNoKGZ1bmN0aW9uIChkZXBlbmQpIHsKICAgICAgICAgICAgICAgIGlmIChCYXNlVXRpbHMuaXNTdHJpbmcoZGVwZW5kKSkgewogICAgICAgICAgICAgICAgICAgIGRlcGVuZHNBcnIucHVzaChzZXJ2aWNlUHJvdmlkZXJbZGVwZW5kLnRvTG93ZXJDYXNlKCldKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBkZXBlbmRzQXJyOwogICAgICAgIH0KICAgIH07CgogICAgLy8KICAgIHZhciBmYWN0b3J5ID0gZnVuY3Rpb24gKG5hbWUsIGRlcGVuZHMsIGNvbnN0cnVjdGlvbikgewogICAgICAgIGlmICghQmFzZVV0aWxzLmlzRnVuY3Rpb24oY29uc3RydWN0aW9uKSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHNlcnZpY2VQcm92aWRlcltuYW1lLnRvTG93ZXJDYXNlKCldID0gY29uc3RydWN0aW9uLmFwcGx5KHRoaXMsIHNlcnZpY2VQcm92aWRlci5fcGFyc2VEZXBlbmRzKGRlcGVuZHMpKTsKICAgIH07CgogICAgdmFyIGRlcGVuZCA9IGZ1bmN0aW9uIChkZXBlbmRzLCBjb25zdHJ1Y3Rpb24pIHsKICAgICAgICBpZiAoIUJhc2VVdGlscy5pc0Z1bmN0aW9uKGNvbnN0cnVjdGlvbikpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjb25zdHJ1Y3Rpb24uYXBwbHkodGhpcywgc2VydmljZVByb3ZpZGVyLl9wYXJzZURlcGVuZHMoZGVwZW5kcykpOwogICAgfTsKCiAgICBmYWN0b3J5KCdCYXNlVXRpbHMnLCBbXSwgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBCYXNlVXRpbHM7CiAgICB9KTsKCiAgICAvLyBsb2dnZXIKICAgIGZhY3RvcnkoJ2xvZ2dlcicsIFtdLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGNvbnNvbGU7CiAgICB9KTsKCiAgICAvLyBEYXRlVGltZVV0aWxzCiAgICBmYWN0b3J5KCdEYXRlVGltZVV0aWxzJywgWydsb2dnZXInXSwgZnVuY3Rpb24gKGxvZ2dlcikgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDmiZPljbDlvZPliY3ml7bpl7QKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHByaW50Tm93VGltZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5wYXR0ZXJuKGRhdGUsICdoaDptbTpzczpTJykpOwogICAgICAgICAgICB9LAogICAgICAgICAgICAvKioKICAgICAgICAgICAgICog5qC85byP5YyW5pel5pyfCiAgICAgICAgICAgICAqIEBwYXJhbSBkYXRlCiAgICAgICAgICAgICAqIEBwYXJhbSBmbXQKICAgICAgICAgICAgICogQHJldHVybnMgeyp9CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwYXR0ZXJuOiBmdW5jdGlvbiAoZGF0ZSwgZm10KSB7CiAgICAgICAgICAgICAgICB2YXIgbyA9IHsKICAgICAgICAgICAgICAgICAgICAiTSsiOiBkYXRlLmdldE1vbnRoKCkgKyAxLCAvL+aciOS7vQogICAgICAgICAgICAgICAgICAgICJkKyI6IGRhdGUuZ2V0RGF0ZSgpLCAvL+aXpQogICAgICAgICAgICAgICAgICAgICJoKyI6IGRhdGUuZ2V0SG91cnMoKSAlIDEyID09PSAwID8gMTIgOiBkYXRlLmdldEhvdXJzKCkgJSAxMiwgLy/lsI/ml7YKICAgICAgICAgICAgICAgICAgICAiSCsiOiBkYXRlLmdldEhvdXJzKCksIC8v5bCP5pe2CiAgICAgICAgICAgICAgICAgICAgIm0rIjogZGF0ZS5nZXRNaW51dGVzKCksIC8v5YiGCiAgICAgICAgICAgICAgICAgICAgInMrIjogZGF0ZS5nZXRTZWNvbmRzKCksIC8v56eSCiAgICAgICAgICAgICAgICAgICAgInErIjogTWF0aC5mbG9vcigoZGF0ZS5nZXRNb250aCgpICsgMykgLyAzKSwgLy/lraPluqYKICAgICAgICAgICAgICAgICAgICAiUyI6IGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCkgLy/mr6vnp5IKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB2YXIgd2VlayA9IHsKICAgICAgICAgICAgICAgICAgICAiMCI6ICIvdTY1ZTUiLAogICAgICAgICAgICAgICAgICAgICIxIjogIi91NGUwMCIsCiAgICAgICAgICAgICAgICAgICAgIjIiOiAiL3U0ZThjIiwKICAgICAgICAgICAgICAgICAgICAiMyI6ICIvdTRlMDkiLAogICAgICAgICAgICAgICAgICAgICI0IjogIi91NTZkYiIsCiAgICAgICAgICAgICAgICAgICAgIjUiOiAiL3U0ZTk0IiwKICAgICAgICAgICAgICAgICAgICAiNiI6ICIvdTUxNmQiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgaWYgKC8oeSspLy50ZXN0KGZtdCkpIHsKICAgICAgICAgICAgICAgICAgICBmbXQgPSBmbXQucmVwbGFjZShSZWdFeHAuJDEsIChkYXRlLmdldEZ1bGxZZWFyKCkgKyAiIikuc3Vic3RyKDQgLSBSZWdFeHAuJDEubGVuZ3RoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoLyhFKykvLnRlc3QoZm10KSkgewogICAgICAgICAgICAgICAgICAgIGZtdCA9IGZtdC5yZXBsYWNlKFJlZ0V4cC4kMSwgKChSZWdFeHAuJDEubGVuZ3RoID4gMSkgPyAoUmVnRXhwLiQxLmxlbmd0aCA+IDIgPyAiL3U2NjFmL3U2NzFmIiA6ICIvdTU0NjgiKSA6ICIiKSArIHdlZWtbZGF0ZS5nZXREYXkoKSArICIiXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIG8pIHsKICAgICAgICAgICAgICAgICAgICBpZiAobmV3IFJlZ0V4cCgiKCIgKyBrICsgIikiKS50ZXN0KGZtdCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm10ID0gZm10LnJlcGxhY2UoUmVnRXhwLiQxLCAoUmVnRXhwLiQxLmxlbmd0aCA9PT0gMSkgPyAob1trXSkgOiAoKCIwMCIgKyBvW2tdKS5zdWJzdHIoKCIiICsgb1trXSkubGVuZ3RoKSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBmbXQ7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDku6XlvZPliY3ml7bpl7Tojrflj5ZpZAogICAgICAgICAgICAgKiBAcmV0dXJucyB7bnVtYmVyfQogICAgICAgICAgICAgKi8KICAgICAgICAgICAgZ2V0Q3VycmVudElkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZS5nZXRUaW1lKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDojrflj5bmjIflrprml7bpl7Tot53nprvnjrDlnKjnm7jlt67lpJrkuYUKICAgICAgICAgICAgICogQHBhcmFtIGRhdGUge251bWJlcnxEYXRlfQogICAgICAgICAgICAgKiBAcGFyYW0gaXNDZWlse2Jvb2xlYW49fSDmmK/lkKblr7nnu5PmnpzlkJHkuIrlj5bmlbTvvIzpu5jorqRbZmFsc2VdCiAgICAgICAgICAgICAqIEBwYXJhbSB0eXBlIHtzdHJpbmc9fSDljZXkvY3lj6/lj5blgLxbJ2RheScsJ21vbnRoJywneWVhcidd6buY6K6kJ2RheScKICAgICAgICAgICAgICogQHJldHVybnMge251bWJlcn0KICAgICAgICAgICAgICovCiAgICAgICAgICAgIGdldE5vd0JldHdlZW5BRGF5OiBmdW5jdGlvbiAoZGF0ZSwgaXNDZWlsLCB0eXBlKSB7CiAgICAgICAgICAgICAgICBpZiAoIXR5cGUpIHsKICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ2RheScKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0ZSA9PT0gJ251bWJlcicpIHsKICAgICAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoZGF0ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoIShkYXRlIGluc3RhbmNlb2YgRGF0ZSkpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCfor6Xlj4LmlbDnsbvlnovlv4XpobvmmK9EYXRlJykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciB0aW1lID0gZGF0ZS5nZXRUaW1lKCk7CiAgICAgICAgICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICAgIHZhciBub3dUaW1lID0gbm93LmdldFRpbWUoKTsKICAgICAgICAgICAgICAgIGlmIChub3dUaW1lIC0gdGltZSA8IDApIHsKICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2Fybign6ZyA6KaB6K6h566X55qE5pe26Ze05b+F6aG75Zyo5b2T5YmN5pe26Ze05LmL5YmNJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gMDsKICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGF5JzoKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gKG5vd1RpbWUgLSB0aW1lKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbW9udGgnOgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgeWVhckRpZmZlcmVuY2UgPSBub3cuZ2V0RnVsbFllYXIoKSAtIGRhdGUuZ2V0RnVsbFllYXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHllYXJEaWZmZXJlbmNlID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IHllYXJEaWZmZXJlbmNlICogMTI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IG5vdy5nZXRNb250aCgpIC0gZGF0ZS5nZXRNb250aCgpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICd5ZWFyJzoKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IG5vdy5nZXRGdWxsWWVhcigpIC0gZGF0ZS5nZXRGdWxsWWVhcigpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghaXNDZWlsKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IocmVzdWx0KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gMCAmJiBpc0NlaWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gMTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguY2VpbChyZXN1bHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7CgogICAgLy8gQXJyYXlVdGlscwogICAgZmFjdG9yeSgnQXJyYXlVdGlscycsIFsnQmFzZVV0aWxzJ10sIGZ1bmN0aW9uIChCYXNlVXRpbHMpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpc0FycmF5T2JqZWN0OiBmdW5jdGlvbiAoYXJyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gQmFzZVV0aWxzLmlzQXJyYXkoYXJyKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIOmBjeWOhuaVsOe7hAogICAgICAgICAgICAgKiBAcGFyYW0gY29udGV4dCB7T2JqZWN0fQogICAgICAgICAgICAgKiBAcGFyYW0gYXJyIHtBcnJheX0KICAgICAgICAgICAgICogQHBhcmFtIGNiIHtGdW5jdGlvbn0g5Zue6LCD5Ye95pWwCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBlcmdvZGljQXJyYXlPYmplY3Q6IGZ1bmN0aW9uIChjb250ZXh0LCBhcnIsIGNiKSB7CiAgICAgICAgICAgICAgICBpZiAoIWNvbnRleHQpIHsKICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0gd2luZG93OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCFCYXNlVXRpbHMuaXNBcnJheShhcnIpIHx8ICFCYXNlVXRpbHMuaXNGdW5jdGlvbihjYikpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBjYi5jYWxsKGNvbnRleHQsIGFycltpXSwgaSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQgPT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIOiOt+WPluaVsOe7hOWvueixoeeahOS4gOS4quWxnuaAp+WPkei1t+WKqOS9nAogICAgICAgICAgICAgKiBAcGFyYW0gY29udGV4dCB7T2JqZWN0fQogICAgICAgICAgICAgKiBAcGFyYW0gYXJyIHtBcnJheX0KICAgICAgICAgICAgICogQHBhcmFtIHByb3BlcnR5TmFtZSB7U3RyaW5nfQogICAgICAgICAgICAgKiBAcGFyYW0gY2Ige0Z1bmN0aW9ufQogICAgICAgICAgICAgKiBAcGFyYW0gY2hlY2tQcm9wZXJ0eSB7Ym9vbGVhbn0g5piv5ZCm5o6S6Zmk5LiN5oul5pyJ6K+l5bGe5oCn55qE5a+56LGhW2RlZmF1bHQ6dHJ1ZV0KICAgICAgICAgICAgICovCiAgICAgICAgICAgIGdldFByb3BlcnR5RG86IGZ1bmN0aW9uIChjb250ZXh0LCBhcnIsIHByb3BlcnR5TmFtZSwgY2IsIGNoZWNrUHJvcGVydHkpIHsKICAgICAgICAgICAgICAgIGlmIChjaGVja1Byb3BlcnR5ID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgY2hlY2tQcm9wZXJ0eSA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmVyZ29kaWNBcnJheU9iamVjdChjb250ZXh0LCBhcnIsIGZ1bmN0aW9uIChlbGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrUHJvcGVydHkgfHwgZWxlLmhhc093blByb3BlcnR5KHByb3BlcnR5TmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2IuY2FsbChjb250ZXh0LCBlbGVbcHJvcGVydHlOYW1lXSwgZWxlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogW+engeacieaWueazlV3lsIblpJrkuKrplK7lgLzlr7nlr7nosaHovazmjaLkuLptYXAKICAgICAgICAgICAgICogQHBhcmFtIGFyciB7QXJyYXl9CiAgICAgICAgICAgICAqIEByZXR1cm5zIHt7fX0KICAgICAgICAgICAgICovCiAgICAgICAgICAgIHBhcnNlS2V5VmFsdWU6IGZ1bmN0aW9uIChhcnIpIHsKICAgICAgICAgICAgICAgIHZhciBtYXAgPSB7fTsKICAgICAgICAgICAgICAgIGlmICghKEJhc2VVdGlscy5pc0FycmF5KGFycikpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuZXJnb2RpY0FycmF5T2JqZWN0KHRoaXMsIGFyciwgZnVuY3Rpb24gKGVsZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChlbGUua2V5ID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXAuaGFzT3duUHJvcGVydHkoZWxlLmtleSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWFwW2VsZS5rZXldID0gZWxlLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIG1hcDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIOiOt+WPluaVsOe7hOeahOWTiOW4jOeggQogICAgICAgICAgICAgKiBAcGFyYW0gYXJyIHtBcnJheX0KICAgICAgICAgICAgICogQHJldHVybnMge251bWJlcn0KICAgICAgICAgICAgICovCiAgICAgICAgICAgIGdldEhhc2hDb2RlOiBmdW5jdGlvbiAoYXJyKSB7CiAgICAgICAgICAgICAgICB2YXIgc3RyID0gYXJyLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB2YXIgaGFzaCA9IDMxOwogICAgICAgICAgICAgICAgaWYgKHN0ci5sZW5ndGggPT09IDApIHJldHVybiBoYXNoOwogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgY2hhciA9IHN0ci5jaGFyQ29kZUF0KGkpOwogICAgICAgICAgICAgICAgICAgIGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIGNoYXI7CiAgICAgICAgICAgICAgICAgICAgaGFzaCA9IGhhc2ggJiBoYXNoOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBoYXNoOwogICAgICAgICAgICB9LAogICAgICAgICAgICAvKioKICAgICAgICAgICAgICog6YCa6L+H5pWw57uE5Lit5q+P5Liq5a+56LGh55qE5oyH5a6a5bGe5oCn55Sf5oiQ5LiA5Liq5paw5pWw57uECiAgICAgICAgICAgICAqIEBwYXJhbSBhcnIge0FycmF5fQogICAgICAgICAgICAgKiBAcGFyYW0gcHJvcGVydHlOYW1lIHtTdHJpbmd9CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwYXJzZUFycmF5QnlQcm9wZXJ0eTogZnVuY3Rpb24gKGFyciwgcHJvcGVydHlOYW1lKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNBcnJheU9iamVjdChhcnIpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0UHJvcGVydHlEbyh0aGlzLCBhcnIsIHByb3BlcnR5TmFtZSwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpOwogICAgICAgICAgICAgICAgfSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgICB9LAogICAgICAgICAgICAvKioKICAgICAgICAgICAgICog5pWw57uE5a+56LGh5piv5ZCm5YyF5ZCr5LiA5Liq5a+56LGhCiAgICAgICAgICAgICAqIEBwYXJhbSBhcnIge0FycmF5fQogICAgICAgICAgICAgKiBAcGFyYW0gb2JqCiAgICAgICAgICAgICAqIEBwYXJhbSBjYiB7ZnVuY3Rpb249fQogICAgICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0KICAgICAgICAgICAgICovCiAgICAgICAgICAgIGlzQ29udGFpbnNPYmplY3Q6IGZ1bmN0aW9uIChhcnIsIG9iaiwgY2IpIHsKICAgICAgICAgICAgICAgIHZhciBpc0NvbnRhaW5zT2JqZWN0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLmVyZ29kaWNBcnJheU9iamVjdCh0aGlzLCBhcnIsIGZ1bmN0aW9uICh2YWx1ZSwgaSkgewogICAgICAgICAgICAgICAgICAgIGlmIChvYmogPT09IHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ29udGFpbnNPYmplY3QgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoQmFzZVV0aWxzLmlzRnVuY3Rpb24oY2IpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYi5jYWxsKHdpbmRvdywgaSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIGlzQ29udGFpbnNPYmplY3Q7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDojrflj5bmlbDnu4TkuK3nmoTmnIDlpKflgLwKICAgICAgICAgICAgICogQHBhcmFtIGFyciDoi6XmlbDnu4TkuK3nmoTlr7nosaHov5jmmK/mlbDnu4TvvIzliJnmjInph4zpnaLmlbDnu4TnmoTmr4/kuKrlr7nosaHov5vooYzlpJrnuqfmr5TovoMKICAgICAgICAgICAgICogQHBhcmFtIGNiCiAgICAgICAgICAgICAqIEByZXR1cm5zIHsqfQogICAgICAgICAgICAgKi8KICAgICAgICAgICAgZ2V0TWF4SW5BcnJheTogZnVuY3Rpb24gKGFyciwgY2IpIHsKICAgICAgICAgICAgICAgIHZhciBtYXhPYmplY3QgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIG1heEluZGV4ID0gLTE7CiAgICAgICAgICAgICAgICB3aGlsZSAobWF4T2JqZWN0ID09PSBudWxsICYmIG1heEluZGV4IDwgYXJyLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIG1heE9iamVjdCA9IGFyclsrK21heEluZGV4XQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IG1heEluZGV4ICsgMTsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIC8vIOiLpeaYr+avlOi+g+WvueixoemDveaYr+aVsOe7hO+8jOWImeWvueavj+S4quaVsOe7hOeahOesrOS4gOS4quWFg+e0oOi/m+ihjOavlOi+g++8jOiLpeebuOWQjO+8jOWImeavlOi+g+esrOS6jOS4quWFg+e0oAogICAgICAgICAgICAgICAgICAgIGlmIChtYXhPYmplY3QgIT09IG51bGwgJiYgdGhpcy5pc0FycmF5T2JqZWN0KG1heE9iamVjdCkgJiYgdGhpcy5pc0FycmF5T2JqZWN0KGFycltpXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsYXNzTGVuZ3RoID0gbWF4T2JqZWN0Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsYXNzTGV2ZWwgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhtYXhPYmplY3RbY2xhc3NMZXZlbF0sYXJyW2ldW2NsYXNzTGV2ZWxdKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG1heE9iamVjdFtjbGFzc0xldmVsXSA9PT0gYXJyW2ldW2NsYXNzTGV2ZWxdICYmIGNsYXNzTGV2ZWwgPCBjbGFzc0xlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NMZXZlbCsrCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1heE9iamVjdFtjbGFzc0xldmVsXSAhPT0gbnVsbCAmJiBtYXhPYmplY3RbY2xhc3NMZXZlbF0gPCBhcnJbaV1bY2xhc3NMZXZlbF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heE9iamVjdCA9IGFycltpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEluZGV4ID0gaTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKG1heE9iamVjdCAhPT0gbnVsbCAmJiBtYXhPYmplY3QgPCBhcnJbaV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWF4T2JqZWN0ID0gYXJyW2ldOwogICAgICAgICAgICAgICAgICAgICAgICBtYXhJbmRleCA9IGk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKEJhc2VVdGlscy5pc0Z1bmN0aW9uKGNiKSkgewogICAgICAgICAgICAgICAgICAgIGNiLmNhbGwodGhpcywgbWF4T2JqZWN0LCBtYXhJbmRleCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbWF4T2JqZWN0OwogICAgICAgICAgICB9LAogICAgICAgICAgICAvKioKICAgICAgICAgICAgICog6I635Y+W5pWw57uE5Lit55qE5oC75YC8CiAgICAgICAgICAgICAqIEBwYXJhbSBhcnJ7QXJyYXk8bnVtYmVyPn0KICAgICAgICAgICAgICogQHBhcmFtIGNiIHtmdW5jdGlvbj19CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBnZXRTdW1JbkFycmF5OiBmdW5jdGlvbiAoYXJyLCBjYikgewogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzQXJyYXlPYmplY3QoYXJyKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBzdW0gPSAwOwogICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gMDsKICAgICAgICAgICAgICAgIHRoaXMuZXJnb2RpY0FycmF5T2JqZWN0KHRoaXMsIGFyciwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgIU51bWJlci5pc05hTih2YWx1ZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IHZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICBjb3VudCArPSAxOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYgKEJhc2VVdGlscy5pc0Z1bmN0aW9uKGNiKSkgewogICAgICAgICAgICAgICAgICAgIGNiLmNhbGwod2luZG93LCBzdW0sIGNvdW50KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBzdW07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDojrflj5bmlbDnu4TkuK3nmoTlubPlnYflgLwKICAgICAgICAgICAgICogQHBhcmFtIGFycntBcnJheTxudW1iZXI+fQogICAgICAgICAgICAgKi8KICAgICAgICAgICAgZ2V0QXZlcmFnZUluQXJyYXk6IGZ1bmN0aW9uIChhcnIpIHsKICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gMDsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0U3VtSW5BcnJheShhcnIsIGZ1bmN0aW9uIChzdW0sIGkpIHsKICAgICAgICAgICAgICAgICAgICBpID09PSAwIHx8IChhdmVyYWdlID0gc3VtIC8gaSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBhdmVyYWdlOwogICAgICAgICAgICB9LAogICAgICAgICAgICAvKioKICAgICAgICAgICAgICog5Li65pWw57uE5o6S5bqPCiAgICAgICAgICAgICAqIEBwYXJhbSBhcnIKICAgICAgICAgICAgICogQHBhcmFtIG9yZGVyCiAgICAgICAgICAgICAqIEBwYXJhbSBzb3J0U2V0dGluZyB7b2JqZWN0PX0KICAgICAgICAgICAgICovCiAgICAgICAgICAgIHNvcnRpbmdBcnJheXM6IGZ1bmN0aW9uIChhcnIsIG9yZGVyLCBzb3J0U2V0dGluZykgewogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzQXJyYXlPYmplY3QoYXJyKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBERVNDID0gMDsKICAgICAgICAgICAgICAgIHZhciBBU0MgPSAxOwogICAgICAgICAgICAgICAgdmFyIHRoaXNBcnIgPSBhcnIuc2xpY2UoMCk7CiAgICAgICAgICAgICAgICB2YXIgX3RoaXNBY3Rpb24gPSBudWxsOwogICAgICAgICAgICAgICAgLy8g6Kej5p6Q6YWN572uCiAgICAgICAgICAgICAgICB2YXIgaXNTZXR0aW5nID0gc29ydFNldHRpbmcgJiYgc29ydFNldHRpbmcuZ2V0Q29tcGFyZWRQcm9wZXJ0eSAmJgogICAgICAgICAgICAgICAgICAgIEJhc2VVdGlscy5pc0Z1bmN0aW9uKHNvcnRTZXR0aW5nLmdldENvbXBhcmVkUHJvcGVydHkpOwogICAgICAgICAgICAgICAgaWYgKGlzU2V0dGluZykgewogICAgICAgICAgICAgICAgICAgIHRoaXNBcnIgPSBzb3J0U2V0dGluZy5nZXRDb21wYXJlZFByb3BlcnR5KGFycik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9yZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdCA6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBERVNDOgogICAgICAgICAgICAgICAgICAgICAgICBfdGhpc0FjdGlvbiA9IHRoaXNBcnIucHVzaDsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSBBU0M6CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzQWN0aW9uID0gdGhpc0Fyci51bnNoaWZ0OwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciByZXN1bHRBcnIgPSBbXTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpc0Fyci5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0TWF4SW5BcnJheSh0aGlzQXJyLCBmdW5jdGlvbiAobWF4LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzQXJyW2ldOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpc0FjdGlvbi5jYWxsKHJlc3VsdEFyciwgYXJyW2ldKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChzb3J0U2V0dGluZyAmJiBzb3J0U2V0dGluZy5jcmVhdGVOZXdEYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdEFyci5zbGljZSgwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRBcnI7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDlsIbnsbvmlbDnu4TovazljJbkuLrmlbDnu4QKICAgICAgICAgICAgICogQHBhcmFtIGFyckxpa2Ug57G75pWw57uE5a+56LGhCiAgICAgICAgICAgICAqLwogICAgICAgICAgICB0b0FycmF5OiBmdW5jdGlvbiAoYXJyTGlrZSkgewogICAgICAgICAgICAgICAgaWYgKCFhcnJMaWtlIHx8IGFyckxpa2UubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8g6Z2e5Lyq57G75a+56LGh77yM55u05o6l6L+U5Zue5pyA5aW9CiAgICAgICAgICAgICAgICBpZiAoIWFyckxpa2UubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyckxpa2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyDpkojlr7lJRTjku6XliY0gRE9N55qEQ09N5a6e546wCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBbXS5zbGljZS5jYWxsKGFyckxpa2UpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBpID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgaiA9IGFyckxpa2UubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBbXTsKICAgICAgICAgICAgICAgICAgICBmb3IgKDsgaSA8IGo7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICByZXMucHVzaChhcnJMaWtlW2ldKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIOWIpOaWreaYr+WQpuS4uuexu+aVsOe7hAogICAgICAgICAgICAgKiBAcGFyYW0gbwogICAgICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0KICAgICAgICAgICAgICovCiAgICAgICAgICAgIGlzQXJyYXlMaWNrOiBmdW5jdGlvbiAobykgewogICAgICAgICAgICAgICAgaWYgKG8gJiYgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG8gaXMgbm90IG51bGwsIHVuZGVmaW5lZCwgZXRjLgogICAgICAgICAgICAgICAgICAgIHR5cGVvZiBvID09PSAnb2JqZWN0JyAmJiAgICAgICAgICAgIC8vIG8gaXMgYW4gb2JqZWN0CiAgICAgICAgICAgICAgICAgICAgaXNGaW5pdGUoby5sZW5ndGgpICYmICAgICAgICAgICAgICAgLy8gby5sZW5ndGggaXMgYSBmaW5pdGUgbnVtYmVyCiAgICAgICAgICAgICAgICAgICAgby5sZW5ndGggPj0gMCAmJiAgICAgICAgICAgICAgICAgICAgLy8gby5sZW5ndGggaXMgbm9uLW5lZ2F0aXZlCiAgICAgICAgICAgICAgICAgICAgby5sZW5ndGggPT09IE1hdGguZmxvb3Ioby5sZW5ndGgpICYmICAvLyBvLmxlbmd0aCBpcyBhbiBpbnRlZ2VyCiAgICAgICAgICAgICAgICAgICAgby5sZW5ndGggPCA0Mjk0OTY3Mjk2KSAgICAgICAgICAgICAgLy8gby5sZW5ndGggPCAyXjMyCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlbiBvIGlzIGFycmF5LWxpa2UKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7ICAgICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgaXQgaXMgbm90CgogICAgICAgICAgICB9LAogICAgICAgICAgICAvKioKICAgICAgICAgICAgICog5Yik5pat5pWw57uE5piv5ZCm5YyF5ZCr5a+56LGhCiAgICAgICAgICAgICAqIEBwYXJhbSBhcnIKICAgICAgICAgICAgICogQHBhcmFtIG9iagogICAgICAgICAgICAgKi8KICAgICAgICAgICAgY29udGFpbnM6IGZ1bmN0aW9uIChhcnIsIG9iaikgewogICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5zID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLmVyZ29kaWNBcnJheU9iamVjdCh0aGlzLCBhcnIsIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGEgPT09IG9iaikgewogICAgICAgICAgICAgICAgICAgICAgICBjb250YWlucyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBjb250YWluczsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwoKICAgIC8vIE9iamVjdFV0aWxzCiAgICBmYWN0b3J5KCdPYmplY3RVdGlscycsIFsnQXJyYXlVdGlscycsICdCYXNlVXRpbHMnXSwgZnVuY3Rpb24gKEFycmF5VXRpbHMsIEJhc2VVdGlscykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDojrflj5blr7nosaHlsZ7mgKdb5pSv5oyB6ZO+5byP6KGo6L6+5byPLOWmguiOt+WPluWtpueUn+aJgOWcqOePree6p+aJgOWcqOeahOWtpuagoShzdHVkZW50LmNsYXNzLnNjaG9vbCk6J2NsYXNzLnNjaG9vbCddCiAgICAgICAgICAgICAqIEBwYXJhbSBvYmoKICAgICAgICAgICAgICogQHBhcmFtIGxpbmtQcm9wZXJ0eSB7c3RyaW5nfEFycmF5fSDlsZ7mgKfooajovr7lvI/vvIzojrflj5blpJrkuKrlsZ7mgKfliJnnlKjmlbDnu4QKICAgICAgICAgICAgICogQHBhcmFtIGNiIHtmdW5jdGlvbj19CiAgICAgICAgICAgICAqIEByZXR1cm4g5a+56LGh5bGe5oCnCiAgICAgICAgICAgICAqLwogICAgICAgICAgICByZWFkTGlua1Byb3BlcnR5OiBmdW5jdGlvbiAob2JqLCBsaW5rUHJvcGVydHksIGNiKSB7CiAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBudWxsOwogICAgICAgICAgICAgICAgaWYgKEJhc2VVdGlscy5pc0Z1bmN0aW9uKGNiKSkgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gY2I7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGxpbmtQcm9wZXJ0eSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgICAgICAvLyDpmaTljrvmiYDmnInnmoTnqbrmoLwKICAgICAgICAgICAgICAgICAgICBsaW5rUHJvcGVydHkgPSBsaW5rUHJvcGVydHkucmVwbGFjZSgvIC9nLCAnJyk7CiAgICAgICAgICAgICAgICAgICAgLy8g5LiN5Yik5pat5Li656m655qE5YC8CiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmtQcm9wZXJ0eSA9PT0gJycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vIOiLpeaYr+S7pScsJ+malOW8gOeahOS8quaVsOe7hO+8jOWImei9rOWMluS4uuaVsOe7hOWGjei/m+ihjOaTjeS9nAogICAgICAgICAgICAgICAgICAgIGlmIChsaW5rUHJvcGVydHkuaW5kZXhPZignLCcpICE9PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcGVydHlOYW1lQXJyID0gbGlua1Byb3BlcnR5LnNwbGl0KCcsJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlYWRMaW5rUHJvcGVydHkob2JqLCBwcm9wZXJ0eU5hbWVBcnIsIGNhbGxiYWNrKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmtQcm9wZXJ0eS5pbmRleE9mKCcuJykgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYW1lcyA9IGxpbmtQcm9wZXJ0eS5zcGxpdCgnLicpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlcmF0aW9uT2JqID0gb2JqOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXlVdGlscy5lcmdvZGljQXJyYXlPYmplY3QodGhpcywgbmFtZXMsIGZ1bmN0aW9uIChuYW1lLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVyYXRpb25PYmogPSB0aGlzLnJlYWRMaW5rUHJvcGVydHkoaXRlcmF0aW9uT2JqLCBuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYW1lc1tuYW1lcy5sZW5ndGggLSAxXSA9PT0gbmFtZSAmJiBuYW1lcy5sZW5ndGggLSAxID09PSBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gaXRlcmF0aW9uT2JqOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHdpbmRvdywgcmVzdWx0LCBsaW5rUHJvcGVydHkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOe7iOatouWvueaOpeS4i+adpeeahOWxnuaAp+eahOmBjeWOhgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVyYXRpb25PYmogPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIG5vcm1hbFJlc3VsdCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmtQcm9wZXJ0eS5zbGljZShsaW5rUHJvcGVydHkubGVuZ3RoIC0gMikgPT09ICcoKScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZ1bmMgPSBsaW5rUHJvcGVydHkuc2xpY2UoMCwgbGlua1Byb3BlcnR5Lmxlbmd0aCAtIDIpOwogICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxSZXN1bHQgPSBvYmpbZnVuY10oKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxSZXN1bHQgPSBvYmpbbGlua1Byb3BlcnR5XTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKG5vcm1hbFJlc3VsdCA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4ob2JqLCAn55qE5bGe5oCnW1wnJyArIGxpbmtQcm9wZXJ0eSArICdcJ13lgLzmnKrmib7liLAnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwod2luZG93LCBub3JtYWxSZXN1bHQsIGxpbmtQcm9wZXJ0eSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBub3JtYWxSZXN1bHQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoQmFzZVV0aWxzLmlzQXJyYXkobGlua1Byb3BlcnR5KSkgewogICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0gW107CiAgICAgICAgICAgICAgICAgICAgQXJyYXlVdGlscy5lcmdvZGljQXJyYXlPYmplY3QodGhpcywgbGlua1Byb3BlcnR5LCBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnJlYWRMaW5rUHJvcGVydHkob2JqLCBuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIG5hbWUgIT09ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suY2FsbCh3aW5kb3csIHZhbHVlLCBuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdHMuaXNNdWx0aXBsZVJlc3VsdHMgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICAvKioKICAgICAgICAgICAgICog5Li65a+56LGh5bGe5oCn6LWL5YC8CiAgICAgICAgICAgICAqIO+8iOWQjOS4gOS4quWvueixoeS4reS4jeiDveWkn+aXouacieaVsOWtl+W8gOWktOeahOWxnuaAp+WQjeWSjOaZrumAmuWxnuaAp+WQje+8iQogICAgICAgICAgICAgKiBAcGFyYW0gb2JqCiAgICAgICAgICAgICAqIEBwYXJhbSBsaW5rUHJvcGVydHkge3N0cmluZ3xBcnJheX0g5bGe5oCn6KGo6L6+5byP77yM5aSa5Liq5bGe5oCn5YiZ55So5pWw57uECiAgICAgICAgICAgICAqIEBwYXJhbSB2YWx1ZQogICAgICAgICAgICAgKi8KICAgICAgICAgICAgY3JlYXRlTGlua1Byb3BlcnR5OiBmdW5jdGlvbiAob2JqLCBsaW5rUHJvcGVydHksIHZhbHVlKSB7CiAgICAgICAgICAgICAgICBpZiAob2JqID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgb2JqID0ge307CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGxpbmtQcm9wZXJ0eSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgICAgICAvLyDpmaTljrvmiYDmnInnmoTnqbrmoLwKICAgICAgICAgICAgICAgICAgICBsaW5rUHJvcGVydHkgPSBsaW5rUHJvcGVydHkucmVwbGFjZSgvIC9nLCAnJyk7CiAgICAgICAgICAgICAgICAgICAgLy8g5LiN5Yik5pat5Li656m655qE5YC8CiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmtQcm9wZXJ0eSA9PT0gJycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcign5a+56LGh5bGe5oCn5ZCN5LiN6IO95Li656m6JykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmtQcm9wZXJ0eS5pbmRleE9mKCcsJykgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9wZXJ0eU5hbWVBcnIgPSBsaW5rUHJvcGVydHkuc3BsaXQoJywnKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVMaW5rUHJvcGVydHkob2JqLCBwcm9wZXJ0eU5hbWVBcnIsIHZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iajsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmtQcm9wZXJ0eS5pbmRleE9mKCcuJykgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYW1lcyA9IGxpbmtQcm9wZXJ0eS5zcGxpdCgnLicpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShuYW1lc1swXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ialtuYW1lc1swXV0gPSB7fQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWIpOaWreWxnuaAp+WQjeaYr+WQpuS7peaVsOWtl+W8gOWktO+8iOiLpeaYr+S7o+ihqOaYr+S4gOS4quaVsOe7hO+8iQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIU51bWJlci5pc05hTihwYXJzZUludChuYW1lc1swXSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5VXRpbHMuaXNBcnJheU9iamVjdChvYmopKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb3BlcnR5T2JqID0gb2JqW25hbWVzWzBdXTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1Byb3BlcnRpZXMgPSBuYW1lcy5zbGljZSgxLCBuYW1lcy5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3TGlua1Byb3BlcnR5ID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5VXRpbHMuZXJnb2RpY0FycmF5T2JqZWN0KHRoaXMsIG5ld1Byb3BlcnRpZXMsIGZ1bmN0aW9uIChwcm9wZXJ0eSwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCBuZXdQcm9wZXJ0aWVzLmxlbmd0aCAtIDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdMaW5rUHJvcGVydHkgPSBuZXdMaW5rUHJvcGVydHkgKyBwcm9wZXJ0eSArICcuJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdMaW5rUHJvcGVydHkgPSBuZXdMaW5rUHJvcGVydHkgKyBwcm9wZXJ0eTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG9ialtuYW1lc1swXV0gPSB0aGlzLmNyZWF0ZUxpbmtQcm9wZXJ0eShwcm9wZXJ0eU9iaiwgbmV3TGlua1Byb3BlcnR5LCB2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmo7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vIOWIpOaWreWxnuaAp+WQjeaYr+WQpuS7peaVsOWtl+W8gOWktO+8iOiLpeaYr+S7o+ihqOaYr+S4gOS4quaVsOe7hO+8iQogICAgICAgICAgICAgICAgICAgIGlmICghTnVtYmVyLmlzTmFOKHBhcnNlSW50KGxpbmtQcm9wZXJ0eSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXlVdGlscy5pc0FycmF5T2JqZWN0KG9iaikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIG9ialtsaW5rUHJvcGVydHldID0gdmFsdWU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iajsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoQmFzZVV0aWxzLmlzQXJyYXkobGlua1Byb3BlcnR5KSkgewogICAgICAgICAgICAgICAgICAgIEFycmF5VXRpbHMuZXJnb2RpY0FycmF5T2JqZWN0KHRoaXMsIGxpbmtQcm9wZXJ0eSwgZnVuY3Rpb24gKGxpbmspIHsKICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gdGhpcy5jcmVhdGVMaW5rUHJvcGVydHkob2JqLCBsaW5rLCB2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iajsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIOmBjeWOhuWvueixoeWxnuaApwogICAgICAgICAgICAgKiBAcGFyYW0gY29udGV4dCB7b2JqZWN0fSDkuIrkuIvmlocKICAgICAgICAgICAgICogQHBhcmFtIG9iaiB7b2JqZWN0fSDpgY3ljoblr7nosaEKICAgICAgICAgICAgICogQHBhcmFtIGNiIHtmdW5jdGlvbn0g5Zue6LCD5Ye95pWwCiAgICAgICAgICAgICAqIEBwYXJhbSBpc1JlYWRJbm5lck9iamVjdCB7Ym9vbGVhbj19IOaYr+WQpumBjeWOhuWGhemDqOWvueixoeeahOWxnuaApwogICAgICAgICAgICAgKi8KICAgICAgICAgICAgZXJnb2RpY09iamVjdDogZnVuY3Rpb24gKGNvbnRleHQsIG9iaiwgY2IsIGlzUmVhZElubmVyT2JqZWN0KSB7CiAgICAgICAgICAgICAgICB2YXIga2V5cyA9IEJhc2VVdGlscy5rZXlzKG9iaik7CiAgICAgICAgICAgICAgICBBcnJheVV0aWxzLmVyZ29kaWNBcnJheU9iamVjdCh0aGlzLCBrZXlzLCBmdW5jdGlvbiAocHJvcGVydHlOYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgLy8g6Iul5YaF6YOo5a+56LGh6ZyA6KaB6YGN5Y6GCiAgICAgICAgICAgICAgICAgICAgdmFyIF9wcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWU7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUmVhZElubmVyT2JqZWN0ICYmIG9ialtwcm9wZXJ0eU5hbWVdICE9PSBudWxsICYmIHR5cGVvZiBvYmpbcHJvcGVydHlOYW1lXSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcmdvZGljT2JqZWN0KHRoaXMsIG9ialtwcm9wZXJ0eU5hbWVdLCBmdW5jdGlvbiAodmFsdWUsIGtleSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNiLmNhbGwoY29udGV4dCwgdmFsdWUsIF9wcm9wZXJ0eU5hbWUgKyAnLicgKyBrZXkpOwogICAgICAgICAgICAgICAgICAgICAgICB9LCB0cnVlKQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYi5jYWxsKGNvbnRleHQsIG9ialtwcm9wZXJ0eU5hbWVdLCBwcm9wZXJ0eU5hbWUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDlvZPmjIflrprlsZ7mgKfkuLrnqbrmiJbkuI3lrZjlnKjml7bmiafooYzlm57liLDlh73mlbDvvJsKICAgICAgICAgICAgICogQHBhcmFtIGNvbnRleHQge29iamVjdH0g5LiK5LiL5paHCiAgICAgICAgICAgICAqIEBwYXJhbSBvYmoge29iamVjdH0g5qOA5rWL5a+56LGhCiAgICAgICAgICAgICAqIEBwYXJhbSBwcm9wZXJ0eU5hbWVze0FycmF5fHN0cmluZ30g6ZyA6KaB5qOA5rWL55qE5bGe5oCn5ZCNCiAgICAgICAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOWPr+S7peajgOafpeWkmue6p+WxnuaAp+WmgjonYS5iLmMuZSfvvIwKICAgICAgICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg5aSa5Liq5bGe5oCn5L2/55So5pWw57uE77yM5pSv5oyB57qv5a2X56ym5Liy5aSa5Liq5bGe5oCn55SoJywn6ZqU5byACiAgICAgICAgICAgICAqIEBwYXJhbSBjYiB7ZnVuY3Rpb259IOWbnuiwg+WHveaVsFvlj4LmlbDvvJrkuLrnqbrmiJbkuI3lrZjlnKjnmoTlsZ7mgKflkI0s6L+U5Zue5YC85Li6Jy0xJ+aXtu+8jOi3s+i/h+S5i+WQjueahOWbnuiwg+WHveaVsF0KICAgICAgICAgICAgICovCiAgICAgICAgICAgIHdoaWxlRW1wdHlPYmplY3RQcm9wZXJ0eTogZnVuY3Rpb24gKGNvbnRleHQsIG9iaiwgcHJvcGVydHlOYW1lcywgY2IpIHsKICAgICAgICAgICAgICAgIC8vIOino+aekOWNleS4quWxnuaAp+WQjQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwcm9wZXJ0eU5hbWVzID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgICAgIC8vIOmZpOWOu+aJgOacieeahOepuuagvAogICAgICAgICAgICAgICAgICAgIHByb3BlcnR5TmFtZXMgPSBwcm9wZXJ0eU5hbWVzLnJlcGxhY2UoLyAvZywgJycpOwogICAgICAgICAgICAgICAgICAgIC8vIOS4jeWIpOaWreS4uuepuueahOWAvAogICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0eU5hbWVzID09PSAnJykgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vIOiLpeaYr+S7pScsJ+malOW8gOeahOS8quaVsOe7hO+8jOWImei9rOWMluS4uuaVsOe7hOWGjei/m+ihjOaTjeS9nAogICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0eU5hbWVzLmluZGV4T2YoJywnKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb3BlcnR5TmFtZUFyciA9IHByb3BlcnR5TmFtZXMuc3BsaXQoJywnKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud2hpbGVFbXB0eU9iamVjdFByb3BlcnR5KGNvbnRleHQsIG9iaiwgcHJvcGVydHlOYW1lQXJyLCBjYik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vIOiLpeaMh+Wumue6p+iBlOWxnuaApwogICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0eU5hbWVzLmluZGV4T2YoJy4nKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWVzID0gcHJvcGVydHlOYW1lcy5zcGxpdCgnLicpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlcmF0aW9uT2JqID0gb2JqOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXlVdGlscy5lcmdvZGljQXJyYXlPYmplY3QodGhpcywgbmFtZXMsIGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlcmF0aW9uT2JqICYmIGl0ZXJhdGlvbk9iai5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZXJhdGlvbk9iaiA9IGl0ZXJhdGlvbk9ialtuYW1lXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gY2IuY2FsbCh3aW5kb3csIHByb3BlcnR5TmFtZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOe7iOatouWvueaOpeS4i+adpeeahOWxnuaAp+eahOmBjeWOhgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vIOato+W4uOa1geeoiwogICAgICAgICAgICAgICAgICAgIGlmICghb2JqLmhhc093blByb3BlcnR5KHByb3BlcnR5TmFtZXMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYi5jYWxsKGNvbnRleHQsIHByb3BlcnR5TmFtZXMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAob2JqW3Byb3BlcnR5TmFtZXNdID09PSBudWxsIHx8IG9ialtwcm9wZXJ0eU5hbWVzXSA9PT0gJycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNiLmNhbGwoY29udGV4dCwgcHJvcGVydHlOYW1lcyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChCYXNlVXRpbHMuaXNBcnJheShwcm9wZXJ0eU5hbWVzKSkgewogICAgICAgICAgICAgICAgICAgIC8vIOino+aekOaVsOe7hAogICAgICAgICAgICAgICAgICAgIEFycmF5VXRpbHMuZXJnb2RpY0FycmF5T2JqZWN0KHRoaXMsIHByb3BlcnR5TmFtZXMsIGZ1bmN0aW9uIChwcm9wZXJ0eU5hbWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8g6YCS5b2S6LCD55SoCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndoaWxlRW1wdHlPYmplY3RQcm9wZXJ0eShjb250ZXh0LCBvYmosIHByb3BlcnR5TmFtZSwgY2IpOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHdoaWxlRW1wdHlPYmplY3RQcm9wZXJ0eVYyOiBmdW5jdGlvbiAoY29udGV4dCwgb2JqLCBwcm9wZXJ0eU5hbWVzLCBjYikgewogICAgICAgICAgICAgICAgdGhpcy5yZWFkTGlua1Byb3BlcnR5KG9iaiwgcHJvcGVydHlOYW1lcywgZnVuY3Rpb24gKHZhbHVlLCBwcm9wZXJ0eU5hbWUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09ICcnIHx8IHBhcnNlSW50KHZhbHVlKSA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNiLmNhbGwoY29udGV4dCwgcHJvcGVydHlOYW1lKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAogICAgICAgICAgICAvKioKICAgICAgICAgICAgICog5YWL6ZqG5a+56LGhW+WPquWFi+mahuWxnuaAp++8jOS4jeWFi+mahuWOn+Wei+mTvl0KICAgICAgICAgICAgICogQHBhcmFtIG9iaiB7Kn0KICAgICAgICAgICAgICovCiAgICAgICAgICAgIGNsb25lT2JqZWN0OiBmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgICAgICAgICB2YXIgbmV3T2JqID0ge307CiAgICAgICAgICAgICAgICAvLyDliKTmlq3mmK/lkKbkuLrln7rmnKzmlbDmja7nsbvlnovvvIzoi6XmmK/liJnnm7TmjqXov5Tlm54KICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJyB8fAogICAgICAgICAgICAgICAgICAgIHR5cGVvZiBvYmogPT09ICdudW1iZXInIHx8CiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCcgfHwKICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nIHx8CiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIG9iaiA9PT0gJ2Jvb2xlYW4nKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iajsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIOWIpOaWreaYr+WQpuaYr+aVsOe7hAogICAgICAgICAgICAgICAgaWYgKEJhc2VVdGlscy5pc0FycmF5KG9iaikpIHsKICAgICAgICAgICAgICAgICAgICBuZXdPYmogPSBbXTsKICAgICAgICAgICAgICAgICAgICAvLyDpgY3ljobmlbDnu4TlubbpgJLlvZLosIPnlKjor6Xmlrnms5Xojrflj5bmlbDnu4TlhoXpg6jlr7nosaHnmoTlhYvpmoblr7nosaHlubZwdXNo5Yiw5paw5pWw57uECiAgICAgICAgICAgICAgICAgICAgQXJyYXlVdGlscy5lcmdvZGljQXJyYXlPYmplY3QodGhpcywgb2JqLCBmdW5jdGlvbiAoYXJyT2JqVmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmV3T2JqLnB1c2godGhpcy5jbG9uZU9iamVjdChhcnJPYmpWYWx1ZSkpOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICAgICAgLy8g5b2T55uu5qCH5Li65LiA6Iis5a+56LGh5pe25Y2zIHR5cGVvZiDkuLogb2JqZWN0CiAgICAgICAgICAgICAgICAgICAgaWYgKG9iaiA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyDlvZPlhYvpmoblr7nosaHkuLrnqbrml7bvvIzov5Tlm57nqboKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vIOmBjeWOhuWvueixoeeahOWxnuaAp+W5tuiwg+eUqOmAkuW9kuaWueazleiOt+W+l+ivpeWxnuaAp+WvueW6lOeahOWvueixoeeahOWFi+mahuWvueixoeW5tuWwhuWFtumHjeaWsOi1i+WAvOWIsOivpeWxnuaApwogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJnb2RpY09iamVjdCh0aGlzLCBvYmosIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5ld09ialtrZXldID0gdGhpcy5jbG9uZU9iamVjdCh2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3T2JqOwogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyBjbG9uZUluZGVlZDogZnVuY3Rpb24gKG9iaikgewogICAgICAgICAgICAvLyAgICAgdmFyIGhhc2ggPSBuZXcgTWFwKCk7CiAgICAgICAgICAgIC8vICAgICB2YXIgcmVzdWx0ID0gdGhpcy5fY2xvbmVJbmRlZWQob2JqLCBoYXNoKTsKICAgICAgICAgICAgLy8gICAgIGZvciAodmFyIGl0ZW0gb2YgaGFzaC52YWx1ZXMoKSkgewogICAgICAgICAgICAvLyAgICAgICAgIEFycmF5VXRpbHMuZXJnb2RpY0FycmF5T2JqZWN0KHRoaXMsIGl0ZW0uc2V0dGluZ0FyciwgZnVuY3Rpb24gKGZ1bmMpIHsKICAgICAgICAgICAgLy8gICAgICAgICAgICAgZnVuYy5jYWxsKHRoaXMpOwogICAgICAgICAgICAvLyAgICAgICAgIH0pCiAgICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAgIC8vICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgICAvLyB9LAogICAgICAgICAgICAvLyBfY2xvbmVJbmRlZWQ6IGZ1bmN0aW9uIChvYmosIGhhc2gpIHsKICAgICAgICAgICAgLy8gICAgIGhhc2ggPSBoYXNoIHx8IG5ldyBNYXAoKTsKICAgICAgICAgICAgLy8gICAgIHZhciByZXN1bHQgPSB7fTsKICAgICAgICAgICAgLy8gICAgIC8vIOiOt+WPluaVsOaNruexu+WeiwogICAgICAgICAgICAvLyAgICAgdmFyIGRhdGFUeXBlID0gdHlwZW9mIG9iajsKICAgICAgICAgICAgLy8gICAgIHN3aXRjaCAoZGF0YVR5cGUudG9Mb3dlckNhc2UoKSkgewogICAgICAgICAgICAvLyAgICAgICAgIGNhc2UgJ3N0cmluZyc6CiAgICAgICAgICAgIC8vICAgICAgICAgY2FzZSAnbnVtYmVyJzoKICAgICAgICAgICAgLy8gICAgICAgICBjYXNlICdib29sZWFuJzoKICAgICAgICAgICAgLy8gICAgICAgICBjYXNlICd1bmRlZmluZWQnOgogICAgICAgICAgICAvLyAgICAgICAgICAgICByZXR1cm4gb2JqOwogICAgICAgICAgICAvLyAgICAgICAgIGNhc2UgJ29iamVjdCc6CiAgICAgICAgICAgIC8vICAgICAgICAgZGVmYXVsdDogewogICAgICAgICAgICAvLyAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICB2YXIgbmV4dE9iaiA9IG9ialtrZXldOwogICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgdmFyIGhhc2hPYmogPSBoYXNoLmdldChuZXh0T2JqKTsKICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlmIChoYXNoT2JqICE9IG51bGwgJiYgaGFzaE9iai5jbG9uZWRPYmogIT0gbnVsbCkgewogICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIG9ialtrZXldID0gbnVsbDsKICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIGhhc2guc2V0KG5leHRPYmosIHsKICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVkT2JqOiByZXN1bHQsCiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdBcnI6IFtdLAogICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU6IGZhbHNlCiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdGhpcy5fY2xvbmVJbmRlZWQobmV4dE9iaiwgaGFzaCk7CiAgICAgICAgICAgIC8vICAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gICAgICAgICAgICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICByZXN1bHRbJ19fcHJvdG9fXyddID0gb2JqWydfX3Byb3RvX18nXTsKICAgICAgICAgICAgLy8gICAgICAgICAgICAgfQogICAgICAgICAgICAvLyAgICAgICAgIH0KICAgICAgICAgICAgLy8KICAgICAgICAgICAgLy8gICAgIH0KICAgICAgICAgICAgLy8gICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgIC8vIH0sCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDojrflj5blr7nosaHnmoTlk4jluIznoIEKICAgICAgICAgICAgICogQHBhcmFtIG9iaiB7T2JqZWN0fQogICAgICAgICAgICAgKiBAcmV0dXJucyB7bnVtYmVyfQogICAgICAgICAgICAgKi8KICAgICAgICAgICAgZ2V0T2JqSGFzaENvZGU6IGZ1bmN0aW9uIChvYmopIHsKICAgICAgICAgICAgICAgIHZhciBzdHIgPSBKU09OLnN0cmluZ2lmeShvYmopOwogICAgICAgICAgICAgICAgdmFyIGhhc2ggPSAwLCBpLCBjaHIsIGxlbjsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0cikKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGhhc2gpCiAgICAgICAgICAgICAgICBpZiAoc3RyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGhhc2g7CiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSBzdHIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBjaHIgPSBzdHIuY2hhckNvZGVBdChpKTsKICAgICAgICAgICAgICAgICAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBjaHI7CiAgICAgICAgICAgICAgICAgICAgaGFzaCB8PSAwOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0cikKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGhhc2gpCiAgICAgICAgICAgICAgICByZXR1cm4gaGFzaDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIOaJqeWxleWvueixoeWxnuaApwogICAgICAgICAgICAgKiBAcGFyYW0gb2JqIOWOn+WvueixoQogICAgICAgICAgICAgKiBAcGFyYW0gZXh0ZW5kZWRPYmog6KKr5omp5bGV55qE5a+56LGhCiAgICAgICAgICAgICAqIEBwYXJhbSBpc0NvdmVyIHtib29sZWFuPX0g5omp5bGV55qE5bGe5oCn5ZKM5Y6f5p2l5bGe5oCn5Yay56qB5pe25piv5ZCm6KaG55uWIOm7mOiupFtmYWxzZV0KICAgICAgICAgICAgICogQHBhcmFtIGlzQ2xvbmUge2Jvb2xlYW49fSDmmK/lkKbov5Tlm57kuIDkuKrmlrDnmoTlr7nosaHvvIzpu5jorqRbZmFsc2Vd6L+U5Zue5omp5bGV5ZCO55qE5Y6f5a+56LGhCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBleHBhbmRPYmplY3Q6IGZ1bmN0aW9uIChvYmosIGV4dGVuZGVkT2JqLCBpc0NvdmVyLCBpc0Nsb25lKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0T2JqID0gb2JqOwogICAgICAgICAgICAgICAgaWYgKGlzQ2xvbmUpIHsKICAgICAgICAgICAgICAgICAgICByZXN1bHRPYmogPSB0aGlzLmNsb25lT2JqZWN0KG9iaik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmVyZ29kaWNPYmplY3QodGhpcywgZXh0ZW5kZWRPYmosIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ292ZXIgJiYgdGhpcy5yZWFkTGlua1Byb3BlcnR5KHJlc3VsdE9iaiwga2V5KSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJlc3VsdE9iaiA9IHRoaXMuY3JlYXRlTGlua1Byb3BlcnR5KHJlc3VsdE9iaiwga2V5LCB2YWx1ZSk7CiAgICAgICAgICAgICAgICB9LCB0cnVlKTsKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRPYmo7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDkuLrmlbDnu4TmjpLluo/vvIzlvZPmlbDnu4TkuK3nmoTlhYPntKDkuLrlr7nosaHml7bvvIzmoLnmja7mjIflrprlr7nosaHnmoTlsZ7mgKflkI3ov5vooYzmjpLluo8KICAgICAgICAgICAgICogQHBhcmFtIGFyciDmlbDnu4QKICAgICAgICAgICAgICogQHBhcmFtIHByb3BlcnR5TmFtZSDlsZ7mgKflkI3vvIjlvZPmnInlpJrkuKrlsZ7mgKflkI3ml7bvvIzkuLrlpJrnuqfmjpLluo/vvIkKICAgICAgICAgICAgICogQHBhcmFtIG9yZGVyIOWNh+mZjeW6jwogICAgICAgICAgICAgKiBAcmV0dXJucyB7Kn0KICAgICAgICAgICAgICovCiAgICAgICAgICAgIHNvcnRpbmdBcnJheUJ5UHJvcGVydHk6IGZ1bmN0aW9uIChhcnIsIHByb3BlcnR5TmFtZSwgb3JkZXIpIHsKICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgICAgICB2YXIgc29ydFNldHRpbmcgPSB7CiAgICAgICAgICAgICAgICAgICAgLy8g5piv5ZCm5Yib5bu65paw5pWw5o2uCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlTmV3RGF0YTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgLy8g6YCa6L+H6K+l5pa55rOV6I635Y+W5pWw57uE5Lit5q+P5Liq5a+56LGh5Lit55So5p2l5q+U6L6D55qE5bGe5oCnCiAgICAgICAgICAgICAgICAgICAgZ2V0Q29tcGFyZWRQcm9wZXJ0eTogZnVuY3Rpb24gKGFycikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29tcGFyZUFyciA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICBBcnJheVV0aWxzLmVyZ29kaWNBcnJheU9iamVjdChfdGhpcywgYXJyLCBmdW5jdGlvbiAob2JqLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wYXJlQXJyLnB1c2gob2JqKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBhcmVWYWx1ZSA9IHRoaXMucmVhZExpbmtQcm9wZXJ0eShvYmosIHByb3BlcnR5TmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXBhcmVWYWx1ZSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wYXJlQXJyLnB1c2goY29tcGFyZVZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wYXJlQXJyLnB1c2gob2JqKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyZUFyci5zbGljZSgwKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5VXRpbHMuc29ydGluZ0FycmF5cyhhcnIsIG9yZGVyLCBzb3J0U2V0dGluZyk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDovazor53kuLrnm67moIfnmoTlrp7kvosKICAgICAgICAgICAgICogQHBhcmFtIGNvbnN0cnVjdG9yIHtmdW5jdGlvbn0g5p6E6YCg5Ye95pWwCiAgICAgICAgICAgICAqIEBwYXJhbSBvYmoge29iamVjdHxBcnJheX3liKTmlq3nmoTlr7nosaEKICAgICAgICAgICAgICogQHBhcmFtIGRlZmF1bHRQcm9wZXJ0eSB7b2JqZWN0PX0KICAgICAgICAgICAgICovCiAgICAgICAgICAgIHRvQWltT2JqZWN0OiBmdW5jdGlvbiAob2JqLCBjb25zdHJ1Y3RvciwgZGVmYXVsdFByb3BlcnR5KSB7CiAgICAgICAgICAgICAgICBpZiAoQmFzZVV0aWxzLmlzQXJyYXkob2JqKSkgewogICAgICAgICAgICAgICAgICAgIHZhciBvcmlnaW5BcnIgPSBbXTsKICAgICAgICAgICAgICAgICAgICBBcnJheVV0aWxzLmVyZ29kaWNBcnJheU9iamVjdCh0aGlzLCBvYmosIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5BcnIucHVzaCh0aGlzLnRvQWltT2JqZWN0KHZhbHVlLCBjb25zdHJ1Y3RvciwgZGVmYXVsdFByb3BlcnR5KSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbkFycjsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdFByb3BlcnR5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXJnb2RpY09iamVjdCh0aGlzLCBkZWZhdWx0UHJvcGVydHksIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqW2tleV0gPT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpba2V5XSA9IHZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIGNvbnN0cnVjdG9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmo7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBvcmlnaW5PYmogPSBvYmo7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG9yaWdpbk9iai5fX3Byb3RvX18gIT09IG51bGwgJiYgb3JpZ2luT2JqLl9fcHJvdG9fXyAhPT0gT2JqZWN0LnByb3RvdHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5PYmogPSBvcmlnaW5PYmouX19wcm90b19fOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBvcmlnaW5PYmouX19wcm90b19fID0gY29uc3RydWN0b3IucHJvdG90eXBlOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBvcmlnaW5PYmo7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDlsIbmlbDnu4TkuK3nu5PmnoTnsbvkvLzlr7nosaHmjIflrprlsZ7mgKfono3lkIjkuLrkuIDkuKrmlbDnu4QKICAgICAgICAgICAgICogQHBhcmFtIGFyciB7QXJyYXl9CiAgICAgICAgICAgICAqIEBwYXJhbSBwcm9wZXJ0eU5hbWVzCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwYXJzZVRoZVNhbWVPYmplY3RQcm9wZXJ0eUluQXJyYXk6IGZ1bmN0aW9uIChhcnIsIHByb3BlcnR5TmFtZXMpIHsKICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB7fTsKICAgICAgICAgICAgICAgIHZhciB0ZW1wID0ge307CiAgICAgICAgICAgICAgICBBcnJheVV0aWxzLmVyZ29kaWNBcnJheU9iamVjdCh0aGlzLCBhcnIsIGZ1bmN0aW9uIChvYmopIHsKICAgICAgICAgICAgICAgICAgICAvLyDojrflj5bmg7PopoHlvpfliLDnmoTmiYDmnInlsZ7mgKfvvIzku6XlsZ7mgKflkI3kuLrplK7lgLzlrZjlgqjliLB0ZW1w5LitCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWFkTGlua1Byb3BlcnR5KG9iaiwgcHJvcGVydHlOYW1lcywgZnVuY3Rpb24gKHZhbHVlLCBwcm9wZXJ0eSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRlbXAuaGFzT3duUHJvcGVydHkocHJvcGVydHkpIHx8ICEoQmFzZVV0aWxzLmlzQXJyYXkodGVtcFtwcm9wZXJ0eV0pKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtwcm9wZXJ0eV0gPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW3Byb3BlcnR5XS5wdXNoKHZhbHVlKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgLy8g6YGN5Y6GdGVtcOiOt+WPluavj+S4qumUruWAvOS4reeahOWAvO+8jOW5tuWNleeLrOWPluWHugogICAgICAgICAgICAgICAgdGhpcy5lcmdvZGljT2JqZWN0KHRoaXMsIHRlbXAsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5jcmVhdGVMaW5rUHJvcGVydHkocmVzdWx0LCBrZXksIHZhbHVlKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xvbmVPYmplY3QocmVzdWx0KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIOWwhuaVsOe7hOS4ree7k+aehOexu+S8vOWvueixoeaMh+WumuWxnuaAp+iejeWQiOS4uuS4gOS4quaVsOe7hAogICAgICAgICAgICAgKiBAcGFyYW0gYXJyIHtBcnJheX0KICAgICAgICAgICAgICovCiAgICAgICAgICAgIHBhcnNlVGhlU2FtZU9iamVjdEFsbFByb3BlcnR5SW5BcnJheTogZnVuY3Rpb24gKGFycikgewogICAgICAgICAgICAgICAgaWYgKCFBcnJheVV0aWxzLmlzQXJyYXlPYmplY3QoYXJyKSB8fCBhcnIubGVuZ3RoIDwgMSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIOiOt+WPluS4gOS4quWvueixoeeahOaJgOacieWxnuaAp++8jOWMheaLrOWGhemDqOWvueixoeeahOWxnuaApwogICAgICAgICAgICAgICAgdmFyIHByb3BlcnR5TmFtZXMgPSBbXTsKICAgICAgICAgICAgICAgIHRoaXMuZXJnb2RpY09iamVjdCh0aGlzLCBhcnJbMF0sIGZ1bmN0aW9uICh2LCBrKSB7CiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlOYW1lcy5wdXNoKGspOwogICAgICAgICAgICAgICAgfSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVRoZVNhbWVPYmplY3RQcm9wZXJ0eUluQXJyYXkoYXJyLCBwcm9wZXJ0eU5hbWVzKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIOiOt+WPluWvueixoeWxnuaAp++8jOiLpeS4uuaVsOe7hOWImeiuoeeul+WFtuS4reaVsOWtl+eahOW5s+Wdh+WAvOaIluWFtuWugwogICAgICAgICAgICAgKiBAcGFyYW0gb2JqCiAgICAgICAgICAgICAqIEBwYXJhbSBwcm9wZXJ0eU5hbWVze0FycmF5PHN0cmluZz58c3RyaW5nfQogICAgICAgICAgICAgKiBAcGFyYW0gdHlwZQogICAgICAgICAgICAgKi8KICAgICAgICAgICAgZ2V0Q2FsY3VsYXRpb25JbkFycmF5QnlMaW5rUHJvcGVydHlOYW1lczogZnVuY3Rpb24gKG9iaiwgcHJvcGVydHlOYW1lcywgdHlwZSkgewogICAgICAgICAgICAgICAgdmFyIHJlc3VsdE9iamVjdCA9IHt9OwogICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc3VtJzoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWFkTGlua1Byb3BlcnR5KG9iaiwgcHJvcGVydHlOYW1lcywgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheVV0aWxzLmlzQXJyYXlPYmplY3QodmFsdWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0T2JqZWN0ID0gX3RoaXMuY3JlYXRlTGlua1Byb3BlcnR5KHJlc3VsdE9iamVjdCwga2V5LCBBcnJheVV0aWxzLmdldFN1bUluQXJyYXkodmFsdWUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2F2ZXJhZ2UnOgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlYWRMaW5rUHJvcGVydHkob2JqLCBwcm9wZXJ0eU5hbWVzLCBmdW5jdGlvbiAodmFsdWUsIGtleSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5VXRpbHMuaXNBcnJheU9iamVjdCh2YWx1ZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRPYmplY3QgPSBfdGhpcy5jcmVhdGVMaW5rUHJvcGVydHkocmVzdWx0T2JqZWN0LCBrZXksIEFycmF5VXRpbHMuZ2V0QXZlcmFnZUluQXJyYXkodmFsdWUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdE9iamVjdDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwoKICAgIC8vIENvbG9yVXRpbHMKICAgIGZhY3RvcnkoJ0NvbG9yVXRpbHMnLCBbXSwgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDovazmjaLpopzoibJyZ2LkuLoxNui/m+WItgogICAgICAgICAgICAgKiBAcGFyYW0gcgogICAgICAgICAgICAgKiBAcGFyYW0gZwogICAgICAgICAgICAgKiBAcGFyYW0gYgogICAgICAgICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9CiAgICAgICAgICAgICAqLwogICAgICAgICAgICByZ2JUb0hleDogZnVuY3Rpb24gKHIsIGcsIGIpIHsKICAgICAgICAgICAgICAgIHZhciBoZXggPSAoKHIgPDwgMTYpIHwgKGcgPDwgOCkgfCBiKS50b1N0cmluZygxNik7CiAgICAgICAgICAgICAgICByZXR1cm4gIiMiICsgbmV3IEFycmF5KE1hdGguYWJzKGhleC5sZW5ndGggLSA3KSkuam9pbigiMCIpICsgaGV4OwogICAgICAgICAgICB9LAogICAgICAgICAgICAvKioKICAgICAgICAgICAgICog6L2s5o2i6aKc6ImyMTbov5vliLbkuLpyZ2IKICAgICAgICAgICAgICogQHBhcmFtIGhleAogICAgICAgICAgICAgKiBAcmV0dXJuIHtBcnJheX0KICAgICAgICAgICAgICovCiAgICAgICAgICAgIGhleFRvUmdiOiBmdW5jdGlvbiAoaGV4KSB7CiAgICAgICAgICAgICAgICBoZXggPSBoZXgucmVwbGFjZSgvIC9nLCAnJyk7CiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gaGV4Lmxlbmd0aDsKICAgICAgICAgICAgICAgIHZhciByZ2IgPSBbXTsKICAgICAgICAgICAgICAgIHN3aXRjaCAobGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICByZ2IucHVzaChwYXJzZUludChoZXhbMV0gKyBoZXhbMV0sIDE2KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJnYi5wdXNoKHBhcnNlSW50KGhleFsyXSArIGhleFsyXSwgMTYpKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmdiLnB1c2gocGFyc2VJbnQoaGV4WzNdICsgaGV4WzNdLCAxNikpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmdiOwogICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCA3OyBpICs9IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJnYi5wdXNoKHBhcnNlSW50KCIweCIgKyBoZXguc2xpY2UoaSwgaSArIDIpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJnYjsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICAvKioKICAgICAgICAgICAgICog5qC55o2u5Lik5Liq6aKc6Imy5Lul5Y+K5LmL6Ze055qE55m+5YiG5q+U6I635Y+W5riQ6L+b6ImyCiAgICAgICAgICAgICAqIEBwYXJhbSBzdGFydAogICAgICAgICAgICAgKiBAcGFyYW0gZW5kCiAgICAgICAgICAgICAqIEBwYXJhbSBwZXJjZW50YWdlCiAgICAgICAgICAgICAqIEByZXR1cm4geyp9CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBncmFkaWVudENvbG9yc1BlcmNlbnRhZ2U6IGZ1bmN0aW9uIChzdGFydCwgZW5kLCBwZXJjZW50YWdlKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0UmdiID0gW107CiAgICAgICAgICAgICAgICB2YXIgc3RhcnRSZ2IgPSB0aGlzLmhleFRvUmdiKHN0YXJ0KTsKICAgICAgICAgICAgICAgIGlmIChlbmQgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGFydDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBlbmRSZ2IgPSB0aGlzLmhleFRvUmdiKGVuZCk7CiAgICAgICAgICAgICAgICB2YXIgdG90YWxSID0gZW5kUmdiWzBdIC0gc3RhcnRSZ2JbMF07CiAgICAgICAgICAgICAgICB2YXIgdG90YWxHID0gZW5kUmdiWzFdIC0gc3RhcnRSZ2JbMV07CiAgICAgICAgICAgICAgICB2YXIgdG90YWxCID0gZW5kUmdiWzJdIC0gc3RhcnRSZ2JbMl07CiAgICAgICAgICAgICAgICByZXN1bHRSZ2IucHVzaChzdGFydFJnYlswXSArIHRvdGFsUiAqIHBlcmNlbnRhZ2UpOwogICAgICAgICAgICAgICAgcmVzdWx0UmdiLnB1c2goc3RhcnRSZ2JbMV0gKyB0b3RhbEcgKiBwZXJjZW50YWdlKTsKICAgICAgICAgICAgICAgIHJlc3VsdFJnYi5wdXNoKHN0YXJ0UmdiWzJdICsgdG90YWxCICogcGVyY2VudGFnZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZ2JUb0hleChyZXN1bHRSZ2JbMF0sIHJlc3VsdFJnYlsxXSwgcmVzdWx0UmdiWzJdKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7CgogICAgZmFjdG9yeSgnRnVuY3Rpb25VdGlscycsIFtdLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIOiOt+WPluaWueazleeahOWQjeWtlwogICAgICAgICAgICAgKiBAcGFyYW0gZnVuYwogICAgICAgICAgICAgKiBAcmV0dXJucyB7Kn0KICAgICAgICAgICAgICovCiAgICAgICAgICAgIGdldEZ1bmN0aW9uTmFtZTogZnVuY3Rpb24gKGZ1bmMpIHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZnVuYyA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgZnVuYyA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICgnJyArIGZ1bmMpLm1hdGNoKC9mdW5jdGlvblxzKihbXHdcJF0qKVxzKlwoLyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuYy5uYW1lIHx8IG5hbWVbMV07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDojrflj5bmlrnms5XnmoTlj4LmlbDlkI0KICAgICAgICAgICAgICogQHBhcmFtIGZ1bmMKICAgICAgICAgICAgICogQHJldHVybnMgeyp9CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBnZXRGdW5jdGlvblBhcmFtczogZnVuY3Rpb24gKGZ1bmMpIHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZnVuYyA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgZnVuYyA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICgnJyArIGZ1bmMpLm1hdGNoKC9mdW5jdGlvbi4qXCgoW14pXSopXCkvKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmFtZVsxXS5yZXBsYWNlKC8oICl8KFxuKS9nLCAnJykuc3BsaXQoJywnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIOmAmui/h+aWueazleeahGFyZ3VtZW50c+iOt+WPluiwg+eUqOivpeaWueazleeahOWHveaVsAogICAgICAgICAgICAgKiBAcGFyYW0gZnVuY19hcmd1bWVudHMKICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ30KICAgICAgICAgICAgICovCiAgICAgICAgICAgIGdldENhbGxlck5hbWU6IGZ1bmN0aW9uIChmdW5jX2FyZ3VtZW50cykgewogICAgICAgICAgICAgICAgdmFyIGNhbGxlciA9IGZ1bmNfYXJndW1lbnRzLmNhbGxlZS5jYWxsZXI7CiAgICAgICAgICAgICAgICB2YXIgY2FsbGVyTmFtZSA9ICcnOwogICAgICAgICAgICAgICAgaWYgKGNhbGxlcikgewogICAgICAgICAgICAgICAgICAgIGNhbGxlck5hbWUgPSB0aGlzLmdldEZ1bmN0aW9uTmFtZShjYWxsZXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxlck5hbWU7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIEZ1bmN0aW9uQnVpbGRlcjogZnVuY3Rpb24gKGZ1bmMpIHsKICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgICAgICB2YXIgZnMgPSBbXTsKICAgICAgICAgICAgICAgIGZzLnB1c2goZnVuYyk7CiAgICAgICAgICAgICAgICB2YXIgcHJvcGVydGllcyA9IFsncHVzaCcsICd1bnNoaWZ0JywgJ3NsaWNlJywgJ21hcCcsICdmb3JFYWNoJywgJ2tleXMnLCAnZmluZCcsICdjb25jYXQnLCAnZmlsbCcsICdzaGlmdCcsICd2YWx1ZXMnXTsKICAgICAgICAgICAgICAgIHByb3BlcnRpZXMubWFwKGZ1bmN0aW9uIChwcm9wZXJ0eSkgewogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgQXJyYXkucHJvdG90eXBlW3Byb3BlcnR5XSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX3RoaXMsIHByb3BlcnR5LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmc1twcm9wZXJ0eV0uYXBwbHkoZnMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJmcyA9IFtdOwogICAgICAgICAgICAgICAgICAgIGZzLm1hcChmdW5jdGlvbiAoZiwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZnMucHVzaChmKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWNsYXJlVmFyID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBhcmd1bWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzOiB0aGlzCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHJmcy5tYXAoZnVuY3Rpb24gKGYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkdiA9IGYuYXBwbHkoY29udGV4dCB8fCB0aGlzLCBbZGVjbGFyZVZhcl0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGR2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQmFzZVV0aWxzLmtleXMoZHYpLm1hcChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY2xhcmVWYXJba2V5XSA9IGR2W2tleV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVjbGFyZVZhci5yZXR1cm5WYWx1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGludm9rZU1ldGhvZHM6IGZ1bmN0aW9uIChjb250ZXh0LCBtZXRob2RzLCBhcmdzKSB7CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNBcnJheShtZXRob2RzKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0gW107CiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICAgICAgdGhpcy5lcmdvZGljQXJyYXlPYmplY3QoY29udGV4dCwgbWV0aG9kcywgZnVuY3Rpb24gKG1ldGhvZCkgewogICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuaXNGdW5jdGlvbihtZXRob2QpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKAogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2QuYXBwbHkoY29udGV4dCwgYXJncykKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0czsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwoKICAgIGZhY3RvcnkoJ1VybFV0aWxzJywgW10sIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBnZXRVcmxJbmZvOiBmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgc291cmNlOiB1cmwsCiAgICAgICAgICAgICAgICAgICAgcHJvdG9jb2w6IGEucHJvdG9jb2wucmVwbGFjZSgnOicsICcnKSwKICAgICAgICAgICAgICAgICAgICBob3N0OiBhLmhvc3RuYW1lLAogICAgICAgICAgICAgICAgICAgIHBvcnQ6IGEucG9ydCwKICAgICAgICAgICAgICAgICAgICBxdWVyeTogYS5zZWFyY2gsCiAgICAgICAgICAgICAgICAgICAgZmlsZTogKGEucGF0aG5hbWUubWF0Y2goL1wvKFteXC8/I10rKSQvaSkgfHwgWywgJyddKVsxXSwKICAgICAgICAgICAgICAgICAgICBoYXNoOiBhLmhhc2gucmVwbGFjZSgnIycsICcnKSwKICAgICAgICAgICAgICAgICAgICBwYXRoOiBhLnBhdGhuYW1lLnJlcGxhY2UoL14oW15cL10pLywgJy8kMScpLAogICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlOiAoYS5ocmVmLm1hdGNoKC90cHM/OlwvXC9bXlwvXSsoLispLykgfHwgWywgJyddKVsxXSwKICAgICAgICAgICAgICAgICAgICBzZWdtZW50czogYS5wYXRobmFtZS5yZXBsYWNlKC9eXC8vLCAnJykuc3BsaXQoJy8nKSwKICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXQgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlZyA9IGEuc2VhcmNoLnJlcGxhY2UoL15cPy8sICcnKS5zcGxpdCgnJicpLmZpbHRlcihmdW5jdGlvbiAodiwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYgIT09ICcnICYmIHYuaW5kZXhPZignPScpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBzZWcuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSBlbGVtZW50LmluZGV4T2YoJz0nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBlbGVtZW50LnN1YnN0cmluZygwLCBpZHgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IGVsZW1lbnQuc3Vic3RyaW5nKGlkeCArIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0W2tleV0gPSB2YWw7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0OwogICAgICAgICAgICAgICAgICAgIH0pKCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHVybE1hdGNoaW5nOiBmdW5jdGlvbiAodXJsLCBtYXRjaFVybCkgewogICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBuZXcgUmVnRXhwKG1hdGNoVXJsKTsKICAgICAgICAgICAgICAgIHJldHVybiBwYXR0ZXJuLnRlc3QodXJsKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0VXJsV2l0aG91dFBhcmFtOiBmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdXJsLnNwbGl0KCc/JylbMF07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldFBhcmFtRnJvbVVybDogZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IFtdOwogICAgICAgICAgICAgICAgdmFyIHBhcmFtc09iamVjdCA9IHRoaXMuZ2V0VXJsSW5mbyh1cmwpLnBhcmFtczsKICAgICAgICAgICAgICAgIEJhc2VVdGlscy5rZXlzKHBhcmFtc09iamVjdCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGtleSwKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHBhcmFtc09iamVjdFtrZXldCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgLy8gdmFyIHBhcnRzID0gdXJsLnNwbGl0KCc/Jyk7CiAgICAgICAgICAgICAgICAvLyBpZiAocGFydHMubGVuZ3RoIDwgMikgewogICAgICAgICAgICAgICAgLy8gICAgIHJldHVybiBwYXJhbXM7CiAgICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgICAgICAvLyB2YXIgcGFyYW1zU3RyID0gcGFydHNbMV0uc3BsaXQoJyYnKTsKICAgICAgICAgICAgICAgIC8vIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyYW1zU3RyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAvLyAgICAgdmFyIGluZGV4ID0gcGFyYW1zU3RyW2ldLmluZGV4T2YoJz0nKTsKICAgICAgICAgICAgICAgIC8vICAgICB2YXIgcHMgPSBuZXcgQXJyYXkoMik7CiAgICAgICAgICAgICAgICAvLyAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgICAgICAgICAgLy8gICAgICAgICBwcyA9IFsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHBhcmFtc1N0cltpXS5zdWJzdHJpbmcoMCwgaW5kZXgpLAogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgcGFyYW1zU3RyW2ldLnN1YnN0cmluZyhpbmRleCArIDEpLAogICAgICAgICAgICAgICAgLy8gICAgICAgICBdOwogICAgICAgICAgICAgICAgLy8gICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHBzWzBdID0gcGFyYW1zU3RyW2ldOwogICAgICAgICAgICAgICAgLy8gICAgIH0KICAgICAgICAgICAgICAgIC8vICAgICBwYXJhbXMucHVzaCh7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGtleTogcHNbMF0sCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHZhbHVlOiBwc1sxXQogICAgICAgICAgICAgICAgLy8gICAgIH0pOwogICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtczsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWFyZ2VVcmxBbmRQYXJhbXM6IGZ1bmN0aW9uICh1cmwsIHBhcmFtcykgewogICAgICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKCc/JykgIT09IC0xIHx8ICEocGFyYW1zIGluc3RhbmNlb2YgQXJyYXkpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVybDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBwYXJhbXNTdHIgPSBbXTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFtc1tpXS5rZXkgIT09IG51bGwgJiYgcGFyYW1zW2ldLnZhbHVlICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGFyYW1zW2ldLmtleSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zU3RyLnB1c2gocGFyYW1zW2ldLnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtc1N0ci5wdXNoKHBhcmFtc1tpXS5rZXkgKyAnPScgKyBwYXJhbXNbaV0udmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHVybCArICc/JyArIHBhcmFtc1N0ci5qb2luKCcmJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKCiAgICBmYWN0b3J5KCdQb2ludFV0aWxzJywgW10sIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgUG9pbnQyRCA9IGZ1bmN0aW9uICh4LCB5KSB7CiAgICAgICAgICAgIHRoaXMueCA9IHggfHwgMDsKICAgICAgICAgICAgdGhpcy55ID0geSB8fCAwOwogICAgICAgIH07CiAgICAgICAgUG9pbnQyRC5wcm90b3R5cGUgPSB7CiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiBQb2ludDJELAogICAgICAgICAgICAvKioKICAgICAgICAgICAgICog6I635Y+W5oyH5a6a6Led56a75ZKM6KeS5bqm5a+55bqU55qE5bmz6Z2i54K5CiAgICAgICAgICAgICAqIEBwYXJhbSBkaXN0YW5jZQogICAgICAgICAgICAgKiBAcGFyYW0gZGVnCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBnZXRPdGhlclBvaW50RnJvbURpc3RhbmNlQW5kRGVnOiBmdW5jdGlvbiAoZGlzdGFuY2UsIGRlZykgewogICAgICAgICAgICAgICAgdmFyIHJhZGlhbiA9IE1hdGguUEkgLyAxODAgKiBkZWc7CiAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpOwogICAgICAgICAgICAgICAgcG9pbnQueCA9IGRpc3RhbmNlICogTWF0aC5zaW4ocmFkaWFuKSArIHRoaXMueDsKICAgICAgICAgICAgICAgIHBvaW50LnkgPSB0aGlzLnkgLSBkaXN0YW5jZSAqIE1hdGguY29zKHJhZGlhbik7CiAgICAgICAgICAgICAgICByZXR1cm4gcG9pbnQ7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDojrflj5blvZPliY3lubPpnaLngrnkuI7lj6bkuIDkuKrlubPpnaLngrnkuYvpl7TnmoTot53nprsKICAgICAgICAgICAgICogQHBhcmFtIHAKICAgICAgICAgICAgICogQHJldHVybnMge251bWJlcn0KICAgICAgICAgICAgICovCiAgICAgICAgICAgIGdldERpc3RhbmNlRnJvbUFub3RoZXJQb2ludDogZnVuY3Rpb24gKHApIHsKICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQoKHRoaXMueCAtIHAueCkgKiAodGhpcy54IC0gcC54KSArICh0aGlzLnkgLSBwLnkpICogKHRoaXMueSAtIHAueSkpOwogICAgICAgICAgICB9LAogICAgICAgICAgICAvKioKICAgICAgICAgICAgICog6I635Y+W5b2T5YmN5bmz6Z2i54K55LiO5Y+m5LiA5Liq5bmz6Z2i54K55LmL6Ze055qE6KeS5bqmCiAgICAgICAgICAgICAqIEBwYXJhbSBwCiAgICAgICAgICAgICAqIEByZXR1cm5zIHtudW1iZXJ9CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBnZXREZWdGcm9tQW5vdGhlclBvaW50OiBmdW5jdGlvbiAocCkgewogICAgICAgICAgICAgICAgdmFyIHVzZWRQb2ludCA9IG5ldyBQb2ludDJEKHAueCAqIDEwMDAwMDAgLSB0aGlzLnggKiAxMDAwMDAwLCBwLnkgKiAxMDAwMDAwIC0gdGhpcy55ICogMTAwMDAwMCk7CiAgICAgICAgICAgICAgICB2YXIgcmFkaWFuID0gTWF0aC5hdGFuMih1c2VkUG9pbnQueCAqIDEwMDAwMDAsIHVzZWRQb2ludC55ICogMTAwMDAwMCk7CiAgICAgICAgICAgICAgICB2YXIgZGVnID0gcmFkaWFuICogMTgwIC8gTWF0aC5QSTsKICAgICAgICAgICAgICAgIHJldHVybiAxODAgLSBkZWc7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDliKTmlq3or6XngrnmmK/lkKbkvY3kuo7kuIDnn6nlvaLlhoXpg6gKICAgICAgICAgICAgICogQHBhcmFtIHgg55+p5b2i5byA5aeL5Z2Q5qCHeAogICAgICAgICAgICAgKiBAcGFyYW0geSDnn6nlvaLlvIDlp4vlnZDmoId5CiAgICAgICAgICAgICAqIEBwYXJhbSB3aWR0aCDnn6nlvaLlrr0KICAgICAgICAgICAgICogQHBhcmFtIGhlaWdodCDnn6nlvaLplb8KICAgICAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBpc0luUmVjdDogZnVuY3Rpb24gKHgsIHksIHdpZHRoLCBoZWlnaHQpIHsKICAgICAgICAgICAgICAgIHZhciBweCA9IHRoaXMueDsKICAgICAgICAgICAgICAgIHZhciBweSA9IHRoaXMueTsKICAgICAgICAgICAgICAgIGlmIChweCA8IHggfHwgcHggPiB4ICsgd2lkdGgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gIShweSA8IHkgfHwgcHkgPiB5ICsgaGVpZ2h0KTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgUG9pbnQyRDogUG9pbnQyRAogICAgICAgIH0KICAgIH0pOwoKICAgIF9nbG9iYWwuZXZlcnlVdGlscyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoQmFzZVV0aWxzLmlzQXJyYXkoYXJndW1lbnRzWzBdKSkgewogICAgICAgICAgICBkZXBlbmQuY2FsbChhcmd1bWVudHNbMl0gfHwgdGhpcywgYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0pOwogICAgICAgIH0gZWxzZSBpZiAoQmFzZVV0aWxzLmlzRnVuY3Rpb24oYXJndW1lbnRzWzBdKSkgewogICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50czsKICAgICAgICAgICAgZGVwZW5kLmNhbGwoYXJndW1lbnRzWzFdIHx8IHRoaXMsIFsnRnVuY3Rpb25VdGlscyddLCBmdW5jdGlvbiAoRnVuY3Rpb25VdGlscykgewogICAgICAgICAgICAgICAgdmFyIGRlcGVuZHMgPSBGdW5jdGlvblV0aWxzLmdldEZ1bmN0aW9uUGFyYW1zKGFyZ3NbMF0pOwogICAgICAgICAgICAgICAgZGVwZW5kKGRlcGVuZHMsIGFyZ3NbMF0pOwogICAgICAgICAgICB9KQogICAgICAgIH0KICAgIH07CgogICAgX2dsb2JhbC5lVXRpbHMgPSAoZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB1dGlscyA9IHt9OwogICAgICAgIGlmICh3aW5kb3cuZXZlcnlVdGlscykgewogICAgICAgICAgICB3aW5kb3cuZXZlcnlVdGlscyhmdW5jdGlvbiAoCiAgICAgICAgICAgICAgICBBcnJheVV0aWxzLAogICAgICAgICAgICAgICAgT2JqZWN0VXRpbHMsCiAgICAgICAgICAgICAgICBCYXNlVXRpbHMsCiAgICAgICAgICAgICAgICBGdW5jdGlvblV0aWxzLAogICAgICAgICAgICAgICAgQ29sb3JVdGlscywKICAgICAgICAgICAgICAgIFBvaW50VXRpbHMsCiAgICAgICAgICAgICAgICBVcmxVdGlscykgewogICAgICAgICAgICAgICAgdXRpbHMgPSB7CiAgICAgICAgICAgICAgICAgICAgQXJyYXlVdGlsczogQXJyYXlVdGlscywKICAgICAgICAgICAgICAgICAgICBPYmplY3RVdGlsczogT2JqZWN0VXRpbHMsCiAgICAgICAgICAgICAgICAgICAgQmFzZVV0aWxzOiBCYXNlVXRpbHMsCiAgICAgICAgICAgICAgICAgICAgQ29sb3JVdGlsczogQ29sb3JVdGlscywKICAgICAgICAgICAgICAgICAgICBVcmxVdGlsczogVXJsVXRpbHMsCiAgICAgICAgICAgICAgICAgICAgdXJsVXRpbHM6IFVybFV0aWxzLAogICAgICAgICAgICAgICAgICAgIFBvaW50VXRpbHM6IFBvaW50VXRpbHMsCiAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25VdGlsczogRnVuY3Rpb25VdGlscwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHZhciBwcm94eSA9IHt9OwogICAgICAgIE9iamVjdC5rZXlzKHV0aWxzKS5mb3JFYWNoKGZ1bmN0aW9uICh1dGlsTmFtZSkgewogICAgICAgICAgICBpZiAoIXV0aWxOYW1lKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3h5LCB1dGlsTmFtZSwgewogICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHV0aWxzW3V0aWxOYW1lXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIE9iamVjdC5rZXlzKHV0aWxzW3V0aWxOYW1lXSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgICBpZiAoIWtleSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChwcm94eVtrZXldKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3h5LCBrZXksIHsKICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHV0aWxzW3V0aWxOYW1lXVtrZXldOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHByb3h5OwogICAgfSkoKTsKCiAgICByZXR1cm4gX2dsb2JhbC5lVXRpbHM7Cn0pKTsKCgp+ZnVuY3Rpb24gKHV0aWxzKSB7CiAgICB2YXIgX2dsb2JhbCA9IHRoaXM7CiAgICB2YXIgRUhvb2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9hdXRvSWQgPSAxOwogICAgICAgIHZhciBfaG9va2VkTWFwID0ge307CiAgICAgICAgdmFyIF9ob29rZWRDb250ZXh0TWFwID0ge307CiAgICAgICAgdGhpcy5fZ2V0SG9va2VkTWFwID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gX2hvb2tlZE1hcDsKICAgICAgICB9OwogICAgICAgIHRoaXMuX2dldEhvb2tlZENvbnRleHRNYXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBfaG9va2VkQ29udGV4dE1hcDsKICAgICAgICB9OwogICAgICAgIHRoaXMuX2dldEF1dG9TdHJJZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuICdfX2F1dG9fXycgKyBfYXV0b0lkKys7CiAgICAgICAgfTsKICAgICAgICB0aGlzLl9nZXRBdXRvSWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBfYXV0b0lkKys7CiAgICAgICAgfTsKICAgIH07CiAgICBFSG9vay5wcm90b3R5cGUgPSB7CiAgICAgICAgLyoqCiAgICAgICAgICog6I635Y+W5LiA5Liq5a+56LGh55qE5Yqr5oyBaWTvvIzoi6XmsqHmnInliJnliJvlu7rkuIDkuKoKICAgICAgICAgKiBAcGFyYW0gY29udGV4dAogICAgICAgICAqIEByZXR1cm4geyp9CiAgICAgICAgICogQHByaXZhdGUKICAgICAgICAgKi8KICAgICAgICBfZ2V0SG9va2VkSWQ6IGZ1bmN0aW9uIChjb250ZXh0KSB7CiAgICAgICAgICAgIHZhciBjb250ZXh0TWFwID0gdGhpcy5fZ2V0SG9va2VkQ29udGV4dE1hcCgpOwogICAgICAgICAgICB2YXIgaG9va2VkSWQgPSBudWxsOwogICAgICAgICAgICBPYmplY3Qua2V5cyhjb250ZXh0TWFwKS5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoY29udGV4dCA9PT0gY29udGV4dE1hcFtrZXldKSB7CiAgICAgICAgICAgICAgICAgICAgaG9va2VkSWQgPSBrZXk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoaG9va2VkSWQgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgaG9va2VkSWQgPSB0aGlzLl9nZXRBdXRvU3RySWQoKTsKICAgICAgICAgICAgICAgIGNvbnRleHRNYXBbaG9va2VkSWRdID0gY29udGV4dDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gaG9va2VkSWQ7CiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiDojrflj5bkuIDkuKrlr7nosaHnmoTliqvmjIHmlrnms5XmmKDlsITvvIzoi6XmsqHmnInliJnliJvlu7rkuIDkuKoKICAgICAgICAgKiBAcGFyYW0gY29udGV4dAogICAgICAgICAqIEByZXR1cm4geyp9CiAgICAgICAgICogQHByaXZhdGUKICAgICAgICAgKi8KICAgICAgICBfZ2V0SG9va2VkTWV0aG9kTWFwOiBmdW5jdGlvbiAoY29udGV4dCkgewogICAgICAgICAgICB2YXIgaG9va2VkSWQgPSB0aGlzLl9nZXRIb29rZWRJZChjb250ZXh0KTsKICAgICAgICAgICAgdmFyIGhvb2tlZE1hcCA9IHRoaXMuX2dldEhvb2tlZE1hcCgpOwogICAgICAgICAgICB2YXIgdGhpc1Rhc2sgPSBob29rZWRNYXBbaG9va2VkSWRdOwogICAgICAgICAgICBpZiAoIXV0aWxzLmlzRXhpc3RPYmplY3QodGhpc1Rhc2spKSB7CiAgICAgICAgICAgICAgICB0aGlzVGFzayA9IGhvb2tlZE1hcFtob29rZWRJZF0gPSB7fTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGhpc1Rhc2s7CiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiDojrflj5blr7nlupTmlrnms5XnmoRob29r5Y6f5Z6L5Lu75Yqh5a+56LGh77yM6Iul5rKh5pyJ5YiZ5Yid5aeL5YyW5LiA5Liq44CCCiAgICAgICAgICogQHBhcmFtIGNvbnRleHQKICAgICAgICAgKiBAcGFyYW0gbWV0aG9kTmFtZQogICAgICAgICAqIEBwcml2YXRlCiAgICAgICAgICovCiAgICAgICAgX2dldEhvb2tlZE1ldGhvZFRhc2s6IGZ1bmN0aW9uIChjb250ZXh0LCBtZXRob2ROYW1lKSB7CiAgICAgICAgICAgIHZhciB0aGlzTWV0aG9kTWFwID0gdGhpcy5fZ2V0SG9va2VkTWV0aG9kTWFwKGNvbnRleHQpOwogICAgICAgICAgICB2YXIgdGhpc01ldGhvZCA9IHRoaXNNZXRob2RNYXBbbWV0aG9kTmFtZV07CiAgICAgICAgICAgIGlmICghdXRpbHMuaXNFeGlzdE9iamVjdCh0aGlzTWV0aG9kKSkgewogICAgICAgICAgICAgICAgdGhpc01ldGhvZCA9IHRoaXNNZXRob2RNYXBbbWV0aG9kTmFtZV0gPSB7CiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWw6IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgICAgICByZXBsYWNlOiB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICAgICAgdGFzazogewogICAgICAgICAgICAgICAgICAgICAgICBiZWZvcmU6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50OiB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyOiBbXQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRoaXNNZXRob2Q7CiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiDmiafooYzlpJrkuKrmlrnms5Xlubbms6jlhaXkuIDkuKrmlrnms5Xlkozlj4LmlbDpm4blkIgKICAgICAgICAgKiBAcGFyYW0gY29udGV4dAogICAgICAgICAqIEBwYXJhbSBtZXRob2RzCiAgICAgICAgICogQHBhcmFtIGFyZ3MKICAgICAgICAgKiBAcmV0dXJuIHJlc3VsdCDmnIDlkI7kuIDmrKHmiafooYzmlrnms5XnmoTmnInmlYjov5Tlm57lgLwKICAgICAgICAgKiBAcHJpdmF0ZQogICAgICAgICAqLwogICAgICAgIF9pbnZva2VNZXRob2RzOiBmdW5jdGlvbiAoY29udGV4dCwgbWV0aG9kcywgYXJncykgewogICAgICAgICAgICBpZiAoIXV0aWxzLmlzQXJyYXkobWV0aG9kcykpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgcmVzdWx0ID0gbnVsbDsKICAgICAgICAgICAgdXRpbHMuZXJnb2RpY0FycmF5T2JqZWN0KGNvbnRleHQsIG1ldGhvZHMsIGZ1bmN0aW9uIChfbWV0aG9kKSB7CiAgICAgICAgICAgICAgICBpZiAoIXV0aWxzLmlzRnVuY3Rpb24oX21ldGhvZC5tZXRob2QpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIHIgPSBfbWV0aG9kLm1ldGhvZC5hcHBseSh0aGlzLCBhcmdzKTsKICAgICAgICAgICAgICAgIGlmIChyICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9LAogICAgICAgIC8qKgogICAgICAgICAqIOeUn+aIkOWSjOabv+aNouWKq+aMgeaWueazlQogICAgICAgICAqIEBwYXJhbSBwYXJlbnQKICAgICAgICAgKiBAcGFyYW0gY29udGV4dAogICAgICAgICAqIEBwYXJhbSBtZXRob2ROYW1lIHtzdHJpbmd9CiAgICAgICAgICogQHByaXZhdGUKICAgICAgICAgKi8KICAgICAgICBfaG9vazogZnVuY3Rpb24gKHBhcmVudCwgbWV0aG9kTmFtZSwgY29udGV4dCkgewogICAgICAgICAgICBpZiAoY29udGV4dCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICBjb250ZXh0ID0gcGFyZW50OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBtZXRob2QgPSBwYXJlbnRbbWV0aG9kTmFtZV07CiAgICAgICAgICAgIHZhciBtZXRob2RUYXNrID0gdGhpcy5fZ2V0SG9va2VkTWV0aG9kVGFzayhwYXJlbnQsIG1ldGhvZE5hbWUpOwogICAgICAgICAgICBpZiAoIW1ldGhvZFRhc2sub3JpZ2luYWwpIHsKICAgICAgICAgICAgICAgIG1ldGhvZFRhc2sub3JpZ2luYWwgPSBtZXRob2Q7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHV0aWxzLmlzRXhpc3RPYmplY3QobWV0aG9kVGFzay5yZXBsYWNlKSAmJiB1dGlscy5pc0Z1bmN0aW9uKG1ldGhvZFRhc2sucmVwbGFjZS5tZXRob2QpKSB7CiAgICAgICAgICAgICAgICBwYXJlbnRbbWV0aG9kTmFtZV0gPSBtZXRob2RUYXNrLnJlcGxhY2UubWV0aG9kKG1ldGhvZFRhc2sub3JpZ2luYWwpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBpbnZva2VNZXRob2RzID0gdGhpcy5faW52b2tlTWV0aG9kczsKICAgICAgICAgICAgLy8g57uE6KOF5Yqr5oyB5Ye95pWwCiAgICAgICAgICAgIHZhciBidWlsZGVyID0gbmV3IHV0aWxzLkZ1bmN0aW9uQnVpbGRlcihmdW5jdGlvbiAodikgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHVuZGVmaW5lZAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmIChtZXRob2RUYXNrLnRhc2suYmVmb3JlLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGJ1aWxkZXIucHVzaChmdW5jdGlvbiAodikgewogICAgICAgICAgICAgICAgICAgIGludm9rZU1ldGhvZHMoY29udGV4dCB8fCB2LnRoaXMsIG1ldGhvZFRhc2sudGFzay5iZWZvcmUsIFttZXRob2RUYXNrLm9yaWdpbmFsLCB2LmFyZ3VtZW50c10pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHV0aWxzLmlzRXhpc3RPYmplY3QobWV0aG9kVGFzay50YXNrLmN1cnJlbnQpICYmIHV0aWxzLmlzRnVuY3Rpb24obWV0aG9kVGFzay50YXNrLmN1cnJlbnQubWV0aG9kKSkgewogICAgICAgICAgICAgICAgYnVpbGRlci5wdXNoKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBtZXRob2RUYXNrLnRhc2suY3VycmVudC5tZXRob2QuY2FsbChjb250ZXh0IHx8IHYudGhpcywgcGFyZW50LCBtZXRob2RUYXNrLm9yaWdpbmFsLCB2LmFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGJ1aWxkZXIucHVzaChmdW5jdGlvbiAodikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogbWV0aG9kVGFzay5vcmlnaW5hbC5hcHBseShjb250ZXh0IHx8IHYudGhpcywgdi5hcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1ldGhvZFRhc2sudGFzay5hZnRlci5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBidWlsZGVyLnB1c2goZnVuY3Rpb24gKHYpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IFtdOwogICAgICAgICAgICAgICAgICAgIGFyZ3MucHVzaChtZXRob2RUYXNrLm9yaWdpbmFsKTsKICAgICAgICAgICAgICAgICAgICBhcmdzLnB1c2godi5hcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIGFyZ3MucHVzaCh2LnJlc3VsdCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBpbnZva2VNZXRob2RzKGNvbnRleHQgfHwgdi50aGlzLCBtZXRob2RUYXNrLnRhc2suYWZ0ZXIsIGFyZ3MpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogKHIgIT0gbnVsbCA/IHIgOiB2LnJlc3VsdCkKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnVpbGRlci5wdXNoKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlOiB2LnJlc3VsdAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8vIHZhciBtZXRob2RTdHIgPSAnKGZ1bmN0aW9uKCl7XG4nOwogICAgICAgICAgICAvLyBtZXRob2RTdHIgPSBtZXRob2RTdHIgKyAndmFyIHJlc3VsdCA9IHVuZGVmaW5lZDtcbic7CiAgICAgICAgICAgIC8vIGlmIChtZXRob2RUYXNrLnRhc2suYmVmb3JlLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgLy8gICAgIG1ldGhvZFN0ciA9IG1ldGhvZFN0ciArICdpbnZva2VNZXRob2RzKGNvbnRleHQsIG1ldGhvZFRhc2sudGFzay5iZWZvcmUsW21ldGhvZFRhc2sub3JpZ2luYWwsIGFyZ3VtZW50c10pO1xuJzsKICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAvLyBpZiAodXRpbHMuaXNFeGlzdE9iamVjdChtZXRob2RUYXNrLnRhc2suY3VycmVudCkgJiYgdXRpbHMuaXNGdW5jdGlvbihtZXRob2RUYXNrLnRhc2suY3VycmVudC5tZXRob2QpKSB7CiAgICAgICAgICAgIC8vICAgICBtZXRob2RTdHIgPSBtZXRob2RTdHIgKyAncmVzdWx0ID0gbWV0aG9kVGFzay50YXNrLmN1cnJlbnQubWV0aG9kLmNhbGwoY29udGV4dCwgcGFyZW50LCBtZXRob2RUYXNrLm9yaWdpbmFsLCBhcmd1bWVudHMpO1xuJzsKICAgICAgICAgICAgLy8gfSBlbHNlIHsKICAgICAgICAgICAgLy8gICAgIG1ldGhvZFN0ciA9IG1ldGhvZFN0ciArICdyZXN1bHQgPSBtZXRob2RUYXNrLm9yaWdpbmFsLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG4nOwogICAgICAgICAgICAvLyB9CiAgICAgICAgICAgIC8vIGlmIChtZXRob2RUYXNrLnRhc2suYWZ0ZXIubGVuZ3RoID4gMCkgewogICAgICAgICAgICAvLyAgICAgbWV0aG9kU3RyID0gbWV0aG9kU3RyICsgJ3ZhciBhcmdzID0gW107YXJncy5wdXNoKG1ldGhvZFRhc2sub3JpZ2luYWwpO2FyZ3MucHVzaChhcmd1bWVudHMpO2FyZ3MucHVzaChyZXN1bHQpO1xuJzsKICAgICAgICAgICAgLy8gICAgIG1ldGhvZFN0ciA9IG1ldGhvZFN0ciArICd2YXIgciA9IGludm9rZU1ldGhvZHMoY29udGV4dCwgbWV0aG9kVGFzay50YXNrLmFmdGVyLCBhcmdzKTtyZXN1bHQgPSAociE9bnVsbD9yOnJlc3VsdCk7XG4nOwogICAgICAgICAgICAvLyB9CiAgICAgICAgICAgIC8vIG1ldGhvZFN0ciA9IG1ldGhvZFN0ciArICdyZXR1cm4gcmVzdWx0O1xufSknOwogICAgICAgICAgICAvLyDnu5HlrprliqvmjIHlh73mlbAKICAgICAgICAgICAgdmFyIHJlc3VsdEZ1bmMgPSBidWlsZGVyLnJlc3VsdCgpOwogICAgICAgICAgICBmb3IgKHZhciBwcm94eU5hbWUgaW4gbWV0aG9kVGFzay5vcmlnaW5hbCkgewogICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlc3VsdEZ1bmMsIHByb3h5TmFtZSwgewogICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWV0aG9kVGFzay5vcmlnaW5hbFtwcm94eU5hbWVdOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodikgewogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RUYXNrLm9yaWdpbmFsW3Byb3h5TmFtZV0gPSB2OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVzdWx0RnVuYy5wcm90b3R5cGUgPSBtZXRob2RUYXNrLm9yaWdpbmFsLnByb3RvdHlwZTsKICAgICAgICAgICAgcGFyZW50W21ldGhvZE5hbWVdID0gcmVzdWx0RnVuYzsKICAgICAgICB9LAogICAgICAgIC8qKgogICAgICAgICAqIOWKq+aMgeS4gOS4quaWueazlQogICAgICAgICAqIEBwYXJhbSBwYXJlbnQKICAgICAgICAgKiBAcGFyYW0gbWV0aG9kTmFtZSB7c3RyaW5nfQogICAgICAgICAqIEBwYXJhbSBjb25maWcKICAgICAgICAgKi8KICAgICAgICBob29rOiBmdW5jdGlvbiAocGFyZW50LCBtZXRob2ROYW1lLCBjb25maWcpIHsKICAgICAgICAgICAgdmFyIGhvb2tlZEZhaWx1cmUgPSAtMTsKICAgICAgICAgICAgLy8g6LCD55So5pa55rOV55qE5LiK5LiL5paHCiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gY29uZmlnLmNvbnRleHQgIT09IHVuZGVmaW5lZCA/IGNvbmZpZy5jb250ZXh0IDogcGFyZW50OwogICAgICAgICAgICBpZiAocGFyZW50W21ldGhvZE5hbWVdID09IG51bGwpIHsKICAgICAgICAgICAgICAgIHBhcmVudFttZXRob2ROYW1lXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIXV0aWxzLmlzRnVuY3Rpb24ocGFyZW50W21ldGhvZE5hbWVdKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGhvb2tlZEZhaWx1cmU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIG1ldGhvZFRhc2sgPSB0aGlzLl9nZXRIb29rZWRNZXRob2RUYXNrKHBhcmVudCwgbWV0aG9kTmFtZSk7CiAgICAgICAgICAgIHZhciBpZCA9IHRoaXMuX2dldEF1dG9JZCgpOwogICAgICAgICAgICBpZiAodXRpbHMuaXNGdW5jdGlvbihjb25maWcucmVwbGFjZSkpIHsKICAgICAgICAgICAgICAgIG1ldGhvZFRhc2sucmVwbGFjZSA9IHsKICAgICAgICAgICAgICAgICAgICBpZDogaWQsCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBjb25maWcucmVwbGFjZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGhvb2tlZEZhaWx1cmUgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh1dGlscy5pc0Z1bmN0aW9uKGNvbmZpZy5iZWZvcmUpKSB7CiAgICAgICAgICAgICAgICBtZXRob2RUYXNrLnRhc2suYmVmb3JlLnB1c2goewogICAgICAgICAgICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IGNvbmZpZy5iZWZvcmUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaG9va2VkRmFpbHVyZSA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHV0aWxzLmlzRnVuY3Rpb24oY29uZmlnLmN1cnJlbnQpKSB7CiAgICAgICAgICAgICAgICBtZXRob2RUYXNrLnRhc2suY3VycmVudCA9IHsKICAgICAgICAgICAgICAgICAgICBpZDogaWQsCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBjb25maWcuY3VycmVudAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGhvb2tlZEZhaWx1cmUgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh1dGlscy5pc0Z1bmN0aW9uKGNvbmZpZy5hZnRlcikpIHsKICAgICAgICAgICAgICAgIG1ldGhvZFRhc2sudGFzay5hZnRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBpZDogaWQsCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBjb25maWcuYWZ0ZXIKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaG9va2VkRmFpbHVyZSA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGhvb2tlZEZhaWx1cmUgPT09IDApIHsKICAgICAgICAgICAgICAgIHRoaXMuX2hvb2socGFyZW50LCBtZXRob2ROYW1lLCBjb250ZXh0KTsKICAgICAgICAgICAgICAgIHJldHVybiBpZDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBob29rZWRGYWlsdXJlOwogICAgICAgICAgICB9CgogICAgICAgIH0sCiAgICAgICAgLyoqCiAgICAgICAgICog5Yqr5oyB5pu/5o2i5LiA5Liq5pa55rOVCiAgICAgICAgICogQHBhcmFtIHBhcmVudAogICAgICAgICAqIEBwYXJhbSBjb250ZXh0CiAgICAgICAgICogQHBhcmFtIG1ldGhvZE5hbWUge3N0cmluZ30KICAgICAgICAgKiBAcGFyYW0gcmVwbGFjZSB7ZnVuY3Rpb259CiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfSDor6XmrKHliqvmjIHnmoRpZAogICAgICAgICAqLwogICAgICAgIGhvb2tSZXBsYWNlOiBmdW5jdGlvbiAocGFyZW50LCBtZXRob2ROYW1lLCByZXBsYWNlLCBjb250ZXh0KSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmhvb2socGFyZW50LCBtZXRob2ROYW1lLCB7CiAgICAgICAgICAgICAgICByZXBsYWNlOiByZXBsYWNlLAogICAgICAgICAgICAgICAgY29udGV4dDogY29udGV4dAogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGhvb2tCZWZvcmU6IGZ1bmN0aW9uIChwYXJlbnQsIG1ldGhvZE5hbWUsIGJlZm9yZSwgY29udGV4dCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5ob29rKHBhcmVudCwgbWV0aG9kTmFtZSwgewogICAgICAgICAgICAgICAgYmVmb3JlOiBiZWZvcmUsCiAgICAgICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgaG9va0N1cnJlbnQ6IGZ1bmN0aW9uIChwYXJlbnQsIG1ldGhvZE5hbWUsIGN1cnJlbnQsIGNvbnRleHQpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuaG9vayhwYXJlbnQsIG1ldGhvZE5hbWUsIHsKICAgICAgICAgICAgICAgIGN1cnJlbnQ6IGN1cnJlbnQsCiAgICAgICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgaG9va0FmdGVyOiBmdW5jdGlvbiAocGFyZW50LCBtZXRob2ROYW1lLCBhZnRlciwgY29udGV4dCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5ob29rKHBhcmVudCwgbWV0aG9kTmFtZSwgewogICAgICAgICAgICAgICAgYWZ0ZXI6IGFmdGVyLAogICAgICAgICAgICAgICAgY29udGV4dDogY29udGV4dAogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGhvb2tDbGFzczogZnVuY3Rpb24gKHBhcmVudCwgY2xhc3NOYW1lLCByZXBsYWNlLCBpbm5lck5hbWUsIGV4Y2x1ZGVQcm9wZXJ0aWVzKSB7CiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgIHZhciBvcmlnaW5GdW5jID0gcGFyZW50W2NsYXNzTmFtZV07CiAgICAgICAgICAgIGlmICghZXhjbHVkZVByb3BlcnRpZXMpIHsKICAgICAgICAgICAgICAgIGV4Y2x1ZGVQcm9wZXJ0aWVzID0gW107CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZXhjbHVkZVByb3BlcnRpZXMucHVzaCgncHJvdG90eXBlJyk7CiAgICAgICAgICAgIGV4Y2x1ZGVQcm9wZXJ0aWVzLnB1c2goJ2NhbGxlcicpOwogICAgICAgICAgICBleGNsdWRlUHJvcGVydGllcy5wdXNoKCdhcmd1bWVudHMnKTsKICAgICAgICAgICAgaW5uZXJOYW1lID0gaW5uZXJOYW1lIHx8ICdfaW5uZXJIb29rJzsKICAgICAgICAgICAgdmFyIHJlc0Z1bmMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB0aGlzW2lubmVyTmFtZV0gPSBuZXcgb3JpZ2luRnVuYygpOwogICAgICAgICAgICAgICAgcmVwbGFjZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmhvb2tlZFRvU3RyaW5nKG9yaWdpbkZ1bmMsIHJlc0Z1bmMpOwogICAgICAgICAgICB0aGlzLmhvb2tlZFRvUHJvcGVydGllcyhvcmlnaW5GdW5jLCByZXNGdW5jLCB0cnVlLCBleGNsdWRlUHJvcGVydGllcyk7CiAgICAgICAgICAgIHZhciBwcm90b3R5cGVQcm9wZXJ0aWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob3JpZ2luRnVuYy5wcm90b3R5cGUpOwogICAgICAgICAgICB2YXIgcHJvdG90eXBlID0gcmVzRnVuYy5wcm90b3R5cGUgPSB7CiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcjogcmVzRnVuYwogICAgICAgICAgICB9OwogICAgICAgICAgICBwcm90b3R5cGVQcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAnY29uc3RydWN0b3InKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIG1ldGhvZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luRnVuYy5wcm90b3R5cGVbbmFtZV0gJiYgdXRpbHMuaXNGdW5jdGlvbihvcmlnaW5GdW5jLnByb3RvdHlwZVtuYW1lXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbkZ1bmMucHJvdG90eXBlW25hbWVdLmFwcGx5KHRoaXNbaW5uZXJOYW1lXSwgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfdGhpcy5ob29rZWRUb1N0cmluZyhvcmlnaW5GdW5jLnByb3RvdHlwZVtuYW1lXSwgbWV0aG9kKTsKICAgICAgICAgICAgICAgIHByb3RvdHlwZVtuYW1lXSA9IG1ldGhvZDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuaG9va1JlcGxhY2UocGFyZW50LCBjbGFzc05hbWUsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiByZXNGdW5jOwogICAgICAgICAgICB9LCBwYXJlbnQpCiAgICAgICAgfSwKICAgICAgICBob29rZWRUb1Byb3BlcnRpZXM6IGZ1bmN0aW9uIChvcmlnaW5PYmplY3QsIHJlc3VsdE9iamVjdCwgaXNEZWZpbmVkLCBleGNsdWRlUHJvcGVydGllcykgewogICAgICAgICAgICB2YXIgb2JqZWN0UHJvcGVydGllcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9yaWdpbk9iamVjdCk7CiAgICAgICAgICAgIG9iamVjdFByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbiAocHJvcGVydHkpIHsKICAgICAgICAgICAgICAgIGlmICh1dGlscy5jb250YWlucyhleGNsdWRlUHJvcGVydGllcywgcHJvcGVydHkpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCFpc0RlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICByZXN1bHRPYmplY3RbcHJvcGVydHldID0gb3JpZ2luT2JqZWN0W3Byb3BlcnR5XTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlc3VsdE9iamVjdCwgcHJvcGVydHksIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvcmlnaW5PYmplY3RbcHJvcGVydHldLAogICAgICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogZmFsc2UKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBob29rZWRUb1N0cmluZzogZnVuY3Rpb24gKG9yaWdpbk9iamVjdCwgcmVzdWx0T2JqZWN0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHJlc3VsdE9iamVjdCwgewogICAgICAgICAgICAgICAgdG9TdHJpbmc6IHsKICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvcmlnaW5PYmplY3QudG9TdHJpbmcuYmluZChvcmlnaW5PYmplY3QpLAogICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHRvTG9jYWxlU3RyaW5nOiB7CiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogb3JpZ2luT2JqZWN0LnRvTG9jYWxlU3RyaW5nLmJpbmQob3JpZ2luT2JqZWN0KSwKICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogZmFsc2UKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8qKgogICAgICAgICAqIOWKq+aMgeWFqOWxgGFqYXgKICAgICAgICAgKiBAcGFyYW0gbWV0aG9kcyB7b2JqZWN0fSDliqvmjIHnmoTmlrnms5UKICAgICAgICAgKiBAcmV0dXJuIHsqfG51bWJlcn0g5Yqr5oyB55qEaWQKICAgICAgICAgKi8KICAgICAgICBob29rQWpheDogZnVuY3Rpb24gKG1ldGhvZHMpIHsKICAgICAgICAgICAgaWYgKHRoaXMuaXNIb29rZWQoX2dsb2JhbCwgJ1hNTEh0dHBSZXF1ZXN0JykpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICB2YXIgaG9va01ldGhvZCA9IGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7CiAgICAgICAgICAgICAgICBpZiAodXRpbHMuaXNGdW5jdGlvbihtZXRob2RzW21ldGhvZE5hbWVdKSkgewogICAgICAgICAgICAgICAgICAgIC8vIOWcqOaJp+ihjOaWueazleS5i+WJjWhvb2vljp/mlrnms5UKICAgICAgICAgICAgICAgICAgICBfdGhpcy5ob29rQmVmb3JlKHRoaXMueGhyLCBtZXRob2ROYW1lLCBtZXRob2RzW21ldGhvZE5hbWVdKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIOi/lOWbnuaWueazleiwg+eUqOWGhemDqOeahHhocgogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMueGhyW21ldGhvZE5hbWVdLmJpbmQodGhpcy54aHIpOwogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSBmdW5jdGlvbiAoYXR0cikgewogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYXNPd25Qcm9wZXJ0eShhdHRyICsgIl8iKSA/IHRoaXNbYXR0ciArICJfIl0gOiB0aGlzLnhoclthdHRyXTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciBzZXRQcm9wZXJ0eSA9IGZ1bmN0aW9uIChhdHRyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgeGhyID0gdGhpcy54aHI7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIGlmIChhdHRyLmluZGV4T2YoIm9uIikgIT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1thdHRyICsgIl8iXSA9IGY7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGhvZHNbYXR0cl0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgeGhyW2F0dHJdID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5hcHBseSh4aHIsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9u5pa55rOV5Zyoc2V05pe25Yqr5oyBCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmhvb2tCZWZvcmUoeGhyLCBhdHRyLCBtZXRob2RzW2F0dHJdKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coMSxhdHRyKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8geGhyW2F0dHJdID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgbWV0aG9kc1thdHRyXSh0aGF0KSB8fCBmLmFwcGx5KHhociwgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHhoclthdHRyXSA9IGY7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuaG9va1JlcGxhY2UoX2dsb2JhbCwgJ1hNTEh0dHBSZXF1ZXN0JywgZnVuY3Rpb24gKFhNTEh0dHBSZXF1ZXN0KSB7CiAgICAgICAgICAgICAgICB2YXIgcmVzRnVuYyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHByb3BlcnR5TmFtZSBpbiB0aGlzLnhocikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcGVydHkgPSB0aGlzLnhocltwcm9wZXJ0eU5hbWVdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodXRpbHMuaXNGdW5jdGlvbihwcm9wZXJ0eSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhvb2sg5Y6f5pa55rOVCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3Byb3BlcnR5TmFtZV0gPSBob29rTWV0aG9kLmJpbmQodGhpcykocHJvcGVydHlOYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBwcm9wZXJ0eU5hbWUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGdldFByb3BlcnR5KHByb3BlcnR5TmFtZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0OiBzZXRQcm9wZXJ0eShwcm9wZXJ0eU5hbWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyDlrprkuYnlpJbpg6h4aHLlj6/ku6XlnKjlhoXpg6jorr/pl64KICAgICAgICAgICAgICAgICAgICB0aGlzLnhoci54aHIgPSB0aGlzOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF90aGlzLmhvb2tlZFRvUHJvcGVydGllcyhYTUxIdHRwUmVxdWVzdCwgcmVzRnVuYywgdHJ1ZSk7CiAgICAgICAgICAgICAgICBfdGhpcy5ob29rZWRUb1N0cmluZyhYTUxIdHRwUmVxdWVzdCwgcmVzRnVuYyk7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzRnVuYwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIC8qKgogICAgICAgICAqIOWKq+aMgeWFqOWxgGFqYXgKICAgICAgICAgKiBAcGFyYW0gbWV0aG9kcyB7b2JqZWN0fSDliqvmjIHnmoTmlrnms5UKICAgICAgICAgKiBAcmV0dXJuIHsqfG51bWJlcn0g5Yqr5oyB55qEaWQKICAgICAgICAgKi8KICAgICAgICBob29rQWpheFYyOiBmdW5jdGlvbiAobWV0aG9kcykgewogICAgICAgICAgICB0aGlzLmhvb2tDbGFzcyh3aW5kb3csICdYTUxIdHRwUmVxdWVzdCcsIGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB1dGlscy5lcmdvZGljT2JqZWN0KHRoaXMsIG1ldGhvZHMsIGZ1bmN0aW9uIChtZXRob2QpIHsKCiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgLyoqCiAgICAgICAgICog6Kej6Zmk5Yqr5oyBCiAgICAgICAgICogQHBhcmFtIGNvbnRleHQg5LiK5LiL5paHCiAgICAgICAgICogQHBhcmFtIG1ldGhvZE5hbWUg5pa55rOV5ZCNCiAgICAgICAgICogQHBhcmFtIGlzRGVlcGx5IHtib29sZWFuPX0g5piv5ZCm5rex5bqm6Kej6ZmkW+m7mOiupOS4umZhbHNlXQogICAgICAgICAqIEBwYXJhbSBlcUlkIHtudW1iZXI9fSAg6Kej6Zmk5oyH5a6aaWTnmoTliqvmjIFb5Y+v6YCJXQogICAgICAgICAqLwogICAgICAgIHVuSG9vazogZnVuY3Rpb24gKGNvbnRleHQsIG1ldGhvZE5hbWUsIGlzRGVlcGx5LCBlcUlkKSB7CiAgICAgICAgICAgIGlmICghY29udGV4dFttZXRob2ROYW1lXSB8fCAhdXRpbHMuaXNGdW5jdGlvbihjb250ZXh0W21ldGhvZE5hbWVdKSkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBtZXRob2RUYXNrID0gdGhpcy5fZ2V0SG9va2VkTWV0aG9kVGFzayhjb250ZXh0LCBtZXRob2ROYW1lKTsKICAgICAgICAgICAgaWYgKGVxSWQpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnVuSG9va0J5SWQoZXFJZCkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFtZXRob2RUYXNrLm9yaWdpbmFsKSB7CiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fZ2V0SG9va2VkTWV0aG9kTWFwKGNvbnRleHQpW21ldGhvZE5hbWVdOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnRleHRbbWV0aG9kTmFtZV0gPSBtZXRob2RUYXNrLm9yaWdpbmFsOwogICAgICAgICAgICBpZiAoaXNEZWVwbHkpIHsKICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9nZXRIb29rZWRNZXRob2RNYXAoY29udGV4dClbbWV0aG9kTmFtZV07CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8qKgogICAgICAgICAqIOmAmui/h0lk6Kej6Zmk5Yqr5oyBCiAgICAgICAgICogQHBhcmFtIGVxSWQKICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0KICAgICAgICAgKi8KICAgICAgICB1bkhvb2tCeUlkOiBmdW5jdGlvbiAoZXFJZCkgewogICAgICAgICAgICB2YXIgaGFzRXEgPSBmYWxzZTsKICAgICAgICAgICAgaWYgKGVxSWQpIHsKICAgICAgICAgICAgICAgIHZhciBob29rZWRNYXAgPSB0aGlzLl9nZXRIb29rZWRNYXAoKTsKICAgICAgICAgICAgICAgIHV0aWxzLmVyZ29kaWNPYmplY3QodGhpcywgaG9va2VkTWFwLCBmdW5jdGlvbiAoY29udGV4dE1hcCkgewogICAgICAgICAgICAgICAgICAgIHV0aWxzLmVyZ29kaWNPYmplY3QodGhpcywgY29udGV4dE1hcCwgZnVuY3Rpb24gKG1ldGhvZFRhc2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kVGFzay50YXNrLmJlZm9yZSA9IG1ldGhvZFRhc2sudGFzay5iZWZvcmUuZmlsdGVyKGZ1bmN0aW9uIChiZWZvcmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0VxID0gaGFzRXEgfHwgYmVmb3JlLmlkID09PSBlcUlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJlZm9yZS5pZCAhPT0gZXFJZDsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZFRhc2sudGFzay5hZnRlciA9IG1ldGhvZFRhc2sudGFzay5hZnRlci5maWx0ZXIoZnVuY3Rpb24gKGFmdGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNFcSA9IGhhc0VxIHx8IGFmdGVyLmlkID09PSBlcUlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFmdGVyLmlkICE9PSBlcUlkOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGhvZFRhc2sudGFzay5jdXJyZW50ICYmIG1ldGhvZFRhc2sudGFzay5jdXJyZW50LmlkID09PSBlcUlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RUYXNrLnRhc2suY3VycmVudCA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0VxID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobWV0aG9kVGFzay5yZXBsYWNlICYmIG1ldGhvZFRhc2sucmVwbGFjZS5pZCA9PT0gZXFJZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kVGFzay5yZXBsYWNlID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzRXEgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBoYXNFcTsKICAgICAgICB9LAogICAgICAgIC8qKgogICAgICAgICAqICDnp7vpmaTmiYDmnInliqvmjIHnm7jlhbPnmoTmlrnms5UKICAgICAgICAgKiBAcGFyYW0gY29udGV4dCDkuIrkuIvmlocKICAgICAgICAgKiBAcGFyYW0gbWV0aG9kTmFtZSDmlrnms5XlkI0KICAgICAgICAgKi8KICAgICAgICByZW1vdmVIb29rTWV0aG9kOiBmdW5jdGlvbiAoY29udGV4dCwgbWV0aG9kTmFtZSkgewogICAgICAgICAgICBpZiAoIWNvbnRleHRbbWV0aG9kTmFtZV0gfHwgIXV0aWxzLmlzRnVuY3Rpb24oY29udGV4dFttZXRob2ROYW1lXSkpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLl9nZXRIb29rZWRNZXRob2RNYXAoY29udGV4dClbbWV0aG9kTmFtZV0gPSB7CiAgICAgICAgICAgICAgICBvcmlnaW5hbDogdW5kZWZpbmVkLAogICAgICAgICAgICAgICAgcmVwbGFjZTogdW5kZWZpbmVkLAogICAgICAgICAgICAgICAgdGFzazogewogICAgICAgICAgICAgICAgICAgIGJlZm9yZTogW10sCiAgICAgICAgICAgICAgICAgICAgY3VycmVudDogdW5kZWZpbmVkLAogICAgICAgICAgICAgICAgICAgIGFmdGVyOiBbXQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgIH0sCiAgICAgICAgLyoqCiAgICAgICAgICog5Yik5pat5LiA5Liq5pa55rOV5piv5ZCm6KKr5Yqr5oyB6L+HCiAgICAgICAgICogQHBhcmFtIGNvbnRleHQKICAgICAgICAgKiBAcGFyYW0gbWV0aG9kTmFtZQogICAgICAgICAqLwogICAgICAgIGlzSG9va2VkOiBmdW5jdGlvbiAoY29udGV4dCwgbWV0aG9kTmFtZSkgewogICAgICAgICAgICB2YXIgaG9va01hcCA9IHRoaXMuX2dldEhvb2tlZE1ldGhvZE1hcChjb250ZXh0KTsKICAgICAgICAgICAgcmV0dXJuIGhvb2tNYXBbbWV0aG9kTmFtZV0gIT09IHVuZGVmaW5lZCA/IChob29rTWFwW21ldGhvZE5hbWVdLm9yaWdpbmFsICE9PSB1bmRlZmluZWQpIDogZmFsc2U7CiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiDkv53miqTkuIDkuKrlr7nosaHkvb/kuYvkuI3kvJrooqvnr6HmlLkKICAgICAgICAgKiBAcGFyYW0gcGFyZW50CiAgICAgICAgICogQHBhcmFtIG1ldGhvZE5hbWUKICAgICAgICAgKi8KICAgICAgICBwcm90ZWN0OiBmdW5jdGlvbiAocGFyZW50LCBtZXRob2ROYW1lKSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwYXJlbnQsIG1ldGhvZE5hbWUsIHsKICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsCiAgICAgICAgICAgICAgICB3cml0YWJsZTogZmFsc2UKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBwcmV2ZW50RXJyb3I6IGZ1bmN0aW9uIChwYXJlbnQsIG1ldGhvZE5hbWUsIHJldHVyblZhbHVlLCBjb250ZXh0KSB7CiAgICAgICAgICAgIHRoaXMuaG9va0N1cnJlbnQocGFyZW50LCBtZXRob2ROYW1lLCBmdW5jdGlvbiAobSwgYXJncykgewogICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcmV0dXJuVmFsdWU7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbS5hcHBseSh0aGlzLCBhcmdzKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgUHJldmVudGVkIGZyb20gbWV0aG9kICcgKyBtZXRob2ROYW1lLCBlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICAgICAgfSwgY29udGV4dCkKICAgICAgICB9LAogICAgICAgIC8qKgogICAgICAgICAqIOijhei9veaPkuS7tgogICAgICAgICAqIEBwYXJhbSBvcHRpb24KICAgICAgICAgKi8KICAgICAgICBwbHVnaW5zOiBmdW5jdGlvbiAob3B0aW9uKSB7CiAgICAgICAgICAgIGlmICh1dGlscy5pc0Z1bmN0aW9uKG9wdGlvbi5tb3VudCkpIHsKICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBvcHRpb24ubW91bnQuY2FsbCh0aGlzLCB1dGlscyk7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbi5uYW1lID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgICAgIF9nbG9iYWxbb3B0aW9uLm5hbWVdID0gcmVzdWx0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIGlmIChfZ2xvYmFsLmVIb29rICYmIChfZ2xvYmFsLmVIb29rIGluc3RhbmNlb2YgRUhvb2spKSB7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgdmFyIGVIb29rID0gbmV3IEVIb29rKCk7CiAgICB2YXIgQUhvb2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5pc0hvb2tlZCA9IGZhbHNlOwogICAgICAgIHZhciBhdXRvSWQgPSAxOwogICAgICAgIHRoaXMuX3VybERpc3BhdGNoZXJMaXN0ID0gW107CiAgICAgICAgdGhpcy5fZ2V0QXV0b0lkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gYXV0b0lkKys7CiAgICAgICAgfTsKICAgIH07CiAgICBBSG9vay5wcm90b3R5cGUgPSB7CiAgICAgICAgLyoqCiAgICAgICAgICog5omn6KGM6YWN572u5YiX6KGo5Lit55qE5oyH5a6a5pa55rOV57uECiAgICAgICAgICogQHBhcmFtIHhocgogICAgICAgICAqIEBwYXJhbSBtZXRob2ROYW1lCiAgICAgICAgICogQHBhcmFtIGFyZ3MKICAgICAgICAgKiBAcHJpdmF0ZQogICAgICAgICAqLwogICAgICAgIF9pbnZva2VBaW1NZXRob2RzOiBmdW5jdGlvbiAoeGhyLCBtZXRob2ROYW1lLCBhcmdzKSB7CiAgICAgICAgICAgIHZhciBjb25maWdzID0gdXRpbHMucGFyc2VBcnJheUJ5UHJvcGVydHkoeGhyLnBhdGNoZXJMaXN0LCAnY29uZmlnJyk7CiAgICAgICAgICAgIHZhciBtZXRob2RzID0gW107CiAgICAgICAgICAgIHV0aWxzLmVyZ29kaWNBcnJheU9iamVjdCh4aHIsIGNvbmZpZ3MsIGZ1bmN0aW9uIChjb25maWcpIHsKICAgICAgICAgICAgICAgIGlmICh1dGlscy5pc0Z1bmN0aW9uKGNvbmZpZ1ttZXRob2ROYW1lXSkpIHsKICAgICAgICAgICAgICAgICAgICBtZXRob2RzLnB1c2goY29uZmlnW21ldGhvZE5hbWVdKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiB1dGlscy5pbnZva2VNZXRob2RzKHhociwgbWV0aG9kcywgYXJncyk7CiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiDmoLnmja51cmzojrflj5bphY3nva7liJfooagKICAgICAgICAgKiBAcGFyYW0gdXJsCiAgICAgICAgICogQHJldHVybiB7QXJyYXl9CiAgICAgICAgICogQHByaXZhdGUKICAgICAgICAgKi8KICAgICAgICBfdXJsUGF0Y2hlcjogZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICB2YXIgcGF0Y2hlckxpc3QgPSBbXTsKICAgICAgICAgICAgdXRpbHMuZXJnb2RpY0FycmF5T2JqZWN0KHRoaXMsIHRoaXMuX3VybERpc3BhdGNoZXJMaXN0LCBmdW5jdGlvbiAocGF0Y2hlck1hcCwgaSkgewogICAgICAgICAgICAgICAgaWYgKHV0aWxzLlVybFV0aWxzLnVybE1hdGNoaW5nKHVybCwgcGF0Y2hlck1hcC5wYXRjaGVyKSkgewogICAgICAgICAgICAgICAgICAgIHBhdGNoZXJMaXN0LnB1c2gocGF0Y2hlck1hcCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gcGF0Y2hlckxpc3Q7CiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiDmoLnmja54aHLlr7nosaHliIblj5Hlm57osIPor7fmsYIKICAgICAgICAgKiBAcGFyYW0geGhyCiAgICAgICAgICogQHBhcmFtIGZ1bGxVcmwKICAgICAgICAgKiBAcHJpdmF0ZQogICAgICAgICAqLwogICAgICAgIF94aHJEaXNwYXRjaGVyOiBmdW5jdGlvbiAoeGhyLCBmdWxsVXJsKSB7CiAgICAgICAgICAgIHZhciB1cmwgPSB1dGlscy5VcmxVdGlscy5nZXRVcmxXaXRob3V0UGFyYW0oZnVsbFVybCk7CiAgICAgICAgICAgIHhoci5wYXRjaGVyTGlzdCA9IHRoaXMuX3VybFBhdGNoZXIodXJsKTsKICAgICAgICB9LAogICAgICAgIC8qKgogICAgICAgICAqIOi9rOaNouWTjeW6lOS6i+S7tgogICAgICAgICAqIEBwYXJhbSBlCiAgICAgICAgICogQHBhcmFtIHhocgogICAgICAgICAqIEBwcml2YXRlCiAgICAgICAgICovCiAgICAgICAgX3BhcnNlRXZlbnQ6IGZ1bmN0aW9uIChlLCB4aHIpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIHsKICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geGhyOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBzcmNFbGVtZW50OiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHhocjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCfph43lrprkuYnov5Tlm57kuovku7blpLHotKXvvIzliqvmjIHlk43lupTlj6/og73lpLHotKUnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9LAogICAgICAgIC8qKgogICAgICAgICAqIOino+aekG9wZW7mlrnms5XnmoTlj4LmlbAKICAgICAgICAgKiBAcGFyYW0gYXJncwogICAgICAgICAqIEBwcml2YXRlCiAgICAgICAgICovCiAgICAgICAgX3BhcnNlT3BlbkFyZ3M6IGZ1bmN0aW9uIChhcmdzKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBtZXRob2Q6IGFyZ3NbMF0sCiAgICAgICAgICAgICAgICBmdWxsVXJsOiBhcmdzWzFdLAogICAgICAgICAgICAgICAgdXJsOiB1dGlscy5VcmxVdGlscy5nZXRVcmxXaXRob3V0UGFyYW0oYXJnc1sxXSksCiAgICAgICAgICAgICAgICBwYXJhbXM6IHV0aWxzLlVybFV0aWxzLmdldFBhcmFtRnJvbVVybChhcmdzWzFdKSwKICAgICAgICAgICAgICAgIGFzeW5jOiBhcmdzWzJdCiAgICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiDliqvmjIFhamF4IOivt+axguWPguaVsAogICAgICAgICAqIEBwYXJhbSBhcmdzT2JqZWN0CiAgICAgICAgICogQHBhcmFtIGFyZ3NBcnJheQogICAgICAgICAqIEBwcml2YXRlCiAgICAgICAgICovCiAgICAgICAgX3JlYnVpbGRPcGVuQXJnczogZnVuY3Rpb24gKGFyZ3NPYmplY3QsIGFyZ3NBcnJheSkgewogICAgICAgICAgICBhcmdzQXJyYXlbMF0gPSBhcmdzT2JqZWN0Lm1ldGhvZDsKICAgICAgICAgICAgYXJnc0FycmF5WzFdID0gdXRpbHMuVXJsVXRpbHMubWFyZ2VVcmxBbmRQYXJhbXMoYXJnc09iamVjdC51cmwsIGFyZ3NPYmplY3QucGFyYW1zKTsKICAgICAgICAgICAgYXJnc0FycmF5WzJdID0gYXJnc09iamVjdC5hc3luYzsKICAgICAgICB9LAogICAgICAgIC8qKgogICAgICAgICAqIOiOt+WPluWKq+aMgeaWueazleeahOWPguaVsCBb5Y6f5pa55rOVLOWOn+aWueazleWPguaVsCzljp/mlrnms5Xov5Tlm57lgLxd77yM5YmU6Zmk5Y6f5pa55rOV5Y+C5pWwCiAgICAgICAgICogQHBhcmFtIGFyZ3MKICAgICAgICAgKiBAcmV0dXJuIHsqfEFycmF5LjxUPn0KICAgICAgICAgKiBAcHJpdmF0ZQogICAgICAgICAqLwogICAgICAgIF9nZXRIb29rZWRBcmdzOiBmdW5jdGlvbiAoYXJncykgewogICAgICAgICAgICAvLyDlsIblj4LmlbDkuK0n5Y6f5pa55rOVJ+WJlOmZpAogICAgICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncywgMCkuc3BsaWNlKDEpOwogICAgICAgIH0sCiAgICAgICAgLyoqCiAgICAgICAgICog5ZON5bqU6KKr6Kem5Y+R5pe26LCD55So55qE5pa55rOVCiAgICAgICAgICogQHBhcmFtIG91dGVyWGhyCiAgICAgICAgICogQHBhcmFtIGZ1bmNBcmdzCiAgICAgICAgICogQHByaXZhdGUKICAgICAgICAgKi8KICAgICAgICBfb25SZXNwb25zZTogZnVuY3Rpb24gKG91dGVyWGhyLCBmdW5jQXJncykgewogICAgICAgICAgICAvLyDlm6DkuLrlj4LmlbDmmK/ooqvliqvmjIHnmoTlj4LmlbDkuLpbbWV0aG9kKOWOn+aWueazlSksYXJncyjlj4LmlbApXSzor6Xmlrnms5Xnm7TmjqXojrflj5blj4LmlbDlubbovazmjaLkuLrmlbDnu4QKICAgICAgICAgICAgdmFyIGFyZ3MgPSB0aGlzLl9nZXRIb29rZWRBcmdzKGZ1bmNBcmdzKTsKICAgICAgICAgICAgYXJnc1swXVswXSA9IHRoaXMuX3BhcnNlRXZlbnQoYXJnc1swXVswXSwgb3V0ZXJYaHIueGhyKTsgLy8g5by65Yi25LqL5Lu25oyH5ZCR5aSW6YOoeGhyCiAgICAgICAgICAgIC8vIOaJp+ihjOaJgOacieeahOWQjeS4umhvb2tSZXNwb25zZeeahOaWueazlee7hAogICAgICAgICAgICB2YXIgcmVzdWx0cyA9IHRoaXMuX2ludm9rZUFpbU1ldGhvZHMob3V0ZXJYaHIsICdob29rUmVzcG9uc2UnLCBhcmdzKTsKICAgICAgICAgICAgLy8g6YGN5Y6G57uT5p6c5pWw57uE5bm26I635Y+W5pyA5ZCO6L+U5Zue55qE5pyJ5pWI55qE5YC85L2c5Li65ZON5bqU5YC8CiAgICAgICAgICAgIHZhciByZXN1bHRJbmRleCA9IC0xOwogICAgICAgICAgICB1dGlscy5lcmdvZGljQXJyYXlPYmplY3Qob3V0ZXJYaHIsIHJlc3VsdHMsIGZ1bmN0aW9uIChyZXMsIGkpIHsKICAgICAgICAgICAgICAgIGlmIChyZXMgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdEluZGV4ID0gaTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmIChyZXN1bHRJbmRleCAhPT0gLTEpIHsKICAgICAgICAgICAgICAgIG91dGVyWGhyLnhoci5yZXNwb25zZVRleHRfID0gb3V0ZXJYaHIueGhyLnJlc3BvbnNlXyA9IHJlc3VsdHNbcmVzdWx0SW5kZXhdOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiDmiYvliqjlvIDlp4vliqvmjIEKICAgICAgICAgKi8KICAgICAgICBzdGFydEhvb2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICAgICAgdmFyIG5vcm1hbE1ldGhvZHMgPSB7CiAgICAgICAgICAgICAgICAvLyDmlrnms5XkuK3nmoR0aGlz5oyH5ZCR5YaF6YOoeGhyCiAgICAgICAgICAgICAgICAvLyDmi6bmiKrlk43lupQKICAgICAgICAgICAgICAgIG9ucmVhZHlzdGF0ZWNoYW5nZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT0gNCAmJiB0aGlzLnN0YXR1cyA9PSAyMDAgfHwgdGhpcy5zdGF0dXMgPT0gMzA0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vblJlc3BvbnNlKHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzLl9vblJlc3BvbnNlKHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgLy8g5oum5oiq6K+35rGCCiAgICAgICAgICAgICAgICBvcGVuOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBfdGhpcy5fZ2V0SG9va2VkQXJncyhhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIHZhciBmdWxsVXJsID0gYXJnc1swXVsxXTsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5feGhyRGlzcGF0Y2hlcih0aGlzLCBmdWxsVXJsKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJnc09iamVjdCA9IF90aGlzLl9wYXJzZU9wZW5BcmdzKGFyZ3NbMF0pOwogICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbkFyZ3MgPSBhcmdzT2JqZWN0OwogICAgICAgICAgICAgICAgICAgIF90aGlzLl9pbnZva2VBaW1NZXRob2RzKHRoaXMsICdob29rUmVxdWVzdCcsIFthcmdzT2JqZWN0XSk7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3JlYnVpbGRPcGVuQXJncyhhcmdzT2JqZWN0LCBhcmdzWzBdKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzZW5kOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBfdGhpcy5fZ2V0SG9va2VkQXJncyhhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZEFyZ3MgPSBhcmdzOwogICAgICAgICAgICAgICAgICAgIF90aGlzLl9pbnZva2VBaW1NZXRob2RzKHRoaXMsICdob29rU2VuZCcsIGFyZ3MpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICAvLyDorr7nva7mgLvnmoRob29rSWQKICAgICAgICAgICAgdGhpcy5fX19ob29rZWRJZCA9IF9nbG9iYWwuZUhvb2suaG9va0FqYXgobm9ybWFsTWV0aG9kcyk7CiAgICAgICAgICAgIHRoaXMuaXNIb29rZWQgPSB0cnVlOwogICAgICAgIH0sCiAgICAgICAgLyoqCiAgICAgICAgICog5rOo5YaMYWpheFVybOaLpuaIqgogICAgICAgICAqIEBwYXJhbSB1cmxQYXRjaGVyCiAgICAgICAgICogQHBhcmFtIGNvbmZpZ09yUmVxdWVzdAogICAgICAgICAqIEBwYXJhbSByZXNwb25zZQogICAgICAgICAqIEByZXR1cm4ge251bWJlcn0KICAgICAgICAgKi8KICAgICAgICByZWdpc3RlcjogZnVuY3Rpb24gKHVybFBhdGNoZXIsIGNvbmZpZ09yUmVxdWVzdCwgcmVzcG9uc2UpIHsKICAgICAgICAgICAgaWYgKCF1cmxQYXRjaGVyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCF1dGlscy5pc0V4aXN0T2JqZWN0KGNvbmZpZ09yUmVxdWVzdCkgJiYgIXV0aWxzLmlzRnVuY3Rpb24ocmVzcG9uc2UpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHt9OwogICAgICAgICAgICBpZiAodXRpbHMuaXNGdW5jdGlvbihjb25maWdPclJlcXVlc3QpKSB7CiAgICAgICAgICAgICAgICBjb25maWcuaG9va1JlcXVlc3QgPSBjb25maWdPclJlcXVlc3Q7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHV0aWxzLmlzRnVuY3Rpb24ocmVzcG9uc2UpKSB7CiAgICAgICAgICAgICAgICBjb25maWcuaG9va1Jlc3BvbnNlID0gcmVzcG9uc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHV0aWxzLmlzRXhpc3RPYmplY3QoY29uZmlnT3JSZXF1ZXN0KSkgewogICAgICAgICAgICAgICAgY29uZmlnID0gY29uZmlnT3JSZXF1ZXN0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBpZCA9IHRoaXMuX2dldEF1dG9JZCgpOwogICAgICAgICAgICB0aGlzLl91cmxEaXNwYXRjaGVyTGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgIC8vIOaMh+Wummlk5L6/5LqO5ZCO57ut5Y+W5raICiAgICAgICAgICAgICAgICBpZDogaWQsCiAgICAgICAgICAgICAgICBwYXRjaGVyOiB1cmxQYXRjaGVyLAogICAgICAgICAgICAgICAgY29uZmlnOiBjb25maWcKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8vIOW9k+azqOWGjOS4gOS4qnJlZ2lzdGVy5pe277yM6Ieq5Yqo5byA5aeL6L+Q6KGM5Yqr5oyBCiAgICAgICAgICAgIGlmICghdGhpcy5pc0hvb2tlZCkgewogICAgICAgICAgICAgICAgdGhpcy5zdGFydEhvb2soKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gaWQ7CiAgICAgICAgfQogICAgICAgIC8vIHRvZG8g5rOo6ZSAICBjYW5jZWxsYXRpb246IGZ1bmN0aW9uIChyZWdpc3RlcklkKXt9OwogICAgfTsKCiAgICBfZ2xvYmFsWydlSG9vayddID0gZUhvb2s7CiAgICBfZ2xvYmFsWydhSG9vayddID0gbmV3IEFIb29rKCk7CgoKfS5iaW5kKHdpbmRvdykoCiAgICAoZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB1dGlscyA9IHt9OwogICAgICAgIGlmICh3aW5kb3cuZXZlcnlVdGlscykgewogICAgICAgICAgICB3aW5kb3cuZXZlcnlVdGlscyhmdW5jdGlvbiAoCiAgICAgICAgICAgICAgICBBcnJheVV0aWxzLAogICAgICAgICAgICAgICAgT2JqZWN0VXRpbHMsCiAgICAgICAgICAgICAgICBCYXNlVXRpbHMsCiAgICAgICAgICAgICAgICBGdW5jdGlvblV0aWxzLAogICAgICAgICAgICAgICAgQ29sb3JVdGlscywKICAgICAgICAgICAgICAgIFVybFV0aWxzKSB7CiAgICAgICAgICAgICAgICB1dGlscyA9IHsKICAgICAgICAgICAgICAgICAgICBBcnJheVV0aWxzOiBBcnJheVV0aWxzLAogICAgICAgICAgICAgICAgICAgIE9iamVjdFV0aWxzOiBPYmplY3RVdGlscywKICAgICAgICAgICAgICAgICAgICBCYXNlVXRpbHM6IEJhc2VVdGlscywKICAgICAgICAgICAgICAgICAgICBDb2xvclV0aWxzOiBDb2xvclV0aWxzLAogICAgICAgICAgICAgICAgICAgIFVybFV0aWxzOiBVcmxVdGlscywKICAgICAgICAgICAgICAgICAgICB1cmxVdGlsczogVXJsVXRpbHMsCiAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25VdGlsczogRnVuY3Rpb25VdGlscwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHZhciBwcm94eSA9IHt9OwogICAgICAgIE9iamVjdC5rZXlzKHV0aWxzKS5mb3JFYWNoKGZ1bmN0aW9uICh1dGlsTmFtZSkgewogICAgICAgICAgICBpZiAoIXV0aWxOYW1lKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3h5LCB1dGlsTmFtZSwgewogICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHV0aWxzW3V0aWxOYW1lXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIE9iamVjdC5rZXlzKHV0aWxzW3V0aWxOYW1lXSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgICBpZiAoIWtleSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChwcm94eVtrZXldKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3h5LCBrZXksIHsKICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHV0aWxzW3V0aWxOYW1lXVtrZXldOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHByb3h5OwogICAgfSkoKQopOw=="}]},{"name":"网页限制解除(改)","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["*://*/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":["*www.bilibili.com/video*","*www.bilibili.com/bangumi*","*www.panda.tv*"],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-start","orig_noframes":null}},"storage":{"data":{"rwl_userData":"o{\"status\":1,\"version\":0.1,\"message\":\"啦啦啦,啦啦啦,我是卖报的小行家\",\"positionTop\":0,\"positionLeft\":0,\"positionRight\":\"auto\",\"addBtn\":true,\"connectToTheServer\":true,\"waitUpload\":[],\"currentURL\":\"null\",\"rules\":{\"rule_def\":{\"name\":\"default\",\"hook_eventNames\":\"contextmenu|select|selectstart|copy|cut|dragstart|mousemove|beforeunload\",\"unhook_eventNames\":\"mousedown|mouseup|keydown|keyup\",\"dom0\":true,\"hook_addEventListener\":true,\"hook_preventDefault\":true,\"hook_set_returnValue\":true,\"add_css\":true},\"rule_plus\":{\"name\":\"default\",\"hook_eventNames\":\"contextmenu|select|selectstart|copy|cut|dragstart|mousedown|mouseup|mousemove|beforeunload\",\"unhook_eventNames\":\"keydown|keyup\",\"dom0\":true,\"hook_addEventListener\":true,\"hook_preventDefault\":true,\"hook_set_returnValue\":true,\"add_css\":true},\"rule_zhihu\":{\"name\":\"default\",\"hook_eventNames\":\"contextmenu|select|selectstart|copy|cut|dragstart|mousemove\",\"unhook_eventNames\":\"keydown|keyup\",\"dom0\":true,\"hook_addEventListener\":true,\"hook_preventDefault\":true,\"hook_set_returnValue\":true,\"add_css\":true}},\"data\":[\"b.faloo.com\",\"bbs.coocaa.com\",\"book.hjsm.tom.com\",\"book.zhulang.com\",\"book.zongheng.com\",\"chokstick.com\",\"chuangshi.qq.com\",\"city.udn.com\",\"cutelisa55.pixnet.net\",\"huayu.baidu.com\",\"imac.hk\",\"life.tw\",\"luxmuscles.com\",\"news.missevan.com\",\"read.qidian.com\",\"www.15yan.com\",\"www.17k.com\",\"www.18183.com\",\"www.360doc.com\",\"www.coco01.net\",\"www.eyu.com\",\"www.hongshu.com\",\"www.hongxiu.com\",\"www.imooc.com\",\"www.jjwxc.net\",\"www.readnovel.com\",\"www.tadu.com\",\"www.xxsy.net\",\"www.z3z4.com\",\"www.zhihu.com\",\"yuedu.163.com\",\"www.ppkao.com\",\"movie.douban.com\",\"www.ruiwen.com\",\"vipreader.qidian.com\",\"www.pigai.org\",\"www.shangc.net\",\"www.sdifen.com\"]}"},"ts":1587235898629},"enabled":false,"position":6,"file_url":"https://greasyfork.org/scripts/28497-remove-web-limits-modified/code/Remove%20web%20limits(modified).user.js","uuid":"949d7836-d117-4271-8328-c1fb31f8960a","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWVzcGFjZSAgICAgICAgIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtQ04vdXNlcnMvMTA2MjIyLXF4aW4taQoKLy8gQG5hbWUgICAgICAgICAgICAgIOe9kemhtemZkOWItuino+mZpCjmlLkpCi8vIEBuYW1lOmVuICAgICAgICAgICBSZW1vdmUgd2ViIGxpbWl0cyhtb2RpZmllZCkKLy8gQG5hbWU6emggICAgICAgICAgIOe9kemhtemZkOWItuino+mZpCjmlLkpCi8vIEBuYW1lOnpoLUNOICAgICAgICDnvZHpobXpmZDliLbop6PpmaQo5pS5KQovLyBAbmFtZTpqYSAgICAgICAgICAg44Km44Kn44OW44Gu6KaP5Yi257ep5ZKMKOWkieabtCkKCi8vIEBhdXRob3IgICAgICAgICAgICBDYXQ3MyAmIGlxeGluKOS/ruaUuSkgCi8vIEBjb250cmlidXRvciAgICAgICBpcXhpbgoKLy8gQGRlc2NyaXB0aW9uICAgICAgIOmAmuadgOWkp+mDqOWIhue9keermSzlj6/ku6Xop6PpmaTnpoHmraLlpI3liLbjgIHliarliIfjgIHpgInmi6nmlofmnKzjgIHlj7PplK7oj5zljZXnmoTpmZDliLbjgILljp/kvZzogIVjYXQ3Myzlm6DkuLrlkozmkJzntKLot7PovazohJrmnKzlhrLnqoEs6YGC6L+b6KGM5LqG5pS55Yqo44CCCi8vIEBkZXNjcmlwdGlvbjplbiAgICBQYXNzIHRvIGtpbGwgbW9zdCBvZiB0aGUgc2l0ZSwgeW91IGNhbiBsaWZ0IHRoZSByZXN0cmljdGlvbnMgcHJvaGliaXRlZCB0byBjb3B5LCBjdXQsIHNlbGVjdCB0aGUgdGV4dCwgcmlnaHQtY2xpY2sgbWVudS5yZXZpc2VkIHZlcnNpb24KLy8gQGRlc2NyaXB0aW9uOnpoICAgIOmAmuadgOWkp+mDqOWIhue9keermSzlj6/ku6Xop6PpmaTnpoHmraLlpI3liLbjgIHliarliIfjgIHpgInmi6nmlofmnKzjgIHlj7PplK7oj5zljZXnmoTpmZDliLbjgILljp/kvZzogIVjYXQ3Myzlm6DkuLrlkozmkJzntKLot7PovazohJrmnKzlhrLnqoEs6YGC6L+b6KGM5LqG5pS55YqoCi8vIEBkZXNjcmlwdGlvbjp6aC1DTiDpgJrmnYDlpKfpg6jliIbnvZHnq5ks5Y+v5Lul6Kej6Zmk56aB5q2i5aSN5Yi244CB5Ymq5YiH44CB6YCJ5oup5paH5pys44CB5Y+z6ZSu6I+c5Y2V55qE6ZmQ5Yi244CC5Y6f5L2c6ICFY2F0NzMs5Zug5Li65ZKM5pCc57Si6Lez6L2s6ISa5pys5Yay56qBLOmBgui/m+ihjOS6huaUueWKqAovLyBAZGVzY3JpcHRpb246emgtVFcg6YCa5q665aSn6YOo5YiG57ay56uZLOWPr+S7peino+mZpOemgeatouW+qeWItuOAgeWJquWIh+OAgemBuOaTh+aWh+acrOOAgeWPs+mNteiPnOWWrueahOmZkOWItuOAggovLyBAZGVzY3JpcHRpb246amEgICAg44K144Kk44OI44Gu44G744Go44KT44Gp44KS5q6644GZ44Gf44KB44Gr5rih44GX44CB44GC44Gq44Gf44Gv44CB44Kz44OU44O85YiH44KK5Y+W44KK44CB44OG44Kt44K544OI44CB5Y+z44Kv44Oq44OD44Kv44Oh44OL44Ol44O844KS6YG45oqe44GZ44KL44GT44Go44Gv56aB5q2i44Gu5Yi26ZmQ44KS6Kej6Zmk44GZ44KL44GT44Go44GM44Gn44GN44G+44GZ44CCCgovLyBAZGVzY3JpcHRpb24gICAgICAg5Y6f5L2c6ICFaHR0cHM6Ly93d3cuZ2l0aHViLmNvbS9DYXQ3MzczLyzlm6DkuLrlkozmkJzntKLot7PovazohJrmnKzlhrLnqoEs6YGC6L+b6KGM5LqG5pS55YqoCi8vIEBob21lcGFnZVVSTCAgICAgICBodHRwczovL2NhdDczNzMuZ2l0aHViLmlvL3JlbW92ZS13ZWItbGltaXRzLwovLyBAc3VwcG9ydFVSTCAgICAgICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy96aC1DTi9zY3JpcHRzLzI4NDk3CgovLyBAaWNvbiAgICAgICAgICAgICAgIGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQ0FBQUFBZ0NBUUFBQURaYzdKL0FBQUJwRWxFUVZSNG5PM1Z2MnVVUVJERzhjL2ViU01XcWF5MHRyQVRBeHJVU2kxUzJBaVdGb0pZcE5DZ29CalVSc0hXSktlTlJmQXZzRGdGaXhRcUtkUFoyVmlFaUNKWUJPUXU4ZjFoRVhPNTk3MTNqN01VZkxaNmQyYS9POHZNTzBPekRuaW45S3UyTWp2dWF3MDd4Z1NBWUVWWGUyaW5kTWhqOTJ6cEtKTG5CaEY4TURleWU5aG42emJONzBlUmlxQ3cwMkJyYTN1cDhCQkx1MUZFQnhzQnVjWHFXNGNzejBVTGU0am9yU0NNdVBVODlib1JFTERNSGlJNlk4VjY1YmJDVVRjY2M3MFJrYU93S0xPZzBJa3lYYTlxVGpPdTJMQXM2Tlp1RDg2aHJkVHl4Uk5Ua1VxcWRoWGxIcm5nR1JWRVpzTXBKd2V4OUR4SVpTSFljbGVzSWI2NUxDb0hnSXM2NlVKcTZidERCWkhaclBoOFY2WUJPWDY2TGJPa1RHY2tCWWltQlcyRlZUTmV1T1pOeXJGSjIzNllsNE5TeTVTYlZtMVBEdmhvZHFneU1sZWRUZFJsQXREenFmTDl0Zmt3VXR5YVJrdjlMd0ZqOUIvdzd3UHljWE9ocWxKMHlaSEtQQ2hNaTVNQ2lNNDdYaHNvcGJWSkFVSGZyWWJtTi9FVG9OKzAyZUxQZno5T1l5WmhGSnpXMUpuM2xUc3hhS1FqQ2twNTJqeTQ1cjFadlNiVGI5TTBkNFBCb3pHWkFBQUFBRWxGVGtTdVFtQ0MKCi8vIEB2ZXJzaW9uICAgICAgICAgICA0LjMuNAovLyBAbGljZW5zZSAgICAgICAgICAgTEdQTHYzCgovLyBAY29tcGF0aWJsZSAgICAgICAgY2hyb21lIENocm9tZV80Ni4wLjI0OTAuODYgKyBUYW1wZXJNb25rZXkgKyDohJrmnKxfMS4zIOa1i+ivlemAmui/hwovLyBAY29tcGF0aWJsZSAgICAgICAgZmlyZWZveCBGaXJlZm94XzQyLjAgKyBHcmVhc2VNb25rZXkgKyDohJrmnKxfMS4yLjEg5rWL6K+V6YCa6L+HCi8vIEBjb21wYXRpYmxlICAgICAgICBvcGVyYSBPcGVyYV8zMy4wLjE5OTAuMTE1ICsgVGFtcGVyTW9ua2V5ICsg6ISa5pysXzEuMS4zIOa1i+ivlemAmui/hwovLyBAY29tcGF0aWJsZSAgICAgICAgc2FmYXJpIOacqua1i+ivlQoKLy8gQG1hdGNoICAgICAgICAgICAgICo6Ly8qLyoKLy8gQGV4Y2x1ZGUgICAgICAgICp3d3cuYmlsaWJpbGkuY29tL3ZpZGVvKgovLyBAZXhjbHVkZSAgICAgICAgKnd3dy5iaWxpYmlsaS5jb20vYmFuZ3VtaSoKLy8gQGV4Y2x1ZGUgICAgICAgICp3d3cucGFuZGEudHYqCgovLyBAY29ubmVjdCAgICAgZWVtbS5tZQovLyBAZ3JhbnQgICAgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICBHTV9hZGRTdHlsZQovLyBAZ3JhbnQgICAgICAgR01fZGVsZXRlVmFsdWUKLy8gQGdyYW50ICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0Ci8vIEBncmFudCAgICAgICBHTV9zZXRDbGlwYm9hcmQKLy8gQGdyYW50ICAgICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQKLy8gQHJ1bi1hdCAgICAgIGRvY3VtZW50LXN0YXJ0Ci8vID09L1VzZXJTY3JpcHQ9PQooZnVuY3Rpb24oKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgdmFyIHNldHRpbmdEYXRhID0gewogICAgICAgICJzdGF0dXMiOjEsCiAgICAgICAgInZlcnNpb24iIDogMC4xLAogICAgICAgICJtZXNzYWdlIiA6ICLllabllabllaYs5ZWm5ZWm5ZWmLOaIkeaYr+WNluaKpeeahOWwj+ihjOWutiIsCiAgICAgICAgInBvc2l0aW9uVG9wIjoiMCIsCiAgICAgICAgInBvc2l0aW9uTGVmdCI6IjAiLAogICAgICAgICJwb3NpdGlvblJpZ2h0IjoiYXV0byIsCiAgICAgICAgImFkZEJ0biIgOiB0cnVlLAogICAgICAgICJjb25uZWN0VG9UaGVTZXJ2ZXIiIDogZmFsc2UsCiAgICAgICAgIndhaXRVcGxvYWQiOltdLAogICAgICAgICJjdXJyZW50VVJMIjoibnVsbCIsCiAgICAgICAgLy8g5Z+f5ZCN6KeE5YiZ5YiX6KGoCiAgICAgICAgInJ1bGVzIiA6IHsKICAgICAgICAgICAgInJ1bGVfZGVmIjogewogICAgICAgICAgICAgICAgIm5hbWUiOiAiZGVmYXVsdCIsCiAgICAgICAgICAgICAgICAiaG9va19ldmVudE5hbWVzIjogImNvbnRleHRtZW51fHNlbGVjdHxzZWxlY3RzdGFydHxjb3B5fGN1dHxkcmFnc3RhcnR8bW91c2Vtb3ZlfGJlZm9yZXVubG9hZCIsCiAgICAgICAgICAgICAgICAidW5ob29rX2V2ZW50TmFtZXMiOiAibW91c2Vkb3dufG1vdXNldXB8a2V5ZG93bnxrZXl1cCIsCiAgICAgICAgICAgICAgICAiZG9tMCI6IHRydWUsCiAgICAgICAgICAgICAgICAiaG9va19hZGRFdmVudExpc3RlbmVyIjogdHJ1ZSwKICAgICAgICAgICAgICAgICJob29rX3ByZXZlbnREZWZhdWx0IjogdHJ1ZSwKICAgICAgICAgICAgICAgICJob29rX3NldF9yZXR1cm5WYWx1ZSI6IHRydWUsCiAgICAgICAgICAgICAgICAiYWRkX2NzcyI6IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgInJ1bGVfcGx1cyI6IHsKICAgICAgICAgICAgICAgICJuYW1lIjogImRlZmF1bHQiLAogICAgICAgICAgICAgICAgImhvb2tfZXZlbnROYW1lcyI6ICJjb250ZXh0bWVudXxzZWxlY3R8c2VsZWN0c3RhcnR8Y29weXxjdXR8ZHJhZ3N0YXJ0fG1vdXNlZG93bnxtb3VzZXVwfG1vdXNlbW92ZXxiZWZvcmV1bmxvYWQiLAogICAgICAgICAgICAgICAgInVuaG9va19ldmVudE5hbWVzIjogImtleWRvd258a2V5dXAiLAogICAgICAgICAgICAgICAgImRvbTAiOiB0cnVlLAogICAgICAgICAgICAgICAgImhvb2tfYWRkRXZlbnRMaXN0ZW5lciI6IHRydWUsCiAgICAgICAgICAgICAgICAiaG9va19wcmV2ZW50RGVmYXVsdCI6IHRydWUsCiAgICAgICAgICAgICAgICAiaG9va19zZXRfcmV0dXJuVmFsdWUiOiB0cnVlLAogICAgICAgICAgICAgICAgImFkZF9jc3MiOiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICJydWxlX3poaWh1IjogewogICAgICAgICAgICAgICAgIm5hbWUiOiAiZGVmYXVsdCIsCiAgICAgICAgICAgICAgICAiaG9va19ldmVudE5hbWVzIjogImNvbnRleHRtZW51fHNlbGVjdHxzZWxlY3RzdGFydHxjb3B5fGN1dHxkcmFnc3RhcnR8bW91c2Vtb3ZlIiwKICAgICAgICAgICAgICAgICJ1bmhvb2tfZXZlbnROYW1lcyI6ICJrZXlkb3dufGtleXVwIiwKICAgICAgICAgICAgICAgICJkb20wIjogdHJ1ZSwKICAgICAgICAgICAgICAgICJob29rX2FkZEV2ZW50TGlzdGVuZXIiOiB0cnVlLAogICAgICAgICAgICAgICAgImhvb2tfcHJldmVudERlZmF1bHQiOiB0cnVlLAogICAgICAgICAgICAgICAgImhvb2tfc2V0X3JldHVyblZhbHVlIjogdHJ1ZSwKICAgICAgICAgICAgICAgICJhZGRfY3NzIjogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAiZGF0YSI6IFsKICAgICAgICAgICAgImIuZmFsb28uY29tIiwKICAgICAgICAgICAgImJicy5jb29jYWEuY29tIiwKICAgICAgICAgICAgImJvb2suaGpzbS50b20uY29tIiwKICAgICAgICAgICAgImJvb2suemh1bGFuZy5jb20iLAogICAgICAgICAgICAiYm9vay56b25naGVuZy5jb20iLAogICAgICAgICAgICAiY2hva3N0aWNrLmNvbSIsCiAgICAgICAgICAgICJjaHVhbmdzaGkucXEuY29tIiwKICAgICAgICAgICAgImNpdHkudWRuLmNvbSIsCiAgICAgICAgICAgICJjdXRlbGlzYTU1LnBpeG5ldC5uZXQiLAogICAgICAgICAgICAiaHVheXUuYmFpZHUuY29tIiwKICAgICAgICAgICAgImltYWMuaGsiLAogICAgICAgICAgICAibGlmZS50dyIsCiAgICAgICAgICAgICJsdXhtdXNjbGVzLmNvbSIsCiAgICAgICAgICAgICJuZXdzLm1pc3NldmFuLmNvbSIsCiAgICAgICAgICAgICJyZWFkLnFpZGlhbi5jb20iLAogICAgICAgICAgICAid3d3LjE1eWFuLmNvbSIsCiAgICAgICAgICAgICJ3d3cuMTdrLmNvbSIsCiAgICAgICAgICAgICJ3d3cuMTgxODMuY29tIiwKICAgICAgICAgICAgInd3dy4zNjBkb2MuY29tIiwKICAgICAgICAgICAgInd3dy5jb2NvMDEubmV0IiwKICAgICAgICAgICAgInd3dy5leXUuY29tIiwKICAgICAgICAgICAgInd3dy5ob25nc2h1LmNvbSIsCiAgICAgICAgICAgICJ3d3cuaG9uZ3hpdS5jb20iLAogICAgICAgICAgICAid3d3Lmltb29jLmNvbSIsCiAgICAgICAgICAgICJ3d3cuamp3eGMubmV0IiwKICAgICAgICAgICAgInd3dy5yZWFkbm92ZWwuY29tIiwKICAgICAgICAgICAgInd3dy50YWR1LmNvbSIsCiAgICAgICAgICAgICJ3d3cueHhzeS5uZXQiLAogICAgICAgICAgICAid3d3LnozejQuY29tIiwKICAgICAgICAgICAgInd3dy56aGlodS5jb20iLAogICAgICAgICAgICAieXVlZHUuMTYzLmNvbSIsCiAgICAgICAgICAgICJ3d3cucHBrYW8uY29tIiwKICAgICAgICAgICAgIm1vdmllLmRvdWJhbi5jb20iLAogICAgICAgICAgICAid3d3LnJ1aXdlbi5jb20iLAogICAgICAgICAgICAidmlwcmVhZGVyLnFpZGlhbi5jb20iLAogICAgICAgICAgICAid3d3LnBpZ2FpLm9yZyIsCiAgICAgICAgICAgICJ3d3cuc2hhbmdjLm5ldCIsCiAgICAgICAgICAgICJ3d3cubXlodGxtZWJvb2suY29tIiwKICAgICAgICAgICAgInd3dy5zZGlmZW4uY29tIgogICAgICAgIF0KICAgIH0KCiAgICB2YXIgcndsX3VzZXJEYXRhID0gbnVsbDsKICAgIHZhciBob3N0bmFtZSA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZTsKICAgIHZhciBidG5fbm9kZSA9IG51bGw7ICAgCiAgICB2YXIgcnVsZSA9IG51bGw7CiAgICB2YXIgbGlzdCA9IG51bGw7CiAgICB2YXIgaGFzRnJhbWUgPSBmYWxzZTsKCiAgICAvLyDlgqjlrZjlkI3np7AKICAgIHZhciBzdG9yYWdlTmFtZSA9ICJpcXhpblN0b3JhZ2VOYW1lIjsKICAgIC8vIOimgeWkhOeQhueahCBldmVudCDliJfooagKICAgIHZhciBob29rX2V2ZW50TmFtZXMsIHVuaG9va19ldmVudE5hbWVzLCBldmVudE5hbWVzOwogICAgLy8g5YKo5a2Y6KKrIEhvb2sg55qE5Ye95pWwCiAgICB2YXIgRXZlbnRUYXJnZXRfYWRkRXZlbnRMaXN0ZW5lciA9IEV2ZW50VGFyZ2V0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyOwogICAgdmFyIGRvY3VtZW50X2FkZEV2ZW50TGlzdGVuZXIgPSBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyOwogICAgdmFyIEV2ZW50X3ByZXZlbnREZWZhdWx0ID0gRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0OwoKICAgIC8vIOafpeeci+acrOWcsOaYr+WQpuWtmOWcqOaXp+aVsOaNrgogICAgcndsX3VzZXJEYXRhID0gR01fZ2V0VmFsdWUoInJ3bF91c2VyRGF0YSIpOwogICAgaWYoIXJ3bF91c2VyRGF0YSl7CiAgICAgICAgcndsX3VzZXJEYXRhID0gc2V0dGluZ0RhdGEKICAgICAgICAvLyBHTV9zZXRWYWx1ZSgicndsX3VzZXJEYXRhIixyd2xfdXNlckRhdGEpOwogICAgfQogICAgLy8g6Ieq5Yqo5pu05paw5pWw5o2uCiAgICBmb3IobGV0IHZhbHVlIGluIHNldHRpbmdEYXRhKXsKICAgICAgICBpZighcndsX3VzZXJEYXRhLmhhc093blByb3BlcnR5KHZhbHVlKSl7CiAgICAgICAgICAgIHJ3bF91c2VyRGF0YVt2YWx1ZV0gPSBzZXR0aW5nRGF0YVt2YWx1ZV07CiAgICAgICAgICAgIEdNX3NldFZhbHVlKCJyd2xfdXNlckRhdGEiLHJ3bF91c2VyRGF0YSk7CiAgICAgICAgfQogICAgfQoKICAgIHZlcnNpb25fdXBfM190b180KCk7CgogICAgLy8g6I635Y+W6buR5ZCN5Y2V572R56uZCiAgICBsaXN0ID0gZ2V0X2JsYWNrX2xpc3QoKTsKCiAgICAvLyDmt7vliqDmjInpkq4KICAgIGlmKHJ3bF91c2VyRGF0YS5hZGRCdG4pewogICAgICAgIGFkZEJ0bigpOyAgLy8g5re75YqgCiAgICAgICAgYnRuX25vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYmxhY2tfbm9kZSIpOwoKICAgICAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpewogICAgICAgICAgICBpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYmxhY2tfbm9kZSIpKXsKICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgICAgICAgICAgICAgcXhpblN0YXJ0KCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBhZGRCdG4oKTsKICAgICAgICAgICAgfQogICAgICAgIH0sNTAwKQoKICAgIH0KCiAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kKCLlpI3liLbpmZDliLbop6PpmaQg6K6+572uIiwgc2V0TWVudSkKCgoKICAgIC8vIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLeWHveaVsCBmdW5jCgogICAgZnVuY3Rpb24gcXhpblN0YXJ0KCl7CiAgICAgICAgY29uc29sZS5sb2coIuiEmuacrDog5aSN5Yi26ZmQ5Yi26Kej6ZmkKOaUuSkgLS0tIOW8gOWni+aJp+ihjCAtLS0g5Y+R5biD6ICFOiBxeGluIC0tLSBHaXRIdWI6IGh0dHBzOi8vZ2l0aHViLmNvbS9xeGluR2l0SHViL1JlbW92ZS13ZWItbGltaXRzLSIpOwogICAgICAgIGFkZERyYWdFdmVuKCk7CiAgICAgICAgc2V0QnRuQ2xpY2soKTsKCiAgICAgICAgLy8g5qOA5p+l5piv5ZCm5Zyo6buR5ZCN5Y2V5LitCiAgICAgICAgaWYoY2hlY2tfYmxhY2tfbGlzdChsaXN0LGhvc3RuYW1lKSl7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZihyd2xfdXNlckRhdGEuYWRkQnRuKXsKICAgICAgICAgICAgICAgICAgICBidG5fbm9kZS5jaGVja2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigi6ISa5pyscndsLemUmeivr++8mlxuIGJ0bl9ub2RlIDogJXNcbiVzXG7ohJrmnKxyd2wt6ZSZ6K+v5L2N572u77yaIGJ0bl9ub2RlLmNoZWNrZWQgPSB0cnVlOyIsYnRuX25vZGUsZSk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICBpbml0KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLy/mt7vliqDmjInpkq4gZnVuYwogICAgZnVuY3Rpb24gYWRkQnRuKCl7CiAgICAgICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJyZW1vdmUtd2ViLWxpbWl0cy1pcXhpbiIpOwogICAgICAgIG5vZGUuaWQgPSAicndsLWlxeGluIjsKICAgICAgICBub2RlLmNsYXNzTmFtZSA9ICJyd2wtZXhlbXB0IjsKCiAgICAgICAgLy8g5YaN5qyh5omT5byA56qX5Y+j5bCP5LqO5LmL5YmN56qX5Y+j55qE5oOF5Ya1LOWvvOiHtOaMiemSruWHuueOsOWcqOWPr+inhueql+WPo+S5i+WklgogICAgICAgIHZhciBzY3JlZW5DbGllbnRIZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0OwogICAgICAgIHZhciB0ZW1wSGVpZ2h0OwogICAgICAgIGlmIChyd2xfdXNlckRhdGEucG9zaXRpb25Ub3A+c2NyZWVuQ2xpZW50SGVpZ2h0KXsKICAgICAgICAgICAgdGVtcEhlaWdodCAgPSBzY3JlZW5DbGllbnRIZWlnaHQgLTQwOwogICAgICAgIH0gZWxzZXsKICAgICAgICAgICAgdGVtcEhlaWdodCA9IHJ3bF91c2VyRGF0YS5wb3NpdGlvblRvcDsKICAgICAgICB9CiAgICAgICAgLy8g5pS55Y+Y56qX5Y+j5aSn5bCP55qE5oOF5Ya1CiAgICAgICAgd2luZG93Lm9ucmVzaXplPWZ1bmN0aW9uKCl7ICAKICAgICAgICAgICAgdmFyIHNjcmVlbkNsaWVudEhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7CiAgICAgICAgICAgIHZhciB0ZW1wSGVpZ2h0OwoKICAgICAgICAgICAgaWYgKHJ3bF91c2VyRGF0YS5wb3NpdGlvblRvcD5zY3JlZW5DbGllbnRIZWlnaHQpewogICAgICAgICAgICAgICAgICAgIHRlbXBIZWlnaHQgID0gc2NyZWVuQ2xpZW50SGVpZ2h0IC00MDsKICAgICAgICAgICAgfSBlbHNlewogICAgICAgICAgICAgICAgdGVtcEhlaWdodCA9IHJ3bF91c2VyRGF0YS5wb3NpdGlvblRvcDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbm9kZS5zdHlsZS50b3AgPSAgdGVtcEhlaWdodCArICJweCI7CiAgICAgICAgfQoKICAgICAgICB0ZW1wSGVpZ2h0ID0gdGVtcEhlaWdodDwwPzA6dGVtcEhlaWdodAogICAgICAgIG5vZGUuc3R5bGUuY3NzVGV4dCA9ICJwb3NpdGlvbjpmaXhlZDt0b3A6Iit0ZW1wSGVpZ2h0KyJweDtsZWZ0OiIrcndsX3VzZXJEYXRhLnBvc2l0aW9uTGVmdCsicHg7cmlnaHQ6Iityd2xfdXNlckRhdGEucG9zaXRpb25SaWdodCsicHg7IjsKICAgICAgICAvLyBub2RlLmlubmVySFRNTCA9ICc8bGFiZWw+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBuYW1lPSIiIGlkPSJibGFja19ub2RlIj7pu5HlkI3ljZU8L2xhYmVsPjxxeGluYnV0dG9uIGlkPSJkZWxldGUiPmRlbGV0ZTwvYnR0b24+JzsKICAgICAgICAvLyBub2RlLmlubmVySFRNTCA9ICc8bGFiZWw+6ZmQ5Yi26Kej6ZmkIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgIG5hbWU9IiIgaWQ9ImJsYWNrX25vZGUiPjwvbGFiZWw+JzsKICAgICAgICBub2RlLmlubmVySFRNTCA9ICc8cXhpbmJ1dHRvbiB0eXBlPSJxeGluYnV0dG9uIiBpZD0icndsLXNldGJ0biI+IHNldCA8L3F4aW5idXR0b24+IDxsYWxhbGEgc3R5bGU9ImN1cnNvcjptb3ZlOyBmb250LXNpemU6MTJweDsiPumZkOWItuino+mZpDwvbGFsYWxhPiA8aW5wdXQgdHlwZT0iY2hlY2tib3giIG5hbWU9IiIgaWQ9ImJsYWNrX25vZGUiID4nOwogICAgICAgIGlmKHdpbmRvdy5zZWxmID09PSB3aW5kb3cudG9wKXsKICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImJvZHkiKSl7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG5vZGUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKG5vZGUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdmVyIixmdW5jdGlvbigpewogICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoInJ3bC1hY3RpdmUtaXF4aW4iKTsKICAgICAgICB9KTsKICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbGVhdmUiLGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LnJlbW92ZSgicndsLWFjdGl2ZS1pcXhpbiIpOwogICAgICAgICAgICAgICAgYmxhY2tfY2hlY2soYmxhY2tfbm9kZS5jaGVja2VkKTsKICAgICAgICAgICAgfSwxMDApCiAgICAgICAgfSk7CgogICAgICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7CiAgICAgICAgc3R5bGUudHlwZT0idGV4dC9jc3MiOwoKICAgICAgICB2YXIgc3R5bGVJbm5lciA9ICIjcndsLWlxeGlueyIgKwogICAgICAgICAgICAgICAgInBvc2l0aW9uOmZpeGVkOyIgKwogICAgICAgICAgICAgICAgInRyYW5zZm9ybTp0cmFuc2xhdGUoLTk1cHgsMCk7IiArCiAgICAgICAgICAgICAgICAid2lkdGg6ODVweDsiICsKICAgICAgICAgICAgICAgICJoZWlnaHQ6MjVweDsiICsKICAgICAgICAgICAgICAgICJmb250LXNpemU6MTJweDsiICsKICAgICAgICAgICAgICAgICJmb250LXdlaWdodDogNTAwOyIgKwogICAgICAgICAgICAgICAgImZvbnQtZmFtaWx5OlZlcmRhbmEsIEFyaWFsLCAn5a6L5L2TJzsiICsKICAgICAgICAgICAgICAgICJjb2xvcjojZmZmOyIgKwogICAgICAgICAgICAgICAgImJhY2tncm91bmQ6IzMzMzsiICsKICAgICAgICAgICAgICAgICJ6LWluZGV4OjIxNDc0ODM2NDc7IiArCiAgICAgICAgICAgICAgICAibWFyZ2luOiAwOyIgKwogICAgICAgICAgICAgICAgIm9wYWNpdHk6MC4wNTsiICsKICAgICAgICAgICAgICAgICJ0cmFuc2l0aW9uOjAuM3M7IiArCiAgICAgICAgICAgICAgICAib3ZlcmZsb3c6aGlkZGVuOyIgKwogICAgICAgICAgICAgICAgInVzZXItc2VsZWN0Om5vbmU7IiArCiAgICAgICAgICAgICAgICAidGV4dC1hbGlnbjpjZW50ZXI7IiArCiAgICAgICAgICAgICAgICAid2hpdGUtc3BhY2U6bm93cmFwOyIgKwogICAgICAgICAgICAgICAgImxpbmUtaGVpZ2h0OjI1cHg7IiArCiAgICAgICAgICAgICAgICAicGFkZGluZzowIDE2cHg7IiArCiAgICAgICAgICAgICAgICAiYm9yZGVyOjFweCBzb2xpZCAjY2NjOyIgKwogICAgICAgICAgICAgICAgImJvcmRlci13aWR0aDoxcHggMXB4IDFweCAwOyIgKwogICAgICAgICAgICAgICAgImJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOjVweDsiICsKICAgICAgICAgICAgICAgICJib3gtc2l6aW5nOiBjb250ZW50LWJveDsiICsKICAgICAgICAgICAgIn0iICsKICAgICAgICAgICAgIiNyd2wtaXF4aW4gaW5wdXR7IiArCiAgICAgICAgICAgICAgICAibWFyZ2luOiAwOyIgKwogICAgICAgICAgICAgICAgInBhZGRpbmc6IDA7IiArCiAgICAgICAgICAgICAgICAidmVydGljYWwtYWxpZ246bWlkZGxlOyIgKwogICAgICAgICAgICAgICAgIi13ZWJraXQtYXBwZWFyYW5jZTpjaGVja2JveDsiICsKICAgICAgICAgICAgICAgICItbW96LWFwcGVhcmFuY2U6Y2hlY2tib3g7IiArCiAgICAgICAgICAgICAgICAicG9zaXRpb246IHN0YXRpYzsiICsKICAgICAgICAgICAgICAgICJjbGlwOiBhdXRvOyIgKwogICAgICAgICAgICAgICAgIm9wYWNpdHk6IDE7IiArCiAgICAgICAgICAgICAgICAiY3Vyc29yOiBwb2ludGVyOyIgKwogICAgICAgICAgICAifSIgKwogICAgICAgICAgICAiI3J3bC1pcXhpbi5yd2wtYWN0aXZlLWlxeGlueyIgKwogICAgICAgICAgICAgICAgImxlZnQ6IDBweDsiICsKICAgICAgICAgICAgICAgICJ0cmFuc2Zvcm06dHJhbnNsYXRlKDAsMCk7IiArCiAgICAgICAgICAgICAgICAib3BhY2l0eTogMC45OyIgKwogICAgICAgICAgICAgICAgImhlaWdodDogMzJweDsiICsKICAgICAgICAgICAgICAgICJsaW5lLWhlaWdodDogMzJweCIgKwogICAgICAgICAgICAifSIgKwogICAgICAgICAgICAiI3J3bC1pcXhpbiBsYWJlbHsiICsKICAgICAgICAgICAgICAgICJtYXJnaW46MDsiICsKICAgICAgICAgICAgICAgICJwYWRkaW5nOjA7IiArCiAgICAgICAgICAgICAgICAiZm9udC13ZWlnaHQ6NTAwOyIgKwogICAgICAgICAgICAifSIgKwogICAgICAgICAgICAiI3J3bC1pcXhpbiAjcndsLXNldGJ0bnsiICsKICAgICAgICAgICAgICAgICJtYXJnaW46IDAgNHB4IDAgMDsiICsKICAgICAgICAgICAgICAgICJwYWRkaW5nOiAwIDAgMCA0cHg7IiArCiAgICAgICAgICAgICAgICAiYm9yZGVyOiBub25lOyIgKwogICAgICAgICAgICAgICAgImJvcmRlci1yYWRpdXM6IDJweDsiICsKICAgICAgICAgICAgICAgICJjdXJzb3I6IHBvaW50ZXI7IiArCiAgICAgICAgICAgICAgICAiYmFja2dyb3VuZDogI2ZmZjsiICsKICAgICAgICAgICAgICAgICJjb2xvcjogIzAwMDsiICsKICAgICAgICAgICAgIn0iICsKICAgICAgICAgICAgIiAiCiAgICAgICAgc3R5bGUuaW5uZXJIVE1MID0gc3R5bGVJbm5lcjsKICAgICAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjcndsLWlxeGluIikpewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygi6YCa6L+Hc3R5bGXmj5LlhaUiKTsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3J3bC1pcXhpbiIpLmFwcGVuZENoaWxkKHN0eWxlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygi6YCa6L+HR03mj5LlhaUiKTsKICAgICAgICAgICAgR01fYWRkU3R5bGUoc3R5bGVJbm5lcik7CiAgICAgICAgfQogICAgfTsKCiAgICAvLyDnu5nmjInpkq7nu5Hlrprngrnlh7vkuovku7YKICAgIGZ1bmN0aW9uIHNldEJ0bkNsaWNrKCl7ICAKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjcndsLXNldGJ0biIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixzZXRNZW51KTsKICAgIH0KCiAgICAvLyDoj5zljZUKICAgICBmdW5jdGlvbiBzZXRNZW51KCl7CiAgICAgICAgICAgIHZhciBvbGRFZGl0Qm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3J3bC1zZXRNZW51Iik7CiAgICAgICAgICAgIGlmKG9sZEVkaXRCb3gpewogICAgICAgICAgICAgICAgb2xkRWRpdEJveC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9sZEVkaXRCb3gpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciB1c2VyU2V0dGluZyA9IEdNX2dldFZhbHVlKCJyd2xfdXNlckRhdGEiKTsKICAgICAgICAgICAgdmFyIHVwbG9hZF9jaGVja2VkID0gdXNlclNldHRpbmcuY29ubmVjdFRvVGhlU2VydmVyPyJjaGVja2VkIjoiIjsKICAgICAgICAgICAgdmFyIGJ0bmNoZWNrZWQgPSAgdXNlclNldHRpbmcuYWRkQnRuPydjaGVja2VkJzonJwoKICAgICAgICAgICAgdmFyIG9kb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgICAgb2RvbS5pZCA9ICJyd2wtc2V0TWVudSI7CiAgICAgICAgICAgIG9kb20uc3R5bGUuY3NzVGV4dCA9InBvc2l0aW9uOiBmaXhlZDsiICsKICAgICAgICAgICAgICAgICJ0b3A6IDEwMHB4OyIgKwogICAgICAgICAgICAgICAgImxlZnQ6IDUwcHg7IiArCiAgICAgICAgICAgICAgICAicGFkZGluZzogMTBweDsiICsKICAgICAgICAgICAgICAgICJiYWNrZ3JvdW5kOiAjZmZmOyIgKwogICAgICAgICAgICAgICAgImJvcmRlci1yYWRpdXM6IDRweDsiOwogICAgICAgICAgICBHTV9hZGRTdHlsZSgiI3J3bC1zZXRNZW51U2F2ZSwiICsKICAgICAgICAgICAgICAgICIjcndsLXJlc2V0LCIgKwogICAgICAgICAgICAgICAgIiNyd2wtc2V0TWVudUNsb3NleyIgKwogICAgICAgICAgICAgICAgICAgICJtYXJnaW46IDA7IiArCiAgICAgICAgICAgICAgICAgICAgInBhZGRpbmc6IDAgMnB4OyIgKwogICAgICAgICAgICAgICAgICAgICJib3JkZXI6IG5vbmU7IiArCiAgICAgICAgICAgICAgICAgICAgImJvcmRlci1yYWRpdXM6IDJweDsiICsKICAgICAgICAgICAgICAgICAgICAiY3Vyc29yOiBwb2ludGVyOyIgKwogICAgICAgICAgICAgICAgICAgICJiYWNrZ3JvdW5kOiAjZmZmOyIgKwogICAgICAgICAgICAgICAgICAgICJjb2xvcjogIzAwMDsiICsKICAgICAgICAgICAgICAgICJ9IiArCiAgICAgICAgICAgICAgICAiI3J3bC1yZXNldHsiICsKICAgICAgICAgICAgICAgICAgICAiYm9yZGVyOiAxcHggc29saWQgIzY2NjsiICsKICAgICAgICAgICAgICAgICJ9IiArCiAgICAgICAgICAgICAgICAiI3J3bC1zZXRNZW51U2F2ZXsiICsKICAgICAgICAgICAgICAgICAgICAiYm9yZGVyOiAxcHggc29saWQgZ3JlZW47IiArCiAgICAgICAgICAgICAgICAifSIgKwogICAgICAgICAgICAgICAgIiNyd2wtc2V0TWVudUNsb3NleyIgKwogICAgICAgICAgICAgICAgICAgICJib3JkZXI6IDFweCBzb2xpZCByZWQ7IiArCiAgICAgICAgICAgICAgICAifSIgKwogICAgICAgICAgICAgICAgIiNyd2wtc2V0TWVudXsiICsKICAgICAgICAgICAgICAgICAgICAidGV4dC1hbGlnbjpsZWZ0OyIgKwogICAgICAgICAgICAgICAgICAgICJmb250LXNpemU6MTRweDsiICsKICAgICAgICAgICAgICAgICAgICAiei1pbmRleDo5OTk5OTk7IiArCiAgICAgICAgICAgICAgICAgICAgImJvcmRlcjogMXB4IHNvbGlkIGNvcm5mbG93ZXJibHVlOyIgKwogICAgICAgICAgICAgICAgIn0iICsKICAgICAgICAgICAgICAgICIjcndsLXNldE1lbnUgcHsiICsKICAgICAgICAgICAgICAgICAgICAibWFyZ2luOjVweCBhdXRvOyIgKwogICAgICAgICAgICAgICAgIn0iICsKICAgICAgICAgICAgICAgICIgIikKICAgICAgICAgICAgdmFyIGlubmVySCA9ICIiICsKICAgICAgICAgICAgICAgICI8cD7ot53nprvpobbpg6jot53nprvvvIjljZXkvY0g5YOP57Sg77yJIDxpbnB1dCBpZD0ncG9zaXRpb250b3AnIHR5cGU9J3RleHQnIHZhbHVlPSIgKyB1c2VyU2V0dGluZy5wb3NpdGlvblRvcCArICI+PC9wPiIgKyAiIiArCiAgICAgICAgICAgICAgICAiPGxhYmVybD4gPHA+5YWB6K645LiK5Lyg6buR5ZCN5Y2VPGlucHV0IGlkPSd1cGxvYWRjaGVja2VkJyAgdHlwZT0nY2hlY2tib3gnICIgKyB1cGxvYWRfY2hlY2tlZCArICI+PC9wPiIgKyAiPC9sYWJlcmw+IiArCiAgICAgICAgICAgICAgICAiPGxhYmVybD4gPHA+5pi+56S65oyJ6ZKuPGlucHV0IGlkPSdidG5jaGVja2VkJyAgdHlwZT0nY2hlY2tib3gnICIgKyBidG5jaGVja2VkICsgIj4g54K55Ye76ISa5pys566h55CG5omp5bGV5Y+v5Lul5YaN5qyh5omT5byA6K6+572uPC9wPiIgKyAiPC9sYWJlcmw+IiArCiAgICAgICAgICAgICAgICAiPHA+6Zeu6aKY5Y+N6aaI5Zyw5Z2AOiA8YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vcXhpbkdpdEh1Yi9SZW1vdmUtd2ViLWxpbWl0cy0nPkdpdEh1YihxeGluKTwvYT4sIDxhIGhyZWY9J2h0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtQ04vc2NyaXB0cy8yODQ5Ny1yZW1vdmUtd2ViLWxpbWl0cy1tb2RpZmllZCc+R3JlYXN5Rm9yayhxeGluKTwvYT4gIDwvUD4iICsKICAgICAgICAgICAgICAgICI8cD7pobnnm67ljp/kvZzogIXkuLogPGEgaHJlZj0naHR0cHM6Ly9jYXQ3MzczLmdpdGh1Yi5pby9yZW1vdmUtd2ViLWxpbWl0cy8nPmNhdDczNzM8L2E+LCA8YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vQ2F0NzM3My9yZW1vdmUtd2ViLWxpbWl0cyc+6aG555uu5Li76aG1PC9hPiA8L1A+IiArCiAgICAgICAgICAgICAgICAiPHA+5pys5Lq65Y+q5piv5Lia5L2Z5pe26Ze06L+b6KGM5LqG5L+u5pS577yM6K6p5YW26IO957un57ut5bel5L2cPC9QPiIgKwogICAgICAgICAgICAgICAgIjxwPiAgPC9QPiIgKwogICAgICAgICAgICAgICAgLy8gIjxwPjxzPuaYvuekuuaMiemSru+8iOW+hea3u+WKoO+8iTwvcz48L3A+IiArCiAgICAgICAgICAgICAgICAvLyAiPHA+PHM+5oyJ6ZKu6YCP5piO5bqm77yI5b6F5re75Yqg77yJPC9zPjwvcD4iICsKICAgICAgICAgICAgICAgIC8vICI8cD48cz7lv6vpgJ/lpI3liLbvvIjlvoXmt7vliqDvvIk8L3M+PC9wPiIgKwogICAgICAgICAgICAgICAgLy8gIjxwPjxzPuWFtuS7liAo5b6F5re75Yqg77yJPC9zPjwvcD4iICsKICAgICAgICAgICAgICAgICI8cD7mlbDmja7lrZjlgqjmlrnlvI/kuLpKU09OLOWmguiLpeWcqOatpOS/ruaUuSzms6jmhI/lvJXlj7fpgJflj7c8L1A+IiArCiAgICAgICAgICAgICAgICAiPHRleHRhcmVhIHdyYXA9J29mZicgY29scz0nNDUnIHJvd3M9JzIwJyBzdHlsZT0nb3ZlcmZsb3c6YXV0bztib3JkZXItcmFkaXVzOjRweDsnPiIgKyBKU09OLnN0cmluZ2lmeSh1c2VyU2V0dGluZy5kYXRhLGZhbHNlLDQpICsgIjwvdGV4dGFyZWE+IiArIAogICAgICAgICAgICAgICAgIjxicj4iICsKICAgICAgICAgICAgICAgICI8cXhpbmJ1dHRvbiBpZD0ncndsLXJlc2V0Jz7muIXnqbrorr7nva48L3F4aW5idXR0b24+ICZuYnNwOyZuYnNwOyZuYnNwOyIgKwogICAgICAgICAgICAgICAgIjxxeGluYnV0dG9uIGlkPSdyd2wtc2V0TWVudVNhdmUnPuS/neWtmDwvcXhpbmJ1dHRvbj4gJm5ic3A7Jm5ic3A7Jm5ic3A7IiArCiAgICAgICAgICAgICAgICAiPHF4aW5idXR0b24gaWQ9J3J3bC1zZXRNZW51Q2xvc2UnIG9uY2xpY2s9J3RoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMucGFyZW50Tm9kZSk7JyB0aXRsZT0n5aaC5p6c5peg5rOV5YWz6ZetIOivt+WIt+aWsOeVjOmdoicgPuWFs+mXrTwvcXhpbmJ1dHRvbj4gJm5ic3A7Jm5ic3A7Jm5ic3A7IiArCiAgICAgICAgICAgICAgICAiPHNwYW4gc3R5bGU9J2ZvbnQtc2l6ZTowLjdlbTsnPi0tfCBxeGluIHY0LjMuNCAyMDIwLTAyLTIzIHwtLTwvc3Bhbj4iICsKICAgICAgICAgICAgICAgICIiCiAgICAgICAgICAgICIiOwogICAgICAgICAgICBvZG9tLmlubmVySFRNTCA9IGlubmVySDsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvZG9tKTsKCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNyd2wtc2V0TWVudVNhdmUiKS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsc2F2ZVNldHRpbmcpOwogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjcndsLXJlc2V0IikuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLHJ3bFJlc2V0KTsKCiAgICAgICAgfQoKICAgIC8vIOS/neWtmOmAiemhuQogICAgZnVuY3Rpb24gc2F2ZVNldHRpbmcoKXsKICAgICAgICB2YXIgcG9zaXRpb25Ub3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjcndsLXNldE1lbnUgI3Bvc2l0aW9udG9wIikudmFsdWU7CiAgICAgICAgdmFyIHVwbG9hZENoZWNrZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjcndsLXNldE1lbnUgI3VwbG9hZGNoZWNrZWQiKS5jaGVja2VkOwogICAgICAgIHZhciBhZGRCdG5DaGVja2VkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3J3bC1zZXRNZW51ICNidG5jaGVja2VkIikuY2hlY2tlZDsKICAgICAgICB2YXIgY29kZXZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3J3bC1zZXRNZW51IHRleHRhcmVhIikudmFsdWU7CiAgICAgICAgaWYoY29kZXZhbHVlKXsKICAgICAgICAgICAgdmFyIHVzZXJTZXR0aW5nID0gR01fZ2V0VmFsdWUoInJ3bF91c2VyRGF0YSIpOwoKCiAgICAgICAgICAgIHVzZXJTZXR0aW5nLmFkZEJ0biA9IGFkZEJ0bkNoZWNrZWQ7CiAgICAgICAgICAgIHVzZXJTZXR0aW5nLmRhdGEgPSBKU09OLnBhcnNlKGNvZGV2YWx1ZSk7CiAgICAgICAgICAgIHVzZXJTZXR0aW5nLnBvc2l0aW9uVG9wID0gcGFyc2VJbnQocG9zaXRpb25Ub3ApOwogICAgICAgICAgICB1c2VyU2V0dGluZy5jb25uZWN0VG9UaGVTZXJ2ZXIgPSB1cGxvYWRDaGVja2VkOwoKICAgICAgICAgICAgR01fc2V0VmFsdWUoInJ3bF91c2VyRGF0YSIsdXNlclNldHRpbmcpOwogICAgICAgICAgICAvLyDliLfmlrDpobXpnaIKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICB9LDMwMCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWxlcnQoIui+k+WFpeS4uuepuiIpOwogICAgICAgICAgICAvLyB0aGlzLnJlc2V0KCk7CiAgICAgICAgfQogICAgICAgIGNsb3NlTWVudSgpOwogICAgfQogICAgLy8g5aSN5Y6f6I+c5Y2VCiAgICBmdW5jdGlvbiByd2xSZXNldCgpewogICAgICAgIEdNX2RlbGV0ZVZhbHVlKCJyd2xfdXNlckRhdGEiKTsKICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICB9CgogICAgLy/lhbPpl63oj5zljZUKICAgIGZ1bmN0aW9uIGNsb3NlTWVudSgpewogICAgICAgIHZhciBvbGRFZGl0Qm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3J3bC1zZXRNZW51Iik7CiAgICAgICAgaWYob2xkRWRpdEJveCl7CiAgICAgICAgICAgIG9sZEVkaXRCb3gucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvbGRFZGl0Qm94KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgIH0KCiAgICAvLyDlop7liqDmi5bmi73kuovku7Yg6L+b6KGM57uR5a6aCiAgICBmdW5jdGlvbiBhZGREcmFnRXZlbigpewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGRyYWdCdG4oKQogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJkcmFnQnRu5Ye95pWwIOaKpemUmSIpOwogICAgICAgICAgICB9CiAgICAgICAgfSwxMDAwKQogICAgICAgIC8vIGRyYWdCdG4oKTsgIC8vIOWinuWKoOaLluWKqOS6i+S7tgogICAgfQoKICAgIC8vIOWinuWKoOaLluWKqOS6i+S7tiBmdW5jCiAgICBmdW5jdGlvbiBkcmFnQnRuKCl7CiAgICAgICAgdmFyIHJ3bF9ub2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3J3bC1pcXhpbiIpOwogICAgICAgIHJ3bF9ub2RlLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsZnVuY3Rpb24oZXZlbnQpewogICAgICAgICAgICByd2xfbm9kZS5zdHlsZS50cmFuc2l0aW9uID0gIm51bGwiOwogICAgICAgICAgICB2YXIgZGlzWCA9IGV2ZW50LmNsaWVudFggLSByd2xfbm9kZS5vZmZzZXRMZWZ0OwogICAgICAgICAgICB2YXIgZGlzWSA9IGV2ZW50LmNsaWVudFkgLSByd2xfbm9kZS5vZmZzZXRUb3A7CgogICAgICAgICAgICB2YXIgbW92ZSA9IGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgICAgIHJ3bF9ub2RlLnN0eWxlLmxlZnQgPSBldmVudC5jbGllbnRYIC0gZGlzWCArICJweCIgOwogICAgICAgICAgICAgICAgcndsX25vZGUuc3R5bGUudG9wICA9IGV2ZW50LmNsaWVudFkgLSBkaXNZICsgInB4IiA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsbW92ZSk7CiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICByd2xfbm9kZS5zdHlsZS50cmFuc2l0aW9uID0gIjAuM3MiOwogICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIixtb3ZlKTsKICAgICAgICAgICAgICAgIC8vIOatpOWHveaVsOWGheaJgOacieeahOazqOmHiuivreWPpemDveaYr+acieeUqOeahAogICAgICAgICAgICAgICAgICAgIC8vIOW8gOWQr+WQjizlj6/mi5bliqjliLDlsY/luZXlj7Pkvqcs5L2G5bCa5pyq5re75YqgY3NzCiAgICAgICAgICAgICAgICAgICAgLy8g5Zyo5LiK6Z2i5re75YqgIHJ3bC1hY3RpdmUtaXF4aW4g55qE5Zyw5pa55Yqg5LiK5Yik5pat5bem5Y+zLOWcqOWKoOS4iuebuOW6lOeahGNzc+WNs+WPrwogICAgICAgICAgICAgICAgICAgIC8vIOaHkiAyMDE4LTA0LTE4IDIxOjUxOjMyCiAgICAgICAgICAgICAgICAvLyB2YXIgYm9keVdpZHRoID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDsKICAgICAgICAgICAgICAgIHZhciByd2xfbm9kZVdpZHRoID0gcndsX25vZGUub2Zmc2V0TGVmdCArIHJ3bF9ub2RlLm9mZnNldFdpZHRoLzI7CiAgICAgICAgICAgICAgICAvLyBpZihyd2xfbm9kZVdpZHRoID4gYm9keVdpZHRoLzIpewogICAgICAgICAgICAgICAgLy8gICAgIHJ3bF9ub2RlLnN0eWxlLmxlZnQgPSAiYXV0byI7CiAgICAgICAgICAgICAgICAvLyAgICAgcndsX25vZGUuc3R5bGUucmlnaHQgPSAwOwogICAgICAgICAgICAgICAgLy8gICAgIHJ3bF91c2VyRGF0YS5wb3NpdGlvbkxlZnQgPSAiYXV0byI7CiAgICAgICAgICAgICAgICAvLyAgICAgcndsX3VzZXJEYXRhLnBvc2l0aW9uUmlnaHQgPSAiMCI7CiAgICAgICAgICAgICAgICAvLyB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJ3bF9ub2RlLnN0eWxlLnJpZ2h0ID0gcndsX3VzZXJEYXRhLnBvc2l0aW9uUmlnaHQgPSAiYXV0byI7CiAgICAgICAgICAgICAgICAgICAgcndsX25vZGUuc3R5bGUubGVmdCA9IHJ3bF91c2VyRGF0YS5wb3NpdGlvbkxlZnQgPSAgMDsKICAgICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICAgIHJ3bF91c2VyRGF0YS5wb3NpdGlvblRvcCA9IHJ3bF9ub2RlLm9mZnNldFRvcDsKICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJyd2xfdXNlckRhdGEiLHJ3bF91c2VyRGF0YSk7CgogICAgICAgICAgICB9KQogICAgICAgIH0pCiAgICB9CgogICAgLy8g5Yid5aeL5YyWIGluaXQgZnVuYwogICAgZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgICAvLyDpkojlr7nkuKrliKvnvZHnq5nph4flj5bkuI3lkIznmoTnrZbnlaUKICAgICAgICBydWxlID0gY2xlYXIoKTsKICAgICAgICAvLyDorr7nva4gZXZlbnQg5YiX6KGoCiAgICAgICAgaG9va19ldmVudE5hbWVzID0gcnVsZS5ob29rX2V2ZW50TmFtZXMuc3BsaXQoInwiKTsKICAgICAgICAvLyBUT0RPIEFsbG93ZWQgdG8gcmV0dXJuIHZhbHVlCiAgICAgICAgdW5ob29rX2V2ZW50TmFtZXMgPSBydWxlLnVuaG9va19ldmVudE5hbWVzLnNwbGl0KCJ8Iik7CiAgICAgICAgZXZlbnROYW1lcyA9IGhvb2tfZXZlbnROYW1lcy5jb25jYXQodW5ob29rX2V2ZW50TmFtZXMpOwoKICAgICAgICAvLyDosIPnlKjmuIXnkIYgRE9NMCBldmVudCDmlrnms5XnmoTlvqrnjq8KICAgICAgICBpZihydWxlLmRvbTApIHsKICAgICAgICAgICAgc2V0SW50ZXJ2YWwoY2xlYXJMb29wLCA1ICogMTAwMCk7CiAgICAgICAgICAgIHNldFRpbWVvdXQoY2xlYXJMb29wLCAxNTAwKTsKICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBjbGVhckxvb3AsIHRydWUpOwogICAgICAgICAgICBjbGVhckxvb3AoKTsKICAgICAgICB9CgogICAgICAgIC8vIGhvb2sgYWRkRXZlbnRMaXN0ZW5lciAvL+WvvOiHtOaQnOe0oui3s+i9rOWkseaViOeahOWOn+WboAogICAgICAgIGlmKHJ1bGUuaG9va19hZGRFdmVudExpc3RlbmVyKSB7CiAgICAgICAgICAgIEV2ZW50VGFyZ2V0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gYWRkRXZlbnRMaXN0ZW5lcjsKICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciA9IGFkZEV2ZW50TGlzdGVuZXI7CgogICAgICAgICAgICBpZihoYXNGcmFtZSl7CiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwO2k8aGFzRnJhbWUubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICAgICAgaGFzRnJhbWVbaV0uY29udGVudFdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyID0gYWRkRXZlbnRMaXN0ZW5lcjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICB9CgogICAgICAgIC8vIGhvb2sgcHJldmVudERlZmF1bHQKICAgICAgICBpZihydWxlLmhvb2tfcHJldmVudERlZmF1bHQpIHsKICAgICAgICAgICAgRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBpZihob29rX2V2ZW50TmFtZXMuaW5kZXhPZih0aGlzLnR5cGUpIDwgMCkgewogICAgICAgICAgICAgICAgICAgIEV2ZW50X3ByZXZlbnREZWZhdWx0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBpZihoYXNGcmFtZSl7CiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwO2k8aGFzRnJhbWUubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICAgICAgaGFzRnJhbWVbaV0uY29udGVudFdpbmRvdy5FdmVudC5wcm90b3R5cGUucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaG9va19ldmVudE5hbWVzLmluZGV4T2YodGhpcy50eXBlKSA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50X3ByZXZlbnREZWZhdWx0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBIb29rIHNldCByZXR1cm5WYWx1ZQogICAgICAgIGlmKHJ1bGUuaG9va19zZXRfcmV0dXJuVmFsdWUpIHsKICAgICAgICAgICAgRXZlbnQucHJvdG90eXBlLl9fZGVmaW5lU2V0dGVyX18oJ3JldHVyblZhbHVlJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBpZih0aGlzLnJldHVyblZhbHVlICE9PSB0cnVlICYmIGhvb2tfZXZlbnROYW1lcy5pbmRleE9mKHRoaXMudHlwZSkgPj0gMCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMucmV0dXJuVmFsdWUgPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIC8vIOa3u+WKoENTUyAgICAgLy8gY29uc29sZS5kZWJ1ZygndXJsOiAnICsgdXJsLCAnc3RvcmFnZU5hbWXvvJonICsgc3RvcmFnZU5hbWUsICdydWxlOiAnICsgcnVsZS5uYW1lKTsKICAgICAgICBpZihydWxlLmFkZF9jc3MpIHsKICAgICAgICAgICAgR01fYWRkU3R5bGUoJ2h0bWwsIDpub3QoW2NsYXNzKj0icndsLWV4ZW1wdCJdKSB7LXdlYmtpdC11c2VyLXNlbGVjdDp0ZXh0IWltcG9ydGFudDsgLW1vei11c2VyLXNlbGVjdDp0ZXh0IWltcG9ydGFudDt9IDpub3QoW2NsYXNzKj0icndsLWV4ZW1wdCJdKSA6OnNlbGVjdGlvbiB7Y29sb3I6I2ZmZjsgYmFja2dyb3VuZDojMzM5MEZGIWltcG9ydGFudDt9Jyk7CiAgICAgICAgfSAvL2Vsc2UgewogICAgICAgICAgICAvL0dNX2FkZFN0eWxlKCdodG1sLCA6bm90KFtjbGFzcyo9InJ3bC1leGVtcHQiXSkgey13ZWJraXQtdXNlci1zZWxlY3Q6dGV4dCFpbXBvcnRhbnQ7IC1tb3otdXNlci1zZWxlY3Q6dGV4dCFpbXBvcnRhbnQ7fScpOwogICAgICAgIC8vfQogICAgfQoKICAgIC8vIEhvb2sgYWRkRXZlbnRMaXN0ZW5lciBwcm9jCiAgICBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGZ1bmMsIHVzZUNhcHR1cmUpIHsKICAgICAgICB2YXIgX2FkZEV2ZW50TGlzdGVuZXIgPSB0aGlzID09PSBkb2N1bWVudCA/IGRvY3VtZW50X2FkZEV2ZW50TGlzdGVuZXIgOiBFdmVudFRhcmdldF9hZGRFdmVudExpc3RlbmVyOwogICAgICAgIGlmKGhvb2tfZXZlbnROYW1lcy5pbmRleE9mKHR5cGUpID49IDApIHsKICAgICAgICAgICAgX2FkZEV2ZW50TGlzdGVuZXIuYXBwbHkodGhpcywgW3R5cGUsIHJldHVyblRydWUsIHVzZUNhcHR1cmVdKTsKICAgICAgICB9IGVsc2UgaWYodW5ob29rX2V2ZW50TmFtZXMuaW5kZXhPZih0eXBlKSA+PSAwKSB7CiAgICAgICAgICAgIHZhciBmdW5jc05hbWUgPSBzdG9yYWdlTmFtZSArIHR5cGUgKyAodXNlQ2FwdHVyZSA/ICd0JyA6ICdmJyk7CgogICAgICAgICAgICBpZih0aGlzW2Z1bmNzTmFtZV0gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgdGhpc1tmdW5jc05hbWVdID0gW107CiAgICAgICAgICAgICAgICBfYWRkRXZlbnRMaXN0ZW5lci5hcHBseSh0aGlzLCBbdHlwZSwgdXNlQ2FwdHVyZSA/IHVuaG9va190IDogdW5ob29rX2YsIHVzZUNhcHR1cmVdKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpc1tmdW5jc05hbWVdLnB1c2goZnVuYyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX2FkZEV2ZW50TGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9CiAgICB9CgogICAgLy8g5riF55CG5b6q546vCiAgICBmdW5jdGlvbiBjbGVhckxvb3AoKSB7CiAgICAgICAgcnVsZSA9IGNsZWFyKCkgLy8g5a+55LqO5Yqo5oCB55Sf5oiQ55qE6IqC54K5LOmaj+aXtuajgOa1iwogICAgICAgIHZhciBlbGVtZW50cyA9IGdldEVsZW1lbnRzKCk7CgogICAgICAgIGZvcih2YXIgaSBpbiBlbGVtZW50cykgewogICAgICAgICAgZm9yKHZhciBqIGluIGV2ZW50TmFtZXMpIHsKICAgICAgICAgICAgdmFyIG5hbWUgPSAnb24nICsgZXZlbnROYW1lc1tqXTsKCiAgICAgICAgICAgIC8vIDs/5pyq6Kej5YazCiAgICAgICAgICAgICAgICAvLyAyMDE4LTA0LTAyIGVsZW1lbnRz5Lit5Lya5pyJ5a2X56ym5Liy5Ye6546wLOWOn+eJiOS4jeS8mizpl67popjkuI3mmI4s5qC55pys5Y6f5Zug5bCa5pyq6Kej5YazCiAgICAgICAgICAgICAgICAvLyDnm7jlhbPlj43ppoggIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtQ04vZm9ydW0vZGlzY3Vzc2lvbi8zNjAxNAogICAgICAgICAgICAgICAgLy8g6Zeu6aKY54mI5pys5Y+3ICB2My4wLjcKICAgICAgICAgICAgICAgIC8vIOmXrumimOihpeWFhSAgIOS5i+WJjeWPr+S7peS9v+eUqCzlhbfkvZPniYjmnKzmnKrmtYvvvIgyMDE4LTA0LTAyIDIxOjI3OjUz77yJLOWOn+eJiOWPr+S7peS9v+eUqAogICAgICAgICAgICBpZihPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZWxlbWVudHNbaV0pPT0iW29iamVjdCBTdHJpbmddIil7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZWxlbWVudHNbaV0pCiAgICAgICAgICAgIC8vIGlmKHR5cGVvZiBlbGVtZW50c1tpXVtuYW1lXSA9PT0gIm9iamVjdCIpewogICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2codHlwZW9mIGVsZW1lbnRzW2ldW25hbWVdKQogICAgICAgICAgICAvLyB9CiAgICAgICAgICAgIGlmKGVsZW1lbnRzW2ldW25hbWVdICE9PSBudWxsICYmIGVsZW1lbnRzW2ldW25hbWVdICE9PSBvbnh4eCkgewogICAgICAgICAgICAgICAgaWYodW5ob29rX2V2ZW50TmFtZXMuaW5kZXhPZihldmVudE5hbWVzW2pdKSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNbaV1bc3RvcmFnZU5hbWUgKyBuYW1lXSA9IGVsZW1lbnRzW2ldW25hbWVdOwogICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldW25hbWVdID0gb254eHg7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50c1tpXVtuYW1lXSA9IG51bGw7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8vIOi/lOWbnnRydWXnmoTlh73mlbAKICAgIGZ1bmN0aW9uIHJldHVyblRydWUoZSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgZnVuY3Rpb24gdW5ob29rX3QoZSkgewogICAgICAgIHJldHVybiB1bmhvb2soZSwgdGhpcywgc3RvcmFnZU5hbWUgKyBlLnR5cGUgKyAndCcpOwogICAgfQogICAgZnVuY3Rpb24gdW5ob29rX2YoZSkgewogICAgICAgIHJldHVybiB1bmhvb2soZSwgdGhpcywgc3RvcmFnZU5hbWUgKyBlLnR5cGUgKyAnZicpOwogICAgfQogICAgZnVuY3Rpb24gdW5ob29rKGUsIHNlbGYsIGZ1bmNzTmFtZSkgewogICAgICAgIHZhciBsaXN0ID0gc2VsZltmdW5jc05hbWVdOwogICAgICAgIGZvcih2YXIgaSBpbiBsaXN0KSB7CiAgICAgICAgICAgIGxpc3RbaV0oZSk7CiAgICAgICAgfQoKICAgICAgICBlLnJldHVyblZhbHVlID0gdHJ1ZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGZ1bmN0aW9uIG9ueHh4KGUpIHsKICAgICAgICB2YXIgbmFtZSA9IHN0b3JhZ2VOYW1lICsgJ29uJyArIGUudHlwZTsKICAgICAgICB0aGlzW25hbWVdKGUpOwoKICAgICAgICBlLnJldHVyblZhbHVlID0gdHJ1ZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyDojrflj5bmiYDmnInlhYPntKAg5YyF5ousZG9jdW1lbnQKICAgIGZ1bmN0aW9uIGdldEVsZW1lbnRzKCkgewogICAgICAgIHZhciBlbGVtZW50cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCcqJykpOwogICAgICAgIGVsZW1lbnRzLnB1c2goZG9jdW1lbnQpOwoKICAgICAgICAvLyDlvqrnjq/miYDmnIkgZnJhbWUg56qX5Y+jCiAgICAgICAgdmFyIGZyYW1lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImZyYW1lIikKICAgICAgICBpZihmcmFtZXMpewogICAgICAgICAgICBoYXNGcmFtZSA9IGZyYW1lczsKICAgICAgICAgICAgdmFyIGZyYW1lc19lbGVtZW50OwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDtpPGZyYW1lcy5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgIGZyYW1lc19lbGVtZW50ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJhbWVzW2ldLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiKiIpKQogICAgICAgICAgICAgICAgZWxlbWVudHMucHVzaChmcmFtZXNbaV0uY29udGVudFdpbmRvdy5kb2N1bWVudCkKICAgICAgICAgICAgICAgIGVsZW1lbnRzID0gZWxlbWVudHMuY29uY2F0KGZyYW1lc19lbGVtZW50KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gZWxlbWVudHM7CiAgICB9OwoKICAgIC8vIOiOt+WPlum7keWQjeWNlee9keermSBGdW5jCiAgICBmdW5jdGlvbiBnZXRfYmxhY2tfbGlzdCgpewogICAgICAgIC8vIOS5i+WJjeeJiOacrOWPr+iDveWvvOiHtOWtmOWCqOepuueahOWtl+espuS4sgogICAgICAgICAgICAvLyAyMDE4LTA2LTExIDE1OjExOjQ0IOS/neeVmSzlvZPlrrnplJnlpITnkIYKICAgICAgICB2YXIgZGF0YV90ZW1wID0gcndsX3VzZXJEYXRhLmRhdGE7CiAgICAgICAgZGF0YV90ZW1wID0gZGF0YV90ZW1wLmZpbHRlcihmdW5jdGlvbihpdGVtKXsKICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmxlbmd0aD4xOwogICAgICAgICAgICB9KQogICAgICAgIHJldHVybiBkYXRhX3RlbXA7CiAgICB9CiAgICAKICAgIC8vIOajgOafpeaYr+WQpuWtmOWcqOS6jum7keWQjeWNleS4rSDov5Tlm57kvY3nva4gZnVuYwogICAgZnVuY3Rpb24gY2hlY2tfYmxhY2tfbGlzdChsaXN0LGhvc3QpewogICAgICAgIGZvcihsZXQgaT0wO2k8bGlzdC5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgaWYofmhvc3RuYW1lLmluZGV4T2YobGlzdFtpXSkpewogICAgICAgICAgICAgICAgcmV0dXJuIGkrMTsgIC8v5LiH5LiA5Yy56YWN5Yiw56ys5LiA5LiqLOi/lOWbnjAKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLy8g6byg5qCH54K55Ye75ZCO5oyJ6ZKu5ZCOIOajgOafpeaYr+WQpuWcqOm7keWQjeWNlQogICAgZnVuY3Rpb24gYmxhY2tfY2hlY2soYm9vbCl7CiAgICAgICAgdmFyIGxpc3QgPSBHTV9nZXRWYWx1ZSgicndsX3VzZXJEYXRhIikuZGF0YQogICAgICAgIHZhciBjaGVjayA9IGNoZWNrX2JsYWNrX2xpc3QobGlzdCxob3N0bmFtZSk7CgogICAgICAgIGlmIChib29sICYmICFjaGVjaykgewogICAgICAgICAgICBsaXN0ID0gbGlzdC5jb25jYXQoaG9zdG5hbWUpOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygi6YCJ5LitIOS4jeWcqOm7keWQjeWNlSwg5aKe5YqgIixob3N0bmFtZSxsaXN0KTsKICAgICAgICAgICAgcndsX3VzZXJEYXRhLndhaXRVcGxvYWQucHVzaChob3N0bmFtZSk7IC8v5YeG5aSH5LiK5LygCiAgICAgICAgICAgIHJ3bF91c2VyRGF0YS5jdXJyZW50VVJMID0gd2luZG93LmxvY2F0aW9uLmhyZWY7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJhZnRlcjogIixyd2xfdXNlckRhdGEud2FpdFVwbG9hZCkKCiAgICAgICAgICAgIHNhdmVEYXRhKGxpc3QpOwogICAgICAgICAgICBpbml0KCk7CgogICAgICAgIH1lbHNlIGlmKCFib29sICYmIGNoZWNrKXsKICAgICAgICAgICAgbGlzdC5zcGxpY2UoY2hlY2stMSwxKTsKICAgICAgICAgICAgc2F2ZURhdGEobGlzdCk7CiAgICAgICAgICAgIC8vIOWIt+aWsOmhtemdogogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKHRydWUpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIuWIt+aWsOmhtemdomxvYWRpbmciKTsKICAgICAgICAgICAgfSwzNTApOwogICAgICAgIH1lbHNlewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIC8vIOS/neWtmOacrOWcsOaVsOaNrizlubblsIbmlbDmja7kuIrkvKDoh7PmnI3liqHlmagKICAgIGZ1bmN0aW9uIHNhdmVEYXRhKGxpc3RzKXsKICAgICAgICBsaXN0cyA9IGxpc3RzLmZpbHRlcihmdW5jdGlvbihpdGVtKXsKICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubGVuZ3RoPjE7CiAgICAgICAgfSkKCiAgICAgICAgLy8g5pu05paw5pWw5o2uCiAgICAgICAgcndsX3VzZXJEYXRhLmRhdGEgPSBsaXN0cy5zb3J0KCk7CgogICAgICAgIC8vIOWwhuacrOWcsOm7keWQjeWNleS4iuS8oAogICAgICAgIGlmIChyd2xfdXNlckRhdGEud2FpdFVwbG9hZC5sZW5ndGggPiAwICYmIHJ3bF91c2VyRGF0YS5jb25uZWN0VG9UaGVTZXJ2ZXIpewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygicndsIDog5LiK5LygLi4uIixyd2xfdXNlckRhdGEud2FpdFVwbG9hZCk7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJyd2wgOiDlvIDlp4vkuIrkvKAtLS0tLSIpOwogICAgICAgICAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICAgICAgLy8gdXJsOiAiaHR0cDovLzEyNy4wLjAuMTo4MDAwL3Rvb2wvdGVzdGFqYXgvIiwKICAgICAgICAgICAgICB1cmw6ICJodHRwOi8vZWVtbS5tZS90b29sL3J3bF91cGxvYWQvIiwKICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShyd2xfdXNlckRhdGEpLAogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIgogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coInJ3bCA6IOS4iuS8oOaIkOWKny0tLS0iKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByd2xfdXNlckRhdGEud2FpdFVwbG9hZCA9IFtdOwogICAgICAgIH0KCiAgICAgICAgR01fc2V0VmFsdWUoInJ3bF91c2VyRGF0YSIscndsX3VzZXJEYXRhKTsKICAgICAgICByZXR1cm4gcndsX3VzZXJEYXRhOwogICAgfQoKICAgIC8vIOaVsOe7hOWOu+mHjQogICAgZnVuY3Rpb24gdW5pcXVlKGFycikgewogICAgICB2YXIgcmV0ID0gW10KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgaXRlbSA9IGFycltpXQogICAgICAgIGlmIChyZXQuaW5kZXhPZihpdGVtKSA9PT0gLTEpIHsKICAgICAgICAgIHJldC5wdXNoKGl0ZW0pCiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiByZXQ7CiAgICB9CgogICAgLy8g5aSN5Yi25Yiw5Ymq6LS05p2/CiAgICBmdW5jdGlvbiBzZXRDbGlwYm9hcmQoKXsKICAgICAgICB2YXIgdGV4dF9vYmogPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7CiAgICAgICAgdmFyIHRleHQgPSB0ZXh0X29iai50b1N0cmluZygpOwogICAgICAgIEdNX3NldENsaXBib2FyZCh0ZXh0KTsKCiAgICB9CgogICAgLy8g6YOo5YiG572R56uZ6YeH55So5LqG5YW25LuW55qE6Ziy5aSN5Yi25omL5q61CiAgICBmdW5jdGlvbiBjbGVhcigpewogICAgICAgIC8vIGNvbnNvbGUubG9nKCLov5vlhaVjbGVhciIsaG9zdG5hbWUscndsX3VzZXJEYXRhLnJ1bGVzKTsKICAgICAgICBzd2l0Y2ggKGhvc3RuYW1lKXsKICAgICAgICAgICAgY2FzZSAid3d3LnozejQuY29tIjogY2xlYXJfY292ZXJzKCIubW92aWVkb3duYWRkaXYiKTsgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgImh1YXl1LmJhaWR1LmNvbSI6IGNsZWFyX2NvdmVycygiI2pxQ29udGV4dE1lbnUiKTsgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgInd3dy5teWh0bG1lYm9vay5jb20iOiBjbGVhcl9jb3ZlcnMoImltZy5mdWxsaW1nIik7IGJyZWFrOwogICAgICAgICAgICBjYXNlICJ6aGlodS5jb20iOgogICAgICAgICAgICBjYXNlICJ3d3cuemhpaHUuY29tIjogcmV0dXJuIHJ3bF91c2VyRGF0YS5ydWxlcy5ydWxlX3poaWh1OyBicmVhazsKICAgICAgICAgICAgY2FzZSAidC5iaWxpYmlsaS5jb20iOiBjbGVhcl9saW5rX2JpbGliaWxpKCk7IGJyZWFrOwogICAgICAgICAgICBjYXNlICJ3d3cudXNsc29mdHdhcmUuY29tIjogY2xlYXJfY292ZXJzKCIucHJvdGVjdF9jb250ZW50cy1vdmVybGF5Iik7Y2xlYXJfY292ZXJzKCIucHJvdGVjdF9hbGVydCIpOyByZXR1cm4gcndsX3VzZXJEYXRhLnJ1bGVzLnJ1bGVfcGx1czsgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgInd3dy5zaGFuZ2MubmV0IjogcmV0dXJuIHJ3bF91c2VyRGF0YS5ydWxlcy5ydWxlX3BsdXM7IGJyZWFrOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcndsX3VzZXJEYXRhLnJ1bGVzLnJ1bGVfZGVmOwogICAgfQogICAgLy8g5Y676Zmk6KaG55uW5bGCCiAgICBmdW5jdGlvbiBjbGVhcl9jb3ZlcnMoZWxlKXsKICAgICAgICB2YXIgb2RpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlKTsKICAgICAgICBpZihvZGl2KXsKICAgICAgICAgICAgb2Rpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9kaXYpOwogICAgICAgIH0KICAgIH0KICAgIC8vIGLnq5nlsIbmloflrZfltYzlpZflnKjpk77mjqXkuK0KICAgIGZ1bmN0aW9uIGNsZWFyX2xpbmtfYmlsaWJpbGkoKXsKICAgICAgICB2YXIgb2RpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5kZXNjcmlwdGlvbiIpOwogICAgICAgIGlmKG9kaXYpewogICAgICAgICAgICB2YXIgdERpdiA9IG9kaXYucXVlcnlTZWxlY3RvcigiLmNvbnRlbnQtZWxsaXBzaXMiKTsKICAgICAgICAgICAgdmFyIGFEaXYgPSBvZGl2LnF1ZXJ5U2VsZWN0b3IoImEiKTsKICAgICAgICAgICAgIG9kaXYuYXBwZW5kQ2hpbGQodERpdik7CiAgICAgICAgfQogICAgfQoKICAgIC8vIDMueC54IOi/h+a4oSA0LngueCDniYjmnKwKICAgIGZ1bmN0aW9uIHZlcnNpb25fdXBfM190b180KCl7CiAgICAgICAgdmFyIG9sZF92ZXJzaW9uID0gR01fZ2V0VmFsdWUoImJsYWNrX2xpc3QiKTsKICAgICAgICBpZighb2xkX3ZlcnNpb24pe3JldHVybn07CiAgICAgICAgcndsX3VzZXJEYXRhLmRhdGEgPSB1bmlxdWUocndsX3VzZXJEYXRhLmRhdGEuY29uY2F0KG9sZF92ZXJzaW9uLmRhdGEpKTsKICAgICAgICBHTV9zZXRWYWx1ZSgicndsX3VzZXJEYXRhIixyd2xfdXNlckRhdGEpOwoKICAgICAgICBHTV9kZWxldGVWYWx1ZSgiYmxhY2tfbGlzdCIpOwogICAgICAgIEdNX2RlbGV0ZVZhbHVlKCJyd2xfdXNlcmRhdGEiKTsKICAgIH0KfSkoKTsg"},{"name":"iqiyi-player-switch","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":["*://*.iqiyi.com/*","*://v.baidu.com/*","*://music.baidu.com/mv/*","*://www.zybus.com/*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-start","orig_noframes":null}},"storage":{"data":{},"ts":1587235898631},"enabled":false,"position":7,"file_url":"https://greasyfork.org/scripts/28356-iqiyi-player-switch/code/iqiyi-player-switch.user.js","uuid":"a1112fbd-feb3-4bef-899d-a50408afa85a","source":"Ci8vID09VXNlclNjcmlwdD09Ci8vIEBuYW1lICAgICAgICAgaXFpeWktcGxheWVyLXN3aXRjaAovLyBAbmFtZXNwYWNlICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9nb295aWUvdXNlcnNjcmlwdC1pcWl5aS1wbGF5ZXItc3dpdGNoCi8vIEBob21lcGFnZVVSTCAgaHR0cHM6Ly9naXRodWIuY29tL2dvb3lpZS91c2Vyc2NyaXB0LWlxaXlpLXBsYXllci1zd2l0Y2gKLy8gQHN1cHBvcnRVUkwgICBodHRwczovL2dpdGh1Yi5jb20vZ29veWllL3VzZXJzY3JpcHQtaXFpeWktcGxheWVyLXN3aXRjaC9pc3N1ZXMKLy8gQGRlc2NyaXB0aW9uICDniLHlpYfoibpmbGFzaOaSreaUvuWZqOS4jmh0bWw15pKt5pS+5Zmo6ZqP5oSP5YiH5o2i77yM5pS55ZaEaHRtbDXmkq3mlL7lmajmkq3mlL7kvZPpqozjgIIKLy8gQHZlcnNpb24gICAgICAxLjE0LjAKLy8gQGNvbXBhdGlibGUgICBjaHJvbWUgPj0gNDMKLy8gQGNvbXBhdGlibGUgICBmaXJlZm94ID49IDQ1Ci8vIEBjb21wYXRpYmxlICAgZWRnZSA+PSAxNQovLyBAYXV0aG9yICAgICAgIGdvb3lpZQovLyBAbGljZW5zZSAgICAgIE1JVCBMaWNlbnNlCi8vCi8vIEBpbmNsdWRlICAgICAgKjovLyouaXFpeWkuY29tLyoKLy8gQGluY2x1ZGUgICAgICAqOi8vdi5iYWlkdS5jb20vKgovLyBAaW5jbHVkZSAgICAgICo6Ly9tdXNpYy5iYWlkdS5jb20vbXYvKgovLyBAaW5jbHVkZSAgICAgICo6Ly93d3cuenlidXMuY29tLyoKLy8gQGdyYW50ICAgICAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kCi8vIEBncmFudCAgICAgICAgR01feG1saHR0cFJlcXVlc3QKLy8gQGdyYW50ICAgICAgICBHTV9hZGRTdHlsZQovLyBAZ3JhbnQgICAgICAgIEdNX2dldFZhbHVlCi8vIEBncmFudCAgICAgICAgR01fc2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICBHTV9pbmZvCi8vIEBncmFudCAgICAgICAgdW5zYWZlV2luZG93Ci8vIEBjb25uZWN0ICAgICAgcWl5aS5jb20KLy8gQHJ1bi1hdCAgICAgICBkb2N1bWVudC1zdGFydAovLyA9PS9Vc2VyU2NyaXB0PT0KCi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXAKLyoqKioqKi8gCS8vIFRoZSBtb2R1bGUgY2FjaGUKLyoqKioqKi8gCXZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307Ci8qKioqKiovCi8qKioqKiovIAkvLyBUaGUgcmVxdWlyZSBmdW5jdGlvbgovKioqKioqLyAJZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkgewovKioqKioqLwovKioqKioqLyAJCS8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZQovKioqKioqLyAJCWlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7Ci8qKioqKiovIAkJCXJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzOwovKioqKioqLyAJCX0KLyoqKioqKi8gCQkvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKQovKioqKioqLyAJCXZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHsKLyoqKioqKi8gCQkJaTogbW9kdWxlSWQsCi8qKioqKiovIAkJCWw6IGZhbHNlLAovKioqKioqLyAJCQlleHBvcnRzOiB7fQovKioqKioqLyAJCX07Ci8qKioqKiovCi8qKioqKiovIAkJLy8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uCi8qKioqKiovIAkJbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7Ci8qKioqKiovCi8qKioqKiovIAkJLy8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZAovKioqKioqLyAJCW1vZHVsZS5sID0gdHJ1ZTsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZQovKioqKioqLyAJCXJldHVybiBtb2R1bGUuZXhwb3J0czsKLyoqKioqKi8gCX0KLyoqKioqKi8KLyoqKioqKi8KLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzOwovKioqKioqLwovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGUKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7Ci8qKioqKiovCi8qKioqKiovIAkvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHMKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikgewovKioqKioqLyAJCWlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHsKLyoqKioqKi8gCQkJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsKLyoqKioqKi8gCQkJCWNvbmZpZ3VyYWJsZTogZmFsc2UsCi8qKioqKiovIAkJCQllbnVtZXJhYmxlOiB0cnVlLAovKioqKioqLyAJCQkJZ2V0OiBnZXR0ZXIKLyoqKioqKi8gCQkJfSk7Ci8qKioqKiovIAkJfQovKioqKioqLyAJfTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHsKLyoqKioqKi8gCQl2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID8KLyoqKioqKi8gCQkJZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDoKLyoqKioqKi8gCQkJZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTsKLyoqKioqKi8gCQlfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7Ci8qKioqKiovIAkJcmV0dXJuIGdldHRlcjsKLyoqKioqKi8gCX07Ci8qKioqKiovCi8qKioqKiovIAkvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSAiIjsKLyoqKioqKi8KLyoqKioqKi8gCS8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0cwovKioqKioqLyAJcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNSk7Ci8qKioqKiovIH0pCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCi8qKioqKiovIChbCi8qIDAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9zbGljZWRUb0FycmF5ID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBzbGljZUl0ZXJhdG9yKGFyciwgaSkgeyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0pIF9pWyJyZXR1cm4iXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7IH0gfTsgfSgpOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7Cgp2YXIgX2xvZ2dlciA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX2xvZ2dlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2dnZXIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKdmFyIEhvb2tlciA9IGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIEhvb2tlcigpIHsKICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSG9va2VyKTsKICAgIH0KCiAgICBfY3JlYXRlQ2xhc3MoSG9va2VyLCBudWxsLCBbewogICAgICAgIGtleTogJ19ob29rQ2FsbCcsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9ob29rQ2FsbChjYikgewogICAgICAgICAgICB2YXIgY2FsbCA9IEZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsOwogICAgICAgICAgICBGdW5jdGlvbi5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgICAgICAgICAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgcmV0ID0gY2FsbC5hcHBseSh0aGlzLCBhcmdzKTsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3MgJiYgY2IoYXJncykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb24ucHJvdG90eXBlLmNhbGwgPSBjYWxsOwogICAgICAgICAgICAgICAgICAgICAgICBjYiA9IGZ1bmN0aW9uIGNiKCkge307CiAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dnZXIyLmRlZmF1bHQuaW5mbyhgVGhlIG5hdGl2ZSBmdW5jdGlvbiBjYWxsIGhhcyBiZWVuIHJlc3RvcmVkYCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgX2xvZ2dlcjIuZGVmYXVsdC5lcnJvcihlcnIuc3RhY2spOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5faG9va0NhbGwgPSBudWxsOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdfaXNNb2R1bGVDYWxsJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2lzTW9kdWxlQ2FsbChhcmdzKSB7CiAgICAgICAgICAgIC8vIG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCByZXF1aXJlCiAgICAgICAgICAgIHJldHVybiBhcmdzLmxlbmd0aCA9PT0gNCAmJiBhcmdzWzFdICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihhcmdzWzFdKSA9PT0gT2JqZWN0LnByb3RvdHlwZSAmJiBhcmdzWzFdLmhhc093blByb3BlcnR5KCdleHBvcnRzJyk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ19ob29rTW9kdWxlQ2FsbCcsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9ob29rTW9kdWxlQ2FsbChjYiwgcHJlZCkgewogICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICAgICAgdmFyIGNhbGxiYWNrc01hcCA9IG5ldyBNYXAoW1twcmVkLCBbY2JdXV0pOwogICAgICAgICAgICB0aGlzLl9ob29rQ2FsbChmdW5jdGlvbiAoYXJncykgewogICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5faXNNb2R1bGVDYWxsKGFyZ3MpKSByZXR1cm47CgogICAgICAgICAgICAgICAgdmFyIGV4cG9ydHMgPSBhcmdzWzFdLmV4cG9ydHM7CiAgICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7CiAgICAgICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDsKCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IGNhbGxiYWNrc01hcFtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWYgPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9wcmVkID0gX3JlZjJbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYWxsYmFja3MgPSBfcmVmMlsxXTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX3ByZWQuYXBwbHkoX3RoaXMsIFtleHBvcnRzXSkpIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbiAoY2IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYihleHBvcnRzLCBhcmdzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmtlZXBhbGl2ZSB8fCBjYWxsYmFja3NNYXAuZGVsZXRlKF9wcmVkKTsKICAgICAgICAgICAgICAgICAgICAgICAgIWNhbGxiYWNrc01hcC5zaXplICYmIChfdGhpcy5faG9va01vZHVsZUNhbGwgPSBudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyOwogICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gIWNhbGxiYWNrc01hcC5zaXplOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHRoaXMuX2hvb2tNb2R1bGVDYWxsID0gZnVuY3Rpb24gKGNiLCBwcmVkKSB7CiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2tzTWFwLmhhcyhwcmVkKSkgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrc01hcC5nZXQocHJlZCkucHVzaChjYik7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrc01hcC5zZXQocHJlZCwgW2NiXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ19pc0pxdWVyeU1vZHVsZUNhbGwnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNKcXVlcnlNb2R1bGVDYWxsKGV4cG9ydHMpIHsKICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuaGFzT3duUHJvcGVydHkoJ2ZuJykgJiYgZXhwb3J0cy5mbi5oYXNPd25Qcm9wZXJ0eSgnanF1ZXJ5Jyk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ2hvb2tKcXVlcnknLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBob29rSnF1ZXJ5KCkgewogICAgICAgICAgICB2YXIgY2IgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZ1bmN0aW9uICgpIHt9OwoKICAgICAgICAgICAgdGhpcy5faG9va01vZHVsZUNhbGwoY2IsIHRoaXMuX2lzSnF1ZXJ5TW9kdWxlQ2FsbCk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ2hvb2tKcXVlcnlBamF4JywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaG9va0pxdWVyeUFqYXgoY2IpIHsKICAgICAgICAgICAgdGhpcy5ob29rSnF1ZXJ5KGZ1bmN0aW9uIChleHBvcnRzKSB7CiAgICAgICAgICAgICAgICB2YXIgYWpheCA9IGV4cG9ydHMuYWpheC5iaW5kKGV4cG9ydHMpOwogICAgICAgICAgICAgICAgZXhwb3J0cy5hamF4ID0gZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1cmwgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmMyA9IFt1cmwudXJsLCB1cmxdOwogICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBfcmVmM1swXTsKICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IF9yZWYzWzFdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgaXNIaWphY2tlZCA9IGNiKHVybCwgb3B0aW9ucyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSGlqYWNrZWQpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWpheCh1cmwsIG9wdGlvbnMpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ19pc0h0dHBNb2R1bGVDYWxsJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2lzSHR0cE1vZHVsZUNhbGwoZXhwb3J0cykgewogICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eSgnanNvbnAnKSAmJiBleHBvcnRzLmhhc093blByb3BlcnR5KCdhamF4Jyk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ2hvb2tIdHRwJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaG9va0h0dHAoY2IpIHsKICAgICAgICAgICAgdGhpcy5faG9va01vZHVsZUNhbGwoY2IsIHRoaXMuX2lzSHR0cE1vZHVsZUNhbGwpOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdob29rSHR0cEpzb25wJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaG9va0h0dHBKc29ucChjYikgewogICAgICAgICAgICB0aGlzLmhvb2tIdHRwKGZ1bmN0aW9uIChleHBvcnRzKSB7CiAgICAgICAgICAgICAgICB2YXIganNvbnAgPSBleHBvcnRzLmpzb25wLmJpbmQoZXhwb3J0cyk7CiAgICAgICAgICAgICAgICBleHBvcnRzLmpzb25wID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaXNIaWphY2tlZCA9IGNiKG9wdGlvbnMpOwogICAgICAgICAgICAgICAgICAgIGlmIChpc0hpamFja2VkKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGpzb25wKG9wdGlvbnMpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ19pc0xvZ29Nb2R1bGVDYWxsJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2lzTG9nb01vZHVsZUNhbGwoZXhwb3J0cykgewogICAgICAgICAgICByZXR1cm4gJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGV4cG9ydHMgJiYgZXhwb3J0cy5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoJ3Nob3dMb2dvJyk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ2hvb2tMb2dvJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaG9va0xvZ28oY2IpIHsKICAgICAgICAgICAgdGhpcy5faG9va01vZHVsZUNhbGwoY2IsIHRoaXMuX2lzTG9nb01vZHVsZUNhbGwpOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdfaXNGdWxsU2NyZWVuTW9kdWxlQ2FsbCcsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9pc0Z1bGxTY3JlZW5Nb2R1bGVDYWxsKGV4cG9ydHMpIHsKICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuX19wcm90b19fICYmIGV4cG9ydHMuX19wcm90b19fLmhhc093blByb3BlcnR5KCdpc0Z1bGxTY3JlZW4nKTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnaG9va0Z1bGxTY3JlZW4nLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBob29rRnVsbFNjcmVlbihjYikgewogICAgICAgICAgICB0aGlzLl9ob29rTW9kdWxlQ2FsbChjYiwgdGhpcy5faXNGdWxsU2NyZWVuTW9kdWxlQ2FsbCk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ19pc1dlYkZ1bGxTY3JlZW5Nb2R1bGVDYWxsJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2lzV2ViRnVsbFNjcmVlbk1vZHVsZUNhbGwoZXhwb3J0cykgewogICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5fX3Byb3RvX18gJiYgZXhwb3J0cy5fX3Byb3RvX18uaGFzT3duUHJvcGVydHkoJ2lzV2ViRnVsbFNjcmVlbicpOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdob29rV2ViRnVsbFNjcmVlbicsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhvb2tXZWJGdWxsU2NyZWVuKGNiKSB7CiAgICAgICAgICAgIHRoaXMuX2hvb2tNb2R1bGVDYWxsKGNiLCB0aGlzLl9pc1dlYkZ1bGxTY3JlZW5Nb2R1bGVDYWxsKTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnaG9va1dlYkZ1bGxTY3JlZW5Jbml0JywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaG9va1dlYkZ1bGxTY3JlZW5Jbml0KGNiKSB7CiAgICAgICAgICAgIHRoaXMuaG9va1dlYkZ1bGxTY3JlZW4oZnVuY3Rpb24gKGV4cG9ydHMpIHsKICAgICAgICAgICAgICAgIHZhciBpbml0ID0gZXhwb3J0cy5fX3Byb3RvX18uaW5pdDsKICAgICAgICAgICAgICAgIGV4cG9ydHMuX19wcm90b19fLmluaXQgPSBmdW5jdGlvbiAod3JhcHBlciwgYnRuKSB7CiAgICAgICAgICAgICAgICAgICAgY2IodGhpcywgd3JhcHBlciwgYnRuKTsKICAgICAgICAgICAgICAgICAgICBpbml0LmFwcGx5KHRoaXMsIFt3cmFwcGVyLCBidG5dKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdfaXNQbHVnaW5Db250cm9sc01vZHVsZUNhbGwnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNQbHVnaW5Db250cm9sc01vZHVsZUNhbGwoZXhwb3J0cykgewogICAgICAgICAgICByZXR1cm4gJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGV4cG9ydHMgJiYgZXhwb3J0cy5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoJ2luaXRGdWxsU2NyZWVuJyk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ2hvb2tQbHVnaW5Db250cm9scycsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhvb2tQbHVnaW5Db250cm9scyhjYikgewogICAgICAgICAgICB0aGlzLl9ob29rTW9kdWxlQ2FsbChjYiwgdGhpcy5faXNQbHVnaW5Db250cm9sc01vZHVsZUNhbGwpOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdob29rUGx1Z2luQ29udHJvbHNJbml0JywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaG9va1BsdWdpbkNvbnRyb2xzSW5pdChjYikgewogICAgICAgICAgICB0aGlzLmhvb2tQbHVnaW5Db250cm9scyhmdW5jdGlvbiAoZXhwb3J0cykgewogICAgICAgICAgICAgICAgdmFyIGluaXQgPSBleHBvcnRzLnByb3RvdHlwZS5pbml0OwogICAgICAgICAgICAgICAgZXhwb3J0cy5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBjYih0aGlzKTsKICAgICAgICAgICAgICAgICAgICBpbml0LmFwcGx5KHRoaXMpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ2hvb2tJbml0RnVsbFNjcmVlbicsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhvb2tJbml0RnVsbFNjcmVlbihjYikgewogICAgICAgICAgICB0aGlzLmhvb2tQbHVnaW5Db250cm9scyhmdW5jdGlvbiAoZXhwb3J0cykgewogICAgICAgICAgICAgICAgdmFyIGluaXRGdWxsU2NyZWVuID0gZXhwb3J0cy5wcm90b3R5cGUuaW5pdEZ1bGxTY3JlZW47CiAgICAgICAgICAgICAgICBleHBvcnRzLnByb3RvdHlwZS5pbml0RnVsbFNjcmVlbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBjYih0aGlzKTsKICAgICAgICAgICAgICAgICAgICBpbml0RnVsbFNjcmVlbi5hcHBseSh0aGlzKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdfaXNDb3JlTW9kdWxlQ2FsbCcsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9pc0NvcmVNb2R1bGVDYWxsKGV4cG9ydHMpIHsKICAgICAgICAgICAgcmV0dXJuICdmdW5jdGlvbicgPT09IHR5cGVvZiBleHBvcnRzICYmIGV4cG9ydHMucHJvdG90eXBlLmhhc093blByb3BlcnR5KCdnZXRkZWZhdWx0dmRzJykgJiYgZXhwb3J0cy5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoJ2dldE1vdmllSW5mbycpOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdob29rQ29yZScsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhvb2tDb3JlKGNiKSB7CiAgICAgICAgICAgIHRoaXMuX2hvb2tNb2R1bGVDYWxsKGNiLCB0aGlzLl9pc0NvcmVNb2R1bGVDYWxsKTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnX2lzU2tpbkJhc2VNb2R1bGVDYWxsJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2lzU2tpbkJhc2VNb2R1bGVDYWxsKGV4cG9ydHMpIHsKICAgICAgICAgICAgcmV0dXJuICdmdW5jdGlvbicgPT09IHR5cGVvZiBleHBvcnRzICYmIGV4cG9ydHMucHJvdG90eXBlLmhhc093blByb3BlcnR5KCdfY2hlY2tQbHVnaW4nKTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnaG9va1NraW5CYXNlJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaG9va1NraW5CYXNlKGNiKSB7CiAgICAgICAgICAgIHRoaXMuX2hvb2tNb2R1bGVDYWxsKGNiLCB0aGlzLl9pc1NraW5CYXNlTW9kdWxlQ2FsbCk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ19pc1BsdWdpbkhvdEtleXNNb2R1bGVDYWxsJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2lzUGx1Z2luSG90S2V5c01vZHVsZUNhbGwoZXhwb3J0cykgewogICAgICAgICAgICByZXR1cm4gJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGV4cG9ydHMgJiYgZXhwb3J0cy5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoJ19rZXlkb3duJyk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ2hvb2tQbHVnaW5Ib3RLZXlzJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaG9va1BsdWdpbkhvdEtleXMoY2IpIHsKICAgICAgICAgICAgdGhpcy5faG9va01vZHVsZUNhbGwoY2IsIHRoaXMuX2lzUGx1Z2luSG90S2V5c01vZHVsZUNhbGwpOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdfaXNGcmFnbWVudE1vZHVsZUNhbGwnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNGcmFnbWVudE1vZHVsZUNhbGwoZXhwb3J0cykgewogICAgICAgICAgICByZXR1cm4gJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGV4cG9ydHMgJiYgZXhwb3J0cy5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoJ3BhcnNlRGF0YScpOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdob29rRnJhZ21lbnQnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBob29rRnJhZ21lbnQoY2IpIHsKICAgICAgICAgICAgdGhpcy5faG9va01vZHVsZUNhbGwoY2IsIHRoaXMuX2lzRnJhZ21lbnRNb2R1bGVDYWxsKTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnaG9va1BhcnNlRGF0YScsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhvb2tQYXJzZURhdGEoY2IpIHsKICAgICAgICAgICAgdGhpcy5ob29rRnJhZ21lbnQoZnVuY3Rpb24gKGV4cG9ydHMpIHsKICAgICAgICAgICAgICAgIHZhciBwYXJzZURhdGEgPSBleHBvcnRzLnByb3RvdHlwZS5wYXJzZURhdGE7CiAgICAgICAgICAgICAgICBleHBvcnRzLnByb3RvdHlwZS5wYXJzZURhdGEgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXJnc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcGFyc2VEYXRhLmFwcGx5KHRoaXMsIGFyZ3MpOwogICAgICAgICAgICAgICAgICAgIGNiKHRoaXMpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ19pc1VzZXJNb2R1bGVDYWxsJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2lzVXNlck1vZHVsZUNhbGwoZXhwb3J0cykgewogICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5fX3Byb3RvX18gJiYgZXhwb3J0cy5fX3Byb3RvX18uaGFzT3duUHJvcGVydHkoJ2lzVmlwJyk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ2hvb2tVc2VyJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaG9va1VzZXIoY2IpIHsKICAgICAgICAgICAgdGhpcy5faG9va01vZHVsZUNhbGwoY2IsIHRoaXMuX2lzVXNlck1vZHVsZUNhbGwpOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdfaXNTaG93UmVxdWVzdE1vZHVsZUNhbGwnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNTaG93UmVxdWVzdE1vZHVsZUNhbGwoZXhwb3J0cykgewogICAgICAgICAgICByZXR1cm4gJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGV4cG9ydHMgJiYgZXhwb3J0cy5jb21wcmVzc1JlcXVlc3RLZXkgJiYgZXhwb3J0cy5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoJ3JlcXVlc3QnKTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnaG9va1Nob3dSZXF1ZXN0JywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaG9va1Nob3dSZXF1ZXN0KGNiKSB7CiAgICAgICAgICAgIHRoaXMuX2hvb2tNb2R1bGVDYWxsKGNiLCB0aGlzLl9pc1Nob3dSZXF1ZXN0TW9kdWxlQ2FsbCk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ19pc0RlZmF1bHRTa2luTW9kdWxlQ2FsbCcsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9pc0RlZmF1bHRTa2luTW9kdWxlQ2FsbChleHBvcnRzKSB7CiAgICAgICAgICAgIHJldHVybiAnZnVuY3Rpb24nID09PSB0eXBlb2YgZXhwb3J0cyAmJiBleHBvcnRzLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSgnX2luaXREQkNsaWNrcycpOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdob29rRGVmYXVsdFNraW4nLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBob29rRGVmYXVsdFNraW4oY2IpIHsKICAgICAgICAgICAgdGhpcy5faG9va01vZHVsZUNhbGwoY2IsIHRoaXMuX2lzRGVmYXVsdFNraW5Nb2R1bGVDYWxsKTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnX2lzQ29uZmlnTW9kdWxlQ2FsbCcsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9pc0NvbmZpZ01vZHVsZUNhbGwoZXhwb3J0cykgewogICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5sb2FkVHlwZSAmJiBleHBvcnRzLmRpc3BhdGNoQ2ZnOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdob29rQ29uZmlnJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaG9va0NvbmZpZyhjYikgewogICAgICAgICAgICB0aGlzLl9ob29rTW9kdWxlQ2FsbChjYiwgdGhpcy5faXNDb25maWdNb2R1bGVDYWxsKTsKICAgICAgICB9CiAgICB9XSk7CgogICAgcmV0dXJuIEhvb2tlcjsKfSgpOwoKSG9va2VyLmtlZXBhbGl2ZSA9IGZhbHNlOwoKZXhwb3J0cy5kZWZhdWx0ID0gSG9va2VyOwoKLyoqKi8gfSksCi8qIDEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi8KdmFyIExvZ2dlciA9IGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIExvZ2dlcih0YWcpIHsKICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTG9nZ2VyKTsKCiAgICAgICAgdGhpcy5fdGFnID0gdGFnOwogICAgfQoKICAgIF9jcmVhdGVDbGFzcyhMb2dnZXIsIFt7CiAgICAgICAga2V5OiAnbG9nJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbG9nKCkgewogICAgICAgICAgICB2YXIgX2NvbnNvbGU7CgogICAgICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICAgICAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgKF9jb25zb2xlID0gY29uc29sZSkubG9nLmFwcGx5KF9jb25zb2xlLCBbdGhpcy50YWcgKyBhcmdzLnNoaWZ0KCldLmNvbmNhdChhcmdzKSk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ2luZm8nLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbmZvKCkgewogICAgICAgICAgICB2YXIgX2NvbnNvbGUyOwoKICAgICAgICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHsKICAgICAgICAgICAgICAgIGFyZ3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgKF9jb25zb2xlMiA9IGNvbnNvbGUpLmxvZy5hcHBseShfY29uc29sZTIsIFsnJWMnICsgdGhpcy50YWcgKyAnJWMnICsgYXJncy5zaGlmdCgpLCAnY29sb3I6IGdyZWVuOyBmb250LXdlaWdodDogYm9sZGVyJywgJ2NvbG9yOiBibHVlJ10uY29uY2F0KGFyZ3MpKTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnZGVidWcnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZWJ1ZygpIHsKICAgICAgICAgICAgdmFyIF9jb25zb2xlMzsKCiAgICAgICAgICAgIGZvciAodmFyIF9sZW4zID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4zKSwgX2tleTMgPSAwOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7CiAgICAgICAgICAgICAgICBhcmdzW19rZXkzXSA9IGFyZ3VtZW50c1tfa2V5M107CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIChfY29uc29sZTMgPSBjb25zb2xlKS5kZWJ1Zy5hcHBseShfY29uc29sZTMsIFt0aGlzLnRhZyArIGFyZ3Muc2hpZnQoKV0uY29uY2F0KGFyZ3MpKTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnd2FybicsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHdhcm4oKSB7CiAgICAgICAgICAgIHZhciBfY29uc29sZTQ7CgogICAgICAgICAgICBmb3IgKHZhciBfbGVuNCA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuNCksIF9rZXk0ID0gMDsgX2tleTQgPCBfbGVuNDsgX2tleTQrKykgewogICAgICAgICAgICAgICAgYXJnc1tfa2V5NF0gPSBhcmd1bWVudHNbX2tleTRdOwogICAgICAgICAgICB9CgogICAgICAgICAgICAoX2NvbnNvbGU0ID0gY29uc29sZSkud2Fybi5hcHBseShfY29uc29sZTQsIFt0aGlzLnRhZyArIGFyZ3Muc2hpZnQoKV0uY29uY2F0KGFyZ3MpKTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnZXJyb3InLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBlcnJvcigpIHsKICAgICAgICAgICAgdmFyIF9jb25zb2xlNTsKCiAgICAgICAgICAgIGZvciAodmFyIF9sZW41ID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW41KSwgX2tleTUgPSAwOyBfa2V5NSA8IF9sZW41OyBfa2V5NSsrKSB7CiAgICAgICAgICAgICAgICBhcmdzW19rZXk1XSA9IGFyZ3VtZW50c1tfa2V5NV07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIChfY29uc29sZTUgPSBjb25zb2xlKS5lcnJvci5hcHBseShfY29uc29sZTUsIFt0aGlzLnRhZyArIGFyZ3Muc2hpZnQoKV0uY29uY2F0KGFyZ3MpKTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAndGFnJywKICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RhZzsKICAgICAgICB9CiAgICB9XSk7CgogICAgcmV0dXJuIExvZ2dlcjsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gbmV3IExvZ2dlcihgWyR7R01faW5mby5zY3JpcHQubmFtZX1dYCk7CgovKioqLyB9KSwKLyogMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKdmFyIERldGVjdG9yID0gZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gRGV0ZWN0b3IoKSB7CiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERldGVjdG9yKTsKICAgIH0KCiAgICBfY3JlYXRlQ2xhc3MoRGV0ZWN0b3IsIG51bGwsIFt7CiAgICAgICAga2V5OiAnaXNTdXBwb3J0SHRtbDUnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc1N1cHBvcnRIdG1sNSgpIHsKICAgICAgICAgICAgdmFyIHYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpOwogICAgICAgICAgICByZXR1cm4gISEodi5jYW5QbGF5VHlwZSgnYXVkaW8vbXA0OyBjb2RlY3M9Im1wNGEuNDAuMiInKSAmJiB2LmNhblBsYXlUeXBlKCd2aWRlby9tcDQ7IGNvZGVjcz0iYXZjMS42NDAwMjkiJykgJiYgdi5jYW5QbGF5VHlwZSgndmlkZW8vbXA0OyBjb2RlY3M9ImF2YzEuNjQwMDI5LCBtcDRhLjQwLjIiJykpOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdpc1N1cHBvcnRWbXMnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc1N1cHBvcnRWbXMoKSB7CiAgICAgICAgICAgIHJldHVybiAhISh3aW5kb3cuTWVkaWFTb3VyY2UgJiYgd2luZG93LlVSTCAmJiB3aW5kb3cuV2ViU29ja2V0ICYmIHdpbmRvdy5SZWFkYWJsZVN0cmVhbSAmJiAod2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbiB8fCB3aW5kb3cud2Via2l0UlRDU2Vzc2lvbkRlc2NyaXB0aW9uKSAmJiAod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uIHx8IHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbikgJiYgKHdpbmRvdy5SVENJY2VDYW5kaWRhdGUgfHwgd2luZG93LndlYmtpdFJUQ0ljZUNhbmRpZGF0ZSkpOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdpc1N1cHBvcnRNM3U4JywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNTdXBwb3J0TTN1OCgpIHsKICAgICAgICAgICAgdmFyIHYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpOwogICAgICAgICAgICByZXR1cm4gISEodi5jYW5QbGF5VHlwZSgnYXBwbGljYXRpb24veC1tcGVndXJsJykgJiYgdi5jYW5QbGF5VHlwZSgnYXBwbGljYXRpb24vdm5kLmFwcGxlLm1wZWd1cmwnKSk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ2lzQ2hyb21lJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNDaHJvbWUoKSB7CiAgICAgICAgICAgIHJldHVybiAoL2Nocm9tZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnaXNGaXJlZm94JywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNGaXJlZm94KCkgewogICAgICAgICAgICByZXR1cm4gKC9maXJlZm94L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KQogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdpc0VkZ2UnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0VkZ2UoKSB7CiAgICAgICAgICAgIHJldHVybiAoL2VkZ2UvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ2lzSW5JRnJhbWUnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0luSUZyYW1lKCkgewogICAgICAgICAgICByZXR1cm4gd2luZG93LnRvcCAhPT0gd2luZG93LnNlbGY7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ2lzT3V0c2l0ZScsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzT3V0c2l0ZSgpIHsKICAgICAgICAgICAgcmV0dXJuICEvXC5pcWl5aVwuY29tJC8udGVzdChsb2NhdGlvbi5ob3N0KTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnaXNPdXRzaWRlTGluaycsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzT3V0c2lkZUxpbmsoKSB7CiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbi5oYXNoID09PSAnI291dHNpZGVsaW5rJzsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnaGFzRmxhc2hQbHVnaW4nLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNGbGFzaFBsdWdpbigpIHsKICAgICAgICAgICAgdmFyIHBsdWdpbnMgPSB1bnNhZmVXaW5kb3cubmF2aWdhdG9yLnBsdWdpbnM7CiAgICAgICAgICAgIHJldHVybiAhIShwbHVnaW5zWydTaG9ja3dhdmUgRmxhc2gnXSAmJiBwbHVnaW5zWydTaG9ja3dhdmUgRmxhc2gnXS5kZXNjcmlwdGlvbik7CiAgICAgICAgfQogICAgfV0pOwoKICAgIHJldHVybiBEZXRlY3RvcjsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gRGV0ZWN0b3I7CgovKioqLyB9KSwKLyogMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKdmFyIEZha2VyID0gZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gRmFrZXIoKSB7CiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZha2VyKTsKICAgIH0KCiAgICBfY3JlYXRlQ2xhc3MoRmFrZXIsIG51bGwsIFt7CiAgICAgICAga2V5OiAnZmFrZU1hY1BsYXRmb3JtJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmFrZU1hY1BsYXRmb3JtKCkgewogICAgICAgICAgICB2YXIgUExBRk9STV9NQUMgPSAnbWFjJzsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHVuc2FmZVdpbmRvdy5uYXZpZ2F0b3IsICdwbGF0Zm9ybScsIHsgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBMQUZPUk1fTUFDOwogICAgICAgICAgICAgICAgfSB9KTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnZmFrZVNhZmFyaScsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZha2VTYWZhcmkoKSB7CiAgICAgICAgICAgIHZhciBVQV9TQUZBUlkgPSAnc2FmYXJpJzsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHVuc2FmZVdpbmRvdy5uYXZpZ2F0b3IsICd1c2VyQWdlbnQnLCB7IGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBVQV9TQUZBUlk7CiAgICAgICAgICAgICAgICB9IH0pOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdmYWtlQ2hyb21lJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmFrZUNocm9tZSgpIHsKICAgICAgICAgICAgdmFyIHZlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJyc7CgogICAgICAgICAgICB2YXIgVUFfQ0hST01FID0gYENocm9tZS8ke3Zlcn1gOwogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodW5zYWZlV2luZG93Lm5hdmlnYXRvciwgJ3VzZXJBZ2VudCcsIHsgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFVBX0NIUk9NRTsKICAgICAgICAgICAgICAgIH0gfSk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ2Zha2VGbGFzaFBsdWdpbicsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZha2VGbGFzaFBsdWdpbigpIHsKICAgICAgICAgICAgdmFyIHBsdWdpbiA9IHsKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnU2hvY2t3YXZlIEZsYXNoIDI2LjAgcjAnLAogICAgICAgICAgICAgICAgZmlsZW5hbWU6ICdwZXBmbGFzaHBsYXllcjY0XzI2XzBfMF8xMzEuZGxsJywKICAgICAgICAgICAgICAgIGxlbmd0aDogMCwKICAgICAgICAgICAgICAgIG5hbWU6ICdTaG9ja3dhdmUgRmxhc2gnCiAgICAgICAgICAgIH07CgogICAgICAgICAgICBSZWZsZWN0LnNldFByb3RvdHlwZU9mKHBsdWdpbiwgUGx1Z2luLnByb3RvdHlwZSk7CiAgICAgICAgICAgIHVuc2FmZVdpbmRvdy5uYXZpZ2F0b3IucGx1Z2luc1snU2hvY2t3YXZlIEZsYXNoJ10gPSBwbHVnaW47CiAgICAgICAgfQogICAgfV0pOwoKICAgIHJldHVybiBGYWtlcjsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gRmFrZXI7CgovKioqLyB9KSwKLyogNCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgp2YXIgZzsKCi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlCmcgPSAoZnVuY3Rpb24oKSB7CglyZXR1cm4gdGhpczsKfSkoKTsKCnRyeSB7CgkvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUCkKCWcgPSBnIHx8IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCkgfHwgKDEsZXZhbCkoInRoaXMiKTsKfSBjYXRjaChlKSB7CgkvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZQoJaWYodHlwZW9mIHdpbmRvdyA9PT0gIm9iamVjdCIpCgkJZyA9IHdpbmRvdzsKfQoKLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLgovLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQncwovLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59Cgptb2R1bGUuZXhwb3J0cyA9IGc7CgoKLyoqKi8gfSksCi8qIDUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCnZhciBfc2xpY2VkVG9BcnJheSA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbInJldHVybiJdKSBfaVsicmV0dXJuIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9IHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgcmV0dXJuIGFycjsgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHsgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTsgfSBlbHNlIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOyB9IH07IH0oKTsKCnZhciBfbG9nZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfbG9nZ2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xvZ2dlcik7Cgp2YXIgX2Nvb2tpZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwoKdmFyIF9jb29raWVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Nvb2tpZXMpOwoKdmFyIF9kZXRlY3RvciA9IF9fd2VicGFja19yZXF1aXJlX18oMik7Cgp2YXIgX2RldGVjdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RldGVjdG9yKTsKCnZhciBfZmFrZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKdmFyIF9mYWtlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mYWtlcik7Cgp2YXIgX291dHNpdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpOwoKdmFyIF9wYXRjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCnZhciBQTEFZRVJfVFlQRSA9IHsKICAgIEh0bWw1Vk9EOiAnaDVfVk9EJywKICAgIEZsYXNoVk9EOiAnZmxhc2hfVk9EJwp9OwoKZnVuY3Rpb24gZm9yY2VIdG1sNSgpIHsKICAgIF9jb29raWVzMi5kZWZhdWx0LnNldCgncGxheWVyX2ZvcmNlZFR5cGUnLCBQTEFZRVJfVFlQRS5IdG1sNVZPRCwgeyBkb21haW46ICcuaXFpeWkuY29tJyB9KTsKICAgIF9sb2dnZXIyLmRlZmF1bHQuaW5mbyhgVGhlICdwbGF5ZXJfZm9yY2VkVHlwZScgY29va2llIGhhcyBiZWVuIHNldCBhcyAnJHtQTEFZRVJfVFlQRS5IdG1sNVZPRH0nYCk7Cn0KCmZ1bmN0aW9uIGZvcmNlRmxhc2goKSB7CiAgICBfY29va2llczIuZGVmYXVsdC5zZXQoJ3BsYXllcl9mb3JjZWRUeXBlJywgUExBWUVSX1RZUEUuRmxhc2hWT0QsIHsgZG9tYWluOiAnLmlxaXlpLmNvbScgfSk7CiAgICBfbG9nZ2VyMi5kZWZhdWx0LmluZm8oYFRoZSAncGxheWVyX2ZvcmNlZFR5cGUnIGNvb2tpZSBoYXMgYmVlbiBzZXQgYXMgJyR7UExBWUVSX1RZUEUuRmxhc2hWT0R9J2ApOwp9CgpmdW5jdGlvbiBjbGVhbigpIHsKICAgIF9jb29raWVzMi5kZWZhdWx0LnJlbW92ZSgncGxheWVyX2ZvcmNlZFR5cGUnLCB7IGRvbWFpbjogJy5pcWl5aS5jb20nIH0pOwogICAgX2xvZ2dlcjIuZGVmYXVsdC5pbmZvKGBSZW1vdmVkIHRoZSAncGxheWVyX2ZvcmNlZFR5cGUnIGNvb2tpZWApOwp9CgpmdW5jdGlvbiBzd2l0Y2hUbyh0eXBlKSB7CiAgICBfbG9nZ2VyMi5kZWZhdWx0LmluZm8oYFN3aXRjaGluZyB0byAke3R5cGV9IC4uLmApOwogICAgR01fc2V0VmFsdWUoJ3BsYXllcl9mb3JjZWRUeXBlJywgdHlwZSk7CiAgICBkb2N1bWVudC5sb2NhdGlvbi5yZWxvYWQoKTsKfQoKZnVuY3Rpb24gcmVnaXN0ZXJNZW51KCkgewogICAgdmFyIE1FTlVfTkFNRSA9IHsKICAgICAgICBIVE1MNTogJ0hUTUw15pKt5pS+5ZmoJywKICAgICAgICBGTEFTSDogJ0ZsYXNo5pKt5pS+5ZmoJwogICAgfTsKCiAgICB2YXIgY3VyclR5cGUgPSBHTV9nZXRWYWx1ZSgncGxheWVyX2ZvcmNlZFR5cGUnLCBQTEFZRVJfVFlQRS5IdG1sNVZPRCk7IC8vIOm7mOiupOS4ukh0bWw15pKt5pS+5Zmo77yM5YWN5Y675YiH5o2i44CCCgogICAgdmFyIF9yZWYgPSBjdXJyVHlwZSA9PT0gUExBWUVSX1RZUEUuSHRtbDVWT0QgPyBbUExBWUVSX1RZUEUuRmxhc2hWT0QsIE1FTlVfTkFNRS5GTEFTSF0gOiBbUExBWUVSX1RZUEUuSHRtbDVWT0QsIE1FTlVfTkFNRS5IVE1MNV0sCiAgICAgICAgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAyKSwKICAgICAgICB0eXBlID0gX3JlZjJbMF0sCiAgICAgICAgbmFtZSA9IF9yZWYyWzFdOwoKICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQobmFtZSwgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBzd2l0Y2hUbyh0eXBlKTsKICAgIH0sIG51bGwpOwogICAgX2xvZ2dlcjIuZGVmYXVsdC5pbmZvKGBSZWdpc3RlcmVkIHRoZSBtZW51LmApOwp9CgpmdW5jdGlvbiBtdXN0S2VlcEhvb2tpbmcoKSB7CiAgICByZXR1cm4gbG9jYXRpb24uc2VhcmNoLmluY2x1ZGVzKCdsaXN0Jyk7IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nb295aWUvdXNlcnNjcmlwdC1pcWl5aS1wbGF5ZXItc3dpdGNoL2lzc3Vlcy8xNQp9CgovLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpyZWdpc3Rlck1lbnUoKTsKCnZhciBjdXJyVHlwZSA9IEdNX2dldFZhbHVlKCdwbGF5ZXJfZm9yY2VkVHlwZScsIFBMQVlFUl9UWVBFLkh0bWw1Vk9EKTsKaWYgKGN1cnJUeXBlID09PSBQTEFZRVJfVFlQRS5IdG1sNVZPRCkgewogICAgaWYgKF9kZXRlY3RvcjIuZGVmYXVsdC5pc1N1cHBvcnRIdG1sNSgpKSB7CiAgICAgICAgaWYgKF9kZXRlY3RvcjIuZGVmYXVsdC5pc091dHNpdGUoKSkgewogICAgICAgICAgICAoMCwgX291dHNpdGUucmVwbGFjZUZsYXNoKSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZvcmNlSHRtbDUoKTsKCiAgICAgICAgICAgIGlmIChfZGV0ZWN0b3IyLmRlZmF1bHQuaXNGaXJlZm94KCkpIHsKICAgICAgICAgICAgICAgIC8vIEZha2UgQ2hyb21lIHdpdGggYSB2ZXJzaW9uIG51bWJlciBsZXNzIHRoYW4gNDMKICAgICAgICAgICAgICAgIC8vIHRvIHVzZSB0aGUgZGF0YSBlbmdpbmUgdG8gcGxheSB2aWRlb3MgYmV0dGVyIHRoYW4gSEQgYW5kIHRvIHVzZSB0aGUgWEhSIGxvYWRlcgogICAgICAgICAgICAgICAgLy8gYmVjYXVzZSBGaXJlZm94IGhhcyBub3QgeWV0IGltcGxlbWVudGVkIFJlYWRhYmxlU3RyZWFtIHRvIHN1cHBvcnQgdGhlIEZldGNoIGxvYWRlci4KICAgICAgICAgICAgICAgIF9mYWtlcjIuZGVmYXVsdC5mYWtlQ2hyb21lKDQyKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKG11c3RLZWVwSG9va2luZygpKSB7CiAgICAgICAgICAgICAgICBfcGF0Y2gua2VlcEhvb2tpbmdQYXRjaC5pbnN0YWxsKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX3BhdGNoLmFkc1BhdGNoLmluc3RhbGwoKTsKICAgICAgICAgICAgX3BhdGNoLmNvbnRyb2xzUGF0Y2guaW5zdGFsbCgpOwogICAgICAgICAgICBfcGF0Y2gud2F0ZXJtYXJrc1BhdGNoLmluc3RhbGwoKTsKICAgICAgICAgICAgX3BhdGNoLnZpcFBhdGNoLmluc3RhbGwoKTsKICAgICAgICAgICAgX3BhdGNoLmtleVNob3J0Y3V0c1BhdGNoLmluc3RhbGwoKTsKICAgICAgICAgICAgX3BhdGNoLm1vdXNlU2hvcnRjdXRzUGF0Y2guaW5zdGFsbCgpOwogICAgICAgICAgICBfcGF0Y2gudXNlV2ViU29ja2V0TG9hZGVyUGF0Y2guaW5zdGFsbCgpOwoKICAgICAgICAgICAgaWYgKF9kZXRlY3RvcjIuZGVmYXVsdC5pc0luSUZyYW1lKCkgJiYgX2RldGVjdG9yMi5kZWZhdWx0LmlzT3V0c2lkZUxpbmsoKSkgewogICAgICAgICAgICAgICAgKDAsIF9vdXRzaXRlLmFkYXB0SWZyYW1lKSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICBhbGVydCgn4pWuKOKVr+KWveKVsCnila0g5L2g55qE5rWP6KeI5Zmo5pKt5pS+5LiN5LqGaHRtbDXop4bpopF+fn5+Jyk7CiAgICB9Cn0gZWxzZSB7CiAgICBmb3JjZUZsYXNoKCk7Cn0KCndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd1bmxvYWQnLCBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gY2xlYW4oKTsKfSk7CgovKioqLyB9KSwKLyogNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKdmFyIENvb2tpZXMgPSBmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBDb29raWVzKCkgewogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb29raWVzKTsKICAgIH0KCiAgICBfY3JlYXRlQ2xhc3MoQ29va2llcywgbnVsbCwgW3sKICAgICAgICBrZXk6ICdnZXQnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQoa2V5KSB7CiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHZvaWQgMDsKICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAoJ15bXlxceDAwLVxceDIwXFx4N2ZcXChcXCk8PkAsOzpcXFxcXFwiXFxbXFxdXFw/PVxce1xcfVxcL1xcdTAwODAtXFx1ZmZmZl0rJCcpLnRlc3Qoa2V5KSkgewogICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb250cm9sLXJlZ2V4CiAgICAgICAgICAgICAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKCcoXnwgKScgKyBrZXkgKyAnPShbXjtdKikoO3wkKScpOwogICAgICAgICAgICAgICAgdmFyIHJzID0gcmUuZXhlYyhkb2N1bWVudC5jb29raWUpOwogICAgICAgICAgICAgICAgdmFsdWUgPSBycyA/IHJzWzJdIDogJyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHZhbHVlID8gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSA6ICcnOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdzZXQnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXQoaywgdikgewogICAgICAgICAgICB2YXIgbyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307CgogICAgICAgICAgICB2YXIgbiA9IG8uZXhwaXJlczsKICAgICAgICAgICAgaWYgKCdudW1iZXInID09IHR5cGVvZiBvLmV4cGlyZXMpIHsKICAgICAgICAgICAgICAgIG4gPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgbi5zZXRUaW1lKG4uZ2V0VGltZSgpICsgby5leHBpcmVzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIga2V5ID0gazsKICAgICAgICAgICAgdmFyIHZhbHVlID0gZW5jb2RlVVJJQ29tcG9uZW50KHYpOwogICAgICAgICAgICB2YXIgcGF0aCA9IG8ucGF0aCA/ICc7IHBhdGg9JyArIG8ucGF0aCA6ICcnOwogICAgICAgICAgICB2YXIgZXhwaXJlcyA9IG4gPyAnOyBleHBpcmVzPScgKyBuLnRvR01UU3RyaW5nKCkgOiAnJzsKICAgICAgICAgICAgdmFyIGRvbWFpbiA9IG8uZG9tYWluID8gJzsgZG9tYWluPScgKyBvLmRvbWFpbiA6ICcnOwogICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgJHtrZXl9PSR7dmFsdWV9JHtwYXRofSR7ZXhwaXJlc30ke2RvbWFpbn1gOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdyZW1vdmUnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoaykgewogICAgICAgICAgICB2YXIgbyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CgogICAgICAgICAgICBvLmV4cGlyZXMgPSBuZXcgRGF0ZSgwKTsKICAgICAgICAgICAgdGhpcy5zZXQoaywgJycsIG8pOwogICAgICAgIH0KICAgIH1dKTsKCiAgICByZXR1cm4gQ29va2llczsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gQ29va2llczsKCi8qKiovIH0pLAovKiA3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5hZGFwdElmcmFtZSA9IGV4cG9ydHMucmVwbGFjZUZsYXNoID0gdW5kZWZpbmVkOwoKdmFyIF9yZWdlbmVyYXRvciA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7Cgp2YXIgX3JlZ2VuZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlZ2VuZXJhdG9yKTsKCnZhciBlbWJlZFNyYyA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yMi5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh0YXJnZXROb2RlLCBfcmVmKSB7CiAgICAgICAgdmFyIHR2aWQgPSBfcmVmLnR2aWQsCiAgICAgICAgICAgIHZpZCA9IF9yZWYudmlkOwogICAgICAgIHZhciB1cmw7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvcjIuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXROb2RlLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSIke0dNX2luZm8uc2NyaXB0Lm5hbWV9IGluZm8iPuato+WcqOiOt+WPluinhumikea6kC4uLjwvZGl2PmA7CgogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoMCwgX3V0aWxzLmdldFZpZGVvVXJsKSh0dmlkLCB2aWQpOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyMi5kZWZhdWx0LmluZm8oJ3NvdXJjZSB1cmw6ICVzJywgdXJsKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Tm9kZS5pbm5lckhUTUwgPSBgPGlmcmFtZSBpZD0ib3V0c2lkZWxpbmsiIHNyYz0iJHt1cmx9I291dHNpZGVsaW5rIiBmcmFtZWJvcmRlcj0iMCIgYWxsb3dmdWxsc2NyZWVuPSJ0cnVlIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIj48L2lmcmFtZT5gOwogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA5OwogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WydjYXRjaCddKDEpOwoKICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Tm9kZS5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz0iJHtHTV9pbmZvLnNjcmlwdC5uYW1lfSBlcnJvciI+PHA+6I635Y+W6KeG6aKR5rqQ5Ye66ZSZ77yBPC9wPjxwPiR7X2NvbnRleHQudDAubWVzc2FnZX08L3A+PC9kaXY+YDsKCiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmQnOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcywgW1sxLCA5XV0pOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiBlbWJlZFNyYyhfeCwgX3gyKSB7CiAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9Owp9KCk7Cgp2YXIgX2xvZ2dlciA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX2xvZ2dlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2dnZXIpOwoKdmFyIF9ob29rZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9ob29rZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaG9va2VyKTsKCnZhciBfZmFrZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKdmFyIF9mYWtlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mYWtlcik7Cgp2YXIgX2RldGVjdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTsKCnZhciBfZGV0ZWN0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGV0ZWN0b3IpOwoKdmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBnZW4gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyBmdW5jdGlvbiBzdGVwKGtleSwgYXJnKSB7IHRyeSB7IHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsgfSBjYXRjaCAoZXJyb3IpIHsgcmVqZWN0KGVycm9yKTsgcmV0dXJuOyB9IGlmIChpbmZvLmRvbmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0gZWxzZSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7IHN0ZXAoIm5leHQiLCB2YWx1ZSk7IH0sIGZ1bmN0aW9uIChlcnIpIHsgc3RlcCgidGhyb3ciLCBlcnIpOyB9KTsgfSB9IHJldHVybiBzdGVwKCJuZXh0Iik7IH0pOyB9OyB9CgpmdW5jdGlvbiByZXBsYWNlRmxhc2goKSB7CiAgICBpZiAoIV9kZXRlY3RvcjIuZGVmYXVsdC5oYXNGbGFzaFBsdWdpbigpKSBfZmFrZXIyLmRlZmF1bHQuZmFrZUZsYXNoUGx1Z2luKCk7CgogICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKHJlY29yZHMsIHNlbGYpIHsKICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7CiAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7CiAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkOwoKICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSByZWNvcmRzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkgewogICAgICAgICAgICAgICAgdmFyIHJlY29yZCA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgICAgICAgIGlmIChyZWNvcmQudHlwZSAhPT0gJ2NoaWxkTGlzdCcgfHwgIXJlY29yZC5hZGRlZE5vZGVzKSBjb250aW51ZTsKCiAgICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlOwogICAgICAgICAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDsKCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSByZWNvcmQuYWRkZWROb2Rlc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwMjsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IChfc3RlcDIgPSBfaXRlcmF0b3IyLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IF9zdGVwMi52YWx1ZTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlLm5vZGVOYW1lICE9PSAnT0JKRUNUJyAmJiBub2RlLm5vZGVOYW1lICE9PSAnRU1CRUQnKSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgX2xvZ2dlcjIuZGVmYXVsdC5pbmZvKCdmb3VuZCBub2RlJywgbm9kZSk7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IG5vZGUub3V0ZXJIVE1MOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmlkID0gKDAsIF91dGlscy5maW5kVmlkKSh0ZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR2aWQgPSAoMCwgX3V0aWxzLmZpbmRUdmlkKSh0ZXh0KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0dmlkICYmIHZpZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvZ2dlcjIuZGVmYXVsdC5pbmZvKCdmb3VuZCB0dmlkOiAlcywgdmlkOiAlcycsIHR2aWQsIHZpZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWJlZFNyYyhub2RlLnBhcmVudE5vZGUsIHsgdHZpZCwgdmlkIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXNjb25uZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyMi5kZWZhdWx0LmluZm8oJ3N0b3BlZCBvYnNlcnZhdGlvbicpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IyID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvcjIgPSBlcnI7CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMi5yZXR1cm4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjIucmV0dXJuKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlOwogICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHsKICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwoKICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHsgc3VidHJlZTogdHJ1ZSwgY2hpbGRMaXN0OiB0cnVlIH0pOwogICAgX2xvZ2dlcjIuZGVmYXVsdC5pbmZvKCdzdGFydGVkIG9ic2VydmF0aW9uJyk7Cn0KCmZ1bmN0aW9uIGFkYXB0SWZyYW1lKCkgewogICAgdmFyIHN0eWxlID0gYAogICAgICAgIGJvZHlbY2xhc3N8PSJxeXBhZ2UiXSB7CiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW4gIWltcG9ydGFudDsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzAwMCAhaW1wb3J0YW50OwogICAgICAgICAgICB2aXNpYmlsaXR5OiBoaWRkZW47CiAgICAgICAgfQoKICAgICAgICAubW9kLWZ1bmMgewogICAgICAgICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7CiAgICAgICAgfQoKICAgICAgICAuJHtHTV9pbmZvLnNjcmlwdC5uYW1lfS5pbmZvIHsKICAgICAgICAgICAgd2lkdGg6IDIwZW07CiAgICAgICAgICAgIGhlaWdodDogNWVtOwogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgIHRvcDogMDsKICAgICAgICAgICAgYm90dG9tOiAwOwogICAgICAgICAgICBsZWZ0OiAwOwogICAgICAgICAgICByaWdodDogMDsKICAgICAgICAgICAgbWFyZ2luOiBhdXRvOwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiA1ZW07CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMWVtOwogICAgICAgICAgICBjb2xvcjogI2NjYzsKICAgICAgICB9CgogICAgICAgIC4ke0dNX2luZm8uc2NyaXB0Lm5hbWV9LmVycm9yIHsKICAgICAgICAgICAgaGVpZ2h0OiAzZW07CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgdG9wOiAwOwogICAgICAgICAgICBib3R0b206IDA7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHJpZ2h0OiAwOwogICAgICAgICAgICBtYXJnaW46IGF1dG87CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgZm9udC1zaXplOiAxZW07CiAgICAgICAgICAgIGNvbG9yOiAjYzAwOwogICAgICAgIH0KICAgIGA7CgogICAgR01fYWRkU3R5bGUoc3R5bGUpOwoKICAgIF9ob29rZXIyLmRlZmF1bHQuaG9va1dlYkZ1bGxTY3JlZW4oZnVuY3Rpb24gKGV4cG9ydHMpIHsKICAgICAgICB2YXIgaW5pdCA9IGV4cG9ydHMuX19wcm90b19fLmluaXQ7CiAgICAgICAgZXhwb3J0cy5fX3Byb3RvX18uaW5pdCA9IGZ1bmN0aW9uICh3cmFwcGVyLCBidG4pIHsKICAgICAgICAgICAgaW5pdC5hcHBseSh0aGlzLCBbd3JhcHBlciwgYnRuXSk7CiAgICAgICAgICAgIHRoaXMuZW50ZXIoKTsKCiAgICAgICAgICAgIGJ0blswXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7CiAgICAgICAgfTsKCiAgICAgICAgZXhwb3J0cy5fX3Byb3RvX18uZXhpdCA9IGZ1bmN0aW9uICgpIHt9OwogICAgfSk7CgogICAgX2hvb2tlcjIuZGVmYXVsdC5ob29rQ29yZShmdW5jdGlvbiAoZXhwb3J0cykgewogICAgICAgIGV4cG9ydHMucHJvdG90eXBlLmhhc05leHRWaWRlbyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfTsKICAgIH0pOwp9CgpleHBvcnRzLnJlcGxhY2VGbGFzaCA9IHJlcGxhY2VGbGFzaDsKZXhwb3J0cy5hZGFwdElmcmFtZSA9IGFkYXB0SWZyYW1lOwoKLyoqKi8gfSksCi8qIDggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpOwoKCi8qKiovIH0pLAovKiA5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsvLyBUaGlzIG1ldGhvZCBvZiBvYnRhaW5pbmcgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QgbmVlZHMgdG8gYmUKLy8ga2VwdCBpZGVudGljYWwgdG8gdGhlIHdheSBpdCBpcyBvYnRhaW5lZCBpbiBydW50aW1lLmpzCnZhciBnID0KICB0eXBlb2YgZ2xvYmFsID09PSAib2JqZWN0IiA/IGdsb2JhbCA6CiAgdHlwZW9mIHdpbmRvdyA9PT0gIm9iamVjdCIgPyB3aW5kb3cgOgogIHR5cGVvZiBzZWxmID09PSAib2JqZWN0IiA/IHNlbGYgOiB0aGlzOwoKLy8gVXNlIGBnZXRPd25Qcm9wZXJ0eU5hbWVzYCBiZWNhdXNlIG5vdCBhbGwgYnJvd3NlcnMgc3VwcG9ydCBjYWxsaW5nCi8vIGBoYXNPd25Qcm9wZXJ0eWAgb24gdGhlIGdsb2JhbCBgc2VsZmAgb2JqZWN0IGluIGEgd29ya2VyLiBTZWUgIzE4My4KdmFyIGhhZFJ1bnRpbWUgPSBnLnJlZ2VuZXJhdG9yUnVudGltZSAmJgogIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGcpLmluZGV4T2YoInJlZ2VuZXJhdG9yUnVudGltZSIpID49IDA7CgovLyBTYXZlIHRoZSBvbGQgcmVnZW5lcmF0b3JSdW50aW1lIGluIGNhc2UgaXQgbmVlZHMgdG8gYmUgcmVzdG9yZWQgbGF0ZXIuCnZhciBvbGRSdW50aW1lID0gaGFkUnVudGltZSAmJiBnLnJlZ2VuZXJhdG9yUnVudGltZTsKCi8vIEZvcmNlIHJlZXZhbHV0YXRpb24gb2YgcnVudGltZS5qcy4KZy5yZWdlbmVyYXRvclJ1bnRpbWUgPSB1bmRlZmluZWQ7Cgptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKaWYgKGhhZFJ1bnRpbWUpIHsKICAvLyBSZXN0b3JlIHRoZSBvcmlnaW5hbCBydW50aW1lLgogIGcucmVnZW5lcmF0b3JSdW50aW1lID0gb2xkUnVudGltZTsKfSBlbHNlIHsKICAvLyBSZW1vdmUgdGhlIGdsb2JhbCBwcm9wZXJ0eSBhZGRlZCBieSBydW50aW1lLmpzLgogIHRyeSB7CiAgICBkZWxldGUgZy5yZWdlbmVyYXRvclJ1bnRpbWU7CiAgfSBjYXRjaChlKSB7CiAgICBnLnJlZ2VuZXJhdG9yUnVudGltZSA9IHVuZGVmaW5lZDsKICB9Cn0KCi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSkKCi8qKiovIH0pLAovKiAxMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7LyoqCiAqIENvcHlyaWdodCAoYykgMjAxNCwgRmFjZWJvb2ssIEluYy4KICogQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlCiAqIGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvbWFzdGVyL0xJQ0VOU0UgZmlsZS4gQW4KICogYWRkaXRpb25hbCBncmFudCBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluCiAqIHRoZSBzYW1lIGRpcmVjdG9yeS4KICovCgohKGZ1bmN0aW9uKGdsb2JhbCkgewogICJ1c2Ugc3RyaWN0IjsKCiAgdmFyIE9wID0gT2JqZWN0LnByb3RvdHlwZTsKICB2YXIgaGFzT3duID0gT3AuaGFzT3duUHJvcGVydHk7CiAgdmFyIHVuZGVmaW5lZDsgLy8gTW9yZSBjb21wcmVzc2libGUgdGhhbiB2b2lkIDAuCiAgdmFyICRTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iID8gU3ltYm9sIDoge307CiAgdmFyIGl0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5pdGVyYXRvciB8fCAiQEBpdGVyYXRvciI7CiAgdmFyIGFzeW5jSXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLmFzeW5jSXRlcmF0b3IgfHwgIkBAYXN5bmNJdGVyYXRvciI7CiAgdmFyIHRvU3RyaW5nVGFnU3ltYm9sID0gJFN5bWJvbC50b1N0cmluZ1RhZyB8fCAiQEB0b1N0cmluZ1RhZyI7CgogIHZhciBpbk1vZHVsZSA9IHR5cGVvZiBtb2R1bGUgPT09ICJvYmplY3QiOwogIHZhciBydW50aW1lID0gZ2xvYmFsLnJlZ2VuZXJhdG9yUnVudGltZTsKICBpZiAocnVudGltZSkgewogICAgaWYgKGluTW9kdWxlKSB7CiAgICAgIC8vIElmIHJlZ2VuZXJhdG9yUnVudGltZSBpcyBkZWZpbmVkIGdsb2JhbGx5IGFuZCB3ZSdyZSBpbiBhIG1vZHVsZSwKICAgICAgLy8gbWFrZSB0aGUgZXhwb3J0cyBvYmplY3QgaWRlbnRpY2FsIHRvIHJlZ2VuZXJhdG9yUnVudGltZS4KICAgICAgbW9kdWxlLmV4cG9ydHMgPSBydW50aW1lOwogICAgfQogICAgLy8gRG9uJ3QgYm90aGVyIGV2YWx1YXRpbmcgdGhlIHJlc3Qgb2YgdGhpcyBmaWxlIGlmIHRoZSBydW50aW1lIHdhcwogICAgLy8gYWxyZWFkeSBkZWZpbmVkIGdsb2JhbGx5LgogICAgcmV0dXJuOwogIH0KCiAgLy8gRGVmaW5lIHRoZSBydW50aW1lIGdsb2JhbGx5IChhcyBleHBlY3RlZCBieSBnZW5lcmF0ZWQgY29kZSkgYXMgZWl0aGVyCiAgLy8gbW9kdWxlLmV4cG9ydHMgKGlmIHdlJ3JlIGluIGEgbW9kdWxlKSBvciBhIG5ldywgZW1wdHkgb2JqZWN0LgogIHJ1bnRpbWUgPSBnbG9iYWwucmVnZW5lcmF0b3JSdW50aW1lID0gaW5Nb2R1bGUgPyBtb2R1bGUuZXhwb3J0cyA6IHt9OwoKICBmdW5jdGlvbiB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSB7CiAgICAvLyBJZiBvdXRlckZuIHByb3ZpZGVkIGFuZCBvdXRlckZuLnByb3RvdHlwZSBpcyBhIEdlbmVyYXRvciwgdGhlbiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvci4KICAgIHZhciBwcm90b0dlbmVyYXRvciA9IG91dGVyRm4gJiYgb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IgPyBvdXRlckZuIDogR2VuZXJhdG9yOwogICAgdmFyIGdlbmVyYXRvciA9IE9iamVjdC5jcmVhdGUocHJvdG9HZW5lcmF0b3IucHJvdG90eXBlKTsKICAgIHZhciBjb250ZXh0ID0gbmV3IENvbnRleHQodHJ5TG9jc0xpc3QgfHwgW10pOwoKICAgIC8vIFRoZSAuX2ludm9rZSBtZXRob2QgdW5pZmllcyB0aGUgaW1wbGVtZW50YXRpb25zIG9mIHRoZSAubmV4dCwKICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcy4KICAgIGdlbmVyYXRvci5faW52b2tlID0gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTsKCiAgICByZXR1cm4gZ2VuZXJhdG9yOwogIH0KICBydW50aW1lLndyYXAgPSB3cmFwOwoKICAvLyBUcnkvY2F0Y2ggaGVscGVyIHRvIG1pbmltaXplIGRlb3B0aW1pemF0aW9ucy4gUmV0dXJucyBhIGNvbXBsZXRpb24KICAvLyByZWNvcmQgbGlrZSBjb250ZXh0LnRyeUVudHJpZXNbaV0uY29tcGxldGlvbi4gVGhpcyBpbnRlcmZhY2UgY291bGQKICAvLyBoYXZlIGJlZW4gKGFuZCB3YXMgcHJldmlvdXNseSkgZGVzaWduZWQgdG8gdGFrZSBhIGNsb3N1cmUgdG8gYmUKICAvLyBpbnZva2VkIHdpdGhvdXQgYXJndW1lbnRzLCBidXQgaW4gYWxsIHRoZSBjYXNlcyB3ZSBjYXJlIGFib3V0IHdlCiAgLy8gYWxyZWFkeSBoYXZlIGFuIGV4aXN0aW5nIG1ldGhvZCB3ZSB3YW50IHRvIGNhbGwsIHNvIHRoZXJlJ3Mgbm8gbmVlZAogIC8vIHRvIGNyZWF0ZSBhIG5ldyBmdW5jdGlvbiBvYmplY3QuIFdlIGNhbiBldmVuIGdldCBhd2F5IHdpdGggYXNzdW1pbmcKICAvLyB0aGUgbWV0aG9kIHRha2VzIGV4YWN0bHkgb25lIGFyZ3VtZW50LCBzaW5jZSB0aGF0IGhhcHBlbnMgdG8gYmUgdHJ1ZQogIC8vIGluIGV2ZXJ5IGNhc2UsIHNvIHdlIGRvbid0IGhhdmUgdG8gdG91Y2ggdGhlIGFyZ3VtZW50cyBvYmplY3QuIFRoZQogIC8vIG9ubHkgYWRkaXRpb25hbCBhbGxvY2F0aW9uIHJlcXVpcmVkIGlzIHRoZSBjb21wbGV0aW9uIHJlY29yZCwgd2hpY2gKICAvLyBoYXMgYSBzdGFibGUgc2hhcGUgYW5kIHNvIGhvcGVmdWxseSBzaG91bGQgYmUgY2hlYXAgdG8gYWxsb2NhdGUuCiAgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9iaiwgYXJnKSB7CiAgICB0cnkgewogICAgICByZXR1cm4geyB0eXBlOiAibm9ybWFsIiwgYXJnOiBmbi5jYWxsKG9iaiwgYXJnKSB9OwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIHJldHVybiB7IHR5cGU6ICJ0aHJvdyIsIGFyZzogZXJyIH07CiAgICB9CiAgfQoKICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRTdGFydCA9ICJzdXNwZW5kZWRTdGFydCI7CiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkWWllbGQgPSAic3VzcGVuZGVkWWllbGQiOwogIHZhciBHZW5TdGF0ZUV4ZWN1dGluZyA9ICJleGVjdXRpbmciOwogIHZhciBHZW5TdGF0ZUNvbXBsZXRlZCA9ICJjb21wbGV0ZWQiOwoKICAvLyBSZXR1cm5pbmcgdGhpcyBvYmplY3QgZnJvbSB0aGUgaW5uZXJGbiBoYXMgdGhlIHNhbWUgZWZmZWN0IGFzCiAgLy8gYnJlYWtpbmcgb3V0IG9mIHRoZSBkaXNwYXRjaCBzd2l0Y2ggc3RhdGVtZW50LgogIHZhciBDb250aW51ZVNlbnRpbmVsID0ge307CgogIC8vIER1bW15IGNvbnN0cnVjdG9yIGZ1bmN0aW9ucyB0aGF0IHdlIHVzZSBhcyB0aGUgLmNvbnN0cnVjdG9yIGFuZAogIC8vIC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgcHJvcGVydGllcyBmb3IgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIEdlbmVyYXRvcgogIC8vIG9iamVjdHMuIEZvciBmdWxsIHNwZWMgY29tcGxpYW5jZSwgeW91IG1heSB3aXNoIHRvIGNvbmZpZ3VyZSB5b3VyCiAgLy8gbWluaWZpZXIgbm90IHRvIG1hbmdsZSB0aGUgbmFtZXMgb2YgdGhlc2UgdHdvIGZ1bmN0aW9ucy4KICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fQogIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uKCkge30KICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSgpIHt9CgogIC8vIFRoaXMgaXMgYSBwb2x5ZmlsbCBmb3IgJUl0ZXJhdG9yUHJvdG90eXBlJSBmb3IgZW52aXJvbm1lbnRzIHRoYXQKICAvLyBkb24ndCBuYXRpdmVseSBzdXBwb3J0IGl0LgogIHZhciBJdGVyYXRvclByb3RvdHlwZSA9IHt9OwogIEl0ZXJhdG9yUHJvdG90eXBlW2l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzOwogIH07CgogIHZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjsKICB2YXIgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90byAmJiBnZXRQcm90byhnZXRQcm90byh2YWx1ZXMoW10pKSk7CiAgaWYgKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlICYmCiAgICAgIE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlICE9PSBPcCAmJgogICAgICBoYXNPd24uY2FsbChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSwgaXRlcmF0b3JTeW1ib2wpKSB7CiAgICAvLyBUaGlzIGVudmlyb25tZW50IGhhcyBhIG5hdGl2ZSAlSXRlcmF0b3JQcm90b3R5cGUlOyB1c2UgaXQgaW5zdGVhZAogICAgLy8gb2YgdGhlIHBvbHlmaWxsLgogICAgSXRlcmF0b3JQcm90b3R5cGUgPSBOYXRpdmVJdGVyYXRvclByb3RvdHlwZTsKICB9CgogIHZhciBHcCA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9CiAgICBHZW5lcmF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSk7CiAgR2VuZXJhdG9yRnVuY3Rpb24ucHJvdG90eXBlID0gR3AuY29uc3RydWN0b3IgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTsKICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uOwogIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlW3RvU3RyaW5nVGFnU3ltYm9sXSA9CiAgICBHZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZSA9ICJHZW5lcmF0b3JGdW5jdGlvbiI7CgogIC8vIEhlbHBlciBmb3IgZGVmaW5pbmcgdGhlIC5uZXh0LCAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMgb2YgdGhlCiAgLy8gSXRlcmF0b3IgaW50ZXJmYWNlIGluIHRlcm1zIG9mIGEgc2luZ2xlIC5faW52b2tlIG1ldGhvZC4KICBmdW5jdGlvbiBkZWZpbmVJdGVyYXRvck1ldGhvZHMocHJvdG90eXBlKSB7CiAgICBbIm5leHQiLCAidGhyb3ciLCAicmV0dXJuIl0uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHsKICAgICAgcHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbihhcmcpIHsKICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlKG1ldGhvZCwgYXJnKTsKICAgICAgfTsKICAgIH0pOwogIH0KCiAgcnVudGltZS5pc0dlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24oZ2VuRnVuKSB7CiAgICB2YXIgY3RvciA9IHR5cGVvZiBnZW5GdW4gPT09ICJmdW5jdGlvbiIgJiYgZ2VuRnVuLmNvbnN0cnVjdG9yOwogICAgcmV0dXJuIGN0b3IKICAgICAgPyBjdG9yID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fAogICAgICAgIC8vIEZvciB0aGUgbmF0aXZlIEdlbmVyYXRvckZ1bmN0aW9uIGNvbnN0cnVjdG9yLCB0aGUgYmVzdCB3ZSBjYW4KICAgICAgICAvLyBkbyBpcyB0byBjaGVjayBpdHMgLm5hbWUgcHJvcGVydHkuCiAgICAgICAgKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSA9PT0gIkdlbmVyYXRvckZ1bmN0aW9uIgogICAgICA6IGZhbHNlOwogIH07CgogIHJ1bnRpbWUubWFyayA9IGZ1bmN0aW9uKGdlbkZ1bikgewogICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikgewogICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoZ2VuRnVuLCBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSk7CiAgICB9IGVsc2UgewogICAgICBnZW5GdW4uX19wcm90b19fID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7CiAgICAgIGlmICghKHRvU3RyaW5nVGFnU3ltYm9sIGluIGdlbkZ1bikpIHsKICAgICAgICBnZW5GdW5bdG9TdHJpbmdUYWdTeW1ib2xdID0gIkdlbmVyYXRvckZ1bmN0aW9uIjsKICAgICAgfQogICAgfQogICAgZ2VuRnVuLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoR3ApOwogICAgcmV0dXJuIGdlbkZ1bjsKICB9OwoKICAvLyBXaXRoaW4gdGhlIGJvZHkgb2YgYW55IGFzeW5jIGZ1bmN0aW9uLCBgYXdhaXQgeGAgaXMgdHJhbnNmb3JtZWQgdG8KICAvLyBgeWllbGQgcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHgpYCwgc28gdGhhdCB0aGUgcnVudGltZSBjYW4gdGVzdAogIC8vIGBoYXNPd24uY2FsbCh2YWx1ZSwgIl9fYXdhaXQiKWAgdG8gZGV0ZXJtaW5lIGlmIHRoZSB5aWVsZGVkIHZhbHVlIGlzCiAgLy8gbWVhbnQgdG8gYmUgYXdhaXRlZC4KICBydW50aW1lLmF3cmFwID0gZnVuY3Rpb24oYXJnKSB7CiAgICByZXR1cm4geyBfX2F3YWl0OiBhcmcgfTsKICB9OwoKICBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKGdlbmVyYXRvcikgewogICAgZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGdlbmVyYXRvclttZXRob2RdLCBnZW5lcmF0b3IsIGFyZyk7CiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gInRocm93IikgewogICAgICAgIHJlamVjdChyZWNvcmQuYXJnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgcmVzdWx0ID0gcmVjb3JkLmFyZzsKICAgICAgICB2YXIgdmFsdWUgPSByZXN1bHQudmFsdWU7CiAgICAgICAgaWYgKHZhbHVlICYmCiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gIm9iamVjdCIgJiYKICAgICAgICAgICAgaGFzT3duLmNhbGwodmFsdWUsICJfX2F3YWl0IikpIHsKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUuX19hd2FpdCkudGhlbihmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgICBpbnZva2UoIm5leHQiLCB2YWx1ZSwgcmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikgewogICAgICAgICAgICBpbnZva2UoInRocm93IiwgZXJyLCByZXNvbHZlLCByZWplY3QpOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKGZ1bmN0aW9uKHVud3JhcHBlZCkgewogICAgICAgICAgLy8gV2hlbiBhIHlpZWxkZWQgUHJvbWlzZSBpcyByZXNvbHZlZCwgaXRzIGZpbmFsIHZhbHVlIGJlY29tZXMKICAgICAgICAgIC8vIHRoZSAudmFsdWUgb2YgdGhlIFByb21pc2U8e3ZhbHVlLGRvbmV9PiByZXN1bHQgZm9yIHRoZQogICAgICAgICAgLy8gY3VycmVudCBpdGVyYXRpb24uIElmIHRoZSBQcm9taXNlIGlzIHJlamVjdGVkLCBob3dldmVyLCB0aGUKICAgICAgICAgIC8vIHJlc3VsdCBmb3IgdGhpcyBpdGVyYXRpb24gd2lsbCBiZSByZWplY3RlZCB3aXRoIHRoZSBzYW1lCiAgICAgICAgICAvLyByZWFzb24uIE5vdGUgdGhhdCByZWplY3Rpb25zIG9mIHlpZWxkZWQgUHJvbWlzZXMgYXJlIG5vdAogICAgICAgICAgLy8gdGhyb3duIGJhY2sgaW50byB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uLCBhcyBpcyB0aGUgY2FzZQogICAgICAgICAgLy8gd2hlbiBhbiBhd2FpdGVkIFByb21pc2UgaXMgcmVqZWN0ZWQuIFRoaXMgZGlmZmVyZW5jZSBpbgogICAgICAgICAgLy8gYmVoYXZpb3IgYmV0d2VlbiB5aWVsZCBhbmQgYXdhaXQgaXMgaW1wb3J0YW50LCBiZWNhdXNlIGl0CiAgICAgICAgICAvLyBhbGxvd3MgdGhlIGNvbnN1bWVyIHRvIGRlY2lkZSB3aGF0IHRvIGRvIHdpdGggdGhlIHlpZWxkZWQKICAgICAgICAgIC8vIHJlamVjdGlvbiAoc3dhbGxvdyBpdCBhbmQgY29udGludWUsIG1hbnVhbGx5IC50aHJvdyBpdCBiYWNrCiAgICAgICAgICAvLyBpbnRvIHRoZSBnZW5lcmF0b3IsIGFiYW5kb24gaXRlcmF0aW9uLCB3aGF0ZXZlcikuIFdpdGgKICAgICAgICAgIC8vIGF3YWl0LCBieSBjb250cmFzdCwgdGhlcmUgaXMgbm8gb3Bwb3J0dW5pdHkgdG8gZXhhbWluZSB0aGUKICAgICAgICAgIC8vIHJlamVjdGlvbiByZWFzb24gb3V0c2lkZSB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uLCBzbyB0aGUKICAgICAgICAgIC8vIG9ubHkgb3B0aW9uIGlzIHRvIHRocm93IGl0IGZyb20gdGhlIGF3YWl0IGV4cHJlc3Npb24sIGFuZAogICAgICAgICAgLy8gbGV0IHRoZSBnZW5lcmF0b3IgZnVuY3Rpb24gaGFuZGxlIHRoZSBleGNlcHRpb24uCiAgICAgICAgICByZXN1bHQudmFsdWUgPSB1bndyYXBwZWQ7CiAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7CiAgICAgICAgfSwgcmVqZWN0KTsKICAgICAgfQogICAgfQoKICAgIGlmICh0eXBlb2YgZ2xvYmFsLnByb2Nlc3MgPT09ICJvYmplY3QiICYmIGdsb2JhbC5wcm9jZXNzLmRvbWFpbikgewogICAgICBpbnZva2UgPSBnbG9iYWwucHJvY2Vzcy5kb21haW4uYmluZChpbnZva2UpOwogICAgfQoKICAgIHZhciBwcmV2aW91c1Byb21pc2U7CgogICAgZnVuY3Rpb24gZW5xdWV1ZShtZXRob2QsIGFyZykgewogICAgICBmdW5jdGlvbiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpIHsKICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBwcmV2aW91c1Byb21pc2UgPQogICAgICAgIC8vIElmIGVucXVldWUgaGFzIGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiB3ZSB3YW50IHRvIHdhaXQgdW50aWwKICAgICAgICAvLyBhbGwgcHJldmlvdXMgUHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkIGJlZm9yZSBjYWxsaW5nIGludm9rZSwKICAgICAgICAvLyBzbyB0aGF0IHJlc3VsdHMgYXJlIGFsd2F5cyBkZWxpdmVyZWQgaW4gdGhlIGNvcnJlY3Qgb3JkZXIuIElmCiAgICAgICAgLy8gZW5xdWV1ZSBoYXMgbm90IGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiBpdCBpcyBpbXBvcnRhbnQgdG8KICAgICAgICAvLyBjYWxsIGludm9rZSBpbW1lZGlhdGVseSwgd2l0aG91dCB3YWl0aW5nIG9uIGEgY2FsbGJhY2sgdG8gZmlyZSwKICAgICAgICAvLyBzbyB0aGF0IHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gaGFzIHRoZSBvcHBvcnR1bml0eSB0byBkbwogICAgICAgIC8vIGFueSBuZWNlc3Nhcnkgc2V0dXAgaW4gYSBwcmVkaWN0YWJsZSB3YXkuIFRoaXMgcHJlZGljdGFiaWxpdHkKICAgICAgICAvLyBpcyB3aHkgdGhlIFByb21pc2UgY29uc3RydWN0b3Igc3luY2hyb25vdXNseSBpbnZva2VzIGl0cwogICAgICAgIC8vIGV4ZWN1dG9yIGNhbGxiYWNrLCBhbmQgd2h5IGFzeW5jIGZ1bmN0aW9ucyBzeW5jaHJvbm91c2x5CiAgICAgICAgLy8gZXhlY3V0ZSBjb2RlIGJlZm9yZSB0aGUgZmlyc3QgYXdhaXQuIFNpbmNlIHdlIGltcGxlbWVudCBzaW1wbGUKICAgICAgICAvLyBhc3luYyBmdW5jdGlvbnMgaW4gdGVybXMgb2YgYXN5bmMgZ2VuZXJhdG9ycywgaXQgaXMgZXNwZWNpYWxseQogICAgICAgIC8vIGltcG9ydGFudCB0byBnZXQgdGhpcyByaWdodCwgZXZlbiB0aG91Z2ggaXQgcmVxdWlyZXMgY2FyZS4KICAgICAgICBwcmV2aW91c1Byb21pc2UgPyBwcmV2aW91c1Byb21pc2UudGhlbigKICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLAogICAgICAgICAgLy8gQXZvaWQgcHJvcGFnYXRpbmcgZmFpbHVyZXMgdG8gUHJvbWlzZXMgcmV0dXJuZWQgYnkgbGF0ZXIKICAgICAgICAgIC8vIGludm9jYXRpb25zIG9mIHRoZSBpdGVyYXRvci4KICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnCiAgICAgICAgKSA6IGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCk7CiAgICB9CgogICAgLy8gRGVmaW5lIHRoZSB1bmlmaWVkIGhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIGltcGxlbWVudCAubmV4dCwKICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gKHNlZSBkZWZpbmVJdGVyYXRvck1ldGhvZHMpLgogICAgdGhpcy5faW52b2tlID0gZW5xdWV1ZTsKICB9CgogIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSk7CiAgQXN5bmNJdGVyYXRvci5wcm90b3R5cGVbYXN5bmNJdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpczsKICB9OwogIHJ1bnRpbWUuQXN5bmNJdGVyYXRvciA9IEFzeW5jSXRlcmF0b3I7CgogIC8vIE5vdGUgdGhhdCBzaW1wbGUgYXN5bmMgZnVuY3Rpb25zIGFyZSBpbXBsZW1lbnRlZCBvbiB0b3Agb2YKICAvLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2YKICAvLyB0aGUgZmluYWwgcmVzdWx0IHByb2R1Y2VkIGJ5IHRoZSBpdGVyYXRvci4KICBydW50aW1lLmFzeW5jID0gZnVuY3Rpb24oaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpIHsKICAgIHZhciBpdGVyID0gbmV3IEFzeW5jSXRlcmF0b3IoCiAgICAgIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpCiAgICApOwoKICAgIHJldHVybiBydW50aW1lLmlzR2VuZXJhdG9yRnVuY3Rpb24ob3V0ZXJGbikKICAgICAgPyBpdGVyIC8vIElmIG91dGVyRm4gaXMgYSBnZW5lcmF0b3IsIHJldHVybiB0aGUgZnVsbCBpdGVyYXRvci4KICAgICAgOiBpdGVyLm5leHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkgewogICAgICAgICAgcmV0dXJuIHJlc3VsdC5kb25lID8gcmVzdWx0LnZhbHVlIDogaXRlci5uZXh0KCk7CiAgICAgICAgfSk7CiAgfTsKCiAgZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KSB7CiAgICB2YXIgc3RhdGUgPSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0OwoKICAgIHJldHVybiBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcpIHsKICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUV4ZWN1dGluZykgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZyIpOwogICAgICB9CgogICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlQ29tcGxldGVkKSB7CiAgICAgICAgaWYgKG1ldGhvZCA9PT0gInRocm93IikgewogICAgICAgICAgdGhyb3cgYXJnOwogICAgICAgIH0KCiAgICAgICAgLy8gQmUgZm9yZ2l2aW5nLCBwZXIgMjUuMy4zLjMuMyBvZiB0aGUgc3BlYzoKICAgICAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtZ2VuZXJhdG9ycmVzdW1lCiAgICAgICAgcmV0dXJuIGRvbmVSZXN1bHQoKTsKICAgICAgfQoKICAgICAgY29udGV4dC5tZXRob2QgPSBtZXRob2Q7CiAgICAgIGNvbnRleHQuYXJnID0gYXJnOwoKICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICB2YXIgZGVsZWdhdGUgPSBjb250ZXh0LmRlbGVnYXRlOwogICAgICAgIGlmIChkZWxlZ2F0ZSkgewogICAgICAgICAgdmFyIGRlbGVnYXRlUmVzdWx0ID0gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCk7CiAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQpIHsKICAgICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0ID09PSBDb250aW51ZVNlbnRpbmVsKSBjb250aW51ZTsKICAgICAgICAgICAgcmV0dXJuIGRlbGVnYXRlUmVzdWx0OwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSAibmV4dCIpIHsKICAgICAgICAgIC8vIFNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwncwogICAgICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi4KICAgICAgICAgIGNvbnRleHQuc2VudCA9IGNvbnRleHQuX3NlbnQgPSBjb250ZXh0LmFyZzsKCiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gInRocm93IikgewogICAgICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0KSB7CiAgICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7CiAgICAgICAgICAgIHRocm93IGNvbnRleHQuYXJnOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpOwoKICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSAicmV0dXJuIikgewogICAgICAgICAgY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuYXJnKTsKICAgICAgICB9CgogICAgICAgIHN0YXRlID0gR2VuU3RhdGVFeGVjdXRpbmc7CgogICAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTsKICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09ICJub3JtYWwiKSB7CiAgICAgICAgICAvLyBJZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGZyb20gaW5uZXJGbiwgd2UgbGVhdmUgc3RhdGUgPT09CiAgICAgICAgICAvLyBHZW5TdGF0ZUV4ZWN1dGluZyBhbmQgbG9vcCBiYWNrIGZvciBhbm90aGVyIGludm9jYXRpb24uCiAgICAgICAgICBzdGF0ZSA9IGNvbnRleHQuZG9uZQogICAgICAgICAgICA/IEdlblN0YXRlQ29tcGxldGVkCiAgICAgICAgICAgIDogR2VuU3RhdGVTdXNwZW5kZWRZaWVsZDsKCiAgICAgICAgICBpZiAocmVjb3JkLmFyZyA9PT0gQ29udGludWVTZW50aW5lbCkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB2YWx1ZTogcmVjb3JkLmFyZywKICAgICAgICAgICAgZG9uZTogY29udGV4dC5kb25lCiAgICAgICAgICB9OwoKICAgICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSAidGhyb3ciKSB7CiAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkOwogICAgICAgICAgLy8gRGlzcGF0Y2ggdGhlIGV4Y2VwdGlvbiBieSBsb29waW5nIGJhY2sgYXJvdW5kIHRvIHRoZQogICAgICAgICAgLy8gY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZykgY2FsbCBhYm92ZS4KICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gInRocm93IjsKICAgICAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZzsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfQoKICAvLyBDYWxsIGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXShjb250ZXh0LmFyZykgYW5kIGhhbmRsZSB0aGUKICAvLyByZXN1bHQsIGVpdGhlciBieSByZXR1cm5pbmcgYSB7IHZhbHVlLCBkb25lIH0gcmVzdWx0IGZyb20gdGhlCiAgLy8gZGVsZWdhdGUgaXRlcmF0b3IsIG9yIGJ5IG1vZGlmeWluZyBjb250ZXh0Lm1ldGhvZCBhbmQgY29udGV4dC5hcmcsCiAgLy8gc2V0dGluZyBjb250ZXh0LmRlbGVnYXRlIHRvIG51bGwsIGFuZCByZXR1cm5pbmcgdGhlIENvbnRpbnVlU2VudGluZWwuCiAgZnVuY3Rpb24gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCkgewogICAgdmFyIG1ldGhvZCA9IGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXTsKICAgIGlmIChtZXRob2QgPT09IHVuZGVmaW5lZCkgewogICAgICAvLyBBIC50aHJvdyBvciAucmV0dXJuIHdoZW4gdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBubyAudGhyb3cKICAgICAgLy8gbWV0aG9kIGFsd2F5cyB0ZXJtaW5hdGVzIHRoZSB5aWVsZCogbG9vcC4KICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7CgogICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09ICJ0aHJvdyIpIHsKICAgICAgICBpZiAoZGVsZWdhdGUuaXRlcmF0b3IucmV0dXJuKSB7CiAgICAgICAgICAvLyBJZiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIGEgcmV0dXJuIG1ldGhvZCwgZ2l2ZSBpdCBhCiAgICAgICAgICAvLyBjaGFuY2UgdG8gY2xlYW4gdXAuCiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9ICJyZXR1cm4iOwogICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7CiAgICAgICAgICBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTsKCiAgICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09ICJ0aHJvdyIpIHsKICAgICAgICAgICAgLy8gSWYgbWF5YmVJbnZva2VEZWxlZ2F0ZShjb250ZXh0KSBjaGFuZ2VkIGNvbnRleHQubWV0aG9kIGZyb20KICAgICAgICAgICAgLy8gInJldHVybiIgdG8gInRocm93IiwgbGV0IHRoYXQgb3ZlcnJpZGUgdGhlIFR5cGVFcnJvciBiZWxvdy4KICAgICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBjb250ZXh0Lm1ldGhvZCA9ICJ0aHJvdyI7CiAgICAgICAgY29udGV4dC5hcmcgPSBuZXcgVHlwZUVycm9yKAogICAgICAgICAgIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJ3Rocm93JyBtZXRob2QiKTsKICAgICAgfQoKICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7CiAgICB9CgogICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKG1ldGhvZCwgZGVsZWdhdGUuaXRlcmF0b3IsIGNvbnRleHQuYXJnKTsKCiAgICBpZiAocmVjb3JkLnR5cGUgPT09ICJ0aHJvdyIpIHsKICAgICAgY29udGV4dC5tZXRob2QgPSAidGhyb3ciOwogICAgICBjb250ZXh0LmFyZyA9IHJlY29yZC5hcmc7CiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsOwogICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDsKICAgIH0KCiAgICB2YXIgaW5mbyA9IHJlY29yZC5hcmc7CgogICAgaWYgKCEgaW5mbykgewogICAgICBjb250ZXh0Lm1ldGhvZCA9ICJ0aHJvdyI7CiAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcigiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3QiKTsKICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7CiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsOwogICAgfQoKICAgIGlmIChpbmZvLmRvbmUpIHsKICAgICAgLy8gQXNzaWduIHRoZSByZXN1bHQgb2YgdGhlIGZpbmlzaGVkIGRlbGVnYXRlIHRvIHRoZSB0ZW1wb3JhcnkKICAgICAgLy8gdmFyaWFibGUgc3BlY2lmaWVkIGJ5IGRlbGVnYXRlLnJlc3VsdE5hbWUgKHNlZSBkZWxlZ2F0ZVlpZWxkKS4KICAgICAgY29udGV4dFtkZWxlZ2F0ZS5yZXN1bHROYW1lXSA9IGluZm8udmFsdWU7CgogICAgICAvLyBSZXN1bWUgZXhlY3V0aW9uIGF0IHRoZSBkZXNpcmVkIGxvY2F0aW9uIChzZWUgZGVsZWdhdGVZaWVsZCkuCiAgICAgIGNvbnRleHQubmV4dCA9IGRlbGVnYXRlLm5leHRMb2M7CgogICAgICAvLyBJZiBjb250ZXh0Lm1ldGhvZCB3YXMgInRocm93IiBidXQgdGhlIGRlbGVnYXRlIGhhbmRsZWQgdGhlCiAgICAgIC8vIGV4Y2VwdGlvbiwgbGV0IHRoZSBvdXRlciBnZW5lcmF0b3IgcHJvY2VlZCBub3JtYWxseS4gSWYKICAgICAgLy8gY29udGV4dC5tZXRob2Qgd2FzICJuZXh0IiwgZm9yZ2V0IGNvbnRleHQuYXJnIHNpbmNlIGl0IGhhcyBiZWVuCiAgICAgIC8vICJjb25zdW1lZCIgYnkgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yLiBJZiBjb250ZXh0Lm1ldGhvZCB3YXMKICAgICAgLy8gInJldHVybiIsIGFsbG93IHRoZSBvcmlnaW5hbCAucmV0dXJuIGNhbGwgdG8gY29udGludWUgaW4gdGhlCiAgICAgIC8vIG91dGVyIGdlbmVyYXRvci4KICAgICAgaWYgKGNvbnRleHQubWV0aG9kICE9PSAicmV0dXJuIikgewogICAgICAgIGNvbnRleHQubWV0aG9kID0gIm5leHQiOwogICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkOwogICAgICB9CgogICAgfSBlbHNlIHsKICAgICAgLy8gUmUteWllbGQgdGhlIHJlc3VsdCByZXR1cm5lZCBieSB0aGUgZGVsZWdhdGUgbWV0aG9kLgogICAgICByZXR1cm4gaW5mbzsKICAgIH0KCiAgICAvLyBUaGUgZGVsZWdhdGUgaXRlcmF0b3IgaXMgZmluaXNoZWQsIHNvIGZvcmdldCBpdCBhbmQgY29udGludWUgd2l0aAogICAgLy8gdGhlIG91dGVyIGdlbmVyYXRvci4KICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsOwogICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7CiAgfQoKICAvLyBEZWZpbmUgR2VuZXJhdG9yLnByb3RvdHlwZS57bmV4dCx0aHJvdyxyZXR1cm59IGluIHRlcm1zIG9mIHRoZQogIC8vIHVuaWZpZWQgLl9pbnZva2UgaGVscGVyIG1ldGhvZC4KICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoR3ApOwoKICBHcFt0b1N0cmluZ1RhZ1N5bWJvbF0gPSAiR2VuZXJhdG9yIjsKCiAgLy8gQSBHZW5lcmF0b3Igc2hvdWxkIGFsd2F5cyByZXR1cm4gaXRzZWxmIGFzIHRoZSBpdGVyYXRvciBvYmplY3Qgd2hlbiB0aGUKICAvLyBAQGl0ZXJhdG9yIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBpdC4gU29tZSBicm93c2VycycgaW1wbGVtZW50YXRpb25zIG9mIHRoZQogIC8vIGl0ZXJhdG9yIHByb3RvdHlwZSBjaGFpbiBpbmNvcnJlY3RseSBpbXBsZW1lbnQgdGhpcywgY2F1c2luZyB0aGUgR2VuZXJhdG9yCiAgLy8gb2JqZWN0IHRvIG5vdCBiZSByZXR1cm5lZCBmcm9tIHRoaXMgY2FsbC4gVGhpcyBlbnN1cmVzIHRoYXQgZG9lc24ndCBoYXBwZW4uCiAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9pc3N1ZXMvMjc0IGZvciBtb3JlIGRldGFpbHMuCiAgR3BbaXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpczsKICB9OwoKICBHcC50b1N0cmluZyA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuICJbb2JqZWN0IEdlbmVyYXRvcl0iOwogIH07CgogIGZ1bmN0aW9uIHB1c2hUcnlFbnRyeShsb2NzKSB7CiAgICB2YXIgZW50cnkgPSB7IHRyeUxvYzogbG9jc1swXSB9OwoKICAgIGlmICgxIGluIGxvY3MpIHsKICAgICAgZW50cnkuY2F0Y2hMb2MgPSBsb2NzWzFdOwogICAgfQoKICAgIGlmICgyIGluIGxvY3MpIHsKICAgICAgZW50cnkuZmluYWxseUxvYyA9IGxvY3NbMl07CiAgICAgIGVudHJ5LmFmdGVyTG9jID0gbG9jc1szXTsKICAgIH0KCiAgICB0aGlzLnRyeUVudHJpZXMucHVzaChlbnRyeSk7CiAgfQoKICBmdW5jdGlvbiByZXNldFRyeUVudHJ5KGVudHJ5KSB7CiAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbiB8fCB7fTsKICAgIHJlY29yZC50eXBlID0gIm5vcm1hbCI7CiAgICBkZWxldGUgcmVjb3JkLmFyZzsKICAgIGVudHJ5LmNvbXBsZXRpb24gPSByZWNvcmQ7CiAgfQoKICBmdW5jdGlvbiBDb250ZXh0KHRyeUxvY3NMaXN0KSB7CiAgICAvLyBUaGUgcm9vdCBlbnRyeSBvYmplY3QgKGVmZmVjdGl2ZWx5IGEgdHJ5IHN0YXRlbWVudCB3aXRob3V0IGEgY2F0Y2gKICAgIC8vIG9yIGEgZmluYWxseSBibG9jaykgZ2l2ZXMgdXMgYSBwbGFjZSB0byBzdG9yZSB2YWx1ZXMgdGhyb3duIGZyb20KICAgIC8vIGxvY2F0aW9ucyB3aGVyZSB0aGVyZSBpcyBubyBlbmNsb3NpbmcgdHJ5IHN0YXRlbWVudC4KICAgIHRoaXMudHJ5RW50cmllcyA9IFt7IHRyeUxvYzogInJvb3QiIH1dOwogICAgdHJ5TG9jc0xpc3QuZm9yRWFjaChwdXNoVHJ5RW50cnksIHRoaXMpOwogICAgdGhpcy5yZXNldCh0cnVlKTsKICB9CgogIHJ1bnRpbWUua2V5cyA9IGZ1bmN0aW9uKG9iamVjdCkgewogICAgdmFyIGtleXMgPSBbXTsKICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHsKICAgICAga2V5cy5wdXNoKGtleSk7CiAgICB9CiAgICBrZXlzLnJldmVyc2UoKTsKCiAgICAvLyBSYXRoZXIgdGhhbiByZXR1cm5pbmcgYW4gb2JqZWN0IHdpdGggYSBuZXh0IG1ldGhvZCwgd2Uga2VlcAogICAgLy8gdGhpbmdzIHNpbXBsZSBhbmQgcmV0dXJuIHRoZSBuZXh0IGZ1bmN0aW9uIGl0c2VsZi4KICAgIHJldHVybiBmdW5jdGlvbiBuZXh0KCkgewogICAgICB3aGlsZSAoa2V5cy5sZW5ndGgpIHsKICAgICAgICB2YXIga2V5ID0ga2V5cy5wb3AoKTsKICAgICAgICBpZiAoa2V5IGluIG9iamVjdCkgewogICAgICAgICAgbmV4dC52YWx1ZSA9IGtleTsKICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlOwogICAgICAgICAgcmV0dXJuIG5leHQ7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBUbyBhdm9pZCBjcmVhdGluZyBhbiBhZGRpdGlvbmFsIG9iamVjdCwgd2UganVzdCBoYW5nIHRoZSAudmFsdWUKICAgICAgLy8gYW5kIC5kb25lIHByb3BlcnRpZXMgb2ZmIHRoZSBuZXh0IGZ1bmN0aW9uIG9iamVjdCBpdHNlbGYuIFRoaXMKICAgICAgLy8gYWxzbyBlbnN1cmVzIHRoYXQgdGhlIG1pbmlmaWVyIHdpbGwgbm90IGFub255bWl6ZSB0aGUgZnVuY3Rpb24uCiAgICAgIG5leHQuZG9uZSA9IHRydWU7CiAgICAgIHJldHVybiBuZXh0OwogICAgfTsKICB9OwoKICBmdW5jdGlvbiB2YWx1ZXMoaXRlcmFibGUpIHsKICAgIGlmIChpdGVyYWJsZSkgewogICAgICB2YXIgaXRlcmF0b3JNZXRob2QgPSBpdGVyYWJsZVtpdGVyYXRvclN5bWJvbF07CiAgICAgIGlmIChpdGVyYXRvck1ldGhvZCkgewogICAgICAgIHJldHVybiBpdGVyYXRvck1ldGhvZC5jYWxsKGl0ZXJhYmxlKTsKICAgICAgfQoKICAgICAgaWYgKHR5cGVvZiBpdGVyYWJsZS5uZXh0ID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgcmV0dXJuIGl0ZXJhYmxlOwogICAgICB9CgogICAgICBpZiAoIWlzTmFOKGl0ZXJhYmxlLmxlbmd0aCkpIHsKICAgICAgICB2YXIgaSA9IC0xLCBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHsKICAgICAgICAgIHdoaWxlICgrK2kgPCBpdGVyYWJsZS5sZW5ndGgpIHsKICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKGl0ZXJhYmxlLCBpKSkgewogICAgICAgICAgICAgIG5leHQudmFsdWUgPSBpdGVyYWJsZVtpXTsKICAgICAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTsKICAgICAgICAgICAgICByZXR1cm4gbmV4dDsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIG5leHQudmFsdWUgPSB1bmRlZmluZWQ7CiAgICAgICAgICBuZXh0LmRvbmUgPSB0cnVlOwoKICAgICAgICAgIHJldHVybiBuZXh0OwogICAgICAgIH07CgogICAgICAgIHJldHVybiBuZXh0Lm5leHQgPSBuZXh0OwogICAgICB9CiAgICB9CgogICAgLy8gUmV0dXJuIGFuIGl0ZXJhdG9yIHdpdGggbm8gdmFsdWVzLgogICAgcmV0dXJuIHsgbmV4dDogZG9uZVJlc3VsdCB9OwogIH0KICBydW50aW1lLnZhbHVlcyA9IHZhbHVlczsKCiAgZnVuY3Rpb24gZG9uZVJlc3VsdCgpIHsKICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTsKICB9CgogIENvbnRleHQucHJvdG90eXBlID0gewogICAgY29uc3RydWN0b3I6IENvbnRleHQsCgogICAgcmVzZXQ6IGZ1bmN0aW9uKHNraXBUZW1wUmVzZXQpIHsKICAgICAgdGhpcy5wcmV2ID0gMDsKICAgICAgdGhpcy5uZXh0ID0gMDsKICAgICAgLy8gUmVzZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3MKICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi4KICAgICAgdGhpcy5zZW50ID0gdGhpcy5fc2VudCA9IHVuZGVmaW5lZDsKICAgICAgdGhpcy5kb25lID0gZmFsc2U7CiAgICAgIHRoaXMuZGVsZWdhdGUgPSBudWxsOwoKICAgICAgdGhpcy5tZXRob2QgPSAibmV4dCI7CiAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkOwoKICAgICAgdGhpcy50cnlFbnRyaWVzLmZvckVhY2gocmVzZXRUcnlFbnRyeSk7CgogICAgICBpZiAoIXNraXBUZW1wUmVzZXQpIHsKICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMpIHsKICAgICAgICAgIC8vIE5vdCBzdXJlIGFib3V0IHRoZSBvcHRpbWFsIG9yZGVyIG9mIHRoZXNlIGNvbmRpdGlvbnM6CiAgICAgICAgICBpZiAobmFtZS5jaGFyQXQoMCkgPT09ICJ0IiAmJgogICAgICAgICAgICAgIGhhc093bi5jYWxsKHRoaXMsIG5hbWUpICYmCiAgICAgICAgICAgICAgIWlzTmFOKCtuYW1lLnNsaWNlKDEpKSkgewogICAgICAgICAgICB0aGlzW25hbWVdID0gdW5kZWZpbmVkOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBzdG9wOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5kb25lID0gdHJ1ZTsKCiAgICAgIHZhciByb290RW50cnkgPSB0aGlzLnRyeUVudHJpZXNbMF07CiAgICAgIHZhciByb290UmVjb3JkID0gcm9vdEVudHJ5LmNvbXBsZXRpb247CiAgICAgIGlmIChyb290UmVjb3JkLnR5cGUgPT09ICJ0aHJvdyIpIHsKICAgICAgICB0aHJvdyByb290UmVjb3JkLmFyZzsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMucnZhbDsKICAgIH0sCgogICAgZGlzcGF0Y2hFeGNlcHRpb246IGZ1bmN0aW9uKGV4Y2VwdGlvbikgewogICAgICBpZiAodGhpcy5kb25lKSB7CiAgICAgICAgdGhyb3cgZXhjZXB0aW9uOwogICAgICB9CgogICAgICB2YXIgY29udGV4dCA9IHRoaXM7CiAgICAgIGZ1bmN0aW9uIGhhbmRsZShsb2MsIGNhdWdodCkgewogICAgICAgIHJlY29yZC50eXBlID0gInRocm93IjsKICAgICAgICByZWNvcmQuYXJnID0gZXhjZXB0aW9uOwogICAgICAgIGNvbnRleHQubmV4dCA9IGxvYzsKCiAgICAgICAgaWYgKGNhdWdodCkgewogICAgICAgICAgLy8gSWYgdGhlIGRpc3BhdGNoZWQgZXhjZXB0aW9uIHdhcyBjYXVnaHQgYnkgYSBjYXRjaCBibG9jaywKICAgICAgICAgIC8vIHRoZW4gbGV0IHRoYXQgY2F0Y2ggYmxvY2sgaGFuZGxlIHRoZSBleGNlcHRpb24gbm9ybWFsbHkuCiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9ICJuZXh0IjsKICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICEhIGNhdWdodDsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkgewogICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTsKICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjsKCiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gInJvb3QiKSB7CiAgICAgICAgICAvLyBFeGNlcHRpb24gdGhyb3duIG91dHNpZGUgb2YgYW55IHRyeSBibG9jayB0aGF0IGNvdWxkIGhhbmRsZQogICAgICAgICAgLy8gaXQsIHNvIHNldCB0aGUgY29tcGxldGlvbiB2YWx1ZSBvZiB0aGUgZW50aXJlIGZ1bmN0aW9uIHRvCiAgICAgICAgICAvLyB0aHJvdyB0aGUgZXhjZXB0aW9uLgogICAgICAgICAgcmV0dXJuIGhhbmRsZSgiZW5kIik7CiAgICAgICAgfQoKICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldikgewogICAgICAgICAgdmFyIGhhc0NhdGNoID0gaGFzT3duLmNhbGwoZW50cnksICJjYXRjaExvYyIpOwogICAgICAgICAgdmFyIGhhc0ZpbmFsbHkgPSBoYXNPd24uY2FsbChlbnRyeSwgImZpbmFsbHlMb2MiKTsKCiAgICAgICAgICBpZiAoaGFzQ2F0Y2ggJiYgaGFzRmluYWxseSkgewogICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHsKICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTsKICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTsKICAgICAgICAgICAgfQoKICAgICAgICAgIH0gZWxzZSBpZiAoaGFzQ2F0Y2gpIHsKICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0ZpbmFsbHkpIHsKICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHsKICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpOwogICAgICAgICAgICB9CgogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseSIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBhYnJ1cHQ6IGZ1bmN0aW9uKHR5cGUsIGFyZykgewogICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7CiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldOwogICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2ICYmCiAgICAgICAgICAgIGhhc093bi5jYWxsKGVudHJ5LCAiZmluYWxseUxvYyIpICYmCiAgICAgICAgICAgIHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHsKICAgICAgICAgIHZhciBmaW5hbGx5RW50cnkgPSBlbnRyeTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKGZpbmFsbHlFbnRyeSAmJgogICAgICAgICAgKHR5cGUgPT09ICJicmVhayIgfHwKICAgICAgICAgICB0eXBlID09PSAiY29udGludWUiKSAmJgogICAgICAgICAgZmluYWxseUVudHJ5LnRyeUxvYyA8PSBhcmcgJiYKICAgICAgICAgIGFyZyA8PSBmaW5hbGx5RW50cnkuZmluYWxseUxvYykgewogICAgICAgIC8vIElnbm9yZSB0aGUgZmluYWxseSBlbnRyeSBpZiBjb250cm9sIGlzIG5vdCBqdW1waW5nIHRvIGEKICAgICAgICAvLyBsb2NhdGlvbiBvdXRzaWRlIHRoZSB0cnkvY2F0Y2ggYmxvY2suCiAgICAgICAgZmluYWxseUVudHJ5ID0gbnVsbDsKICAgICAgfQoKICAgICAgdmFyIHJlY29yZCA9IGZpbmFsbHlFbnRyeSA/IGZpbmFsbHlFbnRyeS5jb21wbGV0aW9uIDoge307CiAgICAgIHJlY29yZC50eXBlID0gdHlwZTsKICAgICAgcmVjb3JkLmFyZyA9IGFyZzsKCiAgICAgIGlmIChmaW5hbGx5RW50cnkpIHsKICAgICAgICB0aGlzLm1ldGhvZCA9ICJuZXh0IjsKICAgICAgICB0aGlzLm5leHQgPSBmaW5hbGx5RW50cnkuZmluYWxseUxvYzsKICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGUocmVjb3JkKTsKICAgIH0sCgogICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlY29yZCwgYWZ0ZXJMb2MpIHsKICAgICAgaWYgKHJlY29yZC50eXBlID09PSAidGhyb3ciKSB7CiAgICAgICAgdGhyb3cgcmVjb3JkLmFyZzsKICAgICAgfQoKICAgICAgaWYgKHJlY29yZC50eXBlID09PSAiYnJlYWsiIHx8CiAgICAgICAgICByZWNvcmQudHlwZSA9PT0gImNvbnRpbnVlIikgewogICAgICAgIHRoaXMubmV4dCA9IHJlY29yZC5hcmc7CiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09ICJyZXR1cm4iKSB7CiAgICAgICAgdGhpcy5ydmFsID0gdGhpcy5hcmcgPSByZWNvcmQuYXJnOwogICAgICAgIHRoaXMubWV0aG9kID0gInJldHVybiI7CiAgICAgICAgdGhpcy5uZXh0ID0gImVuZCI7CiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09ICJub3JtYWwiICYmIGFmdGVyTG9jKSB7CiAgICAgICAgdGhpcy5uZXh0ID0gYWZ0ZXJMb2M7CiAgICAgIH0KCiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsOwogICAgfSwKCiAgICBmaW5pc2g6IGZ1bmN0aW9uKGZpbmFsbHlMb2MpIHsKICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkgewogICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTsKICAgICAgICBpZiAoZW50cnkuZmluYWxseUxvYyA9PT0gZmluYWxseUxvYykgewogICAgICAgICAgdGhpcy5jb21wbGV0ZShlbnRyeS5jb21wbGV0aW9uLCBlbnRyeS5hZnRlckxvYyk7CiAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTsKICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICAiY2F0Y2giOiBmdW5jdGlvbih0cnlMb2MpIHsKICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkgewogICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTsKICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSB0cnlMb2MpIHsKICAgICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uOwogICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSAidGhyb3ciKSB7CiAgICAgICAgICAgIHZhciB0aHJvd24gPSByZWNvcmQuYXJnOwogICAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0aHJvd247CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBUaGUgY29udGV4dC5jYXRjaCBtZXRob2QgbXVzdCBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgbG9jYXRpb24KICAgICAgLy8gYXJndW1lbnQgdGhhdCBjb3JyZXNwb25kcyB0byBhIGtub3duIGNhdGNoIGJsb2NrLgogICAgICB0aHJvdyBuZXcgRXJyb3IoImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdCIpOwogICAgfSwKCiAgICBkZWxlZ2F0ZVlpZWxkOiBmdW5jdGlvbihpdGVyYWJsZSwgcmVzdWx0TmFtZSwgbmV4dExvYykgewogICAgICB0aGlzLmRlbGVnYXRlID0gewogICAgICAgIGl0ZXJhdG9yOiB2YWx1ZXMoaXRlcmFibGUpLAogICAgICAgIHJlc3VsdE5hbWU6IHJlc3VsdE5hbWUsCiAgICAgICAgbmV4dExvYzogbmV4dExvYwogICAgICB9OwoKICAgICAgaWYgKHRoaXMubWV0aG9kID09PSAibmV4dCIpIHsKICAgICAgICAvLyBEZWxpYmVyYXRlbHkgZm9yZ2V0IHRoZSBsYXN0IHNlbnQgdmFsdWUgc28gdGhhdCB3ZSBkb24ndAogICAgICAgIC8vIGFjY2lkZW50YWxseSBwYXNzIGl0IG9uIHRvIHRoZSBkZWxlZ2F0ZS4KICAgICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZDsKICAgICAgfQoKICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7CiAgICB9CiAgfTsKfSkoCiAgLy8gQW1vbmcgdGhlIHZhcmlvdXMgdHJpY2tzIGZvciBvYnRhaW5pbmcgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbAogIC8vIG9iamVjdCwgdGhpcyBzZWVtcyB0byBiZSB0aGUgbW9zdCByZWxpYWJsZSB0ZWNobmlxdWUgdGhhdCBkb2VzIG5vdAogIC8vIHVzZSBpbmRpcmVjdCBldmFsICh3aGljaCB2aW9sYXRlcyBDb250ZW50IFNlY3VyaXR5IFBvbGljeSkuCiAgdHlwZW9mIGdsb2JhbCA9PT0gIm9iamVjdCIgPyBnbG9iYWwgOgogIHR5cGVvZiB3aW5kb3cgPT09ICJvYmplY3QiID8gd2luZG93IDoKICB0eXBlb2Ygc2VsZiA9PT0gIm9iamVjdCIgPyBzZWxmIDogdGhpcwopOwoKLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKQoKLyoqKi8gfSksCi8qIDExICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICB2YWx1ZTogdHJ1ZQp9KTsKCmZ1bmN0aW9uIGdldFZpZGVvVXJsKHR2aWQsIHZpZCkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgIHVybDogYGh0dHA6Ly9jYWNoZS52aWRlby5xaXlpLmNvbS9qcC92aS8ke3R2aWR9LyR7dmlkfS8/Y2FsbGJhY2s9Y2FsbGJhY2tgLAogICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICB0aW1lb3V0OiA4ZTMsCiAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gb25sb2FkKGRldGFpbHMpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGpzb24gPSBKU09OLnBhcnNlKC9jYWxsYmFja1xzKlwoXHMqKFx7LipcfSlccypcKS8uZXhlYyhkZXRhaWxzLnJlc3BvbnNlVGV4dClbMV0pOwogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoanNvbi52dSk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25lcnJvcjogcmVqZWN0LAogICAgICAgICAgICBvbmFib3J0OiByZWplY3QsCiAgICAgICAgICAgIG9udGltZW91dDogcmVqZWN0CiAgICAgICAgfSk7CiAgICB9KTsKfQoKZnVuY3Rpb24gZmluZFZpZCh0ZXh0KSB7CiAgICB2YXIgcmVzdWx0ID0gL3ZpZD0oW1xkYS16XSspL2kuZXhlYyh0ZXh0KTsKICAgIHJldHVybiByZXN1bHQgPyByZXN1bHRbMV0gOiBudWxsOwp9CgpmdW5jdGlvbiBmaW5kVHZpZCh0ZXh0KSB7CiAgICB2YXIgcmVzdWx0ID0gL3R2aWQ9KFxkKykvaS5leGVjKHRleHQpOwogICAgcmV0dXJuIHJlc3VsdCA/IHJlc3VsdFsxXSA6IG51bGw7Cn0KCmV4cG9ydHMuZ2V0VmlkZW9VcmwgPSBnZXRWaWRlb1VybDsKZXhwb3J0cy5maW5kVmlkID0gZmluZFZpZDsKZXhwb3J0cy5maW5kVHZpZCA9IGZpbmRUdmlkOwoKLyoqKi8gfSksCi8qIDEyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy51c2VXZWJTb2NrZXRMb2FkZXJQYXRjaCA9IGV4cG9ydHMubW91c2VTaG9ydGN1dHNQYXRjaCA9IGV4cG9ydHMua2V5U2hvcnRjdXRzUGF0Y2ggPSBleHBvcnRzLmtlZXBIb29raW5nUGF0Y2ggPSBleHBvcnRzLndhdGVybWFya3NQYXRjaCA9IGV4cG9ydHMuY29udHJvbHNQYXRjaCA9IGV4cG9ydHMuYWRzUGF0Y2ggPSBleHBvcnRzLnZpcFBhdGNoID0gdW5kZWZpbmVkOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7Cgp2YXIgX2xvZ2dlciA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX2xvZ2dlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2dnZXIpOwoKdmFyIF9ob29rZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9ob29rZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaG9va2VyKTsKCnZhciBfZnVsbHNjcmVlbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpOwoKdmFyIF93ZWJGdWxsc2NyZWVuID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7Cgp2YXIgX3BhcnNlZERhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpID8gY2FsbCA6IHNlbGY7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCnZhciBQYXRjaCA9IGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFBhdGNoKCkgewogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQYXRjaCk7CgogICAgICAgIHRoaXMuX2luc3RhbGxlZCA9IGZhbHNlOwogICAgfQoKICAgIF9jcmVhdGVDbGFzcyhQYXRjaCwgW3sKICAgICAgICBrZXk6ICdpbnN0YWxsJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW5zdGFsbCgpIHsKICAgICAgICAgICAgaWYgKCF0aGlzLl9pbnN0YWxsZWQpIHsKICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbGxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICB0aGlzLl9wcmVwYXJlKCk7CiAgICAgICAgICAgICAgICB0aGlzLl9hcHBseSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ19wcmVwYXJlJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3ByZXBhcmUoKSB7fQogICAgfSwgewogICAgICAgIGtleTogJ19hcHBseScsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hcHBseSgpIHt9CiAgICB9XSk7CgogICAgcmV0dXJuIFBhdGNoOwp9KCk7Cgp2YXIgVmlwUGF0Y2ggPSBmdW5jdGlvbiAoX1BhdGNoKSB7CiAgICBfaW5oZXJpdHMoVmlwUGF0Y2gsIF9QYXRjaCk7CgogICAgZnVuY3Rpb24gVmlwUGF0Y2goKSB7CiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZpcFBhdGNoKTsKCiAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChWaXBQYXRjaC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFZpcFBhdGNoKSkuY2FsbCh0aGlzKSk7CiAgICB9CgogICAgX2NyZWF0ZUNsYXNzKFZpcFBhdGNoLCBbewogICAgICAgIGtleTogJ19hcHBseScsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hcHBseSgpIHsKICAgICAgICAgICAgX2hvb2tlcjIuZGVmYXVsdC5ob29rVXNlcihmdW5jdGlvbiAoZXhwb3J0cykgewogICAgICAgICAgICAgICAgdmFyIHByb3RvID0gZXhwb3J0cy5fX3Byb3RvX187CiAgICAgICAgICAgICAgICBwcm90by5pc1ZpcFN5bmMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcHJvdG8uaXNWaXAgPSBmdW5jdGlvbiAoY2IpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChjYiwgMCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2xvZ2dlcjIuZGVmYXVsdC5pbmZvKCdUaGUgdmlwIHBhdGNoIGhhcyBiZWVuIGluc3RhbGxlZCcpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9XSk7CgogICAgcmV0dXJuIFZpcFBhdGNoOwp9KFBhdGNoKTsKCnZhciBBZHNQYXRjaCA9IGZ1bmN0aW9uIChfUGF0Y2gyKSB7CiAgICBfaW5oZXJpdHMoQWRzUGF0Y2gsIF9QYXRjaDIpOwoKICAgIGZ1bmN0aW9uIEFkc1BhdGNoKCkgewogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBZHNQYXRjaCk7CgogICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQWRzUGF0Y2guX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihBZHNQYXRjaCkpLmNhbGwodGhpcykpOwogICAgfQoKICAgIF9jcmVhdGVDbGFzcyhBZHNQYXRjaCwgW3sKICAgICAgICBrZXk6ICdfZmFrZUFkc0RhdGEnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZmFrZUFkc0RhdGEoKSB7CiAgICAgICAgICAgIHJldHVybiB7fTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnX2FwcGx5JywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2FwcGx5KCkgewogICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgICAgICAgIF9ob29rZXIyLmRlZmF1bHQuaG9va1Nob3dSZXF1ZXN0KGZ1bmN0aW9uIChleHBvcnRzKSB7CiAgICAgICAgICAgICAgICB2YXIgcHJvdG8gPSBleHBvcnRzLnByb3RvdHlwZTsKICAgICAgICAgICAgICAgIHByb3RvLnJlcXVlc3QgPSBmdW5jdGlvbiAoY2IpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChjYiwgMCwgX3RoaXMzLl9mYWtlQWRzRGF0YSgpKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfbG9nZ2VyMi5kZWZhdWx0LmluZm8oJ1RoZSBhZHMgcGF0Y2ggaGFzIGJlZW4gaW5zdGFsbGVkJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH1dKTsKCiAgICByZXR1cm4gQWRzUGF0Y2g7Cn0oUGF0Y2gpOwoKdmFyIFdhdGVybWFya3NQYXRjaCA9IGZ1bmN0aW9uIChfUGF0Y2gzKSB7CiAgICBfaW5oZXJpdHMoV2F0ZXJtYXJrc1BhdGNoLCBfUGF0Y2gzKTsKCiAgICBmdW5jdGlvbiBXYXRlcm1hcmtzUGF0Y2goKSB7CiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFdhdGVybWFya3NQYXRjaCk7CgogICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoV2F0ZXJtYXJrc1BhdGNoLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoV2F0ZXJtYXJrc1BhdGNoKSkuY2FsbCh0aGlzKSk7CiAgICB9CgogICAgX2NyZWF0ZUNsYXNzKFdhdGVybWFya3NQYXRjaCwgW3sKICAgICAgICBrZXk6ICdfYXBwbHknLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYXBwbHkoKSB7CiAgICAgICAgICAgIF9ob29rZXIyLmRlZmF1bHQuaG9va0xvZ28oZnVuY3Rpb24gKGV4cG9ydHMpIHsKICAgICAgICAgICAgICAgIGV4cG9ydHMucHJvdG90eXBlLnNob3dMb2dvID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgICAgICAgICBfbG9nZ2VyMi5kZWZhdWx0LmluZm8oJ1RoZSB3YXRlcm1hcmtzIHBhdGNoIGhhcyBiZWVuIGluc3RhbGxlZCcpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9XSk7CgogICAgcmV0dXJuIFdhdGVybWFya3NQYXRjaDsKfShQYXRjaCk7Cgp2YXIgQ29udHJvbHNQYXRjaCA9IGZ1bmN0aW9uIChfUGF0Y2g0KSB7CiAgICBfaW5oZXJpdHMoQ29udHJvbHNQYXRjaCwgX1BhdGNoNCk7CgogICAgLy8gUHJldmVudCB0aGUgcGxheWVyIGNvbnRyb2xzIHdlcmUgZGlzYWJsZWQuCiAgICBmdW5jdGlvbiBDb250cm9sc1BhdGNoKCkgewogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb250cm9sc1BhdGNoKTsKCiAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChDb250cm9sc1BhdGNoLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ29udHJvbHNQYXRjaCkpLmNhbGwodGhpcykpOwogICAgfQoKICAgIF9jcmVhdGVDbGFzcyhDb250cm9sc1BhdGNoLCBbewogICAgICAgIGtleTogJ19hcHBseScsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hcHBseSgpIHsKICAgICAgICAgICAgX2hvb2tlcjIuZGVmYXVsdC5ob29rU2tpbkJhc2UoZnVuY3Rpb24gKGV4cG9ydHMpIHsKICAgICAgICAgICAgICAgIGV4cG9ydHMucHJvdG90eXBlLl9jaGVja1BsdWdpbiA9IGZ1bmN0aW9uICgpIHt9OyAvLyBUaGlzIGZ1bmN0aW9uIGRpc2FibGVzIHRoZSBwbGF5ZXIgY29udHJvbHMgd2hlbiBwbGF5aW5nIGFkcyBhbmQgZW5hYmxlcyB3aGVuIGRvbmUuCiAgICAgICAgICAgICAgICBfbG9nZ2VyMi5kZWZhdWx0LmluZm8oJ1RoZSBjb250cm9scyBwYXRjaCBoYXMgYmVlbiBpbnN0YWxsZWQnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfV0pOwoKICAgIHJldHVybiBDb250cm9sc1BhdGNoOwp9KFBhdGNoKTsKCnZhciBDb3JlUGF0Y2ggPSBmdW5jdGlvbiAoX1BhdGNoNSkgewogICAgX2luaGVyaXRzKENvcmVQYXRjaCwgX1BhdGNoNSk7CgogICAgZnVuY3Rpb24gQ29yZVBhdGNoKCkgewogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb3JlUGF0Y2gpOwoKICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKENvcmVQYXRjaC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENvcmVQYXRjaCkpLmNhbGwodGhpcykpOwogICAgfQoKICAgIF9jcmVhdGVDbGFzcyhDb3JlUGF0Y2gsIFt7CiAgICAgICAga2V5OiAnX3ByZXBhcmUnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJlcGFyZSgpIHsKICAgICAgICAgICAgdGhpcy5faW5pdFNob3dUaXAoKTsKICAgICAgICAgICAgdGhpcy5faW5pdFBsYXliYWNrUmF0ZSgpOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdfaW5pdFNob3dUaXAnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaW5pdFNob3dUaXAoKSB7CiAgICAgICAgICAgIF9ob29rZXIyLmRlZmF1bHQuaG9va1BsdWdpbkNvbnRyb2xzSW5pdChmdW5jdGlvbiAodGhhdCkgewogICAgICAgICAgICAgICAgdGhhdC5jb3JlLm9uKCdzaG93dGlwJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgdGhhdC5zZXRjb250cm9sdGlwLmFwcGx5KHRoYXQsIFt7IHN0cjogZXZlbnQuZGF0YSwgeDogdGhhdC5fcHJvY2Vzcy5vZmZzZXQoKS5sZWZ0LCB5OiAzLCBjdXQ6IHRydWUsIHRpbWVvdXQ6IHRydWUgfV0pOwogICAgICAgICAgICAgICAgICAgIGlmICh0aGF0LiRwbHVnaW4uaGFzQ2xhc3MoJ3Byb2Nlc3NfaGlkZGVuJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5fY29udHJvbHRpcHMuY3NzKCd0b3AnLCAnLTI1cHgnKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoYXQuJHBsdWdpbi5oYXNDbGFzcygnYm90dG9tLWhpZGUnKSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGF0Ll9jb250cm9sdGlwcy5jc3MoJ3RvcCcsICctMzhweCcpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnX2luaXRQbGF5YmFja1JhdGUnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaW5pdFBsYXliYWNrUmF0ZSgpIHsKICAgICAgICAgICAgX2hvb2tlcjIuZGVmYXVsdC5ob29rUGx1Z2luQ29udHJvbHMoZnVuY3Rpb24gKGV4cG9ydHMpIHsKICAgICAgICAgICAgICAgIGV4cG9ydHMucHJvdG90eXBlLmluaXRQbGF5YmFja1JhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNvcmUgPSB0aGlzLmNvcmU7CgogICAgICAgICAgICAgICAgICAgIHZhciByYXRlID0gcGFyc2VGbG9hdChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnUWl5aVBsYXllclBsYXliYWNrUmF0ZScpKTsKICAgICAgICAgICAgICAgICAgICByYXRlID0gaXNOYU4ocmF0ZSkgPyAxIDogcmF0ZTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvcmUuZ2V0Q3VyclN0YXR1cygpID09PSAncGxheWluZycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29yZS5zZXRQbGF5YmFja1JhdGUocmF0ZSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9uc3RhdHVzY2hhbmdlZCA9IGZ1bmN0aW9uIG9uc3RhdHVzY2hhbmdlZChldnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldnQuZGF0YS5zdGF0ZSA9PT0gJ3BsYXlpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZS5zZXRQbGF5YmFja1JhdGUocmF0ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZS51bignc3RhdHVzQ2hhbmdlZCcsIG9uc3RhdHVzY2hhbmdlZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGNvcmUub24oJ3N0YXR1c0NoYW5nZWQnLCBvbnN0YXR1c2NoYW5nZWQpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyICR1bCA9IHRoaXMuJHBsYXliYWNrcmF0ZVVsOwogICAgICAgICAgICAgICAgICAgICR1bC5maW5kKGBbZGF0YS1wYnJhdGU9IiR7cmF0ZX0iXWApLmFkZENsYXNzKCdzZWxlY3RlZCcpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgJGl0ZW1zID0gJHVsLmZpbmQoJ2xpJyk7CiAgICAgICAgICAgICAgICAgICAgJGl0ZW1zLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhdGUgPSBwYXJzZUZsb2F0KHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLXBicmF0ZScpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW1zLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdRaXlpUGxheWVyUGxheWJhY2tSYXRlJywgcmF0ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvcmUuc2V0UGxheWJhY2tSYXRlKHJhdGUpOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLiRwbGF5c2V0dGluZ2ljb24ub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmF0ZSA9IGNvcmUuZ2V0UGxheWJhY2tSYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkaXRlbSA9ICR1bC5maW5kKGBbZGF0YS1wYnJhdGU9IiR7cmF0ZX0iXWApOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGl0ZW0ubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISRpdGVtLmhhc0NsYXNzKCdzZWxlY3RlZCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW1zLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpdGVtLmFkZENsYXNzKCdzZWxlY3RlZCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW1zLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnX2FwcGx5JywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2FwcGx5KCkgewogICAgICAgICAgICBfaG9va2VyMi5kZWZhdWx0Lmhvb2tDb3JlKGZ1bmN0aW9uIChleHBvcnRzKSB7CiAgICAgICAgICAgICAgICB2YXIgcHJvdG8gPSBleHBvcnRzLnByb3RvdHlwZTsKCiAgICAgICAgICAgICAgICBwcm90by5fc2hvd1RpcCA9IGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZpcmUoeyB0eXBlOiAnc2hvd3RpcCcsIGRhdGE6IG1zZyB9KTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgcHJvdG8uZ2V0RlBTID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGlmIChfcGFyc2VkRGF0YS5mbHZJbmZvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcGFyc2VkRGF0YS5mbHZJbmZvLnZpZGVvQ29uZmlnVGFnLnNwcy5mcmFtZV9yYXRlLmZwczsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjU7IC8vIGY0duaegemAn+S7peS4iu+8jOWKqOeUuzIzLjk3NuOAgeeUteW9sTI044CB55S16KeG5YmnMjXjgIIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHByb3RvLnByZXZGcmFtZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdmlkZW8gPSB0aGlzLnZpZGVvKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNlZWtUaW1lID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odGhpcy5nZXREdXJhdGlvbigpLCB2aWRlby5jdXJyZW50VGltZSAtIDEgLyB0aGlzLmdldEZQUygpKSk7CiAgICAgICAgICAgICAgICAgICAgdmlkZW8uY3VycmVudFRpbWUgPSBzZWVrVGltZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9zaG93VGlwKCfkuIrkuIDluKcnKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgcHJvdG8ubmV4dEZyYW1lID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB2aWRlbyA9IHRoaXMudmlkZW8oKTsKICAgICAgICAgICAgICAgICAgICB2YXIgc2Vla1RpbWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbih0aGlzLmdldER1cmF0aW9uKCksIHZpZGVvLmN1cnJlbnRUaW1lICsgMSAvIHRoaXMuZ2V0RlBTKCkpKTsKICAgICAgICAgICAgICAgICAgICB2aWRlby5jdXJyZW50VGltZSA9IHNlZWtUaW1lOwogICAgICAgICAgICAgICAgICAgIHRoaXMuX3Nob3dUaXAoJ+S4i+S4gOW4pycpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBwcm90by5zZWVrID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBfZW5naW5lOwoKICAgICAgICAgICAgICAgICAgICB2YXIgdmlkZW8gPSB0aGlzLnZpZGVvKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXliYWNrUmF0ZSA9IHZpZGVvLnBsYXliYWNrUmF0ZTsKICAgICAgICAgICAgICAgICAgICAoX2VuZ2luZSA9IHRoaXMuX2VuZ2luZSkuc2Vlay5hcHBseShfZW5naW5lLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIHZpZGVvLnBsYXliYWNrUmF0ZSA9IHBsYXliYWNrUmF0ZTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgcHJvdG8uc3RlcFNlZWsgPSBmdW5jdGlvbiAoc3RlcFRpbWUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc2Vla1RpbWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbih0aGlzLmdldER1cmF0aW9uKCksIHRoaXMuZ2V0Q3VycmVudHRpbWUoKSArIHN0ZXBUaW1lKSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIG1zZyA9IHZvaWQgMDsKCiAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHN0ZXBUaW1lKSA8IDYwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1zZyA9IHN0ZXBUaW1lID4gMCA/IGDmraXov5vvvJoke3N0ZXBUaW1lfeenkmAgOiBg5q2l6YCA77yaJHtNYXRoLmFicyhzdGVwVGltZSl956eSYDsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBtc2cgPSBzdGVwVGltZSA+IDAgPyBg5q2l6L+b77yaJHtzdGVwVGltZSAvIDYwfeWIhumSn2AgOiBg5q2l6YCA77yaJHtNYXRoLmFicyhzdGVwVGltZSkgLyA2MH3liIbpkp9gOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLl9zaG93VGlwKG1zZyk7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VlayhzZWVrVGltZSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHByb3RvLnJhbmdlU2VlayA9IGZ1bmN0aW9uIChyYW5nZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHRoaXMuZ2V0RHVyYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICB2YXIgc2Vla1RpbWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihkdXJhdGlvbiwgZHVyYXRpb24gKiByYW5nZSkpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VlayhzZWVrVGltZSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2hvd1RpcCgn5a6a5L2N77yaJyArIChyYW5nZSAqIDEwMCkudG9GaXhlZCgwKSArICclJyk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHByb3RvLnRvZ2dsZU11dGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0TXV0ZWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldE11dGVkKGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2hvd1RpcCgn5Y+W5raI6Z2Z6Z+zJyk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRNdXRlZCh0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2hvd1RpcCgn6Z2Z6Z+zJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBwcm90by5hZGp1c3RWb2x1bWUgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdm9sdW1lID0gdGhpcy5nZXRWb2x1bWUoKSArIHZhbHVlOwogICAgICAgICAgICAgICAgICAgIHZvbHVtZSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHZvbHVtZS50b0ZpeGVkKDIpKSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRWb2x1bWUodm9sdW1lKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZpcmUoeyB0eXBlOiAna2V5dm9sdW1lY2hhbmdlJyB9KTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgcHJvdG8uZ2V0UGxheWJhY2tSYXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIC8vIGlxaXlpIOeahOi/meS4quaWueazleaciWJ1Z++8jOayoeaKiuWAvOi/lOWbnu+8gQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmUuZ2V0UGxheWJhY2tSYXRlKCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHByb3RvLmFkanVzdFBsYXliYWNrUmF0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBjdXJyUmF0ZSA9IHRoaXMuZ2V0UGxheWJhY2tSYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJhdGUgPSBNYXRoLm1heCgwLjIsIE1hdGgubWluKDUsIHBhcnNlRmxvYXQoKGN1cnJSYXRlICsgdmFsdWUpLnRvRml4ZWQoMSkpKSk7CgogICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdRaXlpUGxheWVyUGxheWJhY2tSYXRlJywgcmF0ZSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQbGF5YmFja1JhdGUocmF0ZSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2hvd1RpcChg5pKt5pS+6YCf546H77yaJHtyYXRlfWApOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBwcm90by50dXJuUGxheWJhY2tSYXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBjdXJyUmF0ZSA9IHRoaXMuZ2V0UGxheWJhY2tSYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJhdGUgPSB2b2lkIDA7CiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJSYXRlICE9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2JhY2tSYXRlID0gY3VyclJhdGU7CiAgICAgICAgICAgICAgICAgICAgICAgIHJhdGUgPSAxOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJhdGUgPSB0aGlzLl9iYWNrUmF0ZSB8fCAxOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQbGF5YmFja1JhdGUocmF0ZSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2hvd1RpcChg5pKt5pS+6YCf546H77yaJHtyYXRlfWApOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBwcm90by5oYXNQcmV2VmlkZW8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFZpZGVvSW5kZXhJbkxpc3QodGhpcy5fbW92aWVpbmZvLnR2aWQpID4gMCB8fCB0aGlzLl9nZXRWaWRlb0luZGV4SW5MaXN0KHRoaXMuX21vdmllaW5mby5vbGRUdmlkKSA+IDA7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHByb3RvLnBsYXlOZXh0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc05leHRWaWRlbygpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3Nob3dUaXAoJ+aSreaUvuS4i+S4gOmbhicpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN3aXRjaE5leHRWaWRlbygpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3Nob3dUaXAoJ+ayoeacieS4i+S4gOmbhuWTpicpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgcHJvdG8ucGxheVByZXYgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFzUHJldlZpZGVvKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2hvd1RpcCgn5pKt5pS+5LiK5LiA6ZuGJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoUHJlVmlkZW8oKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zaG93VGlwKCfmsqHmnInkuIrkuIDpm4blk6YnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIF9sb2dnZXIyLmRlZmF1bHQuaW5mbygnVGhlIGNvcmUgcGF0Y2ggaGFzIGJlZW4gaW5zdGFsbGVkJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH1dKTsKCiAgICByZXR1cm4gQ29yZVBhdGNoOwp9KFBhdGNoKTsKCnZhciBjb3JlUGF0Y2ggPSBuZXcgQ29yZVBhdGNoKCk7Cgp2YXIgS2V5U2hvcnRjdXRzUGF0Y2ggPSBmdW5jdGlvbiAoX1BhdGNoNikgewogICAgX2luaGVyaXRzKEtleVNob3J0Y3V0c1BhdGNoLCBfUGF0Y2g2KTsKCiAgICBmdW5jdGlvbiBLZXlTaG9ydGN1dHNQYXRjaCgpIHsKICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgS2V5U2hvcnRjdXRzUGF0Y2gpOwoKICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEtleVNob3J0Y3V0c1BhdGNoLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoS2V5U2hvcnRjdXRzUGF0Y2gpKS5jYWxsKHRoaXMpKTsKICAgIH0KCiAgICBfY3JlYXRlQ2xhc3MoS2V5U2hvcnRjdXRzUGF0Y2gsIFt7CiAgICAgICAga2V5OiAnX3ByZXBhcmUnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJlcGFyZSgpIHsKICAgICAgICAgICAgY29yZVBhdGNoLmluc3RhbGwoKTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnX2FwcGx5JywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2FwcGx5KCkgewogICAgICAgICAgICBfaG9va2VyMi5kZWZhdWx0Lmhvb2tQbHVnaW5Ib3RLZXlzKGZ1bmN0aW9uIChleHBvcnRzKSB7CiAgICAgICAgICAgICAgICB2YXIgcHJvdG8gPSBleHBvcnRzLnByb3RvdHlwZTsKCiAgICAgICAgICAgICAgICBwcm90by5pbml0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9rZXlkb3duLmJpbmQodGhpcykpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBwcm90by5faXNWYWxpZFRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0Lm5vZGVOYW1lID09PSAnQk9EWScgfHwgdGFyZ2V0Lm5vZGVOYW1lID09ICdWSURFTycgfHwgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHctdmlkZW8nKTsgLy8g5YWo5bGACiAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRhcmdldC5ub2RlTmFtZSA9PT0gJ1ZJREVPJyB8fCB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwdy12aWRlbycpOyAvLyDpnZ7lhajlsYAKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgcHJvdG8uX2tleWRvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2lzVmFsaWRUYXJnZXQoZXZlbnQudGFyZ2V0KSkgcmV0dXJuOwoKICAgICAgICAgICAgICAgICAgICB2YXIga2V5Q29kZSA9IGV2ZW50LmtleUNvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGN0cmxLZXkgPSBldmVudC5jdHJsS2V5LAogICAgICAgICAgICAgICAgICAgICAgICBzaGlmdEtleSA9IGV2ZW50LnNoaWZ0S2V5LAogICAgICAgICAgICAgICAgICAgICAgICBhbHRLZXkgPSBldmVudC5hbHRLZXk7CgogICAgICAgICAgICAgICAgICAgIHZhciBjb3JlID0gdGhpcy5jb3JlOwoKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGtleUNvZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNwYWNlYmFyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWN0cmxLZXkgJiYgIXNoaWZ0S2V5ICYmICFhbHRLZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29yZS5pc1BhdXNlZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmUucGxheSh0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZS5fc2hvd1RpcCgn5pKt5pS+Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZS5wYXVzZSh0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZS5fc2hvd1RpcCgn5pqC5YGcJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOTogLy8g4oaSIEFycm93IFJpZ2h0CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g4oaQIEFycm93IExlZnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RlcFRpbWUgPSB2b2lkIDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdHJsS2V5ICYmICFzaGlmdEtleSAmJiAhYWx0S2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXBUaW1lID0gMzkgPT09IGtleUNvZGUgPyA1IDogLTU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdHJsS2V5ICYmICFzaGlmdEtleSAmJiAhYWx0S2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXBUaW1lID0gMzkgPT09IGtleUNvZGUgPyAzMCA6IC0zMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFjdHJsS2V5ICYmIHNoaWZ0S2V5ICYmICFhbHRLZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcFRpbWUgPSAzOSA9PT0ga2V5Q29kZSA/IDYwIDogLTYwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3RybEtleSAmJiAhc2hpZnRLZXkgJiYgYWx0S2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXBUaW1lID0gMzkgPT09IGtleUNvZGUgPyAzZTIgOiAtM2UyOyAvLyA15YiG6ZKfCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZS5zdGVwU2VlayhzdGVwVGltZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzg6IC8vIOKGkSBBcnJvdyBVcAogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g4oaTIEFycm93IERvd24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3RybEtleSAmJiAhc2hpZnRLZXkgJiYgIWFsdEtleSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmUuYWRqdXN0Vm9sdW1lKDM4ID09PSBrZXlDb2RlID8gMC4wNSA6IC0wLjA1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWN0cmxLZXkgJiYgIXNoaWZ0S2V5ICYmICFhbHRLZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlLnRvZ2dsZU11dGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFbnRlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdHJsS2V5ICYmICFzaGlmdEtleSAmJiAhYWx0S2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Z1bGxzY3JlZW4uZnVsbHNjcmVlbi50b2dnbGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3RybEtleSAmJiAhc2hpZnRLZXkgJiYgIWFsdEtleSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF93ZWJGdWxsc2NyZWVuLndlYkZ1bGxzY3JlZW4udG9nZ2xlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY3OiAvLyBDCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBYCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWN0cmxLZXkgJiYgIXNoaWZ0S2V5ICYmICFhbHRLZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlLmFkanVzdFBsYXliYWNrUmF0ZSg2NyA9PT0ga2V5Q29kZSA/IDAuMSA6IC0wLjEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5MDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3RybEtleSAmJiAhc2hpZnRLZXkgJiYgIWFsdEtleSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmUudHVyblBsYXliYWNrUmF0ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2ODogLy8gRAogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDcwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdHJsS2V5ICYmICFzaGlmdEtleSAmJiAhYWx0S2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZS5wYXVzZSh0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5Q29kZSA9PT0gNjgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZS5wcmV2RnJhbWUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlLm5leHRGcmFtZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODA6IC8vIFAKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3ODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3RybEtleSAmJiBzaGlmdEtleSAmJiAhYWx0S2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleUNvZGUgPT09IDc4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmUucGxheU5leHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlLnBsYXlQcmV2KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVTQwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFldmVudC5jdHJsS2V5ICYmICFldmVudC5zaGlmdEtleSAmJiAhZXZlbnQuYWx0S2V5KSBfd2ViRnVsbHNjcmVlbi53ZWJGdWxsc2NyZWVuLmlzV2ViRnVsbFNjcmVlbigpICYmIF93ZWJGdWxsc2NyZWVuLndlYkZ1bGxzY3JlZW4uZXhpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleUNvZGUgPj0gNDggJiYga2V5Q29kZSA8PSA1NykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDAgfiA5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdHJsS2V5ICYmICFzaGlmdEtleSAmJiAhYWx0S2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmUucmFuZ2VTZWVrKChrZXlDb2RlIC0gNDgpICogMC4xKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBfbG9nZ2VyMi5kZWZhdWx0LmluZm8oJ1RoZSBrZXlib2FyZCBzaG9ydGN1dHMgcGF0Y2ggaGFzIGJlZW4gaW5zdGFsbGVkJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH1dKTsKCiAgICByZXR1cm4gS2V5U2hvcnRjdXRzUGF0Y2g7Cn0oUGF0Y2gpOwoKdmFyIE1vdXNlU2hvcnRjdXRzUGF0Y2ggPSBmdW5jdGlvbiAoX1BhdGNoNykgewogICAgX2luaGVyaXRzKE1vdXNlU2hvcnRjdXRzUGF0Y2gsIF9QYXRjaDcpOwoKICAgIGZ1bmN0aW9uIE1vdXNlU2hvcnRjdXRzUGF0Y2goKSB7CiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1vdXNlU2hvcnRjdXRzUGF0Y2gpOwoKICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE1vdXNlU2hvcnRjdXRzUGF0Y2guX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNb3VzZVNob3J0Y3V0c1BhdGNoKSkuY2FsbCh0aGlzKSk7CiAgICB9CgogICAgX2NyZWF0ZUNsYXNzKE1vdXNlU2hvcnRjdXRzUGF0Y2gsIFt7CiAgICAgICAga2V5OiAnX3ByZXBhcmUnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJlcGFyZSgpIHsKICAgICAgICAgICAgY29yZVBhdGNoLmluc3RhbGwoKTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnX2FwcGx5JywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2FwcGx5KCkgewogICAgICAgICAgICBfaG9va2VyMi5kZWZhdWx0Lmhvb2tEZWZhdWx0U2tpbihmdW5jdGlvbiAoZXhwb3J0cykgewogICAgICAgICAgICAgICAgZXhwb3J0cy5wcm90b3R5cGUuX2luaXREQkNsaWNrcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdGltZXIgPSB2b2lkIDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvcmUgPSB0aGlzLmNvcmU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb1dyYXBwZXIuZmluZCgndmlkZW8nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aW1lcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvcmUuaXNQYXVzZWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmUucGxheSh0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZS5wYXVzZSh0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwKTsKICAgICAgICAgICAgICAgICAgICB9KS5vbignZGJsY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5jdHJsS2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfd2ViRnVsbHNjcmVlbi53ZWJGdWxsc2NyZWVuLnRvZ2dsZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Z1bGxzY3JlZW4uZnVsbHNjcmVlbi50b2dnbGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLm9uKCd3aGVlbCcsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2Z1bGxzY3JlZW4uZnVsbHNjcmVlbi5pc0Z1bGxTY3JlZW4oKSB8fCBfd2ViRnVsbHNjcmVlbi53ZWJGdWxsc2NyZWVuLmlzV2ViRnVsbFNjcmVlbigpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBldmVudC53aGVlbERlbHRhIHx8IGV2ZW50LmRldGFpbCB8fCBldmVudC5kZWx0YVkgJiYgLWV2ZW50LmRlbHRhWTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmUuYWRqdXN0Vm9sdW1lKGRlbHRhID4gMCA/IDAuMDUgOiAtMC4wNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgX2xvZ2dlcjIuZGVmYXVsdC5pbmZvKCdUaGUgbW91c2Ugc2hvcnRjdXRzIHBhdGNoIGhhcyBiZWVuIGluc3RhbGxlZCcpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9XSk7CgogICAgcmV0dXJuIE1vdXNlU2hvcnRjdXRzUGF0Y2g7Cn0oUGF0Y2gpOwoKdmFyIFVzZVdlYlNvY2tldExvYWRlclBhdGNoID0gZnVuY3Rpb24gKF9QYXRjaDgpIHsKICAgIF9pbmhlcml0cyhVc2VXZWJTb2NrZXRMb2FkZXJQYXRjaCwgX1BhdGNoOCk7CgogICAgZnVuY3Rpb24gVXNlV2ViU29ja2V0TG9hZGVyUGF0Y2goKSB7CiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFVzZVdlYlNvY2tldExvYWRlclBhdGNoKTsKCiAgICAgICAgdmFyIF90aGlzOSA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChVc2VXZWJTb2NrZXRMb2FkZXJQYXRjaC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFVzZVdlYlNvY2tldExvYWRlclBhdGNoKSkuY2FsbCh0aGlzKSk7CgogICAgICAgIF90aGlzOS50cnlXcyA9IEdNX2dldFZhbHVlKCd0cnlXcycsIGZhbHNlKTsKICAgICAgICByZXR1cm4gX3RoaXM5OwogICAgfQoKICAgIF9jcmVhdGVDbGFzcyhVc2VXZWJTb2NrZXRMb2FkZXJQYXRjaCwgW3sKICAgICAgICBrZXk6ICdfcHJlcGFyZScsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9wcmVwYXJlKCkgewogICAgICAgICAgICB0aGlzLl9hZGRTZXR0aW5nKCk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ19hcHBseScsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hcHBseSgpIHsKICAgICAgICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICAgICAgICBfaG9va2VyMi5kZWZhdWx0Lmhvb2tGcmFnbWVudChmdW5jdGlvbiAoZXhwb3J0cykgewogICAgICAgICAgICAgICAgUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLnByb3RvdHlwZSwgJ3RyeVdTJywgewogICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMC5fdHJ5V3MgfHwgdGhhdC50cnlXczsKICAgICAgICAgICAgICAgICAgICB9LCAvLyBXaWxsIHVzZSB0aGUgV2ViU29ja2V0IGxvYWRlciBpZiB0aGUgdmFsdWUgb2YgdHJ5V3MgaXMgdHJ1ZS4KICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMC5fdHJ5V3MgPSB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICB9IC8vIFRoZSB2YWx1ZSBvZiB0cnlXcyB3aWxsIGJlIHRydWUgaWYgdGhlIEZldGNoIGxvYWRlciBmYWlscy4KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2xvZ2dlcjIuZGVmYXVsdC5pbmZvKCdUaGUgV2ViU29ja2V0IGxvYWRlciBwYXRjaCBoYXMgYmVlbiBpbnN0YWxsZWQnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ19hZGRTZXR0aW5nJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2FkZFNldHRpbmcoKSB7CiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgICAgICAgX2hvb2tlcjIuZGVmYXVsdC5ob29rUGx1Z2luQ29udHJvbHMoZnVuY3Rpb24gKGV4cG9ydHMpIHsKICAgICAgICAgICAgICAgIHZhciBpbml0U2V0dGluZyA9IGV4cG9ydHMucHJvdG90eXBlLmluaXRTZXR0aW5nOwogICAgICAgICAgICAgICAgZXhwb3J0cy5wcm90b3R5cGUuaW5pdFNldHRpbmcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwoKICAgICAgICAgICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZXRQb3BfaXRlbSIgZGF0YS1wbGF5ZXItaG9vaz0idXNld2Vic29ja2V0bG9hZGVyYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNldFBvcF9zd2l0Y2hUeHQiIGRhdGEtcGxheWVyLWhvb2s9ImNvbnRyb2xzX3VzZXdlYnNvY2tldGxvYWRlciI+V2ViU29ja2V0PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZXRQb3Bfc3dpdGNoIHNldFBvcF9zd2l0Y2hfY2xvc2UiIGRhdGEtcGxheWVyLWhvb2s9InVzZXdlYnNvY2tldGxvYWRlciI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGRpdi5xdWVyeVNlbGVjdG9yKCcuc2V0UG9wX2l0ZW0nKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRwbGF5c2V0dGluZ2JveC5maW5kKCcudmlkZW9fc2V0UG9wX3RvcCcpLmFwcGVuZChpdGVtKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiR1c2V3ZWJzb2NrZXRCdG4gPSB0aGlzLiRwbGF5c2V0dGluZ2JveC5maW5kKCdbZGF0YS1wbGF5ZXItaG9vaz0idXNld2Vic29ja2V0bG9hZGVyIl0nKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQudHJ5V3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdXNld2Vic29ja2V0QnRuLnJlbW92ZUNsYXNzKCdzZXRQb3Bfc3dpdGNoX2Nsb3NlJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHVzZXdlYnNvY2tldEJ0bi5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTEuJHVzZXdlYnNvY2tldEJ0bi50b2dnbGVDbGFzcygnc2V0UG9wX3N3aXRjaF9jbG9zZScpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnRyeVdzID0gIXRoYXQudHJ5V3M7CiAgICAgICAgICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCd0cnlXcycsIHRoYXQudHJ5V3MpOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBpbml0U2V0dGluZy5hcHBseSh0aGlzKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH1dKTsKCiAgICByZXR1cm4gVXNlV2ViU29ja2V0TG9hZGVyUGF0Y2g7Cn0oUGF0Y2gpOwoKdmFyIEtlZXBIb29raW5nUGF0Y2ggPSBmdW5jdGlvbiAoX1BhdGNoOSkgewogICAgX2luaGVyaXRzKEtlZXBIb29raW5nUGF0Y2gsIF9QYXRjaDkpOwoKICAgIGZ1bmN0aW9uIEtlZXBIb29raW5nUGF0Y2goKSB7CiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEtlZXBIb29raW5nUGF0Y2gpOwoKICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEtlZXBIb29raW5nUGF0Y2guX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihLZWVwSG9va2luZ1BhdGNoKSkuY2FsbCh0aGlzKSk7CiAgICB9CgogICAgX2NyZWF0ZUNsYXNzKEtlZXBIb29raW5nUGF0Y2gsIFt7CiAgICAgICAga2V5OiAnX2FwcGx5JywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2FwcGx5KCkgewogICAgICAgICAgICBfaG9va2VyMi5kZWZhdWx0LmtlZXBhbGl2ZSA9IHRydWU7CiAgICAgICAgICAgIF9sb2dnZXIyLmRlZmF1bHQuaW5mbygnVGhlIGtlZXAgaG9va2luZyBwYXRjaCBoYXMgYmVlbiBpbnN0YWxsZWQnKTsKICAgICAgICB9CiAgICB9XSk7CgogICAgcmV0dXJuIEtlZXBIb29raW5nUGF0Y2g7Cn0oUGF0Y2gpOwoKdmFyIHZpcFBhdGNoID0gZXhwb3J0cy52aXBQYXRjaCA9IG5ldyBWaXBQYXRjaCgpOwp2YXIgYWRzUGF0Y2ggPSBleHBvcnRzLmFkc1BhdGNoID0gbmV3IEFkc1BhdGNoKCk7CnZhciBjb250cm9sc1BhdGNoID0gZXhwb3J0cy5jb250cm9sc1BhdGNoID0gbmV3IENvbnRyb2xzUGF0Y2goKTsKdmFyIHdhdGVybWFya3NQYXRjaCA9IGV4cG9ydHMud2F0ZXJtYXJrc1BhdGNoID0gbmV3IFdhdGVybWFya3NQYXRjaCgpOwp2YXIga2VlcEhvb2tpbmdQYXRjaCA9IGV4cG9ydHMua2VlcEhvb2tpbmdQYXRjaCA9IG5ldyBLZWVwSG9va2luZ1BhdGNoKCk7CnZhciBrZXlTaG9ydGN1dHNQYXRjaCA9IGV4cG9ydHMua2V5U2hvcnRjdXRzUGF0Y2ggPSBuZXcgS2V5U2hvcnRjdXRzUGF0Y2goKTsKdmFyIG1vdXNlU2hvcnRjdXRzUGF0Y2ggPSBleHBvcnRzLm1vdXNlU2hvcnRjdXRzUGF0Y2ggPSBuZXcgTW91c2VTaG9ydGN1dHNQYXRjaCgpOwp2YXIgdXNlV2ViU29ja2V0TG9hZGVyUGF0Y2ggPSBleHBvcnRzLnVzZVdlYlNvY2tldExvYWRlclBhdGNoID0gbmV3IFVzZVdlYlNvY2tldExvYWRlclBhdGNoKCk7CgovKioqLyB9KSwKLyogMTMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5mdWxsc2NyZWVuID0gdW5kZWZpbmVkOwoKdmFyIF9ob29rZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9ob29rZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaG9va2VyKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9Cgp2YXIgZnVsbHNjcmVlbiA9IHZvaWQgMDsKX2hvb2tlcjIuZGVmYXVsdC5ob29rRnVsbFNjcmVlbihmdW5jdGlvbiAoX2V4cG9ydHMpIHsKICByZXR1cm4gZXhwb3J0cy5mdWxsc2NyZWVuID0gZnVsbHNjcmVlbiA9IF9leHBvcnRzOwp9KTsKCmV4cG9ydHMuZnVsbHNjcmVlbiA9IGZ1bGxzY3JlZW47CgovKioqLyB9KSwKLyogMTQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy53ZWJGdWxsc2NyZWVuID0gdW5kZWZpbmVkOwoKdmFyIF9ob29rZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9ob29rZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaG9va2VyKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9Cgp2YXIgd2ViRnVsbHNjcmVlbiA9IHZvaWQgMDsKX2hvb2tlcjIuZGVmYXVsdC5ob29rV2ViRnVsbFNjcmVlbihmdW5jdGlvbiAoX2V4cG9ydHMpIHsKICByZXR1cm4gZXhwb3J0cy53ZWJGdWxsc2NyZWVuID0gd2ViRnVsbHNjcmVlbiA9IF9leHBvcnRzOwp9KTsKCmV4cG9ydHMud2ViRnVsbHNjcmVlbiA9IHdlYkZ1bGxzY3JlZW47CgovKioqLyB9KSwKLyogMTUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5mbHZJbmZvID0gdW5kZWZpbmVkOwoKdmFyIF9ob29rZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9ob29rZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaG9va2VyKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9Cgp2YXIgZmx2SW5mbyA9IHZvaWQgMDsKX2hvb2tlcjIuZGVmYXVsdC5ob29rUGFyc2VEYXRhKGZ1bmN0aW9uICh0aGF0KSB7CiAgcmV0dXJuIGV4cG9ydHMuZmx2SW5mbyA9IGZsdkluZm8gPSB0aGF0LmZsdkluZm87Cn0pOwoKZXhwb3J0cy5mbHZJbmZvID0gZmx2SW5mbzsKCi8qKiovIH0pCi8qKioqKiovIF0pOw=="},{"name":"TU-破解视频VIP集合-去广告-音乐直接解析播放-VIP视频解析，接口每日更新，一键免广告免费观看各大视频网站","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":["*//www.iqiyi.com/v_*","*//www.iqiyi.com/w_*","*//v.youku.com/v_show/*","*//*.le.com/ptv/vplay/*","*//v.qq.com/x/page/*","*//v.qq.com/x/cover/*","*//video.tudou.com/v/*","*//*.mgtv.com/b/*","*//tv.sohu.com/v/*","*//film.sohu.com/album/*","*//*.bilibili.com/bangumi/play/*","*//*.pptv.com/show/*","*//v.yinyuetai.com/video/*","*//*.wasu.cn/Play/show/*","*//vip.1905.com/play/*","*//51lol.feixiong.tv/*","*//www.lolfun.cn/*","*//www.lolshipin.com/*","*//lol.qq.com/v/detail*","*//lol.qq.com/v/v2/detail*","*//item.taobao.com/item.htm*","*//detail.tmall.com/item.htm*","*//s.taobao.com/search*","*//cart.taobao.com/*","*//uland.taobao.com/coupon/*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-start","orig_noframes":null}},"storage":{"data":{},"ts":1587235898640},"enabled":false,"position":8,"file_url":"https://greasyfork.org/scripts/371262-tu-%E7%A0%B4%E8%A7%A3%E8%A7%86%E9%A2%91vip%E9%9B%86%E5%90%88-%E5%8E%BB%E5%B9%BF%E5%91%8A-%E9%9F%B3%E4%B9%90%E7%9B%B4%E6%8E%A5%E8%A7%A3%E6%9E%90%E6%92%AD%E6%94%BE/code/TU-%E7%A0%B4%E8%A7%A3%E8%A7%86%E9%A2%91VIP%E9%9B%86%E5%90%88-%E5%8E%BB%E5%B9%BF%E5%91%8A-%E9%9F%B3%E4%B9%90%E7%9B%B4%E6%8E%A5%E8%A7%A3%E6%9E%90%E6%92%AD%E6%94%BE.user.js","uuid":"79be958d-1075-4008-ad25-048a482eebdb","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICBUVS3noLTop6Pop4bpopFWSVDpm4blkIgt5Y675bm/5ZGKLemfs+S5kOebtOaOpeino+aekOaSreaUvi1WSVDop4bpopHop6PmnpDvvIzmjqXlj6Pmr4/ml6Xmm7TmlrDvvIzkuIDplK7lhY3lub/lkYrlhY3otLnop4LnnIvlkITlpKfop4bpopHnvZHnq5kKLy8gQGRlc2NyaXB0aW9uICAgICBWSVDop4bpopHnoLTop6Ppm4blkIjvvJvmlK/mjIHjgJDniLHlpYfoibrvvIzkvJjphbfop4bpopHvvIzkuZDop4ZUVu+8jOiFvuiur+inhumike+8jOWcn+ixhuinhumike+8jOaQnOeLkOinhumike+8jOWTlOWTqeWTlOWTqe+8jOmfs+aCpuWPsO+8jFBQVFbvvIzljY7mlbBUVuOAke+8m+enu+mZpOmDqOWIhuW5suaJsOW5v+WRiuOAguOAkOWPjOWNgeS4gOOAkeaWsOWinueyvumAieaOpeWPo++8jOino+aekOmAn+W6pumjnuW/q++8jOaUr+aMgeabtOWkmue9keerme+8jOWPr+S+m+mAieaLqeeahOabtOWkmuOAguWQhOenjVZJUOiKgueCueaSreaUvu+8jOW5tuS4lOiHquWKqOino+aekOS9v+eUqOWvueW6lOeahOaSreaUvuiKgueCue+8jOabtOW/q+eahOaSreaUvumAn+W6pu+8jOabtOeos+WumueahOaSreaUvuaViOaenOOAguaUr+aMgVtUYW1wZXJtb25rZXkgfCBWaW9sZW50bW9ua2V5IHwgR3JlYXN5bW9ua2V5XeOAgui0reeJqeS8mOaDoOS/oeaBr+iOt+WPlgovLyBAaWNvbiAgICAgICAgICAgIGh0dHA6Ly93dzEuc2luYWltZy5jbi9sYXJnZS82YTE1NTc5NGx5MWZ1YmI4ZHk0cHpqMjA1azA1a2RnMy5qcGcKLy8gQGF1dGhvciAgICAgICAgICBBQwovLyBAY3JlYXRlICAgICAgICAgIDIwMTgtMDgtMTYKLy8gQHJ1bi1hdCAgICAgICAgICBkb2N1bWVudC1zdGFydAovLyBAdmVyc2lvbiAgICAgICAgIDMuNzcKLy8gQGluY2x1ZGUgICAgICAgICAqLy93d3cuaXFpeWkuY29tL3ZfKgovLyBAaW5jbHVkZSAgICAgICAgICovL3d3dy5pcWl5aS5jb20vd18qCi8vIEBpbmNsdWRlICAgICAgICAgKi8vdi55b3VrdS5jb20vdl9zaG93LyoKLy8gQGluY2x1ZGUgICAgICAgICAqLy8qLmxlLmNvbS9wdHYvdnBsYXkvKgovLyBAaW5jbHVkZSAgICAgICAgICovL3YucXEuY29tL3gvcGFnZS8qCi8vIEBpbmNsdWRlICAgICAgICAgKi8vdi5xcS5jb20veC9jb3Zlci8qCi8vIEBpbmNsdWRlICAgICAgICAgKi8vdmlkZW8udHVkb3UuY29tL3YvKgovLyBAaW5jbHVkZSAgICAgICAgICovLyoubWd0di5jb20vYi8qCi8vIEBpbmNsdWRlICAgICAgICAgKi8vdHYuc29odS5jb20vdi8qCi8vIEBpbmNsdWRlICAgICAgICAgKi8vZmlsbS5zb2h1LmNvbS9hbGJ1bS8qCi8vIEBpbmNsdWRlICAgICAgICAgKi8vKi5iaWxpYmlsaS5jb20vYmFuZ3VtaS9wbGF5LyoKLy8gQGluY2x1ZGUgICAgICAgICAqLy8qLnBwdHYuY29tL3Nob3cvKgovLyBAaW5jbHVkZSAgICAgICAgICovL3YueWlueXVldGFpLmNvbS92aWRlby8qCi8vIEBpbmNsdWRlICAgICAgICAgKi8vKi53YXN1LmNuL1BsYXkvc2hvdy8qCi8vIEBpbmNsdWRlICAgICAgICAgKi8vdmlwLjE5MDUuY29tL3BsYXkvKgovLyBAaW5jbHVkZSAgICAgICAgICovLzUxbG9sLmZlaXhpb25nLnR2LyoKLy8gQGluY2x1ZGUgICAgICAgICAqLy93d3cubG9sZnVuLmNuLyoKLy8gQGluY2x1ZGUgICAgICAgICAqLy93d3cubG9sc2hpcGluLmNvbS8qCi8vIEBpbmNsdWRlICAgICAgICAgKi8vbG9sLnFxLmNvbS92L2RldGFpbCoKLy8gQGluY2x1ZGUgICAgICAgICAqLy9sb2wucXEuY29tL3YvdjIvZGV0YWlsKgovLyBAbmFtZXNwYWNlICAgICAgIFRVSklEVQovLyBAaW5jbHVkZSAgICAgICAgICovL2l0ZW0udGFvYmFvLmNvbS9pdGVtLmh0bSoKLy8gQGluY2x1ZGUgICAgICAgICAqLy9kZXRhaWwudG1hbGwuY29tL2l0ZW0uaHRtKgovLyBAaW5jbHVkZSAgICAgICAgICovL3MudGFvYmFvLmNvbS9zZWFyY2gqCi8vIEBpbmNsdWRlICAgICAgICAgKi8vY2FydC50YW9iYW8uY29tLyoKLy8gQGluY2x1ZGUgICAgICAgICAqLy91bGFuZC50YW9iYW8uY29tL2NvdXBvbi8qCi8vIEBjb25uZWN0ICAgICAgICAgb3Blbi5sZXNpY2x1Yi5jbgovLyBAbGljZW5zZSAgICAgICAgIEdQTC0zLjAtb25seQovLyBAZ3JhbnQgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0Ci8vIEBzdXBwb3J0VVJMICAgICAgaHR0cHM6Ly9xbS5xcS5jb20vY2dpLWJpbi9xbS9xcj9rPWZPZzhpajZUdXdPQWZTOGcxNkdSWU5mNVlZRnU1Q3J3Jmp1bXBfZnJvbT0mYXV0aD0tbDA1cGFhc3JQZTV6aWd0NWFoZHpuX2R6WGlCMWpKXwovLyBAZmVlZGJhY2stdXJsICAgIGh0dHBzOi8vcW0ucXEuY29tL2NnaS1iaW4vcW0vcXI/az1mT2c4aWo2VHV3T0FmUzhnMTZHUllOZjVZWUZ1NUNydyZqdW1wX2Zyb209JmF1dGg9LWwwNXBhYXNyUGU1emlndDVhaGR6bl9kelhpQjFqSl8KLy8gQGNvcHlyaWdodCAgICAgICAyMDE4LCBBQwovLyBAbGFzdG1vZGlmaWVkICAgIDIwMTkuMTEuMTQKLy8gQG5vdGUgICAgICAgICAgICAyMDE5LjExLjE0IOabtOaWsC3kv67lpI3ml6Dms5XlhajlsY/nmoRidWfvvIzliqDlv6vnvZHnq5nmiZPlvIDpgJ/luqYKLy8gQG5vdGUgICAgICAgICAgICAyMDE5LjExLjA5IOWGjeasoeWIh+aNoumVnOWDj++8jOi/measoeW6lOivpeiDveaJk+W8gOS6hgovLyBAbm90ZSAgICAgICAgICAgIDIwMTkuMTEuMDMg5pu05paw5YiH5o2i6ZWc5YOP5Zyw5Z2ACi8vIEBub3RlICAgICAgICAgICAgMjAxOS4xMC4yMiDkv67mlLnot7PovazlnLDlnYAKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjA4LjIyIOaWsOWinuWlveWHoOS4quiKgueCue+8jOW5tuS4lOaatOmcsuWHunVybOWcsOWdgO+8jOaWueS+v+WcqOaJi+acuuS4iuingueci+inhumikQovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDguMTYg56ys5LiA54mI5paw5aKe5pSv5oyB54ix5aWH6Im677yM5LyY6YW36KeG6aKR77yM5LmQ6KeGVFbvvIzohb7orq/op4bpopHvvIzlnJ/osYbop4bpopHvvIzmkJzni5Dop4bpopHvvIzlk5Tlk6nlk5Tlk6nvvIzpn7Pmgqblj7DvvIxQUFRW77yM5Y2O5pWwVFYKLy8gQHJlcXVpcmUgICAgICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3NjcmlwdHMvMzQ2MDYtYWMtJUU3JThCJUFDJUU1JUFFJUI2LSVFNiVCNyU5OCVFNSVBRSU5RCVFNSVBNCVBOSVFNyU4QyVBQiVFNCVCQyU5OCVFNiU4MyVBMCVFNSU4OCVCOCVFNiU5RiVBNSVFOCVBRiVBMiVFOSVBMiU4NiVFNSU4RiU5Ni0lRTUlQTQlQTclRTklQTIlOUQlRTQlQkMlOTglRTYlODMlQTAlRTUlODglQjgtMTAwJUU1JTg1JTgzJUU4JUI0JUFEJUU3JTg5JUE5JUU3JUE1JTlFJUU1JTg4JUI4LSVFNyU5QyU4MSVFOSU5MiVCMSVFOCVCNCVBRCVFNyU4OSVBOS0lRTklQTIlODYlRTUlODglQjglRTglQjQlQUQlRTQlQjklQjAlRTYlOUIlQjQlRTQlQkMlOTglRTYlODMlQTAtJUU1JUI5JUIzJUU1JTlEJTg3JUU0JUJDJTk4JUU2JTgzJUEwMjAvY29kZS9BQy0lRTclOEIlQUMlRTUlQUUlQjYtJUU2JUI3JTk4JUU1JUFFJTlEJUU1JUE0JUE5JUU3JThDJUFCJUU0JUJDJTk4JUU2JTgzJUEwJUU1JTg4JUI4JUU2JTlGJUE1JUU4JUFGJUEyJUU5JUEyJTg2JUU1JThGJTk2LCVFNSVBNCVBNyVFOSVBMiU5RCVFNCVCQyU5OCVFNiU4MyVBMCVFNSU4OCVCOCwlRTMlODAlOTAxMDAlRTUlODUlODMlRTglQjQlQUQlRTclODklQTklRTclQTUlOUUlRTUlODglQjglRTMlODAlOTEsJUU3JTlDJTgxJUU5JTkyJUIxJUU4JUI0JUFEJUU3JTg5JUE5LCVFOSVBMiU4NiVFNSU4OCVCOCVFOCVCNCVBRCVFNCVCOSVCMCVFNiU5QiVCNCVFNCVCQyU5OCVFNiU4MyVBMCwlRTUlQjklQjMlRTUlOUQlODclRTQlQkMlOTglRTYlODMlQTAyMCUyNS51c2VyLmpzCi8vID09L1VzZXJTY3JpcHQ9PQooZnVuY3Rpb24oKXsKCXZhciBtQ3VyU2l0ZSA9IG51bGw7Cgl2YXIgaXNEZWJ1ZyA9IGZhbHNlOwoJdmFyIGRlYnVnWCA9IGlzRGVidWc/Y29uc29sZS5sb2cuYmluZChjb25zb2xlKTpmdW5jdGlvbigpe307Cgl2YXIgQ29uZmlnID0gewoJCWlxaXlpOnsKCQkJLy8g54ix5aWH6Im66KeG6aKRIGh0dHBzOi8vd3d3LmlxaXlpLmNvbS92XzE5cnJmcTVhamsuaHRtbAoJCQkvLyBpbnNlcnRUbyA9IOaPkuWFpeWcqHh46IqC54K5CgkJCS8vIGFkU3R5bGUg6Ieq5a6a5LmJ5a6M5pW05qC35byPLeeUqOS6juenu+mZpOW5v+WRigoJCQkvLyBzU3R5bGUg5oyJ6ZKu5qC35byP5a6a5LmJCgkJCS8vIHRpdGxlIOagh+mimOaWh+Wtl+WGheWuueiOt+WPlgoJCQlpbnNlcnRUbzoiLm1vZC1wbGF5LXRpdCwgLnRpdGxlLXNjb3JlLCAuc2lkZS1jb250ZW50Pi5xeS1wbGF5LWxpc3QgLm1haW4tdGl0bGUsIC5wdWJsaWMtdmlwIC5wdWJsaWMtdmlwLXRleHQsLnF5LXBsYXllci1kZXRhaWwgLnF5LXBsYXllci10aXRsZSIsCgkJCWFkU3R5bGU6Ii5wdy12aWRlbz5kaXZbZGF0YS1jdXBpZF0+ZGl2W3N0eWxlKj0ncG9zaXRpb24nXXtkaXNwbGF5Om5vbmUgIWltcG9ydGFudH0iLAoJCQlzU3R5bGU6IndpZHRoOiA0cmVtOyIsCgkJCXRpdGxlOiIuZGV0YWlsLWxlZnQgI3dpZGdldC12aWRlb3RpdGxlIiwKCQl9LAoJCXlvdWt1OnsKCQkJLy8g5LyY6YW36KeG6aKRIGh0dHBzOi8vdi55b3VrdS5jb20vdl9zaG93L2lkX1hNemMyT0RBMU9UUXdOQT09Lmh0bWw/c3BtPWEyaHd3LjExMzU5OTUxLm1fMjY2NjVfY18zMjA2OS41fjUhM341ITJ+NX41fkEKCQkJLy8g5Y+v55SoICAgICBodHRwczovL3YueW91a3UuY29tL3Zfc2hvdy9pZF9YTXpjNE1qRXpNamcwTkE9PS5odG1sCgkJCWluc2VydFRvOiIudGl0bGUtd3JhcD5oMSwgLnR2aW5mbz5oMiwgLnZpcF9pbmZvIC52aXBfbGltaXRfdGl0bGUiLAoJCQlhZFN0eWxlOiIiLAoJCQlzU3R5bGU6IiIsCgkJCXRpdGxlOiIucGxheWVyLXRpdGxlIC50aXRsZS13cmFwPmgxPnNwYW46bnRoLWNoaWxkKDEpIiwKCQl9LAoJCWxlOnsKCQkJLy8g5LmQ6KeGVFYgaHR0cDovL3d3dy5sZS5jb20vcHR2L3ZwbGF5LzI4NjM2OTUxLmh0bWwKCQkJaW5zZXJ0VG86Ii5icmllZkludHJvX3RpdCwgLmNvbHVtbl9ib2R5Pi52aXBfdGl0LCAjbGVfcGxheWJveCAucGxheWJveF92aXBfdGlwPmgzIiwKCQkJYWRTdHlsZToiLmxheW91dF9wbGF5IGlmcmFtZXtkaXNwbGF5Om5vbmU7fSIsCgkJCXNTdHlsZToidmVydGljYWwtYWxpZ246IGJvdHRvbTsiLAoJCQl0aXRsZToiLmJyaWVmSW50cm9fYm94IC5icmllZkludHJvX3RpdD5hIiwKCQl9LAoJCXZfcXE6ewoJCQkvLyDohb7orq/op4bpopEgaHR0cHM6Ly92LnFxLmNvbS94L2NvdmVyL2F1NzU3eDRhY2RrNmplYS5odG1sCgkJCS8vIGh0dHBzOi8vdi5xcS5jb20veC9wYWdlL3EwMzkwdHowZDJvLmh0bWwKCQkJaW5zZXJ0VG86Ii5tb2RfaW50cm8+LnZpZGVvX2Jhc2UsIC5zY3JvbGxfdG9wIC5wbGF5ZXJfdGl0bGUsIC50dmlwX29wZW5fd3JhcCAudHZpcF9vcGVuX2xmPi50dmlwX29wZW5fYnRuIiwKCQkJYWRTdHlsZToiIiwKCQkJc1N0eWxlOiJoZWlnaHQ6IDM2cHg7bGluZS1oZWlnaHQ6IDM2cHg7bWFyZ2luOiAwcHggNXB4O2ZvbnQtc2l6ZTogMjRweDt3aWR0aDogNnJlbTsiLAoJCQl0aXRsZToiLnBsYXllcl9oZWFkbGluZSAuX3ZpZGVvX3RpdGxlIiwKCQl9LAoJCXR1ZG91OnsgLy8tLS3lnLDlnYBtYXRjaOS5n+acieW+heajgOafpQoJCQkvLyDlnJ/osYbop4bpopEgaHR0cDovL3ZpZGVvLnR1ZG91LmNvbS92L1hNell4TXpNeU1ESXpNZz09Lmh0bWwKCQkJLy8gVE9ETyDpmZDliLblj4LmlbDor7fmsYLlv4XpobvmmK/vvJpodHRwOi8veXVuLmJhaXl1Zy5jbi92aXAvaW5kZXgucGhwP3VybD1odHRwOi8vdmlkZW8udHVkb3UuY29tL3YvWE16WXhNek15TURJek1nPT0g5LiN6IO95bim5Yir55qE5Y+C5pWwCgkJCWluc2VydFRvOiIubGVmdC1zaWRlIC50ZC1wbGF5YmFzZSAudGQtcGxheWJhc2VfX3RpdGxlLCAudGQtbGlzdGJveF9fYiAudGQtbGlzdGJveF9fbGlzdDpudGgtY2hpbGQoMSkgLnRkLXZpZGVvX19tZXRhX190aXRsZSIsCgkJCWFkU3R5bGU6IiIsCgkJCXNTdHlsZToid2lkdGg6dW5zZXQ7Y29sb3I6IHJlZCAhaW1wb3J0YW50O2ZvbnQtc2l6ZTp1bnNldDsiLAoJCQl0aXRsZToiLnRkLXBsYXliYXNlICNzdWJ0aXRsZSIsCgkJfSwKCQltZ3R2OnsKCQkJLy8g6IqS5p6cVFYgaHR0cHM6Ly93d3cubWd0di5jb20vYi8zMTg5NDUvNDQ3MDYzNi5odG1sCgkJCWluc2VydFRvOiIudi1wYW5lbC10aXRsZSwgLmMtcGxheWVyLWFzaWRlLWZpbG1kbCAudHh0IC50aWxuYW1lIiwKCQkJYWRTdHlsZToiIiwKCQkJc1N0eWxlOiJ3aWR0aDogdW5zZXQ7Zm9udC1zaXplOnVuc2V0O2hlaWdodDp1bnNldDtsaW5lLWhlaWdodDp1bnNldDsiLAoJCQl0aXRsZToiLnYtcGFuZWwtaW5mbyAucm91dGUtdGlsIiwKCQl9LAoJCXNvaHU6ewoJCQkvLyDmkJzni5Dop4bpopEgaHR0cHM6Ly90di5zb2h1LmNvbS92L01qQXhPREE0TURJdmJqWXdNRFUzTnpVME5TNXphSFJ0YkE9PS5odG1sCgkJCS8vIGh0dHBzOi8vZmlsbS5zb2h1LmNvbS9hbGJ1bS85MzM3MDAyLmh0bWw/Y2hhbm5lbGVkPTEyMDAwMzAwMDIgLS0tLSDmlrDlop7mlK/mjIEKCQkJaW5zZXJ0VG86Ii52aWRlb0JveCAudkJveC1kZXNrdG9wLCAucGxheWVyQm94IC5qdWppX3RpcHM+aDQsICNwbGF5ZXJfdmlwVGlwcyAudmlwVGlwc0luPi5wMSwgLnBsYXllcl93cmFwIC5wbGF5ZXItdG9wLWluZm8gLnBsYXllci10b3AtaW5mby1uYW1lLCAuZGV0YWlsSW5mb19ib3g+cDpudGgtY2hpbGQoMSkiLAoJCQlhZFN0eWxlOiIjY3J1bWJzQmFyIC5hZHtkaXNwbGF5Om5vbmV9LmFyZWE+LmxlZnQ+LmFkdntkaXNwbGF5Om5vbmV9IiwKCQkJc1N0eWxlOiIiLAoJCQl0aXRsZToiI2NydW1ic0JhciAuY3J1bWJzIGE6bGFzdCIsCgkJfSwKCQliaWxpYmlsaTp7CgkJCS8vIOWTlOWTqeWTlOWTqSDlj6/og73ov5jmnInlhbbku5bnmoTop4bpopHlnLDlnYAKCQkJLy8gaHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL2Jhbmd1bWkvcGxheS9lcDIzMjQxMgoJCQlpbnNlcnRUbzoiLmhlYWRlci1pbmZvIC5jb3VudC13cmFwcGVyLCAjYmFuZ3VtaV9wbGF5ZXIgLmxpbWl0LXZpcC13cmFwIC5wd2UtcG9wdXAtcGF5IiwKCQkJYWRTdHlsZToiIiwKCQkJc1N0eWxlOiJ3aWR0aDogNnJlbTttYXJnaW4tdG9wOiAtMC41cmVtO21hcmdpbi1sZWZ0OiAycmVtOyIsCgkJCXRpdGxlOiIjYmFuZ3VtaV9kZXRhaWwgLmluZm8tdGl0bGUgaDIiLAoJCX0sCgkJcHB0djp7CgkJCS8vIFBQVFYgaHR0cDovL3YucHB0di5jb20vc2hvdy9kMkE5dWlhS0lpYkRhWkYzOC5odG1sP3NwbT12aXBfaW5kZXhfd2ViLnZpcF9kNTg4NTVlYjUwNmU2Yzg5ZjdlZWI0MzRlMDk1NWM0MS4wLjAuMAoJCQlpbnNlcnRUbzoiLnBsYXllci1zaWRlYmFyIC50aXRoaWRlIGxpOm50aC1jaGlsZCgxKT5hLCAjbWFpbkNvbnRlbnQgLmNmIHVsLmZsIiwKCQkJYWRTdHlsZToiIiwKCQkJc1N0eWxlOiJtYXJnaW4tdG9wOiAwLjVyZW07IiwKCQkJdGl0bGU6Ii5tb2JpbGVsb29rLXBvcC13cmFwIC50di1uYW1lIiwKCQl9LAoJCXlpbnl1ZXRhaTp7CgkJCS8vIOmfs+aCpuWPsCBodHRwOi8vdi55aW55dWV0YWkuY29tL3ZpZGVvLzMyNzEwNTYKCQkJLy8gaHR0cDovL3YueWlueXVldGFpLmNvbS9wbGF5bGlzdC8yNjU1MjAgICAgICAgIC0tLS0g5LiN5pSv5oyB6L+Z5Liq5Zyw5Z2ACgkJCWluc2VydFRvOiIudmlkZW9Cb3ggLnZpZGVvX2luZm8gLnZpZGVvTmFtZSIsCgkJCWFkU3R5bGU6IiIsCgkJCXNTdHlsZToiIiwKCQkJdGl0bGU6Ii52aWRlb05hbWU6Zmlyc3QiLCAvLyBzcGxpdCgiICAgICIpCgkJfSwKCQl3YXN1OnsKCQkJLy8g5Y2O5pWwVFYgaHR0cHM6Ly93d3cud2FzdS5jbi9QbGF5L3Nob3cvaWQvOTU2NzcxMAoJCQlpbnNlcnRUbzoiLmNvbnRhaW5lciAucGxheV9zaXRlIGgzLCAucGxheV92aWRlb19iICNwbGF5X3ZvZF9oaXRzIiwKCQkJYWRTdHlsZToiLmNvbnRhaW5lciBkaXZbY2xhc3MqPSdwbGF5X2Fkcydde2Rpc3BsYXk6bm9uZX0jTVpBRF9QT1BfUExBQ0VIT0xERVIsLmFkX2xpc3R7ZGlzcGxheTpub25lICFpbXBvcnRhbnR9IiwKCQkJc1N0eWxlOiIiLAoJCQl0aXRsZToiLnBsYXlfbW92aWUgLnBsYXlfdmlkZW9fdCAucGxheWVyX2luZm9fbTpmaXJzdCBwIGEiLAoJCX0sCgkJMTkwNTp7CgkJCS8vIDE5MDUgaHR0cHM6Ly93d3cud2FzdS5jbi9QbGF5L3Nob3cvaWQvOTU2NzcxMAoJCQlpbnNlcnRUbzoiLnNjLXBheS13cmFwcGVyPi5zYy1wYXktYnV0dG9uLXdyYXBwZXIsIC5wYWdlX3BsYXk+LnBsYXllci1uYXYsICNwU2lkZWJhciAubW92aWUtdGl0bGUsICNwU2lkZWJhciAucGF5LW1vZC1ub3Rsb2dpbiAudmlwLWxvZ2xvZ2xvZyIsCgkJCWFkU3R5bGU6IiIsCgkJCXNTdHlsZToid2lkdGg6IDUuMXJlbTsiLAoJCQl0aXRsZToiLnBsYXllci1uYXYgLm5hdi10aXRsZSIsCgkJfSwKCQlmZWl4aW9uZzp7CgkJCS8vIOmjnueGiuinhumikSBodHRwOi8vNTFsb2wuZmVpeGlvbmcudHYvVmlkZW8vcGxheS9pZC8zNDI3CgkJCWluc2VydFRvOiIuYnJlYWRjcnVtYiAuYWN0aXZlIGEsICNnX25ld3NJbmZvTGVmdCAjbV92aWRlb0luZm8gcCIsCgkJCWFkU3R5bGU6IiIsCgkJCXNTdHlsZToid2lkdGg6IDYuMnJlbTtwb3NpdGlvbjogdW5zZXQ7IiwKCQkJdGl0bGU6Ii5icmVhZGNydW1iIC5hY3RpdmUgYSBzcGFuIiwKCQkJc291cmNlOiJxcSIsCgkJfSwKCQlsb2xmdW46ewoJCQkvLyDmmrTpvpnnlLXnq54gaHR0cDovL3d3dy5sb2xmdW4uY24vdmlkZW8vdmlkZW8uaHRtbD9pZD0zMjg3CgkJCWluc2VydFRvOiIucGxheWVyX3R4dCAudmlkZW9fdG9wX2NvbiAudmlkZW9fdG9wX2Nvbl90aXRsZSIsCgkJCWFkU3R5bGU6Ii52aWRlb190b3BfY29uX3RpdGxle292ZXJmbG93OnVuc2V0ICFpbXBvcnRhbnQ7fSIsCgkJCXNTdHlsZToiIiwKCQkJdGl0bGU6Ii5wbGF5ZXJfdHh0IC52aWRlb190b3BfY29uIC52aWRlb190b3BfY29uX3RpdGxlIiwKCQkJc291cmNlOiJxcSIsCgkJfSwKCQlsb2xzaGlwaW46ewoJCQkvLyDmnKjmnKjkuI3lk60gaHR0cDovL3d3dy5sb2xzaGlwaW4uY29tLzIwMTgwOS81OTA4OS5odG1sCgkJCWluc2VydFRvOiIuYXJ0aWNsZSAuYXJ0aWNsZV9fbWFpbiAuYXJ0aWNsZV9faW5mbyBoMSIsCgkJCWFkU3R5bGU6Ii5hcnRpY2xlX19hc2lkZSAubW9kIGRpdlthbGlnbj0nY2VudGVyJ117ZGlzcGxheTpub25lO30iLAoJCQlzU3R5bGU6IiIsCgkJCXRpdGxlOiIuYXJ0aWNsZSAuYXJ0aWNsZV9fbWFpbiAuYXJ0aWNsZV9faW5mbyBoMSIsCgkJCXNvdXJjZToicXEiLAoJCX0sCgkJbG9sX3FxOnsKCQkJLy8g6IW+6K6v55qEbG9s6KeG6aKRIGh0dHA6Ly9sb2wucXEuY29tL3YvZGV0YWlsLnNodG1sP2lkPTk2ODc3JmVfY29kZT1sb2x3ZWIudmlkZW9icHJvbW8ucjIKCQkJaW5zZXJ0VG86ICIudmlkZW8tZGV0YWlsICNqVmlkZW9UaXRsZSwgLnZpZGVvLWRldGFpbC1ib3ggI3ZpZGVvLXRpdGxlLCAudmlkZW8tZGV0YWlsIC52LXNpZGUtaW5mbyAudi1zaWRlLW5hbWUiLAoJCQlhZFN0eWxlOiIudmlkZW8tdGl0bGUtYm94IGg2e292ZXJmbG93OiB1bnNldCFpbXBvcnRhbnQ7fSIsCgkJCXNTdHlsZToiIiwKCQkJdGl0bGU6Ii52aWRlby1kZXRhaWwgI2pWaWRlb1RpdGxlLCAudmlkZW8tZGV0YWlsLWJveCAjdmlkZW8tdGl0bGUiLAoJCQlzb3VyY2U6InFxIiwKCQl9Cgl9OwoJZnVuY3Rpb24gaW5pdFNpdGUoKXsKCQlmb3IodmFyIGtleSBpbiBDb25maWcpewoJCQlpZihsb2NhdGlvbi5ob3N0LnJlcGxhY2UoL1wuL2lnLCAiXyIpLmluZGV4T2Yoa2V5KSA+PSAwKXsKCQkJCWRlYnVnWCgi5b2T5YmN56uZ54K577yaIitrZXkpOwoJCQkJbUN1clNpdGUgPSBDb25maWdba2V5XTsKCQkJCW1DdXJTaXRlLm5hbWUgPSBrZXk7CgkJCQlicmVhazsKCQkJfQoJCX0KCX0KCWZ1bmN0aW9uIHNhZmVSZW1vdmUobm9kZSl7CgkJdHJ5ewoJCQlmYU5vZGVzW2ldLnF1ZXJ5U2VsZWN0b3IoIi5hY0luRyIpLnJlbW92ZSgpOwoJCX1jYXRjaCAoZSkge30KCX0KCWZ1bmN0aW9uIFRVX2FkZFN0eWxlKGNzcywgY2xhc3NOYW1lLCBhZGRUb1RhcmdldCwgaXNSZWxvYWQpeyAvLyDmt7vliqBDU1Pku6PnoIHvvIzkuI3ogIPomZHmlofmnKzovb3lhaXml7bpl7TvvIzluKbmnIljbGFzc05hbWUKCQl2YXIgdG91dCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7CgkJCWFkZFRvVGFyZ2V0ID0gYWRkVG9UYXJnZXQgfHwgImJvZHkiOwoJCQlpc1JlbG9hZCA9IGlzUmVsb2FkIHx8IGZhbHNlOwoJCQlpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFkZFRvVGFyZ2V0KSAhPSBudWxsKXsKCQkJCWNsZWFySW50ZXJ2YWwodG91dCk7CgkJCQlpZihpc1JlbG9hZCA9PSB0cnVlKXsKCQkJCQlzYWZlUmVtb3ZlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi4iK2NsYXNzTmFtZSkpOwoJCQkJfWVsc2UgaWYoaXNSZWxvYWQgPT0gZmFsc2UgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLiIrY2xhc3NOYW1lKSAhPSBudWxsKXsKCQkJCQkvLyDoioLngrnlrZjlnKggJiYg5LiN5YeG5aSH6KaG55uWCgkJCQkJcmV0dXJuOwoJCQkJfQoJCQkJdmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpOwoJCQkJaWYoY2xhc3NOYW1lICE9IG51bGwpIGNzc05vZGUuY2xhc3NOYW1lID0gY2xhc3NOYW1lOwoJCQkJY3NzTm9kZS5pZCA9ICJBQy0iK2NsYXNzTmFtZTsKCQkJCWNzc05vZGUuc2V0QXR0cmlidXRlKCJ0eXBlIiwgInRleHQvY3NzIikKCQkJCWNzc05vZGUuaW5uZXJIVE1MID0gY3NzOwoJCQkJdHJ5ewoJCQkJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWRkVG9UYXJnZXQpLmFwcGVuZENoaWxkKGNzc05vZGUpOwoJCQkJfWNhdGNoIChlKXtjb25zb2xlLmxvZyhlLm1lc3NhZ2UpO30KCQkJfQoJCX0sIDUwKTsKCX0KCWZ1bmN0aW9uIGdldFRydWVVcmwoKXsKCQl2YXIgb3JpVXJsID0gbG9jYXRpb24uaHJlZjsKCQl0cnl7CgkJCXZhciBvcmlUZXh0ID0gJCgiLnBsYXllcj5lbWJlZCIpLmF0dHIoInNyYyIpCgkJCQl8fCAkKCIuYXJ0aWNsZV9fdmlkZW8gaWZyYW1lIikuYXR0cigic3JjIikgLy8gbG9sc2hpcGluCgkJCQl8fCAkKCJpbnB1dFtpZD0nZmVfdGV4dCddIikuYXR0cigidmFsdWUiKQkvL+mjnueGiuinhumikQoJCQkJfHwgInZpZD0iKyQoIi50eHBfdmFsdWVbZGF0YS1yb2xlPSd0eHAtdWktY29uc29sZS12aWQnXSIpLnRleHQoKQoJCQk7CgkJCWlmKHR5cGVvZihtQ3VyU2l0ZS5zb3VyY2UpICE9ICJ1bmRlZmluZWQiICYmIG1DdXJTaXRlLnNvdXJjZSA9PSAicXEiKXsKCQkJCW9yaVVybCA9IC92aWQ9KFteJl0rKS8uZXhlYyhvcmlUZXh0KVsxXTsKCQkJCW9yaVVybCA9ICJodHRwczovL3YucXEuY29tL3gvcGFnZS8iK29yaVVybCsiLmh0bWwiCgkJCX0KCQl9Y2F0Y2ggKGUpIHsKCQkJZGVidWdYKGUpOwoJCX0KCQlyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KG9yaVVybC5yZXBsYWNlKC9cP1tcU10qfCNbXFNdKi8sICIiKSkKCX0KCgkvKioKCSAqIOaJp+ihjOermeeCuVZJUOino+aekOaPkuWFpeaTjeS9nAoJICovCglmdW5jdGlvbiBkb0luc2VydCgpewoJCWlmKG1DdXJTaXRlID09IG51bGwpIHJldHVybjsKCQlUVV9hZGRTdHlsZShtQ3VyU2l0ZS5hZFN0eWxlLCAidHUtYWQtc3R5bGUtcmVtb3ZlIik7IC8vIOa3u+WKoOmDqOWIhuaLpuaIquW5v+WRiueahOinhOWImQoJCXZhciBpbnNlcnROb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwoJCWluc2VydE5vZGUuc3R5bGUgPSAiO2JhY2tncm91bmQtY29sb3I6I2ZmZjcwMDt3aWR0aDogNC41cmVtO2N1cnNvcjogcG9pbnRlcjsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBjb2xvcjogcmVkOyBwYWRkaW5nOiAwcHggNXB4OyBib3JkZXI6IDFweCBzb2xpZCByZWQ7IGZvbnQtc2l6ZTogMTdweDsgZGlzcGxheTogaW5saW5lLWZsZXg7IGhlaWdodDogMjRweDsgbGluZS1oZWlnaHQ6IDI0cHg7IG1hcmdpbjogMHB4IDVweDsiICsgbUN1clNpdGUuc1N0eWxlOwoJCWluc2VydE5vZGUuaW5uZXJIVE1MID0gIlZJUOino+aekCI7CgkJaW5zZXJ0Tm9kZS50YXJnZXQgPSAiX2JhbG5rIjsKCQlpbnNlcnROb2RlLmNsYXNzTmFtZSA9ICJhY0luRyI7CgkJdmFyIHRpdGxlID0gIiI7CgkJdHJ5ewoJCQl0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobUN1clNpdGUudGl0bGUpLmlubmVyVGV4dC5zcGxpdCgiICAgIilbMF0udHJpbSgpOwoJCQl0aXRsZSA9IGVuY29kZVVSSUNvbXBvbmVudCh0aXRsZSk7CgkJfWNhdGNoIChlKSB7CgkJCWRlYnVnWChkb2N1bWVudC5sb2NhdGlvbi5ocmVmKTsKCQkJZGVidWdYKCLmib7kuI3liLDoioLngrnvvJoiICsgbUN1clNpdGUubmFtZSk7CgkJCWRlYnVnWChlKTsKCQl9CgkJdGl0bGUgPSB0aXRsZS5yZXBsYWNlKC9WSVDop6PmnpAkLywgIiIpOwoJCXZhciB1cmwgPSAiaHR0cHM6Ly90aGlua2libS5ub3cuc2gvP3VybD0iICsgZ2V0VHJ1ZVVybCgpICsgIiZ0aXRsZT0iICsgdGl0bGU7CgkJaW5zZXJ0Tm9kZS5kYXRhc2V0LnVybCA9IHVybDsKCQlpbnNlcnROb2RlLnNldEF0dHJpYnV0ZSgib25jbGljayIsICJ3aW5kb3cub3Blbih0aGlzLmRhdGFzZXQudXJsKTsiKTsKCQl2YXIgZmFOb2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwobUN1clNpdGUuaW5zZXJ0VG8pOwoJCWZvcih2YXIgaSA9IDA7IGkgPCBmYU5vZGVzLmxlbmd0aDsgaSsrKXsKCQkJaWYoZmFOb2Rlc1tpXS5xdWVyeVNlbGVjdG9yKCIuYWNJbkc6bm90KFt0aXRsZV0pIikgPT0gbnVsbCl7CgkJCQlkZWJ1Z1goIuaWsOWinuaMiemSriIpOwoJCQkJc2FmZVJlbW92ZShmYU5vZGVzW2ldLnF1ZXJ5U2VsZWN0b3IoIi5hY0luRyIpKTsKCQkJCWZhTm9kZXNbaV0uYXBwZW5kQ2hpbGQoaW5zZXJ0Tm9kZS5jbG9uZU5vZGUodHJ1ZSkpOwoJCQkJZmFOb2Rlc1tpXS5zZXRBdHRyaWJ1dGUoImFjSW5zIiwgIiIpOwoJCQkJaWYodGl0bGUgIT0gIiIpIHsKCQkJCQlmYU5vZGVzW2ldLnNldEF0dHJpYnV0ZSgidGl0bGUiLCB0aXRsZSk7CgkJCQl9CgkJCX1lbHNlewoJCQkJZmFOb2Rlc1tpXS5xdWVyeVNlbGVjdG9yKCIuYWNJbkc6bm90KFt0aXRsZV0pIikuZGF0YXNldC51cmwgPSB1cmw7CgkJCX0KCQl9Cgl9CglkZWJ1Z1goIuaVsOaNruWIneWni+WMliIpOwoJaW5pdFNpdGUoKTsKCShmdW5jdGlvbigpewoJCVRVX2FkZFN0eWxlKCIuYWNJbkc6aG92ZXJ7Y29sb3I6IHJnYmEoMjU1LDIwMCwwLDMwKSAhaW1wb3J0YW50O2JvcmRlcjogMXB4IGRhc2hlZCByZ2JhKDI1NSwyMDAsMTAwLDEwKSAhaW1wb3J0YW50O3RleHQtc2hhZG93OiAwIDBweCByZ2JhKDI0MiwzMyw0OSwzMCksMCAwcHggMHB4IHJnYmEoMjQyLDMzLDQ5LDMwKSwwIDFweCAxcHggcmdiYSgyNDIsMzMsNDksMzApLDFweCAwIDFweCByZ2JhKDI0MiwzMyw0OSwzMCksLTFweCAwIDFweCByZ2JhKDI0MiwzMyw0OSwzMCksMCAwIDFweCByZ2JhKDI0MiwzMyw0OSwzMCkgIWltcG9ydGFudDt9Iik7CgkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NTm9kZUluc2VydGVkJywgZnVuY3Rpb24gKGUpIHsKCQkJZGVidWdYKCJodG1s5paH5qGj6L295YWl5a6M5oiQIik7CgkJCWlmKGUudGFyZ2V0ICE9IG51bGwgJiYgZS50YXJnZXQuY2xhc3NOYW1lICE9IG51bGwgJiYgZS50YXJnZXQuaWQuaW5kZXhPZigiQUMtIikgPT0gMCl7IHJldHVybjsgfSAvL+Wxj+iUveaOieWboOS4uuWinuWKoGNzc+WvvOiHtOeahOinpuWPkWluc2VydOWKqOS9nAoJCQlkb0luc2VydCgpOwoJCX0sIGZhbHNlKTsKCX0pKCk7Cn0pKCk7","requires":[{"meta":{"name":"AC-%E7%8B%AC%E5%AE%B6-%E6%B7%98%E5%AE%9D%E5%A4%A9%E7%8C%AB%E4%BC%98%E6%83%A0%E5%88%B8%E6%9F%A5%E8%AF%A2%E9%A2%86%E5%8F%96,%E5%A4%A7%E9%A2%9D%E4%BC%98%E6%83%A0%E5%88%B8,%E3%80%90100%E5%85%83%E8%B4%AD%E7%89%A9%E7%A5%9E%E5%88%B8%E3%80%91,%E7%9C%81%E9%92%B1%E8%B4%AD%E7%89%A9,%E9%A2%86%E5%88%B8%E8%B4%AD%E4%B9%B0%E6%9B%B4%E4%BC%98%E6%83%A0,%E5%B9%B3%E5%9D%87%E4%BC%98%E6%83%A020%25.user.js","url":"https://greasyfork.org/scripts/34606-ac-%E7%8B%AC%E5%AE%B6-%E6%B7%98%E5%AE%9D%E5%A4%A9%E7%8C%AB%E4%BC%98%E6%83%A0%E5%88%B8%E6%9F%A5%E8%AF%A2%E9%A2%86%E5%8F%96-%E5%A4%A7%E9%A2%9D%E4%BC%98%E6%83%A0%E5%88%B8-100%E5%85%83%E8%B4%AD%E7%89%A9%E7%A5%9E%E5%88%B8-%E7%9C%81%E9%92%B1%E8%B4%AD%E7%89%A9-%E9%A2%86%E5%88%B8%E8%B4%AD%E4%B9%B0%E6%9B%B4%E4%BC%98%E6%83%A0-%E5%B9%B3%E5%9D%87%E4%BC%98%E6%83%A020/code/AC-%E7%8B%AC%E5%AE%B6-%E6%B7%98%E5%AE%9D%E5%A4%A9%E7%8C%AB%E4%BC%98%E6%83%A0%E5%88%B8%E6%9F%A5%E8%AF%A2%E9%A2%86%E5%8F%96,%E5%A4%A7%E9%A2%9D%E4%BC%98%E6%83%A0%E5%88%B8,%E3%80%90100%E5%85%83%E8%B4%AD%E7%89%A9%E7%A5%9E%E5%88%B8%E3%80%91,%E7%9C%81%E9%92%B1%E8%B4%AD%E7%89%A9,%E9%A2%86%E5%88%B8%E8%B4%AD%E4%B9%B0%E6%9B%B4%E4%BC%98%E6%83%A0,%E5%B9%B3%E5%9D%87%E4%BC%98%E6%83%A020%25.user.js","ts":1587235898632,"mimetype":"text/javascript"},"source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBBQy3ni6zlrrYt5reY5a6d5aSp54yr5LyY5oOg5Yi45p+l6K+i6aKG5Y+WLOWkp+mineS8mOaDoOWIuCzjgJAxMDDlhYPotK3niannpZ7liLjjgJEs55yB6ZKx6LSt54mpLOmihuWIuOi0reS5sOabtOS8mOaDoCzlubPlnYfkvJjmg6AyMCUKLy8gQHZlcnNpb24gICAgICA3LjEKLy8gQGRlc2NyaXB0aW9uICDni6zlrrbmn6Xor6Lmt5jlrp3llYblk4Hmn6Xor6LmmK/lkKblhbfmnInkvJjmg6DliLgs5ZCE56eN5aSn6aKd5LyY5oOg5Yi4LOOAkDPlhYN8MTDlhYN8MjDlhYN8NDDlhYPjgJHkvJjmg6DliLjpooblj5Ys6LSt54mp5b+F5aSHLOeJueWkp+S8mOaDoAovLyBAYXV0aG9yICAgICAgIEFDCi8vIEBpbmNsdWRlICAgICAgaHR0cHM6Ly9pdGVtLnRhb2Jhby5jb20vaXRlbS5odG0qCi8vIEBpbmNsdWRlICAgICAgaHR0cHM6Ly9kZXRhaWwudG1hbGwuY29tL2l0ZW0uaHRtKgovLyBAaW5jbHVkZSAgICAgIGh0dHBzOi8vcy50YW9iYW8uY29tL3NlYXJjaCoKLy8gQGluY2x1ZGUgICAgICBodHRwczovL2NhcnQudGFvYmFvLmNvbS8qCi8vIEBpbmNsdWRlICAgICAgKjovL3VsYW5kLnRhb2Jhby5jb20vY291cG9uLyoKLy8gQG5vdGUgICAgICAgICAyMDE5LjAzLjA4LVY3LjEg5L+u5aSN5LiA5aSE5bCPYnVnCi8vIEBub3RlICAgICAgICAgMjAxOS4wMS4wNi1WNy4wIOW5tOWJjeWIt+S4gOS4i+eJiOacrAovLyBAbm90ZSAgICAgICAgIDIwMTguMTAuMTUtVjYuOSDnp7vpmaTml6DlhbPnmoTku6PnoIHvvIzkvJjljJbnu5PmnoTvvIzlr7nkuo7ml6DmlYjnmoTpk77mjqXkuI3miZPlvIAKLy8gQG5vdGUgICAgICAgICAyMDE4LjA5LjI2LVY2Ljgg56e76Zmk5q+U5Lu35Yqf6IO9fn4KLy8gQG5vdGUgICAgICAgICAyMDE4LjA5LjIzLVY2Ljcg5Zyo5reY5a6d5Y2V6aG15o+Q5L6b5q+U5Lu35Yqf6IO9Ci8vIEBub3RlICAgICAgICAgMjAxOC4wOS4xOS1WNi42IOS/ruWkjeWcqOa3mOWuneafkOS6m+mhtemdoueahOWxleekuuS4jeato+W4uOeahOmXrumimAovLyBAbm90ZSAgICAgICAgIDIwMTguMDkuMTctVjYuNSDmm7TmlrAt5pSv5oyB5omp5bGV5qih5byPCi8vIEBub3RlICAgICAgICAgMjAxOC4wOS4wNi1WNi40IOaWsOWinuWPr+eCueWHu+aMiemSrueahOWPmOiJsu+8jOabtOWPi+WlveeahOS6pOS6kgovLyBAbm90ZSAgICAgICAgIDIwMTguMDkuMDUtVjYuMyDkv67lpI3lpJrkuKrop6blj5Hlr7zoh7TnmoTlhrLnqoHpl67popjvvIzmlrDlop7mu5rliqjml7bkvp3ml6flj6/ku6XnnIvliLDkvJjmg6DmipjmiaMKLy8gQG5vdGUgICAgICAgICAyMDE4LjA4LjI0LVY2LjIg5L+u5aSN6I635Y+W5ZWG5ZOB5qCH6aKY5LiN5q2j5bi45a+86Ie055qE5pCc57Si5peg57uT5p6c55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgMjAxOC4wOC4xMS1WNi4wIOaWsOWinuaQnOe0ouWQjuS8mOaDoOmdouWAvOaYvuekuu+8m+Wxj+iUveS4gOS6m+eugOWNleeahOeDpuS6uueahOW5v+WRilvnq5nlhoXmkJxdCi8vIEBub3RlICAgICAgICAgMjAxOC4wNy4yNS1WNS42IOS8mOWMluaMiemSrumhuuW6j+OAguOAguS7peWJjemCo+S4qumhuuW6j+ecn+eahOS4jeihjAovLyBAbm90ZSAgICAgICAgIDIwMTguMDYuMTMtVjUuNSDkv67lpI3lgbblsJTml6Dms5Xojrflj5bmoIfpopjvvIznhLblkI7ml6Dms5XmraPluLjmkJzntKLnu5PmnpznmoTpl67popgKLy8gQG5vdGUgICAgICAgICAyMDE4LjA2LjEzLVY1LjQg5L+u5aSN6LCD55So55qE6Zeu6aKY77yM5Lul5Y+K5pyJ5pe25YCZ5p+l5LiN5Ye65p2l55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgMjAxOC4wNS4xMi1WNS4zIOS/ruWkjeWcqOmDqOWIhuWkqeeMq+mhtemdouayoeWPjeW6lOeahOmXrumimAovLyBAbm90ZSAgICAgICAgIDIwMTguMDQuMzAtVjUuMiDmlrDlop7kvJjmg6DliLjpnaLpop3mn6Xor6Lnu5PmnpwKLy8gQG5vdGUgICAgICAgICAyMDE4LjAzLjE4LVY1LjEg5pu05paw5LiL5qCH6aKYCi8vIEBub3RlICAgICAgICAgMjAxOC4wMy4xOC1WNS4wIOaWsOWinui0reeJqei9pumhtemdouiuvue9ruaVsOaNrgovLyBAbm90ZSAgICAgICAgIDIwMTguMDMuMTAtVjQuOSDkv67mraPkuIrkuKrniYjmnKzmm7TmlrDnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAyMDE4LjAzLjA4LVY0Ljgg566A5Y2V5aKe5Yqg5LiA5Liq5oyJ6ZKu6YCJ6aG5Ci8vIEBub3RlICAgICAgICAgMjAxOC4wMS4yMy1WNC41IOS/ruato+aWh+Wtl+ivtOaYjgovLyBAbm90ZSAgICAgICAgIDIwMTguMDEuMjItVjQuNCDkv67lpI3kuIrkuKrniYjmnKzmm7TmlrDlr7zoh7TnmoRCVUfjgILjgILjgILjgILjgILlvojlsLTlsKwKLy8gQG5vdGUgICAgICAgICAyMDE4LjAxLjE4LVY0LjMg5LyY5YyW55WM6Z2i5pi+56S65pWI5p6c77yM5pi+56S65pCc57Si57uT5p6c5Lit6KKr6Ieq5Yqo5Yig6Zmk55qE6aG555uuCi8vIEBub3RlICAgICAgICAgMjAxOC4wMS4wNy1WNC4yIOabtOaNouWfn+WQjQovLyBAbm90ZSAgICAgICAgIDIwMTguMDEuMDYtVjQuMSDnp7vpmaTkuI3mraPluLjnmoTmjqjlub/mqKHlvI8yCi8vIEBub3RlICAgICAgICAgMjAxOC4wMS4wNi1WNC4wIOenu+mZpOS4jeato+W4uOeahOaOqOW5v+aooeW8jwovLyBAbm90ZSAgICAgICAgIDIwMTguMDEuMDItVjMuOCDmm7TmlrDmoIfpopjlkozmloflrZfor7TmmI4s6aG65bim6LCD5pW05Luj56CB57uT5p6ECi8vIEBub3RlICAgICAgICAgMjAxNy4xMi4yNS1WMy43IOS/ruWkjeWBtuWwlOafpeaJvuaMiemSruWkseaViOeahOmXrumimAovLyBAbm90ZSAgICAgICAgIDIwMTcuMTIuMjUtVjMuNiDkv67lpI3mm7TmlrDlr7zoh7TnmoTlsI/pl67popgy77yM5LiN5b2x5ZON5L2/55SoCi8vIEBub3RlICAgICAgICAgMjAxNy4xMi4xNy1WMy41IOS/ruWkjeabtOaWsOWvvOiHtOeahOWwj+mXrumimO+8jOS4jeW9seWTjeS9v+eUqAovLyBAbm90ZSAgICAgICAgIDIwMTcuMTIuMDUtVjMuNCDmlrDlop7nq5nlhoXmkJzntKLmqKHlvI8KLy8gQG5vdGUgICAgICAgICAyMDE3LjExLjIyLVYzLjMg5YaN6K+V6K+V5Lul5YmN55qE5qih5byP77yM5L+u5aSNQlVHCi8vIEBub3RlICAgICAgICAgMjAxNy4xMS4xNy1WMy4yIOe7neacm+eahOaQnOe0okJVR+S/ruWkjQovLyBAbm90ZSAgICAgICAgIDIwMTcuMTEuMTctVjMuMSDkvJjljJbovb3lhaXnvJPmhaLnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAyMDE3LjExLjE3LVYzLjAg5L+u5aSN5LiK5LiA54mI6L+H5LqO5rWB55WF55qEYnVn77yM5LiK5LiA54mI5pu05paw5a+86Ie055qEYnVn5oy65aSa55qE44CC44CC44CCCi8vIEBub3RlICAgICAgICAgMjAxNy4xMS4xNy1WMi45IOato+W4uOabtOaWsO+8jOWwvemHj+WHj+WwkeeUseS6jumHjeWumuWQkeW4puadpeeahOW9seWTje+8jOWQjOaXtuS/ruato+inhOWImemBv+WFjeWHuuS6iwovLyBAbm90ZSAgICAgICAgIDIwMTcuMTEuMTctVjIuOCDkuIrkuKrniYjmnKzmm7TmlrDlr7zoh7TnmoRidWcgIC4uLlBfUC4uLgovLyBAbm90ZSAgICAgICAgIDIwMTcuMTEuMTctVjIuNyDkv67lpI3kvJjmg6DliLjojrflj5bkuI3mraPnoa7nmoTpl67popjvvIzku6Xlj4rpg6jliIbmg4XlhrXkuIvml6Dms5XmmL7npLrkvJjmg6DliLjnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAyMDE3LjExLjEyLVYyLjYg566A5Y2V5pu05pawCi8vIEBub3RlICAgICAgICAgMjAxNy4xMS4xMS1WMi41IOafpeivoumAn+W6puabtOW/q+mAn++8jOW5tuS4lOS8mOWMluS6hui9veWFpeaDheWGte+8jOWKoOWFpeS6huS4quS6uuaVsOaNrgovLyBAbm90ZSAgICAgICAgIDIwMTcuMTEuMTAtVjIuNCDlpoLmnpzmnInkvJjmg6DvvIzlj6/ku6XlsZXnpLrlh7rkvJjmg6Dkv6Hmga/kuoYKLy8gQG5vdGUgICAgICAgICAyMDE3LjExLjQtVjIuMyDmmoLml7bmlrDlop7kuKTnp43mqKHlvI/kvpvpgInmi6kKLy8gQG5vdGUgICAgICAgICAyMDE3LjExLjItVjIuMiDlj4LnhafkuobkuIDkuKrlpKfnpZ7nmoTohJrmnKzkuYvlkI7mi7/liLDkuobkuIDkuptjc3PvvIzkuo7mmK/lj4jliqDkuobkupvkuJzopb/vvIzlsZXnpLrkuIDkupvlj4zljYHkuIDnm7jlhbPnmoTmoIfnrb4KLy8gQG5vdGUgICAgICAgICAyMDE3LjExLjEtVjIuMSDliIfmjaLkuLppbmNsdWRl6KeE5YiZ77yM6ICM6Z2ebWF0Y2jop4TliJnvvIzpgb/lhY1HcmVhc2VNb25rZXnkuIrml6Dms5Xkvb/nlKjnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAyMDE3LjEwLjMwLVYyLjAg5L+u5aSN5Zyo5p+Q5Lqb6aG16Z2i5LiK77yM5qCH6aKY6I635Y+W5LiN5q2j56Gu55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgMjAxNy4xMC4yOC1WMS4wIOesrOS4gOeJiOacrO+8jGVkaXQgZnJvbSBodHRwczovL2dyZWFzeWZvcmsub3JnL3poLVRXL3NjcmlwdHMvMzQ2MDQKLy8gQGljb24gICAgICAgICBodHRwczovL2NvZGluZy5uZXQvdS96YjIyNy9wL3piSW1nL2dpdC9yYXcvbWFzdGVyL2ltZzAvaWNvbi5qcGcKLy8gQGhvbWUtdXJsICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3poLVRXL3NjcmlwdHMvMzQ2MDYKLy8gQHJ1bi1hdCAgICAgICBkb2N1bWVudC1zdGFydAovLyBAbmFtZXNwYWNlICAgIDEzNTM0NjQ1MzlAcXEuY29tCi8vIEBjb25uZWN0ICAgICAgb3Blbi5sZXNpY2x1Yi5jbgovLyBAZ3JhbnQgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0Ci8vID09L1VzZXJTY3JpcHQ9PQovLyAudGItZGV0YWlsLWhkLCAudGItbWFpbi10aXRsZQoKc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CglpZih0eXBlb2YoYWNUQikgPT0gInVuZGVmaW5lZCIpewoJCWFjVEIgPSAxOwoJCShmdW5jdGlvbigpewoJCQl2YXIgZ29vZFRpdGxlID0gIiI7CgkJCWZ1bmN0aW9uIGFkZFN0eWxlKGNzcykgewoJCQkJdmFyIHBpID0gZG9jdW1lbnQuY3JlYXRlUHJvY2Vzc2luZ0luc3RydWN0aW9uKAoJCQkJCSd4bWwtc3R5bGVzaGVldCcsCgkJCQkJJ3R5cGU9InRleHQvY3NzIiBocmVmPSJkYXRhOnRleHQvY3NzO3V0Zi04LCcgKyBlbmNvZGVVUklDb21wb25lbnQoY3NzKSArICciJwoJCQkJKTsKCQkJCXJldHVybiBkb2N1bWVudC5pbnNlcnRCZWZvcmUocGksIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7CgkJCX0KCQkJZnVuY3Rpb24gdGltZXJEb09uY2Uobm9kZSwgZnVuY3Rpb25OYW1lLCBjaGVja1RpbWUpewoJCQkJdmFyIHR0ID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXsKCQkJCQlpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5vZGUpICE9IG51bGwpIHsKCQkJCQkJY2xlYXJJbnRlcnZhbCh0dCk7CgkJCQkJCXRyeXsKCQkJCQkJCWZ1bmN0aW9uTmFtZSgpOwoJCQkJCQl9Y2F0Y2ggKGUpIHt9CgkJCQkJfQoJCQkJfSwgY2hlY2tUaW1lKTsKCQkJfQoKCQkJZnVuY3Rpb24gbG9hZFNDKCl7CgkJCQkvLyDmkJzntKLnmoTml7blgJnlop7liqDkvJjmg6Dkv6Hmga8KCQkJCWFkZFN0eWxlKCIuY29wb24tc2VhcmNoLWxpc3R7Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZDp1cmwoaHR0cHM6Ly93czEuc2luYWltZy5jbi9sYXJnZS82YTE1NTc5NGd5MWZ1eHl5aW1reWRqMjAyazAwbjBiai5qcGcpIG5vLXJlcGVhdDtkaXNwbGF5OmlubGluZS1ibG9jaztwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDowO2ZvbnQtc2l6ZToxNHB4O2NvbG9yOiNmOTVkNTAgIWltcG9ydGFudDtoZWlnaHQ6MjNweDtwYWRkaW5nOiAwIDhweCAwIDhweDtiYWNrZ3JvdW5kLXNpemU6IDEwMCUgMTAwJTt0ZXh0LWFsaWduOmNlbnRlcjt0ZXh0LWRlY29yYXRpb246bm9uZSFpbXBvcnRhbnQ7ei1pbmRleDoxO30iKTsKCQkJCXZhciBhbGxOb2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5pdGVtcyAuSl9Nb3VzZXJPbnZlclJlcSwgI2NvbnRlbnQgLnByb2R1Y3QiKTsKCQkJCWZvcih2YXIgaSA9IDA7IGkgPCBhbGxOb2Rlcy5sZW5ndGg7IGkrKyl7CgkJCQkJKGZ1bmN0aW9uIChub2RlKSB7CgkJCQkJCXZhciBnaWQ7CgkJCQkJCXRyeXtnaWQgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoIi5waWM+YSIpLmdldEF0dHJpYnV0ZSgiZGF0YS1uaWQiKTt9IGNhdGNoIChlKSB7IH0KCQkJCQkJdHJ5e2dpZCA9IGdpZCB8fCBub2RlLmdldEF0dHJpYnV0ZSgiZGF0YS1pZCIpO30gY2F0Y2ggKGUpIHsgfQoJCQkJCQlHTV94bWxodHRwUmVxdWVzdCh7CgkJCQkJCQltZXRob2Q6ICJHRVQiLCB1cmw6ICJodHRwczovL29wZW4ubGVzaWNsdWIuY24vY291cG9uL2dldC8xMDAwNS8xMDAwMS8iICsgZ2lkLAoJCQkJCQkJb25sb2FkOiBmdW5jdGlvbiAocmVzKSB7CgkJCQkJCQkJcmVzID0gSlNPTi5wYXJzZShyZXMucmVzcG9uc2VUZXh0KTsKCQkJCQkJCQlpZihyZXMuY29kZSA9PSAyMDAgJiYgcmVzLmRhdGEgIT0gbnVsbCAmJiByZXMuZGF0YS5jb3Vwb24uaXNfdmFsaWQgPT0gdHJ1ZSl7CgkJCQkJCQkJCXZhciBpbnNOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwoJCQkJCQkJCQl2YXIgbmFtZTsKCQkJCQkJCQkJdHJ5e25hbWUgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoIi5KX0ljb25Nb3JlTmV3IC5KX0NsaWNrU3RhdCIpLmlubmVyVGV4dC50cmltKCk7fSBjYXRjaCAoZSkgeyB9CgkJCQkJCQkJCXRyeXtuYW1lID0gbmFtZSB8fCBub2RlLnF1ZXJ5U2VsZWN0b3IoIi5wcm9kdWN0VGl0bGUgYSIpLmdldEF0dHJpYnV0ZSgidGl0bGUiKTt9IGNhdGNoIChlKSB7IH0KCQkJCQkJCQkJdmFyIHByaWNlID0gcmVzLmRhdGEuY291cG9uLmNvdXBvbl9tb25leTsKCQkJCQkJCQkJaW5zTm9kZS5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgIuW9k+WJjeWVhuWTgemihuWIuOWHjyIrcHJpY2UrIuWFgyIpOwoJCQkJCQkJCQlpbnNOb2RlLmRhdGFzZXQudXJsID0gImh0dHBzOi8vY2VudC5udGFvdy5jb20vY291cG9uLmh0bWw/bVF1ZXJ5PSIgKyBlbmNvZGVVUkkobmFtZSk7CgkJCQkJCQkJCWluc05vZGUuc2V0QXR0cmlidXRlKCJvbmNsaWNrIiwgIm9wZW5VcmwodGhpcyk7Iik7CgkJCQkJCQkJCWluc05vZGUuY2xhc3NOYW1lID0gImNvcG9uLXNlYXJjaC1saXN0IjsKCQkJCQkJCQkJaW5zTm9kZS5pbm5lckhUTUwgPSAi77+lIitwcmljZSsi5YWD5LyY5oOg5Yi4IjsKCQkJCQkJCQkJdHJ5e25vZGUucXVlcnlTZWxlY3RvcigiLnBpYy1ib3giKS5hcHBlbmRDaGlsZChpbnNOb2RlKTt9Y2F0Y2ggKGUpIHt9CgkJCQkJCQkJCXRyeXtub2RlLnF1ZXJ5U2VsZWN0b3IoIi5wcm9kdWN0SW1nLXdyYXAiKS5hcHBlbmRDaGlsZChpbnNOb2RlKTt9Y2F0Y2ggKGUpIHt9CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9KTsKCQkJCQl9KShhbGxOb2Rlc1tpXSk7CgkJCQl9CgkJCX0KCQkJb3BlblVybCA9IGZ1bmN0aW9uKG5vZGUpewoJCQkJaWYobm9kZS5kYXRhc2V0LnVybC5pbmRleE9mKCJqYXZhc2NyaXB0OnZvaWQiKSA8IDApCgkJCQkJd2luZG93Lm9wZW4obm9kZS5kYXRhc2V0LnVybCk7CgkJCX07CgkJCWFkZFN0eWxlKCIuYWMtYnRuOmhvdmVyLC5jb3Bvbi1zZWFyY2gtbGlzdDpob3ZlciwuYWMtYnRuLWNhcnQ6aG92ZXIsLnRtLWRldGFpbEdvLWJ0bjpob3Zlcntjb2xvcjogcmdiYSgyNTUsMjAwLDAsMzApIWltcG9ydGFudDt0ZXh0LXNoYWRvdzogMCAwcHggcmdiYSgyNDIsMzMsNDksMzApLDAgMHB4IDBweCByZ2JhKDI0MiwzMyw0OSwzMCksMCAxcHggMXB4IHJnYmEoMjQyLDMzLDQ5LDMwKSwxcHggMCAxcHggcmdiYSgyNDIsMzMsNDksMzApLC0xcHggMCAxcHggcmdiYSgyNDIsMzMsNDksMzApLDAgMCAxcHggcmdiYSgyNDIsMzMsNDksMzApIWltcG9ydGFudDt9Iik7CgkJCWFkZFN0eWxlKCIuYWMtYnRuOmhvdmVyLC50bS1kZXRhaWxHby1idG46aG92ZXJ7Y29sb3I6IHdoaXRlIWltcG9ydGFudDt9Iik7CgoJCQlpZihsb2NhdGlvbi5ocmVmLmluZGV4T2YoIml0ZW0udGFvYmFvLmNvbSIpICsgbG9jYXRpb24uaHJlZi5pbmRleE9mKCJkZXRhaWwudG1hbGwuY29tIikgPj0gMCkgewoJCQkJYWRkU3R5bGUoIi50bS1kZXRhaWxHby1idG57bGluZS1oZWlnaHQ6IDQ4cHggIWltcG9ydGFudDtjdXJzb3I6cG9pbnRlcjtwYWRkaW5nOiAwcHggMTFweDtjb2xvcjojZjk1ZDUwO2Zsb2F0OiByaWdodCAhaW1wb3J0YW50O2ZvbnQtd2VpZ2h0OiBib2xkO2JvcmRlcjogMXB4IHNvbGlkICNmOTVmNTI7Zm9udC1zaXplOiAxLjNlbTt9Iik7CgkJCQlmdW5jdGlvbiBnZXRRdWVyeVN0cmluZyhuYW1lKSB7CgkJCQkJdmFyIHJlZyA9IG5ldyBSZWdFeHAoIihefCYpIiArIG5hbWUgKyAiPShbXiZdKikoJnwkKSIsICJpIik7CgkJCQkJdmFyIHIgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKS5tYXRjaChyZWcpOwoJCQkJCWlmIChyICE9IG51bGwpIHJldHVybiB1bmVzY2FwZShyWzJdKTsKCQkJCQlyZXR1cm4gbnVsbDsKCQkJCX0KCQkJCXZhciBnb29kSUQgPSBnZXRRdWVyeVN0cmluZygiaWQiKTsKCQkJCXF1ZXJ5RGF0YShnb29kSUQpOwoJCQkJZnVuY3Rpb24gQXV0b1N0YXJ0KHRpbWUsIGNzc1NlbGVjdG9yLCBkZWFsRnVuYykgewoJCQkJCXZhciB0aW1lck5vZGUgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CgkJCQkJCXRyeSB7CgkJCQkJCQlpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjc3NTZWxlY3Rvcikuc3R5bGUuZGlzcGxheSA9PSAiIikgewoJCQkJCQkJCWNsZWFySW50ZXJ2YWwodGltZXJOb2RlKTsKCQkJCQkJCQlkZWFsRnVuYygpOwoJCQkJCQkJfQoJCQkJCQl9IGNhdGNoIChlKSB7CgkJCQkJCX0KCQkJCQl9LCB0aW1lKTsKCQkJCX0KCQkJCWZ1bmN0aW9uIGFjQnV5U2NyaXB0KHJlc3VsdCkgewoJCQkJCXZhciB0dCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKCQkJCQkJdmFyIG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuYWNCdXlTY3JpcHRDb3Vwb24iKTsKCQkJCQkJaWYgKG5vZGUgIT0gbnVsbCkgewoJCQkJCQkJY2xlYXJJbnRlcnZhbCh0dCk7CgkJCQkJCQlpZiAocmVzdWx0LmNvZGUgPT0gMjAwICYmIHJlc3VsdC5kYXRhICYmIHJlc3VsdC5kYXRhLmNvdXBvbi5pc192YWxpZCA9PSB0cnVlKSB7CgkJCQkJCQkJbm9kZS5pbm5lckhUTUwgPSAiISIrcmVzdWx0LmRhdGEuY291cG9uLmNvdXBvbl9tb25leSsi5YWD5LyY5oOg5Yi4ISI7CgkJCQkJCQkJbm9kZS5kYXRhc2V0LnVybCA9ICJodHRwczovL2NlbnQubnRhb3cuY29tL2NvdXBvbi5odG1sP21RdWVyeT0iICsgZW5jb2RlVVJJKGdvb2RUaXRsZSk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCW5vZGUuaW5uZXJIVE1MID0gIuaXoOS8mOaDoOaIluW3sumihuS8mOaDoCI7CgkJCQkJCQkJbm9kZS5zZXRBdHRyaWJ1dGUoInN0eWxlIiwgImZvbnQtc2l6ZTogMTFweDtjb2xvcjojNmM2YzZjIik7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9LCA1MCk7CgkJCQl9CgkJCQlmdW5jdGlvbiBxdWVyeURhdGEoZ29vZElEKSB7CgkJCQkJdmFyIGNnb29kVGl0bGUgPSBkb2N1bWVudC50aXRsZSsiIjsKCQkJCQl2YXIgcmV0ID0gR01feG1saHR0cFJlcXVlc3QoewoJCQkJCQltZXRob2Q6ICJHRVQiLCB1cmw6ICJodHRwczovL29wZW4ubGVzaWNsdWIuY24vY291cG9uL2dldC8xMDAwNS8xMDAwMS8iICsgZ29vZElELAoJCQkJCQlvbmxvYWQ6IGZ1bmN0aW9uIChyZXMpIHsKCQkJCQkJCXJlcyA9IEpTT04ucGFyc2UocmVzLnJlc3BvbnNlVGV4dCk7CgkJCQkJCQlhY0J1eVNjcmlwdChyZXMpOwoJCQkJCQl9CgkJCQkJfSk7CgkJCQl9CgkJCQlBdXRvU3RhcnQoMTAwLCAiLnRiLXNrdSwgLnRiLWFjdGlvbiIsIGZ1bmN0aW9uICgpIHsKCQkJCQl2YXIgVGl0bGVOb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2I0pfVGl0bGUgaDMsIGRpdi50Yi1kZXRhaWwtaGQgaDEiKTsKCQkJCQlnb29kVGl0bGUgPSBUaXRsZU5vZGUuZmlyc3RDaGlsZC5ub2RlVmFsdWUudHJpbSgpOwoJCQkJCWlmKGdvb2RUaXRsZSA9PSAiIil7CgkJCQkJCWdvb2RUaXRsZSA9IFRpdGxlTm9kZS5jaGlsZE5vZGVzWzFdLmlubmVySFRNTC50cmltKCk7CgkJCQkJfQoJCQkJCXZhciBxdWVyeVNpbWlsYXIgPSAiaHR0cHM6Ly9jZW50Lm50YW93LmNvbS9jb3Vwb24uaHRtbD9tUXVlcnk9IiArIGVuY29kZVVSSShnb29kVGl0bGUpOwoJCQkJCXZhciBxdWVyeUluU2l0ZSA9ICJodHRwczovL3MudGFvYmFvLmNvbS9zZWFyY2g/cT0iICsgZW5jb2RlVVJJKGdvb2RUaXRsZSkgKyAiJiI7CgkJCQkJdmFyIGZhTm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImRpdiNKX1RpdGxlIHAudGItc3VidGl0bGUsIGRpdi50Yi1kZXRhaWwtaGQgaDEiKTsKCQkJCQl2YXIgaW5zTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCQkJCWluc05vZGUuc3R5bGUgPSAiZm9udC1zaXplOiAzMnB4O2ZvbnQtd2VpZ2h0OiBib2xkO2ZvbnQtZmFtaWx5Om1pY3Jvc29mdCB5YWhlaTsiOwoJCQkJCXZhciBodG1sVGV4dCA9ICI8c3BhbiBjbGFzcz0nYWNCdXlTY3JpcHRDb3Vwb24gYWMtYnRuJyBkYXRhLXVybD0namF2YXNjcmlwdDp2b2lkKDApOycgb25jbGljaz0nb3BlblVybCh0aGlzKTsnIHN0eWxlPSdjb2xvcjogI2Y5NWY1MjtjdXJzb3I6cG9pbnRlcjsnPj3mn6Xmib7kuK09PC9zcGFuPiI7CgkJCQkJaHRtbFRleHQgKz0gIiZuYnNwOyZuYnNwOzxzcGFuIGNsYXNzPSdhYy1idG4nIGRhdGEtdXJsPSIgKyBxdWVyeUluU2l0ZSAgKyAiIG9uY2xpY2s9J29wZW5VcmwodGhpcyk7JyBzdHlsZT0nY29sb3I6ICNmOTVmNTI7Y3Vyc29yOnBvaW50ZXI7Jz5b56uZ5YaF5pCcXTwvc3Bhbj4iOwoJCQkJCWh0bWxUZXh0ICs9ICImbmJzcDsmbmJzcDs8c3BhbiBjbGFzcz0nYWMtYnRuJyBkYXRhLXVybD0iICsgcXVlcnlTaW1pbGFyICsgIiBvbmNsaWNrPSdvcGVuVXJsKHRoaXMpOycgc3R5bGU9J2NvbG9yOiAjZjk1ZjUyO2N1cnNvcjpwb2ludGVyOyc+W+aJvuebuOS8vF08L3NwYW4+IjsKCQkJCQlpbnNOb2RlLmlubmVySFRNTCA9IGh0bWxUZXh0OwoJCQkJCWZhTm9kZS5hcHBlbmRDaGlsZChpbnNOb2RlKTsKCQkJCQl2YXIgaHRtbFRCID0gIjxzcGFuIGNsYXNzPSdhYy1idG4nIHN0eWxlPSdwYWRkaW5nOiA2cHggMTJweDtpbmUtaGVpZ2h0OjI2cHg7dGV4dC1hbGlnbjogY2VudGVyO2Rpc3BsYXk6IGlubGluZS1ibG9jazttYXJnaW4tYm90dG9tOiAwO2ZvbnQtc2l6ZTogMTRweDtmb250LXdlaWdodDogbm9ybWFsO2hlaWdodDoyNnB4O2x3aGl0ZS1zcGFjZTogbm93cmFwO3ZlcnRpY2FsLWFsaWduOiBtaWRkbGU7LW1zLXRvdWNoLWFjdGlvbjogbWFuaXB1bGF0aW9uO3RvdWNoLWFjdGlvbjogbWFuaXB1bGF0aW9uO2N1cnNvcjogcG9pbnRlcjstd2Via2l0LXVzZXItc2VsZWN0OiBub25lOy1tb3otdXNlci1zZWxlY3Q6IG5vbmU7LW1zLXVzZXItc2VsZWN0OiBub25lO3VzZXItc2VsZWN0OiBub25lO2JhY2tncm91bmQtaW1hZ2U6IG5vbmU7Ym9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXJhZGl1czoycHg7Y29sb3I6ICNmZmY7YmFja2dyb3VuZC1jb2xvcjogI0RGMjMxQzsjRkYwMDM2O21hcmdpbi1sZWZ0OjEwcHgnIGRhdGEtdXJsPSdodHRwczovL2NlbnQubnRhb3cuY29tL2NvdXBvbi5odG1sP21RdWVyeT0iK2VuY29kZVVSSShnb29kVGl0bGUpKyInIG9uY2xpY2s9J29wZW5VcmwodGhpcyk7Jz7ojrflj5bkvJjmg6DliLg8L3NwYW4+IjsKCQkJCQl2YXIgaHRtbFRNQUxMID0gIjxkaXYgY2xhc3M9J2FjLWJ0bicgY2xhc3M9J3RiLWFjdGlvbicgc3R5bGU9J21hcmdpbi10b3A6MTBweDttYXJnaW4tbGVmdDogNjZweDsnPjxzcGFuIHN0eWxlPSdkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ym9yZGVyLXJhZGl1czoycHg7Y29sb3I6ICNmZmY7YmFja2dyb3VuZC1jb2xvcjogI0RGMjMxQztwYWRkaW5nOiA2cHggMTJweDttYXJnaW4tYm90dG9tOiAwO2ZvbnQtc2l6ZTogMTRweDtmb250LXdlaWdodDogbm9ybWFsO2hlaWdodDoyNnB4O2xpbmUtaGVpZ2h0OjI2cHg7d2lkdGg6MTU2cHg7dGV4dC1hbGlnbjogY2VudGVyO3doaXRlLXNwYWNlOiBub3dyYXA7dmVydGljYWwtYWxpZ246IG1pZGRsZTstbXMtdG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb247dG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb247Y3Vyc29yOiBwb2ludGVyOy13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7LW1vei11c2VyLXNlbGVjdDogbm9uZTstbXMtdXNlci1zZWxlY3Q6IG5vbmU7dXNlci1zZWxlY3Q6IG5vbmU7YmFja2dyb3VuZC1pbWFnZTogbm9uZTtib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDsnIGRhdGEtdXJsPSdodHRwczovL2NlbnQubnRhb3cuY29tL2NvdXBvbi5odG1sP21RdWVyeT0iK2VuY29kZVVSSShnb29kVGl0bGUpKyInIG9uY2xpY2s9J29wZW5VcmwodGhpcyk7Jz7ojrflj5bkvJjmg6DliLg8L3NwYW4+PC9kaXY+IjsKCQkJCQl2YXIgYW5vSW5zTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCQkJCWFub0luc05vZGUuc3R5bGUgPSAiZm9udC13ZWlnaHQ6IGJvbGQ7Zm9udC1mYW1pbHk6bWljcm9zb2Z0IHlhaGVpOyI7CgkJCQkJaWYobG9jYXRpb24uaG9zdC5pbmRleE9mKCd0YW9iYW8nKSA+IDApewoJCQkJCQlhbm9JbnNOb2RlLmlubmVySFRNTCA9IGh0bWxUQjsKCQkJCQkJZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRiLWFjdGlvbicpLmFwcGVuZChhbm9JbnNOb2RlKTsKCQkJCQl9ZWxzZXsKCQkJCQkJYW5vSW5zTm9kZS5pbm5lckhUTUwgPSBodG1sVE1BTEw7CgkJCQkJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50Yi1za3UnKS5hcHBlbmQoYW5vSW5zTm9kZSk7CgkJCQkJfQoJCQkJfSk7CgkJCX1lbHNlIGlmKGxvY2F0aW9uLmhyZWYuaW5kZXhPZigicy50YW9iYW8uY29tL3NlYXJjaCIpID4gMCB8fCBsb2NhdGlvbi5ocmVmLmluZGV4T2YoImxpc3QudG1hbGwuY29tL3NlYXJjaF9wcm9kdWN0IikgPiAwKXsKCQkJCXZhciB0dGNvdW50ZXIgPSAwLCB0dG1heCA9IDEwOwoJCQkJdmFyIGd3Y291bnRlciA9IDAsIGd3bWF4ID0gMTAwOwoJCQkJdmFyIHR0ID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewoJCQkJCXZhciBub2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5pdGVtcyAuaXRlbS1hZCIpOwoJCQkJCXZhciBhbGxOb2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5pdGVtcyAuSl9Nb3VzZXJPbnZlclJlcSwgI2NvbnRlbnQgLnByb2R1Y3QiKTsKCQkJCQlpZihhbGxOb2RlcyAhPSBudWxsICYmIChub2Rlcy5sZW5ndGggPiAwIHx8IGFsbE5vZGVzLmxlbmd0aCA+IDApKXsKCQkJCQkJY2xlYXJJbnRlcnZhbCh0dCk7CgkJCQkJCWlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoInNjcmlwdFtzcmMqPSdnd2QnXSIpID09IG51bGwpewoJCQkJCQkJbG9hZFNDKCk7CgkJCQkJCX0KCQkJCQkJZm9yKHZhciBpID0gMDsgaTxub2Rlcy5sZW5ndGg7IGkrKyl7CgkJCQkJCQlub2Rlc1tpXS5jbGFzc05hbWUgPSAiaXRlbSBKX01vdXNlck9udmVyUmVxICI7CgkJCQkJCX0KCQkJCQl9CgkJCQkJdHRjb3VudGVyKys7CgkJCQkJaWYodHRjb3VudGVyID49IHR0bWF4KXsKCQkJCQkJY2xlYXJJbnRlcnZhbCh0dCk7CgkJCQkJfQoJCQkJfSwgMTAwKTsKCQkJfSBlbHNlIGlmKGxvY2F0aW9uLmhvc3QuaW5kZXhPZigidWxhbmQiKSA+PSAwKXsKCQkJCWFkZFN0eWxlKCIjSl9NTVJFREJPWF9NQVNLe2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O30iKTsKCQkJfSBlbHNlIGlmKGxvY2F0aW9uLmhyZWYuaW5kZXhPZigiY2FydC50YW9iYW8uY29tIikgPj0gMCkgewoJCQkJc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXsKCQkJCQlpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjSl9PcmRlckxpc3QgLml0ZW0tYmFzaWMtaW5mbyIpICE9IG51bGwpewoJCQkJCQl2YXIgaHRtbENhcnQgPSAiPHNwYW4gY2xhc3M9J2FjLWJ0bi1jYXJ0JyBkYXRhLXVybD0naHR0cHM6Ly9jZW50Lm50YW93LmNvbS9jb3Vwb24uaHRtbD9tUXVlcnk9QUFBQUFBQUFBQScgb25jbGljaz0nb3BlblVybCh0aGlzKTsnIHN0eWxlPSdjdXJzb3I6cG9pbnRlcjsyMnB4ICFpbXBvcnRhbnQ7Y29sb3I6I2Y5NWY1Mjtmb250LXNpemU6MTZweDtib3JkZXItcmFkaXVzOjFweDtwYWRkaW5nOjJweDtib3JkZXItY29sb3I6I2ZlYTM1Njtib3JkZXItc3R5bGU6IGRhc2hlZDsnPuafpeaJvuS8mOaDoOS/oeaBrzwvc3Bhbj4iOwoJCQkJCQl2YXIgbm9kZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIub3JkZXItY29udGVudCAuaXRlbS1iYXNpYy1pbmZvIik7CgkJCQkJCWZvcihpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKXsKCQkJCQkJCXZhciB0aXRsZSA9IG5vZGVzW2ldLnF1ZXJ5U2VsZWN0b3IoImEiKS5nZXRBdHRyaWJ1dGUoInRpdGxlIik7CgkJCQkJCQlpZih0aXRsZSAhPSBudWxsKXsKCQkJCQkJCQl2YXIgYWRkSFRNTFRleHQgPSBodG1sQ2FydC5yZXBsYWNlKCJBQUFBQUFBQUFBIiwgZW5jb2RlVVJJKHRpdGxlKSk7CgkJCQkJCQkJdmFyIGluc05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQkJCQlpbnNOb2RlLmNsYXNzTmFtZSA9ICJhYy10Yi1hZGQiOwoJCQkJCQkJCWluc05vZGUuc3R5bGUgPSAiZGlzcGxheTogaW5saW5lLWJsb2NrIjsKCQkJCQkJCQlpbnNOb2RlLmlubmVySFRNTCA9IGFkZEhUTUxUZXh0OwoJCQkJCQkJCWlmKG5vZGVzW2ldLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcigiLml0ZW0taWNvbnMiKSAmJiBub2Rlc1tpXS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoIi5pdGVtLWljb25zIikucXVlcnlTZWxlY3RvcigiLmFjLXRiLWFkZCIpID09IG51bGwpewoJCQkJCQkJCQlub2Rlc1tpXS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoIi5pdGVtLWljb25zIikuYXBwZW5kQ2hpbGQoaW5zTm9kZSk7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfSwgMTAwMCk7CgkJCX0KCQl9KSgpOwoJfQp9LCA1MCk7"}]},{"name":"AC-baidu:重定向优化百度搜狗谷歌搜索_去广告_favicon_双列","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":["*://ipv6.baidu.com/*","*://www.baidu.com/*","*://m.baidu.com/*","*://xueshu.baidu.com/s*","*://www.sogou.com/web*","*://www.sogou.com/sie*","*://www.sogou.com/sogou*","*://www.sogou.com/tx*","*://www.so.com/s?*","*://*.bing.com/*","*://encrypted.google.*/search*","*://*.google*/search*","*://*.google*/webhp*","*://*.zhihu.com/*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":[],"orig_excludes":["*://*.google*/sorry*"],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-start","orig_noframes":null}},"storage":{"data":{"Config":"o{\"isRedirectEnable\":true,\"isAdsEnable\":false,\"AdsStyleEnable\":false,\"AdsStyleMode_Baidu\":\"1\",\"AdsStyleMode_Google\":\"3\",\"AdsStyleMode_Bing\":\"0\",\"HuYan_Baidu\":true,\"HuYan_Google\":false,\"HuYan_Bing\":false,\"defaultHuYanColor\":\"#DEF1EF\",\"isUserColorEnable\":false,\"isFaviconEnable\":false,\"defaultFaviconUrl\":\"https://ws1.sinaimg.cn/large/6a155794ly1foijtdzhxhj200w00wjr5.jpg\",\"doDisableSug\":false,\"isRightDisplayEnable\":false,\"isCounterEnable\":false,\"isALineEnable\":false,\"isUserStyleEnable\":false,\"UserStyleText\":\"/*========= Public ========= */\\n\\n* {\\n               font-family: -apple-system, \\\"Helvetica Neue\\\", Helvetica, \\\"Nimbus Sans L\\\", Arial, \\\"Liberation Sans\\\", \\\"PingFang SC\\\", \\\"Hiragino Sans GB\\\", \\\"Source Han Sans CN\\\", \\\"Source Han Sans SC\\\", \\\"Microsoft YaHei\\\", \\\"Wenquanyi Micro Hei\\\", \\\"WenQuanYi Zen Hei\\\", \\\"ST Heiti\\\", SimHei, \\\"WenQuanYi Zen Hei Sharp\\\", sans-serif;\\n}\\n::-webkit-scrollbar {\\n               width: 6px;\\n               height: 10px;\\n               background-color: rgba(0, 0, 0, 0);\\n}\\n::-webkit-scrollbar-track {\\n               background-color: rgba(0, 0, 0, 0.1);\\n}\\n::-webkit-scrollbar-thumb {\\n               border-radius: 3px;\\n               background-color: rgba(0, 0, 0, 0.2);\\n               transition: all 0.4s ease;\\n               -moz-transition: all 0.4s ease;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 0.4s ease;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 0.4s ease;\\n               /* Opera */\\n}\\n::-webkit-scrollbar-thumb:hover {\\n               border-radius: 3px;\\n               background-color: rgba(0, 0, 0, 0.4);\\n               transition: all 0.4s ease;\\n               -moz-transition: all 0.4s ease;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 0.4s ease;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 0.4s ease;\\n               /* Opera */\\n}\\n.animated {\\n               -webkit-animation-duration: 1s;\\n               animation-duration: 1s;\\n               animation-fill-mode: both;\\n}\\n@-webkit-keyframes fadeInUp {\\n               from {\\n                              opacity: 0;\\n                              -webkit-transform: translate3d(0, 100%, 0);\\n                              transform: translate3d(0, 100%, 0);\\n               }\\n               to {\\n                              opacity: 1;\\n                              -webkit-transform: none;\\n                              transform: none;\\n               }\\n}\\n@keyframes fadeInUp {\\n               from {\\n                              opacity: 0;\\n                              -webkit-transform: translate3d(0, 100%, 0);\\n                              transform: translate3d(0, 100%, 0);\\n               }\\n               to {\\n                              opacity: 1;\\n                              -webkit-transform: none;\\n                              transform: none;\\n               }\\n}\\n.fadeInUp {\\n               -webkit-animation-name: fadeInUp;\\n               animation-name: fadeInUp;\\n}\\n@-webkit-keyframes bounceInRight {\\n               from, 60%, 75%, 90%, to {\\n                              -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);\\n                              animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);\\n               }\\n               from {\\n                              opacity: 0;\\n                              -webkit-transform: translate3d(3000px, 0, 0);\\n                              transform: translate3d(3000px, 0, 0);\\n               }\\n               60% {\\n                              opacity: 1;\\n                              -webkit-transform: translate3d(-25px, 0, 0);\\n                              transform: translate3d(-25px, 0, 0);\\n               }\\n               75% {\\n                              -webkit-transform: translate3d(10px, 0, 0);\\n                              transform: translate3d(10px, 0, 0);\\n               }\\n               90% {\\n                              -webkit-transform: translate3d(-5px, 0, 0);\\n                              transform: translate3d(-5px, 0, 0);\\n               }\\n               to {\\n                              -webkit-transform: none;\\n                              transform: none;\\n               }\\n}\\n@keyframes bounceInRight {\\n               from, 60%, 75%, 90%, to {\\n                              -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);\\n                              animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);\\n               }\\n               from {\\n                              opacity: 0;\\n                              -webkit-transform: translate3d(3000px, 0, 0);\\n                              transform: translate3d(3000px, 0, 0);\\n               }\\n               60% {\\n                              opacity: 1;\\n                              -webkit-transform: translate3d(-25px, 0, 0);\\n                              transform: translate3d(-25px, 0, 0);\\n               }\\n               75% {\\n                              -webkit-transform: translate3d(10px, 0, 0);\\n                              transform: translate3d(10px, 0, 0);\\n               }\\n               90% {\\n                              -webkit-transform: translate3d(-5px, 0, 0);\\n                              transform: translate3d(-5px, 0, 0);\\n               }\\n               to {\\n                              -webkit-transform: none;\\n                              transform: none;\\n               }\\n}\\n.bounceInRight {\\n               -webkit-animation-name: bounceInRight;\\n               animation-name: bounceInRight;\\n}\\n@-webkit-keyframes bounceInUp {\\n               from, 60%, 75%, 90%, to {\\n                              -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);\\n                              animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);\\n               }\\n               from {\\n                              opacity: 0;\\n                              -webkit-transform: translate3d(0, 3000px, 0);\\n                              transform: translate3d(0, 3000px, 0);\\n               }\\n               60% {\\n                              opacity: 1;\\n                              -webkit-transform: translate3d(0, -20px, 0);\\n                              transform: translate3d(0, -20px, 0);\\n               }\\n               75% {\\n                              -webkit-transform: translate3d(0, 10px, 0);\\n                              transform: translate3d(0, 10px, 0);\\n               }\\n               90% {\\n                              -webkit-transform: translate3d(0, -5px, 0);\\n                              transform: translate3d(0, -5px, 0);\\n               }\\n               to {\\n                              -webkit-transform: translate3d(0, 0, 0);\\n                              transform: translate3d(0, 0, 0);\\n               }\\n}\\na {\\n               text-decoration: none;\\n               margin-bottom: 2px;\\n}\\n.c-showurl:hover {\\n               text-decoration: none;\\n               border: none;\\n               opacity: 0.8;\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n.res-gap-right16:hover {\\n               border-bottom: #4879BD 1.2px solid;\\n}\\n.c-showurl {\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n.c-tip-arrow:hover {\\n               text-decoration: none;\\n               border: none;\\n}\\n.c-default a {\\n               text-decoration: none;\\n               border: none;\\n}\\n.c-gap-bottom a:hover {\\n               text-decoration: underline;\\n}\\n.op_dict3_morelink a:hover {\\n               text-decoration: underline;\\n}\\n.c-btn:hover {\\n               text-decoration: none !important;\\n}\\ntd a:hover {\\n               text-decoration: underline;\\n}\\nem {\\n               text-decoration: none !important;\\n}\\n#s_wrap {\\n               display: none;\\n}\\n.s-top-nav {\\n               display: none;\\n}\\n#s_ctner_menus {\\n               display: none;\\n}\\n#s_menu_gurd {\\n               display: none;\\n}\\n#s_strpx_span1 {\\n               display: none;\\n}\\n#ftCon {\\n               display: none;\\n}\\n#bottom_container {\\n               display: none;\\n}\\n#lg {\\n               background-repeat: no-repeat;\\n               background-position: center;\\n               height: 70px;\\n               padding-top: 150px;\\n}\\n#lg img {\\n               display: none !important;\\n}\\n#lg a {\\n               display: none;\\n}\\n#head_wrapper {\\n               padding-bottom: 0px;\\n}\\n#s_form_wrapper {\\n               margin-top: auto;\\n}\\n#s_lg_img {\\n               display: none !important;\\n}\\n.s_ipt_wr {\\n               border: none;\\n               border-radius: 3px;\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n               \\n               background-position: 100% !important;\\n               z-index: -1;\\n               width: 600px;\\n               height: 39px;\\n               font-family: -apple-system, \\\"Helvetica Neue\\\", Helvetica, \\\"Nimbus Sans L\\\", Arial, \\\"Liberation Sans\\\", \\\"PingFang SC\\\", \\\"Hiragino Sans GB\\\", \\\"Source Han Sans CN\\\", \\\"Source Han Sans SC\\\", \\\"Microsoft YaHei\\\", \\\"Wenquanyi Micro Hei\\\", \\\"WenQuanYi Zen Hei\\\", \\\"ST Heiti\\\", SimHei, \\\"WenQuanYi Zen Hei Sharp\\\", sans-serif;\\n               padding-top: 4px;\\n}\\n.s_ipt {\\n               font-family: -apple-system, \\\"Helvetica Neue\\\", Helvetica, \\\"Nimbus Sans L\\\", Arial, \\\"Liberation Sans\\\", \\\"PingFang SC\\\", \\\"Hiragino Sans GB\\\", \\\"Source Han Sans CN\\\", \\\"Source Han Sans SC\\\", \\\"Microsoft YaHei\\\", \\\"Wenquanyi Micro Hei\\\", \\\"WenQuanYi Zen Hei\\\", \\\"ST Heiti\\\", SimHei, \\\"WenQuanYi Zen Hei Sharp\\\", sans-serif;\\n}\\n.s_ipt_wr:hover {\\n               border: none;\\n               border-radius: 2px;\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n.ipthover {\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n.iptfocus {\\n               box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.16), 0 2px 10px 0 rgba(0, 0, 0, 0.12);\\n}\\n.s_btn {\\n               width: 32px;\\n               height: 32px;\\n               border-radius: 50%;\\n               font-size: 0px;\\n               border: none;\\n               box-shadow: none;\\n               margin-left: 0px;\\n               z-index: 100;\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n               \\n               margin-top: 0px;\\n               opacity: 0;\\n}\\n.s_btn:hover {\\n               opacity: 0.5;\\n               background: rgba(0, 0, 0, 0);\\n               border: none;\\n               box-shadow: none;\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n.s_btn_wr {\\n               width: 32px;\\n               height: 32px;\\n               border-radius: 50%;\\n               font-size: 0px;\\n               background-color: rgba(0, 0, 0, 0);\\n               background-position: 50%;\\n               border: none;\\n               box-shadow: none;\\n               margin-left: 5px;\\n               z-index: 100;\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n               \\n               margin-top: 6px;\\n}\\n.s_btn_wr:hover {\\n               opacity: 0.5;\\n               background: rgba(0, 0, 0, 0);\\n               border: none;\\n               box-shadow: none;\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n.self-btn {\\n               display: none;\\n}\\n.btnhover {\\n               opacity: 0.5;\\n               background-color: rgba(0, 0, 0, 0) !important;\\n               border: none !important;\\n               box-shadow: none;\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n.hint_toprq_tips {\\n               margin-bottom: 12px;\\n}\\n.s_form {\\n               height: 75px;\\n               padding-top: 10px;\\n}\\n#s_tab {\\n               padding: 87px 0 0 121px;\\n}\\n#content_right {\\n               display: none;\\n}\\n#head.s_down {\\n               box-shadow: none;\\n}\\n.bdsug {\\n               top: 42px !important;\\n               box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.16), 0 2px 10px 0 rgba(0, 0, 0, 0.12);\\n               border: none;\\n               border-radius: 0 0 2px 2px;\\n               font-family: -apple-system, \\\"Helvetica Neue\\\", Helvetica, \\\"Nimbus Sans L\\\", Arial, \\\"Liberation Sans\\\", \\\"PingFang SC\\\", \\\"Hiragino Sans GB\\\", \\\"Source Han Sans CN\\\", \\\"Source Han Sans SC\\\", \\\"Microsoft YaHei\\\", \\\"Wenquanyi Micro Hei\\\", \\\"WenQuanYi Zen Hei\\\", \\\"ST Heiti\\\", SimHei, \\\"WenQuanYi Zen Hei Sharp\\\", sans-serif;\\n               width: 598px !important;\\n}\\n.bgsug li {\\n               font-family: Helvetica, \\\"Microsoft Yahei UI\\\" !important;\\n               width: 100% !important;\\n               line-height: 36px !important;\\n}\\n.bgsug ul li {\\n               line-height: 32px !important;\\n}\\n.bdsug-overflow {\\n               font-family: Helvetica, \\\"Microsoft Yahei UI\\\" !important;\\n               width: 583px !important;\\n}\\n#quickdelete {\\n               top: 5px !important;\\n               opacity: 0.5;\\n}\\n#kw_tip {\\n               font-family: Helvetica, \\\"Microsoft Yahei UI Light\\\";\\n}\\n#result_logo {\\n               background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMTAxIDMzIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMDEgMzM7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojNDg3OUJEO30KCS5zdDF7ZmlsbDojREQ0NDM2O30KCS5zdDJ7ZmlsbDojRkZGRkZGO30KPC9zdHlsZT4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTUwLjQsMTUuM2MtMy44LDAuMy00LDIuNi01LjcsNC43Yy0xLjgsMi4yLTUuNSw0LjEtNiw2LjdjLTAuNiwzLjMsMS4zLDUuMSwzLDUuN2MxLjksMC42LDYuMi0wLjUsOC40LTAuNWgwLjIKCWgwLjJjMi4yLDAsNi40LDEuMSw4LjQsMC41YzEuOC0wLjYsMy41LTMuMiwzLTUuN2MtMC40LTIuMS00LjQtNC41LTYuMi02LjdDNTQuMiwxOCw1NC4zLDE1LjYsNTAuNCwxNS4zeiBNMzcsMTQuOAoJYzAsMi40LDEuNiw0LjMsMy40LDQuM2MxLjksMCwzLjQtMS45LDMuNC00LjNjMC0yLjQtMS42LTQuMy0zLjQtNC4zUzM3LDEyLjUsMzcsMTQuOHogTTQzLjksOC42YzAsMi41LDEuNSw0LjUsMy4zLDQuNQoJYzEuOCwwLDMuMy0yLjEsMy4zLTQuNVM0OSw0LjEsNDcuMSw0LjFDNDUuMyw0LDQzLjksNiw0My45LDguNnogTTUyLjIsOC41YzAsMi4zLDEuNCw0LjMsMy4yLDQuM3MzLjItMS45LDMuMi00LjNzLTEuNC00LjMtMy4yLTQuMwoJUzUyLjIsNi4yLDUyLjIsOC41eiBNNTcuNSwxNS45YzAsMi4zLDEuNSw0LjMsMy4zLDQuM2MxLjgsMCwzLjMtMS45LDMuMy00LjNzLTEuNS00LjMtMy4zLTQuM0M1OC45LDExLjYsNTcuNSwxMy42LDU3LjUsMTUuOXoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTQsMzAuNHYtNS4xaDYuNGMxLjYsMCwxLjYsMC4zLDEuNiwydjEuNGMwLDEuNi0yLjMsMS44LTMuOSwxLjhMNCwzMC40TDQsMzAuNHogTTQsMjN2LTQuOGg0LjEKCWMxLjYsMCwzLjksMCwzLjksMi4xdjAuMWMwLDEuNC0wLjUsMi42LTEuOCwyLjZDMTAuMywyMyw0LDIzLDQsMjN6IE0xLjcsMTZ2MTYuM2g2LjRjMywwLDYuMiwwLDYuMi0zLjZ2LTEuMWMwLTEuNi0wLjEtMi43LTEuMS0zLjUKCWMxLTAuOCwxLjEtMi4zLDEuMS0zLjZsMCwwYzAtNC41LTMuMi00LjUtNi4yLTQuNUwxLjcsMTZMMS43LDE2eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMjUsMjguOWMtMS4xLDEuMS0zLjMsMS4zLTMuNSwxLjNjLTEuMywwLTIuNy0wLjUtMi43LTIuMWMwLTEuNCwwLjUtMi4zLDIuMS0yLjNjMS4zLDAsMi44LDAuMSw0LjEsMC42VjI4Ljl6CgkgTTIxLjQsMzIuM2MwLjQsMCwyLjMtMC4xLDMuNy0wLjlsMC4yLDAuN2gyLjF2LTguOWMwLTMuNi0yLjMtNS01LjctNWMtMS44LDAtNC4zLDAuNy00LjcsMC45bDAuNCwyLjNjMS42LTAuNiwzLTAuNiw0LjItMC42CgljMS44LDAsMy4zLDAuNiwzLjMsMi42VjI0Yy0xLTAuNC0yLjQtMC42LTQuMS0wLjZjLTMsMC00LjUsMS42LTQuNSw0LjdDMTYuNCwzMS44LDE5LjYsMzIuMywyMS40LDMyLjN6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zMC4yLDE2LjFjMCwwLjYsMC42LDEuMiwxLjMsMS4yYzAuOCwwLDEuMy0wLjYsMS4zLTEuMmMwLTAuNy0wLjYtMS4zLTEuMy0xLjNDMzAuOCwxNC44LDMwLjIsMTUuMywzMC4yLDE2LjF6CgkgTTMwLjMsMzIuMWgyLjRWMTguNWgtMi40VjMyLjF6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik03MS4yLDIyLjFoOC40YzAuNCwwLjEsMC42LDAuMywwLjYsMC43djIuNmgtOS43di0yLjZDNzAuNiwyMi40LDcwLjgsMjIuMiw3MS4yLDIyLjF6IE03MS4yLDMwLjUKCWMtMC40LDAtMC42LTAuMy0wLjctMC44di0yLjZoOS43djIuNmMwLDAuNC0wLjIsMC43LTAuNiwwLjdINzEuMnogTTczLjYsMThjLTAuMSwwLjQtMC4xLDAuOS0wLjQsMS43Yy0wLjEsMC4zLTAuMSwwLjUtMC4xLDAuNwoJaC0yLjZjLTEuMywwLjEtMS45LDAuOC0yLDJ2Ny45YzAuMSwxLjEsMC44LDEuOCwyLDEuOWgxMGMxLjItMC4xLDEuOC0wLjcsMS45LTEuOHYtNy45Yy0wLjEtMS4zLTAuNy0xLjktMS45LTIuMWgtNQoJYzAuMS0wLjMsMC4xLTAuOCwwLjMtMS40YzAuMS0wLjQsMC4xLTAuNywwLjEtMC45aDcuMnYtMS44SDY3LjRWMThMNzMuNiwxOEw3My42LDE4eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNOTMuNywyMi43Yy0wLjQtMC4xLTAuNS0wLjItMC41LTAuNXYtMC42aDMuMnYwLjZjLTAuMSwwLjMtMC4yLDAuNC0wLjUsMC41SDkzLjd6IE05Ni42LDI0LjEKCWMxLjEtMC4xLDEuNi0wLjUsMS42LTEuNHYtMWgyLjN2LTEuNWgtMi4zdi0xLjFoLTEuOHYxLjFoLTMuMnYtMS4xaC0xLjh2MS4xaC0yLjN2MS41aDIuM3YxYzAuMSwwLjksMC42LDEuNCwxLjYsMS40SDk2LjZ6CgkgTTk0LjgsMzAuNGMxLjYsMC44LDMuNCwxLjMsNS40LDEuOGwwLjktMS43Yy0xLjQtMC4yLTIuOS0wLjYtNC40LTEuMWMxLjEtMC44LDItMS42LDIuNy0yLjVjMC4zLTAuNCwwLjQtMC45LDAuMi0xLjMKCWMtMC4zLTAuNi0wLjgtMC45LTEuNC0wLjloLTl2MS41aDcuN2MwLjIsMCwwLjQsMC4xLDAuNCwwLjFzMCwwLjEtMC4xLDAuM2MtMC42LDAuNi0xLjQsMS4zLTIuMywxLjhjLTEuMi0wLjctMi4xLTEuMy0yLjQtMS44aC0yLjIKCWMwLjksMSwxLjgsMS45LDIuOSwyLjdjLTEuNiwwLjYtMy4zLDEuMS00LjksMS4zbDAuOSwxLjZDOTEuMywzMS44LDkzLjIsMzEuMSw5NC44LDMwLjR6IE04OC4zLDI1LjJ2LTZjMC4xLTAuNiwwLjMtMC45LDAuOC0wLjkKCWgxMS44di0xLjZIOTVjLTAuMS0wLjEtMi4yLTAuMS0yLjIsMGgtNC43Yy0xLjEsMC4xLTEuNywwLjktMS44LDIuMlYyNWMwLjEsMi4xLTAuNCw0LjQtMS4xLDYuN2wxLjksMC42CglDODcuOSwyOS45LDg4LjMsMjcuNiw4OC4zLDI1LjJ6Ii8+CjxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik00Ni4zLDI0LjJjMC42LDAsMS4yLDAuMSwxLjcsMC40djMuNGMwLDAuMy0wLjYsMS0xLjksMWMtMS41LDAtMS44LTAuNi0xLjgtMi4xdi0wLjYKCUM0NC4yLDI0LjgsNDQuNywyNC4yLDQ2LjMsMjQuMnogTTQ5LjIsMjAuN0g0OHYyLjVDNDcuNiwyMy4xLDQ3LDIzLDQ2LjMsMjNjLTIuNywwLTMuMywxLTMuMywzLjV2MC4zYzAsMi40LDAuOSwzLjMsMy4yLDMuMwoJYzAuOCwwLDEuMy0wLjEsMS44LTAuNWwwLjEsMC42aDEuMUw0OS4yLDIwLjdMNDkuMiwyMC43eiIvPgo8cGF0aCBjbGFzcz0ic3QyIiBkPSJNNTYuNywyM2gtMS4ydjUuMmMtMC42LDAuNC0xLjcsMC42LTIuNCwwLjZjLTAuOCwwLTEtMC40LTEtMS4zdi00LjZoLTEuMXY0LjhjMCwxLjYsMC41LDIuMywyLjEsMi4zCgljMSwwLDIuMS0wLjMsMi42LTAuNmwwLjEsMC42aDEuMVYyM3oiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTkyLjcsMTUuN2MwLTAuNywwLjYtMS4zLDEuMi0xLjNjMC42LDAsMS4yLDAuNiwxLjIsMS4zUzk0LjUsMTcsOTMuOSwxN0M5My4zLDE2LjksOTIuNywxNi4zLDkyLjcsMTUuN3oiLz4KPC9zdmc+Cg==);\\n               background-repeat: no-repeat;\\n               background-position: center;\\n               width: 101px;\\n               height: 33px;\\n               margin-top: 9px;\\n}\\n#result_logo img {\\n               display: none;\\n               visibility: hidden;\\n}\\n#result_logo a img {\\n               display: none;\\n               visibility: hidden;\\n}\\n.c-container {\\n               line-height: 1.65;\\n}\\n#rs {\\n               background-color: rgba(0, 0, 0, 0) !important;\\n}\\n.c-border {\\n               -webkit-box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.16), 0 2px 10px 0 rgba(0, 0, 0, 0.12);\\n               box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.16), 0 2px 10px 0 rgba(0, 0, 0, 0.12);\\n               border-radius: 2px;\\n               border: none;\\n               padding: 20px;\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n.c-border:hover {\\n               box-shadow: 0 3px 10px rgba(0, 0, 0, 0.16), 0 3px 10px rgba(0, 0, 0, 0.23);\\n               transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n.c-tabs-nav {\\n               border: none;\\n               border-radius: 2px 2px 0 0;\\n               transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n.c-tabs-nav-movetop {\\n               margin-left: -20px;\\n               margin-right: -20px;\\n               margin-top: -20px;\\n               transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n.c-tabs-nav-selected {\\n               border-top: none !important;\\n               border-left: none !important;\\n               border-right: none !important;\\n               transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n.c-tabs-nav-sep {\\n               display: none !important;\\n}\\n#page a {\\n               height: 34px;\\n               border-radius: 2px;\\n               border: none !important;\\n               background-color: rgba(0, 0, 0, 0);\\n               transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n#page a:hover {\\n               transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n#page a .pc:hover {\\n               transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n#page strong {\\n               height: 34px;\\n               border-radius: 2px;\\n               position: relative;\\n               top: -2px;\\n               transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n#page strong .pc {\\n               line-height: 34px;\\n               transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n.fk {\\n               display: none !important;\\n}\\n.pc {\\n               border: none !important;\\n               height: 35px;\\n               transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n.pc:hover {\\n               transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: background-color 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n#s_tab a {\\n               width: 59px;\\n               line-height: 44px;\\n}\\n#s_tab b {\\n               width: 59px;\\n               line-height: 44px;\\n}\\n#s_tab {\\n               padding-bottom: 8px;\\n               padding-top: 89px;\\n}\\n.c-icon-tieba {\\n               background-repeat: no-repeat;\\n               background-position: center;\\n}\\n.toindex {\\n               display: none;\\n}\\n#u .pf {\\n               background-repeat: no-repeat;\\n               background-position: center;\\n               font-size: 0px;\\n               padding: 14px;\\n               opacity: 0.8;\\n               -moz-transition: all 0.3s ease;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 0.3s ease;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 0.3s ease;\\n               /* Opera */\\n               \\n               padding-top: 18px;\\n               padding-bottom: 10px;\\n}\\n#u .pf:hover {\\n               opacity: 1;\\n               -moz-transition: all 0.3s ease;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 0.3s ease;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 0.3s ease;\\n               /* Opera */\\n}\\n.pf .c-icon {\\n               display: none !important;\\n}\\n.c-icon-triangle-down {\\n               display: none;\\n}\\n.bdpfmenu {\\n               box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.16), 0 2px 10px 0 rgba(0, 0, 0, 0.12);\\n               border-radius: 2px !important;\\n               border: none;\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n               \\n               margin-left: -10px;\\n               margin-top: 30px;\\n               z-index: 8888 !important;\\n}\\n.bdpfmenu a:hover {\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n.bdnuarrow {\\n               display: none !important;\\n}\\n.setpref {\\n               border-radius: 2px 2px 0 0;\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n.setpref:hover {\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n#u .lb {\\n               padding: 23px;\\n               border-radius: 50px;\\n               font-size: 0px;\\n               position: absolute;\\n               right: 50px;\\n               top: 3800%;\\n               background-repeat: no-repeat;\\n               background-position: center;\\n               box-shadow: rgba(0, 0, 0, 0.156863) 0px 3px 10px, rgba(0, 0, 0, 0.227451) 0px 3px 10px;\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n#u .lb:hover {\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n#u .lb:active {\\n               box-shadow: 0 10px 30px rgba(0, 0, 0, 0.19), 0 6px 10px rgba(0, 0, 0, 0.23);\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n.tang-foreground {\\n               border-radius: 2px;\\n               box-shadow: 0 19px 60px rgba(0, 0, 0, 0.3), 0 15px 20px rgba(0, 0, 0, 0.22);\\n}\\n#s_upfunc_menus {\\n               display: none;\\n}\\n#bg {\\n               background-color: #FFF !important;\\n               border: none;\\n               border-radius: 3px;\\n               background: #FFF;\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n               \\n               background-position: 100% !important;\\n               z-index: -1;\\n               width: 600px;\\n               height: 39px;\\n               font-family: -apple-system, \\\"Helvetica Neue\\\", Helvetica, \\\"Nimbus Sans L\\\", Arial, \\\"Liberation Sans\\\", \\\"PingFang SC\\\", \\\"Hiragino Sans GB\\\", \\\"Source Han Sans CN\\\", \\\"Source Han Sans SC\\\", \\\"Microsoft YaHei\\\", \\\"Wenquanyi Micro Hei\\\", \\\"WenQuanYi Zen Hei\\\", \\\"ST Heiti\\\", SimHei, \\\"WenQuanYi Zen Hei Sharp\\\", sans-serif;\\n               padding-top: 5px !important;\\n}\\n.s_ipt {\\n               border: 0 !important;\\n               height: 20px !important;\\n               border-radius: 2px;\\n               width: 586px !important;\\n               /*margin-top: -4px !important;\\n               padding-top: 14px;*/\\n}\\n.nobg_s_fm_hover {\\n               border: 0 !important;\\n}\\n.nobg_s_fm_focus {\\n               border: 0 !important;\\n               border-top: 0px solid #fff !important;\\n               border-bottom: 0px solid #fff !important;\\n               border-left: 0px solid #fff !important;\\n               border-right: 1px solid #38f;\\n}\\n.s-title-image {\\n               border: none !important;\\n               border-top: 0px solid #fff !important;\\n               border-bottom: 0px solid #fff !important;\\n               border-left: 0px solid #fff !important;\\n               border-right: 0px solid #fff !important;\\n}\\n#s_lg_img {\\n               display: none;\\n}\\n#form {\\n               -webkit-animation-duration: 1s;\\n               animation-duration: 1s;\\n               -webkit-animation-fill-mode: both;\\n               animation-fill-mode: both;\\n               animation-name: fadeInUp;\\n               -webkit-animation-name: fadeInUp;\\n               animation-delay: 0.3s;\\n               -webkit-animation-delay: 0.3s;\\n}\\n.s-p-top {\\n               transform: scale(0.8);\\n               bottom: 9px !important;\\n}\\n.mnav {\\n               display: none;\\n}\\n#u_sp .mnav {\\n               display: none;\\n}\\n#u1 a.lb {\\n               padding: 23px;\\n               border-radius: 50%;\\n               font-size: 0px;\\n               position: absolute;\\n               right: 44px;\\n               top: 1040%;\\n               background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgNDYgNDYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ2IDQ2OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yMywyM2MyLjksMCw1LjItMi4zLDUuMi01LjJzLTIuMy01LjItNS4yLTUuMnMtNS4yLDIuMy01LjIsNS4yUzIwLjEsMjMsMjMsMjN6IE0yMywyNS42CgljLTMuNSwwLTEwLjQsMS43LTEwLjQsNS4ydjIuNmgyMC43di0yLjZDMzMuNCwyNy4zLDI2LjUsMjUuNiwyMywyNS42eiIvPgo8L3N2Zz4K);\\n               background-repeat: no-repeat;\\n               background-position: center;\\n               box-shadow: rgba(0, 0, 0, 0.156863) 0px 3px 10px, rgba(0, 0, 0, 0.227451) 0px 3px 10px;\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n               \\n               line-height: 0px;\\n               z-index: 100;\\n}\\n#u1 a.lb:hover {\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n#u1 a.lb:active {\\n               box-shadow: 0 10px 30px rgba(0, 0, 0, 0.19), 0 6px 10px rgba(0, 0, 0, 0.23);\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n}\\n#u1 a.pf {\\n               background-repeat: no-repeat;\\n               background-position: center;\\n               font-size: 0px;\\n               padding: 14px;\\n               opacity: 0.8;\\n               -moz-transition: all 0.3s ease;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 0.3s ease;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 0.3s ease;\\n               /* Opera */\\n               \\n               z-index: 0;\\n}\\n#u1 a.bri {\\n               background-color: rgba(0, 0, 0, 0);\\n               background-repeat: no-repeat;\\n               background-position: center;\\n               font-size: 0px;\\n               padding: 2px;\\n               opacity: 0.8;\\n               -moz-transition: all 0.3s ease;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 0.3s ease;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 0.3s ease;\\n               /* Opera */\\n               \\n               border: none;\\n               margin-top: 12px;\\n}\\n#wrapper .bdbriimgtitle {\\n               padding-top: 23px;\\n}\\n#wrapper .bdbri.bdbriimg .bdmainlink a {\\n               border: none;\\n}\\n#wrapper .bdbri {\\n               z-index: 2;\\n}\\n#u_sp .s_bri {\\n               padding: 5px;\\n               border-radius: 50%;\\n               font-size: 0px;\\n               width: 32px;\\n               height: 32px;\\n               background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxOS4yLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i5Zu+5bGCXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDojRkZGRkZGO30NCjwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTAsMTNoM3YtM2gtM1YxM3ogTTE0LjUsMjJoM3YtM2gtM0MxNC41LDE5LDE0LjUsMjIsMTQuNSwyMnogTTEwLDIyaDN2LTNoLTNWMjJ6IE0xMCwxNy41aDN2LTNoLTNWMTcuNXoNCgkgTTE0LjUsMTcuNWgzdi0zaC0zQzE0LjUsMTQuNSwxNC41LDE3LjUsMTQuNSwxNy41eiBNMTksMTB2M2gzdi0zSDE5eiBNMTQuNSwxM2gzdi0zaC0zQzE0LjUsMTAsMTQuNSwxMywxNC41LDEzeiBNMTksMTcuNWgzdi0zaC0zDQoJVjE3LjV6IE0xOSwyMmgzdi0zaC0zVjIyeiIvPg0KPC9zdmc+DQo=);\\n               background-repeat: no-repeat;\\n               background-position: center;\\n               box-shadow: rgba(0, 0, 0, 0.156863) 0px 3px 10px, rgba(0, 0, 0, 0.227451) 0px 3px 10px;\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               -moz-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               ;\\n               /* Opera */\\n               \\n               line-height: 0px;\\n               z-index: 100;\\n               margin-right: 22px;\\n               margin-top: 1px;\\n}\\n#u_sp .s_bdbriimgtitle {\\n               padding-top: 73px;\\n}\\n#s_usersetting_top {\\n               background-repeat: no-repeat;\\n               background-position: center;\\n               font-size: 0px;\\n               padding: 14px;\\n               opacity: 0.8;\\n               -moz-transition: all 0.3s ease;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 0.3s ease;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 0.3s ease;\\n               /* Opera */\\n               \\n               margin-top: 12px;\\n               margin-right: 4px;\\n               z-index: -100;\\n}\\n#s_top_wrap {\\n               z-index: -10;\\n}\\n#u .toindex {\\n               display: none !important;\\n}\\n#s_username_top {\\n               text-decoration: none;\\n               margin-top: 26px;\\n               margin-left: 5px;\\n               border: none;\\n               padding-left: 10px;\\n               padding-right: 10px;\\n               border-radius: 16px;\\n               margin-right: -3px;\\n}\\n.user-name {\\n               text-decoration: none !important;\\n}\\n.menu-arrow {\\n               display: none !important;\\n}\\n.s_user_name_menu {\\n               text-align: center !important;\\n}\\n.s-user-set-menu.menu-top {\\n               width: 100px;\\n}\\n.s-user-set-menu div {\\n               border: none! important;\\n               box-shadow: rgba(0, 0, 0, 0.156863) 0px 3px 10px, rgba(0, 0, 0, 0.227451) 0px 3px 10px;\\n}\\n.s-user-set-menu {\\n               padding-top: 0px;\\n               margin-top: 36px;\\n               border-radius: 2px !important;\\n}\\n.s-user-set-menu a {\\n               padding-left: 25px;\\n               -moz-transition: all 0.3s ease;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 0.3s ease;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 0.3s ease;\\n               /* Opera */\\n}\\n.s-user-set-menu a:hover {\\n               -moz-transition: all 0.3s ease;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 0.3s ease;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 0.3s ease;\\n               /* Opera */\\n}\\n#user {\\n               text-decoration: none !important;\\n               margin-top: 30px;\\n               margin-left: 5px;\\n               border: none;\\n               padding-left: 10px;\\n               padding-right: 10px;\\n               border-radius: 16px;\\n               margin-right: -3px;\\n               height: 23px;\\n               padding-top: 8px;\\n               -webkit-animation-duration: 1s;\\n               animation-duration: 1s;\\n               -webkit-animation-fill-mode: both;\\n               animation-fill-mode: both;\\n               animation-name: bounceInRight;\\n               -webkit-animation-name: bounceInRight;\\n}\\n.usermenu {\\n               border: none !important;\\n               box-shadow: rgba(0, 0, 0, 0.156863) 0px 3px 10px, rgba(0, 0, 0, 0.227451) 0px 3px 10px !important;\\n               -webkit-box-shadow: rgba(0, 0, 0, 0.156863) 0px 3px 10px, rgba(0, 0, 0, 0.227451) 0px 3px 10px !important;\\n               width: 83px;\\n               border-radius: 2px !important;\\n               top: -7px !important;\\n}\\n.username a {\\n               -moz-transition: all 0.3s ease;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 0.3s ease;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 0.3s ease;\\n               /* Opera */\\n               \\n               border-radius: 2px;\\n}\\n.username a:hover {\\n               background: #4879BD !important;\\n               -moz-transition: all 0.3s ease;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 0.3s ease;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 0.3s ease;\\n               /* Opera */\\n}\\n.username a:active {\\n               background: #4879BD !important;\\n               -moz-transition: all 0.3s ease;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 0.3s ease;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 0.3s ease;\\n               /* Opera */\\n}\\n#user .c-icon {\\n               display: none;\\n}\\n#imsg {\\n               background-repeat: no-repeat;\\n               background-position: center;\\n               font-size: 0px;\\n               padding: 14px;\\n               opacity: 0.8;\\n               -moz-transition: all 0.3s ease;\\n               /* Firefox 4 */\\n               \\n               -webkit-transition: all 0.3s ease;\\n               /* Safari 和 Chrome */\\n               \\n               -o-transition: all 0.3s ease;\\n               /* Opera */\\n               \\n               z-index: 0;\\n               padding-top: 25px;\\n               padding-bottom: 21px;\\n}\\n#imsg:hover {\\n               opacity: 1;\\n}\\n#bds-message-wrapper {\\n               top: 64px;\\n}\\n.s-mod-msg {\\n               box-shadow: rgba(0, 0, 0, 0.156863) 0px 3px 10px, rgba(0, 0, 0, 0.227451) 0px 3px 10px !important;\\n               -webkit-box-shadow: rgba(0, 0, 0, 0.156863) 0px 3px 10px, rgba(0, 0, 0, 0.227451) 0px 3px 10px !important;\\n               border-radius: 3px;\\n}\\n.msg-btn {\\n               border-radius: 2px;\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n}\\n.msg-btn:hover {\\n               border-radius: 2px;\\n               box-shadow: 0 1px 6px rgba(0, 0, 0, 0.12), 0 1px 4px rgba(0, 0, 0, 0.12);\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n}\\n.msg-btn:active {\\n               border-radius: 2px;\\n               box-shadow: rgba(0, 0, 0, 0.156863) 0px 3px 10px, rgba(0, 0, 0, 0.227451) 0px 3px 10px !important;\\n               -webkit-box-shadow: rgba(0, 0, 0, 0.156863) 0px 3px 10px, rgba(0, 0, 0, 0.227451) 0px 3px 10px !important;\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n}\\n.no-use:hover {\\n               box-shadow: none !important;\\n}\\n.top-logo img {\\n               display: none;\\n}\\n.top-logo {\\n               background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMTAxIDMzIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMDEgMzM7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojNDg3OUJEO30KCS5zdDF7ZmlsbDojREQ0NDM2O30KCS5zdDJ7ZmlsbDojRkZGRkZGO30KPC9zdHlsZT4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTUwLjQsMTUuM2MtMy44LDAuMy00LDIuNi01LjcsNC43Yy0xLjgsMi4yLTUuNSw0LjEtNiw2LjdjLTAuNiwzLjMsMS4zLDUuMSwzLDUuN2MxLjksMC42LDYuMi0wLjUsOC40LTAuNWgwLjIKCWgwLjJjMi4yLDAsNi40LDEuMSw4LjQsMC41YzEuOC0wLjYsMy41LTMuMiwzLTUuN2MtMC40LTIuMS00LjQtNC41LTYuMi02LjdDNTQuMiwxOCw1NC4zLDE1LjYsNTAuNCwxNS4zeiBNMzcsMTQuOAoJYzAsMi40LDEuNiw0LjMsMy40LDQuM2MxLjksMCwzLjQtMS45LDMuNC00LjNjMC0yLjQtMS42LTQuMy0zLjQtNC4zUzM3LDEyLjUsMzcsMTQuOHogTTQzLjksOC42YzAsMi41LDEuNSw0LjUsMy4zLDQuNQoJYzEuOCwwLDMuMy0yLjEsMy4zLTQuNVM0OSw0LjEsNDcuMSw0LjFDNDUuMyw0LDQzLjksNiw0My45LDguNnogTTUyLjIsOC41YzAsMi4zLDEuNCw0LjMsMy4yLDQuM3MzLjItMS45LDMuMi00LjNzLTEuNC00LjMtMy4yLTQuMwoJUzUyLjIsNi4yLDUyLjIsOC41eiBNNTcuNSwxNS45YzAsMi4zLDEuNSw0LjMsMy4zLDQuM2MxLjgsMCwzLjMtMS45LDMuMy00LjNzLTEuNS00LjMtMy4zLTQuM0M1OC45LDExLjYsNTcuNSwxMy42LDU3LjUsMTUuOXoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTQsMzAuNHYtNS4xaDYuNGMxLjYsMCwxLjYsMC4zLDEuNiwydjEuNGMwLDEuNi0yLjMsMS44LTMuOSwxLjhMNCwzMC40TDQsMzAuNHogTTQsMjN2LTQuOGg0LjEKCWMxLjYsMCwzLjksMCwzLjksMi4xdjAuMWMwLDEuNC0wLjUsMi42LTEuOCwyLjZDMTAuMywyMyw0LDIzLDQsMjN6IE0xLjcsMTZ2MTYuM2g2LjRjMywwLDYuMiwwLDYuMi0zLjZ2LTEuMWMwLTEuNi0wLjEtMi43LTEuMS0zLjUKCWMxLTAuOCwxLjEtMi4zLDEuMS0zLjZsMCwwYzAtNC41LTMuMi00LjUtNi4yLTQuNUwxLjcsMTZMMS43LDE2eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMjUsMjguOWMtMS4xLDEuMS0zLjMsMS4zLTMuNSwxLjNjLTEuMywwLTIuNy0wLjUtMi43LTIuMWMwLTEuNCwwLjUtMi4zLDIuMS0yLjNjMS4zLDAsMi44LDAuMSw0LjEsMC42VjI4Ljl6CgkgTTIxLjQsMzIuM2MwLjQsMCwyLjMtMC4xLDMuNy0wLjlsMC4yLDAuN2gyLjF2LTguOWMwLTMuNi0yLjMtNS01LjctNWMtMS44LDAtNC4zLDAuNy00LjcsMC45bDAuNCwyLjNjMS42LTAuNiwzLTAuNiw0LjItMC42CgljMS44LDAsMy4zLDAuNiwzLjMsMi42VjI0Yy0xLTAuNC0yLjQtMC42LTQuMS0wLjZjLTMsMC00LjUsMS42LTQuNSw0LjdDMTYuNCwzMS44LDE5LjYsMzIuMywyMS40LDMyLjN6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zMC4yLDE2LjFjMCwwLjYsMC42LDEuMiwxLjMsMS4yYzAuOCwwLDEuMy0wLjYsMS4zLTEuMmMwLTAuNy0wLjYtMS4zLTEuMy0xLjNDMzAuOCwxNC44LDMwLjIsMTUuMywzMC4yLDE2LjF6CgkgTTMwLjMsMzIuMWgyLjRWMTguNWgtMi40VjMyLjF6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik03MS4yLDIyLjFoOC40YzAuNCwwLjEsMC42LDAuMywwLjYsMC43djIuNmgtOS43di0yLjZDNzAuNiwyMi40LDcwLjgsMjIuMiw3MS4yLDIyLjF6IE03MS4yLDMwLjUKCWMtMC40LDAtMC42LTAuMy0wLjctMC44di0yLjZoOS43djIuNmMwLDAuNC0wLjIsMC43LTAuNiwwLjdINzEuMnogTTczLjYsMThjLTAuMSwwLjQtMC4xLDAuOS0wLjQsMS43Yy0wLjEsMC4zLTAuMSwwLjUtMC4xLDAuNwoJaC0yLjZjLTEuMywwLjEtMS45LDAuOC0yLDJ2Ny45YzAuMSwxLjEsMC44LDEuOCwyLDEuOWgxMGMxLjItMC4xLDEuOC0wLjcsMS45LTEuOHYtNy45Yy0wLjEtMS4zLTAuNy0xLjktMS45LTIuMWgtNQoJYzAuMS0wLjMsMC4xLTAuOCwwLjMtMS40YzAuMS0wLjQsMC4xLTAuNywwLjEtMC45aDcuMnYtMS44SDY3LjRWMThMNzMuNiwxOEw3My42LDE4eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNOTMuNywyMi43Yy0wLjQtMC4xLTAuNS0wLjItMC41LTAuNXYtMC42aDMuMnYwLjZjLTAuMSwwLjMtMC4yLDAuNC0wLjUsMC41SDkzLjd6IE05Ni42LDI0LjEKCWMxLjEtMC4xLDEuNi0wLjUsMS42LTEuNHYtMWgyLjN2LTEuNWgtMi4zdi0xLjFoLTEuOHYxLjFoLTMuMnYtMS4xaC0xLjh2MS4xaC0yLjN2MS41aDIuM3YxYzAuMSwwLjksMC42LDEuNCwxLjYsMS40SDk2LjZ6CgkgTTk0LjgsMzAuNGMxLjYsMC44LDMuNCwxLjMsNS40LDEuOGwwLjktMS43Yy0xLjQtMC4yLTIuOS0wLjYtNC40LTEuMWMxLjEtMC44LDItMS42LDIuNy0yLjVjMC4zLTAuNCwwLjQtMC45LDAuMi0xLjMKCWMtMC4zLTAuNi0wLjgtMC45LTEuNC0wLjloLTl2MS41aDcuN2MwLjIsMCwwLjQsMC4xLDAuNCwwLjFzMCwwLjEtMC4xLDAuM2MtMC42LDAuNi0xLjQsMS4zLTIuMywxLjhjLTEuMi0wLjctMi4xLTEuMy0yLjQtMS44aC0yLjIKCWMwLjksMSwxLjgsMS45LDIuOSwyLjdjLTEuNiwwLjYtMy4zLDEuMS00LjksMS4zbDAuOSwxLjZDOTEuMywzMS44LDkzLjIsMzEuMSw5NC44LDMwLjR6IE04OC4zLDI1LjJ2LTZjMC4xLTAuNiwwLjMtMC45LDAuOC0wLjkKCWgxMS44di0xLjZIOTVjLTAuMS0wLjEtMi4yLTAuMS0yLjIsMGgtNC43Yy0xLjEsMC4xLTEuNywwLjktMS44LDIuMlYyNWMwLjEsMi4xLTAuNCw0LjQtMS4xLDYuN2wxLjksMC42CglDODcuOSwyOS45LDg4LjMsMjcuNiw4OC4zLDI1LjJ6Ii8+CjxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik00Ni4zLDI0LjJjMC42LDAsMS4yLDAuMSwxLjcsMC40djMuNGMwLDAuMy0wLjYsMS0xLjksMWMtMS41LDAtMS44LTAuNi0xLjgtMi4xdi0wLjYKCUM0NC4yLDI0LjgsNDQuNywyNC4yLDQ2LjMsMjQuMnogTTQ5LjIsMjAuN0g0OHYyLjVDNDcuNiwyMy4xLDQ3LDIzLDQ2LjMsMjNjLTIuNywwLTMuMywxLTMuMywzLjV2MC4zYzAsMi40LDAuOSwzLjMsMy4yLDMuMwoJYzAuOCwwLDEuMy0wLjEsMS44LTAuNWwwLjEsMC42aDEuMUw0OS4yLDIwLjdMNDkuMiwyMC43eiIvPgo8cGF0aCBjbGFzcz0ic3QyIiBkPSJNNTYuNywyM2gtMS4ydjUuMmMtMC42LDAuNC0xLjcsMC42LTIuNCwwLjZjLTAuOCwwLTEtMC40LTEtMS4zdi00LjZoLTEuMXY0LjhjMCwxLjYsMC41LDIuMywyLjEsMi4zCgljMSwwLDIuMS0wLjMsMi42LTAuNmwwLjEsMC42aDEuMVYyM3oiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTkyLjcsMTUuN2MwLTAuNywwLjYtMS4zLDEuMi0xLjNjMC42LDAsMS4yLDAuNiwxLjIsMS4zUzk0LjUsMTcsOTMuOSwxN0M5My4zLDE2LjksOTIuNywxNi4zLDkyLjcsMTUuN3oiLz4KPC9zdmc+Cg==);\\n               background-repeat: no-repeat;\\n               background-position: center;\\n               height: 100px;\\n               width: 200px;\\n}\\n#u_sp .s_bri {\\n               border: 0 !important;\\n}\\n.pass-text-input {\\n               background-image: none !important;\\n}\\n.pass-text-input-focus {\\n               background-image: none !important;\\n}\\n#passport-login-pop {\\n               font-family: -apple-system, \\\"Helvetica Neue\\\", Helvetica, \\\"Nimbus Sans L\\\", Arial, \\\"Liberation Sans\\\", \\\"PingFang SC\\\", \\\"Hiragino Sans GB\\\", \\\"Source Han Sans CN\\\", \\\"Source Han Sans SC\\\", \\\"Microsoft YaHei\\\", \\\"Wenquanyi Micro Hei\\\", \\\"WenQuanYi Zen Hei\\\", \\\"ST Heiti\\\", SimHei, \\\"WenQuanYi Zen Hei Sharp\\\", sans-serif;\\n               border-radius: 2px;\\n}\\n#TANGRAM__PSP_2__titleText {\\n               font-family: Helvetica, \\\"Microsoft Yahei UI Light\\\";\\n}\\n.pass-fgtpwd {\\n               font-family: Helvetica, \\\"Microsoft Yahei UI\\\" !important;\\n}\\n.pass-sms-btn {\\n               font-family: Helvetica, \\\"Microsoft Yahei UI\\\" !important;\\n}\\n.pass-reglink {\\n               font-family: Helvetica, \\\"Microsoft Yahei UI\\\" !important;\\n}\\n.tang-foreground {\\n               border-radius: 2px !important;\\n               border: 0 !important;\\n}\\n.tang-title {\\n               border-radius: 2px 2px 0 0 !important;\\n}\\n.tang-pass-pop-login div.tang-title {\\n               border-radius: 2px 2px 0 0 !important;\\n}\\n.pass-checkbox-input {\\n               width: 17px;\\n               height: 17px;\\n               border: #e0e0e0 3px solid !important;\\n               background-color: #fff !important;\\n               box-shadow: none;\\n}\\n.tang-pass-pop-login-color-blue .pass-button:focus {\\n               box-shadow: rgba(0, 0, 0, 0.156863) 0px 3px 10px, rgba(0, 0, 0, 0.227451) 0px 3px 10px !important;\\n               -webkit-box-shadow: rgba(0, 0, 0, 0.156863) 0px 3px 10px, rgba(0, 0, 0, 0.227451) 0px 3px 10px !important;\\n}\\n#content_right,\\n.c-recommend,\\nbody > div[class=\\\"result-op xpath-log\\\"] {\\n               display: none !important;\\n}\\n.rrecom-btn-parent {\\n               display: none !important;\\n}\\n.s-p-top {\\n               bottom: -8px !important;\\n}\\n\\ninput[type=\\\"text\\\"]:focus {\\n               border: none !important;\\n               border-top: 0px solid #fff !important;\\n               border-bottom: 0px solid #fff !important;\\n               border-left: 0px solid #fff !important;\\n               border-right: 0px solid #fff !important;\\n}\\n\\na[soft_id] {\\n               display: none;\\n}\\n\\n.op-soft-btnbox .c-gap-left-small {\\n    margin-left: 0px !important;\\n    color: #fff;\\n    background-color: #4879BD;\\n    padding: 7px 15px;\\n    border-radius: 2px;\\n    font-size: 14px;\\n    transition: all 0.3s ease;\\n}\\n\\n.op-soft-btnbox .c-gap-left-small:hover {\\n    background-color: #7098D0;\\n    transition: all 0.3s ease;\\n    box-shadow: 0 2px 5px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12);\\n}\\n\\n.soutu-input-image{\\n    top: 6px;\\n    left: 5px;            \\n}\\n\\n.op-soft-btnbox a:before {\\n    content: \\\"没有流氓的\\\";\\n}\\n\\n#kw{\\n    background-color:transparent;\\n}\\n.s-skin-hasbg #kw {\\n        box-shadow: 0 0px 0px rgba(0,0,0,0.2);\\n}\\n.s-skin-hasbg .btn_wr {\\n    width: 35px;\\n}\\n\\n#s_usersetting_top {\\n    margin-top:-7px;\\n}\\n#s_username_top {\\n    margin-top: 7px;\\n}\\n#u_sp {\\n    padding-top:16px;\\n}\\n.ipt_rec{\\n    background:none;\\n    background-image:none;\\n}\\n.ipt_rec:hover{\\n    background:none;\\n    background-image:none;\\n}\\n.ipt_rec:after{\\n    display:none;\\n    margin-top:50px;\\n}\\n.bdpfmenu, .usermenu {\\nborder: none;\\nbox-shadow: none;\\n-webkit-box-shadow: none;\\n-moz-box-shadow: none;\\n-o-box-shadow: none;\\n}\\n\\n.qrcodeCon {\\nvisibility: hidden;\\n}\\n\\n#head .headBlock {\\n    margin: 12px 0 6px 121px;\\n}\\n\\n#s_lg_img_new {\\ndisplay: none !important;\\n}\\n\\n@media screen and (min-width: 1921px){\\n.head_wrapper {\\n    left: 52px;\\n    width: 100vw;\\n}\\n}\\n\\n/*========= Light Mode ========= */\\n\\na {\\n               color: #4879BD;\\n}\\n\\nh3 a:hover {\\n               border-bottom: #4879BD 1.2px solid;\\n}\\n\\n.c-showurl {\\n               color: #4CAF50;\\n}\\n\\n.op-se-listen-recommend:hover {\\n               border-bottom: #4879BD 1.2px solid;\\n}\\n\\n.c-gap-bottom-small a:hover {\\n               border-bottom: #4879BD 1.2px solid;\\n}\\n.c-row a:hover {\\n               border-bottom: #4879BD 1.2px solid;\\n}\\n#rs a:hover {\\n               border-bottom: #4879BD 1.2px solid;\\n}\\n.hint_toprq_tips_items a:hover {\\n               border-bottom: #4879BD 1.2px solid;\\n}\\n.c:hover {\\n               border-bottom: #4879BD 1.2px solid;\\n}\\n\\nem {\\n               color: #EA4335;\\n}\\n\\n\\n/*页面背景*/\\nbody {\\n               background-color: #F7F7F7;\\n}\\n\\n\\n/*输入框*/\\n.s_ipt_wr {\\n               background-color: #FFF !important;               \\n               background: #FFF;            \\n}\\n\\n.s_ipt_wr:hover {\\n               background-color: #FFF !important;\\n               background: #FFF;\\n}\\n\\n.ipthover {\\n               background-color: #FFF !important;\\n}\\n\\n.iptfocus {\\n               background-color: #fff !important;\\n}\\n\\n\\n/*按钮*/\\n.s_btn {\\n               background-color: rgba(0, 0, 0, 0);\\n}\\n\\n\\n/*头部*/\\n#head {\\n               background-color: #f1f1f1;\\n}\\n\\n.c-border{\\n\\t           background-color: #fff;\\n}\\n\\n\\n/*分类标签*/\\n.c-tabs-nav {\\n               background-color: #EEEEEE;\\n}\\n\\n.c-tabs-nav-selected {\\n               border-bottom: #F44336 2px solid !important;\\n\\t           background-color: #2196F3 !important;\\n               color: #fff !important;\\n}\\n\\n\\n/*页码*/\\n#page a{\\n\\t           background: #fff;\\n\\t           color: #424242;\\n}\\n\\n#page a:hover{\\n               background-color: #e0e0e0 !important;\\n}\\n\\n#page a .pc:hover {\\n               background-color: #e0e0e0;\\n}\\n\\n#page strong {\\n               background-color: #4285F4 !important;\\n               color: #fff;\\n}\\n\\n#page strong .pc {\\n               background-color: #4285F4 !important;\\n}\\n\\n.pc:hover {\\n               background-color: #e0e0e0;\\n}\\n\\n#s_tab b {\\n               border-bottom: 3px #4879BD solid;\\n               color: #4879BD;\\n}\\n\\n#s_tab {\\n               border-bottom: #e0e0e0 1px solid;\\n}\\n\\n.bdpfmenu a:hover {\\n               background-color: #4879BD !important;\\n}\\n\\n.setpref:hover {\\n               background-color: #4879BD !important;\\n}\\n\\n#u .lb {\\n               background-color: #4879BD;\\n}\\n\\n#u .lb:hover {\\n               background-color: #618CC7;\\n}\\n\\n#u .lb:active {\\n               background-color: #7DA0D0;\\n}\\n\\n#bg {\\n               background-color: #FFF !important;\\n               background: #FFF;\\n}\\n\\n#u1 a.lb {\\n               background-color: #4879BD;\\n}\\n\\n#u1 a.lb:hover {\\n               background-color: #618CC7;\\n}\\n\\n#u1 a.lb:active {\\n               background-color: #7DA0D0;\\n}\\n\\n#u_sp .s_bri {\\n               background-color: #F44336;\\n}\\n\\n#s_username_top {\\n               background-color: #e0e0e0;\\n}\\n\\n.s-user-set-menu a:hover {\\n               background-color: #4879BD !important;\\n}\\n\\n#user {\\n               background-color: #e0e0e0;\\n}\\n\\n.msg-setting-btn {\\n               background-color: #4879BD !important;\\n}\\n.no-use {\\n               background-color: #E5E5E5 !important;\\n}\\n\\n.pass-text-input {\\n               border-bottom: #e0e0e0 2px solid !important;\\n               border-left: #fff 0px solid !important;\\n               border-right: #fff 0px solid !important;\\n               border-top: #fff 0px solid !important;\\n}\\n\\n.pass-text-input-focus {\\n               border-bottom: #4879BD 2px solid !important;\\n               border-left: #fff 0px solid !important;\\n               border-right: #fff 0px solid !important;\\n               border-top: #fff 0px solid !important;\\n}              \\n\\n.tang-pass-pop-login-color-blue .pass-button {\\n               background-color: #4879BD;\\n}\\n.tang-pass-pop-login-color-blue .pass-button:hover {\\n               background-color: #618CC7;\\n}\\n\\n\\n/* icons*/\\n#lg {\\n               background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxOS4yLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i5bGCXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMjU5IDExNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMjU5IDExNjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2ZpbGw6IzQyODVGNDt9DQoJLnN0MXtmaWxsOiNFQTQzMzU7fQ0KCS5zdDJ7ZmlsbDojRkZGRkZGO30NCjwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTI4LjIsNzdjLTUuNCwwLjQtNS42LDMuNy04LjEsNi43Yy0yLjUsMy4xLTcuNyw1LjgtOC40LDkuNWMtMC44LDQuNywxLjgsNy4yLDQuMyw4YzIuNywwLjksOC44LTAuNywxMS45LTAuNw0KCWgwLjNoMC4zYzMuMSwwLDkuMSwxLjYsMTEuOSwwLjdjMi41LTAuOSw0LjktNC41LDQuMy04Yy0wLjUtMy02LjItNi40LTguNy05LjVDMTMzLjYsODAuNywxMzMuNyw3Ny40LDEyOC4yLDc3eiBNMTA5LjMsNzYuMw0KCWMwLDMuNCwyLjIsNi4xLDQuOCw2LjFjMi43LDAsNC44LTIuNyw0LjgtNi4xcy0yLjItNi4xLTQuOC02LjFTMTA5LjMsNzMsMTA5LjMsNzYuM3ogTTExOSw2Ny41YzAsMy41LDIuMSw2LjQsNC42LDYuNA0KCWMyLjYsMCw0LjctMi45LDQuNy02LjRzLTIuMS02LjQtNC43LTYuNEMxMjEsNjEsMTE5LDYzLjksMTE5LDY3LjV6IE0xMzAuNyw2Ny40YzAsMy4zLDIsNiw0LjUsNnM0LjUtMi43LDQuNS02YzAtMy4zLTItNi00LjUtNg0KCVMxMzAuNyw2NC4xLDEzMC43LDY3LjR6IE0xMzguMiw3Ny44YzAsMy4zLDIuMSw2LDQuNiw2YzIuNiwwLDQuNy0yLjcsNC43LTZjMC0zLjMtMi4xLTYtNC43LTZDMTQwLjIsNzEuOCwxMzguMiw3NC41LDEzOC4yLDc3Ljh6Ig0KCS8+DQo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNjIuOCw5OC4yVjkxaDljMi4yLDAsMi4zLDAuNCwyLjMsMi44djJjMCwyLjMtMy4yLDIuNS01LjUsMi41aC01LjhWOTguMnogTTYyLjgsODcuOFY4MWg1LjgNCgljMi4zLDAsNS41LDAsNS41LDN2MC4xYzAsMi0wLjcsMy43LTIuNSwzLjdDNzEuNiw4Ny44LDYyLjgsODcuOCw2Mi44LDg3Ljh6IE01OS41LDc3Ljl2MjNoOS4xYzQuMywwLDguNywwLDguNy01LjF2LTEuNQ0KCWMwLTIuMy0wLjItMy44LTEuNS00LjljMS40LTEuMSwxLjUtMy4yLDEuNS01LjFsMCwwYzAtNi4zLTQuNS02LjMtOC43LTYuM0w1OS41LDc3LjlMNTkuNSw3Ny45eiIvPg0KPHBhdGggY2xhc3M9InN0MSIgZD0iTTkyLjQsOTYuMWMtMS41LDEuNi00LjYsMS44LTQuOSwxLjhjLTEuOSwwLTMuOC0wLjctMy44LTIuOWMwLTIsMC43LTMuMywyLjktMy4zYzEuOCwwLDQsMC4yLDUuOCwwLjhWOTYuMXoNCgkgTTg3LjMsMTAwLjljMC41LDAsMy4zLTAuMiw1LjItMS4zbDAuMywxaDIuOVY4OGMwLTUuMS0zLjItNy4xLTgtNy4xYy0yLjUsMC02LjEsMS02LjYsMS4ybDAuNiwzLjJjMi4yLTAuOCw0LjItMC45LDUuOS0wLjkNCgljMi42LDAsNC42LDAuOSw0LjYsMy43djEuMWMtMS40LTAuNS0zLjQtMC45LTUuOC0wLjljLTQuMiwwLTYuMywyLjMtNi4zLDYuNkM4MC4zLDEwMC4zLDg0LjcsMTAwLjksODcuMywxMDAuOXoiLz4NCjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik05OS43LDc4LjFjMCwwLjksMC45LDEuNywxLjgsMS43YzEuMSwwLDEuOS0wLjgsMS45LTEuN2MwLTEtMC44LTEuOC0xLjktMS44QzEwMC42LDc2LjMsOTkuNyw3Nyw5OS43LDc4LjF6DQoJIE05OS45LDEwMC42aDMuNFY4MS41aC0zLjRWMTAwLjZ6Ii8+DQo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMTU3LjYsODYuNmgxMS44YzAuNSwwLjEsMC44LDAuNCwwLjksMXYzLjZoLTEzLjd2LTMuNkMxNTYuNyw4NywxNTcsODYuNywxNTcuNiw4Ni42eiBNMTU3LjYsOTguNA0KCWMtMC42LDAtMC45LTAuNC0xLTEuMXYtMy42aDEzLjd2My43YzAsMC42LTAuMywxLTAuOSwxSDE1Ny42eiBNMTYwLjksODAuN2MtMC4xLDAuNS0wLjIsMS4zLTAuNSwyLjRjLTAuMSwwLjQtMC4xLDAuNy0wLjIsMWgtMy43DQoJYy0xLjgsMC4xLTIuNywxLjEtMi44LDIuOFY5OGMwLjEsMS42LDEuMSwyLjUsMi44LDIuN2gxNC4xYzEuNy0wLjEsMi42LTEsMi43LTIuNVY4N2MtMC4xLTEuOC0xLTIuNy0yLjctMi45aC03DQoJYzAuMS0wLjQsMC4yLTEuMSwwLjQtMmMwLjEtMC42LDAuMS0xLDAuMi0xLjNoMTAuMnYtMi42aC0yMi4ydjIuNkwxNjAuOSw4MC43TDE2MC45LDgwLjd6Ii8+DQo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMTg5LjQsODcuNGMtMC41LTAuMS0wLjctMC4zLTAuNy0wLjd2LTAuOWg0LjV2MC45Yy0wLjEsMC40LTAuMywwLjYtMC43LDAuN0gxODkuNHogTTE5My40LDg5LjQNCgljMS41LTAuMSwyLjItMC43LDIuMy0yVjg2aDMuMnYtMi4xaC0zLjJ2LTEuNmgtMi41djEuNmgtNC41di0xLjZoLTIuNnYxLjZoLTMuMlY4NmgzLjJ2MS40YzAuMSwxLjMsMC44LDIsMi4yLDJIMTkzLjR6IE0xOTAuOSw5OC4zDQoJYzIuMywxLjEsNC44LDEuOSw3LjYsMi42bDEuMi0yLjRjLTItMC4zLTQuMS0wLjgtNi4yLTEuNmMxLjUtMS4xLDIuOC0yLjIsMy44LTMuNWMwLjQtMC42LDAuNS0xLjIsMC4zLTEuOWMtMC40LTAuOC0xLjEtMS4yLTItMS4yDQoJaC0xMi43djIuMWgxMC44YzAuMywwLDAuNSwwLjEsMC42LDAuMnMwLDAuMi0wLjIsMC40Yy0wLjksMC45LTIsMS44LTMuMywyLjZjLTEuNy0xLTIuOS0xLjktMy40LTIuNmgtMy4xYzEuMiwxLjQsMi42LDIuNyw0LjEsMy44DQoJYy0yLjMsMC45LTQuNiwxLjUtNi45LDEuOGwxLjMsMi4yQzE4NS45LDEwMC4yLDE4OC42LDk5LjMsMTkwLjksOTguM3ogTTE4MS43LDkwLjl2LTguNWMwLjEtMC44LDAuNC0xLjIsMS4xLTEuM2gxNi43di0yLjNoLTguMw0KCWMtMC4xLTAuMi0zLjEtMC4xLTMuMSwwaC02LjdjLTEuNSwwLjItMi40LDEuMy0yLjUsMy4xdjguN2MwLjEsMy0wLjUsNi4yLTEuNiw5LjRsMi43LDAuOEMxODEuMSw5Ny42LDE4MS43LDk0LjMsMTgxLjcsOTAuOXoiLz4NCjxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0xMjIuNSw4OS41YzAuOCwwLDEuNywwLjIsMi40LDAuNXY0LjhjMCwwLjQtMC45LDEuNC0yLjcsMS40Yy0yLjEsMC0yLjYtMC45LTIuNi0yLjl2LTAuOA0KCUMxMTkuNSw5MC40LDEyMC4yLDg5LjUsMTIyLjUsODkuNXogTTEyNi42LDg0LjZoLTEuN3YzLjVjLTAuNi0wLjItMS41LTAuMy0yLjQtMC4zYy0zLjgsMC00LjYsMS40LTQuNiw0Ljl2MC40DQoJYzAsMy40LDEuMyw0LjYsNC41LDQuNmMxLjEsMCwxLjktMC4yLDIuNi0wLjdsMC4yLDAuOGgxLjVMMTI2LjYsODQuNkwxMjYuNiw4NC42eiIvPg0KPHBhdGggY2xhc3M9InN0MiIgZD0iTTEzNy4xLDg3LjhoLTEuN3Y3LjRjLTAuOSwwLjUtMi40LDAuOC0zLjQsMC44Yy0xLjEsMC0xLjQtMC42LTEuNC0xLjl2LTYuNUgxMjl2Ni44YzAsMi4zLDAuNywzLjIsMi45LDMuMg0KCWMxLjQsMCwyLjktMC40LDMuNi0wLjhsMC4xLDAuOGgxLjVWODcuOHoiLz4NCjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xODcuOSw3Ny41YzAtMSwwLjgtMS44LDEuNy0xLjhzMS43LDAuOCwxLjcsMS44cy0wLjgsMS44LTEuNywxLjhDMTg4LjcsNzkuMiwxODcuOSw3OC40LDE4Ny45LDc3LjV6Ii8+DQo8L3N2Zz4NCg==);\\n}\\n\\n.s_btn {\\n               background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzQ3NzlCRDt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xNC44LDIxLjVjLTAuNCwwLTAuNywwLTEuMS0wLjFjLTIuMS0wLjMtMy45LTEuNC01LjItM2MtMS4zLTEuNy0xLjgtMy43LTEuNi01LjhjMC4zLTIuMSwxLjQtMy45LDMtNS4yCgljMS43LTEuMywzLjgtMS44LDUuOC0xLjZjMi4xLDAuMywzLjksMS40LDUuMiwzYzEuMywxLjcsMS44LDMuOCwxLjYsNS44Yy0wLjMsMi4xLTEuNCwzLjktMyw1LjJDMTguMiwyMSwxNi41LDIxLjUsMTQuOCwyMS41egoJIE0xNC44LDguMWMtMS4yLDAtMi40LDAuNC0zLjMsMS4xYy0yLjQsMS44LTIuOSw1LjMtMSw3LjdjMS44LDIuNCw1LjMsMi45LDcuNywxYzEuMi0wLjksMS45LTIuMiwyLjEtMy42YzAuMi0xLjUtMC4yLTIuOS0xLjEtNC4xCglTMTcsOC40LDE1LjUsOC4yQzE1LjMsOC4yLDE1LDguMSwxNC44LDguMXoiLz4KPGc+Cgk8Zz4KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjUuMywyNy41TDI1LjMsMjcuNWMtMC42LDAuNC0xLjQsMC4zLTEuOC0wLjJsLTUuMS02LjdjLTAuNC0wLjYtMC4zLTEuNCwwLjItMS44bDAsMAoJCQljMC42LTAuNCwxLjQtMC4zLDEuOCwwLjJsNS4xLDYuN0MyNiwyNi4zLDI1LjksMjcuMSwyNS4zLDI3LjV6Ii8+Cgk8L2c+CjwvZz4KPC9zdmc+Cg==) !important;\\n}\\n\\n.s_btn_wr {\\n               background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzQ3NzlCRDt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xNC44LDIxLjVjLTAuNCwwLTAuNywwLTEuMS0wLjFjLTIuMS0wLjMtMy45LTEuNC01LjItM2MtMS4zLTEuNy0xLjgtMy43LTEuNi01LjhjMC4zLTIuMSwxLjQtMy45LDMtNS4yCgljMS43LTEuMywzLjgtMS44LDUuOC0xLjZjMi4xLDAuMywzLjksMS40LDUuMiwzYzEuMywxLjcsMS44LDMuOCwxLjYsNS44Yy0wLjMsMi4xLTEuNCwzLjktMyw1LjJDMTguMiwyMSwxNi41LDIxLjUsMTQuOCwyMS41egoJIE0xNC44LDguMWMtMS4yLDAtMi40LDAuNC0zLjMsMS4xYy0yLjQsMS44LTIuOSw1LjMtMSw3LjdjMS44LDIuNCw1LjMsMi45LDcuNywxYzEuMi0wLjksMS45LTIuMiwyLjEtMy42YzAuMi0xLjUtMC4yLTIuOS0xLjEtNC4xCglTMTcsOC40LDE1LjUsOC4yQzE1LjMsOC4yLDE1LDguMSwxNC44LDguMXoiLz4KPGc+Cgk8Zz4KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjUuMywyNy41TDI1LjMsMjcuNWMtMC42LDAuNC0xLjQsMC4zLTEuOC0wLjJsLTUuMS02LjdjLTAuNC0wLjYtMC4zLTEuNCwwLjItMS44bDAsMAoJCQljMC42LTAuNCwxLjQtMC4zLDEuOCwwLjJsNS4xLDYuN0MyNiwyNi4zLDI1LjksMjcuMSwyNS4zLDI3LjV6Ii8+Cgk8L2c+CjwvZz4KPC9zdmc+Cg==) !important;\\n\\n}\\n\\n.c-icon-tieba {\\n               background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMjQgMjQiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDI0IDI0OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzM3QUJFMzt9Cgkuc3Qxe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yMC45LDIzLjNIMy4xYy0xLjEsMC0yLTAuOS0yLTJWMi44YzAtMS4xLDAuOS0yLDItMmgxNy44YzEuMSwwLDIsMC45LDIsMnYxOC41QzIyLjksMjIuNCwyMiwyMy4zLDIwLjksMjMuM3oiCgkvPgo8Zz4KCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik01LjIsMTkuOUw0LDE5LjJjMS41LTEuOSwyLjMtMy45LDIuNC01LjhjMC0xLDAuMS0zLjEsMC4xLTYuM0g4YzAsMi4yLDAsNC4zLTAuMSw2LjRjMCwwLjYtMC4xLDEuMi0wLjMsMS44CgkJaDEuMWMwLjUsMC44LDEuMiwyLjQsMi4yLDQuNkg5Yy0wLjYtMS41LTEuMi0yLjgtMS42LTMuOUM3LDE3LjIsNi4zLDE4LjYsNS4yLDE5Ljl6IE00LjEsMTQuOFY2LjFjMC0xLjIsMC41LTEuOCwxLjYtMS44aDMKCQljMSwwLDEuNiwwLjcsMS42LDEuOHY4LjZIOC45VjYuM2MwLTAuNC0wLjMtMC42LTAuNi0wLjZoLTJjLTAuNCwwLTAuNiwwLjItMC42LDAuNnY4LjVINC4xeiBNMTIuOSwxOS41Yy0xLjEsMC0xLjctMC42LTEuOC0xLjZWMTMKCQljMC0xLjEsMC43LTEuNywxLjgtMS44aDFWNC4xaDEuN3YyLjVIMjBWOGgtNC4zdjMuMmgxLjhjMS4xLDAsMS43LDAuNywxLjgsMS44djQuOGMwLDEuMS0wLjYsMS42LTEuOCwxLjdIMTIuOXogTTEyLjgsMTMuM3Y0LjMKCQljMCwwLjQsMC4zLDAuNywwLjcsMC43aDMuMmMwLjUsMCwwLjctMC4zLDAuOC0wLjd2LTQuNGMwLTAuNC0wLjMtMC43LTAuNy0wLjdoLTMuM0MxMy4xLDEyLjYsMTIuOSwxMi44LDEyLjgsMTMuM3oiLz4KPC9nPgo8L3N2Zz4K);\\n}\\n\\n#u .pf {\\n               background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzZENkQ2RDt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yNS4yLDE3LjJjMC0wLjQsMC4xLTAuOCwwLjEtMS4yYzAtMC40LDAtMC44LTAuMS0xLjJsMi42LTJjMC4yLTAuMiwwLjMtMC41LDAuMS0wLjhsLTIuNS00LjMKCWMtMC4xLTAuMy0wLjUtMC40LTAuOC0wLjNsLTMuMSwxLjJjLTAuNi0wLjUtMS4zLTAuOS0yLjEtMS4ybC0wLjUtMy4zYzAtMC4zLTAuMy0wLjUtMC42LTAuNWgtNWMtMC4zLDAtMC42LDAuMi0wLjYsMC41bC0wLjUsMy4zCgljLTAuOCwwLjMtMS40LDAuNy0yLjEsMS4yTDcuMyw3LjRDNyw3LjMsNi43LDcuNCw2LjUsNy43TDQsMTEuOWMtMC4yLDAuMy0wLjEsMC42LDAuMSwwLjhsMi42LDJjMCwwLjQtMC4xLDAuOC0wLjEsMS4yCgljMCwwLjQsMCwwLjgsMC4xLDEuMmwtMi42LDJjLTAuMiwwLjItMC4zLDAuNS0wLjEsMC44bDIuNSw0LjNjMC4xLDAuMywwLjUsMC40LDAuOCwwLjNsMy4xLTEuMmMwLjYsMC41LDEuMywwLjksMi4xLDEuMmwwLjUsMy4zCgljMCwwLjMsMC4zLDAuNSwwLjYsMC41aDVjMC4zLDAsMC42LTAuMiwwLjYtMC41bDAuNS0zLjNjMC44LTAuMywxLjQtMC43LDIuMS0xLjJsMy4xLDEuMmMwLjMsMC4xLDAuNiwwLDAuOC0wLjNsMi41LTQuMwoJYzAuMS0wLjMsMC4xLTAuNi0wLjEtMC44TDI1LjIsMTcuMnogTTE2LDIwLjNjLTIuNCwwLTQuMy0xLjktNC4zLTQuM3MxLjktNC4zLDQuMy00LjNzNC4zLDEuOSw0LjMsNC4zUzE4LjQsMjAuMywxNiwyMC4zeiIvPgo8L3N2Zz4K);\\n\\n}\\n\\n#u .lb {\\n               background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgNDYgNDYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ2IDQ2OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yMywyM2MyLjksMCw1LjItMi4zLDUuMi01LjJzLTIuMy01LjItNS4yLTUuMnMtNS4yLDIuMy01LjIsNS4yUzIwLjEsMjMsMjMsMjN6IE0yMywyNS42CgljLTMuNSwwLTEwLjQsMS43LTEwLjQsNS4ydjIuNmgyMC43di0yLjZDMzMuNCwyNy4zLDI2LjUsMjUuNiwyMywyNS42eiIvPgo8L3N2Zz4K);\\n}\\n\\n#u1 a.pf {\\n               background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzZENkQ2RDt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yNS4yLDE3LjJjMC0wLjQsMC4xLTAuOCwwLjEtMS4yYzAtMC40LDAtMC44LTAuMS0xLjJsMi42LTJjMC4yLTAuMiwwLjMtMC41LDAuMS0wLjhsLTIuNS00LjMKCWMtMC4xLTAuMy0wLjUtMC40LTAuOC0wLjNsLTMuMSwxLjJjLTAuNi0wLjUtMS4zLTAuOS0yLjEtMS4ybC0wLjUtMy4zYzAtMC4zLTAuMy0wLjUtMC42LTAuNWgtNWMtMC4zLDAtMC42LDAuMi0wLjYsMC41bC0wLjUsMy4zCgljLTAuOCwwLjMtMS40LDAuNy0yLjEsMS4yTDcuMyw3LjRDNyw3LjMsNi43LDcuNCw2LjUsNy43TDQsMTEuOWMtMC4yLDAuMy0wLjEsMC42LDAuMSwwLjhsMi42LDJjMCwwLjQtMC4xLDAuOC0wLjEsMS4yCgljMCwwLjQsMCwwLjgsMC4xLDEuMmwtMi42LDJjLTAuMiwwLjItMC4zLDAuNS0wLjEsMC44bDIuNSw0LjNjMC4xLDAuMywwLjUsMC40LDAuOCwwLjNsMy4xLTEuMmMwLjYsMC41LDEuMywwLjksMi4xLDEuMmwwLjUsMy4zCgljMCwwLjMsMC4zLDAuNSwwLjYsMC41aDVjMC4zLDAsMC42LTAuMiwwLjYtMC41bDAuNS0zLjNjMC44LTAuMywxLjQtMC43LDIuMS0xLjJsMy4xLDEuMmMwLjMsMC4xLDAuNiwwLDAuOC0wLjNsMi41LTQuMwoJYzAuMS0wLjMsMC4xLTAuNi0wLjEtMC44TDI1LjIsMTcuMnogTTE2LDIwLjNjLTIuNCwwLTQuMy0xLjktNC4zLTQuM3MxLjktNC4zLDQuMy00LjNzNC4zLDEuOSw0LjMsNC4zUzE4LjQsMjAuMywxNiwyMC4zeiIvPgo8L3N2Zz4K);\\n}\\n\\n#u1 a.bri {\\n               background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzZENkQ2RDt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zLjcsOS44aDYuMlYzLjdIMy43VjkuOHogTTEyLjksMjguM2g2LjJ2LTYuMmgtNi4yVjI4LjN6IE0zLjcsMjguM2g2LjJ2LTYuMkgzLjdWMjguM3ogTTMuNywxOS4xaDYuMnYtNi4yCglIMy43VjE5LjF6IE0xMi45LDE5LjFoNi4ydi02LjJoLTYuMlYxOS4xeiBNMjIuMiwzLjd2Ni4yaDYuMlYzLjdIMjIuMnogTTEyLjksOS44aDYuMlYzLjdoLTYuMlY5Ljh6IE0yMi4yLDE5LjFoNi4ydi02LjJoLTYuMlYxOS4xCgl6IE0yMi4yLDI4LjNoNi4ydi02LjJoLTYuMlYyOC4zeiIvPgo8L3N2Zz4K);\\n}\\n\\n#s_usersetting_top {\\n               background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzZENkQ2RDt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yNS4yLDE3LjJjMC0wLjQsMC4xLTAuOCwwLjEtMS4yYzAtMC40LDAtMC44LTAuMS0xLjJsMi42LTJjMC4yLTAuMiwwLjMtMC41LDAuMS0wLjhsLTIuNS00LjMKCWMtMC4xLTAuMy0wLjUtMC40LTAuOC0wLjNsLTMuMSwxLjJjLTAuNi0wLjUtMS4zLTAuOS0yLjEtMS4ybC0wLjUtMy4zYzAtMC4zLTAuMy0wLjUtMC42LTAuNWgtNWMtMC4zLDAtMC42LDAuMi0wLjYsMC41bC0wLjUsMy4zCgljLTAuOCwwLjMtMS40LDAuNy0yLjEsMS4yTDcuMyw3LjRDNyw3LjMsNi43LDcuNCw2LjUsNy43TDQsMTEuOWMtMC4yLDAuMy0wLjEsMC42LDAuMSwwLjhsMi42LDJjMCwwLjQtMC4xLDAuOC0wLjEsMS4yCgljMCwwLjQsMCwwLjgsMC4xLDEuMmwtMi42LDJjLTAuMiwwLjItMC4zLDAuNS0wLjEsMC44bDIuNSw0LjNjMC4xLDAuMywwLjUsMC40LDAuOCwwLjNsMy4xLTEuMmMwLjYsMC41LDEuMywwLjksMi4xLDEuMmwwLjUsMy4zCgljMCwwLjMsMC4zLDAuNSwwLjYsMC41aDVjMC4zLDAsMC42LTAuMiwwLjYtMC41bDAuNS0zLjNjMC44LTAuMywxLjQtMC43LDIuMS0xLjJsMy4xLDEuMmMwLjMsMC4xLDAuNiwwLDAuOC0wLjNsMi41LTQuMwoJYzAuMS0wLjMsMC4xLTAuNi0wLjEtMC44TDI1LjIsMTcuMnogTTE2LDIwLjNjLTIuNCwwLTQuMy0xLjktNC4zLTQuM3MxLjktNC4zLDQuMy00LjNzNC4zLDEuOSw0LjMsNC4zUzE4LjQsMjAuMywxNiwyMC4zeiIvPgo8L3N2Zz4K);\\n}\\n\\n#imsg {\\n               background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxOS4yLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i5Zu+5bGCXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDojNkQ2RDZEO30NCjwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjUuMyw0LjZoLTE5QzUsNC42LDMuOSw1LjcsMy45LDdsMCwyMS40bDQuOC00LjhoMTYuNmMxLjMsMCwyLjQtMS4xLDIuNC0yLjRWN0MyNy43LDUuNywyNi42LDQuNiwyNS4zLDQuNnoNCgkgTTIyLjksMTguOUg4LjZ2LTIuNGgxNC4zVjE4Ljl6IE0yMi45LDE1LjNIOC42di0yLjRoMTQuM1YxNS4zeiBNMjIuOSwxMS43SDguNlY5LjRoMTQuM1YxMS43eiIvPg0KPC9zdmc+DQo=);\\n}\\n\\n\\n\\n\\n/*========= Ad Block ========= */\\n\\ndiv[style*=\\\"visibility:visible\\\"] {\\n    display: none !important;\\n    visibility: hidden !important;\\n    opacity: 0;\\n    height: 0px;\\n    overflow: hidden;\\n}\\n\\nbody>div[style*='position: absolute;'],\\nbody>div[style*='position: fixed;'],\\n#contnet_left>div[id=\\\"10\\\"]~div[id=\\\"1\\\"],\\n#contnet_left>div[id=\\\"20\\\"]~div[id=\\\"1\\\"],\\n#contnet_left>div[id=\\\"40\\\"]~div[id=\\\"1\\\"],\\n#contnet_left>div[id=\\\"60\\\"]~div[id=\\\"1\\\"],\\n#contnet_left>div[id=\\\"80\\\"]~div[id=\\\"1\\\"],\\n#contnet_left>div[id=\\\"100\\\"]~div[id=\\\"1\\\"],\\n#content_left>div:not([id])\\n  {\\n    display: none!important;\\n  }\\n\\n#content_left>div[style*=\\\"display:block !important\\\"]\\n  {\\n    position: absolute!important;\\n    top: -5000px!important;\\n  }\\n\\n\\n/*Empty*/\\n/*Empty*/\\n.c-container {\\n               /*border: 1px solid #EEE;*/\\n               \\n               background: #fff;\\n               border-radius: 2px;\\n               padding: 25px;\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.14);\\n               width: 549px;\\n}\\nh3 a:visited {\\n               opacity: 0.4 !important;\\n               color: #bbb !important;\\n}\\n.c-container:hover {\\n               transition: all 500ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               box-shadow: rgba(0, 0, 0, 0.117647) 0px 1px 6px, rgba(0, 0, 0, 0.117647) 0px 1px 4px;\\n}\\n.c-container:active {\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n               box-shadow: rgba(0, 0, 0, 0.188235) 0px 10px 30px, rgba(0, 0, 0, 0.227451) 0px 6px 10px;\\n}\\n.t {\\n               padding-bottom: 10px;\\n}\\n.c-border {\\n               width: 559px;\\n               margin-left: -25px;\\n               box-shadow: none !important;\\n               margin-top: 17px;\\n               margin-bottom: 23px;\\n               border-top: #EEE 1px solid;\\n               border-bottom: #EEE 1px solid;\\n}\\n#help {\\n               padding-left: 107px !important;\\n}\\n.c-tools a {\\n               border: 0px !important;\\n}\\n.f13 a:hover {\\n               border: none !important;\\n}\\n.f13 .m:hover {\\n               border-bottom: solid 1px #666 !important;\\n}\\n.g .m:hover {\\n               border-bottom: solid 1px #666 !important;\\n}\\n.c-row a:hover {\\n               border-bottom: #4879BD 1px solid;\\n}\\n.c-span6 a:hover {\\n               border-bottom: none;\\n}\\n.op_vd_mininewest_link:hover {\\n               opacity: 0.8;\\n}\\n.op-tieba-offical-lookmore a:hover {\\n               border-bottom: #4879BD 1px solid;\\n}\\nop-tieba-general-lookmore a:hover {\\n               border-bottom: #4879BD 1px solid;\\n}\\n.c-tip-menu ul li a {\\n               color: #4879BD !important;\\n}\\nh3 a:hover {\\n               border: none !important;\\n               opacity: 0.7;\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n}\\nh3 a {\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n}\\n.sitelink_summary a:hover {\\n               border-bottom: #4879BD 1px solid;\\n}\\n.c-gray:hover {\\n               border-bottom: #666 1px solid;\\n}\\n.op_kefutable_committel:hover {\\n               border-bottom: #666 1px solid;\\n}\\n.op-soft-btnbox a:hover {\\n               border: none !important;\\n}\\n.op-soft-as-pc-downbtn {\\n               margin-left: 0px !important;\\n               color: #fff;\\n               background-color: #4879BD;\\n               padding: 3px 15px;\\n               border-radius: 2px;\\n               font-size: 14px;\\n               transition: all 0.3s ease;\\n               border: none;\\n               margin-top: -3px;\\n}\\n.op-soft-as-pc-downbtn:hover {\\n               background-color: #7098D0;\\n               transition: all 0.3s ease;\\n               box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.16), 0 2px 10px 0 rgba(0, 0, 0, 0.12);\\n               background-image: none;\\n}\\n.c-btn-primary {\\n               margin-left: 0px !important;\\n               color: #fff;\\n               background-color: #4879BD;\\n               padding: 3px 15px;\\n               border-radius: 2px;\\n               font-size: 14px;\\n               transition: all 0.3s ease;\\n               border: none;\\n               margin-top: -3px;\\n}\\n.c-btn-primary:hover {\\n               background-color: #7098D0;\\n               transition: all 0.3s ease;\\n               box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.16), 0 2px 10px 0 rgba(0, 0, 0, 0.12);\\n               background-image: none;\\n}\\n.op-soft-title a:hover {\\n               border: none !important;\\n               opacity: 0.7;\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n}\\n.op-soft-title a {\\n               transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n}\\n.nums {\\n               width: 598px;\\n}\\n.search_tool_conter {\\n               width: 598px;\\n}\\n.op_offical_weibo_other a:hover {\\n               text-decoration: none !important;\\n}\\n.op_offical_weibo_info a:hover {\\n               text-decoration: none !important;\\n}\\n.op_offical_weibo_content a:hover {\\n               text-decoration: none !important;\\n}\\n.c-btn {\\n               border: none !important;\\n}\\n.op-zx-new-mvideo-info:hover {\\n               border-bottom: none;\\n}\\n.op-zx-new-mvideo-rlt a:hover {\\n               border-bottom: #4879BD 1px solid;\\n}\\n.op-zx-new-mvideo-oneline a:hover {\\n               border-bottom: #4879BD 1px solid;\\n}\\n.hint_common_restop {\\n               color: #EA4335;\\n               font-size: medium;\\n               font-weight: bold;\\n}\\n.op-tieba-general-main-col p:hover {\\n               border: none !important;\\n}\\n.c-text {\\n               background: #4879BD;\\n               color: #fff;\\n               border: #4879BD 1px solid;\\n               padding-top: 3px;\\n               border-radius: 2px;\\n}\\n.c-text:hover {\\n               background: none;\\n               color: #4879BD;\\n               border: #4879BD 1px solid !important;\\n               padding-top: 3px;\\n               border-radius: 2px;\\n}\\n/*Background Empty*/\\n\\n.container_l, .op-img-star-divide-low > a {\\n    width: auto !important;\\n}\\n\\n#content_left {\\n    width: 93%!important;\\n    padding-left: 4%!important;\\n}\\n#content_left > .c-container, #content_left > [class^=\\\"result\\\"] {\\n    display: block !important;\\n    width: 48% !important;\\n    min-width: 568px !important;\\n    min-height: 116px !important;\\n    float: left !important;\\n    margin: 0.4% !important;\\n    padding: 8px 5px 3px 5px !important;\\n    table-layout: fixed !important;\\n    border-collapse: separate !important;\\n    overflow: hidden !important;\\n}\\n\\n.s_tab, .nums, .search_tool_conter, #rs, .to_tieba, .to_zhidao_bottom {\\n    margin: 0 auto!important;\\n}\\n\\n#page, #s_tab {\\n    padding-left: 0px !important;\\n    text-align: center!important;\\n}\\n\\nbody[link='#0000cc'] .s_form {\\n    width:760px!important;\\n    margin:0 auto !important;\\n    transform:translatex(-40px);\\n}\\n\\n#content_right, .c-recommend, body > div[class=\\\"result-op xpath-log\\\"], #content_left > * {\\n    display: none !important;\\n}\\n\\n/*For Super_preloaderPlus script*/\\n#sp-fw-container {\\n    transform:translatex(-200px) translatey(13px);\\n}\",\"oldVersion\":\"22.05\"}"},"ts":1587235898692},"enabled":false,"position":9,"file_url":"https://greasyfork.org/scripts/14178-ac-baidu-%E9%87%8D%E5%AE%9A%E5%90%91%E4%BC%98%E5%8C%96%E7%99%BE%E5%BA%A6%E6%90%9C%E7%8B%97%E8%B0%B7%E6%AD%8C%E6%90%9C%E7%B4%A2-%E5%8E%BB%E5%B9%BF%E5%91%8A-favicon-%E5%8F%8C%E5%88%97/code/AC-baidu:%E9%87%8D%E5%AE%9A%E5%90%91%E4%BC%98%E5%8C%96%E7%99%BE%E5%BA%A6%E6%90%9C%E7%8B%97%E8%B0%B7%E6%AD%8C%E6%90%9C%E7%B4%A2_%E5%8E%BB%E5%B9%BF%E5%91%8A_favicon_%E5%8F%8C%E5%88%97.user.js","uuid":"5fbd978f-f25f-4323-a888-b0a8f62cd8f0","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICBBQy1iYWlkdTrph43lrprlkJHkvJjljJbnmb7luqbmkJzni5fosLfmrYzmkJzntKJf5Y675bm/5ZGKX2Zhdmljb25f5Y+M5YiXCi8vIEBuYW1lOmVuICAgICAgICAgQUMtYmFpZHU6Z29vZ2xlX3NvZ291X1JlZGlyZWN0UmVtb3ZlX2Zhdmljb25fYWRhd2F5X1R3b0xpbmUKLy8gQG5hbWU6emggICAgICAgICBBQy1iYWlkdTrph43lrprlkJHkvJjljJbnmb7luqbmkJzni5fosLfmrYzmkJzntKJf5Y675bm/5ZGKX2Zhdmljb25f5Y+M5YiXCi8vIEBuYW1lOnpoLUNOICAgICAgQUMtYmFpZHU66YeN5a6a5ZCR5LyY5YyW55m+5bqm5pCc54uX6LC35q2M5pCc57SiX+WOu+W5v+WRil9mYXZpY29uX+WPjOWIlwovLyBAbmFtZTpqYSAgICAgICAgIEFDLWJhaWR1OumHjeWumuWQkeacgOmBqeWMlkJhaWR144Gu5pCc54uXR29vZ2xl5qSc57Si57WQ5p6c44Gu44Oq44OA44Kk44Os44Kv44OI6Zmk5Y67K+OBq+W6g+WRil9mYXZpY29uCi8vIEBkZXNjcmlwdGlvbiAgICAgMS7nuZ7pgY7nmb7luqbjgIHmkJzni5fjgIHosLfmrYzjgIHlpb3mkJzmkJzntKLntZDmnpzkuK3nmoToh6rlt7HnmoTot7PovYnpj4jmjqXvvIznm7TmjqXoqKrllY/ljp/lp4vntrLpoIEt5Y+N5q2j6YO96IO955yL5oeCIDIu5paw5aKe5oum5oiq55m+5bqm55m+5a625Y+355qE5peg55So5o6o5bm/5pWw5o2uLeaUr+aMgeWFtuS7luermeeCuSAzLuWOu+mZpOeZvuW6pueahOWkmuS9meW5v+WRiiA05re75YqgRmF2aWNvbuaYvuekuiA1LumhtemdokNTUyA2Lua3u+WKoOiuoeaVsCA3LuW8gOWFs+mAieaLqeS7peS4iuWKn+iDvSA4LuiHquWKqOe/u+mhteWKn+iDvQovLyBAZGVzY3JpcHRpb246ZW4gIDEuYnlwYXNzIHRoZSByZWRpcmVjdCBsaW5rIGF0IGJhaWR1XHNvZ291XGdvb2dsZVxoYW9zb3U7IDIucmVtb3ZlIGFkcyBhdCBiYWlkdTsgMy5hZGQgRmF2aWNvbiBmb3IgZWFjaCB3ZWJzaXRlOyA0LnJlbmRlciB5b3VyIG93biBzdHlsZTsgNS5jb3VudGVyOyA2LlN3aXRjaCB0byBoYW5kbGUgYWxsIDcuQXV0byBQYWdlcgovLyBAZGVzY3JpcHRpb246amEgIDEu6L+C5ZueQmFpZHXjgIFTb2dvdeOAgUdvb2dsZeOAgUhhb3NvdeaknOe0ouaknOe0oue1kOaenOOBruS4reOBruiHquWIhuOBrumBt+enu+ODquODs+OCrzsgMi5CYWlkdeOBruS9meWIhuOBquW6g+WRiuOCkuWPluOCiumZpOOBjzsgMy7jgrPjg6Hjg7Pjg4jjgpLov73liqA7IDQu44Oa44O844K444Gu44Kr44K544K/44OgQ1NQOyA1LuOCq+OCpuODs+ODiOOCkui/veWKoDsgNi7jgrnjgqTjg4Pjg4Hjga/ku6XkuIrjga7mqZ/og73jgpLpgbjmip7jgZfjgb7jgZk7IDcu6Ieq5YuV44Oa44O844K444KB44GP44KKLgovLyBAaWNvbiAgICAgICAgICAgIGh0dHBzOi8vaW1nLnR1amlkdS5jb20vaW1hZ2UvNWU3YmEwZDZiMDA2Mi5qcGcKLy8gQGF1dGhvciAgICAgICAgICBBQwovLyBAbGljZW5zZSAgICAgICAgIEdQTC0zLjAtb25seQovLyBAY3JlYXRlICAgICAgICAgIDIwMTUtMTEtMjUKLy8gQHJ1bi1hdCAgICAgICAgICBkb2N1bWVudC1zdGFydAovLyBAdmVyc2lvbiAgICAgICAgIDIzLjMxCi8vIEBjb25uZWN0ICAgICAgICAgd3d3LmJhaWR1LmNvbQovLyBAaW5jbHVkZSAgICAgICAgICo6Ly9pcHY2LmJhaWR1LmNvbS8qCi8vIEBpbmNsdWRlICAgICAgICAgKjovL3d3dy5iYWlkdS5jb20vKgovLyBAaW5jbHVkZSAgICAgICAgICo6Ly9tLmJhaWR1LmNvbS8qCi8vIEBpbmNsdWRlICAgICAgICAgKjovL3h1ZXNodS5iYWlkdS5jb20vcyoKLy8gQGluY2x1ZGUgICAgICAgICAqOi8vd3d3LnNvZ291LmNvbS93ZWIqCi8vIEBpbmNsdWRlICAgICAgICAgKjovL3d3dy5zb2dvdS5jb20vc2llKgovLyBAaW5jbHVkZSAgICAgICAgICo6Ly93d3cuc29nb3UuY29tL3NvZ291KgovLyBAaW5jbHVkZSAgICAgICAgICo6Ly93d3cuc29nb3UuY29tL3R4KgovLyBAaW5jbHVkZSAgICAgICAgICo6Ly93d3cuc28uY29tL3M/KgovLyBAaW5jbHVkZSAgICAgICAgICo6Ly8qLmJpbmcuY29tLyoKLy8gQGluY2x1ZGUgICAgICAgICAqOi8vZW5jcnlwdGVkLmdvb2dsZS4qL3NlYXJjaCoKLy8gQGluY2x1ZGUgICAgICAgICAqOi8vKi5nb29nbGUqL3NlYXJjaCoKLy8gQGluY2x1ZGUgICAgICAgICAqOi8vKi5nb29nbGUqL3dlYmhwKgovLyBAaW5jbHVkZSAgICAgICAgICo6Ly8qLnpoaWh1LmNvbS8qCi8vIEBleGNsdWRlICAgICAgICAgKjovLyouZ29vZ2xlKi9zb3JyeSoKLy8gQG5hbWVzcGFjZSAgICAgICAxMzUzNDY0NTM5QHFxLmNvbQovLyBAc3VwcG9ydFVSTCAgICAgIGh0dHBzOi8vcW0ucXEuY29tL2NnaS1iaW4vcW0vcXI/az1mT2c4aWo2VHV3T0FmUzhnMTZHUllOZjVZWUZ1NUNydyZqdW1wX2Zyb209JmF1dGg9LWwwNXBhYXNyUGU1emlndDVhaGR6bl9kelhpQjFqSl8KLy8gQGhvbWUtdXJsICAgICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3poLVRXL3NjcmlwdHMvMTQxNzgKLy8gQGhvbWUtdXJsMiAgICAgICBodHRwczovL2dpdGh1Yi5jb20vbGFuZ3JlbjEzNTMvR01fc2NyaXB0Ci8vIEBob21lcGFnZVVSTCAgICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy96aC1UVy9zY3JpcHRzLzE0MTc4Ci8vIEBjb3B5cmlnaHQgICAgICAgMjAxNS0yMDIwLCBBQwovLyBAbGFzdG1vZGlmaWVkICAgIDIwMjAtMDMtMjcKLy8gQGZlZWRiYWNrLXVybCAgICBodHRwczovL3FtLnFxLmNvbS9jZ2ktYmluL3FtL3FyP2s9Zk9nOGlqNlR1d09BZlM4ZzE2R1JZTmY1WVlGdTVDcncmanVtcF9mcm9tPSZhdXRoPS1sMDVwYWFzclBlNXppZ3Q1YWhkem5fZHpYaUIxakpfCi8vIEBub3RlICAgICAgICAgICAgMjAyMC4wMy0yNy1WMjMuMzEg5L+u5aSNZ29vZ2xl55Sx5LqO6aG16Z2i57uT5p6E5pu05paw5a+86Ie055qEYmxvY2vlip/og73lpLHmlYjnmoTpl67popjvvIzlkIzml7bkv67lpI3osLfmrYzmiqTnnLzmqKHlvI/kuZ/lpLHmlYjnmoTpl67popjjgILmlrDlop7nv7vpobXnmoTmjInpkq7kuovku7bvvIzmlrDlop7kvb/nlKjlnKjnur9jb25maWfvvIzpgb/lhY3nlLHkuo7pobXpnaLnu5PmnoTmlLnliqjlj4jpnIDopoHph43mlrDmj5DkuqTohJrmnKzmm7TmlrAKLy8gQG5vdGUgICAgICAgICAgICAyMDIwLjAzLTI2LVYyMy4zMCDlsI/mlLnku6PnoIF3aXRoIEdvb2dsZUxPR08gJiYg5L+u5aSN5ZyoaW5qZWN05p6B6YCf5qih5byP5LiL55qE5bCP6Zeu6aKYICYmIOS/ruWkjeWQhOenjeagt+W8j+mXrumimCAmJiDoh6rlrprkuYnmoLflvI/lvIDlkK/liqjmgIHmqKHlvI8gJiYg5paw5aKe6Ieq5Yqo57+76aG15Yqf6IO9LeWmiOWmiOWGjeS5n+S4jeeUqOaLheW/g+aIkee/u+mhtemXrumimOS6hi1b5o6o6I2Q5pu05pawXQovLyBAbm90ZSAgICAgICAgICAgIDIwMTkuMTItMTYtVjIzLjI5IOiHquWumuS5ieiLseaWh+WSjOS4reaWh+eahOaYvuekuuaViOaenCAmJiDkv67lpI3kuIrkuKrniYjmnKzlr7zoh7TnmoRibG9ja+aMiemSruS4ouWkseeahOmXrumimCAmJiDkv67lpI3pg6jliIbnmb7luqblhoXlrrnml6Dms5Xmi6bmiKrnmoTmg4XlhrUKLy8gQG5vdGUgICAgICAgICAgICAyMDE5LjEyLTE1LVYyMy4yOCDnlLHkuo7ln5/lkI3lpIfmoYjkuKLlpLHkuobvvIzlj6rog73mjaLkuIDkuKogJiYg5L+u5aSN6Ieq5bex6K6k5Li655qE6LC35q2MZmF2aWNvbuW3suWtmOWcqOeahOmXrumimO+8jOWunumZheS4iuiwt+atjGZhdmljb27lubbmsqHmnInmmL7npLoKLy8gQG5vdGUgICAgICAgICAgICAyMDE5LjExLTI4LVYyMy4yNyDkv67lpI3kuIrmrKHmm7TmlrDlr7zoh7TnmoTmn5DkupvmqKHlvI/kuIt3aW5kb3flr7nosaHml6Dms5Xojrflj5blr7zoh7TnmoTlvILluLjov5vogIzlr7zoh7TnmoTohJrmnKzml6Dms5Xov5DooYznmoRidWcgJiDkvJjljJbnmb7luqbmoLflvI/lhoXlrrnlkozosLfmrYzljZXliJfnmoTlgY/lj7PnmoTmg4XlhrXku6Xlj4rlv4XlupTkuK3oi7HmlofnmoTlgY/np7vkvY3nva4g5L+u5aSN5bGP6JS95Yqf6IO95aSx5pWI55qEYnVnCi8vIEBub3RlICAgICAgICAgICAgMjAxOS4xMC0wNS1WMjMuMjUg5L+u5aSN6LC35q2M5qC35byP44CB5b+F5bqU5qC35byP44CB55m+5bqm55qE6YOo5YiG5qC35byP6Zeu6aKYLuS/ruWkjeWxj+iUveaooeW8j+WcqGNocm9tZeWGheaguOS4iueahOWwj2J1ZyDmlrDlop7oh6rliqjlhajoi7HmlofmqKHlvI8g5L+u5aSN6KKr57+76K+R5a+86Ie055qEYnVnCi8vIEBub3RlICAgICAgICAgICAgMjAxOS4wOS0xMy1WMjMuMjQg5L+u5aSN6LC35q2M55Sx5LqO6aG16Z2i5pS55Yqo5a+86Ie055qE5o+S5YWl5LmL5ZCO55qE5qC35byP5Y+Y5YyWICYg5L+u5aSN5LiK5qyh5pu05paw5a+86Ie055qE6YeN5a6a5ZCR5aSx5pWI55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxOS4wOS0xMi1WMjMuMjMg57Sn5oCl5L+u5aSN6LC35q2M6aG16Z2i55qEYnVnICYg5aKe5Yqg5pe26Ze05Yik5pat5piv5ZCm6YeN572u5pyA5paw55qE6Ieq5a6a5qC35byPICYg5L+u5aSN5pW05L2T6aG16Z2i55qE5YaF5a2Y5Y2g55So5Lul5Y+K6YeH55SoUkFG5p2l5pu/5Lujc2V0SW50ZXJ2YWwgJiDkvJjljJbmi6bmiKrliJfooajlubbkv67lpI3liJfooajmlbDmja7ov4flpJrnmoTliKDpmaTlpLHotKXnmoTpl67popggJiDmlrDlop7mlK/mjIHpgJrphY3nrKbmi6bmiKrmqKHlvI8gJiDlhajpg6jkvb/nlKjlpITnkIbnu5PmnpzlkI7nmoTpobrluo8KLy8gQG5vdGUgICAgICAgICAgICAyMDE5LjA4LTA5LVYyMy4yMiAxLuenu+mZpOaJi+acuueZvuW6pueahOW5v+WRiuWGheWuuSAyLuabtOaNouaVsOaNruadpea6kOWcsOWdgOS4umliYWlkdS5udGFvdy5jb23pmY3kvY7mnI3liqHlmajotJ/ovb0gMy7lj5jmm7Q66aG16Z2i5Yqg6L295LiN6L295YWlaWZyYW1l77yM54K55Ye75pi+56S65ZCO6L295YWlaWZyYW1lIDQu5pyq5ZCv55So6Ieq5a6a5LmJ5qC35byP5pe26Ze06L+H6ZW/5Lya5pu05paw5pyA5paw55qE5qC35byP6KGoIDUu5L+u5aSN5ZCE5aSn5pCc57Si55qE5qC35byP6Zeu6aKYLeS+p+enuyvog4zmma/pgI/mmI4gNi7kv67lpI1lZGdl6aaW6aG155qE6Zeu6aKYIDcuYmxvY2vlsY/olL3kuYvlkI7lj6/ku6Xnm7TmjqXlj5bmtojkuoYgOC7ph4fnlKjplJnor6/pobXmlK/mjIHlkI7nu63nmoRnb29nbGXnmoRpZnJhbWXltYzlhaUKLy8gQG5vdGUgICAgICAgICAgICAyMDE5LjA2LjE2LVYyMy4yMSDkv67lpI3lnKjlsY/olL3liJfooajkuK3liqDlhaXlvILluLjmlbDmja7lr7zoh7TnmoTpg6jliIbmlbDmja7lvILluLjvvIzlkIzml7bov5jml6Dms5Xnp7vpmaTnmoRidWcgJiYg5L+u5pS5QmFpZHXlrabmnK/nmoTnlJ/mlYjpobXpnaLvvIzpgb/lhY3lr7zoh7Tlhbbku5blrabmnK/pobXpnaLnmoTmmL7npLrlh7rpl67popggJiYg5L+u5aSN5Zyo57yp5pS+MTUwJeeahOaDheWGteS4i+aQnOe0ouahhuS9jee9ruW8guW4uOeahOmXrumimAovLyBAbm90ZSAgICAgICAgICAgIDIwMTkuMDYuMTUtVjIzLjIwIOWwvemHj+S/ruaUueWcqGFkZ3VhcmTkuIrnmoTpg6jliIblhbzlrrnpl67popgtLeWmguaenOaciemXrumimOiusOW+l+WPq+aIkQovLyBAbm90ZSAgICAgICAgICAgIDIwMTkuMDYuMDUtVjIzLjE5IOS/ruWkjeeUseS6juWOu+W5v+WRiuWFtuS7luaPkuS7tuWvvOiHtOeahOacrOiEmuacrOW8guW4uOeahOmXrumimCDkv67lpI3lv4XlupTkuIrnmoTmoLflvI/pg6jliIblvILluLjpl67popgg5L+u5aSN5Zu+5qCH55qE5Zyw5Z2A5byC5bi46Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxOS4wNS4wNi1WMjMuMTgg5L+u5aSNQmFpZHXlrabmnK/nmoTlvILluLjvvIzkuIrmrKHkv67mlLnkuobvvIzkvYbmmK/ku6PnoIHmsqHmnInnlJ/mlYggJiYg5paw5aKeQmFpZHVMaXRl55qE5qC35byP5pWI5p6cLWZyb20geWljbGVhciBfIHBhbl9jYW8gJiYg5LyY5YyW6aG16Z2i5pi+56S65pWI5p6c77yM5Yqg5b+r5qC35byP55qE6L295YWl6YCf5bqmICYmIOagueaNrueUs+adsOiAgeWPuOacuueahOaOqOiNkOS/ruaUueS6huiuuOWkmuaui+eVmeeahGJ1Z+W5tuS4lOS8mOWMluS6humhtemdoueahOaVsOaNruaPkOekugovLyBAbm90ZSAgICAgICAgICAgIDIwMTkuMDUuMDUtVjIzLjE3IOS/ruWkjUJhaWR16aaW6aG155qE5Zu+5qCH5byC5bi455qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxOS4wNC4yNi1WMjMuMTUg5L+u5aSN5oqk55y86Imy6LCD6IqC77yb5paw5aKe5LiN5pi+56S6bG9ja+aMiemSrumAiemhue+8m+aWsOWinuiwt+atjOS8quijheeZvuW6pu+8m+S/ruWkjeiwt+atjOWSjOeZvuW6pumhtemdoueahOaQnOe0ouagt+W8j++8m+S/ruWkjeeZvuW6puWtpuacr+mhtemdouW8guW4uAovLyBAbm90ZSAgICAgICAgICAgIDIwMTkuMDMuMzAtVjIzLjE0IOabtOaWsOS4gOS4i+ivtOaYjuaWh+ahoyAmJiDmt7vliqDkuIDkuKpnaXRodWLnmoTot7PovazmjInpkq4gJiYg5paw5aKe6IOM5pmv6ImyCi8vIEBub3RlICAgICAgICAgICAgMjAxOS4wMy4yOC1WMjMuMTMg5pu05pawLeenu+mZpOmDqOWIhuW8guW4uOeahOeZvuW6pueZveWxj+mXrumimC7mlrDln5/lkI1iYWlkdS5teOW5tuS4jeaYr+eZvuW6puaXl+S4i+eahOWcsOWdgO+8jOaJgOS7pei3s+i/h+OAgumhuuS+v+WIt+S4gOS4queJiOacrO+8jOS/ruWkjeiwt+atjOeahHJlY2FwdHVyZeeahOmXrumimO+8jOaEn+iwouiAgeWPuOacuuKAnGJyZWF0aDM2NeKAnQovLyBAbm90ZSAgICAgICAgICAgIDIwMTkuMDIuMTYtVjIzLjEyIOS/ruWkjeS4iuasoeabtOaWsOWvvOiHtOeahOS4gOWghmJ1ZyAmIOabtOaNoui1hOa6kOOAguOAguOAguiFvuiur0NETuecn+eahOS4jeWkn+S9oOS7rOeUqO+8jOi/mOaYr+eUqOeZvuW6pueahOWFjei0uWNkbuWQpwovLyBAbm90ZSAgICAgICAgICAgIDIwMTkuMDIuMTUtVjIzLjExIOS/ruWkjeWSjEdvb2dsZSBTZWFyY2ggRXh0cmEgQnV0dG9u55qE5YW85a656Zeu6aKY44CC5L+u5aSN5Zyw5Z2A5pyJ5pe25YCZ5LiN6IO96K6/6Zeu55qE6Zeu6aKY44CC5L+u5aSN5penZmbkuIrnmoRmb3JFYWNo5ZKMaW5uZXJUZXh05LiN6IO955So55qE6Zeu6aKY44CC5Yig6Zmk6YOo5YiG5pen5pel5b+XCi8vIEBub3RlICAgICAgICAgICAgMjAxOS4wMi4xNC1WMjMuMTAg5a6J6Z2Z54K577yM5oiR5pyJ5aWz5pyL5LqGaV9p44CCJiDkv67lpI3nmb7luqblm77niYflpLHmlYjnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAgICAyMDE5LjAyLjEzLVYyMy4wOSDmj5DkvpvpgInpobkt55u05o6l5Yig6Zmk5bey5bGP6JS955qE5YaF5a6577yM6YG/5YWN55yL5Yiw5LiA5Lqb5Z6D5Zy+5peg55So5L+h5oGv77yb5L+u5aSN5q6L55WZYnVn5Zyo5Y2V5YiX5pe255u45YWz5pCc57Si5a695bqm5byC5bi477yb5LyY5YyW55m+5bqm5Zu+5qCH5Li66YCP5piO5Zu+5qCHCi8vIEBub3RlICAgICAgICAgICAgMjAxOS4wMS4yOS1WMjMuMDgg5L+u5aSN5LuO6aaW6aG16L+b5YWl55qE5a+86Ie055qEYmxvY2vlip/og73lpLHmlYjnmoTpl67popjvvJvkv67lpI3np7vliqjpooTmtYvmjInpkq7lpLHmlYjnmoTpl67popjvvJvmlrDlop7lubbkv67lpI3nmb7luqbmiYvmnLrniYjnmoTlhbzlrrnpl67popgt5pSv5oyB5omL5py654mI6YeN5a6a5ZCR77yb5paw5aKe5Y6f5aeL5Zyw5Z2A5bGV56S677yM5YeP5bCR55m+5bqm5pu05paw5a+86Ie055qE55yL5LiN5Yiw5Zyw5Z2A55qE6Zeu6aKY77yb5LyY5YyW5oum5oiq5YiX6KGo55qE5bGV56S65ZKM5Yi35paw55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxOS4wMS4yNS1WMjMuMDcg5L+u5aSNRmF2aW9u5Yqg6L295aSx6LSl55qE6Zeu6aKYLei/meS4i+WwseWPr+S7peiHquWumuS5iWZhdmljb27kuobvvIzku6XliY3pgZfnlZnkuoblvojkuYXnmoRidWfkuoYgJiYg56e76Zmk6YOo5YiGTE9H5YeP5bCP5Luj56CBCi8vIEBub3RlICAgICAgICAgICAgMjAxOS4wMS4yNS1WMjMuMDYg5L+u5aSN55Sx5LqO5Luj56CB5LyY5YyW77yM5a+86Ie055qESHV5YW7lip/og73lvIDlkK/lkI7ohJrmnKzlpLHmlYjnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAgICAyMDE5LjAxLjI1LVYyMy4wNSDlgYfoo4XlpKflrrbmsqHlj5HnjrBidWfvvIzotbbntKfmm7TmlrDmkJzni5fpobXpnaLnmoRidWcKLy8gQG5vdGUgICAgICAgICAgICAyMDE5LjAxLjI1LVYyMy4wMyDkvJjljJbmj5DnpLrmlYjmnpw7IOS/ruWkjeacieaXtuWAmeiHquWumuS5ieaMiemSruaXoOazleaYvuekuueahOaDheWGte+8m+aWsOWinuaQnOeLl+mhtemdoueahOWkmuWIl+aViOaenAovLyBAbm90ZSAgICAgICAgICAgIDIwMTkuMDEuMjMtVjIzLjAyIOS/ruWkjeWIneWni+WMlueahOaXtuWAmeaVsOaNruW8guW4uOWvvOiHtOeahGJsb2Nr5oum5oiq5peg5pWI55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxOS4wMS4yMy1WMjMuMDEg5paw5aKe6K+05piOLeaEn+iwouWkp+elnkplZmZlcnNvbiBTY2hlcueahOaLpuaIquiEmuacrGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtQ04vc2NyaXB0cy8xNjgyLiBUaGFua3MgZm9yIHRoZSBzY3JpcHQgb2YgSmVmZmVyc29uIFNjaGVyIFdpdGhvdXQgaGlzIGhlbHAgSSBjYW4ndCBJbXBsZW1lbnQgdGhpcyBGdW5jdGlvbi4KLy8gQG5vdGUgICAgICAgICAgICAyMDE5LjAxLjIzLVYyMy4wMCDmlrDlop7mi6bmiKrmqKHlvI/vvIzlj6/ku6Xoh6rlrprkuYnnmoTpgInmi6nmi6bmiKrmn5DkuKrln5/lkI3vvIzmi6bmiKrmjonkvaDkuI3mg7PnnIvnmoTlhoXlrrkKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjEyLjI1LVYyMi4wNiDnp7vpmaTosLfmrYzlupXpg6jlub/lkYoKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjEyLjIyLVYyMi4wNSDkv67lpI3lsI/nu4boioLpl67popgKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjEyLjIyLVYyMi4wNCDkv67lpI3nmb7luqbmkJzntKLigJzlkqjor6LigJ3moI/nm67kuIvmsqHmnInmkJzntKLnu5PmnpznmoTpl67popggJiYg5ZCM5pe25L+u5pS56YOo5YiG5qC35byPICYmIOS/ruWkjei+k+WFpeahhuWPs+S+p+aXoOazleeCueWHu+i+k+WFpeeahOmXrumimAovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMTIuMjItVjIyLjAzIOS/ruWkjWVkZ2XnmoTmoLflvI/plJnkubHpl67popggJiYg5L+u5aSN6LC35q2M5Y+M5YiX5qC35byP6Zeu6aKYICYmIOS/ruWkjeeZvuW6pumhtumDqOWkp+epuueZveeahOmXrumimCAmJiDkv67lpI3mlK/mjIFEYXJrUmVhZGVyCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4xMi4yMC1WMjIuMDIg5L+u5aSN5qC35byP5Yqg6L29ICYmIOS/ruWkjeaKpOecvOaooeW8j+aViOaenAovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMTIuMjAtVjIyLjAxIOabtOaNouagt+W8j+ihqOaPkuWFpeaooeW8j++8jOWwvemHj+mBv+WFjemXqueDgemXrumimDsg5L+u5aSNZWRnZeS4iuivpeaooeW8j+eahOWFvOWuuemXrumimAovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMTIuMTktVjIxLjE1IOS/ruWkjeS4iuasoeabtOaWsOWvvOiHtOeahOaKpOecvOaooeW8j+WkseaViOeahOmXrumimAovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMTIuMTktVjIxLjE0IOS/ruWkjeWcqGVkZ2XkuIrmoLflvI/msqHmnInnlJ/mlYjnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjEyLjE5LVYyMS4xMyDkv67lpI3kuIrmrKHmm7TmlrDku6PnoIHlv5jorrDkv67mlLnlr7zoh7TnmoRidWfvvIzkv67lpI3nmb7luqbnp7vliqjpooTmtYvnmoTpgZfnlZlidWcKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjEyLjE4LVYyMS4xMiDnu6fnu63liqDlv6vnp7vpmaTlub/lkYrnmoTlhoXlrrnvvIzlsL3ph4/lh4/lsJHpl6rng4HnmoTmg4XlhrXvvJvlkJDmp73kuIDkuIvvvIznmb7luqbnmoTlub/lkYrmmK/otormnaXotorng6bkuoYKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjEyLjE4LVYyMS4xMSDkv67lpI3lnKjnibnmrormg4XlhrXkuIvnmoTmoLflvI/ooajmsqHmnInnlJ/mlYjnmoTpl67popjvvIzlkIzml7bog73lpJ/mm7Tlv6vpgJ/nmoTnp7vpmaTlub/lkYrlhoXlrrkKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjEyLjE4LVYyMS4xMCDkv67lpI3nibnmrorlhbPplK7lhoXlrrnmkJzntKLkuIvvvIznlLHkuo7np7vpmaTlub/lkYrlr7zoh7TnmoTpobXpnaLpobbpg6jnibnmrormoIforrDmmL7npLrkuI3mraPnoa7nmoTpl67popjjgIIKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjEyLjE4LVYyMS45IOWGjeasoeS8mOWMluagt+W8j+ihqOWKoOi9vemAn+W6pu+8jOiDveabtOWlveeahOabtOW/q+mAn+eahOWKoOi9veagt+W8j+iAjOS4jeW9seWTjeS7o+eggei/kOihjAovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMTIuMDgtVjIxLjgg5L+u5aSNc3JjRWxlbWVudOWcqGZpcmVmb3jml6fniYjmnKzkuIrkuI3mlK/mjIHnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjEyLjA3LVYyMS43IOS/ruWkjeaKpOecvOiJsueahOW8leWFpe+8m+S/ruWkjUdN5bCP5LqONC4w54mI5pys55qE5YW85a656Zeu6aKY77yb5LyY5YyW6YCJ6aG555qE5L2N572u77yM6YG/5YWN6L+H6ZW/Ci8vIEBub3RlICAgICAgICAgICAgMjAxOC4xMi4wNi1WMjEuNiDmhJ/osKJNb29uY2Fu5a+56LC35q2M5qC35byP6LCD5pW055qE5bu66K6u77yM5bey57uP6YeH55So5LqG6K+l5qC35byP77yM5pWI5p6c54m55Yir5aW9OyDlkIzml7bkv67lpI3kuobosLfmrYzlj7PkvqfmoI/nmoTkvY3nva7pl67popgKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjEyLjA2LVYyMS41IFBfUOS/ruWkjeS4iuS4gOeJiOayoeaciea1i+ivleWvvOiHtOeahOaUr+aMgVZpb2xlbnRNb25rZXnkvYbmmK/mnInkuI3mlK/mjIFHcmVhc2VNb25rZXnnmoTpl67popjvvJvmm7TmjaJjc3PlnLDlnYDvvJvkv67lpI3miqTnnLzoibLlnKjnmb7luqbkuIrnmoTpg6jliIbmoLflvI/pl67popgKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjEyLjA2LVYyMS40IOS/ruWkjVZpb2xlbnRNb25rZXnnmoTmlK/mjIHvvJvoh7PmraTlt7Lnu4/lrozlhajmlK/mjIHkuInlj6rnjLTlrZAoVGFtcGVyTW9ua2V544CBVmlvbGVudE1vbmtleeOAgUdyZWFzZU1vbmtleSnkuobvvJvlpoLmnpzov5jmnIlCVUct55u05o6l5Yqg576k5Y+N6aaICi8vIEBub3RlICAgICAgICAgICAgMjAxOC4xMi4wNi1WMjEuMyDkv67lpI3lnKhlZGdl5LiK5qC35byP6ZSZ5Lmx55qE6Zeu6aKYICYmIOS/ruWkjeWuveW6pui/h+WuveeahOmXrumimAovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMTIuMDUtVjIxLjIg56e76Zmk6buY6K6k55qE5oqk55y85qih5byP44CC44CC44CCCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4xMi4wNS1WMjEuMSDkv67lpI1HcmVhc2VNb25rZXnkuI3mlK/mjIFHTV9nZXRSZXNvdXJjZVRleHTlr7zoh7TnmoTmoLflvI/ml6Dms5XlvJXlhaXnmoTpl67popjvvIzkvb/nlKjoh6rlt7HnmoTmnI3liqHlmajkuK3ovawKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjEyLjA1LVYyMS4wIOaWsOWinuW/heW6lOWNleWIl+OAgeWPjOWIl+OAgeWkmuWIl+Wxleekuu+8m+aWsOWinuaKpOecvOaooeW8j++8jOWQhOenjeminOiJsuiHquWumuS5ieiuvue9ru+8m+S/ruWkjeiwt+atjOW3sua1j+iniOeahOe9keWdgOacquWPmOiJsumXrumimO+8m+S8mOWMluS4gOWumueahOi1hOa6kOWNoOeUqAovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMTAuMTgtVjIwLjUg5L+u5aSN55Sx5LqO6LC35q2M5pu05paw5a+86Ie055qE5qC35byP6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4xMC4wOC1WMjAuNCDkv67lpI3nlLHkuo7ljrvlub/lkYrlr7zoh7TnmoTljaHpob/pl67popggJiDph43lhplmYXZpY29u5re75Yqg55qE5L2N572u5YWD57SgLeWHj+WwkemUmeS9jeS6p+eUnwovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMTAuMDMtVjIwLjMg5Zu95bqG5peg5LqLLOWIt+eJiOacrDsg5L+u5aSN5Zyo5L6n6L655qCP5byA5ZCv6ZyA6KaB5ZyoMTkyMOeahOWIhui+qOeOh+S4i+eahOmXrumimO+8jOm7mOiupOWFs+mXreS+p+i+ueagj+eahOagt+W8j+aTjeS9nO+8jOWmguaenOmcgOimgeW8gOWQr+eahOivne+8jOWcqOiHquWumuS5ieagt+W8j+S4reiuvue9ruW8gOWQr+WNs+WPr++8jOWinuWKoOS4ieWIl3zlm5vliJfmqKHlvI8KLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjEwLjAxLVYyMC4yIOS/ruWkjeaLpuaIquW5v+WRiui/h+WkmuWvvOiHtOeahOmhtemdouaYvuekuumXrumimC3mnInkupvmraPluLjlnLDlnYDkuZ/ooqvmi6bmiKrkuoYtPuS8vOS5juWPkeeOsOS4jeaYr+i/meS4quiEmuacrOeahGJ1ZzvpgqPlsLHliLfkuKrniYjmnKzlkKfvvIzmraPlpb3lpITnkIbkuIvmoLflvI/nvJPlrZjpl67popggJiDlpKflrrblm73luoboioLlv6vkuZAKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjA5LjIxLVYyMC4xIOS/ruWkjeWcqFZpb2xlbnRNb25rZXnnmoTlhbzlrrnpl67popggJiYg5qC35byP5Yqg6L2957yT5oWi55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wOS4yMS1WMjAuMCDkv67lpI3pl6rng4HpopHnuYHnmoTpl67popjvvJvkv67lpI3nlLHkuo7mianlsZXlkozohJrmnKzmqKHlvI/kuKTkuKpDU1PlkIzml7bliqDovb3lr7zoh7TnmoTpl67popjvvJvmlrDlop7ngrnlh7vku7vmhI/kvY3nva7lhbPpl63orr7nva7mjInpkq7vvJvkv67lpI3lnKhiaW5n5LiK55qE6K6h5pWw5Zmo5L2N572u6ZSZ6K+v77yb6LCD5pW06aG16Z2i5Y2V6aG155qE5qC35byP77yM6L+Z5qyh5piv55yf55qE5bGF5Lit5LqGCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wOS4xOS1WMTkuOCDkv67lpI1UYW1wZXJNb25rZXnlkozmianlsZXmqKHlvI/kuIvnmoTlhbzlrrnpl67popgKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjA5LjE5LVYxOS43IOWIhuemu+WOu+W5v+WRiuWKn+iDveWSjOiHquWumuS5ieagt+W8j+WKn+iDvQovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDkuMTgtVjE5LjYg5L+u5aSN55Sx5LqOaW5maW5pdHnmianlsZXnmoTlnLDlnYDlr7zoh7TnmoTnmb7luqbmoLflvI/msqHmnInovb3lhaXnmoTpl67popjvvJvkv67lpI3kuIflubRidWfkuYvmkJzntKLpooTmtYvml6DmlYjnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjA5LjE4LVYxOS41IOaWsOWinuaUr+aMgeaJqeWxleaooeW8jy3mjqjojZDkvb/nlKjmianlsZXvvJvkv67lpI3osLfmrYzlnLDlm77pobXpnaLnmoTovb3lhaXpl67popjvvJvphY3nva7ohJrmnKxHUEzljY/orq7vvJvmlK/mjIHml6fniYjmnKznmoRjaHJvbWXkuIrnmoToh6rlrprkuYnmmL7npLrnu5PmnpzljbTlnKjmnIDlupXpg6jnmoTpl67popgt5peg5rOV6Kej5Yaz5pen54mI5pysY2hyb21l5LiK5Y+M5YiX55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wOC4zMS1WMTkuNCDkv67lpI0xLmdvb2dsZemhtemdouS4reiuoeaVsOWZqENvdW50ZXLlnKjotKblj7fnmbvlvZXlkI7nmoTmmL7npLrplJnkvY3pl67popjvvJsgMi7mjpLpmaTmjonnmb7luqblj6/og73lrZjlnKjnmoRlcnJvcuaDheWGteeahOWcsOWdgO+8myAzLuabtOaNomNzc+agt+W8j+WcsOWdgO+8jOaIkeeahENETua1gemHj+aSkeS4jeS9j+S6hgovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDguMjQtVjE5LjMg5L+u5aSN6LC35q2M5Zu+54mH5Zyo5Y2V5YiX5qih5byP5LiL55qE6ZSZ5L2N6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wOC4xNy1WMTkuMiDkv67lpI3osLfmrYzlkoznmb7luqbnmoTpg6jliIbmoLflvI/pl67popgKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjA4LjE2LVYxOS4xIOe7p+e7reS/ruWkjeiwt+atjOWSjOeZvuW6puWPjOWIl+eahOmXrumimO+8jOi/measoeWwvemHj+mHh+eUqGNzc+agt+W8j+ihqOadpeiwg+aVtO+8jOaEn+inieaViOaenOi/mOWPr+S7pQovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDguMTQtVjE4Ljkg5L+u5aSN6LC35q2M5Y+M5YiX55qE57+76aG16ZSZ5L2N55qE6Zeu6aKYOyDnmb7luqbmkJzntKLnu5PmnpznmoTpmLTlvbHmqKHlvI87IOmrmOWIhuWxj+etieaIkeaJvuWIsOS4gOWPsOmrmOWIhueahOaYvuekuuWZqOWGjeivtOWQpwovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDguMTEtVjE4Ljgg57Sn5oClLeS/ruWkjeabtOaWsOinhOWImeWvvOiHtOeahOiwt+atjOWkseaViOeahOmXrumimAovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDguMTAtVjE4Ljcg5o6o6I2Q5Y2H57qn77ya5L+u5pS555Sf5pWI6KeE5YiZ77yM5bC96YeP6YG/5YWN5by55Ye65o+Q56S65pu05paw56qX5Y+j77yb5L+u5aSNLWNocm9tZTR454mI5pys55qEYnVn77yb6aKE6K6h5LiL5qyh5pu05paw5aSE55CG6auY5YiG5bGP5pi+56S655WM6Z2i6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wOC4wOC1WMTguNiDmm7TmlrDohJrmnKzlkb3lkI07IOWwneivleino+WGs2h0dHDmsqHmnInoh6rliqhodHRwc+eahOmXrumimC0tLS0tLS0t5Yi354mI5pys5Y+3Ci8vIEBub3RlICAgICAgICAgICAgMjAxOC4wOC4wNC1WMTguNSDkv67lpI3lnKhjaHJvbWXkuIrohJrmnKzlgbblsJTmsqHmnInnlJ/mlYjnmoTpl67popjvvJvkv67lpI3nmb7luqbmkJzntKLpobbpg6jkvqfnp7vnmoTmg4XlhrXvvJvkuIDlrprmg4XlhrXkuIvkv67lpI3lj4zpobXnmoTliIbliJcKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjA3LjI1LVYxOC40IOS7heWBmuaWh+acrOivtOaYjuS/ruaUuS1lbi1qcDsg5LiL5qyh6aKE6K6h5L+u5pS555m+5bqm6aaW6aG155qE5bm/5ZGK6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wNy4yNS1WMTguMyDlh4/lsJHkuoblgbblsJTku47pppbpobXliqDovb3ov5vmnaXnmoTml7blgJnmoLflvI/ooajmsqHmnInovb3lhaXnmoTpl67poph+6IO96YGH5Yiw6YOo5YiG5qC35byP6KGo5Yqg6L295aSx5pWI55qE5oOF5Ya15b6I5bCRO+S8mOWMluW5v+WRiuenu+mZpAovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDcuMjQtVjE4LjIg5L+u5aSN5LuO55m+5bqm6aaW6aG15Yqg6L296L+b5YWl6aG16Z2i5pe25qC35byP6KGo5rKh5pyJ6L295YWl55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wNy4yNC1WMTguMSDmlbTkvZPkvJjljJbmoLflvI/ooajliqDovb3pgJ/luqYt55m+5bqm5ZKM6LC35q2M55qE55WM6Z2i576O5YyW5LiA5LiL5bCx6L295YWl5LqG54m55Yir5b+r77yb5L+u5aSN55m+5bqm5pCc57Si55qE5bCP6ZO+5o6l55qE6YeN5a6a5ZCR5rKh5pyJ5pS577yb5L+u5aSN5LiL5YiS57q/56e76Zmk6YCJ6aG555qE5LiL5YiS57q/56e76Zmk5qih5byPCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wNy4yMS1WMTguMCDkv67lpI3mkJzni5fmkJzntKLmsqHmnInojrflj5bliLDnnJ/lrp7pk77mjqXnmoTpl67popjvvJvlpITnkIbnmb7luqbph43lrprlkJHpgJ/luqblj4jlv6vlj4jlpb3vvJvov5nmrKHmm7TmlrDlsLHmlK/mjIFlZGdl5LqG77yM5ZCM5pe255CG6K665LiK5pSv5oyBc2FmYXJp77yM5biM5pyb5rWL6K+V77yb5YW25qyh5LyY5YyW6LC35q2M55qE55WM6Z2i5qC35byPCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wNy4xMi1WMTcuOSDkv67mlLnmo4DmtYvlj4LmlbDvvIzlhbzlrrnmlK/mjIFPcGVyYea1j+iniOWZqO+8m+aaguaXtui/mOaYr+S4jeaUr+aMgUVER0XnmoTpk77mjqXph43lrprlkJHlip/og70KLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjA3LjA3LVYxNy44IOS/ruWkjeeUseS6juS4iuasoeabtOaWsOS4lueVjOadr+eVjOmdouaXtuWvvOiHtOeahHNoYWRvd0RPTeWFs+mXre+8jOeEtuWQjuW5v+WRiuWHuueOsOeahOmXrumimO+8m+S8mOWMluaVtOS9k+WOu+W5v+WRiuinhOWImS0tLeacieW3peWFt+S9leW/heiHquW3semAoOi9ruWtkC3mnKzmrKHnlKjkuobnmb7luqboh6rluKZqcXVlcnnnmoTmn6Xor6Llh73mlbBoYXMoKQovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDYuMjktVjE3Ljcg5L+u5aSN5Y+z6L655qCP5a+86Ie055qE5Y+z5L6n6L+H6auY77yM5bem5L6n55yL5LiN6KeB77yM5Lul5Y+K6Ieq5a6a5LmJ6aG16Z2i5qC35byP5Lii5aSx55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wNi4yNy1WMTcuNiDmmoLml7blhbPpl61TaGFkb3dET03nmoTnp7vpmaTlip/og70t5bC96YeP5L+d55WZ5pCc57Si5LiW55WM5p2v5Yqf6IO95a6M5ZaE44CC5L+u5aSN5Zyo5p+Q5Lqb6aG16Z2i5LiK6ISa5pys5peg5rOV6L+Q6KGM55qE5oOF5Ya144CC5paw5aKe6Ieq5a6a5LmJ5qC35byP55qE6L6T5YWl5qGGCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wNi4yNi1WMTcuNSDpu5jorqTlhbPpl63lj7PovrnmoI8t5pio5aSp5b+Y5LqG5YWz6Zet5LqGCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wNi4yNS1WMTcuNCAxLuS/ruWkjeiwt+atjOWPjOWIl+mXrumimO+8mzIu5L+u5aSN5Y+z6L655qCP5bGV56S6LeWlveS6m+S6uuivtOWOu+aOieS5i+WQjuS4jeWlveeci++8mzMu5Ly85LmO5LiK5Liq54mI5pys5Y+I5pyJ5aSa5qyh5o+S5YWl5a+86Ie055qE6aG16Z2i5Y2h6aG/5oOF5Ya1LeWGjeasoeS/ruWkjeOAguOAguOAguWFtuS7lueahOS8vOS5juayoeacieS6hu+8jOaDs+i1t+WGjeivtAovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDYuMTQtVjE3LjMg55Sx5LqOZWRnZeS4rei/mOaYr+S4jeaUr+aMgei/lOWbnuecn+WunumTvuaOpe+8jOS6juaYr+aaguaXtuWxj+iUveaOiWVkZ2XmtY/op4jlmajmgLvnmoTor7fmsYLvvIznrYnnjLTlrZDmm7TmlrDkuoblho3lvIDlkK/ov5nkuKrlip/og73vvJtjb25uZWN05YWD57Sg5Lit5re75YqgYmFpZHUuY29t6YG/5YWN5oq96aOOCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wNi4xMy1WMTcuMiDliqDlv6vmn6Xor6LpgJ/luqYt5ZCM5pe25LiN5YaN5by556qX6K+05paw6L+e5o6l77yM5peg6ZyA6K6+572u54m55q6K5Y+C5pWw77yb57y654K577yaTE9H5Lit5Lya5pyJ6K645aSaUmVmdXNlZCB0byBjb25uZWN0IHRvICJ4eHgiOiBSZXF1ZXN0IHdhcyByZWRpcmVjdGVkIHRvIGEgbm90IHdoaXRlbGlzdGVkIFVSTAovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDUuMjUtVjE3LjEg5paw5aKe5pSv5oyB55m+5bqm5a2m5pyv55qE6YeN5a6a5ZCR5Yqf6IO9Ci8vIEBub3RlICAgICAgICAgICAgMjAxOC4wNS4yNS1WMTcuMCDmi4bliIblhbPplK7or43pq5jkuq7ov5nkuKrlip/og73vvIzkv53or4Hlip/og73lsL3ph4/kuI3kuqTlj4nvvIzlpoLmnpzpnIDopoHov5nkuKrlip/og73nmoTvvIzor7flronoo4XmkJzntKLlhbPplK7or43oh6rliqjpq5jkuq7ohJrmnKwKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjA1LjIyLVYxNi41IOWwneivlee8k+ino+WGheWtmOeahOmXrumimO+8jOmBv+WFjeWvueWFtuS7lueahOi/m+ihjOW5suaJsO+8jOWQjOaXtuWHj+WwkeS6hmhlYWTmoIfnrb7op6blj5EKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjA1LjIyLVYxNi40IOW9u+W6leaLhuWIhuWPjOWHu+mrmOS6ruWSjOiHquWKqOmrmOS6ruWKn+iDve+8jOWQjOaXtuS/neaMgeS4pOS4quWKn+iDvemDveaYr+WFs+mXreeKtuaAgQovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDUuMjItVjE2LjMg6K6+572u5re75Yqg5Y+M5Ye76auY5Lqu5oyJ6ZKuCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wNS4yMi1WMTYuMiDkuI3lho3kvb/nlKhNT+aWueW8j++8jOeZvuW6pueahOWOn+WboOWvvOiHtE1P5b275bqV5peg5rOV5L2/55So77yM5LqO5piv5YWo6YO955SoRE9N5pON5L2c5p2l5Yik5pat5ZCnCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wNS4yMS1WMTYuMSDkvJjljJZhY19yZWRpcmVjdHN0YXR1c+mrmOS6rueahOmXrumimDsg5ZCM5pe25L+u5aSN5LqG5LiA5Liq6auY5Lqu5YWz6ZSu6K+N55qEYnVn77yb5Zyo5LiA5Liq6ICB5Y+45py655qE5oyH54K55LiL77yM5re75Yqg5LqGcmVmZXJlcuWPguaVsAovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDUuMjEtVjE2LjAg6LCi6LCi5pyL5Y+L5Lus5YWz5b+DNS4yMOaIkei/mOaYr+S4gOS4quS6uui/h+eahOW+iOWlve+8m+Wkp+eJiOacrO+8muS/ruato+iuoeaVsOWZqOeahOiuoeaVsOmXrumimO+8jOS/ruato01P5aSx5pWI5LmL5ZCO6ISa5pys55qE6Kem5Y+R6Zeu6aKY77yb5paw5aKe5pCc57Si5YWz6ZSu6K+N6auY5Lqu6YCJ6aG577yM6buY6K6k5YWz6ZetCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wNS4wNi1WMTUuMyDnroDljZXnp7vpmaTlpb3mkJznmoTlub/lkYoKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjA0LjIwLVYxNS4yIOS/ruWkjWJpbmfnmoRGYXZpY29u5pWI5p6c77yM6YG/5YWN5pi+56S65Zyo5LiN5ZCM6KGM5LiKCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wNC4wNC1WMTUuMSDnu6fnu63lsJ3or5Xkv67lpI1idWcs5LyY5YyW5pW05L2T6aG16Z2i5pWI5p6c5Lul5Y+K6LC35q2M5YW25L2Z6aG16Z2i55qE5pWI5p6c5bGV56S6O+WQjOaXtuWwhueZvuW6puagt+W8j+WGmeWFpeWIsCN3cmFwcGVyPiNoZWFk5Lit5Y67LOWIt+aWsOaIluiAheabtOaNoumhtemdouaXtuWwseS4jeS8muW8guW4uOmXqueDgeW5tuS4lOW+iOW5s+a7keS6hgovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDQuMDItVjE0Ljkg5pu05paw6LC35q2M5pW05L2T5pWI5p6cLOW5tuWwneivleS/ruWkjeWbvueJh+aWsOmXu+etieaYvuekuumXrumimOeahGJ1ZwovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDQuMDEtVjE0LjggLS3ml6Xni5fpl67popjvvIzlv5jkuobmlLnku6PnoIHvvIzlj6rmmK/mm7TmlrDkuobor7TmmI7jgILjgIIKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjA0LjAxLVYxNC43IOe7j+i/h+iAgeWPuOacuijmsqFJRCnmj5DkvpvnmoTlj43ppojvvIzlj5HnjrDkuIrkuIDniYjmm7TmlrDnmoTkvp3ml6fmnIlidWfvvIzkv67lpI3osIPlsI/op6blj5Hlj4LmlbDlr7zoh7TnmoTop6blj5HmsqHmnInnlJ/mlYjnmoTpl67popgtLeWBtuWwlOWPjOWIl+WkseaViOeahOmXrumimAovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDQuMDEtVjE0LjYg57uP6L+H6ICB5Y+45py6KOayoUlEKeaPkOS+m+eahOWPjemmiO+8jOaOkuafpeWPkeeOsGNocm9tZeS4iuiEmuacrOmmluasoei9veWFpeWkseaViOeahOmXrumimO+8jOW3sue7j+S/ruWkjQovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDQuMDEtVjE0LjUg5pu05paw5bm25re75Yqg6LC35q2M5Y+M5YiX44CB5b6F5rWL6K+V77yM5aaC5p6c5pyJ6Zeu6aKY77yM5Y+v5Lul55u05o6l5Y+N6aaICi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wMy4yOC1WMTQuNCDnp7vpmaRqcXVlcnnnmoRyZXF1aXJl77yM55aR5Ly8anF1ZXJ55byV6LW35Yay56qB6Zeu6aKY77yM5LqO5piv5b275bqV5byD55SoanF1ZXJ55p2l5aSE55CG6aG16Z2i5pWw5o2u77yM5pS555So5Y6f5aOwSlPlpITnkIbpobXpnaIKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjAzLjI3LVYxNC4zIOWIt+S4gOS4queJiOacrOWPt++8jOWQjOaXtuS8mOWMlkNTU+i9veWFpei/h+WkmueahOmXrumimO+8jOS9huaYr+i9veWFpei/h+aFoueahOmXrumimOWPiOWHuueOsOS6hu+8jOS4i+asoeWkhOeQhgovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDMuMjYtVjE0LjIg5L+u5aSN55Sx5LqO5LiK5qyh5pu05paw6L+H5LqO5rWB55WF55qEYnVn77yM5ZCM5pe25L+u5q2j6aaW6aG155qE5qC35byP5pi+56S6Ci8vIEBub3RlICAgICAgICAgICAgMjAxOC4wMy4yNS1WMTQuMSDlho3mrKHmioTngrnku6PnoIHvvIzlgJ/pibTogIHlj7jmnLo65rWu55SfQOacquath+eahOmDqOWIhuS8mOWMluS7o+eggeWujOWWhOW3suacieeahO+8iEByZXNvdXJjZeOAgUdNX2dldFJlc291cmNlVGV4dOOAgUdNX2FkZFN0eWxl77yJ77yM6YG/5YWN6aG16Z2i6Zeq54OB5LiA5LiL77yM5ZCM5pe26Kej5Yaz6YOo5YiGY3Nz6L295YWl6YeN5aSN55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wMy4yMy1WMTQuMCAxLuWwneivleS/ruWkjeWcqOeZvuW6pui0tOWQp+WSjOeZvuW6puefpemBk+eahOaWh+Wtl+aYvuekuuW8guW4uOeahOmXrumimDsgMi7kv67lpI3nvJblj7flpYfmgKrnmoTlvILluLjpl67popgKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjAzLjE4LVYxMy45IOabtOaWsOiwt+atjOeahGZhdmljb27kuKLlpLHnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjAzLjA0LVYxMy44IOabtOaWsOWbvuW6k+S4umh0dHBz5qih5byP77yM6YG/5YWN6YKj5ZWl5pi+56S65LiN5a6J5YWoCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wMi4xNi1WMTMuNyAxLuaWsOWinuWFs+mXreeZvuW6puaQnOe0oumihOa1i++8mzIu5paw5aKe5pyq55+l5Zu+5qCH5pe25YiH5o2i77ybIDMu56e76Zmk55m+5bqm5pCc57Si5bu66K6u55qE6aG26YOo5LiA5p2hCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wMS4xMi1WMTMuNiAxLuaWsOWinuenu+mZpOWPs+i+ueagj+eahOaMiemSru+8mzIu5paw5aKe54mI5pys5pi+56S65paH5a2X77ybMy7kv67mraNmYXZpY29u5L2N572u77ybNC7kv67lpI1mYXZpY29u55qE5Zu+54mH6ZSZ6K+v5pe25YCZ55qE5YC877yM5LiH5bm0QlVHCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4xMi4yNy1WMTMuNSDkv67lpI3nlLHkuo7kuIrkuKrniYjmnKzmm7TmlrDlpITnkIbnmb3lsY/vvIzlr7zoh7TnmoTpu5jorqTmoIflh4bmqKHlvI/nmoTlj7PkvqfmoI/kuI3op4HkuoYKLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjEyLjIwLVYxMy40IOaEn+iwoklE77ya56OB5oKs5rWu6Z2S6JuZ55qE5Y+N6aaI77yM5bey57uP5L+u5aSN5bCP5qaC546H5pCc57Si5LmL5ZCO54K55Ye757uT5p6c55m95bGP55qE6Zeu6aKYLeiyjOS8vOS5i+WJjeWkhOeQhui/h++8jOS9huaYr+ayoeacieW9u+W6leWkhOeQhuaOie+8jOi/measoeW9u+W6leS6hu+8jOaUueeUqENTU+makOiXjwovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMTIuMDQtVjEzLjMg5paw5aKe6K6+572u77yM6ZKI5a+555m+5bqm57O75YiX55qE6YeN5a6a5ZCR6Zeu6aKY77yM5LiN5bi455So55m+5bqm57O75YiX55qE5pyL5Y+L5Y+v5Lul5byA5ZCv6L+Z5Liq5Yqf6IO9Ci8vIEBub3RlICAgICAgICAgICAgMjAxNy4xMS4yMy1WMTMuMiDmhJ/osKLljaHppa3lnZvlj4tAQXBvbGxvODUxMeaPkOS+m+WPjemmiO+8jOW3sue7j+S/ruWkjemDqOWIhuefpeS5jueahOmHjeWumuWQkemXrumimO+8jOabtOWkmumXrumimOWPr+S7peebtOaOpeWPjemmiOaIkQovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMTEuMjItVjEzLjEg56e76Zmk55m+5bqm57O755qE6YeN5a6a5ZCR77yM6Jm954S25aSE55CG5LqG77yM5L2G5piv55m+5bqm57O755u06L+e5Lya5a+86Ie05paH5a2X5peg5rOV55u05o6l5pi+56S677yM5YW25LuW55u06L+e5LiN5b2x5ZONCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4xMS4xNy1WMTIuMTMg6L+b5LiA5q2l56e76Zmk55m+5bqm55qE5bm/5ZGK77yM5Y+z6L656YOo5YiG5bm/5ZGK55qE5aSE55CG5ZKM56e76ZmkCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4xMS4xNS1WMTIuMTIg5pCc54uX55qE5pCc57Si5Zyw5Z2A5Y+I5Y+Y5LqG77yM5Yqg5LiA5LiqCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4xMS4wMi1WMTIuMTEg5paw5aKe5Zyo5omL5py6bW9iaWxl5qih5byP5LiL55m+5bqm55qE6YeN5a6a5ZCR5aSE55CG77yM5YW25L2Z572R56uZ5Lul5ZCO5YaN6K+05ZCn77yM5Lyw6K6h5rKh5pyJ6ZyA5rGCCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4xMC4yNy1WMTIuMTAgMS7kv67lpI3pgLzmrbvlvLrov6vnl4fnmoTpl67popjvvJsyLuenu+mZpOWujOaVtOaooeW8jy3pgb/lhY3lh7rnjrDlkITnp43mi6bmiKrvvJszLuS/ruWkjXd3dy5zby5jb23nmoTph43lrprlkJHpl67popgKLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjA5LjE4LVYxMi45IOabtOaWsOWOn+WboO+8mjEu5Yu/5b+Y5Zu96IC7OTE477ybMi7mm7TmlrDnmb7luqblgbblsJTph43lrprlkJHmsqHmiJDlip/nmoTpl67popjvvJszLuS/ruWkjemhtemdoueahOWwj+mXrumimO+8mzQu5paw5aKe5paH5a2X5LiL5YiS57q/5byA5YWzCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wOS4xNS1WMTIuOCDntKfmgKXkv67lpI3osLfmrYzkuIrpobXpnaLljaHpob/nmoTpl67popjvvIzmjpLmn6Xlvpfnn6XkuLrnmb7luqbop4TliJnnmoTmianlsZXlh7rkuobpl67popjvvIzpnZ7luLjmhJ/osKLkvJflpJrmnIvlj4vnmoTmlK/mjIHvvIzmsqHmnInkvaDku6znmoTlj43ppojlsLHmsqHmnInov5nkuKrohJrmnKzjgILkv67lpI3lubbnp7vpmaTkuobnmb7luqblrpjmlrnph4fnlKjnmoTmlrDmlrnlvI/lub/lkYrmqKHlvI/vvIzosozkvLzlj6rlnKhjaHJvbWXkuIrlh7rnjrAKLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjA5LjEzLVYxMi43IDEu5L+u5aSNTuW5tOWJjeabtOaWsOWvvOiHtOeahOmDqOWIhue9keWdgOmHjeWumuWQkeaXoOaViO+8jOe7p+e7reS9v+eUqEdFVOaWueazle+8jOWboOS4uuWlveS6m+e9keermeS4jeaUr+aMgUhFQUTmlrnms5XvvIzojrflj5bmiJDlip/kuYvlkI7lsLHmlq3lvIDvvIzlsL3ph4/lh4/lsJHkuobnvZHnu5zlvIDmlK87IDIu5L+u5aSN5pCc54uX55qE6YOo5YiG5pCc57Si5byC5bi4OyAzLuS/ruWkjeeZvuW6puWcqGNocm9tZTYx5LiK55qE6ZO+5o6l5byC5bi46Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wOS4xMy1WMTIuNiDlvIDlrabkuYvlkI7nmoTnrKzkuozkuKrniYjmnKzvvIzkv67lpI3kuIrmrKHmm7TmlrDlr7zoh7TnmoTnmb7luqbpppbpobXplJnkubHvvIzkv67lpI1maXJlZm945LiK55qE6Kem5Y+R77yM5L+u5aSNU3VwZXJQcmVsb2FkZXLnmoTnv7vpobXlsZXnpLoKLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjA5LjEyLVYxMi41IOW8gOWtpuS5i+WQjueahOesrOS4gOS4queJiOacrO+8jOS/ruWkjeWcqOeZvuW6puS4iuWBtuWwlOS4jeinpuWPkeeahOmXrumimOOAkOS7jummlumhteaQnOe0oueahOaXtuWAmeinpuWPkeOAke+8jOWFtuasoeWcqOWFhOW8n1hYWCjmiJHkuZ/lv5jkuoblk6rkuKpQX1Ap55qE5biu5Yqp5LiL77yM5L+u5aSN5LqG5YG25bCU5Lya5YWo5bGP54m55q6K5o6o5bm/5qih5byP55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wOS4wNi1WMTIuNCDkv67lpI3kuIrkuKrniYjmnKzmm7TmlrDlr7zoh7TnmoTnmb7luqbnn6XpgZPlho3mrKHlvILluLjpl67popg75pu05paw55+l5LmO5LiK55qE6YeN5a6a5ZCR6Zeu6aKYLeiHquW3seeahOiEmuacrAovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDkuMDYtVjEyLjMg5L+u5aSN5Y+M5YiX55qE5qih5byP55qE5pi+56S66Zeu6aKY77yM5aaC5p6c5pyJ6Zeu6aKY5biM5pyb5Y+N6aaI5LiA5LiL77yM6aG65L6/5YiH5o2iY3Nz5p2l5rqQCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wOS4wNC1WMTIuMiDnibnmhI/kv67lpI3lnKhWaW9sZW50TW9ua2V55LiK55qE6K6+572u5peg5pWI55qE6Zeu6aKY5Lul5Y+K5ZyoMzYw5rWP6KeI5Zmo5LiK55qE6K6+572u5LiN5pi+56S66Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wOS4wNC1WMTIuMSDnmb7luqbpobXpnaLnm7TmjqXmt7vliqDorr7nva7lhaXlj6PvvJszNjDmtY/op4jlmajorr7nva7lj6/og73lnKjlupXpg6jpobXpnaLvvJvmlK/mjIHljZXliJflkozlj4zliJfmqKHlvI/vvIznlYzpnaLmm7Tnvo7op4Jmcm9t5rWu55SfQOacquath++8m+WPr+iDveaYr+acgOi/keS4gOauteaXtumXtOeahOacgOWQjueJiOacrOS6hu+8jOimgeW8gOWtpuS6hn5+Ci8vIEBub3RlICAgICAgICAgICAgMjAxNy4wOS4wMi1WMTEuMTAg5re75Yqg5Lik5Liq6YCJ6aG577yM5Y+v5Lul6YCJ5oup5oCn56e76Zmk6YOo5YiG6K6+572uCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wOS4wMS1WMTEuOSDkv67lpI3kuIrmrKHmm7TmlrDlr7zoh7TnmoTnmb7luqbljrvlub/lkYrkuI3ngbXnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjA4LjMwLVYxMS44IOaWsOWinu+8mjEuR03orr7nva7moI/nm67kuK3liqDlhaXorr7nva4gMi5iYWlkdS3kvb/nlKhIRUFE5pa55byP6I635Y+W77yM5YeP5bCR5pWw5o2u5Lyg6L6T77yM5pCc54uX54m55q6K77yM57un57utR0VU5pa55byPCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wOC4yOS1WMTEuNyDmlrnkvr/mnIvlj4vku6wt56e76Zmk55+l5LmO6YeN5a6a5ZCRCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wOC4wNy1WMTEuNiDosIPmlbTvvJrnp7vpmaTlsI/nu7/ngrnvvIzmjaLkuLrngrnlh7tGYXZpY29u5oiW6ICF5piv6K6h5pWw5Zmo5by55Ye656qX5Y+j77yM5pu05o2i5Li65Yqg576k6ZO+5o6lCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wOC4wNi1WMTEuNSDkv67lpI3vvIzkv53lrZjlvILluLjvvJvpooTmnJ/kuYvlkI7kvJrmt7vliqDnmb7luqbmkJzntKLpobXpnaLnmoTlpKfosIPmlbQKLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjA4LjA1LVYxMS40IOaWsOWinu+8muWPjemmiOWSjOW7uuiuruWcsOWdgOWinuWKoAovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDguMDQtVjExLjMg5L+u5aSN77ya55Sx5LqO6Iux6K+t5LiN5aW95a+86Ie055qE5ou85YaZ6ZSZ6K+v77yM5oSf6LCic2hq5YWE5byf5oyH5Ye6Ci8vIEBub3RlICAgICAgICAgICAgMjAxNy4wOC4wMy1WMTEuMiDmlrDlop7vvJrosLfmrYzpk77mjqXmlrDmoIfnrb7miZPlvIA7IOenu+mZpOaQnOe0oue7k+aenOmTvuaOpeeahOS4i+WIkue6vwovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDcuMjItVjExLjEg5paw5aKe5LqG5byA5YWz5qih5byP77yM5Y+v5Lul5byA5ZCv5oiW6ICF5YWz6Zet5p+Q5Lqb6Ieq5bex5LiN5Zac5qyi55qE5Yqf6IO977yM5byA5YWz5Zyo5Y+z5LiK6KeS77yM5ZKMU3VwZXJQcmVsb2Fk5YWx55SoCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wNi4yNS1WMTAuMSDkv67lpI3kuIrmrKHmm7TmlrDlr7zoh7TnmoTnmb7luqbljrvlub/lkYrnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjA2LjI1LVYxMC4wIOS/ruWkjeS4iuasoeabtOaWsOWvvOiHtOeahOeZvuW6puefpemBk+WGjeasoeWHuueOsOiAgemXrumimAovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDYuMjQtVjkuOSDmm7TmlrDkuobnv7vpobXnmoTpl67popjvvIznu4/ov4flpJrmrKHnmoTlsJ3or5XlupTor6XmsqHmnInlpKrlpKfpl67popjkuoYKLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjA2LjI0LVY5Ljgg5pu05paw5LqGYmluZ+S4iueahOWbvueJh2Zhdmljb27lnLDlnYA75bm25LiU5bC96YeP5YeP5bCR5LqGTU/op6blj5HmrKHmlbDvvIzpgb/lhY3pobXpnaLljaHpob875L+u5aSN5pCc54uX55qE6YeN5a6a5ZCR6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wNi4yMy1WOS43IOS4iuS8oOmUmeS6hn7ph43mlrDmnaXvvIzpobrluKblpITnkIbkuobosLfmrYxmYXZpY29u6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wNi4yMy1WOS42IOS/ruWkjeS6huiwt+atjOmHjeWumuWQkeeahOmXrumimH5+5oiR55qE6ZSFCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wNi4xMS1WOS41IOS4jeWGjeS9v+eUqERPTeaWueW8j+adpeebkeWQrOmhtemdouS6hu+8jOS9v+eUqHRpbWVyK01P5p2l5aSE55CG77yM5p6B5aSn5YeP5bCR5LqGY3B15Y2g55So5pe26Ze05ZKM556s5pe2572R6YCf5Y2g55SoCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wNS4yNi1WOS40IOaBouWkjWZhdmljb27mqKHlvI/vvIznjrDlnKjov5nkuKrohJrmnKzln7rmnKzkuIrlhajkuobvvIzmnInpnIDopoHku6XlkI7lho3or7QKLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjA1LjE1LVY5LjMg5pqC5pe256e76Zmk55m+5bqm5Y+z6L655L6n5qCP55qE5bm/5ZGK56e76Zmk5qih5byP77yM5YeG5aSH5LiL5qyh5LyY5YyW5aW95LqG5YaN57un57utCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wNS4xMi1WOS4yIOaaguaXtuenu+mZpOiwt+atjOeahOWuieWFqOaQnOe0ouaooeW8j++8jOWboOS4uuW+iOWkjeadgueahOWOn+WboAovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDUuMTItVjkuMSDmmoLml7bnp7vpmaRGYXZpY29u55qE5pi+56S677yM5Zug5Li66L+Z5qC35bCx5p2C5LqG77yM5pyJ6ZyA6KaB55qE5Lq66Ieq5bex5Y676KOF6L+Z5Liq6ISa5pys5ZCn77yM5L+d55WZ55m+5bqm5Y675bm/5ZGKCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wNS4xMi1WOS4wIOmbhuWQiOS6huWOu+mHjeWumuWQkSvljrvlub/lkYorRmF2aWNvbuaYvuekugovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDUuMTItVjguNyDpm4blkIjkuobljrvlub/lkYrnmoTohJrmnKzvvIzku6XliY3nmoTpgqPkuKrljrvlub/lkYrnmoTohJrmnKzlsLHkuI3nlKjkuoYKLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjA1LjEyLVY4LjYg5L+u5aSN6LC35q2M5a6J5YWo5pCc57Si55qEQlVHIFYyCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wNS4xMi1WOC40IOaWsOWinu+8mum7mOiupOWxj+iUveiwt+atjOeahOWuieWFqOaQnOe0ouWKn+iDvQovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDUuMDUtVjguMyDkv67lpI1pbmNsdWRl6IyD5Zu05aSq5bCP5a+86Ie055qE55m+5bqm55+l6YGT55qE5bGP6JS96Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wNS4wNC1WOC4yIOe7iOS6juS/ruWkjeS6hueZvuW6puefpemBk+WbvueJh+abv+aNouS6huaWh+Wtl+eahOi/meS4quWkp0JVRzsg6aG65L6/5aSE55CG5LqGc3VwZXJhcGkuemhpZGFvLmJhaWR1LmNvbTsg5paw5aKe6LC35q2M5pCc57Si57uT5p6c6YeN5a6a5ZCR5Y676ZmkCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wNS4wNC1WOC4xIOe7iOS6juS/ruWkjeS6hueZvuW6puefpemBk+WbvueJh+abv+aNouS6huaWh+Wtl+eahOi/meS4quWkp0JVR++8jOmhuuS+v+WkhOeQhuS6hnN1cGVyYXBpLnpoaWRhby5iYWlkdS5jb20KLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjA1LjA0LVY4LjAg57uI5LqO5L+u5aSN5LqG55m+5bqm55+l6YGT5Zu+54mH5pu/5o2i5LqG5paH5a2X55qE6L+Z5Liq5aSnQlVH77yM5b6F5rWL6K+VCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wMy4yOC1WNy42IOS/ruWkjeWcqFZpb2xlbnRNb25rZXnkuIrnmoTkuI3mlK/mjIHnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjAzLjI4LVY3LjUg5bCd6K+V5L+u5aSNY2hyb21l5LiK55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wMy4yMS1WNy40IOWwneivleWkhOeQhkVkZ2XkuIrkuI3mlK/mjIHnmoTpl67popjvvIznu5Pmnpzlj5HnjrDmmK9FZGdl5pys6Lqr55qEVGFtcGVyTW9ua2V55pSv5oyB5pyJ6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wMy4xOS1WNy4zIOS/ruWkjeaJk+W8gOeZvuW6puS5i+WQjuWGjeasoeeCueWHu+KAnOeZvuW6puS4gOS4i+KAneWvvOiHtOeahOaXoOazleabtOaWsOmHjeWumuWQkemXrumimAovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDMuMTktVjcuMiDmnKrnn6Xljp/lm6BjaHJvbWXnmoRNdXRhdGlvbk9ic2VydmVy5peg5rOV5L2/55So5LqG77yM57un57ut5Zue5b2S5Lul5YmN55qERE9NTm9kZUluc2VydGVkCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wMi4xNy1WNy4wIOS/ruWkjeaQnOeLl+eahOaQnOe0oue7k+aenOmHjeWumuWQkemXrumimCvmlLnkuKrlkI3lrZcKLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjAyLjE3LVY2Ljkg5L+u5aSN5pCc54uX55qE5pCc57Si57uT5p6c6YeN5a6a5ZCR6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxNi4xMi4xMC1WNi44ICoqKgovLyBAbm90ZSAgICAgICAgICAgIDIwMTYuMTAuMjctVjYuNyDkv67lpI3kuobku6XliY3nmoTph43lpI3or7fmsYLvvIznjrDlnKjnmoTor7fmsYLmlbDlupTor6XlsI/kuoblvojlpJrvvIznvZHnu5zkuZ/lsLHkuI3ljaHkuobvvIzmhJ/op4nokIzokIzlk5IKLy8gQG5vdGUgICAgICAgICAgICAyMDE2LjA0LjI0LVY2LjYg5oGi5aSN5Lul5YmN55qE54mI5pys77yM5Zug5Li65YW85a655oCn6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxNS4xMi4wMS1WNS4wIOWKoOWFpeaQnOeLl+eahOaUr+aMge+8jOS9huaYr+aUr+aMgeS4jeaYr+W+iOWlvQovLyBAbm90ZSAgICAgICAgICAgIDIwMTUuMTEuMjUtVjIuMCDkvJjljJbvvIzlt7Lnu4/mmK/nnJ/lrp7lnLDlnYDnmoTkuI3lho3lsJ3or5Xojrflj5YKLy8gQG5vdGUgICAgICAgICAgICAyMDE1LjExLjI1LVYxLjAg5a6M5oiQ5Y675o6J55m+5bqm6YeN5a6a5ZCR55qE5Yqf6IO9Ci8vIEByZXNvdXJjZSAgICAgICAgYmFpZHVDb21tb25TdHlsZSAgICAgaHR0cDovL2liYWlkdS5odHQ1LmNvbS9uZXdjc3MvYmFpZHVDb21tb25TdHlsZS5jc3M/dD0yMy4zMQovLyBAcmVzb3VyY2UgICAgICAgIGJhaWR1T25lUGFnZVN0eWxlICAgIGh0dHA6Ly9pYmFpZHUuaHR0NS5jb20vbmV3Y3NzL2JhaWR1T25lUGFnZVN0eWxlLmNzcz90PTIzLjMxCi8vIEByZXNvdXJjZSAgICAgICAgYmFpZHVUd29QYWdlU3R5bGUgICAgaHR0cDovL2liYWlkdS5odHQ1LmNvbS9uZXdjc3MvYmFpZHVUd29QYWdlU3R5bGUuY3NzP3Q9MjMuMzEKLy8gQHJlc291cmNlICAgICAgICBiYWlkdUxpdGVTdHlsZSAgICAgICBodHRwOi8vaWJhaWR1Lmh0dDUuY29tL25ld2Nzcy9iYWlkdUxpdGVTdHlsZS5jc3M/dD0yMy4zMQovLyBAcmVzb3VyY2UgICAgICAgIGdvb2dsZUNvbW1vblN0eWxlICAgIGh0dHA6Ly9pYmFpZHUuaHR0NS5jb20vbmV3Y3NzL2dvb2dsZUNvbW1vblN0eWxlLmNzcz90PTIzLjMxCi8vIEByZXNvdXJjZSAgICAgICAgZ29vZ2xlT25lUGFnZVN0eWxlICAgaHR0cDovL2liYWlkdS5odHQ1LmNvbS9uZXdjc3MvZ29vZ2xlT25lUGFnZVN0eWxlLmNzcz90PTIzLjMxCi8vIEByZXNvdXJjZSAgICAgICAgZ29vZ2xlVHdvUGFnZVN0eWxlICAgaHR0cDovL2liYWlkdS5odHQ1LmNvbS9uZXdjc3MvZ29vZ2xlVHdvUGFnZVN0eWxlLmNzcz90PTIzLjMxCi8vIEByZXNvdXJjZSAgICAgICAgYmluZ0NvbW1vblN0eWxlICAgICAgaHR0cDovL2liYWlkdS5odHQ1LmNvbS9uZXdjc3MvYmluZ0NvbW1vblN0eWxlLmNzcz90PTIzLjMxCi8vIEByZXNvdXJjZSAgICAgICAgYmluZ09uZVBhZ2VTdHlsZSAgICAgaHR0cDovL2liYWlkdS5odHQ1LmNvbS9uZXdjc3MvYmluZ09uZVBhZ2VTdHlsZS5jc3M/dD0yMy4zMQovLyBAcmVzb3VyY2UgICAgICAgIGJpbmdUd29QYWdlU3R5bGUgICAgIGh0dHA6Ly9pYmFpZHUuaHR0NS5jb20vbmV3Y3NzL2JpbmdUd29QYWdlU3R5bGUuY3NzP3Q9MjMuMzEKLy8gQHJlc291cmNlICAgICAgICBzb2dvdUNvbW1vblN0eWxlICAgICBodHRwOi8vaWJhaWR1Lmh0dDUuY29tL25ld2Nzcy9zb2dvdUNvbW1vblN0eWxlLmNzcz90PTIzLjMxCi8vIEByZXNvdXJjZSAgICAgICAgc29nb3VPbmVQYWdlU3R5bGUgICAgaHR0cDovL2liYWlkdS5odHQ1LmNvbS9uZXdjc3Mvc29nb3VPbmVQYWdlU3R5bGUuY3NzP3Q9MjMuMzEKLy8gQHJlc291cmNlICAgICAgICBzb2dvdVR3b1BhZ2VTdHlsZSAgICBodHRwOi8vaWJhaWR1Lmh0dDUuY29tL25ld2Nzcy9zb2dvdVR3b1BhZ2VTdHlsZS5jc3M/dD0yMy4zMQovLyBAcmVzb3VyY2UgICAgICAgIE1haW5IdVlhblN0eWxlICAgICAgIGh0dHA6Ly9pYmFpZHUuaHR0NS5jb20vbmV3Y3NzL0h1WWFuU3R5bGUuY3NzP3Q9MjMuMzEKLy8gQHJlc291cmNlICAgICAgICBTaXRlQ29uZmlnUnVsZXMgICAgICBodHRwOi8vaWJhaWR1Lmh0dDUuY29tL25ld2Nzcy9TaXRlQ29uZmlnUnVsZXMuY29uZj90PTIzLjMxCi8vIEBncmFudCAgICAgICAgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICAgICBHTS5nZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICAgICAgR00uc2V0VmFsdWUKLy8gQGdyYW50CQkJR01fYWRkU3R5bGUKLy8gQGdyYW50ICAgICAgICAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgICAgICAgIEdNX2dldFJlc291cmNlVGV4dAovLyBAZ3JhbnQgICAgICAgICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQKLy8gPT0vVXNlclNjcmlwdD09CgohZnVuY3Rpb24gKCkgewogICAgbGV0IGlzZGVidWcgPSBmYWxzZTsKICAgIGxldCBpc0xvY2FsRGVidWcgPSBpc2RlYnVnIHx8IGZhbHNlOwogICAgbGV0IGRlYnVnID0gaXNkZWJ1ZyA/IGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSkgOiBmdW5jdGlvbiAoKSB7fTsKICAgIGxldCBhY0Nzc0xvYWRGbGFnID0gZmFsc2U7CgogICAgbGV0IGluRXh0TW9kZSA9IHR5cGVvZihpc0V4dGVuc2lvbikgIT0gInVuZGVmaW5lZCI7CiAgICBsZXQgaW5HTU1vZGUgPSB0eXBlb2YoR01faW5mby5zY3JpcHRIYW5kbGVyKSAhPSAidW5kZWZpbmVkIjsgLy8gPSAiR3JlYXNlbW9ua2V5IiB8fCAiVGFtcGVybW9ua2V5IiB8fCAiVmlvbGVudE1vbmtleSIKICAgIC8vIOaWsOeJiOacrOeahEdyZWFzZU1vbmtleeaYr+W4puaciXNjcmlwdEhhbmRsZXLvvIzkvYbmmK/msqHmnIlHTV9nZXRSZXNvdXJjZVRleHTvvJvml6fniYjmnKzkuI3luKZzY3JpcHRIYW5kbGVy77yM5L2G5piv5pyJR01fZ2V0UmVzb3VyY2VUZXh0CiAgICBsZXQgaXNOZXdHTSA9IHR5cGVvZihHTV9pbmZvLnNjcmlwdEhhbmRsZXIpICE9ICJ1bmRlZmluZWQiICYmIEdNX2luZm8uc2NyaXB0SGFuZGxlci50b0xvd2VyQ2FzZSgpID09ICJncmVhc2Vtb25rZXkiOwogICAgbGV0IHVzZUNOTGFuID0gdHJ1ZTsgLy8g5pqC5a6a77yM5LmL5ZCO6ZyA6KaB6YC76L6R5aSE55CGCiAgICAvLyBpbkV4dE1vZGUgJiBpbkdNTW9kZQogICAgLy8gdHJ1ZSAgICAgICAgdHJ1ZSA95omp5bGV5LiL55qER03ku6PnoIEg5LiN5omn6KGMCiAgICAvLyB0cnVlICAgICAgICBmYWxzZT3mianlsZXkuIvku6PnoIEg5omn6KGMCiAgICAvLyBmYWxzZSAgICAgICB0cnVlID3ku4VHTeS7o+eggSDmiafooYwKICAgIC8vIGZhbHNlICAgICAgIGZhbHNlPeW8guW4uCDkvYbmmK/ov5jmmK/opoHmiafooYzku6PnoIEKICAgIGRlYnVnKCLnqIvluo/lvIDlp4siKTsKICAgIGlmIChpbkV4dE1vZGUgPT0gdHJ1ZSAmJiBpbkdNTW9kZSA9PSB0cnVlKSB7CiAgICAgICAgY29uc29sZS5sb2coIuaJqeWxleaooeW8jy3ohJrmnKzkuI3lkK/nlKgiKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICBpZiAodHlwZW9mKEdNKSA9PSAidW5kZWZpbmVkIikgewogICAgICAgIC8vIOi/meS4quaYr1Zpb2xlbnRNb25rZXnnmoTmlK/mjIHpgInpobkKICAgICAgICBHTSA9IHt9OwogICAgICAgIEdNLnNldFZhbHVlID0gR01fc2V0VmFsdWU7CiAgICAgICAgR00uZ2V0VmFsdWUgPSBHTV9nZXRWYWx1ZTsKICAgIH0KICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgZGVidWcoIueoi+W6j+aJp+ihjCIpOwogICAgICAgIGxldCBuZWVkRGlzcGxheU5ld0Z1biA9IHRydWU7IC8vIOacrOasoeabtOaWsOaYr+WQpuacieaWsOWKn+iDvemcgOimgeWxleekugogICAgICAgIGlmICh3aW5kb3cuTm9kZUxpc3QgJiYgIU5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoKSB7CiAgICAgICAgICAgIE5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrLCB0aGlzQXJnKSB7CiAgICAgICAgICAgICAgICB0aGlzQXJnID0gdGhpc0FyZyB8fCB3aW5kb3c7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHRoaXNbaV0sIGksIHRoaXMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICBpZighQXJyYXkucHJvdG90eXBlLmFjcHVzaCl7CiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDov5vooYzkuI3ph43lpI3mj5LlhaXvvIzmj5LlhaXlkI7miafooYzlm57osIPlh73mlbAKICAgICAgICAgICAgICogQHBhcmFtIGRhdGEg5b6F5o+S5YWl5pWw5o2uCiAgICAgICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayDlm57osIPlh73mlbAKICAgICAgICAgICAgICovCiAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5hY3B1c2ggPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHsKICAgICAgICAgICAgICAgIC8vIOWmguaenOaYr+Weg+WcvuaVsOaNru+8jOmCo+S5iOWPr+S7peS4ouW8g+eahAogICAgICAgICAgICAgICAgaWYoZGF0YSA9PSBudWxsKSByZXR1cm47CiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmlbDmja7kuK3mnInlm57ovabvvIzpgqPmlbDmja7kuZ/mmK/ml6DmlYjnmoTmraPmlofogIzlt7IKICAgICAgICAgICAgICAgIGlmKGRhdGEucmVwbGFjZSgvKHt8fXwsfFwrfO+8mnzjgIJ8XG4pLykgIT0gZGF0YSkgcmV0dXJuOwogICAgICAgICAgICAgICAgaWYodGhpcy5maW5kSW5kZXgobSA9PiBtID09IGRhdGEpIDwgMCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wdXNoKGRhdGEpOwogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHRoaXMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuYWNyZW1vdmUgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHsKICAgICAgICAgICAgICAgIGxldCBkZWxJZCA9IHRoaXMuZmluZEluZGV4KG0gPT4gbSA9PSBkYXRhKTsKICAgICAgICAgICAgICAgIGlmKGRlbElkID49IDApewogICAgICAgICAgICAgICAgICAgIHRoaXMuc3BsaWNlKGRlbElkLCAxKTsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayh0aGlzKTsKICAgICAgICAgICAgICAgIH0gLy8g5Yig6ZmkZGVsSWTnmoTmlbDmja7vvIzliKDpmaTkuIDkuKoKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgbGV0IEFDQ29uZmlnID0ge307CiAgICAgICAgLyrlrZjlnKjlr7nmnKrliJ3lp4vljJblj5jph4/nmoTliJ3lp4vljJbotYvlgLwt5peg6ZyA5ouF5b+D6L+t5Luj5YW85a656Zeu6aKYKi8KICAgICAgICBsZXQgRGVmYXVsdENvbmZpZyA9IHsKICAgICAgICAgICAgaXNSZWRpcmVjdEVuYWJsZTogdHJ1ZSwgIC8vIOaYr+WQpuW8gOWQr+mHjeWumuWQkeWKn+iDvQogICAgICAgICAgICBpc0Fkc0VuYWJsZTogdHJ1ZSwgLy8g5piv5ZCm5byA5ZCv5Y675bm/5ZGK5qih5byPCiAgICAgICAgICAgIGlzQXV0b3BhZ2U6IHRydWUsICAvLyDmmK/lkKblvIDlkK/oh6rliqjnv7vpobXlip/og70KICAgICAgICAgICAgaXNCbG9ja0VuYWJsZTogdHJ1ZSwgLy8g5piv5ZCm5byA5ZCv5Y675oum5oiq5qih5byPCiAgICAgICAgICAgIGlzQmxvY2tEaXNwbGF5OiBmYWxzZSwgLy8g5piv5ZCm5Yig6Zmk5bey5oum5oiq55qE5p2h55uuCiAgICAgICAgICAgIGlzQmxvY2tCdG5EaXNwbGF5OiB0cnVlLCAvLyDmmK/lkKbmmL7npLpibG9ja+aMiemSrgogICAgICAgICAgICBBZHNTdHlsZUVuYWJsZTogdHJ1ZSwgLy8g5piv5ZCm5byA5ZCv6Ieq5a6a5LmJ5qC35byP5qih5byPCiAgICAgICAgICAgIEFkc1N0eWxlTW9kZV9CYWlkdTogMiwgLy8gMC3kuI3luKZjc3PvvJsxLeWNleWIl+mdoOW3pu+8mzIt5Y2V5YiX5bGF5Lit77ybMy3lj4zliJflsYXkuK0KICAgICAgICAgICAgQWRzU3R5bGVNb2RlX0dvb2dsZTogMiwgLy8gMC3kuI3luKZjc3PvvJsxLeWNleWIl+mdoOW3pu+8mzIt5Y2V5YiX5bGF5Lit77ybMy3lj4zliJflsYXkuK0KICAgICAgICAgICAgQWRzU3R5bGVNb2RlX0Jpbmc6IDMsIC8vIDAt5LiN5bimY3Nz77ybMS3ljZXliJfpnaDlt6bvvJsyLeWNleWIl+WxheS4re+8mzMt5Y+M5YiX5bGF5LitCiAgICAgICAgICAgIEFkc1N0eWxlTW9kZV9Tb0dvdTogMywgLy8gMC3kuI3luKZjc3PvvJsxLeWNleWIl+mdoOW3pu+8mzIt5Y2V5YiX5bGF5Lit77ybMy3lj4zliJflsYXkuK0KCiAgICAgICAgICAgIEh1WWFuX0JhaWR1OiBmYWxzZSwgLy8g5oqk55y85qih5byPLeeZvuW6pgogICAgICAgICAgICBIdVlhbl9Hb29nbGU6IGZhbHNlLCAvLyDmiqTnnLzmqKHlvI8t6LC35q2MCiAgICAgICAgICAgIEh1WWFuX0Jpbmc6IGZhbHNlLCAvLyDmiqTnnLzmqKHlvI8t5b+F5bqUCiAgICAgICAgICAgIEh1WWFuX1NvR291OiBmYWxzZSwgLy8g5oqk55y85qih5byPLeW/heW6lAogICAgICAgICAgICBTdHlsZV9CYWlkdUxpdGU6IGZhbHNlLCAvLyBCYWlkdV9MaXRl5qC35byP6KGoCgogICAgICAgICAgICBkZWZhdWx0SHVZYW5Db2xvcjogIiNERUYxRUYiLAogICAgICAgICAgICBpc1VzZXJDb2xvckVuYWJsZTogdHJ1ZSwgLy8g5piv5ZCm5byA5ZCvZmF2aWNvbuWbvuagh+WKn+iDvQogICAgICAgICAgICBpc0Zhdmljb25FbmFibGU6IHRydWUsIC8vIOaYr+WQpuW8gOWQr2Zhdmljb27lm77moIflip/og70KICAgICAgICAgICAgZGVmYXVsdEZhdmljb25Vcmw6ICJodHRwczovL2FlMDEuYWxpY2RuLmNvbS9rZi9IVEIxZFJZMFg4T0QzS1ZqU1pGRnE2QW45cFhheS5qcGciLCAvLyDpu5jorqTlm77moIflnLDlnYAKICAgICAgICAgICAgZG9EaXNhYmxlU3VnOiB0cnVlLCAvLyDmmK/lkKbnpoHmraLnmb7luqbmkJzntKLpooTmtYsKICAgICAgICAgICAgaXNSaWdodERpc3BsYXlFbmFibGU6IGZhbHNlLCAvLyDmmK/lkKblvIDlkK/lj7PkvqfovrnmoI8KICAgICAgICAgICAgaXNDb3VudGVyRW5hYmxlOiBmYWxzZSwgLy8g5piv5ZCm5pi+56S66K6h5pWw5ZmoCiAgICAgICAgICAgIGlzQUxpbmVFbmFibGU6IGZhbHNlLCAvLyDmmK/lkKbnpoHmraLkuIvliJLnur8KICAgICAgICAgICAgaXNVc2VyU3R5bGVFbmFibGU6IGZhbHNlLCAvLyDmmK/lkKblvIDlkK/oh6rlrprkuYnmoLflvI8KICAgICAgICAgICAgaXNFbkxhbmc6IGZhbHNlLAogICAgICAgICAgICBpc0dvb2xlSW5CYWlkdU1vZGVFbmFibGU6IGZhbHNlLCAvLyDmmK/lkKblvIDlkK/osLfmrYzmkJzntKLnu5PmnpzpobXnmoTnmb7luqblm77moIfmmL7npLoKICAgICAgICAgICAgVXNlckJsb2NrTGlzdDogWyJiYWlqaWFoYW8uYmFpZHUuY29tIl0sCiAgICAgICAgICAgIFVzZXJTdHlsZVRleHQ6CiAgICAgICAgICAgICAgICBgLyoq6K6h5pWw5Zmo55qE6aKc6Imy5qC35byPKi8KZGl2IC5BQy1Db3VudGVyVHsKICAgIGJhY2tncm91bmQ6ICNGRDk5OTk7Cn0KLyoq5Y+z5L6n5qCP55qE5qC35byPLeWFtuWunuS4jeW8gOWQr+abtOWlveeci+S4gOS6myovCiNjb250ZW50X3JpZ2h0ewogICAgcGFkZGluZzogMjBweCAxNXB4IDE1cHg7CiAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIGJveC1zaGFkb3c6IDAgMCAyMHB4IDJweCByZ2JhKDAsIDAsIDAsIC4xKTsKICAgIC13ZWJraXQtYm94LXNoYWRvdzogMCAwIDIwcHggMnB4IHJnYmEoMCwgMCwgMCwgLjEpOwogICAgLW1vei1ib3gtc2hhZG93OiAwIDAgMjBweCAycHggcmdiYSgwLCAwLCAwLCAuMSk7Cn0KLyoqKirlj6/ku6XliqDkuIDkupvoh6rlt7HnmoTog4zmma/lm77niYcs5pu/5o2i5byV5Y+35YaF55qE5YaF5a655Li65Y+v5aSW6ZO+55qE5Zu+54mH5Y2z5Y+vKioqKi8KYm9keXsKICAgIGJhY2tncm91bmQtcmVwZWF0OiByZXBlYXQteTsKICAgIGJhY2tncm91bmQtc2l6ZTogMTAwJTsKICAgIGJhY2tncm91bmQtYXR0YWNobWVudDpmaXhlZDsKICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnaHR0cHM6Ly90aW1nc2EuYmFpZHUuY29tL3RpbWc/aW1hZ2UmcXVhbGl0eT04MCZzaXplPWI5OTk5XzEwMDAwJnNlYz0xNTY0NzU2Mjc3MjUwJmRpPTg2OGI5ZWFjOWJlMTRkZjFkZWRkOGM3ZDZhNzEwODQ0JmltZ3R5cGU9MCZzcmM9aHR0cCUzQSUyRiUyRnBob3RvY2RuLnNvaHUuY29tJTJGMjAxMzA1MzAlMkZJbWczNzc1MDIzMzMuanBnJyk7Cn0KLyoqKioq56qX5Y+j6IOM5pmv55qE6YCP5piO6Jma5YyW5pWI5p6cKioqKiovCmJvZHk+I3dyYXBwZXIsYm9keT4ud3JhcCxib2R5PiNtYWluLGJvZHkgI2FwcGJhcixib2R5ICNoZHRiU3VtewogICAgYmFja2dyb3VuZDogcmdiYSgyMjUsMjI1LDIyNSwwLjgpOwp9Ci8qKumakOiXj+mmlumhteeahOWkp+Wbvuaghy3kv67lpI3lj6/og73lr7zoh7TlpJbmj7TmoLflvI/lvILluLgqKi8KYm9keVtiYWlkdV0gI3NfbGdfaW1nX25ld3sKICAgIGRpc3BsYXk6bm9uZSAhaW1wb3J0YW50Owp9CiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCwgI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXJ7CiAgICBib3JkZXItcmFkaXVzOiA1cHg7Cn1gLAogICAgICAgICAgICBvbGRWZXJzaW9uOiAiIiwKICAgICAgICAgICAgbGFzdFNhdmVUaW1lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSwKICAgICAgICB9OwogICAgICAgIGxldCBDT05TVCA9IHsKICAgICAgICAgICAgaGFzTmV3RnVuY05lZWREaXNwbGF5OiB0cnVlLAogICAgICAgICAgICBzb3J0SW5kZXg6IDEsCiAgICAgICAgICAgIGlzR29vZ2xlSW1hZ2VVcmw6IGZhbHNlLAogICAgICAgICAgICBBZHNTdHlsZU1vZGU6IEFDQ29uZmlnLkFkc1N0eWxlTW9kZV9CYWlkdSwKICAgICAgICAgICAga2V5U2l0ZTogImJhaWR1IiwKICAgICAgICAgICAgU3R5bGVNYW5nZXI6IGZ1bmN0aW9uICgpIHt9LAogICAgICAgICAgICBjdXJIb3N0czogW10sCiAgICAgICAgfTsKICAgICAgICBsZXQgY3VyU2l0ZSA9IHsKICAgICAgICAgICAgU2l0ZVR5cGVJRDogMSwgICAgLy8g5b2T5YmN56uZ54K555qESUQKICAgICAgICAgICAgTWFpblR5cGU6IiIsICAgICAgLy8g5Li75L2T6IqC54K577yM5b6I5aSa5Liq55qE54i26IqC54K5CiAgICAgICAgICAgIFN0eXBlX05vcm1hbDogIiIsIC8vIOmHjeWumuWQkemAieaLqeWZqO+8jOWPquacieeZvuW6pi3mkJzni5ct5aW95pCcCiAgICAgICAgICAgIEZhdmljb25UeXBlOiAiIiwgIC8vIGZhdmljb27nmoTln5/lkI3mo4Dmn6XlmahjaXRl77yM55So5LqO6I635Y+WaG9zdOeUqAogICAgICAgICAgICBGYXZpY29uQWRkVG86ICIiLCAvLyBmYXZpY29u6YCJ5oup5Zmo77yM55So5LqO5o+S5YWl5YiwdGl0bGXkuYvliY3nmoQKICAgICAgICAgICAgQ291bnRlclR5cGU6ICIiLCAgLy8g6K6h5pWw5Zmo5re75Yqg55qE5L2N572u77yM5LiA6Iis5ZKMZmF2aWNvbuS9jee9ruS4gOiHtAogICAgICAgICAgICBCbG9ja1R5cGU6ICIiLCAgICAvLyDlsY/olL3mjInpkq7nmoTkvY3nva7vvIzkuIDoiKzlnKh0aXRsZeS5i+WQjgogICAgICAgIH07CiAgICAgICAgbGV0IERCU2l0ZSA9IHsKICAgICAgICAgICAgYmFpZHU6IHsKICAgICAgICAgICAgICAgIFNpdGVUeXBlSUQ6IDEsCiAgICAgICAgICAgICAgICBNYWluVHlwZTogIiNjb250ZW50X2xlZnQgLmMtY29udGFpbmVyIiwKICAgICAgICAgICAgICAgIFN0eXBlX05vcm1hbDogImgzLnQ+YSwgI3Jlc3VsdHMgLmMtY29udGFpbmVyPi5jLWJsb2NrYSIsCiAgICAgICAgICAgICAgICBGYXZpY29uVHlwZTogIi5yZXN1bHQtb3AsIC5jLXNob3d1cmwiLCAvLyBiYWlkdSDkvLzkuY7opoHmlLnniYjkuobvvJ8KICAgICAgICAgICAgICAgIEZhdmljb25BZGRUbzogImgzIiwKICAgICAgICAgICAgICAgIENvdW50ZXJUeXBlOiAiI2NvbnRlbnRfbGVmdD4jZG91YmxlPmRpdltzcmNpZF0gKltjbGFzc349dF0sW2NsYXNzfj1vcF9iZXN0X2Fuc3dlcl9xdWVzdGlvbl0sI2NvbnRlbnRfbGVmdD5kaXZbc3JjaWRdICpbY2xhc3N+PXRdLFtjbGFzc349b3BfYmVzdF9hbnN3ZXJfcXVlc3Rpb25dIiwKICAgICAgICAgICAgICAgIEJsb2NrVHlwZTogImgzIGEiLAogICAgICAgICAgICAgICAgcGFnZXI6ewogICAgICAgICAgICAgICAgICAgIG5leHRMaW5rOiAnLy9kaXZbQGlkPSJwYWdlIl0vYVtjb250YWlucyh0ZXh0KCksIuS4i+S4gOmhtSIpXVtAaHJlZl0nLAogICAgICAgICAgICAgICAgICAgIHBhZ2VFbGVtZW50OiAiY3NzO2RpdiNjb250ZW50X2xlZnQgPiAqIiwKICAgICAgICAgICAgICAgICAgICBIVF9pbnNlcnQ6IFsgImNzcztkaXYjY29udGVudF9sZWZ0IiwgMiBdLAogICAgICAgICAgICAgICAgICAgIHJlcGxhY2VFOiAiY3NzOyNwYWdlIiwKICAgICAgICAgICAgICAgICAgICBzdHlsaXNoOiAiLmF1dG9wYWdlcml6ZV9wYWdlX2luZm8sIGRpdi5zcC1zZXBhcmF0b3Ige21hcmdpbi1ib3R0b206IDEwcHggIWltcG9ydGFudDt9IiwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgc29nb3U6IHsKICAgICAgICAgICAgICAgIFNpdGVUeXBlSUQ6IDIsCiAgICAgICAgICAgICAgICBNYWluVHlwZTogIiNtYWluIC5yZXN1bHRzPmRpdiIsCiAgICAgICAgICAgICAgICBTdHlwZV9Ob3JtYWw6ICJoMy5wdD5hLCBoMy52clRpdGxlPmEiLAogICAgICAgICAgICAgICAgRmF2aWNvblR5cGU6ICJjaXRlW2lkKj0nY2FjaGVyZXN1bHRfaW5mb18nXSIsCiAgICAgICAgICAgICAgICBGYXZpY29uQWRkVG86ICJoMyIsCiAgICAgICAgICAgICAgICBDb3VudGVyVHlwZTogIi5yZXN1bHRzPmRpdiIsCiAgICAgICAgICAgICAgICBCbG9ja1R5cGU6ICJoMyBhIiwKICAgICAgICAgICAgICAgIHBhZ2VyOnsKICAgICAgICAgICAgICAgICAgICBuZXh0TGluazogIi8vZGl2W0BpZD1cInBhZ2ViYXJfY29udGFpbmVyXCJdL2FbQGlkPVwic29nb3VfbmV4dFwiXSIsCiAgICAgICAgICAgICAgICAgICAgcGFnZUVsZW1lbnQ6ICIvL2RpdltAY2xhc3M9XCJyZXN1bHRzXCJdIiwKICAgICAgICAgICAgICAgICAgICBIVF9pbnNlcnQ6IFsiLy9kaXZbQGNsYXNzPVwicmVzdWx0c1wiXSIsIDFdLAogICAgICAgICAgICAgICAgICAgIHJlcGxhY2VFOiAiaWQoXCJwYWdlYmFyX2NvbnRhaW5lclwiKSIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgaGFvc291OiB7CiAgICAgICAgICAgICAgICBTaXRlVHlwZUlEOiAzLAogICAgICAgICAgICAgICAgTWFpblR5cGU6ICIucmVzLWxpc3QiLAogICAgICAgICAgICAgICAgU3R5cGVfTm9ybWFsOiAiLnJlcy1saXN0IGgzPmEiLAogICAgICAgICAgICAgICAgRmF2aWNvblR5cGU6ICIucmVzLWxpbmtpbmZvIGNpdGUiLAogICAgICAgICAgICAgICAgRmF2aWNvbkFkZFRvOiAiaDMiLAogICAgICAgICAgICAgICAgQ291bnRlclR5cGU6ICIucmVzdWx0cz5kaXYiLAogICAgICAgICAgICAgICAgQmxvY2tUeXBlOiAiaDMgYSIsCiAgICAgICAgICAgICAgICBwYWdlcjp7CiAgICAgICAgICAgICAgICAgICAgbmV4dExpbms6ICIvL2RpdltAaWQ9XCJwYWdlXCJdL2FbdGV4dCgpPVwi5LiL5LiA6aG1PlwiXSB8IGlkKFwic25leHRcIikiLAogICAgICAgICAgICAgICAgICAgIHBhZ2VFbGVtZW50OiAiLy9kaXZbQGlkPVwiY29udGFpbmVyXCJdL2RpdiIsCiAgICAgICAgICAgICAgICAgICAgSFRfaW5zZXJ0OiBbIi8vZGl2W0BpZD1cImNvbnRhaW5lclwiXSIsIDFdLAogICAgICAgICAgICAgICAgICAgIHJlcGxhY2VFOiAiaWQoXCJwYWdlXCIpIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBnb29nbGU6IHsKICAgICAgICAgICAgICAgIFNpdGVUeXBlSUQ6IDQsCiAgICAgICAgICAgICAgICBNYWluVHlwZTogIiNyc28gLmcgKltjbGFzc349cmNdIiwKICAgICAgICAgICAgICAgIEZhdmljb25UeXBlOiAiLmlVaDMwIiwKICAgICAgICAgICAgICAgIEZhdmljb25BZGRUbzogImgzIiwKICAgICAgICAgICAgICAgIENvdW50ZXJUeXBlOiAiI3JzbyAuZyAqW2NsYXNzfj1yXSBoMywuX3lFPmRpdltjbGFzc349X2trXSBoMyIsCiAgICAgICAgICAgICAgICBCbG9ja1R5cGU6ICIucmM+LnI+YSIsCiAgICAgICAgICAgICAgICBwYWdlcjp7CiAgICAgICAgICAgICAgICAgICAgbmV4dExpbms6ICdpZCgicG5uZXh0IikgfCBpZCgibmF2YmFyIG5hdmNudCBuYXYiKS8vdGRbc3Bhbl0vZm9sbG93aW5nLXNpYmxpbmc6OnRkWzFdL2EgfCBpZCgibm4iKS9wYXJlbnQ6OmEnLAogICAgICAgICAgICAgICAgICAgIHBhZ2VFbGVtZW50OiAnLy9kaXZbQGlkPSJyZXMiXScsCiAgICAgICAgICAgICAgICAgICAgSFRfaW5zZXJ0OiBbICJjc3M7I3JlcyIsIDIgXSwKICAgICAgICAgICAgICAgICAgICByZXBsYWNlRTogJy8vZGl2W0BpZD0ibmF2Y250Il0gfCAvL2RpdltAaWQ9ImZvb3QiXVtAcm9sZT0ibmF2aWdhdGlvbiJdJwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBiaW5nOiB7CiAgICAgICAgICAgICAgICBTaXRlVHlwZUlEOiA1LAogICAgICAgICAgICAgICAgTWFpblR5cGU6ICIjYl9yZXN1bHRzPmxpIiwKICAgICAgICAgICAgICAgIEZhdmljb25UeXBlOiAiLmJfYXR0cmlidXRpb24+Y2l0ZSIsCiAgICAgICAgICAgICAgICBGYXZpY29uQWRkVG86ICJoMiIsCiAgICAgICAgICAgICAgICBDb3VudGVyVHlwZTogIiNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYW5zXT5oMiwjYl9yZXN1bHRzPmxpW2NsYXNzfj1iX2FsZ29dPmgyLCNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYWxnb10+aDIiLAogICAgICAgICAgICAgICAgQmxvY2tUeXBlOiAiaDIgYSIsCiAgICAgICAgICAgICAgICBwYWdlcjp7CiAgICAgICAgICAgICAgICAgICAgbmV4dExpbms6ICIvL2FbY29udGFpbnMoQGNsYXNzLFwic2JfcGFnTlwiKV0iLAogICAgICAgICAgICAgICAgICAgIHBhZ2VFbGVtZW50OiAiaWQoXCJiX3Jlc3VsdHNcIikvbGlbbm90KGNvbnRhaW5zKEBjbGFzcyxcImJfcGFnXCIpIG9yIGNvbnRhaW5zKEBjbGFzcyxcImJfYW5zIGJfdG9wXCIpKV0iLAogICAgICAgICAgICAgICAgICAgIEhUX2luc2VydDogWyJpZChcImJfcmVzdWx0c1wiKS9saVtAY2xhc3M9XCJiX3BhZ1wiXSIsIDFdLAogICAgICAgICAgICAgICAgICAgIHJlcGxhY2VFOiAiaWQoXCJiX3Jlc3VsdHNcIikvL25hdltAcm9sZT1cIm5hdmlnYXRpb25cIl0iLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBtQmFpZHU6ewogICAgICAgICAgICAgICAgU2l0ZVR5cGVJRDogNiwKICAgICAgICAgICAgICAgIE1haW5UeXBlOiAiI2JfcmVzdWx0cz5saSIsCiAgICAgICAgICAgICAgICBGYXZpY29uVHlwZTogIi5iX2F0dHJpYnV0aW9uPmNpdGUiLAogICAgICAgICAgICAgICAgRmF2aWNvbkFkZFRvOiAiaDIiLAogICAgICAgICAgICAgICAgQ291bnRlclR5cGU6ICIjYl9yZXN1bHRzPmxpW2NsYXNzfj1iX2Fuc10+aDIsI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbGdvXT5oMiwjYl9yZXN1bHRzPmxpW2NsYXNzfj1iX2FsZ29dPmgyIiwKICAgICAgICAgICAgICAgIEJsb2NrVHlwZTogImgyIGEiLAogICAgICAgICAgICB9LAogICAgICAgICAgICB6aGlodTogewogICAgICAgICAgICAgICAgU2l0ZVR5cGVJRDogNywKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYmFpZHVfeHVlc2h1OnsKICAgICAgICAgICAgICAgIFNpdGVUeXBlSUQ6IDgsCiAgICAgICAgICAgICAgICBNYWluVHlwZTogIiNjb250ZW50X2xlZnQgLnJlc3VsdCIsCiAgICAgICAgICAgICAgICBTdHlwZV9Ob3JtYWw6ICJoMy50PmEsICNyZXN1bHRzIC5jLWNvbnRhaW5lcj4uYy1ibG9ja2EiLAogICAgICAgICAgICAgICAgRmF2aWNvblR5cGU6ICIucmVzdWx0LW9wLCAuYy1zaG93dXJsIiwgLy8gYmFpZHUg5Ly85LmO6KaB5pS554mI5LqG77yfCiAgICAgICAgICAgICAgICBGYXZpY29uQWRkVG86ICJoMyIsCiAgICAgICAgICAgICAgICBDb3VudGVyVHlwZTogIiNjb250ZW50X2xlZnQ+I2RvdWJsZT5kaXZbc3JjaWRdICpbY2xhc3N+PXRdLFtjbGFzc349b3BfYmVzdF9hbnN3ZXJfcXVlc3Rpb25dLCNjb250ZW50X2xlZnQ+ZGl2W3NyY2lkXSAqW2NsYXNzfj10XSxbY2xhc3N+PW9wX2Jlc3RfYW5zd2VyX3F1ZXN0aW9uXSIsCiAgICAgICAgICAgICAgICBCbG9ja1R5cGU6ICJoMyBhIiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb3RoZXI6IHsKICAgICAgICAgICAgICAgIFNpdGVUeXBlSUQ6IDksCiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGxldCBTaXRlVHlwZSA9IHsKICAgICAgICAgICAgQkFJRFU6IERCU2l0ZS5iYWlkdS5TaXRlVHlwZUlELAogICAgICAgICAgICBNQkFJRFU6IERCU2l0ZS5tQmFpZHUuU2l0ZVR5cGVJRCwKICAgICAgICAgICAgU09HT1U6IERCU2l0ZS5zb2dvdS5TaXRlVHlwZUlELAogICAgICAgICAgICBTTzogREJTaXRlLmhhb3NvdS5TaXRlVHlwZUlELAogICAgICAgICAgICBHT09HTEU6IERCU2l0ZS5nb29nbGUuU2l0ZVR5cGVJRCwKICAgICAgICAgICAgQklORzogREJTaXRlLmJpbmcuU2l0ZVR5cGVJRCwKICAgICAgICAgICAgWkhJSFU6IERCU2l0ZS56aGlodS5TaXRlVHlwZUlELAogICAgICAgICAgICBCQUlEVV9YVUVTSFU6IERCU2l0ZS5iYWlkdV94dWVzaHUuU2l0ZVR5cGVJRCwKICAgICAgICAgICAgT1RIRVJTOiA4CiAgICAgICAgfTsKICAgICAgICAvKirliJ3lp4vljJbmiYDmnInnmoTorr7nva4qKi8KICAgICAgICBQcm9taXNlLmFsbChbR00uZ2V0VmFsdWUoIkNvbmZpZyIpXSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICBpZiAoZGF0YVswXSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICAgICAgQUNDb25maWcgPSBKU09OLnBhcnNlKGRhdGFbMF0pOwogICAgICAgICAgICAgICAgfWNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgQUNDb25maWcgPSBkYXRhWzBdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgQUNDb25maWcgPSBEZWZhdWx0Q29uZmlnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvcih2YXIga2V5IGluIERlZmF1bHRDb25maWcpewogICAgICAgICAgICAgICAgaWYodHlwZW9mKEFDQ29uZmlnW2tleV0pID09ICJ1bmRlZmluZWQiKXsKICAgICAgICAgICAgICAgICAgICBBQ0NvbmZpZ1trZXldID0gRGVmYXVsdENvbmZpZ1trZXldOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKEFDQ29uZmlnLmlzVXNlclN0eWxlRW5hYmxlID09IGZhbHNlICYmIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIEFDQ29uZmlnLmxhc3RTYXZlVGltZSA+IDI1OTIwMDAwMDApKXsgLy8g5aSn57qmMzDlpKnml7bpl7QKICAgICAgICAgICAgICAgIC8vIOWmguaenOeUqOaIt+WPlua2iOS6huiuvue9ru+8jOW5tuS4lOmVv+aXtumXtCgz5aSpKeayoeaciei/m+ihjOi/h+WkhOeQhu+8jOmCo+S5iOebtOaOpeWwhuaVsOaNrue9ruepuiAtPiDnlKjkuo7liLfmlrDmlbDmja4KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJhYy1iYWlkdSBjc3MgcmVzZXQgZm9yIHRpbWUiKTsKICAgICAgICAgICAgICAgIEFDQ29uZmlnLmxhc3RTYXZlVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgICAgICAgICAgQUNDb25maWcuVXNlclN0eWxlVGV4dCA9IERlZmF1bHRDb25maWcuVXNlclN0eWxlVGV4dDsKICAgICAgICAgICAgfQogICAgICAgICAgICB1c2VDTkxhbiA9ICFBQ0NvbmZpZy5pc0VuTGFuZzsKICAgICAgICAgICAgLy8g5Yid5aeL5YyW5a6M5oiQ5LmL5ZCO5omN6IO96LCD55So5q2j5bi45Ye95pWwCiAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGV4Y2VwdCkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhleGNlcHQpOwogICAgICAgIH0pOwogICAgICAgIGZ1bmN0aW9uIFJlZ19HZXQoSFRNTCwgcmVnKSB7CiAgICAgICAgICAgIGxldCBSZWdFID0gbmV3IFJlZ0V4cChyZWcpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIFJlZ0UuZXhlYyhIVE1MKVsxXTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGdldEVsZW1lbnRCeVhwYXRoKGUsIHQsIHIpIHsKICAgICAgICAgICAgciA9IHIgfHwgZG9jdW1lbnQsIHQgPSB0IHx8IHI7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXR1cm4gci5ldmFsdWF0ZShlLCB0LCBudWxsLCBYUGF0aFJlc3VsdC5GSVJTVF9PUkRFUkVEX05PREVfVFlQRSwgbnVsbCkuc2luZ2xlTm9kZVZhbHVlOwogICAgICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKCLml6DmlYjnmoR4cGF0aCIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGdldEFsbEVsZW1lbnRzQnlYcGF0aChlLCB0LCByKSB7CiAgICAgICAgICAgIHJldHVybiByID0gciB8fCBkb2N1bWVudCwgdCA9IHQgfHwgciwgci5ldmFsdWF0ZShlLCB0LCBudWxsLCBYUGF0aFJlc3VsdC5PUkRFUkVEX05PREVfU05BUFNIT1RfVFlQRSwgbnVsbCk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGdldEFsbEVsZW1lbnRzKGUsIHQsIHIsIG4sIG8pIHsKICAgICAgICAgICAgdmFyIGksIHMgPSBbXTsKICAgICAgICAgICAgaWYgKCFlKSByZXR1cm4gczsKICAgICAgICAgICAgaWYgKHIgPSByIHx8IGRvY3VtZW50LCBuID0gbiB8fCB3aW5kb3csIG8gPSBvIHx8IHZvaWQgMCwgdCA9IHQgfHwgciwgInN0cmluZyIgPT0gdHlwZW9mIGUpIGkgPSAwID09PSBlLnNlYXJjaCgvXmNzczsvaSkgPyBmdW5jdGlvbiBnZXRBbGxFbGVtZW50c0J5Q1NTKGUsIHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiAodCB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChlKTsKICAgICAgICAgICAgfShlLnNsaWNlKDQpLCB0KSA6IGdldEFsbEVsZW1lbnRzQnlYcGF0aChlLCB0LCByKTsgZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAoIShpID0gZShyLCBuLCBvKSkpIHJldHVybiBzOwogICAgICAgICAgICAgICAgaWYgKGkubm9kZVR5cGUpIHJldHVybiBzWzBdID0gaSwgczsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gbWFrZUFycmF5KGUpIHsKICAgICAgICAgICAgICAgIHZhciB0LCByLCBuLCBvID0gW107CiAgICAgICAgICAgICAgICBpZiAoZS5wb3ApIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHQgPSAwLCByID0gZS5sZW5ndGg7IHQgPCByOyB0KyspIChuID0gZVt0XSkgJiYgKG4ubm9kZVR5cGUgPyBvLnB1c2gobikgOiBvID0gby5jb25jYXQobWFrZUFycmF5KG4pKSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEoKShvKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChlLml0ZW0pIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHQgPSBlLmxlbmd0aDsgdDsgKSBvWy0tdF0gPSBlW3RdOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBvOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGUuaXRlcmF0ZU5leHQpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHQgPSBlLnNuYXBzaG90TGVuZ3RoOyB0OyApIG9bLS10XSA9IGUuc25hcHNob3RJdGVtKHQpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBvOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KGkpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBjYWxsYmFjaygpIHsKICAgICAgICAgICAgaWYgKEFDQ29uZmlnLm9sZFZlcnNpb24gPT0gR01faW5mby5zY3JpcHQudmVyc2lvbikgewogICAgICAgICAgICAgICAgQ09OU1QuaGFzTmV3RnVuY05lZWREaXNwbGF5ID0gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBDT05TVC5oYXNOZXdGdW5jTmVlZERpc3BsYXkgPSBuZWVkRGlzcGxheU5ld0Z1bjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgIWZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGxldCBCYWlkdVZlcnNpb24gPSAiIFYiICsgR01faW5mby5zY3JpcHQudmVyc2lvbjsKICAgICAgICAgICAgICAgIGxldCBpbnNlcnRMb2NrZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmKEdNX2dldFJlc291cmNlVGV4dCl7CiAgICAgICAgICAgICAgICAgICAgLy8g5LuF5Zyo5pSv5oyBR01fZ2V0UmVzb3VyY2VUZXh055qE5a655Zmo5LiK6L+b6KGM5Yqo5oCB5pWw5o2u5pu05pawCiAgICAgICAgICAgICAgICAgICAgLy8g5LiU6IO96Ziy5q2i6LC35q2M55m+5bqm6aG16Z2i6KeE5YiZ5aSn5Y+Y5Yqo5Y+I6ZyA6KaB5pu05paw6ISa5pysIC0g54m55Yir5piv5raJ5Y+K57+76aG15Y+C5pWwCiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbmZpZyA9IEdNX2dldFJlc291cmNlVGV4dCgiU2l0ZUNvbmZpZ1J1bGVzIik7CiAgICAgICAgICAgICAgICAgICAgZXZhbChjb25maWcpOwogICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZihvbmxpbmVEQikgIT0gInVuZGVmaW5lZCIpIERCU2l0ZSA9IG9ubGluZURCOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uLmhvc3QuaW5kZXhPZigieHVlc2h1LmJhaWR1LmNvbSIpID4gLTEpIHsKICAgICAgICAgICAgICAgICAgICBjdXJTaXRlID0gREJTaXRlLmJhaWR1X3h1ZXNodTsKICAgICAgICAgICAgICAgIH1lbHNlIGlmIChsb2NhdGlvbi5ob3N0LmluZGV4T2YoIi5iYWlkdS5jb20iKSA+IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgaWYobmF2aWdhdG9yLnVzZXJBZ2VudC5yZXBsYWNlKC8oYW5kcm9pZHxtb2JpbGV8aXBob25lKS9pZ20sICIiKSAhPSBuYXZpZ2F0b3IudXNlckFnZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgY3VyU2l0ZSA9IERCU2l0ZS5tQmFpZHU7CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1clNpdGUgPSBEQlNpdGUuYmFpZHU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsb2NhdGlvbi5ob3N0LmluZGV4T2YoInpoaWh1LmNvbSIpID4gLTEpIHsKICAgICAgICAgICAgICAgICAgICBjdXJTaXRlID0gREJTaXRlLnpoaWh1OwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsb2NhdGlvbi5ob3N0LmluZGV4T2YoInNvZ291IikgPiAtMSkgewogICAgICAgICAgICAgICAgICAgIGN1clNpdGUgPSBEQlNpdGUuc29nb3U7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLmhvc3QuaW5kZXhPZigic28uY29tIikgPiAtMSkgewogICAgICAgICAgICAgICAgICAgIGN1clNpdGUgPSBEQlNpdGUuaGFvc291OwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsb2NhdGlvbi5ob3N0LmluZGV4T2YoImdvb2dsZSIpID4gLTEpIHsKICAgICAgICAgICAgICAgICAgICBjdXJTaXRlID0gREJTaXRlLmdvb2dsZTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobG9jYXRpb24uaG9zdC5pbmRleE9mKCJiaW5nIikgPiAtMSkgewogICAgICAgICAgICAgICAgICAgIGN1clNpdGUgPSBEQlNpdGUuYmluZzsKICAgICAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICAgICAgICBjdXJTaXRlID0gREJTaXRlLm90aGVyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY3VyU2l0ZS5wYWdlTnVtID0gMTsgLy8g5b2T5YmN6aG15pWwCiAgICAgICAgICAgICAgICBjdXJTaXRlLnBhZ2VMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBjdXJTaXRlLnBhZ2VVcmwgPSAiIjsKICAgICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuR09PR0xFICYmIGxvY2F0aW9uLmhyZWYucmVwbGFjZSgvdGJtPShpc2NofGxjbHxzaG9wfGZsbSkvLCAiIikgIT0gbG9jYXRpb24uaHJlZikgewogICAgICAgICAgICAgICAgICAgIC8vIOWbvueJh+ermSDjgIHlnLDlm77nq5njgIHotK3niannq5kKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi54m55q6K56uZLOS4jeWKoOi9veagt+W8j++8jOS4jea3u+WKoG1lbnUiKTsKICAgICAgICAgICAgICAgICAgICBDT05TVC5pc0dvb2dsZUltYWdlVXJsID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChBQ0NvbmZpZy5BZHNTdHlsZUVuYWJsZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuQkFJRFUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgQ09OU1QuQWRzU3R5bGVNb2RlID0gQUNDb25maWcuQWRzU3R5bGVNb2RlX0JhaWR1OwogICAgICAgICAgICAgICAgICAgICAgICBDT05TVC5IdVlhbk1vZGUgPSBBQ0NvbmZpZy5IdVlhbl9CYWlkdTsKICAgICAgICAgICAgICAgICAgICAgICAgQ09OU1Qua2V5U2l0ZSA9ICJiYWlkdSI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuR09PR0xFKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIENPTlNULkFkc1N0eWxlTW9kZSA9IEFDQ29uZmlnLkFkc1N0eWxlTW9kZV9Hb29nbGU7CiAgICAgICAgICAgICAgICAgICAgICAgIENPTlNULkh1WWFuTW9kZSA9IEFDQ29uZmlnLkh1WWFuX0dvb2dsZTsKICAgICAgICAgICAgICAgICAgICAgICAgQ09OU1Qua2V5U2l0ZSA9ICJnb29nbGUiOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09IFNpdGVUeXBlLkJJTkcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgQ09OU1QuQWRzU3R5bGVNb2RlID0gQUNDb25maWcuQWRzU3R5bGVNb2RlX0Jpbmc7CiAgICAgICAgICAgICAgICAgICAgICAgIENPTlNULkh1WWFuTW9kZSA9IEFDQ29uZmlnLkh1WWFuX0Jpbmc7CiAgICAgICAgICAgICAgICAgICAgICAgIENPTlNULmtleVNpdGUgPSAiYmluZyI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuU09HT1UpewogICAgICAgICAgICAgICAgICAgICAgICBDT05TVC5BZHNTdHlsZU1vZGUgPSBBQ0NvbmZpZy5BZHNTdHlsZU1vZGVfU29Hb3U7CiAgICAgICAgICAgICAgICAgICAgICAgIENPTlNULkh1WWFuTW9kZSA9IEFDQ29uZmlnLkh1WWFuX1NvR291OwogICAgICAgICAgICAgICAgICAgICAgICBDT05TVC5rZXlTaXRlID0gInNvZ291IjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoY3VyU2l0ZS5TaXRlVHlwZUlEID09IFNpdGVUeXBlLkJBSURVX1hVRVNIVSl7CiAgICAgICAgICAgICAgICAgICAgICAgIENPTlNULkFkc1N0eWxlTW9kZSA9IDI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyID0gRlNCYWlkdSgpOyAvLyDmt7vliqDorr7nva7pobkt5Y2V5Y+M5YiX5pi+56S6CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiJWNbQUMtUmVkaXJlY3RdICVjTGV0IE1lIEludHJvZHVjZSB5b3UgYSBWZXJ5IEdvb2QgU2VhcmNoIEVuZ2luZe+8miVjICVzICVjU2VhcmNoIEVuZ2luZS4iLCAiZm9udC13ZWlnaHQ6Ym9sZDtjb2xvcjpjb3JuZmxvd2VyYmx1ZSIsICJjb2xvcjowIiwgImZvbnQtd2VpZ2h0OmJvbGQ7Y29sb3I6ZGFya29yYW5nZSIsIENPTlNULmtleVNpdGUucmVwbGFjZShDT05TVC5rZXlTaXRlWzBdLENPTlNULmtleVNpdGVbMF0udG9VcHBlckNhc2UoKSksICJmb250LXdlaWdodDpub3JtYWw7Y29sb3I6MCIpOwogICAgICAgICAgICAgICAgbGV0IGJvZHlOYW1lcmVzZXRUaW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuYm9keSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc2V0QXR0cmlidXRlKENPTlNULmtleVNpdGUsICIxIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuQkFJRFUgJiYgbG9jYXRpb24uaHJlZi5pbmRleE9mKCJ0bj1uZXdzIikgPj0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zZXRBdHRyaWJ1dGUoIm5ld3MiLCAiMSIpOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQXR0cmlidXRlKCJuZXdzIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xlYXJJbnRlcnZhbChib2R5TmFtZXJlc2V0VGltZXIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgICAgICBsZXQgQmxvY2tCYWlkdSA9IHsKICAgICAgICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgICAgICAgKiDliJ3lp4vljJZCbG9ja+agt+W8jwogICAgICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgICAgIGluaXRTdHlsZTogZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgQUNfYWRkU3R5bGUoImJ1dHRvbi5naGhpZGVyLmdoaGJbYWMtdXNlci1hbHRlcj0nMSddOjpiZWZvcmV7Y29udGVudDon5Y+W5raIIC0gJzt9I3NwLWFjLWNvbnRhaW5lciAuYWMtYmxvY2staXRlbXtjb2xvcjojQUFBO21hcmdpbi1sZWZ0OjQ4cHg7fSNzcC1hYy1jb250YWluZXIgLmFjLWJsb2NrLWl0ZW1kZWx7ZmxvYXQ6cmlnaHQ7bWFyZ2luLWxlZnQ6MDtwYWRkaW5nOjAgMjBweDtjdXJzb3I6cG9pbnRlcjt9I3NwLWFjLWNvbnRhaW5lciAuYWMtYmxvY2staXRlbWRlbDpob3Zlcntjb2xvcjpyZWQ7fSNzcC1hYy1jb250YWluZXIgLmFjLWJsb2NrLWhpZ2h7Y29sb3I6IzAwMDt9LmFjLWJsb2NrTGlzdCBsaTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNhM2NhZmY7Y29sb3I6d2hpdGUgIWltcG9ydGFudDtjdXJzb3I6cG9pbnRlcjt9ICpbYWMtbmVlZGhpZGVdICp7ZGlzcGxheTpub25lfSAqW2FjLW5lZWRoaWRlXSAuYmxvY2tTaG93e2Rpc3BsYXk6dW5zZXQ7Y3Vyc29yOnBvaW50ZXI7fSAqW2FjLW5lZWRoaWRlXSAuYmxvY2tTaG93OmhvdmVye2JvcmRlcjoxcHggc29saWQgI0RERH1idXR0b24uZ2hoaWRlcntjb2xvcjojNTU1O2JhY2tncm91bmQtY29sb3I6I2ZjZmNmYztmb250LWZhbWlseTpzYW5zLXNlcmlmO2ZvbnQtc2l6ZTouODVlbTttYXJnaW46YXV0byAycHg7Ym9yZGVyOjFweCBzb2xpZCAjY2NjO2JvcmRlci1yYWRpdXM6NHB4O3BhZGRpbmc6MnB4IDNweH1oMz5idXR0b24uZ2hoaWRlcntmb250LXNpemU6Ljc1ZW19YnV0dG9uLmdoaGlkZXI6aG92ZXJ7Y29sb3I6IzAwNmFmZjtiYWNrZ3JvdW5kOiNmZmZ9IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJBQy1CbG9ja1N0eWxlIik7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgICAgICAgKiDliJ3lp4vljJblsY/olL3mjInpkq7liqDovb0KICAgICAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGVja05vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjdXJTaXRlLk1haW5UeXBlKyI6bm90KFthY2Jsb2NrXSkiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGVja05vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1ck5vZGUgPSBjaGVja05vZGVzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmYXZpY29uTm9kZSA9IGN1ck5vZGUucXVlcnlTZWxlY3RvcihjdXJTaXRlLkZhdmljb25UeXBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZihjdXJOb2RlLmhhc0F0dHJpYnV0ZSgiYWNibG9jayIpKSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaG9zdCA9IGdldEJhaWR1SG9zdChmYXZpY29uTm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYoaG9zdCA9PSBudWxsKSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmFOb2RlID0gY3VyTm9kZS5xdWVyeVNlbGVjdG9yKGN1clNpdGUuQmxvY2tUeXBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbm9kZVN0eWxlID0gImRpc3BsYXk6dW5zZXQ7IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighQUNDb25maWcuaXNCbG9ja0J0bkRpc3BsYXkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlU3R5bGUgPSAiZGlzcGxheTpub25lOyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhTm9kZS5pbnNlcnRBZGphY2VudEhUTUwoImFmdGVyZW5kIiwgYDxidXR0b24gc3R5bGU9JyR7bm9kZVN0eWxlfScgY2xhc3M9J2doaGlkZXIgZ2hoYicgaHJlZj0iJHtmYXZpY29uTm9kZS5ocmVmIHx8IGZhdmljb25Ob2RlLmlubmVyVGV4dH0iIG1ldGE9IiR7aG9zdH0iIGRhdGEtaG9zdD0iJHtob3N0fSIgdGl0bGU9J+eCueWHu+WNs+WPr+Wxj+iUvSAke2hvc3R9IOaUvuW8gO+8jOmcgOimgeWcqOiHquWumuS5ieS4reaJi+WKqOmFjee9ruaUvuW8gCc+YmxvY2s8L2J1dHRvbj5gKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyTm9kZS5zZXRBdHRyaWJ1dGUoImFjYmxvY2siLCAiMCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ck5vZGUuc2V0QXR0cmlidXRlKCJhY2Jsb2NrIiwgIjAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1jYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdExpc3RlbmVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRGlzcGxheSgpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgaW5pdExpc3RlbmVyOiBmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hlY2tOb2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImJ1dHRvbi5naGhpZGVyOm5vdChbYWNFbnZdKSIpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgY2hlY2tOb2Rlcy5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja05vZGVzW2ldLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgdGhpcy5kb0hpZGVFbnYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tOb2Rlc1tpXS5zZXRBdHRyaWJ1dGUoImFjRW52IiwgIjAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZG9IaWRlRW52OiBmdW5jdGlvbihlbnYpewogICAgICAgICAgICAgICAgICAgICAgICAvLyDlhYjmj5LlhaXmlbDmja4tLS3orrDlvpfov5jopoHlhpnlhaXlrZjlgqgKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5vZGUgPSBlbnYuc291cmNlVGFyZ2V0IHx8IGVudi50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBob3N0ID0gbm9kZS5kYXRhc2V0Lmhvc3Q7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG5vZGUuZ2V0QXR0cmlidXRlKCJhYy11c2VyLWFsdGVyIikgPT0gMSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlt7Lnu4/lsY/olL3kuYvlkI7vvIzlho3mrKHngrnlh7tibG9ja+W6lOivpeaYr+WPlua2iOeKtuaAgQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoImFjLXVzZXItYWx0ZXIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFDQ29uZmlnLlVzZXJCbG9ja0xpc3QuYWNyZW1vdmUoaG9zdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBHTS5zZXRWYWx1ZSgiQ29uZmlnIiwgSlNPTi5zdHJpbmdpZnkoQUNDb25maWcpKTsgLy8g54K55Ye75LiA5qyh77yM5L+d5a2Y5LiA5qyhCiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5q2j5bi45bGP6JS95pON5L2cCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZSgiYWMtdXNlci1hbHRlciIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgQUNDb25maWcuVXNlckJsb2NrTGlzdC5hY3B1c2goaG9zdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBHTS5zZXRWYWx1ZSgiQ29uZmlnIiwgSlNPTi5zdHJpbmdpZnkoQUNDb25maWcpKTsgLy8g54K55Ye75LiA5qyh77yM5L+d5a2Y5LiA5qyhCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmVsb2FkQmxvY2tMaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIEJsb2NrQmFpZHUucmVuZGVyRGlzcGxheSgpOwogICAgICAgICAgICAgICAgICAgICAgICBlbnYuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAvLyDliLfmlrDmmL7npLrmlYjmnpwtLeiAl+aXtuaTjeS9nAogICAgICAgICAgICAgICAgICAgIHJlbmRlckRpc3BsYXk6IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGVja05vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjdXJTaXRlLk1haW5UeXBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZsYWcgPSAiYWMtbmVlZGhpZGUiOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoZWNrTm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3VyTm9kZSA9IGNoZWNrTm9kZXNbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1ckhvc3QgPSBnZXRCYWlkdUhvc3QoY3VyTm9kZS5xdWVyeVNlbGVjdG9yKGN1clNpdGUuRmF2aWNvblR5cGUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjdXJIb3N0ID09IG51bGwpIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IEJsb2NrQnRuID0gY3VyTm9kZS5xdWVyeVNlbGVjdG9yKCIuZ2hoaWRlci5naGhiIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJsb2NrQnRuLmRhdGFzZXQuaG9zdCA9IEJsb2NrQnRuLmRhdGFzZXQubWV0YSA9IGN1ckhvc3Q7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGN1ck5vZGUucXVlcnlTZWxlY3RvcigiYnV0dG9uW2FjLXVzZXItYWx0ZXJdIikgIT0gbnVsbCkgY29udGludWU7IC8vIOeUqOaIt+aJi+WKqOeCuei/h+aYvuekuueahO+8jOmCo+S5iOi3s+i/h2NoZWNrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoQUNDb25maWcuVXNlckJsb2NrTGlzdC5maW5kSW5kZXgoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChtLnJlcGxhY2UoIioiLCAiLioiKSkudGVzdChjdXJIb3N0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1jYXRjaChlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbSA9PSBjdXJIb3N0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA+PSAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Y+q5qOA5p+l5Zyo5bGP6JS96KGo5Lit55qE5pWw5o2uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEgY3VyTm9kZS5oYXNBdHRyaWJ1dGUoZmxhZykpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoQUNDb25maWcuaXNCbG9ja0Rpc3BsYXkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ck5vZGUucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3VyVGl0bGUgPSBjdXJOb2RlLnF1ZXJ5U2VsZWN0b3IoY3VyU2l0ZS5CbG9ja1R5cGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyVGl0bGUgPSBjdXJUaXRsZS5pbm5lclRleHQgfHwgY3VyVGl0bGUudGV4dENvbnRlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLmluc2VydEFkamFjZW50SFRNTCgiYWZ0ZXJCZWdpbiIsIGA8c3BhbiBjbGFzcz0iYmxvY2tTaG93IiB0aXRsZT0i5aaC5p6c6ZyA6KaB5LiA55u05pi+56S677yM6K+35Zyo6Ieq5a6a5LmJ5LitRElZ55uu5b2V56e76Zmk5pys5Zyw5Z2AIj4ke2N1clRpdGxlfSZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyAtYmxvY2sgYnkgJHtjdXJIb3N0fTwvc3Bhbj5gKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ck5vZGUuc2V0QXR0cmlidXRlKGZsYWcsICIxIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24oeGN1cil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5bey57uP5bGP6JS95LmL5ZCO55qE5YaF5a6577yM54K55Ye75LiA5LiL5pi+56S65Y6f5aeL5YaF5a65CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGN1ci5xdWVyeVNlbGVjdG9yKCIuYmxvY2tTaG93IikuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbiAoZW52KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCJidXR0b24uZ2hoaWRlciIpLnNldEF0dHJpYnV0ZSgiYWMtdXNlci1hbHRlciIsICIxIik7IC8vIOi/meS4quWxnuaAp+eUqOS6juS/neaMgeWcqERPTeabtOaWsOaXtu+8jOaMiemSruS4jeWPmAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4Y3VyLnJlbW92ZUF0dHJpYnV0ZShmbGFnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZUZ1bmN0aW9uKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4Y3VyLnF1ZXJ5U2VsZWN0b3IoIi5ibG9ja1Nob3ciKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudi5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKGN1ck5vZGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ck5vZGUucmVtb3ZlQXR0cmlidXRlKGZsYWcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYWZlRnVuY3Rpb24oZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ck5vZGUucXVlcnlTZWxlY3RvcigiLmJsb2NrU2hvdyIpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Y2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBhZGRTdHlsZShjc3MpIHsgLy/mt7vliqBDU1PnmoTku6PnoIEtLWNvcHnnmoQKICAgICAgICAgICAgICAgICAgICBsZXQgcGkgPSBkb2N1bWVudC5jcmVhdGVQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24oCiAgICAgICAgICAgICAgICAgICAgICAgICd4bWwtc3R5bGVzaGVldCcsCiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlPSJ0ZXh0L2NzcyIgbXVzdD0iZmFsc2UiIGhyZWY9ImRhdGE6dGV4dC9jc3M7dXRmLTgsJyArIGVuY29kZVVSSUNvbXBvbmVudChjc3MpICsgJyInCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuaW5zZXJ0QmVmb3JlKHBpLCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChBQ0NvbmZpZy5pc0Fkc0VuYWJsZSkgewogICAgICAgICAgICAgICAgICAgIC8vIGRpc3BsYXnlt7Lnu4/ml6Dms5XpmpDol4/ku5bku6zkuobvvIzpnIDopoHnlKjnu53lr7nnmoTpmpDol48KICAgICAgICAgICAgICAgICAgICBhZGRTdHlsZSgiI2JvdHRvbWFkc3tkaXNwbGF5Om5vbmU7fSAjY29udGVudF9sZWZ0PmRpdjpub3QoW2lkXSk+ZGl2W2NtYXRjaGlkXSwgI2NvbnRlbnRfbGVmdD5kaXZbaWQqPSczMDAnXTpub3QoW2NsYXNzKj0ncmVzdWx0J10pLCNjb250ZW50X3JpZ2h0IHRkPmRpdjpub3QoW2lkXSksI2NvbnRlbnRfcmlnaHQ+YnJ7cG9zaXRpb246YWJzb2x1dGU7dG9wOi02NjY2cHg7fSIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PSBTaXRlVHlwZS5HT09HTEUgJiYgQUNDb25maWcuaXNHb29sZUluQmFpZHVNb2RlRW5hYmxlKXsKICAgICAgICAgICAgICAgICAgICBzYWZlV2FpdEZ1bmMoIiNsb2dvIGltZywgI2xvZ29jb250IGltZyIsIGZ1bmN0aW9uKG5vZGUpewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmFOb2RlID0gbm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGZhTm9kZS5jbGFzc0xpc3QuYWRkKCJiYWlkdSIpOwogICAgICAgICAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZSgic3JjIik7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc3JjID0gImh0dHBzOi8vcGljLnJtYi5iZHN0YXRpYy5jb20vYzg2MjU1ZTgwMjg2OTYxMzlkM2UzZTRiYjQ0YzA0N2IucG5nIjsKICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS53aWR0aCA9ICIxMjUiOwogICAgICAgICAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZSgiaGVpZ2h0Iik7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgc2FmZVdhaXRGdW5jKCIjbWFpbiBpbWdbYWx0PSdHb29nbGUnXSIsIGZ1bmN0aW9uKG5vZGUpewogICAgICAgICAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZSgic3Jjc2V0Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc3JjID0gImh0dHBzOi8vd3d3LmJhaWR1LmNvbS9pbWcvYmRfbG9nbzEucG5nP3doZXJlPXN1cGVyIjsKICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoImhlaWdodCIsICIxMjkiKTsKICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zdHlsZSA9ICJwYWRkaW5nLXRvcDogNTlweDsiOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gZG9jdW1lbnQudGl0bGUucmVwbGFjZSgvXkdvb2dsZS8sICLnmb7luqbkuIDkuIvvvIzkvaDlsLHnn6XpgZMiKS5yZXBsYWNlKC8gLSBHb29nbGUg5pCc57SiLywgIl/nmb7luqbmkJzntKIiKTsKICAgICAgICAgICAgICAgICAgICBsZXQgbGlua1RhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImxpbmtbdHlwZT0naW1hZ2UveC1pY29uJ10iKSB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7CiAgICAgICAgICAgICAgICAgICAgbGlua1RhcmdldC50eXBlID0gJ2ltYWdlL3gtaWNvbic7CiAgICAgICAgICAgICAgICAgICAgbGlua1RhcmdldC5yZWwgPSAnc2hvcnRjdXQgaWNvbic7CiAgICAgICAgICAgICAgICAgICAgbGlua1RhcmdldC5ocmVmID0gJ2h0dHBzOi8vd3d3LmJhaWR1LmNvbS9mYXZpY29uLmljbyc7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rVGFyZ2V0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCAhPSBTaXRlVHlwZS5PVEhFUlMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NTm9kZUluc2VydGVkJywgTWFpbkNhbGxiYWNrLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgTWFpbkNhbGxiYWNrLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIFJBRkZ1bmN0aW9uKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXBpZERlYWwoKTsgLy8g5a6a5pyf6LCD55So77yM6YG/5YWN5pyJ5pe25YCZRE9N5o+S5YWl5rKh5pyJ5omn6KGM5a+86Ie055qE6Zeu6aKYCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDgwMCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIE1haW5DYWxsYmFjayhlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0ICE9IG51bGwgJiYgdHlwZW9mKGUudGFyZ2V0LmNsYXNzTmFtZSkgPT0gInN0cmluZyIgJiYgZS50YXJnZXQuY2xhc3NOYW1lLnRvVXBwZXJDYXNlKCkuaW5kZXhPZigiQUMtIikgPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfSAvL+Wxj+iUveaOieWboOS4uuWinuWKoGNzc+WvvOiHtOeahOinpuWPkWluc2VydOWKqOS9nAogICAgICAgICAgICAgICAgICAgIHJhcGlkRGVhbCgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFNob3dTZWFyY2hCb3goKXsKICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIOW+heWujOaIkAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLyrku6XkuIvku6PnoIHlpKfpg6jliIbmnaXmupDkuo5TdXByZVByZWxvYWRlciDmhJ/osKIgc3dkeWggJiYgeXd6aGFpcWkgJiYgTkxGIOS7peWPiiBtYWNoNiDlpKfkvawqLwogICAgICAgICAgICAgICAgZnVuY3Rpb24gYWNfc3BmdW5jKGUpewogICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQsIHIgPSBlLmN1cnJlbnRUYXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgdmFyIFR3ZWVuID0gewogICAgICAgICAgICAgICAgICAgICAgICBMaW5lYXI6IGZ1bmN0aW9uIExpbmVhcihlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciAqIGUgLyBuICsgdDsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUXVhZDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzZUluOiBmdW5jdGlvbiBlYXNlSW4oZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByICogKGUgLz0gbikgKiBlICsgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNlT3V0OiBmdW5jdGlvbiBlYXNlT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXIgKiAoZSAvPSBuKSAqIChlIC0gMikgKyB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2VJbk91dDogZnVuY3Rpb24gZWFzZUluT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGUgLz0gbiAvIDIpIDwgMSA/IHIgLyAyICogZSAqIGUgKyB0IDogLXIgLyAyICogKC0tZSAqIChlIC0gMikgLSAxKSArIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEN1YmljOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNlSW46IGZ1bmN0aW9uIGVhc2VJbihlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgKiAoZSAvPSBuKSAqIGUgKiBlICsgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNlT3V0OiBmdW5jdGlvbiBlYXNlT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciAqICgoZSA9IGUgLyBuIC0gMSkgKiBlICogZSArIDEpICsgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6IGZ1bmN0aW9uIGVhc2VJbk91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlIC89IG4gLyAyKSA8IDEgPyByIC8gMiAqIGUgKiBlICogZSArIHQgOiByIC8gMiAqICgoZSAtPSAyKSAqIGUgKiBlICsgMikgKyB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBRdWFydDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzZUluOiBmdW5jdGlvbiBlYXNlSW4oZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByICogKGUgLz0gbikgKiBlICogZSAqIGUgKyB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2VPdXQ6IGZ1bmN0aW9uIGVhc2VPdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtciAqICgoZSA9IGUgLyBuIC0gMSkgKiBlICogZSAqIGUgLSAxKSArIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzZUluT3V0OiBmdW5jdGlvbiBlYXNlSW5PdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZSAvPSBuIC8gMikgPCAxID8gciAvIDIgKiBlICogZSAqIGUgKiBlICsgdCA6IC1yIC8gMiAqICgoZSAtPSAyKSAqIGUgKiBlICogZSAtIDIpICsgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUXVpbnQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2VJbjogZnVuY3Rpb24gZWFzZUluKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciAqIChlIC89IG4pICogZSAqIGUgKiBlICogZSArIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzZU91dDogZnVuY3Rpb24gZWFzZU91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgKiAoKGUgPSBlIC8gbiAtIDEpICogZSAqIGUgKiBlICogZSArIDEpICsgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6IGZ1bmN0aW9uIGVhc2VJbk91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlIC89IG4gLyAyKSA8IDEgPyByIC8gMiAqIGUgKiBlICogZSAqIGUgKiBlICsgdCA6IHIgLyAyICogKChlIC09IDIpICogZSAqIGUgKiBlICogZSArIDIpICsgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgU2luZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzZUluOiBmdW5jdGlvbiBlYXNlSW4oZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtciAqIE1hdGguY29zKGUgLyBuICogKE1hdGguUEkgLyAyKSkgKyByICsgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNlT3V0OiBmdW5jdGlvbiBlYXNlT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciAqIE1hdGguc2luKGUgLyBuICogKE1hdGguUEkgLyAyKSkgKyB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2VJbk91dDogZnVuY3Rpb24gZWFzZUluT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXIgLyAyICogKE1hdGguY29zKE1hdGguUEkgKiBlIC8gbikgLSAxKSArIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEV4cG86IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2VJbjogZnVuY3Rpb24gZWFzZUluKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCA9PSBlID8gdCA6IHIgKiBNYXRoLnBvdygyLCAxMCAqIChlIC8gbiAtIDEpKSArIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzZU91dDogZnVuY3Rpb24gZWFzZU91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPT0gbiA/IHQgKyByIDogciAqICgxIC0gTWF0aC5wb3coMiwgLTEwICogZSAvIG4pKSArIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzZUluT3V0OiBmdW5jdGlvbiBlYXNlSW5PdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwID09IGUgPyB0IDogZSA9PSBuID8gdCArIHIgOiAoZSAvPSBuIC8gMikgPCAxID8gciAvIDIgKiBNYXRoLnBvdygyLCAxMCAqIChlIC0gMSkpICsgdCA6IHIgLyAyICogKDIgLSBNYXRoLnBvdygyLCAtMTAgKiAtLWUpKSArIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIENpcmM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2VJbjogZnVuY3Rpb24gZWFzZUluKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXIgKiAoTWF0aC5zcXJ0KDEgLSAoZSAvPSBuKSAqIGUpIC0gMSkgKyB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2VPdXQ6IGZ1bmN0aW9uIGVhc2VPdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByICogTWF0aC5zcXJ0KDEgLSAoZSA9IGUgLyBuIC0gMSkgKiBlKSArIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzZUluT3V0OiBmdW5jdGlvbiBlYXNlSW5PdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZSAvPSBuIC8gMikgPCAxID8gLXIgLyAyICogKE1hdGguc3FydCgxIC0gZSAqIGUpIC0gMSkgKyB0IDogciAvIDIgKiAoTWF0aC5zcXJ0KDEgLSAoZSAtPSAyKSAqIGUpICsgMSkgKyB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBFbGFzdGljOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNlSW46IGZ1bmN0aW9uIGVhc2VJbihlLCB0LCByLCBuLCBhLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAgPT0gZSA/IHQgOiAxID09IChlIC89IG4pID8gdCArIHIgOiAobyB8fCAobyA9IC4zICogbiksICFhIHx8IGEgPCBNYXRoLmFicyhyKSA/IChhID0gciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG8gLyA0KSA6IGkgPSBvIC8gKDIgKiBNYXRoLlBJKSAqIE1hdGguYXNpbihyIC8gYSksIC1hICogTWF0aC5wb3coMiwgMTAgKiAoZSAtPSAxKSkgKiBNYXRoLnNpbigoZSAqIG4gLSBpKSAqICgyICogTWF0aC5QSSkgLyBvKSArIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2VPdXQ6IGZ1bmN0aW9uIGVhc2VPdXQoZSwgdCwgciwgbiwgYSwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwID09IGUgPyB0IDogMSA9PSAoZSAvPSBuKSA/IHQgKyByIDogKG8gfHwgKG8gPSAuMyAqIG4pLCAhYSB8fCBhIDwgTWF0aC5hYnMocikgPyAoYSA9IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBvIC8gNCkgOiBpID0gbyAvICgyICogTWF0aC5QSSkgKiBNYXRoLmFzaW4ociAvIGEpLCBhICogTWF0aC5wb3coMiwgLTEwICogZSkgKiBNYXRoLnNpbigoZSAqIG4gLSBpKSAqICgyICogTWF0aC5QSSkgLyBvKSArIHIgKyB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6IGZ1bmN0aW9uIGVhc2VJbk91dChlLCB0LCByLCBuLCBhLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAgPT0gZSA/IHQgOiAyID09IChlIC89IG4gLyAyKSA/IHQgKyByIDogKG8gfHwgKG8gPSBuICogKC4zICogMS41KSksICFhIHx8IGEgPCBNYXRoLmFicyhyKSA/IChhID0gciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG8gLyA0KSA6IGkgPSBvIC8gKDIgKiBNYXRoLlBJKSAqIE1hdGguYXNpbihyIC8gYSksIGUgPCAxID8gYSAqIE1hdGgucG93KDIsIDEwICogKGUgLT0gMSkpICogTWF0aC5zaW4oKGUgKiBuIC0gaSkgKiAoMiAqIE1hdGguUEkpIC8gbykgKiAtLjUgKyB0IDogYSAqIE1hdGgucG93KDIsIC0xMCAqIChlIC09IDEpKSAqIE1hdGguc2luKChlICogbiAtIGkpICogKDIgKiBNYXRoLlBJKSAvIG8pICogLjUgKyByICsgdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEJhY2s6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2VJbjogZnVuY3Rpb24gZWFzZUluKGUsIHQsIHIsIG4sIGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBhICYmIChhID0gMS43MDE1OCksIHIgKiAoZSAvPSBuKSAqIGUgKiAoKGEgKyAxKSAqIGUgLSBhKSArIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzZU91dDogZnVuY3Rpb24gZWFzZU91dChlLCB0LCByLCBuLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gYSAmJiAoYSA9IDEuNzAxNTgpLCByICogKChlID0gZSAvIG4gLSAxKSAqIGUgKiAoKGEgKyAxKSAqIGUgKyBhKSArIDEpICsgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6IGZ1bmN0aW9uIGVhc2VJbk91dChlLCB0LCByLCBuLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gYSAmJiAoYSA9IDEuNzAxNTgpLCAoZSAvPSBuIC8gMikgPCAxID8gciAvIDIgKiAoZSAqIGUgKiAoKDEgKyAoYSAqPSAxLjUyNSkpICogZSAtIGEpKSArIHQgOiByIC8gMiAqICgoZSAtPSAyKSAqIGUgKiAoKDEgKyAoYSAqPSAxLjUyNSkpICogZSArIGEpICsgMikgKyB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBCb3VuY2U6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2VJbjogZnVuY3Rpb24gZWFzZUluKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciAtIFR3ZWVuLkJvdW5jZS5lYXNlT3V0KG4gLSBlLCAwLCByLCBuKSArIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzZU91dDogZnVuY3Rpb24gZWFzZU91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlIC89IG4pIDwgMSAvIDIuNzUgPyByICogKDcuNTYyNSAqIGUgKiBlKSArIHQgOiBlIDwgMiAvIDIuNzUgPyByICogKDcuNTYyNSAqIChlIC09IDEuNSAvIDIuNzUpICogZSArIC43NSkgKyB0IDogZSA8IDIuNSAvIDIuNzUgPyByICogKDcuNTYyNSAqIChlIC09IDIuMjUgLyAyLjc1KSAqIGUgKyAuOTM3NSkgKyB0IDogciAqICg3LjU2MjUgKiAoZSAtPSAyLjYyNSAvIDIuNzUpICogZSArIC45ODQzNzUpICsgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6IGZ1bmN0aW9uIGVhc2VJbk91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPCBuIC8gMiA/IC41ICogVHdlZW4uQm91bmNlLmVhc2VJbigyICogZSwgMCwgciwgbikgKyB0IDogLjUgKiBUd2Vlbi5Cb3VuY2UuZWFzZU91dCgyICogZSAtIG4sIDAsIHIsIG4pICsgLjUgKiByICsgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIFR3ZWVuTSA9IFsgIkxpbmVhciIsICJRdWFkIiwgIkN1YmljIiwgIlF1YXJ0IiwgIlF1aW50IiwgIlNpbmUiLCAiRXhwbyIsICJDaXJjIiwgIkVsYXN0aWMiLCAiQmFjayIsICJCb3VuY2UiIF0sIFR3ZWVuRWFzZSA9IFsgImVhc2VJbiIsICJlYXNlT3V0IiwgImVhc2VJbk91dCIgXTsKICAgICAgICAgICAgICAgICAgICB2YXIgcHJlZnMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNfbWV0aG9kOiAzLAogICAgICAgICAgICAgICAgICAgICAgICBzX2Vhc2U6IDIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNfRlBTOiA2MCwKICAgICAgICAgICAgICAgICAgICAgICAgc19kdXJhdGlvbjogMzMzLAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UmVsYXRpdmVEaXYoZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHIuaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAodCA9IHQucmVwbGFjZSgvKHNwLXNlcGFyYXRvci0pKC4rKS8sIChmdW5jdGlvbih0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciArIFN0cmluZyhOdW1iZXIobikgKyAoInByZSIgPT0gZSA/IC0xIDogMSkpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSkpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodCkgOiBudWxsOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzcF90cmFuc2l0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBzcF90cmFuc2l0aW9uLlR3ZWVuRjsKICAgICAgICAgICAgICAgICAgICAgICAgciB8fCAociA9IChyID0gVHdlZW5bVHdlZW5NW3ByZWZzLnNfbWV0aG9kXV0pW1R3ZWVuRWFzZVtwcmVmcy5zX2Vhc2VdXSB8fCByLCBzcF90cmFuc2l0aW9uLlR3ZWVuRiA9IHIpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IDFlMyAvIHByZWZzLnNfRlBTLCBhID0gMCwgbyA9IGUsIGkgPSB0IC0gZSwgcyA9IE1hdGguY2VpbChwcmVmcy5zX2R1cmF0aW9uIC8gbiksIGMgPSB3aW5kb3cuc2Nyb2xsWDsKICAgICAgICAgICAgICAgICAgICAgICAgIWZ1bmN0aW9uIHRyYW5zaXRpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IE1hdGguY2VpbChyKGEsIG8sIGksIHMpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGwoYywgZSksIGEgPCBzICYmIChhKyssIHNldFRpbWVvdXQodHJhbnNpdGlvbiwgbikpOwogICAgICAgICAgICAgICAgICAgICAgICB9KCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNjcm9sbEl0KGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3BfdHJhbnNpdGlvbihlLCB0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlLnRhcmdldC5pZCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJzcC1zcC1nb3RvcCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxJdCh3aW5kb3cuc2Nyb2xsWSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInNwLXNwLWdvcHJlIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZ2V0UmVsYXRpdmVEaXYoInByZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gd2luZG93LnNjcm9sbFk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IG4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHQgLSAoci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSBhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbEl0KHQsIGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJzcC1zcC1nb25leHQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBnZXRSZWxhdGl2ZURpdigibmV4dCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gd2luZG93LnNjcm9sbFk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IG8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHQgKyAoLXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxJdCh0LCBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAic3Atc3AtZ29ib3R0b20iOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsSXQod2luZG93LnNjcm9sbFksIE1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQsIGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0KSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZnVuY3Rpb24gd2luZG93c2Nyb2xsKCBmbiApIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYmVmb3JlU2Nyb2xsVG9wID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgZm4gPSBmbiB8fCBmdW5jdGlvbigpIHt9OwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhZnRlclNjcm9sbFRvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWx0YSA9IGFmdGVyU2Nyb2xsVG9wIC0gYmVmb3JlU2Nyb2xsVG9wOwogICAgICAgICAgICAgICAgICAgICAgICBpZiggZGVsdGEgPT09IDAgKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGZuKCBkZWx0YSA+IDAgPyAiZG93biIgOiAidXAiICwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZVNjcm9sbFRvcCA9IGFmdGVyU2Nyb2xsVG9wOwogICAgICAgICAgICAgICAgICAgIH0sIGZhbHNlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHdpbmRvd3Njcm9sbChmdW5jdGlvbihkaXJlY3Rpb24sIGUpewogICAgICAgICAgICAgICAgICAgIGlmKGRpcmVjdGlvbiA9PT0gImRvd24iKXsgLy8g5LiL5ruR5omN5YeG5aSH57+76aG1CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtZnctYV9lbmFibGUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8g5byA5ZCv5ZCO77yM5LiU5Zyo6Z2e77yIc3VwcmVwcmVsb2FkZXLlkK/nlKjvvInml7blnYflj68KICAgICAgICAgICAgICAgICAgICAgICAgaWYoQUNDb25maWcuaXNBdXRvcGFnZSA9PSB0cnVlICYmICEoc3BsICYmIHNwbC5jaGVja2VkID09IHRydWUpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzY3JvbGxEZWx0YSA9IDY2NjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGN1clNpdGUuU2l0ZVR5cGVJRCA9PSBTaXRlVHlwZS5HT09HTEUpIHNjcm9sbERlbHRhID0gMTAyNDsgLy8g5q+V56uf6LC35q2M5Yqg6L2957yT5oWi55qE6Zeu6aKYCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0IDw9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgKyBzY3JvbGxUb3AgKyBzY3JvbGxEZWx0YSAmJiBjdXJTaXRlLnBhZ2VMb2FkaW5nID09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyU2l0ZS5wYWdlTG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2hvd1BhZ2VyLmxvYWRNb3JlUGFnZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB2YXIgU2hvd1BhZ2VyID0gewogICAgICAgICAgICAgICAgICAgIGdldEZ1bGxIcmVmOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICJzdHJpbmciICE9IHR5cGVvZiBlICYmIChlID0gZS5nZXRBdHRyaWJ1dGUoImhyZWYiKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5nZXRGdWxsSHJlZi5hOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCB8fCAodGhpcy5nZXRGdWxsSHJlZi5hID0gdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKSksIHQuaHJlZiA9IGUsIHQuaHJlZjsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGNyZWF0ZURvY3VtZW50QnlTdHJpbmcgOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIkhUTUwiICE9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSkgcmV0dXJuIChuZXcgRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoZSwgImFwcGxpY2F0aW9uL3hodG1sK3htbCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSAobmV3IERPTVBhcnNlcikucGFyc2VGcm9tU3RyaW5nKGUsICJ0ZXh0L2h0bWwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KSB0ID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCJzdXBlclByZWxvYWRlciIpOyBlbHNlIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQgPSBkb2N1bWVudC5jbG9uZU5vZGUoITEpKS5hcHBlbmRDaGlsZCh0LmltcG9ydE5vZGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCAhMSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0LmNyZWF0ZUVsZW1lbnQoImhlYWQiKSksIHQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKHQuY3JlYXRlRWxlbWVudCgiYm9keSIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByLnNlbGVjdE5vZGVDb250ZW50cyhkb2N1bWVudC5ib2R5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHIuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuYm9keS5hcHBlbmRDaGlsZChuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBhLCBvID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUSVRMRTogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1FVEE6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMSU5LOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU1RZTEU6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCQVNFOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGkgPSB0LmJvZHksIHMgPSBpLmNoaWxkTm9kZXMsIGMgPSBzLmxlbmd0aCAtIDE7IGMgPj0gMDsgYy0tKSBvWyhhID0gc1tjXSkubm9kZU5hbWVdICYmIGkucmVtb3ZlQ2hpbGQoYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBjb25zb2xlLmVycm9yKCJbQUMtU2NyaXB0XSIsICLmsqHmnInmib7liLDopoHovazmiJBET03nmoTlrZfnrKbkuLIiKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGxvYWRNb3JlUGFnZSA6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZihjdXJTaXRlLnBhZ2VyKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjdXJQYWdlRWxlID0gZ2V0RWxlbWVudEJ5WHBhdGgoY3VyU2l0ZS5wYWdlci5uZXh0TGluayk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gdGhpcy5nZXRGdWxsSHJlZihjdXJQYWdlRWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZXBJbWdzID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQllBQUFBV0NBWUFBQURFdEd3N0FBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBV3RKUkVGVWVOcmNsRTByUkdFVXg4YzFHVXBSSklWSVpHZGhaQ1ZyMzhHR2hhSTBaWHdDa2xpZ2xDaFpFY3ZKeGhkZ1lXT2pMRVVwbS9FeWlMenplK284ZFR6ZE8zUGxqb1ZUdjdyUGM4LzVkKzY1NTV4WXJFaFdvcDZib2RhNSs2bDl3aldjV3BGK1dJYnFDSko5aEZSY0RyM1FBSWtJaEt1Z3o1UERma1NpeGtwaHo1YWlBbnFnRThyZ1dSeEdvU09QeUJrc3dRdVV3eXNjdzRIcm1GQ1pMOEt0L0pBZzdtRUZQRW1vNEZkUHdrMEJVY3NkeklhcDBUUThxTUFQdUlDY0VqTG5kK1ZqU2pjZkpOZ0ljL0RrWkdTeW1ZR3NuSzlFWk1yeGU0TUZhTkdpWmpDMmZUNXpRM3A3UURLMWRSMkdTbGp6aWNsQXZSVWU4bkhZVkE0amp2QzQzTmZBdWsvc21CMlFOcWNzV3hLY0xiQUtURm5TMGhXRDZuMjdGZDZGTHFpREk1aVFtUTlqcGlWVDBzTko2YVlkN2RBRTNRSEJiaW5TQVg1SldXYXh1TG84RjM1amgvYkJLOVkrL3IvQ2w2cExjbm5hOE52dURHTW5zbHBiWlJwWFpZVC8zcjRFR0FDWkwzWkwyYWZORkFBQUFBQkpSVTVFcmtKZ2dnPT0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbTogImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQllBQUFBV0NBWUFBQURFdEd3N0FBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBWEZKUkVGVWVOck0xYzhyQkdFY3gvRmR0Q0VrTHFZdHBkd2tLU1VIVWh4d0lUZEsrWjN5TTJjT0xuSjM5Q2M0NFNnSFNjbUp3bEZ4c0lkbENTY082LzJ0NzZPbnA1MmRYVHRibm5vMU04K1B6ODQrenpNemtjZy9LQTNvUlR6TTBBNGNJNFZUZElVVlBJTTNwUEdPNWFBQkpUa0d4MUJxalltRkZaeFc3bm5Cd1htWG9nV1g2YkVHYzJqRUlVNytrTldEVVNTd1p5cW5kU3ZKM04xZzJCbTBvTHRCMmordzdyUVA0TXBxWHpSVDBZUmFQVy9CdGhNZWRZTHM2MEhzb0UydnE5QnNQd0FKYThYRkxVYTBmVXJ2Uk9vL3NhVDFROWFkR2ltZGx0OHlqNlRUNlE2ZDJ2YWlkYTlZUmJ0UDZFcW1CWkM1ZkhBNlgrQUF6MWJ3RWM2Y2ZrOStvYVpNNE5vWkpMNzArSjJoVGFadE5wZXQwNDF6Szh5UC9NZ2wrck9GMWVtcjBVTTF4bkFmRVB5SVNkMEpubzZ2dHgrUXVNNlBaMjJscE83ZGJFVjJTaXY2clBlSWpOczFIZFlDN2l4ZkcrWUJxZFRWRHFQSXY2aUlXdk83aVhHVUZ4QXFpNzJQcmFKOUlIOEVHQUNRY1lqWVJkNUdId0FBQUFCSlJVNUVya0pnZ2c9PSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlOiAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCWUFBQUFXQ0FZQUFBREV0R3c3QUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUFTbEpSRUZVZU5waVlCak9vQmlJcndKeEZSQXpVc3ZRVmlEK0NNVC9nZmdURVBkUnk5QlBVRU5oK0FzUTkxSmlhQXVTUzlIeFozSU5iOEhpMHYrVXVyd0Y2cUwvUk9CdlFOeERyS0Zma1RUK0ErSm5RUHdCS2ZKQS9MOUlhbjdpYzdrTUVIY0M4UTgwRjNVQWNSc1F2NGJ5MzBJTmFVSlQ5d2VhV2hTUURSVUI0dVZZdkxrWWlBV0FPQm9wdkVGQmxBckVQRUE4RzR1ZTlVQXNBVE00RVl1Q0pVZ0tNdEFNTG9TS0N3UHhYQ3g2YzFpZ0NsVFFnbVVaVlBOckhNRUd5M21nWUNrQ1lpWWdUa0NTVjRVWnZBMklqWUJZRElndlFiUHZPeUpURUNpZDV3SHhieUEyQnVMM1FMd1JXWUVzRUp2ZzBJd2VGRVU0MUlFTWxnY3hXSkFFSDBNeEplQXNqTUZFcTZKdytCcjhCaW1WZk1DVERFa0c3RUJjQThUM29XVUp4NERWWXdBQkJnQ2Fubm5TemJnd0lRQUFBQUJKUlU1RXJrSmdnZz09IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0OiAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCWUFBQUFXQ0FZQUFBREV0R3c3QUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUFUMUpSRUZVZU5yYzFiMUtBMEVZaGVFbC9pQVJGRkVrS2w2RDBVSzhDckVWckN3RWV4RkN0QklsUldJanNmRWlMTDBGS3pzN1FVV3hNMnBpRk1Va3ZoUE93TEFzMlRHdUNuN3drTmxsNWpDNyt3MEpndjlhdmRqQU9iYlFuMVR3Q3U3UXdoV1c0eGFrUElPSE1LenhHQ2FTQ202aW9YSExaMEhxcHo3S3J3UlBJdnZOdkJsTTJ6WXlOWThjTWpoREhvOWZDQnpFcm5JcUtOamdSU3hwdklBQmJPTGVzMk1LV0hmdVhkaFhjUjJhdktySjR6R2hJOWdMaFFicTlYYVpnR08xa3V0SU96SUhwS3A3TmF3aGpZT0lOU2VZNmxGd0hhY3cxN1A2TlRXSGQ0eHFuTmJjUzgzTE9idHNhQ1BiRVcrZ1hVVzhPRHN3QzI3eG9Pc24zT0REbWZPR3NzOVhMdUU1NGpHanZQcUd1dUcxbUZEelpJZmROSHlubmRlN0RiVzFyNUR3VHN0SkhQMmlFNTVZcUQzNmViWFpEdnIrN0wvc1U0QUJBSXBWWldub0E1R2tBQUFBQUVsRlRrU3VRbUNDIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0X2dyYXk6ICJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJZQUFBQVdDQVlBQUFERXRHdzdBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXR4SlJFRlVlTnJjbGM5TDJtRWN4Ny82TmJWWnFSVmo3cElPbElVdVoxSE1ndjBCRGNxVDdKcnNrSDEzRUxQQkY3ZVR2ejEwSHpuV1FCbEJSSWZCWElmQkxtcVhzY3ZZWldQS3JNTklVOUFwbXJyMzQvdzZpMG92TVpqdytIMCt6L044WHQrUG4vZm44MGhSLytXSFlSaEJJcEZ3UktQUnovRjQvS25ENFJCMjh4SDBBaDRjSEh5b1VDanNJcEZJSVpQSkhrbWwwbTlZZm4yWkQ3OFhjTDFlSDZyVmFsSU1DbU1VdHFLYkQ3L0hiTlF4YXExNW94Y0gvbFhwY21YZ3RuaDJ1LzJtWEM2L0RxRStzU3hMbFVxbG5pRTBUVlBCWUpBcUZvdDYrR1Y5UHQrUEp0aG1zODBzTFMyeEVvbmtobGdzL2pnd01PQmNYVjNONWZQNXJsQ2NwOWJYMXlXTGk0dWVjcms4VTZsVXNoRFkzd1JiTEpZRkdLWnNOa3NxNE43OC9Md1k5aE9uMDVrNU9qcWkrUHpUR2VQeGVGd1pVbDZ2ZDhoa012a1BEZzZzWkoyTTVlWGxyMXdxVXUya0E1Sk9weTJJQU8rb085ZlcxbjVtTXBrMm5Eam1jamtLTlUyNVhDNjUyV3gycFZJcDY1bVhKMm55alVQcHFha3BOWnh1QThZNVQ4N096c29iamNZSHBWS3BHaHNiZTFDdFZrWFlxeFFLaFRkcXRmcUwxV3IxSnBQSnh4eVU1THEvdno4YUNvWDhUVERhdFlpRmhGNnZ4eDV0QUp3bThPUGo0OG01dWJtS1NxVWFBV3dTYTllUXc2SkdvL2x1TkJvTmg0ZUhiQWUwSmhBSU5zTGg4TE5BSUpDaXVkaHhCK1FoMmx1ZFRpZkRBUUx2STNBSWNoK1JrbDhqSmxyaENiT3FnZm9MbURlcE9GL0JmR05yYTJzRkZaRnR2cWd6TWJGWWpBaXlwOVZxaDRWQzRjVEp5WW1ROTBlcElRSnRIUk8xYkE1YVJoQXZkbloyR0kvSDg3Y0V6NVlQZ2VPUzJSc2ZIeDlCN3UrZ09pNjh5UUF0WVg5emQzZVhnWkNuYS9zOEJ5NXlwR1VVemhPSVNIZ085QmZXWHdHNmNoWjZJYmlWYzZMd25zRmdHSVZBZXBMemprNHJZVzF6ZTN1YmNidmQ1M2ZqWlYyRmFxR1E2M2ZUMDlQRE1POWk5QkVvb24wSjlSbS8zMzl4bTNkcjJmMzlmVkxYN3dGdm9NVnZvWVdmUnlJUkZuZEQvWi84bmYwV1lBQThFQzFaL1pObTRnQUFBQUJKUlU1RXJrSmdnZz09IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVfZ3JheTogImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQllBQUFBV0NBWUFBQURFdEd3N0FBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBc2xKUkVGVWVOcmNsVHRNV21FVXh6L3V2VHpsSVVocE5NUjBhR05qck5IU21IVHFSSnlhZHVqUURiU0dSd0pVYVlDbURpenFVRXc2T0RWTkdnYnBZQ2ZTcEZJTkNRekZSOW95TVhSc1hGQ3NBWGtJS05ML1I3Z0dXeE9zU2RQRWs1emMzTytlODd2bis1OXp2MHZJcGJTSmlRbXl1Ym41TEJLSnBOYlgxMSs0WEM1QnV4eTJYWUROWmlNT2gyT1c0emlQVENiVGk4WGlrZUhoNFNzU2llUVRYbkl4c04xdUoxYXJkVllnRURnUER3K1Y5WHFkMUdvMU1jdXlnN0F1dVZ5K3NyYTI5bmRnVkVuR3g4ZG5oRUtoczFxdEtnRS9lWFo4ZkN6QytxMysvbjZ0U3FWYVNTUVM1d003blU1aU1wbG1zRjFYcFZJNUJlWHQ2T2hJQkZrR0FlOVNLcFYvd05tektqV2J6UlQ2dEZ3dUs4NkNVcVBya0lWV1BqUXdNS0JXS0JTbjRPenYwTEd4c1JtUlNEU0ZTanVhMERvOFRSV0FTK0I1K0I2OGcvSWhpeENOdlFQTjFXanVpZVpzUy9mMWFOUTB3ekJ1YUNxbFVDUVJ0VnI5RXMxSzRrVkRXSk5oclFqQUlpcU1sa3FsZTgwNEZua2pCb09oRXp2NHZyR3hrVzJBTFJhTEZycStRb0FWMm5FOHRMZTNkekVZREU1dmIyOTM5dlgxUGNCa2lLVlNhUTFqRm9yRllxK05ScU11bTgzZWJzWXptSnE3c0d1NHhoa0t4c0RmQi9BeG5PODYwZXYxb2VYbFpVOGdFTWdtazBrRnFtdzhvOWRVS2lXZm41OHZoTVBoNTRoN1MrT3BRWE5TTEJZZmVqeWVSMXl6dzlkYlJvbjA5UFM4VzExZG5mTDVmSmw4UGsrMFdpM2hrNXZ5Q05CWTR2VjZmMEltOStqb0tKTk9wODE4bzhHNzBhaDRhV25wSXpTS1lDYS9kWGQzQitQeHVITnljakt6czdOekFtczErcUZReStWeWREUnowV2pVcGRQcDN0QjhURk0wRkFxRkd4WFB6YzE5cGxKck5KcXJhTW9YdDl0TnQzU3VjK1RnNElDZUpmbUZoUVZMb1ZBd29LRzdmci8vQjhjSEFMNkZ5OVpGRGluYUcvcjV3Nzd5YTh5L09oRXZLUmhqdEl1cDJZTVRlQmIzbVhZNTNIbkFtTmtQKy92N056SFRUd0FPNGY3OWYvdWQvUkpnQU9MY1JOWnFMb2pNQUFBQUFFbEZUa1N1UW1DQyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgQUNfYWRkU3R5bGUoIi5zcC1zZXBhcmF0b3J7bGluZS1oZWlnaHQ6MS44ICFpbXBvcnRhbnQ7b3BhY2l0eToxICFpbXBvcnRhbnQ7cG9zaXRpb246cmVsYXRpdmUgIWltcG9ydGFudDtmbG9hdDpub25lICFpbXBvcnRhbnQ7dG9wOjAgIWltcG9ydGFudDtsZWZ0OjAgIWltcG9ydGFudDttaW4td2lkdGg6MzY2cHg7d2lkdGg6YXV0bzt0ZXh0LWFsaWduOmNlbnRlciAhaW1wb3J0YW50O2ZvbnQtc2l6ZToxNHB4ICFpbXBvcnRhbnQ7ZGlzcGxheTpibG9jayAhaW1wb3J0YW50O3BhZGRpbmc6M3B4IDAgIWltcG9ydGFudDttYXJnaW46NXB4IDEwcHggOHB4O2NsZWFyOmJvdGggIWltcG9ydGFudDtib3JkZXItc3R5bGU6c29saWQgIWltcG9ydGFudDtib3JkZXItY29sb3I6I2NjY2NjYyAhaW1wb3J0YW50O2JvcmRlci13aWR0aDoxcHggIWltcG9ydGFudDstbW96LWJvcmRlci1yYWRpdXM6MzBweCAhaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6MzBweCAhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6I2ZmZmZmZiAhaW1wb3J0YW50O30uc3Atc2VwYXJhdG9yOmhvdmVye2JveC1zaGFkb3c6MCAwIDExcHggcmdiYSgzMywzMywzMywwLjIpO30jc3Atc2VwYXJhdG9yLWhvdmVye2Rpc3BsYXk6bm9uZTt9LnNwLXNlcGFyYXRvcjpob3ZlciAjc3Atc2VwYXJhdG9yLWhvdmVye2Rpc3BsYXk6YmxvY2s7fS5zcC1zZXBhcmF0b3IgLnNwLXNvbWVpbmZve3Bvc2l0aW9uOmFic29sdXRlICFpbXBvcnRhbnQ7cmlnaHQ6MTBweCAhaW1wb3J0YW50O2ZvbnQtc2l6ZToxMnB4ICFpbXBvcnRhbnQ7Zm9udC1zdHlsZTppdGFsaWMgIWltcG9ydGFudDtiYWNrZ3JvdW5kOm5vbmUgIWltcG9ydGFudDt9LnNwLXNlcGFyYXRvciBzcGFue3ZlcnRpY2FsLWFsaWduOiBtaWRkbGU7Y3Vyc29yOiBwb2ludGVyO3BhZGRpbmc6IDA7bWFyZ2luOiAwIDVweDtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdpZHRoOjIycHg7aGVpZ2h0OjIycHg7fS5zcC1zZXBhcmF0b3IgYXttYXJnaW46MCAyMHB4IDAgLTZweCAhaW1wb3J0YW50O2Rpc3BsYXk6aW5saW5lICFpbXBvcnRhbnQ7dGV4dC1zaGFkb3c6I2ZmZiAwIDFweCAwICFpbXBvcnRhbnQ7YmFja2dyb3VuZDpub25lICFpbXBvcnRhbnQ7Y29sb3I6IzU5NTk1OSAhaW1wb3J0YW50O30uc3Atc2VwYXJhdG9yIGlucHV0e3BhZGRpbmc6MCAhaW1wb3J0YW50O2xpbmUtaGVpZ2h0OjIzcHggIWltcG9ydGFudDt9LnNwLXNlcGFyYXRvciAuc3AtbWQtc3Bhbntmb250LXdlaWdodDpib2xkICFpbXBvcnRhbnQ7bWFyZ2luOjAgMjBweCAhaW1wb3J0YW50O30jc3Atc3AtbWQtbnVtYmVye3dpZHRoOjZjaCAhaW1wb3J0YW50O3ZlcnRpY2FsLWFsaWduOm1pZGRsZSAhaW1wb3J0YW50O2Rpc3BsYXk6aW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7dGV4dC1hbGlnbjpsZWZ0ICFpbXBvcnRhbnQ7fSIrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYC5hY19zcF90b3B7YmFja2dyb3VuZC1pbWFnZTp1cmwoJyR7c2VwSW1ncy50b3B9Jyl9YCsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgLmFjX3NwX3ByZXtiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHtzZXBJbWdzLnByZX0nKX1gKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAuYWNfc3BfbmV4dHtiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHtzZXBJbWdzLm5leHR9Jyl9YCsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgLmFjX3NwX2JvdHRvbXtiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHtzZXBJbWdzLmJvdHRvbX0nKX1gKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAuYWNfc3BfbmV4dF9ncmF5e2JhY2tncm91bmQtaW1hZ2U6dXJsKCcke3NlcEltZ3MubmV4dF9ncmF5fScpfWArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYC5hY19zcF9wcmVfZ3JheXtiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHtzZXBJbWdzLnByZV9ncmF5fScpfWAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkFDLVByZWxvYWQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY3VyU2l0ZS5wYWdlVXJsID09PSB1cmwpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIltBQy1TY3JpcHRdIiwgIue/u+mhteWIsOi+vuW6lemDqOS6hiAtIOaIluiAheW8guW4uCAtIOWHuueOsOW8guW4uOivt+ebtOaOpeWPjemmiOS9nOiAheS/ruaUuSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0vLyDkuI3kvJrph43lpI3liqDovb3nm7jlkIznmoTpobXpnaIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clNpdGUucGFnZVVybCA9IHVybDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWvuXVybOeahOaVsOaNrui/m+ihjOivu+WPlgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyU2l0ZS5wYWdlci5zdGFydEZpbHRlciAmJiBjdXJTaXRlLnBhZ2VyLnN0YXJ0RmlsdGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiR0VUIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiA1MDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdCb2R5ID0gU2hvd1BhZ2VyLmNyZWF0ZURvY3VtZW50QnlTdHJpbmcocmVzcG9uc2UucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYWdlRWxlbXMgPSBnZXRBbGxFbGVtZW50cyhjdXJTaXRlLnBhZ2VyLnBhZ2VFbGVtZW50LCBuZXdCb2R5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0b0VsZW1lbnQgPSBnZXRBbGxFbGVtZW50cyhjdXJTaXRlLnBhZ2VyLkhUX2luc2VydFswXSlbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihwYWdlRWxlbXMubGVuZ3RoID49IDApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhuacgOWQjuS4gOS4que/u+mhteaMiemSrgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXh0RXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIjc3Atc3AtZ29uZXh0Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobmV4dEVzLmxlbmd0aCA+IDApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGFzdEUgPSBuZXh0RXNbbmV4dEVzLmxlbmd0aC0xXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEUuY2xhc3NMaXN0LnJlcGxhY2UoImFjX3NwX25leHRfZ3JheSIsICJhY19zcF9uZXh0Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaPkuWFpee/u+mhteaMiemSruWFg+e0oAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clNpdGUucGFnZU51bSsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhZGRUbyA9ICJiZWZvcmVlbmQiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGN1clNpdGUucGFnZXIuSFRfaW5zZXJ0WzFdID09IDEpIGFkZFRvID0gImJlZm9yZWJlZ2luIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b0VsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKGFkZFRvLCBgPGRpdiBjbGFzcz0nc3Atc2VwYXJhdG9yIEFDJyBpZD0nc3Atc2VwYXJhdG9yLUFDWCc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz0nc3Atc3AtbmV4dGxpbmsnIHRhcmdldD0nX2JsYW5rJz48Yj7nrKwgPHNwYW4gc3R5bGU9J2NvbG9yOiM1OTU5NTkhaW1wb3J0YW50Oyc+QUNYPC9zcGFuPiDpobU8L2I+PC9hPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9InNwLXNwLWdvdG9wIiBjbGFzcz0nYWNfc3BfdG9wJyBhbHQ9J+WOu+WIsOmhtumDqCcgdGl0bGU9J+WOu+WIsOmhtumDqCc+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9InNwLXNwLWdvcHJlIiBjbGFzcz0nJHtjdXJTaXRlLnBhZ2VOdW08PTI/ICJhY19zcF9wcmVfZ3JheSI6ImFjX3NwX3ByZSJ9JyB0aXRsZT0n5LiK5rua5LiA6aG1JyA+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9InNwLXNwLWdvbmV4dCIgY2xhc3M9J2FjX3NwX25leHRfZ3JheScgdGl0bGU9J+S4i+a7muS4gOmhtSc+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9InNwLXNwLWdvYm90dG9tIiBjbGFzcz0nYWNfc3BfYm90dG9tJyBhbHQ9J+WOu+WIsOW6lemDqCcgdGl0bGU9J+WOu+WIsOW6lemDqCcgPjwvc3Bhbj48L2Rpdj5gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9BQ1gvZ20sIGN1clNpdGUucGFnZU51bSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaPkuWFpeaWsOmhtemdouWFg+e0oAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VFbGVtcy5mb3JFYWNoKGZ1bmN0aW9uKG9uZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvRWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoYWRkVG8sIG9uZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLnNwLXNlcGFyYXRvci5BQzpub3QoW2JpbmRdKSIpLmZvckVhY2goZnVuY3Rpb24ocGVyKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyLnNldEF0dHJpYnV0ZSgiYmluZCIsIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXIuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBhY19zcGZ1bmMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOabv+aNouW+heabv+aNouWFg+e0oAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvcmlFID0gZ2V0QWxsRWxlbWVudHMoY3VyU2l0ZS5wYWdlci5yZXBsYWNlRSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXBFID0gZ2V0QWxsRWxlbWVudHMoY3VyU2l0ZS5wYWdlci5yZXBsYWNlRSwgbmV3Qm9keSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9yaUUubGVuZ3RoID09IHJlcEUubGVuZ3RoKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBvcmlFLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlFW2ldLmlubmVySFRNTCA9IHJlcEVbaV0uaW5uZXJIVE1MOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJTaXRlLnBhZ2VMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmVycm9yOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clNpdGUucGFnZUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEF1dG9SZWZyZXNoKCkgewogICAgICAgICAgICAgICAgICAgIGlmICghQUNDb25maWcuaXNSaWdodERpc3BsYXlFbmFibGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8g56e76Zmk5Y+z6L655qCPIC3ms6jmhI/lnKgjd3JhcHBlcj4jY29uLWF0PiNyZXN1bHQtb3AgeHBhdGgtbG9n5pyJ5pe25YCZ5b6I6YeN6KaB77yM5LiN6IO96ZqQ6JePCiAgICAgICAgICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKCIjY29udGVudF9yaWdodHtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9I2NvbnRlbnRfcmlnaHQgdGQ+ZGl2Om5vdChbaWRdKXtkaXNwbGF5Om5vbmU7fSNjb250ZW50X3JpZ2h0IC5yZXN1bHQtb3A6bm90KFtpZF0pe2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnQ7fSNyaHN7ZGlzcGxheTpub25lO30iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkFDLVJpZ2h0UmVtb3ZlIik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKENPTlNULkFkc1N0eWxlTW9kZSA9PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDpnZ7lj4zliJfmqKHlvI/kuIvlsL3lj6/og73nmoTmmL7npLrlj7PkvqfmoI8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKCJAbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAxMjUwcHgpIHsjY29udGFpbmVye3dpZHRoOiA4MCUgIWltcG9ydGFudDt9LmNvbnRhaW5lcl9sICNjb250ZW50X3JpZ2h0e21hcmdpbi1yaWdodDogY2FsYygxOCUgLSAyMTBweCk7cG9zaXRpb246IGFic29sdXRlO3JpZ2h0OiAtMjAwcHg7ZGlzcGxheTpibG9jayAhaW1wb3J0YW50O292ZXJmbG93OmhpZGRlbjt3aWR0aDogMjJ2dyAhaW1wb3J0YW50O30iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJBQy1SaWdodFJlbW92ZSIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICghQUNDb25maWcuaXNBTGluZUVuYWJsZSkgewogICAgICAgICAgICAgICAgICAgICAgICBBQ19hZGRTdHlsZSgiYSxhIGVte3RleHQtZGVjb3JhdGlvbjpub25lfSIsICJBQy1Ob0xpbmUiKTsvLyDnp7vpmaTov5nkupvkuKrkuIvliJLnur8KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmlzVXNlclN0eWxlRW5hYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKEFDQ29uZmlnLlVzZXJTdHlsZVRleHQsICJBQy11c2VyU3R5bGUiKTsvLyDnlKjmiLfoh6rlrprkuYnnmoTmoLflvI/ooagKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgQUNfYWRkU3R5bGUoCiAgICAgICAgICAgICAgICAgICAgICAgICIub3ByLXJlY29tbWVuZHMtbWVyZ2UtaW1ndGV4dHtkaXNwbGF5Om5vbmUhaW1wb3J0YW50O30iICsgLy8g56e76Zmk55m+5bqm5rWP6KeI5Zmo5o6o5bm/CiAgICAgICAgICAgICAgICAgICAgICAgICIucmVzX3RvcF9iYW5uZXJ7ZGlzcGxheTpub25lIWltcG9ydGFudDt9IiArIC8vIOenu+mZpOWPr+iDveeahOeZvuW6pkhUVFBT5Yqr5oyB5pi+56S66Zeu6aKYCiAgICAgICAgICAgICAgICAgICAgICAgICIuaGVhZEJsb2NrLCBib2R5PmRpdi5yZXN1bHQtb3B7ZGlzcGxheTpub25lO30iIC8vIOenu+mZpOeZvuW6pueahOaQnOe0oue7k+aenOmhtumDqOS4gOadoeeahOW7uuiuruaWh+WtlyAmIOenu+mZpOWPr+iDveWHuueOsOeahOeZveWxj+eOsOixoQogICAgICAgICAgICAgICAgICAgICAgICAsICJBQy1zcGVjaWFsLUJBSURVIgogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgLyoi6Ieq5a6a5LmJIuaMiemSruaViOaenCovCiAgICAgICAgICAgICAgICAgICAgQUNfYWRkU3R5bGUoIi5uZXdGdW5jSGlnaExpZ2h0e2NvbG9yOnJlZDtmb250LXdlaWdodDogMTAwO2JhY2tncm91bmQtY29sb3I6IHllbGxvdztmb250LXdlaWdodDogNjAwO30jc3AtYWMtY29udGFpbmVyIGxhYmVse2Rpc3BsYXk6aW5saW5lO30jdXt3aWR0aDozMTlweH0jdSAjbXl1c2Vye2Rpc3BsYXk6aW5saW5lfSNteXVzZXIsI215dXNlciAubXl1c2VyY29uZmlne3BhZGRpbmc6MDttYXJnaW46MH0jbXl1c2Vye2Rpc3BsYXk6aW5saW5lLWJsb2NrO30jbXl1c2VyIC5teXVzZXJjb25maWd7ZGlzcGxheTppbmxpbmUtYmxvY2s7bGluZS1oZWlnaHQ6MS41O2JhY2tncm91bmQ6IzI4NjZiZDtjb2xvcjojZmZmO2ZvbnQtd2VpZ2h0OjcwMDt0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nOjZweDtib3JkZXI6MnB4IHNvbGlkICNFNUU1RTU7fSNteXVzZXIgLm15dXNlcmNvbmZpZ3tib3gtc2hhZG93OjAgMCAxMHB4IDNweCByZ2JhKDAsMCwwLC4xKX0jbXl1c2VyIC5teXVzZXJjb25maWc6aG92ZXJ7YmFja2dyb3VuZDojMjk3MGQ0ICFpbXBvcnRhbnQ7Y29sb3I6I2ZmZjtjdXJzb3I6cG9pbnRlcjtib3JkZXI6MnB4IHNvbGlkICM3M0E2Rjg7fSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJBQy1NRU5VX0J0biIpOwogICAgICAgICAgICAgICAgICAgIC8q6Ieq5a6a5LmJ6aG16Z2i5YaF5a655pWI5p6cKi8KICAgICAgICAgICAgICAgICAgICBBQ19hZGRTdHlsZSgnYm9keVtiYWlkdV0gICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0iYmFpZHUiXSk+bGFiZWwsXG4nICsKICAgICAgICAgICAgICAgICAgICAgICAgJyAgIGJvZHlbZ29vZ2xlXSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWw6bm90KFtjbGFzcyo9Imdvb2dsZSJdKT5sYWJlbCxcbicgKwogICAgICAgICAgICAgICAgICAgICAgICAnICAgYm9keVtiaW5nXSAgICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0iYmluZyJdKT5sYWJlbCxcbicgKwogICAgICAgICAgICAgICAgICAgICAgICAnICAgYm9keVtzb2dvdV0gICAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWw6bm90KFtjbGFzcyo9InNvZ291Il0pPmxhYmVsLFxuJyArCiAgICAgICAgICAgICAgICAgICAgICAgICcgICBib2R5W2JhaWR1XSAgI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsOm5vdChbY2xhc3MqPSJiYWlkdSJdKT5icixcbicgKwogICAgICAgICAgICAgICAgICAgICAgICAnICAgYm9keVtnb29nbGVdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0iZ29vZ2xlIl0pPmJyLFxuJyArCiAgICAgICAgICAgICAgICAgICAgICAgICcgICBib2R5W2JpbmddICAgI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsOm5vdChbY2xhc3MqPSJiaW5nIl0pPmJyLFxuJyArCiAgICAgICAgICAgICAgICAgICAgICAgICcgICBib2R5W3NvZ291XSAgICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0ic29nb3UiXSk+YnIsXG4nICsKICAgICAgICAgICAgICAgICAgICAgICAgJyAgIGJvZHlbYmFpZHVdICAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWxbY2xhc3MqPSJiYWlkdSJdPmxhYmVsaGlkZSxcbicgKwogICAgICAgICAgICAgICAgICAgICAgICAnICAgYm9keVtnb29nbGVdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbFtjbGFzcyo9Imdvb2dsZSJdPmxhYmVsaGlkZSxcbicgKwogICAgICAgICAgICAgICAgICAgICAgICAnICAgYm9keVtiaW5nXSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWxbY2xhc3MqPSJiaW5nIl0+bGFiZWxoaWRlLFxuJyArCiAgICAgICAgICAgICAgICAgICAgICAgICcgICBib2R5W3NvZ291XSAgICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbFtjbGFzcyo9InNvZ291Il0+bGFiZWxoaWRlXG4nICsKICAgICAgICAgICAgICAgICAgICAgICAgJ3snICsKICAgICAgICAgICAgICAgICAgICAgICAgJ2Rpc3BsYXk6bm9uZTtcbicgKwogICAgICAgICAgICAgICAgICAgICAgICAnfSNzcC1hYy1jb250YWluZXIgbGFiZWxIaWRle2N1cnNvcjpwb2ludGVyO21hcmdpbi1sZWZ0OjglO2NvbG9yOmJsdWV9I3NwLWFjLWNvbnRhaW5lciAubGlua2hyZWYsI3NwLWFjLWNvbnRhaW5lciBsYWJlbEhpZGU6aG92ZXJ7Y29sb3I6cmVkfSNzcC1hYy1jb250YWluZXIgLmxpbmtocmVmOmhvdmVye2ZvbnQtd2VpZ2h0OmJvbGR9I3NwLWFjLWNvbnRhaW5lciBsYWJlbC5tZW51LWJveC1zbWFsbHttYXgtd2lkdGg6MTZweDttYXgtaGVpZ2h0OjE2cHg7Y3Vyc29yOnBvaW50ZXI7ZGlzcGxheTppbmxpbmUtYmxvY2t9LkFDLUNvdW50ZXJUe2JhY2tncm91bmQ6I0ZEOTk5OX1ib2R5ID4gI3NwLWFjLWNvbnRhaW5lcntwb3NpdGlvbjpmaXhlZDt0b3A6My45dnc7cmlnaHQ6OC44dnd9I3NwLWFjLWNvbnRhaW5lcnt6LWluZGV4Ojk5OTk5OTt0ZXh0LWFsaWduOmxlZnQ7YmFja2dyb3VuZC1jb2xvcjp3aGl0ZX0jc3AtYWMtY29udGFpbmVyICp7Zm9udC1zaXplOjEzcHg7Y29sb3I6YmxhY2s7ZmxvYXQ6bm9uZX0jc3AtYWMtbWFpbi1oZWFke3Bvc2l0aW9uOnJlbGF0aXZlO3RvcDowO2xlZnQ6MH0jc3AtYWMtc3Bhbi1pbmZve3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjFweDt0b3A6MDtmb250LXNpemU6MTBweDtsaW5lLWhlaWdodDoxMHB4O2JhY2tncm91bmQ6bm9uZTtmb250LXN0eWxlOml0YWxpYztjb2xvcjojNWE1YTVhO3RleHQtc2hhZG93OndoaXRlIDBweCAxcHggMXB4fSNzcC1hYy1jb250YWluZXIgaW5wdXR7dmVydGljYWwtYWxpZ246bWlkZGxlO2Rpc3BsYXk6aW5saW5lLWJsb2NrO291dGxpbmU6bm9uZTtoZWlnaHQ6YXV0bztwYWRkaW5nOjBweDttYXJnaW4tYm90dG9tOjBweDttYXJnaW4tdG9wOjBweH0jc3AtYWMtY29udGFpbmVyIGlucHV0W3R5cGU9Im51bWJlciJde3dpZHRoOjUwcHg7dGV4dC1hbGlnbjpsZWZ0fSNzcC1hYy1jb250YWluZXIgaW5wdXRbdHlwZT0iY2hlY2tib3giXXtib3JkZXI6MXB4IHNvbGlkICNCNEI0QjQ7cGFkZGluZzoxcHg7bWFyZ2luOjNweDt3aWR0aDoxM3B4O2hlaWdodDoxM3B4O2JhY2tncm91bmQ6bm9uZTtjdXJzb3I6cG9pbnRlcjt2aXNpYmlsaXR5OnZpc2libGU7cG9zaXRpb246c3RhdGljfSNzcC1hYy1jb250YWluZXIgaW5wdXRbdHlwZT0iYnV0dG9uIl17Ym9yZGVyOjFweCBzb2xpZCAjY2NjO2N1cnNvcjpwb2ludGVyO2JhY2tncm91bmQ6bm9uZTt3aWR0aDphdXRvO2hlaWdodDphdXRvfSNzcC1hYy1jb250YWluZXIgbGl7bGlzdC1zdHlsZTpub25lO21hcmdpbjozcHggMDtib3JkZXI6bm9uZTtmbG9hdDpub25lO2N1cnNvcjpkZWZhdWx0O30jc3AtYWMtY29udGFpbmVyIGZpZWxkc2V0e2JvcmRlcjoycHggZ3Jvb3ZlICNjY2M7LW1vei1ib3JkZXItcmFkaXVzOjNweDtib3JkZXItcmFkaXVzOjNweDtwYWRkaW5nOjRweCA5cHggNnB4IDlweDttYXJnaW46MnB4O2Rpc3BsYXk6YmxvY2s7d2lkdGg6YXV0bztoZWlnaHQ6YXV0b30jc3AtYWMtY29udGFpbmVyIGxlZ2VuZHtsaW5lLWhlaWdodDoyMHB4O21hcmdpbi1ib3R0b206MHB4fSNzcC1hYy1jb250YWluZXIgZmllbGRzZXQgPiB1bHtwYWRkaW5nOjA7bWFyZ2luOjB9I3NwLWFjLWNvbnRhaW5lciB1bCNzcC1hYy1hX3VzZWlmcmFtZS1leHRlbmR7cGFkZGluZy1sZWZ0OjQwcHh9I3NwLWFjLXJlY3R7cG9zaXRpb246cmVsYXRpdmU7dG9wOjA7bGVmdDowO2Zsb2F0OnJpZ2h0O2hlaWdodDoxMHB4O3dpZHRoOjEwcHg7cGFkZGluZzowO21hcmdpbjowOy1tb3otYm9yZGVyLXJhZGl1czozcHg7Ym9yZGVyLXJhZGl1czozcHg7Ym9yZGVyOjFweCBzb2xpZCB3aGl0ZTstd2Via2l0LWJveC1zaGFkb3c6aW5zZXQgMCA1cHggMCByZ2JhKDI1NSwyNTUsMjU1LDAuMyksMCAwIDNweCByZ2JhKDAsMCwwLDAuOCk7LW1vei1ib3gtc2hhZG93Omluc2V0IDAgNXB4IDAgcmdiYSgyNTUsMjU1LDI1NSwwLjMpLDAgMCAzcHggcmdiYSgwLDAsMCwwLjgpO2JveC1zaGFkb3c6aW5zZXQgMCA1cHggMCByZ2JhKDI1NSwyNTUsMjU1LDAuMyksMCAwIDNweCByZ2JhKDAsMCwwLDAuOCk7b3BhY2l0eTowLjh9I3NwLWFjLWRvdCwjc3AtYWMtY3VyLW1vZGV7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDo5OTk5O3dpZHRoOjVweDtoZWlnaHQ6NXB4O3BhZGRpbmc6MDstbW96LWJvcmRlci1yYWRpdXM6M3B4O2JvcmRlci1yYWRpdXM6M3B4O2JvcmRlcjoxcHggc29saWQgd2hpdGU7b3BhY2l0eToxOy13ZWJraXQtYm94LXNoYWRvdzppbnNldCAwIC0ycHggMXB4IHJnYmEoMCwwLDAsMC4zKSxpbnNldCAwIDJweCAxcHggcmdiYSgyNTUsMjU1LDI1NSwwLjMpLDBweCAxcHggMnB4IHJnYmEoMCwwLDAsMC45KTstbW96LWJveC1zaGFkb3c6aW5zZXQgMCAtMnB4IDFweCByZ2JhKDAsMCwwLDAuMyksaW5zZXQgMCAycHggMXB4IHJnYmEoMjU1LDI1NSwyNTUsMC4zKSwwcHggMXB4IDJweCByZ2JhKDAsMCwwLDAuOSk7Ym94LXNoYWRvdzppbnNldCAwIC0ycHggMXB4IHJnYmEoMCwwLDAsMC4zKSxpbnNldCAwIDJweCAxcHggcmdiYSgyNTUsMjU1LDI1NSwwLjMpLDBweCAxcHggMnB4IHJnYmEoMCwwLDAsMC45KX0jc3AtYWMtZG90e3JpZ2h0Oi0zcHg7dG9wOi0zcHh9I3NwLWFjLWN1ci1tb2Rle2xlZnQ6LTNweDt0b3A6LTNweDt3aWR0aDo2cHg7aGVpZ2h0OjZweH0jc3AtYWMtY29udGVudHtwYWRkaW5nOjA7bWFyZ2luOjBweDstbW96LWJvcmRlci1yYWRpdXM6M3B4O2JvcmRlci1yYWRpdXM6M3B4O2JvcmRlcjoxcHggc29saWQgI0EwQTBBMDstd2Via2l0LWJveC1zaGFkb3c6LTJweCAycHggNXB4IHJnYmEoMCwwLDAsMC4zKTstbW96LWJveC1zaGFkb3c6LTJweCAycHggNXB4IHJnYmEoMCwwLDAsMC4zKTtib3gtc2hhZG93Oi0ycHggMnB4IDVweCByZ2JhKDAsMCwwLDAuMyl9I3NwLWFjLW1haW57cGFkZGluZzo1cHg7Ym9yZGVyOjFweCBzb2xpZCB3aGl0ZTstbW96LWJvcmRlci1yYWRpdXM6M3B4O2JvcmRlci1yYWRpdXM6M3B4O2JhY2tncm91bmQtY29sb3I6I0YyRjJGNztiYWNrZ3JvdW5kOi1tb3otbGluZWFyLWdyYWRpZW50KHRvcCwjRkNGQ0ZDLCNGMkYyRjcgMTAwJSk7YmFja2dyb3VuZDotd2Via2l0LWdyYWRpZW50KGxpbmVhciwwIDAsMCAxMDAlLGZyb20oI0ZDRkNGQyksdG8oI0YyRjJGNykpfSNzcC1hYy1mb290e3Bvc2l0aW9uOnJlbGF0aXZlO2xlZnQ6MDtyaWdodDowO21pbi1oZWlnaHQ6MjBweH0jc3AtYWMtc2F2ZWJ1dHRvbntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDoycHh9I3NwLWFjLWNvbnRhaW5lciAuZW5kYnV0dG9ue21hcmdpbi10b3A6OHB4fSNzcC1hYy1jb250YWluZXIgLnNwLWFjLXNwYW5idXR0b257Ym9yZGVyOjFweCBzb2xpZCAjY2NjOy1tb3otYm9yZGVyLXJhZGl1czozcHg7Ym9yZGVyLXJhZGl1czozcHg7cGFkZGluZzoycHggM3B4O2N1cnNvcjpwb2ludGVyO2JhY2tncm91bmQtY29sb3I6I0Y5RjlGOTstd2Via2l0LWJveC1zaGFkb3c6aW5zZXQgMCAxMHB4IDVweCB3aGl0ZTstbW96LWJveC1zaGFkb3c6aW5zZXQgMCAxMHB4IDVweCB3aGl0ZTtib3gtc2hhZG93Omluc2V0IDAgMTBweCA1cHggd2hpdGV9I3NwLWFjLWNvbnRhaW5lciAuc3AtYWMtc3BhbmJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNERER9bGFiZWxbY2xhc3M9Im5ld0Z1bmMiXXtjb2xvcjpibHVlfScsCiAgICAgICAgICAgICAgICAgICAgICAgICJBQy1NRU5VX1BhZ2UiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIEF1dG9SZWZyZXNoKCk7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQoJ0FDLemHjeWumuWQkeiEmuacrOiuvue9ricsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLWNvbnRlbnQiKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRTZWFyY2hWYWx1ZSgpIHsKICAgICAgICAgICAgICAgICAgICBsZXQga3ZsID0gbG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKS5zcGxpdCgiJiIpOwogICAgICAgICAgICAgICAgICAgIGxldCBzZWFyY2hWID0gIiI7CiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGt2bC5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGt2bFtpXS5yZXBsYWNlKC9eKHdkfHF1ZXJ5fHEpPS8sICIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUgIT0ga3ZsW2ldKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaFYgPSB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyAgJysnIOeZvuW6puOAgeaQnOeLl+OAgeW/heW6lOOAgeiwt+atjOOAgeWlveaQnAogICAgICAgICAgICAgICAgICAgIHNlYXJjaFYgPSBzZWFyY2hWLnJlcGxhY2UoIisiLCAiICIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWFyY2hWOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZnVuY3Rpb24gcmFwaWREZWFsKCkgewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnNlcnRMb2NrZWQgPT0gZmFsc2UgJiYgY3VyU2l0ZS5TaXRlVHlwZUlEICE9IFNpdGVUeXBlLk9USEVSUykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0TG9ja2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluc2VydFNldHRpbmdNZW51KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaG93U2V0dGluZygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgQUNIYW5kbGUoKTsgLy8g5aSE55CG5Li76YeN5a6a5ZCRCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBdXRvUmVmcmVzaCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmlzQWRzRW5hYmxlKSB7IC8vIOaUvui/m+adpe+8jOWHj+WwkeWNoemhvwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUFEX2JhaWR1X3NvZ291KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQUNDb25maWcuQWRzU3R5bGVFbmFibGUpIHsgLy8g5Y2V54us5LiN6ZyA6KaB5a6a5pe25ZmoLemgu+e5geinpuWPkS3ovb3lhaVjc3MKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGU0JhaWR1KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQUNDb25maWcuaXNGYXZpY29uRW5hYmxlKSB7IC8vIOaYvuekumZhdmljb27lm77moIcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRGYXZpY29uKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY3VyU2l0ZS5GYXZpY29uVHlwZSkpOyAvLyDmt7vliqBGYXZpY29u5pi+56S6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQUNDb25maWcuZG9EaXNhYmxlU3VnKSB7IC8vIOS4jeWQr+eUqOenu+WKqOmihOa1i1vpu5jorqRdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNTZXRDb29raWUoIk9SSUdJTiIsIDIsICJ3d3cuYmFpZHUuY29tIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNTZXRDb29raWUoIklTU1ciLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY1NldENvb2tpZSgiSVNTVyIsIDEsICJ3d3cuYmFpZHUuY29tIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWQr+eUqOenu+WKqOmihOa1iy3kuI3nn6XpgZPkuLrku4DkuYjopoHorr7nva7kuKTkuKot55m+5bqm6Ieq5bex5Lya5Y+Y77yf77yM5Y+N5q2j5pyJ5pWI5p6cCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNTZXRDb29raWUoIk9SSUdJTiIsIDEsICJ3d3cuYmFpZHUuY29tIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNTZXRDb29raWUoIklTU1ciLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY1NldENvb2tpZSgiSVNTVyIsIDEsICJ3d3cuYmFpZHUuY29tIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQUNDb25maWcuaXNBZHNFbmFibGUpIHsgLy8g56e76Zmk55m+5bqm5bm/5ZGKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQURfYmFpZHVfc29nb3UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBQ0NvbmZpZy5pc0NvdW50ZXJFbmFibGUpIHsgLy8g5pi+56S66K6h5pWw5ZmoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ291bnRlcihkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGN1clNpdGUuQ291bnRlclR5cGUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEFDQ29uZmlnLmlzQmxvY2tFbmFibGUpeyAvLyDlkK/nlKjlsY/olL3lip/og70KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCbG9ja0JhaWR1LmluaXRTdHlsZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJsb2NrQmFpZHUuaW5pdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0TG9ja2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDApOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYWNTZXRDb29raWUoY25hbWUsIGN2YWx1ZSwgZG9tYWluLCBleGRheXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZXhkYXlzID0gZXhkYXlzIHx8IDMwOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZCA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvbWFpbiA9IChkb21haW4gPyAiZG9tYWluPSIgKyBkb21haW4gOiAiIikgKyAiOyI7CiAgICAgICAgICAgICAgICAgICAgICAgIGQuc2V0VGltZShkLmdldFRpbWUoKSArIChleGRheXMgKiAyNCAqIDYwICogNjAgKiAxMDAwKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleHBpcmVzID0gImV4cGlyZXM9IiArIGQudG9VVENTdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gY25hbWUgKyAiPSIgKyBjdmFsdWUgKyAiOyAiICsgZG9tYWluICsgZXhwaXJlcyArICI7cGF0aD0vIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gQXV0b0xvYWRDdXN0b21DU1MoKXsgLy8g5oyJ6ZSu6Kem5Y+RcmVsb2FkCiAgICAgICAgICAgICAgICAgICAgdmFyIGNzc1ZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLXVzZXJzdHlsZVRFWFQiKS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICBBQ19hZGRTdHlsZShjc3NWYWx1ZSwgIkFDLXVzZXJTdHlsZSIsICJoZWFkIiwgdHJ1ZSk7IC8vIOeUqOaIt+iHquWumuS5ieeahOagt+W8j+ihqAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldEJhaWR1SG9zdChzaXRldHBOb2RlKXsKICAgICAgICAgICAgICAgICAgICBpZihjdXJTaXRlLlNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuQkFJRFUpewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHJlZiA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNpdGV0cE5vZGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmID0gc2l0ZXRwTm9kZS5nZXRBdHRyaWJ1dGUoImhyZWYiKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGhyZWYgIT0gbnVsbCAmJiBocmVmLmluZGV4T2YoImJhaWR1LmNvbS9saW5rIikgPCAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOW3sue7j+ino+aekOWHuuadpeS6hgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldEhvc3QoaHJlZik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldEhvc3Qoc2l0ZXRwTm9kZS5pbm5lclRleHQgfHwgc2l0ZXRwTm9kZS50ZXh0Q29udGVudCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gQUNIYW5kbGUoKSB7CiAgICAgICAgICAgICAgICAgICAgLy8g5aSE55CG5Li76YeN5a6a5ZCRCiAgICAgICAgICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PSBTaXRlVHlwZS5PVEhFUlMpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBpZiAoQUNDb25maWcuaXNSZWRpcmVjdEVuYWJsZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VyU2l0ZS5TdHlwZV9Ob3JtYWwgIT0gbnVsbCAmJiBjdXJTaXRlLlN0eXBlX05vcm1hbCAhPSAiIil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDnmb7luqbmkJzni5fljrvph43lrprlkJEt5pmu6YCa5qih5byP44CQ5rOo5oSP5LiN6IO95Li6ZG9jdW1lbnQucXVlcnkuLuOAkQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRVUkxOb3JtYWwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjdXJTaXRlLlN0eXBlX05vcm1hbCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2hlY2tJU0JhaWR1TWFpbigpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuc19mb3JtIC5pbmRleC1sb2dvLXNyY1tzcmMqPSdnaWYnXSwgLnNfZm9ybSAuaW5kZXgtbG9nby1zcmNuZXdbc3JjKj0nZ2lmJ10iKS5mb3JFYWNoKGZ1bmN0aW9uIChwZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyLnNyYyA9ICJodHRwczovL3BpYy5ybWIuYmRzdGF0aWMuY29tL2M4NjI1NWU4MDI4Njk2MTM5ZDNlM2U0YmI0NGMwNDdiLnBuZyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOelnuWlh+eahOeZvuW6pueZvuWutuWPtwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2ltZ3NhLmJhaWR1LmNvbS9mZXgvcGljL2l0ZW0vODcxODM2N2FkYWI0NGFlZGNjOTFhYjJiYmUxYzg3MDFhMDhiZmIyNi5qcGcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9iYWlkdS5udGFvdy5jb20vbmV3Y3NzL2JhaWR1LnBuZwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuR09PR0xFKSByZW1vdmVPbk1vdXNlRG93bkZ1bmMoKTsgLy8g56e76Zmkb25Nb3VzZURvd27kuovku7bvvIzosLfmrYzljrvph43lrprlkJEKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PSBTaXRlVHlwZS5NQkFJRFUpIHJlbW92ZU1vYmlsZUJhaWR1RGlyZWN0TGluaygpOyAvLyDlpITnkIbnmb7luqbmiYvmnLrniYjmnKznmoTph43lrprlkJHlnLDlnYAKICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUmVkaXJlY3RMaW5rVGFyZ2V0KCk7IC8vIOWPquenu+mZpOefpeS5jueahOmHjeWumuWQkemXrumimCAmIOeZvuW6puWtpuacr+mHjeWumuWQkemXrumimAogICAgICAgICAgICAgICAgICAgICAgICBzYWZlUmVtb3ZlKCIucmVzX3RvcF9iYW5uZXIiKTsgLy8g56e76Zmk55m+5bqm5Y+v6IO95pi+56S655qE5Yqr5oyBCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB0cnl7IC8vIOaUvuWFpeW8guW4uOaNleiOt++8jOmYsuatoueUseS6jmh0bWzmj5LlhaXov4fmhaLlr7zoh7TnmoRqc+e7iOatogogICAgICAgICAgICAgICAgICAgICAgICBpZighIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1zdHlsZSIpLmNoZWNrZWQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiaW5wdXRbbmFtZSo9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfJ10iICkuZm9yRWFjaChwZXIgPT4ge3Blci5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgImRpc2FibGVkIik7cGVyLnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKCJ0aXRsZSIsICLor7flvIDlkK/oh6rlrprkuYnmoLflvI8iKX0pOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0W25hbWUqPSdzcC1hYy1hX2ZvcmNlX3N0eWxlXyddIiApLmZvckVhY2gocGVyID0+IHtwZXIucmVtb3ZlQXR0cmlidXRlKCJkaXNhYmxlZCIpO3Blci5wYXJlbnROb2RlLnNldEF0dHJpYnV0ZSgidGl0bGUiLCAiQUMt6Ieq5a6a5LmJ5qC35byP5YaF5a65Iil9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZighIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1ibG9jayIpLmNoZWNrZWQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiI3NwLWFjLXJlbW92ZUJsb2NrLCAjc3AtYWMtYmxvY2tCdG5EaXNwbGF5IiApLmZvckVhY2gocGVyID0+IHtwZXIuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsICJkaXNhYmxlZCIpO3Blci5wYXJlbnROb2RlLnNldEF0dHJpYnV0ZSgidGl0bGUiLCAi6K+35byA5ZCv6Ieq5a6a5LmJ5qC35byPIil9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIjc3AtYWMtcmVtb3ZlQmxvY2ssICNzcC1hYy1ibG9ja0J0bkRpc3BsYXkiICkuZm9yRWFjaChwZXIgPT4ge3Blci5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7cGVyLnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKCJ0aXRsZSIsICJBQy3oh6rkuLvmi6bmiKrlip/og70iKX0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfWNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEFDdG9nZ2xlU2V0dGluZ0Rpc3BsYXkoZSkgewogICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgLy8g5pi+56S677yf6ZqQ6JeP6K6+572u55WM6Z2iCiAgICAgICAgICAgICAgICAgICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmlmcmFtZS1mYXRoZXIgaWZyYW1lIikgPT0gbnVsbCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5pZnJhbWUtZmF0aGVyIikuaW5zZXJ0QWRqYWNlbnRIVE1MKCJiZWZvcmVlbmQiLCAiPGlmcmFtZSBzcmM9J2h0dHBzOi8vZ2hidG5zLmNvbS9naXRodWItYnRuLmh0bWw/dXNlcj1sYW5ncmVuMTM1MyZyZXBvPUdNX3NjcmlwdCZ0eXBlPXN0YXImY291bnQ9dHJ1ZScgZnJhbWVib3JkZXI9JzAnIHNjcm9sbGluZz0nMCcgc3R5bGU9J2hlaWdodDogMjBweDttYXgtd2lkdGg6IDEwOHB4O3BhZGRpbmctbGVmdDo1cHg7Ym94LXNpemluZzogYm9yZGVyLWJveDttYXJnaW4tYm90dG9tOiAtNXB4O2Rpc3BsYXk6dW5zZXQgIWltcG9ydGFudDsnPjwvaWZyYW1lPiIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1jb250ZW50Iikuc3R5bGUuZGlzcGxheSA9PSAnYmxvY2snKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY29udGVudCIpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQ0NvbmZpZy5vbGRWZXJzaW9uID0gR01faW5mby5zY3JpcHQudmVyc2lvbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdNLnNldFZhbHVlKCJDb25maWciLCBKU09OLnN0cmluZ2lmeShBQ0NvbmZpZykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmFjLW5ld3ZlcnNpb25EaXNwbGF5Iikuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1jb250ZW50Iikuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRCbG9ja0xpc3QoKXsgLy8g5ZCM5pe25aSE55CG6auY5LquCiAgICAgICAgICAgICAgICAgICAgbGV0IGluc0hUTUwgPSAiIjsKICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgQUNDb25maWcuVXNlckJsb2NrTGlzdC5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbnNDbGFzcyA9IENPTlNULmN1ckhvc3RzLmZpbmRJbmRleChtID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoQUNDb25maWcuVXNlckJsb2NrTGlzdFtpXS5yZXBsYWNlKCIqIiwgIi4qIikpLnRlc3QobSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Y2F0Y2goZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0gPT0gQUNDb25maWcuVXNlckJsb2NrTGlzdFtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSkgPj0gMCA/ICIgYWMtYmxvY2staGlnaCI6IiI7IC8vIOWmguaenOW9k+WJjemhtemdouWtmOWcqO+8jOWImemrmOS6rgogICAgICAgICAgICAgICAgICAgICAgICBpbnNIVE1MICs9IGA8bGk+PGxhYmVsIGNsYXNzPSJhYy1ibG9jay1pdGVtJHtpbnNDbGFzc30iIGRhdGEtaG9zdD0iJHtBQ0NvbmZpZy5Vc2VyQmxvY2tMaXN0W2ldfSI+JHtBQ0NvbmZpZy5Vc2VyQmxvY2tMaXN0W2ldfTwvbGFiZWw+PGxhYmVsIGNsYXNzPSJhYy1ibG9jay1pdGVtIGFjLWJsb2NrLWl0ZW1kZWwiIGRhdGEtaG9zdD0iJHtBQ0NvbmZpZy5Vc2VyQmxvY2tMaXN0W2ldfSI+eDwvbGFiZWw+PC9saT5cbmA7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnNIVE1MOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlbG9hZEJsb2NrTGlzdCgpewogICAgICAgICAgICAgICAgICAgIC8vIOWIneWni+WMluihqOagvOWGheWuueW5tue7keWumuaMiemSruS6i+S7tgogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5hYy1ibG9ja0xpc3QgdWwiKS5pbm5lckhUTUwgPSBnZXRCbG9ja0xpc3QoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBpbml0QmxvY2tQYWdlKCl7CiAgICAgICAgICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgICAgICAgICBpZih1c2VDTkxhbil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuc2V0dGluZy1zZWNvbmQiKS5pbm5lckhUTUwgPSBgPGxpIHN0eWxlPSdtYXJnaW4tYm90dG9tOiA4cHggIWltcG9ydGFudDsnPjxsYWJlbD48c3BhbiBpZD0nc3AtYWMtYmxvY2tkaXlidXR0b24tYmFjaycgY2xhc3M9J3NwLWFjLXNwYW5idXR0b24nIHRpdGxlPSfov5Tlm54nPjwt6L+U5ZuePC9zcGFuPjwvbGFiZWw+Jm5ic3A75oum5oiq5YiX6KGoJm5ic3A7Jm5ic3A75oOz6KaB55Sf5pWI55qE6K+d6ZyA6KaB5omL5Yqo5L+d5a2YPC9saT48bGkgY2xhc3M9J2FjLWJsb2NrTGlzdCcgc3R5bGU9J21heC1oZWlnaHQ6NjB2aDtvdmVyZmxvdy15OiBzY3JvbGw7Jz48dWw+JHtnZXRCbG9ja0xpc3QoKX08L3VsPjwvbGk+PGxpPuWFqOWMuemFjeaLpuaIqu+8mjxpbnB1dCBjbGFzcz0ic3AtYWMtYWRkUnVsZU9uZSIgc3R5bGU9J3dpZHRoOjU1JTsnPjxzcGFuIGlkPSdzcC1hYy1hZGRSdWxlYnV0dG9uJyBjbGFzcz0nc3AtYWMtc3BhbmJ1dHRvbiBlbmRidXR0b24nIHRpdGxlPSfmlrDlop4nIHN0eWxlPSdwb3NpdGlvbjogcmVsYXRpdmUgIWltcG9ydGFudDtsaW5lLWhlaWdodDogMTdweDsnPuaWsOWinjwvc3Bhbj48L2xpPmA7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnNldHRpbmctc2Vjb25kIikuaW5uZXJIVE1MID0gYDxsaSBzdHlsZT0nbWFyZ2luLWJvdHRvbTogOHB4ICFpbXBvcnRhbnQ7Jz48bGFiZWw+PHNwYW4gaWQ9J3NwLWFjLWJsb2NrZGl5YnV0dG9uLWJhY2snIGNsYXNzPSdzcC1hYy1zcGFuYnV0dG9uJyB0aXRsZT0nQmFjayc+PC1CYWNrPC9zcGFuPjwvbGFiZWw+Jm5ic3A7QmxvY2sgTGlzdCZuYnNwOyZuYnNwO0NsaWNrIFNhdmUgQnV0dG9uIGlmIHlvdSB3YW50IHdvIHNhdmUgdGhlIGxpc3Q8L2xpPjxsaSBjbGFzcz0nYWMtYmxvY2tMaXN0JyBzdHlsZT0nbWF4LWhlaWdodDo2MHZoO292ZXJmbG93LXk6IHNjcm9sbDsnPjx1bD4ke2dldEJsb2NrTGlzdCgpfTwvdWw+PC9saT48bGk+U2FtZSBob3N0IEluc2VydCDvvJo8aW5wdXQgY2xhc3M9InNwLWFjLWFkZFJ1bGVPbmUiIHN0eWxlPSd3aWR0aDo1NSU7Jz48c3BhbiBpZD0nc3AtYWMtYWRkUnVsZWJ1dHRvbicgY2xhc3M9J3NwLWFjLXNwYW5idXR0b24gZW5kYnV0dG9uJyB0aXRsZT0nSW5zZXJ0JyBzdHlsZT0ncG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7bGluZS1oZWlnaHQ6IDE3cHg7Jz5JbnNlcnQ8L3NwYW4+PC9saT5gOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1ibG9ja2RpeWJ1dHRvbi1iYWNrIikuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuc2V0dGluZy1tYWluIikuc3R5bGUgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5zZXR0aW5nLXNlY29uZCIpLnN0eWxlID0gImRpc3BsYXk6bm9uZTsiOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmFjLWJsb2NrTGlzdCIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOeCueWHu+enu+mZpOafkOS4qmhvc3TmlbDmja7ml7YKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXQgPSBlLnNyY0VsZW1lbnQgfHwgZS50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09ICJsYWJlbCIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBob3N0ID0gdGFyZ2V0LmRhdGFzZXQuaG9zdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQ0NvbmZpZy5Vc2VyQmxvY2tMaXN0LmFjcmVtb3ZlKGhvc3QsIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImJ1dHRvblthYy11c2VyLWFsdGVyXSIpLmZvckVhY2goZnVuY3Rpb24gKHBlck5vZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOenu+mZpOeUqOaIt2RpeeS5i+WQjueahOWxnuaApwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyTm9kZS5yZW1vdmVBdHRyaWJ1dGUoImFjLXVzZXItYWx0ZXIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJsb2NrQmFpZHUucmVuZGVyRGlzcGxheSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxvYWRCbG9ja0xpc3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNrQWRkUnVsZSgpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5omL5Yqo5aKe5Yqg56e76Zmk6KeE5YiZCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5wdXROID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnNwLWFjLWFkZFJ1bGVPbmUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFDQ29uZmlnLlVzZXJCbG9ja0xpc3QuYWNwdXNoKGlucHV0Ti52YWx1ZSwgcmVsb2FkQmxvY2tMaXN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0Ti52YWx1ZSA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1hZGRSdWxlYnV0dG9uIikuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBja0FkZFJ1bGUpOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuc3AtYWMtYWRkUnVsZU9uZSIpLmFkZEV2ZW50TGlzdGVuZXIoImtleXByZXNzIiwgZnVuY3Rpb24oZXZ0KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlID0gZXZ0IHx8IHdpbmRvdy5ldmVudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGUua2V5Q29kZSA9PSAxMykgY2tBZGRSdWxlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH1jYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBTaG93U2V0dGluZygpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09IFNpdGVUeXBlLk9USEVSUykgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOS4jeWtmOWcqOeahOivne+8jOmCo+S5iOiHquW3seWIm+W7uuS4gOS4qi1jb3B5IGZyb20gc3VwZXJQcmVsb2FkCiAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmJvZHkgIT0gbnVsbCAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY29udGFpbmVyIikgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIENvbnRhaW5lci5pZCA9ICJzcC1hYy1jb250YWluZXIiOwogICAgICAgICAgICAgICAgICAgICAgICBpZih1c2VDTkxhbil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb250YWluZXIuaW5uZXJIVE1MID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgIDxkaXYgaWQ9J3NwLWFjLWNvbnRlbnQnIHN0eWxlPSdkaXNwbGF5OiBub25lOyc+XG4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICA8ZGl2IGlkPSdzcC1hYy1tYWluJz5cbiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgIDxmaWVsZHNldCBpZD0nc3AtYWMtYXV0b3BhZ2VyLWZpZWxkJyBzdHlsZT0nZGlzcGxheTpibG9jazsnPlxuIiArCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICA8bGVnZW5kIGNsYXNzPSdpZnJhbWUtZmF0aGVyJyB0aXRsZT0nQUPph43lrprlkJHlip/og73nm7jlhbPorr7nva4nPjxhIGNsYXNzPSdsaW5raHJlZicgaHJlZj0naHR0cHM6Ly93d3cubnRhb3cuY29tL2Fib3V0c2NyaXB0Lmh0bWwnIHRhcmdldD0nX2JsYW5rJz5BQy3ph43lrprlkJHorr7nva4iICsgQmFpZHVWZXJzaW9uICsgIjwvYT48L2xlZ2VuZD5cbiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICA8dWwgY2xhc3M9J3NldHRpbmctbWFpbic+XG4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIDxsaT48bGFiZWwgdGl0bGU9J+mHjeWumuWQkeWKn+iDveeahOW8gOWQr+S4juWQpic+PGlucHV0IGlkPSdzcC1hYy1yZWRpcmVjdCcgbmFtZT0nc3AtYWMtYV9zZXBhcmF0b3InIHR5cGU9J2NoZWNrYm94JyAiICsgKEFDQ29uZmlnLmlzUmVkaXJlY3RFbmFibGUgPyAnY2hlY2tlZCcgOiAnJykgKyAiPuS4u+WKn+iDvS3ph43lrprlkJHlip/og708L2xhYmVsPlxuIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9J1VzaW5nIEVuZ2xpc2ggbGFuZ3VhZ2UgdG8gZGlzcGxheSc+PGlucHV0IGlkPSdzcC1hYy1pc0VuTGFuZycgbmFtZT0nc3AtYWMtYV9mb3JjZScgdHlwZT0nY2hlY2tib3gnICIgKyAoQUNDb25maWcuaXNFbkxhbmcgPyAnY2hlY2tlZCcgOiAnJykgKyAiPkVuLUxhbmd1YWdlPC9sYWJlbD48L2xpPlxuIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICA8bGk+PGxhYmVsIHRpdGxlPSfljrvpmaTpg6jliIbpobXpnaLnmoTlub/lkYrkv6Hmga/vvIzov5jkvaDkuIDkuKrlubLlh4DmlbTmtIHnmoTpobXpnaInID48aW5wdXQgaWQ9J3NwLWFjLWFkcycgbmFtZT0nc3AtYWMtYV9mb3JjZScgdHlwZT0nY2hlY2tib3gnICIgKyAoQUNDb25maWcuaXNBZHNFbmFibGUgPyAnY2hlY2tlZCcgOiAnJykgKyAiPumZhOWKoDEt5Y675bm/5ZGK5Yqf6IO9PC9sYWJlbD5cbiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSfoh6rliqjnv7vpobUnIGNsYXNzPSciKyhDT05TVC5oYXNOZXdGdW5jTmVlZERpc3BsYXkgPyAibmV3RnVuY0hpZ2hMaWdodCIgOiAiIikrIic+PGlucHV0IGlkPSdzcC1hYy1pc0F1dG9wYWdlJyBuYW1lPSdzcC1hYy1hX2ZvcmNlJyB0eXBlPSdjaGVja2JveCcgIiArIChBQ0NvbmZpZy5pc0F1dG9wYWdlID8gJ2NoZWNrZWQnIDogJycpICsgIj7oh6rliqjnv7vpobU8L2xhYmVsPjwvbGk+XG4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIDxsaT48bGFiZWwgdGl0bGU9J+eCueWHu+mhtemdomJsb2Nr5oyJ6ZKu5re75Yqg5L2g5oOz6KaB6ZqQ6JeP55qE5Zyw5Z2A77yM6ISa5pys5bCG6Ieq5Yqo6ZqQ6JeP6YOo5YiG57uT5p6c5Li65bCP5qiq5bmF77yMRElZ5oyJ6ZKu5Lit54K55Ye76KGo5qC85YaF5a655Y+v5Lul5Y+W5raI6ZqQ6JePJyA+PGlucHV0IGlkPSdzcC1hYy1ibG9jaycgbmFtZT0nc3AtYWMtYV9mb3JjZScgdHlwZT0nY2hlY2tib3gnICIgKyAoQUNDb25maWcuaXNCbG9ja0VuYWJsZSA/ICdjaGVja2VkJyA6ICcnKSArICI+6ZmE5YqgMi3oh6rkuLvmi6bmiKrln5/lkI08L2xhYmVsPiA8c3BhbiBpZD0nc3AtYWMtYmxvY2tkaXlidXR0b24nIGNsYXNzPSdzcC1hYy1zcGFuYnV0dG9uJyB0aXRsZT0n6Ieq5a6a5LmJQkxPQ0snIHN0eWxlPSdtYXJnaW4tbGVmdDogNXB4O2NvbG9yOiAjODg4ODg4Oyc+RElZPC9zcGFuPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgdGl0bGU9J+iHquWKqOenu+mZpOW3sue7j+Wxj+iUveeahOWfn+WQjScgaWQ9J3NwLWFjLXJlbW92ZUJsb2NrJyB0eXBlPSdjaGVja2JveCcgIiArIChBQ0NvbmZpZy5pc0Jsb2NrRGlzcGxheSA/ICdjaGVja2VkJyA6ICcnKSArICI+6Ieq5Yqo56e76ZmkPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IHRpdGxlPSfpmpDol4/mjolibG9ja+aMiemSrueahOaYvuekuicgaWQ9J3NwLWFjLWJsb2NrQnRuRGlzcGxheScgdHlwZT0nY2hlY2tib3gnICIgKyAoQUNDb25maWcuaXNCbG9ja0J0bkRpc3BsYXkgPyAnJyA6ICdjaGVja2VkJykgKyAiPumakOiXj+aMiemSrjwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICA8L2xpPlxuIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICA8bGk+PGxhYmVsIHRpdGxlPSdBQy3oh6rlrprkuYnmoLflvI8nPjxpbnB1dCBpZD0nc3AtYWMtc3R5bGUnIG5hbWU9J3NwLWFjLWFfZm9yY2UnIHR5cGU9J2NoZWNrYm94JyAiICsgKEFDQ29uZmlnLkFkc1N0eWxlRW5hYmxlID8gJ2NoZWNrZWQnIDogJycpICsgIj7pmYTliqAzLeiHquWumuS5ieagt+W8jzwvbGFiZWw+XG4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIDxsYWJlbD48L2xhYmVsPjwvbGk+XG4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIDxsaT4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKioqKi3nmb7luqbmoLflvI8tKioqKiovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICA8bGFiZWxNYWluIGNsYXNzPSdjb250YWluZXItbGFiZWwgYmFpZHUnPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbEhpZGU+5bGV5byA55m+5bqm6K6+572uJmd0OyZndDs8L2xhYmVsSGlkZT4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9J+eZvuW6pi3ljp/lp4vmqKHlvI8nIHN0eWxlPSdtYXJnaW4tbGVmdDoyMHB4Jz48aW5wdXQgbmFtZT0nc3AtYWMtYV9mb3JjZV9zdHlsZV9iYWlkdScgdmFsdWU9JzAnIHR5cGU9J3JhZGlvJyAiICsgKEFDQ29uZmlnLkFkc1N0eWxlTW9kZV9CYWlkdSA9PSAwID8gJ2NoZWNrZWQnIDogJycpICsgIj7nmb7luqYt5Y6f5aeL5qih5byPPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9J+eZvuW6pi3miqTnnLzmqKHlvI8nPjxpbnB1dCAgbmFtZT0nc3AtYWMtaHV5YW5fc3R5bGVfYmFpZHUnIHR5cGU9J2NoZWNrYm94JyAiICsgKEFDQ29uZmlnLkh1WWFuX0JhaWR1ID09IHRydWUgPyAnY2hlY2tlZCcgOiAnJykgKyAiPueZvuW6pi3miqTnnLzmqKHlvI88L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0n55m+5bqmTGl0Zeagt+W8jycgY2xhc3M9JyIrKENPTlNULmhhc05ld0Z1bmNOZWVkRGlzcGxheSA/ICJuZXdGdW5jSGlnaExpZ2h0IiA6ICIiKSsiJz48aW5wdXQgIG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHVsaXRlJyB0eXBlPSdjaGVja2JveCcgIiArIChBQ0NvbmZpZy5TdHlsZV9CYWlkdUxpdGUgPT0gdHJ1ZSA/ICdjaGVja2VkJyA6ICcnKSArICI+55m+5bqmTGl0Zeagt+W8jzwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPEJSLz48bGFiZWwgdGl0bGU9J+eZvuW6pi3ljZXliJfmma7pgJrmqKHlvI8nIHN0eWxlPSdtYXJnaW4tbGVmdDoyMHB4Jz48aW5wdXQgdGl0bGU9J+eZvuW6pi3ljZXliJfmma7pgJrmqKHlvI8nIG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHUnIHZhbHVlPScxJyAgdHlwZT0ncmFkaW8nICIgKyAoQUNDb25maWcuQWRzU3R5bGVNb2RlX0JhaWR1ID09IDEgPyAnY2hlY2tlZCcgOiAnJykgKyAiPuWNleWIlzwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSfnmb7luqYt5Y2V5YiX5bGF5LitJz48aW5wdXQgIG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHUnIHZhbHVlPScyJyAgdHlwZT0ncmFkaW8nICIgKyAoQUNDb25maWcuQWRzU3R5bGVNb2RlX0JhaWR1ID09IDIgPyAnY2hlY2tlZCcgOiAnJykgKyAiPuWNleWIl+WxheS4rTwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSflj4zliJcnPjxpbnB1dCBuYW1lPSdzcC1hYy1hX2ZvcmNlX3N0eWxlX2JhaWR1JyB2YWx1ZT0nMycgIHR5cGU9J3JhZGlvJyAiICsgKEFDQ29uZmlnLkFkc1N0eWxlTW9kZV9CYWlkdSA9PSAzID8gJ2NoZWNrZWQnIDogJycpICsgIj7lj4zliJc8L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0n5LiJ5YiXJz48aW5wdXQgbmFtZT0nc3AtYWMtYV9mb3JjZV9zdHlsZV9iYWlkdScgdmFsdWU9JzQnICB0eXBlPSdyYWRpbycgIiArIChBQ0NvbmZpZy5BZHNTdHlsZU1vZGVfQmFpZHUgPT0gNCA/ICdjaGVja2VkJyA6ICcnKSArICI+5LiJ5YiXPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9J+Wbm+WIlyc+PGlucHV0IG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHUnIHZhbHVlPSc1JyAgdHlwZT0ncmFkaW8nICIgKyAoQUNDb25maWcuQWRzU3R5bGVNb2RlX0JhaWR1ID09IDUgPyAnY2hlY2tlZCcgOiAnJykgKyAiPuWbm+WIlzwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICA8QlIvPjwvbGFiZWxNYWluPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqLeeZvuW6puagt+W8jy0qKioqKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSdoZWlnaHQ6IDFweDt3aWR0aDoyNjdweDttYXJnaW4tbGVmdDoyNXB4O2JhY2tncm91bmQtY29sb3I6I2Q4ZDhkODttYXJnaW4tdG9wOjFweDsnPjwvZGl2PiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqLeiwt+atjOagt+W8jy0qKioqKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgIDxsYWJlbE1haW4gY2xhc3M9J2NvbnRhaW5lci1sYWJlbCBnb29nbGUnPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbEhpZGU+5bGV5byA6LC35q2M6K6+572uJmd0OyZndDs8L2xhYmVsSGlkZT4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9J+iwt+atjC3ljp/lp4vmqKHlvI8nIHN0eWxlPSdtYXJnaW4tbGVmdDoyMHB4Jz48aW5wdXQgbmFtZT0nc3AtYWMtYV9mb3JjZV9zdHlsZV9nb29nbGUnIHZhbHVlPScwJyB0eXBlPSdyYWRpbycgIiArIChBQ0NvbmZpZy5BZHNTdHlsZU1vZGVfR29vZ2xlID09IDAgPyAnY2hlY2tlZCcgOiAnJykgKyAiPuiwt+atjC3ljp/lp4vmqKHlvI88L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0n6LC35q2MLeaKpOecvOaooeW8jyc+PGlucHV0ICBuYW1lPSdzcC1hYy1odXlhbl9zdHlsZV9nb29nbGUnIHR5cGU9J2NoZWNrYm94JyAiICsgKEFDQ29uZmlnLkh1WWFuX0dvb2dsZSA9PSB0cnVlID8gJ2NoZWNrZWQnIDogJycpICsgIj7osLfmrYwt5oqk55y85qih5byPPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9J+iwt+atjC3kvKroo4Xnmb7luqYnIHN0eWxlPSciKyhDT05TVC5oYXNOZXdGdW5jTmVlZERpc3BsYXkgPyAiY29sb3I6cmVkO2ZvbnQtd2VpZ2h0OiAxMDA7YmFja2dyb3VuZC1jb2xvcjogeWVsbG93O2ZvbnQtd2VpZ2h0OiA2MDA7IiA6ICIiKSsiJz48aW5wdXQgIG5hbWU9J3NwLWFjLWdvb2dsZV9pbl9iYWlkdW1vZGUnIHR5cGU9J2NoZWNrYm94JyAiICsgKEFDQ29uZmlnLmlzR29vbGVJbkJhaWR1TW9kZUVuYWJsZSA9PSB0cnVlID8gJ2NoZWNrZWQnIDogJycpICsgIj7osLfmrYwt5Lyq6KOF55m+5bqmPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8QlIvPjxsYWJlbCB0aXRsZT0n5Y2V5YiX5pmu6YCa5qih5byPJyBzdHlsZT0nbWFyZ2luLWxlZnQ6MjBweCc+PGlucHV0IHRpdGxlPSfosLfmrYwt5Y2V5YiX5pmu6YCa5qih5byPJyBuYW1lPSdzcC1hYy1hX2ZvcmNlX3N0eWxlX2dvb2dsZScgdmFsdWU9JzEnICB0eXBlPSdyYWRpbycgIiArIChBQ0NvbmZpZy5BZHNTdHlsZU1vZGVfR29vZ2xlID09IDEgPyAnY2hlY2tlZCcgOiAnJykgKyAiPuWNleWIlzwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSfosLfmrYwt5Y2V5YiX5bGF5LitJz48aW5wdXQgIG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfZ29vZ2xlJyB2YWx1ZT0nMicgIHR5cGU9J3JhZGlvJyAiICsgKEFDQ29uZmlnLkFkc1N0eWxlTW9kZV9Hb29nbGUgPT0gMiA/ICdjaGVja2VkJyA6ICcnKSArICI+5Y2V5YiX5bGF5LitPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9J+WPjOWIlyc+PGlucHV0ICBuYW1lPSdzcC1hYy1hX2ZvcmNlX3N0eWxlX2dvb2dsZScgdmFsdWU9JzMnICB0eXBlPSdyYWRpbycgIiArIChBQ0NvbmZpZy5BZHNTdHlsZU1vZGVfR29vZ2xlID09IDMgPyAnY2hlY2tlZCcgOiAnJykgKyAiPuWPjOWIlzwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSfkuInliJcnPjxpbnB1dCAgbmFtZT0nc3AtYWMtYV9mb3JjZV9zdHlsZV9nb29nbGUnIHZhbHVlPSc0JyAgdHlwZT0ncmFkaW8nICIgKyAoQUNDb25maWcuQWRzU3R5bGVNb2RlX0dvb2dsZSA9PSA0ID8gJ2NoZWNrZWQnIDogJycpICsgIj7kuInliJc8L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0n5Zub5YiXJz48aW5wdXQgIG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfZ29vZ2xlJyB2YWx1ZT0nNScgIHR5cGU9J3JhZGlvJyAiICsgKEFDQ29uZmlnLkFkc1N0eWxlTW9kZV9Hb29nbGUgPT0gNSA/ICdjaGVja2VkJyA6ICcnKSArICI+5Zub5YiXPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgIDxCUi8+PC9sYWJlbE1haW4+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqKiot6LC35q2M5qC35byPLSoqKioqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0naGVpZ2h0OiAxcHg7d2lkdGg6MjY3cHg7bWFyZ2luLWxlZnQ6MjVweDtiYWNrZ3JvdW5kLWNvbG9yOiNkOGQ4ZDg7bWFyZ2luLXRvcDoxcHg7Jz48L2Rpdj4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKioqKi3lv4XlupTmoLflvI8tKioqKiovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICA8bGFiZWxNYWluIGNsYXNzPSdjb250YWluZXItbGFiZWwgYmluZyc+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsSGlkZT7lsZXlvIDlv4XlupTorr7nva4mZ3Q7Jmd0OzwvbGFiZWxIaWRlPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0n5b+F5bqULeWOn+Wni+aooeW8jycgc3R5bGU9J21hcmdpbi1sZWZ0OjIwcHgnPjxpbnB1dCBuYW1lPSdzcC1hYy1hX2ZvcmNlX3N0eWxlX2JpbmcnIHZhbHVlPScwJyB0eXBlPSdyYWRpbycgIiArIChBQ0NvbmZpZy5BZHNTdHlsZU1vZGVfQmluZyA9PSAwID8gJ2NoZWNrZWQnIDogJycpICsgIj7lv4XlupQt5Y6f5aeL5qih5byPPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9J+W/heW6lC3miqTnnLzmqKHlvI8nPjxpbnB1dCBuYW1lPSdzcC1hYy1odXlhbl9zdHlsZV9iaW5nJyB0eXBlPSdjaGVja2JveCcgIiArIChBQ0NvbmZpZy5IdVlhbl9CaW5nID09IHRydWUgPyAnY2hlY2tlZCcgOiAnJykgKyAiPuW/heW6lC3miqTnnLzmqKHlvI88L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxCUi8+PGxhYmVsIHRpdGxlPSfljZXliJfmma7pgJrmqKHlvI8nIHN0eWxlPSdtYXJnaW4tbGVmdDoyMHB4Jz48aW5wdXQgdGl0bGU9J+W/heW6lC3ljZXliJfmma7pgJrmqKHlvI8nIG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfYmluZycgdmFsdWU9JzEnICB0eXBlPSdyYWRpbycgIiArIChBQ0NvbmZpZy5BZHNTdHlsZU1vZGVfQmluZyA9PSAxID8gJ2NoZWNrZWQnIDogJycpICsgIj7ljZXliJc8L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0n5b+F5bqULeWNleWIl+WxheS4rSc+PGlucHV0ICBuYW1lPSdzcC1hYy1hX2ZvcmNlX3N0eWxlX2JpbmcnIHZhbHVlPScyJyAgdHlwZT0ncmFkaW8nICIgKyAoQUNDb25maWcuQWRzU3R5bGVNb2RlX0JpbmcgPT0gMiA/ICdjaGVja2VkJyA6ICcnKSArICI+5Y2V5YiX5bGF5LitPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9J+WPjOWIlyc+PGlucHV0IG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfYmluZycgdmFsdWU9JzMnICB0eXBlPSdyYWRpbycgIiArIChBQ0NvbmZpZy5BZHNTdHlsZU1vZGVfQmluZyA9PSAzID8gJ2NoZWNrZWQnIDogJycpICsgIj7lj4zliJc8L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0n5LiJ5YiXJz48aW5wdXQgbmFtZT0nc3AtYWMtYV9mb3JjZV9zdHlsZV9iaW5nJyB2YWx1ZT0nNCcgIHR5cGU9J3JhZGlvJyAiICsgKEFDQ29uZmlnLkFkc1N0eWxlTW9kZV9CaW5nID09IDQgPyAnY2hlY2tlZCcgOiAnJykgKyAiPuS4ieWIlzwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSflm5vliJcnPjxpbnB1dCBuYW1lPSdzcC1hYy1hX2ZvcmNlX3N0eWxlX2JpbmcnIHZhbHVlPSc1JyAgdHlwZT0ncmFkaW8nICIgKyAoQUNDb25maWcuQWRzU3R5bGVNb2RlX0JpbmcgPT0gNSA/ICdjaGVja2VkJyA6ICcnKSArICI+5Zub5YiXPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgIDwvbGFiZWxNYWluPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqLeW/heW6lOagt+W8jy0qKioqKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9J2hlaWdodDogMXB4O3dpZHRoOjI2N3B4O21hcmdpbi1sZWZ0OjI1cHg7YmFja2dyb3VuZC1jb2xvcjojZDhkOGQ4O21hcmdpbi10b3A6MXB4Oyc+PC9kaXY+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqKiot5pCc54uX5qC35byPLSoqKioqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgPGxhYmVsTWFpbiBjbGFzcz0nY29udGFpbmVyLWxhYmVsIHNvZ291Jz4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWxIaWRlPuWxleW8gOaQnOeLl+iuvue9riZndDsmZ3Q7PC9sYWJlbEhpZGU+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSfmkJzni5ct5Y6f5aeL5qih5byPJyBzdHlsZT0nbWFyZ2luLWxlZnQ6MjBweCc+PGlucHV0IG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfc29nb3UnIHZhbHVlPScwJyB0eXBlPSdyYWRpbycgIiArIChBQ0NvbmZpZy5BZHNTdHlsZU1vZGVfU29Hb3UgPT0gMCA/ICdjaGVja2VkJyA6ICcnKSArICI+5pCc54uXLeWOn+Wni+aooeW8jzwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSfmkJzni5ct5oqk55y85qih5byPJz48aW5wdXQgbmFtZT0nc3AtYWMtaHV5YW5fc3R5bGVfc29nb3UnIHR5cGU9J2NoZWNrYm94JyAiICsgKEFDQ29uZmlnLkh1WWFuX1NvR291ID09IHRydWUgPyAnY2hlY2tlZCcgOiAnJykgKyAiPuaQnOeLly3miqTnnLzmqKHlvI88L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxCUi8+PGxhYmVsIHRpdGxlPSfljZXliJfmma7pgJrmqKHlvI8nIHN0eWxlPSdtYXJnaW4tbGVmdDoyMHB4Jz48aW5wdXQgdGl0bGU9J+aQnOeLly3ljZXliJfmma7pgJrmqKHlvI8nIG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfc29nb3UnIHZhbHVlPScxJyAgdHlwZT0ncmFkaW8nICIgKyAoQUNDb25maWcuQWRzU3R5bGVNb2RlX1NvR291ID09IDEgPyAnY2hlY2tlZCcgOiAnJykgKyAiPuWNleWIlzwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSfmkJzni5ct5Y2V5YiX5bGF5LitJz48aW5wdXQgIG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfc29nb3UnIHZhbHVlPScyJyAgdHlwZT0ncmFkaW8nICIgKyAoQUNDb25maWcuQWRzU3R5bGVNb2RlX1NvR291ID09IDIgPyAnY2hlY2tlZCcgOiAnJykgKyAiPuWNleWIl+WxheS4rTwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSflj4zliJcnPjxpbnB1dCBuYW1lPSdzcC1hYy1hX2ZvcmNlX3N0eWxlX3NvZ291JyB2YWx1ZT0nMycgIHR5cGU9J3JhZGlvJyAiICsgKEFDQ29uZmlnLkFkc1N0eWxlTW9kZV9Tb0dvdSA9PSAzID8gJ2NoZWNrZWQnIDogJycpICsgIj7lj4zliJc8L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0n5LiJ5YiXJz48aW5wdXQgbmFtZT0nc3AtYWMtYV9mb3JjZV9zdHlsZV9zb2dvdScgdmFsdWU9JzQnICB0eXBlPSdyYWRpbycgIiArIChBQ0NvbmZpZy5BZHNTdHlsZU1vZGVfU29Hb3UgPT0gNCA/ICdjaGVja2VkJyA6ICcnKSArICI+5LiJ5YiXPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9J+Wbm+WIlyc+PGlucHV0IG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfc29nb3UnIHZhbHVlPSc1JyAgdHlwZT0ncmFkaW8nICIgKyAoQUNDb25maWcuQWRzU3R5bGVNb2RlX1NvR291ID09IDUgPyAnY2hlY2tlZCcgOiAnJykgKyAiPuWbm+WIlzwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICA8L2xhYmVsTWFpbj4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKioqKi3mkJzni5fmoLflvI8tKioqKiovCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgPC9saT5cbiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgPGxpPjxsYWJlbCB0aXRsZT0n77yB6ZyA6KaB5Zyo6Ieq5a6a5LmJ5qC35byP5Lit5ZCv55So5oqk55y85qih5byPJz48aW5wdXQgdGl0bGU9J0FDLeiHquWumuS5ieaKpOecvCcgaWQ9J3NwLWFjLXVzZXJjb2xvcicgbmFtZT0nc3AtYWMtYV9mb3JjZScgdHlwZT0nY2hlY2tib3gnICIgKyAoQUNDb25maWcuaXNVc2VyQ29sb3JFbmFibGUgPyAnY2hlY2tlZCcgOiAnJykgKyAiPumZhOWKoDQt5oqk55y86aKc6Imy6YWN572uLeiHquWumuS5iTPkuK3pnIDlr7nlupTlvIDlkK88L2xhYmVsPjwvbGk+XG4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIDxsaT48bGFiZWwgY2xhc3M9J21lbnUtYm94LWNvbnRhaW5lcicgdGl0bGU9J++8gemcgOimgeWcqOiHquWumuS5ieagt+W8j+S4reWQr+eUqOaKpOecvOaooeW8jyc+PGxhYmVsIHN0eWxlPSdtYXJnaW4tbGVmdDoyMHB4Oyc+6buY6K6k5oqk55y86aKc6Imy77yaPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9J3NwLWFjLW1lbnVodXlhbkNvbG9yJyB0eXBlPSdjb2xvcicgdGl0bGU9J+iHquWumuS5ieeahOaKpOecvOminOiJsicgc3R5bGU9J2N1cnNvcjogcG9pbnRlcjttYXJnaW4tdG9wOi0wLjA1cmVtO2hlaWdodDoyM3B4OycgdmFsdWU9JyIgKyBBQ0NvbmZpZy5kZWZhdWx0SHVZYW5Db2xvciArICInPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0nbWVudS1ib3gtc21hbGwnIGRhdGEtY29sb3I9JyNERUYxRUYnIHN0eWxlPSdiYWNrZ3JvdW5kLWNvbG9yOiNERUYxRUY7Jz4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDs8L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0nbWVudS1ib3gtc21hbGwnIGRhdGEtY29sb3I9JyNGM0YyRUUnIHN0eWxlPSdiYWNrZ3JvdW5kLWNvbG9yOiNGM0YyRUU7Jz4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDs8L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0nbWVudS1ib3gtc21hbGwnIGRhdGEtY29sb3I9JyNFNUU1RTUnIHN0eWxlPSdiYWNrZ3JvdW5kLWNvbG9yOiNFNUU1RTU7Jz4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDs8L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0nbGlua2hyZWYnIGRhdGEtaHJlZj0naHR0cHM6Ly93d3cubnRhb3cuY29tL2NvbG9ycGlja2VyLmh0bWwnICBzdHlsZT0nY3Vyc29yOnBvaW50ZXI7bWFyZ2luLXJpZ2h0OiAxMHB4Oycgb25jbGljaz0nd2luZG93Lm9wZW4odGhpcy5kYXRhc2V0LmhyZWYpJz7mm7TlpJrpopzoibLpgInmi6k8L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgPC9sYWJlbD48L2xpPlxuIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICA8bGk+PGxhYmVsPjxpbnB1dCB0aXRsZT0nQUMt5re75YqgRmF2aWNvbicgaWQ9J3NwLWFjLWZhdmljb24nIG5hbWU9J3NwLWFjLWFfZm9yY2UnIHR5cGU9J2NoZWNrYm94JyAiICsgKEFDQ29uZmlnLmlzRmF2aWNvbkVuYWJsZSA/ICdjaGVja2VkJyA6ICcnKSArICI+6ZmE5YqgNS1GYXZpY29u5Yqf6IO9PC9sYWJlbD48L2xpPlxuIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICA8bGk+PGxhYmVsPjxsYWJlbCBzdHlsZT0nbWFyZ2luLWxlZnQ6MjBweDsnPkZhdmljb27pu5jorqTlm77moIfvvJo8L2xhYmVsPjxpbnB1dCBpZD0nc3AtYWMtZmF2aWNvblVybCcgbmFtZT0nc3AtYWMtYV9mb3JjZScgdmFsdWU9JyIgKyBBQ0NvbmZpZy5kZWZhdWx0RmF2aWNvblVybCArICInIHN0eWxlPSd3aWR0aDo1NSU7bWFyZ2luLXRvcDotMC4zZW07JyB0eXBlPSdpbnB1dCcgIiArIChBQ0NvbmZpZy5pc0Zhdmljb25FbmFibGUgPyAnJyA6ICdkaXNhYmxlZD10cnVlJykgKyAiPjwvbGFiZWw+PC9saT5cbiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgPGxpPjxsYWJlbD48aW5wdXQgdGl0bGU9J0FDLeenu+mZpOaQnOe0oumihOa1iycgaWQ9J3NwLWFjLXN1Z19vcmlnaW4nIG5hbWU9J3NwLWFjLWFfZm9yY2UnIHR5cGU9J2NoZWNrYm94JyAiICsgKEFDQ29uZmlnLmRvRGlzYWJsZVN1ZyA/ICdjaGVja2VkJyA6ICcnKSArICI+6ZmE5YqgNi3np7vpmaTnmb7luqbmkJzntKLpooTmtYso5paH5a2X6Ieq5Yqo5pCc57SiKTwvbGFiZWw+PC9saT5cbiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOacieabtOaWsC3pq5jkuq4gPGxhYmVsIHN0eWxlPScnPiB8fCAgc3R5bGU9JyIrKENPTlNULmhhc05ld0Z1bmNOZWVkRGlzcGxheT8iY29sb3I6cmVkO2ZvbnQtd2VpZ2h0OiAxMDA7YmFja2dyb3VuZC1jb2xvcjogeWVsbG93O2ZvbnQtd2VpZ2h0OiA2MDA7IjoiIikrIicKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIDxsaT48bGFiZWw+PGlucHV0IHRpdGxlPSdBQy3mmL7npLrlj7PkvqfmoI8nIGlkPSdzcC1hYy1yaWdodCcgdHlwZT0nY2hlY2tib3gnICIgKyAoQUNDb25maWcuaXNSaWdodERpc3BsYXlFbmFibGUgPyAnY2hlY2tlZCcgOiAnJykgKyAiPumZhOWKoDct5pi+56S65Y+z5L6n5qCPPC9sYWJlbD48bGFiZWw+PGlucHV0IHRpdGxlPSdBQy3mt7vliqDnvJblj7cnIGlkPSdzcC1hYy1jb3VudGVyJyBuYW1lPSdzcC1hYy1hX2ZvcmNlJyB0eXBlPSdjaGVja2JveCcgIiArIChBQ0NvbmZpZy5pc0NvdW50ZXJFbmFibGUgPyAnY2hlY2tlZCcgOiAnJykgKyAiPumZhOWKoDgt57yW5Y+35Yqf6IO9PC9sYWJlbD48bGFiZWw+PGlucHV0IHRpdGxlPSdBQy3mloflrZfkuIvliJLnur8nIGlkPSdzcC1hYy1hbGluZScgbmFtZT0nc3AtYWMtYV9mb3JjZScgdHlwZT0nY2hlY2tib3gnICIgKyAoQUNDb25maWcuaXNBTGluZUVuYWJsZSA/ICdjaGVja2VkJyA6ICcnKSArICI+6ZmE5YqgOS3mloflrZfkuIvliJLnur88L2xhYmVsPjwvbGk+XG4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIDxsaT48bGFiZWw+PGlucHV0IHRpdGxlPSdBQy3oh6rlrprkuYnmoLflvI8nIGlkPSdzcC1hYy11c2Vyc3R5bGUnIG5hbWU9J3NwLWFjLWFfZm9yY2UnIHR5cGU9J2NoZWNrYm94JyAiICsgKEFDQ29uZmlnLmlzVXNlclN0eWxlRW5hYmxlID8gJ2NoZWNrZWQnIDogJycpICsgIj7pmYTliqAxMC3oh6rlrprkuYnmoLflvI88L2xhYmVsPjwvbGk+XG4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIDxsaT48dGV4dGFyZWEgIGlkPSdzcC1hYy11c2Vyc3R5bGVURVhUJyBuYW1lPSdzcC1hYy1hX2ZvcmNlJyB2YWx1ZT0n6L+Z5Liq5piv55So5oi36Ieq5a6a5LmJ5qC35byPJyBzdHlsZT0nd2lkdGg6ODUlO2hlaWdodDogNjZweDttYXJnaW4tbGVmdDozMHB4OycgdHlwZT0naW5wdXQnPiIgKyBBQ0NvbmZpZy5Vc2VyU3R5bGVUZXh0ICsgIjwvdGV4dGFyZWE+PC9sYWJlbD48L2xpPlxuIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICA8bGk+PGEgY2xhc3M9J2xpbmtocmVmJyB0YXJnZXQ9J19ibGFuaycgaHJlZj0naHR0cHM6Ly9xbS5xcS5jb20vY2dpLWJpbi9xbS9xcj9rPWZPZzhpajZUdXdPQWZTOGcxNkdSWU5mNVlZRnU1Q3J3Jmp1bXBfZnJvbT0mYXV0aD0tbDA1cGFhc3JQZTV6aWd0NWFoZHpuX2R6WGlCMWpKXycgPuiBlOezu+S9nOiAhSzmj5Dlu7rorq4s5a+75rGC5biu5YqpLOiHquWumuS5ieagt+W8jyzohJrmnKzlrprliLbngrnmiJE8L2E+PC9saT4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgPC91bD4iICsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgIDx1bCBjbGFzcz0nc2V0dGluZy1zZWNvbmQnIHN0eWxlPSdkaXNwbGF5Om5vbmUnPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICA8L3VsPiIrCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICA8c3BhbiBpZD0nc3AtYWMtY2FuY2VsYnV0dG9uJyBjbGFzcz0nc3AtYWMtc3BhbmJ1dHRvbiBlbmRidXR0b24nIHRpdGxlPSflj5bmtognIHN0eWxlPSdwb3NpdGlvbjogcmVsYXRpdmU7ZmxvYXQ6IGxlZnQ7Jz7lj5bmtog8L3NwYW4+XG4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgPHNwYW4gaWQ9J3NwLWFjLXNhdmVidXR0b24nIGNsYXNzPSdzcC1hYy1zcGFuYnV0dG9uIGVuZGJ1dHRvbicgdGl0bGU9J+S/neWtmOiuvue9ricgc3R5bGU9J3Bvc2l0aW9uOiByZWxhdGl2ZTtmbG9hdDogcmlnaHQ7Jz7kv53lrZg8L3NwYW4+XG4iICsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgPC9maWVsZHNldD5cbiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgIDwvZGl2PlxuIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICA8L2Rpdj4iOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnRhaW5lci5pbm5lckhUTUwgPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgPGRpdiBpZD0nc3AtYWMtY29udGVudCcgc3R5bGU9J2Rpc3BsYXk6IG5vbmU7Jz5cbiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgIDxkaXYgaWQ9J3NwLWFjLW1haW4nPlxuIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgPGZpZWxkc2V0IGlkPSdzcC1hYy1hdXRvcGFnZXItZmllbGQnIHN0eWxlPSdkaXNwbGF5OmJsb2NrOyc+XG4iICsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgIDxsZWdlbmQgY2xhc3M9J2lmcmFtZS1mYXRoZXInIHRpdGxlPSdBQyBSZWRpcmVjdCBTZXR0aW5ncyc+PGEgY2xhc3M9J2xpbmtocmVmJyBocmVmPSdodHRwczovL3d3dy5udGFvdy5jb20vYWJvdXRzY3JpcHQuaHRtbCcgdGFyZ2V0PSdfYmxhbmsnPkFDLVJlZGlyZWN0IFNldHRpbmdzIiArIEJhaWR1VmVyc2lvbiArICI8L2E+PC9sZWdlbmQ+XG4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgPHVsIGNsYXNzPSdzZXR0aW5nLW1haW4nPlxuIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICA8bGk+PGxhYmVsIHRpdGxlPSdUdXJuIG9uIG9yIG9mZiByZWRpcmVjdCc+PGlucHV0IGlkPSdzcC1hYy1yZWRpcmVjdCcgbmFtZT0nc3AtYWMtYV9zZXBhcmF0b3InIHR5cGU9J2NoZWNrYm94JyAiICsgKEFDQ29uZmlnLmlzUmVkaXJlY3RFbmFibGUgPyAnY2hlY2tlZCcgOiAnJykgKyAiPk1haW4tUmVkaXJlY3QgRnVuYzwvbGFiZWw+XG4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0n5L2/55So6Iux5paH5pi+56S66aG16Z2iJz48aW5wdXQgaWQ9J3NwLWFjLWlzRW5MYW5nJyBuYW1lPSdzcC1hYy1hX2ZvcmNlJyB0eXBlPSdjaGVja2JveCcgIiArIChBQ0NvbmZpZy5pc0VuTGFuZyA/ICdjaGVja2VkJyA6ICcnKSArICI+5L2/55So6Iux5paHPC9sYWJlbD48L2xpPlxuIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICA8bGk+PGxhYmVsIHRpdGxlPSdSZW1vdmUgdGhlIGFkcyBvbiB0aGUgcGFnZSwgYW5kIHJldHVybiB5b3UgYSBjbGVhbiBwYWdlJyA+PGlucHV0IGlkPSdzcC1hYy1hZHMnIG5hbWU9J3NwLWFjLWFfZm9yY2UnIHR5cGU9J2NoZWNrYm94JyAiICsgKEFDQ29uZmlnLmlzQWRzRW5hYmxlID8gJ2NoZWNrZWQnIDogJycpICsgIj5BZGQxLVJlbW92ZSBBZHM8L2xhYmVsPlxuIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9J0F1dG8gbG9hZCBuZXh0IHBhZ2UnPjxpbnB1dCBpZD0nc3AtYWMtaXNBdXRvcGFnZScgbmFtZT0nc3AtYWMtYV9mb3JjZScgdHlwZT0nY2hlY2tib3gnICIgKyAoQUNDb25maWcuaXNBdXRvcGFnZSA/ICdjaGVja2VkJyA6ICcnKSArICI+QXV0byBQYWdlPC9sYWJlbD48L2xpPlxuIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICA8bGk+PGxhYmVsIHRpdGxlPSdDbGljayB0aGUgXCdCbG9ja1wnIGJ1dHRvbiB0byBhZGQgdGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gaGlkZS4gVGhlIHNjcmlwdCB3aWxsIGhpZGUgaXQgd2l0aCBzbWFsbCBiYW5uZXIgYXV0b21hdGljYWxseS4gXCdESVlcJyBidXR0b24gZm9yIGVkaXR0aW5nIHRoZSBoaWRpbmcgbGlzdCcgY2xhc3M9JyIrKENPTlNULmhhc05ld0Z1bmNOZWVkRGlzcGxheSA/ICJuZXdGdW5jSGlnaExpZ2h0IiA6ICIiKSsiJyA+PGlucHV0IGlkPSdzcC1hYy1ibG9jaycgbmFtZT0nc3AtYWMtYV9mb3JjZScgdHlwZT0nY2hlY2tib3gnICIgKyAoQUNDb25maWcuaXNCbG9ja0VuYWJsZSA/ICdjaGVja2VkJyA6ICcnKSArICI+QWRkMi1CbG9jayBob3N0PC9sYWJlbD4gPHNwYW4gaWQ9J3NwLWFjLWJsb2NrZGl5YnV0dG9uJyBjbGFzcz0nc3AtYWMtc3BhbmJ1dHRvbicgdGl0bGU9J0VkaXQgQkxPQ0snIHN0eWxlPSdtYXJnaW4tbGVmdDogNXB4O2NvbG9yOiAjODg4ODg4Oyc+RElZPC9zcGFuPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgdGl0bGU9J3JlbW92ZSB0aGUgYmxvY2sgcmVzdWx0cyBhdXRvbWF0aWNhbGx5JyBpZD0nc3AtYWMtcmVtb3ZlQmxvY2snIHR5cGU9J2NoZWNrYm94JyAiICsgKEFDQ29uZmlnLmlzQmxvY2tEaXNwbGF5ID8gJ2NoZWNrZWQnIDogJycpICsgIj5BdXRvIHJlbW92ZTwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCB0aXRsZT0naGlkZSB0aGUgXCdCbG9ja1wnIGJ1dHRvbicgaWQ9J3NwLWFjLWJsb2NrQnRuRGlzcGxheScgdHlwZT0nY2hlY2tib3gnICIgKyAoQUNDb25maWcuaXNCbG9ja0J0bkRpc3BsYXkgPyAnJyA6ICdjaGVja2VkJykgKyAiPkhpZGUgXCdCbG9ja1wnIGJ1dHRvbjwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICA8L2xpPlxuIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICA8bGk+PGxhYmVsIHRpdGxlPSdBQy1DdXN0b21TdHlsZSc+PGlucHV0IGlkPSdzcC1hYy1zdHlsZScgbmFtZT0nc3AtYWMtYV9mb3JjZScgdHlwZT0nY2hlY2tib3gnICIgKyAoQUNDb25maWcuQWRzU3R5bGVFbmFibGUgPyAnY2hlY2tlZCcgOiAnJykgKyAiPkFkZDMtQ3VzdG9tU3R5bGU8L2xhYmVsPlxuIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICA8bGFiZWw+PC9sYWJlbD48L2xpPlxuIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICA8bGk+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqKiot55m+5bqm5qC35byPLSoqKioqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgPGxhYmVsTWFpbiBjbGFzcz0nY29udGFpbmVyLWxhYmVsIGJhaWR1Jz4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWxIaWRlPkV4cGFuZCBCYWlkdSBTZXR0aW5ncyZndDsmZ3Q7PC9sYWJlbEhpZGU+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSdCYWlkdS1PcmlnaW4nIHN0eWxlPSdtYXJnaW4tbGVmdDoyMHB4Jz48aW5wdXQgbmFtZT0nc3AtYWMtYV9mb3JjZV9zdHlsZV9iYWlkdScgdmFsdWU9JzAnIHR5cGU9J3JhZGlvJyAiICsgKEFDQ29uZmlnLkFkc1N0eWxlTW9kZV9CYWlkdSA9PSAwID8gJ2NoZWNrZWQnIDogJycpICsgIj5CYWlkdS1PcmlnaW48L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0nQmFpZHUtRXllU2F2ZSc+PGlucHV0ICBuYW1lPSdzcC1hYy1odXlhbl9zdHlsZV9iYWlkdScgdHlwZT0nY2hlY2tib3gnICIgKyAoQUNDb25maWcuSHVZYW5fQmFpZHUgPT0gdHJ1ZSA/ICdjaGVja2VkJyA6ICcnKSArICI+QmFpZHUtRXllU2F2ZTwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSdCYWlkdUxpdGVTdHlsZScgY2xhc3M9JyIrKENPTlNULmhhc05ld0Z1bmNOZWVkRGlzcGxheSA/ICJuZXdGdW5jSGlnaExpZ2h0IiA6ICIiKSsiJz48aW5wdXQgIG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHVsaXRlJyB0eXBlPSdjaGVja2JveCcgIiArIChBQ0NvbmZpZy5TdHlsZV9CYWlkdUxpdGUgPT0gdHJ1ZSA/ICdjaGVja2VkJyA6ICcnKSArICI+QmFpZHVMaXRlU3R5bGU8L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxCUi8+PGxhYmVsIHRpdGxlPSdCYWlkdS1TaW5nbGVSb3cnIHN0eWxlPSdtYXJnaW4tbGVmdDoyMHB4Jz48aW5wdXQgdGl0bGU9J0JhaWR1LVNpbmdsZVJvd01vZGUnIG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHUnIHZhbHVlPScxJyAgdHlwZT0ncmFkaW8nICIgKyAoQUNDb25maWcuQWRzU3R5bGVNb2RlX0JhaWR1ID09IDEgPyAnY2hlY2tlZCcgOiAnJykgKyAiPlNpbmdsZVJvdzwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSdCYWlkdS1TaW5nbGVDZW50ZXInPjxpbnB1dCAgbmFtZT0nc3AtYWMtYV9mb3JjZV9zdHlsZV9iYWlkdScgdmFsdWU9JzInICB0eXBlPSdyYWRpbycgIiArIChBQ0NvbmZpZy5BZHNTdHlsZU1vZGVfQmFpZHUgPT0gMiA/ICdjaGVja2VkJyA6ICcnKSArICI+U2luZ2xlQ2VudGVyPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9J0JhaWR1LVR3b1Jvd3NDZW50ZXInPjxpbnB1dCBuYW1lPSdzcC1hYy1hX2ZvcmNlX3N0eWxlX2JhaWR1JyB2YWx1ZT0nMycgIHR5cGU9J3JhZGlvJyAiICsgKEFDQ29uZmlnLkFkc1N0eWxlTW9kZV9CYWlkdSA9PSAzID8gJ2NoZWNrZWQnIDogJycpICsgIj5Ud288L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0nQmFpZHUtVGhyZWVSb3dzQ2VudGVyJz48aW5wdXQgbmFtZT0nc3AtYWMtYV9mb3JjZV9zdHlsZV9iYWlkdScgdmFsdWU9JzQnICB0eXBlPSdyYWRpbycgIiArIChBQ0NvbmZpZy5BZHNTdHlsZU1vZGVfQmFpZHUgPT0gNCA/ICdjaGVja2VkJyA6ICcnKSArICI+VGhyZWU8L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0nQmFpZHUtRm91clJvd3NDZW50ZXInPjxpbnB1dCBuYW1lPSdzcC1hYy1hX2ZvcmNlX3N0eWxlX2JhaWR1JyB2YWx1ZT0nNScgIHR5cGU9J3JhZGlvJyAiICsgKEFDQ29uZmlnLkFkc1N0eWxlTW9kZV9CYWlkdSA9PSA1ID8gJ2NoZWNrZWQnIDogJycpICsgIj5Gb3VyPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgIDxCUi8+PC9sYWJlbE1haW4+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqKiot55m+5bqm5qC35byPLSoqKioqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9J2hlaWdodDogMXB4O3dpZHRoOjI2N3B4O21hcmdpbi1sZWZ0OjI1cHg7YmFja2dyb3VuZC1jb2xvcjojZDhkOGQ4O21hcmdpbi10b3A6MXB4Oyc+PC9kaXY+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqKiot6LC35q2M5qC35byPLSoqKioqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgPGxhYmVsTWFpbiBjbGFzcz0nY29udGFpbmVyLWxhYmVsIGdvb2dsZSc+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsSGlkZT5FeHBhbmQgR29vZ2xlIFNldHRpbmdzJmd0OyZndDs8L2xhYmVsSGlkZT4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9J0dvb2dsZS1PcmlnaW4nIHN0eWxlPSdtYXJnaW4tbGVmdDoyMHB4Jz48aW5wdXQgbmFtZT0nc3AtYWMtYV9mb3JjZV9zdHlsZV9nb29nbGUnIHZhbHVlPScwJyB0eXBlPSdyYWRpbycgIiArIChBQ0NvbmZpZy5BZHNTdHlsZU1vZGVfR29vZ2xlID09IDAgPyAnY2hlY2tlZCcgOiAnJykgKyAiPkdvb2dsZS1PcmlnaW48L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0nR29vZ2xlLUV5ZVNhdmUnPjxpbnB1dCAgbmFtZT0nc3AtYWMtaHV5YW5fc3R5bGVfZ29vZ2xlJyB0eXBlPSdjaGVja2JveCcgIiArIChBQ0NvbmZpZy5IdVlhbl9Hb29nbGUgPT0gdHJ1ZSA/ICdjaGVja2VkJyA6ICcnKSArICI+R29vZ2xlLUV5ZVNhdmU8L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0nR29vZ2xlLWFzIEJhaWR1JyBzdHlsZT0nIisoQ09OU1QuaGFzTmV3RnVuY05lZWREaXNwbGF5ID8gImNvbG9yOnJlZDtmb250LXdlaWdodDogMTAwO2JhY2tncm91bmQtY29sb3I6IHllbGxvdztmb250LXdlaWdodDogNjAwOyIgOiAiIikrIic+PGlucHV0ICBuYW1lPSdzcC1hYy1nb29nbGVfaW5fYmFpZHVtb2RlJyB0eXBlPSdjaGVja2JveCcgIiArIChBQ0NvbmZpZy5pc0dvb2xlSW5CYWlkdU1vZGVFbmFibGUgPT0gdHJ1ZSA/ICdjaGVja2VkJyA6ICcnKSArICI+RmFrZSBCYWlkdTwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPEJSLz48bGFiZWwgdGl0bGU9J0dvb2dsZS1TaW5nbGVSb3cnIHN0eWxlPSdtYXJnaW4tbGVmdDoyMHB4Jz48aW5wdXQgdGl0bGU9J0dvb2dsZS1TaW5nbGVSb3dNb2RlJyBuYW1lPSdzcC1hYy1hX2ZvcmNlX3N0eWxlX2dvb2dsZScgdmFsdWU9JzEnICB0eXBlPSdyYWRpbycgIiArIChBQ0NvbmZpZy5BZHNTdHlsZU1vZGVfR29vZ2xlID09IDEgPyAnY2hlY2tlZCcgOiAnJykgKyAiPlNpbmdsZVJvdzwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSdHb29nbGUtU2luZ2xlQ2VudGVyJz48aW5wdXQgIG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfZ29vZ2xlJyB2YWx1ZT0nMicgIHR5cGU9J3JhZGlvJyAiICsgKEFDQ29uZmlnLkFkc1N0eWxlTW9kZV9Hb29nbGUgPT0gMiA/ICdjaGVja2VkJyA6ICcnKSArICI+U2luZ2xlQ2VudGVyPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9J0dvb2dsZS1Ud29Sb3dzQ2VudGVyJz48aW5wdXQgIG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfZ29vZ2xlJyB2YWx1ZT0nMycgIHR5cGU9J3JhZGlvJyAiICsgKEFDQ29uZmlnLkFkc1N0eWxlTW9kZV9Hb29nbGUgPT0gMyA/ICdjaGVja2VkJyA6ICcnKSArICI+VHdvPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9J0dvb2dsZS1UaHJlZVJvd3NDZW50ZXInPjxpbnB1dCAgbmFtZT0nc3AtYWMtYV9mb3JjZV9zdHlsZV9nb29nbGUnIHZhbHVlPSc0JyAgdHlwZT0ncmFkaW8nICIgKyAoQUNDb25maWcuQWRzU3R5bGVNb2RlX0dvb2dsZSA9PSA0ID8gJ2NoZWNrZWQnIDogJycpICsgIj5UaHJlZTwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSdHb29nbGUtRm91clJvd3NDZW50ZXInPjxpbnB1dCAgbmFtZT0nc3AtYWMtYV9mb3JjZV9zdHlsZV9nb29nbGUnIHZhbHVlPSc1JyAgdHlwZT0ncmFkaW8nICIgKyAoQUNDb25maWcuQWRzU3R5bGVNb2RlX0dvb2dsZSA9PSA1ID8gJ2NoZWNrZWQnIDogJycpICsgIj5Gb3VyPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgIDxCUi8+PC9sYWJlbE1haW4+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqKiot6LC35q2M5qC35byPLSoqKioqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0naGVpZ2h0OiAxcHg7d2lkdGg6MjY3cHg7bWFyZ2luLWxlZnQ6MjVweDtiYWNrZ3JvdW5kLWNvbG9yOiNkOGQ4ZDg7bWFyZ2luLXRvcDoxcHg7Jz48L2Rpdj4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKioqKi3lv4XlupTmoLflvI8tKioqKiovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICA8bGFiZWxNYWluIGNsYXNzPSdjb250YWluZXItbGFiZWwgYmluZyc+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsSGlkZT5FeHBhbmQgQmluZyBTZXR0aW5ncyZndDsmZ3Q7PC9sYWJlbEhpZGU+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSdCaW5nLU9yaWdpbicgc3R5bGU9J21hcmdpbi1sZWZ0OjIwcHgnPjxpbnB1dCBuYW1lPSdzcC1hYy1hX2ZvcmNlX3N0eWxlX2JpbmcnIHZhbHVlPScwJyB0eXBlPSdyYWRpbycgIiArIChBQ0NvbmZpZy5BZHNTdHlsZU1vZGVfQmluZyA9PSAwID8gJ2NoZWNrZWQnIDogJycpICsgIj5CaW5nLU9yaWdpbjwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSdCaW5nLUV5ZVNhdmUnPjxpbnB1dCBuYW1lPSdzcC1hYy1odXlhbl9zdHlsZV9iaW5nJyB0eXBlPSdjaGVja2JveCcgIiArIChBQ0NvbmZpZy5IdVlhbl9CaW5nID09IHRydWUgPyAnY2hlY2tlZCcgOiAnJykgKyAiPkJpbmctRXllU2F2ZTwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPEJSLz48bGFiZWwgdGl0bGU9J0JpbmctU2luZ2xlUm93JyBzdHlsZT0nbWFyZ2luLWxlZnQ6MjBweCc+PGlucHV0IHRpdGxlPSdCaW5nLVNpbmdsZVJvd01vZGUnIG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfYmluZycgdmFsdWU9JzEnICB0eXBlPSdyYWRpbycgIiArIChBQ0NvbmZpZy5BZHNTdHlsZU1vZGVfQmluZyA9PSAxID8gJ2NoZWNrZWQnIDogJycpICsgIj5TaW5nbGVSb3c8L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0nQmluZy1TaW5nbGVDZW50ZXInPjxpbnB1dCAgbmFtZT0nc3AtYWMtYV9mb3JjZV9zdHlsZV9iaW5nJyB2YWx1ZT0nMicgIHR5cGU9J3JhZGlvJyAiICsgKEFDQ29uZmlnLkFkc1N0eWxlTW9kZV9CaW5nID09IDIgPyAnY2hlY2tlZCcgOiAnJykgKyAiPlNpbmdsZUNlbnRlcjwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSdCaW5nLVR3b1Jvd3NDZW50ZXInPjxpbnB1dCBuYW1lPSdzcC1hYy1hX2ZvcmNlX3N0eWxlX2JpbmcnIHZhbHVlPSczJyAgdHlwZT0ncmFkaW8nICIgKyAoQUNDb25maWcuQWRzU3R5bGVNb2RlX0JpbmcgPT0gMyA/ICdjaGVja2VkJyA6ICcnKSArICI+VHdvPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9J0JpbmctVGhyZWVSb3dzQ2VudGVyJz48aW5wdXQgbmFtZT0nc3AtYWMtYV9mb3JjZV9zdHlsZV9iaW5nJyB2YWx1ZT0nNCcgIHR5cGU9J3JhZGlvJyAiICsgKEFDQ29uZmlnLkFkc1N0eWxlTW9kZV9CaW5nID09IDQgPyAnY2hlY2tlZCcgOiAnJykgKyAiPlRocmVlPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9J0JpbmctRm91clJvd3NDZW50ZXInPjxpbnB1dCBuYW1lPSdzcC1hYy1hX2ZvcmNlX3N0eWxlX2JpbmcnIHZhbHVlPSc1JyAgdHlwZT0ncmFkaW8nICIgKyAoQUNDb25maWcuQWRzU3R5bGVNb2RlX0JpbmcgPT0gNSA/ICdjaGVja2VkJyA6ICcnKSArICI+Rm91cjwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICA8L2xhYmVsTWFpbj4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKioqKi3lv4XlupTmoLflvI8tKioqKiovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSdoZWlnaHQ6IDFweDt3aWR0aDoyNjdweDttYXJnaW4tbGVmdDoyNXB4O2JhY2tncm91bmQtY29sb3I6I2Q4ZDhkODttYXJnaW4tdG9wOjFweDsnPjwvZGl2PiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqLeaQnOeLl+agt+W8jy0qKioqKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgIDxsYWJlbE1haW4gY2xhc3M9J2NvbnRhaW5lci1sYWJlbCBzb2dvdSc+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsSGlkZT5FeHBhbmQgU29nb3UgU2V0dGluZ3MmZ3Q7Jmd0OzwvbGFiZWxIaWRlPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0nU29nb3UtT3JpZ2luJyBzdHlsZT0nbWFyZ2luLWxlZnQ6MjBweCc+PGlucHV0IG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfc29nb3UnIHZhbHVlPScwJyB0eXBlPSdyYWRpbycgIiArIChBQ0NvbmZpZy5BZHNTdHlsZU1vZGVfU29Hb3UgPT0gMCA/ICdjaGVja2VkJyA6ICcnKSArICI+U29nb3UtT3JpZ2luPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9J1NvZ291LUV5ZVNhdmUnPjxpbnB1dCBuYW1lPSdzcC1hYy1odXlhbl9zdHlsZV9zb2dvdScgdHlwZT0nY2hlY2tib3gnICIgKyAoQUNDb25maWcuSHVZYW5fU29Hb3UgPT0gdHJ1ZSA/ICdjaGVja2VkJyA6ICcnKSArICI+U29nb3UtRXllU2F2ZTwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPEJSLz48bGFiZWwgdGl0bGU9J1NvZ291LVNpbmdsZVJvdycgc3R5bGU9J21hcmdpbi1sZWZ0OjIwcHgnPjxpbnB1dCB0aXRsZT0nU29nb3UtU2luZ2xlUm93TW9kZScgbmFtZT0nc3AtYWMtYV9mb3JjZV9zdHlsZV9zb2dvdScgdmFsdWU9JzEnICB0eXBlPSdyYWRpbycgIiArIChBQ0NvbmZpZy5BZHNTdHlsZU1vZGVfU29Hb3UgPT0gMSA/ICdjaGVja2VkJyA6ICcnKSArICI+U2luZ2xlUm93PC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9J1NvZ291LVNpbmdsZUNlbnRlcic+PGlucHV0ICBuYW1lPSdzcC1hYy1hX2ZvcmNlX3N0eWxlX3NvZ291JyB2YWx1ZT0nMicgIHR5cGU9J3JhZGlvJyAiICsgKEFDQ29uZmlnLkFkc1N0eWxlTW9kZV9Tb0dvdSA9PSAyID8gJ2NoZWNrZWQnIDogJycpICsgIj5TaW5nbGVDZW50ZXI8L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0nU29nb3UtVHdvUm93c0NlbnRlcic+PGlucHV0IG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfc29nb3UnIHZhbHVlPSczJyAgdHlwZT0ncmFkaW8nICIgKyAoQUNDb25maWcuQWRzU3R5bGVNb2RlX1NvR291ID09IDMgPyAnY2hlY2tlZCcgOiAnJykgKyAiPlR3bzwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSdTb2dvdS1UaHJlZVJvd3NDZW50ZXInPjxpbnB1dCBuYW1lPSdzcC1hYy1hX2ZvcmNlX3N0eWxlX3NvZ291JyB2YWx1ZT0nNCcgIHR5cGU9J3JhZGlvJyAiICsgKEFDQ29uZmlnLkFkc1N0eWxlTW9kZV9Tb0dvdSA9PSA0ID8gJ2NoZWNrZWQnIDogJycpICsgIj5UaHJlZTwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSdTb2dvdS1Gb3VyUm93c0NlbnRlcic+PGlucHV0IG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfc29nb3UnIHZhbHVlPSc1JyAgdHlwZT0ncmFkaW8nICIgKyAoQUNDb25maWcuQWRzU3R5bGVNb2RlX1NvR291ID09IDUgPyAnY2hlY2tlZCcgOiAnJykgKyAiPkZvdXI8L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgPC9sYWJlbE1haW4+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqKiot5pCc54uX5qC35byPLSoqKioqLwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIDwvbGk+XG4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIDxsaT48bGFiZWwgdGl0bGU9J++8gU9wZW4gRXllU2F2ZSBNb2RlIGluIEN1c3RvbVN0eWxlIGlzIE11c3QnPjxpbnB1dCB0aXRsZT0nQUMtQ3VzdG9tRXllU2F2ZScgaWQ9J3NwLWFjLXVzZXJjb2xvcicgbmFtZT0nc3AtYWMtYV9mb3JjZScgdHlwZT0nY2hlY2tib3gnICIgKyAoQUNDb25maWcuaXNVc2VyQ29sb3JFbmFibGUgPyAnY2hlY2tlZCcgOiAnJykgKyAiPkFkZDQtRXllU2F2ZSBDb2xvciBTZXR0aW5nLU5lZWQgb3BlbmVkIGluIEFkZDM8L2xhYmVsPjwvbGk+XG4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIDxsaT48bGFiZWwgY2xhc3M9J21lbnUtYm94LWNvbnRhaW5lcicgdGl0bGU9J++8gU5lZWQgT3BlbmQgaW4gQWRkMyc+PGxhYmVsIHN0eWxlPSdtYXJnaW4tbGVmdDoyMHB4Oyc+RGVmYXVsdCBFeWVTYXZlIENvbG9y77yaPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9J3NwLWFjLW1lbnVodXlhbkNvbG9yJyB0eXBlPSdjb2xvcicgdGl0bGU9J1RoZSBjb2xvciBvZiBFeWVTYXZlJyBzdHlsZT0nY3Vyc29yOiBwb2ludGVyO21hcmdpbi10b3A6LTAuMDVyZW07aGVpZ2h0OjIzcHg7JyB2YWx1ZT0nIiArIEFDQ29uZmlnLmRlZmF1bHRIdVlhbkNvbG9yICsgIic+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSdtZW51LWJveC1zbWFsbCcgZGF0YS1jb2xvcj0nI0RFRjFFRicgc3R5bGU9J2JhY2tncm91bmQtY29sb3I6I0RFRjFFRjsnPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOzwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSdtZW51LWJveC1zbWFsbCcgZGF0YS1jb2xvcj0nI0YzRjJFRScgc3R5bGU9J2JhY2tncm91bmQtY29sb3I6I0YzRjJFRTsnPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOzwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSdtZW51LWJveC1zbWFsbCcgZGF0YS1jb2xvcj0nI0U1RTVFNScgc3R5bGU9J2JhY2tncm91bmQtY29sb3I6I0U1RTVFNTsnPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOzwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSdsaW5raHJlZicgZGF0YS1ocmVmPSdodHRwczovL3d3dy5udGFvdy5jb20vY29sb3JwaWNrZXIuaHRtbCcgIHN0eWxlPSdjdXJzb3I6cG9pbnRlcjttYXJnaW4tcmlnaHQ6IDEwcHg7JyBvbmNsaWNrPSd3aW5kb3cub3Blbih0aGlzLmRhdGFzZXQuaHJlZiknPk1vcmUgQ29sb3I8L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgPC9sYWJlbD48L2xpPlxuIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICA8bGk+PGxhYmVsPjxpbnB1dCB0aXRsZT0nQUMtQWRkRmF2aWNvbicgaWQ9J3NwLWFjLWZhdmljb24nIG5hbWU9J3NwLWFjLWFfZm9yY2UnIHR5cGU9J2NoZWNrYm94JyAiICsgKEFDQ29uZmlnLmlzRmF2aWNvbkVuYWJsZSA/ICdjaGVja2VkJyA6ICcnKSArICI+QWRkNS1GYXZpY29uLkZ1bmM8L2xhYmVsPjwvbGk+XG4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIDxsaT48bGFiZWw+PGxhYmVsIHN0eWxlPSdtYXJnaW4tbGVmdDoyMHB4Oyc+RmF2aWNvbkZhaWxlZEltZ++8mjwvbGFiZWw+PGlucHV0IGlkPSdzcC1hYy1mYXZpY29uVXJsJyBuYW1lPSdzcC1hYy1hX2ZvcmNlJyB2YWx1ZT0nIiArIEFDQ29uZmlnLmRlZmF1bHRGYXZpY29uVXJsICsgIicgc3R5bGU9J3dpZHRoOjU1JTttYXJnaW4tdG9wOi0wLjNyZW07JyB0eXBlPSdpbnB1dCcgIiArIChBQ0NvbmZpZy5pc0Zhdmljb25FbmFibGUgPyAnJyA6ICdkaXNhYmxlZD10cnVlJykgKyAiPjwvbGFiZWw+PC9saT5cbiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgPGxpPjxsYWJlbD48aW5wdXQgdGl0bGU9J0FDLVJlbW92ZSBCYWlkdSBBdXRvUHJlZGljdCBpbiB0ZXh0IHNlYXJjaCcgaWQ9J3NwLWFjLXN1Z19vcmlnaW4nIG5hbWU9J3NwLWFjLWFfZm9yY2UnIHR5cGU9J2NoZWNrYm94JyAiICsgKEFDQ29uZmlnLmRvRGlzYWJsZVN1ZyA/ICdjaGVja2VkJyA6ICcnKSArICI+QWRkNi1SZW1vdmUgQmFpZHUgQXV0b1ByZWRpY3QgaW4gdGV4dCBzZWFyY2g8L2xhYmVsPjwvbGk+XG4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmnInmm7TmlrAt6auY5LquIDxsYWJlbCBzdHlsZT0nJz4gfHwgIHN0eWxlPSciKyhDT05TVC5oYXNOZXdGdW5jTmVlZERpc3BsYXk/ImNvbG9yOnJlZDtmb250LXdlaWdodDogMTAwO2JhY2tncm91bmQtY29sb3I6IHllbGxvdztmb250LXdlaWdodDogNjAwOyI6IiIpKyInCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICA8bGk+PGxhYmVsPjxpbnB1dCB0aXRsZT0nQUMtRGlzcGxheSB0aGUgUmlnaHQgU2lkZSBDb2x1bW4nIGlkPSdzcC1hYy1yaWdodCcgdHlwZT0nY2hlY2tib3gnICIgKyAoQUNDb25maWcuaXNSaWdodERpc3BsYXlFbmFibGUgPyAnY2hlY2tlZCcgOiAnJykgKyAiPkFkZDctUmlnaHQgU2lkZSBDb2x1bW48L2xhYmVsPjxsYWJlbD48aW5wdXQgdGl0bGU9J0FDLUFkZE51bWJlcicgaWQ9J3NwLWFjLWNvdW50ZXInIG5hbWU9J3NwLWFjLWFfZm9yY2UnIHR5cGU9J2NoZWNrYm94JyAiICsgKEFDQ29uZmlnLmlzQ291bnRlckVuYWJsZSA/ICdjaGVja2VkJyA6ICcnKSArICI+QWRkOC1OdW1GdW5jPC9sYWJlbD48bGFiZWw+PGlucHV0IHRpdGxlPSdBQy1UZXh0VW5kZXJMaW5lJyBpZD0nc3AtYWMtYWxpbmUnIG5hbWU9J3NwLWFjLWFfZm9yY2UnIHR5cGU9J2NoZWNrYm94JyAiICsgKEFDQ29uZmlnLmlzQUxpbmVFbmFibGUgPyAnY2hlY2tlZCcgOiAnJykgKyAiPkFkZDktVGV4dFVuZGVyTGluZTwvbGFiZWw+PC9saT5cbiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgPGxpPjxsYWJlbD48aW5wdXQgdGl0bGU9J0FDLUVkaXQgeW91ciBvd24gc3R5bGUnIGlkPSdzcC1hYy11c2Vyc3R5bGUnIG5hbWU9J3NwLWFjLWFfZm9yY2UnIHR5cGU9J2NoZWNrYm94JyAiICsgKEFDQ29uZmlnLmlzVXNlclN0eWxlRW5hYmxlID8gJ2NoZWNrZWQnIDogJycpICsgIj5BZGQxMC1Zb3VyIG93biBTdHlsZTwvbGFiZWw+PC9saT5cbiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgPGxpPjx0ZXh0YXJlYSAgaWQ9J3NwLWFjLXVzZXJzdHlsZVRFWFQnIG5hbWU9J3NwLWFjLWFfZm9yY2UnIHZhbHVlPSd0aGlzIGlzIHVzZXIgb3duIHN0eWxlJyBzdHlsZT0nd2lkdGg6ODUlO2hlaWdodDogNjZweDttYXJnaW4tbGVmdDozMHB4OycgdHlwZT0naW5wdXQnPiIgKyBBQ0NvbmZpZy5Vc2VyU3R5bGVUZXh0ICsgIjwvdGV4dGFyZWE+PC9sYWJlbD48L2xpPlxuIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICA8bGk+PGEgY2xhc3M9J2xpbmtocmVmJyB0YXJnZXQ9J19ibGFuaycgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL2xhbmdyZW4xMzUzL0dNX3NjcmlwdC8nID5Gb3IgY29udGFjdCB0aGUgd3JpdHRlciwgc3VnZ2VzdHMsIGFzayBmb3IgaGVscCB0aGVuIGNsaWNrIG1lPC9hPjwvbGk+IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgICAgIDwvdWw+IiArCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICA8dWwgY2xhc3M9J3NldHRpbmctc2Vjb25kJyBzdHlsZT0nZGlzcGxheTpub25lJz4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgPC91bD4iKwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICAgICAgPHNwYW4gaWQ9J3NwLWFjLWNhbmNlbGJ1dHRvbicgY2xhc3M9J3NwLWFjLXNwYW5idXR0b24gZW5kYnV0dG9uJyB0aXRsZT0nY2xvc2UnIHN0eWxlPSdwb3NpdGlvbjogcmVsYXRpdmU7ZmxvYXQ6IGxlZnQ7Jz5jbG9zZTwvc3Bhbj5cbiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICA8c3BhbiBpZD0nc3AtYWMtc2F2ZWJ1dHRvbicgY2xhc3M9J3NwLWFjLXNwYW5idXR0b24gZW5kYnV0dG9uJyB0aXRsZT0nc2F2ZScgc3R5bGU9J3Bvc2l0aW9uOiByZWxhdGl2ZTtmbG9hdDogcmlnaHQ7Jz5zYXZlPC9zcGFuPlxuIiArCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgICAgIDwvZmllbGRzZXQ+XG4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICAgICAgICA8L2Rpdj5cbiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgICAgPC9kaXY+IjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChDb250YWluZXIpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLXNhdmVidXR0b24iKS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDngrnlh7vkuYvlkI7nmoTkv53lrZjlip/og70KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQ0NvbmZpZy5pc1JlZGlyZWN0RW5hYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLXJlZGlyZWN0IikuY2hlY2tlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQ0NvbmZpZy5pc0VuTGFuZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1pc0VuTGFuZyIpLmNoZWNrZWQ7IC8vIOaYr+WQpumAieaLqeS4uuWvueeri+ivreiogAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFDQ29uZmlnLmlzQWRzRW5hYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLWFkcyIpLmNoZWNrZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQUNDb25maWcuaXNBdXRvcGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1pc0F1dG9wYWdlIikuY2hlY2tlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQ0NvbmZpZy5pc0Jsb2NrRW5hYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLWJsb2NrIikuY2hlY2tlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQ0NvbmZpZy5pc0Jsb2NrRGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1yZW1vdmVCbG9jayIpLmNoZWNrZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQUNDb25maWcuaXNCbG9ja0J0bkRpc3BsYXkgPSAhZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLWJsb2NrQnRuRGlzcGxheSIpLmNoZWNrZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQUNDb25maWcuQWRzU3R5bGVFbmFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtc3R5bGUiKS5jaGVja2VkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFDQ29uZmlnLkFkc1N0eWxlTW9kZV9CYWlkdSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHUiXTpjaGVja2VkJykudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQUNDb25maWcuQWRzU3R5bGVNb2RlX0dvb2dsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZ29vZ2xlIl06Y2hlY2tlZCcpLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFDQ29uZmlnLkFkc1N0eWxlTW9kZV9CaW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9iaW5nIl06Y2hlY2tlZCcpLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFDQ29uZmlnLkFkc1N0eWxlTW9kZV9Tb0dvdSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfc29nb3UiXTpjaGVja2VkJykudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQUNDb25maWcuSHVZYW5fQmFpZHUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJzcC1hYy1odXlhbl9zdHlsZV9iYWlkdSJdJykuY2hlY2tlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQ0NvbmZpZy5TdHlsZV9CYWlkdUxpdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2JhaWR1bGl0ZSJdJykuY2hlY2tlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQ0NvbmZpZy5IdVlhbl9Hb29nbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJzcC1hYy1odXlhbl9zdHlsZV9nb29nbGUiXScpLmNoZWNrZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQUNDb25maWcuaXNHb29sZUluQmFpZHVNb2RlRW5hYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0ic3AtYWMtZ29vZ2xlX2luX2JhaWR1bW9kZSJdJykuY2hlY2tlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQ0NvbmZpZy5IdVlhbl9CaW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0ic3AtYWMtaHV5YW5fc3R5bGVfYmluZyJdJykuY2hlY2tlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQ0NvbmZpZy5IdVlhbl9Tb0dvdSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9InNwLWFjLWh1eWFuX3N0eWxlX3NvZ291Il0nKS5jaGVja2VkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWd1cmwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtZmF2aWNvblVybCIpLnZhbHVlLnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWd1cmwgPSAoaW1ndXJsID09ICJodHRwczovL3dzMS5zaW5haW1nLmNuL2xhcmdlLzZhMTU1Nzk0bHkxZm9panRkemh4aGoyMDB3MDB3anI1LmpwZyIpID8gIiIgOiBpbWd1cmw7IC8vIOWmguaenOaYr+aXp+eahOaWsOa1quWcsOWdgO+8jOmCo+S5iOmHjee9rgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ3VybCA9IChpbWd1cmwgPT0gIiIgfHwgaW1ndXJsID09IG51bGwpID8gImh0dHBzOi8vYWUwMS5hbGljZG4uY29tL2tmL0hUQjFkUlkwWDhPRDNLVmpTWkZGcTZBbjlwWGF5LmpwZyIgOiBpbWd1cmw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQUNDb25maWcuaXNVc2VyQ29sb3JFbmFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtdXNlcmNvbG9yIikuY2hlY2tlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQ0NvbmZpZy5kZWZhdWx0SHVZYW5Db2xvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5zcC1hYy1tZW51aHV5YW5Db2xvciIpLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFDQ29uZmlnLmlzRmF2aWNvbkVuYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1mYXZpY29uIikuY2hlY2tlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQ0NvbmZpZy5kZWZhdWx0RmF2aWNvblVybCA9IGltZ3VybDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQ0NvbmZpZy5kb0Rpc2FibGVTdWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtc3VnX29yaWdpbiIpLmNoZWNrZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQUNDb25maWcuaXNSaWdodERpc3BsYXlFbmFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtcmlnaHQiKS5jaGVja2VkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFDQ29uZmlnLmlzQ291bnRlckVuYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1jb3VudGVyIikuY2hlY2tlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQ0NvbmZpZy5pc0FMaW5lRW5hYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLWFsaW5lIikuY2hlY2tlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQ0NvbmZpZy5pc1VzZXJTdHlsZUVuYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy11c2Vyc3R5bGUiKS5jaGVja2VkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEFDQ29uZmlnLmlzVXNlclN0eWxlRW5hYmxlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQUNDb25maWcuVXNlclN0eWxlVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy11c2Vyc3R5bGVURVhUIikudmFsdWUudHJpbSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQ0NvbmZpZy5sYXN0U2F2ZVRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHTS5zZXRWYWx1ZSgiQ29uZmlnIiwgSlNPTi5zdHJpbmdpZnkoQUNDb25maWcpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDQwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0QmxvY2tQYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtYmxvY2tkaXlidXR0b24iKS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuc2V0dGluZy1tYWluIikuc3R5bGUgPSAiZGlzcGxheTpub25lOyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnNldHRpbmctc2Vjb25kIikuc3R5bGUgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5tZW51LWJveC1jb250YWluZXIiKS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1ciA9IGUuc3JjRWxlbWVudCB8fCBlLnRhcmdldDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mKGN1ci5kYXRhc2V0LmNvbG9yKSAhPSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuc3AtYWMtbWVudWh1eWFuQ29sb3IiKS52YWx1ZSA9IGN1ci5kYXRhc2V0LmNvbG9yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkSHVZYW5TdHlsZShjdXIuZGF0YXNldC5jb2xvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5zcC1hYy1tZW51aHV5YW5Db2xvciIpLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkSHVZYW5TdHlsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuc3AtYWMtbWVudWh1eWFuQ29sb3IiKS52YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgibGFiZWxIaWRlIikuZm9yRWFjaChmdW5jdGlvbiAocGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1ciA9IGUuc3JjRWxlbWVudCB8fCBlLnRhcmdldDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNsYXNzTmFtZSA9IGN1ci5wYXJlbnROb2RlLmNsYXNzTmFtZS5yZXBsYWNlKCJjb250YWluZXItbGFiZWwgIiwgIiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQ19hZGRTdHlsZSgiLlhYPmxhYmVsLC5YWD5icntkaXNwbGF5OnVuc2V0ICFpbXBvcnRhbnQ7fS5YWD5sYWJlbGhpZGV7ZGlzcGxheTpub25lICFpbXBvcnRhbnQ7fSIucmVwbGFjZSgvWFgvZ20sIGNsYXNzTmFtZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQUMtU2hvd0hpZGVJdGVtLSIgKyBjbGFzc05hbWUsICJib2R5Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEFDQ29uZmlnLmlzVXNlclN0eWxlRW5hYmxlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtdXNlcnN0eWxlVEVYVCIpLmFkZEV2ZW50TGlzdGVuZXIoInBhc3RlIiwgQXV0b0xvYWRDdXN0b21DU1MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy11c2Vyc3R5bGVURVhUIikuYWRkRXZlbnRMaXN0ZW5lcigia2V5dXAiLCBBdXRvTG9hZEN1c3RvbUNTUyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLXVzZXJzdHlsZVRFWFQiKS5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBBdXRvTG9hZEN1c3RvbUNTUyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBsZXQgYWxsTm9kZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuQUMtZmF2aWNvblQsIC5BQy1Db3VudGVyVCIpOwogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsTm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFsbE5vZGVzW2ldLmdldEF0dHJpYnV0ZSgnYWNDbGljaycpID09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbE5vZGVzW2ldLnNldEF0dHJpYnV0ZSgnYWNDbGljaycsICcxJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbE5vZGVzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFDdG9nZ2xlU2V0dGluZ0Rpc3BsYXkoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiYm9keT4jc3AtYWMtY29udGFpbmVyIikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsgLy8g6Zi75q2i54K55Ye76Ieq6Lqr55qE5pe25YCZ5YWz6ZetCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiYm9keSIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVSZW1vdmUoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY29udGVudCIpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY2FuY2VsYnV0dG9uIikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZVJlbW92ZShmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1jb250ZW50Iikuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZU1vYmlsZUJhaWR1RGlyZWN0TGluaygpewogICAgICAgICAgICAgICAgICAgIGxldCBub2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIiNwYWdlICNwYWdlLWJkICNyZXN1bHRzIC5yZXN1bHQ6bm90KFthY19yZWRpcmVjdFN0YXR1c10pIik7CiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1ck5vZGUgPSBub2Rlc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgc2FmZUZ1bmN0aW9uKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3VyRGF0YSA9IEpTT04ucGFyc2UoY3VyTm9kZS5kYXRhc2V0LmxvZy5yZXBsYWNlKC8nL2dtLCAiXCIiKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdHJ1ZUxpbmsgPSBjdXJEYXRhLm11OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyTm9kZS5xdWVyeVNlbGVjdG9yKCJhcnRpY2xlIikuc2V0QXR0cmlidXRlKCJybC1saW5rLWhyZWYiLCB0cnVlTGluayk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoImEiKS5mb3JFYWNoKGZ1bmN0aW9uIChwZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXIuc2V0QXR0cmlidXRlKCJocmVmIiwgdHJ1ZUxpbmspOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLnNldEF0dHJpYnV0ZSgiYWNfcmVkaXJlY3RTdGF0dXMiLCAiMSIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiByZW1vdmVPbk1vdXNlRG93bkZ1bmMoKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdE5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmcgLnJjIC5yIGEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHROb2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9uZSA9IHJlc3VsdE5vZGVzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25lLnNldEF0dHJpYnV0ZSgib25tb3VzZWRvd24iLCAiIik7IC8vIOiwt+atjOWOu+mHjeWumuWQkeW5suaJsAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25lLnNldEF0dHJpYnV0ZSgidGFyZ2V0IiwgIl9ibGFuayIpOyAvLyDosLfmrYzpk77mjqXmlrDmoIfnrb7miZPlvIAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZVJlZGlyZWN0TGlua1RhcmdldCgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09IFNpdGVUeXBlLlpISUhVKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBub2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5SaWNoVGV4dCBhW2hyZWYqPScvL2xpbmsuemhpaHUuY29tLz90YXJnZXQnXSIpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdXJsID0gZGVjb2RlVVJJQ29tcG9uZW50KG5vZGVzW2ldLmhyZWYucmVwbGFjZSgvaHR0cHM/OlwvXC9saW5rXC56aGlodVwuY29tXC9cP3RhcmdldD0vLCAiIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXNbaV0uaHJlZiA9IHVybDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09IFNpdGVUeXBlLkJBSURVX1hVRVNIVSkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgeG5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiYVtocmVmKj0nc2NfdnVybD1odHRwJ10iKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGkgPCB4bm9kZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB4dXJsID0gZ2V0VXJsQXR0cmlidXRlKHhub2Rlc1tqXS5ocmVmLCAic2NfdnVybCIsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeG5vZGVzW2pdLmhyZWYgPSB4dXJsOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIOaPkOWPlnVybOWFg+e0oOeahOWPguaVsOWAvAogICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0VXJsQXR0cmlidXRlKHVybCwgYXR0cmlidXRlLCBuZWVkRGVjb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHNlYXJjaFZhbHVlUyA9ICh1cmwuc3Vic3RyKDEpICsgIiIpLnNwbGl0KCImIik7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWFyY2hWYWx1ZVMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGtleV92YWx1ZSA9IHNlYXJjaFZhbHVlU1tpXS5zcGxpdCgiPSIpOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnID0gbmV3IFJlZ0V4cCgiXiIgKyBhdHRyaWJ1dGUgKyAiJCIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVnLnRlc3Qoa2V5X3ZhbHVlWzBdKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNlYXJjaFdvcmRzID0ga2V5X3ZhbHVlWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5lZWREZWNvZGUgPyBkZWNvZGVVUklDb21wb25lbnQoc2VhcmNoV29yZHMpIDogc2VhcmNoV29yZHM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVzZXRVUkxOb3JtYWwobGlzdCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAvLyDmraTmlrnms5XmmK/lvILmraXvvIzmlYXlnKjnu5PmnZ/nmoTml7blgJnkvb/nlKhp5Lya5Ye66Zeu6aKYLeS4pemHjSEKICAgICAgICAgICAgICAgICAgICAgICAgLy8g6YeH55So6Zet5YyF55qE5pa55rOV5p2l6L+b6KGM5pWw5o2u55qE5Lyg6YCSCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjdXJOb2RlID0gbGlzdFtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1cmhyZWYgPSBjdXJOb2RlLmhyZWY7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaXN0W2ldICE9IG51bGwgJiYgbGlzdFtpXS5nZXRBdHRyaWJ1dGUoImFjX3JlZGlyZWN0U3RhdHVzIikgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdFtpXS5zZXRBdHRyaWJ1dGUoImFjX3JlZGlyZWN0U3RhdHVzIiwgIjAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJocmVmLmluZGV4T2YoInd3dy5iYWlkdS5jb20vbGluayIpID4gLTEgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJocmVmLmluZGV4T2YoIm0uYmFpZHUuY29tL2Zyb20iKSA+IC0xIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyaHJlZi5pbmRleE9mKCJ3d3cuc29nb3UuY29tL2xpbmsiKSA+IC0xIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyaHJlZi5pbmRleE9mKCJzby5jb20vbGluayIpID4gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKGNfY3Vybm9kZSwgY19jdXJocmVmKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1cmwgPSBjX2N1cmhyZWYucmVwbGFjZSgvXmh0dHA6LywgImh0dHBzOiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09IFNpdGVUeXBlLkJBSURVICYmIHVybC5pbmRleE9mKCJlcWlkIikgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzmmK/nmb7luqbvvIzlubbkuJTmsqHmnInluKbmnInop6PmnpDlj4LmlbDvvIzpgqPkuYjmiYvliqjluKbkuIoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IHVybCArICImd2Q9JmVxaWQ9IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZ21SZXF1ZXN0Tm9kZSA9IEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZyb206ICJhY3hociIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHREYXRhOiBjX2N1cmhyZWYsIC8vIOeUqOS6juaJqeWxlQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IkFjY2VwdCI6ICIqLyoiLCAiUmVmZXJlciI6IGNfY3VyaHJlZi5yZXBsYWNlKC9eaHR0cDovLCAiaHR0cHM6Iil9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiR0VUIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDUwMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbnJlYWR5c3RhdGVjaGFuZ2U6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOeUseS6juaYr+eJueauiui/lOWbni3lubbkuJTlpb3mkJwt5pCc54uXLeeZvuW6pumDveaYr+i/meS4quagvOW8j++8jOaVheaPkOWHugogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlYWxSZWRpcmVjdChnbVJlcXVlc3ROb2RlLCBjX2N1cmhyZWYsIHJlc3BvbnNlLnJlc3BvbnNlVGV4dCwgIlVSTD0nKFteJ10rKSciKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOi/meS4quaYr+WcqOS4iumdouaXoOazleWkhOeQhueahOaDheWGteS4i++8jOWkh+eUqOeahCB0bS1maW5hbHVybGRoZGcgIHRtLWZpbmFsdXJsbWZkaAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5yZXNwb25zZUhlYWRlcnMuaW5kZXhPZigidG0tZmluYWx1cmwiKSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWxVUkwgPSBSZWdfR2V0KHJlc3BvbnNlLnJlc3BvbnNlSGVhZGVycywgInRtLWZpbmFsdXJsXFx3KzogKFteXFxzXSspIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWxVUkwgPT0gbnVsbCB8fCByZWxVUkwgPT0gIiIgfHwgcmVsVVJMLmluZGV4T2YoInd3dy5iYWlkdS5jb20vc2VhcmNoL2Vycm9yIikgPiAwKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlYWxSZWRpcmVjdChnbVJlcXVlc3ROb2RlLCBjX2N1cmhyZWYsIHJlbFVSTCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KShjdXJOb2RlLCBjdXJocmVmKTsgLy/kvKDpgJLml6fnmoTnvZHlnYDov4fljrvvvIzor7vkvZxjX2N1cmhyZWYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgRGVhbFJlZGlyZWN0ID0gZnVuY3Rpb24gKHJlcXVlc3QsIGN1ck5vZGVIcmVmLCByZXNwVGV4dCwgUmVnVGV4dCkgewogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwVGV4dCA9PSBudWxsIHx8IHR5cGVvZihyZXNwVGV4dCkgPT0gInVuZGVmaW5lZCIpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0UmVzcG9uc2VVcmwgPSAiIjsKICAgICAgICAgICAgICAgICAgICBpZiAoUmVnVGV4dCAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFJlc3BvbnNlVXJsID0gUmVnX0dldChyZXNwVGV4dCwgUmVnVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0UmVzcG9uc2VVcmwgPSByZXNwVGV4dDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdFJlc3BvbnNlVXJsICE9IG51bGwgJiYgcmVzdWx0UmVzcG9uc2VVcmwgIT0gIiIgJiYgcmVzdWx0UmVzcG9uc2VVcmwuaW5kZXhPZigid3d3LmJhaWR1LmNvbS9saW5rIikgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09IFNpdGVUeXBlLlNPR09VKSBjdXJOb2RlSHJlZiA9IGN1ck5vZGVIcmVmLnJlcGxhY2UoL15odHRwczpcL1wvd3d3LnNvZ291LmNvbS8sICIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBob3N0ID0gZ2V0SG9zdChyZXN1bHRSZXNwb25zZVVybCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIqW2hyZWYqPSciICsgY3VyTm9kZUhyZWYgKyAiJ10iKS5mb3JFYWNoKGZ1bmN0aW9uIChwZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihwZXIucXVlcnlTZWxlY3Rvcigic3BhbiIpICE9IG51bGwpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXIubGFzdENoaWxkLmluc2VydEFkamFjZW50SFRNTCgiYmVmb3JlRW5kIiwgIiZuYnNwOy0mbmJzcDsiICsgaG9zdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlci5zZXRBdHRyaWJ1dGUoImFjX3JlZGlyZWN0U3RhdHVzIiwgIjIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXIuc2V0QXR0cmlidXRlKCJocmVmIiwgcmVzdWx0UmVzcG9uc2VVcmwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHBlci5oYXNBdHRyaWJ1dGUoIm1ldGEiKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlci5zZXRBdHRyaWJ1dGUoIm1ldGEiLCBob3N0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyLmRhdGFzZXQuaG9zdCA9IGhvc3Q7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDT05TVC5jdXJIb3N0cy5hY3B1c2goaG9zdCwgcmVsb2FkQmxvY2tMaXN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QuYWJvcnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZUFEX2JhaWR1X3NvZ291KCkgeyAvLyDnp7vpmaTnmb7luqboh6rmnInlub/lkYoKICAgICAgICAgICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09IFNpdGVUeXBlLkJBSURVKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNhZmVSZW1vdmUoIi5jLWNvbnRhaW5lciAvZGVlcC8gLmMtY29udGFpbmVyIik7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOenu+mZpHNoYWRvd0RPTeW5v+WRiu+8m+aQnOe0ouWFs+mUruWtl++8mua3mOWune+8m+eEtuWQjueCueWHu+aQnOe0ouahhu+8jOW5v+WRiuS8muWkmuasoemHjeeOsHNoYWRvd2RvbQogICAgICAgICAgICAgICAgICAgICAgICBzYWZlUmVtb3ZlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jLWNvbnRhaW5lciAvZGVlcC8gLmMtY29udGFpbmVyJykuaGFzKCcuZjEzPnNwYW46Y29udGFpbnMoIuW5v+WRiiIpJykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBzYWZlUmVtb3ZlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNjb250ZW50X3JpZ2h0PmRpdicpLmhhcygnYTpjb250YWlucygi5bm/5ZGKIiknKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOenu+mZpOagh+WHhuW5v+WRigogICAgICAgICAgICAgICAgICAgICAgICBzYWZlUmVtb3ZlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNjb250ZW50X2xlZnQ+ZGl2JykuaGFzKCdzcGFuOmNvbnRhaW5zKCLlub/lkYoiKScpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8g56e76Zmk5Y+z5L6n5qCP6aG26YOoLeW6lemDqOaXoOeUqOW5v+WRigogICAgICAgICAgICAgICAgICAgICAgICBzYWZlUmVtb3ZlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoIiNjb250ZW50X3JpZ2h0IHRkPmRpdjpub3QoW2lkXSksI2NvbnRlbnRfcmlnaHQ+YnIiKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKGN1clNpdGUuU2l0ZVR5cGVJRCA9PSBTaXRlVHlwZS5NQkFJRFUpewogICAgICAgICAgICAgICAgICAgICAgICAvKioqKuenu+mZpOaJi+acuuaooeW8j+S4iueahOmDqOWIhuW5v+WRiioqKiovCiAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVSZW1vdmUoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNwYWdlLWJkICNyZXN1bHRzPmRpdjpub3QoW2NsYXNzKj0icmVzdWx0Il0pJykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBzYWZlUmVtb3ZlKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjcGFnZS1iZCAjcmVzdWx0cz5kaXY6bm90KFtjbGFzc10pJykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09IFNpdGVUeXBlLlNPR09VKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVSZW1vdmUoIiNwcm9tb3Rpb25fYWR2X2NvbnRhaW5lciIpOwogICAgICAgICAgICAgICAgICAgICAgICBzYWZlUmVtb3ZlKCIja21hcF9idXNpbmVzc190aXRsZSIpOwogICAgICAgICAgICAgICAgICAgICAgICBzYWZlUmVtb3ZlKCIja21hcF9idXNpbmVzc191bCIpOwogICAgICAgICAgICAgICAgICAgICAgICBzYWZlUmVtb3ZlKCIuc3BvbnNvcmVkIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIucnZyLW1vZGVsW3N0eWxlPSd3aWR0aDoyNTBweDsnXSIpLnN0eWxlID0gImRpc3BsYXk6bm9uZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09IFNpdGVUeXBlLlNPKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVSZW1vdmUoIiNzb19rdy1hZCIpOwogICAgICAgICAgICAgICAgICAgICAgICBzYWZlUmVtb3ZlKCIjbS1zcHJlYWQtbGVmdCIpOwogICAgICAgICAgICAgICAgICAgICAgICBzYWZlUmVtb3ZlKCIjbS1zcHJlYWQtYm90dG9tIik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuQklORykgewogICAgICAgICAgICAgICAgICAgICAgICBzYWZlUmVtb3ZlKCIuYl9hZCIpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09IFNpdGVUeXBlLkdPT0dMRSkgewogICAgICAgICAgICAgICAgICAgICAgICBzYWZlUmVtb3ZlKCIjYm90dG9tYWRzIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIElzTnVtYmVyKHZhbCkgewogICAgICAgICAgICAgICAgICAgIGlmICh2YWwgPT09ICIiIHx8IHZhbCA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTih2YWwpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gYWRkQ291bnRlcihjaXRlTGlzdCkgewogICAgICAgICAgICAgICAgICAgIGxldCBjc3NUZXh0ID0gInBvc2l0aW9uOnJlbGF0aXZlO3otaW5kZXg6MTttYXJnaW4tcmlnaHQ6NHB4O2Rpc3BsYXk6aW5saW5lLWJsb2NrO2NvbG9yOndoaXRlO2ZvbnQtZmFtaWx5Oiflvq7ova/pm4Xpu5EnO2ZvbnQtc2l6ZToxNnB4O3RleHQtYWxpZ246Y2VudGVyO3dpZHRoOjIycHg7bGluZS1oZWlnaHQ6MjJweDtib3JkZXItcmFkaXVzOjUwJTsiOwogICAgICAgICAgICAgICAgICAgIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNpdGVMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IGNpdGVMaXN0W2ldLmdldEF0dHJpYnV0ZSgnU29ydEluZGV4Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleD09bnVsbCB8fCB0eXBlb2YoaW5kZXgpID09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXRlTGlzdFtpXS5zZXRBdHRyaWJ1dGUoJ1NvcnRJbmRleCcsIENPTlNULnNvcnRJbmRleCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXRlTGlzdFtpXS5pbm5lciA9IGNpdGVMaXN0W2ldLmlubmVySFRNTDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSAiPGVtIGNsYXNzPSdBQy1Db3VudGVyVCcgc3R5bGU9IiArIGNzc1RleHQgKyAiPiIgKyBDT05TVC5zb3J0SW5kZXggKyAiPC9lbT4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2l0ZUxpc3RbaV0uaW5uZXJIVE1MID0gZGl2LmlubmVySFRNTCArIGNpdGVMaXN0W2ldLmlubmVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09OU1Quc29ydEluZGV4Kys7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpbmRleCAhPSAoaSArIDEpICUgMTAwKXsgLy8g5oyJ6ZyA5pu05pawCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2l0ZUxpc3RbaV0ucXVlcnlTZWxlY3RvcigiLkFDLUNvdW50ZXJUIikuaW5uZXJUZXh0ID0gKGkgKyAxKSAlIDEwMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRIb3N0KHNiZWZvcmUpIHsKICAgICAgICAgICAgICAgICAgICBzYmVmb3JlID0gKHNiZWZvcmUgJiYgc2JlZm9yZS50cmltKCkpIHx8ICIiOwogICAgICAgICAgICAgICAgICAgIGxldCBzZW5kOwogICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBzYmVmb3JlLnNwbGl0KCctJyk7CiAgICAgICAgICAgICAgICAgICAgLy8gLS3mkJzni5fnmb7luqbkuJPnlKjvvJvlpoLmnpznrKzkuIDkuKrmmK/kuK3mlofnmoTor53vvIzlnLDlnYDlsLHmmK/nrKzkuozkuKoKICAgICAgICAgICAgICAgICAgICBpZigocmVzdWx0Lmxlbmd0aCA+IDEgJiYgbmV3IFJlZ0V4cCgiW1xcdTRFMDAtXFx1OUZGRl0rIiwiZyIpLnRlc3Qoc2JlZm9yZSkpICYmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuQkFJRFUgfHwgY3VyU2l0ZS5TaXRlVHlwZUlEID09IFNpdGVUeXBlLlNPR09VKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNiZWZvcmUgPSByZXN1bHRbMV07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHNlbmQgPSBzYmVmb3JlLnJlcGxhY2UoLyhcL1teL10qfFxzKikvLCAiIikucmVwbGFjZSgvPFtePl0qPi9nLCAiIikucmVwbGFjZSgvaHR0cHM/OlwvXC8vZywgIiIpLnJlcGxhY2UoLzxcLz9zdHJvbmc+L2csICIiKS5yZXBsYWNlKC88XC8/Yj4vZywgIiIpLnJlcGxhY2UoLzw/Pj8vZywgIiIpLnJlcGxhY2UoLyggfFwvKS4qL2csICIiKS5yZXBsYWNlKC9cLlwuLiovLCAiIik7CiAgICAgICAgICAgICAgICAgICAgaWYoc2VuZC5pbmRleE9mKCIuIikgPCAwKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgICAgICBpZihzZW5kLmluZGV4T2YoIuKGtSIpPj0wKSAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbmQudHJpbSgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFkZEZhdmljb24oY2l0ZUxpc3QpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY2l0ZUxpc3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IGNpdGVMaXN0W2luZGV4XS5nZXRBdHRyaWJ1dGUoImFjX2Zhdmljb25TdGF0dXMiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1ck5vZGUgPSBjaXRlTGlzdFtpbmRleF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0Tm9kZSA9IGN1ck5vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdXJsID0gZ2V0QmFpZHVIb3N0KHRhcmdldE5vZGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodXJsID09IG51bGwpeyAvLyDot7Pov4diYWlkdS5jbGljawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09OU1QuY3VySG9zdHMuYWNwdXNoKHVybCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmF2aWNvblVybCA9IHVybDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBJSSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgSUkgPD0gNTsgSUkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldE5vZGUgPSB0YXJnZXROb2RlLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldE5vZGUgIT0gbnVsbCAmJiB0YXJnZXROb2RlLnF1ZXJ5U2VsZWN0b3IoY3VyU2l0ZS5GYXZpY29uQWRkVG8pICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhpbmRleCsiLiIrZmF2aWNvblVybCsiLS0iK0lJKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChJSSA8PSA1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5YWI55So54i26IqC54K55Yik5pat5LiA5LiL5piv5ZCm5a2Y5ZyoaW1nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRtcEhUTUwgPSB0YXJnZXROb2RlLmlubmVySFRNTDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcG9zID0gdG1wSFRNTC5pbmRleE9mKCJmYXYtdXJsIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiB0bXBIVE1MLmluZGV4T2YoImZhdnVybCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYgdG1wSFRNTC5pbmRleE9mKCJ0aXQtaWNvIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiB0bXBIVE1MLmluZGV4T2YoImltZ19mYXYgcm1zX2ltZyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYgdG1wSFRNTC5pbmRleE9mKCJjLXRvb2wtIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiB0bXBIVE1MLmluZGV4T2YoInNwYW4gY2xhc3M9XCJjLWljb24gYy1pY29uLSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYgdG1wSFRNTC5pbmRleE9mKCJpbWcgY2xhc3M9XCJ4QTMzR2MiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+S7luiHquW3seW3sue7j+WBmuS6hmZhdmljb27kuoYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9zID4gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIuW3suacieWbvueJh++8miIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLnNldEF0dHJpYnV0ZSgiYWNfZmF2aWNvblN0YXR1cyIsICItMiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Tm9kZSA9IHRhcmdldE5vZGUucXVlcnlTZWxlY3RvcihjdXJTaXRlLkZhdmljb25BZGRUbyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g54m55q6K5aSE55CGQklORwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuQklORykgY3VyTm9kZSA9IGN1ck5vZGUucXVlcnlTZWxlY3RvcigiaDIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2h0dHBzOi8vYXBpLmJ5aS5wdy9mYXZpY29uLz91cmw9Pz8/PyDkuI3nqLPlrpoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2h0dHA6Ly8iK2Zhdmljb25VcmwrIi9jZG4uaWNvP2RlZmF1bHRpY29uPWh0dHA6Ly9zb3ouaW0vZmF2aWNvbi5pY28g5LiN56iz5a6aCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9odHRwczovL3d3dy54dHdpbmQuY29tL2FwaS9pbmRleC5waHA/dXJsPT8/Pz8g5oyC5LqG44CC44CC44CCCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9odHRwczovL3N0YXRpY3MuZG5zcG9kLmNuL3Byb3h5X2Zhdmljb24vXy9mYXZpY29uP2RvbWFpbj1zaW5hLmNuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy93d3cuZ29vZ2xlLmNvbS9zMi9mYXZpY29ucz9kb21haW49NzY0MzUwMTc3LmxvZnRlci5jb20KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WmguaenOWcsOWdgOS4jeato+ehru+8jOmCo+S5iOS4ouW8gwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBob3N0ID0gZmF2aWNvblVybC5yZXBsYWNlKC9bXi5dK1wuKFteLl0rKVwuKFteLl0rKS8sICIkMS4kMiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXROb2RlLnF1ZXJ5U2VsZWN0b3IoIi5BQy1mYXZpY29uVCIpID09IG51bGwgJiYgaG9zdC5sZW5ndGggPiAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbnNOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGN1ck5vZGUgPSBjdXJOb2RlLmNoaWxkcmVuWzBdIHx8IGN1ck5vZGUuZmlyc3RDaGlsZCA7IC8vIGZpcnN0Q2hpbGTlrrnmmJPpgYfliLB0ZXh05a+56LGhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ck5vZGUuc2V0QXR0cmlidXRlKCJhY19mYXZpY29uU3RhdHVzIiwgIjEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3VyTm9kZS5pbnNlcnRCZWZvcmUoaW5zTm9kZSwgY3VyTm9kZS5maXJzdENoaWxkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zTm9kZS5jbGFzc05hbWUgPSAiQUMtZmF2aWNvblQiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNOb2RlLnNldEF0dHJpYnV0ZSgicmVmZXJyZXJwb2xpY3kiLCAibm8tcmVmZXJyZXIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zTm9kZS5zdHlsZSA9ICJwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjE7dmVydGljYWwtYWxpZ246c3ViO2hlaWdodDoxNnB4O3dpZHRoOjE2cHg7bWFyZ2luLXJpZ2h0OjVweDttYXJnaW4tYm90dG9tOiAycHg7IjsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc05vZGUuc3JjID0gImh0dHBzOi8vZmF2aWNvbi55YW5kZXgubmV0L2Zhdmljb24vIiArIGhvc3Q7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc05vZGUuc2V0QXR0cmlidXRlKCJmYXZpY29uSUQiLCAiMCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjdXJOb2RlLmlubmVySFRNTCA9IGluc05vZGUub3V0ZXJIVE1MICsgY3VyTm9kZS5pbm5lckhUTUw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGN1ck5vZGUuaW5zZXJ0QWRqYWNlbnRIVE1MKCJhZnRlckVuZCIsIGluc05vZGUuaW5uZXJIVE1MKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJlZm9yZUluZGV4ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0Tm9kZS5jaGlsZE5vZGVzW2JlZm9yZUluZGV4XS5jbGFzc05hbWUgPT0gIkFDLUNvdW50ZXJUIil7YmVmb3JlSW5kZXggPSAxO30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Tm9kZS5pbnNlcnRCZWZvcmUoaW5zTm9kZSwgdGFyZ2V0Tm9kZS5jaGlsZE5vZGVzW2JlZm9yZUluZGV4XSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbih4Y3VyKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc05vZGUub25sb2FkID0gZnVuY3Rpb24oZW52KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1nTm9kZSA9IHhjdXIucXVlcnlTZWxlY3RvcigiLkFDLWZhdmljb25UIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW1nTm9kZS5uYXR1cmFsV2lkdGggPCAxMCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ05vZGUuc2V0QXR0cmlidXRlKCJvbGQtc3JjIiwgaW1nTm9kZS5zcmMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdOb2RlLnNyYyA9IEFDQ29uZmlnLmRlZmF1bHRGYXZpY29uVXJsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdOb2RlLm9ubG9hZCA9ICJqYXZhc2NyaXB0OnZvaWQoMCk7IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKHRhcmdldE5vZGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBJbnNlcnRTZXR0aW5nTWVudSgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoKGN1clNpdGUuU2l0ZVR5cGVJRCAhPSBTaXRlVHlwZS5PVEhFUlMpICYmICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjbXl1c2VyIikgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN1LCAjZ2I+ZGl2PmRpdj5kaXYsICNiX2hlYWRlcj4jaWRfaCwgLnRvcC1iYXIgLnNvZ291LXNldC1ib3giKTsgLy9iYWlkdTsgZ29vZ2xlOyBiaW5nOyDmkJzni5cKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5zdHlsZSA9ICJ3aWR0aDogYXV0bzsiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVzZXJBZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyQWRpdi5pZCA9ICJteXVzZXIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodXNlQ05MYW4pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJBZGl2LmlubmVySFRNTCA9ICI8aW5wdXQgdHlwZT0nc3VibWl0JyBjbGFzcz0nbXl1c2VyY29uZmlnJyB2YWx1ZT0n6Ieq5a6a5LmJJy8+PHNwYW4gY2xhc3M9J2FjLW5ld3ZlcnNpb25EaXNwbGF5JyBzdHlsZT0nYmFja2dyb3VuZC1jb2xvcjogcmVkO2Zsb2F0OiBsZWZ0O2hlaWdodDogOHB4O3dpZHRoOiA4cHg7Ym9yZGVyLXJhZGl1czogNHB4O2Rpc3BsYXk6IiArIChDT05TVC5oYXNOZXdGdW5jTmVlZERpc3BsYXkgPyAidW5zZXQiIDogIm5vbmUiKSArICInPiZuYnNwOzwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlckFkaXYuaW5uZXJIVE1MID0gIjxpbnB1dCB0eXBlPSdzdWJtaXQnIGNsYXNzPSdteXVzZXJjb25maWcnIHZhbHVlPSdDVVNUT00nLz48c3BhbiBjbGFzcz0nYWMtbmV3dmVyc2lvbkRpc3BsYXknIHN0eWxlPSdiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7ZmxvYXQ6IGxlZnQ7aGVpZ2h0OiA4cHg7d2lkdGg6IDhweDtib3JkZXItcmFkaXVzOiA0cHg7ZGlzcGxheToiICsgKENPTlNULmhhc05ld0Z1bmNOZWVkRGlzcGxheSA/ICJ1bnNldCIgOiAibm9uZSIpICsgIic+Jm5ic3A7PC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKHVzZXJBZGl2LCBwYXJlbnQuY2hpbGROb2Rlc1swXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjbXl1c2VyIC5teXVzZXJjb25maWciKS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFDdG9nZ2xlU2V0dGluZ0Rpc3BsYXkoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KCk7IC8vIOivu+WPluS4quS6uuiuvue9ruS/oeaBrwogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrIOWbnuiwg+WHveaVsO+8jOmcgOimgei/lOWbnuaYr+WQpue7k+adn1RydWXjgIFGYWxzZeOAgeWQpuWImeebuOW9k+S6juWumuaXtuWZqAogICAgICAgICAgICAgKiBjYWxsYmFjayByZXR1cm46CiAgICAgICAgICAgICAqICAgICAgdHJ1ZSA9IOWumuaXtuWZqAogICAgICAgICAgICAgKiAgICAgIGZhbHNlID0g6K6h5pe25ZmoCiAgICAgICAgICAgICAqICAgICAgbm9uZSA9IOiuoeaXtuWZqAogICAgICAgICAgICAgKiBAcGFyYW0gcGVyaW9kIOWRqOacn++8jOWmgjoyMDBtcwogICAgICAgICAgICAgKi8KICAgICAgICAgICAgZnVuY3Rpb24gUkFGRnVuY3Rpb24oY2FsbGJhY2ssIHBlcmlvZCl7CiAgICAgICAgICAgICAgICAvLyDkuIDnp5I2MOasoe+8jOWvueW6lDHnp5IxMDAwbXMKICAgICAgICAgICAgICAgIGxldCBuZWVkQ291bnQgPSBwZXJpb2QgLyAxMDAwICogNjA7CiAgICAgICAgICAgICAgICBsZXQgdGltZXMgPSAwOwogICAgICAgICAgICAgICAgbGV0IGhhc0ZpbmlzaCA9IGZhbHNlOwogICAgICAgICAgICAgICAgZnVuY3Rpb24gc3RlcCgpewogICAgICAgICAgICAgICAgICAgIGlmKCFoYXNGaW5pc2gpIHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTsKICAgICAgICAgICAgICAgICAgICBpZih0aW1lcyA9PSAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGltZXMgPSBuZWVkQ291bnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0ZpbmlzaCA9IGNhbGxiYWNrKCk7IC8vIOWPquaciei/lOWbnnRydWXmiY3kvJrnu4jmraLvvIzkuI3ov5Tlm57kuZ/kvJrnu6fnu60KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGltZXMtLTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBzYWZlRnVuY3Rpb24oZnVuYyl7CiAgICAgICAgICAgICAgICBzYWZlUmVtb3ZlKGZ1bmMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHNhZmVXYWl0RnVuYyhzZWxlY3RvciwgY2FsbGJhY2tGdW5jLCB0aW1lLCBub3RDbGVhcil7CiAgICAgICAgICAgICAgICB0aW1lID0gdGltZSB8fCA1MDsKICAgICAgICAgICAgICAgIG5vdENsZWFyID0gbm90Q2xlYXIgfHwgZmFsc2U7CiAgICAgICAgICAgICAgICBsZXQgZG9DbGVhciA9ICFub3RDbGVhcjsKICAgICAgICAgICAgICAgIFJBRkZ1bmN0aW9uKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBpZigodHlwZW9mIChzZWxlY3RvcikgPT0gInN0cmluZyIgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikgIT0gbnVsbCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tGdW5jKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZG9DbGVhcikgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoKHR5cGVvZihzZWxlY3RvcikgPT0gImZ1bmN0aW9uIiAmJiBzZWxlY3RvcigpLmxlbmd0aCA+IDApKXsKICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tGdW5jKHNlbGVjdG9yKClbMF0pOwogICAgICAgICAgICAgICAgICAgICAgICBpZihkb0NsZWFyKSAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgdGltZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gQUNfYWRkU3R5bGUoY3NzLCBjbGFzc05hbWUsIGFkZFRvVGFyZ2V0LCBpc1JlbG9hZCwgaW5pdFR5cGUpIHsgLy8g5re75YqgQ1NT5Luj56CB77yM5LiN6ICD6JmR5paH5pys6L295YWl5pe26Ze077yM5Y+q5omn6KGM5LiA5qyhLeaXoOiuuuaIkOWKn+S4juWQpu+8jOW4puaciWNsYXNzTmFtZQogICAgICAgICAgICAgICAgUkFGRnVuY3Rpb24oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICAgICAgICogYWRkVG9UYXJnZXTov5nph4zkuI3opoHkvb/nlKhoZWFk5qCH562+LGhlYWTmoIfnrb7nmoRjc3PkvJrlnKhodG1s6L295YWl5pe25Yqg6L2977yMCiAgICAgICAgICAgICAgICAgICAgICogaHRtbOWKoOi9veWQjuS8vOS5juS4jeS8muWGjeasoeWKoOi9ve+8jGJvZHnkvJroh6rliqjliqDovb0KICAgICAgICAgICAgICAgICAgICAgKiAqKi8KICAgICAgICAgICAgICAgICAgICBsZXQgYWRkVG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFkZFRvVGFyZ2V0KTsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mKGFkZFRvVGFyZ2V0KSA9PSAidW5kZWZpbmVkIikKICAgICAgICAgICAgICAgICAgICAgICAgYWRkVG8gPSAoZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5ib2R5IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fCBkb2N1bWVudCk7CiAgICAgICAgICAgICAgICAgICAgaXNSZWxvYWQgPSBpc1JlbG9hZCB8fCBmYWxzZTsgLy8g6buY6K6k5piv6Z2e5Yqg6L295Z6LCiAgICAgICAgICAgICAgICAgICAgaW5pdFR5cGUgPSBpbml0VHlwZSB8fCAidGV4dC9jc3MiOwogICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOayoeacieebruagh+iKgueCuSjliJnnm7TmjqXliqApIHx8IOacieebruagh+iKgueCueS4lOaJvuWIsOS6huiKgueCuSjov5vooYzmlrDlop4pCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZihhZGRUb1RhcmdldCkgPT0gInVuZGVmaW5lZCIgfHwgKHR5cGVvZihhZGRUb1RhcmdldCkgIT0gInVuZGVmaW5lZCIgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhZGRUb1RhcmdldCkgIT0gbnVsbCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xlYXJJbnRlcnZhbCh0b3V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6cdHJ1ZSDlvLrooYzopobnm5bvvIzkuI3nrqHmnInmsqHmnIktLeWFiOWIoOmZpAogICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpxmYWxzZe+8jOS4jeimhueblu+8jOS9huaYr+WmguaenOacieeahOivne+8jOimgemAgOWHuu+8jOS4jeWtmOWcqOWImeaWsOWini0t5peg6ZyA5Yig6ZmkCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1JlbG9hZCA9PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYWZlUmVtb3ZlKCIuIiArIGNsYXNzTmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZWxvYWQgPT0gZmFsc2UgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLiIgKyBjbGFzc05hbWUpICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOiKgueCueWtmOWcqCAmJiDkuI3lh4blpIfopobnm5YKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSAhPSBudWxsKSBjc3NOb2RlLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgY3NzTm9kZS5zZXRBdHRyaWJ1dGUoInR5cGUiLCBpbml0VHlwZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNzc05vZGUuaW5uZXJIVE1MID0gY3NzOwogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkVG8uYXBwZW5kQ2hpbGQoY3NzTm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUubWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgMjApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHNhZmVSZW1vdmUoY3NzU2VsZWN0b3JfT1JfTkVXZnVuY3Rpb24pIHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoY3NzU2VsZWN0b3JfT1JfTkVXZnVuY3Rpb24pID09ICJzdHJpbmciKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlbW92ZU5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjc3NTZWxlY3Rvcl9PUl9ORVdmdW5jdGlvbik7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVtb3ZlTm9kZXMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVOb2Rlc1tpXS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YoY3NzU2VsZWN0b3JfT1JfTkVXZnVuY3Rpb24pID09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBjc3NTZWxlY3Rvcl9PUl9ORVdmdW5jdGlvbigpOwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLmnKrnn6Xlkb3ku6TvvJoiICsgY3NzU2VsZWN0b3IpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrSVNCYWlkdU1haW4oKXsKICAgICAgICAgICAgICAgIC8vIOWmguaenOaYr+eZvuW6piAmJiAg5rKh5pyJKOeZvuW6puaQnOe0oue7k+aenOeahOagh+W/ly1b5a2Y5ZyoXeeZvuW6pueahOWGheWuuSkgcmV0dXJuOwogICAgICAgICAgICAgICAgcmV0dXJuICEoY3VyU2l0ZS5TaXRlVHlwZUlEID09IFNpdGVUeXBlLkJBSURVICYmICEobG9jYXRpb24uaHJlZi5yZXBsYWNlKC8oJnxcPykod2R8d29yZCk9LywgIiIpICE9IGxvY2F0aW9uLmhyZWYgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2NvbnRlbnRfbGVmdCIpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICgoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2t3IikgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2t3IikuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpKSB8fCAiIikgIT0gIiIpCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gRlNCYWlkdSgpIHsgLy8gdGhhbmtzIGZvciBjb2RlIGZyb20g5rWu55SfQOacquathyBAcGFnZSBodHRwczovL2dyZWFzeWZvcmsub3JnL3poLVRXL3NjcmlwdHMvMzE2NDIKICAgICAgICAgICAgICAgIGRlYnVnKCLliJ3lp4vljJZGU0JBSURVIik7CiAgICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgICAqIOajgOafpWRvY3VtZW5055qE5a2Q6IqC54K55piv5ZCm5ZCr5pyJ5YWD57SgCiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gbm9kZUNsYXNzIOW+heajgOafpeWFg+e0oAogICAgICAgICAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFR8RgogICAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjaGVja0RvY21lbnRIYXNOb2RlKG5vZGVDbGFzcykgewogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9jdW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuY2hpbGROb2Rlc1tpXS5kYXRhICYmIGRvY3VtZW50LmNoaWxkTm9kZXNbaV0uZGF0YS5pbmRleE9mKG5vZGVDbGFzcykgPiAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyID0gewogICAgICAgICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAgICAgICAqIOWvvOWFpWNzc+WGheWuueS4uuOAkOaWh+acrOagvOW8j+OAke+8ge+8ge+8gQogICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBkYXRhIGNzc+WGheWuuQogICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB0b0NsYXNzTmFtZSDpooTmnJ/nmoTnsbvlkI0KICAgICAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgICAgICBpbXBvcnRTdHlsZTogZnVuY3Rpb24gKGRhdGEsIHRvQ2xhc3NOYW1lLCB1c2VOb3JtYWxDU1MsIG11c3RMb2FkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZihkYXRhKSA9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6L+Z5Liq5bGF54S25ZyoVk3kuIrlh7rpl67popjkuobvvIzlvojlpYfmgKoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkdNX2dldFJlc291cmNlVGV4dOiOt+WPluWGheWuueaVsOaNruW8guW4uCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdXNlTm9ybWFsQ1NTID0gdXNlTm9ybWFsQ1NTIHx8IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBtdXN0TG9hZCA9IG11c3RMb2FkIHx8IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAvLyDmma7pgJrmtY/op4jlmajmqKHlvI8tLeS9huaYr+S8vOS5juagt+W8j+WKoOi9veeahOS8mOWFiOe6p+S9juS6jmhlYWTkuK3nmoRzdHlsZeS8mOWFiOe6pwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXVzZU5vcm1hbENTUykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6YCa6L+HbXVzdOWPguaVsOadpeWIpOWumnN0eWxl5piv5ZCm5Yqg6L29CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkYXRhID0gZGF0YS5yZXBsYWNlKC9iYWlkdS5jb20jXCQjL2lnbSwgJycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuaW5kZXhPZigiaHR0cCIpICE9IDApIGRhdGEgPSAiZGF0YTp0ZXh0L2Nzczt1dGYtOCwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVja0RvY21lbnRIYXNOb2RlKHRvQ2xhc3NOYW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwaSA9IGRvY3VtZW50LmNyZWF0ZVByb2Nlc3NpbmdJbnN0cnVjdGlvbigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInhtbC1zdHlsZXNoZWV0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYHR5cGU9InRleHQvY3NzIiBtdXN0PSIke211c3RMb2FkfSIgY2xhc3M9IiR7dG9DbGFzc05hbWV9IiBocmVmPSIke2RhdGF9ImAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOyAvLyDms6jmhI/lv4XpobvopoHlj4zlvJXlj7cKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5pbnNlcnRCZWZvcmUocGksIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAqKioqKioqKioq5aSa6YeN5qC35byPLeWFvOWuuWVkZ2UgJiYg6buR5aSc6ISa5pysKioqKioqKioqKioqICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQ19hZGRTdHlsZShkYXRhLCB0b0NsYXNzTmFtZSwgImhlYWQiLCBmYWxzZSwgInRleHQvY3NzIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAqKioqKioqKioq5aSa6YeN5qC35byPLeWFvOWuuWVkZ2UgJiYg6buR5aSc6ISa5pysKioqKioqKioqKioqICovCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIC8v5Yqg6L295pmu6YCa5qC35byPCiAgICAgICAgICAgICAgICAgICAgbG9hZENvbW1vblN0eWxlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFN0eWxlKENPTlNULmtleVNpdGUgKyAiQ29tbW9uU3R5bGUiLCBDT05TVC5rZXlTaXRlICsgIkNvbW1vblN0eWxlIik7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBsb2FkQmFpZHVMaXRlU3R5bGU6IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRTdHlsZSgiYmFpZHVMaXRlU3R5bGUiLCAiYmFpZHVMaXRlU3R5bGUiLCBudWxsLCBmYWxzZSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRQbGFpblRvQ1NTKCJiYWlkdUxpdGVTdHlsZSIpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgbG9hZFN0eWxlOiBmdW5jdGlvbiAoc3R5bGVOYW1lLCBpbnNDbGFzc05hbWUsIHNldFVybCwgdXNlTm9ybWFsQ1NTLCBtdXN0TG9hZCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyDlhajpg6jph4fnlKh0ZXh0L2Nzc+eahOWGheWuueadpei9veWFpQogICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzmmK9kZWJ1Z+aooeW8j+OAguaIluiAheaYr2dt5qih5byPCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0xvY2FsRGVidWcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKCLmnKzlnLAt5Yqg6L295qC35byP77yaIiArIGluc0NsYXNzTmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRVcmwgPSBzZXRVcmwgfHwgImh0dHA6Ly8xMjcuMC4wLjEvIiArIHN0eWxlTmFtZSArICIuY3NzIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1wb3J0U3R5bGUoc2V0VXJsLCAiQUMtIiArIGluc0NsYXNzTmFtZSwgdXNlTm9ybWFsQ1NTLCBtdXN0TG9hZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNOZXdHTSA9PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDku4XnlKjkuo5HcmVhc2VNb25rZXk0LjArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Zygi54m55q6K5qih5byPLeWKoOi9veagt+W8j++8miIgKyBpbnNDbGFzc05hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VXJsID0gc2V0VXJsIHx8ICJodHRwczovL2JhaWR1Lmh0dDUuY29tL25ld2Nzcy8iICsgc3R5bGVOYW1lICsgIi5jc3MiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbXBvcnRTdHlsZShzZXRVcmwsICJBQy0iICsgaW5zQ2xhc3NOYW1lLCB1c2VOb3JtYWxDU1MsIG11c3RMb2FkKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKCLliqDovb3moLflvI/vvJoiICsgaW5zQ2xhc3NOYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRhbXBlck1vbmtleSArIEdyZWFzZU1vbmtleSA8IDQuMCArIFZpb2xlbnRNb25rZXkgKDQuMEdyZWFzZU1vbmtleeS4jeaUr+aMgUdldFJlc291cmNl5pa55rOVKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbXBvcnRTdHlsZShHTV9nZXRSZXNvdXJjZVRleHQoc3R5bGVOYW1lKSwgIkFDLSIgKyBpbnNDbGFzc05hbWUsIHVzZU5vcm1hbENTUywgbXVzdExvYWQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAvL+WKoOi9veaKpOecvOaooeW8j+agt+W8jwogICAgICAgICAgICAgICAgICAgIGxvYWRIdVlhblN0eWxlOiBmdW5jdGlvbiAoY29sb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0eWxlID0gImJvZHlbYmFpZHVdLCN3cmFwcGVyICNoZWFkLCN3cmFwcGVyICNzX3RhYixmb3JtLmZtIC5zX2lwdF93ci5iZ3tiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9I2NvbnRhaW5lciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AsI2NvbnRhaW5lciAjY29udGVudF9sZWZ0IC5yZXN1bHQsI2NvbnRhaW5lciAjcnMsI2NvbnRhaW5lciAjY29udGVudF9yaWdodHtiYWNrZ3JvdW5kLWNvbG9yOiNhYWE7Ym9yZGVyOjFweCBkb3VibGUgI2EyZDdkNDtib3JkZXItcmFkaXVzOjB9I2NvbnRhaW5lciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3A6aG92ZXIsI2NvbnRhaW5lciAjY29udGVudF9sZWZ0IC5yZXN1bHQ6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojY2NjIWltcG9ydGFudH0jY29udGFpbmVyICNjb250ZW50X2xlZnQgLnJlc3VsdC1vcCBoMywjY29udGFpbmVyICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVyIGgzLCNjb250YWluZXIgI3JzIC50dHtiYWNrZ3JvdW5kLWNvbG9yOiNiYmJ9Lm5hX2NudCAubndzX2l0bSwubndzX2l0bWIsI2JfY29udGVudCAjYl9yZXN1bHRzIGxpLGJvZHkgI2JfaGVhZGVye2JhY2tncm91bmQtY29sb3I6I2FhYTtib3JkZXI6MXB4IGRvdWJsZSAjYTJkN2Q0O2JvcmRlci1yYWRpdXM6MH0jYl9jb250ZW50ICNiX3Jlc3VsdHMgbGk6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojY2NjIWltcG9ydGFudH0jYl9jb250ZW50ICNiX3Jlc3VsdHMgbGkgaDJ7YmFja2dyb3VuZC1jb2xvcjojYmJifSNyc28gLmcsLmJrV01nZD4uZywuYmtXTWdkIGctaW5uZXItY2FyZCwjcmhzY29sICNyaHMsI3Joc2NvbCAjcmhzIC5nPmRpdiwuYzJ4elRiIC5nLC5ydVRjSWQgLmcsLmZtMDZJZiAuZywuY1VuUUtlIC5nLC5IYW5RbWYgLmd7YmFja2dyb3VuZC1jb2xvcjojYWFhO2JvcmRlcjoxcHggZG91YmxlICNhMmQ3ZDQ7Ym9yZGVyLXJhZGl1czowfSNyc28gLmc6aG92ZXIsLmJrV01nZD4uZzpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNjY2MhaW1wb3J0YW50fS5ia1dNZ2QgLmcgZGl2LnIsI3JzbyAuZyBoM3tiYWNrZ3JvdW5kLWNvbG9yOiNiYmJ9IjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmlzVXNlckNvbG9yRW5hYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvciA9IGNvbG9yIHx8IEFDQ29uZmlnLmRlZmF1bHRIdVlhbkNvbG9yIHx8ICIjRkZGRkZGIjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yID0gY29sb3IgfHwgIiNGRkZGRkYiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2xvci5pbmRleE9mKCIjIikgIT0gMCB8fCBjb2xvci5sZW5ndGggPCA3KSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc05ld0dNID09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSA9IEdNX2dldFJlc291cmNlVGV4dCgiTWFpbkh1WWFuU3R5bGUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSA9IHN0eWxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvI2FhYShhKikvaWdtLCBjb2xvcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8jYmJiKGIqKS9pZ20sIHRoaXMuTGlnaHRlcihjb2xvciwgLTQwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8jY2NjKGMqKS9pZ20sIHRoaXMuTGlnaHRlcihjb2xvciwgNDUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgQUNfYWRkU3R5bGUoc3R5bGUsICJBQy0iICsgQ09OU1Qua2V5U2l0ZSArICJIdVlhblN0eWxlIiArIChpc05ld0dNID8gIiIgOiAiLUZpbGUiKSwgImhlYWQiKTsgLy8g6ZyA6KaB5L+u5pS555qE77yM5omA5Lul5Li6dHJ1ZQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgY2xpcDI1NTogZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA+IDI1NSkgcmV0dXJuIDI1NTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMCkgcmV0dXJuIDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIExpZ2h0ZXI6ZnVuY3Rpb24gKG9yaVJHQiwgZGVsdGFZKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaMieavlOS+i+e8qeaUviArIDEvZGVsdGFZCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhFWCAyIFJHQgogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmdiID0gb3JpUkdCLnJlcGxhY2UoIiMiLCAiIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBSID0gcGFyc2VJbnQoIjB4IiArIHJnYi5zdWJzdHIoMCwgMikpOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgRyA9IHBhcnNlSW50KCIweCIgKyByZ2Iuc3Vic3RyKDIsIDIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IEIgPSBwYXJzZUludCgiMHgiICsgcmdiLnN1YnN0cig0LCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJHQiAyIFlVVgogICAgICAgICAgICAgICAgICAgICAgICBsZXQgWSA9ICgoNjYgKiBSICsgMTI5ICogRyArIDI1ICogQiArIDEyOCkgPj4gOCkgKyAxNjsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IFUgPSAoKC0zOCAqIFIgLSA3NCAqIEcgKyAxMTIgKiBCICsgMTI4KSA+PiA4KSArIDEyODsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IFYgPSAoKDExMiAqIFIgLSA5NCAqIEcgLSAxOCAqIEIgKyAxMjgpID4+IDgpICsgMTI4OwogICAgICAgICAgICAgICAgICAgICAgICBZID0gWSAqICgxICsgMS4wIC8gZGVsdGFZKTsvLyDmj5Dpq5jkuq7luqYKICAgICAgICAgICAgICAgICAgICAgICAgLy8gWVVWIDIgUkdCCiAgICAgICAgICAgICAgICAgICAgICAgIFIgPSB0aGlzLmNsaXAyNTUoKDI5OCAqIChZIC0gMTYpICsgNDA5ICogKFYgLSAxMjgpICsgMTI4KSA+PiA4KTsKICAgICAgICAgICAgICAgICAgICAgICAgRyA9IHRoaXMuY2xpcDI1NSgoMjk4ICogKFkgLSAxNikgLSAxMDAgKiAoVSAtIDEyOCkgLSAyMDggKiAoViAtIDEyOCkgKyAxMjgpID4+IDgpOwogICAgICAgICAgICAgICAgICAgICAgICBCID0gdGhpcy5jbGlwMjU1KCgyOTggKiAoWSAtIDE2KSArIDUxNiAqIChVIC0gMTI4KSArIDEyOCkgPj4gOCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiIyIgKyAoKFIgPDwgMTYpICsgKEcgPDwgOCkgKyBCKS50b1N0cmluZygxNik7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAvL+WKoOi9veWNlemhteagt+W8jwogICAgICAgICAgICAgICAgICAgIGxvYWRPbmVQYWdlU3R5bGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkU3R5bGUoQ09OU1Qua2V5U2l0ZSArICJPbmVQYWdlU3R5bGUiLCBDT05TVC5rZXlTaXRlICsgIk9uZVBhZ2VTdHlsZSIpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgLy/liqDovb3lj4zpobXmoLflvI8KICAgICAgICAgICAgICAgICAgICBsb2FkVHdvUGFnZVN0eWxlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFN0eWxlKENPTlNULmtleVNpdGUgKyAiVHdvUGFnZVN0eWxlIiwgQ09OU1Qua2V5U2l0ZSArICJUd29QYWdlU3R5bGUiKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIC8vIOWKoOi9veS4ieWIl+agt+W8jwogICAgICAgICAgICAgICAgICAgIGxvYWRUaHJlZVBhZ2VTdHlsZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3NzSGVhZCA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09IFNpdGVUeXBlLkJBSURVKSBjc3NIZWFkID0gIiNjb250YWluZXIgI2NvbnRlbnRfbGVmdCwgYm9keVtuZXdzXSAjY29udGFpbmVyICNjb250ZW50X2xlZnQ+ZGl2Om5vdChbY2xhc3NdKTpub3QoW2lkXSkiOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09IFNpdGVUeXBlLkdPT0dMRSkgY3NzSGVhZCA9ICIuc3JnLCAjcnNvIjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PSBTaXRlVHlwZS5CSU5HKSBjc3NIZWFkID0gIiNiX2NvbnRlbnQgI2JfcmVzdWx0cyI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuU09HT1UpIGNzc0hlYWQgPSAiI21haW4gLnJlc3VsdHMiOwogICAgICAgICAgICAgICAgICAgICAgICBBQ19hZGRTdHlsZShjc3NIZWFkICsgIntncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpdCxtaW5tYXgoMzMlLDFmcikpO30gI2NvbnRhaW5lciAjY29udGVudF9sZWZ0Pio6bm90KFtjbGFzcyo9J3Jlc3VsdCddKTpsYXN0LWNoaWxkLCAjcnNvPmRpdjpub3QoLmcpLCAjcnNvIC5zcmd7Z3JpZC1jb2x1bW4tZW5kOiA0O30iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkFDLVRocmVlUGFnZVN0eWxlIiwgImhlYWQiKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIC8vIOWKoOi9veWbm+WIl+agt+W8jwogICAgICAgICAgICAgICAgICAgIGxvYWRGb3VyUGFnZVN0eWxlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjc3NIZWFkID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuQkFJRFUpIGNzc0hlYWQgPSAiI2NvbnRhaW5lciAjY29udGVudF9sZWZ0LCBib2R5W25ld3NdICNjb250YWluZXIgI2NvbnRlbnRfbGVmdD5kaXY6bm90KFtjbGFzc10pOm5vdChbaWRdKSI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuR09PR0xFKSBjc3NIZWFkID0gIi5zcmcsICNyc28iOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09IFNpdGVUeXBlLkJJTkcpIGNzc0hlYWQgPSAiI2JfY29udGVudCAjYl9yZXN1bHRzIjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PSBTaXRlVHlwZS5TT0dPVSkgY3NzSGVhZCA9ICIjbWFpbiAucmVzdWx0cyI7CiAgICAgICAgICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKGNzc0hlYWQgKyAie2dyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LG1pbm1heCgyNSUsMWZyKSk7fSAjY29udGFpbmVyICNjb250ZW50X2xlZnQ+Kjpub3QoW2NsYXNzKj0ncmVzdWx0J10pLCAjcnNvPmRpdjpub3QoLmcpLCAjcnNvIC5zcmd7Z3JpZC1jb2x1bW4tZW5kOiA1O30iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkFDLUZvdXJQYWdlU3R5bGUiLCAiaGVhZCIpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgbG9hZFBsYWluVG9DU1M6IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9jdW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1ck5vZGUgPSBkb2N1bWVudC5jaGlsZE5vZGVzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY3VyTm9kZS5kZWwpIGN1ck5vZGUucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgic3R5bGVbY2xhc3MqPSdBQyddW2RlbD0nMSddIikuZm9yRWFjaChmdW5jdGlvbiAocGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXIucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgLy8g56aB5q2i54us56uL55qE5qC35byP5Yqg6L29CiAgICAgICAgICAgICAgICAgICAgbG9hZENTU1RvUGxhaW46IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9jdW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1ck5vZGUgPSBkb2N1bWVudC5jaGlsZE5vZGVzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5piv5a2Y5ZyoY3Nz77yMIOS4lOmdnuW/hemhu+aVsOaNrgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1ck5vZGUudGFyZ2V0ID09ICJ4bWwtc3R5bGVzaGVldCIgJiYgY3VyTm9kZS5kYXRhLmluZGV4T2YoIm11c3Q9XCJ0cnVlIikgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyTm9kZS5kYXRhID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyTm9kZS5kZWwgPSB0cnVlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlr7nkuo5lZGdl5ZKMc2FmYXJp6YO954m55q6K5aSE55CG5LiA5LiL5ZCnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImVkZ2UiKSA+IDAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoInNhZmFyaSIpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ck5vZGUucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGxldCBDb250cm9sTWFuYWdlciA9IHsKICAgICAgICAgICAgICAgICAgICAvL+WxheS4reaYvuekuiAtLS0g5b+F6aG75piv55m+5bqm5ZKM6LC35q2M55qE5pCc57Si57uT5p6c6aG16Z2i77yM5YW25LuW6aG16Z2i5LiN6IO95Yqg6L2955qELS3lt7Lnu4/pgJrov4fohJrmnKxpbmNsdWRl5qCH562+6ZmQ5Yi25LqG5LiA6YOo5YiGCiAgICAgICAgICAgICAgICAgICAgY2VudGVyRGlzcGxheTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBBQ19hZGRTdHlsZSgiLm1pbmlkaXYgI2xvZ28gaW1ne3dpZHRoOiAxMDBweDtoZWlnaHQ6IHVuc2V0O21hcmdpbi10b3A6IDAuM3JlbTt9IiwgIkFDLXN0eWxlLWxvZ28iLCAiaGVhZCIpOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gQ09OU1QuQWRzU3R5bGVNb2RlIHx8IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY0Nzc0xvYWRGbGFnID09IGZhbHNlICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5BQ0V4dGVuc2lvbiIpID09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKCJpbuagt+W8j+WNs+WwhuWKoOi9vToiK3Jlc3VsdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXhwYW5kU3R5bGUgPSAiI2NvbnRlbnRfbGVmdCAucmVzdWx0LW9wOmhvdmVyLCNjb250ZW50X2xlZnQgLnJlc3VsdDpob3Zlcntib3gtc2hhZG93OjAgMCAycHggZ3JheTtiYWNrZ3JvdW5kOnJnYmEoMjMwLDIzMCwyMzAsMC4xKSFpbXBvcnRhbnQ7fSN3cmFwcGVyICNycywgI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LCAjd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lcnttaW4td2lkdGg6NjcwcHg7fS5jLXNwYW4xOHt3aWR0aDo3OCUhaW1wb3J0YW50O21pbi13aWR0aDo1NTBweDt9LmMtc3BhbjI0e3dpZHRoOiBhdXRvIWltcG9ydGFudDt9IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKGV4cGFuZFN0eWxlLCAiQUMtU3R5bGUtZXhwYW5kIiwgImhlYWQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkQ29tbW9uU3R5bGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0ID09IDIpIHsvL+WNlemhteWxheS4rQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKGV4cGFuZFN0eWxlLCAiQUMtU3R5bGUtZXhwYW5kIiwgImhlYWQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkQ29tbW9uU3R5bGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkT25lUGFnZVN0eWxlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCA9PSAzKSB7IC8v5Y+M6aG15bGF5LitCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZENvbW1vblN0eWxlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZFR3b1BhZ2VTdHlsZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT0gNCkgeyAvLyDkuInliJcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkQ29tbW9uU3R5bGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkVHdvUGFnZVN0eWxlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZFRocmVlUGFnZVN0eWxlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCA9PSA1KSB7IC8vIOWbm+WIlwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRDb21tb25TdHlsZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRUd29QYWdlU3R5bGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkRm91clBhZ2VTdHlsZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNDc3NMb2FkRmxhZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZygiaW7moLflvI/ov5DooYznu5PmnZ8iKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoY3VyU2l0ZS5TaXRlVHlwZUlEID09IFNpdGVUeXBlLkJBSURVICYmIEFDQ29uZmlnLlN0eWxlX0JhaWR1TGl0ZSA9PSB0cnVlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRCYWlkdUxpdGVTdHlsZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgIT0gU2l0ZVR5cGUuQkFJRFUgJiYgY3VyU2l0ZS5TaXRlVHlwZUlEICE9IFNpdGVUeXBlLkJBSURVX1hVRVNIVSAmJiBjdXJTaXRlLlNpdGVUeXBlSUQgIT0gU2l0ZVR5cGUuR09PR0xFICYmIGN1clNpdGUuU2l0ZVR5cGVJRCAhPSBTaXRlVHlwZS5CSU5HICYmIGN1clNpdGUuU2l0ZVR5cGVJRCAhPSBTaXRlVHlwZS5TT0dPVSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzmmK/nmb7luqYgJiYgICgo5Zyw5Z2A5pu/5o2iLT7ljIXlkKt3ZOWFs+mUruivjVvmm7/mjaLkuYvlkI7kuI3nrYkt5piv55m+5bqm57uT5p6c6aG16Z2iXSkgfHwg5pyJ5Y+z6L655qCPLeiCr+WumuaYr+eZvuW6puaQnOe0oue7k+aenOmhtSB8fCB2YWx1ZeS4reWtmOWcqOaQnOe0ouWGheWuuSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrSVNCYWlkdU1haW4oKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZENTU1RvUGxhaW4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzmmK/osLfmrYwgJiYgKOWcsOWdgOabv+aNoi0+5piv6LC35q2M5Zu+5YOP6aG16Z2iIHx8IOaYr+WcsOWbvumhtemdoilb5pu/5o2i6KaB5Y+YXSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuR09PR0xFICYmIGxvY2F0aW9uLmhyZWYucmVwbGFjZSgvdGJtPShpc2NofGxjbHxzaG9wfGZsbSkvLCAiIikgIT0gbG9jYXRpb24uaHJlZikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZENTU1RvUGxhaW4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAvKirmiqTnnLxTdHlsZeacgOWQjui9veWFpSoqLwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoQ09OU1QuSHVZYW5Nb2RlID09IHRydWUgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcigic3R5bGVbY2xhc3MqPSdkYXJrcmVhZGVyJ10iKSAhPSBudWxsKSBDT05TVC5TdHlsZU1hbmdlci5sb2FkSHVZYW5TdHlsZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZFBsYWluVG9DU1MoKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKENPTlNULmlzR29vZ2xlSW1hZ2VVcmwpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jZW50ZXJEaXNwbGF5KCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGRlYnVnKCLosIPnlKjliqDovb3oh6rlrprkuYljc3MiKTsKICAgICAgICAgICAgICAgIENvbnRyb2xNYW5hZ2VyLmluaXQoKTsKICAgICAgICAgICAgICAgIHJldHVybiBDT05TVC5TdHlsZU1hbmdlcjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pKCk7Cn0oKTsK","resources":[{"meta":{"name":"baiduCommonStyle.css","url":"http://ibaidu.htt5.com/newcss/baiduCommonStyle.css?t=23.31","ts":1587235898679,"mimetype":"text/css"},"source":"aWZyYW1lLC5yZXNfdG9wX2Jhbm5lciAjZm9vdCwjcGFnZSAuZmssI2hlYWQgLmhlYWRCbG9jaywjcnNfdG9wX25ldywjd3JhcHBlciAjY29udGVudF9sZWZ0PnRhYmxlLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtcmVjb21tZW5kLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLmxlZnRCbG9jaywjd3JhcHBlciAjY29udGVudF9sZWZ0IC5ycmVjb20tYnRuLXBhcmVudCwjZGVtbywjd3JhcHBlciAjZ290b1BhZ2UsYm9keT5kaXYucmVzdWx0LW9wLC5ycmVjb20tY29udGFpbmVyLC5jaHVud2FuLXdyYXBwZXJ7ZGlzcGxheTpub25lIWltcG9ydGFudH0jd3JhcHBlciAjY29udGVudF9yaWdodHttYXJnaW4tcmlnaHQ6LTYlfWJvZHlbYmFpZHVde2JhY2tncm91bmQtY29sb3I6I2Y1ZjVmNX0jYWxhX2ltZ19yZXN1bHRze292ZXJmbG93OmhpZGRlbn1ib2R5IGEsYm9keSBhIGVte3RleHQtZGVjb3JhdGlvbjpub25lfSN3cmFwcGVyICNzX3RhYntib3JkZXItYm90dG9tOiNlMGUwZTAgMXB4IHNvbGlkO2JhY2tncm91bmQtY29sb3I6I2Y4ZjhmOH1ib2R5ICNoZWFke2JhY2tncm91bmQtY29sb3I6I2Y4ZjhmODtib3JkZXItYm90dG9tOm5vbmV9Zm9ybS5mbXtiYWNrZ3JvdW5kLWNvbG9yOnVuc2V0fWZvcm0uZm0gLmJkc3VnIGxpe3dpZHRoOmF1dG87Y29sb3I6IzAwMDtmb250OjE1cHggYXJpYWw7bGluZS1oZWlnaHQ6MjZweH1mb3JtLmZtIC5zX2lwdF93ci5iZ3tiYWNrZ3JvdW5kOiNmZmY7d2lkdGg6NjYlO21pbi13aWR0aDo1NzBweH0jaGVhZCAuaGVhZF93cmFwcGVye3dpZHRoOnVuc2V0fWZvcm0uZm0gLnNfYnRue2JhY2tncm91bmQ6IzI4NjZiZDtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjNDg3OWJkfWZvcm0uZm0gLnNfYnRuOmhvdmVye2JhY2tncm91bmQ6IzRmN2ZiZjtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjMjg2NmJkfSN3cmFwcGVyICNzX3RhYiBie2NvbG9yOiMyODY2YmQ7Ym9yZGVyLWJvdHRvbTozcHggIzI4NjZiZCBzb2xpZH0jdSBhe3RleHQtZGVjb3JhdGlvbjpub25lfSN3cmFwcGVyIC5oZWFkX251bXNfY29udF9vdXRlciAuc2VhcmNoX3Rvb2xfY29udGVyLCN3cmFwcGVyIC5oZWFkX251bXNfY29udF9vdXRlciAubnVtc3t3aWR0aDo2MzBweH0jd3JhcHBlciAjY29udGVudF9sZWZ0e2FuaW1hdGlvbi1uYW1lOmFuaV9ib3R0b21Ub3RvcDstd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjouMnM7LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2V9I2hlYWQgLmhlYWRfd3JhcHBlcnthbmltYXRpb24tbmFtZTphbmlfbGVmdFRvcmlnaHQ7LXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246LjJzOy13ZWJraXQtYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjplYXNlLW91dH0jd3JhcHBlciAjcnMsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LCN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVye3dpZHRoOjY3MHB4O3BhZGRpbmc6MCAyMHB4IDE1cHg7bWFyZ2luLXRvcDowO21hcmdpbi1ib3R0b206MzBweDtib3JkZXItcmFkaXVzOjA7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2hhZG93OjAgMCAycHggZ3JheTtib3JkZXI6MXB4IHNvbGlkIHRyYW5zcGFyZW50Oy13ZWJraXQtYm94LXNoYWRvdzowIDAgMnB4IGdyYXk7LW1vei1ib3gtc2hhZG93OjAgMCAycHggZ3JheTt0cmFuc2l0aW9uOmFsbCAuMnMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30jd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3A6aG92ZXIsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0OmhvdmVyLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdC1vcDpob3ZlciBhcnRpY2xle2JveC1zaGFkb3c6MCAwIDE1cHggM3B4IHJnYmEoMCwwLDAsLjE4KTtib3JkZXI6MXB4IHNvbGlkIHJnYmEoMCwwLDAsLjIpO2JhY2tncm91bmQ6I2YzZjNmM30jd3JhcHBlciAjcnNbYWMtbmVlZGhpZGVdLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdFthYy1uZWVkaGlkZV0sI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXJbYWMtbmVlZGhpZGVde3BhZGRpbmc6NXB4O3BhZGRpbmctbGVmdDoxNXB4fSN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdFt0cGw9c29mdF0gLm9wLXNvZnQtdGl0bGUsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVyIGgze2JhY2tncm91bmQtY29sb3I6I2Y4ZjhmODttYXJnaW46MCAtMjBweCAxMHB4O3BhZGRpbmc6OHB4IDIwcHggNXB4O2JvcmRlci1yYWRpdXM6NXB4IDVweCAwIDB9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuZjEzIGEsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuZjEzIGVtLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtc3BhbjE4IGEsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuc3ViTGlua19mYWN0b3J5IGEsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy10YWJzLWNvbnRlbnQgYSwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcF9vZmZpY2FsX3dlaWJvX2NvbnRlbnQgYSwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcF9vZmZpY2FsX3dlaWJvX3B6IGEsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3BfdGllYmEyX3RhYmxpbmtzX2NvbnRhaW5lciBhLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXRpZWJhLWdlbmVyYWwtcmlnaHQsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3BfZHEwMV90aXRsZSwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcF9kcTAxX3RhYmxlIGEsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3BfZHEwMV9tb3JlbGluayBhLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXRpZWJhLWdlbmVyYWwtbWFpbnBsIGEsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc2UtbGlzdGVuLXJlY29tbWVuZCwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLW9mZnNldD5kaXYgYXt0ZXh0LWRlY29yYXRpb246bm9uZTtjb2xvcjojMjg2NmJkfSN3cmFwcGVyICNjb250ZW50X2xlZnQgLmYxMyBhOmhvdmVyLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLmYxMyBlbTpob3Zlciwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5zdWJMaW5rX2ZhY3RvcnkgYTpob3Zlciwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLXRhYnMtY29udGVudCBhOmhvdmVyLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wX3RpZWJhMl90YWJsaW5rc19jb250YWluZXIgYTpob3Zlciwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcC10aWViYS1nZW5lcmFsLXJpZ2h0OmhvdmVyLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wX2RxMDFfdGl0bGU6aG92ZXIsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3BfZHEwMV90YWJsZSBhOmhvdmVyLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wX2RxMDFfbW9yZWxpbmsgYTpob3Zlciwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcC10aWViYS1nZW5lcmFsLW1haW5wbCBhOmhvdmVyLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNlLWxpc3Rlbi1yZWNvbW1lbmQ6aG92ZXIsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1vZmZzZXQ+ZGl2IGE6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZSFpbXBvcnRhbnR9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuZjEzIGF7Y29sb3I6Z3JlZW59I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1zcGFuMTgsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1zcGFuMjR7d2lkdGg6MTAwJTttaW4td2lkdGg6dW5zZXR9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1ib3JkZXJ7d2lkdGg6YXV0bztib3JkZXI6bm9uZTtib3JkZXItYm90dG9tLWNvbG9yOnRyYW5zcGFyZW50O2JvcmRlci1yaWdodC1jb2xvcjp0cmFuc3BhcmVudDtib3gtc2hhZG93OjAgMCAwIHRyYW5zcGFyZW50Oy13ZWJraXQtYm94LXNoYWRvdzowIDAgMCB0cmFuc3BhcmVudDstbW96LWJveC1zaGFkb3c6MCAwIDAgdHJhbnNwYXJlbnQ7LW8tYm94LXNoYWRvdzowIDAgMCB0cmFuc3BhcmVudH0jd3JhcHBlciAjY29udGVudF9sZWZ0IC5zZV9jb21faXJyZWd1bGFyX2dhbGxlcnkgdWwgbGksI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3BfamluZ3lhbl9saXN0LCN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCAub3AtaW1nLWFkZHJlc3MtbGluay10eXBle2Rpc3BsYXk6aW5saW5lLWJsb2NrO21hcmdpbi1sZWZ0OjEwcHh9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXJbdHBsPXNvZnRdIC5vcC1zb2Z0LXRpdGxlIGEsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXJbdHBsPXNvZnRdIC5vcC1zb2Z0LXRpdGxlIGEgZW0sI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXIgaDMgYSwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMgYSBlbXtjb2xvcjojMjg2NmJkO2ZvbnQtd2VpZ2h0OjcwMH0jd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcC1zb2Z0LXRpdGxlIGEsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzIGF7cG9zaXRpb246cmVsYXRpdmV9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhIGVtLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCBoMyBhIGVte3RleHQtZGVjb3JhdGlvbjpub25lfSN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNvZnQtdGl0bGUgYTpob3ZlcjphZnRlciwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMgYTpob3ZlcjphZnRlcntsZWZ0OjA7d2lkdGg6MTAwJTstd2Via2l0LXRyYW5zaXRpb246d2lkdGggMzUwbXM7LW1vei10cmFuc2l0aW9uOndpZHRoIDM1MG1zO3RyYW5zaXRpb246d2lkdGggMzUwbXN9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhOmFmdGVyLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCBoMyBhOmFmdGVye2NvbnRlbnQ6IiI7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyLWJvdHRvbToycHggc29saWQgIzI4NjZiZDtib3R0b206LTJweDtsZWZ0OjEwMCU7d2lkdGg6MDstd2Via2l0LXRyYW5zaXRpb246d2lkdGggMzUwbXMsbGVmdCAzNTBtczstbW96LXRyYW5zaXRpb246d2lkdGggMzUwbXMsbGVmdCAzNTBtczt0cmFuc2l0aW9uOndpZHRoIDM1MG1zLGxlZnQgMzUwbXN9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdC1vcCBoM3tmb250LXdlaWdodDo3MDA7Zm9udC1zaXplOm1lZGl1bX0jd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcC1zb2Z0LXRpdGxlIGEgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzIGF7cG9zaXRpb246cmVsYXRpdmV9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhOnZpc2l0ZWQsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhOnZpc2l0ZWQgZW0sI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzIGE6dmlzaXRlZCwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMgYTp2aXNpdGVkIGVte2NvbG9yOiM2MDl9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhOnZpc2l0ZWQ6aG92ZXI6YWZ0ZXIsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzIGE6dmlzaXRlZDpob3ZlcjphZnRlcntsZWZ0OjA7d2lkdGg6MTAwJTstd2Via2l0LXRyYW5zaXRpb246d2lkdGggMzUwbXM7LW1vei10cmFuc2l0aW9uOndpZHRoIDM1MG1zO3RyYW5zaXRpb246d2lkdGggMzUwbXN9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhOnZpc2l0ZWQ6YWZ0ZXIsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzIGE6dmlzaXRlZDphZnRlcntjb250ZW50OiIiO3Bvc2l0aW9uOmFic29sdXRlO2JvcmRlci1ib3R0b206MnB4IHNvbGlkICM2MDk7Ym90dG9tOi0ycHg7bGVmdDoxMDAlO3dpZHRoOjA7LXdlYmtpdC10cmFuc2l0aW9uOndpZHRoIDM1MG1zLGxlZnQgMzUwbXM7LW1vei10cmFuc2l0aW9uOndpZHRoIDM1MG1zLGxlZnQgMzUwbXM7dHJhbnNpdGlvbjp3aWR0aCAzNTBtcyxsZWZ0IDM1MG1zfSN3cmFwcGVyICNycywjd3JhcHBlciAjcnN7bWFyZ2luLXRvcDowO3BhZGRpbmc6MCAyMHB4IDE1cHg7Ym9yZGVyLXJhZGl1czo1cHh9I3dyYXBwZXIgI3JzIC50dHttYXJnaW46MCAtMjBweCA1cHg7cGFkZGluZzo1cHggMjBweDtiYWNrZ3JvdW5kLWNvbG9yOiNmOGY4Zjg7Ym9yZGVyLXJhZGl1czo1cHggNXB4IDAgMH0jd3JhcHBlciAjcnMgdGFibGV7d2lkdGg6NjMwcHg7cGFkZGluZzo1cHggMTVweH0jd3JhcHBlciAjcnMgdGFibGUgdHIgYXttYXJnaW4tdG9wOjVweDttYXJnaW4tYm90dG9tOjVweDtjb2xvcjojMjg2NmJkfSN3cmFwcGVyICNycyB0YWJsZSB0ciBhOmhvdmVye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmV9I3dyYXBwZXIgI3BhZ2V7bWluLXdpZHRoOjcxMHB4O2hlaWdodDo0MHB4O2xpbmUtaGVpZ2h0OjQwcHg7cGFkZGluZy10b3A6NXB4O21hcmdpbjowIDAgNTBweCA4MHB4fS5vcC1pbWctYWRkcmVzcy1kZXNrdG9wLWNvbnR7b3ZlcmZsb3c6aGlkZGVufSN3cmFwcGVyICNwYWdlIGEsI3dyYXBwZXIgI3BhZ2Ugc3Ryb25ne2NvbG9yOiMyODY2YmQ7aGVpZ2h0OmF1dG87Ym94LXNoYWRvdzowIDAgMnB4IGdyYXk7LXdlYmtpdC1ib3gtc2hhZG93OjAgMCAycHggZ3JheTstbW96LWJveC1zaGFkb3c6MCAwIDJweCBncmF5fSN3cmFwcGVyICNwYWdlIC5uOmhvdmVyLCN3cmFwcGVyICNwYWdlIGE6aG92ZXIgLnBje2JvcmRlcjoxcHggc29saWQgdHJhbnNwYXJlbnQ7YmFja2dyb3VuZDojZDhkOGQ4O2NvbG9yOiMwMDU3ZGF9I3dyYXBwZXIgI3BhZ2Ugc3Ryb25nIC5wY3tiYWNrZ3JvdW5kOiM0ODc5YmQ7Y29sb3I6I2ZmZn0ub3AtaW1nLWFkZHJlc3MtZGl2aWRlLWhpZ2h7b3ZlcmZsb3c6aGlkZGVufSN3cmFwcGVyICNrd3t3aWR0aDo5NCV9QC13ZWJraXQta2V5ZnJhbWVzIGFuaV9ib3R0b21Ub3RvcHswJXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDMycHgpO29wYWNpdHk6MH0yMCV7b3BhY2l0eTowfTMwJXtvcGFjaXR5Oi44fTEwMCV7b3BhY2l0eToxfX1ALXdlYmtpdC1rZXlmcmFtZXMgYW5pX2xlZnRUb3JpZ2h0ezAley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTMycHgpO29wYWNpdHk6MH0yMCV7b3BhY2l0eTowfTMwJXtvcGFjaXR5Oi44fTEwMCV7b3BhY2l0eToxfX1ALXdlYmtpdC1rZXlmcmFtZXMgYW5pX3RvcFRvYnV0dG9tezAley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTMycHgpO29wYWNpdHk6MH0yMCV7b3BhY2l0eTowfTMwJXtvcGFjaXR5Oi44fTEwMCV7b3BhY2l0eToxfX0ucmVzdWx0LW9wLmMtY29udGFpbmVyIC5jLXJlc3VsdC1jb250ZW50e3BhZGRpbmctdG9wOjIwcHh9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LW9wIGFydGljbGV7cGFkZGluZy10b3A6MTVweH1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjEyODBweCl7I3UgLnRvaW5kZXgsI3UgI2ltc2d7ZGlzcGxheTpub25lfX1AbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOjE5MjFweCl7I2hlYWQgLmhlYWRfd3JhcHBlcnstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMTQwcHgsMCwxcHgpO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMTQwcHgsMCwxcHgpO2p1c3RpZnktY29udGVudDpjZW50ZXI7ZGlzcGxheTpmbGV4fX0="},{"meta":{"name":"baiduOnePageStyle.css","url":"http://ibaidu.htt5.com/newcss/baiduOnePageStyle.css?t=23.31","ts":1587235898679,"mimetype":"text/css"},"source":"I3dyYXBwZXJfd3JhcHBlciAjY29udGFpbmVye3dpZHRoOjEwMCV9Zm9ybS5mbXtwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOnVuc2V0fWJvZHlbYmFpZHVdIC5wYWdlZm9vdC5nanttYXJnaW4tdG9wOjEwMHB4fSNyZXN1bHRfbG9nb3twb3NpdGlvbjpyZWxhdGl2ZTttYXJnaW46MTBweCAwIDB9I3NfdGFiIGIsI3NfdGFiIGF7cG9zaXRpb246cmVsYXRpdmV9I3dyYXBwZXIgLmhlYWRfbnVtc19jb250X291dGVye3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MjAlO3dpZHRoOjYwJX0jd3JhcHBlciAjY29udGVudF9sZWZ0LCN3cmFwcGVyICNycywjd3JhcHBlciAjcGFnZXt0b3A6MzVweDtwb3NpdGlvbjpyZWxhdGl2ZTtwYWRkaW5nLWxlZnQ6MDt3aWR0aDo1MCUhaW1wb3J0YW50O21pbi13aWR0aDo2NzBweDtmbG9hdDp1bnNldDttYXJnaW4tbGVmdDp1bnNldDttYXJnaW46MCBhdXRvfSN3cmFwcGVyICNwYWdle2JhY2tncm91bmQ6dW5zZXR9I3dyYXBwZXIgI3JzIC50dHttYXJnaW46MCAtMjBweCAxcHggMH0jd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lcnt3aWR0aDoxMDAlIWltcG9ydGFudDttaW4td2lkdGg6NjUwcHh9QG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDoxMDAwcHgpeyN3cmFwcGVyICNjb250ZW50X2xlZnQsI3dyYXBwZXIgI3Jze21pbi13aWR0aDo4NTBweH19I3dyYXBwZXIgI2NvbnRlbnRfcmlnaHR7bWFyZ2luLXJpZ2h0OmNhbGMoMTV2dyAtIDIxMHB4KTtkaXNwbGF5Om5vbmV9QG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDoxNjAwcHgpeyN3cmFwcGVyICNjb250ZW50X3JpZ2h0e2Rpc3BsYXk6YmxvY2s7ZmxvYXQ6dW5zZXQ7cG9zaXRpb246YWJzb2x1dGV9fSN3cmFwcGVyICNwYWdlIGEsI3dyYXBwZXIgI3BhZ2Ugc3Ryb25ne21hcmdpbi1yaWdodDoyMnB4IWltcG9ydGFudH0uc190YWJfaW5uZXJ7ZGlzcGxheTpibG9jayFpbXBvcnRhbnR9I2NvbnRhaW5lciAuaGludF9jb21tb25fcmVzdG9we3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6Y2FsYyg0NXZ3IC0gNTAwcHgpO21hcmdpbi10b3A6MjVweH0jc2VqLWNvbnRhaW5lcntwYWRkaW5nLWxlZnQ6Y2FsYyg0NCUgLSA0NzhweCkhaW1wb3J0YW50fS5zX2Zvcm1fd3JhcHBlcntqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2Rpc3BsYXk6ZmxleH0jd3JhcHBlciAjc190YWJ7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7bWFyZ2luLWxlZnQ6LTEyMXB4fSN3cmFwcGVyIC5oZWFkX251bXNfY29udF9vdXRlciAuc2VhcmNoX3Rvb2xfY29udGVyLCN3cmFwcGVyIC5oZWFkX251bXNfY29udF9vdXRlciAubnVtc3t3aWR0aDo4MCV9QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDoxNDUwcHgpe2Zvcm0uZm0gLnNfaXB0X3dyLmJne21pbi13aWR0aDozNzBweH19"},{"meta":{"name":"baiduTwoPageStyle.css","url":"http://ibaidu.htt5.com/newcss/baiduTwoPageStyle.css?t=23.31","ts":1587235898679,"mimetype":"text/css"},"source":"I3dyYXBwZXJfd3JhcHBlciAjY29udGFpbmVye3dpZHRoOmF1dG99Zm9ybS5mbXtwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOnVuc2V0fSN3cmFwcGVyIC5zX3RhYl9pbm5lciwjc190YWIgLnRhYi13cmFwcGVye21hcmdpbi1sZWZ0OjEyJX0jc190YWIgYiwjc190YWIgYXtwb3NpdGlvbjpyZWxhdGl2ZX0jd3JhcHBlciAuaGVhZF9udW1zX2NvbnRfb3V0ZXIgLnNlYXJjaF90b29sX2NvbnRlciwjd3JhcHBlciAuaGVhZF9udW1zX2NvbnRfb3V0ZXIgLm51bXN7d2lkdGg6ODAlfSN3cmFwcGVyIC5oZWFkX251bXNfY29udF9vdXRlciwuaGludF9jb21tb25fcmVzdG9wLCNoZWFkZXJfdG9wX2Jhcntwb3NpdGlvbjpyZWxhdGl2ZTtsZWZ0OjEwJTt3aWR0aDo4MCV9I3dyYXBwZXIgI2hlYWRlcl90b3BfYmFye21hcmdpbi1ib3R0b206MH0jd3JhcHBlciAjY29udGVudF9sZWZ0e2Rpc3BsYXk6aW5saW5lLWdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjUwJSA1MCU7bWFyZ2luOjAgYXV0bztwb3NpdGlvbjpyZWxhdGl2ZTtwYWRkaW5nLWxlZnQ6NSU7ZmxvYXQ6dW5zZXQ7d2lkdGg6ODAlO21hcmdpbi1sZWZ0OjclO21hcmdpbi1ib3R0b206MzBweH1ib2R5W25ld3NdICN3cmFwcGVyICNjb250ZW50X2xlZnQ+ZGl2Om5vdChbY2xhc3NdKTpub3QoW2lkXSl7ZGlzcGxheTppbmxpbmUtZ3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6NTAlIDUwJX0jd3JhcHBlciAjY29udGVudF9yaWdodHtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fSN3cmFwcGVyICNyc3twb3NpdGlvbjpyZWxhdGl2ZTttYXJnaW46MCBhdXRvfSN3cmFwcGVyICNwYWdle21pbi13aWR0aDo3MTBweDtoZWlnaHQ6NDBweDtsaW5lLWhlaWdodDo0MHB4O3BhZGRpbmc6NXB4IDEwcHg7bWFyZ2luOjAgYXV0bzt0ZXh0LWFsaWduOmNlbnRlcjtwb3NpdGlvbjpyZWxhdGl2ZX0jd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXJ7d2lkdGg6dW5zZXQhaW1wb3J0YW50O21heC13aWR0aDoxMDAlO21hcmdpbi1sZWZ0OjVweDttYXJnaW4tcmlnaHQ6MTVweH0jd3JhcHBlciAjY29udGVudF9sZWZ0Pio6bm90KFtjbGFzcyo9cmVzdWx0XSl7Z3JpZC1jb2x1bW4tc3RhcnQ6MTtncmlkLWNvbHVtbi1lbmQ6M30uYy1jb250YWluZXIgaDMgYXt6LWluZGV4OjF9I3Nlai1jb250YWluZXJ7cGFkZGluZy1sZWZ0OmNhbGMoMTIlIC0gMTEzcHgpIWltcG9ydGFudH0uc19mb3JtX3dyYXBwZXJ7anVzdGlmeS1jb250ZW50OmNlbnRlcjtkaXNwbGF5OmZsZXh9I3dyYXBwZXIgLmhlYWRfbnVtc19jb250X291dGVyIC5zZWFyY2hfdG9vbF9jb250ZXIsI3dyYXBwZXIgLmhlYWRfbnVtc19jb250X291dGVyIC5udW1ze3dpZHRoOjgwJX1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjEzODhweCl7Zm9ybS5mbSAuc19pcHRfd3IuYmd7bWluLXdpZHRoOjMwMHB4fX0="},{"meta":{"name":"baiduLiteStyle.css","url":"http://ibaidu.htt5.com/newcss/baiduLiteStyle.css?t=23.31","ts":1587235898681,"mimetype":"text/css"},"source":"Kntmb250LWZhbWlseTotYXBwbGUtc3lzdGVtLGhlbHZldGljYSBuZXVlLEhlbHZldGljYSxuaW1idXMgc2FucyBsLEFyaWFsLGxpYmVyYXRpb24gc2FucyxwaW5nZmFuZyBzYyxoaXJhZ2lubyBzYW5zIGdiLHNvdXJjZSBoYW4gc2FucyBjbixzb3VyY2UgaGFuIHNhbnMgc2MsbWljcm9zb2Z0IHlhaGVpLHdlbnF1YW55aSBtaWNybyBoZWksd2VucXVhbnlpIHplbiBoZWksc3QgaGVpdGksU2ltSGVpLHdlbnF1YW55aSB6ZW4gaGVpIHNoYXJwLHNhbnMtc2VyaWZ9Ojotd2Via2l0LXNjcm9sbGJhcnt3aWR0aDo2cHg7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudH06Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNre2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwuMSl9Ojotd2Via2l0LXNjcm9sbGJhci10aHVtYntib3JkZXItcmFkaXVzOjNweDtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjIpO3RyYW5zaXRpb246YWxsIC40cyBlYXNlOy1tb3otdHJhbnNpdGlvbjphbGwgLjRzIGVhc2U7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuNHMgZWFzZTstby10cmFuc2l0aW9uOmFsbCAuNHMgZWFzZX06Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmhvdmVye2JvcmRlci1yYWRpdXM6M3B4O2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwuNCk7dHJhbnNpdGlvbjphbGwgLjRzIGVhc2U7LW1vei10cmFuc2l0aW9uOmFsbCAuNHMgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC40cyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC40cyBlYXNlfS5hbmltYXRlZHstd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjoxczthbmltYXRpb24tZHVyYXRpb246MXM7YW5pbWF0aW9uLWZpbGwtbW9kZTpib3RofUAtd2Via2l0LWtleWZyYW1lcyBmYWRlSW5VcHtmcm9te29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDEwMCUsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMTAwJSwwKX10b3tvcGFjaXR5OjE7LXdlYmtpdC10cmFuc2Zvcm06bm9uZTt0cmFuc2Zvcm06bm9uZX19QGtleWZyYW1lcyBmYWRlSW5VcHtmcm9te29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDEwMCUsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMTAwJSwwKX10b3tvcGFjaXR5OjE7LXdlYmtpdC10cmFuc2Zvcm06bm9uZTt0cmFuc2Zvcm06bm9uZX19LmZhZGVJblVwey13ZWJraXQtYW5pbWF0aW9uLW5hbWU6ZmFkZUluVXA7YW5pbWF0aW9uLW5hbWU6ZmFkZUluVXB9QC13ZWJraXQta2V5ZnJhbWVzIGJvdW5jZUluUmlnaHR7NjAlLDc1JSw5MCUsZnJvbSx0b3std2Via2l0LWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKC4yMTUsLjYxLC4zNTUsMSk7YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoLjIxNSwuNjEsLjM1NSwxKX1mcm9te29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgzMDAwcHgsMCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMzAwMHB4LDAsMCl9NjAle29wYWNpdHk6MTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMjVweCwwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMjVweCwwLDApfTc1JXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgxMHB4LDAsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDEwcHgsMCwwKX05MCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoLTVweCwwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtNXB4LDAsMCl9dG97LXdlYmtpdC10cmFuc2Zvcm06bm9uZTt0cmFuc2Zvcm06bm9uZX19QGtleWZyYW1lcyBib3VuY2VJblJpZ2h0ezYwJSw3NSUsOTAlLGZyb20sdG97LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllciguMjE1LC42MSwuMzU1LDEpO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKC4yMTUsLjYxLC4zNTUsMSl9ZnJvbXtvcGFjaXR5OjA7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMzAwMHB4LDAsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDMwMDBweCwwLDApfTYwJXtvcGFjaXR5OjE7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoLTI1cHgsMCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoLTI1cHgsMCwwKX03NSV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMTBweCwwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgxMHB4LDAsMCl9OTAley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKC01cHgsMCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoLTVweCwwLDApfXRvey13ZWJraXQtdHJhbnNmb3JtOm5vbmU7dHJhbnNmb3JtOm5vbmV9fS5ib3VuY2VJblJpZ2h0ey13ZWJraXQtYW5pbWF0aW9uLW5hbWU6Ym91bmNlSW5SaWdodDthbmltYXRpb24tbmFtZTpib3VuY2VJblJpZ2h0fUAtd2Via2l0LWtleWZyYW1lcyBib3VuY2VJblVwezYwJSw3NSUsOTAlLGZyb20sdG97LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllciguMjE1LC42MSwuMzU1LDEpO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKC4yMTUsLjYxLC4zNTUsMSl9ZnJvbXtvcGFjaXR5OjA7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwzMDAwcHgsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMzAwMHB4LDApfTYwJXtvcGFjaXR5OjE7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtMjBweCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtMjBweCwwKX03NSV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwxMHB4LDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDEwcHgsMCl9OTAley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsLTVweCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtNXB4LDApfXRvey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwwLDApfX1he3RleHQtZGVjb3JhdGlvbjpub25lO21hcmdpbi1ib3R0b206MnB4fS5jLXNob3d1cmw6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Ym9yZGVyOm5vbmU7b3BhY2l0eTouODt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30ucmVzLWdhcC1yaWdodDE2OmhvdmVye2JvcmRlci1ib3R0b206IzQ4NzliZCAxLjJweCBzb2xpZH0uYy1zaG93dXJse3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfS5jLXRpcC1hcnJvdzpob3Zlcnt0ZXh0LWRlY29yYXRpb246bm9uZTtib3JkZXI6bm9uZX0uYy1kZWZhdWx0IGF7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Ym9yZGVyOm5vbmV9LmMtZ2FwLWJvdHRvbSBhOmhvdmVye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmV9Lm9wX2RpY3QzX21vcmVsaW5rIGE6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZX0uYy1idG46aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOm5vbmUhaW1wb3J0YW50fXRkIGE6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZX1lbXt0ZXh0LWRlY29yYXRpb246bm9uZSFpbXBvcnRhbnR9I3Nfd3JhcHtkaXNwbGF5Om5vbmV9LnMtdG9wLW5hdntkaXNwbGF5Om5vbmV9I3NfY3RuZXJfbWVudXN7ZGlzcGxheTpub25lfSNzX21lbnVfZ3VyZHtkaXNwbGF5Om5vbmV9I3Nfc3RycHhfc3BhbjF7ZGlzcGxheTpub25lfSNmdENvbntkaXNwbGF5Om5vbmV9I2JvdHRvbV9jb250YWluZXJ7ZGlzcGxheTpub25lfSNsZ3tiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7aGVpZ2h0OjcwcHg7cGFkZGluZy10b3A6MTUwcHh9I2xnIGltZ3tkaXNwbGF5Om5vbmV9I2xnIGF7ZGlzcGxheTpub25lfSNoZWFkX3dyYXBwZXJ7cGFkZGluZy1ib3R0b206MH0jc19mb3JtX3dyYXBwZXJ7bWFyZ2luLXRvcDphdXRvfSNzX2xnX2ltZywjc19sZ19pbWdfbmV3e2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9I2Zvcm0gLnNfaXB0X3dye2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6M3B4O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzO2JhY2tncm91bmQtcG9zaXRpb246MTAwJSFpbXBvcnRhbnQ7d2lkdGg6Y2FsYygxMDAlIC0gMTEwcHgpO2hlaWdodDozOXB4O2ZvbnQtZmFtaWx5Oi1hcHBsZS1zeXN0ZW0saGVsdmV0aWNhIG5ldWUsSGVsdmV0aWNhLG5pbWJ1cyBzYW5zIGwsQXJpYWwsbGliZXJhdGlvbiBzYW5zLHBpbmdmYW5nIHNjLGhpcmFnaW5vIHNhbnMgZ2Isc291cmNlIGhhbiBzYW5zIGNuLHNvdXJjZSBoYW4gc2FucyBzYyxtaWNyb3NvZnQgeWFoZWksd2VucXVhbnlpIG1pY3JvIGhlaSx3ZW5xdWFueWkgemVuIGhlaSxzdCBoZWl0aSxTaW1IZWksd2VucXVhbnlpIHplbiBoZWkgc2hhcnAsc2Fucy1zZXJpZjtwYWRkaW5nLXRvcDo0cHh9Zm9ybS5mbSAuYmRzdWd7d2lkdGg6Y2FsYygxMDAlIC0gMTExcHgpfS5zX2lwdHtmb250LWZhbWlseTotYXBwbGUtc3lzdGVtLGhlbHZldGljYSBuZXVlLEhlbHZldGljYSxuaW1idXMgc2FucyBsLEFyaWFsLGxpYmVyYXRpb24gc2FucyxwaW5nZmFuZyBzYyxoaXJhZ2lubyBzYW5zIGdiLHNvdXJjZSBoYW4gc2FucyBjbixzb3VyY2UgaGFuIHNhbnMgc2MsbWljcm9zb2Z0IHlhaGVpLHdlbnF1YW55aSBtaWNybyBoZWksd2VucXVhbnlpIHplbiBoZWksc3QgaGVpdGksU2ltSGVpLHdlbnF1YW55aSB6ZW4gaGVpIHNoYXJwLHNhbnMtc2VyaWZ9I2Zvcm0gLnNfaXB0X3dyOmhvdmVye2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6MnB4O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfS5pcHRob3Zlcnt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30uaXB0Zm9jdXN7Ym94LXNoYWRvdzowIDJweCA1cHggMCByZ2JhKDAsMCwwLC4xNiksMCAycHggMTBweCAwIHJnYmEoMCwwLDAsLjEyKX1ib2R5ICNmb3JtIC5zX2J0bnt3aWR0aDozMnB4O2hlaWdodDozMnB4O2JvcmRlci1yYWRpdXM6NTAlO2ZvbnQtc2l6ZTowO2JvcmRlcjpub25lO2JveC1zaGFkb3c6bm9uZTttYXJnaW4tbGVmdDowO3otaW5kZXg6MTAwO3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzO21hcmdpbi10b3A6MDtvcGFjaXR5OjB9Ym9keSAjZm9ybSAuc19idG46aG92ZXJ7b3BhY2l0eTouNTtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O2JvcmRlcjpub25lO2JveC1zaGFkb3c6bm9uZTt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc31ib2R5ICNmb3JtIC5zX2J0bl93cnt3aWR0aDozMnB4O2hlaWdodDozMnB4O2JvcmRlci1yYWRpdXM6NTAlO2ZvbnQtc2l6ZTowO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7YmFja2dyb3VuZC1wb3NpdGlvbjo1MCU7Ym9yZGVyOm5vbmU7Ym94LXNoYWRvdzpub25lO21hcmdpbi1sZWZ0OjVweDt6LWluZGV4OjEwMDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczttYXJnaW4tdG9wOjZweH1ib2R5ICNmb3JtIC5zX2J0bl93cjpob3ZlcntvcGFjaXR5Oi41O2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Ym9yZGVyOm5vbmU7Ym94LXNoYWRvdzpub25lO3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfS5idG5ob3ZlcntvcGFjaXR5Oi41O2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQhaW1wb3J0YW50O2JvcmRlcjpub25lIWltcG9ydGFudDtib3gtc2hhZG93Om5vbmU7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9LmhpbnRfdG9wcnFfdGlwc3ttYXJnaW4tYm90dG9tOjEycHh9LnNfZm9ybXtoZWlnaHQ6NzVweDtwYWRkaW5nLXRvcDoxMHB4fSNzX3RhYntwYWRkaW5nOjg3cHggMCAwIDEyMXB4fSNoZWFkLnNfZG93bntib3gtc2hhZG93OjAgMCA1cHggIzY2NjtwYWRkaW5nLWJvdHRvbTo4cHh9LmJkc3Vne3RvcDo0MnB4O2JveC1zaGFkb3c6MCAycHggNXB4IDAgcmdiYSgwLDAsMCwuMTYpLDAgMnB4IDEwcHggMCByZ2JhKDAsMCwwLC4xMik7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czowIDAgMnB4IDJweDtmb250LWZhbWlseTotYXBwbGUtc3lzdGVtLGhlbHZldGljYSBuZXVlLEhlbHZldGljYSxuaW1idXMgc2FucyBsLEFyaWFsLGxpYmVyYXRpb24gc2FucyxwaW5nZmFuZyBzYyxoaXJhZ2lubyBzYW5zIGdiLHNvdXJjZSBoYW4gc2FucyBjbixzb3VyY2UgaGFuIHNhbnMgc2MsbWljcm9zb2Z0IHlhaGVpLHdlbnF1YW55aSBtaWNybyBoZWksd2VucXVhbnlpIHplbiBoZWksc3QgaGVpdGksU2ltSGVpLHdlbnF1YW55aSB6ZW4gaGVpIHNoYXJwLHNhbnMtc2VyaWZ9LmJnc3VnIGxpe2ZvbnQtZmFtaWx5OkhlbHZldGljYSxtaWNyb3NvZnQgeWFoZWkgdWkhaW1wb3J0YW50O3dpZHRoOjEwMCUhaW1wb3J0YW50O2xpbmUtaGVpZ2h0OjM2cHghaW1wb3J0YW50fS5iZ3N1ZyB1bCBsaXtsaW5lLWhlaWdodDozMnB4IWltcG9ydGFudH0uYmRzdWctb3ZlcmZsb3d7Zm9udC1mYW1pbHk6SGVsdmV0aWNhLG1pY3Jvc29mdCB5YWhlaSB1aSFpbXBvcnRhbnQ7d2lkdGg6NTgzcHghaW1wb3J0YW50fSNxdWlja2RlbGV0ZXt0b3A6NXB4IWltcG9ydGFudDtvcGFjaXR5Oi41fSNrd190aXB7Zm9udC1mYW1pbHk6SGVsdmV0aWNhLG1pY3Jvc29mdCB5YWhlaSB1aSBsaWdodH0jcmVzdWx0X2xvZ297YmFja2dyb3VuZC1pbWFnZTp1cmwoZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejRLUENFdExTQkhaVzVsY21GMGIzSTZJRUZrYjJKbElFbHNiSFZ6ZEhKaGRHOXlJREU1TGpJdU1Td2dVMVpISUVWNGNHOXlkQ0JRYkhWbkxVbHVJQzRnVTFaSElGWmxjbk5wYjI0NklEWXVNREFnUW5WcGJHUWdNQ2tnSUMwdFBnbzhjM1puSUhabGNuTnBiMjQ5SWpFdU1TSWdhV1E5SXVXYnZ1V3hnbDh4SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSUtDU0IyYVdWM1FtOTRQU0l3SURBZ01UQXhJRE16SWlCemRIbHNaVDBpWlc1aFlteGxMV0poWTJ0bmNtOTFibVE2Ym1WM0lEQWdNQ0F4TURFZ016TTdJaUI0Yld3NmMzQmhZMlU5SW5CeVpYTmxjblpsSWo0S1BITjBlV3hsSUhSNWNHVTlJblJsZUhRdlkzTnpJajRLQ1M1emREQjdabWxzYkRvak5EZzNPVUpFTzMwS0NTNXpkREY3Wm1sc2JEb2pSRVEwTkRNMk8zMEtDUzV6ZERKN1ptbHNiRG9qUmtaR1JrWkdPMzBLUEM5emRIbHNaVDRLUEhCaGRHZ2dZMnhoYzNNOUluTjBNQ0lnWkQwaVRUVXdMalFzTVRVdU0yTXRNeTQ0TERBdU15MDBMREl1TmkwMUxqY3NOQzQzWXkweExqZ3NNaTR5TFRVdU5TdzBMakV0Tml3MkxqZGpMVEF1Tml3ekxqTXNNUzR6TERVdU1Td3pMRFV1TjJNeExqa3NNQzQyTERZdU1pMHdMalVzT0M0MExUQXVOV2d3TGpJS0NXZ3dMakpqTWk0eUxEQXNOaTQwTERFdU1TdzRMalFzTUM0MVl6RXVPQzB3TGpZc015NDFMVE11TWl3ekxUVXVOMk10TUM0MExUSXVNUzAwTGpRdE5DNDFMVFl1TWkwMkxqZEROVFF1TWl3eE9DdzFOQzR6TERFMUxqWXNOVEF1TkN3eE5TNHplaUJOTXpjc01UUXVPQW9KWXpBc01pNDBMREV1Tml3MExqTXNNeTQwTERRdU0yTXhMamtzTUN3ekxqUXRNUzQ1TERNdU5DMDBMak5qTUMweUxqUXRNUzQyTFRRdU15MHpMalF0TkM0elV6TTNMREV5TGpVc016Y3NNVFF1T0hvZ1RUUXpMamtzT0M0Mll6QXNNaTQxTERFdU5TdzBMalVzTXk0ekxEUXVOUW9KWXpFdU9Dd3dMRE11TXkweUxqRXNNeTR6TFRRdU5WTTBPU3cwTGpFc05EY3VNU3cwTGpGRE5EVXVNeXcwTERRekxqa3NOaXcwTXk0NUxEZ3VObm9nVFRVeUxqSXNPQzQxWXpBc01pNHpMREV1TkN3MExqTXNNeTR5TERRdU0zTXpMakl0TVM0NUxETXVNaTAwTGpOekxURXVOQzAwTGpNdE15NHlMVFF1TXdvSlV6VXlMaklzTmk0eUxEVXlMaklzT0M0MWVpQk5OVGN1TlN3eE5TNDVZekFzTWk0ekxERXVOU3cwTGpNc015NHpMRFF1TTJNeExqZ3NNQ3d6TGpNdE1TNDVMRE11TXkwMExqTnpMVEV1TlMwMExqTXRNeTR6TFRRdU0wTTFPQzQ1TERFeExqWXNOVGN1TlN3eE15NDJMRFUzTGpVc01UVXVPWG9pTHo0S1BIQmhkR2dnWTJ4aGMzTTlJbk4wTVNJZ1pEMGlUVFFzTXpBdU5IWXROUzR4YURZdU5HTXhMallzTUN3eExqWXNNQzR6TERFdU5pd3lkakV1TkdNd0xERXVOaTB5TGpNc01TNDRMVE11T1N3eExqaE1OQ3d6TUM0MFREUXNNekF1TkhvZ1RUUXNNak4yTFRRdU9HZzBMakVLQ1dNeExqWXNNQ3d6TGprc01Dd3pMamtzTWk0eGRqQXVNV013TERFdU5DMHdMalVzTWk0MkxURXVPQ3d5TGpaRE1UQXVNeXd5TXl3MExESXpMRFFzTWpONklFMHhMamNzTVRaMk1UWXVNMmcyTGpSak15d3dMRFl1TWl3d0xEWXVNaTB6TGpaMkxURXVNV013TFRFdU5pMHdMakV0TWk0M0xURXVNUzB6TGpVS0NXTXhMVEF1T0N3eExqRXRNaTR6TERFdU1TMHpMalpzTUN3d1l6QXROQzQxTFRNdU1pMDBMalV0Tmk0eUxUUXVOVXd4TGpjc01UWk1NUzQzTERFMmVpSXZQZ284Y0dGMGFDQmpiR0Z6Y3owaWMzUXhJaUJrUFNKTk1qVXNNamd1T1dNdE1TNHhMREV1TVMwekxqTXNNUzR6TFRNdU5Td3hMak5qTFRFdU15d3dMVEl1Tnkwd0xqVXRNaTQzTFRJdU1XTXdMVEV1TkN3d0xqVXRNaTR6TERJdU1TMHlMak5qTVM0ekxEQXNNaTQ0TERBdU1TdzBMakVzTUM0MlZqSTRMamw2Q2drZ1RUSXhMalFzTXpJdU0yTXdMalFzTUN3eUxqTXRNQzR4TERNdU55MHdMamxzTUM0eUxEQXVOMmd5TGpGMkxUZ3VPV013TFRNdU5pMHlMak10TlMwMUxqY3ROV010TVM0NExEQXROQzR6TERBdU55MDBMamNzTUM0NWJEQXVOQ3d5TGpOak1TNDJMVEF1Tml3ekxUQXVOaXcwTGpJdE1DNDJDZ2xqTVM0NExEQXNNeTR6TERBdU5pd3pMak1zTWk0MlZqSTBZeTB4TFRBdU5DMHlMalF0TUM0MkxUUXVNUzB3TGpaakxUTXNNQzAwTGpVc01TNDJMVFF1TlN3MExqZERNVFl1TkN3ek1TNDRMREU1TGpZc016SXVNeXd5TVM0MExETXlMak42SWk4K0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERFaUlHUTlJazB6TUM0eUxERTJMakZqTUN3d0xqWXNNQzQyTERFdU1pd3hMak1zTVM0eVl6QXVPQ3d3TERFdU15MHdMallzTVM0ekxURXVNbU13TFRBdU55MHdMall0TVM0ekxURXVNeTB4TGpORE16QXVPQ3d4TkM0NExETXdMaklzTVRVdU15d3pNQzR5TERFMkxqRjZDZ2tnVFRNd0xqTXNNekl1TVdneUxqUldNVGd1TldndE1pNDBWak15TGpGNklpOCtDanh3WVhSb0lHTnNZWE56UFNKemRERWlJR1E5SWswM01TNHlMREl5TGpGb09DNDBZekF1TkN3d0xqRXNNQzQyTERBdU15d3dMallzTUM0M2RqSXVObWd0T1M0M2RpMHlMalpETnpBdU5pd3lNaTQwTERjd0xqZ3NNakl1TWl3M01TNHlMREl5TGpGNklFMDNNUzR5TERNd0xqVUtDV010TUM0MExEQXRNQzQyTFRBdU15MHdMamN0TUM0NGRpMHlMalpvT1M0M2RqSXVObU13TERBdU5DMHdMaklzTUM0M0xUQXVOaXd3TGpkSU56RXVNbm9nVFRjekxqWXNNVGhqTFRBdU1Td3dMalF0TUM0eExEQXVPUzB3TGpRc01TNDNZeTB3TGpFc01DNHpMVEF1TVN3d0xqVXRNQzR4TERBdU53b0phQzB5TGpaakxURXVNeXd3TGpFdE1TNDVMREF1T0MweUxESjJOeTQ1WXpBdU1Td3hMakVzTUM0NExERXVPQ3d5TERFdU9XZ3hNR014TGpJdE1DNHhMREV1T0Mwd0xqY3NNUzQ1TFRFdU9IWXROeTQ1WXkwd0xqRXRNUzR6TFRBdU55MHhMamt0TVM0NUxUSXVNV2d0TlFvSll6QXVNUzB3TGpNc01DNHhMVEF1T0N3d0xqTXRNUzQwWXpBdU1TMHdMalFzTUM0eExUQXVOeXd3TGpFdE1DNDVhRGN1TW5ZdE1TNDRTRFkzTGpSV01UaE1Oek11Tml3eE9FdzNNeTQyTERFNGVpSXZQZ284Y0dGMGFDQmpiR0Z6Y3owaWMzUXhJaUJrUFNKTk9UTXVOeXd5TWk0M1l5MHdMalF0TUM0eExUQXVOUzB3TGpJdE1DNDFMVEF1TlhZdE1DNDJhRE11TW5Zd0xqWmpMVEF1TVN3d0xqTXRNQzR5TERBdU5DMHdMalVzTUM0MVNEa3pMamQ2SUUwNU5pNDJMREkwTGpFS0NXTXhMakV0TUM0eExERXVOaTB3TGpVc01TNDJMVEV1TkhZdE1XZ3lMak4yTFRFdU5XZ3RNaTR6ZGkweExqRm9MVEV1T0hZeExqRm9MVE11TW5ZdE1TNHhhQzB4TGpoMk1TNHhhQzB5TGpOMk1TNDFhREl1TTNZeFl6QXVNU3d3TGprc01DNDJMREV1TkN3eExqWXNNUzQwU0RrMkxqWjZDZ2tnVFRrMExqZ3NNekF1TkdNeExqWXNNQzQ0TERNdU5Dd3hMak1zTlM0MExERXVPR3d3TGprdE1TNDNZeTB4TGpRdE1DNHlMVEl1T1Mwd0xqWXROQzQwTFRFdU1XTXhMakV0TUM0NExESXRNUzQyTERJdU55MHlMalZqTUM0ekxUQXVOQ3d3TGpRdE1DNDVMREF1TWkweExqTUtDV010TUM0ekxUQXVOaTB3TGpndE1DNDVMVEV1TkMwd0xqbG9MVGwyTVM0MWFEY3VOMk13TGpJc01Dd3dMalFzTUM0eExEQXVOQ3d3TGpGek1Dd3dMakV0TUM0eExEQXVNMk10TUM0MkxEQXVOaTB4TGpRc01TNHpMVEl1TXl3eExqaGpMVEV1TWkwd0xqY3RNaTR4TFRFdU15MHlMalF0TVM0NGFDMHlMaklLQ1dNd0xqa3NNU3d4TGpnc01TNDVMREl1T1N3eUxqZGpMVEV1Tml3d0xqWXRNeTR6TERFdU1TMDBMamtzTVM0emJEQXVPU3d4TGpaRE9URXVNeXd6TVM0NExEa3pMaklzTXpFdU1TdzVOQzQ0TERNd0xqUjZJRTA0T0M0ekxESTFMakoyTFRaak1DNHhMVEF1Tml3d0xqTXRNQzQ1TERBdU9DMHdMamtLQ1dneE1TNDRkaTB4TGpaSU9UVmpMVEF1TVMwd0xqRXRNaTR5TFRBdU1TMHlMaklzTUdndE5DNDNZeTB4TGpFc01DNHhMVEV1Tnl3d0xqa3RNUzQ0TERJdU1sWXlOV013TGpFc01pNHhMVEF1TkN3MExqUXRNUzR4TERZdU4yd3hMamtzTUM0MkNnbERPRGN1T1N3eU9TNDVMRGc0TGpNc01qY3VOaXc0T0M0ekxESTFMako2SWk4K0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERJaUlHUTlJazAwTmk0ekxESTBMakpqTUM0MkxEQXNNUzR5TERBdU1Td3hMamNzTUM0MGRqTXVOR013TERBdU15MHdMallzTVMweExqa3NNV010TVM0MUxEQXRNUzQ0TFRBdU5pMHhMamd0TWk0eGRpMHdMallLQ1VNME5DNHlMREkwTGpnc05EUXVOeXd5TkM0eUxEUTJMak1zTWpRdU1ub2dUVFE1TGpJc01qQXVOMGcwT0hZeUxqVkRORGN1Tml3eU15NHhMRFEzTERJekxEUTJMak1zTWpOakxUSXVOeXd3TFRNdU15d3hMVE11TXl3ekxqVjJNQzR6WXpBc01pNDBMREF1T1N3ekxqTXNNeTR5TERNdU13b0pZekF1T0N3d0xERXVNeTB3TGpFc01TNDRMVEF1Tld3d0xqRXNNQzQyYURFdU1VdzBPUzR5TERJd0xqZE1ORGt1TWl3eU1DNDNlaUl2UGdvOGNHRjBhQ0JqYkdGemN6MGljM1F5SWlCa1BTSk5OVFl1Tnl3eU0yZ3RNUzR5ZGpVdU1tTXRNQzQyTERBdU5DMHhMamNzTUM0MkxUSXVOQ3d3TGpaakxUQXVPQ3d3TFRFdE1DNDBMVEV0TVM0emRpMDBMalpvTFRFdU1YWTBMamhqTUN3eExqWXNNQzQxTERJdU15d3lMakVzTWk0ekNnbGpNU3d3TERJdU1TMHdMak1zTWk0MkxUQXVObXd3TGpFc01DNDJhREV1TVZZeU0zb2lMejRLUEhCaGRHZ2dZMnhoYzNNOUluTjBNU0lnWkQwaVRUa3lMamNzTVRVdU4yTXdMVEF1Tnl3d0xqWXRNUzR6TERFdU1pMHhMak5qTUM0MkxEQXNNUzR5TERBdU5pd3hMaklzTVM0elV6azBMalVzTVRjc09UTXVPU3d4TjBNNU15NHpMREUyTGprc09USXVOeXd4Tmk0ekxEa3lMamNzTVRVdU4zb2lMejRLUEM5emRtYytDZz09KTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7d2lkdGg6MTAxcHg7aGVpZ2h0OjMzcHg7bWFyZ2luLXRvcDo5cHh9I3Jlc3VsdF9sb2dvIGltZ3tkaXNwbGF5Om5vbmU7dmlzaWJpbGl0eTpoaWRkZW59I3Jlc3VsdF9sb2dvIGEgaW1ne2Rpc3BsYXk6bm9uZTt2aXNpYmlsaXR5OmhpZGRlbn0uYy1jb250YWluZXJ7bGluZS1oZWlnaHQ6MS42NX0jcnN7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudCFpbXBvcnRhbnR9LmMtYm9yZGVyey13ZWJraXQtYm94LXNoYWRvdzowIDJweCA1cHggMCByZ2JhKDAsMCwwLC4xNiksMCAycHggMTBweCAwIHJnYmEoMCwwLDAsLjEyKTtib3gtc2hhZG93OjAgMnB4IDVweCAwIHJnYmEoMCwwLDAsLjE2KSwwIDJweCAxMHB4IDAgcmdiYSgwLDAsMCwuMTIpO2JvcmRlci1yYWRpdXM6MnB4O2JvcmRlcjpub25lO3BhZGRpbmc6MjBweDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30uYy1ib3JkZXI6aG92ZXJ7Ym94LXNoYWRvdzowIDNweCAxMHB4IHJnYmEoMCwwLDAsLjE2KSwwIDNweCAxMHB4IHJnYmEoMCwwLDAsLjIzKTt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9LmMtdGFicy1uYXZ7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czoycHggMnB4IDAgMDt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9LmMtdGFicy1uYXYtbW92ZXRvcHttYXJnaW4tbGVmdDotMjBweDttYXJnaW4tcmlnaHQ6LTIwcHg7bWFyZ2luLXRvcDotMjBweDt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9LmMtdGFicy1uYXYtc2VsZWN0ZWR7Ym9yZGVyLXRvcDpub25lIWltcG9ydGFudDtib3JkZXItbGVmdDpub25lIWltcG9ydGFudDtib3JkZXItcmlnaHQ6bm9uZSFpbXBvcnRhbnQ7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfS5jLXRhYnMtbmF2LXNlcHtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fSNwYWdlIGF7aGVpZ2h0OjM0cHg7Ym9yZGVyLXJhZGl1czoycHg7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfSNwYWdlIGE6aG92ZXJ7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfSNwYWdlIGEgLnBjOmhvdmVye3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30jcGFnZSBzdHJvbmd7aGVpZ2h0OjM0cHg7Ym9yZGVyLXJhZGl1czoycHg7cG9zaXRpb246cmVsYXRpdmU7dG9wOi0ycHg7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfSNwYWdlIHN0cm9uZyAucGN7bGluZS1oZWlnaHQ6MzRweDt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9LmZre2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9LnBje2JvcmRlcjpub25lIWltcG9ydGFudDtoZWlnaHQ6MzVweDt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9LnBjOmhvdmVye3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30jc190YWIgYXt3aWR0aDo1OXB4O2xpbmUtaGVpZ2h0OjQ0cHh9I3NfdGFiIGJ7d2lkdGg6NTlweDtsaW5lLWhlaWdodDo0NHB4fSNzX3RhYntwYWRkaW5nLWJvdHRvbTo4cHg7cGFkZGluZy10b3A6ODlweH0uYy1pY29uLXRpZWJhe2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcn0udG9pbmRleHtkaXNwbGF5Om5vbmV9I3UgLnBme2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcjtmb250LXNpemU6MDtwYWRkaW5nOjE0cHg7b3BhY2l0eTouODstbW96LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LW8tdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7cGFkZGluZy10b3A6MThweDtwYWRkaW5nLWJvdHRvbToxMHB4fSN1IC5wZjpob3ZlcntvcGFjaXR5OjE7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlfS5wZiAuYy1pY29ue2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9LmMtaWNvbi10cmlhbmdsZS1kb3due2Rpc3BsYXk6bm9uZX0uYmRwZm1lbnV7Ym94LXNoYWRvdzowIDJweCA1cHggMCByZ2JhKDAsMCwwLC4xNiksMCAycHggMTBweCAwIHJnYmEoMCwwLDAsLjEyKTtib3JkZXItcmFkaXVzOjJweCFpbXBvcnRhbnQ7Ym9yZGVyOm5vbmU7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7bWFyZ2luLWxlZnQ6LTEwcHg7bWFyZ2luLXRvcDozMHB4O3otaW5kZXg6ODg4OCFpbXBvcnRhbnR9LmJkcGZtZW51IGE6aG92ZXJ7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9LmJkbnVhcnJvd3tkaXNwbGF5Om5vbmUhaW1wb3J0YW50fS5zZXRwcmVme2JvcmRlci1yYWRpdXM6MnB4IDJweCAwIDA7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9LnNldHByZWY6aG92ZXJ7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9I3UgLmxie3BhZGRpbmc6MjNweDtib3JkZXItcmFkaXVzOjUwcHg7Zm9udC1zaXplOjA7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6NTBweDt0b3A6MzgwMCU7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30jdSAubGI6aG92ZXJ7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9I3UgLmxiOmFjdGl2ZXtib3gtc2hhZG93OjAgMTBweCAzMHB4IHJnYmEoMCwwLDAsLjE5KSwwIDZweCAxMHB4IHJnYmEoMCwwLDAsLjIzKTt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30udGFuZy1mb3JlZ3JvdW5ke2JvcmRlci1yYWRpdXM6MnB4O2JveC1zaGFkb3c6MCAxOXB4IDYwcHggcmdiYSgwLDAsMCwuMyksMCAxNXB4IDIwcHggcmdiYSgwLDAsMCwuMjIpfSNzX3VwZnVuY19tZW51c3tkaXNwbGF5Om5vbmV9I2Jne2JhY2tncm91bmQtY29sb3I6I2ZmZiFpbXBvcnRhbnQ7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czozcHg7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7YmFja2dyb3VuZC1wb3NpdGlvbjoxMDAlIWltcG9ydGFudDt6LWluZGV4Oi0xO3dpZHRoOjYwMHB4O2hlaWdodDozOXB4O2ZvbnQtZmFtaWx5Oi1hcHBsZS1zeXN0ZW0saGVsdmV0aWNhIG5ldWUsSGVsdmV0aWNhLG5pbWJ1cyBzYW5zIGwsQXJpYWwsbGliZXJhdGlvbiBzYW5zLHBpbmdmYW5nIHNjLGhpcmFnaW5vIHNhbnMgZ2Isc291cmNlIGhhbiBzYW5zIGNuLHNvdXJjZSBoYW4gc2FucyBzYyxtaWNyb3NvZnQgeWFoZWksd2VucXVhbnlpIG1pY3JvIGhlaSx3ZW5xdWFueWkgemVuIGhlaSxzdCBoZWl0aSxTaW1IZWksd2VucXVhbnlpIHplbiBoZWkgc2hhcnAsc2Fucy1zZXJpZjtwYWRkaW5nLXRvcDo1cHghaW1wb3J0YW50fSNoZWFkX3dyYXBwZXIgLnNfaXB0e2JvcmRlcjowIWltcG9ydGFudDtoZWlnaHQ6MjBweCFpbXBvcnRhbnQ7Ym9yZGVyLXJhZGl1czoycHg7d2lkdGg6NTg2cHghaW1wb3J0YW50fSNoZWFkX3dyYXBwZXIgLm5vYmdfc19mbV9ob3Zlcntib3JkZXI6MCFpbXBvcnRhbnR9I2hlYWRfd3JhcHBlciAubm9iZ19zX2ZtX2ZvY3Vze2JvcmRlcjowIWltcG9ydGFudDtib3JkZXItdG9wOjAgc29saWQgI2ZmZiFpbXBvcnRhbnQ7Ym9yZGVyLWJvdHRvbTowIHNvbGlkICNmZmYhaW1wb3J0YW50O2JvcmRlci1sZWZ0OjAgc29saWQgI2ZmZiFpbXBvcnRhbnQ7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjMzhmfS5zLXRpdGxlLWltYWdle2JvcmRlcjpub25lIWltcG9ydGFudDtib3JkZXItdG9wOjAgc29saWQgI2ZmZiFpbXBvcnRhbnQ7Ym9yZGVyLWJvdHRvbTowIHNvbGlkICNmZmYhaW1wb3J0YW50O2JvcmRlci1sZWZ0OjAgc29saWQgI2ZmZiFpbXBvcnRhbnQ7Ym9yZGVyLXJpZ2h0OjAgc29saWQgI2ZmZiFpbXBvcnRhbnR9I3NfbGdfaW1ne2Rpc3BsYXk6bm9uZX0jZm9ybXstd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjouMnM7YW5pbWF0aW9uLWR1cmF0aW9uOi4yczstd2Via2l0LWFuaW1hdGlvbi1maWxsLW1vZGU6Ym90aDthbmltYXRpb24tZmlsbC1tb2RlOmJvdGg7YW5pbWF0aW9uLW5hbWU6ZmFkZUluVXA7LXdlYmtpdC1hbmltYXRpb24tbmFtZTpmYWRlSW5VcDthbmltYXRpb24tZGVsYXk6LjNzOy13ZWJraXQtYW5pbWF0aW9uLWRlbGF5Oi4zc31ib2R5Om5vdChbbmV3c10pICNoZWFkX3dyYXBwZXIgI2Zvcm0uZm17bWluLXdpZHRoOjUwJTt3aWR0aDoxMTAlfS5zLXAtdG9we3RyYW5zZm9ybTpzY2FsZSguOCk7Ym90dG9tOjlweCFpbXBvcnRhbnR9Lm1uYXZ7ZGlzcGxheTpub25lfSN1X3NwIC5tbmF2e2Rpc3BsYXk6bm9uZX0jdTEgYS5sYntwYWRkaW5nOjIzcHg7Ym9yZGVyLXJhZGl1czo1MCU7Zm9udC1zaXplOjA7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6NDRweDt0b3A6MTA0MCU7YmFja2dyb3VuZC1pbWFnZTp1cmwoZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejRLUENFdExTQkhaVzVsY21GMGIzSTZJRUZrYjJKbElFbHNiSFZ6ZEhKaGRHOXlJREU1TGpJdU1Td2dVMVpISUVWNGNHOXlkQ0JRYkhWbkxVbHVJQzRnVTFaSElGWmxjbk5wYjI0NklEWXVNREFnUW5WcGJHUWdNQ2tnSUMwdFBnbzhjM1puSUhabGNuTnBiMjQ5SWpFdU1TSWdhV1E5SXVXYnZ1V3hnbDh4SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSUtDU0IyYVdWM1FtOTRQU0l3SURBZ05EWWdORFlpSUhOMGVXeGxQU0psYm1GaWJHVXRZbUZqYTJkeWIzVnVaRHB1WlhjZ01DQXdJRFEySURRMk95SWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krQ2p4emRIbHNaU0IwZVhCbFBTSjBaWGgwTDJOemN5SStDZ2t1YzNRd2UyWnBiR3c2STBaR1JrWkdSanQ5Q2p3dmMzUjViR1UrQ2p4d1lYUm9JR05zWVhOelBTSnpkREFpSUdROUlrMHlNeXd5TTJNeUxqa3NNQ3cxTGpJdE1pNHpMRFV1TWkwMUxqSnpMVEl1TXkwMUxqSXROUzR5TFRVdU1uTXROUzR5TERJdU15MDFMaklzTlM0eVV6SXdMakVzTWpNc01qTXNNak42SUUweU15d3lOUzQyQ2dsakxUTXVOU3d3TFRFd0xqUXNNUzQzTFRFd0xqUXNOUzR5ZGpJdU5tZ3lNQzQzZGkweUxqWkRNek11TkN3eU55NHpMREkyTGpVc01qVXVOaXd5TXl3eU5TNDJlaUl2UGdvOEwzTjJaejRLKTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7Ym94LXNoYWRvdzpyZ2JhKDAsMCwwLC4xNTY4NjMpIDAgM3B4IDEwcHgscmdiYSgwLDAsMCwuMjI3NDUxKSAwIDNweCAxMHB4O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzO2xpbmUtaGVpZ2h0OjA7ei1pbmRleDoxMDB9I3UxIGEubGI6aG92ZXJ7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9I3UxIGEubGI6YWN0aXZle2JveC1zaGFkb3c6MCAxMHB4IDMwcHggcmdiYSgwLDAsMCwuMTkpLDAgNnB4IDEwcHggcmdiYSgwLDAsMCwuMjMpO3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfSN1MSBhLnBme2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcjtmb250LXNpemU6MDtwYWRkaW5nOjE0cHg7b3BhY2l0eTouODstbW96LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LW8tdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7ei1pbmRleDowfSN1MSBhLmJyaXtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50O2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcjtmb250LXNpemU6MDtwYWRkaW5nOjJweDtvcGFjaXR5Oi44Oy1tb3otdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstby10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTtib3JkZXI6bm9uZTttYXJnaW4tdG9wOjEycHh9I3dyYXBwZXIgLmJkYnJpaW1ndGl0bGV7cGFkZGluZy10b3A6MjNweH0jd3JhcHBlciAuYmRicmkuYmRicmlpbWcgLmJkbWFpbmxpbmsgYXtib3JkZXI6bm9uZX0jd3JhcHBlciAuYmRicml7ei1pbmRleDoyfSN3cmFwcGVyICN1X3NwIC5zX2JyaXtwYWRkaW5nOjVweDtib3JkZXItcmFkaXVzOjUwJTtmb250LXNpemU6MDt3aWR0aDozMnB4O2hlaWdodDozMnB4O2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0TkNqd2hMUzBnUjJWdVpYSmhkRzl5T2lCQlpHOWlaU0JKYkd4MWMzUnlZWFJ2Y2lBeE9TNHlMakVzSUZOV1J5QkZlSEJ2Y25RZ1VHeDFaeTFKYmlBdUlGTldSeUJXWlhKemFXOXVPaUEyTGpBd0lFSjFhV3hrSURBcElDQXRMVDROQ2p4emRtY2dkbVZ5YzJsdmJqMGlNUzR4SWlCcFpEMGk1WnUrNWJHQ1h6RWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SWdlRzFzYm5NNmVHeHBibXM5SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpFNU9Ua3ZlR3hwYm1zaUlIZzlJakJ3ZUNJZ2VUMGlNSEI0SWcwS0NTQjJhV1YzUW05NFBTSXdJREFnTXpJZ016SWlJSE4wZVd4bFBTSmxibUZpYkdVdFltRmphMmR5YjNWdVpEcHVaWGNnTUNBd0lETXlJRE15T3lJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSStEUW84YzNSNWJHVWdkSGx3WlQwaWRHVjRkQzlqYzNNaVBnMEtDUzV6ZERCN1ptbHNiRG9qUmtaR1JrWkdPMzBOQ2p3dmMzUjViR1UrRFFvOGNHRjBhQ0JqYkdGemN6MGljM1F3SWlCa1BTSk5NVEFzTVROb00zWXRNMmd0TTFZeE0zb2dUVEUwTGpVc01qSm9NM1l0TTJndE0wTXhOQzQxTERFNUxERTBMalVzTWpJc01UUXVOU3d5TW5vZ1RURXdMREl5YUROMkxUTm9MVE5XTWpKNklFMHhNQ3d4Tnk0MWFETjJMVE5vTFROV01UY3VOWG9OQ2drZ1RURTBMalVzTVRjdU5XZ3pkaTB6YUMwelF6RTBMalVzTVRRdU5Td3hOQzQxTERFM0xqVXNNVFF1TlN3eE55NDFlaUJOTVRrc01UQjJNMmd6ZGkwelNERTVlaUJOTVRRdU5Td3hNMmd6ZGkwemFDMHpRekUwTGpVc01UQXNNVFF1TlN3eE15d3hOQzQxTERFemVpQk5NVGtzTVRjdU5XZ3pkaTB6YUMwekRRb0pWakUzTGpWNklFMHhPU3d5TW1nemRpMHphQzB6VmpJeWVpSXZQZzBLUEM5emRtYytEUW89KTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7Ym94LXNoYWRvdzpyZ2JhKDAsMCwwLC4xNTY4NjMpIDAgM3B4IDEwcHgscmdiYSgwLDAsMCwuMjI3NDUxKSAwIDNweCAxMHB4O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzO2xpbmUtaGVpZ2h0OjA7ei1pbmRleDoxMDA7bWFyZ2luLXJpZ2h0OjIycHg7bWFyZ2luLXRvcDoxcHh9I3Vfc3AgLnNfYmRicmlpbWd0aXRsZXtwYWRkaW5nLXRvcDo3M3B4fSNzX3VzZXJzZXR0aW5nX3RvcHtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7Zm9udC1zaXplOjA7cGFkZGluZzoxNHB4O29wYWNpdHk6Ljg7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlO21hcmdpbi10b3A6MTJweDttYXJnaW4tcmlnaHQ6NHB4O3otaW5kZXg6LTEwMH0jc190b3Bfd3JhcHt6LWluZGV4Oi0xMDtib3JkZXItYm90dG9tOnVuc2V0fSN1IC50b2luZGV4e2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9I3NfdXNlcm5hbWVfdG9we3RleHQtZGVjb3JhdGlvbjpub25lO21hcmdpbi10b3A6MjZweDttYXJnaW4tbGVmdDo1cHg7Ym9yZGVyOm5vbmU7cGFkZGluZy1sZWZ0OjEwcHg7cGFkZGluZy1yaWdodDoxMHB4O2JvcmRlci1yYWRpdXM6MTZweDttYXJnaW4tcmlnaHQ6LTNweH0udXNlci1uYW1le3RleHQtZGVjb3JhdGlvbjpub25lIWltcG9ydGFudH0ubWVudS1hcnJvd3tkaXNwbGF5Om5vbmUhaW1wb3J0YW50fS5zX3VzZXJfbmFtZV9tZW51e3RleHQtYWxpZ246Y2VudGVyIWltcG9ydGFudH0ucy11c2VyLXNldC1tZW51Lm1lbnUtdG9we3dpZHRoOjEwMHB4fS5zLXVzZXItc2V0LW1lbnUgZGl2e2JvcmRlcjpub25lIWltcG9ydGFudDtib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHh9LnMtdXNlci1zZXQtbWVudXtwYWRkaW5nLXRvcDowO21hcmdpbi10b3A6MzZweDtib3JkZXItcmFkaXVzOjJweCFpbXBvcnRhbnR9LnMtdXNlci1zZXQtbWVudSBhe3BhZGRpbmctbGVmdDoyNXB4Oy1tb3otdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstby10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZX0ucy11c2VyLXNldC1tZW51IGE6aG92ZXJ7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlfSN1c2Vye3RleHQtZGVjb3JhdGlvbjpub25lIWltcG9ydGFudDttYXJnaW4tdG9wOjMwcHg7bWFyZ2luLWxlZnQ6NXB4O2JvcmRlcjpub25lO3BhZGRpbmctbGVmdDoxMHB4O3BhZGRpbmctcmlnaHQ6MTBweDtib3JkZXItcmFkaXVzOjE2cHg7bWFyZ2luLXJpZ2h0Oi0zcHg7aGVpZ2h0OjIzcHg7cGFkZGluZy10b3A6OHB4Oy13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOjFzO2FuaW1hdGlvbi1kdXJhdGlvbjoxczstd2Via2l0LWFuaW1hdGlvbi1maWxsLW1vZGU6Ym90aDthbmltYXRpb24tZmlsbC1tb2RlOmJvdGg7YW5pbWF0aW9uLW5hbWU6Ym91bmNlSW5SaWdodDstd2Via2l0LWFuaW1hdGlvbi1uYW1lOmJvdW5jZUluUmlnaHR9LnVzZXJtZW51e2JvcmRlcjpub25lIWltcG9ydGFudDtib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHghaW1wb3J0YW50Oy13ZWJraXQtYm94LXNoYWRvdzpyZ2JhKDAsMCwwLC4xNTY4NjMpIDAgM3B4IDEwcHgscmdiYSgwLDAsMCwuMjI3NDUxKSAwIDNweCAxMHB4IWltcG9ydGFudDt3aWR0aDo4M3B4O2JvcmRlci1yYWRpdXM6MnB4IWltcG9ydGFudDt0b3A6MzVweCFpbXBvcnRhbnQ7bWFyZ2luOjAgYXV0b30udXNlcm5hbWUgYXstbW96LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LW8tdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7Ym9yZGVyLXJhZGl1czoycHh9LnVzZXJuYW1lIGE6aG92ZXJ7YmFja2dyb3VuZDojNDg3OWJkIWltcG9ydGFudDstbW96LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LW8tdHJhbnNpdGlvbjphbGwgLjNzIGVhc2V9LnVzZXJuYW1lIGE6YWN0aXZle2JhY2tncm91bmQ6IzQ4NzliZCFpbXBvcnRhbnQ7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlfSN1c2VyIC5jLWljb257ZGlzcGxheTpub25lfSNpbXNne2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcjtmb250LXNpemU6MDtwYWRkaW5nOjE0cHg7b3BhY2l0eTouODstbW96LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LW8tdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7ei1pbmRleDowO3BhZGRpbmctdG9wOjI1cHg7cGFkZGluZy1ib3R0b206MjFweH0jaW1zZzpob3ZlcntvcGFjaXR5OjF9LmhlYWRfd3JhcHBlciAjYmRzLW1lc3NhZ2Utd3JhcHBlcnt0b3A6NjRweH0ucy1tb2QtbXNne2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweCFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHghaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6M3B4fS5tc2ctYnRue2JvcmRlci1yYWRpdXM6MnB4O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9Lm1zZy1idG46aG92ZXJ7Ym9yZGVyLXJhZGl1czoycHg7Ym94LXNoYWRvdzowIDFweCA2cHggcmdiYSgwLDAsMCwuMTIpLDAgMXB4IDRweCByZ2JhKDAsMCwwLC4xMik7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30ubXNnLWJ0bjphY3RpdmV7Ym9yZGVyLXJhZGl1czoycHg7Ym94LXNoYWRvdzpyZ2JhKDAsMCwwLC4xNTY4NjMpIDAgM3B4IDEwcHgscmdiYSgwLDAsMCwuMjI3NDUxKSAwIDNweCAxMHB4IWltcG9ydGFudDstd2Via2l0LWJveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweCFpbXBvcnRhbnQ7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30ubm8tdXNlOmhvdmVye2JveC1zaGFkb3c6bm9uZSFpbXBvcnRhbnR9LnRvcC1sb2dvIGltZ3tkaXNwbGF5Om5vbmV9LnRvcC1sb2dve2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNVEF4SURNeklpQnpkSGxzWlQwaVpXNWhZbXhsTFdKaFkydG5jbTkxYm1RNmJtVjNJREFnTUNBeE1ERWdNek03SWlCNGJXdzZjM0JoWTJVOUluQnlaWE5sY25abElqNEtQSE4wZVd4bElIUjVjR1U5SW5SbGVIUXZZM056SWo0S0NTNXpkREI3Wm1sc2JEb2pORGczT1VKRU8zMEtDUzV6ZERGN1ptbHNiRG9qUkVRME5ETTJPMzBLQ1M1emRESjdabWxzYkRvalJrWkdSa1pHTzMwS1BDOXpkSGxzWlQ0S1BIQmhkR2dnWTJ4aGMzTTlJbk4wTUNJZ1pEMGlUVFV3TGpRc01UVXVNMk10TXk0NExEQXVNeTAwTERJdU5pMDFMamNzTkM0M1l5MHhMamdzTWk0eUxUVXVOU3cwTGpFdE5pdzJMamRqTFRBdU5pd3pMak1zTVM0ekxEVXVNU3d6TERVdU4yTXhMamtzTUM0MkxEWXVNaTB3TGpVc09DNDBMVEF1Tldnd0xqSUtDV2d3TGpKak1pNHlMREFzTmk0MExERXVNU3c0TGpRc01DNDFZekV1T0Mwd0xqWXNNeTQxTFRNdU1pd3pMVFV1TjJNdE1DNDBMVEl1TVMwMExqUXROQzQxTFRZdU1pMDJMamRETlRRdU1pd3hPQ3cxTkM0ekxERTFMallzTlRBdU5Dd3hOUzR6ZWlCTk16Y3NNVFF1T0FvSll6QXNNaTQwTERFdU5pdzBMak1zTXk0MExEUXVNMk14TGprc01Dd3pMalF0TVM0NUxETXVOQzAwTGpOak1DMHlMalF0TVM0MkxUUXVNeTB6TGpRdE5DNHpVek0zTERFeUxqVXNNemNzTVRRdU9Ib2dUVFF6TGprc09DNDJZekFzTWk0MUxERXVOU3cwTGpVc015NHpMRFF1TlFvSll6RXVPQ3d3TERNdU15MHlMakVzTXk0ekxUUXVOVk0wT1N3MExqRXNORGN1TVN3MExqRkRORFV1TXl3MExEUXpMamtzTml3ME15NDVMRGd1Tm5vZ1RUVXlMaklzT0M0MVl6QXNNaTR6TERFdU5DdzBMak1zTXk0eUxEUXVNM016TGpJdE1TNDVMRE11TWkwMExqTnpMVEV1TkMwMExqTXRNeTR5TFRRdU13b0pVelV5TGpJc05pNHlMRFV5TGpJc09DNDFlaUJOTlRjdU5Td3hOUzQ1WXpBc01pNHpMREV1TlN3MExqTXNNeTR6TERRdU0yTXhMamdzTUN3ekxqTXRNUzQ1TERNdU15MDBMak56TFRFdU5TMDBMak10TXk0ekxUUXVNME0xT0M0NUxERXhMallzTlRjdU5Td3hNeTQyTERVM0xqVXNNVFV1T1hvaUx6NEtQSEJoZEdnZ1kyeGhjM005SW5OME1TSWdaRDBpVFRRc016QXVOSFl0TlM0eGFEWXVOR014TGpZc01Dd3hMallzTUM0ekxERXVOaXd5ZGpFdU5HTXdMREV1TmkweUxqTXNNUzQ0TFRNdU9Td3hMamhNTkN3ek1DNDBURFFzTXpBdU5Ib2dUVFFzTWpOMkxUUXVPR2cwTGpFS0NXTXhMallzTUN3ekxqa3NNQ3d6TGprc01pNHhkakF1TVdNd0xERXVOQzB3TGpVc01pNDJMVEV1T0N3eUxqWkRNVEF1TXl3eU15dzBMREl6TERRc01qTjZJRTB4TGpjc01UWjJNVFl1TTJnMkxqUmpNeXd3TERZdU1pd3dMRFl1TWkwekxqWjJMVEV1TVdNd0xURXVOaTB3TGpFdE1pNDNMVEV1TVMwekxqVUtDV014TFRBdU9Dd3hMakV0TWk0ekxERXVNUzB6TGpac01Dd3dZekF0TkM0MUxUTXVNaTAwTGpVdE5pNHlMVFF1TlV3eExqY3NNVFpNTVM0M0xERTJlaUl2UGdvOGNHRjBhQ0JqYkdGemN6MGljM1F4SWlCa1BTSk5NalVzTWpndU9XTXRNUzR4TERFdU1TMHpMak1zTVM0ekxUTXVOU3d4TGpOakxURXVNeXd3TFRJdU55MHdMalV0TWk0M0xUSXVNV013TFRFdU5Dd3dMalV0TWk0ekxESXVNUzB5TGpOak1TNHpMREFzTWk0NExEQXVNU3cwTGpFc01DNDJWakk0TGpsNkNna2dUVEl4TGpRc016SXVNMk13TGpRc01Dd3lMak10TUM0eExETXVOeTB3TGpsc01DNHlMREF1TjJneUxqRjJMVGd1T1dNd0xUTXVOaTB5TGpNdE5TMDFMamN0TldNdE1TNDRMREF0TkM0ekxEQXVOeTAwTGpjc01DNDViREF1TkN3eUxqTmpNUzQyTFRBdU5pd3pMVEF1Tml3MExqSXRNQzQyQ2dsak1TNDRMREFzTXk0ekxEQXVOaXd6TGpNc01pNDJWakkwWXkweExUQXVOQzB5TGpRdE1DNDJMVFF1TVMwd0xqWmpMVE1zTUMwMExqVXNNUzQyTFRRdU5TdzBMamRETVRZdU5Dd3pNUzQ0TERFNUxqWXNNekl1TXl3eU1TNDBMRE15TGpONklpOCtDanh3WVhSb0lHTnNZWE56UFNKemRERWlJR1E5SWswek1DNHlMREUyTGpGak1Dd3dMallzTUM0MkxERXVNaXd4TGpNc01TNHlZekF1T0N3d0xERXVNeTB3TGpZc01TNHpMVEV1TW1Nd0xUQXVOeTB3TGpZdE1TNHpMVEV1TXkweExqTkRNekF1T0N3eE5DNDRMRE13TGpJc01UVXVNeXd6TUM0eUxERTJMakY2Q2drZ1RUTXdMak1zTXpJdU1XZ3lMalJXTVRndU5XZ3RNaTQwVmpNeUxqRjZJaTgrQ2p4d1lYUm9JR05zWVhOelBTSnpkREVpSUdROUlrMDNNUzR5TERJeUxqRm9PQzQwWXpBdU5Dd3dMakVzTUM0MkxEQXVNeXd3TGpZc01DNDNkakl1Tm1ndE9TNDNkaTB5TGpaRE56QXVOaXd5TWk0MExEY3dMamdzTWpJdU1pdzNNUzR5TERJeUxqRjZJRTAzTVM0eUxETXdMalVLQ1dNdE1DNDBMREF0TUM0MkxUQXVNeTB3TGpjdE1DNDRkaTB5TGpab09TNDNkakl1Tm1Nd0xEQXVOQzB3TGpJc01DNDNMVEF1Tml3d0xqZElOekV1TW5vZ1RUY3pMallzTVRoakxUQXVNU3d3TGpRdE1DNHhMREF1T1Mwd0xqUXNNUzQzWXkwd0xqRXNNQzR6TFRBdU1Td3dMalV0TUM0eExEQXVOd29KYUMweUxqWmpMVEV1TXl3d0xqRXRNUzQ1TERBdU9DMHlMREoyTnk0NVl6QXVNU3d4TGpFc01DNDRMREV1T0N3eUxERXVPV2d4TUdNeExqSXRNQzR4TERFdU9DMHdMamNzTVM0NUxURXVPSFl0Tnk0NVl5MHdMakV0TVM0ekxUQXVOeTB4TGprdE1TNDVMVEl1TVdndE5Rb0pZekF1TVMwd0xqTXNNQzR4TFRBdU9Dd3dMak10TVM0MFl6QXVNUzB3TGpRc01DNHhMVEF1Tnl3d0xqRXRNQzQ1YURjdU1uWXRNUzQ0U0RZM0xqUldNVGhNTnpNdU5pd3hPRXczTXk0MkxERTRlaUl2UGdvOGNHRjBhQ0JqYkdGemN6MGljM1F4SWlCa1BTSk5PVE11Tnl3eU1pNDNZeTB3TGpRdE1DNHhMVEF1TlMwd0xqSXRNQzQxTFRBdU5YWXRNQzQyYURNdU1uWXdMalpqTFRBdU1Td3dMak10TUM0eUxEQXVOQzB3TGpVc01DNDFTRGt6TGpkNklFMDVOaTQyTERJMExqRUtDV014TGpFdE1DNHhMREV1Tmkwd0xqVXNNUzQyTFRFdU5IWXRNV2d5TGpOMkxURXVOV2d0TWk0emRpMHhMakZvTFRFdU9IWXhMakZvTFRNdU1uWXRNUzR4YUMweExqaDJNUzR4YUMweUxqTjJNUzQxYURJdU0zWXhZekF1TVN3d0xqa3NNQzQyTERFdU5Dd3hMallzTVM0MFNEazJMalo2Q2drZ1RUazBMamdzTXpBdU5HTXhMallzTUM0NExETXVOQ3d4TGpNc05TNDBMREV1T0d3d0xqa3RNUzQzWXkweExqUXRNQzR5TFRJdU9TMHdMall0TkM0MExURXVNV014TGpFdE1DNDRMREl0TVM0MkxESXVOeTB5TGpWak1DNHpMVEF1TkN3d0xqUXRNQzQ1TERBdU1pMHhMak1LQ1dNdE1DNHpMVEF1Tmkwd0xqZ3RNQzQ1TFRFdU5DMHdMamxvTFRsMk1TNDFhRGN1TjJNd0xqSXNNQ3d3TGpRc01DNHhMREF1TkN3d0xqRnpNQ3d3TGpFdE1DNHhMREF1TTJNdE1DNDJMREF1TmkweExqUXNNUzR6TFRJdU15d3hMamhqTFRFdU1pMHdMamN0TWk0eExURXVNeTB5TGpRdE1TNDRhQzB5TGpJS0NXTXdMamtzTVN3eExqZ3NNUzQ1TERJdU9Td3lMamRqTFRFdU5pd3dMall0TXk0ekxERXVNUzAwTGprc01TNHpiREF1T1N3eExqWkRPVEV1TXl3ek1TNDRMRGt6TGpJc016RXVNU3c1TkM0NExETXdMalI2SUUwNE9DNHpMREkxTGpKMkxUWmpNQzR4TFRBdU5pd3dMak10TUM0NUxEQXVPQzB3TGprS0NXZ3hNUzQ0ZGkweExqWklPVFZqTFRBdU1TMHdMakV0TWk0eUxUQXVNUzB5TGpJc01HZ3ROQzQzWXkweExqRXNNQzR4TFRFdU55d3dMamt0TVM0NExESXVNbFl5TldNd0xqRXNNaTR4TFRBdU5DdzBMalF0TVM0eExEWXVOMnd4TGprc01DNDJDZ2xET0RjdU9Td3lPUzQ1TERnNExqTXNNamN1Tml3NE9DNHpMREkxTGpKNklpOCtDanh3WVhSb0lHTnNZWE56UFNKemRESWlJR1E5SWswME5pNHpMREkwTGpKak1DNDJMREFzTVM0eUxEQXVNU3d4TGpjc01DNDBkak11TkdNd0xEQXVNeTB3TGpZc01TMHhMamtzTVdNdE1TNDFMREF0TVM0NExUQXVOaTB4TGpndE1pNHhkaTB3TGpZS0NVTTBOQzR5TERJMExqZ3NORFF1Tnl3eU5DNHlMRFEyTGpNc01qUXVNbm9nVFRRNUxqSXNNakF1TjBnME9IWXlMalZETkRjdU5pd3lNeTR4TERRM0xESXpMRFEyTGpNc01qTmpMVEl1Tnl3d0xUTXVNeXd4TFRNdU15d3pMalYyTUM0ell6QXNNaTQwTERBdU9Td3pMak1zTXk0eUxETXVNd29KWXpBdU9Dd3dMREV1TXkwd0xqRXNNUzQ0TFRBdU5Xd3dMakVzTUM0MmFERXVNVXcwT1M0eUxESXdMamRNTkRrdU1pd3lNQzQzZWlJdlBnbzhjR0YwYUNCamJHRnpjejBpYzNReUlpQmtQU0pOTlRZdU55d3lNMmd0TVM0eWRqVXVNbU10TUM0MkxEQXVOQzB4TGpjc01DNDJMVEl1TkN3d0xqWmpMVEF1T0N3d0xURXRNQzQwTFRFdE1TNHpkaTAwTGpab0xURXVNWFkwTGpoak1Dd3hMallzTUM0MUxESXVNeXd5TGpFc01pNHpDZ2xqTVN3d0xESXVNUzB3TGpNc01pNDJMVEF1Tm13d0xqRXNNQzQyYURFdU1WWXlNM29pTHo0S1BIQmhkR2dnWTJ4aGMzTTlJbk4wTVNJZ1pEMGlUVGt5TGpjc01UVXVOMk13TFRBdU55d3dMall0TVM0ekxERXVNaTB4TGpOak1DNDJMREFzTVM0eUxEQXVOaXd4TGpJc01TNHpVemswTGpVc01UY3NPVE11T1N3eE4wTTVNeTR6TERFMkxqa3NPVEl1Tnl3eE5pNHpMRGt5TGpjc01UVXVOM29pTHo0S1BDOXpkbWMrQ2c9PSk7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2hlaWdodDoxMDBweDt3aWR0aDoyMDBweH0jdV9zcCAuc19icml7Ym9yZGVyOjAhaW1wb3J0YW50fS5wYXNzLXRleHQtaW5wdXR7YmFja2dyb3VuZC1pbWFnZTpub25lIWltcG9ydGFudH0ucGFzcy10ZXh0LWlucHV0LWZvY3Vze2JhY2tncm91bmQtaW1hZ2U6bm9uZSFpbXBvcnRhbnR9I3Bhc3Nwb3J0LWxvZ2luLXBvcHtmb250LWZhbWlseTotYXBwbGUtc3lzdGVtLGhlbHZldGljYSBuZXVlLEhlbHZldGljYSxuaW1idXMgc2FucyBsLEFyaWFsLGxpYmVyYXRpb24gc2FucyxwaW5nZmFuZyBzYyxoaXJhZ2lubyBzYW5zIGdiLHNvdXJjZSBoYW4gc2FucyBjbixzb3VyY2UgaGFuIHNhbnMgc2MsbWljcm9zb2Z0IHlhaGVpLHdlbnF1YW55aSBtaWNybyBoZWksd2VucXVhbnlpIHplbiBoZWksc3QgaGVpdGksU2ltSGVpLHdlbnF1YW55aSB6ZW4gaGVpIHNoYXJwLHNhbnMtc2VyaWY7Ym9yZGVyLXJhZGl1czoycHh9I1RBTkdSQU1fX1BTUF8yX190aXRsZVRleHR7Zm9udC1mYW1pbHk6SGVsdmV0aWNhLG1pY3Jvc29mdCB5YWhlaSB1aSBsaWdodH0ucGFzcy1mZ3Rwd2R7Zm9udC1mYW1pbHk6SGVsdmV0aWNhLG1pY3Jvc29mdCB5YWhlaSB1aSFpbXBvcnRhbnR9LnBhc3Mtc21zLWJ0bntmb250LWZhbWlseTpIZWx2ZXRpY2EsbWljcm9zb2Z0IHlhaGVpIHVpIWltcG9ydGFudH0ucGFzcy1yZWdsaW5re2ZvbnQtZmFtaWx5OkhlbHZldGljYSxtaWNyb3NvZnQgeWFoZWkgdWkhaW1wb3J0YW50fS50YW5nLWZvcmVncm91bmR7Ym9yZGVyLXJhZGl1czoycHghaW1wb3J0YW50O2JvcmRlcjowIWltcG9ydGFudH0udGFuZy10aXRsZXtib3JkZXItcmFkaXVzOjJweCAycHggMCAwIWltcG9ydGFudH0udGFuZy1wYXNzLXBvcC1sb2dpbiBkaXYudGFuZy10aXRsZXtib3JkZXItcmFkaXVzOjJweCAycHggMCAwIWltcG9ydGFudH0ucGFzcy1jaGVja2JveC1pbnB1dHt3aWR0aDoxN3B4O2hlaWdodDoxN3B4O2JvcmRlcjojZTBlMGUwIDNweCBzb2xpZCFpbXBvcnRhbnQ7YmFja2dyb3VuZC1jb2xvcjojZmZmIWltcG9ydGFudDtib3gtc2hhZG93Om5vbmV9LnRhbmctcGFzcy1wb3AtbG9naW4tY29sb3ItYmx1ZSAucGFzcy1idXR0b246Zm9jdXN7Ym94LXNoYWRvdzpyZ2JhKDAsMCwwLC4xNTY4NjMpIDAgM3B4IDEwcHgscmdiYSgwLDAsMCwuMjI3NDUxKSAwIDNweCAxMHB4IWltcG9ydGFudDstd2Via2l0LWJveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweCFpbXBvcnRhbnR9LnJyZWNvbS1idG4tcGFyZW50e2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9LnMtcC10b3B7Ym90dG9tOi04cHghaW1wb3J0YW50fWlucHV0W3R5cGU9dGV4dF06Zm9jdXN7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O2JvcmRlci10b3A6MCBzb2xpZCAjZmZmIWltcG9ydGFudDtib3JkZXItYm90dG9tOjAgc29saWQgI2ZmZiFpbXBvcnRhbnQ7Ym9yZGVyLWxlZnQ6MCBzb2xpZCAjZmZmIWltcG9ydGFudDtib3JkZXItcmlnaHQ6MCBzb2xpZCAjZmZmIWltcG9ydGFudH1hW3NvZnRfaWRde2Rpc3BsYXk6bm9uZX0ub3Atc29mdC1idG5ib3ggLmMtZ2FwLWxlZnQtc21hbGx7bWFyZ2luLWxlZnQ6MCFpbXBvcnRhbnQ7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiM0ODc5YmQ7cGFkZGluZzo3cHggMTVweDtib3JkZXItcmFkaXVzOjJweDtmb250LXNpemU6MTRweDt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZX0ub3Atc29mdC1idG5ib3ggLmMtZ2FwLWxlZnQtc21hbGw6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojNzA5OGQwO3RyYW5zaXRpb246YWxsIC4zcyBlYXNlO2JveC1zaGFkb3c6MCAycHggNXB4IDAgcmdiYSgwLDAsMCwuMTYpLDAgMnB4IDEwcHggMCByZ2JhKDAsMCwwLC4xMil9LnNvdXR1LWlucHV0LWltYWdle3RvcDo2cHg7bGVmdDo1cHh9I2t3e2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnR9LnMtc2tpbi1oYXNiZyAja3d7Ym94LXNoYWRvdzowIDAgMCByZ2JhKDAsMCwwLC4yKX0ucy1za2luLWhhc2JnIC5idG5fd3J7d2lkdGg6MzVweH0jc191c2Vyc2V0dGluZ190b3B7bWFyZ2luLXRvcDotN3B4fSNzX3VzZXJuYW1lX3RvcHttYXJnaW4tdG9wOjdweH0jdV9zcHtwYWRkaW5nLXRvcDoxNnB4fS5pcHRfcmVje2JhY2tncm91bmQ6MCAwO2JhY2tncm91bmQtaW1hZ2U6bm9uZX0uaXB0X3JlYzpob3ZlcntiYWNrZ3JvdW5kOjAgMDtiYWNrZ3JvdW5kLWltYWdlOm5vbmV9LmlwdF9yZWM6YWZ0ZXJ7ZGlzcGxheTpub25lO21hcmdpbi10b3A6NTBweH0uYmRwZm1lbnUsLnVzZXJtZW51e2JvcmRlcjpub25lO2JveC1zaGFkb3c6bm9uZTstd2Via2l0LWJveC1zaGFkb3c6bm9uZTstbW96LWJveC1zaGFkb3c6bm9uZTstby1ib3gtc2hhZG93Om5vbmV9LnFyY29kZUNvbnt2aXNpYmlsaXR5OmhpZGRlbn0jaGVhZCAuaGVhZEJsb2Nre21hcmdpbjoxMnB4IDAgNnB4IDEyMXB4fWF7Y29sb3I6IzQ4NzliZH1oMyBhOmhvdmVye2JvcmRlci1ib3R0b206IzQ4NzliZCAxLjJweCBzb2xpZH0uYy1zaG93dXJse2NvbG9yOiM0Y2FmNTB9Lm9wLXNlLWxpc3Rlbi1yZWNvbW1lbmQ6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojNDg3OWJkIDEuMnB4IHNvbGlkfS5jLWdhcC1ib3R0b20tc21hbGwgYTpob3Zlcntib3JkZXItYm90dG9tOiM0ODc5YmQgMS4ycHggc29saWR9LmMtcm93IGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojNDg3OWJkIDEuMnB4IHNvbGlkfSNycyBhOmhvdmVye2JvcmRlci1ib3R0b206IzQ4NzliZCAxLjJweCBzb2xpZH0uaGludF90b3BycV90aXBzX2l0ZW1zIGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojNDg3OWJkIDEuMnB4IHNvbGlkfS5jOmhvdmVye2JvcmRlci1ib3R0b206IzQ4NzliZCAxLjJweCBzb2xpZH1lbXtjb2xvcjojZWE0MzM1fS5vcC12aWRlby12YXN0LXVsIGxpIGF7bWFyZ2luLWJvdHRvbTp1bnNldH1ib2R5e2JhY2tncm91bmQtY29sb3I6I2Y3ZjdmN30jZm9ybSAuc19idG57YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudH0jd3JhcHBlciAjaGVhZHtiYWNrZ3JvdW5kLWNvbG9yOiNmOGY4Zjh9LmMtdGFicy1uYXZ7YmFja2dyb3VuZC1jb2xvcjojZWVlfS5jLXRhYnMtbmF2LXNlbGVjdGVke2JvcmRlci1ib3R0b206I2Y0NDMzNiAycHggc29saWQhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6IzIxOTZmMyFpbXBvcnRhbnQ7Y29sb3I6I2ZmZiFpbXBvcnRhbnR9I3BhZ2UgYXtiYWNrZ3JvdW5kOiNmZmY7Y29sb3I6IzQyNDI0Mn0jcGFnZSBhOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2UwZTBlMCFpbXBvcnRhbnR9I3BhZ2UgYSAucGM6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZTBlMGUwfSNwYWdlIHN0cm9uZ3tiYWNrZ3JvdW5kLWNvbG9yOiM0Mjg1ZjQhaW1wb3J0YW50O2NvbG9yOiNmZmZ9I3BhZ2Ugc3Ryb25nIC5wY3tiYWNrZ3JvdW5kLWNvbG9yOiM0Mjg1ZjQhaW1wb3J0YW50fS5wYzpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNlMGUwZTB9I3NfdGFiIGJ7Ym9yZGVyLWJvdHRvbTozcHggIzQ4NzliZCBzb2xpZDtjb2xvcjojNDg3OWJkfSNzX3RhYntib3JkZXItYm90dG9tOiNlMGUwZTAgMXB4IHNvbGlkfS5iZHBmbWVudSBhOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzQ4NzliZCFpbXBvcnRhbnR9LnNldHByZWY6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojNDg3OWJkIWltcG9ydGFudH0jdSAubGJ7YmFja2dyb3VuZC1jb2xvcjojNDg3OWJkfSN1IC5sYjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiM2MThjYzd9I3UgLmxiOmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOiM3ZGEwZDB9I2Jne2JhY2tncm91bmQtY29sb3I6I2ZmZiFpbXBvcnRhbnQ7YmFja2dyb3VuZDojZmZmfSN1MSBhLmxie2JhY2tncm91bmQtY29sb3I6IzQ4NzliZH0jdTEgYS5sYjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiM2MThjYzd9I3UxIGEubGI6YWN0aXZle2JhY2tncm91bmQtY29sb3I6IzdkYTBkMH0jdV9zcCAuc19icml7YmFja2dyb3VuZC1jb2xvcjojZjQ0MzM2fSNzX3VzZXJuYW1lX3RvcHtiYWNrZ3JvdW5kLWNvbG9yOiNlMGUwZTB9LnMtdXNlci1zZXQtbWVudSBhOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzQ4NzliZCFpbXBvcnRhbnR9I3VzZXJ7YmFja2dyb3VuZC1jb2xvcjojZTBlMGUwfS5tc2ctc2V0dGluZy1idG57YmFja2dyb3VuZC1jb2xvcjojNDg3OWJkIWltcG9ydGFudH0ubm8tdXNle2JhY2tncm91bmQtY29sb3I6I2U1ZTVlNSFpbXBvcnRhbnR9LnBhc3MtdGV4dC1pbnB1dHtib3JkZXItYm90dG9tOiNlMGUwZTAgMnB4IHNvbGlkIWltcG9ydGFudDtib3JkZXItbGVmdDojZmZmIDAgc29saWQhaW1wb3J0YW50O2JvcmRlci1yaWdodDojZmZmIDAgc29saWQhaW1wb3J0YW50O2JvcmRlci10b3A6I2ZmZiAwIHNvbGlkIWltcG9ydGFudH0ucGFzcy10ZXh0LWlucHV0LWZvY3Vze2JvcmRlci1ib3R0b206IzQ4NzliZCAycHggc29saWQhaW1wb3J0YW50O2JvcmRlci1sZWZ0OiNmZmYgMCBzb2xpZCFpbXBvcnRhbnQ7Ym9yZGVyLXJpZ2h0OiNmZmYgMCBzb2xpZCFpbXBvcnRhbnQ7Ym9yZGVyLXRvcDojZmZmIDAgc29saWQhaW1wb3J0YW50fS50YW5nLXBhc3MtcG9wLWxvZ2luLWNvbG9yLWJsdWUgLnBhc3MtYnV0dG9ue2JhY2tncm91bmQtY29sb3I6IzQ4NzliZH0udGFuZy1wYXNzLXBvcC1sb2dpbi1jb2xvci1ibHVlIC5wYXNzLWJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiM2MThjYzd9I2xne21hcmdpbi1sZWZ0Oi0zcmVtO2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0TkNqd2hMUzBnUjJWdVpYSmhkRzl5T2lCQlpHOWlaU0JKYkd4MWMzUnlZWFJ2Y2lBeE9TNHlMakVzSUZOV1J5QkZlSEJ2Y25RZ1VHeDFaeTFKYmlBdUlGTldSeUJXWlhKemFXOXVPaUEyTGpBd0lFSjFhV3hrSURBcElDQXRMVDROQ2p4emRtY2dkbVZ5YzJsdmJqMGlNUzR4SWlCcFpEMGk1YkdDWHpFaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJZ2VHMXNibk02ZUd4cGJtczlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1RrdmVHeHBibXNpSUhnOUlqQndlQ0lnZVQwaU1IQjRJZzBLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNalU1SURFeE5pSWdjM1I1YkdVOUltVnVZV0pzWlMxaVlXTnJaM0p2ZFc1a09tNWxkeUF3SURBZ01qVTVJREV4TmpzaUlIaHRiRHB6Y0dGalpUMGljSEpsYzJWeWRtVWlQZzBLUEhOMGVXeGxJSFI1Y0dVOUluUmxlSFF2WTNOeklqNE5DZ2t1YzNRd2UyWnBiR3c2SXpReU9EVkdORHQ5RFFvSkxuTjBNWHRtYVd4c09pTkZRVFF6TXpVN2ZRMEtDUzV6ZERKN1ptbHNiRG9qUmtaR1JrWkdPMzBOQ2p3dmMzUjViR1UrRFFvOGNHRjBhQ0JqYkdGemN6MGljM1F3SWlCa1BTSk5NVEk0TGpJc056ZGpMVFV1TkN3d0xqUXROUzQyTERNdU55MDRMakVzTmk0M1l5MHlMalVzTXk0eExUY3VOeXcxTGpndE9DNDBMRGt1TldNdE1DNDRMRFF1Tnl3eExqZ3NOeTR5TERRdU15dzRZekl1Tnl3d0xqa3NPQzQ0TFRBdU55d3hNUzQ1TFRBdU53MEtDV2d3TGpOb01DNHpZek11TVN3d0xEa3VNU3d4TGpZc01URXVPU3d3TGpkak1pNDFMVEF1T1N3MExqa3ROQzQxTERRdU15MDRZeTB3TGpVdE15MDJMakl0Tmk0MExUZ3VOeTA1TGpWRE1UTXpMallzT0RBdU55d3hNek11Tnl3M055NDBMREV5T0M0eUxEYzNlaUJOTVRBNUxqTXNOell1TXcwS0NXTXdMRE11TkN3eUxqSXNOaTR4TERRdU9DdzJMakZqTWk0M0xEQXNOQzQ0TFRJdU55dzBMamd0Tmk0eGN5MHlMakl0Tmk0eExUUXVPQzAyTGpGVE1UQTVMak1zTnpNc01UQTVMak1zTnpZdU0zb2dUVEV4T1N3Mk55NDFZekFzTXk0MUxESXVNU3cyTGpRc05DNDJMRFl1TkEwS0NXTXlMallzTUN3MExqY3RNaTQ1TERRdU55MDJMalJ6TFRJdU1TMDJMalF0TkM0M0xUWXVORU14TWpFc05qRXNNVEU1TERZekxqa3NNVEU1TERZM0xqVjZJRTB4TXpBdU55dzJOeTQwWXpBc015NHpMRElzTml3MExqVXNObk0wTGpVdE1pNDNMRFF1TlMwMll6QXRNeTR6TFRJdE5pMDBMalV0TmcwS0NWTXhNekF1Tnl3Mk5DNHhMREV6TUM0M0xEWTNMalI2SUUweE16Z3VNaXczTnk0NFl6QXNNeTR6TERJdU1TdzJMRFF1Tml3Mll6SXVOaXd3TERRdU55MHlMamNzTkM0M0xUWmpNQzB6TGpNdE1pNHhMVFl0TkM0M0xUWkRNVFF3TGpJc056RXVPQ3d4TXpndU1pdzNOQzQxTERFek9DNHlMRGMzTGpoNklnMEtDUzgrRFFvOGNHRjBhQ0JqYkdGemN6MGljM1F4SWlCa1BTSk5Oakl1T0N3NU9DNHlWamt4YURsak1pNHlMREFzTWk0ekxEQXVOQ3d5TGpNc01pNDRkakpqTUN3eUxqTXRNeTR5TERJdU5TMDFMalVzTWk0MWFDMDFMamhXT1RndU1ub2dUVFl5TGpnc09EY3VPRlk0TVdnMUxqZ05DZ2xqTWk0ekxEQXNOUzQxTERBc05TNDFMRE4yTUM0eFl6QXNNaTB3TGpjc015NDNMVEl1TlN3ekxqZEROekV1Tml3NE55NDRMRFl5TGpnc09EY3VPQ3cyTWk0NExEZzNMamg2SUUwMU9TNDFMRGMzTGpsMk1qTm9PUzR4WXpRdU15d3dMRGd1Tnl3d0xEZ3VOeTAxTGpGMkxURXVOUTBLQ1dNd0xUSXVNeTB3TGpJdE15NDRMVEV1TlMwMExqbGpNUzQwTFRFdU1Td3hMalV0TXk0eUxERXVOUzAxTGpGc01Dd3dZekF0Tmk0ekxUUXVOUzAyTGpNdE9DNDNMVFl1TTB3MU9TNDFMRGMzTGpsTU5Ua3VOU3czTnk0NWVpSXZQZzBLUEhCaGRHZ2dZMnhoYzNNOUluTjBNU0lnWkQwaVRUa3lMalFzT1RZdU1XTXRNUzQxTERFdU5pMDBMallzTVM0NExUUXVPU3d4TGpoakxURXVPU3d3TFRNdU9DMHdMamN0TXk0NExUSXVPV013TFRJc01DNDNMVE11TXl3eUxqa3RNeTR6WXpFdU9Dd3dMRFFzTUM0eUxEVXVPQ3d3TGpoV09UWXVNWG9OQ2drZ1RUZzNMak1zTVRBd0xqbGpNQzQxTERBc015NHpMVEF1TWl3MUxqSXRNUzR6YkRBdU15d3hhREl1T1ZZNE9HTXdMVFV1TVMwekxqSXROeTR4TFRndE55NHhZeTB5TGpVc01DMDJMakVzTVMwMkxqWXNNUzR5YkRBdU5pd3pMakpqTWk0eUxUQXVPQ3cwTGpJdE1DNDVMRFV1T1Mwd0xqa05DZ2xqTWk0MkxEQXNOQzQyTERBdU9TdzBMallzTXk0M2RqRXVNV010TVM0MExUQXVOUzB6TGpRdE1DNDVMVFV1T0Mwd0xqbGpMVFF1TWl3d0xUWXVNeXd5TGpNdE5pNHpMRFl1TmtNNE1DNHpMREV3TUM0ekxEZzBMamNzTVRBd0xqa3NPRGN1TXl3eE1EQXVPWG9pTHo0TkNqeHdZWFJvSUdOc1lYTnpQU0p6ZERFaUlHUTlJazA1T1M0M0xEYzRMakZqTUN3d0xqa3NNQzQ1TERFdU55d3hMamdzTVM0M1l6RXVNU3d3TERFdU9TMHdMamdzTVM0NUxURXVOMk13TFRFdE1DNDRMVEV1T0MweExqa3RNUzQ0UXpFd01DNDJMRGMyTGpNc09Ua3VOeXczTnl3NU9TNDNMRGM0TGpGNkRRb0pJRTA1T1M0NUxERXdNQzQyYURNdU5GWTRNUzQxYUMwekxqUldNVEF3TGpaNklpOCtEUW84Y0dGMGFDQmpiR0Z6Y3owaWMzUXhJaUJrUFNKTk1UVTNMallzT0RZdU5tZ3hNUzQ0WXpBdU5Td3dMakVzTUM0NExEQXVOQ3d3TGprc01YWXpMalpvTFRFekxqZDJMVE11TmtNeE5UWXVOeXc0Tnl3eE5UY3NPRFl1Tnl3eE5UY3VOaXc0Tmk0MmVpQk5NVFUzTGpZc09UZ3VOQTBLQ1dNdE1DNDJMREF0TUM0NUxUQXVOQzB4TFRFdU1YWXRNeTQyYURFekxqZDJNeTQzWXpBc01DNDJMVEF1TXl3eExUQXVPU3d4U0RFMU55NDJlaUJOTVRZd0xqa3NPREF1TjJNdE1DNHhMREF1TlMwd0xqSXNNUzR6TFRBdU5Td3lMalJqTFRBdU1Td3dMalF0TUM0eExEQXVOeTB3TGpJc01XZ3RNeTQzRFFvSll5MHhMamdzTUM0eExUSXVOeXd4TGpFdE1pNDRMREl1T0ZZNU9HTXdMakVzTVM0MkxERXVNU3d5TGpVc01pNDRMREl1TjJneE5DNHhZekV1Tnkwd0xqRXNNaTQyTFRFc01pNDNMVEl1TlZZNE4yTXRNQzR4TFRFdU9DMHhMVEl1TnkweUxqY3RNaTQ1YUMwM0RRb0pZekF1TVMwd0xqUXNNQzR5TFRFdU1Td3dMalF0TW1Nd0xqRXRNQzQyTERBdU1TMHhMREF1TWkweExqTm9NVEF1TW5ZdE1pNDJhQzB5TWk0eWRqSXVOa3d4TmpBdU9TdzRNQzQzVERFMk1DNDVMRGd3TGpkNklpOCtEUW84Y0dGMGFDQmpiR0Z6Y3owaWMzUXhJaUJrUFNKTk1UZzVMalFzT0RjdU5HTXRNQzQxTFRBdU1TMHdMamN0TUM0ekxUQXVOeTB3TGpkMkxUQXVPV2cwTGpWMk1DNDVZeTB3TGpFc01DNDBMVEF1TXl3d0xqWXRNQzQzTERBdU4wZ3hPRGt1TkhvZ1RURTVNeTQwTERnNUxqUU5DZ2xqTVM0MUxUQXVNU3d5TGpJdE1DNDNMREl1TXkweVZqZzJhRE11TW5ZdE1pNHhhQzB6TGpKMkxURXVObWd0TWk0MWRqRXVObWd0TkM0MWRpMHhMalpvTFRJdU5uWXhMalpvTFRNdU1sWTRObWd6TGpKMk1TNDBZekF1TVN3eExqTXNNQzQ0TERJc01pNHlMREpJTVRrekxqUjZJRTB4T1RBdU9TdzVPQzR6RFFvSll6SXVNeXd4TGpFc05DNDRMREV1T1N3M0xqWXNNaTQyYkRFdU1pMHlMalJqTFRJdE1DNHpMVFF1TVMwd0xqZ3ROaTR5TFRFdU5tTXhMalV0TVM0eExESXVPQzB5TGpJc015NDRMVE11TldNd0xqUXRNQzQyTERBdU5TMHhMaklzTUM0ekxURXVPV010TUM0MExUQXVPQzB4TGpFdE1TNHlMVEl0TVM0eURRb0phQzB4TWk0M2RqSXVNV2d4TUM0NFl6QXVNeXd3TERBdU5Td3dMakVzTUM0MkxEQXVNbk13TERBdU1pMHdMaklzTUM0MFl5MHdMamtzTUM0NUxUSXNNUzQ0TFRNdU15d3lMalpqTFRFdU55MHhMVEl1T1MweExqa3RNeTQwTFRJdU5tZ3RNeTR4WXpFdU1pd3hMalFzTWk0MkxESXVOeXcwTGpFc015NDREUW9KWXkweUxqTXNNQzQ1TFRRdU5pd3hMalV0Tmk0NUxERXVPR3d4TGpNc01pNHlRekU0TlM0NUxERXdNQzR5TERFNE9DNDJMRGs1TGpNc01Ua3dMamtzT1RndU0zb2dUVEU0TVM0M0xEa3dMamwyTFRndU5XTXdMakV0TUM0NExEQXVOQzB4TGpJc01TNHhMVEV1TTJneE5pNDNkaTB5TGpOb0xUZ3VNdzBLQ1dNdE1DNHhMVEF1TWkwekxqRXRNQzR4TFRNdU1Td3dhQzAyTGpkakxURXVOU3d3TGpJdE1pNDBMREV1TXkweUxqVXNNeTR4ZGpndU4yTXdMakVzTXkwd0xqVXNOaTR5TFRFdU5pdzVMalJzTWk0M0xEQXVPRU14T0RFdU1TdzVOeTQyTERFNE1TNDNMRGswTGpNc01UZ3hMamNzT1RBdU9Yb2lMejROQ2p4d1lYUm9JR05zWVhOelBTSnpkRElpSUdROUlrMHhNakl1TlN3NE9TNDFZekF1T0N3d0xERXVOeXd3TGpJc01pNDBMREF1TlhZMExqaGpNQ3d3TGpRdE1DNDVMREV1TkMweUxqY3NNUzQwWXkweUxqRXNNQzB5TGpZdE1DNDVMVEl1TmkweUxqbDJMVEF1T0EwS0NVTXhNVGt1TlN3NU1DNDBMREV5TUM0eUxEZzVMalVzTVRJeUxqVXNPRGt1TlhvZ1RURXlOaTQyTERnMExqWm9MVEV1TjNZekxqVmpMVEF1Tmkwd0xqSXRNUzQxTFRBdU15MHlMalF0TUM0ell5MHpMamdzTUMwMExqWXNNUzQwTFRRdU5pdzBMamwyTUM0MERRb0pZekFzTXk0MExERXVNeXcwTGpZc05DNDFMRFF1Tm1NeExqRXNNQ3d4TGprdE1DNHlMREl1Tmkwd0xqZHNNQzR5TERBdU9HZ3hMalZNTVRJMkxqWXNPRFF1Tmt3eE1qWXVOaXc0TkM0MmVpSXZQZzBLUEhCaGRHZ2dZMnhoYzNNOUluTjBNaUlnWkQwaVRURXpOeTR4TERnM0xqaG9MVEV1TjNZM0xqUmpMVEF1T1N3d0xqVXRNaTQwTERBdU9DMHpMalFzTUM0NFl5MHhMakVzTUMweExqUXRNQzQyTFRFdU5DMHhMamwyTFRZdU5VZ3hNamwyTmk0NFl6QXNNaTR6TERBdU55d3pMaklzTWk0NUxETXVNZzBLQ1dNeExqUXNNQ3d5TGprdE1DNDBMRE11Tmkwd0xqaHNNQzR4TERBdU9HZ3hMalZXT0RjdU9Ib2lMejROQ2p4d1lYUm9JR05zWVhOelBTSnpkREVpSUdROUlrMHhPRGN1T1N3M055NDFZekF0TVN3d0xqZ3RNUzQ0TERFdU55MHhMamh6TVM0M0xEQXVPQ3d4TGpjc01TNDRjeTB3TGpnc01TNDRMVEV1Tnl3eExqaERNVGc0TGpjc056a3VNaXd4T0RjdU9TdzNPQzQwTERFNE55NDVMRGMzTGpWNklpOCtEUW84TDNOMlp6NE5DZz09KX0jZm9ybSAuc19idG57YmFja2dyb3VuZC1pbWFnZTp1cmwoZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejRLUENFdExTQkhaVzVsY21GMGIzSTZJRUZrYjJKbElFbHNiSFZ6ZEhKaGRHOXlJREU1TGpJdU1Td2dVMVpISUVWNGNHOXlkQ0JRYkhWbkxVbHVJQzRnVTFaSElGWmxjbk5wYjI0NklEWXVNREFnUW5WcGJHUWdNQ2tnSUMwdFBnbzhjM1puSUhabGNuTnBiMjQ5SWpFdU1TSWdhV1E5SXVXYnZ1V3hnbDh4SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSUtDU0IyYVdWM1FtOTRQU0l3SURBZ016SWdNeklpSUhOMGVXeGxQU0psYm1GaWJHVXRZbUZqYTJkeWIzVnVaRHB1WlhjZ01DQXdJRE15SURNeU95SWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krQ2p4emRIbHNaU0IwZVhCbFBTSjBaWGgwTDJOemN5SStDZ2t1YzNRd2UyWnBiR3c2SXpRM056bENSRHQ5Q2p3dmMzUjViR1UrQ2p4d1lYUm9JR05zWVhOelBTSnpkREFpSUdROUlrMHhOQzQ0TERJeExqVmpMVEF1TkN3d0xUQXVOeXd3TFRFdU1TMHdMakZqTFRJdU1TMHdMak10TXk0NUxURXVOQzAxTGpJdE0yTXRNUzR6TFRFdU55MHhMamd0TXk0M0xURXVOaTAxTGpoak1DNHpMVEl1TVN3eExqUXRNeTQ1TERNdE5TNHlDZ2xqTVM0M0xURXVNeXd6TGpndE1TNDRMRFV1T0MweExqWmpNaTR4TERBdU15d3pMamtzTVM0MExEVXVNaXd6WXpFdU15d3hMamNzTVM0NExETXVPQ3d4TGpZc05TNDRZeTB3TGpNc01pNHhMVEV1TkN3ekxqa3RNeXcxTGpKRE1UZ3VNaXd5TVN3eE5pNDFMREl4TGpVc01UUXVPQ3d5TVM0MWVnb0pJRTB4TkM0NExEZ3VNV010TVM0eUxEQXRNaTQwTERBdU5DMHpMak1zTVM0eFl5MHlMalFzTVM0NExUSXVPU3cxTGpNdE1TdzNMamRqTVM0NExESXVOQ3cxTGpNc01pNDVMRGN1Tnl3eFl6RXVNaTB3TGprc01TNDVMVEl1TWl3eUxqRXRNeTQyWXpBdU1pMHhMalV0TUM0eUxUSXVPUzB4TGpFdE5DNHhDZ2xUTVRjc09DNDBMREUxTGpVc09DNHlRekUxTGpNc09DNHlMREUxTERndU1Td3hOQzQ0TERndU1Yb2lMejRLUEdjK0NnazhaejRLQ1FrOGNHRjBhQ0JqYkdGemN6MGljM1F3SWlCa1BTSk5NalV1TXl3eU55NDFUREkxTGpNc01qY3VOV010TUM0MkxEQXVOQzB4TGpRc01DNHpMVEV1T0Mwd0xqSnNMVFV1TVMwMkxqZGpMVEF1TkMwd0xqWXRNQzR6TFRFdU5Dd3dMakl0TVM0NGJEQXNNQW9KQ1Fsak1DNDJMVEF1TkN3eExqUXRNQzR6TERFdU9Dd3dMakpzTlM0eExEWXVOME15Tml3eU5pNHpMREkxTGprc01qY3VNU3d5TlM0ekxESTNMalY2SWk4K0NnazhMMmMrQ2p3dlp6NEtQQzl6ZG1jK0NnPT0pIWltcG9ydGFudH0jZm9ybSAuc19idG5fd3J7YmFja2dyb3VuZC1pbWFnZTp1cmwoZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejRLUENFdExTQkhaVzVsY21GMGIzSTZJRUZrYjJKbElFbHNiSFZ6ZEhKaGRHOXlJREU1TGpJdU1Td2dVMVpISUVWNGNHOXlkQ0JRYkhWbkxVbHVJQzRnVTFaSElGWmxjbk5wYjI0NklEWXVNREFnUW5WcGJHUWdNQ2tnSUMwdFBnbzhjM1puSUhabGNuTnBiMjQ5SWpFdU1TSWdhV1E5SXVXYnZ1V3hnbDh4SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSUtDU0IyYVdWM1FtOTRQU0l3SURBZ016SWdNeklpSUhOMGVXeGxQU0psYm1GaWJHVXRZbUZqYTJkeWIzVnVaRHB1WlhjZ01DQXdJRE15SURNeU95SWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krQ2p4emRIbHNaU0IwZVhCbFBTSjBaWGgwTDJOemN5SStDZ2t1YzNRd2UyWnBiR3c2SXpRM056bENSRHQ5Q2p3dmMzUjViR1UrQ2p4d1lYUm9JR05zWVhOelBTSnpkREFpSUdROUlrMHhOQzQ0TERJeExqVmpMVEF1TkN3d0xUQXVOeXd3TFRFdU1TMHdMakZqTFRJdU1TMHdMak10TXk0NUxURXVOQzAxTGpJdE0yTXRNUzR6TFRFdU55MHhMamd0TXk0M0xURXVOaTAxTGpoak1DNHpMVEl1TVN3eExqUXRNeTQ1TERNdE5TNHlDZ2xqTVM0M0xURXVNeXd6TGpndE1TNDRMRFV1T0MweExqWmpNaTR4TERBdU15d3pMamtzTVM0MExEVXVNaXd6WXpFdU15d3hMamNzTVM0NExETXVPQ3d4TGpZc05TNDRZeTB3TGpNc01pNHhMVEV1TkN3ekxqa3RNeXcxTGpKRE1UZ3VNaXd5TVN3eE5pNDFMREl4TGpVc01UUXVPQ3d5TVM0MWVnb0pJRTB4TkM0NExEZ3VNV010TVM0eUxEQXRNaTQwTERBdU5DMHpMak1zTVM0eFl5MHlMalFzTVM0NExUSXVPU3cxTGpNdE1TdzNMamRqTVM0NExESXVOQ3cxTGpNc01pNDVMRGN1Tnl3eFl6RXVNaTB3TGprc01TNDVMVEl1TWl3eUxqRXRNeTQyWXpBdU1pMHhMalV0TUM0eUxUSXVPUzB4TGpFdE5DNHhDZ2xUTVRjc09DNDBMREUxTGpVc09DNHlRekUxTGpNc09DNHlMREUxTERndU1Td3hOQzQ0TERndU1Yb2lMejRLUEdjK0NnazhaejRLQ1FrOGNHRjBhQ0JqYkdGemN6MGljM1F3SWlCa1BTSk5NalV1TXl3eU55NDFUREkxTGpNc01qY3VOV010TUM0MkxEQXVOQzB4TGpRc01DNHpMVEV1T0Mwd0xqSnNMVFV1TVMwMkxqZGpMVEF1TkMwd0xqWXRNQzR6TFRFdU5Dd3dMakl0TVM0NGJEQXNNQW9KQ1Fsak1DNDJMVEF1TkN3eExqUXRNQzR6TERFdU9Dd3dMakpzTlM0eExEWXVOME15Tml3eU5pNHpMREkxTGprc01qY3VNU3d5TlM0ekxESTNMalY2SWk4K0NnazhMMmMrQ2p3dlp6NEtQQzl6ZG1jK0NnPT0pIWltcG9ydGFudH0uYy1pY29uLXRpZWJhe2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNalFnTWpRaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURJMElESTBPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3Nkl6TTNRVUpGTXp0OUNna3VjM1F4ZTJacGJHdzZJMFpHUmtaR1JqdDlDand2YzNSNWJHVStDanh3WVhSb0lHTnNZWE56UFNKemREQWlJR1E5SWsweU1DNDVMREl6TGpOSU15NHhZeTB4TGpFc01DMHlMVEF1T1MweUxUSldNaTQ0WXpBdE1TNHhMREF1T1MweUxESXRNbWd4Tnk0NFl6RXVNU3d3TERJc01DNDVMRElzTW5ZeE9DNDFRekl5TGprc01qSXVOQ3d5TWl3eU15NHpMREl3TGprc01qTXVNM29pQ2drdlBnbzhaejRLQ1R4d1lYUm9JR05zWVhOelBTSnpkREVpSUdROUlrMDFMaklzTVRrdU9VdzBMREU1TGpKak1TNDFMVEV1T1N3eUxqTXRNeTQ1TERJdU5DMDFMamhqTUMweExEQXVNUzB6TGpFc01DNHhMVFl1TTBnNFl6QXNNaTR5TERBc05DNHpMVEF1TVN3MkxqUmpNQ3d3TGpZdE1DNHhMREV1TWkwd0xqTXNNUzQ0Q2drSmFERXVNV013TGpVc01DNDRMREV1TWl3eUxqUXNNaTR5TERRdU5rZzVZeTB3TGpZdE1TNDFMVEV1TWkweUxqZ3RNUzQyTFRNdU9VTTNMREUzTGpJc05pNHpMREU0TGpZc05TNHlMREU1TGpsNklFMDBMakVzTVRRdU9GWTJMakZqTUMweExqSXNNQzQxTFRFdU9Dd3hMall0TVM0NGFETUtDUWxqTVN3d0xERXVOaXd3TGpjc01TNDJMREV1T0hZNExqWklPQzQ1VmpZdU0yTXdMVEF1TkMwd0xqTXRNQzQyTFRBdU5pMHdMalpvTFRKakxUQXVOQ3d3TFRBdU5pd3dMakl0TUM0MkxEQXVOblk0TGpWSU5DNHhlaUJOTVRJdU9Td3hPUzQxWXkweExqRXNNQzB4TGpjdE1DNDJMVEV1T0MweExqWldNVE1LQ1Fsak1DMHhMakVzTUM0M0xURXVOeXd4TGpndE1TNDRhREZXTkM0eGFERXVOM1l5TGpWSU1qQldPR2d0TkM0emRqTXVNbWd4TGpoak1TNHhMREFzTVM0M0xEQXVOeXd4TGpnc01TNDRkalF1T0dNd0xERXVNUzB3TGpZc01TNDJMVEV1T0N3eExqZElNVEl1T1hvZ1RURXlMamdzTVRNdU0zWTBMak1LQ1Fsak1Dd3dMalFzTUM0ekxEQXVOeXd3TGpjc01DNDNhRE11TW1Nd0xqVXNNQ3d3TGpjdE1DNHpMREF1T0Mwd0xqZDJMVFF1TkdNd0xUQXVOQzB3TGpNdE1DNDNMVEF1Tnkwd0xqZG9MVE11TTBNeE15NHhMREV5TGpZc01USXVPU3d4TWk0NExERXlMamdzTVRNdU0zb2lMejRLUEM5blBnbzhMM04yWno0Syl9I3UgLnBme2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNeklnTXpJaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURNeUlETXlPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3Nkl6WkVOa1EyUkR0OUNqd3ZjM1I1YkdVK0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERBaUlHUTlJazB5TlM0eUxERTNMakpqTUMwd0xqUXNNQzR4TFRBdU9Dd3dMakV0TVM0eVl6QXRNQzQwTERBdE1DNDRMVEF1TVMweExqSnNNaTQyTFRKak1DNHlMVEF1TWl3d0xqTXRNQzQxTERBdU1TMHdMamhzTFRJdU5TMDBMak1LQ1dNdE1DNHhMVEF1TXkwd0xqVXRNQzQwTFRBdU9DMHdMak5zTFRNdU1Td3hMakpqTFRBdU5pMHdMalV0TVM0ekxUQXVPUzB5TGpFdE1TNHliQzB3TGpVdE15NHpZekF0TUM0ekxUQXVNeTB3TGpVdE1DNDJMVEF1TldndE5XTXRNQzR6TERBdE1DNDJMREF1TWkwd0xqWXNNQzQxYkMwd0xqVXNNeTR6Q2dsakxUQXVPQ3d3TGpNdE1TNDBMREF1TnkweUxqRXNNUzR5VERjdU15dzNMalJETnl3M0xqTXNOaTQzTERjdU5DdzJMalVzTnk0M1REUXNNVEV1T1dNdE1DNHlMREF1TXkwd0xqRXNNQzQyTERBdU1Td3dMamhzTWk0MkxESmpNQ3d3TGpRdE1DNHhMREF1T0Mwd0xqRXNNUzR5Q2dsak1Dd3dMalFzTUN3d0xqZ3NNQzR4TERFdU1td3RNaTQyTERKakxUQXVNaXd3TGpJdE1DNHpMREF1TlMwd0xqRXNNQzQ0YkRJdU5TdzBMak5qTUM0eExEQXVNeXd3TGpVc01DNDBMREF1T0N3d0xqTnNNeTR4TFRFdU1tTXdMallzTUM0MUxERXVNeXd3TGprc01pNHhMREV1TW13d0xqVXNNeTR6Q2dsak1Dd3dMak1zTUM0ekxEQXVOU3d3TGpZc01DNDFhRFZqTUM0ekxEQXNNQzQyTFRBdU1pd3dMall0TUM0MWJEQXVOUzB6TGpOak1DNDRMVEF1TXl3eExqUXRNQzQzTERJdU1TMHhMakpzTXk0eExERXVNbU13TGpNc01DNHhMREF1Tml3d0xEQXVPQzB3TGpOc01pNDFMVFF1TXdvSll6QXVNUzB3TGpNc01DNHhMVEF1Tmkwd0xqRXRNQzQ0VERJMUxqSXNNVGN1TW5vZ1RURTJMREl3TGpOakxUSXVOQ3d3TFRRdU15MHhMamt0TkM0ekxUUXVNM014TGprdE5DNHpMRFF1TXkwMExqTnpOQzR6TERFdU9TdzBMak1zTkM0elV6RTRMalFzTWpBdU15d3hOaXd5TUM0emVpSXZQZ284TDNOMlp6NEspfSN1IC5sYntiYWNrZ3JvdW5kLWltYWdlOnVybChkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NEtQQ0V0TFNCSFpXNWxjbUYwYjNJNklFRmtiMkpsSUVsc2JIVnpkSEpoZEc5eUlERTVMakl1TVN3Z1UxWkhJRVY0Y0c5eWRDQlFiSFZuTFVsdUlDNGdVMVpISUZabGNuTnBiMjQ2SURZdU1EQWdRblZwYkdRZ01Da2dJQzB0UGdvOGMzWm5JSFpsY25OcGIyNDlJakV1TVNJZ2FXUTlJdVdidnVXeGdsOHhJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRQU0l3Y0hnaUlIazlJakJ3ZUNJS0NTQjJhV1YzUW05NFBTSXdJREFnTkRZZ05EWWlJSE4wZVd4bFBTSmxibUZpYkdVdFltRmphMmR5YjNWdVpEcHVaWGNnTUNBd0lEUTJJRFEyT3lJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSStDanh6ZEhsc1pTQjBlWEJsUFNKMFpYaDBMMk56Y3lJK0Nna3VjM1F3ZTJacGJHdzZJMFpHUmtaR1JqdDlDand2YzNSNWJHVStDanh3WVhSb0lHTnNZWE56UFNKemREQWlJR1E5SWsweU15d3lNMk15TGprc01DdzFMakl0TWk0ekxEVXVNaTAxTGpKekxUSXVNeTAxTGpJdE5TNHlMVFV1TW5NdE5TNHlMREl1TXkwMUxqSXNOUzR5VXpJd0xqRXNNak1zTWpNc01qTjZJRTB5TXl3eU5TNDJDZ2xqTFRNdU5Td3dMVEV3TGpRc01TNDNMVEV3TGpRc05TNHlkakl1Tm1neU1DNDNkaTB5TGpaRE16TXVOQ3d5Tnk0ekxESTJMalVzTWpVdU5pd3lNeXd5TlM0MmVpSXZQZ284TDNOMlp6NEspfSN1MSBhLnBme2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNeklnTXpJaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURNeUlETXlPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3Nkl6WkVOa1EyUkR0OUNqd3ZjM1I1YkdVK0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERBaUlHUTlJazB5TlM0eUxERTNMakpqTUMwd0xqUXNNQzR4TFRBdU9Dd3dMakV0TVM0eVl6QXRNQzQwTERBdE1DNDRMVEF1TVMweExqSnNNaTQyTFRKak1DNHlMVEF1TWl3d0xqTXRNQzQxTERBdU1TMHdMamhzTFRJdU5TMDBMak1LQ1dNdE1DNHhMVEF1TXkwd0xqVXRNQzQwTFRBdU9DMHdMak5zTFRNdU1Td3hMakpqTFRBdU5pMHdMalV0TVM0ekxUQXVPUzB5TGpFdE1TNHliQzB3TGpVdE15NHpZekF0TUM0ekxUQXVNeTB3TGpVdE1DNDJMVEF1TldndE5XTXRNQzR6TERBdE1DNDJMREF1TWkwd0xqWXNNQzQxYkMwd0xqVXNNeTR6Q2dsakxUQXVPQ3d3TGpNdE1TNDBMREF1TnkweUxqRXNNUzR5VERjdU15dzNMalJETnl3M0xqTXNOaTQzTERjdU5DdzJMalVzTnk0M1REUXNNVEV1T1dNdE1DNHlMREF1TXkwd0xqRXNNQzQyTERBdU1Td3dMamhzTWk0MkxESmpNQ3d3TGpRdE1DNHhMREF1T0Mwd0xqRXNNUzR5Q2dsak1Dd3dMalFzTUN3d0xqZ3NNQzR4TERFdU1td3RNaTQyTERKakxUQXVNaXd3TGpJdE1DNHpMREF1TlMwd0xqRXNNQzQ0YkRJdU5TdzBMak5qTUM0eExEQXVNeXd3TGpVc01DNDBMREF1T0N3d0xqTnNNeTR4TFRFdU1tTXdMallzTUM0MUxERXVNeXd3TGprc01pNHhMREV1TW13d0xqVXNNeTR6Q2dsak1Dd3dMak1zTUM0ekxEQXVOU3d3TGpZc01DNDFhRFZqTUM0ekxEQXNNQzQyTFRBdU1pd3dMall0TUM0MWJEQXVOUzB6TGpOak1DNDRMVEF1TXl3eExqUXRNQzQzTERJdU1TMHhMakpzTXk0eExERXVNbU13TGpNc01DNHhMREF1Tml3d0xEQXVPQzB3TGpOc01pNDFMVFF1TXdvSll6QXVNUzB3TGpNc01DNHhMVEF1Tmkwd0xqRXRNQzQ0VERJMUxqSXNNVGN1TW5vZ1RURTJMREl3TGpOakxUSXVOQ3d3TFRRdU15MHhMamt0TkM0ekxUUXVNM014TGprdE5DNHpMRFF1TXkwMExqTnpOQzR6TERFdU9TdzBMak1zTkM0elV6RTRMalFzTWpBdU15d3hOaXd5TUM0emVpSXZQZ284TDNOMlp6NEspfSN1MSBhLnBmLCN1MSBhLmxie2NvbG9yOnRyYW5zcGFyZW50IWltcG9ydGFudH0jdTEgYS5icml7YmFja2dyb3VuZC1pbWFnZTp1cmwoZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejRLUENFdExTQkhaVzVsY21GMGIzSTZJRUZrYjJKbElFbHNiSFZ6ZEhKaGRHOXlJREU1TGpJdU1Td2dVMVpISUVWNGNHOXlkQ0JRYkhWbkxVbHVJQzRnVTFaSElGWmxjbk5wYjI0NklEWXVNREFnUW5WcGJHUWdNQ2tnSUMwdFBnbzhjM1puSUhabGNuTnBiMjQ5SWpFdU1TSWdhV1E5SXVXYnZ1V3hnbDh4SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSUtDU0IyYVdWM1FtOTRQU0l3SURBZ016SWdNeklpSUhOMGVXeGxQU0psYm1GaWJHVXRZbUZqYTJkeWIzVnVaRHB1WlhjZ01DQXdJRE15SURNeU95SWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krQ2p4emRIbHNaU0IwZVhCbFBTSjBaWGgwTDJOemN5SStDZ2t1YzNRd2UyWnBiR3c2SXpaRU5rUTJSRHQ5Q2p3dmMzUjViR1UrQ2p4d1lYUm9JR05zWVhOelBTSnpkREFpSUdROUlrMHpMamNzT1M0NGFEWXVNbFl6TGpkSU15NDNWamt1T0hvZ1RURXlMamtzTWpndU0yZzJMakoyTFRZdU1tZ3ROaTR5VmpJNExqTjZJRTB6TGpjc01qZ3VNMmcyTGpKMkxUWXVNa2d6TGpkV01qZ3VNM29nVFRNdU55d3hPUzR4YURZdU1uWXROaTR5Q2dsSU15NDNWakU1TGpGNklFMHhNaTQ1TERFNUxqRm9OaTR5ZGkwMkxqSm9MVFl1TWxZeE9TNHhlaUJOTWpJdU1pd3pMamQyTmk0eWFEWXVNbFl6TGpkSU1qSXVNbm9nVFRFeUxqa3NPUzQ0YURZdU1sWXpMamRvTFRZdU1sWTVMamg2SUUweU1pNHlMREU1TGpGb05pNHlkaTAyTGpKb0xUWXVNbFl4T1M0eENnbDZJRTB5TWk0eUxESTRMak5vTmk0eWRpMDJMakpvTFRZdU1sWXlPQzR6ZWlJdlBnbzhMM04yWno0Syl9I3NfdXNlcnNldHRpbmdfdG9we2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNeklnTXpJaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURNeUlETXlPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3Nkl6WkVOa1EyUkR0OUNqd3ZjM1I1YkdVK0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERBaUlHUTlJazB5TlM0eUxERTNMakpqTUMwd0xqUXNNQzR4TFRBdU9Dd3dMakV0TVM0eVl6QXRNQzQwTERBdE1DNDRMVEF1TVMweExqSnNNaTQyTFRKak1DNHlMVEF1TWl3d0xqTXRNQzQxTERBdU1TMHdMamhzTFRJdU5TMDBMak1LQ1dNdE1DNHhMVEF1TXkwd0xqVXRNQzQwTFRBdU9DMHdMak5zTFRNdU1Td3hMakpqTFRBdU5pMHdMalV0TVM0ekxUQXVPUzB5TGpFdE1TNHliQzB3TGpVdE15NHpZekF0TUM0ekxUQXVNeTB3TGpVdE1DNDJMVEF1TldndE5XTXRNQzR6TERBdE1DNDJMREF1TWkwd0xqWXNNQzQxYkMwd0xqVXNNeTR6Q2dsakxUQXVPQ3d3TGpNdE1TNDBMREF1TnkweUxqRXNNUzR5VERjdU15dzNMalJETnl3M0xqTXNOaTQzTERjdU5DdzJMalVzTnk0M1REUXNNVEV1T1dNdE1DNHlMREF1TXkwd0xqRXNNQzQyTERBdU1Td3dMamhzTWk0MkxESmpNQ3d3TGpRdE1DNHhMREF1T0Mwd0xqRXNNUzR5Q2dsak1Dd3dMalFzTUN3d0xqZ3NNQzR4TERFdU1td3RNaTQyTERKakxUQXVNaXd3TGpJdE1DNHpMREF1TlMwd0xqRXNNQzQ0YkRJdU5TdzBMak5qTUM0eExEQXVNeXd3TGpVc01DNDBMREF1T0N3d0xqTnNNeTR4TFRFdU1tTXdMallzTUM0MUxERXVNeXd3TGprc01pNHhMREV1TW13d0xqVXNNeTR6Q2dsak1Dd3dMak1zTUM0ekxEQXVOU3d3TGpZc01DNDFhRFZqTUM0ekxEQXNNQzQyTFRBdU1pd3dMall0TUM0MWJEQXVOUzB6TGpOak1DNDRMVEF1TXl3eExqUXRNQzQzTERJdU1TMHhMakpzTXk0eExERXVNbU13TGpNc01DNHhMREF1Tml3d0xEQXVPQzB3TGpOc01pNDFMVFF1TXdvSll6QXVNUzB3TGpNc01DNHhMVEF1Tmkwd0xqRXRNQzQ0VERJMUxqSXNNVGN1TW5vZ1RURTJMREl3TGpOakxUSXVOQ3d3TFRRdU15MHhMamt0TkM0ekxUUXVNM014TGprdE5DNHpMRFF1TXkwMExqTnpOQzR6TERFdU9TdzBMak1zTkM0elV6RTRMalFzTWpBdU15d3hOaXd5TUM0emVpSXZQZ284TDNOMlp6NEspfSNpbXNne2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0TkNqd2hMUzBnUjJWdVpYSmhkRzl5T2lCQlpHOWlaU0JKYkd4MWMzUnlZWFJ2Y2lBeE9TNHlMakVzSUZOV1J5QkZlSEJ2Y25RZ1VHeDFaeTFKYmlBdUlGTldSeUJXWlhKemFXOXVPaUEyTGpBd0lFSjFhV3hrSURBcElDQXRMVDROQ2p4emRtY2dkbVZ5YzJsdmJqMGlNUzR4SWlCcFpEMGk1WnUrNWJHQ1h6RWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SWdlRzFzYm5NNmVHeHBibXM5SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpFNU9Ua3ZlR3hwYm1zaUlIZzlJakJ3ZUNJZ2VUMGlNSEI0SWcwS0NTQjJhV1YzUW05NFBTSXdJREFnTXpJZ016SWlJSE4wZVd4bFBTSmxibUZpYkdVdFltRmphMmR5YjNWdVpEcHVaWGNnTUNBd0lETXlJRE15T3lJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSStEUW84YzNSNWJHVWdkSGx3WlQwaWRHVjRkQzlqYzNNaVBnMEtDUzV6ZERCN1ptbHNiRG9qTmtRMlJEWkVPMzBOQ2p3dmMzUjViR1UrRFFvOGNHRjBhQ0JqYkdGemN6MGljM1F3SWlCa1BTSk5NalV1TXl3MExqWm9MVEU1UXpVc05DNDJMRE11T1N3MUxqY3NNeTQ1TERkc01Dd3lNUzQwYkRRdU9DMDBMamhvTVRZdU5tTXhMak1zTUN3eUxqUXRNUzR4TERJdU5DMHlMalJXTjBNeU55NDNMRFV1Tnl3eU5pNDJMRFF1Tml3eU5TNHpMRFF1Tm5vTkNna2dUVEl5TGprc01UZ3VPVWc0TGpaMkxUSXVOR2d4TkM0elZqRTRMamw2SUUweU1pNDVMREUxTGpOSU9DNDJkaTB5TGpSb01UUXVNMVl4TlM0emVpQk5Nakl1T1N3eE1TNDNTRGd1TmxZNUxqUm9NVFF1TTFZeE1TNDNlaUl2UGcwS1BDOXpkbWMrRFFvPSl9LmMtY29udGFpbmVye2JhY2tncm91bmQ6I2ZmZjtib3JkZXItcmFkaXVzOjJweDtwYWRkaW5nOjI1cHg7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwcztib3gtc2hhZG93OjAgMXB4IDRweCAwIHJnYmEoMCwwLDAsLjE0KTt3aWR0aDo1NDlweH1oMyBhOnZpc2l0ZWR7b3BhY2l0eTouNCFpbXBvcnRhbnQ7Y29sb3I6I2JiYiFpbXBvcnRhbnR9LmMtY29udGFpbmVyOmhvdmVye3RyYW5zaXRpb246YWxsIC41cyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzO2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTE3NjQ3KSAwIDFweCA2cHgscmdiYSgwLDAsMCwuMTE3NjQ3KSAwIDFweCA0cHh9LmMtY29udGFpbmVyOmFjdGl2ZXt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzO2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTg4MjM1KSAwIDEwcHggMzBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgNnB4IDEwcHh9LnR7cGFkZGluZy1ib3R0b206MTBweH0uYy1ib3JkZXJ7d2lkdGg6NTU5cHg7Ym94LXNoYWRvdzpub25lIWltcG9ydGFudDttYXJnaW4tdG9wOjE3cHg7bWFyZ2luLWJvdHRvbToyM3B4O2JvcmRlci10b3A6I2VlZSAxcHggc29saWQ7Ym9yZGVyLWJvdHRvbTojZWVlIDFweCBzb2xpZH0jaGVscHtwYWRkaW5nLWxlZnQ6MTA3cHghaW1wb3J0YW50fS5jLXRvb2xzIGF7Ym9yZGVyOjAhaW1wb3J0YW50fS5mMTMgYTpob3Zlcntib3JkZXI6bm9uZSFpbXBvcnRhbnR9LmYxMyAubTpob3Zlcntib3JkZXItYm90dG9tOnNvbGlkIDFweCAjNjY2IWltcG9ydGFudH0uZyAubTpob3Zlcntib3JkZXItYm90dG9tOnNvbGlkIDFweCAjNjY2IWltcG9ydGFudH0uYy1yb3cgYTpob3Zlcntib3JkZXItYm90dG9tOiM0ODc5YmQgMXB4IHNvbGlkfS5jLXNwYW42IGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTpub25lfS5vcF92ZF9taW5pbmV3ZXN0X2xpbms6aG92ZXJ7b3BhY2l0eTouOH0ub3AtdGllYmEtb2ZmaWNhbC1sb29rbW9yZSBhOmhvdmVye2JvcmRlci1ib3R0b206IzQ4NzliZCAxcHggc29saWR9b3AtdGllYmEtZ2VuZXJhbC1sb29rbW9yZSBhOmhvdmVye2JvcmRlci1ib3R0b206IzQ4NzliZCAxcHggc29saWR9LmMtdGlwLW1lbnUgdWwgbGkgYXtjb2xvcjojNDg3OWJkIWltcG9ydGFudH1oMyBhOmhvdmVye2JvcmRlcjpub25lIWltcG9ydGFudDtvcGFjaXR5Oi43O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9aDMgYXt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfS5zaXRlbGlua19zdW1tYXJ5IGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojNDg3OWJkIDFweCBzb2xpZH0uYy1ncmF5OmhvdmVye2JvcmRlci1ib3R0b206IzY2NiAxcHggc29saWR9Lm9wX2tlZnV0YWJsZV9jb21taXR0ZWw6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojNjY2IDFweCBzb2xpZH0ub3Atc29mdC1idG5ib3ggYTpob3Zlcntib3JkZXI6bm9uZSFpbXBvcnRhbnR9Lm9wLXNvZnQtYXMtcGMtZG93bmJ0bnttYXJnaW4tbGVmdDowIWltcG9ydGFudDtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzQ4NzliZDtwYWRkaW5nOjNweCAxNXB4O2JvcmRlci1yYWRpdXM6MnB4O2ZvbnQtc2l6ZToxNHB4O3RyYW5zaXRpb246YWxsIC4zcyBlYXNlO2JvcmRlcjpub25lO21hcmdpbi10b3A6LTNweH0ub3Atc29mdC1hcy1wYy1kb3duYnRuOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzcwOThkMDt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTtib3gtc2hhZG93OjAgMnB4IDVweCAwIHJnYmEoMCwwLDAsLjE2KSwwIDJweCAxMHB4IDAgcmdiYSgwLDAsMCwuMTIpO2JhY2tncm91bmQtaW1hZ2U6bm9uZX0uYy1idG4tcHJpbWFyeXttYXJnaW4tbGVmdDowIWltcG9ydGFudDtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzQ4NzliZDtwYWRkaW5nOjNweCAxNXB4O2JvcmRlci1yYWRpdXM6MnB4O2ZvbnQtc2l6ZToxNHB4O3RyYW5zaXRpb246YWxsIC4zcyBlYXNlO2JvcmRlcjpub25lO21hcmdpbi10b3A6LTNweH0uYy1idG4tcHJpbWFyeTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiM3MDk4ZDA7dHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7Ym94LXNoYWRvdzowIDJweCA1cHggMCByZ2JhKDAsMCwwLC4xNiksMCAycHggMTBweCAwIHJnYmEoMCwwLDAsLjEyKTtiYWNrZ3JvdW5kLWltYWdlOm5vbmV9Lm9wLXNvZnQtdGl0bGUgYTpob3Zlcntib3JkZXI6bm9uZSFpbXBvcnRhbnQ7b3BhY2l0eTouNzt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfS5vcC1zb2Z0LXRpdGxlIGF7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30ubnVtc3t3aWR0aDo1OThweH0uc2VhcmNoX3Rvb2xfY29udGVye3dpZHRoOjU5OHB4fS5vcF9vZmZpY2FsX3dlaWJvX290aGVyIGE6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOm5vbmUhaW1wb3J0YW50fS5vcF9vZmZpY2FsX3dlaWJvX2luZm8gYTpob3Zlcnt0ZXh0LWRlY29yYXRpb246bm9uZSFpbXBvcnRhbnR9Lm9wX29mZmljYWxfd2VpYm9fY29udGVudCBhOmhvdmVye3RleHQtZGVjb3JhdGlvbjpub25lIWltcG9ydGFudH0uYy1idG57Ym9yZGVyOm5vbmUhaW1wb3J0YW50fS5vcC16eC1uZXctbXZpZGVvLWluZm86aG92ZXJ7Ym9yZGVyLWJvdHRvbTpub25lfS5vcC16eC1uZXctbXZpZGVvLXJsdCBhOmhvdmVye2JvcmRlci1ib3R0b206IzQ4NzliZCAxcHggc29saWR9Lm9wLXp4LW5ldy1tdmlkZW8tb25lbGluZSBhOmhvdmVye2JvcmRlci1ib3R0b206IzQ4NzliZCAxcHggc29saWR9LmhpbnRfY29tbW9uX3Jlc3RvcHtjb2xvcjojZWE0MzM1O2ZvbnQtc2l6ZTptZWRpdW07Zm9udC13ZWlnaHQ6NzAwfS5vcC10aWViYS1nZW5lcmFsLW1haW4tY29sIHA6aG92ZXJ7Ym9yZGVyOm5vbmUhaW1wb3J0YW50fS5jLXRleHR7YmFja2dyb3VuZDojNDg3OWJkO2NvbG9yOiNmZmY7Ym9yZGVyOiM0ODc5YmQgMXB4IHNvbGlkO3BhZGRpbmctdG9wOjNweDtib3JkZXItcmFkaXVzOjJweH0uYy10ZXh0OmhvdmVye2JhY2tncm91bmQ6MCAwO2NvbG9yOiM0ODc5YmQ7Ym9yZGVyOiM0ODc5YmQgMXB4IHNvbGlkIWltcG9ydGFudDtwYWRkaW5nLXRvcDozcHg7Ym9yZGVyLXJhZGl1czoycHh9"},{"meta":{"name":"googleCommonStyle.css","url":"http://ibaidu.htt5.com/newcss/googleCommonStyle.css?t=23.31","ts":1587235898681,"mimetype":"text/css"},"source":"ZGl2LnJlc190b3BfYmFubmVyLCNwYWdlIC5maywjaGVhZCAuaGVhZEJsb2NrLCNyc190b3BfbmV3LCNjb250ZW50X3JpZ2h0LCNyc28+dGFibGUsI3Jzbz5kaXZbaWQqPSIzMCJdLCNyc28gLmMtcmVjb21tZW5kLCNyc28gLmxlZnRCbG9jaywjcnNvIC5oaXRfdG9wX25ldywjcnNvICNmbGQsI3JzbyBkaXYucnJlY29tLWJ0bi1wYXJlbnQsI2NvbnRlbnRfcmlnaHQsI2NlbnRlcl9jb2w+I3RhdywjZmxkLCNkZW1ve2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9Ym9keVtnb29nbGVde2JhY2tncm91bmQtY29sb3I6I2ZkZmRmZH0jY250ICNoZHRiU3VtLCNjbnQ+I2FwcGJhcntiYWNrZ3JvdW5kOnRyYW5zcGFyZW50fSNmb3JtIC5iZHN1Z3t3aWR0aDo3NiV9I2FsYV9pbWdfcmVzdWx0c3tvdmVyZmxvdzpoaWRkZW59YSxhIGVte3RleHQtZGVjb3JhdGlvbjpub25lfSNoZWFkLCNzX3RhYntiYWNrZ3JvdW5kLWNvbG9yOiNmOGY4Zjh9I2hlYWR7Ym9yZGVyLWJvdHRvbTpub25lfSNmb3Jte2JhY2tncm91bmQtY29sb3I6dW5zZXR9I2Zvcm0gLmJkc3VnIGxpe3dpZHRoOmF1dG87Y29sb3I6IzAwMDtmb250OjE1cHggYXJpYWw7bGluZS1oZWlnaHQ6MjZweH0jZm9ybSAuc19pcHRfd3IuYmd7YmFja2dyb3VuZDojZmZmO3dpZHRoOjc2JX0jZm9ybSAuc19idG57YmFja2dyb3VuZDojMjg2NmJkO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICM0ODc5YmR9I2Zvcm0gLnNfYnRuOmhvdmVye2JhY2tncm91bmQ6IzQ4NzliZDtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjMjg2NmJkfSNzX3RhYiBie2NvbG9yOiMyODY2YmQ7Ym9yZGVyLWJvdHRvbTozcHggIzI4NjZiZCBzb2xpZH0jc190YWJ7Ym9yZGVyLWJvdHRvbTojZTBlMGUwIDFweCBzb2xpZH0jdSBhe3RleHQtZGVjb3JhdGlvbjpub25lfSNjb250YWluZXIgLmhlYWRfbnVtc19jb250X291dGVyIC5zZWFyY2hfdG9vbF9jb250ZXIsI2NvbnRhaW5lciAuaGVhZF9udW1zX2NvbnRfb3V0ZXIgLm51bXN7d2lkdGg6NjMwcHh9I3NlYXJjaCAjcnNve2FuaW1hdGlvbi1uYW1lOmFuaV9ib3R0b21Ub3RvcDthbmltYXRpb24tZHVyYXRpb246LjNzO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246ZWFzZX0uc3JwIGZvcm17YW5pbWF0aW9uLW5hbWU6YW5pX2xlZnRUb3JpZ2h0O2FuaW1hdGlvbi1kdXJhdGlvbjouM3M7YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjplYXNlLW91dH0jcnNvIC5qVW1rRmI6aG92ZXJ7bWFyZ2luOjAgYXV0bztib3JkZXItbGVmdDp1bnNldDtwYWRkaW5nOjAgMjBweCAxNXB4O21hcmdpbi1ib3R0b206NDBweH0jcnMsI3Jzbz4uZ3t3aWR0aDo3NjBweDtwYWRkaW5nOjAgMjBweCAxNXB4O21hcmdpbi10b3A6MDttYXJnaW4tYm90dG9tOjQwcHg7Ym9yZGVyLXJhZGl1czo1cHg7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2hhZG93OjAgMCAycHggZ3JheTtib3JkZXI6MXB4IHNvbGlkIHRyYW5zcGFyZW50Oy13ZWJraXQtYm94LXNoYWRvdzowIDAgMnB4IGdyYXk7LW1vei1ib3gtc2hhZG93OjAgMCAycHggZ3JheTt0cmFuc2l0aW9uOmFsbCAuMjVzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9I3JzLCNyc28gLmcgZGl2LnJjIC5ze21heC13aWR0aDp1bnNldH0jcnNvIC5nOmhvdmVye2JveC1zaGFkb3c6MCAwIDE1cHggM3B4IHJnYmEoMCwwLDAsLjE4KTtib3JkZXI6MXB4IHNvbGlkIHJnYmEoMCwwLDAsLjIpO2JhY2tncm91bmQtY29sb3I6I2ZhZmFmYX0jcnNvIC5nW3RwbD1zb2Z0XSAub3Atc29mdC10aXRsZSwjcnNvIC5nIGRpdi5ye21hcmdpbjowIC0yMHB4IDEwcHg7cGFkZGluZzo4cHggMjBweCA1cHg7Ym9yZGVyLXJhZGl1czo1cHggNXB4IDAgMH0jcnNvIC5mMTMgYSwjcnNvIC5mMTMgZW0sI3JzbyAuYy1zcGFuMTggYSwjcnNvIC5zdWJMaW5rX2ZhY3RvcnkgYSwjcnNvIC5jLXRhYnMtY29udGVudCBhLCNyc28gLm9wX29mZmljYWxfd2VpYm9fY29udGVudCBhLCNyc28gLm9wX29mZmljYWxfd2VpYm9fcHogYSwjcnNvIC5vcF90aWViYTJfdGFibGlua3NfY29udGFpbmVyIGEsI3JzbyAub3AtdGllYmEtZ2VuZXJhbC1yaWdodCwjcnNvIC5vcF9kcTAxX3RpdGxlLCNyc28gLm9wX2RxMDFfdGFibGUgYSwjcnNvIC5vcF9kcTAxX21vcmVsaW5rIGEsI3JzbyAub3AtdGllYmEtZ2VuZXJhbC1tYWlucGwgYSwjcnNvIC5vcC1zZS1saXN0ZW4tcmVjb21tZW5kLCNyc28gLmMtb2Zmc2V0PmRpdiBhe3RleHQtZGVjb3JhdGlvbjpub25lO2NvbG9yOiMyODY2YmR9I3JzbyAuZjEzIGE6aG92ZXIsI3JzbyAuZjEzIGVtOmhvdmVyLCNyc28gLnN1YkxpbmtfZmFjdG9yeSBhOmhvdmVyLCNyc28gLmMtdGFicy1jb250ZW50IGE6aG92ZXIsI3JzbyAub3BfdGllYmEyX3RhYmxpbmtzX2NvbnRhaW5lciBhOmhvdmVyLCNyc28gLm9wLXRpZWJhLWdlbmVyYWwtcmlnaHQ6aG92ZXIsI3JzbyAub3BfZHEwMV90aXRsZTpob3ZlciwjcnNvIC5vcF9kcTAxX3RhYmxlIGE6aG92ZXIsI3JzbyAub3BfZHEwMV9tb3JlbGluayBhOmhvdmVyLCNyc28gLm9wLXRpZWJhLWdlbmVyYWwtbWFpbnBsIGE6aG92ZXIsI3JzbyAub3Atc2UtbGlzdGVuLXJlY29tbWVuZDpob3ZlciwjcnNvIC5jLW9mZnNldD5kaXYgYTpob3Zlcnt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lIWltcG9ydGFudH0jcnNvIC5mMTMgYXtjb2xvcjpncmVlbn0jcnNvIC5jLXNwYW4xOCwjcnNvIC5jLXNwYW4yNHt3aWR0aDoxMDAlO21pbi13aWR0aDp1bnNldH0jcnNvIC5jLWJvcmRlcnt3aWR0aDphdXRvO2JvcmRlcjpub25lO2JvcmRlci1ib3R0b20tY29sb3I6dHJhbnNwYXJlbnQ7Ym9yZGVyLXJpZ2h0LWNvbG9yOnRyYW5zcGFyZW50O2JveC1zaGFkb3c6MCAwIDAgdHJhbnNwYXJlbnQ7LXdlYmtpdC1ib3gtc2hhZG93OjAgMCAwIHRyYW5zcGFyZW50Oy1tb3otYm94LXNoYWRvdzowIDAgMCB0cmFuc3BhcmVudDstby1ib3gtc2hhZG93OjAgMCAwIHRyYW5zcGFyZW50fSNyc28gLnNlX2NvbV9pcnJlZ3VsYXJfZ2FsbGVyeSB1bCBsaSwjcnNvIC5vcF9qaW5neWFuX2xpc3QsI3JzbyAuZyAub3AtaW1nLWFkZHJlc3MtbGluay10eXBle2Rpc3BsYXk6aW5saW5lLWJsb2NrO21hcmdpbi1sZWZ0OjEwcHh9I3JzbyAuZ1t0cGw9c29mdF0gLm9wLXNvZnQtdGl0bGUgYSwjcnNvIC5nW3RwbD1zb2Z0XSAub3Atc29mdC10aXRsZSBhIGVtLCNyc28gLmcgZGl2LnI+YSwjcnNvIC5nIGEgaDMsI3JzbyAuZyBkaXYucj5hIGVtLC5tdyAjcmVzIGgzLC5tdyAjZXh0cmFyZXMgaDN7Y29sb3I6IzI4NjZiZDtmb250LXdlaWdodDo3MDB9I3JzbyAub3Atc29mdC10aXRsZSBhOnZpc2l0ZWQsI3JzbyAub3Atc29mdC10aXRsZSBhOnZpc2l0ZWQgZW0sI3JzbyAuZyBkaXYucj5hOnZpc2l0ZWQsI3JzbyAuZyBkaXYucj5hOnZpc2l0ZWQgZW0sI3JzbyAuZyBhOnZpc2l0ZWQgaDN7Y29sb3I6IzYwOX0jcnNvIC5vcC1zb2Z0LXRpdGxlIGEsI3JzbyAuZyBkaXYucj5he3Bvc2l0aW9uOnJlbGF0aXZlfSNyc28gLm9wLXNvZnQtdGl0bGUgYSBlbSwjcnNvIC5nIGRpdi5yPmEgZW17dGV4dC1kZWNvcmF0aW9uOm5vbmV9I3JzbyAub3Atc29mdC10aXRsZSBhOmhvdmVyOmFmdGVyLCNyc28gLmcgZGl2LnI+YTpob3ZlcjphZnRlcntsZWZ0OjA7d2lkdGg6MTAwJTstd2Via2l0LXRyYW5zaXRpb246d2lkdGggMzUwbXM7LW1vei10cmFuc2l0aW9uOndpZHRoIDM1MG1zO3RyYW5zaXRpb246d2lkdGggMzUwbXN9I3JzbyAub3Atc29mdC10aXRsZSBhOmFmdGVyLCNyc28gLmcgZGl2LnI+YTphZnRlcntjb250ZW50OiIiO3Bvc2l0aW9uOmFic29sdXRlO2JvcmRlci1ib3R0b206MnB4IHNvbGlkICMyODY2YmQ7Ym90dG9tOi0ycHg7bGVmdDoxMDAlO3dpZHRoOjA7LXdlYmtpdC10cmFuc2l0aW9uOndpZHRoIDM1MG1zLGxlZnQgMzUwbXM7LW1vei10cmFuc2l0aW9uOndpZHRoIDM1MG1zLGxlZnQgMzUwbXM7dHJhbnNpdGlvbjp3aWR0aCAzNTBtcyxsZWZ0IDM1MG1zfSNyc28gLm9wLXNvZnQtdGl0bGUgYSwjcnNvIC5nIGRpdi5yPmF7cG9zaXRpb246cmVsYXRpdmV9I3JzbyAub3Atc29mdC10aXRsZSBhOnZpc2l0ZWQ6aG92ZXI6YWZ0ZXIsI3JzbyAuZyBkaXYucj5hOnZpc2l0ZWQ6aG92ZXI6YWZ0ZXJ7bGVmdDowO3dpZHRoOjEwMCU7LXdlYmtpdC10cmFuc2l0aW9uOndpZHRoIDM1MG1zOy1tb3otdHJhbnNpdGlvbjp3aWR0aCAzNTBtczt0cmFuc2l0aW9uOndpZHRoIDM1MG1zfSNyc28gLm9wLXNvZnQtdGl0bGUgYTp2aXNpdGVkOmFmdGVyLCNyc28gLmcgZGl2LnI+YTp2aXNpdGVkOmFmdGVye2NvbnRlbnQ6IiI7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyLWJvdHRvbToycHggc29saWQgIzYwOTtib3R0b206LTJweDtsZWZ0OjEwMCU7d2lkdGg6MDstd2Via2l0LXRyYW5zaXRpb246d2lkdGggMzUwbXMsbGVmdCAzNTBtczstbW96LXRyYW5zaXRpb246d2lkdGggMzUwbXMsbGVmdCAzNTBtczt0cmFuc2l0aW9uOndpZHRoIDM1MG1zLGxlZnQgMzUwbXN9I3Jze21hcmdpbi10b3A6MDtwYWRkaW5nOjAgMjBweCAxNXB4O2JvcmRlci1yYWRpdXM6NXB4fSNycyAudHR7bWFyZ2luOjAgLTIwcHggNXB4O3BhZGRpbmc6NXB4IDIwcHg7YmFja2dyb3VuZC1jb2xvcjojZjhmOGY4O2JvcmRlci1yYWRpdXM6NXB4IDVweCAwIDB9I3JzIHRhYmxle3dpZHRoOjYzMHB4O3BhZGRpbmc6NXB4IDE1cHh9I3JzIHRhYmxlIHRyIGF7bWFyZ2luLXRvcDo1cHg7bWFyZ2luLWJvdHRvbTo1cHg7Y29sb3I6IzI4NjZiZH0jcnMgdGFibGUgdHIgYTpob3Zlcnt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lfSNwYWdle21pbi13aWR0aDo3MTBweDtoZWlnaHQ6NDBweDtsaW5lLWhlaWdodDo0MHB4O3BhZGRpbmctdG9wOjVweDttYXJnaW46MCAwIDUwcHggODBweH0ub3AtaW1nLWFkZHJlc3MtZGVza3RvcC1jb250e292ZXJmbG93OmhpZGRlbn0jcGFnZSBhLCNwYWdlIHN0cm9uZ3tjb2xvcjojMjg2NmJkO2hlaWdodDphdXRvO2JveC1zaGFkb3c6MCAwIDIwcHggMnB4IHJnYmEoMCwwLDAsLjEpOy13ZWJraXQtYm94LXNoYWRvdzowIDAgMjBweCAycHggcmdiYSgwLDAsMCwuMSk7LW1vei1ib3gtc2hhZG93OjAgMCAyMHB4IDJweCByZ2JhKDAsMCwwLC4xKX0jcGFnZSAubjpob3ZlciwjcGFnZSBhOmhvdmVyIC5wY3tib3JkZXI6MXB4IHNvbGlkIHRyYW5zcGFyZW50O2JhY2tncm91bmQ6I2Q4ZDhkODtjb2xvcjojMDA1N2RhfSNwYWdlIHN0cm9uZyAucGN7YmFja2dyb3VuZDojNDg3OWJkO2NvbG9yOiNmZmZ9QGtleWZyYW1lcyBhbmlfYm90dG9tVG90b3B7MCV7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMzJweCk7b3BhY2l0eTowfTIwJXtvcGFjaXR5OjB9MzAle29wYWNpdHk6Ljh9MTAwJXtvcGFjaXR5OjF9fUBrZXlmcmFtZXMgYW5pX2xlZnRUb3JpZ2h0ezAle3RyYW5zZm9ybTp0cmFuc2xhdGVYKC0zMnB4KTtvcGFjaXR5OjB9MjAle29wYWNpdHk6MH0zMCV7b3BhY2l0eTouOH0xMDAle29wYWNpdHk6MX19I3Jzbz5kaXY6bm90KFtjbGFzc10pe21hcmdpbi1sZWZ0OjE4cHg7bWFyZ2luLXJpZ2h0OjE4cHh9I3JzbyAuZyAuZXhwLW91dGxpbmV7ZGlzcGxheTpub25lfSNtYWluIC5tdyAjcmhze21hcmdpbi1sZWZ0OjEwMjBweH0jcmVzIC5nIC50c3ttYXgtd2lkdGg6dW5zZXR9QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDoxNDAwcHgpey5tdyAjcmhze2Rpc3BsYXk6bm9uZX19Y2l0ZXtmb250LXdlaWdodDo0MDB9ZGl2LnJlc190b3BfYmFubmVyICNmb290LCNwYWcgI3JlcyAucntsaW5lLWhlaWdodDoxLjN9I3Jlc3twYWRkaW5nOjB9I3JzLCNyc28gLmd7bWFyZ2luLWJvdHRvbToyMHB4O2JvcmRlci1yYWRpdXM6MTBweH0jcnNvIC5nIGRpdi5ye2JvcmRlci1yYWRpdXM6MTBweCAxMHB4IDAgMH0uYzJ4elRiIC5nLC5ydVRjSWQgLmcsLmZtMDZJZiAuZywuY1VuUUtlIC5nLC5IYW5RbWYgLmd7d2lkdGg6NzU4cHg7cGFkZGluZy1sZWZ0OjIwcHghaW1wb3J0YW50O3BhZGRpbmctcmlnaHQ6MjBweCFpbXBvcnRhbnQ7Ym94LXNoYWRvdzowIDAgMCAwICMwMDB9ZGl2IC54Znh4NWR7bWFyZ2luLWJvdHRvbTotMThweCFpbXBvcnRhbnQ7bWFyZ2luLXRvcDotMjVweCFpbXBvcnRhbnR9ZGl2IC54YXFKemYueGZ4eDVkIC5rbm8tZnRye21hcmdpbi10b3A6MTBweCFpbXBvcnRhbnR9ZGl2IC5rbm8tZnRyIGF7cG9zaXRpb246c3RpY2t5fS5tdyAjcmVzIGgzLC5tdyAjZXh0cmFyZXMgaDN7Zm9udC1zaXplOjE4cHh9I3Jzbz4uZyAucj5hPmRpdnt3aWR0aDozNXJlbX0ubG9nb3t0b3A6dW5zZXR9Ym9keVtnb29nbGVdIC5iYWlkdXt0cmFuc2Zvcm06dW5zZXQhaW1wb3J0YW50O21hcmdpbi10b3A6LTEwcHg7bWFyZ2luLWxlZnQ6LTJyZW19"},{"meta":{"name":"googleOnePageStyle.css","url":"http://ibaidu.htt5.com/newcss/googleOnePageStyle.css?t=23.31","ts":1587235898682,"mimetype":"text/css"},"source":"I3Jzb3twb3NpdGlvbjpyZWxhdGl2ZTtmbG9hdDp1bnNldH0jcnNvIC5qVW1rRmI6aG92ZXJ7bWFyZ2luLWJvdHRvbTozMHB4O21hcmdpbi1sZWZ0OjIwcHh9I3JzbyAuZ3t3aWR0aDp1bnNldDttYXJnaW4tbGVmdDoyMHB4O292ZXJmbG93OmhpZGRlbjtwYWRkaW5nOjAgMjBweCAxNXB4O21hcmdpbi10b3A6MDttYXJnaW4tYm90dG9tOjMwcHg7Ym9yZGVyLXJhZGl1czo1cHg7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JveC1zaXppbmc6Ym9yZGVyLWJveDstd2Via2l0LWJveC1zaGFkb3c6MCAwIDJweCBncmF5Oy1tb3otYm94LXNoYWRvdzowIDAgMnB4IGdyYXk7dHJhbnNpdGlvbjphbGwgLjI1cyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfS5zZWFyY2g+I2lyZXMgI3Jzbz4uZ3ttYXgtd2lkdGg6dW5zZXR9I21haW4gLm13ICNyaHN7ZGlzcGxheTpub25lfSNtYWluIC5td3ttYXgtd2lkdGg6dW5zZXR9I21haW4gI2NudHt3aWR0aDo1MHZ3O21hcmdpbjowIGF1dG99I3JzbyBnLXNjcm9sbGluZy1jYXJvdXNlbHttYXJnaW46dW5zZXQ7bWFyZ2luLWxlZnQ6MjBweH0uY29se3dpZHRoOjEwMCUhaW1wb3J0YW50fS5jb2wgI2NlbnRlcl9jb2x7d2lkdGg6MTAwJSFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6dW5zZXQhaW1wb3J0YW50fS5zcnAgLmJpZyAjdHNme3dpZHRoOjgzM3B4fS5zcnAgZm9ybXttYXJnaW46MCBhdXRvfSN0b3BfbmF2e21pbi13aWR0aDp1bnNldH0uc3JwIGZvcm0gZGl2W2pzY29udHJvbGxlcl17bWFyZ2luLWxlZnQ6dW5zZXQ7bWFyZ2luOjAgYXV0b31nLXNlY3Rpb24td2l0aC1oZWFkZXJ7dGV4dC1hbGlnbjpjZW50ZXJ9"},{"meta":{"name":"googleTwoPageStyle.css","url":"http://ibaidu.htt5.com/newcss/googleTwoPageStyle.css?t=23.31","ts":1587235898682,"mimetype":"text/css"},"source":"I3Jzb3twb3NpdGlvbjpyZWxhdGl2ZTtmbG9hdDp1bnNldH0jcnNvIC5qVW1rRmI6aG92ZXJ7bWFyZ2luLWJvdHRvbTozMHB4O21hcmdpbi1sZWZ0OjIwcHh9I3JzbyAuZ3t3aWR0aDp1bnNldDttYXJnaW4tbGVmdDoyMHB4O292ZXJmbG93OmhpZGRlbjtwYWRkaW5nOjAgMjBweCAxNXB4O21hcmdpbi10b3A6MDttYXJnaW4tYm90dG9tOjMwcHg7Ym9yZGVyLXJhZGl1czo1cHg7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JveC1zaXppbmc6Ym9yZGVyLWJveDstd2Via2l0LWJveC1zaGFkb3c6MCAwIDJweCBncmF5Oy1tb3otYm94LXNoYWRvdzowIDAgMnB4IGdyYXk7dHJhbnNpdGlvbjphbGwgLjI1cyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfS5zZWFyY2g+I2lyZXMgI3Jzbz4uZ3ttYXgtd2lkdGg6dW5zZXR9I21haW4gLm13ICNyaHN7ZGlzcGxheTpub25lfSNtYWluIC5td3ttYXgtd2lkdGg6dW5zZXR9I21haW4gI2NudHt3aWR0aDo4MHZ3O21hcmdpbjowIGF1dG99I3JzbyAuQ09Fb2lke21hcmdpbjp1bnNldH0uY29se3dpZHRoOjEwMCUhaW1wb3J0YW50fS5jb2wgI2NlbnRlcl9jb2x7d2lkdGg6MTAwJSFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6dW5zZXQhaW1wb3J0YW50fS5zcmcsI3Jzb3tkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdChhdXRvLWZpdCxtaW5tYXgoNTAlLDFmcikpfSNyc28gLnNyZ3tncmlkLWNvbHVtbi1zdGFydDoxO2dyaWQtY29sdW1uLWVuZDozfSNyc28+ZGl2Om5vdCguZyl7Z3JpZC1jb2x1bW4tc3RhcnQ6MTtncmlkLWNvbHVtbi1lbmQ6M30uc3JwIGZvcm17bWFyZ2luOjAgYXV0b30uc3JwIGZvcm0gZGl2W2pzY29udHJvbGxlcl17bWFyZ2luLWxlZnQ6dW5zZXQ7bWFyZ2luOjAgYXV0b31nLXNlY3Rpb24td2l0aC1oZWFkZXJ7dGV4dC1hbGlnbjpjZW50ZXJ9"},{"meta":{"name":"bingCommonStyle.css","url":"http://ibaidu.htt5.com/newcss/bingCommonStyle.css?t=23.31","ts":1587235898683,"mimetype":"text/css"},"source":"Ym9keXtiYWNrZ3JvdW5kLWNvbG9yOiNmNWY1ZjV9I2JfY29udGVudCAjYl9yZXN1bHRzPmxpe3dpZHRoOjY3MHB4O3BhZGRpbmc6MTJweCAyMHB4IWltcG9ydGFudDttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbToyNXB4O2JvcmRlci1yYWRpdXM6NXB4O2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNoYWRvdzowIDAgMnB4IGdyYXk7Ym9yZGVyOjFweCBzb2xpZCB0cmFuc3BhcmVudDstd2Via2l0LWJveC1zaGFkb3c6MCAwIDJweCBncmF5Oy1tb3otYm94LXNoYWRvdzowIDAgMnB4IGdyYXk7dHJhbnNpdGlvbjphbGwgLjI1cyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfSNiX2NvbnRlbnQgI2JfcmVzdWx0cyBhLCNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBhe3Bvc2l0aW9uOnJlbGF0aXZlfSNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBhLCNiX3Jlc3VsdHMgaDIgc3Ryb25ne2ZvbnQtd2VpZ2h0OjcwMDtmb250LXNpemU6bWVkaXVtfSNiX2NvbnRlbnQgI2JfcmVzdWx0cz5saTpob3Zlcntib3gtc2hhZG93OjAgMCAxNXB4IDNweCByZ2JhKDAsMCwwLC4xOCk7Ym9yZGVyOjFweCBzb2xpZCByZ2JhKDAsMCwwLC4yKTtiYWNrZ3JvdW5kOiNmY2ZjZmMhaW1wb3J0YW50fSNiX2NvbnRlbnQ+I2JfcmVzdWx0cyBsaSBoMntiYWNrZ3JvdW5kLWNvbG9yOiNmOGY4Zjg7bWFyZ2luOi0xMnB4IC0yMHB4IDEwcHg7cGFkZGluZzo4cHggMjBweCA1cHg7Ym9yZGVyLXJhZGl1czo1cHggNXB4IDAgMH1hLGEgc3Ryb25ne3RleHQtZGVjb3JhdGlvbjpub25lfSNiX2NvbnRlbnQgI2JfcmVzdWx0cyBhIHN0cm9uZywjYl9jb250ZW50ICNiX3Jlc3VsdHMgaDIgYSBzdHJvbmd7dGV4dC1kZWNvcmF0aW9uOm5vbmV9I2JfY29udGVudCAjYl9yZXN1bHRzIGE6aG92ZXI6YWZ0ZXIsI2JfY29udGVudCAjYl9yZXN1bHRzIGgyIGE6aG92ZXI6YWZ0ZXJ7bGVmdDowO3dpZHRoOjEwMCU7LXdlYmtpdC10cmFuc2l0aW9uOndpZHRoIDM1MG1zOy1tb3otdHJhbnNpdGlvbjp3aWR0aCAzNTBtczt0cmFuc2l0aW9uOndpZHRoIDM1MG1zfSNiX2NvbnRlbnQgI2JfcmVzdWx0cyBhOmFmdGVyLCNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBhOmFmdGVye2NvbnRlbnQ6IiI7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyLWJvdHRvbToycHggc29saWQgIzI4NjZiZDtib3R0b206MXB4O2xlZnQ6MTAwJTt3aWR0aDowOy13ZWJraXQtdHJhbnNpdGlvbjp3aWR0aCAzNTBtcyxsZWZ0IDM1MG1zOy1tb3otdHJhbnNpdGlvbjp3aWR0aCAzNTBtcyxsZWZ0IDM1MG1zO3RyYW5zaXRpb246d2lkdGggMzUwbXMsbGVmdCAzNTBtc30jYl9jb250ZW50ICNiX3Jlc3VsdHMgaDIgYTp2aXNpdGVkLCNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBhOnZpc2l0ZWQgc3Ryb25nLCNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBoMiBhOnZpc2l0ZWQsI2JfY29udGVudCAjYl9yZXN1bHRzIGgyIGgyIGE6dmlzaXRlZCBzdHJvbmd7Y29sb3I6IzYwOX0jYl9jb250ZW50ICNiX3Jlc3VsdHMgaDIgYTp2aXNpdGVkOmhvdmVyOmFmdGVyLCNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBoMiBhOnZpc2l0ZWQ6aG92ZXI6YWZ0ZXJ7bGVmdDowO3dpZHRoOjEwMCU7LXdlYmtpdC10cmFuc2l0aW9uOndpZHRoIDM1MG1zOy1tb3otdHJhbnNpdGlvbjp3aWR0aCAzNTBtczt0cmFuc2l0aW9uOndpZHRoIDM1MG1zfSNiX2NvbnRlbnQ+b2wjYl9jb250ZXh0e2Rpc3BsYXk6bm9uZX1ib2R5ICNiX2hlYWRlcntiYWNrZ3JvdW5kLWNvbG9yOiNmNWY1ZjV9I2JfY29udGVudCAuYl91bmRlclNlYXJjaGJveHttYXJnaW4tdG9wOjEwcHh9I2JfaGVhZGVyIC5iX3Njb3BlYmFye21hcmdpbjp1bnNldH0udHNmLXA+LmxvZ29jb250LCNzZWotY29udGFpbmVye21hcmdpbi1yaWdodDozNTBweDt0ZXh0LWFsaWduOmNlbnRlcn0udHNmLXA+LnNmaWJiYmN7bWFyZ2luLXJpZ2h0OjM1MHB4O3RleHQtYWxpZ246Y2VudGVyfS5iX3NlYXJjaGJveEZvcm0gLnNhX3Rte3RleHQtYWxpZ246bGVmdH1ib2R5ICNiX2hlYWRlciAjZXN0X3N3aXRjaHttYXJnaW46MCBhdXRvfSNlc3RfY24uZXN0X3NlbGVjdGVke21hcmdpbi1sZWZ0Oi00NC4yZW19I2VzdF9jbi5lc3RfdW5zZWxlY3RlZHttYXJnaW4tbGVmdDotMzkuMmVtfUBtZWRpYShtYXgtd2lkdGg6MTEwMHB4KXtib2R5ICNiX2hlYWRlciAjZXN0X3N3aXRjaHt0cmFuc2Zvcm06dHJhbnNsYXRlWCgxLjJyZW0pfX0jYl9jb250ZW50e2FuaW1hdGlvbi1uYW1lOmFuaV9ib3R0b21Ub3RvcDthbmltYXRpb24tZHVyYXRpb246LjNzO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246ZWFzZX1ib2R5ICNiX2hlYWRlcnthbmltYXRpb24tbmFtZTphbmlfdG9wVG9idXR0b207YW5pbWF0aW9uLWR1cmF0aW9uOi4zczthbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2Utb3V0fWJvZHl7YW5pbWF0aW9uLW5hbWU6YW5pX2hpZGVUb1Nob3c7YW5pbWF0aW9uLWR1cmF0aW9uOi4zczthbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2Utb3V0fUBrZXlmcmFtZXMgYW5pX2xlZnRUb3JpZ2h0ezAle3RyYW5zZm9ybTp0cmFuc2xhdGVYKC0zMnB4KTtvcGFjaXR5OjB9MjAle29wYWNpdHk6MH0zMCV7b3BhY2l0eTouOH0xMDAle29wYWNpdHk6MX19QGtleWZyYW1lcyBhbmlfYm90dG9tVG90b3B7MCV7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMzJweCk7b3BhY2l0eTowfTIwJXtvcGFjaXR5OjB9MzAle29wYWNpdHk6Ljh9MTAwJXtvcGFjaXR5OjF9fUAtd2Via2l0LWtleWZyYW1lcyBhbmlfdG9wVG9idXR0b217MCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgtMzJweCk7b3BhY2l0eTowfTIwJXtvcGFjaXR5OjB9MzAle29wYWNpdHk6Ljh9MTAwJXtvcGFjaXR5OjF9fUAtd2Via2l0LWtleWZyYW1lcyBhbmlfaGlkZVRvU2hvd3swJXtkaXNwbGF5Om5vbmU7b3BhY2l0eTowfTIwJXtkaXNwbGF5Om5vbmU7b3BhY2l0eTowfTMwJXtkaXNwbGF5Om5vbmU7b3BhY2l0eTouOH0xMDAle29wYWNpdHk6MX19"},{"meta":{"name":"bingOnePageStyle.css","url":"http://ibaidu.htt5.com/newcss/bingOnePageStyle.css?t=23.31","ts":1587235898684,"mimetype":"text/css"},"source":"I2JfY29udGVudCBhc2lkZXtkaXNwbGF5Om5vbmV9I2JfY29udGVudCAjYl9yZXN1bHRze3dpZHRoOjczdnd9Ym9keSAjYl9oZWFkZXJ7d2lkdGg6NzJ2dzt0ZXh0LWFsaWduOmNlbnRlcjttYXJnaW46MCBhdXRvfSNiX2NvbnRlbnR7bWFyZ2luLWxlZnQ6OHZ3fSNiX2NvbnRlbnQgI2JfcmVzdWx0cz5saXt3aWR0aDo5OCV9"},{"meta":{"name":"bingTwoPageStyle.css","url":"http://ibaidu.htt5.com/newcss/bingTwoPageStyle.css?t=23.31","ts":1587235898684,"mimetype":"text/css"},"source":"I2NvbnRhaW5lciAjY29udGVudF9sZWZ0IC5oaXRfdG9wX25ldywjYl9jb250ZW50IGFzaWRlLCNiX3Jlc3VsdHMgI21mYV9yb290e2Rpc3BsYXk6bm9uZX0jYl9jb250ZW50ICNiX3Jlc3VsdHN7d2lkdGg6NzN2dztncmlkLXRlbXBsYXRlLWNvbHVtbnM6cmVwZWF0KGF1dG8tZml0LG1pbm1heCg1MCUsMWZyKSk7ZGlzcGxheTppbmxpbmUtZ3JpZH0jYl9jb250ZW50ICNiX3Jlc3VsdHM+bGl7d2lkdGg6OTglfSNiX3Jlc3VsdHMgLmJfYWxnbyAuYl9kZWVwIHVse3dpZHRoOjUwJX0jYl9tc2csI2JfcGFne2dyaWQtY29sdW1uLWVuZDozO2dyaWQtY29sdW1uLXN0YXJ0OjE7YmFja2dyb3VuZC1jb2xvcjojZmZmfWJvZHkgI2JfY29udGVudHttYXJnaW4tbGVmdDo4dnd9Ym9keSAjYl9oZWFkZXJ7d2lkdGg6NzJ2dzt0ZXh0LWFsaWduOmNlbnRlcjttYXJnaW46MCBhdXRvfQ=="},{"meta":{"name":"sogouCommonStyle.css","url":"http://ibaidu.htt5.com/newcss/sogouCommonStyle.css?t=23.31","ts":1587235898684,"mimetype":"text/css"},"source":"Ym9keXtiYWNrZ3JvdW5kLWNvbG9yOiNmNWY1ZjV9I2Jpel90aXBfYm94X3R1aWd1YW5nX2Zsb2F0e2Rpc3BsYXk6bm9uZX0udG9wLWJhciBsaXtsaW5lLWhlaWdodDozNXB4fS50b3AtYmFyIC5zb2dvdS1zZXQtYm94IGF7ZGlzcGxheTppbmxpbmUtYmxvY2t9I21haW4gLnJlc3VsdHN7d2lkdGg6MTAwJSFpbXBvcnRhbnR9I21haW4gLnJlc3VsdHM+ZGl2e3dpZHRoOjEwMCUhaW1wb3J0YW50O292ZXJmbG93OmhpZGRlbjtwYWRkaW5nOjEycHggMjBweCFpbXBvcnRhbnQ7bWFyZ2luLXRvcDowO21hcmdpbi1ib3R0b206MjVweDtib3JkZXItcmFkaXVzOjVweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym94LXNpemluZzpib3JkZXItYm94O2JveC1zaGFkb3c6MCAwIDJweCBncmF5O2JvcmRlcjoxcHggc29saWQgdHJhbnNwYXJlbnQ7LXdlYmtpdC1ib3gtc2hhZG93OjAgMCAycHggZ3JheTstbW96LWJveC1zaGFkb3c6MCAwIDJweCBncmF5O3RyYW5zaXRpb246YWxsIC4yNXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30ucmVzdWx0cyAucmIgYSwucmVzdWx0cyAudnJ3cmFwIGEsLnJlc3VsdHMgLnJiIGgzIGEsLnJlc3VsdHMgLnZyd3JhcCBoMyBhe3Bvc2l0aW9uOnJlbGF0aXZlfSNtYWluIC5yZXN1bHRzPmRpdjpob3Zlcntib3gtc2hhZG93OjAgMCAxNXB4IDNweCByZ2JhKDAsMCwwLC4xOCk7Ym9yZGVyOjFweCBzb2xpZCByZ2JhKDAsMCwwLC4yKTtiYWNrZ3JvdW5kOiNmM2YzZjMhaW1wb3J0YW50fSNtYWluIC5yZXN1bHRzPmRpdiBoM3tiYWNrZ3JvdW5kLWNvbG9yOiNmOGY4Zjg7bWFyZ2luOi0xMnB4IC0yMHB4IDEwcHg7cGFkZGluZzo4cHggMjBweCA1cHg7Ym9yZGVyLXJhZGl1czo1cHggNXB4IDAgMH1hLGEgc3Ryb25ne3RleHQtZGVjb3JhdGlvbjpub25lfSNtYWluIC5yZXN1bHRzPmRpdiBhIHN0cm9uZywjbWFpbiAucmVzdWx0cz5kaXYgaDMgYSBzdHJvbmd7dGV4dC1kZWNvcmF0aW9uOm5vbmV9I21haW4gLnJlc3VsdHM+ZGl2IGE6aG92ZXI6YWZ0ZXIsI21haW4gLnJlc3VsdHM+ZGl2IGgzIGE6aG92ZXI6YWZ0ZXJ7bGVmdDowO3dpZHRoOjEwMCU7LXdlYmtpdC10cmFuc2l0aW9uOndpZHRoIDM1MG1zOy1tb3otdHJhbnNpdGlvbjp3aWR0aCAzNTBtczt0cmFuc2l0aW9uOndpZHRoIDM1MG1zfSNtYWluIC5yZXN1bHRzPmRpdiBhOmFmdGVyLCNtYWluIC5yZXN1bHRzPmRpdiBoMyBhOmFmdGVye2NvbnRlbnQ6IiI7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyLWJvdHRvbToycHggc29saWQgIzI4NjZiZDtib3R0b206MXB4O2xlZnQ6MTAwJTt3aWR0aDowOy13ZWJraXQtdHJhbnNpdGlvbjp3aWR0aCAzNTBtcyxsZWZ0IDM1MG1zOy1tb3otdHJhbnNpdGlvbjp3aWR0aCAzNTBtcyxsZWZ0IDM1MG1zO3RyYW5zaXRpb246d2lkdGggMzUwbXMsbGVmdCAzNTBtc30jbWFpbiAucmVzdWx0cz5kaXYgaDMgYTp2aXNpdGVkLCNtYWluIC5yZXN1bHRzPmRpdiBoMyBhOnZpc2l0ZWQgc3Ryb25nLCNtYWluIC5yZXN1bHRzPmRpdiBoMyBoMyBhOnZpc2l0ZWQsI21haW4gLnJlc3VsdHM+ZGl2IGgzIGgzIGE6dmlzaXRlZCBzdHJvbmd7Y29sb3I6IzYwOX0jbWFpbiAucmVzdWx0cz5kaXYgaDMgYTp2aXNpdGVkOmhvdmVyOmFmdGVyLCNtYWluIC5yZXN1bHRzPmRpdiBoMyBoMyBhOnZpc2l0ZWQ6aG92ZXI6YWZ0ZXJ7bGVmdDowO3dpZHRoOjEwMCU7LXdlYmtpdC10cmFuc2l0aW9uOndpZHRoIDM1MG1zOy1tb3otdHJhbnNpdGlvbjp3aWR0aCAzNTBtczt0cmFuc2l0aW9uOndpZHRoIDM1MG1zfWJvZHkgI3BhZ2ViYXJfY29udGFpbmVyIGF7YmFja2dyb3VuZC1jb2xvcjojZmZmfSNtYWluIC5yZXN1bHRze2FuaW1hdGlvbi1uYW1lOmFuaV9ib3R0b21Ub3RvcDthbmltYXRpb24tZHVyYXRpb246LjNzO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246ZWFzZX0ud3JhcCAuaGVhZGVyLWJveHthbmltYXRpb24tbmFtZTphbmlfbGVmdFRvcmlnaHQ7YW5pbWF0aW9uLWR1cmF0aW9uOi4zczthbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2Utb3V0fUBrZXlmcmFtZXMgYW5pX2xlZnRUb3JpZ2h0ezAle3RyYW5zZm9ybTp0cmFuc2xhdGVYKC0zMnB4KTtvcGFjaXR5OjB9MjAle29wYWNpdHk6MH0zMCV7b3BhY2l0eTouOH0xMDAle29wYWNpdHk6MX19QGtleWZyYW1lcyBhbmlfYm90dG9tVG90b3B7MCV7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMzJweCk7b3BhY2l0eTowfTIwJXtvcGFjaXR5OjB9MzAle29wYWNpdHk6Ljh9MTAwJXtvcGFjaXR5OjF9fQ=="},{"meta":{"name":"sogouOnePageStyle.css","url":"http://ibaidu.htt5.com/newcss/sogouOnePageStyle.css?t=23.31","ts":1587235898684,"mimetype":"text/css"},"source":"LndyYXAgLndyYXBwZXIgLnJpZ2h0e2Rpc3BsYXk6bm9uZX0ud3JhcCAud3JhcHBlcntwYWRkaW5nLWxlZnQ6dW5zZXR9LndyYXA+LndyYXBwZXIgI21haW4sLndyYXA+LmhpbnRCb3gsLndyYXA+LnB7d2lkdGg6NTV2dzttYXgtd2lkdGg6NTV2dzttaW4td2lkdGg6ODUwcHg7cG9zaXRpb246cmVsYXRpdmU7bWFyZ2luOjAgYXV0bztmbG9hdDp1bnNldDtwYWRkaW5nLXJpZ2h0OnVuc2V0O3BhZGRpbmctbGVmdDp1bnNldH0jbWFpbiAucmVzdWx0cz5kaXZ7d2lkdGg6MTAwJSFpbXBvcnRhbnR9LndyYXAgLmhlYWRlciAuaGVhZGVyLWJveHttaW4td2lkdGg6ODUwcHg7d2lkdGg6NTB2dzttYXJnaW46MCBhdXRvfS53cmFwIC5oZWFkZXIgLmhlYWRlci1ib3ggYS5sb2dve2xlZnQ6dW5zZXR9Ym9keSAjc2VqLWNvbnRhaW5lcntwYWRkaW5nLWxlZnQ6Y2FsYygxMiUgLSAxMTNweCkhaW1wb3J0YW50fQ=="},{"meta":{"name":"sogouTwoPageStyle.css","url":"http://ibaidu.htt5.com/newcss/sogouTwoPageStyle.css?t=23.31","ts":1587235898684,"mimetype":"text/css"},"source":"LndyYXAgLndyYXBwZXIgLnJpZ2h0e2Rpc3BsYXk6bm9uZX0ud3JhcCAud3JhcHBlcntwYWRkaW5nLWxlZnQ6dW5zZXR9LndyYXA+LndyYXBwZXIgI21haW4sLndyYXA+LmhpbnRCb3gsLndyYXA+LnB7d2lkdGg6NzV2dzttYXgtd2lkdGg6dW5zZXQ7cG9zaXRpb246cmVsYXRpdmU7bWFyZ2luOjAgYXV0bztmbG9hdDp1bnNldDtwYWRkaW5nLXJpZ2h0OnVuc2V0O3BhZGRpbmctbGVmdDp1bnNldH0jbWFpbiAucmVzdWx0c3t3aWR0aDoxMDAlO2Rpc3BsYXk6aW5saW5lLWdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdChhdXRvLWZpdCxtaW5tYXgoNTAlLDFmcikpfSNtYWluIC5yZXN1bHRzPmRpdnttYXJnaW4tbGVmdDo1cHg7bWFyZ2luLXJpZ2h0OjE1cHg7d2lkdGg6dW5zZXQhaW1wb3J0YW50fS53cmFwIC5oZWFkZXIgLmhlYWRlci1ib3h7bWluLXdpZHRoOjg1MHB4O3dpZHRoOjUwdnc7bWFyZ2luOjAgYXV0b30ud3JhcCAuaGVhZGVyIC5oZWFkZXItYm94IGEubG9nb3tsZWZ0OnVuc2V0fWJvZHkgI3Nlai1jb250YWluZXJ7cGFkZGluZy1sZWZ0OmNhbGMoMTIlIC0gMTEzcHgpIWltcG9ydGFudH0="},{"meta":{"name":"HuYanStyle.css","url":"http://ibaidu.htt5.com/newcss/HuYanStyle.css?t=23.31","ts":1587235898684,"mimetype":"text/css"},"source":"Ym9keVtiYWlkdV0sI3dyYXBwZXIgI2hlYWQsI3dyYXBwZXIgI3NfdGFiLGZvcm0uZm0gLnNfaXB0X3dyLmJne2JhY2tncm91bmQtY29sb3I6I2ZmZn0jd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LCN3cmFwcGVyICNjb250ZW50X2xlZnQgYXJ0aWNsZSwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lciwjd3JhcHBlciAjcnMsI3dyYXBwZXIgI2NvbnRlbnRfcmlnaHR7YmFja2dyb3VuZC1jb2xvcjojYWFhO2JvcmRlcjoxcHggZG91YmxlICNhMmQ3ZDQ7Ym9yZGVyLXJhZGl1czowfSN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdC1vcDpob3Zlciwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQ6aG92ZXIsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LW9wOmhvdmVyIGFydGljbGV7YmFja2dyb3VuZC1jb2xvcjojY2NjIWltcG9ydGFudH0jd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LW9wIGgzLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVyIGgzLCN3cmFwcGVyICNycyAudHR7YmFja2dyb3VuZC1jb2xvcjojYmJifS5uYV9jbnQgLm53c19pdG0sLm53c19pdG1iLCNiX2NvbnRlbnQgI2JfcmVzdWx0cyBsaSxib2R5ICNiX2hlYWRlcntiYWNrZ3JvdW5kLWNvbG9yOiNhYWE7Ym9yZGVyOjFweCBkb3VibGUgI2EyZDdkNDtib3JkZXItcmFkaXVzOjB9I2JfY29udGVudCAjYl9yZXN1bHRzIGxpOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2NjYyFpbXBvcnRhbnR9I2JfY29udGVudCAjYl9yZXN1bHRzIGxpIGgye2JhY2tncm91bmQtY29sb3I6I2JiYn1ib2R5W2dvb2dsZV17YmFja2dyb3VuZC1jb2xvcjojZmRmZGZkfSNyc28gLmcsLmJrV01nZD4uZywuYmtXTWdkIGctaW5uZXItY2FyZCwjcmhzY29sICNyaHMsI3Joc2NvbCAjcmhzIC5nPmRpdiwuYzJ4elRiIC5nLC5ydVRjSWQgLmcsLmZtMDZJZiAuZywuY1VuUUtlIC5nLC5IYW5RbWYgLmcsI3JzbyAuZywjcnNvPmRpdjpub3QoLmcpPip7YmFja2dyb3VuZC1jb2xvcjojYWFhO2JvcmRlcjoxcHggc29saWQgIzljZDJjZmFhO2JvcmRlci1yYWRpdXM6MH0jcnNvIC5nOmhvdmVyLC5ia1dNZ2Q+Lmc6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojY2NjIWltcG9ydGFudDtib3JkZXI6MXB4IGRvdWJsZSAjOWNkMmNmO2JveC1zaGFkb3c6MCAwIDE1cHggM3B4IHJnYmEoMCwwLDAsLjE4KX0uYmtXTWdkIC5nIGRpdi5yLCNyc28gLmcgaDN7YmFja2dyb3VuZC1jb2xvcjojYmJifQ=="},{"meta":{"name":"SiteConfigRules.conf","url":"http://ibaidu.htt5.com/newcss/SiteConfigRules.conf?t=23.31","ts":1587235898684,"mimetype":"text/plain"},"source":"b25saW5lREIgPSB7CiAgICBiYWlkdTogewogICAgICAgIFNpdGVUeXBlSUQ6IDEsCiAgICAgICAgTWFpblR5cGU6ICIjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lciIsCiAgICAgICAgU3R5cGVfTm9ybWFsOiAiaDMudD5hLCAjcmVzdWx0cyAuYy1jb250YWluZXI+LmMtYmxvY2thIiwKICAgICAgICBGYXZpY29uVHlwZTogIi5yZXN1bHQtb3AsIC5jLXNob3d1cmwiLAogICAgICAgIEZhdmljb25BZGRUbzogImgzIiwKICAgICAgICBDb3VudGVyVHlwZTogIiNjb250ZW50X2xlZnQ+I2RvdWJsZT5kaXZbc3JjaWRdICpbY2xhc3N+PXRdLFtjbGFzc349b3BfYmVzdF9hbnN3ZXJfcXVlc3Rpb25dLCNjb250ZW50X2xlZnQ+ZGl2W3NyY2lkXSAqW2NsYXNzfj10XSxbY2xhc3N+PW9wX2Jlc3RfYW5zd2VyX3F1ZXN0aW9uXSIsCiAgICAgICAgQmxvY2tUeXBlOiAiaDMgYSIsCiAgICAgICAgcGFnZXI6ewogICAgICAgICAgICBuZXh0TGluazogJy8vZGl2W0BpZD0icGFnZSJdL2FbY29udGFpbnModGV4dCgpLCLDpMK4wovDpMK4woDDqcKhwrUiKV1bQGhyZWZdJywKICAgICAgICAgICAgcGFnZUVsZW1lbnQ6ICJjc3M7ZGl2I2NvbnRlbnRfbGVmdCA+ICoiLAogICAgICAgICAgICBIVF9pbnNlcnQ6IFsgImNzcztkaXYjY29udGVudF9sZWZ0IiwgMiBdLAogICAgICAgICAgICByZXBsYWNlRTogImNzczsjcGFnZSIsCiAgICAgICAgICAgIHN0eWxpc2g6ICIuYXV0b3BhZ2VyaXplX3BhZ2VfaW5mbywgZGl2LnNwLXNlcGFyYXRvciB7bWFyZ2luLWJvdHRvbTogMTBweCAhaW1wb3J0YW50O30iCiAgICAgICAgfQogICAgfSwKICAgIHNvZ291OiB7CiAgICAgICAgU2l0ZVR5cGVJRDogMiwKICAgICAgICBNYWluVHlwZTogIiNtYWluIC5yZXN1bHRzPmRpdiIsCiAgICAgICAgU3R5cGVfTm9ybWFsOiAiaDMucHQ+YSwgaDMudnJUaXRsZT5hIiwKICAgICAgICBGYXZpY29uVHlwZTogImNpdGVbaWQqPSdjYWNoZXJlc3VsdF9pbmZvXyddIiwKICAgICAgICBGYXZpY29uQWRkVG86ICJoMyIsCiAgICAgICAgQ291bnRlclR5cGU6ICIucmVzdWx0cz5kaXYiLAogICAgICAgIEJsb2NrVHlwZTogImgzIGEiLAogICAgICAgIHBhZ2VyOnsKICAgICAgICAgICAgbmV4dExpbms6ICIvL2RpdltAaWQ9XCJwYWdlYmFyX2NvbnRhaW5lclwiXS9hW0BpZD1cInNvZ291X25leHRcIl0iLAogICAgICAgICAgICBwYWdlRWxlbWVudDogIi8vZGl2W0BjbGFzcz1cInJlc3VsdHNcIl0vZGl2IiwKICAgICAgICAgICAgSFRfaW5zZXJ0OiBbIi8vZGl2W0BjbGFzcz1cInJlc3VsdHNcIl0iLCAyXSwKICAgICAgICAgICAgcmVwbGFjZUU6ICJpZChcInBhZ2ViYXJfY29udGFpbmVyXCIpIgogICAgICAgIH0KICAgIH0sCiAgICBoYW9zb3U6IHsKICAgICAgICBTaXRlVHlwZUlEOiAzLAogICAgICAgIE1haW5UeXBlOiAiLnJlcy1saXN0IiwKICAgICAgICBTdHlwZV9Ob3JtYWw6ICIucmVzLWxpc3QgaDM+YSIsCiAgICAgICAgRmF2aWNvblR5cGU6ICIucmVzLWxpbmtpbmZvIGNpdGUiLAogICAgICAgIEZhdmljb25BZGRUbzogImgzIiwKICAgICAgICBDb3VudGVyVHlwZTogIi5yZXN1bHRzPmRpdiIsCiAgICAgICAgQmxvY2tUeXBlOiAiaDMgYSIsCiAgICAgICAgcGFnZXI6ewogICAgICAgICAgICBuZXh0TGluazogIi8vZGl2W0BpZD1cInBhZ2VcIl0vYVt0ZXh0KCk9XCLDpMK4wovDpMK4woDDqcKhwrU+XCJdIHwgaWQoXCJzbmV4dFwiKSIsCiAgICAgICAgICAgIHBhZ2VFbGVtZW50OiAiLy9kaXZbQGlkPVwiY29udGFpbmVyXCJdL2RpdiIsCiAgICAgICAgICAgIEhUX2luc2VydDogWyIvL2RpdltAaWQ9XCJjb250YWluZXJcIl0iLCAxXSwKICAgICAgICAgICAgcmVwbGFjZUU6ICJpZChcInBhZ2VcIikiCiAgICAgICAgfQogICAgfSwKICAgIGdvb2dsZTogewogICAgICAgIFNpdGVUeXBlSUQ6IDQsCiAgICAgICAgTWFpblR5cGU6ICIjcnNvIC5nICpbY2xhc3N+PXJjXSIsCiAgICAgICAgRmF2aWNvblR5cGU6ICIuaVVoMzAiLAogICAgICAgIEZhdmljb25BZGRUbzogImgzIiwKICAgICAgICBDb3VudGVyVHlwZTogIiNyc28gLmcgKltjbGFzc349cl0gaDMsLl95RT5kaXZbY2xhc3N+PV9ra10gaDMiLAogICAgICAgIEJsb2NrVHlwZTogIi5yYz4ucj5hIiwKICAgICAgICBwYWdlcjp7CiAgICAgICAgICAgIG5leHRMaW5rOiAnaWQoInBubmV4dCIpIHwgaWQoIm5hdmJhciBuYXZjbnQgbmF2IikvL3RkW3NwYW5dL2ZvbGxvd2luZy1zaWJsaW5nOjp0ZFsxXS9hIHwgaWQoIm5uIikvcGFyZW50OjphJywKICAgICAgICAgICAgcGFnZUVsZW1lbnQ6ICcvL2RpdltAaWQ9InJlcyJdJywKICAgICAgICAgICAgSFRfaW5zZXJ0OiBbICJjc3M7I3JlcyIsIDIgXSwKICAgICAgICAgICAgcmVwbGFjZUU6ICcvL2RpdltAaWQ9Im5hdmNudCJdIHwgLy9kaXZbQGlkPSJmb290Il1bQHJvbGU9Im5hdmlnYXRpb24iXScKICAgICAgICB9CiAgICB9LAogICAgYmluZzogewogICAgICAgIFNpdGVUeXBlSUQ6IDUsCiAgICAgICAgTWFpblR5cGU6ICIjYl9yZXN1bHRzPmxpIiwKICAgICAgICBGYXZpY29uVHlwZTogIi5iX2F0dHJpYnV0aW9uPmNpdGUiLAogICAgICAgIEZhdmljb25BZGRUbzogImgyIiwKICAgICAgICBDb3VudGVyVHlwZTogIiNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYW5zXT5oMiwjYl9yZXN1bHRzPmxpW2NsYXNzfj1iX2FsZ29dPmgyLCNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYWxnb10+aDIiLAogICAgICAgIEJsb2NrVHlwZTogImgyIGEiLAogICAgICAgIHBhZ2VyOnsKICAgICAgICAgICAgbmV4dExpbms6ICIvL2FbY29udGFpbnMoQGNsYXNzLFwic2JfcGFnTlwiKV0iLAogICAgICAgICAgICBwYWdlRWxlbWVudDogImlkKFwiYl9yZXN1bHRzXCIpL2xpW25vdChjb250YWlucyhAY2xhc3MsXCJiX3BhZ1wiKSBvciBjb250YWlucyhAY2xhc3MsXCJiX2FucyBiX3RvcFwiKSldIiwKICAgICAgICAgICAgSFRfaW5zZXJ0OiBbImlkKFwiYl9yZXN1bHRzXCIpL2xpW0BjbGFzcz1cImJfcGFnXCJdIiwgMV0sCiAgICAgICAgICAgIHJlcGxhY2VFOiAiaWQoXCJiX3Jlc3VsdHNcIikvL25hdltAcm9sZT1cIm5hdmlnYXRpb25cIl0iLAogICAgICAgIH0KICAgIH0sCiAgICBtQmFpZHU6ewogICAgICAgIFNpdGVUeXBlSUQ6IDYsCiAgICAgICAgTWFpblR5cGU6ICIjYl9yZXN1bHRzPmxpIiwKICAgICAgICBGYXZpY29uVHlwZTogIi5iX2F0dHJpYnV0aW9uPmNpdGUiLAogICAgICAgIEZhdmljb25BZGRUbzogImgyIiwKICAgICAgICBDb3VudGVyVHlwZTogIiNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYW5zXT5oMiwjYl9yZXN1bHRzPmxpW2NsYXNzfj1iX2FsZ29dPmgyLCNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYWxnb10+aDIiLAogICAgICAgIEJsb2NrVHlwZTogImgyIGEiLAogICAgfSwKICAgIHpoaWh1OiB7CiAgICAgICAgU2l0ZVR5cGVJRDogNywKICAgIH0sCiAgICBiYWlkdV94dWVzaHU6ewogICAgICAgIFNpdGVUeXBlSUQ6IDgsCiAgICAgICAgTWFpblR5cGU6ICIjY29udGVudF9sZWZ0IC5yZXN1bHQiLAogICAgICAgIFN0eXBlX05vcm1hbDogImgzLnQ+YSwgI3Jlc3VsdHMgLmMtY29udGFpbmVyPi5jLWJsb2NrYSIsCiAgICAgICAgRmF2aWNvblR5cGU6ICIucmVzdWx0LW9wLCAuYy1zaG93dXJsIiwKICAgICAgICBGYXZpY29uQWRkVG86ICJoMyIsCiAgICAgICAgQ291bnRlclR5cGU6ICIjY29udGVudF9sZWZ0PiNkb3VibGU+ZGl2W3NyY2lkXSAqW2NsYXNzfj10XSxbY2xhc3N+PW9wX2Jlc3RfYW5zd2VyX3F1ZXN0aW9uXSwjY29udGVudF9sZWZ0PmRpdltzcmNpZF0gKltjbGFzc349dF0sW2NsYXNzfj1vcF9iZXN0X2Fuc3dlcl9xdWVzdGlvbl0iLAogICAgICAgIEJsb2NrVHlwZTogImgzIGEiLAogICAgfSwKICAgIG90aGVyOiB7CiAgICAgICAgU2l0ZVR5cGVJRDogOSwKICAgIH0KfQo="}]},{"name":"知网维普免费入口","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":["*cnki.net*","*cqvip.com*","*210.47.0.21/~root/search*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null}},"storage":{"data":{},"ts":1587235898706},"enabled":false,"position":10,"file_url":"https://greasyfork.org/scripts/50738-%E7%9F%A5%E7%BD%91%E7%BB%B4%E6%99%AE%E5%85%8D%E8%B4%B9%E5%85%A5%E5%8F%A3/code/%E7%9F%A5%E7%BD%91%E7%BB%B4%E6%99%AE%E5%85%8D%E8%B4%B9%E5%85%A5%E5%8F%A3.user.js","uuid":"725063ee-38ac-4609-8087-f68ceded9474","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KCi8vIEBpbmNsdWRlICAgICAgKmNua2kubmV0KgovLyBAaW5jbHVkZSAgICAgICpjcXZpcC5jb20qCi8vIEBpbmNsdWRlICAgICAgKjIxMC40Ny4wLjIxL35yb290L3NlYXJjaCoKCi8vIEBuYW1lICAgICAgICAg55+l572R57u05pmu5YWN6LS55YWl5Y+jCi8vIEBuYW1lc3BhY2UgICAgaHR0cDovL3RhbXBlcm1vbmtleS5uZXQvCi8vIEB2ZXJzaW9uICAgICAgMS4wMgovLyBAZGVzY3JpcHRpb24gIOaJk+W8gOefpee9keaIluiAhee7tOaZruWumOe9keS8muiHquWKqOi3s+i9rOWIsOKAnOS4iuS4muaYk+S6q+KAneeZu+mZhueql+WPo++8jOWAn+WKqeelnuenmOWKm+mHj+eZu+mZhuWQjuS8muiHquWKqOi3s+i9rOWIsOS4gOS4quaWsOeql+WPo++8jOWcqOaWsOeql+WPo+W3puS4i+inkuaciVvnn6XnvZFd5ZKMW+e7tOaZrl3nmoTlhY3otLnlhaXlj6PvvIzlpb3lpb3kuqvlj5flkKfjgILlpoLpgYfml6Dms5Xoh6rliqjot7PovazlsIbmtY/op4jlmajorr7nva7kuLrigJzlhYHorrjlvLnnqpfigJ0KLy8gQGF1dGhvciAgICAgICBHaW5uCi8vIEBncmFudCAgICAgICAgbm9uZQovLyBAbm90ZSAgICAgICAgIOi3s+i9rOWcsOWdgO+8mmh0dHA6Ly8yMTAuNDcuMC4yMQovLyBAbm90ZSAgICAgICAgIOi0puWPt++8mmNjbGdsaWIKLy8gQG5vdGUgICAgICAgICDlr4bnoIHvvJpjY2xnbGliCi8vIEBub3RlICAgICAgICAgdjEuMDHmm7TmlrDkuIrpg6jkv6Hmga/moYbvvIzngrnlh7vnoa7lrprot7PovazvvIzlj5bmtojkuI3ot7PovawKLy8gQG5vdGUgICAgICAgICB2MS4wMuabtOaWsOWMheWQq2Nua2kubmV077yMY3F2aXAuY29tCi8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uKCkgewogICAgJ3VzZSBzdHJpY3QnOwogICAgdmFyIHVzZXJuYW1lID0gImNjbGdsaWIiOwogICAgdmFyIHBhc3N3b3JkID0gImNjbGdsaWIiOwogICAgaWYgKGxvY2F0aW9uLmhvc3QgPT0gImNua2kubmV0IiB8fCBsb2NhdGlvbi5ob3N0ID09ICJ3d3cuY25raS5uZXQiIHx8IGxvY2F0aW9uLmhvc3QgPT0gImNxdmlwLmNvbSIgfHwgbG9jYXRpb24uaG9zdCA9PSAid3d3LmNxdmlwLmNvbSIpIHsKICAgICAgICB2YXIgbWVzc2FnZSA9IGNvbmZpcm0oIuivt+iusOS9j+S7peS4i+S/oeaBryIgKyAiXG4iICsgIui0puWPt++8miIgKyB1c2VybmFtZSArICIgICDlr4bnoIHvvJoiICsgcGFzc3dvcmQpOwoKICAgICAgICAvL+eCueWHu+ehruWumui3s+i9rO+8jOWPlua2iOS4jei3s+i9rAogICAgICAgIGlmKG1lc3NhZ2UgPT09IHRydWUpIHsKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAiaHR0cDovLzIxMC40Ny4wLjIxL35yb290L3VzZXIiOwogICAgICAgIH0KICAgIH1lbHNlIGlmKGxvY2F0aW9uLmhvc3QuaW5kZXhPZigiMjEwLjQ3LjAuMjEiKSA+IC0xKSB7CiAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgICAgIGEudHlwZT0iYnV0dG9uIjsKICAgICAgICBhLnZhbHVlPSLnn6XnvZEiOwogICAgICAgIGEuc3R5bGUucG9zaXRpb249ImZpeGVkIjsKICAgICAgICBhLnN0eWxlLmxlZnQ9IjBweCI7CiAgICAgICAgYS5zdHlsZS5ib3R0b209IjE4MHB4IjsKICAgICAgICBhLnN0eWxlLmZvbnRTaXplPSIyMHB4IjsKICAgICAgICBhLnN0eWxlLnRleHREZWNvcmF0aW9uPSJub25lIjsKICAgICAgICBhLnN0eWxlLnpJbmRleD05OTk7CiAgICAgICAgYS5zdHlsZS5kaXNwbGF5PSJub25lIjsKICAgICAgICBhLnN0eWxlLmJhY2tncm91bmRDb2xvcj0icmVkIjsKICAgICAgICBhLnN0eWxlLmNvbG9yPSJ3aGl0ZSI7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiYm9keSIpLmFwcGVuZENoaWxkKGEpOwogICAgICAgIGEuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgYS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHdpbmRvdy5vcGVuKCdodHRwOi8vMjEwLjQ3LjAuMjEvaHR0cC9jbmtpLm5ldC93d3cvODAvJyk7CiAgICAgICAgfSk7CgogICAgICAgIHZhciBiID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKICAgICAgICBiLnR5cGU9ImJ1dHRvbiI7CiAgICAgICAgYi52YWx1ZT0i57u05pmuIjsKICAgICAgICBiLnN0eWxlLnBvc2l0aW9uPSJmaXhlZCI7CiAgICAgICAgYi5zdHlsZS5sZWZ0PSIwcHgiOwogICAgICAgIGIuc3R5bGUuYm90dG9tPSIxNTBweCI7CiAgICAgICAgYi5zdHlsZS5mb250U2l6ZT0iMjBweCI7CiAgICAgICAgYi5zdHlsZS50ZXh0RGVjb3JhdGlvbj0ibm9uZSI7CiAgICAgICAgYi5zdHlsZS56SW5kZXg9OTk5OwogICAgICAgIGIuc3R5bGUuZGlzcGxheT0ibm9uZSI7CiAgICAgICAgYi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9InJlZCI7CiAgICAgICAgYi5zdHlsZS5jb2xvcj0id2hpdGUiOwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImJvZHkiKS5hcHBlbmRDaGlsZChiKTsKICAgICAgICBiLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICAgIGIuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbigpewogICAgICAgICAgICB3aW5kb3cub3BlbignaHR0cDovLzIxMC40Ny4wLjIxL2h0dHAvY3F2aXAuY29tL2xpYi84MC8nKTsKICAgICAgICB9KTsKICAgIH0KCiAgICAvLyBZb3VyIGNvZGUgaGVyZS4uLgp9KSgpOw=="},{"name":"双栏显示搜索结果","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":["*://www.baidu.com/*","*://www.sogou.com/*","*://www.so.com/*","*://www.google.*/*","*://*.bing.com/*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":["/(^[^:\\/#\\?]*:\\/\\/([^#\\?\\/]*\\.)?www\\.baidu\\.com(:[0-9]{1,5})?\\/.*$)/","/(^[^:\\/#\\?]*:\\/\\/([^#\\?\\/]*\\.)?www\\.bing\\.com(:[0-9]{1,5})?\\/.*$)/"],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-start","orig_noframes":null}},"storage":{"data":{},"ts":1587235898706},"enabled":false,"position":11,"file_url":"https://greasyfork.org/scripts/27825-%E5%8F%8C%E6%A0%8F%E6%98%BE%E7%A4%BA%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C/code/%E5%8F%8C%E6%A0%8F%E6%98%BE%E7%A4%BA%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C.user.js","uuid":"3de53579-d4d0-40bb-9396-a015894be0ac","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIOWPjOagj+aYvuekuuaQnOe0oue7k+aenAovLyBAbmFtZXNwYWNlICAgbm9uZQovLyBAZGVzY3JpcHRpb24g5Y+M5qCP5pi+56S6YmFpZHUsIHNvZ291LCBzbywgZ29vZ2xlLCBiaW5n55qE5pCc57Si57uT5p6cCi8vIEB2ZXJzaW9uICAgICAxLjkuMTAKLy8gQGluY2x1ZGUgICAgICo6Ly93d3cuYmFpZHUuY29tLyoKLy8gQGluY2x1ZGUgICAgICo6Ly93d3cuc29nb3UuY29tLyoKLy8gQGluY2x1ZGUgICAgICo6Ly93d3cuc28uY29tLyoKLy8gQGluY2x1ZGUgICAgICo6Ly93d3cuZ29vZ2xlLiovKgovLyBAaW5jbHVkZSAgICAgKjovLyouYmluZy5jb20vKgovLyBAZ3JhbnQgICAgICAgbm9uZQovLyBAcnVuLWF0ICAgICAgZG9jdW1lbnQtc3RhcnQKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwogICAgdmFyIGRvbVVSTCA9IGRvY3VtZW50LlVSTDsKICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICAgIGlmIChkb21VUkwuaW5kZXhPZignYmFpZHUuY29tJykgIT09IC0gMSkgewogICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gJyNjb250ZW50X3JpZ2h0e2Rpc3BsYXk6bm9uZX0uY29udGFpbmVyX2x7d2lkdGg6OTl2dyAhaW1wb3J0YW50fSNjb250ZW50X2xlZnR7d2lkdGg6OTB2dyAhaW1wb3J0YW50O2Rpc3BsYXk6IGZsZXg7ZmxleC13cmFwOiB3cmFwfS5jLWNvbnRhaW5lcnt3aWR0aDo0NyU7bWFyZ2luLXJpZ2h0OjI1cHg7fSNyc190b3BfbmV3e3dpZHRoOjEwMCUgIWltcG9ydGFudH0nOwogICAgfQogICAgaWYgKGRvbVVSTC5pbmRleE9mKCdzb2dvdS5jb20nKSAhPT0gLSAxKSB7CiAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSAnI3JpZ2h0e2Rpc3BsYXk6bm9uZX0uaGludEJveCwud3JhcHBlciwjcGFnZWJhcl9jb250YWluZXIsLmhlYWRlcnt3aWR0aDo5MHZ3ICFpbXBvcnRhbnR9I21haW4sLnJlc3VsdHN7bWluLXdpZHRoOjkwdncgIWltcG9ydGFudDttYXgtd2lkdGg6OTB2dyAhaW1wb3J0YW50O3BhZGRpbmctcmlnaHQ6MCAhaW1wb3J0YW50O2Rpc3BsYXk6IGZsZXg7ZmxleC13cmFwOiB3cmFwfS5yZXN1bHRzPmRpdnt3aWR0aDo0NyUgIWltcG9ydGFudDttYXJnaW4tcmlnaHQ6MjVweDt9LmJpbmctc25ie3dpZHRoOjEwMCV9JzsKICAgIH0KICAgIGlmIChkb21VUkwuaW5kZXhPZignc28uY29tJykgIT09IC0gMSkgewogICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gJyNzaWRle2Rpc3BsYXk6bm9uZX0jbWFpbiwucmVzdWx0e3dpZHRoOjkwdncgIWltcG9ydGFudH0ucmVzdWx0e2Rpc3BsYXk6IGZsZXg7ZmxleC13cmFwOiB3cmFwfS5yZXMtbGlzdHt3aWR0aDo0NyU7bWFyZ2luLXJpZ2h0OjI1cHg7fScKICAgIH0KICAgIGlmIChkb21VUkwuaW5kZXhPZignZ29vZ2xlJykgIT09IC0gMSkgewogICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gJyNyaHNjb2wsLnJoc2NvbHtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9I2NudCAjY2VudGVyX2NvbHt3aWR0aDogOTB2dyAhaW1wb3J0YW50O30jVEVQRDBie2Zsb2F0OiBub25lICFpbXBvcnRhbnQ7IG1hcmdpbi1ib3R0b206IDAgIWltcG9ydGFudH0uc3JnLCNyc297ZGlzcGxheTogZmxleDtmbGV4LXdyYXA6IHdyYXB9LmcsZy1zZWN0aW9uLXdpdGgtaGVhZGVyLC54RVJvYmR7d2lkdGg6IDQ3JSAhaW1wb3J0YW50O30ubVIyZ09ke3dpZHRoOjk1JX0uQ09Fb2lke21hcmdpbjogLTRweCAwICFpbXBvcnRhbnQ7fS5rMk9lb2QuZVNxM0N7cmlnaHQ6MThweCAhaW1wb3J0YW50O30uZz5kaXYsLmc+Zy1zZWN0aW9uLXdpdGgtaGVhZGVye3dpZHRoOjk1JTt9LlAxdXNiY3tkaXNwbGF5Om5vbmUgIWltcG9ydGFudH0jdHctY29udGFpbmVyLCN0dy1jb250YWluZXIgfiAuZGk4ZzN7d2lkdGg6OTAlfSNicnMgLm1lZHt3aWR0aDoyMDBweH0jY250ICNmb290e3dpZHRoOjFweCAhaW1wb3J0YW50fS52a19je2JvcmRlcjogMHB4IHNvbGlkICNkZmUxZTUgIWltcG9ydGFudDt9JwogICAgfQogICAgaWYgKGRvbVVSTC5pbmRleE9mKCdiaW5nLmNvbScpICE9PSAtIDEpIHsKICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9ICcjYl9jb250ZXh0e2Rpc3BsYXk6bm9uZX0jYl9jb250ZW50e3BhZGRpbmc6IDQxcHggMTAwcHggMjBweDt9I2JfcmVzdWx0c3t3aWR0aDoxMDAlO2Rpc3BsYXk6IGZsZXg7ZmxleC13cmFwOiB3cmFwfSNiX3Jlc3VsdHM+bGl7d2lkdGg6NDclO30uYl9wYWcsLmJfYW5ze3dpZHRoOjEwMCUgIWltcG9ydGFudH0jYl9yZXN1bHRzPi5iX2FsZ297cGFkZGluZzogMjBweH0jYl9yZXN1bHRzPmxpOmZpcnN0LWNoaWxke3BhZGRpbmctdG9wOjIwcHh9I2JfcmVzdWx0cz4uYl9wYWd7cGFkZGluZzogMjBweCAwfScKICAgIH0KICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChlbGVtZW50KTsKfSkgKCk7Cg=="},{"name":"再见了百家号搜索结果","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":["http://www.baidu.com/*","https://www.baidu.com/*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-end","orig_noframes":null}},"storage":{"data":{},"ts":1587235898707},"enabled":false,"position":12,"file_url":"https://greasyfork.org/scripts/41037-%E5%86%8D%E8%A7%81%E4%BA%86%E7%99%BE%E5%AE%B6%E5%8F%B7%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C/code/%E5%86%8D%E8%A7%81%E4%BA%86%E7%99%BE%E5%AE%B6%E5%8F%B7%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C.user.js","uuid":"0e38f1eb-2145-4ade-9cb3-732b79240073","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDlho3op4Hkuobnmb7lrrblj7fmkJzntKLnu5PmnpwKLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vdGFtcGVybW9ua2V5Lm5ldC8KLy8gQGhvbWUtdXJsICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3poLUNOL3NjcmlwdHMvNDEwMzcKLy8gQGRlc2NyaXB0aW9uICDliKDpmaTnmb7luqbmkJzntKLnu5PmnpznmoTnmb7lrrblj7fnmoTnu5PmnpwKLy8gQHZlcnNpb24gICAgICAxLjIuMwovLyBAaW5jbHVkZSAgICAgIGh0dHA6Ly93d3cuYmFpZHUuY29tLyoKLy8gQGluY2x1ZGUgICAgICBodHRwczovL3d3dy5iYWlkdS5jb20vKgovLyBAYXV0aG9yICAgICAgIOS+neeEtuiPnOWIgAovLyBAZ3JhbnQgICAgICAgIG5vbmUKLy8gQHJ1bi1hdCAgICAgICBkb2N1bWVudC1lbmQKLy8gPT0vVXNlclNjcmlwdD09CihmdW5jdGlvbiAoKSB7CiAgU3RyaW5nLnByb3RvdHlwZS5lbmRXaXRoID0gZnVuY3Rpb24gKHMpIHsKICAgIGlmIChzID09IG51bGwgfHwgcyA9PT0gIiIgfHwgdGhpcy5sZW5ndGggPT09IDAgfHwgcy5sZW5ndGggPiB0aGlzLmxlbmd0aCkKICAgICAgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHRoaXMuc3Vic3RyaW5nKHRoaXMubGVuZ3RoIC0gcy5sZW5ndGgpID09PSBzOwogIH07CgogIFN0cmluZy5wcm90b3R5cGUuc3RhcnRXaXRoID0gZnVuY3Rpb24gKHMpIHsKICAgIGlmIChzID09IG51bGwgfHwgcyA9PT0gIiIgfHwgdGhpcy5sZW5ndGggPT09IDAgfHwgcy5sZW5ndGggPiB0aGlzLmxlbmd0aCkKICAgICAgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHRoaXMuc3Vic3RyKDAsIHMubGVuZ3RoKSA9PT0gczsKICB9OwoKICB2YXIgSU5TID0gJyAtYmFpamlhaGFvJzsKCiAgZnVuY3Rpb24gYWRkSU5TKCkgewogICAgdmFyIGt3ID0gJCgiI2t3IikudmFsKCk7CiAgICBpZiAoa3cudHJpbSgpLmxlbmd0aCA+IDAgJiYgIWt3LmVuZFdpdGgoSU5TKSkgewogICAgICAkKCIja3ciKS52YWwoa3cgKyBJTlMpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gcmVtb3ZlSU5TKCkgewogICAgdmFyIGt3ID0gJCgiI2t3IikudmFsKCk7CiAgICBpZiAoa3cuZW5kV2l0aChJTlMpKSB7CiAgICAgICQoIiNrdyIpLnZhbChrdy5zdWJzdHIoMCwga3cubGVuZ3RoIC0gSU5TLmxlbmd0aCkpOwogICAgfQogIH0KCiAgdmFyIHNVcmwgPSAnL3M/JzsKCiAgZnVuY3Rpb24gZW5jb2RlKHBhcmFtLCB1cmwpIHsKICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQocGFyYW0pOwogIH0KCiAgZnVuY3Rpb24gZGVjb2RlKHBhcmFtLCB1cmwpIHsKICAgIGlmIChwYXJhbS5pbmRleE9mKCcrJykpIHsKICAgICAgcGFyYW0gPSBwYXJhbS5yZXBsYWNlKCcrJywgJyUyMCcpOwogICAgfQogICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChwYXJhbSk7CiAgfQoKICAvKioKICAgKiDlpITnkIZ1cmzvvIzlop7liqDmiJbogIXliKDpmaRJTlMKICAgKiBAcGFyYW0gdXJsIOWOn+Wni3VybAogICAqIEBwYXJhbSB0b1JlbW92ZSDmmK/lkKbmmK/np7vpmaTvvIx1bmRlZmluZWTooajnpLrmt7vliqAKICAgKiBAcmV0dXJucyB7Kn0KICAgKi8KICBmdW5jdGlvbiBwcm9jZXNzVXJsSU5TKHVybCwgdG9SZW1vdmUpIHsKICAgIHZhciBvcmlnaW5VcmwgPSB1cmw7CiAgICB2YXIgdG9BZGQgPSAhdG9SZW1vdmU7CiAgICB2YXIgaW5kZXggPSB1cmwuaW5kZXhPZihzVXJsKTsKICAgIGlmIChpbmRleCA9PT0gLTEpIHsKICAgICAgcmV0dXJuIHVybDsKICAgIH0KICAgIHZhciBwcmVmaXggPSB1cmwuc3Vic3RyKDAsIGluZGV4ICsgc1VybC5sZW5ndGgpOwogICAgdXJsID0gdXJsLnN1YnN0cihpbmRleCArIHNVcmwubGVuZ3RoKTsKICAgIHZhciBwYXJhbXMgPSB1cmwuc3BsaXQoJyYnKTsKICAgIHZhciBuZXdVcmxBcnIgPSBbXTsKCiAgICAkLmVhY2gocGFyYW1zLCBmdW5jdGlvbiAoaSwgaXRlbSkgewogICAgICB2YXIga3YgPSBpdGVtLnNwbGl0KCc9Jyk7CiAgICAgIGlmIChrdlswXSA9PT0gJ3dkJyB8fCBrdlswXSA9PT0gJ3dvcmQnKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciB2ID0gZGVjb2RlKGt2WzFdLCBvcmlnaW5VcmwpOwogICAgICAgICAgaWYgKHRvQWRkKSB7CiAgICAgICAgICAgIC8vIOWinuWKoElOUwogICAgICAgICAgICBpZiAoIXYuZW5kV2l0aChJTlMpKSB7CiAgICAgICAgICAgICAgdiA9IHYgKyBJTlM7CiAgICAgICAgICAgICAga3ZbMV0gPSBlbmNvZGUodiwgb3JpZ2luVXJsKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8g56e76ZmkSU5T77yM55So5LqO6I635Y+W55u45YWz5pCc57SiCiAgICAgICAgICAgIGlmICh2LmVuZFdpdGgoSU5TKSkgewogICAgICAgICAgICAgIHYgPSB2LnN1YnN0cigwLCB2Lmxlbmd0aCAtIElOUy5sZW5ndGgpOwogICAgICAgICAgICAgIGt2WzFdID0gZW5jb2RlKHYsIG9yaWdpblVybCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKGUsIGl0ZW0pOwogICAgICAgIH0KICAgICAgfQogICAgICBuZXdVcmxBcnIucHVzaChrdlswXSArICc9JyArIGt2WzFdKTsKICAgIH0pOwogICAgcmV0dXJuIHByZWZpeCArIG5ld1VybEFyci5qb2luKCcmJyk7CiAgfQoKICBmdW5jdGlvbiBkZWxlZ2F0ZUFqYXgoKSB7CiAgICB2YXIgYWpheCA9ICQuYWpheDsKICAgICQuYWpheCA9IGZ1bmN0aW9uIChzZXR0aW5ncykgewogICAgICBpZiAoc2V0dGluZ3MgJiYgc2V0dGluZ3MudXJsICYmIHNldHRpbmdzLnVybC5zdGFydFdpdGgoJy9zPycpKSB7CiAgICAgICAgc2V0dGluZ3MudXJsID0gcHJvY2Vzc1VybElOUyhzZXR0aW5ncy51cmwpOwogICAgICB9CiAgICAgIHJldHVybiBhamF4LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0KCiAgZGVsZWdhdGVBamF4KCk7CiAgdmFyIGhvc3RuYW1lID0gd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lOwogIC8vIOenu+mZpOeZvuWutuWPt+eahOaQnOe0oue7k+aenAogIGlmIChob3N0bmFtZSA9PT0gJ3d3dy5iYWlkdS5jb20nKSB7CiAgICBwcm9jZXNzKCk7CiAgICB0YWJzVXJsUHJvY2VzcygpOwogICAgLy8g55u45YWz5pCc57Si5pu/5o2iCiAgICByc1Byb2Nlc3MoKTsKICAgIC8vZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NU3VidHJlZU1vZGlmaWVkIiwgcHJvY2Vzcyk7CiAgICAvL2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTVN1YnRyZWVNb2RpZmllZCIsIHRhYnNVcmxwcm9jZXNzKTsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTVN1YnRyZWVNb2RpZmllZCIsIHJzUHJvY2Vzcyk7CiAgfQoKICBmdW5jdGlvbiB0YWJzVXJsUHJvY2VzcygpIHsKICAgICQoZG9jdW1lbnQpLm9mZignY2xpY2snKS5vbignY2xpY2snLCAnYScsIGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5ocmVmID0gcHJvY2Vzc1VybElOUyh0aGlzLmhyZWYpOwogICAgfSk7CiAgfQoKICB2YXIgcnNIYW5kbGVyOwogIGZ1bmN0aW9uIHJzUHJvY2VzcyhldmVudCkgewogICAgaWYgKHJzSGFuZGxlcikgewogICAgICBjbGVhclRpbWVvdXQocnNIYW5kbGVyKTsKICAgIH0KICAgIC8vIOmBv+WFjemAkuW9kgogICAgaWYgKGV2ZW50ICYmIGV2ZW50LnRhcmdldCA9PT0gJCgiI3JzIilbMF0pIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCcvcz8nKSA9PT0gLTEpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHJzSGFuZGxlciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBpZiAoJC50cmltKCQoIiNrdyIpLnZhbCgpKS5sZW5ndGggPiAwICYmICQoIiNycyIpLmxlbmd0aCA+IDApIHsKICAgICAgICB2YXIgb3JpZ2luVXJsID0gcHJvY2Vzc1VybElOUyh3aW5kb3cubG9jYXRpb24uaHJlZiwgdHJ1ZSk7CiAgICAgICAgJC5nZXQob3JpZ2luVXJsLCBmdW5jdGlvbiAoaHRtbCkgewogICAgICAgICAgdmFyICRycyA9ICQoaHRtbCkuZmluZCgnI3JzJyk7CiAgICAgICAgICBpZiAoJHJzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgJHJzLmZpbmQoJ2EnKS5lYWNoKGZ1bmN0aW9uIChpLCBpdGVtKSB7CiAgICAgICAgICAgICAgdmFyIGhyZWYgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2hyZWYnLCBwcm9jZXNzVXJsSU5TKGhyZWYpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICQoIiNycyIpLmh0bWwoJHJzLmh0bWwoKSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcnNIYW5kbGVyID0gdW5kZWZpbmVkOwogICAgfSwgNTAwKTsKICB9CgogIGZ1bmN0aW9uIHByb2Nlc3MoKSB7CiAgICAkKCIjZm9ybSIpLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoKSB7CiAgICAgIGFkZElOUygpOwogICAgfSk7CiAgICAkKCIjc3UiKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgIGFkZElOUygpOwogICAgfSk7CgogICAgJCgiI2t3Iikub24oJ2ZvY3VzJywgZnVuY3Rpb24gKCkgewogICAgICByZW1vdmVJTlMoKTsKICAgIH0pLm9uKCdibHVyJywgZnVuY3Rpb24gKCkgewogICAgICBhZGRJTlMoKTsKICAgIH0pOwogIH0KfSkoKTs="},{"name":"[timerd][囧妈] 腾讯、爱奇艺、芒果、优酷、乐视、B站、土豆、搜狐、1905等 VIP视频免费看(2020.02.19)更新","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":["*://v.youku.com/v_*","*://m.youku.com/v*","*://m.youku.com/a*","*://*.iqiyi.com/v_*","*://*.iqiyi.com/w_*","*://*.iqiyi.com/a_*","*://*.iqiyi.com/dianying/*","*://*.le.com/ptv/vplay/*","*://*v.qq.com/x/cover/*","*://*v.qq.com/x/page/*","*://*v.qq.com/play*","*://*v.qq.com/cover*","*://*.tudou.com/listplay/*","*://*.tudou.com/albumplay/*","*://*.tudou.com/programs/view/*","*://*.tudou.com/v*","*://*.mgtv.com/b/*","*://film.sohu.com/album/*","*://tv.sohu.com/*","*://*.bilibili.com/video/*","*://*.bilibili.com/anime/*","*://*.bilibili.com/bangumi/play/*","*://*.pptv.com/show/*","*://*.wasu.cn/Play/show*","*://*.1905.com/play/*","*://chinese-elements.com/*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null}},"storage":{"data":{},"ts":1587235898712},"enabled":false,"position":13,"file_url":"https://greasyfork.org/scripts/394492-timerd-%E5%9B%A7%E5%A6%88-%E8%85%BE%E8%AE%AF-%E7%88%B1%E5%A5%87%E8%89%BA-%E8%8A%92%E6%9E%9C-%E4%BC%98%E9%85%B7-%E4%B9%90%E8%A7%86-b%E7%AB%99-%E5%9C%9F%E8%B1%86-%E6%90%9C%E7%8B%90-1905%E7%AD%89-vip%E8%A7%86%E9%A2%91%E5%85%8D%E8%B4%B9%E7%9C%8B-2020-02-01-%E6%9B%B4%E6%96%B0/code/%5Btimerd%5D%5B%E5%9B%A7%E5%A6%88%5D%20%E8%85%BE%E8%AE%AF%E3%80%81%E7%88%B1%E5%A5%87%E8%89%BA%E3%80%81%E8%8A%92%E6%9E%9C%E3%80%81%E4%BC%98%E9%85%B7%E3%80%81%E4%B9%90%E8%A7%86%E3%80%81B%E7%AB%99%E3%80%81%E5%9C%9F%E8%B1%86%E3%80%81%E6%90%9C%E7%8B%90%E3%80%811905%E7%AD%89%20VIP%E8%A7%86%E9%A2%91%E5%85%8D%E8%B4%B9%E7%9C%8B(20200201)%E6%9B%B4%E6%96%B0.user.js","uuid":"92134164-1a62-434c-9e49-f9c389422867","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBbdGltZXJkXVvlm6flpohdIOiFvuiur+OAgeeIseWlh+iJuuOAgeiKkuaenOOAgeS8mOmFt+OAgeS5kOinhuOAgULnq5njgIHlnJ/osYbjgIHmkJzni5DjgIExOTA1562JIFZJUOinhumikeWFjei0ueeciygyMDIwLjAyLjE5KeabtOaWsAovLyBAbmFtZTplbiAgICAgIFt0aW1lcmRdW0xvc3QgaW4gUnVzc2lhXSBWSVAgVmlkZW8gdGVuY2VudCwgaXFpeWksIG1ndHYsIHlvdWt1LCBCbGliaWxpLCBzb2h1LCB0dWRvdSAoMjAyMC4wMi4xOSkKLy8gQG5hbWU6emgtQ04gICBbdGltZXJkXVvlm6flpohd6IW+6K6v44CB54ix5aWH6Im644CB6IqS5p6c44CB5LyY6YW344CB5LmQ6KeG44CBQuermeOAgeWcn+ixhuOAgeaQnOeLkOOAgTE5MDXnrYkgVklQ6KeG6aKR5YWN6LS555yLKDIwMjAuMDIuMTkp5pu05pawCi8vIEBuYW1lc3BhY2UgICAgaHR0cDovL3RpbWVyZC5tbAovLyBAdmVyc2lvbiAgICAgIDIwMjAuMDIuMTkKLy8gQGRlc2NyaXB0aW9uICDohb7orq/jgIHniLHlpYfoibrjgIHoipLmnpzjgIHkvJjphbfjgIHkuZDop4bjgIFC56uZ44CB5Zyf6LGG44CB5pCc54uQ44CBMTkwNeetieWQhOWkp+inhumikee9keermeinhumikeino+aekOacjeWKoSjmnInosLfmrYxhZHMpCi8vIEBkZXNjcmlwdGlvbjplbiAgdGVuY2VudCwgaXFpeWksIG1ndHYsIHlvdWt1LCBsZXR2LCBCaWxpYmlsaSwgc29odSwgdHVkb3UsIDE5MDUoQ29udGFpbmluZyBnb29nbGUgYWRzKQovLyBAZGVzY3JpcHRpb246emgtQ04gIOiFvuiur+OAgeeIseWlh+iJuuOAgeiKkuaenOOAgeS8mOmFt+OAgeS5kOinhuOAgULnq5njgIHlnJ/osYbjgIHmkJzni5DjgIHmmrTpo47jgIExOTA1562J5ZCE5aSn6KeG6aKR572R56uZ6KeG6aKR6Kej5p6Q5pyN5YqhKOacieiwt+atjGFkcykKLy8gQGF1dGhvciAgICAgICB0aW1lcmQKLy8gQGluY2x1ZGUgICAgICAqOi8vdi55b3VrdS5jb20vdl8qCi8vIEBpbmNsdWRlICAgICAgKjovL20ueW91a3UuY29tL3YqCi8vIEBpbmNsdWRlICAgICAgKjovL20ueW91a3UuY29tL2EqCi8vIEBpbmNsdWRlICAgICAgKjovLyouaXFpeWkuY29tL3ZfKgovLyBAaW5jbHVkZSAgICAgICo6Ly8qLmlxaXlpLmNvbS93XyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKi5pcWl5aS5jb20vYV8qCi8vIEBpbmNsdWRlICAgICAgKjovLyouaXFpeWkuY29tL2RpYW55aW5nLyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKi5sZS5jb20vcHR2L3ZwbGF5LyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKnYucXEuY29tL3gvY292ZXIvKgovLyBAaW5jbHVkZSAgICAgICo6Ly8qdi5xcS5jb20veC9wYWdlLyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKnYucXEuY29tL3BsYXkqCi8vIEBpbmNsdWRlICAgICAgKjovLyp2LnFxLmNvbS9jb3ZlcioKLy8gQGluY2x1ZGUgICAgICAqOi8vKi50dWRvdS5jb20vbGlzdHBsYXkvKgovLyBAaW5jbHVkZSAgICAgICo6Ly8qLnR1ZG91LmNvbS9hbGJ1bXBsYXkvKgovLyBAaW5jbHVkZSAgICAgICo6Ly8qLnR1ZG91LmNvbS9wcm9ncmFtcy92aWV3LyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKi50dWRvdS5jb20vdioKLy8gQGluY2x1ZGUgICAgICAqOi8vKi5tZ3R2LmNvbS9iLyoKLy8gQGluY2x1ZGUgICAgICAqOi8vZmlsbS5zb2h1LmNvbS9hbGJ1bS8qCi8vIEBpbmNsdWRlICAgICAgKjovL3R2LnNvaHUuY29tLyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKi5iaWxpYmlsaS5jb20vdmlkZW8vKgovLyBAaW5jbHVkZSAgICAgICo6Ly8qLmJpbGliaWxpLmNvbS9hbmltZS8qCi8vIEBpbmNsdWRlICAgICAgKjovLyouYmlsaWJpbGkuY29tL2Jhbmd1bWkvcGxheS8qCi8vIEBpbmNsdWRlICAgICAgKjovLyoucHB0di5jb20vc2hvdy8qCi8vIEBpbmNsdWRlICAgICAgKjovLyoud2FzdS5jbi9QbGF5L3Nob3cqCi8vIEBpbmNsdWRlICAgICAgKjovLyouMTkwNS5jb20vcGxheS8qCi8vIEBpbmNsdWRlICAgICAgKjovL2NoaW5lc2UtZWxlbWVudHMuY29tLyoKLy8gQHJlcXVpcmUgICAgICBodHRwOi8vY2RuLmJvb3Rjc3MuY29tL2pxdWVyeS8xLjEyLjQvanF1ZXJ5Lm1pbi5qcwovLyBAZ3JhbnQgICAgICAgIEdNX29wZW5JblRhYgovLyBAZ3JhbnQgICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgICAgIEdNX2FkZFN0eWxlCi8vIEBncmFudCAgICAgICAgdW5zYWZlV2luZG93Ci8vIEBncmFudCAgICAgICAgR01fZ2V0UmVzb3VyY2VVUkwKLy8gQGdyYW50ICAgICAgICBHTV9nZXRSZXNvdXJjZVRleHQKLy8gQGxpY2Vuc2UgICAgICBNSVQyLjAKLy8gPT0vVXNlclNjcmlwdD09CihmdW5jdGlvbigpIHsKCiAgICAndXNlIHN0cmljdCcKICAgIC8vIERlZmluZSByZWdpb24KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gYWRkSW5mcmFzdHJ1Y3R1cmUoKSB7CiAgICAgICAgbGV0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKCiAgICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYAogICAgICAgICNteXdpZGdldCB7CiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgYW5pbWF0aW9uOiBteXdpZGdldF9hbmkgMnMgMTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICAgICAgICB9CgogICAgICAgICNteXdpZGdldCBhIHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICBsZWZ0OiAtNzVweDsKICAgICAgICAgICAgdHJhbnNpdGlvbjogMC4zczsKICAgICAgICAgICAgcGFkZGluZzogMTVweCAzMHB4IDE1cHggMTVweDsKICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogICAgICAgICAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4OwogICAgICAgICAgICBmb250OiAyMHB4ICJNaWNyb3NvZnQgWWFIZWkiLCBTaW1IZWksIGhlbHZldGljYSwgYXJpYWwsIHZlcmRhbmEsIHRhaG9tYSwgc2Fucy1zZXJpZjsKICAgICAgICAgICAgbWluLXdpZHRoOiA4MHB4OwogICAgICAgICAgICB0ZXh0LWFsaWduOiByaWdodDsKICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgICB9CgoKICAgICAgICAjbXl3aWRnZXQgYTpob3ZlciB7CiAgICAgICAgICAgIGxlZnQ6IC04cHg7CiAgICAgICAgfQoKICAgICAgICAjdnBhcnNlIHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2Y0NDMzNjsKICAgICAgICB9CgogICAgICAgICNteXBsYXlidXR0b24gewogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgIHJpZ2h0OiAtOHB4OwogICAgICAgICAgICB0b3A6IDE0cHg7CiAgICAgICAgICAgIHdpZHRoOiAwcHg7CiAgICAgICAgICAgIGhlaWdodDogMHB4OwogICAgICAgICAgICBtYXJnaW46IDBweDsKICAgICAgICAgICAgYm9yZGVyLXdpZHRoOiAxNnB4OwogICAgICAgICAgICBib3JkZXItc3R5bGU6IHNvbGlkOwogICAgICAgICAgICBib3JkZXItY29sb3I6IHRyYW5zcGFyZW50IHRyYW5zcGFyZW50IHRyYW5zcGFyZW50IHdoaXRlOwogICAgICAgIH0KCgogICAgICAgIEBrZXlmcmFtZXMgbXl3aWRnZXRfYW5pIHsKICAgICAgICAgICAgMCUgewogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7CiAgICAgICAgICAgICAgICBsZWZ0OiAyMHB4OwogICAgICAgICAgICB9CgogICAgICAgICAgICA1MCUgewogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoOGRlZyk7CiAgICAgICAgICAgICAgICBsZWZ0OiA1MDBweDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgMTAwJSB7CiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgtMzYwZGVnKTsKICAgICAgICAgICAgICAgIGxlZnQ6IDBweDsKICAgICAgICAgICAgfQogICAgICAgIH1gKSk7CgogICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyaWNrcygpIHsKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIGlmICh+ZXZlbnQub3JpZ2luLmluZGV4T2YoJ2NoaW5lc2UtZWxlbWVudHMuY29tJykpIHsKICAgICAgICAgICAgICAgIHZhciBpbnRlcnZhbElkID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICQoIiNhc2lkZS1uYXYiKS5oaWRlKCk7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCkKICAgICAgICAgICAgICAgIH0sIDEwMDAgKiAyKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGNvbnN0IGltID0gL2NoaW5lc2UtZWxlbWVudHMuY29tL2k7CiAgICAgICAgaWYgKGltLnRlc3Qoc2VsZi5sb2NhdGlvbi5ocmVmKSkgewogICAgICAgICAgICB2YXIgaW50ZXJ2YWxJZCA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICQoIiNhc2lkZS1uYXYiKS5oaWRlKCk7CiAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBsYXllciIpOwogICAgICAgICAgICAgICAgICAgIGlmIChmcmFtZSAmJiBmcmFtZS5oYXNPd25Qcm9wZXJ0eSgnY29udGVudFdpbmRvdycpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZnJhbWVXaW5kb3cgPSBmcmFtZS5jb250ZW50V2luZG93OwogICAgICAgICAgICAgICAgICAgICAgICBpZnJhbWVXaW5kb3cucG9zdE1lc3NhZ2UoInRyaWNrcyIsICIqIik7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgMTAwMCAqIDIpOwogICAgICAgIH0KICAgIH0KCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGxldCBwbGF5dXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7CiAgICBsZXQgckFycmF5ID0gcGxheXVybC5zcGxpdCgnPycpOwogICAgbGV0IGNXZWIgPSByQXJyYXlbMF07CiAgICBjb25zdCB2U2l0ZSA9IC9tMTkwNy5jbi9pOwogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgLy8gTGl0dGxlIHRyaWNrcwogICAgdHJpY2tzKCk7CiAgICBpZiAodlNpdGUudGVzdChjV2ViKSkgewogICAgICAgIHdpbmRvd1siYWxlcnQiXSA9IGZ1bmN0aW9uKGUpIHt9OwogICAgICAgIHJldHVybjsKICAgIH0KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgLy9hZGQgYSBidXR0b24gdG8gY3VycmVudCB3ZWJzaXRlLgogICAgY29uc3QgdldlYnNpdGVzID0gbmV3IEFycmF5KCk7CiAgICB2V2Vic2l0ZXNbMF0gPSAveW91a3UuY29tL2k7CiAgICB2V2Vic2l0ZXNbMV0gPSAvaXFpeWkuY29tL2k7CiAgICB2V2Vic2l0ZXNbMl0gPSAvbGUuY29tL2k7CiAgICB2V2Vic2l0ZXNbM10gPSAvcXEuY29tL2k7CiAgICB2V2Vic2l0ZXNbNF0gPSAvdHVkb3UuY29tL2k7CiAgICB2V2Vic2l0ZXNbNV0gPSAvbWd0di5jb20vaTsKICAgIHZXZWJzaXRlc1s2XSA9IC9zb2h1LmNvbS9pOwogICAgdldlYnNpdGVzWzddID0gLzE5MDUuY29tL2k7CiAgICB2V2Vic2l0ZXNbOF0gPSAvYmlsaWJpbGkuY29tL2k7CiAgICB2V2Vic2l0ZXNbOV0gPSAvcHB0di5jb20vaTsKICAgIHZXZWJzaXRlc1sxMF0gPSAveWlueXVldGFpLmNvbS9pOwogICAgdldlYnNpdGVzWzExXSA9IC93YXN1LmNuL2k7CiAgICB2V2Vic2l0ZXMuZXZlcnkoKGl0ZW0pID0+IHsKICAgICAgICBpZiAoaXRlbS50ZXN0KGNXZWIpKSB7CiAgICAgICAgICAgIGFkZEluZnJhc3RydWN0dXJlKCk7CiAgICAgICAgICAgIHZhciBqdW1wQnV0dG9uID0gJChgCiAgICAgICAgICAgIDxkaXYgaWQ9Im15d2lkZ2V0IiBocmVmPSdqYXZhc2NyaXB0OnZvaWQoMCknIHRhcmdldD0nX2JsYW5rJyBzdHlsZT0iei1pbmRleDo5OTk5OyBwb3NpdGlvbjpmaXhlZDtsZWZ0OjBweDt0b3A6MjgwcHg7Ij4KICAgICAgICAgICAgICAgIDxhIGhyZWY9IiMiIGlkPSJ2cGFyc2UiPuKdgOinhumikeino+aekDxkaXYgaWQ9Im15cGxheWJ1dHRvbiI+PC9kaXY+PC9hPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYCk7CgogICAgICAgICAgICAkKCJib2R5IikuYXBwZW5kKGp1bXBCdXR0b24pOwoKICAgICAgICAgICAgLy8gYmluZCBvbmNsaWNrIGV2ZW50CiAgICAgICAgICAgICQoIiNteXdpZGdldCIpLmNsaWNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIG9wZW5VcmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsKICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKCdodHRwczovL3RpbWVyZC5tZS9zdGF0aWMvY3YuaHRtbD96d3g9JyArIG9wZW5VcmwpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0pOwoKfSkoKTsK","requires":[{"meta":{"name":"jquery.min.js","url":"http://cdn.bootcss.com/jquery/1.12.4/jquery.min.js","ts":1587235898709,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2MS4xMi40IHwgKGMpIGpRdWVyeSBGb3VuZGF0aW9uIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovCiFmdW5jdGlvbihhLGIpeyJvYmplY3QiPT10eXBlb2YgbW9kdWxlJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWEuZG9jdW1lbnQ/YihhLCEwKTpmdW5jdGlvbihhKXtpZighYS5kb2N1bWVudCl0aHJvdyBuZXcgRXJyb3IoImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnQiKTtyZXR1cm4gYihhKX06YihhKX0oInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXMsZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkPWEuZG9jdW1lbnQsZT1jLnNsaWNlLGY9Yy5jb25jYXQsZz1jLnB1c2gsaD1jLmluZGV4T2YsaT17fSxqPWkudG9TdHJpbmcsaz1pLmhhc093blByb3BlcnR5LGw9e30sbT0iMS4xMi40IixuPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBuLmZuLmluaXQoYSxiKX0sbz0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2cscD0vXi1tcy0vLHE9Ly0oW1xkYS16XSkvZ2kscj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O24uZm49bi5wcm90b3R5cGU9e2pxdWVyeTptLGNvbnN0cnVjdG9yOm4sc2VsZWN0b3I6IiIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBlLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT8wPmE/dGhpc1thK3RoaXMubGVuZ3RoXTp0aGlzW2FdOmUuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPW4ubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxiLmNvbnRleHQ9dGhpcy5jb250ZXh0LGJ9LGVhY2g6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZWFjaCh0aGlzLGEpfSxtYXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4ubWFwKHRoaXMsZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5jYWxsKGIsYyxiKX0pKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKDApfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoLTEpfSxlcTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxlbmd0aCxjPSthKygwPmE/YjowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soYz49MCYmYj5jP1t0aGlzW2NdXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IoKX0scHVzaDpnLHNvcnQ6Yy5zb3J0LHNwbGljZTpjLnNwbGljZX0sbi5leHRlbmQ9bi5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZz1hcmd1bWVudHNbMF18fHt9LGg9MSxpPWFyZ3VtZW50cy5sZW5ndGgsaj0hMTtmb3IoImJvb2xlYW4iPT10eXBlb2YgZyYmKGo9ZyxnPWFyZ3VtZW50c1toXXx8e30saCsrKSwib2JqZWN0Ij09dHlwZW9mIGd8fG4uaXNGdW5jdGlvbihnKXx8KGc9e30pLGg9PT1pJiYoZz10aGlzLGgtLSk7aT5oO2grKylpZihudWxsIT0oZT1hcmd1bWVudHNbaF0pKWZvcihkIGluIGUpYT1nW2RdLGM9ZVtkXSxnIT09YyYmKGomJmMmJihuLmlzUGxhaW5PYmplY3QoYyl8fChiPW4uaXNBcnJheShjKSkpPyhiPyhiPSExLGY9YSYmbi5pc0FycmF5KGEpP2E6W10pOmY9YSYmbi5pc1BsYWluT2JqZWN0KGEpP2E6e30sZ1tkXT1uLmV4dGVuZChqLGYsYykpOnZvaWQgMCE9PWMmJihnW2RdPWMpKTtyZXR1cm4gZ30sbi5leHRlbmQoe2V4cGFuZG86ImpRdWVyeSIrKG0rTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXEQvZywiIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuImZ1bmN0aW9uIj09PW4udHlwZShhKX0saXNBcnJheTpBcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4iYXJyYXkiPT09bi50eXBlKGEpfSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmYT09YS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihhKXt2YXIgYj1hJiZhLnRvU3RyaW5nKCk7cmV0dXJuIW4uaXNBcnJheShhKSYmYi1wYXJzZUZsb2F0KGIpKzE+PTB9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtpZighYXx8Im9iamVjdCIhPT1uLnR5cGUoYSl8fGEubm9kZVR5cGV8fG4uaXNXaW5kb3coYSkpcmV0dXJuITE7dHJ5e2lmKGEuY29uc3RydWN0b3ImJiFrLmNhbGwoYSwiY29uc3RydWN0b3IiKSYmIWsuY2FsbChhLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpKXJldHVybiExfWNhdGNoKGMpe3JldHVybiExfWlmKCFsLm93bkZpcnN0KWZvcihiIGluIGEpcmV0dXJuIGsuY2FsbChhLGIpO2ZvcihiIGluIGEpO3JldHVybiB2b2lkIDA9PT1ifHxrLmNhbGwoYSxiKX0sdHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9hKyIiOiJvYmplY3QiPT10eXBlb2YgYXx8ImZ1bmN0aW9uIj09dHlwZW9mIGE/aVtqLmNhbGwoYSldfHwib2JqZWN0Ijp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihiKXtiJiZuLnRyaW0oYikmJihhLmV4ZWNTY3JpcHR8fGZ1bmN0aW9uKGIpe2EuZXZhbC5jYWxsKGEsYil9KShiKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UocCwibXMtIikucmVwbGFjZShxLHIpfSxub2RlTmFtZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1iLnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTA7aWYocyhhKSl7Zm9yKGM9YS5sZW5ndGg7Yz5kO2QrKylpZihiLmNhbGwoYVtkXSxkLGFbZF0pPT09ITEpYnJlYWt9ZWxzZSBmb3IoZCBpbiBhKWlmKGIuY2FsbChhW2RdLGQsYVtkXSk9PT0hMSlicmVhaztyZXR1cm4gYX0sdHJpbTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT8iIjooYSsiIikucmVwbGFjZShvLCIiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8W107cmV0dXJuIG51bGwhPWEmJihzKE9iamVjdChhKSk/bi5tZXJnZShjLCJzdHJpbmciPT10eXBlb2YgYT9bYV06YSk6Zy5jYWxsKGMsYSkpLGN9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2lmKGIpe2lmKGgpcmV0dXJuIGguY2FsbChiLGEsYyk7Zm9yKGQ9Yi5sZW5ndGgsYz1jPzA+Yz9NYXRoLm1heCgwLGQrYyk6YzowO2Q+YztjKyspaWYoYyBpbiBiJiZiW2NdPT09YSlyZXR1cm4gY31yZXR1cm4tMX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz0rYi5sZW5ndGgsZD0wLGU9YS5sZW5ndGg7d2hpbGUoYz5kKWFbZSsrXT1iW2QrK107aWYoYyE9PWMpd2hpbGUodm9pZCAwIT09YltkXSlhW2UrK109YltkKytdO3JldHVybiBhLmxlbmd0aD1lLGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCxlPVtdLGY9MCxnPWEubGVuZ3RoLGg9IWM7Zz5mO2YrKylkPSFiKGFbZl0sZiksZCE9PWgmJmUucHVzaChhW2ZdKTtyZXR1cm4gZX0sbWFwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGc9MCxoPVtdO2lmKHMoYSkpZm9yKGQ9YS5sZW5ndGg7ZD5nO2crKyllPWIoYVtnXSxnLGMpLG51bGwhPWUmJmgucHVzaChlKTtlbHNlIGZvcihnIGluIGEpZT1iKGFbZ10sZyxjKSxudWxsIT1lJiZoLnB1c2goZSk7cmV0dXJuIGYuYXBwbHkoW10saCl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZjtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGImJihmPWFbYl0sYj1hLGE9Ziksbi5pc0Z1bmN0aW9uKGEpPyhjPWUuY2FsbChhcmd1bWVudHMsMiksZD1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsYy5jb25jYXQoZS5jYWxsKGFyZ3VtZW50cykpKX0sZC5ndWlkPWEuZ3VpZD1hLmd1aWR8fG4uZ3VpZCsrLGQpOnZvaWQgMH0sbm93OmZ1bmN0aW9uKCl7cmV0dXJuK25ldyBEYXRlfSxzdXBwb3J0Omx9KSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYobi5mbltTeW1ib2wuaXRlcmF0b3JdPWNbU3ltYm9sLml0ZXJhdG9yXSksbi5lYWNoKCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbCIuc3BsaXQoIiAiKSxmdW5jdGlvbihhLGIpe2lbIltvYmplY3QgIitiKyJdIl09Yi50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gcyhhKXt2YXIgYj0hIWEmJiJsZW5ndGgiaW4gYSYmYS5sZW5ndGgsYz1uLnR5cGUoYSk7cmV0dXJuImZ1bmN0aW9uIj09PWN8fG4uaXNXaW5kb3coYSk/ITE6ImFycmF5Ij09PWN8fDA9PT1ifHwibnVtYmVyIj09dHlwZW9mIGImJmI+MCYmYi0xIGluIGF9dmFyIHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdT0ic2l6emxlIisxKm5ldyBEYXRlLHY9YS5kb2N1bWVudCx3PTAseD0wLHk9Z2EoKSx6PWdhKCksQT1nYSgpLEI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWImJihsPSEwKSwwfSxDPTE8PDMxLEQ9e30uaGFzT3duUHJvcGVydHksRT1bXSxGPUUucG9wLEc9RS5wdXNoLEg9RS5wdXNoLEk9RS5zbGljZSxKPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKWlmKGFbY109PT1iKXJldHVybiBjO3JldHVybi0xfSxLPSJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZCIsTD0iW1xceDIwXFx0XFxyXFxuXFxmXSIsTT0iKD86XFxcXC58W1xcdy1dfFteXFx4MDAtXFx4YTBdKSsiLE49IlxcWyIrTCsiKigiK00rIikoPzoiK0wrIiooWypeJHwhfl0/PSkiK0wrIiooPzonKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcInwoIitNKyIpKXwpIitMKyIqXFxdIixPPSI6KCIrTSsiKSg/OlxcKCgoJygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCIpfCgoPzpcXFxcLnxbXlxcXFwoKVtcXF1dfCIrTisiKSopfC4qKVxcKXwpIixQPW5ldyBSZWdFeHAoTCsiKyIsImciKSxRPW5ldyBSZWdFeHAoIl4iK0wrIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIrTCsiKyQiLCJnIiksUj1uZXcgUmVnRXhwKCJeIitMKyIqLCIrTCsiKiIpLFM9bmV3IFJlZ0V4cCgiXiIrTCsiKihbPit+XXwiK0wrIikiK0wrIioiKSxUPW5ldyBSZWdFeHAoIj0iK0wrIiooW15cXF0nXCJdKj8pIitMKyIqXFxdIiwiZyIpLFU9bmV3IFJlZ0V4cChPKSxWPW5ldyBSZWdFeHAoIl4iK00rIiQiKSxXPXtJRDpuZXcgUmVnRXhwKCJeIygiK00rIikiKSxDTEFTUzpuZXcgUmVnRXhwKCJeXFwuKCIrTSsiKSIpLFRBRzpuZXcgUmVnRXhwKCJeKCIrTSsifFsqXSkiKSxBVFRSOm5ldyBSZWdFeHAoIl4iK04pLFBTRVVETzpuZXcgUmVnRXhwKCJeIitPKSxDSElMRDpuZXcgUmVnRXhwKCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiK0wrIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK0wrIiooPzooWystXXwpIitMKyIqKFxcZCspfCkpIitMKyIqXFwpfCkiLCJpIiksYm9vbDpuZXcgUmVnRXhwKCJeKD86IitLKyIpJCIsImkiKSxuZWVkc0NvbnRleHQ6bmV3IFJlZ0V4cCgiXiIrTCsiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFwoIitMKyIqKCg/Oi1cXGQpP1xcZCopIitMKyIqXFwpfCkoPz1bXi1dfCQpIiwiaSIpfSxYPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksWT0vXmhcZCQvaSxaPS9eW157XStce1xzKlxbbmF0aXZlIFx3LywkPS9eKD86IyhbXHctXSspfChcdyspfFwuKFtcdy1dKykpJC8sXz0vWyt+XS8sYWE9Lyd8XFwvZyxiYT1uZXcgUmVnRXhwKCJcXFxcKFtcXGRhLWZdezEsNn0iK0wrIj98KCIrTCsiKXwuKSIsImlnIiksY2E9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSIweCIrYi02NTUzNjtyZXR1cm4gZCE9PWR8fGM/YjowPmQ/U3RyaW5nLmZyb21DaGFyQ29kZShkKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQ+PjEwfDU1Mjk2LDEwMjMmZHw1NjMyMCl9LGRhPWZ1bmN0aW9uKCl7bSgpfTt0cnl7SC5hcHBseShFPUkuY2FsbCh2LmNoaWxkTm9kZXMpLHYuY2hpbGROb2RlcyksRVt2LmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChlYSl7SD17YXBwbHk6RS5sZW5ndGg/ZnVuY3Rpb24oYSxiKXtHLmFwcGx5KGEsSS5jYWxsKGIpKX06ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxlbmd0aCxkPTA7d2hpbGUoYVtjKytdPWJbZCsrXSk7YS5sZW5ndGg9Yy0xfX19ZnVuY3Rpb24gZmEoYSxiLGQsZSl7dmFyIGYsaCxqLGssbCxvLHIscyx3PWImJmIub3duZXJEb2N1bWVudCx4PWI/Yi5ub2RlVHlwZTo5O2lmKGQ9ZHx8W10sInN0cmluZyIhPXR5cGVvZiBhfHwhYXx8MSE9PXgmJjkhPT14JiYxMSE9PXgpcmV0dXJuIGQ7aWYoIWUmJigoYj9iLm93bmVyRG9jdW1lbnR8fGI6dikhPT1uJiZtKGIpLGI9Ynx8bixwKSl7aWYoMTEhPT14JiYobz0kLmV4ZWMoYSkpKWlmKGY9b1sxXSl7aWYoOT09PXgpe2lmKCEoaj1iLmdldEVsZW1lbnRCeUlkKGYpKSlyZXR1cm4gZDtpZihqLmlkPT09ZilyZXR1cm4gZC5wdXNoKGopLGR9ZWxzZSBpZih3JiYoaj13LmdldEVsZW1lbnRCeUlkKGYpKSYmdChiLGopJiZqLmlkPT09ZilyZXR1cm4gZC5wdXNoKGopLGR9ZWxzZXtpZihvWzJdKXJldHVybiBILmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKSksZDtpZigoZj1vWzNdKSYmYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEguYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZikpLGR9aWYoYy5xc2EmJiFBW2ErIiAiXSYmKCFxfHwhcS50ZXN0KGEpKSl7aWYoMSE9PXgpdz1iLHM9YTtlbHNlIGlmKCJvYmplY3QiIT09Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXsoaz1iLmdldEF0dHJpYnV0ZSgiaWQiKSk/az1rLnJlcGxhY2UoYWEsIlxcJCYiKTpiLnNldEF0dHJpYnV0ZSgiaWQiLGs9dSkscj1nKGEpLGg9ci5sZW5ndGgsbD1WLnRlc3Qoayk/IiMiK2s6IltpZD0nIitrKyInXSI7d2hpbGUoaC0tKXJbaF09bCsiICIrcWEocltoXSk7cz1yLmpvaW4oIiwiKSx3PV8udGVzdChhKSYmb2EoYi5wYXJlbnROb2RlKXx8Yn1pZihzKXRyeXtyZXR1cm4gSC5hcHBseShkLHcucXVlcnlTZWxlY3RvckFsbChzKSksZH1jYXRjaCh5KXt9ZmluYWxseXtrPT09dSYmYi5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fX1yZXR1cm4gaShhLnJlcGxhY2UoUSwiJDEiKSxiLGQsZSl9ZnVuY3Rpb24gZ2EoKXt2YXIgYT1bXTtmdW5jdGlvbiBiKGMsZSl7cmV0dXJuIGEucHVzaChjKyIgIik+ZC5jYWNoZUxlbmd0aCYmZGVsZXRlIGJbYS5zaGlmdCgpXSxiW2MrIiAiXT1lfXJldHVybiBifWZ1bmN0aW9uIGhhKGEpe3JldHVybiBhW3VdPSEwLGF9ZnVuY3Rpb24gaWEoYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KCJkaXYiKTt0cnl7cmV0dXJuISFhKGIpfWNhdGNoKGMpe3JldHVybiExfWZpbmFsbHl7Yi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYj1udWxsfX1mdW5jdGlvbiBqYShhLGIpe3ZhciBjPWEuc3BsaXQoInwiKSxlPWMubGVuZ3RoO3doaWxlKGUtLSlkLmF0dHJIYW5kbGVbY1tlXV09Yn1mdW5jdGlvbiBrYShhLGIpe3ZhciBjPWImJmEsZD1jJiYxPT09YS5ub2RlVHlwZSYmMT09PWIubm9kZVR5cGUmJih+Yi5zb3VyY2VJbmRleHx8QyktKH5hLnNvdXJjZUluZGV4fHxDKTtpZihkKXJldHVybiBkO2lmKGMpd2hpbGUoYz1jLm5leHRTaWJsaW5nKWlmKGM9PT1iKXJldHVybi0xO3JldHVybiBhPzE6LTF9ZnVuY3Rpb24gbGEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YyYmYi50eXBlPT09YX19ZnVuY3Rpb24gbWEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oImlucHV0Ij09PWN8fCJidXR0b24iPT09YykmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG5hKGEpe3JldHVybiBoYShmdW5jdGlvbihiKXtyZXR1cm4gYj0rYixoYShmdW5jdGlvbihjLGQpe3ZhciBlLGY9YShbXSxjLmxlbmd0aCxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSljW2U9ZltnXV0mJihjW2VdPSEoZFtlXT1jW2VdKSl9KX0pfWZ1bmN0aW9uIG9hKGEpe3JldHVybiBhJiYidW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmF9Yz1mYS5zdXBwb3J0PXt9LGY9ZmEuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBiPyJIVE1MIiE9PWIubm9kZU5hbWU6ITF9LG09ZmEuc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZSxnPWE/YS5vd25lckRvY3VtZW50fHxhOnY7cmV0dXJuIGchPT1uJiY5PT09Zy5ub2RlVHlwZSYmZy5kb2N1bWVudEVsZW1lbnQ/KG49ZyxvPW4uZG9jdW1lbnRFbGVtZW50LHA9IWYobiksKGU9bi5kZWZhdWx0VmlldykmJmUudG9wIT09ZSYmKGUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsZGEsITEpOmUuYXR0YWNoRXZlbnQmJmUuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixkYSkpLGMuYXR0cmlidXRlcz1pYShmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9ImkiLCFhLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxjLmdldEVsZW1lbnRzQnlUYWdOYW1lPWlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGVuZENoaWxkKG4uY3JlYXRlQ29tbWVudCgiIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPVoudGVzdChuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGMuZ2V0QnlJZD1pYShmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFuLmdldEVsZW1lbnRzQnlOYW1lfHwhbi5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50QnlJZCYmcCl7dmFyIGM9Yi5nZXRFbGVtZW50QnlJZChhKTtyZXR1cm4gYz9bY106W119fSxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoYmEsY2EpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoImlkIik9PT1ifX0pOihkZWxldGUgZC5maW5kLklELGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBjPSJ1bmRlZmluZWQiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGVOb2RlJiZhLmdldEF0dHJpYnV0ZU5vZGUoImlkIik7cmV0dXJuIGMmJmMudmFsdWU9PT1ifX0pLGQuZmluZC5UQUc9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZT9iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpOmMucXNhP2IucXVlcnlTZWxlY3RvckFsbChhKTp2b2lkIDB9OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPTAsZj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKCIqIj09PWEpe3doaWxlKGM9ZltlKytdKTE9PT1jLm5vZGVUeXBlJiZkLnB1c2goYyk7cmV0dXJuIGR9cmV0dXJuIGZ9LGQuZmluZC5DTEFTUz1jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJnA/Yi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGEpOnZvaWQgMH0scj1bXSxxPVtdLChjLnFzYT1aLnRlc3Qobi5xdWVyeVNlbGVjdG9yQWxsKSkmJihpYShmdW5jdGlvbihhKXtvLmFwcGVuZENoaWxkKGEpLmlubmVySFRNTD0iPGEgaWQ9JyIrdSsiJz48L2E+PHNlbGVjdCBpZD0nIit1KyItXHJcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iLGEucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djYXB0dXJlXj0nJ10iKS5sZW5ndGgmJnEucHVzaCgiWypeJF09IitMKyIqKD86Jyd8XCJcIikiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fHEucHVzaCgiXFxbIitMKyIqKD86dmFsdWV8IitLKyIpIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJbaWR+PSIrdSsiLV0iKS5sZW5ndGh8fHEucHVzaCgifj0iKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RofHxxLnB1c2goIjpjaGVja2VkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJhIyIrdSsiKyoiKS5sZW5ndGh8fHEucHVzaCgiLiMuK1srfl0iKX0pLGlhKGZ1bmN0aW9uKGEpe3ZhciBiPW4uY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImhpZGRlbiIpLGEuYXBwZW5kQ2hpbGQoYikuc2V0QXR0cmlidXRlKCJuYW1lIiwiRCIpLGEucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGgmJnEucHVzaCgibmFtZSIrTCsiKlsqXiR8IX5dPz0iKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RofHxxLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IikscS5wdXNoKCIsLio6Iil9KSksKGMubWF0Y2hlc1NlbGVjdG9yPVoudGVzdChzPW8ubWF0Y2hlc3x8by53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG8ubW96TWF0Y2hlc1NlbGVjdG9yfHxvLm9NYXRjaGVzU2VsZWN0b3J8fG8ubXNNYXRjaGVzU2VsZWN0b3IpKSYmaWEoZnVuY3Rpb24oYSl7Yy5kaXNjb25uZWN0ZWRNYXRjaD1zLmNhbGwoYSwiZGl2Iikscy5jYWxsKGEsIltzIT0nJ106eCIpLHIucHVzaCgiIT0iLE8pfSkscT1xLmxlbmd0aCYmbmV3IFJlZ0V4cChxLmpvaW4oInwiKSkscj1yLmxlbmd0aCYmbmV3IFJlZ0V4cChyLmpvaW4oInwiKSksYj1aLnRlc3Qoby5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiksdD1ifHxaLnRlc3Qoby5jb250YWlucyk/ZnVuY3Rpb24oYSxiKXt2YXIgYz05PT09YS5ub2RlVHlwZT9hLmRvY3VtZW50RWxlbWVudDphLGQ9YiYmYi5wYXJlbnROb2RlO3JldHVybiBhPT09ZHx8ISghZHx8MSE9PWQubm9kZVR5cGV8fCEoYy5jb250YWlucz9jLmNvbnRhaW5zKGQpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZCkpKX06ZnVuY3Rpb24oYSxiKXtpZihiKXdoaWxlKGI9Yi5wYXJlbnROb2RlKWlmKGI9PT1hKXJldHVybiEwO3JldHVybiExfSxCPWI/ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBkPSFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBkP2Q6KGQ9KGEub3duZXJEb2N1bWVudHx8YSk9PT0oYi5vd25lckRvY3VtZW50fHxiKT9hLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGIpOjEsMSZkfHwhYy5zb3J0RGV0YWNoZWQmJmIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYSk9PT1kP2E9PT1ufHxhLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYSk/LTE6Yj09PW58fGIub3duZXJEb2N1bWVudD09PXYmJnQodixiKT8xOms/SihrLGEpLUooayxiKTowOjQmZD8tMToxKX06ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBjLGQ9MCxlPWEucGFyZW50Tm9kZSxmPWIucGFyZW50Tm9kZSxnPVthXSxoPVtiXTtpZighZXx8IWYpcmV0dXJuIGE9PT1uPy0xOmI9PT1uPzE6ZT8tMTpmPzE6az9KKGssYSktSihrLGIpOjA7aWYoZT09PWYpcmV0dXJuIGthKGEsYik7Yz1hO3doaWxlKGM9Yy5wYXJlbnROb2RlKWcudW5zaGlmdChjKTtjPWI7d2hpbGUoYz1jLnBhcmVudE5vZGUpaC51bnNoaWZ0KGMpO3doaWxlKGdbZF09PT1oW2RdKWQrKztyZXR1cm4gZD9rYShnW2RdLGhbZF0pOmdbZF09PT12Py0xOmhbZF09PT12PzE6MH0sbik6bn0sZmEubWF0Y2hlcz1mdW5jdGlvbihhLGIpe3JldHVybiBmYShhLG51bGwsbnVsbCxiKX0sZmEubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGEsYil7aWYoKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLGI9Yi5yZXBsYWNlKFQsIj0nJDEnXSIpLGMubWF0Y2hlc1NlbGVjdG9yJiZwJiYhQVtiKyIgIl0mJighcnx8IXIudGVzdChiKSkmJighcXx8IXEudGVzdChiKSkpdHJ5e3ZhciBkPXMuY2FsbChhLGIpO2lmKGR8fGMuZGlzY29ubmVjdGVkTWF0Y2h8fGEuZG9jdW1lbnQmJjExIT09YS5kb2N1bWVudC5ub2RlVHlwZSlyZXR1cm4gZH1jYXRjaChlKXt9cmV0dXJuIGZhKGIsbixudWxsLFthXSkubGVuZ3RoPjB9LGZhLmNvbnRhaW5zPWZ1bmN0aW9uKGEsYil7cmV0dXJuKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLHQoYSxiKX0sZmEuYXR0cj1mdW5jdGlvbihhLGIpeyhhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKTt2YXIgZT1kLmF0dHJIYW5kbGVbYi50b0xvd2VyQ2FzZSgpXSxmPWUmJkQuY2FsbChkLmF0dHJIYW5kbGUsYi50b0xvd2VyQ2FzZSgpKT9lKGEsYiwhcCk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1mP2Y6Yy5hdHRyaWJ1dGVzfHwhcD9hLmdldEF0dHJpYnV0ZShiKTooZj1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZmLnNwZWNpZmllZD9mLnZhbHVlOm51bGx9LGZhLmVycm9yPWZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIithKX0sZmEudW5pcXVlU29ydD1mdW5jdGlvbihhKXt2YXIgYixkPVtdLGU9MCxmPTA7aWYobD0hYy5kZXRlY3REdXBsaWNhdGVzLGs9IWMuc29ydFN0YWJsZSYmYS5zbGljZSgwKSxhLnNvcnQoQiksbCl7d2hpbGUoYj1hW2YrK10pYj09PWFbZl0mJihlPWQucHVzaChmKSk7d2hpbGUoZS0tKWEuc3BsaWNlKGRbZV0sMSl9cmV0dXJuIGs9bnVsbCxhfSxlPWZhLmdldFRleHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz0iIixkPTAsZj1hLm5vZGVUeXBlO2lmKGYpe2lmKDE9PT1mfHw5PT09Znx8MTE9PT1mKXtpZigic3RyaW5nIj09dHlwZW9mIGEudGV4dENvbnRlbnQpcmV0dXJuIGEudGV4dENvbnRlbnQ7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWMrPWUoYSl9ZWxzZSBpZigzPT09Znx8ND09PWYpcmV0dXJuIGEubm9kZVZhbHVlfWVsc2Ugd2hpbGUoYj1hW2QrK10pYys9ZShiKTtyZXR1cm4gY30sZD1mYS5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpoYSxtYXRjaDpXLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7Ij4iOntkaXI6InBhcmVudE5vZGUiLGZpcnN0OiEwfSwiICI6e2RpcjoicGFyZW50Tm9kZSJ9LCIrIjp7ZGlyOiJwcmV2aW91c1NpYmxpbmciLGZpcnN0OiEwfSwifiI6e2RpcjoicHJldmlvdXNTaWJsaW5nIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnJlcGxhY2UoYmEsY2EpLGFbM109KGFbM118fGFbNF18fGFbNV18fCIiKS5yZXBsYWNlKGJhLGNhKSwifj0iPT09YVsyXSYmKGFbM109IiAiK2FbM10rIiAiKSxhLnNsaWNlKDAsNCl9LENISUxEOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0udG9Mb3dlckNhc2UoKSwibnRoIj09PWFbMV0uc2xpY2UoMCwzKT8oYVszXXx8ZmEuZXJyb3IoYVswXSksYVs0XT0rKGFbNF0/YVs1XSsoYVs2XXx8MSk6MiooImV2ZW4iPT09YVszXXx8Im9kZCI9PT1hWzNdKSksYVs1XT0rKGFbN10rYVs4XXx8Im9kZCI9PT1hWzNdKSk6YVszXSYmZmEuZXJyb3IoYVswXSksYX0sUFNFVURPOmZ1bmN0aW9uKGEpe3ZhciBiLGM9IWFbNl0mJmFbMl07cmV0dXJuIFcuQ0hJTEQudGVzdChhWzBdKT9udWxsOihhWzNdP2FbMl09YVs0XXx8YVs1XXx8IiI6YyYmVS50ZXN0KGMpJiYoYj1nKGMsITApKSYmKGI9Yy5pbmRleE9mKCIpIixjLmxlbmd0aC1iKS1jLmxlbmd0aCkmJihhWzBdPWFbMF0uc2xpY2UoMCxiKSxhWzJdPWMuc2xpY2UoMCxiKSksYS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSkudG9Mb3dlckNhc2UoKTtyZXR1cm4iKiI9PT1hP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1ifX0sQ0xBU1M6ZnVuY3Rpb24oYSl7dmFyIGI9eVthKyIgIl07cmV0dXJuIGJ8fChiPW5ldyBSZWdFeHAoIihefCIrTCsiKSIrYSsiKCIrTCsifCQpIikpJiZ5KGEsZnVuY3Rpb24oYSl7cmV0dXJuIGIudGVzdCgic3RyaW5nIj09dHlwZW9mIGEuY2xhc3NOYW1lJiZhLmNsYXNzTmFtZXx8InVuZGVmaW5lZCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZSYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKX0pfSxBVFRSOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9ZmEuYXR0cihkLGEpO3JldHVybiBudWxsPT1lPyIhPSI9PT1iOmI/KGUrPSIiLCI9Ij09PWI/ZT09PWM6IiE9Ij09PWI/ZSE9PWM6Il49Ij09PWI/YyYmMD09PWUuaW5kZXhPZihjKToiKj0iPT09Yj9jJiZlLmluZGV4T2YoYyk+LTE6IiQ9Ij09PWI/YyYmZS5zbGljZSgtYy5sZW5ndGgpPT09Yzoifj0iPT09Yj8oIiAiK2UucmVwbGFjZShQLCIgIikrIiAiKS5pbmRleE9mKGMpPi0xOiJ8PSI9PT1iP2U9PT1jfHxlLnNsaWNlKDAsYy5sZW5ndGgrMSk9PT1jKyItIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPSJudGgiIT09YS5zbGljZSgwLDMpLGc9Imxhc3QiIT09YS5zbGljZSgtNCksaD0ib2YtdHlwZSI9PT1iO3JldHVybiAxPT09ZCYmMD09PWU/ZnVuY3Rpb24oYSl7cmV0dXJuISFhLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGIsYyxpKXt2YXIgaixrLGwsbSxuLG8scD1mIT09Zz8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLHE9Yi5wYXJlbnROb2RlLHI9aCYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHM9IWkmJiFoLHQ9ITE7aWYocSl7aWYoZil7d2hpbGUocCl7bT1iO3doaWxlKG09bVtwXSlpZihoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpcmV0dXJuITE7bz1wPSJvbmx5Ij09PWEmJiFvJiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZzKXttPXEsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biYmalsyXSxtPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShtPSsrbiYmbSYmbVtwXXx8KHQ9bj0wKXx8by5wb3AoKSlpZigxPT09bS5ub2RlVHlwZSYmKyt0JiZtPT09Yil7a1thXT1bdyxuLHRdO2JyZWFrfX1lbHNlIGlmKHMmJihtPWIsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biksdD09PSExKXdoaWxlKG09KytuJiZtJiZtW3BdfHwodD1uPTApfHxvLnBvcCgpKWlmKChoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpJiYrK3QmJihzJiYobD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksa1thXT1bdyx0XSksbT09PWIpKWJyZWFrO3JldHVybiB0LT1lLHQ9PT1kfHx0JWQ9PT0wJiZ0L2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxmYS5lcnJvcigidW5zdXBwb3J0ZWQgcHNldWRvOiAiK2EpO3JldHVybiBlW3VdP2UoYik6ZS5sZW5ndGg+MT8oYz1bYSxhLCIiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2hhKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1KKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmhhKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShRLCIkMSIpKTtyZXR1cm4gZFt1XT9oYShmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSxiWzBdPW51bGwsIWMucG9wKCl9fSksaGFzOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZmEoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczpoYShmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoYmEsY2EpLGZ1bmN0aW9uKGIpe3JldHVybihiLnRleHRDb250ZW50fHxiLmlubmVyVGV4dHx8ZShiKSkuaW5kZXhPZihhKT4tMX19KSxsYW5nOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBWLnRlc3QoYXx8IiIpfHxmYS5lcnJvcigidW5zdXBwb3J0ZWQgbGFuZzogIithKSxhPWEucmVwbGFjZShiYSxjYSkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbihiKXt2YXIgYztkbyBpZihjPXA/Yi5sYW5nOmIuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpfHxiLmdldEF0dHJpYnV0ZSgibGFuZyIpKXJldHVybiBjPWMudG9Mb3dlckNhc2UoKSxjPT09YXx8MD09PWMuaW5kZXhPZihhKyItIik7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSYmMT09PWIubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbihiKXt2YXIgYz1hLmxvY2F0aW9uJiZhLmxvY2F0aW9uLmhhc2g7cmV0dXJuIGMmJmMuc2xpY2UoMSk9PT1iLmlkfSxyb290OmZ1bmN0aW9uKGEpe3JldHVybiBhPT09b30sZm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1uLmFjdGl2ZUVsZW1lbnQmJighbi5oYXNGb2N1c3x8bi5oYXNGb2N1cygpKSYmISEoYS50eXBlfHxhLmhyZWZ8fH5hLnRhYkluZGV4KX0sZW5hYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSExfSxkaXNhYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmISFhLmNoZWNrZWR8fCJvcHRpb24iPT09YiYmISFhLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxhLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4hZC5wc2V1ZG9zLmVtcHR5KGEpfSxoZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIFkudGVzdChhLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFgudGVzdChhLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmImJ1dHRvbiI9PT1hLnR5cGV8fCJidXR0b24iPT09Yn0sdGV4dDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4iaW5wdXQiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8InRleHQiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6bmEoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Om5hKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpuYShmdW5jdGlvbihhLGIsYyl7cmV0dXJuWzA+Yz9jK2I6Y119KSxldmVuOm5hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOm5hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6bmEoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpuYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bGEoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bWEoYik7ZnVuY3Rpb24gcGEoKXt9cGEucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyBwYSxnPWZhLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErIiAiXTtpZihrKXJldHVybiBiPzA6ay5zbGljZSgwKTtoPWEsaT1bXSxqPWQucHJlRmlsdGVyO3doaWxlKGgpe2MmJiEoZT1SLmV4ZWMoaCkpfHwoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1TLmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFEsIiAiKX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2ZvcihnIGluIGQuZmlsdGVyKSEoZT1XW2ddLmV4ZWMoaCkpfHxqW2ddJiYhKGU9altnXShlKSl8fChjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTpnLG1hdGNoZXM6ZX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2lmKCFjKWJyZWFrfXJldHVybiBiP2gubGVuZ3RoOmg/ZmEuZXJyb3IoYSk6eihhLGkpLnNsaWNlKDApfTtmdW5jdGlvbiBxYShhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9IiI7Yz5iO2IrKylkKz1hW2JdLnZhbHVlO3JldHVybiBkfWZ1bmN0aW9uIHJhKGEsYixjKXt2YXIgZD1iLmRpcixlPWMmJiJwYXJlbnROb2RlIj09PWQsZj14Kys7cmV0dXJuIGIuZmlyc3Q/ZnVuY3Rpb24oYixjLGYpe3doaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSlyZXR1cm4gYShiLGMsZil9OmZ1bmN0aW9uKGIsYyxnKXt2YXIgaCxpLGosaz1bdyxmXTtpZihnKXt3aGlsZShiPWJbZF0paWYoKDE9PT1iLm5vZGVUeXBlfHxlKSYmYShiLGMsZykpcmV0dXJuITB9ZWxzZSB3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpe2lmKGo9Ylt1XXx8KGJbdV09e30pLGk9altiLnVuaXF1ZUlEXXx8KGpbYi51bmlxdWVJRF09e30pLChoPWlbZF0pJiZoWzBdPT09dyYmaFsxXT09PWYpcmV0dXJuIGtbMl09aFsyXTtpZihpW2RdPWssa1syXT1hKGIsYyxnKSlyZXR1cm4hMH19fWZ1bmN0aW9uIHNhKGEpe3JldHVybiBhLmxlbmd0aD4xP2Z1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLmxlbmd0aDt3aGlsZShlLS0paWYoIWFbZV0oYixjLGQpKXJldHVybiExO3JldHVybiEwfTphWzBdfWZ1bmN0aW9uIHRhKGEsYixjKXtmb3IodmFyIGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspZmEoYSxiW2RdLGMpO3JldHVybiBjfWZ1bmN0aW9uIHVhKGEsYixjLGQsZSl7Zm9yKHZhciBmLGc9W10saD0wLGk9YS5sZW5ndGgsaj1udWxsIT1iO2k+aDtoKyspKGY9YVtoXSkmJihjJiYhYyhmLGQsZSl8fChnLnB1c2goZiksaiYmYi5wdXNoKGgpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gdmEoYSxiLGMsZCxlLGYpe3JldHVybiBkJiYhZFt1XSYmKGQ9dmEoZCkpLGUmJiFlW3VdJiYoZT12YShlLGYpKSxoYShmdW5jdGlvbihmLGcsaCxpKXt2YXIgaixrLGwsbT1bXSxuPVtdLG89Zy5sZW5ndGgscD1mfHx0YShifHwiKiIsaC5ub2RlVHlwZT9baF06aCxbXSkscT0hYXx8IWYmJmI/cDp1YShwLG0sYSxoLGkpLHI9Yz9lfHwoZj9hOm98fGQpP1tdOmc6cTtpZihjJiZjKHEscixoLGkpLGQpe2o9dWEocixuKSxkKGosW10saCxpKSxrPWoubGVuZ3RoO3doaWxlKGstLSkobD1qW2tdKSYmKHJbbltrXV09IShxW25ba11dPWwpKX1pZihmKXtpZihlfHxhKXtpZihlKXtqPVtdLGs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiZqLnB1c2gocVtrXT1sKTtlKG51bGwscj1bXSxqLGkpfWs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiYoaj1lP0ooZixsKTptW2tdKT4tMSYmKGZbal09IShnW2pdPWwpKX19ZWxzZSByPXVhKHI9PT1nP3Iuc3BsaWNlKG8sci5sZW5ndGgpOnIpLGU/ZShudWxsLGcscixpKTpILmFwcGx5KGcscil9KX1mdW5jdGlvbiB3YShhKXtmb3IodmFyIGIsYyxlLGY9YS5sZW5ndGgsZz1kLnJlbGF0aXZlW2FbMF0udHlwZV0saD1nfHxkLnJlbGF0aXZlWyIgIl0saT1nPzE6MCxrPXJhKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0saCwhMCksbD1yYShmdW5jdGlvbihhKXtyZXR1cm4gSihiLGEpPi0xfSxoLCEwKSxtPVtmdW5jdGlvbihhLGMsZCl7dmFyIGU9IWcmJihkfHxjIT09ail8fCgoYj1jKS5ub2RlVHlwZT9rKGEsYyxkKTpsKGEsYyxkKSk7cmV0dXJuIGI9bnVsbCxlfV07Zj5pO2krKylpZihjPWQucmVsYXRpdmVbYVtpXS50eXBlXSltPVtyYShzYShtKSxjKV07ZWxzZXtpZihjPWQuZmlsdGVyW2FbaV0udHlwZV0uYXBwbHkobnVsbCxhW2ldLm1hdGNoZXMpLGNbdV0pe2ZvcihlPSsraTtmPmU7ZSsrKWlmKGQucmVsYXRpdmVbYVtlXS50eXBlXSlicmVhaztyZXR1cm4gdmEoaT4xJiZzYShtKSxpPjEmJnFhKGEuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6IiAiPT09YVtpLTJdLnR5cGU/IioiOiIifSkpLnJlcGxhY2UoUSwiJDEiKSxjLGU+aSYmd2EoYS5zbGljZShpLGUpKSxmPmUmJndhKGE9YS5zbGljZShlKSksZj5lJiZxYShhKSl9bS5wdXNoKGMpfXJldHVybiBzYShtKX1mdW5jdGlvbiB4YShhLGIpe3ZhciBjPWIubGVuZ3RoPjAsZT1hLmxlbmd0aD4wLGY9ZnVuY3Rpb24oZixnLGgsaSxrKXt2YXIgbCxvLHEscj0wLHM9IjAiLHQ9ZiYmW10sdT1bXSx2PWoseD1mfHxlJiZkLmZpbmQuVEFHKCIqIixrKSx5PXcrPW51bGw9PXY/MTpNYXRoLnJhbmRvbSgpfHwuMSx6PXgubGVuZ3RoO2ZvcihrJiYoaj1nPT09bnx8Z3x8ayk7cyE9PXomJm51bGwhPShsPXhbc10pO3MrKyl7aWYoZSYmbCl7bz0wLGd8fGwub3duZXJEb2N1bWVudD09PW58fChtKGwpLGg9IXApO3doaWxlKHE9YVtvKytdKWlmKHEobCxnfHxuLGgpKXtpLnB1c2gobCk7YnJlYWt9ayYmKHc9eSl9YyYmKChsPSFxJiZsKSYmci0tLGYmJnQucHVzaChsKSl9aWYocis9cyxjJiZzIT09cil7bz0wO3doaWxlKHE9YltvKytdKXEodCx1LGcsaCk7aWYoZil7aWYocj4wKXdoaWxlKHMtLSl0W3NdfHx1W3NdfHwodVtzXT1GLmNhbGwoaSkpO3U9dWEodSl9SC5hcHBseShpLHUpLGsmJiFmJiZ1Lmxlbmd0aD4wJiZyK2IubGVuZ3RoPjEmJmZhLnVuaXF1ZVNvcnQoaSl9cmV0dXJuIGsmJih3PXksaj12KSx0fTtyZXR1cm4gYz9oYShmKTpmfXJldHVybiBoPWZhLmNvbXBpbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9W10sZj1BW2ErIiAiXTtpZighZil7Ynx8KGI9ZyhhKSksYz1iLmxlbmd0aDt3aGlsZShjLS0pZj13YShiW2NdKSxmW3VdP2QucHVzaChmKTplLnB1c2goZik7Zj1BKGEseGEoZSxkKSksZi5zZWxlY3Rvcj1hfXJldHVybiBmfSxpPWZhLnNlbGVjdD1mdW5jdGlvbihhLGIsZSxmKXt2YXIgaSxqLGssbCxtLG49ImZ1bmN0aW9uIj09dHlwZW9mIGEmJmEsbz0hZiYmZyhhPW4uc2VsZWN0b3J8fGEpO2lmKGU9ZXx8W10sMT09PW8ubGVuZ3RoKXtpZihqPW9bMF09b1swXS5zbGljZSgwKSxqLmxlbmd0aD4yJiYiSUQiPT09KGs9alswXSkudHlwZSYmYy5nZXRCeUlkJiY5PT09Yi5ub2RlVHlwZSYmcCYmZC5yZWxhdGl2ZVtqWzFdLnR5cGVdKXtpZihiPShkLmZpbmQuSUQoay5tYXRjaGVzWzBdLnJlcGxhY2UoYmEsY2EpLGIpfHxbXSlbMF0sIWIpcmV0dXJuIGU7biYmKGI9Yi5wYXJlbnROb2RlKSxhPWEuc2xpY2Uoai5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aT1XLm5lZWRzQ29udGV4dC50ZXN0KGEpPzA6ai5sZW5ndGg7d2hpbGUoaS0tKXtpZihrPWpbaV0sZC5yZWxhdGl2ZVtsPWsudHlwZV0pYnJlYWs7aWYoKG09ZC5maW5kW2xdKSYmKGY9bShrLm1hdGNoZXNbMF0ucmVwbGFjZShiYSxjYSksXy50ZXN0KGpbMF0udHlwZSkmJm9hKGIucGFyZW50Tm9kZSl8fGIpKSl7aWYoai5zcGxpY2UoaSwxKSxhPWYubGVuZ3RoJiZxYShqKSwhYSlyZXR1cm4gSC5hcHBseShlLGYpLGU7YnJlYWt9fX1yZXR1cm4obnx8aChhLG8pKShmLGIsIXAsZSwhYnx8Xy50ZXN0KGEpJiZvYShiLnBhcmVudE5vZGUpfHxiKSxlfSxjLnNvcnRTdGFibGU9dS5zcGxpdCgiIikuc29ydChCKS5qb2luKCIiKT09PXUsYy5kZXRlY3REdXBsaWNhdGVzPSEhbCxtKCksYy5zb3J0RGV0YWNoZWQ9aWEoZnVuY3Rpb24oYSl7cmV0dXJuIDEmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuLmNyZWF0ZUVsZW1lbnQoImRpdiIpKX0pLGlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsIiMiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpfSl8fGphKCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dm9pZCAwOmEuZ2V0QXR0cmlidXRlKGIsInR5cGUiPT09Yi50b0xvd2VyQ2FzZSgpPzE6Mil9KSxjLmF0dHJpYnV0ZXMmJmlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD0iPGlucHV0Lz4iLGEuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIiksIiI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpfSl8fGphKCJ2YWx1ZSIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjfHwiaW5wdXQiIT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpP3ZvaWQgMDphLmRlZmF1bHRWYWx1ZX0pLGlhKGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKX0pfHxqYShLLGZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYz92b2lkIDA6YVtiXT09PSEwP2IudG9Mb3dlckNhc2UoKTooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZkLnNwZWNpZmllZD9kLnZhbHVlOm51bGx9KSxmYX0oYSk7bi5maW5kPXQsbi5leHByPXQuc2VsZWN0b3JzLG4uZXhwclsiOiJdPW4uZXhwci5wc2V1ZG9zLG4udW5pcXVlU29ydD1uLnVuaXF1ZT10LnVuaXF1ZVNvcnQsbi50ZXh0PXQuZ2V0VGV4dCxuLmlzWE1MRG9jPXQuaXNYTUwsbi5jb250YWlucz10LmNvbnRhaW5zO3ZhciB1PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPXZvaWQgMCE9PWM7d2hpbGUoKGE9YVtiXSkmJjkhPT1hLm5vZGVUeXBlKWlmKDE9PT1hLm5vZGVUeXBlKXtpZihlJiZuKGEpLmlzKGMpKWJyZWFrO2QucHVzaChhKX1yZXR1cm4gZH0sdj1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXTthO2E9YS5uZXh0U2libGluZykxPT09YS5ub2RlVHlwZSYmYSE9PWImJmMucHVzaChhKTtyZXR1cm4gY30sdz1uLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LHg9L148KFtcdy1dKylccypcLz8+KD86PFwvXDE+fCkkLyx5PS9eLlteOiNcW1wuLF0qJC87ZnVuY3Rpb24geihhLGIsYyl7aWYobi5pc0Z1bmN0aW9uKGIpKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhLGQpe3JldHVybiEhYi5jYWxsKGEsZCxhKSE9PWN9KTtpZihiLm5vZGVUeXBlKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWIhPT1jfSk7aWYoInN0cmluZyI9PXR5cGVvZiBiKXtpZih5LnRlc3QoYikpcmV0dXJuIG4uZmlsdGVyKGIsYSxjKTtiPW4uZmlsdGVyKGIsYSl9cmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBuLmluQXJyYXkoYSxiKT4tMSE9PWN9KX1uLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9Ijpub3QoIithKyIpIiksMT09PWIubGVuZ3RoJiYxPT09ZC5ub2RlVHlwZT9uLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGQsYSk/W2RdOltdOm4uZmluZC5tYXRjaGVzKGEsbi5ncmVwKGIsZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfSkpfSxuLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXt2YXIgYixjPVtdLGQ9dGhpcyxlPWQubGVuZ3RoO2lmKCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2sobihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2U+YjtiKyspaWYobi5jb250YWlucyhkW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihiPTA7ZT5iO2IrKyluLmZpbmQoYSxkW2JdLGMpO3JldHVybiBjPXRoaXMucHVzaFN0YWNrKGU+MT9uLnVuaXF1ZShjKTpjKSxjLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcisiICIrYTphLGN9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeih0aGlzLGF8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeih0aGlzLGF8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEheih0aGlzLCJzdHJpbmciPT10eXBlb2YgYSYmdy50ZXN0KGEpP24oYSk6YXx8W10sITEpLmxlbmd0aH19KTt2YXIgQSxCPS9eKD86XHMqKDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKikpJC8sQz1uLmZuLmluaXQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBlLGY7aWYoIWEpcmV0dXJuIHRoaXM7aWYoYz1jfHxBLCJzdHJpbmciPT10eXBlb2YgYSl7aWYoZT0iPCI9PT1hLmNoYXJBdCgwKSYmIj4iPT09YS5jaGFyQXQoYS5sZW5ndGgtMSkmJmEubGVuZ3RoPj0zP1tudWxsLGEsbnVsbF06Qi5leGVjKGEpLCFlfHwhZVsxXSYmYilyZXR1cm4hYnx8Yi5qcXVlcnk/KGJ8fGMpLmZpbmQoYSk6dGhpcy5jb25zdHJ1Y3RvcihiKS5maW5kKGEpO2lmKGVbMV0pe2lmKGI9YiBpbnN0YW5jZW9mIG4/YlswXTpiLG4ubWVyZ2UodGhpcyxuLnBhcnNlSFRNTChlWzFdLGImJmIubm9kZVR5cGU/Yi5vd25lckRvY3VtZW50fHxiOmQsITApKSx4LnRlc3QoZVsxXSkmJm4uaXNQbGFpbk9iamVjdChiKSlmb3IoZSBpbiBiKW4uaXNGdW5jdGlvbih0aGlzW2VdKT90aGlzW2VdKGJbZV0pOnRoaXMuYXR0cihlLGJbZV0pO3JldHVybiB0aGlzfWlmKGY9ZC5nZXRFbGVtZW50QnlJZChlWzJdKSxmJiZmLnBhcmVudE5vZGUpe2lmKGYuaWQhPT1lWzJdKXJldHVybiBBLmZpbmQoYSk7dGhpcy5sZW5ndGg9MSx0aGlzWzBdPWZ9cmV0dXJuIHRoaXMuY29udGV4dD1kLHRoaXMuc2VsZWN0b3I9YSx0aGlzfXJldHVybiBhLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6bi5pc0Z1bmN0aW9uKGEpPyJ1bmRlZmluZWQiIT10eXBlb2YgYy5yZWFkeT9jLnJlYWR5KGEpOmEobik6KHZvaWQgMCE9PWEuc2VsZWN0b3ImJih0aGlzLnNlbGVjdG9yPWEuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWEuY29udGV4dCksbi5tYWtlQXJyYXkoYSx0aGlzKSl9O0MucHJvdG90eXBlPW4uZm4sQT1uKGQpO3ZhciBEPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEU9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07bi5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYixjPW4oYSx0aGlzKSxkPWMubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7ZD5iO2IrKylpZihuLmNvbnRhaW5zKHRoaXMsY1tiXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT10aGlzLmxlbmd0aCxmPVtdLGc9dy50ZXN0KGEpfHwic3RyaW5nIiE9dHlwZW9mIGE/bihhLGJ8fHRoaXMuY29udGV4dCk6MDtlPmQ7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmbi5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP24udW5pcXVlU29ydChmKTpmKX0saW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/InN0cmluZyI9PXR5cGVvZiBhP24uaW5BcnJheSh0aGlzWzBdLG4oYSkpOm4uaW5BcnJheShhLmpxdWVyeT9hWzBdOmEsdGhpcyk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobi51bmlxdWVTb3J0KG4ubWVyZ2UodGhpcy5nZXQoKSxuKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEYoYSxiKXtkbyBhPWFbYl07d2hpbGUoYSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW4uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gdShhLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHUoYSwicGFyZW50Tm9kZSIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEYoYSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihhKXtyZXR1cm4gRihhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihhKXtyZXR1cm4gdShhLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiB1KGEsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB1KGEsIm5leHRTaWJsaW5nIixjKX0scHJldlVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdShhLCJwcmV2aW91c1NpYmxpbmciLGMpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4gdigoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIHYoYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIG4ubm9kZU5hbWUoYSwiaWZyYW1lIik/YS5jb250ZW50RG9jdW1lbnR8fGEuY29udGVudFdpbmRvdy5kb2N1bWVudDpuLm1lcmdlKFtdLGEuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYyxkKXt2YXIgZT1uLm1hcCh0aGlzLGIsYyk7cmV0dXJuIlVudGlsIiE9PWEuc2xpY2UoLTUpJiYoZD1jKSxkJiYic3RyaW5nIj09dHlwZW9mIGQmJihlPW4uZmlsdGVyKGQsZSkpLHRoaXMubGVuZ3RoPjEmJihFW2FdfHwoZT1uLnVuaXF1ZVNvcnQoZSkpLEQudGVzdChhKSYmKGU9ZS5yZXZlcnNlKCkpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgRz0vXFMrL2c7ZnVuY3Rpb24gSChhKXt2YXIgYj17fTtyZXR1cm4gbi5lYWNoKGEubWF0Y2goRyl8fFtdLGZ1bmN0aW9uKGEsYyl7YltjXT0hMH0pLGJ9bi5DYWxsYmFja3M9ZnVuY3Rpb24oYSl7YT0ic3RyaW5nIj09dHlwZW9mIGE/SChhKTpuLmV4dGVuZCh7fSxhKTt2YXIgYixjLGQsZSxmPVtdLGc9W10saD0tMSxpPWZ1bmN0aW9uKCl7Zm9yKGU9YS5vbmNlLGQ9Yj0hMDtnLmxlbmd0aDtoPS0xKXtjPWcuc2hpZnQoKTt3aGlsZSgrK2g8Zi5sZW5ndGgpZltoXS5hcHBseShjWzBdLGNbMV0pPT09ITEmJmEuc3RvcE9uRmFsc2UmJihoPWYubGVuZ3RoLGM9ITEpfWEubWVtb3J5fHwoYz0hMSksYj0hMSxlJiYoZj1jP1tdOiIiKX0saj17YWRkOmZ1bmN0aW9uKCl7cmV0dXJuIGYmJihjJiYhYiYmKGg9Zi5sZW5ndGgtMSxnLnB1c2goYykpLGZ1bmN0aW9uIGQoYil7bi5lYWNoKGIsZnVuY3Rpb24oYixjKXtuLmlzRnVuY3Rpb24oYyk/YS51bmlxdWUmJmouaGFzKGMpfHxmLnB1c2goYyk6YyYmYy5sZW5ndGgmJiJzdHJpbmciIT09bi50eXBlKGMpJiZkKGMpfSl9KGFyZ3VtZW50cyksYyYmIWImJmkoKSksdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIG4uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxiKXt2YXIgYzt3aGlsZSgoYz1uLmluQXJyYXkoYixmLGMpKT4tMSlmLnNwbGljZShjLDEpLGg+PWMmJmgtLX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9uLmluQXJyYXkoYSxmKT4tMTpmLmxlbmd0aD4wfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBmJiYoZj1bXSksdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiBlPWc9W10sZj1jPSIiLHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIWZ9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gZT0hMCxjfHxqLmRpc2FibGUoKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWV9LGZpcmVXaXRoOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGV8fChjPWN8fFtdLGM9W2EsYy5zbGljZT9jLnNsaWNlKCk6Y10sZy5wdXNoKGMpLGJ8fGkoKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBqLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZH19O3JldHVybiBqfSxuLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9W1sicmVzb2x2ZSIsImRvbmUiLG4uQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCJyZXNvbHZlZCJdLFsicmVqZWN0IiwiZmFpbCIsbi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlamVjdGVkIl0sWyJub3RpZnkiLCJwcm9ncmVzcyIsbi5DYWxsYmFja3MoIm1lbW9yeSIpXV0sYz0icGVuZGluZyIsZD17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gY30sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiBuLkRlZmVycmVkKGZ1bmN0aW9uKGMpe24uZWFjaChiLGZ1bmN0aW9uKGIsZil7dmFyIGc9bi5pc0Z1bmN0aW9uKGFbYl0pJiZhW2JdO2VbZlsxXV0oZnVuY3Rpb24oKXt2YXIgYT1nJiZnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthJiZuLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9hLnByb21pc2UoKS5wcm9ncmVzcyhjLm5vdGlmeSkuZG9uZShjLnJlc29sdmUpLmZhaWwoYy5yZWplY3QpOmNbZlswXSsiV2l0aCJdKHRoaXM9PT1kP2MucHJvbWlzZSgpOnRoaXMsZz9bYV06YXJndW1lbnRzKX0pfSksYT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hP24uZXh0ZW5kKGEsZCk6ZH19LGU9e307cmV0dXJuIGQucGlwZT1kLnRoZW4sbi5lYWNoKGIsZnVuY3Rpb24oYSxmKXt2YXIgZz1mWzJdLGg9ZlszXTtkW2ZbMV1dPWcuYWRkLGgmJmcuYWRkKGZ1bmN0aW9uKCl7Yz1ofSxiWzFeYV1bMl0uZGlzYWJsZSxiWzJdWzJdLmxvY2spLGVbZlswXV09ZnVuY3Rpb24oKXtyZXR1cm4gZVtmWzBdKyJXaXRoIl0odGhpcz09PWU/ZDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZVtmWzBdKyJXaXRoIl09Zy5maXJlV2l0aH0pLGQucHJvbWlzZShlKSxhJiZhLmNhbGwoZSxlKSxlfSx3aGVuOmZ1bmN0aW9uKGEpe3ZhciBiPTAsYz1lLmNhbGwoYXJndW1lbnRzKSxkPWMubGVuZ3RoLGY9MSE9PWR8fGEmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2Q6MCxnPTE9PT1mP2E6bi5EZWZlcnJlZCgpLGg9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtiW2FdPXRoaXMsY1thXT1hcmd1bWVudHMubGVuZ3RoPjE/ZS5jYWxsKGFyZ3VtZW50cyk6ZCxjPT09aT9nLm5vdGlmeVdpdGgoYixjKTotLWZ8fGcucmVzb2x2ZVdpdGgoYixjKX19LGksaixrO2lmKGQ+MSlmb3IoaT1uZXcgQXJyYXkoZCksaj1uZXcgQXJyYXkoZCksaz1uZXcgQXJyYXkoZCk7ZD5iO2IrKyljW2JdJiZuLmlzRnVuY3Rpb24oY1tiXS5wcm9taXNlKT9jW2JdLnByb21pc2UoKS5wcm9ncmVzcyhoKGIsaixpKSkuZG9uZShoKGIsayxjKSkuZmFpbChnLnJlamVjdCk6LS1mO3JldHVybiBmfHxnLnJlc29sdmVXaXRoKGssYyksZy5wcm9taXNlKCl9fSk7dmFyIEk7bi5mbi5yZWFkeT1mdW5jdGlvbihhKXtyZXR1cm4gbi5yZWFkeS5wcm9taXNlKCkuZG9uZShhKSx0aGlzfSxuLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oYSl7YT9uLnJlYWR5V2FpdCsrOm4ucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihhKXsoYT09PSEwPy0tbi5yZWFkeVdhaXQ6bi5pc1JlYWR5KXx8KG4uaXNSZWFkeT0hMCxhIT09ITAmJi0tbi5yZWFkeVdhaXQ+MHx8KEkucmVzb2x2ZVdpdGgoZCxbbl0pLG4uZm4udHJpZ2dlckhhbmRsZXImJihuKGQpLnRyaWdnZXJIYW5kbGVyKCJyZWFkeSIpLG4oZCkub2ZmKCJyZWFkeSIpKSkpfX0pO2Z1bmN0aW9uIEooKXtkLmFkZEV2ZW50TGlzdGVuZXI/KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsSyksYS5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixLKSk6KGQuZGV0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsSyksYS5kZXRhY2hFdmVudCgib25sb2FkIixLKSl9ZnVuY3Rpb24gSygpeyhkLmFkZEV2ZW50TGlzdGVuZXJ8fCJsb2FkIj09PWEuZXZlbnQudHlwZXx8ImNvbXBsZXRlIj09PWQucmVhZHlTdGF0ZSkmJihKKCksbi5yZWFkeSgpKX1uLnJlYWR5LnByb21pc2U9ZnVuY3Rpb24oYil7aWYoIUkpaWYoST1uLkRlZmVycmVkKCksImNvbXBsZXRlIj09PWQucmVhZHlTdGF0ZXx8ImxvYWRpbmciIT09ZC5yZWFkeVN0YXRlJiYhZC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwpYS5zZXRUaW1lb3V0KG4ucmVhZHkpO2Vsc2UgaWYoZC5hZGRFdmVudExpc3RlbmVyKWQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsSyksYS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixLKTtlbHNle2QuYXR0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsSyksYS5hdHRhY2hFdmVudCgib25sb2FkIixLKTt2YXIgYz0hMTt0cnl7Yz1udWxsPT1hLmZyYW1lRWxlbWVudCYmZC5kb2N1bWVudEVsZW1lbnR9Y2F0Y2goZSl7fWMmJmMuZG9TY3JvbGwmJiFmdW5jdGlvbiBmKCl7aWYoIW4uaXNSZWFkeSl7dHJ5e2MuZG9TY3JvbGwoImxlZnQiKX1jYXRjaChiKXtyZXR1cm4gYS5zZXRUaW1lb3V0KGYsNTApfUooKSxuLnJlYWR5KCl9fSgpfXJldHVybiBJLnByb21pc2UoYil9LG4ucmVhZHkucHJvbWlzZSgpO3ZhciBMO2ZvcihMIGluIG4obCkpYnJlYWs7bC5vd25GaXJzdD0iMCI9PT1MLGwuaW5saW5lQmxvY2tOZWVkc0xheW91dD0hMSxuKGZ1bmN0aW9uKCl7dmFyIGEsYixjLGU7Yz1kLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF0sYyYmYy5zdHlsZSYmKGI9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxlPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZS5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweCIsYy5hcHBlbmRDaGlsZChlKS5hcHBlbmRDaGlsZChiKSwidW5kZWZpbmVkIiE9dHlwZW9mIGIuc3R5bGUuem9vbSYmKGIuc3R5bGUuY3NzVGV4dD0iZGlzcGxheTppbmxpbmU7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzoxcHg7d2lkdGg6MXB4O3pvb206MSIsbC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0PWE9Mz09PWIub2Zmc2V0V2lkdGgsYSYmKGMuc3R5bGUuem9vbT0xKSksYy5yZW1vdmVDaGlsZChlKSl9KSxmdW5jdGlvbigpe3ZhciBhPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7bC5kZWxldGVFeHBhbmRvPSEwO3RyeXtkZWxldGUgYS50ZXN0fWNhdGNoKGIpe2wuZGVsZXRlRXhwYW5kbz0hMX1hPW51bGx9KCk7dmFyIE09ZnVuY3Rpb24oYSl7dmFyIGI9bi5ub0RhdGFbKGEubm9kZU5hbWUrIiAiKS50b0xvd2VyQ2FzZSgpXSxjPSthLm5vZGVUeXBlfHwxO3JldHVybiAxIT09YyYmOSE9PWM/ITE6IWJ8fGIhPT0hMCYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzaWQiKT09PWJ9LE49L14oPzpce1tcd1xXXSpcfXxcW1tcd1xXXSpcXSkkLyxPPS8oW0EtWl0pL2c7ZnVuY3Rpb24gUChhLGIsYyl7aWYodm9pZCAwPT09YyYmMT09PWEubm9kZVR5cGUpe3ZhciBkPSJkYXRhLSIrYi5yZXBsYWNlKE8sIi0kMSIpLnRvTG93ZXJDYXNlKCk7aWYoYz1hLmdldEF0dHJpYnV0ZShkKSwic3RyaW5nIj09dHlwZW9mIGMpe3RyeXtjPSJ0cnVlIj09PWM/ITA6ImZhbHNlIj09PWM/ITE6Im51bGwiPT09Yz9udWxsOitjKyIiPT09Yz8rYzpOLnRlc3QoYyk/bi5wYXJzZUpTT04oYyk6Y31jYXRjaChlKXt9bi5kYXRhKGEsYixjKX1lbHNlIGM9dm9pZCAwOwp9cmV0dXJuIGN9ZnVuY3Rpb24gUShhKXt2YXIgYjtmb3IoYiBpbiBhKWlmKCgiZGF0YSIhPT1ifHwhbi5pc0VtcHR5T2JqZWN0KGFbYl0pKSYmInRvSlNPTiIhPT1iKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIFIoYSxiLGQsZSl7aWYoTShhKSl7dmFyIGYsZyxoPW4uZXhwYW5kbyxpPWEubm9kZVR5cGUsaj1pP24uY2FjaGU6YSxrPWk/YVtoXTphW2hdJiZoO2lmKGsmJmpba10mJihlfHxqW2tdLmRhdGEpfHx2b2lkIDAhPT1kfHwic3RyaW5nIiE9dHlwZW9mIGIpcmV0dXJuIGt8fChrPWk/YVtoXT1jLnBvcCgpfHxuLmd1aWQrKzpoKSxqW2tdfHwoaltrXT1pP3t9Ont0b0pTT046bi5ub29wfSksIm9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYnx8KGU/altrXT1uLmV4dGVuZChqW2tdLGIpOmpba10uZGF0YT1uLmV4dGVuZChqW2tdLmRhdGEsYikpLGc9altrXSxlfHwoZy5kYXRhfHwoZy5kYXRhPXt9KSxnPWcuZGF0YSksdm9pZCAwIT09ZCYmKGdbbi5jYW1lbENhc2UoYildPWQpLCJzdHJpbmciPT10eXBlb2YgYj8oZj1nW2JdLG51bGw9PWYmJihmPWdbbi5jYW1lbENhc2UoYildKSk6Zj1nLGZ9fWZ1bmN0aW9uIFMoYSxiLGMpe2lmKE0oYSkpe3ZhciBkLGUsZj1hLm5vZGVUeXBlLGc9Zj9uLmNhY2hlOmEsaD1mP2Fbbi5leHBhbmRvXTpuLmV4cGFuZG87aWYoZ1toXSl7aWYoYiYmKGQ9Yz9nW2hdOmdbaF0uZGF0YSkpe24uaXNBcnJheShiKT9iPWIuY29uY2F0KG4ubWFwKGIsbi5jYW1lbENhc2UpKTpiIGluIGQ/Yj1bYl06KGI9bi5jYW1lbENhc2UoYiksYj1iIGluIGQ/W2JdOmIuc3BsaXQoIiAiKSksZT1iLmxlbmd0aDt3aGlsZShlLS0pZGVsZXRlIGRbYltlXV07aWYoYz8hUShkKTohbi5pc0VtcHR5T2JqZWN0KGQpKXJldHVybn0oY3x8KGRlbGV0ZSBnW2hdLmRhdGEsUShnW2hdKSkpJiYoZj9uLmNsZWFuRGF0YShbYV0sITApOmwuZGVsZXRlRXhwYW5kb3x8ZyE9Zy53aW5kb3c/ZGVsZXRlIGdbaF06Z1toXT12b2lkIDApfX19bi5leHRlbmQoe2NhY2hlOnt9LG5vRGF0YTp7ImFwcGxldCAiOiEwLCJlbWJlZCAiOiEwLCJvYmplY3QgIjoiY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwIn0saGFzRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gYT1hLm5vZGVUeXBlP24uY2FjaGVbYVtuLmV4cGFuZG9dXTphW24uZXhwYW5kb10sISFhJiYhUShhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIFIoYSxiLGMpfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoYSxiKX0sX2RhdGE6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBSKGEsYixjLCEwKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUyhhLGIsITApfX0pLG4uZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9dGhpc1swXSxnPWYmJmYuYXR0cmlidXRlcztpZih2b2lkIDA9PT1hKXtpZih0aGlzLmxlbmd0aCYmKGU9bi5kYXRhKGYpLDE9PT1mLm5vZGVUeXBlJiYhbi5fZGF0YShmLCJwYXJzZWRBdHRycyIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoImRhdGEtIikmJihkPW4uY2FtZWxDYXNlKGQuc2xpY2UoNSkpLFAoZixkLGVbZF0pKSk7bi5fZGF0YShmLCJwYXJzZWRBdHRycyIsITApfXJldHVybiBlfXJldHVybiJvYmplY3QiPT10eXBlb2YgYT90aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRhdGEodGhpcyxhKX0pOmFyZ3VtZW50cy5sZW5ndGg+MT90aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRhdGEodGhpcyxhLGIpfSk6Zj9QKGYsYSxuLmRhdGEoZixhKSk6dm9pZCAwfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLnJlbW92ZURhdGEodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGE/KGI9KGJ8fCJmeCIpKyJxdWV1ZSIsZD1uLl9kYXRhKGEsYiksYyYmKCFkfHxuLmlzQXJyYXkoYyk/ZD1uLl9kYXRhKGEsYixuLm1ha2VBcnJheShjKSk6ZC5wdXNoKGMpKSxkfHxbXSk6dm9pZCAwfSxkZXF1ZXVlOmZ1bmN0aW9uKGEsYil7Yj1ifHwiZngiO3ZhciBjPW4ucXVldWUoYSxiKSxkPWMubGVuZ3RoLGU9Yy5zaGlmdCgpLGY9bi5fcXVldWVIb29rcyhhLGIpLGc9ZnVuY3Rpb24oKXtuLmRlcXVldWUoYSxiKX07ImlucHJvZ3Jlc3MiPT09ZSYmKGU9Yy5zaGlmdCgpLGQtLSksZSYmKCJmeCI9PT1iJiZjLnVuc2hpZnQoImlucHJvZ3Jlc3MiKSxkZWxldGUgZi5zdG9wLGUuY2FsbChhLGcsZikpLCFkJiZmJiZmLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iKyJxdWV1ZUhvb2tzIjtyZXR1cm4gbi5fZGF0YShhLGMpfHxuLl9kYXRhKGEsYyx7ZW1wdHk6bi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7bi5fcmVtb3ZlRGF0YShhLGIrInF1ZXVlIiksbi5fcmVtb3ZlRGF0YShhLGMpfSl9KX19KSxuLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0yO3JldHVybiJzdHJpbmciIT10eXBlb2YgYSYmKGI9YSxhPSJmeCIsYy0tKSxhcmd1bWVudHMubGVuZ3RoPGM/bi5xdWV1ZSh0aGlzWzBdLGEpOnZvaWQgMD09PWI/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1uLnF1ZXVlKHRoaXMsYSxiKTtuLl9xdWV1ZUhvb2tzKHRoaXMsYSksImZ4Ij09PWEmJiJpbnByb2dyZXNzIiE9PWNbMF0mJm4uZGVxdWV1ZSh0aGlzLGEpfSl9LGRlcXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24uZGVxdWV1ZSh0aGlzLGEpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVldWUoYXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTEsZT1uLkRlZmVycmVkKCksZj10aGlzLGc9dGhpcy5sZW5ndGgsaD1mdW5jdGlvbigpey0tZHx8ZS5yZXNvbHZlV2l0aChmLFtmXSl9OyJzdHJpbmciIT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYT1hfHwiZngiO3doaWxlKGctLSljPW4uX2RhdGEoZltnXSxhKyJxdWV1ZUhvb2tzIiksYyYmYy5lbXB0eSYmKGQrKyxjLmVtcHR5LmFkZChoKSk7cmV0dXJuIGgoKSxlLnByb21pc2UoYil9fSksZnVuY3Rpb24oKXt2YXIgYTtsLnNocmlua1dyYXBCbG9ja3M9ZnVuY3Rpb24oKXtpZihudWxsIT1hKXJldHVybiBhO2E9ITE7dmFyIGIsYyxlO3JldHVybiBjPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXSxjJiZjLnN0eWxlPyhiPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZT1kLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGUuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHgiLGMuYXBwZW5kQ2hpbGQoZSkuYXBwZW5kQ2hpbGQoYiksInVuZGVmaW5lZCIhPXR5cGVvZiBiLnN0eWxlLnpvb20mJihiLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MXB4O3dpZHRoOjFweDt6b29tOjEiLGIuYXBwZW5kQ2hpbGQoZC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuc3R5bGUud2lkdGg9IjVweCIsYT0zIT09Yi5vZmZzZXRXaWR0aCksYy5yZW1vdmVDaGlsZChlKSxhKTp2b2lkIDB9fSgpO3ZhciBUPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLFU9bmV3IFJlZ0V4cCgiXig/OihbKy1dKT18KSgiK1QrIikoW2EteiVdKikkIiwiaSIpLFY9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXSxXPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9Ynx8YSwibm9uZSI9PT1uLmNzcyhhLCJkaXNwbGF5Iil8fCFuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKX07ZnVuY3Rpb24gWChhLGIsYyxkKXt2YXIgZSxmPTEsZz0yMCxoPWQ/ZnVuY3Rpb24oKXtyZXR1cm4gZC5jdXIoKX06ZnVuY3Rpb24oKXtyZXR1cm4gbi5jc3MoYSxiLCIiKX0saT1oKCksaj1jJiZjWzNdfHwobi5jc3NOdW1iZXJbYl0/IiI6InB4Iiksaz0obi5jc3NOdW1iZXJbYl18fCJweCIhPT1qJiYraSkmJlUuZXhlYyhuLmNzcyhhLGIpKTtpZihrJiZrWzNdIT09ail7aj1qfHxrWzNdLGM9Y3x8W10saz0raXx8MTtkbyBmPWZ8fCIuNSIsay89ZixuLnN0eWxlKGEsYixrK2opO3doaWxlKGYhPT0oZj1oKCkvaSkmJjEhPT1mJiYtLWcpfXJldHVybiBjJiYoaz0ra3x8K2l8fDAsZT1jWzFdP2srKGNbMV0rMSkqY1syXTorY1syXSxkJiYoZC51bml0PWosZC5zdGFydD1rLGQuZW5kPWUpKSxlfXZhciBZPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZhciBoPTAsaT1hLmxlbmd0aCxqPW51bGw9PWM7aWYoIm9iamVjdCI9PT1uLnR5cGUoYykpe2U9ITA7Zm9yKGggaW4gYylZKGEsYixoLGNbaF0sITAsZixnKX1lbHNlIGlmKHZvaWQgMCE9PWQmJihlPSEwLG4uaXNGdW5jdGlvbihkKXx8KGc9ITApLGomJihnPyhiLmNhbGwoYSxkKSxiPW51bGwpOihqPWIsYj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGouY2FsbChuKGEpLGMpfSkpLGIpKWZvcig7aT5oO2grKyliKGFbaF0sYyxnP2Q6ZC5jYWxsKGFbaF0saCxiKGFbaF0sYykpKTtyZXR1cm4gZT9hOmo/Yi5jYWxsKGEpOmk/YihhWzBdLGMpOmZ9LFo9L14oPzpjaGVja2JveHxyYWRpbykkL2ksJD0vPChbXHc6LV0rKS8sXz0vXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksYWE9L15ccysvLGJhPSJhYmJyfGFydGljbGV8YXNpZGV8YXVkaW98YmRpfGNhbnZhc3xkYXRhfGRhdGFsaXN0fGRldGFpbHN8ZGlhbG9nfGZpZ2NhcHRpb258ZmlndXJlfGZvb3RlcnxoZWFkZXJ8aGdyb3VwfG1haW58bWFya3xtZXRlcnxuYXZ8b3V0cHV0fHBpY3R1cmV8cHJvZ3Jlc3N8c2VjdGlvbnxzdW1tYXJ5fHRlbXBsYXRlfHRpbWV8dmlkZW8iO2Z1bmN0aW9uIGNhKGEpe3ZhciBiPWJhLnNwbGl0KCJ8IiksYz1hLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihjLmNyZWF0ZUVsZW1lbnQpd2hpbGUoYi5sZW5ndGgpYy5jcmVhdGVFbGVtZW50KGIucG9wKCkpO3JldHVybiBjfSFmdW5jdGlvbigpe3ZhciBhPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksYj1kLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxjPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTthLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IixsLmxlYWRpbmdXaGl0ZXNwYWNlPTM9PT1hLmZpcnN0Q2hpbGQubm9kZVR5cGUsbC50Ym9keT0hYS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKS5sZW5ndGgsbC5odG1sU2VyaWFsaXplPSEhYS5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpLmxlbmd0aCxsLmh0bWw1Q2xvbmU9Ijw6bmF2PjwvOm5hdj4iIT09ZC5jcmVhdGVFbGVtZW50KCJuYXYiKS5jbG9uZU5vZGUoITApLm91dGVySFRNTCxjLnR5cGU9ImNoZWNrYm94IixjLmNoZWNrZWQ9ITAsYi5hcHBlbmRDaGlsZChjKSxsLmFwcGVuZENoZWNrZWQ9Yy5jaGVja2VkLGEuaW5uZXJIVE1MPSI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+IixsLm5vQ2xvbmVDaGVja2VkPSEhYS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWUsYi5hcHBlbmRDaGlsZChhKSxjPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxjLnNldEF0dHJpYnV0ZSgidHlwZSIsInJhZGlvIiksYy5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCJjaGVja2VkIiksYy5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJ0IiksYS5hcHBlbmRDaGlsZChjKSxsLmNoZWNrQ2xvbmU9YS5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsbC5ub0Nsb25lRXZlbnQ9ISFhLmFkZEV2ZW50TGlzdGVuZXIsYVtuLmV4cGFuZG9dPTEsbC5hdHRyaWJ1dGVzPSFhLmdldEF0dHJpYnV0ZShuLmV4cGFuZG8pfSgpO3ZhciBkYT17b3B0aW9uOlsxLCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+IiwiPC9zZWxlY3Q+Il0sbGVnZW5kOlsxLCI8ZmllbGRzZXQ+IiwiPC9maWVsZHNldD4iXSxhcmVhOlsxLCI8bWFwPiIsIjwvbWFwPiJdLHBhcmFtOlsxLCI8b2JqZWN0PiIsIjwvb2JqZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6bC5odG1sU2VyaWFsaXplP1swLCIiLCIiXTpbMSwiWDxkaXY+IiwiPC9kaXY+Il19O2RhLm9wdGdyb3VwPWRhLm9wdGlvbixkYS50Ym9keT1kYS50Zm9vdD1kYS5jb2xncm91cD1kYS5jYXB0aW9uPWRhLnRoZWFkLGRhLnRoPWRhLnRkO2Z1bmN0aW9uIGVhKGEsYil7dmFyIGMsZCxlPTAsZj0idW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShifHwiKiIpOiJ1bmRlZmluZWQiIT10eXBlb2YgYS5xdWVyeVNlbGVjdG9yQWxsP2EucXVlcnlTZWxlY3RvckFsbChifHwiKiIpOnZvaWQgMDtpZighZilmb3IoZj1bXSxjPWEuY2hpbGROb2Rlc3x8YTtudWxsIT0oZD1jW2VdKTtlKyspIWJ8fG4ubm9kZU5hbWUoZCxiKT9mLnB1c2goZCk6bi5tZXJnZShmLGVhKGQsYikpO3JldHVybiB2b2lkIDA9PT1ifHxiJiZuLm5vZGVOYW1lKGEsYik/bi5tZXJnZShbYV0sZik6Zn1mdW5jdGlvbiBmYShhLGIpe2Zvcih2YXIgYyxkPTA7bnVsbCE9KGM9YVtkXSk7ZCsrKW4uX2RhdGEoYywiZ2xvYmFsRXZhbCIsIWJ8fG4uX2RhdGEoYltkXSwiZ2xvYmFsRXZhbCIpKX12YXIgZ2E9Lzx8JiM/XHcrOy8saGE9Lzx0Ym9keS9pO2Z1bmN0aW9uIGlhKGEpe1oudGVzdChhLnR5cGUpJiYoYS5kZWZhdWx0Q2hlY2tlZD1hLmNoZWNrZWQpfWZ1bmN0aW9uIGphKGEsYixjLGQsZSl7Zm9yKHZhciBmLGcsaCxpLGosayxtLG89YS5sZW5ndGgscD1jYShiKSxxPVtdLHI9MDtvPnI7cisrKWlmKGc9YVtyXSxnfHwwPT09ZylpZigib2JqZWN0Ij09PW4udHlwZShnKSluLm1lcmdlKHEsZy5ub2RlVHlwZT9bZ106Zyk7ZWxzZSBpZihnYS50ZXN0KGcpKXtpPWl8fHAuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KCJkaXYiKSksaj0oJC5leGVjKGcpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLG09ZGFbal18fGRhLl9kZWZhdWx0LGkuaW5uZXJIVE1MPW1bMV0rbi5odG1sUHJlZmlsdGVyKGcpK21bMl0sZj1tWzBdO3doaWxlKGYtLSlpPWkubGFzdENoaWxkO2lmKCFsLmxlYWRpbmdXaGl0ZXNwYWNlJiZhYS50ZXN0KGcpJiZxLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShhYS5leGVjKGcpWzBdKSksIWwudGJvZHkpe2c9InRhYmxlIiE9PWp8fGhhLnRlc3QoZyk/Ijx0YWJsZT4iIT09bVsxXXx8aGEudGVzdChnKT8wOmk6aS5maXJzdENoaWxkLGY9ZyYmZy5jaGlsZE5vZGVzLmxlbmd0aDt3aGlsZShmLS0pbi5ub2RlTmFtZShrPWcuY2hpbGROb2Rlc1tmXSwidGJvZHkiKSYmIWsuY2hpbGROb2Rlcy5sZW5ndGgmJmcucmVtb3ZlQ2hpbGQoayl9bi5tZXJnZShxLGkuY2hpbGROb2RlcyksaS50ZXh0Q29udGVudD0iIjt3aGlsZShpLmZpcnN0Q2hpbGQpaS5yZW1vdmVDaGlsZChpLmZpcnN0Q2hpbGQpO2k9cC5sYXN0Q2hpbGR9ZWxzZSBxLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShnKSk7aSYmcC5yZW1vdmVDaGlsZChpKSxsLmFwcGVuZENoZWNrZWR8fG4uZ3JlcChlYShxLCJpbnB1dCIpLGlhKSxyPTA7d2hpbGUoZz1xW3IrK10paWYoZCYmbi5pbkFycmF5KGcsZCk+LTEpZSYmZS5wdXNoKGcpO2Vsc2UgaWYoaD1uLmNvbnRhaW5zKGcub3duZXJEb2N1bWVudCxnKSxpPWVhKHAuYXBwZW5kQ2hpbGQoZyksInNjcmlwdCIpLGgmJmZhKGkpLGMpe2Y9MDt3aGlsZShnPWlbZisrXSlfLnRlc3QoZy50eXBlfHwiIikmJmMucHVzaChnKX1yZXR1cm4gaT1udWxsLHB9IWZ1bmN0aW9uKCl7dmFyIGIsYyxlPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zm9yKGIgaW57c3VibWl0OiEwLGNoYW5nZTohMCxmb2N1c2luOiEwfSljPSJvbiIrYiwobFtiXT1jIGluIGEpfHwoZS5zZXRBdHRyaWJ1dGUoYywidCIpLGxbYl09ZS5hdHRyaWJ1dGVzW2NdLmV4cGFuZG89PT0hMSk7ZT1udWxsfSgpO3ZhciBrYT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYSkkL2ksbGE9L15rZXkvLG1hPS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudXxkcmFnfGRyb3ApfGNsaWNrLyxuYT0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sb2E9L14oW14uXSopKD86XC4oLispfCkvO2Z1bmN0aW9uIHBhKCl7cmV0dXJuITB9ZnVuY3Rpb24gcWEoKXtyZXR1cm4hMX1mdW5jdGlvbiByYSgpe3RyeXtyZXR1cm4gZC5hY3RpdmVFbGVtZW50fWNhdGNoKGEpe319ZnVuY3Rpb24gc2EoYSxiLGMsZCxlLGYpe3ZhciBnLGg7aWYoIm9iamVjdCI9PXR5cGVvZiBiKXsic3RyaW5nIiE9dHlwZW9mIGMmJihkPWR8fGMsYz12b2lkIDApO2ZvcihoIGluIGIpc2EoYSxoLGMsZCxiW2hdLGYpO3JldHVybiBhfWlmKG51bGw9PWQmJm51bGw9PWU/KGU9YyxkPWM9dm9pZCAwKTpudWxsPT1lJiYoInN0cmluZyI9PXR5cGVvZiBjPyhlPWQsZD12b2lkIDApOihlPWQsZD1jLGM9dm9pZCAwKSksZT09PSExKWU9cWE7ZWxzZSBpZighZSlyZXR1cm4gYTtyZXR1cm4gMT09PWYmJihnPWUsZT1mdW5jdGlvbihhKXtyZXR1cm4gbigpLm9mZihhKSxnLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5ndWlkPWcuZ3VpZHx8KGcuZ3VpZD1uLmd1aWQrKykpLGEuZWFjaChmdW5jdGlvbigpe24uZXZlbnQuYWRkKHRoaXMsYixlLGQsYyl9KX1uLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZyxoLGksaixrLGwsbSxvLHAscSxyPW4uX2RhdGEoYSk7aWYocil7Yy5oYW5kbGVyJiYoaT1jLGM9aS5oYW5kbGVyLGU9aS5zZWxlY3RvciksYy5ndWlkfHwoYy5ndWlkPW4uZ3VpZCsrKSwoZz1yLmV2ZW50cyl8fChnPXIuZXZlbnRzPXt9KSwoaz1yLmhhbmRsZSl8fChrPXIuaGFuZGxlPWZ1bmN0aW9uKGEpe3JldHVybiJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8YSYmbi5ldmVudC50cmlnZ2VyZWQ9PT1hLnR5cGU/dm9pZCAwOm4uZXZlbnQuZGlzcGF0Y2guYXBwbHkoay5lbGVtLGFyZ3VtZW50cyl9LGsuZWxlbT1hKSxiPShifHwiIikubWF0Y2goRyl8fFsiIl0saD1iLmxlbmd0aDt3aGlsZShoLS0pZj1vYS5leGVjKGJbaF0pfHxbXSxvPXE9ZlsxXSxwPShmWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksbyYmKGo9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShlP2ouZGVsZWdhdGVUeXBlOmouYmluZFR5cGUpfHxvLGo9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxsPW4uZXh0ZW5kKHt0eXBlOm8sb3JpZ1R5cGU6cSxkYXRhOmQsaGFuZGxlcjpjLGd1aWQ6Yy5ndWlkLHNlbGVjdG9yOmUsbmVlZHNDb250ZXh0OmUmJm4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChlKSxuYW1lc3BhY2U6cC5qb2luKCIuIil9LGkpLChtPWdbb10pfHwobT1nW29dPVtdLG0uZGVsZWdhdGVDb3VudD0wLGouc2V0dXAmJmouc2V0dXAuY2FsbChhLGQscCxrKSE9PSExfHwoYS5hZGRFdmVudExpc3RlbmVyP2EuYWRkRXZlbnRMaXN0ZW5lcihvLGssITEpOmEuYXR0YWNoRXZlbnQmJmEuYXR0YWNoRXZlbnQoIm9uIitvLGspKSksai5hZGQmJihqLmFkZC5jYWxsKGEsbCksbC5oYW5kbGVyLmd1aWR8fChsLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP20uc3BsaWNlKG0uZGVsZWdhdGVDb3VudCsrLDAsbCk6bS5wdXNoKGwpLG4uZXZlbnQuZ2xvYmFsW29dPSEwKTthPW51bGx9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9bi5oYXNEYXRhKGEpJiZuLl9kYXRhKGEpO2lmKHImJihrPXIuZXZlbnRzKSl7Yj0oYnx8IiIpLm1hdGNoKEcpfHxbIiJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWlmKGg9b2EuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLG8pe2w9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShkP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxvLG09a1tvXXx8W10saD1oWzJdJiZuZXcgUmVnRXhwKCIoXnxcXC4pIitwLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpLGk9Zj1tLmxlbmd0aDt3aGlsZShmLS0pZz1tW2ZdLCFlJiZxIT09Zy5vcmlnVHlwZXx8YyYmYy5ndWlkIT09Zy5ndWlkfHxoJiYhaC50ZXN0KGcubmFtZXNwYWNlKXx8ZCYmZCE9PWcuc2VsZWN0b3ImJigiKioiIT09ZHx8IWcuc2VsZWN0b3IpfHwobS5zcGxpY2UoZiwxKSxnLnNlbGVjdG9yJiZtLmRlbGVnYXRlQ291bnQtLSxsLnJlbW92ZSYmbC5yZW1vdmUuY2FsbChhLGcpKTtpJiYhbS5sZW5ndGgmJihsLnRlYXJkb3duJiZsLnRlYXJkb3duLmNhbGwoYSxwLHIuaGFuZGxlKSE9PSExfHxuLnJlbW92ZUV2ZW50KGEsbyxyLmhhbmRsZSksZGVsZXRlIGtbb10pfWVsc2UgZm9yKG8gaW4gayluLmV2ZW50LnJlbW92ZShhLG8rYltqXSxjLGQsITApO24uaXNFbXB0eU9iamVjdChrKSYmKGRlbGV0ZSByLmhhbmRsZSxuLl9yZW1vdmVEYXRhKGEsImV2ZW50cyIpKX19LHRyaWdnZXI6ZnVuY3Rpb24oYixjLGUsZil7dmFyIGcsaCxpLGosbCxtLG8scD1bZXx8ZF0scT1rLmNhbGwoYiwidHlwZSIpP2IudHlwZTpiLHI9ay5jYWxsKGIsIm5hbWVzcGFjZSIpP2IubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYoaT1tPWU9ZXx8ZCwzIT09ZS5ub2RlVHlwZSYmOCE9PWUubm9kZVR5cGUmJiFuYS50ZXN0KHErbi5ldmVudC50cmlnZ2VyZWQpJiYocS5pbmRleE9mKCIuIik+LTEmJihyPXEuc3BsaXQoIi4iKSxxPXIuc2hpZnQoKSxyLnNvcnQoKSksaD1xLmluZGV4T2YoIjoiKTwwJiYib24iK3EsYj1iW24uZXhwYW5kb10/YjpuZXcgbi5FdmVudChxLCJvYmplY3QiPT10eXBlb2YgYiYmYiksYi5pc1RyaWdnZXI9Zj8yOjMsYi5uYW1lc3BhY2U9ci5qb2luKCIuIiksYi5ybmFtZXNwYWNlPWIubmFtZXNwYWNlP25ldyBSZWdFeHAoIihefFxcLikiK3Iuam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVsbCxiLnJlc3VsdD12b2lkIDAsYi50YXJnZXR8fChiLnRhcmdldD1lKSxjPW51bGw9PWM/W2JdOm4ubWFrZUFycmF5KGMsW2JdKSxsPW4uZXZlbnQuc3BlY2lhbFtxXXx8e30sZnx8IWwudHJpZ2dlcnx8bC50cmlnZ2VyLmFwcGx5KGUsYykhPT0hMSkpe2lmKCFmJiYhbC5ub0J1YmJsZSYmIW4uaXNXaW5kb3coZSkpe2ZvcihqPWwuZGVsZWdhdGVUeXBlfHxxLG5hLnRlc3QoaitxKXx8KGk9aS5wYXJlbnROb2RlKTtpO2k9aS5wYXJlbnROb2RlKXAucHVzaChpKSxtPWk7bT09PShlLm93bmVyRG9jdW1lbnR8fGQpJiZwLnB1c2gobS5kZWZhdWx0Vmlld3x8bS5wYXJlbnRXaW5kb3d8fGEpfW89MDt3aGlsZSgoaT1wW28rK10pJiYhYi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKWIudHlwZT1vPjE/ajpsLmJpbmRUeXBlfHxxLGc9KG4uX2RhdGEoaSwiZXZlbnRzIil8fHt9KVtiLnR5cGVdJiZuLl9kYXRhKGksImhhbmRsZSIpLGcmJmcuYXBwbHkoaSxjKSxnPWgmJmlbaF0sZyYmZy5hcHBseSYmTShpKSYmKGIucmVzdWx0PWcuYXBwbHkoaSxjKSxiLnJlc3VsdD09PSExJiZiLnByZXZlbnREZWZhdWx0KCkpO2lmKGIudHlwZT1xLCFmJiYhYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmKCFsLl9kZWZhdWx0fHxsLl9kZWZhdWx0LmFwcGx5KHAucG9wKCksYyk9PT0hMSkmJk0oZSkmJmgmJmVbcV0mJiFuLmlzV2luZG93KGUpKXttPWVbaF0sbSYmKGVbaF09bnVsbCksbi5ldmVudC50cmlnZ2VyZWQ9cTt0cnl7ZVtxXSgpfWNhdGNoKHMpe31uLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsbSYmKGVbaF09bSl9cmV0dXJuIGIucmVzdWx0fX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YT1uLmV2ZW50LmZpeChhKTt2YXIgYixjLGQsZixnLGg9W10saT1lLmNhbGwoYXJndW1lbnRzKSxqPShuLl9kYXRhKHRoaXMsImV2ZW50cyIpfHx7fSlbYS50eXBlXXx8W10saz1uLmV2ZW50LnNwZWNpYWxbYS50eXBlXXx8e307aWYoaVswXT1hLGEuZGVsZWdhdGVUYXJnZXQ9dGhpcywhay5wcmVEaXNwYXRjaHx8ay5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsYSkhPT0hMSl7aD1uLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxhLGopLGI9MDt3aGlsZSgoZj1oW2IrK10pJiYhYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXthLmN1cnJlbnRUYXJnZXQ9Zi5lbGVtLGM9MDt3aGlsZSgoZz1mLmhhbmRsZXJzW2MrK10pJiYhYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKWEucm5hbWVzcGFjZSYmIWEucm5hbWVzcGFjZS50ZXN0KGcubmFtZXNwYWNlKXx8KGEuaGFuZGxlT2JqPWcsYS5kYXRhPWcuZGF0YSxkPSgobi5ldmVudC5zcGVjaWFsW2cub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxnLmhhbmRsZXIpLmFwcGx5KGYuZWxlbSxpKSx2b2lkIDAhPT1kJiYoYS5yZXN1bHQ9ZCk9PT0hMSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGsucG9zdERpc3BhdGNoJiZrLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsYSksYS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9W10saD1iLmRlbGVnYXRlQ291bnQsaT1hLnRhcmdldDtpZihoJiZpLm5vZGVUeXBlJiYoImNsaWNrIiE9PWEudHlwZXx8aXNOYU4oYS5idXR0b24pfHxhLmJ1dHRvbjwxKSlmb3IoO2khPXRoaXM7aT1pLnBhcmVudE5vZGV8fHRoaXMpaWYoMT09PWkubm9kZVR5cGUmJihpLmRpc2FibGVkIT09ITB8fCJjbGljayIhPT1hLnR5cGUpKXtmb3IoZD1bXSxjPTA7aD5jO2MrKylmPWJbY10sZT1mLnNlbGVjdG9yKyIgIix2b2lkIDA9PT1kW2VdJiYoZFtlXT1mLm5lZWRzQ29udGV4dD9uKGUsdGhpcykuaW5kZXgoaSk+LTE6bi5maW5kKGUsdGhpcyxudWxsLFtpXSkubGVuZ3RoKSxkW2VdJiZkLnB1c2goZik7ZC5sZW5ndGgmJmcucHVzaCh7ZWxlbTppLGhhbmRsZXJzOmR9KX1yZXR1cm4gaDxiLmxlbmd0aCYmZy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6Yi5zbGljZShoKX0pLGd9LGZpeDpmdW5jdGlvbihhKXtpZihhW24uZXhwYW5kb10pcmV0dXJuIGE7dmFyIGIsYyxlLGY9YS50eXBlLGc9YSxoPXRoaXMuZml4SG9va3NbZl07aHx8KHRoaXMuZml4SG9va3NbZl09aD1tYS50ZXN0KGYpP3RoaXMubW91c2VIb29rczpsYS50ZXN0KGYpP3RoaXMua2V5SG9va3M6e30pLGU9aC5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChoLnByb3BzKTp0aGlzLnByb3BzLGE9bmV3IG4uRXZlbnQoZyksYj1lLmxlbmd0aDt3aGlsZShiLS0pYz1lW2JdLGFbY109Z1tjXTtyZXR1cm4gYS50YXJnZXR8fChhLnRhcmdldD1nLnNyY0VsZW1lbnR8fGQpLDM9PT1hLnRhcmdldC5ub2RlVHlwZSYmKGEudGFyZ2V0PWEudGFyZ2V0LnBhcmVudE5vZGUpLGEubWV0YUtleT0hIWEubWV0YUtleSxoLmZpbHRlcj9oLmZpbHRlcihhLGcpOmF9LHByb3BzOiJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBkZXRhaWwgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoIi5zcGxpdCgiICIpLGZpeEhvb2tzOnt9LGtleUhvb2tzOntwcm9wczoiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZSIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YS53aGljaCYmKGEud2hpY2g9bnVsbCE9Yi5jaGFyQ29kZT9iLmNoYXJDb2RlOmIua2V5Q29kZSksYX19LG1vdXNlSG9va3M6e3Byb3BzOiJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgZnJvbUVsZW1lbnQgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnQiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGc9Yi5idXR0b24saD1iLmZyb21FbGVtZW50O3JldHVybiBudWxsPT1hLnBhZ2VYJiZudWxsIT1iLmNsaWVudFgmJihlPWEudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fGQsZj1lLmRvY3VtZW50RWxlbWVudCxjPWUuYm9keSxhLnBhZ2VYPWIuY2xpZW50WCsoZiYmZi5zY3JvbGxMZWZ0fHxjJiZjLnNjcm9sbExlZnR8fDApLShmJiZmLmNsaWVudExlZnR8fGMmJmMuY2xpZW50TGVmdHx8MCksYS5wYWdlWT1iLmNsaWVudFkrKGYmJmYuc2Nyb2xsVG9wfHxjJiZjLnNjcm9sbFRvcHx8MCktKGYmJmYuY2xpZW50VG9wfHxjJiZjLmNsaWVudFRvcHx8MCkpLCFhLnJlbGF0ZWRUYXJnZXQmJmgmJihhLnJlbGF0ZWRUYXJnZXQ9aD09PWEudGFyZ2V0P2IudG9FbGVtZW50OmgpLGEud2hpY2h8fHZvaWQgMD09PWd8fChhLndoaWNoPTEmZz8xOjImZz8zOjQmZz8yOjApLGF9fSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZih0aGlzIT09cmEoKSYmdGhpcy5mb2N1cyl0cnl7cmV0dXJuIHRoaXMuZm9jdXMoKSwhMX1jYXRjaChhKXt9fSxkZWxlZ2F0ZVR5cGU6ImZvY3VzaW4ifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM9PT1yYSgpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiBuLm5vZGVOYW1lKHRoaXMsImlucHV0IikmJiJjaGVja2JveCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2s/KHRoaXMuY2xpY2soKSwhMSk6dm9pZCAwfSxfZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4gbi5ub2RlTmFtZShhLnRhcmdldCwiYSIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7dm9pZCAwIT09YS5yZXN1bHQmJmEub3JpZ2luYWxFdmVudCYmKGEub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1hLnJlc3VsdCl9fX0sc2ltdWxhdGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW4uZXh0ZW5kKG5ldyBuLkV2ZW50LGMse3R5cGU6YSxpc1NpbXVsYXRlZDohMH0pO24uZXZlbnQudHJpZ2dlcihkLG51bGwsYiksZC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmYy5wcmV2ZW50RGVmYXVsdCgpfX0sbi5yZW1vdmVFdmVudD1kLnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYyl9OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0ib24iK2I7YS5kZXRhY2hFdmVudCYmKCJ1bmRlZmluZWQiPT10eXBlb2YgYVtkXSYmKGFbZF09bnVsbCksYS5kZXRhY2hFdmVudChkLGMpKX0sbi5FdmVudD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzIGluc3RhbmNlb2Ygbi5FdmVudD8oYSYmYS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9YSx0aGlzLnR5cGU9YS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWEuZGVmYXVsdFByZXZlbnRlZHx8dm9pZCAwPT09YS5kZWZhdWx0UHJldmVudGVkJiZhLnJldHVyblZhbHVlPT09ITE/cGE6cWEpOnRoaXMudHlwZT1hLGImJm4uZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fG4ubm93KCksdm9pZCh0aGlzW24uZXhwYW5kb109ITApKTpuZXcgbi5FdmVudChhLGIpfSxuLkV2ZW50LnByb3RvdHlwZT17Y29uc3RydWN0b3I6bi5FdmVudCxpc0RlZmF1bHRQcmV2ZW50ZWQ6cWEsaXNQcm9wYWdhdGlvblN0b3BwZWQ6cWEsaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6cWEscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9cGEsYSYmKGEucHJldmVudERlZmF1bHQ/YS5wcmV2ZW50RGVmYXVsdCgpOmEucmV0dXJuVmFsdWU9ITEpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1wYSxhJiYhdGhpcy5pc1NpbXVsYXRlZCYmKGEuc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpLGEuY2FuY2VsQnViYmxlPSEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9cGEsYSYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24mJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LG4uZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oYSxiKXtuLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybiBlJiYoZT09PWR8fG4uY29udGFpbnMoZCxlKSl8fChhLnR5cGU9Zi5vcmlnVHlwZSxjPWYuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYS50eXBlPWIpLGN9fX0pLGwuc3VibWl0fHwobi5ldmVudC5zcGVjaWFsLnN1Ym1pdD17c2V0dXA6ZnVuY3Rpb24oKXtyZXR1cm4gbi5ub2RlTmFtZSh0aGlzLCJmb3JtIik/ITE6dm9pZCBuLmV2ZW50LmFkZCh0aGlzLCJjbGljay5fc3VibWl0IGtleXByZXNzLl9zdWJtaXQiLGZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0LGM9bi5ub2RlTmFtZShiLCJpbnB1dCIpfHxuLm5vZGVOYW1lKGIsImJ1dHRvbiIpP24ucHJvcChiLCJmb3JtIik6dm9pZCAwO2MmJiFuLl9kYXRhKGMsInN1Ym1pdCIpJiYobi5ldmVudC5hZGQoYywic3VibWl0Ll9zdWJtaXQiLGZ1bmN0aW9uKGEpe2EuX3N1Ym1pdEJ1YmJsZT0hMH0pLG4uX2RhdGEoYywic3VibWl0IiwhMCkpfSl9LHBvc3REaXNwYXRjaDpmdW5jdGlvbihhKXthLl9zdWJtaXRCdWJibGUmJihkZWxldGUgYS5fc3VibWl0QnViYmxlLHRoaXMucGFyZW50Tm9kZSYmIWEuaXNUcmlnZ2VyJiZuLmV2ZW50LnNpbXVsYXRlKCJzdWJtaXQiLHRoaXMucGFyZW50Tm9kZSxhKSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7cmV0dXJuIG4ubm9kZU5hbWUodGhpcywiZm9ybSIpPyExOnZvaWQgbi5ldmVudC5yZW1vdmUodGhpcywiLl9zdWJtaXQiKX19KSxsLmNoYW5nZXx8KG4uZXZlbnQuc3BlY2lhbC5jaGFuZ2U9e3NldHVwOmZ1bmN0aW9uKCl7cmV0dXJuIGthLnRlc3QodGhpcy5ub2RlTmFtZSk/KCJjaGVja2JveCIhPT10aGlzLnR5cGUmJiJyYWRpbyIhPT10aGlzLnR5cGV8fChuLmV2ZW50LmFkZCh0aGlzLCJwcm9wZXJ0eWNoYW5nZS5fY2hhbmdlIixmdW5jdGlvbihhKXsiY2hlY2tlZCI9PT1hLm9yaWdpbmFsRXZlbnQucHJvcGVydHlOYW1lJiYodGhpcy5fanVzdENoYW5nZWQ9ITApfSksbi5ldmVudC5hZGQodGhpcywiY2xpY2suX2NoYW5nZSIsZnVuY3Rpb24oYSl7dGhpcy5fanVzdENoYW5nZWQmJiFhLmlzVHJpZ2dlciYmKHRoaXMuX2p1c3RDaGFuZ2VkPSExKSxuLmV2ZW50LnNpbXVsYXRlKCJjaGFuZ2UiLHRoaXMsYSl9KSksITEpOnZvaWQgbi5ldmVudC5hZGQodGhpcywiYmVmb3JlYWN0aXZhdGUuX2NoYW5nZSIsZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQ7a2EudGVzdChiLm5vZGVOYW1lKSYmIW4uX2RhdGEoYiwiY2hhbmdlIikmJihuLmV2ZW50LmFkZChiLCJjaGFuZ2UuX2NoYW5nZSIsZnVuY3Rpb24oYSl7IXRoaXMucGFyZW50Tm9kZXx8YS5pc1NpbXVsYXRlZHx8YS5pc1RyaWdnZXJ8fG4uZXZlbnQuc2ltdWxhdGUoImNoYW5nZSIsdGhpcy5wYXJlbnROb2RlLGEpfSksbi5fZGF0YShiLCJjaGFuZ2UiLCEwKSl9KX0saGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0O3JldHVybiB0aGlzIT09Ynx8YS5pc1NpbXVsYXRlZHx8YS5pc1RyaWdnZXJ8fCJyYWRpbyIhPT1iLnR5cGUmJiJjaGVja2JveCIhPT1iLnR5cGU/YS5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dm9pZCAwfSx0ZWFyZG93bjpmdW5jdGlvbigpe3JldHVybiBuLmV2ZW50LnJlbW92ZSh0aGlzLCIuX2NoYW5nZSIpLCFrYS50ZXN0KHRoaXMubm9kZU5hbWUpfX0pLGwuZm9jdXNpbnx8bi5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe24uZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxuLmV2ZW50LmZpeChhKSl9O24uZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1uLl9kYXRhKGQsYik7ZXx8ZC5hZGRFdmVudExpc3RlbmVyKGEsYywhMCksbi5fZGF0YShkLGIsKGV8fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPW4uX2RhdGEoZCxiKS0xO2U/bi5fZGF0YShkLGIsZSk6KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITApLG4uX3JlbW92ZURhdGEoZCxiKSl9fX0pLG4uZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gc2EodGhpcyxhLGIsYyxkKX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBzYSh0aGlzLGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixuKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlKyIuIitkLm5hbWVzcGFjZTpkLm9yaWdUeXBlLGQuc2VsZWN0b3IsZC5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgYSl7Zm9yKGUgaW4gYSl0aGlzLm9mZihlLGIsYVtlXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGIhPT0hMSYmImZ1bmN0aW9uIiE9dHlwZW9mIGJ8fChjPWIsYj12b2lkIDApLGM9PT0hMSYmKGM9cWEpLHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9LHRyaWdnZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC50cmlnZ2VyKGEsYix0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXNbMF07cmV0dXJuIGM/bi5ldmVudC50cmlnZ2VyKGEsYixjLCEwKTp2b2lkIDB9fSk7dmFyIHRhPS8galF1ZXJ5XGQrPSIoPzpudWxsfFxkKykiL2csdWE9bmV3IFJlZ0V4cCgiPCg/OiIrYmErIilbXFxzLz5dIiwiaSIpLHZhPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzotXSspW14+XSopXC8+L2dpLHdhPS88c2NyaXB0fDxzdHlsZXw8bGluay9pLHhhPS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLHlhPS9edHJ1ZVwvKC4qKS8semE9L15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nLEFhPWNhKGQpLEJhPUFhLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudCgiZGl2IikpO2Z1bmN0aW9uIENhKGEsYil7cmV0dXJuIG4ubm9kZU5hbWUoYSwidGFibGUiKSYmbi5ub2RlTmFtZSgxMSE9PWIubm9kZVR5cGU/YjpiLmZpcnN0Q2hpbGQsInRyIik/YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKVswXXx8YS5hcHBlbmRDaGlsZChhLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGJvZHkiKSk6YX1mdW5jdGlvbiBEYShhKXtyZXR1cm4gYS50eXBlPShudWxsIT09bi5maW5kLmF0dHIoYSwidHlwZSIpKSsiLyIrYS50eXBlLGF9ZnVuY3Rpb24gRWEoYSl7dmFyIGI9eWEuZXhlYyhhLnR5cGUpO3JldHVybiBiP2EudHlwZT1iWzFdOmEucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksYX1mdW5jdGlvbiBGYShhLGIpe2lmKDE9PT1iLm5vZGVUeXBlJiZuLmhhc0RhdGEoYSkpe3ZhciBjLGQsZSxmPW4uX2RhdGEoYSksZz1uLl9kYXRhKGIsZiksaD1mLmV2ZW50cztpZihoKXtkZWxldGUgZy5oYW5kbGUsZy5ldmVudHM9e307Zm9yKGMgaW4gaClmb3IoZD0wLGU9aFtjXS5sZW5ndGg7ZT5kO2QrKyluLmV2ZW50LmFkZChiLGMsaFtjXVtkXSl9Zy5kYXRhJiYoZy5kYXRhPW4uZXh0ZW5kKHt9LGcuZGF0YSkpfX1mdW5jdGlvbiBHYShhLGIpe3ZhciBjLGQsZTtpZigxPT09Yi5ub2RlVHlwZSl7aWYoYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksIWwubm9DbG9uZUV2ZW50JiZiW24uZXhwYW5kb10pe2U9bi5fZGF0YShiKTtmb3IoZCBpbiBlLmV2ZW50cyluLnJlbW92ZUV2ZW50KGIsZCxlLmhhbmRsZSk7Yi5yZW1vdmVBdHRyaWJ1dGUobi5leHBhbmRvKX0ic2NyaXB0Ij09PWMmJmIudGV4dCE9PWEudGV4dD8oRGEoYikudGV4dD1hLnRleHQsRWEoYikpOiJvYmplY3QiPT09Yz8oYi5wYXJlbnROb2RlJiYoYi5vdXRlckhUTUw9YS5vdXRlckhUTUwpLGwuaHRtbDVDbG9uZSYmYS5pbm5lckhUTUwmJiFuLnRyaW0oYi5pbm5lckhUTUwpJiYoYi5pbm5lckhUTUw9YS5pbm5lckhUTUwpKToiaW5wdXQiPT09YyYmWi50ZXN0KGEudHlwZSk/KGIuZGVmYXVsdENoZWNrZWQ9Yi5jaGVja2VkPWEuY2hlY2tlZCxiLnZhbHVlIT09YS52YWx1ZSYmKGIudmFsdWU9YS52YWx1ZSkpOiJvcHRpb24iPT09Yz9iLmRlZmF1bHRTZWxlY3RlZD1iLnNlbGVjdGVkPWEuZGVmYXVsdFNlbGVjdGVkOiJpbnB1dCIhPT1jJiYidGV4dGFyZWEiIT09Y3x8KGIuZGVmYXVsdFZhbHVlPWEuZGVmYXVsdFZhbHVlKX19ZnVuY3Rpb24gSGEoYSxiLGMsZCl7Yj1mLmFwcGx5KFtdLGIpO3ZhciBlLGcsaCxpLGosayxtPTAsbz1hLmxlbmd0aCxwPW8tMSxxPWJbMF0scj1uLmlzRnVuY3Rpb24ocSk7aWYocnx8bz4xJiYic3RyaW5nIj09dHlwZW9mIHEmJiFsLmNoZWNrQ2xvbmUmJnhhLnRlc3QocSkpcmV0dXJuIGEuZWFjaChmdW5jdGlvbihlKXt2YXIgZj1hLmVxKGUpO3ImJihiWzBdPXEuY2FsbCh0aGlzLGUsZi5odG1sKCkpKSxIYShmLGIsYyxkKX0pO2lmKG8mJihrPWphKGIsYVswXS5vd25lckRvY3VtZW50LCExLGEsZCksZT1rLmZpcnN0Q2hpbGQsMT09PWsuY2hpbGROb2Rlcy5sZW5ndGgmJihrPWUpLGV8fGQpKXtmb3IoaT1uLm1hcChlYShrLCJzY3JpcHQiKSxEYSksaD1pLmxlbmd0aDtvPm07bSsrKWc9ayxtIT09cCYmKGc9bi5jbG9uZShnLCEwLCEwKSxoJiZuLm1lcmdlKGksZWEoZywic2NyaXB0IikpKSxjLmNhbGwoYVttXSxnLG0pO2lmKGgpZm9yKGo9aVtpLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LG4ubWFwKGksRWEpLG09MDtoPm07bSsrKWc9aVttXSxfLnRlc3QoZy50eXBlfHwiIikmJiFuLl9kYXRhKGcsImdsb2JhbEV2YWwiKSYmbi5jb250YWlucyhqLGcpJiYoZy5zcmM/bi5fZXZhbFVybCYmbi5fZXZhbFVybChnLnNyYyk6bi5nbG9iYWxFdmFsKChnLnRleHR8fGcudGV4dENvbnRlbnR8fGcuaW5uZXJIVE1MfHwiIikucmVwbGFjZSh6YSwiIikpKTtrPWU9bnVsbH1yZXR1cm4gYX1mdW5jdGlvbiBJYShhLGIsYyl7Zm9yKHZhciBkLGU9Yj9uLmZpbHRlcihiLGEpOmEsZj0wO251bGwhPShkPWVbZl0pO2YrKyljfHwxIT09ZC5ub2RlVHlwZXx8bi5jbGVhbkRhdGEoZWEoZCkpLGQucGFyZW50Tm9kZSYmKGMmJm4uY29udGFpbnMoZC5vd25lckRvY3VtZW50LGQpJiZmYShlYShkLCJzY3JpcHQiKSksZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGQpKTtyZXR1cm4gYX1uLmV4dGVuZCh7aHRtbFByZWZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHZhLCI8JDE+PC8kMj4iKX0sY2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaT1uLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKTtpZihsLmh0bWw1Q2xvbmV8fG4uaXNYTUxEb2MoYSl8fCF1YS50ZXN0KCI8IithLm5vZGVOYW1lKyI+Iik/Zj1hLmNsb25lTm9kZSghMCk6KEJhLmlubmVySFRNTD1hLm91dGVySFRNTCxCYS5yZW1vdmVDaGlsZChmPUJhLmZpcnN0Q2hpbGQpKSwhKGwubm9DbG9uZUV2ZW50JiZsLm5vQ2xvbmVDaGVja2VkfHwxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxuLmlzWE1MRG9jKGEpKSlmb3IoZD1lYShmKSxoPWVhKGEpLGc9MDtudWxsIT0oZT1oW2ddKTsrK2cpZFtnXSYmR2EoZSxkW2ddKTtpZihiKWlmKGMpZm9yKGg9aHx8ZWEoYSksZD1kfHxlYShmKSxnPTA7bnVsbCE9KGU9aFtnXSk7ZysrKUZhKGUsZFtnXSk7ZWxzZSBGYShhLGYpO3JldHVybiBkPWVhKGYsInNjcmlwdCIpLGQubGVuZ3RoPjAmJmZhKGQsIWkmJmVhKGEsInNjcmlwdCIpKSxkPWg9ZT1udWxsLGZ9LGNsZWFuRGF0YTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgZCxlLGYsZyxoPTAsaT1uLmV4cGFuZG8saj1uLmNhY2hlLGs9bC5hdHRyaWJ1dGVzLG09bi5ldmVudC5zcGVjaWFsO251bGwhPShkPWFbaF0pO2grKylpZigoYnx8TShkKSkmJihmPWRbaV0sZz1mJiZqW2ZdKSl7aWYoZy5ldmVudHMpZm9yKGUgaW4gZy5ldmVudHMpbVtlXT9uLmV2ZW50LnJlbW92ZShkLGUpOm4ucmVtb3ZlRXZlbnQoZCxlLGcuaGFuZGxlKTtqW2ZdJiYoZGVsZXRlIGpbZl0sa3x8InVuZGVmaW5lZCI9PXR5cGVvZiBkLnJlbW92ZUF0dHJpYnV0ZT9kW2ldPXZvaWQgMDpkLnJlbW92ZUF0dHJpYnV0ZShpKSxjLnB1c2goZikpfX19KSxuLmZuLmV4dGVuZCh7ZG9tTWFuaXA6SGEsZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiBJYSh0aGlzLGEsITApfSxyZW1vdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIElhKHRoaXMsYSl9LHRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9uLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmFwcGVuZCgodGhpc1swXSYmdGhpc1swXS5vd25lckRvY3VtZW50fHxkKS5jcmVhdGVUZXh0Tm9kZShhKSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIEhhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1DYSh0aGlzLGEpO2IuYXBwZW5kQ2hpbGQoYSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPUNhKHRoaXMsYSk7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcy5uZXh0U2libGluZyl9KX0sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO251bGwhPShhPXRoaXNbYl0pO2IrKyl7MT09PWEubm9kZVR5cGUmJm4uY2xlYW5EYXRhKGVhKGEsITEpKTt3aGlsZShhLmZpcnN0Q2hpbGQpYS5yZW1vdmVDaGlsZChhLmZpcnN0Q2hpbGQpO2Eub3B0aW9ucyYmbi5ub2RlTmFtZShhLCJzZWxlY3QiKSYmKGEub3B0aW9ucy5sZW5ndGg9MCl9cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bnVsbD09YT8hMTphLGI9bnVsbD09Yj9hOmIsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gbi5jbG9uZSh0aGlzLGEsYil9KX0saHRtbDpmdW5jdGlvbihhKXtyZXR1cm4gWSh0aGlzLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXNbMF18fHt9LGM9MCxkPXRoaXMubGVuZ3RoO2lmKHZvaWQgMD09PWEpcmV0dXJuIDE9PT1iLm5vZGVUeXBlP2IuaW5uZXJIVE1MLnJlcGxhY2UodGEsIiIpOnZvaWQgMDtpZigic3RyaW5nIj09dHlwZW9mIGEmJiF3YS50ZXN0KGEpJiYobC5odG1sU2VyaWFsaXplfHwhdWEudGVzdChhKSkmJihsLmxlYWRpbmdXaGl0ZXNwYWNlfHwhYWEudGVzdChhKSkmJiFkYVsoJC5leGVjKGEpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7YT1uLmh0bWxQcmVmaWx0ZXIoYSk7dHJ5e2Zvcig7ZD5jO2MrKyliPXRoaXNbY118fHt9LDE9PT1iLm5vZGVUeXBlJiYobi5jbGVhbkRhdGEoZWEoYiwhMSkpLGIuaW5uZXJIVE1MPWEpO2I9MH1jYXRjaChlKXt9fWImJnRoaXMuZW1wdHkoKS5hcHBlbmQoYSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgYT1bXTtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5wYXJlbnROb2RlO24uaW5BcnJheSh0aGlzLGEpPDAmJihuLmNsZWFuRGF0YShlYSh0aGlzKSksYyYmYy5yZXBsYWNlQ2hpbGQoYix0aGlzKSl9LGEpfX0pLG4uZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhKXtmb3IodmFyIGMsZD0wLGU9W10sZj1uKGEpLGg9Zi5sZW5ndGgtMTtoPj1kO2QrKyljPWQ9PT1oP3RoaXM6dGhpcy5jbG9uZSghMCksbihmW2RdKVtiXShjKSxnLmFwcGx5KGUsYy5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGUpfX0pO3ZhciBKYSxLYT17SFRNTDoiYmxvY2siLEJPRFk6ImJsb2NrIn07ZnVuY3Rpb24gTGEoYSxiKXt2YXIgYz1uKGIuY3JlYXRlRWxlbWVudChhKSkuYXBwZW5kVG8oYi5ib2R5KSxkPW4uY3NzKGNbMF0sImRpc3BsYXkiKTtyZXR1cm4gYy5kZXRhY2goKSxkfWZ1bmN0aW9uIE1hKGEpe3ZhciBiPWQsYz1LYVthXTtyZXR1cm4gY3x8KGM9TGEoYSxiKSwibm9uZSIhPT1jJiZjfHwoSmE9KEphfHxuKCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+IikpLmFwcGVuZFRvKGIuZG9jdW1lbnRFbGVtZW50KSxiPShKYVswXS5jb250ZW50V2luZG93fHxKYVswXS5jb250ZW50RG9jdW1lbnQpLmRvY3VtZW50LGIud3JpdGUoKSxiLmNsb3NlKCksYz1MYShhLGIpLEphLmRldGFjaCgpKSxLYVthXT1jKSxjfXZhciBOYT0vXm1hcmdpbi8sT2E9bmV3IFJlZ0V4cCgiXigiK1QrIikoPyFweClbYS16JV0rJCIsImkiKSxQYT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX0sUWE9ZC5kb2N1bWVudEVsZW1lbnQ7IWZ1bmN0aW9uKCl7dmFyIGIsYyxlLGYsZyxoLGk9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxqPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7aWYoai5zdHlsZSl7ai5zdHlsZS5jc3NUZXh0PSJmbG9hdDpsZWZ0O29wYWNpdHk6LjUiLGwub3BhY2l0eT0iMC41Ij09PWouc3R5bGUub3BhY2l0eSxsLmNzc0Zsb2F0PSEhai5zdHlsZS5jc3NGbG9hdCxqLnN0eWxlLmJhY2tncm91bmRDbGlwPSJjb250ZW50LWJveCIsai5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPSIiLGwuY2xlYXJDbG9uZVN0eWxlPSJjb250ZW50LWJveCI9PT1qLnN0eWxlLmJhY2tncm91bmRDbGlwLGk9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxpLnN0eWxlLmNzc1RleHQ9ImJvcmRlcjowO3dpZHRoOjhweDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7cGFkZGluZzowO21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlIixqLmlubmVySFRNTD0iIixpLmFwcGVuZENoaWxkKGopLGwuYm94U2l6aW5nPSIiPT09ai5zdHlsZS5ib3hTaXppbmd8fCIiPT09ai5zdHlsZS5Nb3pCb3hTaXppbmd8fCIiPT09ai5zdHlsZS5XZWJraXRCb3hTaXppbmcsbi5leHRlbmQobCx7cmVsaWFibGVIaWRkZW5PZmZzZXRzOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWImJmsoKSxmfSxib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksZX0scGl4ZWxNYXJnaW5SaWdodDpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksY30scGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksYn0scmVsaWFibGVNYXJnaW5SaWdodDpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksZ30scmVsaWFibGVNYXJnaW5MZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWImJmsoKSxofX0pO2Z1bmN0aW9uIGsoKXt2YXIgayxsLG09ZC5kb2N1bWVudEVsZW1lbnQ7bS5hcHBlbmRDaGlsZChpKSxqLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO21hcmdpbjphdXRvO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7dG9wOjElO3dpZHRoOjUwJSIsYj1lPWg9ITEsYz1nPSEwLGEuZ2V0Q29tcHV0ZWRTdHlsZSYmKGw9YS5nZXRDb21wdXRlZFN0eWxlKGopLGI9IjElIiE9PShsfHx7fSkudG9wLGg9IjJweCI9PT0obHx8e30pLm1hcmdpbkxlZnQsZT0iNHB4Ij09PShsfHx7d2lkdGg6IjRweCJ9KS53aWR0aCxqLnN0eWxlLm1hcmdpblJpZ2h0PSI1MCUiLGM9IjRweCI9PT0obHx8e21hcmdpblJpZ2h0OiI0cHgifSkubWFyZ2luUmlnaHQsaz1qLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudCgiZGl2IikpLGsuc3R5bGUuY3NzVGV4dD1qLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MCIsay5zdHlsZS5tYXJnaW5SaWdodD1rLnN0eWxlLndpZHRoPSIwIixqLnN0eWxlLndpZHRoPSIxcHgiLGc9IXBhcnNlRmxvYXQoKGEuZ2V0Q29tcHV0ZWRTdHlsZShrKXx8e30pLm1hcmdpblJpZ2h0KSxqLnJlbW92ZUNoaWxkKGspKSxqLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGY9MD09PWouZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgsZiYmKGouc3R5bGUuZGlzcGxheT0iIixqLmlubmVySFRNTD0iPHRhYmxlPjx0cj48dGQ+PC90ZD48dGQ+dDwvdGQ+PC90cj48L3RhYmxlPiIsai5jaGlsZE5vZGVzWzBdLnN0eWxlLmJvcmRlckNvbGxhcHNlPSJzZXBhcmF0ZSIsaz1qLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZCIpLGtbMF0uc3R5bGUuY3NzVGV4dD0ibWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowO2Rpc3BsYXk6bm9uZSIsZj0wPT09a1swXS5vZmZzZXRIZWlnaHQsZiYmKGtbMF0uc3R5bGUuZGlzcGxheT0iIixrWzFdLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGY9MD09PWtbMF0ub2Zmc2V0SGVpZ2h0KSksbS5yZW1vdmVDaGlsZChpKX19fSgpO3ZhciBSYSxTYSxUYT0vXih0b3B8cmlnaHR8Ym90dG9tfGxlZnQpJC87YS5nZXRDb21wdXRlZFN0eWxlPyhSYT1mdW5jdGlvbihiKXt2YXIgYz1iLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7cmV0dXJuIGMmJmMub3BlbmVyfHwoYz1hKSxjLmdldENvbXB1dGVkU3R5bGUoYil9LFNhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8UmEoYSksZz1jP2MuZ2V0UHJvcGVydHlWYWx1ZShiKXx8Y1tiXTp2b2lkIDAsIiIhPT1nJiZ2b2lkIDAhPT1nfHxuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKXx8KGc9bi5zdHlsZShhLGIpKSxjJiYhbC5waXhlbE1hcmdpblJpZ2h0KCkmJk9hLnRlc3QoZykmJk5hLnRlc3QoYikmJihkPWgud2lkdGgsZT1oLm1pbldpZHRoLGY9aC5tYXhXaWR0aCxoLm1pbldpZHRoPWgubWF4V2lkdGg9aC53aWR0aD1nLGc9Yy53aWR0aCxoLndpZHRoPWQsaC5taW5XaWR0aD1lLGgubWF4V2lkdGg9Ziksdm9pZCAwPT09Zz9nOmcrIiJ9KTpRYS5jdXJyZW50U3R5bGUmJihSYT1mdW5jdGlvbihhKXtyZXR1cm4gYS5jdXJyZW50U3R5bGV9LFNhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8UmEoYSksZz1jP2NbYl06dm9pZCAwLG51bGw9PWcmJmgmJmhbYl0mJihnPWhbYl0pLE9hLnRlc3QoZykmJiFUYS50ZXN0KGIpJiYoZD1oLmxlZnQsZT1hLnJ1bnRpbWVTdHlsZSxmPWUmJmUubGVmdCxmJiYoZS5sZWZ0PWEuY3VycmVudFN0eWxlLmxlZnQpLGgubGVmdD0iZm9udFNpemUiPT09Yj8iMWVtIjpnLGc9aC5waXhlbExlZnQrInB4IixoLmxlZnQ9ZCxmJiYoZS5sZWZ0PWYpKSx2b2lkIDA9PT1nP2c6ZysiInx8ImF1dG8ifSk7ZnVuY3Rpb24gVWEoYSxiKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEoKT92b2lkIGRlbGV0ZSB0aGlzLmdldDoodGhpcy5nZXQ9YikuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19dmFyIFZhPS9hbHBoYVwoW14pXSpcKS9pLFdhPS9vcGFjaXR5XHMqPVxzKihbXildKikvaSxYYT0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sWWE9bmV3IFJlZ0V4cCgiXigiK1QrIikoLiopJCIsImkiKSxaYT17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sJGE9e2xldHRlclNwYWNpbmc6IjAiLGZvbnRXZWlnaHQ6IjQwMCJ9LF9hPVsiV2Via2l0IiwiTyIsIk1veiIsIm1zIl0sYWI9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZTtmdW5jdGlvbiBiYihhKXtpZihhIGluIGFiKXJldHVybiBhO3ZhciBiPWEuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKSxjPV9hLmxlbmd0aDt3aGlsZShjLS0paWYoYT1fYVtjXStiLGEgaW4gYWIpcmV0dXJuIGF9ZnVuY3Rpb24gY2IoYSxiKXtmb3IodmFyIGMsZCxlLGY9W10sZz0wLGg9YS5sZW5ndGg7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGZbZ109bi5fZGF0YShkLCJvbGRkaXNwbGF5IiksYz1kLnN0eWxlLmRpc3BsYXksYj8oZltnXXx8Im5vbmUiIT09Y3x8KGQuc3R5bGUuZGlzcGxheT0iIiksIiI9PT1kLnN0eWxlLmRpc3BsYXkmJlcoZCkmJihmW2ddPW4uX2RhdGEoZCwib2xkZGlzcGxheSIsTWEoZC5ub2RlTmFtZSkpKSk6KGU9VyhkKSwoYyYmIm5vbmUiIT09Y3x8IWUpJiZuLl9kYXRhKGQsIm9sZGRpc3BsYXkiLGU/YzpuLmNzcyhkLCJkaXNwbGF5IikpKSk7Zm9yKGc9MDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoYiYmIm5vbmUiIT09ZC5zdHlsZS5kaXNwbGF5JiYiIiE9PWQuc3R5bGUuZGlzcGxheXx8KGQuc3R5bGUuZGlzcGxheT1iP2ZbZ118fCIiOiJub25lIikpO3JldHVybiBhfWZ1bmN0aW9uIGRiKGEsYixjKXt2YXIgZD1ZYS5leGVjKGIpO3JldHVybiBkP01hdGgubWF4KDAsZFsxXS0oY3x8MCkpKyhkWzJdfHwicHgiKTpifWZ1bmN0aW9uIGViKGEsYixjLGQsZSl7Zm9yKHZhciBmPWM9PT0oZD8iYm9yZGVyIjoiY29udGVudCIpPzQ6IndpZHRoIj09PWI/MTowLGc9MDs0PmY7Zis9MikibWFyZ2luIj09PWMmJihnKz1uLmNzcyhhLGMrVltmXSwhMCxlKSksZD8oImNvbnRlbnQiPT09YyYmKGctPW4uY3NzKGEsInBhZGRpbmciK1ZbZl0sITAsZSkpLCJtYXJnaW4iIT09YyYmKGctPW4uY3NzKGEsImJvcmRlciIrVltmXSsiV2lkdGgiLCEwLGUpKSk6KGcrPW4uY3NzKGEsInBhZGRpbmciK1ZbZl0sITAsZSksInBhZGRpbmciIT09YyYmKGcrPW4uY3NzKGEsImJvcmRlciIrVltmXSsiV2lkdGgiLCEwLGUpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gZmIoYSxiLGMpe3ZhciBkPSEwLGU9IndpZHRoIj09PWI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodCxmPVJhKGEpLGc9bC5ib3hTaXppbmcmJiJib3JkZXItYm94Ij09PW4uY3NzKGEsImJveFNpemluZyIsITEsZik7aWYoMD49ZXx8bnVsbD09ZSl7aWYoZT1TYShhLGIsZiksKDA+ZXx8bnVsbD09ZSkmJihlPWEuc3R5bGVbYl0pLE9hLnRlc3QoZSkpcmV0dXJuIGU7ZD1nJiYobC5ib3hTaXppbmdSZWxpYWJsZSgpfHxlPT09YS5zdHlsZVtiXSksZT1wYXJzZUZsb2F0KGUpfHwwfXJldHVybiBlK2ViKGEsYixjfHwoZz8iYm9yZGVyIjoiY29udGVudCIpLGQsZikrInB4In1uLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihhLGIpe2lmKGIpe3ZhciBjPVNhKGEsIm9wYWNpdHkiKTtyZXR1cm4iIj09PWM/IjEiOmN9fX19LGNzc051bWJlcjp7YW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6ITAsY29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6eyJmbG9hdCI6bC5jc3NGbG9hdD8iY3NzRmxvYXQiOiJzdHlsZUZsb2F0In0sc3R5bGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYoYSYmMyE9PWEubm9kZVR5cGUmJjghPT1hLm5vZGVUeXBlJiZhLnN0eWxlKXt2YXIgZSxmLGcsaD1uLmNhbWVsQ2FzZShiKSxpPWEuc3R5bGU7aWYoYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1iYihoKXx8aCksZz1uLmNzc0hvb2tzW2JdfHxuLmNzc0hvb2tzW2hdLHZvaWQgMD09PWMpcmV0dXJuIGcmJiJnZXQiaW4gZyYmdm9pZCAwIT09KGU9Zy5nZXQoYSwhMSxkKSk/ZTppW2JdO2lmKGY9dHlwZW9mIGMsInN0cmluZyI9PT1mJiYoZT1VLmV4ZWMoYykpJiZlWzFdJiYoYz1YKGEsYixlKSxmPSJudW1iZXIiKSxudWxsIT1jJiZjPT09YyYmKCJudW1iZXIiPT09ZiYmKGMrPWUmJmVbM118fChuLmNzc051bWJlcltoXT8iIjoicHgiKSksbC5jbGVhckNsb25lU3R5bGV8fCIiIT09Y3x8MCE9PWIuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwoaVtiXT0iaW5oZXJpdCIpLCEoZyYmInNldCJpbiBnJiZ2b2lkIDA9PT0oYz1nLnNldChhLGMsZCkpKSkpdHJ5e2lbYl09Y31jYXRjaChqKXt9fX0sY3NzOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZyxoPW4uY2FtZWxDYXNlKGIpO3JldHVybiBiPW4uY3NzUHJvcHNbaF18fChuLmNzc1Byb3BzW2hdPWJiKGgpfHxoKSxnPW4uY3NzSG9va3NbYl18fG4uY3NzSG9va3NbaF0sZyYmImdldCJpbiBnJiYoZj1nLmdldChhLCEwLGMpKSx2b2lkIDA9PT1mJiYoZj1TYShhLGIsZCkpLCJub3JtYWwiPT09ZiYmYiBpbiAkYSYmKGY9JGFbYl0pLCIiPT09Y3x8Yz8oZT1wYXJzZUZsb2F0KGYpLGM9PT0hMHx8aXNGaW5pdGUoZSk/ZXx8MDpmKTpmfX0pLG4uZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2JdPXtnZXQ6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBjP1hhLnRlc3Qobi5jc3MoYSwiZGlzcGxheSIpKSYmMD09PWEub2Zmc2V0V2lkdGg/UGEoYSxaYSxmdW5jdGlvbigpe3JldHVybiBmYihhLGIsZCl9KTpmYihhLGIsZCk6dm9pZCAwfSxzZXQ6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWQmJlJhKGEpO3JldHVybiBkYihhLGMsZD9lYihhLGIsZCxsLmJveFNpemluZyYmImJvcmRlci1ib3giPT09bi5jc3MoYSwiYm94U2l6aW5nIiwhMSxlKSxlKTowKX19fSksbC5vcGFjaXR5fHwobi5jc3NIb29rcy5vcGFjaXR5PXtnZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gV2EudGVzdCgoYiYmYS5jdXJyZW50U3R5bGU/YS5jdXJyZW50U3R5bGUuZmlsdGVyOmEuc3R5bGUuZmlsdGVyKXx8IiIpPy4wMSpwYXJzZUZsb2F0KFJlZ0V4cC4kMSkrIiI6Yj8iMSI6IiJ9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjPWEuc3R5bGUsZD1hLmN1cnJlbnRTdHlsZSxlPW4uaXNOdW1lcmljKGIpPyJhbHBoYShvcGFjaXR5PSIrMTAwKmIrIikiOiIiLGY9ZCYmZC5maWx0ZXJ8fGMuZmlsdGVyfHwiIjtjLnpvb209MSwoYj49MXx8IiI9PT1iKSYmIiI9PT1uLnRyaW0oZi5yZXBsYWNlKFZhLCIiKSkmJmMucmVtb3ZlQXR0cmlidXRlJiYoYy5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpLCIiPT09Ynx8ZCYmIWQuZmlsdGVyKXx8KGMuZmlsdGVyPVZhLnRlc3QoZik/Zi5yZXBsYWNlKFZhLGUpOmYrIiAiK2UpfX0pLG4uY3NzSG9va3MubWFyZ2luUmlnaHQ9VWEobC5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/UGEoYSx7ZGlzcGxheToiaW5saW5lLWJsb2NrIn0sU2EsW2EsIm1hcmdpblJpZ2h0Il0pOnZvaWQgMH0pLG4uY3NzSG9va3MubWFyZ2luTGVmdD1VYShsLnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihhLGIpe3JldHVybiBiPyhwYXJzZUZsb2F0KFNhKGEsIm1hcmdpbkxlZnQiKSl8fChuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKT9hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQtUGEoYSx7Cm1hcmdpbkxlZnQ6MH0sZnVuY3Rpb24oKXtyZXR1cm4gYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0fSk6MCkpKyJweCI6dm9pZCAwfSksbi5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3JkZXI6IldpZHRoIn0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9InN0cmluZyI9PXR5cGVvZiBjP2Muc3BsaXQoIiAiKTpbY107ND5kO2QrKyllW2ErVltkXStiXT1mW2RdfHxmW2QtMl18fGZbMF07cmV0dXJuIGV9fSxOYS50ZXN0KGEpfHwobi5jc3NIb29rc1thK2JdLnNldD1kYil9KSxuLmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPXt9LGc9MDtpZihuLmlzQXJyYXkoYikpe2ZvcihkPVJhKGEpLGU9Yi5sZW5ndGg7ZT5nO2crKylmW2JbZ11dPW4uY3NzKGEsYltnXSwhMSxkKTtyZXR1cm4gZn1yZXR1cm4gdm9pZCAwIT09Yz9uLnN0eWxlKGEsYixjKTpuLmNzcyhhLGIpfSxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0sc2hvdzpmdW5jdGlvbigpe3JldHVybiBjYih0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBjYih0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe3JldHVybiJib29sZWFuIj09dHlwZW9mIGE/YT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtXKHRoaXMpP24odGhpcykuc2hvdygpOm4odGhpcykuaGlkZSgpfSl9fSk7ZnVuY3Rpb24gZ2IoYSxiLGMsZCxlKXtyZXR1cm4gbmV3IGdiLnByb3RvdHlwZS5pbml0KGEsYixjLGQsZSl9bi5Ud2Vlbj1nYixnYi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmdiLGluaXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuZWxlbT1hLHRoaXMucHJvcD1jLHRoaXMuZWFzaW5nPWV8fG4uZWFzaW5nLl9kZWZhdWx0LHRoaXMub3B0aW9ucz1iLHRoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKSx0aGlzLmVuZD1kLHRoaXMudW5pdD1mfHwobi5jc3NOdW1iZXJbY10/IiI6InB4Iil9LGN1cjpmdW5jdGlvbigpe3ZhciBhPWdiLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBhJiZhLmdldD9hLmdldCh0aGlzKTpnYi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oYSl7dmFyIGIsYz1nYi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5vcHRpb25zLmR1cmF0aW9uP3RoaXMucG9zPWI9bi5lYXNpbmdbdGhpcy5lYXNpbmddKGEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmEsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6dGhpcy5wb3M9Yj1hLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSpiK3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLGMmJmMuc2V0P2Muc2V0KHRoaXMpOmdiLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LGdiLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1nYi5wcm90b3R5cGUsZ2IucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiAxIT09YS5lbGVtLm5vZGVUeXBlfHxudWxsIT1hLmVsZW1bYS5wcm9wXSYmbnVsbD09YS5lbGVtLnN0eWxlW2EucHJvcF0/YS5lbGVtW2EucHJvcF06KGI9bi5jc3MoYS5lbGVtLGEucHJvcCwiIiksYiYmImF1dG8iIT09Yj9iOjApfSxzZXQ6ZnVuY3Rpb24oYSl7bi5meC5zdGVwW2EucHJvcF0/bi5meC5zdGVwW2EucHJvcF0oYSk6MSE9PWEuZWxlbS5ub2RlVHlwZXx8bnVsbD09YS5lbGVtLnN0eWxlW24uY3NzUHJvcHNbYS5wcm9wXV0mJiFuLmNzc0hvb2tzW2EucHJvcF0/YS5lbGVtW2EucHJvcF09YS5ub3c6bi5zdHlsZShhLmVsZW0sYS5wcm9wLGEubm93K2EudW5pdCl9fX0sZ2IucHJvcEhvb2tzLnNjcm9sbFRvcD1nYi5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGEpe2EuZWxlbS5ub2RlVHlwZSYmYS5lbGVtLnBhcmVudE5vZGUmJihhLmVsZW1bYS5wcm9wXT1hLm5vdyl9fSxuLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzd2luZzpmdW5jdGlvbihhKXtyZXR1cm4uNS1NYXRoLmNvcyhhKk1hdGguUEkpLzJ9LF9kZWZhdWx0OiJzd2luZyJ9LG4uZng9Z2IucHJvdG90eXBlLmluaXQsbi5meC5zdGVwPXt9O3ZhciBoYixpYixqYj0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sa2I9L3F1ZXVlSG9va3MkLztmdW5jdGlvbiBsYigpe3JldHVybiBhLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtoYj12b2lkIDB9KSxoYj1uLm5vdygpfWZ1bmN0aW9uIG1iKGEsYil7dmFyIGMsZD17aGVpZ2h0OmF9LGU9MDtmb3IoYj1iPzE6MDs0PmU7ZSs9Mi1iKWM9VltlXSxkWyJtYXJnaW4iK2NdPWRbInBhZGRpbmciK2NdPWE7cmV0dXJuIGImJihkLm9wYWNpdHk9ZC53aWR0aD1hKSxkfWZ1bmN0aW9uIG5iKGEsYixjKXtmb3IodmFyIGQsZT0ocWIudHdlZW5lcnNbYl18fFtdKS5jb25jYXQocWIudHdlZW5lcnNbIioiXSksZj0wLGc9ZS5sZW5ndGg7Zz5mO2YrKylpZihkPWVbZl0uY2FsbChjLGIsYSkpcmV0dXJuIGR9ZnVuY3Rpb24gb2IoYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGssbT10aGlzLG89e30scD1hLnN0eWxlLHE9YS5ub2RlVHlwZSYmVyhhKSxyPW4uX2RhdGEoYSwiZnhzaG93Iik7Yy5xdWV1ZXx8KGg9bi5fcXVldWVIb29rcyhhLCJmeCIpLG51bGw9PWgudW5xdWV1ZWQmJihoLnVucXVldWVkPTAsaT1oLmVtcHR5LmZpcmUsaC5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7aC51bnF1ZXVlZHx8aSgpfSksaC51bnF1ZXVlZCsrLG0uYWx3YXlzKGZ1bmN0aW9uKCl7bS5hbHdheXMoZnVuY3Rpb24oKXtoLnVucXVldWVkLS0sbi5xdWV1ZShhLCJmeCIpLmxlbmd0aHx8aC5lbXB0eS5maXJlKCl9KX0pKSwxPT09YS5ub2RlVHlwZSYmKCJoZWlnaHQiaW4gYnx8IndpZHRoImluIGIpJiYoYy5vdmVyZmxvdz1bcC5vdmVyZmxvdyxwLm92ZXJmbG93WCxwLm92ZXJmbG93WV0saj1uLmNzcyhhLCJkaXNwbGF5Iiksaz0ibm9uZSI9PT1qP24uX2RhdGEoYSwib2xkZGlzcGxheSIpfHxNYShhLm5vZGVOYW1lKTpqLCJpbmxpbmUiPT09ayYmIm5vbmUiPT09bi5jc3MoYSwiZmxvYXQiKSYmKGwuaW5saW5lQmxvY2tOZWVkc0xheW91dCYmImlubGluZSIhPT1NYShhLm5vZGVOYW1lKT9wLnpvb209MTpwLmRpc3BsYXk9ImlubGluZS1ibG9jayIpKSxjLm92ZXJmbG93JiYocC5vdmVyZmxvdz0iaGlkZGVuIixsLnNocmlua1dyYXBCbG9ja3MoKXx8bS5hbHdheXMoZnVuY3Rpb24oKXtwLm92ZXJmbG93PWMub3ZlcmZsb3dbMF0scC5vdmVyZmxvd1g9Yy5vdmVyZmxvd1sxXSxwLm92ZXJmbG93WT1jLm92ZXJmbG93WzJdfSkpO2ZvcihkIGluIGIpaWYoZT1iW2RdLGpiLmV4ZWMoZSkpe2lmKGRlbGV0ZSBiW2RdLGY9Znx8InRvZ2dsZSI9PT1lLGU9PT0ocT8iaGlkZSI6InNob3ciKSl7aWYoInNob3ciIT09ZXx8IXJ8fHZvaWQgMD09PXJbZF0pY29udGludWU7cT0hMH1vW2RdPXImJnJbZF18fG4uc3R5bGUoYSxkKX1lbHNlIGo9dm9pZCAwO2lmKG4uaXNFbXB0eU9iamVjdChvKSkiaW5saW5lIj09PSgibm9uZSI9PT1qP01hKGEubm9kZU5hbWUpOmopJiYocC5kaXNwbGF5PWopO2Vsc2V7cj8iaGlkZGVuImluIHImJihxPXIuaGlkZGVuKTpyPW4uX2RhdGEoYSwiZnhzaG93Iix7fSksZiYmKHIuaGlkZGVuPSFxKSxxP24oYSkuc2hvdygpOm0uZG9uZShmdW5jdGlvbigpe24oYSkuaGlkZSgpfSksbS5kb25lKGZ1bmN0aW9uKCl7dmFyIGI7bi5fcmVtb3ZlRGF0YShhLCJmeHNob3ciKTtmb3IoYiBpbiBvKW4uc3R5bGUoYSxiLG9bYl0pfSk7Zm9yKGQgaW4gbylnPW5iKHE/cltkXTowLGQsbSksZCBpbiByfHwocltkXT1nLnN0YXJ0LHEmJihnLmVuZD1nLnN0YXJ0LGcuc3RhcnQ9IndpZHRoIj09PWR8fCJoZWlnaHQiPT09ZD8xOjApKX19ZnVuY3Rpb24gcGIoYSxiKXt2YXIgYyxkLGUsZixnO2ZvcihjIGluIGEpaWYoZD1uLmNhbWVsQ2FzZShjKSxlPWJbZF0sZj1hW2NdLG4uaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9bi5jc3NIb29rc1tkXSxnJiYiZXhwYW5kImluIGcpe2Y9Zy5leHBhbmQoZiksZGVsZXRlIGFbZF07Zm9yKGMgaW4gZiljIGluIGF8fChhW2NdPWZbY10sYltjXT1lKX1lbHNlIGJbZF09ZX1mdW5jdGlvbiBxYihhLGIsYyl7dmFyIGQsZSxmPTAsZz1xYi5wcmVmaWx0ZXJzLmxlbmd0aCxoPW4uRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPWhifHxsYigpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtpPmc7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksMT5mJiZpP2M6KGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpuLmV4dGVuZCh7fSxiKSxvcHRzOm4uZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9LGVhc2luZzpuLmVhc2luZy5fZGVmYXVsdH0sYyksb3JpZ2luYWxQcm9wZXJ0aWVzOmIsb3JpZ2luYWxPcHRpb25zOmMsc3RhcnRUaW1lOmhifHxsYigpLGR1cmF0aW9uOmMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9bi5Ud2VlbihhLGoub3B0cyxiLGMsai5vcHRzLnNwZWNpYWxFYXNpbmdbYl18fGoub3B0cy5lYXNpbmcpO3JldHVybiBqLnR3ZWVucy5wdXNoKGQpLGR9LHN0b3A6ZnVuY3Rpb24oYil7dmFyIGM9MCxkPWI/ai50d2VlbnMubGVuZ3RoOjA7aWYoZSlyZXR1cm4gdGhpcztmb3IoZT0hMDtkPmM7YysrKWoudHdlZW5zW2NdLnJ1bigxKTtyZXR1cm4gYj8oaC5ub3RpZnlXaXRoKGEsW2osMSwwXSksaC5yZXNvbHZlV2l0aChhLFtqLGJdKSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihwYihrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtnPmY7ZisrKWlmKGQ9cWIucHJlZmlsdGVyc1tmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIG4uaXNGdW5jdGlvbihkLnN0b3ApJiYobi5fcXVldWVIb29rcyhqLmVsZW0sai5vcHRzLnF1ZXVlKS5zdG9wPW4ucHJveHkoZC5zdG9wLGQpKSxkO3JldHVybiBuLm1hcChrLG5iLGopLG4uaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLG4uZngudGltZXIobi5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksai5wcm9ncmVzcyhqLm9wdHMucHJvZ3Jlc3MpLmRvbmUoai5vcHRzLmRvbmUsai5vcHRzLmNvbXBsZXRlKS5mYWlsKGoub3B0cy5mYWlsKS5hbHdheXMoai5vcHRzLmFsd2F5cyl9bi5BbmltYXRpb249bi5leHRlbmQocWIse3R3ZWVuZXJzOnsiKiI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVUd2VlbihhLGIpO3JldHVybiBYKGMuZWxlbSxhLFUuZXhlYyhiKSxjKSxjfV19LHR3ZWVuZXI6ZnVuY3Rpb24oYSxiKXtuLmlzRnVuY3Rpb24oYSk/KGI9YSxhPVsiKiJdKTphPWEubWF0Y2goRyk7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYz1hW2RdLHFiLnR3ZWVuZXJzW2NdPXFiLnR3ZWVuZXJzW2NdfHxbXSxxYi50d2VlbmVyc1tjXS51bnNoaWZ0KGIpfSxwcmVmaWx0ZXJzOltvYl0scHJlZmlsdGVyOmZ1bmN0aW9uKGEsYil7Yj9xYi5wcmVmaWx0ZXJzLnVuc2hpZnQoYSk6cWIucHJlZmlsdGVycy5wdXNoKGEpfX0pLG4uc3BlZWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEmJiJvYmplY3QiPT10eXBlb2YgYT9uLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fG4uaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhbi5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gZC5kdXJhdGlvbj1uLmZ4Lm9mZj8wOiJudW1iZXIiPT10eXBlb2YgZC5kdXJhdGlvbj9kLmR1cmF0aW9uOmQuZHVyYXRpb24gaW4gbi5meC5zcGVlZHM/bi5meC5zcGVlZHNbZC5kdXJhdGlvbl06bi5meC5zcGVlZHMuX2RlZmF1bHQsbnVsbCE9ZC5xdWV1ZSYmZC5xdWV1ZSE9PSEwfHwoZC5xdWV1ZT0iZngiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtuLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJm4uZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxuLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihXKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OmJ9LGEsYyxkKX0sYW5pbWF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uLmlzRW1wdHlPYmplY3QoYSksZj1uLnNwZWVkKGIsYyxkKSxnPWZ1bmN0aW9uKCl7dmFyIGI9cWIodGhpcyxuLmV4dGVuZCh7fSxhKSxmKTsoZXx8bi5fZGF0YSh0aGlzLCJmaW5pc2giKSkmJmIuc3RvcCghMCl9O3JldHVybiBnLmZpbmlzaD1nLGV8fGYucXVldWU9PT0hMT90aGlzLmVhY2goZyk6dGhpcy5xdWV1ZShmLnF1ZXVlLGcpfSxzdG9wOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihhKXt2YXIgYj1hLnN0b3A7ZGVsZXRlIGEuc3RvcCxiKGMpfTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGEmJihjPWIsYj1hLGE9dm9pZCAwKSxiJiZhIT09ITEmJnRoaXMucXVldWUoYXx8ImZ4IixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9ITAsZT1udWxsIT1hJiZhKyJxdWV1ZUhvb2tzIixmPW4udGltZXJzLGc9bi5fZGF0YSh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZrYi50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyFiJiZjfHxuLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8ImZ4IiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsYz1uLl9kYXRhKHRoaXMpLGQ9Y1thKyJxdWV1ZSJdLGU9Y1thKyJxdWV1ZUhvb2tzIl0sZj1uLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsbi5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxuLmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9bi5mbltiXTtuLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8ImJvb2xlYW4iPT10eXBlb2YgYT9jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUobWIoYiwhMCksYSxkLGUpfX0pLG4uZWFjaCh7c2xpZGVEb3duOm1iKCJzaG93Iiksc2xpZGVVcDptYigiaGlkZSIpLHNsaWRlVG9nZ2xlOm1iKCJ0b2dnbGUiKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhLGMsZCl7cmV0dXJuIHRoaXMuYW5pbWF0ZShiLGEsYyxkKX19KSxuLnRpbWVycz1bXSxuLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgYSxiPW4udGltZXJzLGM9MDtmb3IoaGI9bi5ub3coKTtjPGIubGVuZ3RoO2MrKylhPWJbY10sYSgpfHxiW2NdIT09YXx8Yi5zcGxpY2UoYy0tLDEpO2IubGVuZ3RofHxuLmZ4LnN0b3AoKSxoYj12b2lkIDB9LG4uZngudGltZXI9ZnVuY3Rpb24oYSl7bi50aW1lcnMucHVzaChhKSxhKCk/bi5meC5zdGFydCgpOm4udGltZXJzLnBvcCgpfSxuLmZ4LmludGVydmFsPTEzLG4uZnguc3RhcnQ9ZnVuY3Rpb24oKXtpYnx8KGliPWEuc2V0SW50ZXJ2YWwobi5meC50aWNrLG4uZnguaW50ZXJ2YWwpKX0sbi5meC5zdG9wPWZ1bmN0aW9uKCl7YS5jbGVhckludGVydmFsKGliKSxpYj1udWxsfSxuLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxuLmZuLmRlbGF5PWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGI9bi5meD9uLmZ4LnNwZWVkc1tiXXx8YjpiLGM9Y3x8ImZ4Iix0aGlzLnF1ZXVlKGMsZnVuY3Rpb24oYyxkKXt2YXIgZT1hLnNldFRpbWVvdXQoYyxiKTtkLnN0b3A9ZnVuY3Rpb24oKXthLmNsZWFyVGltZW91dChlKX19KX0sZnVuY3Rpb24oKXt2YXIgYSxiPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxjPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZT1kLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLGY9ZS5hcHBlbmRDaGlsZChkLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtjPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksYy5zZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIsInQiKSxjLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IixhPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXSxiLnNldEF0dHJpYnV0ZSgidHlwZSIsImNoZWNrYm94IiksYy5hcHBlbmRDaGlsZChiKSxhPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXSxhLnN0eWxlLmNzc1RleHQ9InRvcDoxcHgiLGwuZ2V0U2V0QXR0cmlidXRlPSJ0IiE9PWMuY2xhc3NOYW1lLGwuc3R5bGU9L3RvcC8udGVzdChhLmdldEF0dHJpYnV0ZSgic3R5bGUiKSksbC5ocmVmTm9ybWFsaXplZD0iL2EiPT09YS5nZXRBdHRyaWJ1dGUoImhyZWYiKSxsLmNoZWNrT249ISFiLnZhbHVlLGwub3B0U2VsZWN0ZWQ9Zi5zZWxlY3RlZCxsLmVuY3R5cGU9ISFkLmNyZWF0ZUVsZW1lbnQoImZvcm0iKS5lbmN0eXBlLGUuZGlzYWJsZWQ9ITAsbC5vcHREaXNhYmxlZD0hZi5kaXNhYmxlZCxiPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxiLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSxsLmlucHV0PSIiPT09Yi5nZXRBdHRyaWJ1dGUoInZhbHVlIiksYi52YWx1ZT0idCIsYi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJyYWRpbyIpLGwucmFkaW9WYWx1ZT0idCI9PT1iLnZhbHVlfSgpO3ZhciByYj0vXHIvZyxzYj0vW1x4MjBcdFxyXG5cZl0rL2c7bi5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT10aGlzWzBdO3tpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBkPW4uaXNGdW5jdGlvbihhKSx0aGlzLmVhY2goZnVuY3Rpb24oYyl7dmFyIGU7MT09PXRoaXMubm9kZVR5cGUmJihlPWQ/YS5jYWxsKHRoaXMsYyxuKHRoaXMpLnZhbCgpKTphLG51bGw9PWU/ZT0iIjoibnVtYmVyIj09dHlwZW9mIGU/ZSs9IiI6bi5pc0FycmF5KGUpJiYoZT1uLm1hcChlLGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hPyIiOmErIiJ9KSksYj1uLnZhbEhvb2tzW3RoaXMudHlwZV18fG4udmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiYic2V0ImluIGImJnZvaWQgMCE9PWIuc2V0KHRoaXMsZSwidmFsdWUiKXx8KHRoaXMudmFsdWU9ZSkpfSk7aWYoZSlyZXR1cm4gYj1uLnZhbEhvb2tzW2UudHlwZV18fG4udmFsSG9va3NbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiYiZ2V0ImluIGImJnZvaWQgMCE9PShjPWIuZ2V0KGUsInZhbHVlIikpP2M6KGM9ZS52YWx1ZSwic3RyaW5nIj09dHlwZW9mIGM/Yy5yZXBsYWNlKHJiLCIiKTpudWxsPT1jPyIiOmMpfX19KSxuLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPW4uZmluZC5hdHRyKGEsInZhbHVlIik7cmV0dXJuIG51bGwhPWI/YjpuLnRyaW0obi50ZXh0KGEpKS5yZXBsYWNlKHNiLCIgIil9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkPWEub3B0aW9ucyxlPWEuc2VsZWN0ZWRJbmRleCxmPSJzZWxlY3Qtb25lIj09PWEudHlwZXx8MD5lLGc9Zj9udWxsOltdLGg9Zj9lKzE6ZC5sZW5ndGgsaT0wPmU/aDpmP2U6MDtoPmk7aSsrKWlmKGM9ZFtpXSwoYy5zZWxlY3RlZHx8aT09PWUpJiYobC5vcHREaXNhYmxlZD8hYy5kaXNhYmxlZDpudWxsPT09Yy5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikpJiYoIWMucGFyZW50Tm9kZS5kaXNhYmxlZHx8IW4ubm9kZU5hbWUoYy5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7aWYoYj1uKGMpLnZhbCgpLGYpcmV0dXJuIGI7Zy5wdXNoKGIpfXJldHVybiBnfSxzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9YS5vcHRpb25zLGY9bi5tYWtlQXJyYXkoYiksZz1lLmxlbmd0aDt3aGlsZShnLS0paWYoZD1lW2ddLG4uaW5BcnJheShuLnZhbEhvb2tzLm9wdGlvbi5nZXQoZCksZik+LTEpdHJ5e2Quc2VsZWN0ZWQ9Yz0hMH1jYXRjaChoKXtkLnNjcm9sbEhlaWdodH1lbHNlIGQuc2VsZWN0ZWQ9ITE7cmV0dXJuIGN8fChhLnNlbGVjdGVkSW5kZXg9LTEpLGV9fX19KSxuLmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXtuLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5pc0FycmF5KGIpP2EuY2hlY2tlZD1uLmluQXJyYXkobihhKS52YWwoKSxiKT4tMTp2b2lkIDB9fSxsLmNoZWNrT258fChuLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09PWEuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPyJvbiI6YS52YWx1ZX0pfSk7dmFyIHRiLHViLHZiPW4uZXhwci5hdHRySGFuZGxlLHdiPS9eKD86Y2hlY2tlZHxzZWxlY3RlZCkkL2kseGI9bC5nZXRTZXRBdHRyaWJ1dGUseWI9bC5pbnB1dDtuLmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIpe3JldHVybiBZKHRoaXMsbi5hdHRyLGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLnJlbW92ZUF0dHIodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9YS5ub2RlVHlwZTtpZigzIT09ZiYmOCE9PWYmJjIhPT1mKXJldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgYS5nZXRBdHRyaWJ1dGU/bi5wcm9wKGEsYixjKTooMT09PWYmJm4uaXNYTUxEb2MoYSl8fChiPWIudG9Mb3dlckNhc2UoKSxlPW4uYXR0ckhvb2tzW2JdfHwobi5leHByLm1hdGNoLmJvb2wudGVzdChiKT91Yjp0YikpLHZvaWQgMCE9PWM/bnVsbD09PWM/dm9pZCBuLnJlbW92ZUF0dHIoYSxiKTplJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDooYS5zZXRBdHRyaWJ1dGUoYixjKyIiKSxjKTplJiYiZ2V0ImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOihkPW4uZmluZC5hdHRyKGEsYiksbnVsbD09ZD92b2lkIDA6ZCkpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihhLGIpe2lmKCFsLnJhZGlvVmFsdWUmJiJyYWRpbyI9PT1iJiZuLm5vZGVOYW1lKGEsImlucHV0Iikpe3ZhciBjPWEudmFsdWU7cmV0dXJuIGEuc2V0QXR0cmlidXRlKCJ0eXBlIixiKSxjJiYoYS52YWx1ZT1jKSxifX19fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPTAsZj1iJiZiLm1hdGNoKEcpO2lmKGYmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZltlKytdKWQ9bi5wcm9wRml4W2NdfHxjLG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYyk/eWImJnhifHwhd2IudGVzdChjKT9hW2RdPSExOmFbbi5jYW1lbENhc2UoImRlZmF1bHQtIitjKV09YVtkXT0hMTpuLmF0dHIoYSxjLCIiKSxhLnJlbW92ZUF0dHJpYnV0ZSh4Yj9jOmQpfX0pLHViPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPT09ITE/bi5yZW1vdmVBdHRyKGEsYyk6eWImJnhifHwhd2IudGVzdChjKT9hLnNldEF0dHJpYnV0ZSgheGImJm4ucHJvcEZpeFtjXXx8YyxjKTphW24uY2FtZWxDYXNlKCJkZWZhdWx0LSIrYyldPWFbY109ITAsY319LG4uZWFjaChuLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihhLGIpe3ZhciBjPXZiW2JdfHxuLmZpbmQuYXR0cjt5YiYmeGJ8fCF3Yi50ZXN0KGIpP3ZiW2JdPWZ1bmN0aW9uKGEsYixkKXt2YXIgZSxmO3JldHVybiBkfHwoZj12YltiXSx2YltiXT1lLGU9bnVsbCE9YyhhLGIsZCk/Yi50b0xvd2VyQ2FzZSgpOm51bGwsdmJbYl09ZiksZX06dmJbYl09ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjP3ZvaWQgMDphW24uY2FtZWxDYXNlKCJkZWZhdWx0LSIrYildP2IudG9Mb3dlckNhc2UoKTpudWxsfX0pLHliJiZ4Ynx8KG4uYXR0ckhvb2tzLnZhbHVlPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLm5vZGVOYW1lKGEsImlucHV0Iik/dm9pZChhLmRlZmF1bHRWYWx1ZT1iKTp0YiYmdGIuc2V0KGEsYixjKX19KSx4Ynx8KHRiPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEuZ2V0QXR0cmlidXRlTm9kZShjKTtyZXR1cm4gZHx8YS5zZXRBdHRyaWJ1dGVOb2RlKGQ9YS5vd25lckRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZShjKSksZC52YWx1ZT1iKz0iIiwidmFsdWUiPT09Y3x8Yj09PWEuZ2V0QXR0cmlidXRlKGMpP2I6dm9pZCAwfX0sdmIuaWQ9dmIubmFtZT12Yi5jb29yZHM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBjP3ZvaWQgMDooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiYiIiE9PWQudmFsdWU/ZC52YWx1ZTpudWxsfSxuLnZhbEhvb2tzLmJ1dHRvbj17Z2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpO3JldHVybiBjJiZjLnNwZWNpZmllZD9jLnZhbHVlOnZvaWQgMH0sc2V0OnRiLnNldH0sbi5hdHRySG9va3MuY29udGVudGVkaXRhYmxlPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3RiLnNldChhLCIiPT09Yj8hMTpiLGMpfX0sbi5lYWNoKFsid2lkdGgiLCJoZWlnaHQiXSxmdW5jdGlvbihhLGIpe24uYXR0ckhvb2tzW2JdPXtzZXQ6ZnVuY3Rpb24oYSxjKXtyZXR1cm4iIj09PWM/KGEuc2V0QXR0cmlidXRlKGIsImF1dG8iKSxjKTp2b2lkIDB9fX0pKSxsLnN0eWxlfHwobi5hdHRySG9va3Muc3R5bGU9e2dldDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdHlsZS5jc3NUZXh0fHx2b2lkIDB9LHNldDpmdW5jdGlvbihhLGIpe3JldHVybiBhLnN0eWxlLmNzc1RleHQ9YisiIn19KTt2YXIgemI9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkL2ksQWI9L14oPzphfGFyZWEpJC9pO24uZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFkodGhpcyxuLnByb3AsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9bi5wcm9wRml4W2FdfHxhLHRoaXMuZWFjaChmdW5jdGlvbigpe3RyeXt0aGlzW2FdPXZvaWQgMCxkZWxldGUgdGhpc1thXX1jYXRjaChiKXt9fSl9fSksbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLm5vZGVUeXBlO2lmKDMhPT1mJiY4IT09ZiYmMiE9PWYpcmV0dXJuIDE9PT1mJiZuLmlzWE1MRG9jKGEpfHwoYj1uLnByb3BGaXhbYl18fGIsZT1uLnByb3BIb29rc1tiXSksdm9pZCAwIT09Yz9lJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDphW2JdPWM6ZSYmImdldCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDphW2JdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bi5maW5kLmF0dHIoYSwidGFiaW5kZXgiKTtyZXR1cm4gYj9wYXJzZUludChiLDEwKTp6Yi50ZXN0KGEubm9kZU5hbWUpfHxBYi50ZXN0KGEubm9kZU5hbWUpJiZhLmhyZWY/MDotMX19fSxwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn19KSxsLmhyZWZOb3JtYWxpemVkfHxuLmVhY2goWyJocmVmIiwic3JjIl0sZnVuY3Rpb24oYSxiKXtuLnByb3BIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShiLDQpfX19KSxsLm9wdFNlbGVjdGVkfHwobi5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJihiLnNlbGVjdGVkSW5kZXgsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCksbnVsbH0sc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtiJiYoYi5zZWxlY3RlZEluZGV4LGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpfX0pLG4uZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7bi5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pLGwuZW5jdHlwZXx8KG4ucHJvcEZpeC5lbmN0eXBlPSJlbmNvZGluZyIpO3ZhciBCYj0vW1x0XHJcblxmXS9nO2Z1bmN0aW9uIENiKGEpe3JldHVybiBuLmF0dHIoYSwiY2xhc3MiKXx8IiJ9bi5mbi5leHRlbmQoe2FkZENsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGk9MDtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLmFkZENsYXNzKGEuY2FsbCh0aGlzLGIsQ2IodGhpcykpKX0pO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEcpfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPUNiKGMpLGQ9MT09PWMubm9kZVR5cGUmJigiICIrZSsiICIpLnJlcGxhY2UoQmIsIiAiKSl7Zz0wO3doaWxlKGY9YltnKytdKWQuaW5kZXhPZigiICIrZisiICIpPDAmJihkKz1mKyIgIik7aD1uLnRyaW0oZCksZSE9PWgmJm4uYXR0cihjLCJjbGFzcyIsaCl9fXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpPTA7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5yZW1vdmVDbGFzcyhhLmNhbGwodGhpcyxiLENiKHRoaXMpKSl9KTtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5hdHRyKCJjbGFzcyIsIiIpO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEcpfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPUNiKGMpLGQ9MT09PWMubm9kZVR5cGUmJigiICIrZSsiICIpLnJlcGxhY2UoQmIsIiAiKSl7Zz0wO3doaWxlKGY9YltnKytdKXdoaWxlKGQuaW5kZXhPZigiICIrZisiICIpPi0xKWQ9ZC5yZXBsYWNlKCIgIitmKyIgIiwiICIpO2g9bi50cmltKGQpLGUhPT1oJiZuLmF0dHIoYywiY2xhc3MiLGgpfX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz10eXBlb2YgYTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBiJiYic3RyaW5nIj09PWM/Yj90aGlzLmFkZENsYXNzKGEpOnRoaXMucmVtb3ZlQ2xhc3MoYSk6bi5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihjKXtuKHRoaXMpLnRvZ2dsZUNsYXNzKGEuY2FsbCh0aGlzLGMsQ2IodGhpcyksYiksYil9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYixkLGUsZjtpZigic3RyaW5nIj09PWMpe2Q9MCxlPW4odGhpcyksZj1hLm1hdGNoKEcpfHxbXTt3aGlsZShiPWZbZCsrXSllLmhhc0NsYXNzKGIpP2UucmVtb3ZlQ2xhc3MoYik6ZS5hZGRDbGFzcyhiKX1lbHNlIHZvaWQgMCE9PWEmJiJib29sZWFuIiE9PWN8fChiPUNiKHRoaXMpLGImJm4uX2RhdGEodGhpcywiX19jbGFzc05hbWVfXyIsYiksbi5hdHRyKHRoaXMsImNsYXNzIixifHxhPT09ITE/IiI6bi5fZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIiKSl9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPTA7Yj0iICIrYSsiICI7d2hpbGUoYz10aGlzW2QrK10paWYoMT09PWMubm9kZVR5cGUmJigiICIrQ2IoYykrIiAiKS5yZXBsYWNlKEJiLCIgIikuaW5kZXhPZihiKT4tMSlyZXR1cm4hMDtyZXR1cm4hMX19KSxuLmVhY2goImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnUiLnNwbGl0KCIgIiksZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKGIsbnVsbCxhLGMpOnRoaXMudHJpZ2dlcihiKX19KSxuLmZuLmV4dGVuZCh7aG92ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGEpLm1vdXNlbGVhdmUoYnx8YSl9fSk7dmFyIERiPWEubG9jYXRpb24sRWI9bi5ub3coKSxGYj0vXD8vLEdiPS8oLCl8KFxbfHspfCh9fF0pfCIoPzpbXiJcXFxyXG5dfFxcWyJcXFwvYmZucnRdfFxcdVtcZGEtZkEtRl17NH0pKiJccyo6P3x0cnVlfGZhbHNlfG51bGx8LT8oPyEwXGQpXGQrKD86XC5cZCt8KSg/OltlRV1bKy1dP1xkK3wpL2c7bi5wYXJzZUpTT049ZnVuY3Rpb24oYil7aWYoYS5KU09OJiZhLkpTT04ucGFyc2UpcmV0dXJuIGEuSlNPTi5wYXJzZShiKyIiKTt2YXIgYyxkPW51bGwsZT1uLnRyaW0oYisiIik7cmV0dXJuIGUmJiFuLnRyaW0oZS5yZXBsYWNlKEdiLGZ1bmN0aW9uKGEsYixlLGYpe3JldHVybiBjJiZiJiYoZD0wKSwwPT09ZD9hOihjPWV8fGIsZCs9IWYtIWUsIiIpfSkpP0Z1bmN0aW9uKCJyZXR1cm4gIitlKSgpOm4uZXJyb3IoIkludmFsaWQgSlNPTjogIitiKX0sbi5wYXJzZVhNTD1mdW5jdGlvbihiKXt2YXIgYyxkO2lmKCFifHwic3RyaW5nIiE9dHlwZW9mIGIpcmV0dXJuIG51bGw7dHJ5e2EuRE9NUGFyc2VyPyhkPW5ldyBhLkRPTVBhcnNlcixjPWQucGFyc2VGcm9tU3RyaW5nKGIsInRleHQveG1sIikpOihjPW5ldyBhLkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxET00iKSxjLmFzeW5jPSJmYWxzZSIsYy5sb2FkWE1MKGIpKX1jYXRjaChlKXtjPXZvaWQgMH1yZXR1cm4gYyYmYy5kb2N1bWVudEVsZW1lbnQmJiFjLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aHx8bi5lcnJvcigiSW52YWxpZCBYTUw6ICIrYiksY307dmFyIEhiPS8jLiokLyxJYj0vKFs/Jl0pXz1bXiZdKi8sSmI9L14oLio/KTpbIFx0XSooW15cclxuXSopXHI/JC9nbSxLYj0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxMYj0vXig/OkdFVHxIRUFEKSQvLE1iPS9eXC9cLy8sTmI9L14oW1x3ListXSs6KSg/OlwvXC8oPzpbXlwvPyNdKkB8KShbXlwvPyM6XSopKD86OihcZCspfCl8KS8sT2I9e30sUGI9e30sUWI9IiovIi5jb25jYXQoIioiKSxSYj1EYi5ocmVmLFNiPU5iLmV4ZWMoUmIudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIFRiKGEpe3JldHVybiBmdW5jdGlvbihiLGMpeyJzdHJpbmciIT10eXBlb2YgYiYmKGM9YixiPSIqIik7dmFyIGQsZT0wLGY9Yi50b0xvd2VyQ2FzZSgpLm1hdGNoKEcpfHxbXTtpZihuLmlzRnVuY3Rpb24oYykpd2hpbGUoZD1mW2UrK10pIisiPT09ZC5jaGFyQXQoMCk/KGQ9ZC5zbGljZSgxKXx8IioiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24gVWIoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09UGI7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxuLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlWyIqIl0mJmcoIioiKX1mdW5jdGlvbiBWYihhLGIpe3ZhciBjLGQsZT1uLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGQgaW4gYil2b2lkIDAhPT1iW2RdJiYoKGVbZF0/YTpjfHwoYz17fSkpW2RdPWJbZF0pO3JldHVybiBjJiZuLmV4dGVuZCghMCxhLGMpLGF9ZnVuY3Rpb24gV2IoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKCIqIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWUmJihlPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihlKWZvcihnIGluIGgpaWYoaFtnXSYmaFtnXS50ZXN0KGUpKXtpLnVuc2hpZnQoZyk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGcgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tnKyIgIitpWzBdXSl7Zj1nO2JyZWFrfWR8fChkPWcpfWY9Znx8ZH1yZXR1cm4gZj8oZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdKTp2b2lkIDB9ZnVuY3Rpb24gWGIoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZigiKiI9PT1mKWY9aTtlbHNlIGlmKCIqIiE9PWkmJmkhPT1mKXtpZihnPWpbaSsiICIrZl18fGpbIiogIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdCgiICIpLGhbMV09PT1mJiYoZz1qW2krIiAiK2hbMF1dfHxqWyIqICIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhWyJ0aHJvd3MiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmc/bDoiTm8gY29udmVyc2lvbiBmcm9tICIraSsiIHRvICIrZn19fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTpifX1uLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6UmIsdHlwZToiR0VUIixpc0xvY2FsOktiLnRlc3QoU2JbMV0pLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZToiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IixhY2NlcHRzOnsiKiI6UWIsdGV4dDoidGV4dC9wbGFpbiIsaHRtbDoidGV4dC9odG1sIix4bWw6ImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwiLGpzb246ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCJ9LGNvbnRlbnRzOnt4bWw6L1xieG1sXGIvLGh0bWw6L1xiaHRtbC8sanNvbjovXGJqc29uXGIvfSxyZXNwb25zZUZpZWxkczp7eG1sOiJyZXNwb25zZVhNTCIsdGV4dDoicmVzcG9uc2VUZXh0Iixqc29uOiJyZXNwb25zZUpTT04ifSxjb252ZXJ0ZXJzOnsiKiB0ZXh0IjpTdHJpbmcsInRleHQgaHRtbCI6ITAsInRleHQganNvbiI6bi5wYXJzZUpTT04sInRleHQgeG1sIjpuLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9WYihWYihhLG4uYWpheFNldHRpbmdzKSxiKTpWYihuLmFqYXhTZXR0aW5ncyxhKX0sYWpheFByZWZpbHRlcjpUYihPYiksYWpheFRyYW5zcG9ydDpUYihQYiksYWpheDpmdW5jdGlvbihiLGMpeyJvYmplY3QiPT10eXBlb2YgYiYmKGM9YixiPXZvaWQgMCksYz1jfHx7fTt2YXIgZCxlLGYsZyxoLGksaixrLGw9bi5hamF4U2V0dXAoe30sYyksbT1sLmNvbnRleHR8fGwsbz1sLmNvbnRleHQmJihtLm5vZGVUeXBlfHxtLmpxdWVyeSk/bihtKTpuLmV2ZW50LHA9bi5EZWZlcnJlZCgpLHE9bi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5Iikscj1sLnN0YXR1c0NvZGV8fHt9LHM9e30sdD17fSx1PTAsdj0iY2FuY2VsZWQiLHc9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihhKXt2YXIgYjtpZigyPT09dSl7aWYoIWspe2s9e307d2hpbGUoYj1KYi5leGVjKGcpKWtbYlsxXS50b0xvd2VyQ2FzZSgpXT1iWzJdfWI9a1thLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT1iP251bGw6Yn0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIDI9PT11P2c6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWEudG9Mb3dlckNhc2UoKTtyZXR1cm4gdXx8KGE9dFtjXT10W2NdfHxhLHNbYV09YiksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gdXx8KGwubWltZVR5cGU9YSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihhKXt2YXIgYjtpZihhKWlmKDI+dSlmb3IoYiBpbiBhKXJbYl09W3JbYl0sYVtiXV07ZWxzZSB3LmFsd2F5cyhhW3cuc3RhdHVzXSk7cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGEpe3ZhciBiPWF8fHY7cmV0dXJuIGomJmouYWJvcnQoYikseSgwLGIpLHRoaXN9fTtpZihwLnByb21pc2UodykuY29tcGxldGU9cS5hZGQsdy5zdWNjZXNzPXcuZG9uZSx3LmVycm9yPXcuZmFpbCxsLnVybD0oKGJ8fGwudXJsfHxSYikrIiIpLnJlcGxhY2UoSGIsIiIpLnJlcGxhY2UoTWIsU2JbMV0rIi8vIiksbC50eXBlPWMubWV0aG9kfHxjLnR5cGV8fGwubWV0aG9kfHxsLnR5cGUsbC5kYXRhVHlwZXM9bi50cmltKGwuZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5tYXRjaChHKXx8WyIiXSxudWxsPT1sLmNyb3NzRG9tYWluJiYoZD1OYi5leGVjKGwudXJsLnRvTG93ZXJDYXNlKCkpLGwuY3Jvc3NEb21haW49ISghZHx8ZFsxXT09PVNiWzFdJiZkWzJdPT09U2JbMl0mJihkWzNdfHwoImh0dHA6Ij09PWRbMV0/IjgwIjoiNDQzIikpPT09KFNiWzNdfHwoImh0dHA6Ij09PVNiWzFdPyI4MCI6IjQ0MyIpKSkpLGwuZGF0YSYmbC5wcm9jZXNzRGF0YSYmInN0cmluZyIhPXR5cGVvZiBsLmRhdGEmJihsLmRhdGE9bi5wYXJhbShsLmRhdGEsbC50cmFkaXRpb25hbCkpLFViKE9iLGwsYyx3KSwyPT09dSlyZXR1cm4gdztpPW4uZXZlbnQmJmwuZ2xvYmFsLGkmJjA9PT1uLmFjdGl2ZSsrJiZuLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpLGwudHlwZT1sLnR5cGUudG9VcHBlckNhc2UoKSxsLmhhc0NvbnRlbnQ9IUxiLnRlc3QobC50eXBlKSxmPWwudXJsLGwuaGFzQ29udGVudHx8KGwuZGF0YSYmKGY9bC51cmwrPShGYi50ZXN0KGYpPyImIjoiPyIpK2wuZGF0YSxkZWxldGUgbC5kYXRhKSxsLmNhY2hlPT09ITEmJihsLnVybD1JYi50ZXN0KGYpP2YucmVwbGFjZShJYiwiJDFfPSIrRWIrKyk6ZisoRmIudGVzdChmKT8iJiI6Ij8iKSsiXz0iK0ViKyspKSxsLmlmTW9kaWZpZWQmJihuLmxhc3RNb2RpZmllZFtmXSYmdy5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Nb2RpZmllZC1TaW5jZSIsbi5sYXN0TW9kaWZpZWRbZl0pLG4uZXRhZ1tmXSYmdy5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Ob25lLU1hdGNoIixuLmV0YWdbZl0pKSwobC5kYXRhJiZsLmhhc0NvbnRlbnQmJmwuY29udGVudFR5cGUhPT0hMXx8Yy5jb250ZW50VHlwZSkmJncuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIixsLmNvbnRlbnRUeXBlKSx3LnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIsbC5kYXRhVHlwZXNbMF0mJmwuYWNjZXB0c1tsLmRhdGFUeXBlc1swXV0/bC5hY2NlcHRzW2wuZGF0YVR5cGVzWzBdXSsoIioiIT09bC5kYXRhVHlwZXNbMF0/IiwgIitRYisiOyBxPTAuMDEiOiIiKTpsLmFjY2VwdHNbIioiXSk7Zm9yKGUgaW4gbC5oZWFkZXJzKXcuc2V0UmVxdWVzdEhlYWRlcihlLGwuaGVhZGVyc1tlXSk7aWYobC5iZWZvcmVTZW5kJiYobC5iZWZvcmVTZW5kLmNhbGwobSx3LGwpPT09ITF8fDI9PT11KSlyZXR1cm4gdy5hYm9ydCgpO3Y9ImFib3J0Ijtmb3IoZSBpbntzdWNjZXNzOjEsZXJyb3I6MSxjb21wbGV0ZToxfSl3W2VdKGxbZV0pO2lmKGo9VWIoUGIsbCxjLHcpKXtpZih3LnJlYWR5U3RhdGU9MSxpJiZvLnRyaWdnZXIoImFqYXhTZW5kIixbdyxsXSksMj09PXUpcmV0dXJuIHc7bC5hc3luYyYmbC50aW1lb3V0PjAmJihoPWEuc2V0VGltZW91dChmdW5jdGlvbigpe3cuYWJvcnQoInRpbWVvdXQiKX0sbC50aW1lb3V0KSk7dHJ5e3U9MSxqLnNlbmQocyx5KX1jYXRjaCh4KXtpZighKDI+dSkpdGhyb3cgeDt5KC0xLHgpfX1lbHNlIHkoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIHkoYixjLGQsZSl7dmFyIGsscyx0LHYseCx5PWM7MiE9PXUmJih1PTIsaCYmYS5jbGVhclRpbWVvdXQoaCksaj12b2lkIDAsZz1lfHwiIix3LnJlYWR5U3RhdGU9Yj4wPzQ6MCxrPWI+PTIwMCYmMzAwPmJ8fDMwND09PWIsZCYmKHY9V2IobCx3LGQpKSx2PVhiKGwsdix3LGspLGs/KGwuaWZNb2RpZmllZCYmKHg9dy5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLHgmJihuLmxhc3RNb2RpZmllZFtmXT14KSx4PXcuZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWciKSx4JiYobi5ldGFnW2ZdPXgpKSwyMDQ9PT1ifHwiSEVBRCI9PT1sLnR5cGU/eT0ibm9jb250ZW50IjozMDQ9PT1iP3k9Im5vdG1vZGlmaWVkIjooeT12LnN0YXRlLHM9di5kYXRhLHQ9di5lcnJvcixrPSF0KSk6KHQ9eSwhYiYmeXx8KHk9ImVycm9yIiwwPmImJihiPTApKSksdy5zdGF0dXM9Yix3LnN0YXR1c1RleHQ9KGN8fHkpKyIiLGs/cC5yZXNvbHZlV2l0aChtLFtzLHksd10pOnAucmVqZWN0V2l0aChtLFt3LHksdF0pLHcuc3RhdHVzQ29kZShyKSxyPXZvaWQgMCxpJiZvLnRyaWdnZXIoaz8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFt3LGwsaz9zOnRdKSxxLmZpcmVXaXRoKG0sW3cseV0pLGkmJihvLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW3csbF0pLC0tbi5hY3RpdmV8fG4uZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiB3fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5nZXQoYSxiLGMsImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uZ2V0KGEsdm9pZCAwLGIsInNjcmlwdCIpfX0pLG4uZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihhLGIpe25bYl09ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIG4uaXNGdW5jdGlvbihjKSYmKGU9ZXx8ZCxkPWMsYz12b2lkIDApLG4uYWpheChuLmV4dGVuZCh7dXJsOmEsdHlwZTpiLGRhdGFUeXBlOmUsZGF0YTpjLHN1Y2Nlc3M6ZH0sbi5pc1BsYWluT2JqZWN0KGEpJiZhKSl9fSksbi5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gbi5hamF4KHt1cmw6YSx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGNhY2hlOiEwLGFzeW5jOiExLGdsb2JhbDohMSwidGhyb3dzIjohMH0pfSxuLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihhKXtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLndyYXBBbGwoYS5jYWxsKHRoaXMsYikpfSk7aWYodGhpc1swXSl7dmFyIGI9bihhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApO3RoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSksYi5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzO3doaWxlKGEuZmlyc3RDaGlsZCYmMT09PWEuZmlyc3RDaGlsZC5ub2RlVHlwZSlhPWEuZmlyc3RDaGlsZDtyZXR1cm4gYX0pLmFwcGVuZCh0aGlzKX1yZXR1cm4gdGhpc30sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiBuLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPW4odGhpcyksYz1iLmNvbnRlbnRzKCk7Yy5sZW5ndGg/Yy53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7dmFyIGI9bi5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7bih0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsYyk6YSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe24ubm9kZU5hbWUodGhpcywiYm9keSIpfHxuKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KTtmdW5jdGlvbiBZYihhKXtyZXR1cm4gYS5zdHlsZSYmYS5zdHlsZS5kaXNwbGF5fHxuLmNzcyhhLCJkaXNwbGF5Iil9ZnVuY3Rpb24gWmIoYSl7aWYoIW4uY29udGFpbnMoYS5vd25lckRvY3VtZW50fHxkLGEpKXJldHVybiEwO3doaWxlKGEmJjE9PT1hLm5vZGVUeXBlKXtpZigibm9uZSI9PT1ZYihhKXx8ImhpZGRlbiI9PT1hLnR5cGUpcmV0dXJuITA7YT1hLnBhcmVudE5vZGV9cmV0dXJuITF9bi5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGEpe3JldHVybiBsLnJlbGlhYmxlSGlkZGVuT2Zmc2V0cygpP2Eub2Zmc2V0V2lkdGg8PTAmJmEub2Zmc2V0SGVpZ2h0PD0wJiYhYS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aDpaYihhKX0sbi5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihhKXtyZXR1cm4hbi5leHByLmZpbHRlcnMuaGlkZGVuKGEpfTt2YXIgJGI9LyUyMC9nLF9iPS9cW1xdJC8sYWM9L1xyP1xuL2csYmM9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLGNjPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBkYyhhLGIsYyxkKXt2YXIgZTtpZihuLmlzQXJyYXkoYikpbi5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHxfYi50ZXN0KGEpP2QoYSxlKTpkYyhhKyJbIisoIm9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT1lP2I6IiIpKyJdIixlLGMsZCl9KTtlbHNlIGlmKGN8fCJvYmplY3QiIT09bi50eXBlKGIpKWQoYSxiKTtlbHNlIGZvcihlIGluIGIpZGMoYSsiWyIrZSsiXSIsYltlXSxjLGQpfW4ucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXtiPW4uaXNGdW5jdGlvbihiKT9iKCk6bnVsbD09Yj8iIjpiLGRbZC5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChhKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfTtpZih2b2lkIDA9PT1iJiYoYj1uLmFqYXhTZXR0aW5ncyYmbi5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLG4uaXNBcnJheShhKXx8YS5qcXVlcnkmJiFuLmlzUGxhaW5PYmplY3QoYSkpbi5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlkYyhjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKCImIikucmVwbGFjZSgkYiwiKyIpfSxuLmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG4ucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT1uLnByb3AodGhpcywiZWxlbWVudHMiKTtyZXR1cm4gYT9uLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFuKHRoaXMpLmlzKCI6ZGlzYWJsZWQiKSYmY2MudGVzdCh0aGlzLm5vZGVOYW1lKSYmIWJjLnRlc3QoYSkmJih0aGlzLmNoZWNrZWR8fCFaLnRlc3QoYSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9bih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09Yz9udWxsOm4uaXNBcnJheShjKT9uLm1hcChjLGZ1bmN0aW9uKGEpe3JldHVybntuYW1lOmIubmFtZSx2YWx1ZTphLnJlcGxhY2UoYWMsIlxyXG4iKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKGFjLCJcclxuIil9fSkuZ2V0KCl9fSksbi5hamF4U2V0dGluZ3MueGhyPXZvaWQgMCE9PWEuQWN0aXZlWE9iamVjdD9mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTG9jYWw/aWMoKTpkLmRvY3VtZW50TW9kZT44P2hjKCk6L14oZ2V0fHBvc3R8aGVhZHxwdXR8ZGVsZXRlfG9wdGlvbnMpJC9pLnRlc3QodGhpcy50eXBlKSYmaGMoKXx8aWMoKX06aGM7dmFyIGVjPTAsZmM9e30sZ2M9bi5hamF4U2V0dGluZ3MueGhyKCk7YS5hdHRhY2hFdmVudCYmYS5hdHRhY2hFdmVudCgib251bmxvYWQiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIGZjKWZjW2FdKHZvaWQgMCwhMCl9KSxsLmNvcnM9ISFnYyYmIndpdGhDcmVkZW50aWFscyJpbiBnYyxnYz1sLmFqYXg9ISFnYyxnYyYmbi5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGIpe2lmKCFiLmNyb3NzRG9tYWlufHxsLmNvcnMpe3ZhciBjO3JldHVybntzZW5kOmZ1bmN0aW9uKGQsZSl7dmFyIGYsZz1iLnhocigpLGg9KytlYztpZihnLm9wZW4oYi50eXBlLGIudXJsLGIuYXN5bmMsYi51c2VybmFtZSxiLnBhc3N3b3JkKSxiLnhockZpZWxkcylmb3IoZiBpbiBiLnhockZpZWxkcylnW2ZdPWIueGhyRmllbGRzW2ZdO2IubWltZVR5cGUmJmcub3ZlcnJpZGVNaW1lVHlwZSYmZy5vdmVycmlkZU1pbWVUeXBlKGIubWltZVR5cGUpLGIuY3Jvc3NEb21haW58fGRbIlgtUmVxdWVzdGVkLVdpdGgiXXx8KGRbIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKTtmb3IoZiBpbiBkKXZvaWQgMCE9PWRbZl0mJmcuc2V0UmVxdWVzdEhlYWRlcihmLGRbZl0rIiIpO2cuc2VuZChiLmhhc0NvbnRlbnQmJmIuZGF0YXx8bnVsbCksYz1mdW5jdGlvbihhLGQpe3ZhciBmLGksajtpZihjJiYoZHx8ND09PWcucmVhZHlTdGF0ZSkpaWYoZGVsZXRlIGZjW2hdLGM9dm9pZCAwLGcub25yZWFkeXN0YXRlY2hhbmdlPW4ubm9vcCxkKTQhPT1nLnJlYWR5U3RhdGUmJmcuYWJvcnQoKTtlbHNle2o9e30sZj1nLnN0YXR1cywic3RyaW5nIj09dHlwZW9mIGcucmVzcG9uc2VUZXh0JiYoai50ZXh0PWcucmVzcG9uc2VUZXh0KTt0cnl7aT1nLnN0YXR1c1RleHR9Y2F0Y2goayl7aT0iIn1mfHwhYi5pc0xvY2FsfHxiLmNyb3NzRG9tYWluPzEyMjM9PT1mJiYoZj0yMDQpOmY9ai50ZXh0PzIwMDo0MDR9aiYmZShmLGksaixnLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKX0sYi5hc3luYz80PT09Zy5yZWFkeVN0YXRlP2Euc2V0VGltZW91dChjKTpnLm9ucmVhZHlzdGF0ZWNoYW5nZT1mY1toXT1jOmMoKX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKHZvaWQgMCwhMCl9fX19KTtmdW5jdGlvbiBoYygpe3RyeXtyZXR1cm4gbmV3IGEuWE1MSHR0cFJlcXVlc3R9Y2F0Y2goYil7fX1mdW5jdGlvbiBpYygpe3RyeXtyZXR1cm4gbmV3IGEuQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKX1jYXRjaChiKXt9fW4uYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0In0sY29udGVudHM6e3NjcmlwdDovXGIoPzpqYXZhfGVjbWEpc2NyaXB0XGIvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGEpe3JldHVybiBuLmdsb2JhbEV2YWwoYSksYX19fSksbi5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEuY2FjaGUmJihhLmNhY2hlPSExKSxhLmNyb3NzRG9tYWluJiYoYS50eXBlPSJHRVQiLGEuZ2xvYmFsPSExKX0pLG4uYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgYixjPWQuaGVhZHx8bigiaGVhZCIpWzBdfHxkLmRvY3VtZW50RWxlbWVudDtyZXR1cm57c2VuZDpmdW5jdGlvbihlLGYpe2I9ZC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSxiLmFzeW5jPSEwLGEuc2NyaXB0Q2hhcnNldCYmKGIuY2hhcnNldD1hLnNjcmlwdENoYXJzZXQpLGIuc3JjPWEudXJsLGIub25sb2FkPWIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKGEsYyl7KGN8fCFiLnJlYWR5U3RhdGV8fC9sb2FkZWR8Y29tcGxldGUvLnRlc3QoYi5yZWFkeVN0YXRlKSkmJihiLm9ubG9hZD1iLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbCxjfHxmKDIwMCwic3VjY2VzcyIpKX0sYy5pbnNlcnRCZWZvcmUoYixjLmZpcnN0Q2hpbGQpfSxhYm9ydDpmdW5jdGlvbigpe2ImJmIub25sb2FkKHZvaWQgMCwhMCl9fX19KTt2YXIgamM9W10sa2M9Lyg9KVw/KD89JnwkKXxcP1w/LztuLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9amMucG9wKCl8fG4uZXhwYW5kbysiXyIrRWIrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLG4uYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKGtjLnRlc3QoYi51cmwpPyJ1cmwiOiJzdHJpbmciPT10eXBlb2YgYi5kYXRhJiYwPT09KGIuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYma2MudGVzdChiLmRhdGEpJiYiZGF0YSIpO3JldHVybiBofHwianNvbnAiPT09Yi5kYXRhVHlwZXNbMF0/KGU9Yi5qc29ucENhbGxiYWNrPW4uaXNGdW5jdGlvbihiLmpzb25wQ2FsbGJhY2spP2IuanNvbnBDYWxsYmFjaygpOmIuanNvbnBDYWxsYmFjayxoP2JbaF09YltoXS5yZXBsYWNlKGtjLCIkMSIrZSk6Yi5qc29ucCE9PSExJiYoYi51cmwrPShGYi50ZXN0KGIudXJsKT8iJiI6Ij8iKStiLmpzb25wKyI9IitlKSxiLmNvbnZlcnRlcnNbInNjcmlwdCBqc29uIl09ZnVuY3Rpb24oKXtyZXR1cm4gZ3x8bi5lcnJvcihlKyIgd2FzIG5vdCBjYWxsZWQiKSxnWzBdfSxiLmRhdGFUeXBlc1swXT0ianNvbiIsZj1hW2VdLGFbZV09ZnVuY3Rpb24oKXtnPWFyZ3VtZW50c30sZC5hbHdheXMoZnVuY3Rpb24oKXt2b2lkIDA9PT1mP24oYSkucmVtb3ZlUHJvcChlKTphW2VdPWYsYltlXSYmKGIuanNvbnBDYWxsYmFjaz1jLmpzb25wQ2FsbGJhY2ssamMucHVzaChlKSksZyYmbi5pc0Z1bmN0aW9uKGYpJiZmKGdbMF0pLGc9Zj12b2lkIDB9KSwic2NyaXB0Iik6dm9pZCAwfSksbi5wYXJzZUhUTUw9ZnVuY3Rpb24oYSxiLGMpe2lmKCFhfHwic3RyaW5nIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7ImJvb2xlYW4iPT10eXBlb2YgYiYmKGM9YixiPSExKSxiPWJ8fGQ7dmFyIGU9eC5leGVjKGEpLGY9IWMmJltdO3JldHVybiBlP1tiLmNyZWF0ZUVsZW1lbnQoZVsxXSldOihlPWphKFthXSxiLGYpLGYmJmYubGVuZ3RoJiZuKGYpLnJlbW92ZSgpLG4ubWVyZ2UoW10sZS5jaGlsZE5vZGVzKSl9O3ZhciBsYz1uLmZuLmxvYWQ7bi5mbi5sb2FkPWZ1bmN0aW9uKGEsYixjKXtpZigic3RyaW5nIiE9dHlwZW9mIGEmJmxjKXJldHVybiBsYy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGQsZSxmLGc9dGhpcyxoPWEuaW5kZXhPZigiICIpO3JldHVybiBoPi0xJiYoZD1uLnRyaW0oYS5zbGljZShoLGEubGVuZ3RoKSksYT1hLnNsaWNlKDAsaCkpLG4uaXNGdW5jdGlvbihiKT8oYz1iLGI9dm9pZCAwKTpiJiYib2JqZWN0Ij09dHlwZW9mIGImJihlPSJQT1NUIiksZy5sZW5ndGg+MCYmbi5hamF4KHt1cmw6YSx0eXBlOmV8fCJHRVQiLGRhdGFUeXBlOiJodG1sIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2Y9YXJndW1lbnRzLGcuaHRtbChkP24oIjxkaXY+IikuYXBwZW5kKG4ucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuYWx3YXlzKGMmJmZ1bmN0aW9uKGEsYil7Zy5lYWNoKGZ1bmN0aW9uKCl7Yy5hcHBseSh0aGlzLGZ8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pfSksdGhpc30sbi5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksbi5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZ3JlcChuLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH07ZnVuY3Rpb24gbWMoYSl7cmV0dXJuIG4uaXNXaW5kb3coYSk/YTo5PT09YS5ub2RlVHlwZT9hLmRlZmF1bHRWaWV3fHxhLnBhcmVudFdpbmRvdzohMX1uLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrPW4uY3NzKGEsInBvc2l0aW9uIiksbD1uKGEpLG09e307InN0YXRpYyI9PT1rJiYoYS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKSxoPWwub2Zmc2V0KCksZj1uLmNzcyhhLCJ0b3AiKSxpPW4uY3NzKGEsImxlZnQiKSxqPSgiYWJzb2x1dGUiPT09a3x8ImZpeGVkIj09PWspJiZuLmluQXJyYXkoImF1dG8iLFtmLGldKT4tMSxqPyhkPWwucG9zaXRpb24oKSxnPWQudG9wLGU9ZC5sZWZ0KTooZz1wYXJzZUZsb2F0KGYpfHwwLGU9cGFyc2VGbG9hdChpKXx8MCksbi5pc0Z1bmN0aW9uKGIpJiYoYj1iLmNhbGwoYSxjLG4uZXh0ZW5kKHt9LGgpKSksbnVsbCE9Yi50b3AmJihtLnRvcD1iLnRvcC1oLnRvcCtnKSxudWxsIT1iLmxlZnQmJihtLmxlZnQ9Yi5sZWZ0LWgubGVmdCtlKSwidXNpbmciaW4gYj9iLnVzaW5nLmNhbGwoYSxtKTpsLmNzcyhtKX19LG4uZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24oYSl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09YT90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihiKXtuLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGIpfSk7dmFyIGIsYyxkPXt0b3A6MCxsZWZ0OjB9LGU9dGhpc1swXSxmPWUmJmUub3duZXJEb2N1bWVudDtpZihmKXJldHVybiBiPWYuZG9jdW1lbnRFbGVtZW50LG4uY29udGFpbnMoYixlKT8oInVuZGVmaW5lZCIhPXR5cGVvZiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCYmKGQ9ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksYz1tYyhmKSx7dG9wOmQudG9wKyhjLnBhZ2VZT2Zmc2V0fHxiLnNjcm9sbFRvcCktKGIuY2xpZW50VG9wfHwwKSxsZWZ0OmQubGVmdCsoYy5wYWdlWE9mZnNldHx8Yi5zY3JvbGxMZWZ0KS0oYi5jbGllbnRMZWZ0fHwwKX0pOmR9LHBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpc1swXSl7dmFyIGEsYixjPXt0b3A6MCxsZWZ0OjB9LGQ9dGhpc1swXTtyZXR1cm4iZml4ZWQiPT09bi5jc3MoZCwicG9zaXRpb24iKT9iPWQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6KGE9dGhpcy5vZmZzZXRQYXJlbnQoKSxiPXRoaXMub2Zmc2V0KCksbi5ub2RlTmFtZShhWzBdLCJodG1sIil8fChjPWEub2Zmc2V0KCkpLGMudG9wKz1uLmNzcyhhWzBdLCJib3JkZXJUb3BXaWR0aCIsITApLGMubGVmdCs9bi5jc3MoYVswXSwiYm9yZGVyTGVmdFdpZHRoIiwhMCkpLHt0b3A6Yi50b3AtYy50b3Atbi5jc3MoZCwibWFyZ2luVG9wIiwhMCksbGVmdDpiLmxlZnQtYy5sZWZ0LW4uY3NzKGQsIm1hcmdpbkxlZnQiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudDt3aGlsZShhJiYhbi5ub2RlTmFtZShhLCJodG1sIikmJiJzdGF0aWMiPT09bi5jc3MoYSwicG9zaXRpb24iKSlhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfHxRYX0pfX0pLG4uZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPS9ZLy50ZXN0KGIpO24uZm5bYV09ZnVuY3Rpb24oZCl7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhLGQsZSl7dmFyIGY9bWMoYSk7cmV0dXJuIHZvaWQgMD09PWU/Zj9iIGluIGY/ZltiXTpmLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtkXTphW2RdOnZvaWQoZj9mLnNjcm9sbFRvKGM/bihmKS5zY3JvbGxMZWZ0KCk6ZSxjP2U6bihmKS5zY3JvbGxUb3AoKSk6YVtkXT1lKX0sYSxkLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSksbi5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT1VYShsLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8oYz1TYShhLGIpLE9hLnRlc3QoYyk/bihhKS5wb3NpdGlvbigpW2JdKyJweCI6Yyk6dm9pZCAwfSl9KSxuLmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihhLGIpe24uZWFjaCh7CnBhZGRpbmc6ImlubmVyIithLGNvbnRlbnQ6YiwiIjoib3V0ZXIiK2F9LGZ1bmN0aW9uKGMsZCl7bi5mbltkXT1mdW5jdGlvbihkLGUpe3ZhciBmPWFyZ3VtZW50cy5sZW5ndGgmJihjfHwiYm9vbGVhbiIhPXR5cGVvZiBkKSxnPWN8fChkPT09ITB8fGU9PT0hMD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihiLGMsZCl7dmFyIGU7cmV0dXJuIG4uaXNXaW5kb3coYik/Yi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrYV06OT09PWIubm9kZVR5cGU/KGU9Yi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoYi5ib2R5WyJzY3JvbGwiK2FdLGVbInNjcm9sbCIrYV0sYi5ib2R5WyJvZmZzZXQiK2FdLGVbIm9mZnNldCIrYV0sZVsiY2xpZW50IithXSkpOnZvaWQgMD09PWQ/bi5jc3MoYixjLGcpOm4uc3R5bGUoYixjLGQsZyl9LGIsZj9kOnZvaWQgMCxmLG51bGwpfX0pfSksbi5mbi5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLm9uKGEsbnVsbCxiLGMpfSx1bmJpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5vZmYoYSxudWxsLGIpfSxkZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihiLGEsYyxkKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGEsIioqIik6dGhpcy5vZmYoYixhfHwiKioiLGMpfX0pLG4uZm4uc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sbi5mbi5hbmRTZWxmPW4uZm4uYWRkQmFjaywiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4gbn0pO3ZhciBuYz1hLmpRdWVyeSxvYz1hLiQ7cmV0dXJuIG4ubm9Db25mbGljdD1mdW5jdGlvbihiKXtyZXR1cm4gYS4kPT09biYmKGEuJD1vYyksYiYmYS5qUXVlcnk9PT1uJiYoYS5qUXVlcnk9bmMpLG59LGJ8fChhLmpRdWVyeT1hLiQ9biksbn0pOwo="}]},{"name":"VIP视频解析","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["https://v.qq.com/tv/*","https://v.qq.com/x/*","https://www.iqiyi.com/v*","https://v.youku.com/v_show/*","https://tv.sohu.com/*","https://film.sohu.com/album/*","https://www.mgtv.com/b/*","http://v.pptv.com/show/*","https://v.pptv.com/show/*","http://www.le.com/ptv/vplay/*","https://www.le.com/ptv/vplay/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null}},"storage":{"data":{},"ts":1587235898724},"enabled":false,"position":14,"file_url":"https://raw.githubusercontent.com/xinggsf/gm/master/jx-mv-vip.user.js","uuid":"0ef62e70-7253-4d5d-971e-c575d7fda7b8","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIFZJUOinhumikeino+aekAovLyBAbmFtZXNwYWNlICAgbW9maXRlci54aW5uZ3NmCi8vIEB2ZXJzaW9uICAgICAxLjYuMwovLyBAZGVzY3JpcHRpb24g5re75Yqg55qE6Kej5p6Q5oyJ6ZKu5qC35byP5LiO5Y6f56uZ5LiA6Ie077yM5LiN5Lya5Lqn55Sf56qB5YWA5oSf77yM5pSv5oyB5aSa5Liq6Kej5p6Q5o6l5Y+j5YiH5o2i77yM5pSv5oyB6Ieq5a6a5LmJ5o6l5Y+j77yM5pSv5oyB56uZ5YaF56uZ5aSW6Kej5p6Q77yM5pSv5oyBIFRhbXBlcm1vbmtleeOAgVZpb2xlbnRtb25rZXnjgIFHcmVhc2Vtb25rZXkKLy8gQHJlcXVpcmUgICAgIGh0dHBzOi8vY2RuLmJvb3Rjc3MuY29tL2pxdWVyeS8xLjEyLjQvanF1ZXJ5Lm1pbi5qcwovLyBAcmVxdWlyZSAgICAgaHR0cHM6Ly9ncmVhc2Vtb25rZXkuZ2l0aHViLmlvL2dtNC1wb2x5ZmlsbC9nbTQtcG9seWZpbGwuanMKLy8gQG1hdGNoICAgICAgIGh0dHBzOi8vdi5xcS5jb20vdHYvKgovLyBAbWF0Y2ggICAgICAgaHR0cHM6Ly92LnFxLmNvbS94LyoKLy8gQG1hdGNoICAgICAgIGh0dHBzOi8vd3d3LmlxaXlpLmNvbS92KgovLyBAbWF0Y2ggICAgICAgaHR0cHM6Ly92LnlvdWt1LmNvbS92X3Nob3cvKgovLyBAbWF0Y2ggICAgICAgaHR0cHM6Ly90di5zb2h1LmNvbS8qCi8vIEBtYXRjaCAgICAgICBodHRwczovL2ZpbG0uc29odS5jb20vYWxidW0vKgovLyBAbWF0Y2ggICAgICAgaHR0cHM6Ly93d3cubWd0di5jb20vYi8qCi8vIEBhdXRob3IgICB4aW5uZ3NmICAgbW9maXRlcgovLyBAbWF0Y2ggICAgICAgaHR0cDovL3YucHB0di5jb20vc2hvdy8qCi8vIEBtYXRjaCAgICAgICBodHRwczovL3YucHB0di5jb20vc2hvdy8qCi8vIEBtYXRjaCAgICAgICBodHRwOi8vd3d3LmxlLmNvbS9wdHYvdnBsYXkvKgovLyBAbWF0Y2ggICAgICAgaHR0cHM6Ly93d3cubGUuY29tL3B0di92cGxheS8qCi8vIEBncmFudCAgICAgICB1bnNhZmVXaW5kb3cKLy8gQGdyYW50ICAgICAgIEdNX2FkZFN0eWxlCi8vIEBncmFudCAgICAgICBHTS5hZGRTdHlsZQovLyBAZ3JhbnQgICAgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgIEdNLmdldFZhbHVlCi8vIEBncmFudCAgICAgICBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgR00uc2V0VmFsdWUKLy8gQGdyYW50ICAgICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQKLy8gQHVwZGF0ZVVSTCAgIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS94aW5nZ3NmL2dtL21hc3Rlci9qeC1tdi12aXAudXNlci5qcwovLyA9PS9Vc2VyU2NyaXB0PT0KCid1c2Ugc3RyaWN0JzsKY29uc3QgeyBob3N0LCBocmVmOiB1cmwgfSA9IGxvY2F0aW9uOwpjb25zdCB2cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd2aWRlbycpOwpjb25zdCB2aWRlb1BsYXllciA9ICQoCmA8ZGl2IGlkPSJpZnJhbWUtZGl2IiBzdHlsZT0id2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTt6LWluZGV4OjIxNDc0ODM2NDc7Ij4KCTxpZnJhbWUgaWQ9ImlmcmFtZS1wbGF5ZXIiIGZyYW1lYm9yZGVyPSIwIiBhbGxvd2Z1bGxzY3JlZW4gd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSI+PC9pZnJhbWU+CjwvZGl2PmApOwpsZXQgcGxheWVyQ1NTLCBwb3NDU1MsIGppZXhpRElWLCB1c2VySW50ZnM7CmNvbnN0IGludGVyZmFjZXMgPSBbCgl7bmFtZToiNjYiLHR5cGU6Myx1cmw6Imh0dHBzOi8vdmlwLjY2cGFyc2UuY2x1Yi8/dXJsPSJ9LAoJe25hbWU6Im0xOTA3Iix0eXBlOjIsdXJsOiJodHRwczovL3oxLm0xOTA3LmNuLz9qeD0ifSwKCXtuYW1lOiLmgJ3lj6QiLHR5cGU6Myx1cmw6Imh0dHBzOi8vYXBpLnNpZ3VqeC5jb20vdi5waHA/dXJsPSJ9LAoJe25hbWU6Ijc456eR5oqAIix0eXBlOjMsdXJsOiJodHRwczovL2FwaS43OHN5LmNuLz91cmw9In0sCgl7bmFtZToi5piO5pelIix0eXBlOjMsdXJsOiJodHRwczovL2p4Lnlpbmd4aWFuZ2Jhby5jbi92aXAucGhwP3VybD0ifSwKCS8ve25hbWU6IuS5kOWNmiIsdHlwZTozLHVybDoiaHR0cHM6Ly9zamp4LmxlYm9vcC5jb20vamlleGkvP3VybD0ifSwKCXtuYW1lOiI5MjciLHR5cGU6MSx1cmw6Imh0dHBzOi8vYXBpLjkyN2p4LmNvbS92aXAvP3VybD0ifSwKCXtuYW1lOiJhYjMzIix0eXBlOjEsdXJsOiJodHRwczovL2p4LmFiMzMudG9wL3ZpcC8/dXJsPSJ9LAoJe25hbWU6ImJlYWMiLHR5cGU6Myx1cmw6Imh0dHBzOi8vYmVhYWNjLmNvbS9hcGkucGhwP3VybD0ifSwKCXtuYW1lOiLkuIPlvankupEiLHR5cGU6Myx1cmw6Imh0dHBzOi8vanguN2N5ZC5jb20vaW5kZXhfdi5waHA/dXJsPSJ9LAoJe25hbWU6IuiPnOm4nyIsdHlwZTozLHVybDogImh0dHBzOi8vamlleGkuYm02aWcuY24vP3VybD0ifSwKCXtuYW1lOiLkuYnmsJTnjKsiLHR5cGU6Myx1cmw6ICJodHRwczovL2p4LnlxbWFvLmNuLzM2OS8/dXJsPSJ9LAoJe25hbWU6IjlraSIsdHlwZTozLHVybDogImh0dHBzOi8vd3d3LjlraS5jYy9qeC5waHA/dXJsPSJ9LAoJe25hbWU6InJkaGsiLHR5cGU6Myx1cmw6ICJodHRwczovL2FwaS5yZGhrLm5ldC8/dXJsPSJ9LAoJe25hbWU6Ium7keS6kSIsdHlwZTozLHVybDogImh0dHBzOi8vamlleGkuMzgway5jb20vP3VybD0ifSwKCXtuYW1lOiLnn7PlpLTkupEiLHR5cGU6Myx1cmw6Imh0dHBzOi8vamlleGkuMDcxODExLmNjL2p4LnBocD91cmw9In0sCgl7bmFtZToiMTcxN3l1biIsdHlwZTozLHVybDoiaHR0cHM6Ly93d3cuMTcxN3l1bi5jb20vangvdHkucGhwP3VybD0ifSwKCXtuYW1lOiLph5HmoaUiLHR5cGU6MSx1cmw6Imh0dHBzOi8vd3d3LmpxYWFhLmNvbS9qeC5waHA/dXJsPSJ9LAoJe25hbWU6IjYxOGciLHR5cGU6MSx1cmw6Imh0dHBzOi8vanguNjE4Zy5jb20vP3VybD0ifSwKCXtuYW1lOiLlpKfkuqjlvbHpmaIiLHR5cGU6Mix1cmw6Imh0dHA6Ly9qeC5vb3B3LnRvcC8/dXJsPSJ9CgkvLyAge25hbWU6IueOqeeahOWXqCIsdHlwZToyLHVybDoiaHR0cDovL3R2LndhbmRoaS5jb20vZ28uaHRtbD91cmw9In0KXTsKCmNvbnN0IGhhc0RPTSA9IGNzcyA9PiAkKGNzcykubGVuZ3RoID4gMDsKY29uc3QgZGVsYXlSZWxvYWQgPSAoKSA9PiB7CglzZXRUaW1lb3V0KGxvY2F0aW9uLnJlbG9hZC5iaW5kKGxvY2F0aW9uKSwgMTAwMCk7Cn07CmNvbnN0IGlubmVyUGFyc2UgPSBmdW5jdGlvbihsaSkgewoJaWYgKHZzLmxlbmd0aCA+IDApIHZzWzBdLnJlbW92ZUF0dHJpYnV0ZSgnc3JjJyk7CglpZiAodGhpcyBpbnN0YW5jZW9mIE5vZGUpIGxpID0gdGhpczsKCSQocGxheWVyQ1NTKS5lbXB0eSgpLmFwcGVuZCh2aWRlb1BsYXllcik7Cgljb25zdCBzID0gbGkuZ2V0QXR0cmlidXRlKCdkYXRhLXVybCcpIHx8IGludGVyZmFjZXNbMF0udXJsICsgdXJsOwoJdmlkZW9QbGF5ZXIuZmluZCgiI2lmcmFtZS1wbGF5ZXIiKS5hdHRyKCJzcmMiLCBzKTsKfTsKCmNsYXNzIFRhc2tQb29sIHsgLy/nroDmmJPku7vliqHmsaAKCWNvbnN0cnVjdG9yKGlzRnJlZSkgewoJCWNvbnN0IHRhc2tzID0gbmV3IE1hcCgpOwoJCWNvbnN0IHRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gewoJCQlmb3IgKGxldCBbaSwgY2JdIG9mIHRhc2tzKSB7CgkJCQlsZXQgYSA9IGk7CgkJCQlpZiAodHlwZW9mIGkgPT0gJ3N0cmluZycpIHsKCQkJCQlhID0gJChpKTsKCQkJCQlpZiAoaS5zcGxpdCgnLCcpLmxlbmd0aCA+IGEubGVuZ3RoKSBjb250aW51ZTsKCQkJCX0KCQkJCWlmICghY2IoYSkpIHRhc2tzLmRlbGV0ZShpKTsKCQkJfQoJCQlpZiAoaXNGcmVlICYmICF0YXNrcy5zaXplKSB7CgkJCQljbGVhckludGVydmFsKHRpbWVyKTsKCQkJCXRoaXMuX3Rhc2tzID0gbnVsbDsKCQkJfQoJCX0sIDUwMCk7CgkJdGhpcy5fdGFza3MgPSB0YXNrczsKCX0KCS8vd2FpdCBmb3IgZG8gc29tZXRoaW5nLiBLZXkgPSBjc3MgfCBudW1iZXI7IGNiID0gZnVuY3Rpb24oJGVsKSB7IHJldHVybiB0cnVlOiB3YWl0IGFnYWluIH0KCWFkZChjYiwga2V5KSB7CgkJaWYgKCFrZXkpIGtleSA9IHRoaXMuX3Rhc2tzLnNpemUgKyAxOwoJCXRoaXMuX3Rhc2tzLnNldChrZXksIGNiKTsKCX0KfQpjb25zdCB0YXNrcyA9IG5ldyBUYXNrUG9vbCh0cnVlKTsKCmNvbnN0IEdNZ2V0VmFsdWUgPSAobmFtZSwgdmFsdWUpID0+IHR5cGVvZiBHTV9nZXRWYWx1ZSA9PT0gImZ1bmN0aW9uIiA/CglHTV9nZXRWYWx1ZShuYW1lLCB2YWx1ZSkgOiBHTS5nZXRWYWx1ZShuYW1lLCB2YWx1ZSk7CmNvbnN0IEdNc2V0VmFsdWUgPSAobmFtZSwgdmFsdWUpID0+IHsKCXR5cGVvZiBHTV9zZXRWYWx1ZSA9PT0gImZ1bmN0aW9uIiA/IEdNX3NldFZhbHVlKG5hbWUsIHZhbHVlKSA6IEdNLnNldFZhbHVlKG5hbWUsIHZhbHVlKTsKfTsKCmNvbnN0IEdNYWRkU3R5bGUgPSBzID0+IHsKCXR5cGVvZiBHTV9hZGRTdHlsZSA9PT0gImZ1bmN0aW9uIiA/IEdNX2FkZFN0eWxlKHMpIDogR00uYWRkU3R5bGUocyk7Cn07Cgpjb25zdCBzaG93U2V0dGluZyA9ICgpID0+IHsKCWlmICghaGFzRE9NKCcjamlleGktc2V0dGluZycpKSB7CgkJR01hZGRTdHlsZShgI2ppZXhpLXNldHRpbmcgbGVnZW5kLHRhYmxlLHRhYmxlIHRoLHRke3RleHQtYWxpZ246Y2VudGVyO31gKTsKCQljb25zdCBjb250YWluZXIgPSAkKApgPGRpdiBpZD0iamlleGktc2V0dGluZyIgc3R5bGU9InBvc2l0aW9uOmZpeGVkO3otaW5kZXg6MjE0NzQ4MzY0Nzt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO3RvcDowO2xlZnQ6MDtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsMC41KTsiPgo8ZGl2IHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDo1MDBweDtoZWlnaHQ6MzAwcHg7dG9wOjUwJTtsZWZ0OjUwJTttYXJnaW4tbGVmdDotMjUwcHg7bWFyZ2luLXRvcDotMTUwcHg7cGFkZGluZzoxMHB4O2JhY2tncm91bmQtY29sb3I6IzIyMjtjb2xvcjp3aGl0ZTtmb250LXNpemU6MTRweDsiPgoJPGRpdiBpZD0iY2FuY2VsLWJ1dHRvbiIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlO3RvcDotMTVweDtyaWdodDotOHB4O2ZvbnQtc2l6ZToyMHB4O2N1cnNvcjpwb2ludGVyOyI+4pWzPC9kaXY+Cgk8bGVnZW5kIHN0eWxlPSJmb250LXNpemU6MTZweDtjb2xvcjojZmZmO21hcmdpbjphdXRvOyI+VklQIOino+aekOiuvue9rjwvbGVnZW5kPgoJPHRhYmxlIGlkPSJpbnRlcmZhY2UtdGFibGUiIHN0eWxlPSJsaW5lLWhlaWdodDozMHB4O21hcmdpbjowIGF1dG87Ij4KCQk8dHI+CgkJCTx0aD7mjqXlj6PlkI3np7A8L3RoPjx0aD7mjqXlj6PlnLDlnYA8L3RoPjx0aD7mjqXlj6Pnsbvlnos8L3RoPjx0aD7mk43kvZw8L3RoPgoJCTwvdHI+CgkJPHRyPgoJCQk8dGQ+CgkJCQk8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImludGVyZmFjZS1uYW1lIiBuYW1lPSJpbnRlcmZhY2UtbmFtZSIgcGxhY2Vob2xkZXI9IuaOpeWPo+aYvuekuuWQjeensCIgc3R5bGU9ImJvcmRlcjowO3dpZHRoOjEwMHB4O21hcmdpbi1yaWdodDoxMHB4OyI+PC9pbnB1dD4KCQkJPC90ZD4KCQkJPHRkPgoJCQkJPGlucHV0IHR5cGU9InRleHQiIGlkPSJpbnRlcmZhY2UtdXJsIiBuYW1lPSJpbnRlcmZhY2UtdXJsIiBwbGFjZWhvbGRlcj0i5o6l5Y+j5Zyw5Z2A5b+F6aG75YyF5ZCrIGh0dHAg5oiWIGh0dHBzIiBzdHlsZT0iYm9yZGVyOjA7d2lkdGg6MjAwcHg7bWFyZ2luLXJpZ2h0OjEwcHg7Ij48L2lucHV0PgoJCQk8L3RkPgoJCQk8dGQ+CgkJCQk8bGFiZWwgdGl0bGU9IuermeWGhSIgc3R5bGU9Im1hcmdpbi1yaWdodDo1cHg7Ij4KCQkJCQk8aW5wdXQgaWQ9ImludGVyZmFjZS10eXBlLWluIiBuYW1lPSJpbnRlcmZhY2UtdHlwZSIgdmFsdWU9IjEiIHR5cGU9InJhZGlvIiBzdHlsZT0ibWFyZ2luOjAgNXB4OyI+CgkJCQk8L2lucHV0PuermeWGhTwvbGFiZWw+CgkJCQk8bGFiZWwgdGl0bGU9IuermeWkliIgc3R5bGU9Im1hcmdpbi1yaWdodDo1cHg7Ij4KCQkJCQk8aW5wdXQgaWQ9ImludGVyZmFjZS10eXBlLWlvIiBuYW1lPSJpbnRlcmZhY2UtdHlwZSIgdmFsdWU9IjIiIHR5cGU9InJhZGlvIiBzdHlsZT0ibWFyZ2luOjAgNXB4OyI+CgkJCQk8L2lucHV0PuermeWkljwvbGFiZWw+CgkJCQk8bGFiZWwgdGl0bGU9IuermeWGheWkliIgc3R5bGU9Im1hcmdpbi1yaWdodDoxNXB4OyI+PGlucHV0IGlkPSJpbnRlcmZhY2UtdHlwZS1vdXQiIG5hbWU9ImludGVyZmFjZS10eXBlIiB2YWx1ZT0iMyIgdHlwZT0icmFkaW8iIHN0eWxlPSJtYXJnaW46MCA1cHg7IiBjaGVja2VkPjwvaW5wdXQ+56uZ5YaF5aSWPC9sYWJlbD4KCQkJPC90ZD4KCQkJPHRkPgoJCQkJPGlucHV0IHR5cGU9ImJ1dHRvbiIgdmFsdWU9IuWinuWKoCIgaWQ9InNhdmVfYnV0dG9uIiBzdHlsZT0iY3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjEycHg7YmFja2dyb3VuZC1jb2xvcjojMjIyO2NvbG9yOndoaXRlO2JvcmRlcjoxcHggc29saWQgI2NjYztib3JkZXItcmFkaXVzOjVweDtwYWRkaW5nOjJweCA2cHg7Ij48L2lucHV0PgoJCQk8L3RkPgoJCTwvdHI+Cgk8L3RhYmxlPgo8L2Rpdj48L2Rpdj5gKTsKCQkkKCdib2R5JykuYXBwZW5kKGNvbnRhaW5lcik7CgkJaWYgKHVzZXJJbnRmcy5sZW5ndGggPiAwKSB7CgkJCWNvbnN0IHRyTGlzdCA9IHVzZXJJbnRmcy5tYXAoaXRlbSA9PiBgCgk8dHI+CgkJPHRkPiR7aXRlbS5uYW1lfTwvdGQ+CgkJPHRkPiR7aXRlbS51cmx9PC90ZD4KCQk8dGQ+JHtpdGVtLnR5cGV9PC90ZD4KCQk8dGQ+CgkJCTxpbnB1dCB0eXBlPSJidXR0b24iIHZhbHVlPSLliKDpmaQiIGNsYXNzPSJkZWxldGUtYnV0dG9uIiBzdHlsZT0iY3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjEycHg7YmFja2dyb3VuZC1jb2xvcjojMjIyO2NvbG9yOndoaXRlO2JvcmRlcjoxcHggc29saWQgI2NjYztib3JkZXItcmFkaXVzOjVweDtwYWRkaW5nOjJweCA2cHg7Ij48L2lucHV0PgoJCTwvdGQ+Cgk8L3RyPmApLmpvaW4oJycpOwoJCQljb250YWluZXIuZmluZCgiI2ludGVyZmFjZS10YWJsZSIpLmFwcGVuZCgkKHRyTGlzdCkpOwoJCX0KCX0KCSQoIiNjYW5jZWwtYnV0dG9uIikuY2xpY2soZnVuY3Rpb24gKCkgewoJCXRoaXMuY2xvc2VzdCgiI2ppZXhpLXNldHRpbmciKS5yZW1vdmUoKTsKCX0pOwoJJCgiI3NhdmVfYnV0dG9uIikuY2xpY2soZnVuY3Rpb24gKCkgewoJCWNvbnN0IHRyID0gJCh0aGlzKS5jbG9zZXN0KCd0cicpOwoJCXZhciBpbnRlcmZhY2VfbmFtZSA9IHRyLmZpbmQoIiNpbnRlcmZhY2UtbmFtZSIpLnZhbCgpLnRyaW0oKTsKCQl2YXIgaW50ZXJmYWNlX3VybCA9IHRyLmZpbmQoIiNpbnRlcmZhY2UtdXJsIikudmFsKCkudHJpbSgpOwoJCXZhciBpbnRlcmZhY2VfdHlwZSA9IHRyLmZpbmQoJ2lucHV0W25hbWU9ImludGVyZmFjZS10eXBlIl06Y2hlY2tlZCcpLnZhbCgpIHwgMDsKCQlpZiAoaW50ZXJmYWNlX25hbWUgPT0gIiIpIHsKCQkJYWxlcnQoIuivt+i+k+WFpeaOpeWPo+WQjeensCIpOwoJCQlyZXR1cm47CgkJfQoJCWlmIChpbnRlcmZhY2VfdXJsID09ICIiKSB7CgkJCWFsZXJ0KCIg6K+36L6T5YWl5o6l5Y+j5Zyw5Z2AIik7CgkJCXJldHVybjsKCQl9CgkJaWYgKCFpbnRlcmZhY2VfdXJsLnN0YXJ0c1dpdGgoImh0dHAiKSkgewoJCQlhbGVydCgiIOivt+i+k+WFpeS7pSBodHRwIOaIliBodHRwcyDlvIDlpLTnmoTmjqXlj6PlnLDlnYAiKTsKCQkJcmV0dXJuOwoJCX0KCQlpZiAoKGludGVyZmFjZV90eXBlICYgMSkgJiYgIWludGVyZmFjZV91cmwuc3RhcnRzV2l0aCgiaHR0cHMiKSkgewoJCQlhbGVydCgi56uZ5YaF6Kej5p6Q5Y+q5pSv5oyB5LulIGh0dHBzIOW8gOWktOeahOaOpeWPo+WcsOWdgO+8jOivt+S/ruaUueaOpeWPo+exu+WeiyIpOwoJCQlyZXR1cm47CgkJfQoJCXZhciBjYW5TYXZlID0gIXVzZXJJbnRmcy5zb21lKGl0ZW0gPT4gaW50ZXJmYWNlX25hbWUgPT09IGl0ZW0ubmFtZSk7CgkJaWYgKGNhblNhdmUpIHsKCQkJdXNlckludGZzLnB1c2goewoJCQkJIm5hbWUiOiBpbnRlcmZhY2VfbmFtZSwKCQkJCSJ1cmwiOiBpbnRlcmZhY2VfdXJsLAoJCQkJInR5cGUiOiBpbnRlcmZhY2VfdHlwZQoJCQl9KTsKCQkJR01zZXRWYWx1ZSgidXNlcl9pbnRlcmZhY2UiLCB1c2VySW50ZnMpOwoJCQlsb2NhdGlvbi5yZWxvYWQoKTsKCQl9IGVsc2UgewoJCQlhbGVydCgi5bey5a2Y5Zyo5ZCM5ZCN5o6l5Y+j77yM6K+35L+u5pS55o6l5Y+j5ZCN56ewIik7CgkJfQoJfSk7CgkkKCIuZGVsZXRlLWJ1dHRvbiIpLmNsaWNrKGZ1bmN0aW9uICgpIHsKCQljb25zdCBwcCA9IHRoaXMuY2xvc2VzdCgndHInKTsKCQljb25zdCBkZWxfbmFtZSA9IHBwLmZpcnN0Q2hpbGQuaW5uZXJIVE1MOwoJCXVzZXJJbnRmcy5mb3JFYWNoKChrLCBpKSA9PiB7IC8vIGEuc3BsaWNlKGEuZmluZEluZGV4KGsgPT4gay5uYW1lID09IGRlbF9uYW1lKSwgMSk7CgkJCWlmIChkZWxfbmFtZSA9PSBrLm5hbWUpIHVzZXJJbnRmcy5zcGxpY2UoaSwgMSk7CgkJfSk7CgkJR01zZXRWYWx1ZSgidXNlcl9pbnRlcmZhY2UiLCB1c2VySW50ZnMpOwoJCXBwLnJlbW92ZSgpOwoJCSQoYCNfZ21fX3ZpcEpYIGxpOmNvbnRhaW5zKCIke2RlbF9uYW1lfSIpYCkucmVtb3ZlKCk7Cgl9KTsKfTsKCmNvbnN0IHJvdXRlciA9IHsKCVsid3d3LmlxaXlpLmNvbSJdKCkgewoJCXBsYXllckNTUyA9ICIjZmxhc2hib3giOwoJCXBvc0NTUyA9ICIucXktZmxhc2gtZnVuYyI7CgkJR01hZGRTdHlsZSgKCQlgLmZuLWlxaXlpLWppZXhpIGxpIHsKCQkJY29sb3I6ICNjY2M7IHRleHQtYWxpZ246IGNlbnRlcjsgd2lkdGg6IDYwcHg7IGN1cnNvcjogcG9pbnRlcjsKCQkJbGluZS1oZWlnaHQ6IDIwcHg7IGZsb2F0OmxlZnQ7IGJvcmRlcjoxcHggc29saWQgZ3JheTsKCQkJYm9yZGVyLXJhZGl1czo4cHg7IHBhZGRpbmc6MCA0cHg7IG1hcmdpbjo0cHggMnB4OwoJCX0KCQkjX2dtX192aXBKWCBhIHtjb2xvcjogI2NjY30KCQkuZm4taXFpeWktamlleGkgPiAucXktcG9wdXAtYm94IHsKCQkJYmFja2dyb3VuZC1jb2xvcjojMmUyZTJlOyBib3JkZXI6MXB4IHNvbGlkIGdyYXk7CgkJfQoJCSNmbGFzaGJveCB7IHotaW5kZXg6IDQwMCAhaW1wb3J0YW50IH0KCQkuZnVuYy1pdGVtLmZuLWppZXhpLW1haW46aG92ZXIgPiBkaXYgeyBkaXNwbGF5OiBibG9jayB9CgkJLmZuLWlxaXlpLWppZXhpIHsKCQkJZGlzcGxheTpub25lO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTUwcHg7CgkJCXRleHQtYWxpZ246Y2VudGVyO3otaW5kZXg6MjE0NzQ4MzY0NzsKCQl9CgkJLmlxaXlpX0pYOmhvdmVyIHtjb2xvcjogIzZiYTQzMH0KCQkjX2dtX192aXBKWCBsaTpob3ZlciwgI19nbV9fdmlwSlggYTpob3ZlciB7Y29sb3I6ICMwMWJlMDd9YCk7CgkJY29uc3QgaXFpeWlfamlleGkgPSAkKAoJCWA8ZGl2IGNsYXNzPSJmdW5jLWl0ZW0gZm4tamlleGktbWFpbiI+CgkJCTxzcGFuIGNsYXNzPSJmdW5jLWlubmVyIGZuLWlxaXlpLWppZXhpLXRleHQiIHN0eWxlPSJoZWlnaHQ6NDBweDsiPgoJCQkJPHNwYW4gY2xhc3M9ImZ1bmMtbmFtZSI+6Kej5p6QPC9zcGFuPgoJCQk8L3NwYW4+CgkJCTxkaXYgY2xhc3M9ImZuLWlxaXlpLWppZXhpIj4KCQkJCTxkaXYgY2xhc3M9InF5LXBvcHVwLWJveCI+JHtqaWV4aURJVn08L2Rpdj4KCQkJPC9kaXY+CgkJPC9kaXY+YCk7CgkJdGhpcy53YWl0ID0gZWwgPT4gewoJCQllbC5maWx0ZXIocG9zQ1NTKS5hcHBlbmQoaXFpeWlfamlleGkpCgkJCS5maW5kKCIuZm4taXFpeWktamlleGktdGV4dCwgbGlbZGF0YS11cmxdIikuY2xpY2soaW5uZXJQYXJzZSk7CgkJfTsKCX0sCglbInYucXEuY29tIl0oKSB7CgkJcGxheWVyQ1NTID0gIiNtb2RfcGxheWVyIjsKCQlwb3NDU1MgPSAiLmFjdGlvbl93cmFwIjsKCQlHTWFkZFN0eWxlKAoJCWAuZm4tcXEtamlleGkgewoJCQliYWNrZ3JvdW5kLWNvbG9yOiMyZTJlMmU7IHdpZHRoOmF1dG87IGxlZnQ6LTUwcHg7IGJvcmRlcjoxcHggc29saWQgZ3JheTsKCQl9CgkJLmZuLXFxLWppZXhpIGxpIHsKCQkJdGV4dC1hbGlnbjpjZW50ZXI7IHdpZHRoOjYwcHg7IGxpbmUtaGVpZ2h0OjIwcHg7IGZsb2F0OmxlZnQ7CgkJCWJvcmRlcjoxcHggc29saWQgZ3JheTsgYm9yZGVyLXJhZGl1czo4cHg7IHBhZGRpbmc6MCA0cHg7CgkJCWNvbG9yOiM5OTk7IGN1cnNvcjogcG9pbnRlcjsgbWFyZ2luOjRweCAycHg7CgkJfQoJCS5mbi1xcS1qaWV4aSBhIHsgY29sb3I6Izk5OTsgfQoJCSNfZ21fX3ZpcEpYIGxpOmhvdmVyIHtjb2xvcjojZmU2NTI3fWAKCQkpOwoJCWNvbnN0IHFxX2ppZXhpID0gJCgKCQlgPGRpdiBjbGFzcz0iYWN0aW9uX2l0ZW0gYWN0aW9uX2ppZXhpIiBzdHlsZT0icG9zaXRpb246cmVsYXRpdmU7Ij4KCQkJPGEgY2xhc3M9ImFjdGlvbl90aXRsZSBmbi1xcS1qaWV4aS10ZXh0Ij48c3Bhbj7op6PmnpA8L3NwYW4+PC9hPgoJCQk8ZGl2IGNsYXNzPSJtb2RfcG9wX2FjdGlvbiBmbi1xcS1qaWV4aSI+JHtqaWV4aURJVn08L2Rpdj4KCQk8L2Rpdj5gKTsKCQl0aGlzLndhaXQgPSBlbCA9PiB7CgkJCWNvbnN0IHsgdHlwZV9uYW1lLCB2aXBQYWdlIH0gPSB1bnNhZmVXaW5kb3cuQ09WRVJfSU5GTzsKCQkJaWYgKHR5cGVfbmFtZSA9PT0gIueUteW9sSIpIHsKCQkJCSQoIi5tb2RfZmlndXJlX2xpc3QgLmxpc3RfaXRlbSIpLmNsaWNrKGRlbGF5UmVsb2FkKTsKCQkJfSBlbHNlIGlmICh0eXBlX25hbWUgPT09ICLnlLXop4bliaciIHx8IHR5cGVfbmFtZSA9PT0gIuWKqOa8qyIpIHsKCQkJCSQoJy5tb2RfZXBpc29kZSAuaXRlbScpLmNsaWNrKGRlbGF5UmVsb2FkKTsKCQkJCSQoIi5tb2RfZXBpc29kZV9maWx0ZXIiKS5jbGljaygoKSA9PiB7CgkJCQkJJCgnLm1vZF9lcGlzb2RlIC5pdGVtJykuY2xpY2soZGVsYXlSZWxvYWQpOwoJCQkJfSk7CgkJCX0KCQkJJCgiLmFjdGlvbl9naWZ0LCAuYWN0aW9uX21vcmUiKS5yZW1vdmUoKTsgLy/kuLrkuobpgb/lhY3mmL7npLrnqbrpl7TkuI3otrPvvIznp7vpmaTkuL7miqXmjInpkq4KCQkJZWwuZmlsdGVyKHBvc0NTUykuYXBwZW5kKHFxX2ppZXhpKQoJCQkub24oIm1vdXNlb3ZlciBtb3VzZW91dCIsICgpID0+IHsKCQkJCXFxX2ppZXhpLnRvZ2dsZUNsYXNzKCJvcGVuIik7CgkJCX0pCgkJCS5maW5kKCIuZm4tcXEtamlleGktdGV4dCwgbGlbZGF0YS11cmxdIikuY2xpY2soaW5uZXJQYXJzZSk7CgkJfTsKCQl0YXNrcy5hZGQoZWwgPT4gewoJCQllbC5yZW1vdmUoKTsKCQkJcmV0dXJuIHRydWU7CgkJfSwgIi50dmlwX2xheWVyLCNtYXNrX2xheWVyIik7Cgl9LAoJWyJ2LnlvdWt1LmNvbSJdKCkgewoJCXBsYXllckNTUyA9ICcjeWtQbGF5ZXInOwoJCXBvc0NTUyA9ICJ1bC5wbGF5LWZuIjsKCQlHTWFkZFN0eWxlKAoJCWAuZm4teW91a3UtamlleGkgbGkgewoJCQl0ZXh0LWFsaWduOmNlbnRlcjt3aWR0aDo2MHB4O2xpbmUtaGVpZ2h0OjIwcHg7CgkJCWZsb2F0OmxlZnQ7Ym9yZGVyOjFweCBzb2xpZCBncmF5O2JvcmRlci1yYWRpdXM6OHB4OwoJCQlwYWRkaW5nOjAgNHB4O21hcmdpbjo0cHggMnB4OyBjdXJzb3I6IHBvaW50ZXI7CgkJfQoJCSNfZ21fX3ZpcEpYIGEge2NvbG9yOiNjY2N9CgkJLmZuLXlvdWt1LWppZXhpID4gLmZuLXBhbmVsIHsKCQkJYm9yZGVyOjFweCBzb2xpZCBncmF5OyBtaW4td2lkdGg6OWVtICFpbXBvcnRhbnQ7IHdpZHRoOmF1dG8gIWltcG9ydGFudDsKCQl9CgkJI19nbV9fdmlwSlggbGk6aG92ZXIsICNfZ21fX3ZpcEpYIGE6aG92ZXIge2NvbG9yOiMyNTkyZmZ9YAoJCSk7CgkJY29uc3QgeW91a3VfamlleGkgPSAkKAoJCWA8bGkgY2xhc3M9InBsYXktZm4tbGkgZm4teW91a3UtamlleGkiPgoJCQk8c3BhbiBjbGFzcz0idGV4dCBmbi15b3VrdS1qaWV4aS10ZXh0Ij7op6PmnpA8L3NwYW4+CgkJCTxkaXYgY2xhc3M9ImZuLXBhbmVsIj4ke2ppZXhpRElWfTwvZGl2PgoJCTwvbGk+YCk7CgkJdGhpcy53YWl0ID0gZWwgPT4gewoJCQllbC5maWx0ZXIocG9zQ1NTKS5hcHBlbmQoeW91a3VfamlleGkpCgkJCS5maW5kKCIuZm4teW91a3UtamlleGktdGV4dCwgbGlbZGF0YS11cmxdIikuY2xpY2soaW5uZXJQYXJzZSk7CgkJfTsKCX0sCglbInd3dy5tZ3R2LmNvbSJdKCkgewoJCXBsYXllckNTUyA9IiNtZ3R2LXBsYXllci13cmFwIjsKCQlwb3NDU1MgPSAiLnYtcGFuZWwtYm94IjsKCQlHTWFkZFN0eWxlKAoJCWAuZm4tbWd0di1qaWV4aTpob3ZlciA+IC5leHRlbmQgeyBkaXNwbGF5OiBibG9jayB9CgkJLmZuLW1ndHYtamlleGkgbGkgewoJCQljb2xvcjojY2NjO3RleHQtYWxpZ246Y2VudGVyO3dpZHRoOjYwcHg7bGluZS1oZWlnaHQ6MjBweDtmbG9hdDpsZWZ0OwoJCQlib3JkZXI6MXB4IHNvbGlkIGdyYXk7Ym9yZGVyLXJhZGl1czo4cHg7cGFkZGluZzowIDRweDttYXJnaW46NHB4IDJweDsgY3Vyc29yOiBwb2ludGVyOwoJCX0KCQkjX2dtX192aXBKWCBhIHtjb2xvcjojY2NjfQoJCS5mbi1tZ3R2LWppZXhpID4gLmV4dGVuZCB7CgkJCWRpc3BsYXk6bm9uZTt0b3A6LTVweDtsZWZ0Oi01MHB4O3RleHQtYWxpZ246Y2VudGVyO3Bvc2l0aW9uOnJlbGF0aXZlOwoJCX0KCQkjX2dtX192aXBKWCBsaTpob3ZlciB7Y29sb3I6I2ZmNmYwMH0KCQkjX2dtX192aXBKWCBhOmhvdmVyIHtjb2xvcjojZmY2ZjAwICFpbXBvcnRhbnR9CgkJLnYtcGFuZWwtZXh0ZW5kID4gLmZuLXBhbmVsIHsKCQkJYmFja2dyb3VuZC1jb2xvcjojMmUyZTJlO3dpZHRoOmF1dG87Ym9yZGVyOjFweCBzb2xpZCBncmF5OwoJCX1gKTsKCQljb25zdCBtZ3R2X2ppZXhpID0gJCgKCQlgPGRpdiBjbGFzcz0idi1wYW5lbC1tb2QgZm4tbWd0di1qaWV4aSIgc3R5bGU9ImN1cnNvcjpwb2ludGVyOyI+CgkJCTxhIGNsYXNzPSJ2LXBhbmVsLXN1Ym1vZCBmbi1tZ3R2LWppZXhpLXRleHQiPuino+aekDwvYT4KCQkJPGRpdiBjbGFzcz0iZXh0ZW5kIj4KCQkJCTxkaXYgY2xhc3M9InYtcGFuZWwtZXh0ZW5kIj4KCQkJCQk8ZGl2IGNsYXNzPSJmbi1wYW5lbCI+JHtqaWV4aURJVn08L2Rpdj4KCQkJCTwvZGl2PgoJCQk8L2Rpdj4KCQk8L2Rpdj5gKTsKCQl0aGlzLndhaXQgPSBlbCA9PiB7CgkJCSQoIi5hc2lkZS10YWJib3ggbGkiKS5jbGljayhkZWxheVJlbG9hZCk7CgkJCWVsLmZpbHRlcihwb3NDU1MpLmFwcGVuZChtZ3R2X2ppZXhpKQoJCQkuZmluZCgiLmZuLW1ndHYtamlleGktdGV4dCwgbGlbZGF0YS11cmxdIikuY2xpY2soaW5uZXJQYXJzZSk7CgkJfTsKCX0sCglbInR2LnNvaHUuY29tIl0oKSB7CgkJcGxheWVyQ1NTID0gJyNwbGF5ZXInOwoJCXBvc0NTUyA9ICIudkJveC10Yi5jZml4IjsKCQlHTWFkZFN0eWxlKAoJCWAuZm4tc29odS1qaWV4aSBsaXsKCQkJY29sb3I6IzMzMzsgdGV4dC1hbGlnbjpjZW50ZXI7IHdpZHRoOjYwcHg7IGxpbmUtaGVpZ2h0OjIwcHg7CgkJCWZsb2F0OmxlZnQ7IGJvcmRlcjoxcHggc29saWQgZ3JheTsgYm9yZGVyLXJhZGl1czo4cHg7CgkJCXBhZGRpbmc6MCA0cHg7IG1hcmdpbjo0cHggMnB4OyBjdXJzb3I6IHBvaW50ZXI7CgkJfQoJCS8qIC52Qm94LnZCb3gtcGxheTpob3ZlciA+IGRpdiB7ZGlzcGxheTogYmxvY2t9ICovCgkJLmZuLXNvaHUtamlleGkgewoJCQlkaXNwbGF5OiBub25lO2JhY2tncm91bmQtY29sb3I6IzJlMmUyZTtib3JkZXI6MXB4IHNvbGlkIGdyYXk7CgkJCXBhZGRpbmc6MDttYXJnaW46MCAwIDAgMDtsaW5lLWhlaWdodDoyNXB4O21pbi13aWR0aDoxODBweCBpbXBvcnRhbnQ7CgkJfQoJCSNfZ21fX3ZpcEpYIGxpOmhvdmVyIHtjb2xvcjojZTMzYzMwfWAKCQkpOwoJCWNvbnN0IHNvaHVfamlleGkgPSAkKAoJCWA8ZGl2IGNsYXNzPSJ2Qm94IHZCb3gtcGxheSI+CgkJCTxhIGNsYXNzPSJ2YnRuIj7op6PmnpA8L2E+CgkJCTxkaXYgY2xhc3M9InZDb250IGZuLXNvaHUtamlleGkiPiR7amlleGlESVZ9PC9kaXY+CgkJPC9kaXY+YCk7CgkJc29odV9qaWV4aS5jbGljaygoKSA9PiB7CgkJCXNvaHVfamlleGkuY2hpbGRyZW4oIi5mbi1zb2h1LWppZXhpIikudG9nZ2xlKCk7CgkJfSk7CgkJdGhpcy53YWl0ID0gZWwgPT4gewoJCQlwbGF5ZXJDU1MgPSBlbC5maWx0ZXIocGxheWVyQ1NTKTsKCQkJZWwuZmlsdGVyKHBvc0NTUykucHJlcGVuZChzb2h1X2ppZXhpKQoJCQkuZmluZCgibGlbZGF0YS11cmxdIikuY2xpY2soaW5uZXJQYXJzZSk7CgkJCSQoIiNwbGF5ZXJfdmlwVGlwcyIpLmhpZGUoKTsKCQl9OwoJfSwKCVsiZmlsbS5zb2h1LmNvbSJdKCkgewoJCXBsYXllckNTUyA9ICIjcGxheWVyV3JhcCI7CgkJcG9zQ1NTID0gIi5wbGF5ZXItY29udGVudC1pbmZvIjsKCQlHTWFkZFN0eWxlKAoJCWAuZm4tc29odS1qaWV4aSBsaSB7CgkJCWNvbG9yOiNjY2M7IHRleHQtYWxpZ246Y2VudGVyOyB3aWR0aDo2MHB4OyBjdXJzb3I6IHBvaW50ZXI7CgkJCWxpbmUtaGVpZ2h0OjIwcHg7IGZsb2F0OmxlZnQ7IGJvcmRlcjoxcHggc29saWQgZ3JheTsKCQkJYm9yZGVyLXJhZGl1czo4cHg7IHBhZGRpbmc6MCA0cHg7IG1hcmdpbjo0cHggMnB4OwoJCX0KCQkjX2dtX192aXBKWCBhIHtjb2xvcjojY2NjfQoJCS5hY3Rpb24taXRlbS5qaWV4aTpob3ZlciA+IGRpdiB7ZGlzcGxheTogYmxvY2t9CgkJLmZuLXNvaHUtamlleGkgewoJCQlkaXNwbGF5Om5vbmU7YmFja2dyb3VuZC1jb2xvcjojMmUyZTJlO2JvcmRlcjoxcHggc29saWQgZ3JheTsKCQkJd2lkdGg6YXV0bzt0ZXh0LWFsaWduOmNlbnRlcjttYXJnaW4tbGVmdDotNjFweDsKCQl9CgkJI19nbV9fdmlwSlggbGk6aG92ZXIsICNfZ21fX3ZpcEpYIGE6aG92ZXIge2NvbG9yOiNlZTNjM2F9YAoJCSk7CgkJY29uc3Qgc29odV9maWxtX2ppZXhpID0gJCgKCQlgPGRpdiBjbGFzcz0iYWN0aW9uLWl0ZW0gamlleGkiPgoJCQk8YSBjbGFzcz0iYWN0aW9uLXRpdGxlIGZuLXNvaHUtamlleGktdGV4dCI+CgkJCQk8c3BhbiBjbGFzcz0iaWNvLXRleHQiPuino+aekDwvc3Bhbj4KCQkJCTxpIGNsYXNzPSJpY28tZG93biI+PC9pPgoJCQk8L2E+CgkJCTxkaXYgY2xhc3M9ImhvdmVyLWNvbnRlbnQgZm4tc29odS1qaWV4aSI+JHtqaWV4aURJVn08L2Rpdj4KCQk8L2Rpdj5gKTsKCQl0aGlzLndhaXQgPSBlbCA9PiB7CgkJCWVsLmZpbHRlcihwb3NDU1MpLnByZXBlbmQoc29odV9maWxtX2ppZXhpKQoJCQkuZmluZCgiLmZuLXNvaHUtamlleGktdGV4dCwgbGlbZGF0YS11cmxdIikuY2xpY2soaW5uZXJQYXJzZSk7CgkJfTsKCX0sCglbInd3dy5sZS5jb20iXSgpIHsKCQlwbGF5ZXJDU1MgPSAiI2xlX3BsYXlib3giOwoJCXBvc0NTUyA9ICIuaW50ZXJhY3RfYXJlYSI7CgkJR01hZGRTdHlsZSgKCQlgLmZuLWxlLWppZXhpIHsKCQkJZGlzcGxheTpub25lO2JhY2tncm91bmQtY29sb3I6IzJlMmUyZTtib3JkZXI6MXB4IHNvbGlkIGdyYXk7CgkJCXdpZHRoOmF1dG87cG9zaXRpb246YWJzb2x1dGU7dG9wOjQ1cHg7Ym9yZGVyLXRvcDoycHggc29saWQgI0U0MjExMjsKCQkJYm94LXNoYWRvdzowIDJweCA2cHggMCByZ2JhKDAsMCwwLC4xKTtsZWZ0Oi00MHB4OwoJCX0KCQkuZm4tbGUtamlleGkgbGkgewoJCQljb2xvcjojY2NjO3RleHQtYWxpZ246Y2VudGVyO3dpZHRoOjYwcHg7bGluZS1oZWlnaHQ6MjBweDsKCQkJZmxvYXQ6bGVmdDtib3JkZXI6MXB4IHNvbGlkIGdyYXk7Ym9yZGVyLXJhZGl1czo4cHg7CgkJCXBhZGRpbmc6MCA1cHg7bWFyZ2luOjRweCAycHg7IGhlaWdodDoyNXB4OwoJCX0KCQkubGUtamlleGktbWFpbjpob3ZlciA+IGRpdiB7ZGlzcGxheTogYmxvY2t9CgkJI19nbV9fdmlwSlggbGk6aG92ZXIge2NvbG9yOiNlNDIwMTN9YAoJCSk7CgkJY29uc3QgbGVfamlleGkgPSAkKAoJCWA8bGkgY2xhc3M9ImxlLWppZXhpLW1haW4iPgoJCQk8YSBjbGFzcz0iZm4tbGUtamlleGktdGV4dCI+PHNwYW4+6Kej5p6QPC9zcGFuPjwvYT4KCQkJPGRpdiBjbGFzcz0iZm4tbGUtamlleGkiPiR7amlleGlESVZ9PC9kaXY+CgkJPC9saT5gKTsKCQl0aGlzLndhaXQgPSBlbCA9PiB7CgkJCWVsLmZpbHRlcihwb3NDU1MpLnByZXBlbmQobGVfamlleGkpCgkJCS5maW5kKCIuZm4tbGUtamlleGktdGV4dCwgbGlbZGF0YS11cmxdIikuY2xpY2soaW5uZXJQYXJzZSk7CgkJfTsKCX0sCglbInYucHB0di5jb20iXSgpIHsKCQlwbGF5ZXJDU1MgPSAiI3BwdHZfcGxheXBhZ2VfYm94IjsKCQlwb3NDU1MgPSAiLm1vZHVsZS12aWRlbzIwMTYtb3BzIHVsIjsKCQlHTWFkZFN0eWxlKAoJCWAjZm4tcHB0di1qaWV4aSBsaSB7CgkJCWNvbG9yOiNjY2M7dGV4dC1hbGlnbjpjZW50ZXI7CgkJCXdpZHRoOjYwcHg7bGluZS1oZWlnaHQ6MjBweDtmbG9hdDpsZWZ0O2JvcmRlcjoxcHggc29saWQgZ3JheTsKCQkJYm9yZGVyLXJhZGl1czo4cHg7cGFkZGluZzowIDRweDttYXJnaW46NHB4IDJweDsKCQl9CgkJI19nbV9fdmlwSlggbGk6aG92ZXIsICNfZ21fX3ZpcEpYIGE6aG92ZXIge2NvbG9yOiMzOWZ9CgkJI19nbV9fdmlwSlggYSB7Y29sb3I6I2NjYztkaXNwbGF5OmlubGluZTtwYWRkaW5nOjAgNHB4O30KCQkjcHB0di1qaWV4aS1idG46aG92ZXI+ZGl2IHtkaXNwbGF5OiBibG9ja30KCQkjZm4tcHB0di1qaWV4aSB7CgkJCWRpc3BsYXk6bm9uZTsgcG9zaXRpb246YWJzb2x1dGU7IHRvcDo1MHB4OwoJCQliYWNrZ3JvdW5kLWNvbG9yOiM0NDQ7IGJvcmRlcjoxcHggc29saWQgZ3JheTsKCQl9YCk7CgkJY29uc3QgcHB0dl9qaWV4aSA9ICQoCgkJYDxsaSBpZD0icHB0di1qaWV4aS1idG4iIHN0eWxlPSJjdXJzb3I6cG9pbnRlcjsiPgoJCQk8YSBjbGFzcz0icHB0dl9qaWV4aS10ZXh0Ij48aSBjbGFzcz0iaWM0Ij48L2k+6Kej5p6QPC9hPgoJCQk8ZGl2IGlkPSJmbi1wcHR2LWppZXhpIj4ke2ppZXhpRElWfTwvZGl2PgoJCTwvbGk+YAoJCSk7CgkJdGhpcy53YWl0ID0gZWwgPT4gewoJCQllbC5maWx0ZXIocG9zQ1NTKS5wcmVwZW5kKHBwdHZfamlleGkpCgkJCS5maW5kKCIucHB0dl9qaWV4aS10ZXh0LCBsaVtkYXRhLXVybF0iKS5jbGljayhpbm5lclBhcnNlKTsKCQl9OwoJfQp9OwoKY29uc3QgaW5pdCA9ICgpID0+IHsKCUdNX3JlZ2lzdGVyTWVudUNvbW1hbmQoIuiHquWumuS5iSBWSVAg6KeG6aKR6Kej5p6Q5o6l5Y+jIiwgc2hvd1NldHRpbmcpOwoJdXNlckludGZzID0gR01nZXRWYWx1ZSgidXNlcl9pbnRlcmZhY2UiLCBbXSk7Cgljb25zdCBsaXN0ID0gaW50ZXJmYWNlcy5jb25jYXQodXNlckludGZzKTsKCWxldCBvdXRMaSA9ICcnLCBpbkxpID0gJyc7Cglmb3IgKGNvbnN0IGsgb2YgbGlzdCkgewoJCWNvbnN0IGFkZHIgPSBrLnVybC50cmltKCkgKyB1cmw7CgkJaWYgKGsudHlwZSAmIDEpIGluTGkgKz0gYDxsaSBkYXRhLXVybD0iJHthZGRyfSI+JHtrLm5hbWV9PC9saT5gOwoJCWlmIChrLnR5cGUgJiAyKSBvdXRMaSArPSBgPGxpPjxhIHRhcmdldD0iX2JsYW5rIiBocmVmPSIke2FkZHJ9Ij4ke2submFtZX08L2E+PC9saT5gOwoJfQoJamlleGlESVYgPSBgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyI+CgkJPGRpdiBzdHlsZT0id2lkdGg6MTgwcHg7cGFkZGluZzoxMHB4IDA7IiBpZD0iX2dtX192aXBKWCI+CgkJCTxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyO2xpbmUtaGVpZ2h0OjIwcHg7Ij7nq5nlhoXop6PmnpA8L2Rpdj4KCQkJPHVsIHN0eWxlPSJtYXJnaW46MCAxMHB4OyI+JHtpbkxpfTxkaXYgc3R5bGU9ImNsZWFyOmJvdGg7Ij48L2Rpdj48L3VsPgoJCQk8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjtsaW5lLWhlaWdodDoyMHB4OyI+56uZ5aSW6Kej5p6QPC9kaXY+CgkJCTx1bCBzdHlsZT0ibWFyZ2luOjAgMTBweDsiPiR7b3V0TGl9PGRpdiBzdHlsZT0iY2xlYXI6Ym90aDsiPjwvZGl2PjwvdWw+CgkJPC9kaXY+Cgk8L2Rpdj5gOwoJcm91dGVyW2hvc3RdICYmIHJvdXRlcltob3N0XSgpOwoJdGFza3MuYWRkKHJvdXRlci53YWl0LCBgJHtwbGF5ZXJDU1N9LCR7cG9zQ1NTfWApOwp9OwoKaW5pdCgpOw==","requires":[{"meta":{"name":"jquery.min.js","url":"https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js","ts":1587235898720,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2MS4xMi40IHwgKGMpIGpRdWVyeSBGb3VuZGF0aW9uIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovCiFmdW5jdGlvbihhLGIpeyJvYmplY3QiPT10eXBlb2YgbW9kdWxlJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWEuZG9jdW1lbnQ/YihhLCEwKTpmdW5jdGlvbihhKXtpZighYS5kb2N1bWVudCl0aHJvdyBuZXcgRXJyb3IoImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnQiKTtyZXR1cm4gYihhKX06YihhKX0oInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXMsZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkPWEuZG9jdW1lbnQsZT1jLnNsaWNlLGY9Yy5jb25jYXQsZz1jLnB1c2gsaD1jLmluZGV4T2YsaT17fSxqPWkudG9TdHJpbmcsaz1pLmhhc093blByb3BlcnR5LGw9e30sbT0iMS4xMi40IixuPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBuLmZuLmluaXQoYSxiKX0sbz0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2cscD0vXi1tcy0vLHE9Ly0oW1xkYS16XSkvZ2kscj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O24uZm49bi5wcm90b3R5cGU9e2pxdWVyeTptLGNvbnN0cnVjdG9yOm4sc2VsZWN0b3I6IiIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBlLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT8wPmE/dGhpc1thK3RoaXMubGVuZ3RoXTp0aGlzW2FdOmUuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPW4ubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxiLmNvbnRleHQ9dGhpcy5jb250ZXh0LGJ9LGVhY2g6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZWFjaCh0aGlzLGEpfSxtYXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4ubWFwKHRoaXMsZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5jYWxsKGIsYyxiKX0pKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKDApfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoLTEpfSxlcTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxlbmd0aCxjPSthKygwPmE/YjowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soYz49MCYmYj5jP1t0aGlzW2NdXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IoKX0scHVzaDpnLHNvcnQ6Yy5zb3J0LHNwbGljZTpjLnNwbGljZX0sbi5leHRlbmQ9bi5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZz1hcmd1bWVudHNbMF18fHt9LGg9MSxpPWFyZ3VtZW50cy5sZW5ndGgsaj0hMTtmb3IoImJvb2xlYW4iPT10eXBlb2YgZyYmKGo9ZyxnPWFyZ3VtZW50c1toXXx8e30saCsrKSwib2JqZWN0Ij09dHlwZW9mIGd8fG4uaXNGdW5jdGlvbihnKXx8KGc9e30pLGg9PT1pJiYoZz10aGlzLGgtLSk7aT5oO2grKylpZihudWxsIT0oZT1hcmd1bWVudHNbaF0pKWZvcihkIGluIGUpYT1nW2RdLGM9ZVtkXSxnIT09YyYmKGomJmMmJihuLmlzUGxhaW5PYmplY3QoYyl8fChiPW4uaXNBcnJheShjKSkpPyhiPyhiPSExLGY9YSYmbi5pc0FycmF5KGEpP2E6W10pOmY9YSYmbi5pc1BsYWluT2JqZWN0KGEpP2E6e30sZ1tkXT1uLmV4dGVuZChqLGYsYykpOnZvaWQgMCE9PWMmJihnW2RdPWMpKTtyZXR1cm4gZ30sbi5leHRlbmQoe2V4cGFuZG86ImpRdWVyeSIrKG0rTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXEQvZywiIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuImZ1bmN0aW9uIj09PW4udHlwZShhKX0saXNBcnJheTpBcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4iYXJyYXkiPT09bi50eXBlKGEpfSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmYT09YS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihhKXt2YXIgYj1hJiZhLnRvU3RyaW5nKCk7cmV0dXJuIW4uaXNBcnJheShhKSYmYi1wYXJzZUZsb2F0KGIpKzE+PTB9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtpZighYXx8Im9iamVjdCIhPT1uLnR5cGUoYSl8fGEubm9kZVR5cGV8fG4uaXNXaW5kb3coYSkpcmV0dXJuITE7dHJ5e2lmKGEuY29uc3RydWN0b3ImJiFrLmNhbGwoYSwiY29uc3RydWN0b3IiKSYmIWsuY2FsbChhLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpKXJldHVybiExfWNhdGNoKGMpe3JldHVybiExfWlmKCFsLm93bkZpcnN0KWZvcihiIGluIGEpcmV0dXJuIGsuY2FsbChhLGIpO2ZvcihiIGluIGEpO3JldHVybiB2b2lkIDA9PT1ifHxrLmNhbGwoYSxiKX0sdHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9hKyIiOiJvYmplY3QiPT10eXBlb2YgYXx8ImZ1bmN0aW9uIj09dHlwZW9mIGE/aVtqLmNhbGwoYSldfHwib2JqZWN0Ijp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihiKXtiJiZuLnRyaW0oYikmJihhLmV4ZWNTY3JpcHR8fGZ1bmN0aW9uKGIpe2EuZXZhbC5jYWxsKGEsYil9KShiKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UocCwibXMtIikucmVwbGFjZShxLHIpfSxub2RlTmFtZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1iLnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTA7aWYocyhhKSl7Zm9yKGM9YS5sZW5ndGg7Yz5kO2QrKylpZihiLmNhbGwoYVtkXSxkLGFbZF0pPT09ITEpYnJlYWt9ZWxzZSBmb3IoZCBpbiBhKWlmKGIuY2FsbChhW2RdLGQsYVtkXSk9PT0hMSlicmVhaztyZXR1cm4gYX0sdHJpbTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT8iIjooYSsiIikucmVwbGFjZShvLCIiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8W107cmV0dXJuIG51bGwhPWEmJihzKE9iamVjdChhKSk/bi5tZXJnZShjLCJzdHJpbmciPT10eXBlb2YgYT9bYV06YSk6Zy5jYWxsKGMsYSkpLGN9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2lmKGIpe2lmKGgpcmV0dXJuIGguY2FsbChiLGEsYyk7Zm9yKGQ9Yi5sZW5ndGgsYz1jPzA+Yz9NYXRoLm1heCgwLGQrYyk6YzowO2Q+YztjKyspaWYoYyBpbiBiJiZiW2NdPT09YSlyZXR1cm4gY31yZXR1cm4tMX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz0rYi5sZW5ndGgsZD0wLGU9YS5sZW5ndGg7d2hpbGUoYz5kKWFbZSsrXT1iW2QrK107aWYoYyE9PWMpd2hpbGUodm9pZCAwIT09YltkXSlhW2UrK109YltkKytdO3JldHVybiBhLmxlbmd0aD1lLGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCxlPVtdLGY9MCxnPWEubGVuZ3RoLGg9IWM7Zz5mO2YrKylkPSFiKGFbZl0sZiksZCE9PWgmJmUucHVzaChhW2ZdKTtyZXR1cm4gZX0sbWFwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGc9MCxoPVtdO2lmKHMoYSkpZm9yKGQ9YS5sZW5ndGg7ZD5nO2crKyllPWIoYVtnXSxnLGMpLG51bGwhPWUmJmgucHVzaChlKTtlbHNlIGZvcihnIGluIGEpZT1iKGFbZ10sZyxjKSxudWxsIT1lJiZoLnB1c2goZSk7cmV0dXJuIGYuYXBwbHkoW10saCl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZjtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGImJihmPWFbYl0sYj1hLGE9Ziksbi5pc0Z1bmN0aW9uKGEpPyhjPWUuY2FsbChhcmd1bWVudHMsMiksZD1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsYy5jb25jYXQoZS5jYWxsKGFyZ3VtZW50cykpKX0sZC5ndWlkPWEuZ3VpZD1hLmd1aWR8fG4uZ3VpZCsrLGQpOnZvaWQgMH0sbm93OmZ1bmN0aW9uKCl7cmV0dXJuK25ldyBEYXRlfSxzdXBwb3J0Omx9KSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYobi5mbltTeW1ib2wuaXRlcmF0b3JdPWNbU3ltYm9sLml0ZXJhdG9yXSksbi5lYWNoKCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbCIuc3BsaXQoIiAiKSxmdW5jdGlvbihhLGIpe2lbIltvYmplY3QgIitiKyJdIl09Yi50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gcyhhKXt2YXIgYj0hIWEmJiJsZW5ndGgiaW4gYSYmYS5sZW5ndGgsYz1uLnR5cGUoYSk7cmV0dXJuImZ1bmN0aW9uIj09PWN8fG4uaXNXaW5kb3coYSk/ITE6ImFycmF5Ij09PWN8fDA9PT1ifHwibnVtYmVyIj09dHlwZW9mIGImJmI+MCYmYi0xIGluIGF9dmFyIHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdT0ic2l6emxlIisxKm5ldyBEYXRlLHY9YS5kb2N1bWVudCx3PTAseD0wLHk9Z2EoKSx6PWdhKCksQT1nYSgpLEI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWImJihsPSEwKSwwfSxDPTE8PDMxLEQ9e30uaGFzT3duUHJvcGVydHksRT1bXSxGPUUucG9wLEc9RS5wdXNoLEg9RS5wdXNoLEk9RS5zbGljZSxKPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKWlmKGFbY109PT1iKXJldHVybiBjO3JldHVybi0xfSxLPSJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZCIsTD0iW1xceDIwXFx0XFxyXFxuXFxmXSIsTT0iKD86XFxcXC58W1xcdy1dfFteXFx4MDAtXFx4YTBdKSsiLE49IlxcWyIrTCsiKigiK00rIikoPzoiK0wrIiooWypeJHwhfl0/PSkiK0wrIiooPzonKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcInwoIitNKyIpKXwpIitMKyIqXFxdIixPPSI6KCIrTSsiKSg/OlxcKCgoJygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCIpfCgoPzpcXFxcLnxbXlxcXFwoKVtcXF1dfCIrTisiKSopfC4qKVxcKXwpIixQPW5ldyBSZWdFeHAoTCsiKyIsImciKSxRPW5ldyBSZWdFeHAoIl4iK0wrIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIrTCsiKyQiLCJnIiksUj1uZXcgUmVnRXhwKCJeIitMKyIqLCIrTCsiKiIpLFM9bmV3IFJlZ0V4cCgiXiIrTCsiKihbPit+XXwiK0wrIikiK0wrIioiKSxUPW5ldyBSZWdFeHAoIj0iK0wrIiooW15cXF0nXCJdKj8pIitMKyIqXFxdIiwiZyIpLFU9bmV3IFJlZ0V4cChPKSxWPW5ldyBSZWdFeHAoIl4iK00rIiQiKSxXPXtJRDpuZXcgUmVnRXhwKCJeIygiK00rIikiKSxDTEFTUzpuZXcgUmVnRXhwKCJeXFwuKCIrTSsiKSIpLFRBRzpuZXcgUmVnRXhwKCJeKCIrTSsifFsqXSkiKSxBVFRSOm5ldyBSZWdFeHAoIl4iK04pLFBTRVVETzpuZXcgUmVnRXhwKCJeIitPKSxDSElMRDpuZXcgUmVnRXhwKCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiK0wrIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK0wrIiooPzooWystXXwpIitMKyIqKFxcZCspfCkpIitMKyIqXFwpfCkiLCJpIiksYm9vbDpuZXcgUmVnRXhwKCJeKD86IitLKyIpJCIsImkiKSxuZWVkc0NvbnRleHQ6bmV3IFJlZ0V4cCgiXiIrTCsiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFwoIitMKyIqKCg/Oi1cXGQpP1xcZCopIitMKyIqXFwpfCkoPz1bXi1dfCQpIiwiaSIpfSxYPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksWT0vXmhcZCQvaSxaPS9eW157XStce1xzKlxbbmF0aXZlIFx3LywkPS9eKD86IyhbXHctXSspfChcdyspfFwuKFtcdy1dKykpJC8sXz0vWyt+XS8sYWE9Lyd8XFwvZyxiYT1uZXcgUmVnRXhwKCJcXFxcKFtcXGRhLWZdezEsNn0iK0wrIj98KCIrTCsiKXwuKSIsImlnIiksY2E9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSIweCIrYi02NTUzNjtyZXR1cm4gZCE9PWR8fGM/YjowPmQ/U3RyaW5nLmZyb21DaGFyQ29kZShkKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQ+PjEwfDU1Mjk2LDEwMjMmZHw1NjMyMCl9LGRhPWZ1bmN0aW9uKCl7bSgpfTt0cnl7SC5hcHBseShFPUkuY2FsbCh2LmNoaWxkTm9kZXMpLHYuY2hpbGROb2RlcyksRVt2LmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChlYSl7SD17YXBwbHk6RS5sZW5ndGg/ZnVuY3Rpb24oYSxiKXtHLmFwcGx5KGEsSS5jYWxsKGIpKX06ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxlbmd0aCxkPTA7d2hpbGUoYVtjKytdPWJbZCsrXSk7YS5sZW5ndGg9Yy0xfX19ZnVuY3Rpb24gZmEoYSxiLGQsZSl7dmFyIGYsaCxqLGssbCxvLHIscyx3PWImJmIub3duZXJEb2N1bWVudCx4PWI/Yi5ub2RlVHlwZTo5O2lmKGQ9ZHx8W10sInN0cmluZyIhPXR5cGVvZiBhfHwhYXx8MSE9PXgmJjkhPT14JiYxMSE9PXgpcmV0dXJuIGQ7aWYoIWUmJigoYj9iLm93bmVyRG9jdW1lbnR8fGI6dikhPT1uJiZtKGIpLGI9Ynx8bixwKSl7aWYoMTEhPT14JiYobz0kLmV4ZWMoYSkpKWlmKGY9b1sxXSl7aWYoOT09PXgpe2lmKCEoaj1iLmdldEVsZW1lbnRCeUlkKGYpKSlyZXR1cm4gZDtpZihqLmlkPT09ZilyZXR1cm4gZC5wdXNoKGopLGR9ZWxzZSBpZih3JiYoaj13LmdldEVsZW1lbnRCeUlkKGYpKSYmdChiLGopJiZqLmlkPT09ZilyZXR1cm4gZC5wdXNoKGopLGR9ZWxzZXtpZihvWzJdKXJldHVybiBILmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKSksZDtpZigoZj1vWzNdKSYmYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEguYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZikpLGR9aWYoYy5xc2EmJiFBW2ErIiAiXSYmKCFxfHwhcS50ZXN0KGEpKSl7aWYoMSE9PXgpdz1iLHM9YTtlbHNlIGlmKCJvYmplY3QiIT09Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXsoaz1iLmdldEF0dHJpYnV0ZSgiaWQiKSk/az1rLnJlcGxhY2UoYWEsIlxcJCYiKTpiLnNldEF0dHJpYnV0ZSgiaWQiLGs9dSkscj1nKGEpLGg9ci5sZW5ndGgsbD1WLnRlc3Qoayk/IiMiK2s6IltpZD0nIitrKyInXSI7d2hpbGUoaC0tKXJbaF09bCsiICIrcWEocltoXSk7cz1yLmpvaW4oIiwiKSx3PV8udGVzdChhKSYmb2EoYi5wYXJlbnROb2RlKXx8Yn1pZihzKXRyeXtyZXR1cm4gSC5hcHBseShkLHcucXVlcnlTZWxlY3RvckFsbChzKSksZH1jYXRjaCh5KXt9ZmluYWxseXtrPT09dSYmYi5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fX1yZXR1cm4gaShhLnJlcGxhY2UoUSwiJDEiKSxiLGQsZSl9ZnVuY3Rpb24gZ2EoKXt2YXIgYT1bXTtmdW5jdGlvbiBiKGMsZSl7cmV0dXJuIGEucHVzaChjKyIgIik+ZC5jYWNoZUxlbmd0aCYmZGVsZXRlIGJbYS5zaGlmdCgpXSxiW2MrIiAiXT1lfXJldHVybiBifWZ1bmN0aW9uIGhhKGEpe3JldHVybiBhW3VdPSEwLGF9ZnVuY3Rpb24gaWEoYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KCJkaXYiKTt0cnl7cmV0dXJuISFhKGIpfWNhdGNoKGMpe3JldHVybiExfWZpbmFsbHl7Yi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYj1udWxsfX1mdW5jdGlvbiBqYShhLGIpe3ZhciBjPWEuc3BsaXQoInwiKSxlPWMubGVuZ3RoO3doaWxlKGUtLSlkLmF0dHJIYW5kbGVbY1tlXV09Yn1mdW5jdGlvbiBrYShhLGIpe3ZhciBjPWImJmEsZD1jJiYxPT09YS5ub2RlVHlwZSYmMT09PWIubm9kZVR5cGUmJih+Yi5zb3VyY2VJbmRleHx8QyktKH5hLnNvdXJjZUluZGV4fHxDKTtpZihkKXJldHVybiBkO2lmKGMpd2hpbGUoYz1jLm5leHRTaWJsaW5nKWlmKGM9PT1iKXJldHVybi0xO3JldHVybiBhPzE6LTF9ZnVuY3Rpb24gbGEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YyYmYi50eXBlPT09YX19ZnVuY3Rpb24gbWEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oImlucHV0Ij09PWN8fCJidXR0b24iPT09YykmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG5hKGEpe3JldHVybiBoYShmdW5jdGlvbihiKXtyZXR1cm4gYj0rYixoYShmdW5jdGlvbihjLGQpe3ZhciBlLGY9YShbXSxjLmxlbmd0aCxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSljW2U9ZltnXV0mJihjW2VdPSEoZFtlXT1jW2VdKSl9KX0pfWZ1bmN0aW9uIG9hKGEpe3JldHVybiBhJiYidW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmF9Yz1mYS5zdXBwb3J0PXt9LGY9ZmEuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBiPyJIVE1MIiE9PWIubm9kZU5hbWU6ITF9LG09ZmEuc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZSxnPWE/YS5vd25lckRvY3VtZW50fHxhOnY7cmV0dXJuIGchPT1uJiY5PT09Zy5ub2RlVHlwZSYmZy5kb2N1bWVudEVsZW1lbnQ/KG49ZyxvPW4uZG9jdW1lbnRFbGVtZW50LHA9IWYobiksKGU9bi5kZWZhdWx0VmlldykmJmUudG9wIT09ZSYmKGUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsZGEsITEpOmUuYXR0YWNoRXZlbnQmJmUuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixkYSkpLGMuYXR0cmlidXRlcz1pYShmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9ImkiLCFhLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxjLmdldEVsZW1lbnRzQnlUYWdOYW1lPWlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGVuZENoaWxkKG4uY3JlYXRlQ29tbWVudCgiIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPVoudGVzdChuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGMuZ2V0QnlJZD1pYShmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFuLmdldEVsZW1lbnRzQnlOYW1lfHwhbi5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50QnlJZCYmcCl7dmFyIGM9Yi5nZXRFbGVtZW50QnlJZChhKTtyZXR1cm4gYz9bY106W119fSxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoYmEsY2EpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoImlkIik9PT1ifX0pOihkZWxldGUgZC5maW5kLklELGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBjPSJ1bmRlZmluZWQiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGVOb2RlJiZhLmdldEF0dHJpYnV0ZU5vZGUoImlkIik7cmV0dXJuIGMmJmMudmFsdWU9PT1ifX0pLGQuZmluZC5UQUc9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZT9iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpOmMucXNhP2IucXVlcnlTZWxlY3RvckFsbChhKTp2b2lkIDB9OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPTAsZj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKCIqIj09PWEpe3doaWxlKGM9ZltlKytdKTE9PT1jLm5vZGVUeXBlJiZkLnB1c2goYyk7cmV0dXJuIGR9cmV0dXJuIGZ9LGQuZmluZC5DTEFTUz1jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJnA/Yi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGEpOnZvaWQgMH0scj1bXSxxPVtdLChjLnFzYT1aLnRlc3Qobi5xdWVyeVNlbGVjdG9yQWxsKSkmJihpYShmdW5jdGlvbihhKXtvLmFwcGVuZENoaWxkKGEpLmlubmVySFRNTD0iPGEgaWQ9JyIrdSsiJz48L2E+PHNlbGVjdCBpZD0nIit1KyItXHJcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iLGEucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djYXB0dXJlXj0nJ10iKS5sZW5ndGgmJnEucHVzaCgiWypeJF09IitMKyIqKD86Jyd8XCJcIikiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fHEucHVzaCgiXFxbIitMKyIqKD86dmFsdWV8IitLKyIpIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJbaWR+PSIrdSsiLV0iKS5sZW5ndGh8fHEucHVzaCgifj0iKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RofHxxLnB1c2goIjpjaGVja2VkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJhIyIrdSsiKyoiKS5sZW5ndGh8fHEucHVzaCgiLiMuK1srfl0iKX0pLGlhKGZ1bmN0aW9uKGEpe3ZhciBiPW4uY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImhpZGRlbiIpLGEuYXBwZW5kQ2hpbGQoYikuc2V0QXR0cmlidXRlKCJuYW1lIiwiRCIpLGEucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGgmJnEucHVzaCgibmFtZSIrTCsiKlsqXiR8IX5dPz0iKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RofHxxLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IikscS5wdXNoKCIsLio6Iil9KSksKGMubWF0Y2hlc1NlbGVjdG9yPVoudGVzdChzPW8ubWF0Y2hlc3x8by53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG8ubW96TWF0Y2hlc1NlbGVjdG9yfHxvLm9NYXRjaGVzU2VsZWN0b3J8fG8ubXNNYXRjaGVzU2VsZWN0b3IpKSYmaWEoZnVuY3Rpb24oYSl7Yy5kaXNjb25uZWN0ZWRNYXRjaD1zLmNhbGwoYSwiZGl2Iikscy5jYWxsKGEsIltzIT0nJ106eCIpLHIucHVzaCgiIT0iLE8pfSkscT1xLmxlbmd0aCYmbmV3IFJlZ0V4cChxLmpvaW4oInwiKSkscj1yLmxlbmd0aCYmbmV3IFJlZ0V4cChyLmpvaW4oInwiKSksYj1aLnRlc3Qoby5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiksdD1ifHxaLnRlc3Qoby5jb250YWlucyk/ZnVuY3Rpb24oYSxiKXt2YXIgYz05PT09YS5ub2RlVHlwZT9hLmRvY3VtZW50RWxlbWVudDphLGQ9YiYmYi5wYXJlbnROb2RlO3JldHVybiBhPT09ZHx8ISghZHx8MSE9PWQubm9kZVR5cGV8fCEoYy5jb250YWlucz9jLmNvbnRhaW5zKGQpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZCkpKX06ZnVuY3Rpb24oYSxiKXtpZihiKXdoaWxlKGI9Yi5wYXJlbnROb2RlKWlmKGI9PT1hKXJldHVybiEwO3JldHVybiExfSxCPWI/ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBkPSFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBkP2Q6KGQ9KGEub3duZXJEb2N1bWVudHx8YSk9PT0oYi5vd25lckRvY3VtZW50fHxiKT9hLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGIpOjEsMSZkfHwhYy5zb3J0RGV0YWNoZWQmJmIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYSk9PT1kP2E9PT1ufHxhLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYSk/LTE6Yj09PW58fGIub3duZXJEb2N1bWVudD09PXYmJnQodixiKT8xOms/SihrLGEpLUooayxiKTowOjQmZD8tMToxKX06ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBjLGQ9MCxlPWEucGFyZW50Tm9kZSxmPWIucGFyZW50Tm9kZSxnPVthXSxoPVtiXTtpZighZXx8IWYpcmV0dXJuIGE9PT1uPy0xOmI9PT1uPzE6ZT8tMTpmPzE6az9KKGssYSktSihrLGIpOjA7aWYoZT09PWYpcmV0dXJuIGthKGEsYik7Yz1hO3doaWxlKGM9Yy5wYXJlbnROb2RlKWcudW5zaGlmdChjKTtjPWI7d2hpbGUoYz1jLnBhcmVudE5vZGUpaC51bnNoaWZ0KGMpO3doaWxlKGdbZF09PT1oW2RdKWQrKztyZXR1cm4gZD9rYShnW2RdLGhbZF0pOmdbZF09PT12Py0xOmhbZF09PT12PzE6MH0sbik6bn0sZmEubWF0Y2hlcz1mdW5jdGlvbihhLGIpe3JldHVybiBmYShhLG51bGwsbnVsbCxiKX0sZmEubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGEsYil7aWYoKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLGI9Yi5yZXBsYWNlKFQsIj0nJDEnXSIpLGMubWF0Y2hlc1NlbGVjdG9yJiZwJiYhQVtiKyIgIl0mJighcnx8IXIudGVzdChiKSkmJighcXx8IXEudGVzdChiKSkpdHJ5e3ZhciBkPXMuY2FsbChhLGIpO2lmKGR8fGMuZGlzY29ubmVjdGVkTWF0Y2h8fGEuZG9jdW1lbnQmJjExIT09YS5kb2N1bWVudC5ub2RlVHlwZSlyZXR1cm4gZH1jYXRjaChlKXt9cmV0dXJuIGZhKGIsbixudWxsLFthXSkubGVuZ3RoPjB9LGZhLmNvbnRhaW5zPWZ1bmN0aW9uKGEsYil7cmV0dXJuKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLHQoYSxiKX0sZmEuYXR0cj1mdW5jdGlvbihhLGIpeyhhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKTt2YXIgZT1kLmF0dHJIYW5kbGVbYi50b0xvd2VyQ2FzZSgpXSxmPWUmJkQuY2FsbChkLmF0dHJIYW5kbGUsYi50b0xvd2VyQ2FzZSgpKT9lKGEsYiwhcCk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1mP2Y6Yy5hdHRyaWJ1dGVzfHwhcD9hLmdldEF0dHJpYnV0ZShiKTooZj1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZmLnNwZWNpZmllZD9mLnZhbHVlOm51bGx9LGZhLmVycm9yPWZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIithKX0sZmEudW5pcXVlU29ydD1mdW5jdGlvbihhKXt2YXIgYixkPVtdLGU9MCxmPTA7aWYobD0hYy5kZXRlY3REdXBsaWNhdGVzLGs9IWMuc29ydFN0YWJsZSYmYS5zbGljZSgwKSxhLnNvcnQoQiksbCl7d2hpbGUoYj1hW2YrK10pYj09PWFbZl0mJihlPWQucHVzaChmKSk7d2hpbGUoZS0tKWEuc3BsaWNlKGRbZV0sMSl9cmV0dXJuIGs9bnVsbCxhfSxlPWZhLmdldFRleHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz0iIixkPTAsZj1hLm5vZGVUeXBlO2lmKGYpe2lmKDE9PT1mfHw5PT09Znx8MTE9PT1mKXtpZigic3RyaW5nIj09dHlwZW9mIGEudGV4dENvbnRlbnQpcmV0dXJuIGEudGV4dENvbnRlbnQ7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWMrPWUoYSl9ZWxzZSBpZigzPT09Znx8ND09PWYpcmV0dXJuIGEubm9kZVZhbHVlfWVsc2Ugd2hpbGUoYj1hW2QrK10pYys9ZShiKTtyZXR1cm4gY30sZD1mYS5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpoYSxtYXRjaDpXLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7Ij4iOntkaXI6InBhcmVudE5vZGUiLGZpcnN0OiEwfSwiICI6e2RpcjoicGFyZW50Tm9kZSJ9LCIrIjp7ZGlyOiJwcmV2aW91c1NpYmxpbmciLGZpcnN0OiEwfSwifiI6e2RpcjoicHJldmlvdXNTaWJsaW5nIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnJlcGxhY2UoYmEsY2EpLGFbM109KGFbM118fGFbNF18fGFbNV18fCIiKS5yZXBsYWNlKGJhLGNhKSwifj0iPT09YVsyXSYmKGFbM109IiAiK2FbM10rIiAiKSxhLnNsaWNlKDAsNCl9LENISUxEOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0udG9Mb3dlckNhc2UoKSwibnRoIj09PWFbMV0uc2xpY2UoMCwzKT8oYVszXXx8ZmEuZXJyb3IoYVswXSksYVs0XT0rKGFbNF0/YVs1XSsoYVs2XXx8MSk6MiooImV2ZW4iPT09YVszXXx8Im9kZCI9PT1hWzNdKSksYVs1XT0rKGFbN10rYVs4XXx8Im9kZCI9PT1hWzNdKSk6YVszXSYmZmEuZXJyb3IoYVswXSksYX0sUFNFVURPOmZ1bmN0aW9uKGEpe3ZhciBiLGM9IWFbNl0mJmFbMl07cmV0dXJuIFcuQ0hJTEQudGVzdChhWzBdKT9udWxsOihhWzNdP2FbMl09YVs0XXx8YVs1XXx8IiI6YyYmVS50ZXN0KGMpJiYoYj1nKGMsITApKSYmKGI9Yy5pbmRleE9mKCIpIixjLmxlbmd0aC1iKS1jLmxlbmd0aCkmJihhWzBdPWFbMF0uc2xpY2UoMCxiKSxhWzJdPWMuc2xpY2UoMCxiKSksYS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSkudG9Mb3dlckNhc2UoKTtyZXR1cm4iKiI9PT1hP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1ifX0sQ0xBU1M6ZnVuY3Rpb24oYSl7dmFyIGI9eVthKyIgIl07cmV0dXJuIGJ8fChiPW5ldyBSZWdFeHAoIihefCIrTCsiKSIrYSsiKCIrTCsifCQpIikpJiZ5KGEsZnVuY3Rpb24oYSl7cmV0dXJuIGIudGVzdCgic3RyaW5nIj09dHlwZW9mIGEuY2xhc3NOYW1lJiZhLmNsYXNzTmFtZXx8InVuZGVmaW5lZCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZSYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKX0pfSxBVFRSOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9ZmEuYXR0cihkLGEpO3JldHVybiBudWxsPT1lPyIhPSI9PT1iOmI/KGUrPSIiLCI9Ij09PWI/ZT09PWM6IiE9Ij09PWI/ZSE9PWM6Il49Ij09PWI/YyYmMD09PWUuaW5kZXhPZihjKToiKj0iPT09Yj9jJiZlLmluZGV4T2YoYyk+LTE6IiQ9Ij09PWI/YyYmZS5zbGljZSgtYy5sZW5ndGgpPT09Yzoifj0iPT09Yj8oIiAiK2UucmVwbGFjZShQLCIgIikrIiAiKS5pbmRleE9mKGMpPi0xOiJ8PSI9PT1iP2U9PT1jfHxlLnNsaWNlKDAsYy5sZW5ndGgrMSk9PT1jKyItIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPSJudGgiIT09YS5zbGljZSgwLDMpLGc9Imxhc3QiIT09YS5zbGljZSgtNCksaD0ib2YtdHlwZSI9PT1iO3JldHVybiAxPT09ZCYmMD09PWU/ZnVuY3Rpb24oYSl7cmV0dXJuISFhLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGIsYyxpKXt2YXIgaixrLGwsbSxuLG8scD1mIT09Zz8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLHE9Yi5wYXJlbnROb2RlLHI9aCYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHM9IWkmJiFoLHQ9ITE7aWYocSl7aWYoZil7d2hpbGUocCl7bT1iO3doaWxlKG09bVtwXSlpZihoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpcmV0dXJuITE7bz1wPSJvbmx5Ij09PWEmJiFvJiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZzKXttPXEsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biYmalsyXSxtPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShtPSsrbiYmbSYmbVtwXXx8KHQ9bj0wKXx8by5wb3AoKSlpZigxPT09bS5ub2RlVHlwZSYmKyt0JiZtPT09Yil7a1thXT1bdyxuLHRdO2JyZWFrfX1lbHNlIGlmKHMmJihtPWIsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biksdD09PSExKXdoaWxlKG09KytuJiZtJiZtW3BdfHwodD1uPTApfHxvLnBvcCgpKWlmKChoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpJiYrK3QmJihzJiYobD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksa1thXT1bdyx0XSksbT09PWIpKWJyZWFrO3JldHVybiB0LT1lLHQ9PT1kfHx0JWQ9PT0wJiZ0L2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxmYS5lcnJvcigidW5zdXBwb3J0ZWQgcHNldWRvOiAiK2EpO3JldHVybiBlW3VdP2UoYik6ZS5sZW5ndGg+MT8oYz1bYSxhLCIiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2hhKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1KKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmhhKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShRLCIkMSIpKTtyZXR1cm4gZFt1XT9oYShmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSxiWzBdPW51bGwsIWMucG9wKCl9fSksaGFzOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZmEoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczpoYShmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoYmEsY2EpLGZ1bmN0aW9uKGIpe3JldHVybihiLnRleHRDb250ZW50fHxiLmlubmVyVGV4dHx8ZShiKSkuaW5kZXhPZihhKT4tMX19KSxsYW5nOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBWLnRlc3QoYXx8IiIpfHxmYS5lcnJvcigidW5zdXBwb3J0ZWQgbGFuZzogIithKSxhPWEucmVwbGFjZShiYSxjYSkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbihiKXt2YXIgYztkbyBpZihjPXA/Yi5sYW5nOmIuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpfHxiLmdldEF0dHJpYnV0ZSgibGFuZyIpKXJldHVybiBjPWMudG9Mb3dlckNhc2UoKSxjPT09YXx8MD09PWMuaW5kZXhPZihhKyItIik7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSYmMT09PWIubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbihiKXt2YXIgYz1hLmxvY2F0aW9uJiZhLmxvY2F0aW9uLmhhc2g7cmV0dXJuIGMmJmMuc2xpY2UoMSk9PT1iLmlkfSxyb290OmZ1bmN0aW9uKGEpe3JldHVybiBhPT09b30sZm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1uLmFjdGl2ZUVsZW1lbnQmJighbi5oYXNGb2N1c3x8bi5oYXNGb2N1cygpKSYmISEoYS50eXBlfHxhLmhyZWZ8fH5hLnRhYkluZGV4KX0sZW5hYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSExfSxkaXNhYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmISFhLmNoZWNrZWR8fCJvcHRpb24iPT09YiYmISFhLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxhLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4hZC5wc2V1ZG9zLmVtcHR5KGEpfSxoZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIFkudGVzdChhLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFgudGVzdChhLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmImJ1dHRvbiI9PT1hLnR5cGV8fCJidXR0b24iPT09Yn0sdGV4dDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4iaW5wdXQiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8InRleHQiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6bmEoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Om5hKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpuYShmdW5jdGlvbihhLGIsYyl7cmV0dXJuWzA+Yz9jK2I6Y119KSxldmVuOm5hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOm5hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6bmEoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpuYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bGEoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bWEoYik7ZnVuY3Rpb24gcGEoKXt9cGEucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyBwYSxnPWZhLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErIiAiXTtpZihrKXJldHVybiBiPzA6ay5zbGljZSgwKTtoPWEsaT1bXSxqPWQucHJlRmlsdGVyO3doaWxlKGgpe2MmJiEoZT1SLmV4ZWMoaCkpfHwoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1TLmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFEsIiAiKX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2ZvcihnIGluIGQuZmlsdGVyKSEoZT1XW2ddLmV4ZWMoaCkpfHxqW2ddJiYhKGU9altnXShlKSl8fChjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTpnLG1hdGNoZXM6ZX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2lmKCFjKWJyZWFrfXJldHVybiBiP2gubGVuZ3RoOmg/ZmEuZXJyb3IoYSk6eihhLGkpLnNsaWNlKDApfTtmdW5jdGlvbiBxYShhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9IiI7Yz5iO2IrKylkKz1hW2JdLnZhbHVlO3JldHVybiBkfWZ1bmN0aW9uIHJhKGEsYixjKXt2YXIgZD1iLmRpcixlPWMmJiJwYXJlbnROb2RlIj09PWQsZj14Kys7cmV0dXJuIGIuZmlyc3Q/ZnVuY3Rpb24oYixjLGYpe3doaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSlyZXR1cm4gYShiLGMsZil9OmZ1bmN0aW9uKGIsYyxnKXt2YXIgaCxpLGosaz1bdyxmXTtpZihnKXt3aGlsZShiPWJbZF0paWYoKDE9PT1iLm5vZGVUeXBlfHxlKSYmYShiLGMsZykpcmV0dXJuITB9ZWxzZSB3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpe2lmKGo9Ylt1XXx8KGJbdV09e30pLGk9altiLnVuaXF1ZUlEXXx8KGpbYi51bmlxdWVJRF09e30pLChoPWlbZF0pJiZoWzBdPT09dyYmaFsxXT09PWYpcmV0dXJuIGtbMl09aFsyXTtpZihpW2RdPWssa1syXT1hKGIsYyxnKSlyZXR1cm4hMH19fWZ1bmN0aW9uIHNhKGEpe3JldHVybiBhLmxlbmd0aD4xP2Z1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLmxlbmd0aDt3aGlsZShlLS0paWYoIWFbZV0oYixjLGQpKXJldHVybiExO3JldHVybiEwfTphWzBdfWZ1bmN0aW9uIHRhKGEsYixjKXtmb3IodmFyIGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspZmEoYSxiW2RdLGMpO3JldHVybiBjfWZ1bmN0aW9uIHVhKGEsYixjLGQsZSl7Zm9yKHZhciBmLGc9W10saD0wLGk9YS5sZW5ndGgsaj1udWxsIT1iO2k+aDtoKyspKGY9YVtoXSkmJihjJiYhYyhmLGQsZSl8fChnLnB1c2goZiksaiYmYi5wdXNoKGgpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gdmEoYSxiLGMsZCxlLGYpe3JldHVybiBkJiYhZFt1XSYmKGQ9dmEoZCkpLGUmJiFlW3VdJiYoZT12YShlLGYpKSxoYShmdW5jdGlvbihmLGcsaCxpKXt2YXIgaixrLGwsbT1bXSxuPVtdLG89Zy5sZW5ndGgscD1mfHx0YShifHwiKiIsaC5ub2RlVHlwZT9baF06aCxbXSkscT0hYXx8IWYmJmI/cDp1YShwLG0sYSxoLGkpLHI9Yz9lfHwoZj9hOm98fGQpP1tdOmc6cTtpZihjJiZjKHEscixoLGkpLGQpe2o9dWEocixuKSxkKGosW10saCxpKSxrPWoubGVuZ3RoO3doaWxlKGstLSkobD1qW2tdKSYmKHJbbltrXV09IShxW25ba11dPWwpKX1pZihmKXtpZihlfHxhKXtpZihlKXtqPVtdLGs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiZqLnB1c2gocVtrXT1sKTtlKG51bGwscj1bXSxqLGkpfWs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiYoaj1lP0ooZixsKTptW2tdKT4tMSYmKGZbal09IShnW2pdPWwpKX19ZWxzZSByPXVhKHI9PT1nP3Iuc3BsaWNlKG8sci5sZW5ndGgpOnIpLGU/ZShudWxsLGcscixpKTpILmFwcGx5KGcscil9KX1mdW5jdGlvbiB3YShhKXtmb3IodmFyIGIsYyxlLGY9YS5sZW5ndGgsZz1kLnJlbGF0aXZlW2FbMF0udHlwZV0saD1nfHxkLnJlbGF0aXZlWyIgIl0saT1nPzE6MCxrPXJhKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0saCwhMCksbD1yYShmdW5jdGlvbihhKXtyZXR1cm4gSihiLGEpPi0xfSxoLCEwKSxtPVtmdW5jdGlvbihhLGMsZCl7dmFyIGU9IWcmJihkfHxjIT09ail8fCgoYj1jKS5ub2RlVHlwZT9rKGEsYyxkKTpsKGEsYyxkKSk7cmV0dXJuIGI9bnVsbCxlfV07Zj5pO2krKylpZihjPWQucmVsYXRpdmVbYVtpXS50eXBlXSltPVtyYShzYShtKSxjKV07ZWxzZXtpZihjPWQuZmlsdGVyW2FbaV0udHlwZV0uYXBwbHkobnVsbCxhW2ldLm1hdGNoZXMpLGNbdV0pe2ZvcihlPSsraTtmPmU7ZSsrKWlmKGQucmVsYXRpdmVbYVtlXS50eXBlXSlicmVhaztyZXR1cm4gdmEoaT4xJiZzYShtKSxpPjEmJnFhKGEuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6IiAiPT09YVtpLTJdLnR5cGU/IioiOiIifSkpLnJlcGxhY2UoUSwiJDEiKSxjLGU+aSYmd2EoYS5zbGljZShpLGUpKSxmPmUmJndhKGE9YS5zbGljZShlKSksZj5lJiZxYShhKSl9bS5wdXNoKGMpfXJldHVybiBzYShtKX1mdW5jdGlvbiB4YShhLGIpe3ZhciBjPWIubGVuZ3RoPjAsZT1hLmxlbmd0aD4wLGY9ZnVuY3Rpb24oZixnLGgsaSxrKXt2YXIgbCxvLHEscj0wLHM9IjAiLHQ9ZiYmW10sdT1bXSx2PWoseD1mfHxlJiZkLmZpbmQuVEFHKCIqIixrKSx5PXcrPW51bGw9PXY/MTpNYXRoLnJhbmRvbSgpfHwuMSx6PXgubGVuZ3RoO2ZvcihrJiYoaj1nPT09bnx8Z3x8ayk7cyE9PXomJm51bGwhPShsPXhbc10pO3MrKyl7aWYoZSYmbCl7bz0wLGd8fGwub3duZXJEb2N1bWVudD09PW58fChtKGwpLGg9IXApO3doaWxlKHE9YVtvKytdKWlmKHEobCxnfHxuLGgpKXtpLnB1c2gobCk7YnJlYWt9ayYmKHc9eSl9YyYmKChsPSFxJiZsKSYmci0tLGYmJnQucHVzaChsKSl9aWYocis9cyxjJiZzIT09cil7bz0wO3doaWxlKHE9YltvKytdKXEodCx1LGcsaCk7aWYoZil7aWYocj4wKXdoaWxlKHMtLSl0W3NdfHx1W3NdfHwodVtzXT1GLmNhbGwoaSkpO3U9dWEodSl9SC5hcHBseShpLHUpLGsmJiFmJiZ1Lmxlbmd0aD4wJiZyK2IubGVuZ3RoPjEmJmZhLnVuaXF1ZVNvcnQoaSl9cmV0dXJuIGsmJih3PXksaj12KSx0fTtyZXR1cm4gYz9oYShmKTpmfXJldHVybiBoPWZhLmNvbXBpbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9W10sZj1BW2ErIiAiXTtpZighZil7Ynx8KGI9ZyhhKSksYz1iLmxlbmd0aDt3aGlsZShjLS0pZj13YShiW2NdKSxmW3VdP2QucHVzaChmKTplLnB1c2goZik7Zj1BKGEseGEoZSxkKSksZi5zZWxlY3Rvcj1hfXJldHVybiBmfSxpPWZhLnNlbGVjdD1mdW5jdGlvbihhLGIsZSxmKXt2YXIgaSxqLGssbCxtLG49ImZ1bmN0aW9uIj09dHlwZW9mIGEmJmEsbz0hZiYmZyhhPW4uc2VsZWN0b3J8fGEpO2lmKGU9ZXx8W10sMT09PW8ubGVuZ3RoKXtpZihqPW9bMF09b1swXS5zbGljZSgwKSxqLmxlbmd0aD4yJiYiSUQiPT09KGs9alswXSkudHlwZSYmYy5nZXRCeUlkJiY5PT09Yi5ub2RlVHlwZSYmcCYmZC5yZWxhdGl2ZVtqWzFdLnR5cGVdKXtpZihiPShkLmZpbmQuSUQoay5tYXRjaGVzWzBdLnJlcGxhY2UoYmEsY2EpLGIpfHxbXSlbMF0sIWIpcmV0dXJuIGU7biYmKGI9Yi5wYXJlbnROb2RlKSxhPWEuc2xpY2Uoai5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aT1XLm5lZWRzQ29udGV4dC50ZXN0KGEpPzA6ai5sZW5ndGg7d2hpbGUoaS0tKXtpZihrPWpbaV0sZC5yZWxhdGl2ZVtsPWsudHlwZV0pYnJlYWs7aWYoKG09ZC5maW5kW2xdKSYmKGY9bShrLm1hdGNoZXNbMF0ucmVwbGFjZShiYSxjYSksXy50ZXN0KGpbMF0udHlwZSkmJm9hKGIucGFyZW50Tm9kZSl8fGIpKSl7aWYoai5zcGxpY2UoaSwxKSxhPWYubGVuZ3RoJiZxYShqKSwhYSlyZXR1cm4gSC5hcHBseShlLGYpLGU7YnJlYWt9fX1yZXR1cm4obnx8aChhLG8pKShmLGIsIXAsZSwhYnx8Xy50ZXN0KGEpJiZvYShiLnBhcmVudE5vZGUpfHxiKSxlfSxjLnNvcnRTdGFibGU9dS5zcGxpdCgiIikuc29ydChCKS5qb2luKCIiKT09PXUsYy5kZXRlY3REdXBsaWNhdGVzPSEhbCxtKCksYy5zb3J0RGV0YWNoZWQ9aWEoZnVuY3Rpb24oYSl7cmV0dXJuIDEmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuLmNyZWF0ZUVsZW1lbnQoImRpdiIpKX0pLGlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsIiMiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpfSl8fGphKCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dm9pZCAwOmEuZ2V0QXR0cmlidXRlKGIsInR5cGUiPT09Yi50b0xvd2VyQ2FzZSgpPzE6Mil9KSxjLmF0dHJpYnV0ZXMmJmlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD0iPGlucHV0Lz4iLGEuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIiksIiI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpfSl8fGphKCJ2YWx1ZSIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjfHwiaW5wdXQiIT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpP3ZvaWQgMDphLmRlZmF1bHRWYWx1ZX0pLGlhKGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKX0pfHxqYShLLGZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYz92b2lkIDA6YVtiXT09PSEwP2IudG9Mb3dlckNhc2UoKTooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZkLnNwZWNpZmllZD9kLnZhbHVlOm51bGx9KSxmYX0oYSk7bi5maW5kPXQsbi5leHByPXQuc2VsZWN0b3JzLG4uZXhwclsiOiJdPW4uZXhwci5wc2V1ZG9zLG4udW5pcXVlU29ydD1uLnVuaXF1ZT10LnVuaXF1ZVNvcnQsbi50ZXh0PXQuZ2V0VGV4dCxuLmlzWE1MRG9jPXQuaXNYTUwsbi5jb250YWlucz10LmNvbnRhaW5zO3ZhciB1PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPXZvaWQgMCE9PWM7d2hpbGUoKGE9YVtiXSkmJjkhPT1hLm5vZGVUeXBlKWlmKDE9PT1hLm5vZGVUeXBlKXtpZihlJiZuKGEpLmlzKGMpKWJyZWFrO2QucHVzaChhKX1yZXR1cm4gZH0sdj1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXTthO2E9YS5uZXh0U2libGluZykxPT09YS5ub2RlVHlwZSYmYSE9PWImJmMucHVzaChhKTtyZXR1cm4gY30sdz1uLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LHg9L148KFtcdy1dKylccypcLz8+KD86PFwvXDE+fCkkLyx5PS9eLlteOiNcW1wuLF0qJC87ZnVuY3Rpb24geihhLGIsYyl7aWYobi5pc0Z1bmN0aW9uKGIpKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhLGQpe3JldHVybiEhYi5jYWxsKGEsZCxhKSE9PWN9KTtpZihiLm5vZGVUeXBlKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWIhPT1jfSk7aWYoInN0cmluZyI9PXR5cGVvZiBiKXtpZih5LnRlc3QoYikpcmV0dXJuIG4uZmlsdGVyKGIsYSxjKTtiPW4uZmlsdGVyKGIsYSl9cmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBuLmluQXJyYXkoYSxiKT4tMSE9PWN9KX1uLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9Ijpub3QoIithKyIpIiksMT09PWIubGVuZ3RoJiYxPT09ZC5ub2RlVHlwZT9uLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGQsYSk/W2RdOltdOm4uZmluZC5tYXRjaGVzKGEsbi5ncmVwKGIsZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfSkpfSxuLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXt2YXIgYixjPVtdLGQ9dGhpcyxlPWQubGVuZ3RoO2lmKCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2sobihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2U+YjtiKyspaWYobi5jb250YWlucyhkW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihiPTA7ZT5iO2IrKyluLmZpbmQoYSxkW2JdLGMpO3JldHVybiBjPXRoaXMucHVzaFN0YWNrKGU+MT9uLnVuaXF1ZShjKTpjKSxjLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcisiICIrYTphLGN9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeih0aGlzLGF8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeih0aGlzLGF8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEheih0aGlzLCJzdHJpbmciPT10eXBlb2YgYSYmdy50ZXN0KGEpP24oYSk6YXx8W10sITEpLmxlbmd0aH19KTt2YXIgQSxCPS9eKD86XHMqKDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKikpJC8sQz1uLmZuLmluaXQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBlLGY7aWYoIWEpcmV0dXJuIHRoaXM7aWYoYz1jfHxBLCJzdHJpbmciPT10eXBlb2YgYSl7aWYoZT0iPCI9PT1hLmNoYXJBdCgwKSYmIj4iPT09YS5jaGFyQXQoYS5sZW5ndGgtMSkmJmEubGVuZ3RoPj0zP1tudWxsLGEsbnVsbF06Qi5leGVjKGEpLCFlfHwhZVsxXSYmYilyZXR1cm4hYnx8Yi5qcXVlcnk/KGJ8fGMpLmZpbmQoYSk6dGhpcy5jb25zdHJ1Y3RvcihiKS5maW5kKGEpO2lmKGVbMV0pe2lmKGI9YiBpbnN0YW5jZW9mIG4/YlswXTpiLG4ubWVyZ2UodGhpcyxuLnBhcnNlSFRNTChlWzFdLGImJmIubm9kZVR5cGU/Yi5vd25lckRvY3VtZW50fHxiOmQsITApKSx4LnRlc3QoZVsxXSkmJm4uaXNQbGFpbk9iamVjdChiKSlmb3IoZSBpbiBiKW4uaXNGdW5jdGlvbih0aGlzW2VdKT90aGlzW2VdKGJbZV0pOnRoaXMuYXR0cihlLGJbZV0pO3JldHVybiB0aGlzfWlmKGY9ZC5nZXRFbGVtZW50QnlJZChlWzJdKSxmJiZmLnBhcmVudE5vZGUpe2lmKGYuaWQhPT1lWzJdKXJldHVybiBBLmZpbmQoYSk7dGhpcy5sZW5ndGg9MSx0aGlzWzBdPWZ9cmV0dXJuIHRoaXMuY29udGV4dD1kLHRoaXMuc2VsZWN0b3I9YSx0aGlzfXJldHVybiBhLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6bi5pc0Z1bmN0aW9uKGEpPyJ1bmRlZmluZWQiIT10eXBlb2YgYy5yZWFkeT9jLnJlYWR5KGEpOmEobik6KHZvaWQgMCE9PWEuc2VsZWN0b3ImJih0aGlzLnNlbGVjdG9yPWEuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWEuY29udGV4dCksbi5tYWtlQXJyYXkoYSx0aGlzKSl9O0MucHJvdG90eXBlPW4uZm4sQT1uKGQpO3ZhciBEPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEU9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07bi5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYixjPW4oYSx0aGlzKSxkPWMubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7ZD5iO2IrKylpZihuLmNvbnRhaW5zKHRoaXMsY1tiXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT10aGlzLmxlbmd0aCxmPVtdLGc9dy50ZXN0KGEpfHwic3RyaW5nIiE9dHlwZW9mIGE/bihhLGJ8fHRoaXMuY29udGV4dCk6MDtlPmQ7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmbi5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP24udW5pcXVlU29ydChmKTpmKX0saW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/InN0cmluZyI9PXR5cGVvZiBhP24uaW5BcnJheSh0aGlzWzBdLG4oYSkpOm4uaW5BcnJheShhLmpxdWVyeT9hWzBdOmEsdGhpcyk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobi51bmlxdWVTb3J0KG4ubWVyZ2UodGhpcy5nZXQoKSxuKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEYoYSxiKXtkbyBhPWFbYl07d2hpbGUoYSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW4uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gdShhLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHUoYSwicGFyZW50Tm9kZSIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEYoYSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihhKXtyZXR1cm4gRihhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihhKXtyZXR1cm4gdShhLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiB1KGEsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB1KGEsIm5leHRTaWJsaW5nIixjKX0scHJldlVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdShhLCJwcmV2aW91c1NpYmxpbmciLGMpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4gdigoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIHYoYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIG4ubm9kZU5hbWUoYSwiaWZyYW1lIik/YS5jb250ZW50RG9jdW1lbnR8fGEuY29udGVudFdpbmRvdy5kb2N1bWVudDpuLm1lcmdlKFtdLGEuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYyxkKXt2YXIgZT1uLm1hcCh0aGlzLGIsYyk7cmV0dXJuIlVudGlsIiE9PWEuc2xpY2UoLTUpJiYoZD1jKSxkJiYic3RyaW5nIj09dHlwZW9mIGQmJihlPW4uZmlsdGVyKGQsZSkpLHRoaXMubGVuZ3RoPjEmJihFW2FdfHwoZT1uLnVuaXF1ZVNvcnQoZSkpLEQudGVzdChhKSYmKGU9ZS5yZXZlcnNlKCkpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgRz0vXFMrL2c7ZnVuY3Rpb24gSChhKXt2YXIgYj17fTtyZXR1cm4gbi5lYWNoKGEubWF0Y2goRyl8fFtdLGZ1bmN0aW9uKGEsYyl7YltjXT0hMH0pLGJ9bi5DYWxsYmFja3M9ZnVuY3Rpb24oYSl7YT0ic3RyaW5nIj09dHlwZW9mIGE/SChhKTpuLmV4dGVuZCh7fSxhKTt2YXIgYixjLGQsZSxmPVtdLGc9W10saD0tMSxpPWZ1bmN0aW9uKCl7Zm9yKGU9YS5vbmNlLGQ9Yj0hMDtnLmxlbmd0aDtoPS0xKXtjPWcuc2hpZnQoKTt3aGlsZSgrK2g8Zi5sZW5ndGgpZltoXS5hcHBseShjWzBdLGNbMV0pPT09ITEmJmEuc3RvcE9uRmFsc2UmJihoPWYubGVuZ3RoLGM9ITEpfWEubWVtb3J5fHwoYz0hMSksYj0hMSxlJiYoZj1jP1tdOiIiKX0saj17YWRkOmZ1bmN0aW9uKCl7cmV0dXJuIGYmJihjJiYhYiYmKGg9Zi5sZW5ndGgtMSxnLnB1c2goYykpLGZ1bmN0aW9uIGQoYil7bi5lYWNoKGIsZnVuY3Rpb24oYixjKXtuLmlzRnVuY3Rpb24oYyk/YS51bmlxdWUmJmouaGFzKGMpfHxmLnB1c2goYyk6YyYmYy5sZW5ndGgmJiJzdHJpbmciIT09bi50eXBlKGMpJiZkKGMpfSl9KGFyZ3VtZW50cyksYyYmIWImJmkoKSksdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIG4uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxiKXt2YXIgYzt3aGlsZSgoYz1uLmluQXJyYXkoYixmLGMpKT4tMSlmLnNwbGljZShjLDEpLGg+PWMmJmgtLX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9uLmluQXJyYXkoYSxmKT4tMTpmLmxlbmd0aD4wfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBmJiYoZj1bXSksdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiBlPWc9W10sZj1jPSIiLHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIWZ9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gZT0hMCxjfHxqLmRpc2FibGUoKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWV9LGZpcmVXaXRoOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGV8fChjPWN8fFtdLGM9W2EsYy5zbGljZT9jLnNsaWNlKCk6Y10sZy5wdXNoKGMpLGJ8fGkoKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBqLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZH19O3JldHVybiBqfSxuLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9W1sicmVzb2x2ZSIsImRvbmUiLG4uQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCJyZXNvbHZlZCJdLFsicmVqZWN0IiwiZmFpbCIsbi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlamVjdGVkIl0sWyJub3RpZnkiLCJwcm9ncmVzcyIsbi5DYWxsYmFja3MoIm1lbW9yeSIpXV0sYz0icGVuZGluZyIsZD17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gY30sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiBuLkRlZmVycmVkKGZ1bmN0aW9uKGMpe24uZWFjaChiLGZ1bmN0aW9uKGIsZil7dmFyIGc9bi5pc0Z1bmN0aW9uKGFbYl0pJiZhW2JdO2VbZlsxXV0oZnVuY3Rpb24oKXt2YXIgYT1nJiZnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthJiZuLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9hLnByb21pc2UoKS5wcm9ncmVzcyhjLm5vdGlmeSkuZG9uZShjLnJlc29sdmUpLmZhaWwoYy5yZWplY3QpOmNbZlswXSsiV2l0aCJdKHRoaXM9PT1kP2MucHJvbWlzZSgpOnRoaXMsZz9bYV06YXJndW1lbnRzKX0pfSksYT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hP24uZXh0ZW5kKGEsZCk6ZH19LGU9e307cmV0dXJuIGQucGlwZT1kLnRoZW4sbi5lYWNoKGIsZnVuY3Rpb24oYSxmKXt2YXIgZz1mWzJdLGg9ZlszXTtkW2ZbMV1dPWcuYWRkLGgmJmcuYWRkKGZ1bmN0aW9uKCl7Yz1ofSxiWzFeYV1bMl0uZGlzYWJsZSxiWzJdWzJdLmxvY2spLGVbZlswXV09ZnVuY3Rpb24oKXtyZXR1cm4gZVtmWzBdKyJXaXRoIl0odGhpcz09PWU/ZDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZVtmWzBdKyJXaXRoIl09Zy5maXJlV2l0aH0pLGQucHJvbWlzZShlKSxhJiZhLmNhbGwoZSxlKSxlfSx3aGVuOmZ1bmN0aW9uKGEpe3ZhciBiPTAsYz1lLmNhbGwoYXJndW1lbnRzKSxkPWMubGVuZ3RoLGY9MSE9PWR8fGEmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2Q6MCxnPTE9PT1mP2E6bi5EZWZlcnJlZCgpLGg9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtiW2FdPXRoaXMsY1thXT1hcmd1bWVudHMubGVuZ3RoPjE/ZS5jYWxsKGFyZ3VtZW50cyk6ZCxjPT09aT9nLm5vdGlmeVdpdGgoYixjKTotLWZ8fGcucmVzb2x2ZVdpdGgoYixjKX19LGksaixrO2lmKGQ+MSlmb3IoaT1uZXcgQXJyYXkoZCksaj1uZXcgQXJyYXkoZCksaz1uZXcgQXJyYXkoZCk7ZD5iO2IrKyljW2JdJiZuLmlzRnVuY3Rpb24oY1tiXS5wcm9taXNlKT9jW2JdLnByb21pc2UoKS5wcm9ncmVzcyhoKGIsaixpKSkuZG9uZShoKGIsayxjKSkuZmFpbChnLnJlamVjdCk6LS1mO3JldHVybiBmfHxnLnJlc29sdmVXaXRoKGssYyksZy5wcm9taXNlKCl9fSk7dmFyIEk7bi5mbi5yZWFkeT1mdW5jdGlvbihhKXtyZXR1cm4gbi5yZWFkeS5wcm9taXNlKCkuZG9uZShhKSx0aGlzfSxuLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oYSl7YT9uLnJlYWR5V2FpdCsrOm4ucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihhKXsoYT09PSEwPy0tbi5yZWFkeVdhaXQ6bi5pc1JlYWR5KXx8KG4uaXNSZWFkeT0hMCxhIT09ITAmJi0tbi5yZWFkeVdhaXQ+MHx8KEkucmVzb2x2ZVdpdGgoZCxbbl0pLG4uZm4udHJpZ2dlckhhbmRsZXImJihuKGQpLnRyaWdnZXJIYW5kbGVyKCJyZWFkeSIpLG4oZCkub2ZmKCJyZWFkeSIpKSkpfX0pO2Z1bmN0aW9uIEooKXtkLmFkZEV2ZW50TGlzdGVuZXI/KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsSyksYS5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixLKSk6KGQuZGV0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsSyksYS5kZXRhY2hFdmVudCgib25sb2FkIixLKSl9ZnVuY3Rpb24gSygpeyhkLmFkZEV2ZW50TGlzdGVuZXJ8fCJsb2FkIj09PWEuZXZlbnQudHlwZXx8ImNvbXBsZXRlIj09PWQucmVhZHlTdGF0ZSkmJihKKCksbi5yZWFkeSgpKX1uLnJlYWR5LnByb21pc2U9ZnVuY3Rpb24oYil7aWYoIUkpaWYoST1uLkRlZmVycmVkKCksImNvbXBsZXRlIj09PWQucmVhZHlTdGF0ZXx8ImxvYWRpbmciIT09ZC5yZWFkeVN0YXRlJiYhZC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwpYS5zZXRUaW1lb3V0KG4ucmVhZHkpO2Vsc2UgaWYoZC5hZGRFdmVudExpc3RlbmVyKWQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsSyksYS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixLKTtlbHNle2QuYXR0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsSyksYS5hdHRhY2hFdmVudCgib25sb2FkIixLKTt2YXIgYz0hMTt0cnl7Yz1udWxsPT1hLmZyYW1lRWxlbWVudCYmZC5kb2N1bWVudEVsZW1lbnR9Y2F0Y2goZSl7fWMmJmMuZG9TY3JvbGwmJiFmdW5jdGlvbiBmKCl7aWYoIW4uaXNSZWFkeSl7dHJ5e2MuZG9TY3JvbGwoImxlZnQiKX1jYXRjaChiKXtyZXR1cm4gYS5zZXRUaW1lb3V0KGYsNTApfUooKSxuLnJlYWR5KCl9fSgpfXJldHVybiBJLnByb21pc2UoYil9LG4ucmVhZHkucHJvbWlzZSgpO3ZhciBMO2ZvcihMIGluIG4obCkpYnJlYWs7bC5vd25GaXJzdD0iMCI9PT1MLGwuaW5saW5lQmxvY2tOZWVkc0xheW91dD0hMSxuKGZ1bmN0aW9uKCl7dmFyIGEsYixjLGU7Yz1kLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF0sYyYmYy5zdHlsZSYmKGI9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxlPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZS5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweCIsYy5hcHBlbmRDaGlsZChlKS5hcHBlbmRDaGlsZChiKSwidW5kZWZpbmVkIiE9dHlwZW9mIGIuc3R5bGUuem9vbSYmKGIuc3R5bGUuY3NzVGV4dD0iZGlzcGxheTppbmxpbmU7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzoxcHg7d2lkdGg6MXB4O3pvb206MSIsbC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0PWE9Mz09PWIub2Zmc2V0V2lkdGgsYSYmKGMuc3R5bGUuem9vbT0xKSksYy5yZW1vdmVDaGlsZChlKSl9KSxmdW5jdGlvbigpe3ZhciBhPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7bC5kZWxldGVFeHBhbmRvPSEwO3RyeXtkZWxldGUgYS50ZXN0fWNhdGNoKGIpe2wuZGVsZXRlRXhwYW5kbz0hMX1hPW51bGx9KCk7dmFyIE09ZnVuY3Rpb24oYSl7dmFyIGI9bi5ub0RhdGFbKGEubm9kZU5hbWUrIiAiKS50b0xvd2VyQ2FzZSgpXSxjPSthLm5vZGVUeXBlfHwxO3JldHVybiAxIT09YyYmOSE9PWM/ITE6IWJ8fGIhPT0hMCYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzaWQiKT09PWJ9LE49L14oPzpce1tcd1xXXSpcfXxcW1tcd1xXXSpcXSkkLyxPPS8oW0EtWl0pL2c7ZnVuY3Rpb24gUChhLGIsYyl7aWYodm9pZCAwPT09YyYmMT09PWEubm9kZVR5cGUpe3ZhciBkPSJkYXRhLSIrYi5yZXBsYWNlKE8sIi0kMSIpLnRvTG93ZXJDYXNlKCk7aWYoYz1hLmdldEF0dHJpYnV0ZShkKSwic3RyaW5nIj09dHlwZW9mIGMpe3RyeXtjPSJ0cnVlIj09PWM/ITA6ImZhbHNlIj09PWM/ITE6Im51bGwiPT09Yz9udWxsOitjKyIiPT09Yz8rYzpOLnRlc3QoYyk/bi5wYXJzZUpTT04oYyk6Y31jYXRjaChlKXt9bi5kYXRhKGEsYixjKX1lbHNlIGM9dm9pZCAwOwp9cmV0dXJuIGN9ZnVuY3Rpb24gUShhKXt2YXIgYjtmb3IoYiBpbiBhKWlmKCgiZGF0YSIhPT1ifHwhbi5pc0VtcHR5T2JqZWN0KGFbYl0pKSYmInRvSlNPTiIhPT1iKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIFIoYSxiLGQsZSl7aWYoTShhKSl7dmFyIGYsZyxoPW4uZXhwYW5kbyxpPWEubm9kZVR5cGUsaj1pP24uY2FjaGU6YSxrPWk/YVtoXTphW2hdJiZoO2lmKGsmJmpba10mJihlfHxqW2tdLmRhdGEpfHx2b2lkIDAhPT1kfHwic3RyaW5nIiE9dHlwZW9mIGIpcmV0dXJuIGt8fChrPWk/YVtoXT1jLnBvcCgpfHxuLmd1aWQrKzpoKSxqW2tdfHwoaltrXT1pP3t9Ont0b0pTT046bi5ub29wfSksIm9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYnx8KGU/altrXT1uLmV4dGVuZChqW2tdLGIpOmpba10uZGF0YT1uLmV4dGVuZChqW2tdLmRhdGEsYikpLGc9altrXSxlfHwoZy5kYXRhfHwoZy5kYXRhPXt9KSxnPWcuZGF0YSksdm9pZCAwIT09ZCYmKGdbbi5jYW1lbENhc2UoYildPWQpLCJzdHJpbmciPT10eXBlb2YgYj8oZj1nW2JdLG51bGw9PWYmJihmPWdbbi5jYW1lbENhc2UoYildKSk6Zj1nLGZ9fWZ1bmN0aW9uIFMoYSxiLGMpe2lmKE0oYSkpe3ZhciBkLGUsZj1hLm5vZGVUeXBlLGc9Zj9uLmNhY2hlOmEsaD1mP2Fbbi5leHBhbmRvXTpuLmV4cGFuZG87aWYoZ1toXSl7aWYoYiYmKGQ9Yz9nW2hdOmdbaF0uZGF0YSkpe24uaXNBcnJheShiKT9iPWIuY29uY2F0KG4ubWFwKGIsbi5jYW1lbENhc2UpKTpiIGluIGQ/Yj1bYl06KGI9bi5jYW1lbENhc2UoYiksYj1iIGluIGQ/W2JdOmIuc3BsaXQoIiAiKSksZT1iLmxlbmd0aDt3aGlsZShlLS0pZGVsZXRlIGRbYltlXV07aWYoYz8hUShkKTohbi5pc0VtcHR5T2JqZWN0KGQpKXJldHVybn0oY3x8KGRlbGV0ZSBnW2hdLmRhdGEsUShnW2hdKSkpJiYoZj9uLmNsZWFuRGF0YShbYV0sITApOmwuZGVsZXRlRXhwYW5kb3x8ZyE9Zy53aW5kb3c/ZGVsZXRlIGdbaF06Z1toXT12b2lkIDApfX19bi5leHRlbmQoe2NhY2hlOnt9LG5vRGF0YTp7ImFwcGxldCAiOiEwLCJlbWJlZCAiOiEwLCJvYmplY3QgIjoiY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwIn0saGFzRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gYT1hLm5vZGVUeXBlP24uY2FjaGVbYVtuLmV4cGFuZG9dXTphW24uZXhwYW5kb10sISFhJiYhUShhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIFIoYSxiLGMpfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoYSxiKX0sX2RhdGE6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBSKGEsYixjLCEwKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUyhhLGIsITApfX0pLG4uZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9dGhpc1swXSxnPWYmJmYuYXR0cmlidXRlcztpZih2b2lkIDA9PT1hKXtpZih0aGlzLmxlbmd0aCYmKGU9bi5kYXRhKGYpLDE9PT1mLm5vZGVUeXBlJiYhbi5fZGF0YShmLCJwYXJzZWRBdHRycyIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoImRhdGEtIikmJihkPW4uY2FtZWxDYXNlKGQuc2xpY2UoNSkpLFAoZixkLGVbZF0pKSk7bi5fZGF0YShmLCJwYXJzZWRBdHRycyIsITApfXJldHVybiBlfXJldHVybiJvYmplY3QiPT10eXBlb2YgYT90aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRhdGEodGhpcyxhKX0pOmFyZ3VtZW50cy5sZW5ndGg+MT90aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRhdGEodGhpcyxhLGIpfSk6Zj9QKGYsYSxuLmRhdGEoZixhKSk6dm9pZCAwfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLnJlbW92ZURhdGEodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGE/KGI9KGJ8fCJmeCIpKyJxdWV1ZSIsZD1uLl9kYXRhKGEsYiksYyYmKCFkfHxuLmlzQXJyYXkoYyk/ZD1uLl9kYXRhKGEsYixuLm1ha2VBcnJheShjKSk6ZC5wdXNoKGMpKSxkfHxbXSk6dm9pZCAwfSxkZXF1ZXVlOmZ1bmN0aW9uKGEsYil7Yj1ifHwiZngiO3ZhciBjPW4ucXVldWUoYSxiKSxkPWMubGVuZ3RoLGU9Yy5zaGlmdCgpLGY9bi5fcXVldWVIb29rcyhhLGIpLGc9ZnVuY3Rpb24oKXtuLmRlcXVldWUoYSxiKX07ImlucHJvZ3Jlc3MiPT09ZSYmKGU9Yy5zaGlmdCgpLGQtLSksZSYmKCJmeCI9PT1iJiZjLnVuc2hpZnQoImlucHJvZ3Jlc3MiKSxkZWxldGUgZi5zdG9wLGUuY2FsbChhLGcsZikpLCFkJiZmJiZmLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iKyJxdWV1ZUhvb2tzIjtyZXR1cm4gbi5fZGF0YShhLGMpfHxuLl9kYXRhKGEsYyx7ZW1wdHk6bi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7bi5fcmVtb3ZlRGF0YShhLGIrInF1ZXVlIiksbi5fcmVtb3ZlRGF0YShhLGMpfSl9KX19KSxuLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0yO3JldHVybiJzdHJpbmciIT10eXBlb2YgYSYmKGI9YSxhPSJmeCIsYy0tKSxhcmd1bWVudHMubGVuZ3RoPGM/bi5xdWV1ZSh0aGlzWzBdLGEpOnZvaWQgMD09PWI/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1uLnF1ZXVlKHRoaXMsYSxiKTtuLl9xdWV1ZUhvb2tzKHRoaXMsYSksImZ4Ij09PWEmJiJpbnByb2dyZXNzIiE9PWNbMF0mJm4uZGVxdWV1ZSh0aGlzLGEpfSl9LGRlcXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24uZGVxdWV1ZSh0aGlzLGEpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVldWUoYXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTEsZT1uLkRlZmVycmVkKCksZj10aGlzLGc9dGhpcy5sZW5ndGgsaD1mdW5jdGlvbigpey0tZHx8ZS5yZXNvbHZlV2l0aChmLFtmXSl9OyJzdHJpbmciIT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYT1hfHwiZngiO3doaWxlKGctLSljPW4uX2RhdGEoZltnXSxhKyJxdWV1ZUhvb2tzIiksYyYmYy5lbXB0eSYmKGQrKyxjLmVtcHR5LmFkZChoKSk7cmV0dXJuIGgoKSxlLnByb21pc2UoYil9fSksZnVuY3Rpb24oKXt2YXIgYTtsLnNocmlua1dyYXBCbG9ja3M9ZnVuY3Rpb24oKXtpZihudWxsIT1hKXJldHVybiBhO2E9ITE7dmFyIGIsYyxlO3JldHVybiBjPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXSxjJiZjLnN0eWxlPyhiPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZT1kLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGUuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHgiLGMuYXBwZW5kQ2hpbGQoZSkuYXBwZW5kQ2hpbGQoYiksInVuZGVmaW5lZCIhPXR5cGVvZiBiLnN0eWxlLnpvb20mJihiLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MXB4O3dpZHRoOjFweDt6b29tOjEiLGIuYXBwZW5kQ2hpbGQoZC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuc3R5bGUud2lkdGg9IjVweCIsYT0zIT09Yi5vZmZzZXRXaWR0aCksYy5yZW1vdmVDaGlsZChlKSxhKTp2b2lkIDB9fSgpO3ZhciBUPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLFU9bmV3IFJlZ0V4cCgiXig/OihbKy1dKT18KSgiK1QrIikoW2EteiVdKikkIiwiaSIpLFY9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXSxXPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9Ynx8YSwibm9uZSI9PT1uLmNzcyhhLCJkaXNwbGF5Iil8fCFuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKX07ZnVuY3Rpb24gWChhLGIsYyxkKXt2YXIgZSxmPTEsZz0yMCxoPWQ/ZnVuY3Rpb24oKXtyZXR1cm4gZC5jdXIoKX06ZnVuY3Rpb24oKXtyZXR1cm4gbi5jc3MoYSxiLCIiKX0saT1oKCksaj1jJiZjWzNdfHwobi5jc3NOdW1iZXJbYl0/IiI6InB4Iiksaz0obi5jc3NOdW1iZXJbYl18fCJweCIhPT1qJiYraSkmJlUuZXhlYyhuLmNzcyhhLGIpKTtpZihrJiZrWzNdIT09ail7aj1qfHxrWzNdLGM9Y3x8W10saz0raXx8MTtkbyBmPWZ8fCIuNSIsay89ZixuLnN0eWxlKGEsYixrK2opO3doaWxlKGYhPT0oZj1oKCkvaSkmJjEhPT1mJiYtLWcpfXJldHVybiBjJiYoaz0ra3x8K2l8fDAsZT1jWzFdP2srKGNbMV0rMSkqY1syXTorY1syXSxkJiYoZC51bml0PWosZC5zdGFydD1rLGQuZW5kPWUpKSxlfXZhciBZPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZhciBoPTAsaT1hLmxlbmd0aCxqPW51bGw9PWM7aWYoIm9iamVjdCI9PT1uLnR5cGUoYykpe2U9ITA7Zm9yKGggaW4gYylZKGEsYixoLGNbaF0sITAsZixnKX1lbHNlIGlmKHZvaWQgMCE9PWQmJihlPSEwLG4uaXNGdW5jdGlvbihkKXx8KGc9ITApLGomJihnPyhiLmNhbGwoYSxkKSxiPW51bGwpOihqPWIsYj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGouY2FsbChuKGEpLGMpfSkpLGIpKWZvcig7aT5oO2grKyliKGFbaF0sYyxnP2Q6ZC5jYWxsKGFbaF0saCxiKGFbaF0sYykpKTtyZXR1cm4gZT9hOmo/Yi5jYWxsKGEpOmk/YihhWzBdLGMpOmZ9LFo9L14oPzpjaGVja2JveHxyYWRpbykkL2ksJD0vPChbXHc6LV0rKS8sXz0vXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksYWE9L15ccysvLGJhPSJhYmJyfGFydGljbGV8YXNpZGV8YXVkaW98YmRpfGNhbnZhc3xkYXRhfGRhdGFsaXN0fGRldGFpbHN8ZGlhbG9nfGZpZ2NhcHRpb258ZmlndXJlfGZvb3RlcnxoZWFkZXJ8aGdyb3VwfG1haW58bWFya3xtZXRlcnxuYXZ8b3V0cHV0fHBpY3R1cmV8cHJvZ3Jlc3N8c2VjdGlvbnxzdW1tYXJ5fHRlbXBsYXRlfHRpbWV8dmlkZW8iO2Z1bmN0aW9uIGNhKGEpe3ZhciBiPWJhLnNwbGl0KCJ8IiksYz1hLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihjLmNyZWF0ZUVsZW1lbnQpd2hpbGUoYi5sZW5ndGgpYy5jcmVhdGVFbGVtZW50KGIucG9wKCkpO3JldHVybiBjfSFmdW5jdGlvbigpe3ZhciBhPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksYj1kLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxjPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTthLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IixsLmxlYWRpbmdXaGl0ZXNwYWNlPTM9PT1hLmZpcnN0Q2hpbGQubm9kZVR5cGUsbC50Ym9keT0hYS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKS5sZW5ndGgsbC5odG1sU2VyaWFsaXplPSEhYS5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpLmxlbmd0aCxsLmh0bWw1Q2xvbmU9Ijw6bmF2PjwvOm5hdj4iIT09ZC5jcmVhdGVFbGVtZW50KCJuYXYiKS5jbG9uZU5vZGUoITApLm91dGVySFRNTCxjLnR5cGU9ImNoZWNrYm94IixjLmNoZWNrZWQ9ITAsYi5hcHBlbmRDaGlsZChjKSxsLmFwcGVuZENoZWNrZWQ9Yy5jaGVja2VkLGEuaW5uZXJIVE1MPSI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+IixsLm5vQ2xvbmVDaGVja2VkPSEhYS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWUsYi5hcHBlbmRDaGlsZChhKSxjPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxjLnNldEF0dHJpYnV0ZSgidHlwZSIsInJhZGlvIiksYy5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCJjaGVja2VkIiksYy5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJ0IiksYS5hcHBlbmRDaGlsZChjKSxsLmNoZWNrQ2xvbmU9YS5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsbC5ub0Nsb25lRXZlbnQ9ISFhLmFkZEV2ZW50TGlzdGVuZXIsYVtuLmV4cGFuZG9dPTEsbC5hdHRyaWJ1dGVzPSFhLmdldEF0dHJpYnV0ZShuLmV4cGFuZG8pfSgpO3ZhciBkYT17b3B0aW9uOlsxLCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+IiwiPC9zZWxlY3Q+Il0sbGVnZW5kOlsxLCI8ZmllbGRzZXQ+IiwiPC9maWVsZHNldD4iXSxhcmVhOlsxLCI8bWFwPiIsIjwvbWFwPiJdLHBhcmFtOlsxLCI8b2JqZWN0PiIsIjwvb2JqZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6bC5odG1sU2VyaWFsaXplP1swLCIiLCIiXTpbMSwiWDxkaXY+IiwiPC9kaXY+Il19O2RhLm9wdGdyb3VwPWRhLm9wdGlvbixkYS50Ym9keT1kYS50Zm9vdD1kYS5jb2xncm91cD1kYS5jYXB0aW9uPWRhLnRoZWFkLGRhLnRoPWRhLnRkO2Z1bmN0aW9uIGVhKGEsYil7dmFyIGMsZCxlPTAsZj0idW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShifHwiKiIpOiJ1bmRlZmluZWQiIT10eXBlb2YgYS5xdWVyeVNlbGVjdG9yQWxsP2EucXVlcnlTZWxlY3RvckFsbChifHwiKiIpOnZvaWQgMDtpZighZilmb3IoZj1bXSxjPWEuY2hpbGROb2Rlc3x8YTtudWxsIT0oZD1jW2VdKTtlKyspIWJ8fG4ubm9kZU5hbWUoZCxiKT9mLnB1c2goZCk6bi5tZXJnZShmLGVhKGQsYikpO3JldHVybiB2b2lkIDA9PT1ifHxiJiZuLm5vZGVOYW1lKGEsYik/bi5tZXJnZShbYV0sZik6Zn1mdW5jdGlvbiBmYShhLGIpe2Zvcih2YXIgYyxkPTA7bnVsbCE9KGM9YVtkXSk7ZCsrKW4uX2RhdGEoYywiZ2xvYmFsRXZhbCIsIWJ8fG4uX2RhdGEoYltkXSwiZ2xvYmFsRXZhbCIpKX12YXIgZ2E9Lzx8JiM/XHcrOy8saGE9Lzx0Ym9keS9pO2Z1bmN0aW9uIGlhKGEpe1oudGVzdChhLnR5cGUpJiYoYS5kZWZhdWx0Q2hlY2tlZD1hLmNoZWNrZWQpfWZ1bmN0aW9uIGphKGEsYixjLGQsZSl7Zm9yKHZhciBmLGcsaCxpLGosayxtLG89YS5sZW5ndGgscD1jYShiKSxxPVtdLHI9MDtvPnI7cisrKWlmKGc9YVtyXSxnfHwwPT09ZylpZigib2JqZWN0Ij09PW4udHlwZShnKSluLm1lcmdlKHEsZy5ub2RlVHlwZT9bZ106Zyk7ZWxzZSBpZihnYS50ZXN0KGcpKXtpPWl8fHAuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KCJkaXYiKSksaj0oJC5leGVjKGcpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLG09ZGFbal18fGRhLl9kZWZhdWx0LGkuaW5uZXJIVE1MPW1bMV0rbi5odG1sUHJlZmlsdGVyKGcpK21bMl0sZj1tWzBdO3doaWxlKGYtLSlpPWkubGFzdENoaWxkO2lmKCFsLmxlYWRpbmdXaGl0ZXNwYWNlJiZhYS50ZXN0KGcpJiZxLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShhYS5leGVjKGcpWzBdKSksIWwudGJvZHkpe2c9InRhYmxlIiE9PWp8fGhhLnRlc3QoZyk/Ijx0YWJsZT4iIT09bVsxXXx8aGEudGVzdChnKT8wOmk6aS5maXJzdENoaWxkLGY9ZyYmZy5jaGlsZE5vZGVzLmxlbmd0aDt3aGlsZShmLS0pbi5ub2RlTmFtZShrPWcuY2hpbGROb2Rlc1tmXSwidGJvZHkiKSYmIWsuY2hpbGROb2Rlcy5sZW5ndGgmJmcucmVtb3ZlQ2hpbGQoayl9bi5tZXJnZShxLGkuY2hpbGROb2RlcyksaS50ZXh0Q29udGVudD0iIjt3aGlsZShpLmZpcnN0Q2hpbGQpaS5yZW1vdmVDaGlsZChpLmZpcnN0Q2hpbGQpO2k9cC5sYXN0Q2hpbGR9ZWxzZSBxLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShnKSk7aSYmcC5yZW1vdmVDaGlsZChpKSxsLmFwcGVuZENoZWNrZWR8fG4uZ3JlcChlYShxLCJpbnB1dCIpLGlhKSxyPTA7d2hpbGUoZz1xW3IrK10paWYoZCYmbi5pbkFycmF5KGcsZCk+LTEpZSYmZS5wdXNoKGcpO2Vsc2UgaWYoaD1uLmNvbnRhaW5zKGcub3duZXJEb2N1bWVudCxnKSxpPWVhKHAuYXBwZW5kQ2hpbGQoZyksInNjcmlwdCIpLGgmJmZhKGkpLGMpe2Y9MDt3aGlsZShnPWlbZisrXSlfLnRlc3QoZy50eXBlfHwiIikmJmMucHVzaChnKX1yZXR1cm4gaT1udWxsLHB9IWZ1bmN0aW9uKCl7dmFyIGIsYyxlPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zm9yKGIgaW57c3VibWl0OiEwLGNoYW5nZTohMCxmb2N1c2luOiEwfSljPSJvbiIrYiwobFtiXT1jIGluIGEpfHwoZS5zZXRBdHRyaWJ1dGUoYywidCIpLGxbYl09ZS5hdHRyaWJ1dGVzW2NdLmV4cGFuZG89PT0hMSk7ZT1udWxsfSgpO3ZhciBrYT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYSkkL2ksbGE9L15rZXkvLG1hPS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudXxkcmFnfGRyb3ApfGNsaWNrLyxuYT0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sb2E9L14oW14uXSopKD86XC4oLispfCkvO2Z1bmN0aW9uIHBhKCl7cmV0dXJuITB9ZnVuY3Rpb24gcWEoKXtyZXR1cm4hMX1mdW5jdGlvbiByYSgpe3RyeXtyZXR1cm4gZC5hY3RpdmVFbGVtZW50fWNhdGNoKGEpe319ZnVuY3Rpb24gc2EoYSxiLGMsZCxlLGYpe3ZhciBnLGg7aWYoIm9iamVjdCI9PXR5cGVvZiBiKXsic3RyaW5nIiE9dHlwZW9mIGMmJihkPWR8fGMsYz12b2lkIDApO2ZvcihoIGluIGIpc2EoYSxoLGMsZCxiW2hdLGYpO3JldHVybiBhfWlmKG51bGw9PWQmJm51bGw9PWU/KGU9YyxkPWM9dm9pZCAwKTpudWxsPT1lJiYoInN0cmluZyI9PXR5cGVvZiBjPyhlPWQsZD12b2lkIDApOihlPWQsZD1jLGM9dm9pZCAwKSksZT09PSExKWU9cWE7ZWxzZSBpZighZSlyZXR1cm4gYTtyZXR1cm4gMT09PWYmJihnPWUsZT1mdW5jdGlvbihhKXtyZXR1cm4gbigpLm9mZihhKSxnLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5ndWlkPWcuZ3VpZHx8KGcuZ3VpZD1uLmd1aWQrKykpLGEuZWFjaChmdW5jdGlvbigpe24uZXZlbnQuYWRkKHRoaXMsYixlLGQsYyl9KX1uLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZyxoLGksaixrLGwsbSxvLHAscSxyPW4uX2RhdGEoYSk7aWYocil7Yy5oYW5kbGVyJiYoaT1jLGM9aS5oYW5kbGVyLGU9aS5zZWxlY3RvciksYy5ndWlkfHwoYy5ndWlkPW4uZ3VpZCsrKSwoZz1yLmV2ZW50cyl8fChnPXIuZXZlbnRzPXt9KSwoaz1yLmhhbmRsZSl8fChrPXIuaGFuZGxlPWZ1bmN0aW9uKGEpe3JldHVybiJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8YSYmbi5ldmVudC50cmlnZ2VyZWQ9PT1hLnR5cGU/dm9pZCAwOm4uZXZlbnQuZGlzcGF0Y2guYXBwbHkoay5lbGVtLGFyZ3VtZW50cyl9LGsuZWxlbT1hKSxiPShifHwiIikubWF0Y2goRyl8fFsiIl0saD1iLmxlbmd0aDt3aGlsZShoLS0pZj1vYS5leGVjKGJbaF0pfHxbXSxvPXE9ZlsxXSxwPShmWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksbyYmKGo9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShlP2ouZGVsZWdhdGVUeXBlOmouYmluZFR5cGUpfHxvLGo9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxsPW4uZXh0ZW5kKHt0eXBlOm8sb3JpZ1R5cGU6cSxkYXRhOmQsaGFuZGxlcjpjLGd1aWQ6Yy5ndWlkLHNlbGVjdG9yOmUsbmVlZHNDb250ZXh0OmUmJm4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChlKSxuYW1lc3BhY2U6cC5qb2luKCIuIil9LGkpLChtPWdbb10pfHwobT1nW29dPVtdLG0uZGVsZWdhdGVDb3VudD0wLGouc2V0dXAmJmouc2V0dXAuY2FsbChhLGQscCxrKSE9PSExfHwoYS5hZGRFdmVudExpc3RlbmVyP2EuYWRkRXZlbnRMaXN0ZW5lcihvLGssITEpOmEuYXR0YWNoRXZlbnQmJmEuYXR0YWNoRXZlbnQoIm9uIitvLGspKSksai5hZGQmJihqLmFkZC5jYWxsKGEsbCksbC5oYW5kbGVyLmd1aWR8fChsLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP20uc3BsaWNlKG0uZGVsZWdhdGVDb3VudCsrLDAsbCk6bS5wdXNoKGwpLG4uZXZlbnQuZ2xvYmFsW29dPSEwKTthPW51bGx9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9bi5oYXNEYXRhKGEpJiZuLl9kYXRhKGEpO2lmKHImJihrPXIuZXZlbnRzKSl7Yj0oYnx8IiIpLm1hdGNoKEcpfHxbIiJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWlmKGg9b2EuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLG8pe2w9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShkP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxvLG09a1tvXXx8W10saD1oWzJdJiZuZXcgUmVnRXhwKCIoXnxcXC4pIitwLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpLGk9Zj1tLmxlbmd0aDt3aGlsZShmLS0pZz1tW2ZdLCFlJiZxIT09Zy5vcmlnVHlwZXx8YyYmYy5ndWlkIT09Zy5ndWlkfHxoJiYhaC50ZXN0KGcubmFtZXNwYWNlKXx8ZCYmZCE9PWcuc2VsZWN0b3ImJigiKioiIT09ZHx8IWcuc2VsZWN0b3IpfHwobS5zcGxpY2UoZiwxKSxnLnNlbGVjdG9yJiZtLmRlbGVnYXRlQ291bnQtLSxsLnJlbW92ZSYmbC5yZW1vdmUuY2FsbChhLGcpKTtpJiYhbS5sZW5ndGgmJihsLnRlYXJkb3duJiZsLnRlYXJkb3duLmNhbGwoYSxwLHIuaGFuZGxlKSE9PSExfHxuLnJlbW92ZUV2ZW50KGEsbyxyLmhhbmRsZSksZGVsZXRlIGtbb10pfWVsc2UgZm9yKG8gaW4gayluLmV2ZW50LnJlbW92ZShhLG8rYltqXSxjLGQsITApO24uaXNFbXB0eU9iamVjdChrKSYmKGRlbGV0ZSByLmhhbmRsZSxuLl9yZW1vdmVEYXRhKGEsImV2ZW50cyIpKX19LHRyaWdnZXI6ZnVuY3Rpb24oYixjLGUsZil7dmFyIGcsaCxpLGosbCxtLG8scD1bZXx8ZF0scT1rLmNhbGwoYiwidHlwZSIpP2IudHlwZTpiLHI9ay5jYWxsKGIsIm5hbWVzcGFjZSIpP2IubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYoaT1tPWU9ZXx8ZCwzIT09ZS5ub2RlVHlwZSYmOCE9PWUubm9kZVR5cGUmJiFuYS50ZXN0KHErbi5ldmVudC50cmlnZ2VyZWQpJiYocS5pbmRleE9mKCIuIik+LTEmJihyPXEuc3BsaXQoIi4iKSxxPXIuc2hpZnQoKSxyLnNvcnQoKSksaD1xLmluZGV4T2YoIjoiKTwwJiYib24iK3EsYj1iW24uZXhwYW5kb10/YjpuZXcgbi5FdmVudChxLCJvYmplY3QiPT10eXBlb2YgYiYmYiksYi5pc1RyaWdnZXI9Zj8yOjMsYi5uYW1lc3BhY2U9ci5qb2luKCIuIiksYi5ybmFtZXNwYWNlPWIubmFtZXNwYWNlP25ldyBSZWdFeHAoIihefFxcLikiK3Iuam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVsbCxiLnJlc3VsdD12b2lkIDAsYi50YXJnZXR8fChiLnRhcmdldD1lKSxjPW51bGw9PWM/W2JdOm4ubWFrZUFycmF5KGMsW2JdKSxsPW4uZXZlbnQuc3BlY2lhbFtxXXx8e30sZnx8IWwudHJpZ2dlcnx8bC50cmlnZ2VyLmFwcGx5KGUsYykhPT0hMSkpe2lmKCFmJiYhbC5ub0J1YmJsZSYmIW4uaXNXaW5kb3coZSkpe2ZvcihqPWwuZGVsZWdhdGVUeXBlfHxxLG5hLnRlc3QoaitxKXx8KGk9aS5wYXJlbnROb2RlKTtpO2k9aS5wYXJlbnROb2RlKXAucHVzaChpKSxtPWk7bT09PShlLm93bmVyRG9jdW1lbnR8fGQpJiZwLnB1c2gobS5kZWZhdWx0Vmlld3x8bS5wYXJlbnRXaW5kb3d8fGEpfW89MDt3aGlsZSgoaT1wW28rK10pJiYhYi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKWIudHlwZT1vPjE/ajpsLmJpbmRUeXBlfHxxLGc9KG4uX2RhdGEoaSwiZXZlbnRzIil8fHt9KVtiLnR5cGVdJiZuLl9kYXRhKGksImhhbmRsZSIpLGcmJmcuYXBwbHkoaSxjKSxnPWgmJmlbaF0sZyYmZy5hcHBseSYmTShpKSYmKGIucmVzdWx0PWcuYXBwbHkoaSxjKSxiLnJlc3VsdD09PSExJiZiLnByZXZlbnREZWZhdWx0KCkpO2lmKGIudHlwZT1xLCFmJiYhYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmKCFsLl9kZWZhdWx0fHxsLl9kZWZhdWx0LmFwcGx5KHAucG9wKCksYyk9PT0hMSkmJk0oZSkmJmgmJmVbcV0mJiFuLmlzV2luZG93KGUpKXttPWVbaF0sbSYmKGVbaF09bnVsbCksbi5ldmVudC50cmlnZ2VyZWQ9cTt0cnl7ZVtxXSgpfWNhdGNoKHMpe31uLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsbSYmKGVbaF09bSl9cmV0dXJuIGIucmVzdWx0fX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YT1uLmV2ZW50LmZpeChhKTt2YXIgYixjLGQsZixnLGg9W10saT1lLmNhbGwoYXJndW1lbnRzKSxqPShuLl9kYXRhKHRoaXMsImV2ZW50cyIpfHx7fSlbYS50eXBlXXx8W10saz1uLmV2ZW50LnNwZWNpYWxbYS50eXBlXXx8e307aWYoaVswXT1hLGEuZGVsZWdhdGVUYXJnZXQ9dGhpcywhay5wcmVEaXNwYXRjaHx8ay5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsYSkhPT0hMSl7aD1uLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxhLGopLGI9MDt3aGlsZSgoZj1oW2IrK10pJiYhYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXthLmN1cnJlbnRUYXJnZXQ9Zi5lbGVtLGM9MDt3aGlsZSgoZz1mLmhhbmRsZXJzW2MrK10pJiYhYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKWEucm5hbWVzcGFjZSYmIWEucm5hbWVzcGFjZS50ZXN0KGcubmFtZXNwYWNlKXx8KGEuaGFuZGxlT2JqPWcsYS5kYXRhPWcuZGF0YSxkPSgobi5ldmVudC5zcGVjaWFsW2cub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxnLmhhbmRsZXIpLmFwcGx5KGYuZWxlbSxpKSx2b2lkIDAhPT1kJiYoYS5yZXN1bHQ9ZCk9PT0hMSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGsucG9zdERpc3BhdGNoJiZrLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsYSksYS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9W10saD1iLmRlbGVnYXRlQ291bnQsaT1hLnRhcmdldDtpZihoJiZpLm5vZGVUeXBlJiYoImNsaWNrIiE9PWEudHlwZXx8aXNOYU4oYS5idXR0b24pfHxhLmJ1dHRvbjwxKSlmb3IoO2khPXRoaXM7aT1pLnBhcmVudE5vZGV8fHRoaXMpaWYoMT09PWkubm9kZVR5cGUmJihpLmRpc2FibGVkIT09ITB8fCJjbGljayIhPT1hLnR5cGUpKXtmb3IoZD1bXSxjPTA7aD5jO2MrKylmPWJbY10sZT1mLnNlbGVjdG9yKyIgIix2b2lkIDA9PT1kW2VdJiYoZFtlXT1mLm5lZWRzQ29udGV4dD9uKGUsdGhpcykuaW5kZXgoaSk+LTE6bi5maW5kKGUsdGhpcyxudWxsLFtpXSkubGVuZ3RoKSxkW2VdJiZkLnB1c2goZik7ZC5sZW5ndGgmJmcucHVzaCh7ZWxlbTppLGhhbmRsZXJzOmR9KX1yZXR1cm4gaDxiLmxlbmd0aCYmZy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6Yi5zbGljZShoKX0pLGd9LGZpeDpmdW5jdGlvbihhKXtpZihhW24uZXhwYW5kb10pcmV0dXJuIGE7dmFyIGIsYyxlLGY9YS50eXBlLGc9YSxoPXRoaXMuZml4SG9va3NbZl07aHx8KHRoaXMuZml4SG9va3NbZl09aD1tYS50ZXN0KGYpP3RoaXMubW91c2VIb29rczpsYS50ZXN0KGYpP3RoaXMua2V5SG9va3M6e30pLGU9aC5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChoLnByb3BzKTp0aGlzLnByb3BzLGE9bmV3IG4uRXZlbnQoZyksYj1lLmxlbmd0aDt3aGlsZShiLS0pYz1lW2JdLGFbY109Z1tjXTtyZXR1cm4gYS50YXJnZXR8fChhLnRhcmdldD1nLnNyY0VsZW1lbnR8fGQpLDM9PT1hLnRhcmdldC5ub2RlVHlwZSYmKGEudGFyZ2V0PWEudGFyZ2V0LnBhcmVudE5vZGUpLGEubWV0YUtleT0hIWEubWV0YUtleSxoLmZpbHRlcj9oLmZpbHRlcihhLGcpOmF9LHByb3BzOiJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBkZXRhaWwgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoIi5zcGxpdCgiICIpLGZpeEhvb2tzOnt9LGtleUhvb2tzOntwcm9wczoiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZSIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YS53aGljaCYmKGEud2hpY2g9bnVsbCE9Yi5jaGFyQ29kZT9iLmNoYXJDb2RlOmIua2V5Q29kZSksYX19LG1vdXNlSG9va3M6e3Byb3BzOiJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgZnJvbUVsZW1lbnQgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnQiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGc9Yi5idXR0b24saD1iLmZyb21FbGVtZW50O3JldHVybiBudWxsPT1hLnBhZ2VYJiZudWxsIT1iLmNsaWVudFgmJihlPWEudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fGQsZj1lLmRvY3VtZW50RWxlbWVudCxjPWUuYm9keSxhLnBhZ2VYPWIuY2xpZW50WCsoZiYmZi5zY3JvbGxMZWZ0fHxjJiZjLnNjcm9sbExlZnR8fDApLShmJiZmLmNsaWVudExlZnR8fGMmJmMuY2xpZW50TGVmdHx8MCksYS5wYWdlWT1iLmNsaWVudFkrKGYmJmYuc2Nyb2xsVG9wfHxjJiZjLnNjcm9sbFRvcHx8MCktKGYmJmYuY2xpZW50VG9wfHxjJiZjLmNsaWVudFRvcHx8MCkpLCFhLnJlbGF0ZWRUYXJnZXQmJmgmJihhLnJlbGF0ZWRUYXJnZXQ9aD09PWEudGFyZ2V0P2IudG9FbGVtZW50OmgpLGEud2hpY2h8fHZvaWQgMD09PWd8fChhLndoaWNoPTEmZz8xOjImZz8zOjQmZz8yOjApLGF9fSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZih0aGlzIT09cmEoKSYmdGhpcy5mb2N1cyl0cnl7cmV0dXJuIHRoaXMuZm9jdXMoKSwhMX1jYXRjaChhKXt9fSxkZWxlZ2F0ZVR5cGU6ImZvY3VzaW4ifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM9PT1yYSgpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiBuLm5vZGVOYW1lKHRoaXMsImlucHV0IikmJiJjaGVja2JveCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2s/KHRoaXMuY2xpY2soKSwhMSk6dm9pZCAwfSxfZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4gbi5ub2RlTmFtZShhLnRhcmdldCwiYSIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7dm9pZCAwIT09YS5yZXN1bHQmJmEub3JpZ2luYWxFdmVudCYmKGEub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1hLnJlc3VsdCl9fX0sc2ltdWxhdGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW4uZXh0ZW5kKG5ldyBuLkV2ZW50LGMse3R5cGU6YSxpc1NpbXVsYXRlZDohMH0pO24uZXZlbnQudHJpZ2dlcihkLG51bGwsYiksZC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmYy5wcmV2ZW50RGVmYXVsdCgpfX0sbi5yZW1vdmVFdmVudD1kLnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYyl9OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0ib24iK2I7YS5kZXRhY2hFdmVudCYmKCJ1bmRlZmluZWQiPT10eXBlb2YgYVtkXSYmKGFbZF09bnVsbCksYS5kZXRhY2hFdmVudChkLGMpKX0sbi5FdmVudD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzIGluc3RhbmNlb2Ygbi5FdmVudD8oYSYmYS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9YSx0aGlzLnR5cGU9YS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWEuZGVmYXVsdFByZXZlbnRlZHx8dm9pZCAwPT09YS5kZWZhdWx0UHJldmVudGVkJiZhLnJldHVyblZhbHVlPT09ITE/cGE6cWEpOnRoaXMudHlwZT1hLGImJm4uZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fG4ubm93KCksdm9pZCh0aGlzW24uZXhwYW5kb109ITApKTpuZXcgbi5FdmVudChhLGIpfSxuLkV2ZW50LnByb3RvdHlwZT17Y29uc3RydWN0b3I6bi5FdmVudCxpc0RlZmF1bHRQcmV2ZW50ZWQ6cWEsaXNQcm9wYWdhdGlvblN0b3BwZWQ6cWEsaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6cWEscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9cGEsYSYmKGEucHJldmVudERlZmF1bHQ/YS5wcmV2ZW50RGVmYXVsdCgpOmEucmV0dXJuVmFsdWU9ITEpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1wYSxhJiYhdGhpcy5pc1NpbXVsYXRlZCYmKGEuc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpLGEuY2FuY2VsQnViYmxlPSEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9cGEsYSYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24mJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LG4uZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oYSxiKXtuLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybiBlJiYoZT09PWR8fG4uY29udGFpbnMoZCxlKSl8fChhLnR5cGU9Zi5vcmlnVHlwZSxjPWYuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYS50eXBlPWIpLGN9fX0pLGwuc3VibWl0fHwobi5ldmVudC5zcGVjaWFsLnN1Ym1pdD17c2V0dXA6ZnVuY3Rpb24oKXtyZXR1cm4gbi5ub2RlTmFtZSh0aGlzLCJmb3JtIik/ITE6dm9pZCBuLmV2ZW50LmFkZCh0aGlzLCJjbGljay5fc3VibWl0IGtleXByZXNzLl9zdWJtaXQiLGZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0LGM9bi5ub2RlTmFtZShiLCJpbnB1dCIpfHxuLm5vZGVOYW1lKGIsImJ1dHRvbiIpP24ucHJvcChiLCJmb3JtIik6dm9pZCAwO2MmJiFuLl9kYXRhKGMsInN1Ym1pdCIpJiYobi5ldmVudC5hZGQoYywic3VibWl0Ll9zdWJtaXQiLGZ1bmN0aW9uKGEpe2EuX3N1Ym1pdEJ1YmJsZT0hMH0pLG4uX2RhdGEoYywic3VibWl0IiwhMCkpfSl9LHBvc3REaXNwYXRjaDpmdW5jdGlvbihhKXthLl9zdWJtaXRCdWJibGUmJihkZWxldGUgYS5fc3VibWl0QnViYmxlLHRoaXMucGFyZW50Tm9kZSYmIWEuaXNUcmlnZ2VyJiZuLmV2ZW50LnNpbXVsYXRlKCJzdWJtaXQiLHRoaXMucGFyZW50Tm9kZSxhKSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7cmV0dXJuIG4ubm9kZU5hbWUodGhpcywiZm9ybSIpPyExOnZvaWQgbi5ldmVudC5yZW1vdmUodGhpcywiLl9zdWJtaXQiKX19KSxsLmNoYW5nZXx8KG4uZXZlbnQuc3BlY2lhbC5jaGFuZ2U9e3NldHVwOmZ1bmN0aW9uKCl7cmV0dXJuIGthLnRlc3QodGhpcy5ub2RlTmFtZSk/KCJjaGVja2JveCIhPT10aGlzLnR5cGUmJiJyYWRpbyIhPT10aGlzLnR5cGV8fChuLmV2ZW50LmFkZCh0aGlzLCJwcm9wZXJ0eWNoYW5nZS5fY2hhbmdlIixmdW5jdGlvbihhKXsiY2hlY2tlZCI9PT1hLm9yaWdpbmFsRXZlbnQucHJvcGVydHlOYW1lJiYodGhpcy5fanVzdENoYW5nZWQ9ITApfSksbi5ldmVudC5hZGQodGhpcywiY2xpY2suX2NoYW5nZSIsZnVuY3Rpb24oYSl7dGhpcy5fanVzdENoYW5nZWQmJiFhLmlzVHJpZ2dlciYmKHRoaXMuX2p1c3RDaGFuZ2VkPSExKSxuLmV2ZW50LnNpbXVsYXRlKCJjaGFuZ2UiLHRoaXMsYSl9KSksITEpOnZvaWQgbi5ldmVudC5hZGQodGhpcywiYmVmb3JlYWN0aXZhdGUuX2NoYW5nZSIsZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQ7a2EudGVzdChiLm5vZGVOYW1lKSYmIW4uX2RhdGEoYiwiY2hhbmdlIikmJihuLmV2ZW50LmFkZChiLCJjaGFuZ2UuX2NoYW5nZSIsZnVuY3Rpb24oYSl7IXRoaXMucGFyZW50Tm9kZXx8YS5pc1NpbXVsYXRlZHx8YS5pc1RyaWdnZXJ8fG4uZXZlbnQuc2ltdWxhdGUoImNoYW5nZSIsdGhpcy5wYXJlbnROb2RlLGEpfSksbi5fZGF0YShiLCJjaGFuZ2UiLCEwKSl9KX0saGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0O3JldHVybiB0aGlzIT09Ynx8YS5pc1NpbXVsYXRlZHx8YS5pc1RyaWdnZXJ8fCJyYWRpbyIhPT1iLnR5cGUmJiJjaGVja2JveCIhPT1iLnR5cGU/YS5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dm9pZCAwfSx0ZWFyZG93bjpmdW5jdGlvbigpe3JldHVybiBuLmV2ZW50LnJlbW92ZSh0aGlzLCIuX2NoYW5nZSIpLCFrYS50ZXN0KHRoaXMubm9kZU5hbWUpfX0pLGwuZm9jdXNpbnx8bi5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe24uZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxuLmV2ZW50LmZpeChhKSl9O24uZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1uLl9kYXRhKGQsYik7ZXx8ZC5hZGRFdmVudExpc3RlbmVyKGEsYywhMCksbi5fZGF0YShkLGIsKGV8fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPW4uX2RhdGEoZCxiKS0xO2U/bi5fZGF0YShkLGIsZSk6KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITApLG4uX3JlbW92ZURhdGEoZCxiKSl9fX0pLG4uZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gc2EodGhpcyxhLGIsYyxkKX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBzYSh0aGlzLGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixuKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlKyIuIitkLm5hbWVzcGFjZTpkLm9yaWdUeXBlLGQuc2VsZWN0b3IsZC5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgYSl7Zm9yKGUgaW4gYSl0aGlzLm9mZihlLGIsYVtlXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGIhPT0hMSYmImZ1bmN0aW9uIiE9dHlwZW9mIGJ8fChjPWIsYj12b2lkIDApLGM9PT0hMSYmKGM9cWEpLHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9LHRyaWdnZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC50cmlnZ2VyKGEsYix0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXNbMF07cmV0dXJuIGM/bi5ldmVudC50cmlnZ2VyKGEsYixjLCEwKTp2b2lkIDB9fSk7dmFyIHRhPS8galF1ZXJ5XGQrPSIoPzpudWxsfFxkKykiL2csdWE9bmV3IFJlZ0V4cCgiPCg/OiIrYmErIilbXFxzLz5dIiwiaSIpLHZhPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzotXSspW14+XSopXC8+L2dpLHdhPS88c2NyaXB0fDxzdHlsZXw8bGluay9pLHhhPS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLHlhPS9edHJ1ZVwvKC4qKS8semE9L15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nLEFhPWNhKGQpLEJhPUFhLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudCgiZGl2IikpO2Z1bmN0aW9uIENhKGEsYil7cmV0dXJuIG4ubm9kZU5hbWUoYSwidGFibGUiKSYmbi5ub2RlTmFtZSgxMSE9PWIubm9kZVR5cGU/YjpiLmZpcnN0Q2hpbGQsInRyIik/YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKVswXXx8YS5hcHBlbmRDaGlsZChhLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGJvZHkiKSk6YX1mdW5jdGlvbiBEYShhKXtyZXR1cm4gYS50eXBlPShudWxsIT09bi5maW5kLmF0dHIoYSwidHlwZSIpKSsiLyIrYS50eXBlLGF9ZnVuY3Rpb24gRWEoYSl7dmFyIGI9eWEuZXhlYyhhLnR5cGUpO3JldHVybiBiP2EudHlwZT1iWzFdOmEucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksYX1mdW5jdGlvbiBGYShhLGIpe2lmKDE9PT1iLm5vZGVUeXBlJiZuLmhhc0RhdGEoYSkpe3ZhciBjLGQsZSxmPW4uX2RhdGEoYSksZz1uLl9kYXRhKGIsZiksaD1mLmV2ZW50cztpZihoKXtkZWxldGUgZy5oYW5kbGUsZy5ldmVudHM9e307Zm9yKGMgaW4gaClmb3IoZD0wLGU9aFtjXS5sZW5ndGg7ZT5kO2QrKyluLmV2ZW50LmFkZChiLGMsaFtjXVtkXSl9Zy5kYXRhJiYoZy5kYXRhPW4uZXh0ZW5kKHt9LGcuZGF0YSkpfX1mdW5jdGlvbiBHYShhLGIpe3ZhciBjLGQsZTtpZigxPT09Yi5ub2RlVHlwZSl7aWYoYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksIWwubm9DbG9uZUV2ZW50JiZiW24uZXhwYW5kb10pe2U9bi5fZGF0YShiKTtmb3IoZCBpbiBlLmV2ZW50cyluLnJlbW92ZUV2ZW50KGIsZCxlLmhhbmRsZSk7Yi5yZW1vdmVBdHRyaWJ1dGUobi5leHBhbmRvKX0ic2NyaXB0Ij09PWMmJmIudGV4dCE9PWEudGV4dD8oRGEoYikudGV4dD1hLnRleHQsRWEoYikpOiJvYmplY3QiPT09Yz8oYi5wYXJlbnROb2RlJiYoYi5vdXRlckhUTUw9YS5vdXRlckhUTUwpLGwuaHRtbDVDbG9uZSYmYS5pbm5lckhUTUwmJiFuLnRyaW0oYi5pbm5lckhUTUwpJiYoYi5pbm5lckhUTUw9YS5pbm5lckhUTUwpKToiaW5wdXQiPT09YyYmWi50ZXN0KGEudHlwZSk/KGIuZGVmYXVsdENoZWNrZWQ9Yi5jaGVja2VkPWEuY2hlY2tlZCxiLnZhbHVlIT09YS52YWx1ZSYmKGIudmFsdWU9YS52YWx1ZSkpOiJvcHRpb24iPT09Yz9iLmRlZmF1bHRTZWxlY3RlZD1iLnNlbGVjdGVkPWEuZGVmYXVsdFNlbGVjdGVkOiJpbnB1dCIhPT1jJiYidGV4dGFyZWEiIT09Y3x8KGIuZGVmYXVsdFZhbHVlPWEuZGVmYXVsdFZhbHVlKX19ZnVuY3Rpb24gSGEoYSxiLGMsZCl7Yj1mLmFwcGx5KFtdLGIpO3ZhciBlLGcsaCxpLGosayxtPTAsbz1hLmxlbmd0aCxwPW8tMSxxPWJbMF0scj1uLmlzRnVuY3Rpb24ocSk7aWYocnx8bz4xJiYic3RyaW5nIj09dHlwZW9mIHEmJiFsLmNoZWNrQ2xvbmUmJnhhLnRlc3QocSkpcmV0dXJuIGEuZWFjaChmdW5jdGlvbihlKXt2YXIgZj1hLmVxKGUpO3ImJihiWzBdPXEuY2FsbCh0aGlzLGUsZi5odG1sKCkpKSxIYShmLGIsYyxkKX0pO2lmKG8mJihrPWphKGIsYVswXS5vd25lckRvY3VtZW50LCExLGEsZCksZT1rLmZpcnN0Q2hpbGQsMT09PWsuY2hpbGROb2Rlcy5sZW5ndGgmJihrPWUpLGV8fGQpKXtmb3IoaT1uLm1hcChlYShrLCJzY3JpcHQiKSxEYSksaD1pLmxlbmd0aDtvPm07bSsrKWc9ayxtIT09cCYmKGc9bi5jbG9uZShnLCEwLCEwKSxoJiZuLm1lcmdlKGksZWEoZywic2NyaXB0IikpKSxjLmNhbGwoYVttXSxnLG0pO2lmKGgpZm9yKGo9aVtpLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LG4ubWFwKGksRWEpLG09MDtoPm07bSsrKWc9aVttXSxfLnRlc3QoZy50eXBlfHwiIikmJiFuLl9kYXRhKGcsImdsb2JhbEV2YWwiKSYmbi5jb250YWlucyhqLGcpJiYoZy5zcmM/bi5fZXZhbFVybCYmbi5fZXZhbFVybChnLnNyYyk6bi5nbG9iYWxFdmFsKChnLnRleHR8fGcudGV4dENvbnRlbnR8fGcuaW5uZXJIVE1MfHwiIikucmVwbGFjZSh6YSwiIikpKTtrPWU9bnVsbH1yZXR1cm4gYX1mdW5jdGlvbiBJYShhLGIsYyl7Zm9yKHZhciBkLGU9Yj9uLmZpbHRlcihiLGEpOmEsZj0wO251bGwhPShkPWVbZl0pO2YrKyljfHwxIT09ZC5ub2RlVHlwZXx8bi5jbGVhbkRhdGEoZWEoZCkpLGQucGFyZW50Tm9kZSYmKGMmJm4uY29udGFpbnMoZC5vd25lckRvY3VtZW50LGQpJiZmYShlYShkLCJzY3JpcHQiKSksZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGQpKTtyZXR1cm4gYX1uLmV4dGVuZCh7aHRtbFByZWZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHZhLCI8JDE+PC8kMj4iKX0sY2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaT1uLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKTtpZihsLmh0bWw1Q2xvbmV8fG4uaXNYTUxEb2MoYSl8fCF1YS50ZXN0KCI8IithLm5vZGVOYW1lKyI+Iik/Zj1hLmNsb25lTm9kZSghMCk6KEJhLmlubmVySFRNTD1hLm91dGVySFRNTCxCYS5yZW1vdmVDaGlsZChmPUJhLmZpcnN0Q2hpbGQpKSwhKGwubm9DbG9uZUV2ZW50JiZsLm5vQ2xvbmVDaGVja2VkfHwxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxuLmlzWE1MRG9jKGEpKSlmb3IoZD1lYShmKSxoPWVhKGEpLGc9MDtudWxsIT0oZT1oW2ddKTsrK2cpZFtnXSYmR2EoZSxkW2ddKTtpZihiKWlmKGMpZm9yKGg9aHx8ZWEoYSksZD1kfHxlYShmKSxnPTA7bnVsbCE9KGU9aFtnXSk7ZysrKUZhKGUsZFtnXSk7ZWxzZSBGYShhLGYpO3JldHVybiBkPWVhKGYsInNjcmlwdCIpLGQubGVuZ3RoPjAmJmZhKGQsIWkmJmVhKGEsInNjcmlwdCIpKSxkPWg9ZT1udWxsLGZ9LGNsZWFuRGF0YTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgZCxlLGYsZyxoPTAsaT1uLmV4cGFuZG8saj1uLmNhY2hlLGs9bC5hdHRyaWJ1dGVzLG09bi5ldmVudC5zcGVjaWFsO251bGwhPShkPWFbaF0pO2grKylpZigoYnx8TShkKSkmJihmPWRbaV0sZz1mJiZqW2ZdKSl7aWYoZy5ldmVudHMpZm9yKGUgaW4gZy5ldmVudHMpbVtlXT9uLmV2ZW50LnJlbW92ZShkLGUpOm4ucmVtb3ZlRXZlbnQoZCxlLGcuaGFuZGxlKTtqW2ZdJiYoZGVsZXRlIGpbZl0sa3x8InVuZGVmaW5lZCI9PXR5cGVvZiBkLnJlbW92ZUF0dHJpYnV0ZT9kW2ldPXZvaWQgMDpkLnJlbW92ZUF0dHJpYnV0ZShpKSxjLnB1c2goZikpfX19KSxuLmZuLmV4dGVuZCh7ZG9tTWFuaXA6SGEsZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiBJYSh0aGlzLGEsITApfSxyZW1vdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIElhKHRoaXMsYSl9LHRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9uLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmFwcGVuZCgodGhpc1swXSYmdGhpc1swXS5vd25lckRvY3VtZW50fHxkKS5jcmVhdGVUZXh0Tm9kZShhKSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIEhhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1DYSh0aGlzLGEpO2IuYXBwZW5kQ2hpbGQoYSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPUNhKHRoaXMsYSk7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcy5uZXh0U2libGluZyl9KX0sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO251bGwhPShhPXRoaXNbYl0pO2IrKyl7MT09PWEubm9kZVR5cGUmJm4uY2xlYW5EYXRhKGVhKGEsITEpKTt3aGlsZShhLmZpcnN0Q2hpbGQpYS5yZW1vdmVDaGlsZChhLmZpcnN0Q2hpbGQpO2Eub3B0aW9ucyYmbi5ub2RlTmFtZShhLCJzZWxlY3QiKSYmKGEub3B0aW9ucy5sZW5ndGg9MCl9cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bnVsbD09YT8hMTphLGI9bnVsbD09Yj9hOmIsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gbi5jbG9uZSh0aGlzLGEsYil9KX0saHRtbDpmdW5jdGlvbihhKXtyZXR1cm4gWSh0aGlzLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXNbMF18fHt9LGM9MCxkPXRoaXMubGVuZ3RoO2lmKHZvaWQgMD09PWEpcmV0dXJuIDE9PT1iLm5vZGVUeXBlP2IuaW5uZXJIVE1MLnJlcGxhY2UodGEsIiIpOnZvaWQgMDtpZigic3RyaW5nIj09dHlwZW9mIGEmJiF3YS50ZXN0KGEpJiYobC5odG1sU2VyaWFsaXplfHwhdWEudGVzdChhKSkmJihsLmxlYWRpbmdXaGl0ZXNwYWNlfHwhYWEudGVzdChhKSkmJiFkYVsoJC5leGVjKGEpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7YT1uLmh0bWxQcmVmaWx0ZXIoYSk7dHJ5e2Zvcig7ZD5jO2MrKyliPXRoaXNbY118fHt9LDE9PT1iLm5vZGVUeXBlJiYobi5jbGVhbkRhdGEoZWEoYiwhMSkpLGIuaW5uZXJIVE1MPWEpO2I9MH1jYXRjaChlKXt9fWImJnRoaXMuZW1wdHkoKS5hcHBlbmQoYSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgYT1bXTtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5wYXJlbnROb2RlO24uaW5BcnJheSh0aGlzLGEpPDAmJihuLmNsZWFuRGF0YShlYSh0aGlzKSksYyYmYy5yZXBsYWNlQ2hpbGQoYix0aGlzKSl9LGEpfX0pLG4uZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhKXtmb3IodmFyIGMsZD0wLGU9W10sZj1uKGEpLGg9Zi5sZW5ndGgtMTtoPj1kO2QrKyljPWQ9PT1oP3RoaXM6dGhpcy5jbG9uZSghMCksbihmW2RdKVtiXShjKSxnLmFwcGx5KGUsYy5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGUpfX0pO3ZhciBKYSxLYT17SFRNTDoiYmxvY2siLEJPRFk6ImJsb2NrIn07ZnVuY3Rpb24gTGEoYSxiKXt2YXIgYz1uKGIuY3JlYXRlRWxlbWVudChhKSkuYXBwZW5kVG8oYi5ib2R5KSxkPW4uY3NzKGNbMF0sImRpc3BsYXkiKTtyZXR1cm4gYy5kZXRhY2goKSxkfWZ1bmN0aW9uIE1hKGEpe3ZhciBiPWQsYz1LYVthXTtyZXR1cm4gY3x8KGM9TGEoYSxiKSwibm9uZSIhPT1jJiZjfHwoSmE9KEphfHxuKCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+IikpLmFwcGVuZFRvKGIuZG9jdW1lbnRFbGVtZW50KSxiPShKYVswXS5jb250ZW50V2luZG93fHxKYVswXS5jb250ZW50RG9jdW1lbnQpLmRvY3VtZW50LGIud3JpdGUoKSxiLmNsb3NlKCksYz1MYShhLGIpLEphLmRldGFjaCgpKSxLYVthXT1jKSxjfXZhciBOYT0vXm1hcmdpbi8sT2E9bmV3IFJlZ0V4cCgiXigiK1QrIikoPyFweClbYS16JV0rJCIsImkiKSxQYT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX0sUWE9ZC5kb2N1bWVudEVsZW1lbnQ7IWZ1bmN0aW9uKCl7dmFyIGIsYyxlLGYsZyxoLGk9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxqPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7aWYoai5zdHlsZSl7ai5zdHlsZS5jc3NUZXh0PSJmbG9hdDpsZWZ0O29wYWNpdHk6LjUiLGwub3BhY2l0eT0iMC41Ij09PWouc3R5bGUub3BhY2l0eSxsLmNzc0Zsb2F0PSEhai5zdHlsZS5jc3NGbG9hdCxqLnN0eWxlLmJhY2tncm91bmRDbGlwPSJjb250ZW50LWJveCIsai5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPSIiLGwuY2xlYXJDbG9uZVN0eWxlPSJjb250ZW50LWJveCI9PT1qLnN0eWxlLmJhY2tncm91bmRDbGlwLGk9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxpLnN0eWxlLmNzc1RleHQ9ImJvcmRlcjowO3dpZHRoOjhweDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7cGFkZGluZzowO21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlIixqLmlubmVySFRNTD0iIixpLmFwcGVuZENoaWxkKGopLGwuYm94U2l6aW5nPSIiPT09ai5zdHlsZS5ib3hTaXppbmd8fCIiPT09ai5zdHlsZS5Nb3pCb3hTaXppbmd8fCIiPT09ai5zdHlsZS5XZWJraXRCb3hTaXppbmcsbi5leHRlbmQobCx7cmVsaWFibGVIaWRkZW5PZmZzZXRzOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWImJmsoKSxmfSxib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksZX0scGl4ZWxNYXJnaW5SaWdodDpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksY30scGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksYn0scmVsaWFibGVNYXJnaW5SaWdodDpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksZ30scmVsaWFibGVNYXJnaW5MZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWImJmsoKSxofX0pO2Z1bmN0aW9uIGsoKXt2YXIgayxsLG09ZC5kb2N1bWVudEVsZW1lbnQ7bS5hcHBlbmRDaGlsZChpKSxqLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO21hcmdpbjphdXRvO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7dG9wOjElO3dpZHRoOjUwJSIsYj1lPWg9ITEsYz1nPSEwLGEuZ2V0Q29tcHV0ZWRTdHlsZSYmKGw9YS5nZXRDb21wdXRlZFN0eWxlKGopLGI9IjElIiE9PShsfHx7fSkudG9wLGg9IjJweCI9PT0obHx8e30pLm1hcmdpbkxlZnQsZT0iNHB4Ij09PShsfHx7d2lkdGg6IjRweCJ9KS53aWR0aCxqLnN0eWxlLm1hcmdpblJpZ2h0PSI1MCUiLGM9IjRweCI9PT0obHx8e21hcmdpblJpZ2h0OiI0cHgifSkubWFyZ2luUmlnaHQsaz1qLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudCgiZGl2IikpLGsuc3R5bGUuY3NzVGV4dD1qLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MCIsay5zdHlsZS5tYXJnaW5SaWdodD1rLnN0eWxlLndpZHRoPSIwIixqLnN0eWxlLndpZHRoPSIxcHgiLGc9IXBhcnNlRmxvYXQoKGEuZ2V0Q29tcHV0ZWRTdHlsZShrKXx8e30pLm1hcmdpblJpZ2h0KSxqLnJlbW92ZUNoaWxkKGspKSxqLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGY9MD09PWouZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgsZiYmKGouc3R5bGUuZGlzcGxheT0iIixqLmlubmVySFRNTD0iPHRhYmxlPjx0cj48dGQ+PC90ZD48dGQ+dDwvdGQ+PC90cj48L3RhYmxlPiIsai5jaGlsZE5vZGVzWzBdLnN0eWxlLmJvcmRlckNvbGxhcHNlPSJzZXBhcmF0ZSIsaz1qLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZCIpLGtbMF0uc3R5bGUuY3NzVGV4dD0ibWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowO2Rpc3BsYXk6bm9uZSIsZj0wPT09a1swXS5vZmZzZXRIZWlnaHQsZiYmKGtbMF0uc3R5bGUuZGlzcGxheT0iIixrWzFdLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGY9MD09PWtbMF0ub2Zmc2V0SGVpZ2h0KSksbS5yZW1vdmVDaGlsZChpKX19fSgpO3ZhciBSYSxTYSxUYT0vXih0b3B8cmlnaHR8Ym90dG9tfGxlZnQpJC87YS5nZXRDb21wdXRlZFN0eWxlPyhSYT1mdW5jdGlvbihiKXt2YXIgYz1iLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7cmV0dXJuIGMmJmMub3BlbmVyfHwoYz1hKSxjLmdldENvbXB1dGVkU3R5bGUoYil9LFNhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8UmEoYSksZz1jP2MuZ2V0UHJvcGVydHlWYWx1ZShiKXx8Y1tiXTp2b2lkIDAsIiIhPT1nJiZ2b2lkIDAhPT1nfHxuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKXx8KGc9bi5zdHlsZShhLGIpKSxjJiYhbC5waXhlbE1hcmdpblJpZ2h0KCkmJk9hLnRlc3QoZykmJk5hLnRlc3QoYikmJihkPWgud2lkdGgsZT1oLm1pbldpZHRoLGY9aC5tYXhXaWR0aCxoLm1pbldpZHRoPWgubWF4V2lkdGg9aC53aWR0aD1nLGc9Yy53aWR0aCxoLndpZHRoPWQsaC5taW5XaWR0aD1lLGgubWF4V2lkdGg9Ziksdm9pZCAwPT09Zz9nOmcrIiJ9KTpRYS5jdXJyZW50U3R5bGUmJihSYT1mdW5jdGlvbihhKXtyZXR1cm4gYS5jdXJyZW50U3R5bGV9LFNhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8UmEoYSksZz1jP2NbYl06dm9pZCAwLG51bGw9PWcmJmgmJmhbYl0mJihnPWhbYl0pLE9hLnRlc3QoZykmJiFUYS50ZXN0KGIpJiYoZD1oLmxlZnQsZT1hLnJ1bnRpbWVTdHlsZSxmPWUmJmUubGVmdCxmJiYoZS5sZWZ0PWEuY3VycmVudFN0eWxlLmxlZnQpLGgubGVmdD0iZm9udFNpemUiPT09Yj8iMWVtIjpnLGc9aC5waXhlbExlZnQrInB4IixoLmxlZnQ9ZCxmJiYoZS5sZWZ0PWYpKSx2b2lkIDA9PT1nP2c6ZysiInx8ImF1dG8ifSk7ZnVuY3Rpb24gVWEoYSxiKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEoKT92b2lkIGRlbGV0ZSB0aGlzLmdldDoodGhpcy5nZXQ9YikuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19dmFyIFZhPS9hbHBoYVwoW14pXSpcKS9pLFdhPS9vcGFjaXR5XHMqPVxzKihbXildKikvaSxYYT0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sWWE9bmV3IFJlZ0V4cCgiXigiK1QrIikoLiopJCIsImkiKSxaYT17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sJGE9e2xldHRlclNwYWNpbmc6IjAiLGZvbnRXZWlnaHQ6IjQwMCJ9LF9hPVsiV2Via2l0IiwiTyIsIk1veiIsIm1zIl0sYWI9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZTtmdW5jdGlvbiBiYihhKXtpZihhIGluIGFiKXJldHVybiBhO3ZhciBiPWEuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKSxjPV9hLmxlbmd0aDt3aGlsZShjLS0paWYoYT1fYVtjXStiLGEgaW4gYWIpcmV0dXJuIGF9ZnVuY3Rpb24gY2IoYSxiKXtmb3IodmFyIGMsZCxlLGY9W10sZz0wLGg9YS5sZW5ndGg7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGZbZ109bi5fZGF0YShkLCJvbGRkaXNwbGF5IiksYz1kLnN0eWxlLmRpc3BsYXksYj8oZltnXXx8Im5vbmUiIT09Y3x8KGQuc3R5bGUuZGlzcGxheT0iIiksIiI9PT1kLnN0eWxlLmRpc3BsYXkmJlcoZCkmJihmW2ddPW4uX2RhdGEoZCwib2xkZGlzcGxheSIsTWEoZC5ub2RlTmFtZSkpKSk6KGU9VyhkKSwoYyYmIm5vbmUiIT09Y3x8IWUpJiZuLl9kYXRhKGQsIm9sZGRpc3BsYXkiLGU/YzpuLmNzcyhkLCJkaXNwbGF5IikpKSk7Zm9yKGc9MDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoYiYmIm5vbmUiIT09ZC5zdHlsZS5kaXNwbGF5JiYiIiE9PWQuc3R5bGUuZGlzcGxheXx8KGQuc3R5bGUuZGlzcGxheT1iP2ZbZ118fCIiOiJub25lIikpO3JldHVybiBhfWZ1bmN0aW9uIGRiKGEsYixjKXt2YXIgZD1ZYS5leGVjKGIpO3JldHVybiBkP01hdGgubWF4KDAsZFsxXS0oY3x8MCkpKyhkWzJdfHwicHgiKTpifWZ1bmN0aW9uIGViKGEsYixjLGQsZSl7Zm9yKHZhciBmPWM9PT0oZD8iYm9yZGVyIjoiY29udGVudCIpPzQ6IndpZHRoIj09PWI/MTowLGc9MDs0PmY7Zis9MikibWFyZ2luIj09PWMmJihnKz1uLmNzcyhhLGMrVltmXSwhMCxlKSksZD8oImNvbnRlbnQiPT09YyYmKGctPW4uY3NzKGEsInBhZGRpbmciK1ZbZl0sITAsZSkpLCJtYXJnaW4iIT09YyYmKGctPW4uY3NzKGEsImJvcmRlciIrVltmXSsiV2lkdGgiLCEwLGUpKSk6KGcrPW4uY3NzKGEsInBhZGRpbmciK1ZbZl0sITAsZSksInBhZGRpbmciIT09YyYmKGcrPW4uY3NzKGEsImJvcmRlciIrVltmXSsiV2lkdGgiLCEwLGUpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gZmIoYSxiLGMpe3ZhciBkPSEwLGU9IndpZHRoIj09PWI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodCxmPVJhKGEpLGc9bC5ib3hTaXppbmcmJiJib3JkZXItYm94Ij09PW4uY3NzKGEsImJveFNpemluZyIsITEsZik7aWYoMD49ZXx8bnVsbD09ZSl7aWYoZT1TYShhLGIsZiksKDA+ZXx8bnVsbD09ZSkmJihlPWEuc3R5bGVbYl0pLE9hLnRlc3QoZSkpcmV0dXJuIGU7ZD1nJiYobC5ib3hTaXppbmdSZWxpYWJsZSgpfHxlPT09YS5zdHlsZVtiXSksZT1wYXJzZUZsb2F0KGUpfHwwfXJldHVybiBlK2ViKGEsYixjfHwoZz8iYm9yZGVyIjoiY29udGVudCIpLGQsZikrInB4In1uLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihhLGIpe2lmKGIpe3ZhciBjPVNhKGEsIm9wYWNpdHkiKTtyZXR1cm4iIj09PWM/IjEiOmN9fX19LGNzc051bWJlcjp7YW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6ITAsY29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6eyJmbG9hdCI6bC5jc3NGbG9hdD8iY3NzRmxvYXQiOiJzdHlsZUZsb2F0In0sc3R5bGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYoYSYmMyE9PWEubm9kZVR5cGUmJjghPT1hLm5vZGVUeXBlJiZhLnN0eWxlKXt2YXIgZSxmLGcsaD1uLmNhbWVsQ2FzZShiKSxpPWEuc3R5bGU7aWYoYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1iYihoKXx8aCksZz1uLmNzc0hvb2tzW2JdfHxuLmNzc0hvb2tzW2hdLHZvaWQgMD09PWMpcmV0dXJuIGcmJiJnZXQiaW4gZyYmdm9pZCAwIT09KGU9Zy5nZXQoYSwhMSxkKSk/ZTppW2JdO2lmKGY9dHlwZW9mIGMsInN0cmluZyI9PT1mJiYoZT1VLmV4ZWMoYykpJiZlWzFdJiYoYz1YKGEsYixlKSxmPSJudW1iZXIiKSxudWxsIT1jJiZjPT09YyYmKCJudW1iZXIiPT09ZiYmKGMrPWUmJmVbM118fChuLmNzc051bWJlcltoXT8iIjoicHgiKSksbC5jbGVhckNsb25lU3R5bGV8fCIiIT09Y3x8MCE9PWIuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwoaVtiXT0iaW5oZXJpdCIpLCEoZyYmInNldCJpbiBnJiZ2b2lkIDA9PT0oYz1nLnNldChhLGMsZCkpKSkpdHJ5e2lbYl09Y31jYXRjaChqKXt9fX0sY3NzOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZyxoPW4uY2FtZWxDYXNlKGIpO3JldHVybiBiPW4uY3NzUHJvcHNbaF18fChuLmNzc1Byb3BzW2hdPWJiKGgpfHxoKSxnPW4uY3NzSG9va3NbYl18fG4uY3NzSG9va3NbaF0sZyYmImdldCJpbiBnJiYoZj1nLmdldChhLCEwLGMpKSx2b2lkIDA9PT1mJiYoZj1TYShhLGIsZCkpLCJub3JtYWwiPT09ZiYmYiBpbiAkYSYmKGY9JGFbYl0pLCIiPT09Y3x8Yz8oZT1wYXJzZUZsb2F0KGYpLGM9PT0hMHx8aXNGaW5pdGUoZSk/ZXx8MDpmKTpmfX0pLG4uZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2JdPXtnZXQ6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBjP1hhLnRlc3Qobi5jc3MoYSwiZGlzcGxheSIpKSYmMD09PWEub2Zmc2V0V2lkdGg/UGEoYSxaYSxmdW5jdGlvbigpe3JldHVybiBmYihhLGIsZCl9KTpmYihhLGIsZCk6dm9pZCAwfSxzZXQ6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWQmJlJhKGEpO3JldHVybiBkYihhLGMsZD9lYihhLGIsZCxsLmJveFNpemluZyYmImJvcmRlci1ib3giPT09bi5jc3MoYSwiYm94U2l6aW5nIiwhMSxlKSxlKTowKX19fSksbC5vcGFjaXR5fHwobi5jc3NIb29rcy5vcGFjaXR5PXtnZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gV2EudGVzdCgoYiYmYS5jdXJyZW50U3R5bGU/YS5jdXJyZW50U3R5bGUuZmlsdGVyOmEuc3R5bGUuZmlsdGVyKXx8IiIpPy4wMSpwYXJzZUZsb2F0KFJlZ0V4cC4kMSkrIiI6Yj8iMSI6IiJ9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjPWEuc3R5bGUsZD1hLmN1cnJlbnRTdHlsZSxlPW4uaXNOdW1lcmljKGIpPyJhbHBoYShvcGFjaXR5PSIrMTAwKmIrIikiOiIiLGY9ZCYmZC5maWx0ZXJ8fGMuZmlsdGVyfHwiIjtjLnpvb209MSwoYj49MXx8IiI9PT1iKSYmIiI9PT1uLnRyaW0oZi5yZXBsYWNlKFZhLCIiKSkmJmMucmVtb3ZlQXR0cmlidXRlJiYoYy5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpLCIiPT09Ynx8ZCYmIWQuZmlsdGVyKXx8KGMuZmlsdGVyPVZhLnRlc3QoZik/Zi5yZXBsYWNlKFZhLGUpOmYrIiAiK2UpfX0pLG4uY3NzSG9va3MubWFyZ2luUmlnaHQ9VWEobC5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/UGEoYSx7ZGlzcGxheToiaW5saW5lLWJsb2NrIn0sU2EsW2EsIm1hcmdpblJpZ2h0Il0pOnZvaWQgMH0pLG4uY3NzSG9va3MubWFyZ2luTGVmdD1VYShsLnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihhLGIpe3JldHVybiBiPyhwYXJzZUZsb2F0KFNhKGEsIm1hcmdpbkxlZnQiKSl8fChuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKT9hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQtUGEoYSx7Cm1hcmdpbkxlZnQ6MH0sZnVuY3Rpb24oKXtyZXR1cm4gYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0fSk6MCkpKyJweCI6dm9pZCAwfSksbi5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3JkZXI6IldpZHRoIn0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9InN0cmluZyI9PXR5cGVvZiBjP2Muc3BsaXQoIiAiKTpbY107ND5kO2QrKyllW2ErVltkXStiXT1mW2RdfHxmW2QtMl18fGZbMF07cmV0dXJuIGV9fSxOYS50ZXN0KGEpfHwobi5jc3NIb29rc1thK2JdLnNldD1kYil9KSxuLmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPXt9LGc9MDtpZihuLmlzQXJyYXkoYikpe2ZvcihkPVJhKGEpLGU9Yi5sZW5ndGg7ZT5nO2crKylmW2JbZ11dPW4uY3NzKGEsYltnXSwhMSxkKTtyZXR1cm4gZn1yZXR1cm4gdm9pZCAwIT09Yz9uLnN0eWxlKGEsYixjKTpuLmNzcyhhLGIpfSxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0sc2hvdzpmdW5jdGlvbigpe3JldHVybiBjYih0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBjYih0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe3JldHVybiJib29sZWFuIj09dHlwZW9mIGE/YT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtXKHRoaXMpP24odGhpcykuc2hvdygpOm4odGhpcykuaGlkZSgpfSl9fSk7ZnVuY3Rpb24gZ2IoYSxiLGMsZCxlKXtyZXR1cm4gbmV3IGdiLnByb3RvdHlwZS5pbml0KGEsYixjLGQsZSl9bi5Ud2Vlbj1nYixnYi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmdiLGluaXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuZWxlbT1hLHRoaXMucHJvcD1jLHRoaXMuZWFzaW5nPWV8fG4uZWFzaW5nLl9kZWZhdWx0LHRoaXMub3B0aW9ucz1iLHRoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKSx0aGlzLmVuZD1kLHRoaXMudW5pdD1mfHwobi5jc3NOdW1iZXJbY10/IiI6InB4Iil9LGN1cjpmdW5jdGlvbigpe3ZhciBhPWdiLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBhJiZhLmdldD9hLmdldCh0aGlzKTpnYi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oYSl7dmFyIGIsYz1nYi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5vcHRpb25zLmR1cmF0aW9uP3RoaXMucG9zPWI9bi5lYXNpbmdbdGhpcy5lYXNpbmddKGEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmEsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6dGhpcy5wb3M9Yj1hLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSpiK3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLGMmJmMuc2V0P2Muc2V0KHRoaXMpOmdiLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LGdiLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1nYi5wcm90b3R5cGUsZ2IucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiAxIT09YS5lbGVtLm5vZGVUeXBlfHxudWxsIT1hLmVsZW1bYS5wcm9wXSYmbnVsbD09YS5lbGVtLnN0eWxlW2EucHJvcF0/YS5lbGVtW2EucHJvcF06KGI9bi5jc3MoYS5lbGVtLGEucHJvcCwiIiksYiYmImF1dG8iIT09Yj9iOjApfSxzZXQ6ZnVuY3Rpb24oYSl7bi5meC5zdGVwW2EucHJvcF0/bi5meC5zdGVwW2EucHJvcF0oYSk6MSE9PWEuZWxlbS5ub2RlVHlwZXx8bnVsbD09YS5lbGVtLnN0eWxlW24uY3NzUHJvcHNbYS5wcm9wXV0mJiFuLmNzc0hvb2tzW2EucHJvcF0/YS5lbGVtW2EucHJvcF09YS5ub3c6bi5zdHlsZShhLmVsZW0sYS5wcm9wLGEubm93K2EudW5pdCl9fX0sZ2IucHJvcEhvb2tzLnNjcm9sbFRvcD1nYi5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGEpe2EuZWxlbS5ub2RlVHlwZSYmYS5lbGVtLnBhcmVudE5vZGUmJihhLmVsZW1bYS5wcm9wXT1hLm5vdyl9fSxuLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzd2luZzpmdW5jdGlvbihhKXtyZXR1cm4uNS1NYXRoLmNvcyhhKk1hdGguUEkpLzJ9LF9kZWZhdWx0OiJzd2luZyJ9LG4uZng9Z2IucHJvdG90eXBlLmluaXQsbi5meC5zdGVwPXt9O3ZhciBoYixpYixqYj0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sa2I9L3F1ZXVlSG9va3MkLztmdW5jdGlvbiBsYigpe3JldHVybiBhLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtoYj12b2lkIDB9KSxoYj1uLm5vdygpfWZ1bmN0aW9uIG1iKGEsYil7dmFyIGMsZD17aGVpZ2h0OmF9LGU9MDtmb3IoYj1iPzE6MDs0PmU7ZSs9Mi1iKWM9VltlXSxkWyJtYXJnaW4iK2NdPWRbInBhZGRpbmciK2NdPWE7cmV0dXJuIGImJihkLm9wYWNpdHk9ZC53aWR0aD1hKSxkfWZ1bmN0aW9uIG5iKGEsYixjKXtmb3IodmFyIGQsZT0ocWIudHdlZW5lcnNbYl18fFtdKS5jb25jYXQocWIudHdlZW5lcnNbIioiXSksZj0wLGc9ZS5sZW5ndGg7Zz5mO2YrKylpZihkPWVbZl0uY2FsbChjLGIsYSkpcmV0dXJuIGR9ZnVuY3Rpb24gb2IoYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGssbT10aGlzLG89e30scD1hLnN0eWxlLHE9YS5ub2RlVHlwZSYmVyhhKSxyPW4uX2RhdGEoYSwiZnhzaG93Iik7Yy5xdWV1ZXx8KGg9bi5fcXVldWVIb29rcyhhLCJmeCIpLG51bGw9PWgudW5xdWV1ZWQmJihoLnVucXVldWVkPTAsaT1oLmVtcHR5LmZpcmUsaC5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7aC51bnF1ZXVlZHx8aSgpfSksaC51bnF1ZXVlZCsrLG0uYWx3YXlzKGZ1bmN0aW9uKCl7bS5hbHdheXMoZnVuY3Rpb24oKXtoLnVucXVldWVkLS0sbi5xdWV1ZShhLCJmeCIpLmxlbmd0aHx8aC5lbXB0eS5maXJlKCl9KX0pKSwxPT09YS5ub2RlVHlwZSYmKCJoZWlnaHQiaW4gYnx8IndpZHRoImluIGIpJiYoYy5vdmVyZmxvdz1bcC5vdmVyZmxvdyxwLm92ZXJmbG93WCxwLm92ZXJmbG93WV0saj1uLmNzcyhhLCJkaXNwbGF5Iiksaz0ibm9uZSI9PT1qP24uX2RhdGEoYSwib2xkZGlzcGxheSIpfHxNYShhLm5vZGVOYW1lKTpqLCJpbmxpbmUiPT09ayYmIm5vbmUiPT09bi5jc3MoYSwiZmxvYXQiKSYmKGwuaW5saW5lQmxvY2tOZWVkc0xheW91dCYmImlubGluZSIhPT1NYShhLm5vZGVOYW1lKT9wLnpvb209MTpwLmRpc3BsYXk9ImlubGluZS1ibG9jayIpKSxjLm92ZXJmbG93JiYocC5vdmVyZmxvdz0iaGlkZGVuIixsLnNocmlua1dyYXBCbG9ja3MoKXx8bS5hbHdheXMoZnVuY3Rpb24oKXtwLm92ZXJmbG93PWMub3ZlcmZsb3dbMF0scC5vdmVyZmxvd1g9Yy5vdmVyZmxvd1sxXSxwLm92ZXJmbG93WT1jLm92ZXJmbG93WzJdfSkpO2ZvcihkIGluIGIpaWYoZT1iW2RdLGpiLmV4ZWMoZSkpe2lmKGRlbGV0ZSBiW2RdLGY9Znx8InRvZ2dsZSI9PT1lLGU9PT0ocT8iaGlkZSI6InNob3ciKSl7aWYoInNob3ciIT09ZXx8IXJ8fHZvaWQgMD09PXJbZF0pY29udGludWU7cT0hMH1vW2RdPXImJnJbZF18fG4uc3R5bGUoYSxkKX1lbHNlIGo9dm9pZCAwO2lmKG4uaXNFbXB0eU9iamVjdChvKSkiaW5saW5lIj09PSgibm9uZSI9PT1qP01hKGEubm9kZU5hbWUpOmopJiYocC5kaXNwbGF5PWopO2Vsc2V7cj8iaGlkZGVuImluIHImJihxPXIuaGlkZGVuKTpyPW4uX2RhdGEoYSwiZnhzaG93Iix7fSksZiYmKHIuaGlkZGVuPSFxKSxxP24oYSkuc2hvdygpOm0uZG9uZShmdW5jdGlvbigpe24oYSkuaGlkZSgpfSksbS5kb25lKGZ1bmN0aW9uKCl7dmFyIGI7bi5fcmVtb3ZlRGF0YShhLCJmeHNob3ciKTtmb3IoYiBpbiBvKW4uc3R5bGUoYSxiLG9bYl0pfSk7Zm9yKGQgaW4gbylnPW5iKHE/cltkXTowLGQsbSksZCBpbiByfHwocltkXT1nLnN0YXJ0LHEmJihnLmVuZD1nLnN0YXJ0LGcuc3RhcnQ9IndpZHRoIj09PWR8fCJoZWlnaHQiPT09ZD8xOjApKX19ZnVuY3Rpb24gcGIoYSxiKXt2YXIgYyxkLGUsZixnO2ZvcihjIGluIGEpaWYoZD1uLmNhbWVsQ2FzZShjKSxlPWJbZF0sZj1hW2NdLG4uaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9bi5jc3NIb29rc1tkXSxnJiYiZXhwYW5kImluIGcpe2Y9Zy5leHBhbmQoZiksZGVsZXRlIGFbZF07Zm9yKGMgaW4gZiljIGluIGF8fChhW2NdPWZbY10sYltjXT1lKX1lbHNlIGJbZF09ZX1mdW5jdGlvbiBxYihhLGIsYyl7dmFyIGQsZSxmPTAsZz1xYi5wcmVmaWx0ZXJzLmxlbmd0aCxoPW4uRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPWhifHxsYigpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtpPmc7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksMT5mJiZpP2M6KGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpuLmV4dGVuZCh7fSxiKSxvcHRzOm4uZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9LGVhc2luZzpuLmVhc2luZy5fZGVmYXVsdH0sYyksb3JpZ2luYWxQcm9wZXJ0aWVzOmIsb3JpZ2luYWxPcHRpb25zOmMsc3RhcnRUaW1lOmhifHxsYigpLGR1cmF0aW9uOmMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9bi5Ud2VlbihhLGoub3B0cyxiLGMsai5vcHRzLnNwZWNpYWxFYXNpbmdbYl18fGoub3B0cy5lYXNpbmcpO3JldHVybiBqLnR3ZWVucy5wdXNoKGQpLGR9LHN0b3A6ZnVuY3Rpb24oYil7dmFyIGM9MCxkPWI/ai50d2VlbnMubGVuZ3RoOjA7aWYoZSlyZXR1cm4gdGhpcztmb3IoZT0hMDtkPmM7YysrKWoudHdlZW5zW2NdLnJ1bigxKTtyZXR1cm4gYj8oaC5ub3RpZnlXaXRoKGEsW2osMSwwXSksaC5yZXNvbHZlV2l0aChhLFtqLGJdKSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihwYihrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtnPmY7ZisrKWlmKGQ9cWIucHJlZmlsdGVyc1tmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIG4uaXNGdW5jdGlvbihkLnN0b3ApJiYobi5fcXVldWVIb29rcyhqLmVsZW0sai5vcHRzLnF1ZXVlKS5zdG9wPW4ucHJveHkoZC5zdG9wLGQpKSxkO3JldHVybiBuLm1hcChrLG5iLGopLG4uaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLG4uZngudGltZXIobi5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksai5wcm9ncmVzcyhqLm9wdHMucHJvZ3Jlc3MpLmRvbmUoai5vcHRzLmRvbmUsai5vcHRzLmNvbXBsZXRlKS5mYWlsKGoub3B0cy5mYWlsKS5hbHdheXMoai5vcHRzLmFsd2F5cyl9bi5BbmltYXRpb249bi5leHRlbmQocWIse3R3ZWVuZXJzOnsiKiI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVUd2VlbihhLGIpO3JldHVybiBYKGMuZWxlbSxhLFUuZXhlYyhiKSxjKSxjfV19LHR3ZWVuZXI6ZnVuY3Rpb24oYSxiKXtuLmlzRnVuY3Rpb24oYSk/KGI9YSxhPVsiKiJdKTphPWEubWF0Y2goRyk7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYz1hW2RdLHFiLnR3ZWVuZXJzW2NdPXFiLnR3ZWVuZXJzW2NdfHxbXSxxYi50d2VlbmVyc1tjXS51bnNoaWZ0KGIpfSxwcmVmaWx0ZXJzOltvYl0scHJlZmlsdGVyOmZ1bmN0aW9uKGEsYil7Yj9xYi5wcmVmaWx0ZXJzLnVuc2hpZnQoYSk6cWIucHJlZmlsdGVycy5wdXNoKGEpfX0pLG4uc3BlZWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEmJiJvYmplY3QiPT10eXBlb2YgYT9uLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fG4uaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhbi5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gZC5kdXJhdGlvbj1uLmZ4Lm9mZj8wOiJudW1iZXIiPT10eXBlb2YgZC5kdXJhdGlvbj9kLmR1cmF0aW9uOmQuZHVyYXRpb24gaW4gbi5meC5zcGVlZHM/bi5meC5zcGVlZHNbZC5kdXJhdGlvbl06bi5meC5zcGVlZHMuX2RlZmF1bHQsbnVsbCE9ZC5xdWV1ZSYmZC5xdWV1ZSE9PSEwfHwoZC5xdWV1ZT0iZngiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtuLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJm4uZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxuLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihXKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OmJ9LGEsYyxkKX0sYW5pbWF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uLmlzRW1wdHlPYmplY3QoYSksZj1uLnNwZWVkKGIsYyxkKSxnPWZ1bmN0aW9uKCl7dmFyIGI9cWIodGhpcyxuLmV4dGVuZCh7fSxhKSxmKTsoZXx8bi5fZGF0YSh0aGlzLCJmaW5pc2giKSkmJmIuc3RvcCghMCl9O3JldHVybiBnLmZpbmlzaD1nLGV8fGYucXVldWU9PT0hMT90aGlzLmVhY2goZyk6dGhpcy5xdWV1ZShmLnF1ZXVlLGcpfSxzdG9wOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihhKXt2YXIgYj1hLnN0b3A7ZGVsZXRlIGEuc3RvcCxiKGMpfTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGEmJihjPWIsYj1hLGE9dm9pZCAwKSxiJiZhIT09ITEmJnRoaXMucXVldWUoYXx8ImZ4IixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9ITAsZT1udWxsIT1hJiZhKyJxdWV1ZUhvb2tzIixmPW4udGltZXJzLGc9bi5fZGF0YSh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZrYi50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyFiJiZjfHxuLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8ImZ4IiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsYz1uLl9kYXRhKHRoaXMpLGQ9Y1thKyJxdWV1ZSJdLGU9Y1thKyJxdWV1ZUhvb2tzIl0sZj1uLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsbi5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxuLmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9bi5mbltiXTtuLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8ImJvb2xlYW4iPT10eXBlb2YgYT9jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUobWIoYiwhMCksYSxkLGUpfX0pLG4uZWFjaCh7c2xpZGVEb3duOm1iKCJzaG93Iiksc2xpZGVVcDptYigiaGlkZSIpLHNsaWRlVG9nZ2xlOm1iKCJ0b2dnbGUiKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhLGMsZCl7cmV0dXJuIHRoaXMuYW5pbWF0ZShiLGEsYyxkKX19KSxuLnRpbWVycz1bXSxuLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgYSxiPW4udGltZXJzLGM9MDtmb3IoaGI9bi5ub3coKTtjPGIubGVuZ3RoO2MrKylhPWJbY10sYSgpfHxiW2NdIT09YXx8Yi5zcGxpY2UoYy0tLDEpO2IubGVuZ3RofHxuLmZ4LnN0b3AoKSxoYj12b2lkIDB9LG4uZngudGltZXI9ZnVuY3Rpb24oYSl7bi50aW1lcnMucHVzaChhKSxhKCk/bi5meC5zdGFydCgpOm4udGltZXJzLnBvcCgpfSxuLmZ4LmludGVydmFsPTEzLG4uZnguc3RhcnQ9ZnVuY3Rpb24oKXtpYnx8KGliPWEuc2V0SW50ZXJ2YWwobi5meC50aWNrLG4uZnguaW50ZXJ2YWwpKX0sbi5meC5zdG9wPWZ1bmN0aW9uKCl7YS5jbGVhckludGVydmFsKGliKSxpYj1udWxsfSxuLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxuLmZuLmRlbGF5PWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGI9bi5meD9uLmZ4LnNwZWVkc1tiXXx8YjpiLGM9Y3x8ImZ4Iix0aGlzLnF1ZXVlKGMsZnVuY3Rpb24oYyxkKXt2YXIgZT1hLnNldFRpbWVvdXQoYyxiKTtkLnN0b3A9ZnVuY3Rpb24oKXthLmNsZWFyVGltZW91dChlKX19KX0sZnVuY3Rpb24oKXt2YXIgYSxiPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxjPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZT1kLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLGY9ZS5hcHBlbmRDaGlsZChkLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtjPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksYy5zZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIsInQiKSxjLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IixhPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXSxiLnNldEF0dHJpYnV0ZSgidHlwZSIsImNoZWNrYm94IiksYy5hcHBlbmRDaGlsZChiKSxhPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXSxhLnN0eWxlLmNzc1RleHQ9InRvcDoxcHgiLGwuZ2V0U2V0QXR0cmlidXRlPSJ0IiE9PWMuY2xhc3NOYW1lLGwuc3R5bGU9L3RvcC8udGVzdChhLmdldEF0dHJpYnV0ZSgic3R5bGUiKSksbC5ocmVmTm9ybWFsaXplZD0iL2EiPT09YS5nZXRBdHRyaWJ1dGUoImhyZWYiKSxsLmNoZWNrT249ISFiLnZhbHVlLGwub3B0U2VsZWN0ZWQ9Zi5zZWxlY3RlZCxsLmVuY3R5cGU9ISFkLmNyZWF0ZUVsZW1lbnQoImZvcm0iKS5lbmN0eXBlLGUuZGlzYWJsZWQ9ITAsbC5vcHREaXNhYmxlZD0hZi5kaXNhYmxlZCxiPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxiLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSxsLmlucHV0PSIiPT09Yi5nZXRBdHRyaWJ1dGUoInZhbHVlIiksYi52YWx1ZT0idCIsYi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJyYWRpbyIpLGwucmFkaW9WYWx1ZT0idCI9PT1iLnZhbHVlfSgpO3ZhciByYj0vXHIvZyxzYj0vW1x4MjBcdFxyXG5cZl0rL2c7bi5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT10aGlzWzBdO3tpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBkPW4uaXNGdW5jdGlvbihhKSx0aGlzLmVhY2goZnVuY3Rpb24oYyl7dmFyIGU7MT09PXRoaXMubm9kZVR5cGUmJihlPWQ/YS5jYWxsKHRoaXMsYyxuKHRoaXMpLnZhbCgpKTphLG51bGw9PWU/ZT0iIjoibnVtYmVyIj09dHlwZW9mIGU/ZSs9IiI6bi5pc0FycmF5KGUpJiYoZT1uLm1hcChlLGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hPyIiOmErIiJ9KSksYj1uLnZhbEhvb2tzW3RoaXMudHlwZV18fG4udmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiYic2V0ImluIGImJnZvaWQgMCE9PWIuc2V0KHRoaXMsZSwidmFsdWUiKXx8KHRoaXMudmFsdWU9ZSkpfSk7aWYoZSlyZXR1cm4gYj1uLnZhbEhvb2tzW2UudHlwZV18fG4udmFsSG9va3NbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiYiZ2V0ImluIGImJnZvaWQgMCE9PShjPWIuZ2V0KGUsInZhbHVlIikpP2M6KGM9ZS52YWx1ZSwic3RyaW5nIj09dHlwZW9mIGM/Yy5yZXBsYWNlKHJiLCIiKTpudWxsPT1jPyIiOmMpfX19KSxuLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPW4uZmluZC5hdHRyKGEsInZhbHVlIik7cmV0dXJuIG51bGwhPWI/YjpuLnRyaW0obi50ZXh0KGEpKS5yZXBsYWNlKHNiLCIgIil9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkPWEub3B0aW9ucyxlPWEuc2VsZWN0ZWRJbmRleCxmPSJzZWxlY3Qtb25lIj09PWEudHlwZXx8MD5lLGc9Zj9udWxsOltdLGg9Zj9lKzE6ZC5sZW5ndGgsaT0wPmU/aDpmP2U6MDtoPmk7aSsrKWlmKGM9ZFtpXSwoYy5zZWxlY3RlZHx8aT09PWUpJiYobC5vcHREaXNhYmxlZD8hYy5kaXNhYmxlZDpudWxsPT09Yy5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikpJiYoIWMucGFyZW50Tm9kZS5kaXNhYmxlZHx8IW4ubm9kZU5hbWUoYy5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7aWYoYj1uKGMpLnZhbCgpLGYpcmV0dXJuIGI7Zy5wdXNoKGIpfXJldHVybiBnfSxzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9YS5vcHRpb25zLGY9bi5tYWtlQXJyYXkoYiksZz1lLmxlbmd0aDt3aGlsZShnLS0paWYoZD1lW2ddLG4uaW5BcnJheShuLnZhbEhvb2tzLm9wdGlvbi5nZXQoZCksZik+LTEpdHJ5e2Quc2VsZWN0ZWQ9Yz0hMH1jYXRjaChoKXtkLnNjcm9sbEhlaWdodH1lbHNlIGQuc2VsZWN0ZWQ9ITE7cmV0dXJuIGN8fChhLnNlbGVjdGVkSW5kZXg9LTEpLGV9fX19KSxuLmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXtuLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5pc0FycmF5KGIpP2EuY2hlY2tlZD1uLmluQXJyYXkobihhKS52YWwoKSxiKT4tMTp2b2lkIDB9fSxsLmNoZWNrT258fChuLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09PWEuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPyJvbiI6YS52YWx1ZX0pfSk7dmFyIHRiLHViLHZiPW4uZXhwci5hdHRySGFuZGxlLHdiPS9eKD86Y2hlY2tlZHxzZWxlY3RlZCkkL2kseGI9bC5nZXRTZXRBdHRyaWJ1dGUseWI9bC5pbnB1dDtuLmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIpe3JldHVybiBZKHRoaXMsbi5hdHRyLGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLnJlbW92ZUF0dHIodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9YS5ub2RlVHlwZTtpZigzIT09ZiYmOCE9PWYmJjIhPT1mKXJldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgYS5nZXRBdHRyaWJ1dGU/bi5wcm9wKGEsYixjKTooMT09PWYmJm4uaXNYTUxEb2MoYSl8fChiPWIudG9Mb3dlckNhc2UoKSxlPW4uYXR0ckhvb2tzW2JdfHwobi5leHByLm1hdGNoLmJvb2wudGVzdChiKT91Yjp0YikpLHZvaWQgMCE9PWM/bnVsbD09PWM/dm9pZCBuLnJlbW92ZUF0dHIoYSxiKTplJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDooYS5zZXRBdHRyaWJ1dGUoYixjKyIiKSxjKTplJiYiZ2V0ImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOihkPW4uZmluZC5hdHRyKGEsYiksbnVsbD09ZD92b2lkIDA6ZCkpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihhLGIpe2lmKCFsLnJhZGlvVmFsdWUmJiJyYWRpbyI9PT1iJiZuLm5vZGVOYW1lKGEsImlucHV0Iikpe3ZhciBjPWEudmFsdWU7cmV0dXJuIGEuc2V0QXR0cmlidXRlKCJ0eXBlIixiKSxjJiYoYS52YWx1ZT1jKSxifX19fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPTAsZj1iJiZiLm1hdGNoKEcpO2lmKGYmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZltlKytdKWQ9bi5wcm9wRml4W2NdfHxjLG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYyk/eWImJnhifHwhd2IudGVzdChjKT9hW2RdPSExOmFbbi5jYW1lbENhc2UoImRlZmF1bHQtIitjKV09YVtkXT0hMTpuLmF0dHIoYSxjLCIiKSxhLnJlbW92ZUF0dHJpYnV0ZSh4Yj9jOmQpfX0pLHViPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPT09ITE/bi5yZW1vdmVBdHRyKGEsYyk6eWImJnhifHwhd2IudGVzdChjKT9hLnNldEF0dHJpYnV0ZSgheGImJm4ucHJvcEZpeFtjXXx8YyxjKTphW24uY2FtZWxDYXNlKCJkZWZhdWx0LSIrYyldPWFbY109ITAsY319LG4uZWFjaChuLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihhLGIpe3ZhciBjPXZiW2JdfHxuLmZpbmQuYXR0cjt5YiYmeGJ8fCF3Yi50ZXN0KGIpP3ZiW2JdPWZ1bmN0aW9uKGEsYixkKXt2YXIgZSxmO3JldHVybiBkfHwoZj12YltiXSx2YltiXT1lLGU9bnVsbCE9YyhhLGIsZCk/Yi50b0xvd2VyQ2FzZSgpOm51bGwsdmJbYl09ZiksZX06dmJbYl09ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjP3ZvaWQgMDphW24uY2FtZWxDYXNlKCJkZWZhdWx0LSIrYildP2IudG9Mb3dlckNhc2UoKTpudWxsfX0pLHliJiZ4Ynx8KG4uYXR0ckhvb2tzLnZhbHVlPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLm5vZGVOYW1lKGEsImlucHV0Iik/dm9pZChhLmRlZmF1bHRWYWx1ZT1iKTp0YiYmdGIuc2V0KGEsYixjKX19KSx4Ynx8KHRiPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEuZ2V0QXR0cmlidXRlTm9kZShjKTtyZXR1cm4gZHx8YS5zZXRBdHRyaWJ1dGVOb2RlKGQ9YS5vd25lckRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZShjKSksZC52YWx1ZT1iKz0iIiwidmFsdWUiPT09Y3x8Yj09PWEuZ2V0QXR0cmlidXRlKGMpP2I6dm9pZCAwfX0sdmIuaWQ9dmIubmFtZT12Yi5jb29yZHM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBjP3ZvaWQgMDooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiYiIiE9PWQudmFsdWU/ZC52YWx1ZTpudWxsfSxuLnZhbEhvb2tzLmJ1dHRvbj17Z2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpO3JldHVybiBjJiZjLnNwZWNpZmllZD9jLnZhbHVlOnZvaWQgMH0sc2V0OnRiLnNldH0sbi5hdHRySG9va3MuY29udGVudGVkaXRhYmxlPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3RiLnNldChhLCIiPT09Yj8hMTpiLGMpfX0sbi5lYWNoKFsid2lkdGgiLCJoZWlnaHQiXSxmdW5jdGlvbihhLGIpe24uYXR0ckhvb2tzW2JdPXtzZXQ6ZnVuY3Rpb24oYSxjKXtyZXR1cm4iIj09PWM/KGEuc2V0QXR0cmlidXRlKGIsImF1dG8iKSxjKTp2b2lkIDB9fX0pKSxsLnN0eWxlfHwobi5hdHRySG9va3Muc3R5bGU9e2dldDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdHlsZS5jc3NUZXh0fHx2b2lkIDB9LHNldDpmdW5jdGlvbihhLGIpe3JldHVybiBhLnN0eWxlLmNzc1RleHQ9YisiIn19KTt2YXIgemI9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkL2ksQWI9L14oPzphfGFyZWEpJC9pO24uZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFkodGhpcyxuLnByb3AsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9bi5wcm9wRml4W2FdfHxhLHRoaXMuZWFjaChmdW5jdGlvbigpe3RyeXt0aGlzW2FdPXZvaWQgMCxkZWxldGUgdGhpc1thXX1jYXRjaChiKXt9fSl9fSksbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLm5vZGVUeXBlO2lmKDMhPT1mJiY4IT09ZiYmMiE9PWYpcmV0dXJuIDE9PT1mJiZuLmlzWE1MRG9jKGEpfHwoYj1uLnByb3BGaXhbYl18fGIsZT1uLnByb3BIb29rc1tiXSksdm9pZCAwIT09Yz9lJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDphW2JdPWM6ZSYmImdldCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDphW2JdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bi5maW5kLmF0dHIoYSwidGFiaW5kZXgiKTtyZXR1cm4gYj9wYXJzZUludChiLDEwKTp6Yi50ZXN0KGEubm9kZU5hbWUpfHxBYi50ZXN0KGEubm9kZU5hbWUpJiZhLmhyZWY/MDotMX19fSxwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn19KSxsLmhyZWZOb3JtYWxpemVkfHxuLmVhY2goWyJocmVmIiwic3JjIl0sZnVuY3Rpb24oYSxiKXtuLnByb3BIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShiLDQpfX19KSxsLm9wdFNlbGVjdGVkfHwobi5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJihiLnNlbGVjdGVkSW5kZXgsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCksbnVsbH0sc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtiJiYoYi5zZWxlY3RlZEluZGV4LGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpfX0pLG4uZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7bi5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pLGwuZW5jdHlwZXx8KG4ucHJvcEZpeC5lbmN0eXBlPSJlbmNvZGluZyIpO3ZhciBCYj0vW1x0XHJcblxmXS9nO2Z1bmN0aW9uIENiKGEpe3JldHVybiBuLmF0dHIoYSwiY2xhc3MiKXx8IiJ9bi5mbi5leHRlbmQoe2FkZENsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGk9MDtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLmFkZENsYXNzKGEuY2FsbCh0aGlzLGIsQ2IodGhpcykpKX0pO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEcpfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPUNiKGMpLGQ9MT09PWMubm9kZVR5cGUmJigiICIrZSsiICIpLnJlcGxhY2UoQmIsIiAiKSl7Zz0wO3doaWxlKGY9YltnKytdKWQuaW5kZXhPZigiICIrZisiICIpPDAmJihkKz1mKyIgIik7aD1uLnRyaW0oZCksZSE9PWgmJm4uYXR0cihjLCJjbGFzcyIsaCl9fXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpPTA7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5yZW1vdmVDbGFzcyhhLmNhbGwodGhpcyxiLENiKHRoaXMpKSl9KTtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5hdHRyKCJjbGFzcyIsIiIpO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEcpfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPUNiKGMpLGQ9MT09PWMubm9kZVR5cGUmJigiICIrZSsiICIpLnJlcGxhY2UoQmIsIiAiKSl7Zz0wO3doaWxlKGY9YltnKytdKXdoaWxlKGQuaW5kZXhPZigiICIrZisiICIpPi0xKWQ9ZC5yZXBsYWNlKCIgIitmKyIgIiwiICIpO2g9bi50cmltKGQpLGUhPT1oJiZuLmF0dHIoYywiY2xhc3MiLGgpfX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz10eXBlb2YgYTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBiJiYic3RyaW5nIj09PWM/Yj90aGlzLmFkZENsYXNzKGEpOnRoaXMucmVtb3ZlQ2xhc3MoYSk6bi5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihjKXtuKHRoaXMpLnRvZ2dsZUNsYXNzKGEuY2FsbCh0aGlzLGMsQ2IodGhpcyksYiksYil9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYixkLGUsZjtpZigic3RyaW5nIj09PWMpe2Q9MCxlPW4odGhpcyksZj1hLm1hdGNoKEcpfHxbXTt3aGlsZShiPWZbZCsrXSllLmhhc0NsYXNzKGIpP2UucmVtb3ZlQ2xhc3MoYik6ZS5hZGRDbGFzcyhiKX1lbHNlIHZvaWQgMCE9PWEmJiJib29sZWFuIiE9PWN8fChiPUNiKHRoaXMpLGImJm4uX2RhdGEodGhpcywiX19jbGFzc05hbWVfXyIsYiksbi5hdHRyKHRoaXMsImNsYXNzIixifHxhPT09ITE/IiI6bi5fZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIiKSl9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPTA7Yj0iICIrYSsiICI7d2hpbGUoYz10aGlzW2QrK10paWYoMT09PWMubm9kZVR5cGUmJigiICIrQ2IoYykrIiAiKS5yZXBsYWNlKEJiLCIgIikuaW5kZXhPZihiKT4tMSlyZXR1cm4hMDtyZXR1cm4hMX19KSxuLmVhY2goImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnUiLnNwbGl0KCIgIiksZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKGIsbnVsbCxhLGMpOnRoaXMudHJpZ2dlcihiKX19KSxuLmZuLmV4dGVuZCh7aG92ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGEpLm1vdXNlbGVhdmUoYnx8YSl9fSk7dmFyIERiPWEubG9jYXRpb24sRWI9bi5ub3coKSxGYj0vXD8vLEdiPS8oLCl8KFxbfHspfCh9fF0pfCIoPzpbXiJcXFxyXG5dfFxcWyJcXFwvYmZucnRdfFxcdVtcZGEtZkEtRl17NH0pKiJccyo6P3x0cnVlfGZhbHNlfG51bGx8LT8oPyEwXGQpXGQrKD86XC5cZCt8KSg/OltlRV1bKy1dP1xkK3wpL2c7bi5wYXJzZUpTT049ZnVuY3Rpb24oYil7aWYoYS5KU09OJiZhLkpTT04ucGFyc2UpcmV0dXJuIGEuSlNPTi5wYXJzZShiKyIiKTt2YXIgYyxkPW51bGwsZT1uLnRyaW0oYisiIik7cmV0dXJuIGUmJiFuLnRyaW0oZS5yZXBsYWNlKEdiLGZ1bmN0aW9uKGEsYixlLGYpe3JldHVybiBjJiZiJiYoZD0wKSwwPT09ZD9hOihjPWV8fGIsZCs9IWYtIWUsIiIpfSkpP0Z1bmN0aW9uKCJyZXR1cm4gIitlKSgpOm4uZXJyb3IoIkludmFsaWQgSlNPTjogIitiKX0sbi5wYXJzZVhNTD1mdW5jdGlvbihiKXt2YXIgYyxkO2lmKCFifHwic3RyaW5nIiE9dHlwZW9mIGIpcmV0dXJuIG51bGw7dHJ5e2EuRE9NUGFyc2VyPyhkPW5ldyBhLkRPTVBhcnNlcixjPWQucGFyc2VGcm9tU3RyaW5nKGIsInRleHQveG1sIikpOihjPW5ldyBhLkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxET00iKSxjLmFzeW5jPSJmYWxzZSIsYy5sb2FkWE1MKGIpKX1jYXRjaChlKXtjPXZvaWQgMH1yZXR1cm4gYyYmYy5kb2N1bWVudEVsZW1lbnQmJiFjLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aHx8bi5lcnJvcigiSW52YWxpZCBYTUw6ICIrYiksY307dmFyIEhiPS8jLiokLyxJYj0vKFs/Jl0pXz1bXiZdKi8sSmI9L14oLio/KTpbIFx0XSooW15cclxuXSopXHI/JC9nbSxLYj0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxMYj0vXig/OkdFVHxIRUFEKSQvLE1iPS9eXC9cLy8sTmI9L14oW1x3ListXSs6KSg/OlwvXC8oPzpbXlwvPyNdKkB8KShbXlwvPyM6XSopKD86OihcZCspfCl8KS8sT2I9e30sUGI9e30sUWI9IiovIi5jb25jYXQoIioiKSxSYj1EYi5ocmVmLFNiPU5iLmV4ZWMoUmIudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIFRiKGEpe3JldHVybiBmdW5jdGlvbihiLGMpeyJzdHJpbmciIT10eXBlb2YgYiYmKGM9YixiPSIqIik7dmFyIGQsZT0wLGY9Yi50b0xvd2VyQ2FzZSgpLm1hdGNoKEcpfHxbXTtpZihuLmlzRnVuY3Rpb24oYykpd2hpbGUoZD1mW2UrK10pIisiPT09ZC5jaGFyQXQoMCk/KGQ9ZC5zbGljZSgxKXx8IioiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24gVWIoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09UGI7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxuLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlWyIqIl0mJmcoIioiKX1mdW5jdGlvbiBWYihhLGIpe3ZhciBjLGQsZT1uLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGQgaW4gYil2b2lkIDAhPT1iW2RdJiYoKGVbZF0/YTpjfHwoYz17fSkpW2RdPWJbZF0pO3JldHVybiBjJiZuLmV4dGVuZCghMCxhLGMpLGF9ZnVuY3Rpb24gV2IoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKCIqIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWUmJihlPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihlKWZvcihnIGluIGgpaWYoaFtnXSYmaFtnXS50ZXN0KGUpKXtpLnVuc2hpZnQoZyk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGcgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tnKyIgIitpWzBdXSl7Zj1nO2JyZWFrfWR8fChkPWcpfWY9Znx8ZH1yZXR1cm4gZj8oZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdKTp2b2lkIDB9ZnVuY3Rpb24gWGIoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZigiKiI9PT1mKWY9aTtlbHNlIGlmKCIqIiE9PWkmJmkhPT1mKXtpZihnPWpbaSsiICIrZl18fGpbIiogIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdCgiICIpLGhbMV09PT1mJiYoZz1qW2krIiAiK2hbMF1dfHxqWyIqICIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhWyJ0aHJvd3MiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmc/bDoiTm8gY29udmVyc2lvbiBmcm9tICIraSsiIHRvICIrZn19fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTpifX1uLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6UmIsdHlwZToiR0VUIixpc0xvY2FsOktiLnRlc3QoU2JbMV0pLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZToiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IixhY2NlcHRzOnsiKiI6UWIsdGV4dDoidGV4dC9wbGFpbiIsaHRtbDoidGV4dC9odG1sIix4bWw6ImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwiLGpzb246ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCJ9LGNvbnRlbnRzOnt4bWw6L1xieG1sXGIvLGh0bWw6L1xiaHRtbC8sanNvbjovXGJqc29uXGIvfSxyZXNwb25zZUZpZWxkczp7eG1sOiJyZXNwb25zZVhNTCIsdGV4dDoicmVzcG9uc2VUZXh0Iixqc29uOiJyZXNwb25zZUpTT04ifSxjb252ZXJ0ZXJzOnsiKiB0ZXh0IjpTdHJpbmcsInRleHQgaHRtbCI6ITAsInRleHQganNvbiI6bi5wYXJzZUpTT04sInRleHQgeG1sIjpuLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9WYihWYihhLG4uYWpheFNldHRpbmdzKSxiKTpWYihuLmFqYXhTZXR0aW5ncyxhKX0sYWpheFByZWZpbHRlcjpUYihPYiksYWpheFRyYW5zcG9ydDpUYihQYiksYWpheDpmdW5jdGlvbihiLGMpeyJvYmplY3QiPT10eXBlb2YgYiYmKGM9YixiPXZvaWQgMCksYz1jfHx7fTt2YXIgZCxlLGYsZyxoLGksaixrLGw9bi5hamF4U2V0dXAoe30sYyksbT1sLmNvbnRleHR8fGwsbz1sLmNvbnRleHQmJihtLm5vZGVUeXBlfHxtLmpxdWVyeSk/bihtKTpuLmV2ZW50LHA9bi5EZWZlcnJlZCgpLHE9bi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5Iikscj1sLnN0YXR1c0NvZGV8fHt9LHM9e30sdD17fSx1PTAsdj0iY2FuY2VsZWQiLHc9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihhKXt2YXIgYjtpZigyPT09dSl7aWYoIWspe2s9e307d2hpbGUoYj1KYi5leGVjKGcpKWtbYlsxXS50b0xvd2VyQ2FzZSgpXT1iWzJdfWI9a1thLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT1iP251bGw6Yn0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIDI9PT11P2c6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWEudG9Mb3dlckNhc2UoKTtyZXR1cm4gdXx8KGE9dFtjXT10W2NdfHxhLHNbYV09YiksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gdXx8KGwubWltZVR5cGU9YSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihhKXt2YXIgYjtpZihhKWlmKDI+dSlmb3IoYiBpbiBhKXJbYl09W3JbYl0sYVtiXV07ZWxzZSB3LmFsd2F5cyhhW3cuc3RhdHVzXSk7cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGEpe3ZhciBiPWF8fHY7cmV0dXJuIGomJmouYWJvcnQoYikseSgwLGIpLHRoaXN9fTtpZihwLnByb21pc2UodykuY29tcGxldGU9cS5hZGQsdy5zdWNjZXNzPXcuZG9uZSx3LmVycm9yPXcuZmFpbCxsLnVybD0oKGJ8fGwudXJsfHxSYikrIiIpLnJlcGxhY2UoSGIsIiIpLnJlcGxhY2UoTWIsU2JbMV0rIi8vIiksbC50eXBlPWMubWV0aG9kfHxjLnR5cGV8fGwubWV0aG9kfHxsLnR5cGUsbC5kYXRhVHlwZXM9bi50cmltKGwuZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5tYXRjaChHKXx8WyIiXSxudWxsPT1sLmNyb3NzRG9tYWluJiYoZD1OYi5leGVjKGwudXJsLnRvTG93ZXJDYXNlKCkpLGwuY3Jvc3NEb21haW49ISghZHx8ZFsxXT09PVNiWzFdJiZkWzJdPT09U2JbMl0mJihkWzNdfHwoImh0dHA6Ij09PWRbMV0/IjgwIjoiNDQzIikpPT09KFNiWzNdfHwoImh0dHA6Ij09PVNiWzFdPyI4MCI6IjQ0MyIpKSkpLGwuZGF0YSYmbC5wcm9jZXNzRGF0YSYmInN0cmluZyIhPXR5cGVvZiBsLmRhdGEmJihsLmRhdGE9bi5wYXJhbShsLmRhdGEsbC50cmFkaXRpb25hbCkpLFViKE9iLGwsYyx3KSwyPT09dSlyZXR1cm4gdztpPW4uZXZlbnQmJmwuZ2xvYmFsLGkmJjA9PT1uLmFjdGl2ZSsrJiZuLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpLGwudHlwZT1sLnR5cGUudG9VcHBlckNhc2UoKSxsLmhhc0NvbnRlbnQ9IUxiLnRlc3QobC50eXBlKSxmPWwudXJsLGwuaGFzQ29udGVudHx8KGwuZGF0YSYmKGY9bC51cmwrPShGYi50ZXN0KGYpPyImIjoiPyIpK2wuZGF0YSxkZWxldGUgbC5kYXRhKSxsLmNhY2hlPT09ITEmJihsLnVybD1JYi50ZXN0KGYpP2YucmVwbGFjZShJYiwiJDFfPSIrRWIrKyk6ZisoRmIudGVzdChmKT8iJiI6Ij8iKSsiXz0iK0ViKyspKSxsLmlmTW9kaWZpZWQmJihuLmxhc3RNb2RpZmllZFtmXSYmdy5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Nb2RpZmllZC1TaW5jZSIsbi5sYXN0TW9kaWZpZWRbZl0pLG4uZXRhZ1tmXSYmdy5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Ob25lLU1hdGNoIixuLmV0YWdbZl0pKSwobC5kYXRhJiZsLmhhc0NvbnRlbnQmJmwuY29udGVudFR5cGUhPT0hMXx8Yy5jb250ZW50VHlwZSkmJncuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIixsLmNvbnRlbnRUeXBlKSx3LnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIsbC5kYXRhVHlwZXNbMF0mJmwuYWNjZXB0c1tsLmRhdGFUeXBlc1swXV0/bC5hY2NlcHRzW2wuZGF0YVR5cGVzWzBdXSsoIioiIT09bC5kYXRhVHlwZXNbMF0/IiwgIitRYisiOyBxPTAuMDEiOiIiKTpsLmFjY2VwdHNbIioiXSk7Zm9yKGUgaW4gbC5oZWFkZXJzKXcuc2V0UmVxdWVzdEhlYWRlcihlLGwuaGVhZGVyc1tlXSk7aWYobC5iZWZvcmVTZW5kJiYobC5iZWZvcmVTZW5kLmNhbGwobSx3LGwpPT09ITF8fDI9PT11KSlyZXR1cm4gdy5hYm9ydCgpO3Y9ImFib3J0Ijtmb3IoZSBpbntzdWNjZXNzOjEsZXJyb3I6MSxjb21wbGV0ZToxfSl3W2VdKGxbZV0pO2lmKGo9VWIoUGIsbCxjLHcpKXtpZih3LnJlYWR5U3RhdGU9MSxpJiZvLnRyaWdnZXIoImFqYXhTZW5kIixbdyxsXSksMj09PXUpcmV0dXJuIHc7bC5hc3luYyYmbC50aW1lb3V0PjAmJihoPWEuc2V0VGltZW91dChmdW5jdGlvbigpe3cuYWJvcnQoInRpbWVvdXQiKX0sbC50aW1lb3V0KSk7dHJ5e3U9MSxqLnNlbmQocyx5KX1jYXRjaCh4KXtpZighKDI+dSkpdGhyb3cgeDt5KC0xLHgpfX1lbHNlIHkoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIHkoYixjLGQsZSl7dmFyIGsscyx0LHYseCx5PWM7MiE9PXUmJih1PTIsaCYmYS5jbGVhclRpbWVvdXQoaCksaj12b2lkIDAsZz1lfHwiIix3LnJlYWR5U3RhdGU9Yj4wPzQ6MCxrPWI+PTIwMCYmMzAwPmJ8fDMwND09PWIsZCYmKHY9V2IobCx3LGQpKSx2PVhiKGwsdix3LGspLGs/KGwuaWZNb2RpZmllZCYmKHg9dy5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLHgmJihuLmxhc3RNb2RpZmllZFtmXT14KSx4PXcuZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWciKSx4JiYobi5ldGFnW2ZdPXgpKSwyMDQ9PT1ifHwiSEVBRCI9PT1sLnR5cGU/eT0ibm9jb250ZW50IjozMDQ9PT1iP3k9Im5vdG1vZGlmaWVkIjooeT12LnN0YXRlLHM9di5kYXRhLHQ9di5lcnJvcixrPSF0KSk6KHQ9eSwhYiYmeXx8KHk9ImVycm9yIiwwPmImJihiPTApKSksdy5zdGF0dXM9Yix3LnN0YXR1c1RleHQ9KGN8fHkpKyIiLGs/cC5yZXNvbHZlV2l0aChtLFtzLHksd10pOnAucmVqZWN0V2l0aChtLFt3LHksdF0pLHcuc3RhdHVzQ29kZShyKSxyPXZvaWQgMCxpJiZvLnRyaWdnZXIoaz8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFt3LGwsaz9zOnRdKSxxLmZpcmVXaXRoKG0sW3cseV0pLGkmJihvLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW3csbF0pLC0tbi5hY3RpdmV8fG4uZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiB3fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5nZXQoYSxiLGMsImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uZ2V0KGEsdm9pZCAwLGIsInNjcmlwdCIpfX0pLG4uZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihhLGIpe25bYl09ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIG4uaXNGdW5jdGlvbihjKSYmKGU9ZXx8ZCxkPWMsYz12b2lkIDApLG4uYWpheChuLmV4dGVuZCh7dXJsOmEsdHlwZTpiLGRhdGFUeXBlOmUsZGF0YTpjLHN1Y2Nlc3M6ZH0sbi5pc1BsYWluT2JqZWN0KGEpJiZhKSl9fSksbi5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gbi5hamF4KHt1cmw6YSx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGNhY2hlOiEwLGFzeW5jOiExLGdsb2JhbDohMSwidGhyb3dzIjohMH0pfSxuLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihhKXtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLndyYXBBbGwoYS5jYWxsKHRoaXMsYikpfSk7aWYodGhpc1swXSl7dmFyIGI9bihhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApO3RoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSksYi5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzO3doaWxlKGEuZmlyc3RDaGlsZCYmMT09PWEuZmlyc3RDaGlsZC5ub2RlVHlwZSlhPWEuZmlyc3RDaGlsZDtyZXR1cm4gYX0pLmFwcGVuZCh0aGlzKX1yZXR1cm4gdGhpc30sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiBuLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPW4odGhpcyksYz1iLmNvbnRlbnRzKCk7Yy5sZW5ndGg/Yy53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7dmFyIGI9bi5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7bih0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsYyk6YSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe24ubm9kZU5hbWUodGhpcywiYm9keSIpfHxuKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KTtmdW5jdGlvbiBZYihhKXtyZXR1cm4gYS5zdHlsZSYmYS5zdHlsZS5kaXNwbGF5fHxuLmNzcyhhLCJkaXNwbGF5Iil9ZnVuY3Rpb24gWmIoYSl7aWYoIW4uY29udGFpbnMoYS5vd25lckRvY3VtZW50fHxkLGEpKXJldHVybiEwO3doaWxlKGEmJjE9PT1hLm5vZGVUeXBlKXtpZigibm9uZSI9PT1ZYihhKXx8ImhpZGRlbiI9PT1hLnR5cGUpcmV0dXJuITA7YT1hLnBhcmVudE5vZGV9cmV0dXJuITF9bi5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGEpe3JldHVybiBsLnJlbGlhYmxlSGlkZGVuT2Zmc2V0cygpP2Eub2Zmc2V0V2lkdGg8PTAmJmEub2Zmc2V0SGVpZ2h0PD0wJiYhYS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aDpaYihhKX0sbi5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihhKXtyZXR1cm4hbi5leHByLmZpbHRlcnMuaGlkZGVuKGEpfTt2YXIgJGI9LyUyMC9nLF9iPS9cW1xdJC8sYWM9L1xyP1xuL2csYmM9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLGNjPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBkYyhhLGIsYyxkKXt2YXIgZTtpZihuLmlzQXJyYXkoYikpbi5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHxfYi50ZXN0KGEpP2QoYSxlKTpkYyhhKyJbIisoIm9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT1lP2I6IiIpKyJdIixlLGMsZCl9KTtlbHNlIGlmKGN8fCJvYmplY3QiIT09bi50eXBlKGIpKWQoYSxiKTtlbHNlIGZvcihlIGluIGIpZGMoYSsiWyIrZSsiXSIsYltlXSxjLGQpfW4ucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXtiPW4uaXNGdW5jdGlvbihiKT9iKCk6bnVsbD09Yj8iIjpiLGRbZC5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChhKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfTtpZih2b2lkIDA9PT1iJiYoYj1uLmFqYXhTZXR0aW5ncyYmbi5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLG4uaXNBcnJheShhKXx8YS5qcXVlcnkmJiFuLmlzUGxhaW5PYmplY3QoYSkpbi5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlkYyhjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKCImIikucmVwbGFjZSgkYiwiKyIpfSxuLmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG4ucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT1uLnByb3AodGhpcywiZWxlbWVudHMiKTtyZXR1cm4gYT9uLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFuKHRoaXMpLmlzKCI6ZGlzYWJsZWQiKSYmY2MudGVzdCh0aGlzLm5vZGVOYW1lKSYmIWJjLnRlc3QoYSkmJih0aGlzLmNoZWNrZWR8fCFaLnRlc3QoYSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9bih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09Yz9udWxsOm4uaXNBcnJheShjKT9uLm1hcChjLGZ1bmN0aW9uKGEpe3JldHVybntuYW1lOmIubmFtZSx2YWx1ZTphLnJlcGxhY2UoYWMsIlxyXG4iKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKGFjLCJcclxuIil9fSkuZ2V0KCl9fSksbi5hamF4U2V0dGluZ3MueGhyPXZvaWQgMCE9PWEuQWN0aXZlWE9iamVjdD9mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTG9jYWw/aWMoKTpkLmRvY3VtZW50TW9kZT44P2hjKCk6L14oZ2V0fHBvc3R8aGVhZHxwdXR8ZGVsZXRlfG9wdGlvbnMpJC9pLnRlc3QodGhpcy50eXBlKSYmaGMoKXx8aWMoKX06aGM7dmFyIGVjPTAsZmM9e30sZ2M9bi5hamF4U2V0dGluZ3MueGhyKCk7YS5hdHRhY2hFdmVudCYmYS5hdHRhY2hFdmVudCgib251bmxvYWQiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIGZjKWZjW2FdKHZvaWQgMCwhMCl9KSxsLmNvcnM9ISFnYyYmIndpdGhDcmVkZW50aWFscyJpbiBnYyxnYz1sLmFqYXg9ISFnYyxnYyYmbi5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGIpe2lmKCFiLmNyb3NzRG9tYWlufHxsLmNvcnMpe3ZhciBjO3JldHVybntzZW5kOmZ1bmN0aW9uKGQsZSl7dmFyIGYsZz1iLnhocigpLGg9KytlYztpZihnLm9wZW4oYi50eXBlLGIudXJsLGIuYXN5bmMsYi51c2VybmFtZSxiLnBhc3N3b3JkKSxiLnhockZpZWxkcylmb3IoZiBpbiBiLnhockZpZWxkcylnW2ZdPWIueGhyRmllbGRzW2ZdO2IubWltZVR5cGUmJmcub3ZlcnJpZGVNaW1lVHlwZSYmZy5vdmVycmlkZU1pbWVUeXBlKGIubWltZVR5cGUpLGIuY3Jvc3NEb21haW58fGRbIlgtUmVxdWVzdGVkLVdpdGgiXXx8KGRbIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKTtmb3IoZiBpbiBkKXZvaWQgMCE9PWRbZl0mJmcuc2V0UmVxdWVzdEhlYWRlcihmLGRbZl0rIiIpO2cuc2VuZChiLmhhc0NvbnRlbnQmJmIuZGF0YXx8bnVsbCksYz1mdW5jdGlvbihhLGQpe3ZhciBmLGksajtpZihjJiYoZHx8ND09PWcucmVhZHlTdGF0ZSkpaWYoZGVsZXRlIGZjW2hdLGM9dm9pZCAwLGcub25yZWFkeXN0YXRlY2hhbmdlPW4ubm9vcCxkKTQhPT1nLnJlYWR5U3RhdGUmJmcuYWJvcnQoKTtlbHNle2o9e30sZj1nLnN0YXR1cywic3RyaW5nIj09dHlwZW9mIGcucmVzcG9uc2VUZXh0JiYoai50ZXh0PWcucmVzcG9uc2VUZXh0KTt0cnl7aT1nLnN0YXR1c1RleHR9Y2F0Y2goayl7aT0iIn1mfHwhYi5pc0xvY2FsfHxiLmNyb3NzRG9tYWluPzEyMjM9PT1mJiYoZj0yMDQpOmY9ai50ZXh0PzIwMDo0MDR9aiYmZShmLGksaixnLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKX0sYi5hc3luYz80PT09Zy5yZWFkeVN0YXRlP2Euc2V0VGltZW91dChjKTpnLm9ucmVhZHlzdGF0ZWNoYW5nZT1mY1toXT1jOmMoKX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKHZvaWQgMCwhMCl9fX19KTtmdW5jdGlvbiBoYygpe3RyeXtyZXR1cm4gbmV3IGEuWE1MSHR0cFJlcXVlc3R9Y2F0Y2goYil7fX1mdW5jdGlvbiBpYygpe3RyeXtyZXR1cm4gbmV3IGEuQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKX1jYXRjaChiKXt9fW4uYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0In0sY29udGVudHM6e3NjcmlwdDovXGIoPzpqYXZhfGVjbWEpc2NyaXB0XGIvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGEpe3JldHVybiBuLmdsb2JhbEV2YWwoYSksYX19fSksbi5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEuY2FjaGUmJihhLmNhY2hlPSExKSxhLmNyb3NzRG9tYWluJiYoYS50eXBlPSJHRVQiLGEuZ2xvYmFsPSExKX0pLG4uYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgYixjPWQuaGVhZHx8bigiaGVhZCIpWzBdfHxkLmRvY3VtZW50RWxlbWVudDtyZXR1cm57c2VuZDpmdW5jdGlvbihlLGYpe2I9ZC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSxiLmFzeW5jPSEwLGEuc2NyaXB0Q2hhcnNldCYmKGIuY2hhcnNldD1hLnNjcmlwdENoYXJzZXQpLGIuc3JjPWEudXJsLGIub25sb2FkPWIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKGEsYyl7KGN8fCFiLnJlYWR5U3RhdGV8fC9sb2FkZWR8Y29tcGxldGUvLnRlc3QoYi5yZWFkeVN0YXRlKSkmJihiLm9ubG9hZD1iLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbCxjfHxmKDIwMCwic3VjY2VzcyIpKX0sYy5pbnNlcnRCZWZvcmUoYixjLmZpcnN0Q2hpbGQpfSxhYm9ydDpmdW5jdGlvbigpe2ImJmIub25sb2FkKHZvaWQgMCwhMCl9fX19KTt2YXIgamM9W10sa2M9Lyg9KVw/KD89JnwkKXxcP1w/LztuLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9amMucG9wKCl8fG4uZXhwYW5kbysiXyIrRWIrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLG4uYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKGtjLnRlc3QoYi51cmwpPyJ1cmwiOiJzdHJpbmciPT10eXBlb2YgYi5kYXRhJiYwPT09KGIuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYma2MudGVzdChiLmRhdGEpJiYiZGF0YSIpO3JldHVybiBofHwianNvbnAiPT09Yi5kYXRhVHlwZXNbMF0/KGU9Yi5qc29ucENhbGxiYWNrPW4uaXNGdW5jdGlvbihiLmpzb25wQ2FsbGJhY2spP2IuanNvbnBDYWxsYmFjaygpOmIuanNvbnBDYWxsYmFjayxoP2JbaF09YltoXS5yZXBsYWNlKGtjLCIkMSIrZSk6Yi5qc29ucCE9PSExJiYoYi51cmwrPShGYi50ZXN0KGIudXJsKT8iJiI6Ij8iKStiLmpzb25wKyI9IitlKSxiLmNvbnZlcnRlcnNbInNjcmlwdCBqc29uIl09ZnVuY3Rpb24oKXtyZXR1cm4gZ3x8bi5lcnJvcihlKyIgd2FzIG5vdCBjYWxsZWQiKSxnWzBdfSxiLmRhdGFUeXBlc1swXT0ianNvbiIsZj1hW2VdLGFbZV09ZnVuY3Rpb24oKXtnPWFyZ3VtZW50c30sZC5hbHdheXMoZnVuY3Rpb24oKXt2b2lkIDA9PT1mP24oYSkucmVtb3ZlUHJvcChlKTphW2VdPWYsYltlXSYmKGIuanNvbnBDYWxsYmFjaz1jLmpzb25wQ2FsbGJhY2ssamMucHVzaChlKSksZyYmbi5pc0Z1bmN0aW9uKGYpJiZmKGdbMF0pLGc9Zj12b2lkIDB9KSwic2NyaXB0Iik6dm9pZCAwfSksbi5wYXJzZUhUTUw9ZnVuY3Rpb24oYSxiLGMpe2lmKCFhfHwic3RyaW5nIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7ImJvb2xlYW4iPT10eXBlb2YgYiYmKGM9YixiPSExKSxiPWJ8fGQ7dmFyIGU9eC5leGVjKGEpLGY9IWMmJltdO3JldHVybiBlP1tiLmNyZWF0ZUVsZW1lbnQoZVsxXSldOihlPWphKFthXSxiLGYpLGYmJmYubGVuZ3RoJiZuKGYpLnJlbW92ZSgpLG4ubWVyZ2UoW10sZS5jaGlsZE5vZGVzKSl9O3ZhciBsYz1uLmZuLmxvYWQ7bi5mbi5sb2FkPWZ1bmN0aW9uKGEsYixjKXtpZigic3RyaW5nIiE9dHlwZW9mIGEmJmxjKXJldHVybiBsYy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGQsZSxmLGc9dGhpcyxoPWEuaW5kZXhPZigiICIpO3JldHVybiBoPi0xJiYoZD1uLnRyaW0oYS5zbGljZShoLGEubGVuZ3RoKSksYT1hLnNsaWNlKDAsaCkpLG4uaXNGdW5jdGlvbihiKT8oYz1iLGI9dm9pZCAwKTpiJiYib2JqZWN0Ij09dHlwZW9mIGImJihlPSJQT1NUIiksZy5sZW5ndGg+MCYmbi5hamF4KHt1cmw6YSx0eXBlOmV8fCJHRVQiLGRhdGFUeXBlOiJodG1sIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2Y9YXJndW1lbnRzLGcuaHRtbChkP24oIjxkaXY+IikuYXBwZW5kKG4ucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuYWx3YXlzKGMmJmZ1bmN0aW9uKGEsYil7Zy5lYWNoKGZ1bmN0aW9uKCl7Yy5hcHBseSh0aGlzLGZ8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pfSksdGhpc30sbi5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksbi5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZ3JlcChuLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH07ZnVuY3Rpb24gbWMoYSl7cmV0dXJuIG4uaXNXaW5kb3coYSk/YTo5PT09YS5ub2RlVHlwZT9hLmRlZmF1bHRWaWV3fHxhLnBhcmVudFdpbmRvdzohMX1uLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrPW4uY3NzKGEsInBvc2l0aW9uIiksbD1uKGEpLG09e307InN0YXRpYyI9PT1rJiYoYS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKSxoPWwub2Zmc2V0KCksZj1uLmNzcyhhLCJ0b3AiKSxpPW4uY3NzKGEsImxlZnQiKSxqPSgiYWJzb2x1dGUiPT09a3x8ImZpeGVkIj09PWspJiZuLmluQXJyYXkoImF1dG8iLFtmLGldKT4tMSxqPyhkPWwucG9zaXRpb24oKSxnPWQudG9wLGU9ZC5sZWZ0KTooZz1wYXJzZUZsb2F0KGYpfHwwLGU9cGFyc2VGbG9hdChpKXx8MCksbi5pc0Z1bmN0aW9uKGIpJiYoYj1iLmNhbGwoYSxjLG4uZXh0ZW5kKHt9LGgpKSksbnVsbCE9Yi50b3AmJihtLnRvcD1iLnRvcC1oLnRvcCtnKSxudWxsIT1iLmxlZnQmJihtLmxlZnQ9Yi5sZWZ0LWgubGVmdCtlKSwidXNpbmciaW4gYj9iLnVzaW5nLmNhbGwoYSxtKTpsLmNzcyhtKX19LG4uZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24oYSl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09YT90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihiKXtuLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGIpfSk7dmFyIGIsYyxkPXt0b3A6MCxsZWZ0OjB9LGU9dGhpc1swXSxmPWUmJmUub3duZXJEb2N1bWVudDtpZihmKXJldHVybiBiPWYuZG9jdW1lbnRFbGVtZW50LG4uY29udGFpbnMoYixlKT8oInVuZGVmaW5lZCIhPXR5cGVvZiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCYmKGQ9ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksYz1tYyhmKSx7dG9wOmQudG9wKyhjLnBhZ2VZT2Zmc2V0fHxiLnNjcm9sbFRvcCktKGIuY2xpZW50VG9wfHwwKSxsZWZ0OmQubGVmdCsoYy5wYWdlWE9mZnNldHx8Yi5zY3JvbGxMZWZ0KS0oYi5jbGllbnRMZWZ0fHwwKX0pOmR9LHBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpc1swXSl7dmFyIGEsYixjPXt0b3A6MCxsZWZ0OjB9LGQ9dGhpc1swXTtyZXR1cm4iZml4ZWQiPT09bi5jc3MoZCwicG9zaXRpb24iKT9iPWQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6KGE9dGhpcy5vZmZzZXRQYXJlbnQoKSxiPXRoaXMub2Zmc2V0KCksbi5ub2RlTmFtZShhWzBdLCJodG1sIil8fChjPWEub2Zmc2V0KCkpLGMudG9wKz1uLmNzcyhhWzBdLCJib3JkZXJUb3BXaWR0aCIsITApLGMubGVmdCs9bi5jc3MoYVswXSwiYm9yZGVyTGVmdFdpZHRoIiwhMCkpLHt0b3A6Yi50b3AtYy50b3Atbi5jc3MoZCwibWFyZ2luVG9wIiwhMCksbGVmdDpiLmxlZnQtYy5sZWZ0LW4uY3NzKGQsIm1hcmdpbkxlZnQiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudDt3aGlsZShhJiYhbi5ub2RlTmFtZShhLCJodG1sIikmJiJzdGF0aWMiPT09bi5jc3MoYSwicG9zaXRpb24iKSlhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfHxRYX0pfX0pLG4uZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPS9ZLy50ZXN0KGIpO24uZm5bYV09ZnVuY3Rpb24oZCl7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhLGQsZSl7dmFyIGY9bWMoYSk7cmV0dXJuIHZvaWQgMD09PWU/Zj9iIGluIGY/ZltiXTpmLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtkXTphW2RdOnZvaWQoZj9mLnNjcm9sbFRvKGM/bihmKS5zY3JvbGxMZWZ0KCk6ZSxjP2U6bihmKS5zY3JvbGxUb3AoKSk6YVtkXT1lKX0sYSxkLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSksbi5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT1VYShsLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8oYz1TYShhLGIpLE9hLnRlc3QoYyk/bihhKS5wb3NpdGlvbigpW2JdKyJweCI6Yyk6dm9pZCAwfSl9KSxuLmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihhLGIpe24uZWFjaCh7CnBhZGRpbmc6ImlubmVyIithLGNvbnRlbnQ6YiwiIjoib3V0ZXIiK2F9LGZ1bmN0aW9uKGMsZCl7bi5mbltkXT1mdW5jdGlvbihkLGUpe3ZhciBmPWFyZ3VtZW50cy5sZW5ndGgmJihjfHwiYm9vbGVhbiIhPXR5cGVvZiBkKSxnPWN8fChkPT09ITB8fGU9PT0hMD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihiLGMsZCl7dmFyIGU7cmV0dXJuIG4uaXNXaW5kb3coYik/Yi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrYV06OT09PWIubm9kZVR5cGU/KGU9Yi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoYi5ib2R5WyJzY3JvbGwiK2FdLGVbInNjcm9sbCIrYV0sYi5ib2R5WyJvZmZzZXQiK2FdLGVbIm9mZnNldCIrYV0sZVsiY2xpZW50IithXSkpOnZvaWQgMD09PWQ/bi5jc3MoYixjLGcpOm4uc3R5bGUoYixjLGQsZyl9LGIsZj9kOnZvaWQgMCxmLG51bGwpfX0pfSksbi5mbi5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLm9uKGEsbnVsbCxiLGMpfSx1bmJpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5vZmYoYSxudWxsLGIpfSxkZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihiLGEsYyxkKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGEsIioqIik6dGhpcy5vZmYoYixhfHwiKioiLGMpfX0pLG4uZm4uc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sbi5mbi5hbmRTZWxmPW4uZm4uYWRkQmFjaywiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4gbn0pO3ZhciBuYz1hLmpRdWVyeSxvYz1hLiQ7cmV0dXJuIG4ubm9Db25mbGljdD1mdW5jdGlvbihiKXtyZXR1cm4gYS4kPT09biYmKGEuJD1vYyksYiYmYS5qUXVlcnk9PT1uJiYoYS5qUXVlcnk9bmMpLG59LGJ8fChhLmpRdWVyeT1hLiQ9biksbn0pOwo="},{"meta":{"name":"gm4-polyfill.js","url":"https://greasemonkey.github.io/gm4-polyfill/gm4-polyfill.js","ts":1587235898720,"mimetype":"text/javascript"},"source":"LyoKVGhpcyBoZWxwZXIgc2NyaXB0IGJyaWRnZXMgY29tcGF0aWJpbGl0eSBiZXR3ZWVuIHRoZSBHcmVhc2Vtb25rZXkgNCBBUElzIGFuZApleGlzdGluZy9sZWdhY3kgQVBJcy4gIFNheSBmb3IgZXhhbXBsZSB5b3VyIHVzZXIgc2NyaXB0IGluY2x1ZGVzCgogICAgLy8gQGdyYW50IEdNX2dldFZhbHVlCgpBbmQgeW91J2QgbGlrZSB0byBiZSBjb21wYXRpYmxlIHdpdGggYm90aCBHcmVhc2Vtb25rZXkgMyBhbmQgR3JlYXNlbW9ua2V5IDQKKGFuZCBmb3IgdGhhdCBtYXR0ZXIgYWxsIHZlcnNpb25zIG9mIFZpb2xlbnRtb25rZXksIFRhbXBlcm1vbmtleSwgYW5kIGFueSBvdGhlcgp1c2VyIHNjcmlwdCBlbmdpbmUpLiAgQWRkOgoKICAgIC8vIEBncmFudCBHTS5nZXRWYWx1ZQogICAgLy8gQHJlcXVpcmUgaHR0cHM6Ly9ncmVhc2Vtb25rZXkuZ2l0aHViLmlvL2dtNC1wb2x5ZmlsbC9nbTQtcG9seWZpbGwuanMKCkFuZCBzd2l0Y2ggdG8gdGhlIG5ldyAoR00tZG90KSBBUElzLCB3aGljaCByZXR1cm4gcHJvbWlzZXMuICBJZiB5b3VyIHNjcmlwdAppcyBydW5uaW5nIGluIGFuIGVuZ2luZSB0aGF0IGRvZXMgbm90IHByb3ZpZGUgdGhlIG5ldyBhc3luY2hyb25vdXMgQVBJcywgdGhpcwpoZWxwZXIgd2lsbCBhZGQgdGhlbSwgYmFzZWQgb24gdGhlIG9sZCBBUElzLgoKSWYgeW91IHVzZSBgYXdhaXRgIGF0IHRoZSB0b3AgbGV2ZWwsIHlvdSdsbCBuZWVkIHRvIHdyYXAgeW91ciBzY3JpcHQgaW4gYW4KYGFzeW5jYCBmdW5jdGlvbiB0byBiZSBjb21wYXRpYmxlIHdpdGggYW55IHVzZXIgc2NyaXB0IGVuZ2luZSBiZXNpZGVzCkdyZWFzZW1vbmtleSA0LgoKICAgIChhc3luYyAoKSA9PiB7CiAgICBsZXQgeCA9IGF3YWl0IEdNLmdldFZhbHVlKCd4Jyk7CiAgICB9KSgpOwoqLwoKaWYgKHR5cGVvZiBHTSA9PSAndW5kZWZpbmVkJykgewogIHRoaXMuR00gPSB7fTsKfQoKCmlmICh0eXBlb2YgR01fYWRkU3R5bGUgPT0gJ3VuZGVmaW5lZCcpIHsKICB0aGlzLkdNX2FkZFN0eWxlID0gKGFDc3MpID0+IHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGxldCBoZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTsKICAgIGlmIChoZWFkKSB7CiAgICAgIGxldCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2NzcycpOwogICAgICBzdHlsZS50ZXh0Q29udGVudCA9IGFDc3M7CiAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpOwogICAgICByZXR1cm4gc3R5bGU7CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9Owp9CgoKaWYgKHR5cGVvZiBHTV9yZWdpc3Rlck1lbnVDb21tYW5kID09ICd1bmRlZmluZWQnKSB7CiAgdGhpcy5HTV9yZWdpc3Rlck1lbnVDb21tYW5kID0gKGNhcHRpb24sIGNvbW1hbmRGdW5jLCBhY2Nlc3NLZXkpID0+IHsKICAgIGlmICghZG9jdW1lbnQuYm9keSkgewogICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2xvYWRpbmcnCiAgICAgICAgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5sb2NhbE5hbWUgPT09ICdodG1sJykgewogICAgICAgIG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMsIG9ic2VydmVyKSA9PiB7CiAgICAgICAgICBpZiAoZG9jdW1lbnQuYm9keSkgewogICAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgICAgICAgICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQoY2FwdGlvbiwgY29tbWFuZEZ1bmMsIGFjY2Vzc0tleSk7CiAgICAgICAgICB9CiAgICAgICAgfSkub2JzZXJ2ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHtjaGlsZExpc3Q6IHRydWV9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdHTV9yZWdpc3Rlck1lbnVDb21tYW5kIGdvdCBubyBib2R5LicpOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KICAgIGxldCBjb250ZXh0TWVudSA9IGRvY3VtZW50LmJvZHkuZ2V0QXR0cmlidXRlKCdjb250ZXh0bWVudScpOwogICAgbGV0IG1lbnUgPSAoY29udGV4dE1lbnUgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtZW51IycgKyBjb250ZXh0TWVudSkgOiBudWxsKTsKICAgIGlmICghbWVudSkgewogICAgICBtZW51ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbWVudScpOwogICAgICBtZW51LnNldEF0dHJpYnV0ZSgnaWQnLCAnZ20tcmVnaXN0ZXJlZC1tZW51Jyk7CiAgICAgIG1lbnUuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2NvbnRleHQnKTsKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtZW51KTsKICAgICAgZG9jdW1lbnQuYm9keS5zZXRBdHRyaWJ1dGUoJ2NvbnRleHRtZW51JywgJ2dtLXJlZ2lzdGVyZWQtbWVudScpOwogICAgfQogICAgbGV0IG1lbnVJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbWVudWl0ZW0nKTsKICAgIG1lbnVJdGVtLnRleHRDb250ZW50ID0gY2FwdGlvbjsKICAgIG1lbnVJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY29tbWFuZEZ1bmMsIHRydWUpOwogICAgbWVudS5hcHBlbmRDaGlsZChtZW51SXRlbSk7CiAgfTsKfQoKCmlmICh0eXBlb2YgR01fZ2V0UmVzb3VyY2VUZXh0ID09ICd1bmRlZmluZWQnKSB7CiAgdGhpcy5HTV9nZXRSZXNvdXJjZVRleHQgPSAoYVJlcykgPT4gewogICAgJ3VzZSBzdHJpY3QnOwogICAgcmV0dXJuIEdNLmdldFJlc291cmNlVXJsKGFSZXMpCiAgICAgIC50aGVuKHVybCA9PiBmZXRjaCh1cmwpKQogICAgICAudGhlbihyZXNwID0+IHJlc3AudGV4dCgpKQogICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICBHTS5sb2coJ1JlcXVlc3QgZmFpbGVkJywgZXJyb3IpOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9KTsKICB9Owp9CgoKT2JqZWN0LmVudHJpZXMoewogICdsb2cnOiBjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpLCAgLy8gUGFsZSBNb29uIGNvbXBhdGliaWxpdHkuICBTZWUgIzEzLgogICdpbmZvJzogR01faW5mbywKfSkuZm9yRWFjaCgoW25ld0tleSwgb2xkXSkgPT4gewogIGlmIChvbGQgJiYgKHR5cGVvZiBHTVtuZXdLZXldID09ICd1bmRlZmluZWQnKSkgewogICAgR01bbmV3S2V5XSA9IG9sZDsKICB9Cn0pOwoKCk9iamVjdC5lbnRyaWVzKHsKICAnR01fYWRkU3R5bGUnOiAnYWRkU3R5bGUnLAogICdHTV9kZWxldGVWYWx1ZSc6ICdkZWxldGVWYWx1ZScsCiAgJ0dNX2dldFJlc291cmNlVVJMJzogJ2dldFJlc291cmNlVXJsJywKICAnR01fZ2V0VmFsdWUnOiAnZ2V0VmFsdWUnLAogICdHTV9saXN0VmFsdWVzJzogJ2xpc3RWYWx1ZXMnLAogICdHTV9ub3RpZmljYXRpb24nOiAnbm90aWZpY2F0aW9uJywKICAnR01fb3BlbkluVGFiJzogJ29wZW5JblRhYicsCiAgJ0dNX3JlZ2lzdGVyTWVudUNvbW1hbmQnOiAncmVnaXN0ZXJNZW51Q29tbWFuZCcsCiAgJ0dNX3NldENsaXBib2FyZCc6ICdzZXRDbGlwYm9hcmQnLAogICdHTV9zZXRWYWx1ZSc6ICdzZXRWYWx1ZScsCiAgJ0dNX3htbGh0dHBSZXF1ZXN0JzogJ3htbEh0dHBSZXF1ZXN0JywKICAnR01fZ2V0UmVzb3VyY2VUZXh0JzogJ2dldFJlc291cmNlVGV4dCcsCn0pLmZvckVhY2goKFtvbGRLZXksIG5ld0tleV0pID0+IHsKICBsZXQgb2xkID0gdGhpc1tvbGRLZXldOwogIGlmIChvbGQgJiYgKHR5cGVvZiBHTVtuZXdLZXldID09ICd1bmRlZmluZWQnKSkgewogICAgR01bbmV3S2V5XSA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgcmVzb2x2ZShvbGQuYXBwbHkodGhpcywgYXJncykpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKICB9Cn0pOwo="}]},{"name":"百度百科 - 将图片改为无水印版本","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["https://baike.baidu.com/pic/*","http://baike.baidu.com/pic/*","https://baike.baidu.com/picture/*","http://baike.baidu.com/picture/*","https://baike.baidu.com/historypic/*","http://baike.baidu.com/historypic/*","https://baike.baidu.com/picview/history/*","http://baike.baidu.com/picview/history/*","https://bkimg.cdn.bcebos.com/pic/*","http://bkimg.cdn.bcebos.com/pic/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-end","orig_noframes":null,"orig_connects":[]}},"storage":{"data":{},"ts":1587235898738},"enabled":true,"position":15,"file_url":"https://greasyfork.org/scripts/387058-%E7%99%BE%E5%BA%A6%E7%99%BE%E7%A7%91-%E5%B0%86%E5%9B%BE%E7%89%87%E6%94%B9%E4%B8%BA%E6%97%A0%E6%B0%B4%E5%8D%B0%E7%89%88%E6%9C%AC/code/%E7%99%BE%E5%BA%A6%E7%99%BE%E7%A7%91%20-%20%E5%B0%86%E5%9B%BE%E7%89%87%E6%94%B9%E4%B8%BA%E6%97%A0%E6%B0%B4%E5%8D%B0%E7%89%88%E6%9C%AC.user.js","uuid":"f78f4c96-3142-4f4f-98fc-f91455168635","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIOeZvuW6pueZvuenkSAtIOWwhuWbvueJh+aUueS4uuaXoOawtOWNsOeJiOacrAovLyBAZGVzY3JpcHRpb24g5pys6ISa5pys5Li6IOeZvuW6pueZvuenkSDml6DmsLTljbDlm77niYfmn6XnnIsg55qE5L+u5pS554mI5pys44CCCi8vIEBuYW1lc3BhY2UgICBSYWluU2xpZGUKLy8gQGF1dGhvciAgICAgIFJhaW5TbGlkZQovLyBAdmVyc2lvbiAgICAgMi4wCi8vIEBpY29uICAgICAgICBodHRwczovL2JhaWtlLmJhaWR1LmNvbS9mYXZpY29uLmljbwovLyBAcnVuLWF0ICAgICAgZG9jdW1lbnQtZW5kCi8vIEBncmFudCAgICAgICBub25lCi8vIEBtYXRjaCBodHRwczovL2JhaWtlLmJhaWR1LmNvbS9waWMvKgovLyBAbWF0Y2ggIGh0dHA6Ly9iYWlrZS5iYWlkdS5jb20vcGljLyoKLy8gQG1hdGNoIGh0dHBzOi8vYmFpa2UuYmFpZHUuY29tL3BpY3R1cmUvKgovLyBAbWF0Y2ggIGh0dHA6Ly9iYWlrZS5iYWlkdS5jb20vcGljdHVyZS8qCi8vIEBtYXRjaCBodHRwczovL2JhaWtlLmJhaWR1LmNvbS9oaXN0b3J5cGljLyoKLy8gQG1hdGNoICBodHRwOi8vYmFpa2UuYmFpZHUuY29tL2hpc3RvcnlwaWMvKgovLyBAbWF0Y2ggaHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vcGljdmlldy9oaXN0b3J5LyoKLy8gQG1hdGNoICBodHRwOi8vYmFpa2UuYmFpZHUuY29tL3BpY3ZpZXcvaGlzdG9yeS8qCi8vIEBtYXRjaCBodHRwczovL2JraW1nLmNkbi5iY2Vib3MuY29tL3BpYy8qCi8vIEBtYXRjaCAgaHR0cDovL2JraW1nLmNkbi5iY2Vib3MuY29tL3BpYy8qCi8vID09L1VzZXJTY3JpcHQ9PQoKLy8gaHR0cHM6Ly9ia2ltZy5jZG4uYmNlYm9zLmNvbS9waWMvMDgyM2RkNTQ1NjRlOTI1OGRiYmUzODkyOTM4MmQxNThjZGJmNGVjNz94LWJjZS1wcm9jZXNzPWltYWdlL3dhdGVybWFyayxpbWFnZV9kMkYwWlhJdlltRnBhMlU1TWc9PSxnXzcseHBfNSx5cF81Ci8vIGh0dHBzOi8vYmtpbWcuY2RuLmJjZWJvcy5jb20vcGljLzA4MjNkZDU0NTY0ZTkyNThkYmJlMzg5MjkzODJkMTU4Y2RiZjRlYzcKLy8gaHR0cHM6Ly9pbWdzcmMuYmFpZHUuY29tL2JhaWtlL3BpYy9pdGVtLzA4MjNkZDU0NTY0ZTkyNThkYmJlMzg5MjkzODJkMTU4Y2RiZjRlYzcuanBnCgoidXNlIHN0cmljdCI7CgooKCkgPT4gewoKY29uc3QgY2hlY2tIb3N0bmFtZSA9IHVybCA9PiB1cmwuaG9zdG5hbWUgPT09ICJia2ltZy5jZG4uYmNlYm9zLmNvbSI7CmNvbnN0ICBoYXNXYXRlcm1hcmsgPSB1cmwgPT4gdXJsLnNlYXJjaC5pbmNsdWRlcygid2F0ZXJtYXJrIik7CmNvbnN0ICAgICAgIHRyaW1VcmwgPSB1cmwgPT4gdXJsLm9yaWdpbi5jb25jYXQodXJsLnBhdGhuYW1lKTsKCmlmIChjaGVja0hvc3RuYW1lKGxvY2F0aW9uKSkgewoJaGFzV2F0ZXJtYXJrKGxvY2F0aW9uKSAmJiBsb2NhdGlvbi5hc3NpZ24odHJpbVVybChsb2NhdGlvbikpOwp9IGVsc2UgewoKCWNvbnN0IHRhcmdldE1hcCA9IG5ldyBNYXAoKTsKCglbCgkJWyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW1nUGljdHVyZSIpLCAic3JjIiBdLAoJCVsgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYS50b29sLWJ1dHRvbi5vcmlnaW4nKSwgImhyZWYiIF0KCV0uZm9yRWFjaCgKCQlwYWlyID0+IHBhaXJbMF0gIT09IG51bGwgJiYgdGFyZ2V0TWFwLnNldCguLi5wYWlyKQoJKTsKCgl0YXJnZXRNYXAuZm9yRWFjaCgKCQkocHJvcCwgZWxlbWVudCkgPT4gewoKCQkJY29uc3QgcmVwbGFjZVVybCA9ICgpID0+IHsKCQkJCWlmICggZWxlbWVudFtwcm9wXSAhPT0gIiIgKSB7CgkJCQkJY29uc3QgdXJsID0gbmV3IFVSTChlbGVtZW50W3Byb3BdKTsKCQkJCQlpZiAoIGNoZWNrSG9zdG5hbWUodXJsKSAmJiBoYXNXYXRlcm1hcmsodXJsKSApIHsKCQkJCQkJZWxlbWVudFtwcm9wXSA9IHRyaW1VcmwodXJsKTsKCQkJCQl9CgkJCQl9CgkJCX07CgoJCQlyZXBsYWNlVXJsKCk7CgoJCQluZXcgTXV0YXRpb25PYnNlcnZlcihyZXBsYWNlVXJsKS5vYnNlcnZlKAoJCQkJZWxlbWVudCwgewoJCQkJCWF0dHJpYnV0ZXM6IHRydWUsCgkJCQkJYXR0cmlidXRlRmlsdGVyOiBbcHJvcF0sCgkJCQl9CgkJCSk7CgoJCX0KCSk7Cgp9Cgp9KSgpOwo="},{"name":"pan.naifei.cc网页版快捷跳转按钮","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["*://pan.baidu.com/s/*","*://pan.baidu.com/share/*","*://yun.baidu.com/s/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null,"orig_connects":[]}},"storage":{"ts":1594489739937,"data":{}},"enabled":true,"position":16,"file_url":"https://greasyfork.org/scripts/406686-pan-naifei-cc%E7%BD%91%E9%A1%B5%E7%89%88%E5%BF%AB%E6%8D%B7%E8%B7%B3%E8%BD%AC%E6%8C%89%E9%92%AE/code/pannaifeicc%E7%BD%91%E9%A1%B5%E7%89%88%E5%BF%AB%E6%8D%B7%E8%B7%B3%E8%BD%AC%E6%8C%89%E9%92%AE.user.js","uuid":"ca4826b4-9af1-4a3e-846d-b87fc627b501","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBwYW4ubmFpZmVpLmNj572R6aG154mI5b+r5o236Lez6L2s5oyJ6ZKuCi8vIEBuYW1lc3BhY2UgICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy96aC1DTi9zY3JpcHRzLzQwNjY4NgovLyBAdmVyc2lvbiAgICAgIDAuMC4xCi8vIEBkZXNjcmlwdGlvbiAg55m+5bqm572R55uY5YiG5Lqr6ZO+5o6l6aG16Z2i5Yqg5Liq5oyJ6ZKu77yM54K55Ye75Y+v6Lez6L2s5YiwIHBhbi5uYWlmZWkuY2Mg572R6aG154mI5Y675LiL6L2977yI5Zyo4oCcbHl5ZGh54oCd4oCc5pyo5pyo4oCd6ISa5pys55qE5Z+656GA5LiK6L+b6KGM5L+u5pS577yJCi8vIEBhdXRob3IgICAgICAgbHl5ZGh5Ci8vIEBtYXRjaCAgICAgICAgKjovL3Bhbi5iYWlkdS5jb20vcy8qCi8vIEBtYXRjaCAgICAgICAgKjovL3Bhbi5iYWlkdS5jb20vc2hhcmUvKgovLyBAbWF0Y2ggICAgICAgICo6Ly95dW4uYmFpZHUuY29tL3MvKgovLyA9PS9Vc2VyU2NyaXB0PT0KCihmdW5jdGlvbigpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHdpbmRvdy5vbmxvYWQ9ZnVuY3Rpb24oKXsKICAgICAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7CiAgICAgICAgdmFyIHVhPW5hdmlnYXRvci51c2VyQWdlbnQ7CiAgICAgICAgaWYodWEuaW5kZXhPZignQW5kcm9pZCcpPjApewogICAgICAgICAgICB2YXIgYnV0dG9uMT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJidXR0b24uc2hhcmUtZnJpZW5kIik7CiAgICAgICAgICAgIGJ1dHRvbjEuaW5uZXJUZXh0PSJORui3s+i9rCIKICAgICAgICAgICAgYnV0dG9uMS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHBkKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgdmFyIGJ1dHRvbj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJkaXYueC1idXR0b24tYm94Iik7CiAgICAgICAgICAgIHZhciBjc3MgPSAiY29sb3I6IHdoaXRlO3dpZHRoOiAxMDBweDtsaW5lLWhlaWdodDogMzVweDt0ZXh0LWFsaWduOiBjZW50ZXI7Ym9yZGVyOiAxcHggc29saWQgIzA5QUFGRjtiYWNrZ3JvdW5kLWNvbG9yOiAjMDlBQUZGO2JvcmRlci1yYWRpdXM6IDRweDtoZWlnaHQ6IDMycHg7cGFkZGluZzo3cHg7Y3Vyc29yOnBvaW50ZXI7dGV4dC1kZWNvcmF0aW9uOm5vbmU7IjsKICAgICAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgICAgIGEudGl0bGU9IuWPr+S7peaYr+eUqG1vdHJpeOS4i+i9veWZqOS4i+i9vSDlhoXlkKthcmlhMiDnhLblkI7kvb/nlKhhcmlhMuaooeW8j+S4i+i9ve+8jOaIluiAheaZrumAmuaooeW8j+mFjeWQiGlkbeetieS4i+i9veWZqOS9v+eUqCI7CiAgICAgICAgICAgIGEuc3R5bGUuY3NzVGV4dCA9IGNzczsKICAgICAgICAgICAgYS5pbm5lckhUTUw9Ik5G572R6aG1IgogICAgICAgICAgICBidXR0b24uYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgICAgIGEuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBwZCgpfSk7CgogICAgICAgIH0KCiAgICAgICAgdmFyIHBkPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKCdiYWlkdS5jb20vcy8nLCduYWlmZWkuY2MvP3NoYXJlPScpOwogICAgICAgICAgICB3aW5kb3cub3Blbih1cmwsICJfYmxhbmsiKTsKICAgICAgICB9CiAgICAgICAgfQp9KSgpOw=="},{"name":"网盘助手","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["*://pan.baidu.com/*","*://yun.baidu.com/*","*://*.weiyun.com/*","*://*.lanzous.com/*","*://*.lanzoux.com/*","*://cloud.189.cn/*","*://*.newday.me/*","*://*.likestyle.cn/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-start","orig_noframes":null,"orig_connects":["newday.me","likestyle.cn"]}},"storage":{"ts":1597170143456,"data":{"$config":"o{\"uid\":\"amkjo5kpflmylr69bm8pcelzd51zmo6c\",\"option\":{\"baidu_page_home\":\"yes\",\"baidu_page_share\":\"yes\",\"baidu_page_verify\":\"yes\",\"baidu_share_status\":\"no\",\"baidu_custom_password\":\"no\",\"baidu_show_origin\":\"yes\",\"baidu_auto_jump\":\"no\",\"weiyun_page_home\":\"yes\",\"weiyun_page_share\":\"yes\",\"weiyun_page_verify\":\"yes\",\"weiyun_share_status\":\"no\",\"weiyun_auto_jump\":\"no\",\"lanzous_page_verify\":\"yes\",\"lanzous_share_status\":\"no\",\"lanzous_auto_jump\":\"no\",\"189_page_home\":\"yes\",\"189_page_share\":\"yes\",\"189_page_verify\":\"yes\",\"189_share_status\":\"no\",\"189_auto_jump\":\"no\"}}","$storage":"o{\"version_date\":\"20200812\",\"version_payload\":{\"version\":\"0.4.2\"},\"version_latest\":\"0.4.2\"}"}},"enabled":false,"position":17,"file_url":"https://greasyfork.org/scripts/378301-%E7%BD%91%E7%9B%98%E5%8A%A9%E6%89%8B/code/%E7%BD%91%E7%9B%98%E5%8A%A9%E6%89%8B.user.js","uuid":"9248e22e-16bf-4a68-ac3f-1320a916fff5","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDnvZHnm5jliqnmiYsKLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vZ28ubmV3ZGF5Lm1lL3MvcGFuLWhvbWUKLy8gQHZlcnNpb24gICAgICAwLjQuMwovLyBAaWNvbiAgICAgICAgIGh0dHA6Ly9jZG4ubmV3ZGF5Lm1lL2FkZG9uL3Bhbi9mYXZpY29uLmljbwovLyBAYXV0aG9yICAgICAgIOWTqeWRtQovLyBAZGVzY3JpcHRpb24gIOWkp+amguaYr+acgOS8mOmbheWlveeUqOeahOe9keebmOWKqeaJi+S6hu+8m+aPkuS7tuS4u+imgeWKn+iDveacie+8mlsxXeeZvuW6pue9keebmOOAgeiFvuiur+W+ruS6keOAgeiTneWlj+S6keOAgeWkqee/vOS6keebmOS4h+iDvemSpeWMmSBbMl3nmb7luqbnvZHnm5jnlJ/miJDlubblsZXnpLrkuIvovb3pk77mjqUgWzNd55m+5bqm572R55uY5YiG5Lqr5pe26Ieq5a6a5LmJ5o+Q5Y+W56CBCi8vIEBtYXRjaCAgICAgICAgKjovL3Bhbi5iYWlkdS5jb20vKgovLyBAbWF0Y2ggICAgICAgICo6Ly95dW4uYmFpZHUuY29tLyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi53ZWl5dW4uY29tLyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi5sYW56b3VzLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgKjovLyoubGFuem91eC5jb20vKgovLyBAbWF0Y2ggICAgICAgICo6Ly9jbG91ZC4xODkuY24vKgovLyBAbWF0Y2ggICAgICAgICo6Ly8qLm5ld2RheS5tZS8qCi8vIEBtYXRjaCAgICAgICAgKjovLyoubGlrZXN0eWxlLmNuLyoKLy8gQGNvbm5lY3QgICAgICBuZXdkYXkubWUKLy8gQGNvbm5lY3QgICAgICBsaWtlc3R5bGUuY24KLy8gQHJlcXVpcmUgICAgICBodHRwczovL2Nkbi5zdGF0aWNmaWxlLm9yZy9qcXVlcnkvMy41LjAvanF1ZXJ5Lm1pbi5qcwovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vY2RuLnN0YXRpY2ZpbGUub3JnL2RvbXB1cmlmeS8yLjAuMTAvcHVyaWZ5Lm1pbi5qcwovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vY2RuLnN0YXRpY2ZpbGUub3JnL3NuYXAuc3ZnLzAuNS4xL3NuYXAuc3ZnLW1pbi5qcwovLyBAcnVuLWF0ICAgICAgIGRvY3VtZW50LXN0YXJ0Ci8vIEBncmFudCAgICAgICAgdW5zYWZlV2luZG93Ci8vIEBncmFudCAgICAgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgIEdNX2RlbGV0ZVZhbHVlCi8vIEBncmFudCAgICAgICAgR01fbGlzdFZhbHVlcwovLyBAZ3JhbnQgICAgICAgIEdNX29wZW5JblRhYgovLyBAZ3JhbnQgICAgICAgIEdNX25vdGlmaWNhdGlvbgovLyBAZ3JhbnQgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0Ci8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uICgpIHsKICAgICd1c2Ugc3RyaWN0JzsKCiAgICB2YXIgbWFuaWZlc3QgPSB7CiAgICAgICAgIm5hbWUiOiAid3B6cyIsCiAgICAgICAgInVybHMiOiB7fSwKICAgICAgICAiYXBpcyI6IHsKICAgICAgICAgICAgInZlcnNpb24iOiAiaHR0cHM6Ly9hcGkubmV3ZGF5Lm1lL3NoYXJlL2Rpc2svdmVyc2lvbiIsCiAgICAgICAgICAgICJvcmlnaW4iOiAiaHR0cHM6Ly9hcGkubmV3ZGF5Lm1lL3NoYXJlL2Rpc2svb3JpZ2luIiwKICAgICAgICAgICAgInF1ZXJ5IjogImh0dHBzOi8vYXBpLm5ld2RheS5tZS9zaGFyZS9kaXNrL3F1ZXJ5IiwKICAgICAgICAgICAgInN0b3JlIjogImh0dHBzOi8vYXBpLm5ld2RheS5tZS9zaGFyZS9kaXNrL3N0b3JlIiwKICAgICAgICAgICAgImxpc3RzIjogImh0dHBzOi8vYXBpLm5ld2RheS5tZS9zaGFyZS9kaXNrL2xpc3RzIiwKICAgICAgICAgICAgImRlbGV0ZSI6ICJodHRwczovL2FwaS5uZXdkYXkubWUvc2hhcmUvZGlzay9kZWxldGUiCiAgICAgICAgfSwKICAgICAgICAibG9nZ2VyX2xldmVsIjogMywKICAgICAgICAib3B0aW9uc19wYWdlIjogImh0dHA6Ly9nby5uZXdkYXkubWUvcy9wYW4tb3B0aW9uIgogICAgfTsKCiAgICB2YXIgY29udGFpbmVyID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICBkZWZpbmVzOiB7fSwKICAgICAgICAgICAgbW9kdWxlczoge30KICAgICAgICB9OwoKICAgICAgICBvYmouZGVmaW5lID0gZnVuY3Rpb24gKG5hbWUsIHJlcXVpcmVzLCBjYWxsYmFjaykgewogICAgICAgICAgICBuYW1lID0gb2JqLnByb2Nlc3NOYW1lKG5hbWUpOwogICAgICAgICAgICBvYmouZGVmaW5lc1tuYW1lXSA9IHsKICAgICAgICAgICAgICAgIHJlcXVpcmVzOiByZXF1aXJlcywKICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjawogICAgICAgICAgICB9OwogICAgICAgIH07CgogICAgICAgIG9iai5yZXF1aXJlID0gZnVuY3Rpb24gKG5hbWUsIGNhY2hlKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FjaGUgPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgICAgIGNhY2hlID0gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbmFtZSA9IG9iai5wcm9jZXNzTmFtZShuYW1lKTsKICAgICAgICAgICAgaWYgKGNhY2hlICYmIG9iai5tb2R1bGVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLm1vZHVsZXNbbmFtZV07CiAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqLmRlZmluZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHsKICAgICAgICAgICAgICAgIHZhciByZXF1aXJlcyA9IG9iai5kZWZpbmVzW25hbWVdLnJlcXVpcmVzOwogICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gb2JqLmRlZmluZXNbbmFtZV0uY2FsbGJhY2s7CgogICAgICAgICAgICAgICAgdmFyIG1vZHVsZSA9IG9iai51c2UocmVxdWlyZXMsIGNhbGxiYWNrKTsKICAgICAgICAgICAgICAgIGNhY2hlICYmIG9iai5yZWdpc3RlcihuYW1lLCBtb2R1bGUpOwogICAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai51c2UgPSBmdW5jdGlvbiAocmVxdWlyZXMsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciBtb2R1bGUgPSB7CiAgICAgICAgICAgICAgICBleHBvcnRzOiB1bmRlZmluZWQKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIHBhcmFtcyA9IG9iai5idWlsZFBhcmFtcyhyZXF1aXJlcywgbW9kdWxlKTsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrLmFwcGx5KHRoaXMsIHBhcmFtcyk7CiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ICE9ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZS5leHBvcnRzOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJlZ2lzdGVyID0gZnVuY3Rpb24gKG5hbWUsIG1vZHVsZSkgewogICAgICAgICAgICBuYW1lID0gb2JqLnByb2Nlc3NOYW1lKG5hbWUpOwogICAgICAgICAgICBvYmoubW9kdWxlc1tuYW1lXSA9IG1vZHVsZTsKICAgICAgICB9OwoKICAgICAgICBvYmouYnVpbGRQYXJhbXMgPSBmdW5jdGlvbiAocmVxdWlyZXMsIG1vZHVsZSkgewogICAgICAgICAgICB2YXIgcGFyYW1zID0gW107CiAgICAgICAgICAgIHJlcXVpcmVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgICAgIHBhcmFtcy5wdXNoKG9iai5yZXF1aXJlKG5hbWUpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHBhcmFtcy5wdXNoKG9iai5yZXF1aXJlKTsKICAgICAgICAgICAgcGFyYW1zLnB1c2gobW9kdWxlLmV4cG9ydHMpOwogICAgICAgICAgICBwYXJhbXMucHVzaChtb2R1bGUpOwogICAgICAgICAgICByZXR1cm4gcGFyYW1zOwogICAgICAgIH07CgogICAgICAgIG9iai5wcm9jZXNzTmFtZSA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgIHJldHVybiBuYW1lLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZGVmaW5lOiBvYmouZGVmaW5lLAogICAgICAgICAgICB1c2U6IG9iai51c2UsCiAgICAgICAgICAgIHJlZ2lzdGVyOiBvYmoucmVnaXN0ZXIsCiAgICAgICAgICAgIG1vZHVsZXM6IG9iai5tb2R1bGVzCiAgICAgICAgfTsKICAgIH0pKCk7CgogICAgY29udGFpbmVyLmRlZmluZSgiZ20iLCBbXSwgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBvYmogPSB7fTsKCiAgICAgICAgb2JqLnJlYWR5ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgR01fZ2V0VmFsdWUgIT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBvYmoucmVhZHkoY2FsbGJhY2spOwogICAgICAgICAgICAgICAgfSwgMTAwKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICAvKiogY29tbW9uICoqLwogICAgY29udGFpbmVyLmRlZmluZSgiZ21EYW8iLCBbXSwgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgIGl0ZW1zOiB7fQogICAgICAgIH07CgogICAgICAgIG9iai5nZXQgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICByZXR1cm4gR01fZ2V0VmFsdWUobmFtZSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldEJhdGNoID0gZnVuY3Rpb24gKG5hbWVzKSB7CiAgICAgICAgICAgIHZhciBpdGVtcyA9IHt9OwogICAgICAgICAgICBuYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgICAgICBpdGVtc1tuYW1lXSA9IG9iai5nZXQobmFtZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gaXRlbXM7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldEFsbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG9iai5nZXRCYXRjaChHTV9saXN0VmFsdWVzKCkpOwogICAgICAgIH07CgogICAgICAgIG9iai5zZXQgPSBmdW5jdGlvbiAobmFtZSwgaXRlbSkgewogICAgICAgICAgICBHTV9zZXRWYWx1ZShuYW1lLCBpdGVtKTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2V0QmF0Y2ggPSBmdW5jdGlvbiAoaXRlbXMpIHsKICAgICAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBpdGVtcykgewogICAgICAgICAgICAgICAgb2JqLnNldChuYW1lLCBpdGVtc1tuYW1lXSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouc2V0QWxsID0gZnVuY3Rpb24gKGl0ZW1zKSB7CiAgICAgICAgICAgIHZhciBuYW1lcyA9IEdNX2xpc3RWYWx1ZXMoKTsKICAgICAgICAgICAgbmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICAgICAgaWYgKCFpdGVtcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgewogICAgICAgICAgICAgICAgICAgIG9iai5yZW1vdmUobmFtZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBvYmouc2V0QmF0Y2goaXRlbXMpOwogICAgICAgIH07CgogICAgICAgIG9iai5yZW1vdmUgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICBHTV9kZWxldGVWYWx1ZShuYW1lKTsKICAgICAgICB9OwoKICAgICAgICBvYmoucmVtb3ZlQmF0Y2ggPSBmdW5jdGlvbiAobmFtZXMpIHsKICAgICAgICAgICAgbmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICAgICAgb2JqLnJlbW92ZShuYW1lKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJlbW92ZUFsbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgb2JqLnJlbW92ZUJhdGNoKEdNX2xpc3RWYWx1ZXMoKSk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoIlNjb3BlRGFvIiwgW10sIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGRhbywgc2NvcGUpIHsKICAgICAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgICAgIGl0ZW1zOiB7fQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgb2JqLmdldCA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLml0ZW1zW25hbWVdOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgb2JqLmdldEJhdGNoID0gZnVuY3Rpb24gKG5hbWVzKSB7CiAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSB7fTsKICAgICAgICAgICAgICAgIG5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAob2JqLml0ZW1zLmhhc093blByb3BlcnR5KG5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zW25hbWVdID0gb2JqLml0ZW1zW25hbWVdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1zOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgb2JqLmdldEFsbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBvYmouaXRlbXM7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBvYmouc2V0ID0gZnVuY3Rpb24gKG5hbWUsIGl0ZW0pIHsKICAgICAgICAgICAgICAgIG9iai5pdGVtc1tuYW1lXSA9IGl0ZW07CgogICAgICAgICAgICAgICAgb2JqLnN5bmMoKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG9iai5zZXRCYXRjaCA9IGZ1bmN0aW9uIChpdGVtcykgewogICAgICAgICAgICAgICAgb2JqLml0ZW1zID0gT2JqZWN0LmFzc2lnbihvYmouaXRlbXMsIGl0ZW1zKTsKCiAgICAgICAgICAgICAgICBvYmouc3luYygpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgb2JqLnNldEFsbCA9IGZ1bmN0aW9uIChpdGVtcykgewogICAgICAgICAgICAgICAgb2JqLml0ZW1zID0gT2JqZWN0LmFzc2lnbih7fSwgaXRlbXMpOwoKICAgICAgICAgICAgICAgIG9iai5zeW5jKCk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBvYmoucmVtb3ZlID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmouaXRlbXNbbmFtZV07CgogICAgICAgICAgICAgICAgb2JqLnN5bmMoKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG9iai5yZW1vdmVCYXRjaCA9IGZ1bmN0aW9uIChuYW1lcykgewogICAgICAgICAgICAgICAgbmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmouaXRlbXNbbmFtZV07CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBvYmouc3luYygpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgb2JqLnJlbW92ZUFsbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIG9iai5pdGVtcyA9IHt9OwoKICAgICAgICAgICAgICAgIG9iai5nZXREYW8oKS5yZW1vdmUob2JqLmdldFNjb3BlKCkpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgb2JqLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBvYmouZ2V0RGFvKCkuZ2V0KG9iai5nZXRTY29wZSgpKTsKICAgICAgICAgICAgICAgIGlmIChpdGVtcyBpbnN0YW5jZW9mIE9iamVjdCkgewogICAgICAgICAgICAgICAgICAgIG9iai5pdGVtcyA9IGl0ZW1zOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgb2JqLnN5bmMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBvYmouZ2V0RGFvKCkuc2V0KG9iai5nZXRTY29wZSgpLCBvYmouaXRlbXMpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgb2JqLmdldERhbyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBkYW87CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBvYmouZ2V0U2NvcGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGU7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICByZXR1cm4gb2JqLmluaXQoKSwgb2JqOwogICAgICAgIH07CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCJjb25maWciLCBbImZhY3RvcnkiXSwgZnVuY3Rpb24gKGZhY3RvcnkpIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5nZXRDb25maWcgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICByZXR1cm4gb2JqLmdldERhbygpLmdldChuYW1lKTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2V0Q29uZmlnID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7CiAgICAgICAgICAgIG9iai5nZXREYW8oKS5zZXQobmFtZSwgdmFsdWUpOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRBbGwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBvYmouZ2V0RGFvKCkuZ2V0QWxsKCk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldERhbyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGZhY3RvcnkuZ2V0Q29uZmlnRGFvKCk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoInN0b3JhZ2UiLCBbImZhY3RvcnkiXSwgZnVuY3Rpb24gKGZhY3RvcnkpIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5nZXRWYWx1ZSA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgIHJldHVybiBvYmouZ2V0RGFvKCkuZ2V0KG5hbWUpOwogICAgICAgIH07CgogICAgICAgIG9iai5zZXRWYWx1ZSA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkgewogICAgICAgICAgICBvYmouZ2V0RGFvKCkuc2V0KG5hbWUsIHZhbHVlKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0QWxsID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLmdldERhbygpLmdldEFsbCgpOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXREYW8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBmYWN0b3J5LmdldFN0b3JhZ2VEYW8oKTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgib3B0aW9uIiwgWyJjb25maWciLCAiY29uc3RhbnQiXSwgZnVuY3Rpb24gKGNvbmZpZywgY29uc3RhbnQpIHsKICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICBuYW1lOiAib3B0aW9uIiwKICAgICAgICAgICAgY29uc3RhbnQ6IGNvbnN0YW50Lm9wdGlvbgogICAgICAgIH07CgogICAgICAgIG9iai5pc09wdGlvbkFjdGl2ZSA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHZhciBuYW1lID0gaXRlbS5uYW1lOwogICAgICAgICAgICB2YXIgb3B0aW9uID0gb2JqLmdldE9wdGlvbigpOwogICAgICAgICAgICByZXR1cm4gb3B0aW9uLmluZGV4T2YobmFtZSkgPj0gMCA/IHRydWUgOiBmYWxzZTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2V0T3B0aW9uQWN0aXZlID0gZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgdmFyIG5hbWUgPSBpdGVtLm5hbWU7CiAgICAgICAgICAgIHZhciBvcHRpb24gPSBvYmouZ2V0T3B0aW9uKCk7CiAgICAgICAgICAgIGlmIChvcHRpb24uaW5kZXhPZihuYW1lKSA8IDApIHsKICAgICAgICAgICAgICAgIG9wdGlvbi5wdXNoKG5hbWUpOwogICAgICAgICAgICAgICAgb2JqLnNldE9wdGlvbihvcHRpb24pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNldE9wdGlvblVuQWN0aXZlID0gZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgdmFyIG5hbWUgPSBpdGVtLm5hbWU7CiAgICAgICAgICAgIHZhciBvcHRpb24gPSBvYmouZ2V0T3B0aW9uKCk7CiAgICAgICAgICAgIHZhciBpbmRleCA9IG9wdGlvbi5pbmRleE9mKG5hbWUpOwogICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkgewogICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbltpbmRleF07CiAgICAgICAgICAgICAgICBvYmouc2V0T3B0aW9uKG9wdGlvbik7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0T3B0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgb3B0aW9uID0gW107CiAgICAgICAgICAgIHZhciBvcHRpb25MaXN0ID0gb2JqLmdldE9wdGlvbkxpc3QoKTsKICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhvYmouY29uc3RhbnQpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIHZhciBuYW1lID0gaXRlbS5uYW1lOwogICAgICAgICAgICAgICAgaWYgKG9wdGlvbkxpc3QuaGFzT3duUHJvcGVydHkobmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uTGlzdFtuYW1lXSAhPSAibm8iKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5wdXNoKG5hbWUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW0udmFsdWUgIT0gIm5vIikgewogICAgICAgICAgICAgICAgICAgIG9wdGlvbi5wdXNoKG5hbWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIG9wdGlvbjsKICAgICAgICB9OwoKICAgICAgICBvYmouc2V0T3B0aW9uID0gZnVuY3Rpb24gKG9wdGlvbikgewogICAgICAgICAgICB2YXIgb3B0aW9uTGlzdCA9IHt9OwogICAgICAgICAgICBPYmplY3QudmFsdWVzKG9iai5jb25zdGFudCkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBpdGVtLm5hbWU7CiAgICAgICAgICAgICAgICBpZiAob3B0aW9uLmluZGV4T2YobmFtZSkgPj0gMCkgewogICAgICAgICAgICAgICAgICAgIG9wdGlvbkxpc3RbbmFtZV0gPSAieWVzIjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9uTGlzdFtuYW1lXSA9ICJubyI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBvYmouc2V0T3B0aW9uTGlzdChvcHRpb25MaXN0KTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0T3B0aW9uTGlzdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIG9wdGlvbkxpc3QgPSBjb25maWcuZ2V0Q29uZmlnKG9iai5uYW1lKTsKICAgICAgICAgICAgcmV0dXJuIG9wdGlvbkxpc3QgPyBvcHRpb25MaXN0IDoge307CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNldE9wdGlvbkxpc3QgPSBmdW5jdGlvbiAob3B0aW9uTGlzdCkgewogICAgICAgICAgICBjb25maWcuc2V0Q29uZmlnKG9iai5uYW1lLCBvcHRpb25MaXN0KTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgibWFuaWZlc3QiLCBbXSwgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgIG1hbmlmZXN0OiBtYW5pZmVzdAogICAgICAgIH07CgogICAgICAgIG9iai5nZXRJdGVtID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgcmV0dXJuIG9iai5tYW5pZmVzdFtuYW1lXTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0TWFuaWZlc3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBvYmoubWFuaWZlc3Q7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBvYmouZ2V0SXRlbSgibmFtZSIpOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRBcHBOYW1lID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLmdldEl0ZW0oImFwcF9uYW1lIik7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFVybCA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgIHZhciB1cmxzID0gb2JqLmdldEl0ZW0oInVybHMiKTsKICAgICAgICAgICAgKHVybHMgaW5zdGFuY2VvZiBPYmplY3QpIHx8ICh1cmxzID0ge30pOwogICAgICAgICAgICByZXR1cm4gdXJsc1tuYW1lXTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0QXBpID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgdmFyIGFwaXMgPSBvYmouZ2V0SXRlbSgiYXBpcyIpOwogICAgICAgICAgICAoYXBpcyBpbnN0YW5jZW9mIE9iamVjdCkgfHwgKGFwaXMgPSB7fSk7CiAgICAgICAgICAgIHJldHVybiBhcGlzW25hbWVdOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRPcHRpb25zUGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKEdNX2luZm8uc2NyaXB0Lm9wdGlvblVybCkgewogICAgICAgICAgICAgICAgcmV0dXJuIEdNX2luZm8uc2NyaXB0Lm9wdGlvblVybDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBvYmouZ2V0SXRlbSgib3B0aW9uc19wYWdlIik7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgiZW52IiwgWyJjb25maWciLCAibWFuaWZlc3QiXSwgZnVuY3Rpb24gKGNvbmZpZywgbWFuaWZlc3QpIHsKICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICBtb2RlczogewogICAgICAgICAgICAgICAgQURET046ICJhZGRvbiIsCiAgICAgICAgICAgICAgICBTQ1JJUFQ6ICJzY3JpcHQiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGJyb3dzZXJzOiB7CiAgICAgICAgICAgICAgICBGSVJFRk9YOiAiZmlyZWZveCIsCiAgICAgICAgICAgICAgICBFREc6ICJlZGciLAogICAgICAgICAgICAgICAgRURHRTogImVkZ2UiLAogICAgICAgICAgICAgICAgQkFJRFU6ICJiYWlkdSIsCiAgICAgICAgICAgICAgICBMSUVCQU86ICJsaWViYW8iLAogICAgICAgICAgICAgICAgVUM6ICJ1YyIsCiAgICAgICAgICAgICAgICBRUTogInFxIiwKICAgICAgICAgICAgICAgIFNPR09VOiAic29nb3UiLAogICAgICAgICAgICAgICAgT1BFUkE6ICJvcGVyYSIsCiAgICAgICAgICAgICAgICBNQVhUSE9OOiAibWF4dGhvbiIsCiAgICAgICAgICAgICAgICBJRTIzNDU6ICIyMzQ1IiwKICAgICAgICAgICAgICAgIFNFMzYwOiAiMzYwIiwKICAgICAgICAgICAgICAgIENIUk9NRTogImNocm9tZSIsCiAgICAgICAgICAgICAgICBTQUZJUkk6ICJzYWZhcmkiLAogICAgICAgICAgICAgICAgT1RIRVI6ICJvdGhlciIKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5nZXROYW1lID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gbWFuaWZlc3QuZ2V0TmFtZSgpOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRNb2RlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoR01faW5mby5tb2RlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gR01faW5mby5tb2RlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIG9iai5tb2Rlcy5TQ1JJUFQ7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0QWlkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoR01faW5mby5zY3JpcHRIYW5kbGVyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gR01faW5mby5zY3JpcHRIYW5kbGVyLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gInVua25vd24iOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFVpZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHVpZCA9IGNvbmZpZy5nZXRDb25maWcoInVpZCIpOwogICAgICAgICAgICBpZiAoIXVpZCkgewogICAgICAgICAgICAgICAgdWlkID0gb2JqLnJhbmRTdHJpbmcoMzIpOwogICAgICAgICAgICAgICAgY29uZmlnLnNldENvbmZpZygidWlkIiwgdWlkKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdWlkOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRCcm93c2VyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIW9iai5fYnJvd3NlcikgewogICAgICAgICAgICAgICAgb2JqLl9icm93c2VyID0gb2JqLm1hdGNoQnJvd3NlclR5cGUobmF2aWdhdG9yLnVzZXJBZ2VudCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG9iai5fYnJvd3NlcjsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0VmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIEdNX2luZm8uc2NyaXB0LnZlcnNpb247CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldEVkaXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBHTV9pbmZvLnZlcnNpb247CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldEluZm8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBtb2RlOiBvYmouZ2V0TW9kZSgpLAogICAgICAgICAgICAgICAgYWlkOiBvYmouZ2V0QWlkKCksCiAgICAgICAgICAgICAgICB1aWQ6IG9iai5nZXRVaWQoKSwKICAgICAgICAgICAgICAgIGJyb3dzZXI6IG9iai5nZXRCcm93c2VyKCksCiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBvYmouZ2V0VmVyc2lvbigpLAogICAgICAgICAgICAgICAgZWRpdGlvbjogb2JqLmdldEVkaXRpb24oKQogICAgICAgICAgICB9OwogICAgICAgIH07CgogICAgICAgIG9iai5tYXRjaEJyb3dzZXJUeXBlID0gZnVuY3Rpb24gKHVzZXJBZ2VudCkgewogICAgICAgICAgICB2YXIgYnJvd3NlciA9IG9iai5icm93c2Vycy5PVEhFUjsKICAgICAgICAgICAgdXNlckFnZW50ID0gdXNlckFnZW50LnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIGlmICh1c2VyQWdlbnQubWF0Y2goL2ZpcmVmb3gvKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBicm93c2VyID0gb2JqLmJyb3dzZXJzLkZJUkVGT1g7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckFnZW50Lm1hdGNoKC9lZGdlLykgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgYnJvd3NlciA9IG9iai5icm93c2Vycy5FREdFOwogICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJBZ2VudC5tYXRjaCgvZWRnLykgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgYnJvd3NlciA9IG9iai5icm93c2Vycy5FREc7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckFnZW50Lm1hdGNoKC9iaWR1YnJvd3Nlci8pICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGJyb3dzZXIgPSBvYmouYnJvd3NlcnMuQkFJRFU7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckFnZW50Lm1hdGNoKC9sYmJyb3dzZXIvKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBicm93c2VyID0gb2JqLmJyb3dzZXJzLkxJRUJBTzsKICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyQWdlbnQubWF0Y2goL3Vicm93c2VyLykgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgYnJvd3NlciA9IG9iai5icm93c2Vycy5VQzsKICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyQWdlbnQubWF0Y2goL3FxYnJvd3NlLykgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgYnJvd3NlciA9IG9iai5icm93c2Vycy5RUTsKICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyQWdlbnQubWF0Y2goL21ldGFzci8pICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGJyb3dzZXIgPSBvYmouYnJvd3NlcnMuU09HT1U7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckFnZW50Lm1hdGNoKC9vcHIvKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBicm93c2VyID0gb2JqLmJyb3dzZXJzLk9QRVJBOwogICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJBZ2VudC5tYXRjaCgvbWF4dGhvbi8pICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGJyb3dzZXIgPSBvYmouYnJvd3NlcnMuTUFYVEhPTjsKICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyQWdlbnQubWF0Y2goLzIzNDVleHBsb3Jlci8pICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGJyb3dzZXIgPSBvYmouYnJvd3NlcnMuSUUyMzQ1OwogICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJBZ2VudC5tYXRjaCgvY2hyb21lLykgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgaWYgKG5hdmlnYXRvci5taW1lVHlwZXMubGVuZ3RoID4gMTApIHsKICAgICAgICAgICAgICAgICAgICBicm93c2VyID0gb2JqLmJyb3dzZXJzLlNFMzYwOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBicm93c2VyID0gb2JqLmJyb3dzZXJzLkNIUk9NRTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyQWdlbnQubWF0Y2goL3NhZmFyaS8pICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGJyb3dzZXIgPSBvYmouYnJvd3NlcnMuU0FGSVJJOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBicm93c2VyOwogICAgICAgIH07CgogICAgICAgIG9iai5yYW5kU3RyaW5nID0gZnVuY3Rpb24gKGxlbmd0aCkgewogICAgICAgICAgICB2YXIgcG9zc2libGUgPSAiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5IjsKICAgICAgICAgICAgdmFyIHRleHQgPSAiIjsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdGV4dCArPSBwb3NzaWJsZS5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcG9zc2libGUubGVuZ3RoKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRleHQ7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoImh0dHAiLCBbXSwgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBvYmogPSB7fTsKCiAgICAgICAgb2JqLmFqYXggPSBmdW5jdGlvbiAob3B0aW9uKSB7CiAgICAgICAgICAgIHZhciBkZXRhaWxzID0gewogICAgICAgICAgICAgICAgbWV0aG9kOiBvcHRpb24udHlwZSwKICAgICAgICAgICAgICAgIHVybDogb3B0aW9uLnVybCwKICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogb3B0aW9uLmRhdGFUeXBlLAogICAgICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuc3RhdHVzIHx8IHBhcnNlSW50KHJlc3VsdC5zdGF0dXMgLyAxMDApID09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnN1Y2Nlc3MgJiYgb3B0aW9uLnN1Y2Nlc3MocmVzdWx0LnJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5lcnJvciAmJiBvcHRpb24uZXJyb3IoIiIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbmVycm9yOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmVycm9yICYmIG9wdGlvbi5lcnJvcihyZXN1bHQuZXJyb3IpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8g5o+Q5Lqk5pWw5o2uCiAgICAgICAgICAgIGlmIChvcHRpb24uZGF0YSBpbnN0YW5jZW9mIE9iamVjdCkgewogICAgICAgICAgICAgICAgaWYgKG9wdGlvbi5kYXRhIGluc3RhbmNlb2YgRm9ybURhdGEpIHsKICAgICAgICAgICAgICAgICAgICBkZXRhaWxzLmRhdGEgPSBvcHRpb24uZGF0YTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gb3B0aW9uLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKGksIG9wdGlvbi5kYXRhW2ldKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZGV0YWlscy5kYXRhID0gZm9ybURhdGE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIOiHquWumuS5ieWktAogICAgICAgICAgICBpZiAob3B0aW9uLmhlYWRlcnMpIHsKICAgICAgICAgICAgICAgIGRldGFpbHMuaGVhZGVycyA9IG9wdGlvbi5oZWFkZXJzOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyDotoXml7YKICAgICAgICAgICAgaWYgKG9wdGlvbi50aW1lb3V0KSB7CiAgICAgICAgICAgICAgICBkZXRhaWxzLnRpbWVvdXQgPSBvcHRpb24udGltZW91dDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoZGV0YWlscyk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoInJvdXRlciIsIFtdLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG9iaiA9IHt9OwoKICAgICAgICBvYmouZ2V0VXJsID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gbG9jYXRpb24uaHJlZjsKICAgICAgICB9OwoKICAgICAgICBvYmouZ29VcmwgPSBmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSB1cmw7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLm9wZW5VcmwgPSBmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHVybCk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLm9wZW5UYWIgPSBmdW5jdGlvbiAodXJsLCBhY3RpdmUpIHsKICAgICAgICAgICAgR01fb3BlbkluVGFiKHVybCwgIWFjdGl2ZSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmp1bXBMaW5rID0gZnVuY3Rpb24gKGp1bXBVcmwsIGp1bXBNb2RlKSB7CiAgICAgICAgICAgIHN3aXRjaCAoanVtcE1vZGUpIHsKICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAvLyBzZWxmCiAgICAgICAgICAgICAgICAgICAgb2JqLmdvVXJsKGp1bXBVcmwpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgIC8vIG5ldwogICAgICAgICAgICAgICAgICAgIG9iai5vcGVuVXJsKGp1bXBVcmwpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgIC8vIG5ldyAmIG5vdCBhY3RpdmUKICAgICAgICAgICAgICAgICAgICBvYmoub3BlblRhYihqdW1wVXJsLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgLy8gbmV3ICYgYWN0aXZlCiAgICAgICAgICAgICAgICAgICAgb2JqLm9wZW5UYWIoanVtcFVybCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0VXJsUGFyYW0gPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICB2YXIgcGFyYW0gPSBvYmoucGFyc2VVcmxQYXJhbShvYmouZ2V0VXJsKCkpOwogICAgICAgICAgICBpZiAobmFtZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtLmhhc093blByb3BlcnR5KG5hbWUpID8gcGFyYW1bbmFtZV0gOiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnBhcnNlVXJsUGFyYW0gPSBmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZigiPyIpKSB7CiAgICAgICAgICAgICAgICB1cmwgPSB1cmwuc3BsaXQoIj8iKVsxXTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgcmVnID0gLyhbXj0mXHNdKylbPVxzXSooW149JlxzXSopL2c7CiAgICAgICAgICAgIHZhciBvYmogPSB7fTsKICAgICAgICAgICAgd2hpbGUgKHJlZy5leGVjKHVybCkpIHsKICAgICAgICAgICAgICAgIG9ialtSZWdFeHAuJDFdID0gUmVnRXhwLiQyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBvYmo7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoImxvZ2dlciIsIFsiZW52IiwgIm1hbmlmZXN0Il0sIGZ1bmN0aW9uIChlbnYsIG1hbmlmZXN0KSB7CiAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgY29uc3RhbnQ6IHsKICAgICAgICAgICAgICAgIERFQlVHOiAwLAogICAgICAgICAgICAgICAgSU5GTzogMSwKICAgICAgICAgICAgICAgIFdBUk46IDIsCiAgICAgICAgICAgICAgICBFUlJPUjogMywKICAgICAgICAgICAgICAgIE5PTkU6IDQKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5kZWJ1ZyA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7CiAgICAgICAgICAgIG9iai5sb2cobWVzc2FnZSwgb2JqLmNvbnN0YW50LkRFQlVHKTsKICAgICAgICB9OwoKICAgICAgICBvYmouaW5mbyA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7CiAgICAgICAgICAgIG9iai5sb2cobWVzc2FnZSwgb2JqLmNvbnN0YW50LklORk8pOwogICAgICAgIH07CgogICAgICAgIG9iai53YXJuID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHsKICAgICAgICAgICAgb2JqLmxvZyhtZXNzYWdlLCBvYmouY29uc3RhbnQuV0FSTik7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHsKICAgICAgICAgICAgb2JqLmxvZyhtZXNzYWdlLCBvYmouY29uc3RhbnQuRVJST1IpOwogICAgICAgIH07CgogICAgICAgIG9iai5sb2cgPSBmdW5jdGlvbiAobWVzc2FnZSwgbGV2ZWwpIHsKICAgICAgICAgICAgaWYgKGxldmVsIDwgbWFuaWZlc3QuZ2V0SXRlbSgibG9nZ2VyX2xldmVsIikpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc29sZS5ncm91cCgiWyIgKyBlbnYuZ2V0TmFtZSgpICsgIl0iICsgZW52LmdldE1vZGUoKSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpOwogICAgICAgICAgICBjb25zb2xlLmdyb3VwRW5kKCk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoIm1ldGEiLCBbImVudiIsICIkIl0sIGZ1bmN0aW9uIChlbnYsICQpIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5leGlzdE1ldGEgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICBuYW1lID0gb2JqLnByb2Nlc3NOYW1lKG5hbWUpOwogICAgICAgICAgICBpZiAoJCgibWV0YVtuYW1lPSciICsgbmFtZSArICInXSIpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouYXBwZW5kTWV0YSA9IGZ1bmN0aW9uIChuYW1lLCBjb250ZW50KSB7CiAgICAgICAgICAgIG5hbWUgPSBvYmoucHJvY2Vzc05hbWUobmFtZSk7CiAgICAgICAgICAgIGNvbnRlbnQgfHwgKGNvbnRlbnQgPSAib24iKTsKICAgICAgICAgICAgJCgnPG1ldGEgbmFtZT0iJyArIG5hbWUgKyAnIiBjb250ZW50PSJvbiI+JykuYXBwZW5kVG8oJCgiaGVhZCIpKTsKICAgICAgICB9OwoKICAgICAgICBvYmoucHJvY2Vzc05hbWUgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICByZXR1cm4gZW52LmdldE5hbWUoKSArICI6OiIgKyBuYW1lOwogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCJ1bnNhZmVXaW5kb3ciLCBbXSwgZnVuY3Rpb24gKCkgewogICAgICAgIGlmICh0eXBlb2YgdW5zYWZlV2luZG93ID09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIHJldHVybiB3aW5kb3c7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4gdW5zYWZlV2luZG93OwogICAgICAgIH0KICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoInN2Z0NyeXB0IiwgWyJTbmFwIl0sIGZ1bmN0aW9uIChTbmFwKSB7CiAgICAgICAgdmFyIG9iaiA9IHt9OwoKICAgICAgICBvYmouZ2V0UmVxRGF0YSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHJlcVRpbWUgPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCk7CiAgICAgICAgICAgIHZhciByZXFQb2ludCA9IG9iai5nZXRTdHJQb2ludCgidGltZXN0YW1wOiIgKyByZXFUaW1lKTsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHJlcV90aW1lOiByZXFUaW1lLAogICAgICAgICAgICAgICAgcmVxX3BvaW50OiByZXFQb2ludAogICAgICAgICAgICB9OwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTdHJQb2ludCA9IGZ1bmN0aW9uIChzdHIpIHsKICAgICAgICAgICAgaWYgKHN0ci5sZW5ndGggPCAyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIjA6MCI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBwYXRoID0gIiI7CiAgICAgICAgICAgIHZhciBjdXJyZW50LCBsYXN0ID0gc3RyWzBdLmNoYXJDb2RlQXQoKTsKICAgICAgICAgICAgdmFyIHN1bSA9IGxhc3Q7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBjdXJyZW50ID0gc3RyW2ldLmNoYXJDb2RlQXQoKTsKICAgICAgICAgICAgICAgIGlmIChpID09IDEpIHsKICAgICAgICAgICAgICAgICAgICBwYXRoID0gcGF0aCArICJNIjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcGF0aCA9IHBhdGggKyAiIEwiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcGF0aCA9IHBhdGggKyBjdXJyZW50ICsgIiAiICsgbGFzdDsKICAgICAgICAgICAgICAgIGxhc3QgPSBjdXJyZW50OwogICAgICAgICAgICAgICAgc3VtID0gc3VtICsgY3VycmVudDsKICAgICAgICAgICAgfQogICAgICAgICAgICBwYXRoID0gcGF0aCArICIgWiI7CiAgICAgICAgICAgIHZhciBpbmRleCA9IHN1bSAlIHN0ci5sZW5ndGg7CiAgICAgICAgICAgIHZhciBkYXRhID0gU25hcC5wYXRoLmdldFBvaW50QXRMZW5ndGgocGF0aCwgc3RyW2luZGV4XS5jaGFyQ29kZUF0KCkpOwogICAgICAgICAgICByZXR1cm4gZGF0YS5tLnggKyAiOiIgKyBkYXRhLm4ueTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgiY2FsZW5kYXIiLCBbXSwgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBvYmogPSB7fTsKCiAgICAgICAgb2JqLmdldFRpbWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiAobmV3IERhdGUoKSkuZ2V0VGltZSgpOwogICAgICAgIH07CgogICAgICAgIG9iai5mb3JtYXRUaW1lID0gZnVuY3Rpb24gKGZvcm1hdCwgdGltZXN0YW1wKSB7CiAgICAgICAgICAgIGZvcm1hdCB8fCAoZm9ybWF0ID0gIlktbS1kIEg6aTpzIik7CiAgICAgICAgICAgIHRpbWVzdGFtcCB8fCAodGltZXN0YW1wID0gb2JqLmdldFRpbWUoKSk7CiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUodGltZXN0YW1wKTsKICAgICAgICAgICAgdmFyIHllYXIgPSAxOTAwICsgZGF0ZS5nZXRZZWFyKCk7CiAgICAgICAgICAgIHZhciBtb250aCA9ICIwIiArIChkYXRlLmdldE1vbnRoKCkgKyAxKTsKICAgICAgICAgICAgdmFyIGRheSA9ICIwIiArIGRhdGUuZ2V0RGF0ZSgpOwogICAgICAgICAgICB2YXIgaG91ciA9ICIwIiArIGRhdGUuZ2V0SG91cnMoKTsKICAgICAgICAgICAgdmFyIG1pbnV0ZSA9ICIwIiArIGRhdGUuZ2V0TWludXRlcygpOwogICAgICAgICAgICB2YXIgc2Vjb25kID0gIjAiICsgZGF0ZS5nZXRTZWNvbmRzKCk7CiAgICAgICAgICAgIHZhciB2YXJzID0gewogICAgICAgICAgICAgICAgIlkiOiB5ZWFyLAogICAgICAgICAgICAgICAgIm0iOiBtb250aC5zdWJzdHJpbmcobW9udGgubGVuZ3RoIC0gMiwgbW9udGgubGVuZ3RoKSwKICAgICAgICAgICAgICAgICJkIjogZGF5LnN1YnN0cmluZyhkYXkubGVuZ3RoIC0gMiwgZGF5Lmxlbmd0aCksCiAgICAgICAgICAgICAgICAiSCI6IGhvdXIuc3Vic3RyaW5nKGhvdXIubGVuZ3RoIC0gMiwgaG91ci5sZW5ndGgpLAogICAgICAgICAgICAgICAgImkiOiBtaW51dGUuc3Vic3RyaW5nKG1pbnV0ZS5sZW5ndGggLSAyLCBtaW51dGUubGVuZ3RoKSwKICAgICAgICAgICAgICAgICJzIjogc2Vjb25kLnN1YnN0cmluZyhzZWNvbmQubGVuZ3RoIC0gMiwgc2Vjb25kLmxlbmd0aCkKICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmV0dXJuIG9iai5yZXBsYWNlVmFycyh2YXJzLCBmb3JtYXQpOwogICAgICAgIH07CgogICAgICAgIG9iai5yZXBsYWNlVmFycyA9IGZ1bmN0aW9uICh2YXJzLCB2YWx1ZSkgewogICAgICAgICAgICBPYmplY3Qua2V5cyh2YXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZShrZXksIHZhcnNba2V5XSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoIm9uZURhdGEiLCBbImVudiIsICJodHRwIl0sIGZ1bmN0aW9uIChlbnYsIGh0dHApIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5yZXF1ZXN0T25lQXBpID0gZnVuY3Rpb24gKHVybCwgZGF0YSwgY2FsbGJhY2spIHsKICAgICAgICAgICAgaHR0cC5hamF4KHsKICAgICAgICAgICAgICAgIHR5cGU6ICJwb3N0IiwKICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgZGF0YVR5cGU6ICJqc29uIiwKICAgICAgICAgICAgICAgIGRhdGE6IE9iamVjdC5hc3NpZ24oZW52LmdldEluZm8oKSwgZGF0YSksCiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygiIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCIkZXh0ZW5kIiwgWyIkIiwgIkRPTVB1cmlmeSIsICJsb2dnZXIiXSwgZnVuY3Rpb24gKCQsIERPTVB1cmlmeSwgbG9nZ2VyKSB7CiAgICAgICAgdmFyIG9iaiA9IHt9OwoKICAgICAgICBvYmouaW5pdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKERPTVB1cmlmeSAmJiBET01QdXJpZnkgaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgICAgICAgICAgdmFyIGRvbVB1cmlmeSA9IERPTVB1cmlmeSh3aW5kb3cpOwogICAgICAgICAgICAgICAgJC5mbi5zYWZlSHRtbCA9IGZ1bmN0aW9uIChodG1sKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5odG1sKGRvbVB1cmlmeS5zYW5pdGl6ZShodG1sKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGVycik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICQuZm4uc2FmZUh0bWwgPSBmdW5jdGlvbiAoaHRtbCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaHRtbChodG1sKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqLmluaXQoKSwgb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgiYXBwUnVubmVyIiwgWyJyb3V0ZXIiLCAibG9nZ2VyIiwgIm1ldGEiLCAiJCJdLCBmdW5jdGlvbiAocm91dGVyLCBsb2dnZXIsIG1ldGEsICQsIHJlcXVpcmUpIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5ydW4gPSBmdW5jdGlvbiAoYXBwTGlzdCkgewogICAgICAgICAgICB2YXIgbWV0YU5hbWUgPSAic3RhdHVzIjsKICAgICAgICAgICAgaWYgKG1ldGEuZXhpc3RNZXRhKG1ldGFOYW1lKSkgewogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oInNldHVwIGFscmVhZHkiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIOa3u+WKoG1ldGEKICAgICAgICAgICAgICAgIG1ldGEuYXBwZW5kTWV0YShtZXRhTmFtZSk7CgogICAgICAgICAgICAgICAgLy8g6L+Q6KGM5bqU55SoCiAgICAgICAgICAgICAgICAkKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBvYmoucnVuQXBwTGlzdChhcHBMaXN0KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJ1bkFwcExpc3QgPSBmdW5jdGlvbiAoYXBwTGlzdCkgewogICAgICAgICAgICB2YXIgdXJsID0gcm91dGVyLmdldFVybCgpOwogICAgICAgICAgICBmb3IgKHZhciBpIGluIGFwcExpc3QpIHsKICAgICAgICAgICAgICAgIHZhciBhcHAgPSBhcHBMaXN0W2ldOwoKICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IG9iai5tYXRjaEFwcCh1cmwsIGFwcCk7CiAgICAgICAgICAgICAgICBpZiAobWF0Y2ggPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAocmVxdWlyZShhcHAubmFtZSkucnVuKCkgPT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLm1hdGNoQXBwID0gZnVuY3Rpb24gKHVybCwgYXBwKSB7CiAgICAgICAgICAgIHZhciBtYXRjaCA9IGZhbHNlOwogICAgICAgICAgICBhcHAubWF0Y2hzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZihpdGVtKSA+IDAgfHwgaXRlbSA9PSAiKiIpIHsKICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gbWF0Y2g7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIC8qKiBjdXN0b20gKiovCiAgICBjb250YWluZXIuZGVmaW5lKCJmYWN0b3J5IiwgWyJnbURhbyIsICJTY29wZURhbyJdLCBmdW5jdGlvbiAoZ21EYW8sIFNjb3BlRGFvKSB7CiAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgZGFvczoge30KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0Q29uZmlnRGFvID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLmdldERhbygiY29uZmlnIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIFNjb3BlRGFvKGdtRGFvLCAiJGNvbmZpZyIpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0U3RvcmFnZURhbyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG9iai5nZXREYW8oInN0b3JhZ2UiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gU2NvcGVEYW8oZ21EYW8sICIkc3RvcmFnZSIpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0RGFvID0gZnVuY3Rpb24gKGtleSwgY3JlYXRlRnVuYykgewogICAgICAgICAgICBpZiAoIW9iai5kYW9zLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgICAgICAgIG9iai5kYW9zW2tleV0gPSBjcmVhdGVGdW5jKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG9iai5kYW9zW2tleV07CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoImNvbnN0YW50IiwgW10sIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzb3VyY2U6IHsKICAgICAgICAgICAgICAgIGJhaWR1OiAiYmFpZHUiLAogICAgICAgICAgICAgICAgd2VpeXVuOiAid2VpeXVuIiwKICAgICAgICAgICAgICAgIGxhbnpvdXM6ICJsYW56b3VzIiwKICAgICAgICAgICAgICAgIHR5MTg5OiAiMTg5IgogICAgICAgICAgICB9LAogICAgICAgICAgICBvcHRpb246IHsKICAgICAgICAgICAgICAgIGJhaWR1X3BhZ2VfaG9tZTogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJiYWlkdV9wYWdlX2hvbWUiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJhaWR1X3BhZ2Vfc2hhcmU6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiYmFpZHVfcGFnZV9zaGFyZSIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYmFpZHVfcGFnZV92ZXJpZnk6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiYmFpZHVfcGFnZV92ZXJpZnkiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJhaWR1X3NoYXJlX3N0YXR1czogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJiYWlkdV9zaGFyZV9zdGF0dXMiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJhaWR1X2N1c3RvbV9wYXNzd29yZDogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJiYWlkdV9jdXN0b21fcGFzc3dvcmQiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJhaWR1X3Nob3dfb3JpZ2luOiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogImJhaWR1X3Nob3dfb3JpZ2luIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogInllcyIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBiYWlkdV9hdXRvX2p1bXA6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiYmFpZHVfYXV0b19qdW1wIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIm5vIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHdlaXl1bl9wYWdlX2hvbWU6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAid2VpeXVuX3BhZ2VfaG9tZSIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgd2VpeXVuX3BhZ2Vfc2hhcmU6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAid2VpeXVuX3BhZ2Vfc2hhcmUiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHdlaXl1bl9wYWdlX3ZlcmlmeTogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJ3ZWl5dW5fcGFnZV92ZXJpZnkiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHdlaXl1bl9zaGFyZV9zdGF0dXM6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAid2VpeXVuX3NoYXJlX3N0YXR1cyIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgd2VpeXVuX2F1dG9fanVtcDogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJ3ZWl5dW5fYXV0b19qdW1wIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIm5vIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGxhbnpvdXNfcGFnZV92ZXJpZnk6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAibGFuem91c19wYWdlX3ZlcmlmeSIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbGFuem91c19zaGFyZV9zdGF0dXM6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAibGFuem91c19zaGFyZV9zdGF0dXMiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGxhbnpvdXNfYXV0b19qdW1wOiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogImxhbnpvdXNfYXV0b19qdW1wIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIm5vIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHR5MTg5X3BhZ2VfaG9tZTogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICIxODlfcGFnZV9ob21lIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogInllcyIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB0eTE4OV9wYWdlX3NoYXJlOiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogIjE4OV9wYWdlX3NoYXJlIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogInllcyIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB0eTE4OV9wYWdlX3ZlcmlmeTogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICIxODlfcGFnZV92ZXJpZnkiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHR5MTg5X3NoYXJlX3N0YXR1czogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICIxODlfc2hhcmVfc3RhdHVzIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogInllcyIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB0eTE4OV9hdXRvX2p1bXA6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiMTg5X2F1dG9fanVtcCIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJubyIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH07CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCJhcGkiLCBbIm1hbmlmZXN0IiwgIm9uZURhdGEiLCAic3ZnQ3J5cHQiXSwgZnVuY3Rpb24gKG1hbmlmZXN0LCBvbmVEYXRhLCBzdmdDcnlwdCkgewogICAgICAgIHZhciBvYmogPSB7fTsKCiAgICAgICAgb2JqLnZlcnNpb25RdWVyeSA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgICAgICBvbmVEYXRhLnJlcXVlc3RPbmVBcGkobWFuaWZlc3QuZ2V0QXBpKCJ2ZXJzaW9uIiksIHt9LCBjYWxsYmFjayk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnF1ZXJ5U2hhcmVPcmlnaW4gPSBmdW5jdGlvbiAoc2hhcmVTb3VyY2UsIHNoYXJlSWQsIHNoYXJlTGluaywgY2FsbGJhY2spIHsKICAgICAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICAgICAgICBzaGFyZV9pZDogc2hhcmVJZCwKICAgICAgICAgICAgICAgIHNoYXJlX3NvdXJjZTogc2hhcmVTb3VyY2UsCiAgICAgICAgICAgICAgICBzaGFyZV9wb2ludDogc3ZnQ3J5cHQuZ2V0U3RyUG9pbnQoc2hhcmVJZCksCiAgICAgICAgICAgICAgICBzaGFyZV9saW5rOiBzaGFyZUxpbmsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgb25lRGF0YS5yZXF1ZXN0T25lQXBpKG1hbmlmZXN0LmdldEFwaSgib3JpZ2luIiksIGRhdGEsIGNhbGxiYWNrKTsKICAgICAgICB9OwoKICAgICAgICBvYmoucXVlcnlTaGFyZVB3ZCA9IGZ1bmN0aW9uIChzaGFyZVNvdXJjZSwgc2hhcmVJZCwgc2hhcmVMaW5rLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICAgICAgIHNoYXJlX2lkOiBzaGFyZUlkLAogICAgICAgICAgICAgICAgc2hhcmVfc291cmNlOiBzaGFyZVNvdXJjZSwKICAgICAgICAgICAgICAgIHNoYXJlX3BvaW50OiBzdmdDcnlwdC5nZXRTdHJQb2ludChzaGFyZUlkKSwKICAgICAgICAgICAgICAgIHNoYXJlX2xpbms6IHNoYXJlTGluawogICAgICAgICAgICB9OwogICAgICAgICAgICBvbmVEYXRhLnJlcXVlc3RPbmVBcGkobWFuaWZlc3QuZ2V0QXBpKCJxdWVyeSIpLCBkYXRhLCBjYWxsYmFjayk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnN0b3JlU2hhcmVQd2QgPSBmdW5jdGlvbiAoc2hhcmVJZCwgc2hhcmVQd2QsIHNoYXJlTGluaywgc2hhcmVTb3VyY2UsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICAgICAgc2hhcmVfaWQ6IHNoYXJlSWQsCiAgICAgICAgICAgICAgICBzaGFyZV9wd2Q6IHNoYXJlUHdkLAogICAgICAgICAgICAgICAgc2hhcmVfc291cmNlOiBzaGFyZVNvdXJjZSwKICAgICAgICAgICAgICAgIHNoYXJlX3BvaW50OiBzdmdDcnlwdC5nZXRTdHJQb2ludChzaGFyZUlkKSwKICAgICAgICAgICAgICAgIHNoYXJlX2xpbms6IHNoYXJlTGluawogICAgICAgICAgICB9OwogICAgICAgICAgICBvbmVEYXRhLnJlcXVlc3RPbmVBcGkobWFuaWZlc3QuZ2V0QXBpKCJzdG9yZSIpLCBkYXRhLCBjYWxsYmFjayk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnF1ZXJ5U2hhcmVMaXN0ID0gZnVuY3Rpb24gKHNoYXJlU291cmNlLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICAgICAgIHNoYXJlX3NvdXJjZTogc2hhcmVTb3VyY2UKICAgICAgICAgICAgfTsKICAgICAgICAgICAgb25lRGF0YS5yZXF1ZXN0T25lQXBpKG1hbmlmZXN0LmdldEFwaSgibGlzdHMiKSwgZGF0YSwgY2FsbGJhY2spOwogICAgICAgIH07CgogICAgICAgIG9iai5kZWxldGVTaGFyZSA9IGZ1bmN0aW9uIChzaGFyZUlkLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICAgICAgIHNoYXJlX2lkOiBzaGFyZUlkLAogICAgICAgICAgICAgICAgc2hhcmVfcG9pbnQ6IHN2Z0NyeXB0LmdldFN0clBvaW50KHNoYXJlSWQpCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIG9uZURhdGEucmVxdWVzdE9uZUFwaShtYW5pZmVzdC5nZXRBcGkoImRlbGV0ZSIpLCBkYXRhLCBjYWxsYmFjayk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoInNoYXJlTG9nIiwgWyJjb25maWciLCAiY2FsZW5kYXIiLCAiY29uc3RhbnQiLCAiYXBpIl0sIGZ1bmN0aW9uIChjb25maWcsIGNhbGVuZGFyLCBjb25zdGFudCwgYXBpKSB7CiAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgbmFtZTogInNoYXJlX2xpc3QiLAogICAgICAgICAgICBtb2RlczogewogICAgICAgICAgICAgICAgTE9DQUw6ICJsb2NhbCIsCiAgICAgICAgICAgICAgICBPTkxJTkU6ICJvbmxpbmUiCiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0U2hhcmVNb2RlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgc2hhcmVNb2RlID0gY29uZmlnLmdldENvbmZpZygic2hhcmVfbW9kZSIpOwogICAgICAgICAgICByZXR1cm4gc2hhcmVNb2RlID09IG9iai5tb2Rlcy5MT0NBTCA/IG9iai5tb2Rlcy5MT0NBTCA6IG9iai5tb2Rlcy5PTkxJTkU7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNldFNoYXJlTW9kZSA9IGZ1bmN0aW9uIChzaGFyZU1vZGUpIHsKICAgICAgICAgICAgY29uZmlnLnNldENvbmZpZygic2hhcmVfbW9kZSIsIHNoYXJlTW9kZSA9PSBvYmoubW9kZXMuTE9DQUwgPyBvYmoubW9kZXMuTE9DQUwgOiBvYmoubW9kZXMuT05MSU5FKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0U2hhcmVMb2dMaXN0ID0gZnVuY3Rpb24gKHNoYXJlU291cmNlLCBjYWxsYmFjaykgewogICAgICAgICAgICBpZiAob2JqLmdldFNoYXJlTW9kZSgpID09IG9iai5tb2Rlcy5MT0NBTCkgewogICAgICAgICAgICAgICAgY2FsbGJhY2sob2JqLmdldExvY2FsU2hhcmVMb2dMaXN0KCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgb2JqLmdldE9ubGluZVNoYXJlTG9nTGlzdChzaGFyZVNvdXJjZSwgY2FsbGJhY2spOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldE9ubGluZVNoYXJlTG9nTGlzdCA9IGZ1bmN0aW9uIChzaGFyZVNvdXJjZSwgY2FsbGJhY2spIHsKICAgICAgICAgICAgYXBpLnF1ZXJ5U2hhcmVMaXN0KHNoYXJlU291cmNlLCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSBpbnN0YW5jZW9mIE9iamVjdCAmJiByZXNwb25zZS5jb2RlID09IDEpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXNwb25zZS5kYXRhLmxpc3QpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soW10pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0TG9jYWxTaGFyZUxvZ0xpc3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBzaGFyZUxpc3QgPSBjb25maWcuZ2V0Q29uZmlnKG9iai5uYW1lKTsKICAgICAgICAgICAgcmV0dXJuIHNoYXJlTGlzdCA/IHNoYXJlTGlzdCA6IHt9OwogICAgICAgIH07CgogICAgICAgIG9iai5hZGRTaGFyZUxvZyA9IGZ1bmN0aW9uIChzaGFyZUlkLCBzaGFyZVB3ZCwgc2hhcmVMaW5rLCBzaGFyZVNvdXJjZSkgewogICAgICAgICAgICBhcGkuc3RvcmVTaGFyZVB3ZChzaGFyZUlkLCBzaGFyZVB3ZCwgc2hhcmVMaW5rLCBzaGFyZVNvdXJjZSk7CgogICAgICAgICAgICB2YXIgc2hhcmVMaXN0ID0gb2JqLmdldExvY2FsU2hhcmVMb2dMaXN0KCk7CiAgICAgICAgICAgIHNoYXJlTGlzdFtzaGFyZUlkXSA9IHsKICAgICAgICAgICAgICAgIHNoYXJlX2lkOiBzaGFyZUlkLAogICAgICAgICAgICAgICAgc2hhcmVfcHdkOiBzaGFyZVB3ZCwKICAgICAgICAgICAgICAgIHNoYXJlX2xpbms6IHNoYXJlTGluaywKICAgICAgICAgICAgICAgIHNoYXJlX3NvdXJjZTogc2hhcmVTb3VyY2UsCiAgICAgICAgICAgICAgICBzaGFyZV90aW1lOiAobmV3IERhdGUoKSkuZ2V0VGltZSgpCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbmZpZy5zZXRDb25maWcob2JqLm5hbWUsIHNoYXJlTGlzdCk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJlbW92ZVNoYXJlTG9nID0gZnVuY3Rpb24gKHNoYXJlSWQsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciBzaGFyZUxpc3QgPSBvYmouZ2V0TG9jYWxTaGFyZUxvZ0xpc3QoKTsKICAgICAgICAgICAgZGVsZXRlIHNoYXJlTGlzdFtzaGFyZUlkXTsKICAgICAgICAgICAgY29uZmlnLnNldENvbmZpZyhvYmoubmFtZSwgc2hhcmVMaXN0KTsKCiAgICAgICAgICAgIGFwaS5kZWxldGVTaGFyZShzaGFyZUlkLCBjYWxsYmFjayk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmJ1aWxkU2hhcmVMaW5rID0gZnVuY3Rpb24gKHNoYXJlSWQsIHNoYXJlU291cmNlLCBzaGFyZUxpbmspIHsKICAgICAgICAgICAgaWYgKHNoYXJlU291cmNlID09IGNvbnN0YW50LnNvdXJjZS5iYWlkdSkgewogICAgICAgICAgICAgICAgc2hhcmVMaW5rID0gImh0dHBzOi8vcGFuLmJhaWR1LmNvbS9zLzEiICsgc2hhcmVJZDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChzaGFyZVNvdXJjZSA9PSBjb25zdGFudC5zb3VyY2UuYmFpZHUpIHsKICAgICAgICAgICAgICAgIHNoYXJlTGluayA9ICJodHRwczovL3NoYXJlLndlaXl1bi5jb20vIiArIHNoYXJlSWQ7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hhcmVTb3VyY2UgPT0gY29uc3RhbnQuc291cmNlLmJhaWR1KSB7CiAgICAgICAgICAgICAgICBzaGFyZUxpbmsgPSAiaHR0cHM6Ly93d3cubGFuem91cy5jb20vIiArIHNoYXJlSWQ7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hhcmVTb3VyY2UgPT0gY29uc3RhbnQuc291cmNlLnR5MTg5KSB7CiAgICAgICAgICAgICAgICBzaGFyZUxpbmsgPSAiaHR0cHM6Ly9jbG91ZC4xODkuY24vdC8iICsgc2hhcmVJZDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gc2hhcmVMaW5rOwogICAgICAgIH07CgogICAgICAgIG9iai5idWlsZFNoYXJlVGltZSA9IGZ1bmN0aW9uIChzaGFyZVRpbWUpIHsKICAgICAgICAgICAgcmV0dXJuIGNhbGVuZGFyLmZvcm1hdFRpbWUoIlktbS1kIEg6aTpzIiwgc2hhcmVUaW1lKTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgicnVudGltZSIsIFsicm91dGVyIiwgIm1hbmlmZXN0IiwgImNhbGVuZGFyIiwgInN0b3JhZ2UiLCAiYXBpIl0sIGZ1bmN0aW9uIChyb3V0ZXIsIG1hbmlmZXN0LCBjYWxlbmRhciwgc3RvcmFnZSwgYXBpKSB7CiAgICAgICAgdmFyIG9iaiA9IHt9OwoKICAgICAgICBvYmoub3Blbk9wdGlvbnNQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByb3V0ZXIub3BlblRhYihtYW5pZmVzdC5nZXRPcHRpb25zUGFnZSgpLCB0cnVlKTsKICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB2ZXJzaW9uRGF0ZSA9IHBhcnNlSW50KHN0b3JhZ2UuZ2V0VmFsdWUoInZlcnNpb25fZGF0ZSIpKTsKICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gY2FsZW5kYXIuZm9ybWF0VGltZSgiWW1kIik7CiAgICAgICAgICAgIGlmICghdmVyc2lvbkRhdGUgfHwgdmVyc2lvbkRhdGUgPCBjdXJyZW50RGF0ZSkgewogICAgICAgICAgICAgICAgYXBpLnZlcnNpb25RdWVyeShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLnNldFZhbHVlKCJ2ZXJzaW9uX2RhdGUiLCBjdXJyZW50RGF0ZSk7CgogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5jb2RlID09IDEgJiYgcmVzcG9uc2UuZGF0YSBpbnN0YW5jZW9mIE9iamVjdCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmVyc2lvblBheWxvYWQgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLnNldFZhbHVlKCJ2ZXJzaW9uX3BheWxvYWQiLCB2ZXJzaW9uUGF5bG9hZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoInZlcnNpb25fbGF0ZXN0IiwgdmVyc2lvblBheWxvYWQudmVyc2lvbik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFJ1bnRpbWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG9iai5pbml0VmVyc2lvbigpOwogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCJjb3JlIiwgWyJydW50aW1lIiwgIiRleHRlbmQiXSwgZnVuY3Rpb24gKHJ1bnRpbWUpIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5yZWFkeSA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgICAgICBydW50aW1lLmluaXRSdW50aW1lKCk7CgogICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpOwogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICAvKiogYXBwICoqLwogICAgY29udGFpbmVyLmRlZmluZSgiYXBwX2JhaWR1IiwgWyJjb25maWciLCAib3B0aW9uIiwgInJvdXRlciIsICJsb2dnZXIiLCAidW5zYWZlV2luZG93IiwgImNvbnN0YW50IiwgInJ1bnRpbWUiLCAiYXBpIiwgInNoYXJlTG9nIiwgIiQiXSwgZnVuY3Rpb24gKGNvbmZpZywgb3B0aW9uLCByb3V0ZXIsIGxvZ2dlciwgdW5zYWZlV2luZG93LCBjb25zdGFudCwgcnVudGltZSwgYXBpLCBzaGFyZUxvZywgJCkgewogICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgIGFwcF9pZDogNzc4NzUwLAogICAgICAgICAgICB0ZW1wX3BhdGg6ICIvb25ldG1wIiwKICAgICAgICAgICAgeXVuX2RhdGE6IG51bGwsCiAgICAgICAgICAgIHZlcmlmeV9wYWdlOiB7CiAgICAgICAgICAgICAgICBzaGFyZV9wd2Q6IG51bGwsCiAgICAgICAgICAgICAgICBzZXRQd2Q6IG51bGwsCiAgICAgICAgICAgICAgICBiYWNrdXBQd2Q6IG51bGwsCiAgICAgICAgICAgICAgICByZXN0b3JlUHdkOiBudWxsLAogICAgICAgICAgICAgICAgc3VibWl0X3B3ZDogbnVsbAogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJ1biA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHVybCA9IHJvdXRlci5nZXRVcmwoKTsKICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKCIuYmFpZHUuY29tL3MvIikgPiAwKSB7CiAgICAgICAgICAgICAgICBvcHRpb24uaXNPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LmJhaWR1X3BhZ2Vfc2hhcmUpICYmIG9iai5pbml0U2hhcmVQYWdlKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigiLmJhaWR1LmNvbS9kaXNrL2hvbWUiKSA+IDApIHsKICAgICAgICAgICAgICAgIG9wdGlvbi5pc09wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQuYmFpZHVfcGFnZV9ob21lKSAmJiBvYmouaW5pdEhvbWVQYWdlKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIGlmICh1cmwuaW5kZXhPZigiLmJhaWR1LmNvbS9kaXNrL3RpbWVsaW5lIikgPiAwKSB7CiAgICAgICAgICAgICAgICBvcHRpb24uaXNPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LmJhaWR1X3BhZ2VfaG9tZSkgJiYgb2JqLmluaXRUaW1lTGluZVBhZ2UoKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9IGVsc2UgaWYgKHVybC5pbmRleE9mKCIuYmFpZHUuY29tL3NoYXJlL2luaXQiKSA+IDApIHsKICAgICAgICAgICAgICAgIG9wdGlvbi5pc09wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQuYmFpZHVfcGFnZV92ZXJpZnkpICYmIG9iai5pbml0VmVyaWZ5UGFnZSgpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFNoYXJlUGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgb2JqLnJlbW92ZVZpZGVvTGltaXQoKTsKCiAgICAgICAgICAgIG9iai5wcmV0dHlTaW5nbGVTaGFyZVBhZ2UoKTsKCiAgICAgICAgICAgIG9iai5pbml0QnV0dG9uU2hhcmUoKTsKCiAgICAgICAgICAgIG9iai5pbml0QnV0dG9uRXZlbnQoKTsKCiAgICAgICAgICAgIGlmIChvcHRpb24uaXNPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LmJhaWR1X3Nob3dfb3JpZ2luKSkgewogICAgICAgICAgICAgICAgb2JqLnNob3dTaGFyZU9yaWdpbigpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmluaXRIb21lUGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgb2JqLnJlZ2lzdGVyQ3VzdG9tU2hhcmVQd2QoKTsKCiAgICAgICAgICAgIG9iai5pbml0QnV0dG9uSG9tZSgpOwoKICAgICAgICAgICAgb2JqLmluaXRCdXR0b25FdmVudCgpOwogICAgICAgIH07CgogICAgICAgIG9iai5pbml0VGltZUxpbmVQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBvYmoucmVnaXN0ZXJDdXN0b21TaGFyZVB3ZCgpOwoKICAgICAgICAgICAgb2JqLmluaXRCdXR0b25UaW1lTGluZSgpOwoKICAgICAgICAgICAgb2JqLmluaXRCdXR0b25FdmVudCgpOwogICAgICAgIH07CgogICAgICAgIG9iai5pbml0VmVyaWZ5UGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgb2JqLnJlZ2lzdGVyU3RvcmVTaGFyZVB3ZCgpOwoKICAgICAgICAgICAgaWYgKG9iai5pbml0VmVyaWZ5UGFnZUVsZW1lbnQoKSkgewogICAgICAgICAgICAgICAgb2JqLmF1dG9QYWRkaW5nU2hhcmVQd2QoKTsKCiAgICAgICAgICAgICAgICBvYmoucmVnaXN0ZXJQd2RTaGFyZVN3aXRjaCgpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmluaXRWZXJpZnlQYWdlRWxlbWVudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHNoYXJlSWQgPSBvYmouZ2V0U2hhcmVJZCgpOwogICAgICAgICAgICB2YXIgJHB3ZCA9ICQoIi5pbnB1dC1hcmVhIGlucHV0Iik7CiAgICAgICAgICAgIGlmIChzaGFyZUlkICYmICRwd2QubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAvLyDorr7nva7mj5Dlj5bnoIEKICAgICAgICAgICAgICAgIG9iai52ZXJpZnlfcGFnZS5zZXRQd2QgPSBmdW5jdGlvbiAocHdkKSB7CiAgICAgICAgICAgICAgICAgICAgJHB3ZC52YWwocHdkKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy8g5aSH5Lu95o+Q5Y+W56CBCiAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2UuYmFja3VwUHdkID0gZnVuY3Rpb24gKHB3ZCkgewogICAgICAgICAgICAgICAgICAgICRwd2QuYXR0cigiZGF0YS1wd2QiLCBwd2QpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvLyDov5jljp/mj5Dlj5bnoIEKICAgICAgICAgICAgICAgIG9iai52ZXJpZnlfcGFnZS5yZXN0b3JlUHdkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICRwd2QudmFsKCRwd2QuYXR0cigiZGF0YS1wd2QiKSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIC8vIOaPkOS6pOaPkOWPlueggQogICAgICAgICAgICAgICAgdmFyICRidXR0b24gPSAkKCIuaW5wdXQtYXJlYSAuZy1idXR0b24iKTsKICAgICAgICAgICAgICAgIGlmICgkYnV0dG9uLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIG9iai52ZXJpZnlfcGFnZS5zdWJtaXRfcHdkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAkYnV0dG9uLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5hdXRvUGFkZGluZ1NoYXJlUHdkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgc2hhcmVJZCA9IG9iai5nZXRTaGFyZUlkKCk7CiAgICAgICAgICAgIHZhciBzaGFyZUxpbmsgPSByb3V0ZXIuZ2V0VXJsKCk7CiAgICAgICAgICAgIGFwaS5xdWVyeVNoYXJlUHdkKGNvbnN0YW50LnNvdXJjZS5iYWlkdSwgc2hhcmVJZCwgc2hhcmVMaW5rLCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5jb2RlID09IDEpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc2hhcmVQd2QgPSByZXNwb25zZS5kYXRhLnNoYXJlX3B3ZDsKICAgICAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2Uuc2hhcmVfcHdkID0gc2hhcmVQd2Q7CiAgICAgICAgICAgICAgICAgICAgb2JqLnZlcmlmeV9wYWdlLnNldFB3ZChzaGFyZVB3ZCk7CiAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dUaXBTdWNjZXNzKCLloavlhYXmj5Dlj5bnoIHmiJDlip8iKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbi5pc09wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQuYmFpZHVfYXV0b19qdW1wKSkgewogICAgICAgICAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2Uuc3VibWl0X3B3ZCAmJiBvYmoudmVyaWZ5X3BhZ2Uuc3VibWl0X3B3ZCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIG9iai5zaG93VGlwRXJyb3IoIuaaguaXoOS6uuWIhuS6q+aPkOWPlueggSIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmoucmVnaXN0ZXJQd2RTaGFyZVN3aXRjaCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8g5re75Yqg5byA5YWzCiAgICAgICAgICAgICQoIi5waWNrcHciKS5hZnRlcignPGRsIGNsYXNzPSJjbGVhcmZpeCI+PGR0PuaPkOWPlueggeWIhuS6q+iuvue9rjxzcGFuIHN0eWxlPSJmbG9hdDpyaWdodCI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBjaGVja2VkIGlkPSJuZC1zaGFyZS1jaGVjayIgc3R5bGU9InZlcnRpY2FsLWFsaWduOiBtaWRkbGU7Ij4gPGEgY2xhc3M9Im5kLW9wZW4tcGFnZS1vcHRpb24iIGhyZWY9ImphdmFzY3JpcHQ6OyIgdGl0bGU9IueCueWHu+afpeeci+abtOWkmuiEmuacrOmFjee9riI+5YWx5Lqr5o+Q5Y+W56CBPC9hPjwvc3Bhbj48L2R0PjwvZGw+Jyk7CiAgICAgICAgICAgIG9iai5pc1B3ZFNoYXJlT3BlbigpIHx8ICQoIiNuZC1zaGFyZS1jaGVjayIpLnJlbW92ZUF0dHIoImNoZWNrZWQiKTsKCiAgICAgICAgICAgIC8vIOW8gOWFsy3kuovku7YKICAgICAgICAgICAgJCgiI25kLXNoYXJlLWNoZWNrIikub24oImNoYW5nZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmlzKCc6Y2hlY2tlZCcpKSB7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnNldE9wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQuYmFpZHVfc2hhcmVfc3RhdHVzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIG9wdGlvbi5zZXRPcHRpb25VbkFjdGl2ZShvcHRpb24uY29uc3RhbnQuYmFpZHVfc2hhcmVfc3RhdHVzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyDmiZPlvIDphY3nva7pobUKICAgICAgICAgICAgJCgiLm5kLW9wZW4tcGFnZS1vcHRpb24iKS5jbGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBydW50aW1lLm9wZW5PcHRpb25zUGFnZSgpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmoucmVnaXN0ZXJTdG9yZVNoYXJlUHdkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBvYmouZ2V0SnF1ZXJ5KCkoZG9jdW1lbnQpLmFqYXhDb21wbGV0ZShmdW5jdGlvbiAoZXZlbnQsIHhociwgb3B0aW9ucykgewogICAgICAgICAgICAgICAgdmFyIHJlcXVlc3RVcmwgPSBvcHRpb25zLnVybDsKICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0VXJsLmluZGV4T2YoIi9zaGFyZS92ZXJpZnkiKSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gb3B0aW9ucy5kYXRhLm1hdGNoKC9wd2Q9KFthLXowLTldKykvaSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRjaCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VyLndhcm4oInB3ZCBzaGFyZSBub3QgbWF0Y2giKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIOaLkue7nSrlj7cKICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnZlcmlmeV9wYWdlLmJhY2t1cFB3ZCkgewogICAgICAgICAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2UuYmFja3VwUHdkKG1hdGNoWzFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChvYmoudmVyaWZ5X3BhZ2UucmVzdG9yZVB3ZCwgNTAwKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IHhoci5yZXNwb25zZUpTT047CiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzcG9uc2UgJiYgcmVzcG9uc2UuZXJybm8gPT0gMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci53YXJuKCJwd2Qgc2hhcmUgZXJyb3IiKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciBzaGFyZVB3ZCA9IG1hdGNoWzFdOwogICAgICAgICAgICAgICAgICAgIGlmIChzaGFyZVB3ZCA9PSBvYmoudmVyaWZ5X3BhZ2Uuc2hhcmVfcHdkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2dnZXIud2FybigicHdkIHNoYXJlIG5vdCBjaGFuZ2UiKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICghb2JqLmlzUHdkU2hhcmVPcGVuKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci53YXJuKCJwd2Qgc2hhcmUgY2xvc2VkIik7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB2YXIgc2hhcmVJZCA9IG9iai5nZXRTaGFyZUlkKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNoYXJlTGluayA9IHJvdXRlci5nZXRVcmwoKTsKICAgICAgICAgICAgICAgICAgICBzaGFyZUxvZy5hZGRTaGFyZUxvZyhzaGFyZUlkLCBzaGFyZVB3ZCwgc2hhcmVMaW5rLCBjb25zdGFudC5zb3VyY2UuYmFpZHUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmoucmVnaXN0ZXJDdXN0b21TaGFyZVB3ZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8g5Yqf6IO95byA5YWzCiAgICAgICAgICAgIGlmICghb3B0aW9uLmlzT3B0aW9uQWN0aXZlKG9wdGlvbi5jb25zdGFudC5iYWlkdV9jdXN0b21fcGFzc3dvcmQpKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG9iai5sb2FkUGx1Z2luKCLnvZHnm5jliIbkuqsiLCAiY29tLmJhaWR1LnBhbiIpOwoKICAgICAgICAgICAgb2JqLm9uTW9kdWxlUmVhZHkoImZ1bmN0aW9uLXdpZGdldC0xOnNoYXJlL3V0aWwvc2hhcmVEaWFsb2cuanMiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAvLyDliIbkuqvkuovku7YKICAgICAgICAgICAgICAgIG9iai5hc3luYygiZnVuY3Rpb24td2lkZ2V0LTE6c2hhcmUvdXRpbC9zaGFyZURpYWxvZy5qcyIsIGZ1bmN0aW9uIChzaGFyZURpYWxvZykgewogICAgICAgICAgICAgICAgICAgIHNoYXJlRGlhbG9nLnByb3RvdHlwZS5vblZpc2liaWxpdHlDaGFuZ2VPcmlnaW4gPSBzaGFyZURpYWxvZy5wcm90b3R5cGUub25WaXNpYmlsaXR5Q2hhbmdlOwogICAgICAgICAgICAgICAgICAgIHNoYXJlRGlhbG9nLnByb3RvdHlwZS5vblZpc2liaWxpdHlDaGFuZ2UgPSBmdW5jdGlvbiAoc3RhdHVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKCIubmQtaW5wdXQtc2hhcmUtcHdkIikubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaGFyZVB3ZCA9IGNvbmZpZy5nZXRDb25maWcoInNoYXJlX3B3ZCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAnPHRyPjx0ZCBjbGFzcz0iZmlyc3QtY2hpbGQiPjxsYWJlbD7mj5Dlj5bnoIE8L2xhYmVsPjwvdGQ+PHRkPjxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0ibmQtaW5wdXQtc2hhcmUtcHdkIiB2YWx1ZT0iJyArIChzaGFyZVB3ZCA/IHNoYXJlUHdkIDogIiIpICsgJyIgcGxhY2Vob2xkZXI9IuS4uuepuuWImemaj+acuuWbm+S9jSIgc3R5bGU9InBhZGRpbmc6IDZweDsgd2lkdGg6IDEwMHB4O2JvcmRlcjogMXB4IHNvbGlkICNlOWU5ZTk7Ij48L3RkPjwvdHI+JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoIiNzaGFyZSAuZGlhbG9nLWJvZHkgdGFibGUiKS5hcHBlbmQoaHRtbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblZpc2liaWxpdHlDaGFuZ2VPcmlnaW4oc3RhdHVzKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgLy8g55Sf5oiQ5o+Q5Y+W56CBCiAgICAgICAgICAgICAgICBvYmouYXN5bmMoImZ1bmN0aW9uLXdpZGdldC0xOnNoYXJlL3V0aWwvc2hhcmVGcmllbmQvY3JlYXRlTGlua1NoYXJlLmpzIiwgZnVuY3Rpb24gKHNoYXJlTGluaykgewogICAgICAgICAgICAgICAgICAgIHNoYXJlTGluay5wcm90b3R5cGUubWFrZVByaXZhdGVQYXNzd29yZE9yaWdpbiA9IHNoYXJlTGluay5wcm90b3R5cGUubWFrZVByaXZhdGVQYXNzd29yZDsKICAgICAgICAgICAgICAgICAgICBzaGFyZUxpbmsucHJvdG90eXBlLm1ha2VQcml2YXRlUGFzc3dvcmQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaGFyZVB3ZCA9IGNvbmZpZy5nZXRDb25maWcoInNoYXJlX3B3ZCIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2hhcmVQd2QgPyBzaGFyZVB3ZCA6IHRoaXMubWFrZVByaXZhdGVQYXNzd29yZE9yaWdpbigpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAvLyDmj5Dlj5bnoIHmm7TmlLnkuovku7YKICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCJjaGFuZ2UiLCAiLm5kLWlucHV0LXNoYXJlLXB3ZCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAmJiAhdmFsdWUubWF0Y2goL15bMC05YS16XXs0fSQvaSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dUaXBFcnJvcigi5o+Q5Y+W56CB5Y+q6IO95piv5Zub5L2N5pWw5a2X5oiW5a2X5q+NIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNvbmZpZy5zZXRDb25maWcoInNoYXJlX3B3ZCIsIHZhbHVlKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmoubG9hZFBsdWdpbiA9IGZ1bmN0aW9uIChuYW1lLCBncm91cCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgdmFyIHBsdWdpbiA9IG9iai5yZXF1aXJlKCJzeXN0ZW0tY29yZTpwbHVnaW5IdWIvZGF0YS9SZWdpc3RyeS5qcyIpLmdldFBsdWdpbkJ5TmFtZUFuZEdyb3VwKG5hbWUsIGdyb3VwKTsKICAgICAgICAgICAgICAgIG9iai5yZXF1aXJlKCJzeXN0ZW0tY29yZTpwbHVnaW5IdWIvaW52b2tlci9sb2FkUGx1Z2luQXNzZXRzLmpzIikocGx1Z2luKTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7IH0KICAgICAgICB9OwoKICAgICAgICBvYmoub25Nb2R1bGVSZWFkeSA9IGZ1bmN0aW9uIChuYW1lLCBjYWxsYmFjaykgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgb2JqLnJlcXVpcmUobmFtZSk7CiAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIG9iai5vbk1vZHVsZVJlYWR5KG5hbWUsIGNhbGxiYWNrKTsKICAgICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmoucmVtb3ZlVmlkZW9MaW1pdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBvYmouZ2V0U3lzdGVtQ29udGV4dCgpLm1lc3NhZ2U7CiAgICAgICAgICAgIGlmIChtZXNzYWdlKSB7CiAgICAgICAgICAgICAgICBtZXNzYWdlLmNhbGxTeXN0ZW0oInNoYXJlLXZpZGVvLWFmdGVyLXRyYW5zZmVyIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBsb2dnZXIud2Fybigid2FpdCByZW1vdmVWaWRlb0xpbWl0Li4uIik7CiAgICAgICAgICAgICAgICBvYmouc2V0VGltZW91dChvYmoucmVtb3ZlVmlkZW9MaW1pdCwgNTAwKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5wcmV0dHlTaW5nbGVTaGFyZVBhZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICghb2JqLmlzU2hhcmVQYWdlTXVsdGkoKSkgewogICAgICAgICAgICAgICAgJCgiI2xheW91dE1haW4iKS5jc3MoewogICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJhdXRvIiwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogIjExODBweCIsCiAgICAgICAgICAgICAgICAgICAgIm1hcmdpbiI6ICI4OHB4IDMwcHgiCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5zaG93U2hhcmVPcmlnaW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGFwaS5xdWVyeVNoYXJlT3JpZ2luKGNvbnN0YW50LnNvdXJjZS5iYWlkdSwgb2JqLmdldFNoYXJlSWQoKSwgcm91dGVyLmdldFVybCgpLCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5jb2RlID09IDEpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEubGlzdCAmJiBkYXRhLmxpc3QubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBodG1sID0gJzxkaXYgc3R5bGU9InBhZGRpbmc6IDEwcHggNXB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2Y2ZjZmNjsgbGluZS1oZWlnaHQ6IDMwcHg7Ij4nOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGRhdGEubGlzdFswXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEubGlzdC5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8cD7liIbkuqvmnaXmupDvvJo8YSB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iJyArIGl0ZW0udXJsICsgJyI+JyArIGl0ZW0udGl0bGUgKyAnPC9hPiBbPGEgY2xhc3M9InNob3ctb3JpZ2luLWRpYWxvZyIgaHJlZj0iamF2YXNjcmlwdDo7IiBzdHlsZT0iY29sb3I6I2ZmMDAwMDsiPiDmn6XnnIvmm7TlpJogPC9hPl08L3A+JzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxwPuWIhuS6q+adpea6kO+8mjxhIHRhcmdldD0iX2JsYW5rIiBocmVmPSInICsgaXRlbS51cmwgKyAnIj4nICsgaXRlbS50aXRsZSArICc8L2E+PC9wPic7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+JzsKICAgICAgICAgICAgICAgICAgICAgICAgJCgiLm1vZHVsZS1zaGFyZS1oZWFkZXIiKS5hZnRlcihodG1sKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCJjbGljayIsICIuc2hvdy1vcmlnaW4tZGlhbG9nIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpdGxlID0gIuWIhuS6q+adpea6kCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9keSA9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOiAyMHB4IDIwcHg7bWluLWhlaWdodDogMTIwcHg7IG1heC1oZWlnaHQ6IDMwMHB4OyBvdmVyZmxvdy15OiBhdXRvOyI+JzsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5ICs9ICc8cD4nICsgKCsraW5kZXgpICsgJ++8mjxhIHRhcmdldD0iX2JsYW5rIiBocmVmPSInICsgaXRlbS51cmwgKyAnIj4nICsgaXRlbS50aXRsZSArICc8L2E+PC9wPic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5ICs9ICc8L2Rpdj4nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZvb3RlciA9IG9iai5yZW5kZXJGb290ZXJBcHBJZCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEaWFsb2codGl0bGUsIGJvZHksIGZvb3Rlcik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2JqLnNob3dUaXBFcnJvcigi5pqC5pyq5p+l6K+i5Yiw5YiG5Lqr55qE5p2l5rqQIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdEJ1dHRvblNoYXJlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoJCgiLngtYnV0dG9uLWJveCIpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAnPGEgY2xhc3M9ImctYnV0dG9uIG5kLWJ1dHRvbi1idWlsZCI+PHNwYW4gY2xhc3M9ImctYnV0dG9uLXJpZ2h0Ij48ZW0gY2xhc3M9Imljb24gaWNvbi1kaXNrIiB0aXRsZT0i5LiL6L29Ij48L2VtPjxzcGFuIGNsYXNzPSJ0ZXh0Ij7nlJ/miJDpk77mjqU8L3NwYW4+PC9zcGFuPjwvYT4nOwogICAgICAgICAgICAgICAgJCgiLngtYnV0dG9uLWJveCIpLmFwcGVuZChodG1sKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCJ3YWl0IGluaXRCdXR0b25TaGFyZS4uLiIpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dChvYmouaW5pdEJ1dHRvblNoYXJlLCA1MDApOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmluaXRCdXR0b25Ib21lID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgbGlzdFRvb2xzID0gb2JqLmdldFN5c3RlbUNvbnRleHQoKS5Ccm9rZXIuZ2V0QnV0dG9uQnJva2VyKCJsaXN0VG9vbHMiKTsKICAgICAgICAgICAgaWYgKGxpc3RUb29scyAmJiBsaXN0VG9vbHMuJGJveCkgewogICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAnPGEgY2xhc3M9ImctYnV0dG9uIG5kLWJ1dHRvbi1idWlsZCI+PHNwYW4gY2xhc3M9ImctYnV0dG9uLXJpZ2h0Ij48ZW0gY2xhc3M9Imljb24gaWNvbi1kaXNrIiB0aXRsZT0i5LiL6L29Ij48L2VtPjxzcGFuIGNsYXNzPSJ0ZXh0Ij7nlJ/miJDpk77mjqU8L3NwYW4+PC9zcGFuPjwvYT4nOwogICAgICAgICAgICAgICAgJChsaXN0VG9vbHMuJGJveCkucHJlcGVuZChodG1sKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCJ3YWl0IGluaXRCdXR0b25Ib21lLi4uIik7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KG9iai5pbml0QnV0dG9uSG9tZSwgNTAwKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5pbml0QnV0dG9uVGltZUxpbmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICgkKCIubW9kdWxlLW9wZXJhdGVCdG4gLmdyb3VwLWJ1dHRvbiIpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAnPHNwYW4gY2xhc3M9ImJ1dHRvbiI+PGEgY2xhc3M9Imctdi1idXR0b24gZy12LWJ1dHRvbi1taWRkbGUgbmQtYnV0dG9uLWJ1aWxkIj48c3BhbiBjbGFzcz0iZy12LWJ1dHRvbi1yaWdodCI+PGVtIGNsYXNzPSJpY29uIGljb24tZGlzayI+PC9lbT48c3BhbiBjbGFzcz0idGV4dCI+55Sf5oiQ6ZO+5o6lPC9zcGFuPjwvc3Bhbj48L2E+PC9zcGFuPic7CiAgICAgICAgICAgICAgICAkKCIubW9kdWxlLW9wZXJhdGVCdG4gLmdyb3VwLWJ1dHRvbiIpLnByZXBlbmQoaHRtbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBsb2dnZXIud2Fybigid2FpdCBpbml0QnV0dG9uVGltZUxpbmUuLi4iKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQob2JqLmluaXRCdXR0b25UaW1lTGluZSwgNTAwKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5pbml0QnV0dG9uRXZlbnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIC8vIOeUn+aIkOmTvuaOpQogICAgICAgICAgICAkKGRvY3VtZW50KS5vbigiY2xpY2siLCAiLm5kLWJ1dHRvbi1idWlsZCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciB5dW5EYXRhID0gb2JqLmdldFl1bkRhdGEoKTsKICAgICAgICAgICAgICAgIGlmICh5dW5EYXRhLk1ZVUsgfHwgb2JqLmlzSG9tZVBhZ2UoKSkgewogICAgICAgICAgICAgICAgICAgIHZhciBmaWxlTGlzdCA9IG9iai5nZXRTZWxlY3RlZEZpbGVMaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVTdGF0ID0gb2JqLmdldEZpbGVMaXN0U3RhdChmaWxlTGlzdCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGVMaXN0Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZUxpc3QubGVuZ3RoID4gMSAmJiBmaWxlU3RhdC5maWxlX251bSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEb3dubG9hZFNlbGVjdChmaWxlTGlzdCwgZmlsZVN0YXQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZpbGVTdGF0LmZpbGVfbnVtID09IDEgJiYgIW9iai5pc0hvbWVQYWdlKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5zaG93RG93bmxvYWRTaW5nbGUoZmlsZUxpc3QsIGZpbGVTdGF0KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYWNrID0gZmlsZVN0YXQuZmlsZV9udW0gPyBmYWxzZSA6IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmlzSG9tZVBhZ2UoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5zaG93RG93bmxvYWRJbmZvSG9tZShmaWxlTGlzdCwgcGFjayk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouc2hvd0Rvd25sb2FkSW5mb1NoYXJlT2ZmaWNhbChmaWxlTGlzdCwgcGFjayk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5zaG93VGlwRXJyb3IoIuivt+iHs+WwkemAieaLqeS4gOS4quaWh+S7tuaIluaWh+S7tuWkuSIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIG9iai5zaG93TG9naW4oKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyDljovnvKnljIUKICAgICAgICAgICAgJChkb2N1bWVudCkub24oImNsaWNrIiwgIi5uZC1idXR0b24tcGFjayIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBmaWxlTGlzdCA9IG9iai5nZXRTZWxlY3RlZEZpbGVMaXN0KCk7CiAgICAgICAgICAgICAgICBpZiAob2JqLmlzSG9tZVBhZ2UoKSkgewogICAgICAgICAgICAgICAgICAgIG9iai5zaG93RG93bmxvYWRJbmZvSG9tZShmaWxlTGlzdCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBvYmouc2hvd0Rvd25sb2FkSW5mb1NoYXJlT2ZmaWNhbChmaWxlTGlzdCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g5aSa5paH5Lu2CiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCJjbGljayIsICIubmQtYnV0dG9uLW11bHRpIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGZpbGVMaXN0ID0gb2JqLmdldFNlbGVjdGVkRmlsZUxpc3QoKTsKCiAgICAgICAgICAgICAgICAvLyDov4fmu6Tmlofku7blpLkKICAgICAgICAgICAgICAgIGZpbGVMaXN0ID0gb2JqLmZpbHRlckZpbGVMaXN0RGlyKGZpbGVMaXN0KTsKCiAgICAgICAgICAgICAgICBpZiAob2JqLmlzSG9tZVBhZ2UoKSkgewogICAgICAgICAgICAgICAgICAgIG9iai5zaG93RG93bmxvYWRJbmZvSG9tZShmaWxlTGlzdCwgZmFsc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEb3dubG9hZEluZm9TaGFyZU9mZmljYWwoZmlsZUxpc3QsIGZhbHNlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyDovazlrZjlpJrmlofku7YKICAgICAgICAgICAgJChkb2N1bWVudCkub24oImNsaWNrIiwgIi5uZC1idXR0b24tZGlzayIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBmaWxlTGlzdCA9IG9iai5nZXRTZWxlY3RlZEZpbGVMaXN0KCk7CgogICAgICAgICAgICAgICAgLy8g6L+H5ruk5paH5Lu25aS5CiAgICAgICAgICAgICAgICBmaWxlTGlzdCA9IG9iai5maWx0ZXJGaWxlTGlzdERpcihmaWxlTGlzdCk7CgogICAgICAgICAgICAgICAgaWYgKG9iai5pc0hvbWVQYWdlKCkpIHsKICAgICAgICAgICAgICAgICAgICBvYmouc2hvd0Rvd25sb2FkSW5mb0hvbWUoZmlsZUxpc3QsIGZhbHNlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIG9iai5zaG93RG93bmxvYWRJbmZvU2hhcmVUcmFuc2ZlcihmaWxlTGlzdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g5bqU55SoSUQKICAgICAgICAgICAgJChkb2N1bWVudCkub24oImNsaWNrIiwgIi5uZC1jaGFuZ2UtYXBwLWlkIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgb2JqLnNob3dBcHBJZENoYW5nZSgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgJChkb2N1bWVudCkub24oImNoYW5nZSIsICIubmQtaW5wdXQtYXBwLWlkIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgb2JqLnNldEFwcElkKHRoaXMudmFsdWUpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIOaJk+W8gOmFjee9rumhtQogICAgICAgICAgICAkKGRvY3VtZW50KS5vbigiY2xpY2siLCAiLm5kLW9wZW4tcGFnZS1vcHRpb24iLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBydW50aW1lLm9wZW5PcHRpb25zUGFnZSgpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIOaJk+W8gOS4tOaXtumhtemdogogICAgICAgICAgICAkKGRvY3VtZW50KS5vbigiY2xpY2siLCAiLm5kLW9wZW4tcGFnZS10ZW1wIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcm91dGVyLm9wZW5UYWIoImh0dHBzOi8vcGFuLmJhaWR1LmNvbS9kaXNrL2hvbWUjL2FsbD92bW9kZT1saXN0JnBhdGg9IiArIGVuY29kZVVSSUNvbXBvbmVudChvYmouZ2V0VGVtcFBhdGgoKSksIHRydWUpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd0xvZ2luID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBvYmouZ2V0SnF1ZXJ5KCkoIltub2RlLXR5cGU9J2hlYWRlci1sb2dpbi1idG4nXSIpLmNsaWNrKCk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dEb3dubG9hZEluZm9TaGFyZVRyYW5zZmVyID0gZnVuY3Rpb24gKGZpbGVMaXN0KSB7CiAgICAgICAgICAgIGxvZ2dlci5pbmZvKGZpbGVMaXN0KTsKICAgICAgICAgICAgb2JqLmFwcGx5VHJhbnNmZXJGaWxlKGZpbGVMaXN0LCBvYmouZ2V0VGVtcFBhdGgoKSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZXh0cmEgJiYgcmVzcG9uc2UuZXh0cmEubGlzdCkgewogICAgICAgICAgICAgICAgICAgIHZhciBsaXN0TWFwID0ge307CiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZXh0cmEubGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RNYXBbaXRlbS5mcm9tX2ZzX2lkXSA9IGl0ZW07CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIHZhciBkb3duTGlzdCA9IFtdOwogICAgICAgICAgICAgICAgICAgIGZpbGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RNYXAuaGFzT3duUHJvcGVydHkoaXRlbS5mc19pZCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZGxpbmsgPSBvYmouYnVpbGREb3dubG9hZFVybChsaXN0TWFwW2l0ZW0uZnNfaWRdLnRvLCBpdGVtLnNlcnZlcl9maWxlbmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3duTGlzdC5wdXNoKGl0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEb3dubG9hZExpbmtGaWxlKGRvd25MaXN0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dEb3dubG9hZEluZm9TaGFyZU9mZmljYWwgPSBmdW5jdGlvbiAoZmlsZUxpc3QsIHBhY2spIHsKICAgICAgICAgICAgb2JqLmdldERvd25sb2FkU2hhcmUoZmlsZUxpc3QsIHBhY2ssIGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgb2JqLmhpZGVUaXAoKTsKICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKHJlc3BvbnNlKTsKCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UubGlzdCAmJiByZXNwb25zZS5saXN0Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIC8vIOaWh+S7tgogICAgICAgICAgICAgICAgICAgIG9iai5zaG93RG93bmxvYWRMaW5rRmlsZShyZXNwb25zZS5saXN0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3BvbnNlLmRsaW5rKSB7CiAgICAgICAgICAgICAgICAgICAgLy8g5Y6L57yp5YyFCiAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEb3dubG9hZExpbmtQYWNrKGZpbGVMaXN0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRsaW5rOiByZXNwb25zZS5kbGluawogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8g5YW25LuWCiAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEaWFsb2dVbktub3duUmVzcG9uc2UocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd0Rvd25sb2FkSW5mb0hvbWUgPSBmdW5jdGlvbiAoZmlsZUxpc3QsIHBhY2spIHsKICAgICAgICAgICAgbG9nZ2VyLmluZm8oZmlsZUxpc3QpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgb2JqLmdldERvd25sb2FkSG9tZShmaWxlTGlzdCwgcGFjaywgZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLmhpZGVUaXAoKTsKICAgICAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhyZXNwb25zZSk7CgogICAgICAgICAgICAgICAgICAgIGlmIChwYWNrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kbGluayAmJiB0eXBlb2YgcmVzcG9uc2UuZGxpbmsgPT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWOi+e8qeWMhQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEb3dubG9hZExpbmtQYWNrKGZpbGVMaXN0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGxpbms6IHJlc3BvbnNlLmRsaW5rCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWFtuS7lgogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEaWFsb2dVbktub3duUmVzcG9uc2UocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGxpbmsgaW5zdGFuY2VvZiBBcnJheSAmJiByZXNwb25zZS5kbGluay5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkbGlua01hcHBpbmcgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRsaW5rLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkbGlua01hcHBpbmdbaXRlbS5mc19pZF0gPSBpdGVtLmRsaW5rOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5kbGluayA9IGRsaW5rTWFwcGluZ1tpdGVtLmZzX2lkXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmRsaW5rQXBpID0gb2JqLmJ1aWxkRG93bmxvYWRVcmwoaXRlbS5wYXRoLCBpdGVtLnNlcnZlcl9maWxlbmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmRsaW5rID0gb2JqLmJ1aWxkRG93bmxvYWRVcmwoaXRlbS5wYXRoLCBpdGVtLnNlcnZlcl9maWxlbmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBvYmouc2hvd0Rvd25sb2FkTGlua0ZpbGUoZmlsZUxpc3QpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIGZpbGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICBpdGVtLmRsaW5rID0gb2JqLmJ1aWxkRG93bmxvYWRVcmwoaXRlbS5wYXRoLCBpdGVtLnNlcnZlcl9maWxlbmFtZSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG9iai5zaG93RG93bmxvYWRMaW5rRmlsZShmaWxlTGlzdCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd0Rvd25sb2FkTGlua0ZpbGUgPSBmdW5jdGlvbiAoZmlsZUxpc3QpIHsKICAgICAgICAgICAgdmFyIHRpdGxlID0gIuaWh+S7tuS4i+i9vSI7CiAgICAgICAgICAgIHZhciBib2R5ID0gJzxkaXYgc3R5bGU9InBhZGRpbmc6IDIwcHggMjBweDttaW4taGVpZ2h0OiAxMjBweDsgbWF4LWhlaWdodDogMzAwcHg7IG92ZXJmbG93LXk6IGF1dG87ICI+JzsKCiAgICAgICAgICAgIHZhciByb3dTdHlsZSA9ICJkaXNwbGF5OmJsb2NrOyBvdmVyZmxvdzpoaWRkZW47IHdoaXRlLXNwYWNlOm5vd3JhcDsgdGV4dC1vdmVyZmxvdzplbGxpcHNpczsiOwogICAgICAgICAgICBmaWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgICAgICAgYm9keSArPSAnPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMTBweDsiPic7CiAgICAgICAgICAgICAgICBib2R5ICs9ICc8ZGl2PicgKyAoaW5kZXggKyAxKSArICfvvJonICsgaXRlbS5zZXJ2ZXJfZmlsZW5hbWUgKyAnPC9kaXY+JzsKICAgICAgICAgICAgICAgIGlmIChpdGVtLmRsaW5rQXBpKSB7CiAgICAgICAgICAgICAgICAgICAgYm9keSArPSAnPGRpdj48YSBocmVmPSInICsgaXRlbS5kbGluayArICcmZmlsZW5hbWU9JyArIGVuY29kZVVSSUNvbXBvbmVudChpdGVtLnNlcnZlcl9maWxlbmFtZSkgKyAnIiB0aXRsZT0iJyArIGl0ZW0uZGxpbmsgKyAnIiBzdHlsZT0iJyArIHJvd1N0eWxlICsgJyI+5a6Y5pa577yaJyArIGl0ZW0uZGxpbmsgKyAnPC9hPjwvZGl2Pic7CiAgICAgICAgICAgICAgICAgICAgYm9keSArPSAnPGRpdj48YSBocmVmPSInICsgaXRlbS5kbGlua0FwaSArICcmZmlsZW5hbWU9JyArIGVuY29kZVVSSUNvbXBvbmVudChpdGVtLnNlcnZlcl9maWxlbmFtZSkgKyAnIiB0aXRsZT0iJyArIGl0ZW0uZGxpbmtBcGkgKyAnIiBzdHlsZT0iJyArIHJvd1N0eWxlICsgJyI+55u06ZO+77yaJyArIGl0ZW0uZGxpbmtBcGkgKyAnPC9hPjwvZGl2Pic7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBib2R5ICs9ICc8ZGl2PjxhIGhyZWY9IicgKyBpdGVtLmRsaW5rICsgJyZmaWxlbmFtZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGl0ZW0uc2VydmVyX2ZpbGVuYW1lKSArICciIHRpdGxlPSInICsgaXRlbS5kbGluayArICciIHN0eWxlPSInICsgcm93U3R5bGUgKyAnIj4nICsgaXRlbS5kbGluayArICc8L2E+PC9kaXY+JzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJvZHkgKz0gJzwvZGl2Pic7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgYm9keSArPSAnPC9kaXY+JzsKICAgICAgICAgICAgdmFyIGZvb3RlciA9IG9iai5yZW5kZXJGb290ZXJBcHBJZCgpOwogICAgICAgICAgICBvYmouc2hvd0RpYWxvZyh0aXRsZSwgYm9keSwgZm9vdGVyKTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd0Rvd25sb2FkTGlua1BhY2sgPSBmdW5jdGlvbiAoZmlsZUxpc3QsIGRhdGEpIHsKICAgICAgICAgICAgdmFyIHRpdGxlID0gIuaWh+S7tuS4i+i9vSI7CiAgICAgICAgICAgIHZhciBib2R5ID0gJzxkaXYgc3R5bGU9InBhZGRpbmc6IDIwcHggMjBweDttaW4taGVpZ2h0OiAxMjBweDsgbWF4LWhlaWdodDogMzAwcHg7IG92ZXJmbG93LXk6IGF1dG87ICI+JzsKCiAgICAgICAgICAgIHZhciBwYWNrTmFtZSA9IG9iai5nZXREb3dubG9hZFBhY2tOYW1lKGZpbGVMaXN0KTsKICAgICAgICAgICAgYm9keSArPSAnPGRpdj4nICsgcGFja05hbWUgKyAnPC9kaXY+PGRpdj48YSBocmVmPSInICsgZGF0YS5kbGluayArICcmemlwbmFtZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhY2tOYW1lKSArICciIHRpdGxlPSInICsgZGF0YS5kbGluayArICciIHN0eWxlPSJkaXNwbGF5OmJsb2NrOyBvdmVyZmxvdzpoaWRkZW47IHdoaXRlLXNwYWNlOm5vd3JhcDsgdGV4dC1vdmVyZmxvdzplbGxpcHNpczsiPicgKyBkYXRhLmRsaW5rICsgJzwvYT48L2Rpdj4nOwoKICAgICAgICAgICAgYm9keSArPSAnPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogMTVweDsiPuaJk+WMheeahOaWh+S7ti/mlofku7blpLnliJfooag8L2Rpdj4nOwogICAgICAgICAgICBmaWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgICAgICAgYm9keSArPSAnPGRpdiB0aXRsZT0iJyArIGl0ZW0ucGF0aCArICciIHN0eWxlPSJjb2xvcjogJyArIChpdGVtLmlzZGlyID8gImJsdWUiIDogImluaGVyaXQiKSArICc7Ij5bJyArIChpbmRleCArIDEpICsgJ10gJyArIGl0ZW0uc2VydmVyX2ZpbGVuYW1lICsgJzwvZGl2Pic7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgYm9keSArPSAnPC9kaXY+JzsKICAgICAgICAgICAgdmFyIGZvb3RlciA9IG9iai5yZW5kZXJGb290ZXJBcHBJZCgpOwogICAgICAgICAgICBvYmouc2hvd0RpYWxvZyh0aXRsZSwgYm9keSwgZm9vdGVyKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0RG93bmxvYWRQYWNrTmFtZSA9IGZ1bmN0aW9uIChmaWxlTGlzdCkgewogICAgICAgICAgICByZXR1cm4gZmlsZUxpc3RbMF0uc2VydmVyX2ZpbGVuYW1lICsgIiDnrYkiICsgZmlsZUxpc3QubGVuZ3RoICsgIuS4quaWh+S7ti56aXAiOwogICAgICAgIH07CgogICAgICAgIG9iai5idWlsZERvd25sb2FkVXJsID0gZnVuY3Rpb24gKHBhdGgsIG5hbWUpIHsKICAgICAgICAgICAgcmV0dXJuICJodHRwczovL3Bjcy5iYWlkdS5jb20vcmVzdC8yLjAvcGNzL2ZpbGU/bWV0aG9kPWRvd25sb2FkJmFwcF9pZD0iICsgb2JqLmdldEFwcElkKCkgKyAiJmZpbGVuYW1lPSIgKyBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyAiJnBhdGg9IiArIGVuY29kZVVSSUNvbXBvbmVudChwYXRoKTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd0Rvd25sb2FkU2luZ2xlID0gZnVuY3Rpb24gKGZpbGVMaXN0LCBmaWxlU3RhdCkgewogICAgICAgICAgICB2YXIgdGl0bGUgPSAi6ZO+5o6l57G75Z6LIjsKICAgICAgICAgICAgdmFyIGJvZHkgPSAnPGRpdiBzdHlsZT0icGFkZGluZzogNDBweCAyMHB4OyBtYXgtaGVpZ2h0OiAzMDBweDsgb3ZlcmZsb3cteTogYXV0bzsiPic7CgogICAgICAgICAgICBib2R5ICs9ICc8ZGl2IGNsYXNzPSJub3JtYWxCdG5Cb3ggZy1jZW50ZXIiPic7CiAgICAgICAgICAgIGJvZHkgKz0gJzxhIGNsYXNzPSJnLWJ1dHRvbiBnLWJ1dHRvbi1sYXJnZSBnLWJ1dHRvbi1ncmF5LWxhcmdlIG5kLWJ1dHRvbi1tdWx0aSIgdGl0bGU9Iuiwg+eUqOWumOaWueaOpeWPo+eUn+aIkOmTvuaOpSI+PHNwYW4gY2xhc3M9ImctYnV0dG9uLXJpZ2h0Ij48ZW0gY2xhc3M9Imljb24gaWNvbi1kb3dubG9hZCI+PC9lbT4g5a6Y5pa56ZO+5o6lPC9zcGFuPjwvYT4nOwogICAgICAgICAgICBib2R5ICs9ICc8YSBjbGFzcz0iZy1idXR0b24gZy1idXR0b24tbGFyZ2UgZy1idXR0b24tZ3JheS1sYXJnZSBuZC1idXR0b24tZGlzayIgc3R5bGU9Im1hcmdpbi1sZWZ0OjUwcHg7IiB0aXRsZT0i6L2s5a2Y5paH5Lu254S25ZCO55Sf5oiQ5paH5Lu255u06ZO+Ij48c3BhbiBjbGFzcz0iZy1idXR0b24tcmlnaHQiPjxlbSBjbGFzcz0iaWNvbiBpY29uLXNhdmUtZGlzayI+PC9lbT4g6L2s5a2Y55u06ZO+PC9zcGFuPjwvYT4nOwogICAgICAgICAgICBib2R5ICs9ICc8L2Rpdj4nOwoKICAgICAgICAgICAgaWYgKGZpbGVTdGF0LmRpcl9udW0pIHsKICAgICAgICAgICAgICAgIGJvZHkgKz0gJzxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDQwcHg7IHBhZGRpbmctdG9wOiAxMHB4OyBtYXJnaW4tYm90dG9tOiAtMjBweDsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNEMERGRTc7Ij48cCBjbGFzcz0iZy1jZW50ZXIiPumAieaLqSBb5aSa5paH5Lu2XSDkvJrov4fmu6TlvZPliY3pgInkuK3nmoQgPHNwYW4gc3R5bGU9ImNvbG9yOiByZWQiPicgKyBmaWxlU3RhdC5kaXJfbnVtICsgJzwvc3Bhbj4g5Liq5paH5Lu25aS5PC9wPic7CgogICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMTsKICAgICAgICAgICAgICAgIGZpbGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5pc2RpcikgewogICAgICAgICAgICAgICAgICAgICAgICBib2R5ICs9ICc8cCB0aXRsZT0iJyArIGl0ZW0ucGF0aCArICciIHN0eWxlPSJjb2xvcjogYmx1ZTsiPlsnICsgaW5kZXggKyAnXSAnICsgaXRlbS5zZXJ2ZXJfZmlsZW5hbWUgKyAnPC9wPic7CiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4Kys7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBib2R5ICs9ICc8L2Rpdj4nOwogICAgICAgICAgICB9CgogICAgICAgICAgICBib2R5ICs9ICc8L2Rpdj4nOwogICAgICAgICAgICB2YXIgZm9vdGVyID0gb2JqLnJlbmRlckZvb3RlckFwcElkKCk7CiAgICAgICAgICAgIG9iai5zaG93RGlhbG9nKHRpdGxlLCBib2R5LCBmb290ZXIpOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93RG93bmxvYWRTZWxlY3QgPSBmdW5jdGlvbiAoZmlsZUxpc3QsIGZpbGVTdGF0KSB7CiAgICAgICAgICAgIHZhciB0aXRsZSA9ICLpk77mjqXnsbvlnosiOwogICAgICAgICAgICB2YXIgYm9keSA9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOiA0MHB4IDIwcHg7IG1heC1oZWlnaHQ6IDMwMHB4OyBvdmVyZmxvdy15OiBhdXRvOyI+JzsKCiAgICAgICAgICAgIGJvZHkgKz0gJzxkaXYgY2xhc3M9Im5vcm1hbEJ0bkJveCBnLWNlbnRlciI+JzsKICAgICAgICAgICAgaWYgKG9iai5pc0hvbWVQYWdlKCkpIHsKICAgICAgICAgICAgICAgIGJvZHkgKz0gJzxhIGNsYXNzPSJnLWJ1dHRvbiBnLWJ1dHRvbi1sYXJnZSBnLWJ1dHRvbi1ncmF5LWxhcmdlIG5kLWJ1dHRvbi1kaXNrIiB0aXRsZT0i5ZCI5bm25a6Y5pa56ZO+5o6l5ZKM5paH5Lu255u06ZO+Ij48c3BhbiBjbGFzcz0iZy1idXR0b24tcmlnaHQiPjxlbSBjbGFzcz0iaWNvbiBpY29uLXNhdmUtZGlzayI+PC9lbT4g5aSa5paH5Lu2PC9zcGFuPjwvYT4nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgYm9keSArPSAnPGEgY2xhc3M9ImctYnV0dG9uIGctYnV0dG9uLWxhcmdlIGctYnV0dG9uLWdyYXktbGFyZ2UgbmQtYnV0dG9uLW11bHRpIj48c3BhbiBjbGFzcz0iZy1idXR0b24tcmlnaHQiIHRpdGxlPSLosIPnlKjlrpjmlrnmjqXlj6PnlJ/miJDmlofku7bpk77mjqUiPjxlbSBjbGFzcz0iaWNvbiBpY29uLWRvd25sb2FkIj48L2VtPiDlrpjmlrnlpJrmlofku7Y8L3NwYW4+PC9hPic7CiAgICAgICAgICAgICAgICBib2R5ICs9ICc8YSBjbGFzcz0iZy1idXR0b24gZy1idXR0b24tbGFyZ2UgZy1idXR0b24tZ3JheS1sYXJnZSBuZC1idXR0b24tZGlzayIgc3R5bGU9Im1hcmdpbi1sZWZ0OjUwcHg7IiB0aXRsZT0i6L2s5a2Y5paH5Lu254S25ZCO55Sf5oiQ5paH5Lu255u06ZO+Ij48c3BhbiBjbGFzcz0iZy1idXR0b24tcmlnaHQiPjxlbSBjbGFzcz0iaWNvbiBpY29uLXNhdmUtZGlzayI+PC9lbT4g6L2s5a2Y5aSa5paH5Lu2PC9zcGFuPjwvYT4nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJvZHkgKz0gJzxhIGNsYXNzPSJnLWJ1dHRvbiBnLWJ1dHRvbi1sYXJnZSBnLWJ1dHRvbi1ncmF5LWxhcmdlIG5kLWJ1dHRvbi1wYWNrIiBzdHlsZT0ibWFyZ2luLWxlZnQ6NTBweDsiIHRpdGxlPSLosIPnlKjlrpjmlrnmjqXlj6PnlJ/miJDljovnvKnljIXpk77mjqUiPjxzcGFuIGNsYXNzPSJnLWJ1dHRvbi1yaWdodCI+PGVtIGNsYXNzPSJpY29uIGljb24tcG9seSI+PC9lbT4g5Y6L57yp5YyFPC9zcGFuPjwvYT4nOwogICAgICAgICAgICBib2R5ICs9ICc8L2Rpdj4nOwoKICAgICAgICAgICAgaWYgKGZpbGVTdGF0LmRpcl9udW0pIHsKICAgICAgICAgICAgICAgIGJvZHkgKz0gJzxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDQwcHg7IHBhZGRpbmctdG9wOiAxMHB4OyBtYXJnaW4tYm90dG9tOiAtMjBweDsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNEMERGRTc7Ij48cCBjbGFzcz0iZy1jZW50ZXIiPumAieaLqSBb5aSa5paH5Lu2XSDkvJrov4fmu6TlvZPliY3pgInkuK3nmoQgPHNwYW4gc3R5bGU9ImNvbG9yOiByZWQiPicgKyBmaWxlU3RhdC5kaXJfbnVtICsgJzwvc3Bhbj4g5Liq5paH5Lu25aS5PC9wPic7CiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAxOwogICAgICAgICAgICAgICAgZmlsZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlzZGlyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkgKz0gJzxwIHRpdGxlPSInICsgaXRlbS5wYXRoICsgJyIgc3R5bGU9ImNvbG9yOiBibHVlOyI+WycgKyBpbmRleCArICddICcgKyBpdGVtLnNlcnZlcl9maWxlbmFtZSArICc8L3A+JzsKICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgrKzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGJvZHkgKz0gJzwvZGl2Pic7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJvZHkgKz0gJzwvZGl2Pic7CiAgICAgICAgICAgIHZhciBmb290ZXIgPSBvYmoucmVuZGVyRm9vdGVyQXBwSWQoKTsKICAgICAgICAgICAgb2JqLnNob3dEaWFsb2codGl0bGUsIGJvZHksIGZvb3Rlcik7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dBcHBJZENoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHRpdGxlID0gIuW6lOeUqElEIjsKICAgICAgICAgICAgdmFyIGJvZHkgPSAnPGRpdiBzdHlsZT0icGFkZGluZzogNjBweCAyMHB4OyBtYXgtaGVpZ2h0OiAzMDBweDsgb3ZlcmZsb3cteTogYXV0bzsiPjxkaXYgY2xhc3M9ImctY2VudGVyIiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMTBweDsiPuW9k+WJjeW6lOeUqElE77yaPGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJuZC1pbnB1dC1hcHAtaWQiIHN0eWxlPSJib3JkZXI6IDFweCBzb2xpZCAjZjJmMmYyOyBwYWRkaW5nOiA0cHggNXB4OyIgdmFsdWU9IicgKyBvYmouZ2V0QXBwSWQoKSArICciPjwvZGl2PjxkaXYgY2xhc3M9ImctY2VudGVyIj48cD7nlKjkuo7mnoTpgKDkuKrkurrnvZHnm5jmlofku7bnmoTkuIvovb3nm7Tpk77vvIzmm7TlpJrlupTnlKhJROivt+afpeecizxhIHRhcmdldD0iX2JsYW5rIiBocmVmPSJodHRwOi8vZ28ubmV3ZGF5Lm1lL3MvcGFuLXNjcmlwdCI+IOiEmuacrOS4u+mhtSA8L2E+PC9wPjwvZGl2PjwvZGl2Pic7CiAgICAgICAgICAgIHZhciBmb290ZXIgPSAnJzsKICAgICAgICAgICAgb2JqLnNob3dEaWFsb2codGl0bGUsIGJvZHksIGZvb3Rlcik7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dEaWFsb2dVbktub3duUmVzcG9uc2UgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgdmFyIHRpdGxlID0gIuacquefpee7k+aenCI7CiAgICAgICAgICAgIHZhciBib2R5ID0gJzxkaXYgc3R5bGU9InBhZGRpbmc6IDIwcHggMjBweDsgbWF4LWhlaWdodDogMzAwcHg7IG92ZXJmbG93LXk6IGF1dG87Ij48cHJlIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlLXdyYXA7IHdvcmQtd3JhcDogYnJlYWstd29yZDsgd29yZC1icmVhazogYnJlYWstYWxsOyI+JyArIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLCBudWxsLCA0KSArICc8L3ByZT48L2Rpdj4nOwogICAgICAgICAgICB2YXIgZm9vdGVyID0gb2JqLnJlbmRlckZvb3RlckFwcElkKCk7CiAgICAgICAgICAgIG9iai5zaG93RGlhbG9nKHRpdGxlLCBib2R5LCBmb290ZXIpOwogICAgICAgIH07CgogICAgICAgIG9iai5yZW5kZXJGb290ZXJBcHBJZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuICc8cCBzdHlsZT0icGFkZGluZy10b3A6IDEwcHg7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjRDBERkU3OyI+5bqU55SoSUTvvJonICsgb2JqLmdldEFwcElkKCkgKyAnIDxhIGhyZWY9ImphdmFzY3JpcHQ6OyIgY2xhc3M9Im5kLWNoYW5nZS1hcHAtaWQiPuS/ruaUuTwvYT7vvIzlhbbku5bpobXpnaLvvJogPGEgY2xhc3M9Im5kLW9wZW4tcGFnZS1vcHRpb24iIGhyZWY9ImphdmFzY3JpcHQ6OyI+6YWN572u6aG16Z2iPC9hPiDjgIE8YSBjbGFzcz0ibmQtb3Blbi1wYWdlLXRlbXAiIGhyZWY9ImphdmFzY3JpcHQ6OyI+5Li05pe25paH5Lu2PC9hPjwvcD4nOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93RGlhbG9nID0gZnVuY3Rpb24gKHRpdGxlLCBib2R5LCBmb290ZXIpIHsKICAgICAgICAgICAgdmFyIGRpYWxvZyA9IG9iai5yZXF1aXJlKCJzeXN0ZW0tY29yZTpzeXN0ZW0vdWlTZXJ2aWNlL2RpYWxvZy9kaWFsb2cuanMiKS52ZXJpZnkoewogICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgICAgICAgICAgaW1nOiAiaW1nIiwKICAgICAgICAgICAgICAgIHZjb2RlOiAidmNvZGUiCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g5YaF5a65CiAgICAgICAgICAgICQoZGlhbG9nLiRkaWFsb2cpLmZpbmQoIi5kaWFsb2ctYm9keSIpLnNhZmVIdG1sKGJvZHkpOwoKICAgICAgICAgICAgLy8g5bqV6YOoCiAgICAgICAgICAgICQoZGlhbG9nLiRkaWFsb2cpLmZpbmQoIi5kaWFsb2ctZm9vdGVyIikuc2FmZUh0bWwoZm9vdGVyKTsKCiAgICAgICAgICAgIGRpYWxvZy5zaG93KCk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dUaXBTdWNjZXNzID0gZnVuY3Rpb24gKG1zZywgaGFzQ2xvc2UsIGF1dG9DbG9zZSkgewogICAgICAgICAgICBvYmouc2hvd1RpcCgic3VjY2VzcyIsIG1zZywgaGFzQ2xvc2UsIGF1dG9DbG9zZSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dUaXBFcnJvciA9IGZ1bmN0aW9uIChtc2csIGhhc0Nsb3NlLCBhdXRvQ2xvc2UpIHsKICAgICAgICAgICAgb2JqLnNob3dUaXAoImZhaWx1cmUiLCBtc2csIGhhc0Nsb3NlLCBhdXRvQ2xvc2UpOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93VGlwTG9hZGluZyA9IGZ1bmN0aW9uIChtc2csIGhhc0Nsb3NlLCBhdXRvQ2xvc2UpIHsKICAgICAgICAgICAgb2JqLnNob3dUaXAoImxvYWRpbmciLCBtc2csIGhhc0Nsb3NlLCBhdXRvQ2xvc2UpOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93VGlwID0gZnVuY3Rpb24gKG1vZGUsIG1zZywgaGFzQ2xvc2UsIGF1dG9DbG9zZSkgewogICAgICAgICAgICB2YXIgb3B0aW9uID0gewogICAgICAgICAgICAgICAgbW9kZTogbW9kZSwKICAgICAgICAgICAgICAgIG1zZzogbXNnCiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyDlhbPpl63mjInpkq4KICAgICAgICAgICAgaWYgKHR5cGVvZiBoYXNDbG9zZSAhPSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgICAgb3B0aW9uLmhhc0Nsb3NlID0gaGFzQ2xvc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIOiHquWKqOWFs+mXrQogICAgICAgICAgICBpZiAodHlwZW9mIGF1dG9DbG9zZSAhPSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgICAgb3B0aW9uLmF1dG9DbG9zZSA9IGF1dG9DbG9zZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgb2JqLnJlcXVpcmUoInN5c3RlbS1jb3JlOnN5c3RlbS91aVNlcnZpY2UvdGlwL3RpcC5qcyIpLnNob3cob3B0aW9uKTsKICAgICAgICB9OwoKICAgICAgICBvYmouaGlkZVRpcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgb2JqLnJlcXVpcmUoInN5c3RlbS1jb3JlOnN5c3RlbS91aVNlcnZpY2UvdGlwL3RpcC5qcyIpLmhpZGUoewogICAgICAgICAgICAgICAgaGlkZVRpcHNBbmltYXRpb25GbGFnOiAxCiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5pc0hvbWVQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdXJsID0gcm91dGVyLmdldFVybCgpOwogICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoIi5iYWlkdS5jb20vZGlzayIpID4gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouaXNUaW1lbGluZVBhZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB1cmwgPSByb3V0ZXIuZ2V0VXJsKCk7CiAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZigiLmJhaWR1LmNvbS9kaXNrL3RpbWVsaW5lIikgPiAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5pc1NoYXJlUGFnZU11bHRpID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgeXVuRGF0YSA9IG9iai5nZXRZdW5EYXRhKCk7CiAgICAgICAgICAgIGlmICh5dW5EYXRhLlNIQVJFUEFHRVRZUEUgPT0gInNpbmdsZV9maWxlX3BhZ2UiKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTZWxlY3RlZEZpbGVMaXN0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAob2JqLmlzSG9tZVBhZ2UoKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG9iai5nZXRTZWxlY3RlZEZpbGVMaXN0SG9tZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIG9iai5nZXRTZWxlY3RlZEZpbGVMaXN0U2hhcmUoKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTZWxlY3RlZEZpbGVMaXN0SG9tZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKG9iai5pc1RpbWVsaW5lUGFnZSgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLnJlcXVpcmUoInBhbi10aW1lbGluZTp3aWRnZXQvc3RvcmUvaW5kZXguanMiKS5nZXR0ZXJzLmdldENob29zZWRJdGVtQXJyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIG9iai5yZXF1aXJlKCdzeXN0ZW0tY29yZTpjb250ZXh0L2NvbnRleHQuanMnKS5pbnN0YW5jZUZvclN5c3RlbS5saXN0LmdldFNlbGVjdGVkKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0U2VsZWN0ZWRGaWxlTGlzdFNoYXJlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLnJlcXVpcmUoJ3N5c3RlbS1jb3JlOmNvbnRleHQvY29udGV4dC5qcycpLmluc3RhbmNlRm9yU3lzdGVtLmxpc3QuZ2V0U2VsZWN0ZWQoKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0RmlsZUxpc3RTdGF0ID0gZnVuY3Rpb24gKGZpbGVMaXN0KSB7CiAgICAgICAgICAgIHZhciBmaWxlU3RhdCA9IHsKICAgICAgICAgICAgICAgIGZpbGVfbnVtOiAwLAogICAgICAgICAgICAgICAgZGlyX251bTogMAogICAgICAgICAgICB9OwogICAgICAgICAgICBmaWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICBpZiAoaXRlbS5pc2RpciA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgZmlsZVN0YXQuZmlsZV9udW0rKzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGZpbGVTdGF0LmRpcl9udW0rKzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBmaWxlU3RhdDsKICAgICAgICB9OwoKICAgICAgICBvYmouZmlsdGVyRmlsZUxpc3REaXIgPSBmdW5jdGlvbiAoZmlsZUxpc3QpIHsKICAgICAgICAgICAgdmFyIGZpbGVMaXN0RmlsdGVyID0gW107CiAgICAgICAgICAgIGZpbGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIGlmIChpdGVtLmlzZGlyID09IDApIHsKICAgICAgICAgICAgICAgICAgICBmaWxlTGlzdEZpbHRlci5wdXNoKGl0ZW0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGZpbGVMaXN0RmlsdGVyOwogICAgICAgIH07CgogICAgICAgIG9iai5wYXJzZUZpZExpc3QgPSBmdW5jdGlvbiAoZmlsZUxpc3QpIHsKICAgICAgICAgICAgdmFyIGZpZExpc3QgPSBbXTsKICAgICAgICAgICAgZmlsZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgZmlkTGlzdC5wdXNoKGl0ZW0uZnNfaWQpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGZpZExpc3Q7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldERvd25sb2FkU2hhcmUgPSBmdW5jdGlvbiAoZmlsZUxpc3QsIHBhY2ssIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIG9iai5zaG93VGlwTG9hZGluZygi55Sf5oiQ6ZO+5o6l5Lit77yM6K+356iN562JLi4uIik7CiAgICAgICAgICAgIG9iai5pbml0V2lkZ2V0Q29udGV4dCgiZnVuY3Rpb24td2lkZ2V0LTE6ZG93bmxvYWQvdXRpbC9jb250ZXh0LmpzIik7CiAgICAgICAgICAgIG9iai5hc3luYygiZnVuY3Rpb24td2lkZ2V0LTE6ZG93bmxvYWQvc2VydmljZS9kbGlua1NlcnZpY2UuanMiLCBmdW5jdGlvbiAoZGwpIHsKICAgICAgICAgICAgICAgIHZhciB5dW5EYXRhID0gb2JqLmdldFl1bkRhdGEoKTsKICAgICAgICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICAgICAgICAgIGxpc3Q6IGZpbGVMaXN0LAogICAgICAgICAgICAgICAgICAgIHNoYXJlX3VrOiB5dW5EYXRhLlNIQVJFX1VLLAogICAgICAgICAgICAgICAgICAgIHNoYXJlX2lkOiB5dW5EYXRhLlNIQVJFX0lELAogICAgICAgICAgICAgICAgICAgIHNpZ246IHl1bkRhdGEuU0lHTiwKICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IHl1bkRhdGEuVElNRVNUQU1QLAogICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhY2sgPyAiYmF0Y2giIDogIm5vbGltaXQiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZGwuZ2V0RGxpbmtTaGFyZShkYXRhLCBjYWxsYmFjayk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXREb3dubG9hZEhvbWUgPSBmdW5jdGlvbiAoZmlsZUxpc3QsIHBhY2ssIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIG9iai5zaG93VGlwTG9hZGluZygi55Sf5oiQ6ZO+5o6l5Lit77yM6K+356iN562JLi4uIik7CiAgICAgICAgICAgIG9iai5pbml0V2lkZ2V0Q29udGV4dCgiZnVuY3Rpb24td2lkZ2V0LTE6ZG93bmxvYWQvdXRpbC9jb250ZXh0LmpzIik7CiAgICAgICAgICAgIG9iai5hc3luYygiZnVuY3Rpb24td2lkZ2V0LTE6ZG93bmxvYWQvc2VydmljZS9kbGlua1NlcnZpY2UuanMiLCBmdW5jdGlvbiAoZGwpIHsKICAgICAgICAgICAgICAgIHZhciBmaWRMaXN0ID0gb2JqLnBhcnNlRmlkTGlzdChmaWxlTGlzdCk7CiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IHBhY2sgPyAiYmF0Y2giIDogIm5vbGltaXQiOwogICAgICAgICAgICAgICAgZGwuZ2V0RGxpbmtQYW4oSlNPTi5zdHJpbmdpZnkoZmlkTGlzdCksIHR5cGUsIGNhbGxiYWNrKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmFwcGx5VHJhbnNmZXJGaWxlID0gZnVuY3Rpb24gKGZpbGVMaXN0LCBwYXRoLCBjYWxsYmFjaykgewogICAgICAgICAgICBvYmoubGlzdERpcihwYXRoLCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5lcnJubyA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLnRyYW5zZmVyRmlsZShmaWxlTGlzdCwgcGF0aCwgY2FsbGJhY2spOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBvYmouY3JlYXRlRGlyKHBhdGgsIGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZXJybm8gPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnRyYW5zZmVyRmlsZShmaWxlTGlzdCwgcmVzcG9uc2UucGF0aCwgY2FsbGJhY2spOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soIiIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygiIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai50cmFuc2ZlckZpbGUgPSBmdW5jdGlvbiAoZmlsZUxpc3QsIHBhdGgsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciB5dW5EYXRhID0gb2JqLmdldFl1bkRhdGEoKTsKICAgICAgICAgICAgdmFyIGZpZExpc3QgPSBvYmoucGFyc2VGaWRMaXN0KGZpbGVMaXN0KTsKICAgICAgICAgICAgdmFyIHVybCA9ICIvc2hhcmUvdHJhbnNmZXI/b25kdXA9bmV3Y29weSZhc3luYz0xJnNoYXJlaWQ9IiArIHl1bkRhdGEuU0hBUkVfSUQgKyAiJmZyb209IiArIHl1bkRhdGEuU0hBUkVfVUs7CiAgICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICAgICAgZnNpZGxpc3Q6ICJbIiArIGZpZExpc3Quam9pbigiLCIpICsgIl0iLAogICAgICAgICAgICAgICAgcGF0aDogcGF0aAogICAgICAgICAgICB9OwogICAgICAgICAgICBvYmouYWpheCh7CiAgICAgICAgICAgICAgICB0eXBlOiAicG9zdCIsCiAgICAgICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgICBkYXRhVHlwZTogImpzb24iLAogICAgICAgICAgICAgICAgdGltZW91dDogMWU1LAogICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygiIik7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzcG9uc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmoubGlzdERpciA9IGZ1bmN0aW9uIChwYXRoLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgdXJsID0gIi9hcGkvbGlzdCI7CiAgICAgICAgICAgIG9iai5hamF4KHsKICAgICAgICAgICAgICAgIHR5cGU6ICJnZXQiLAogICAgICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgb3JkZXI6ICJuYW1lIiwKICAgICAgICAgICAgICAgICAgICBkZXNjOiAwLAogICAgICAgICAgICAgICAgICAgIHNob3dlbXB0eTogMCwKICAgICAgICAgICAgICAgICAgICB3ZWI6IDEsCiAgICAgICAgICAgICAgICAgICAgcGFnZTogMSwKICAgICAgICAgICAgICAgICAgICBudW06IDEwLAogICAgICAgICAgICAgICAgICAgIGRpcjogcGF0aAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAianNvbiIsCiAgICAgICAgICAgICAgICB0aW1lb3V0OiAxZTUsCiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCIiKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5jcmVhdGVEaXIgPSBmdW5jdGlvbiAocGF0aCwgY2FsbGJhY2spIHsKICAgICAgICAgICAgdmFyIHVybCA9ICIvYXBpL2NyZWF0ZT9hPWNvbW1pdCI7CiAgICAgICAgICAgIG9iai5hamF4KHsKICAgICAgICAgICAgICAgIHR5cGU6ICJwb3N0IiwKICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGgsCiAgICAgICAgICAgICAgICAgICAgaXNkaXI6IDEsCiAgICAgICAgICAgICAgICAgICAgYmxvY2tfbGlzdDogIltdIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAianNvbiIsCiAgICAgICAgICAgICAgICB0aW1lb3V0OiAxZTUsCiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCIiKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTaGFyZUlkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgbWF0Y2g7CgogICAgICAgICAgICBtYXRjaCA9IGxvY2F0aW9uLmhyZWYubWF0Y2goL3NoYXJlXC9pbml0XD9zdXJsPShbYS16MC05LV9dKykvaSk7CiAgICAgICAgICAgIGlmIChtYXRjaCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoWzFdOwogICAgICAgICAgICB9CgogICAgICAgICAgICBtYXRjaCA9IGxvY2F0aW9uLnBhdGhuYW1lLm1hdGNoKC9cL3NcLzEoW2EtejAtOS1fXSspL2kpOwogICAgICAgICAgICBpZiAobWF0Y2gpIHsKICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaFsxXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmlzUHdkU2hhcmVPcGVuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb3B0aW9uLmlzT3B0aW9uQWN0aXZlKG9wdGlvbi5jb25zdGFudC5iYWlkdV9zaGFyZV9zdGF0dXMpOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRZdW5EYXRhID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIW9iai55dW5fZGF0YSkgewogICAgICAgICAgICAgICAgb2JqLnl1bl9kYXRhID0gdW5zYWZlV2luZG93Lnl1bkRhdGE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG9iai55dW5fZGF0YTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0VGVtcFBhdGggPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB0ZW1wUGF0aCA9IGNvbmZpZy5nZXRDb25maWcoInRlbXBfcGF0aCIpOwogICAgICAgICAgICBpZiAodGVtcFBhdGgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wUGF0aDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBvYmoudGVtcF9wYXRoOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNldFRlbXBQYXRoID0gZnVuY3Rpb24gKHRlbXBQYXRoKSB7CiAgICAgICAgICAgIGNvbmZpZy5zZXRDb25maWcoInRlbXBfcGF0aCIsIHRlbXBQYXRoKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0QXBwSWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBhcHBJZCA9IGNvbmZpZy5nZXRDb25maWcoImFwcF9pZCIpOwogICAgICAgICAgICBpZiAoYXBwSWQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBhcHBJZDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBvYmouYXBwX2lkOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNldEFwcElkID0gZnVuY3Rpb24gKGFwcElkKSB7CiAgICAgICAgICAgIGNvbmZpZy5zZXRDb25maWcoImFwcF9pZCIsIGFwcElkKTsKICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFdpZGdldENvbnRleHQgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgb2JqLmFzeW5jKG5hbWUsIGZ1bmN0aW9uICh3aWRnZXQpIHsKICAgICAgICAgICAgICAgICAgICB3aWRnZXQuc2V0Q29udGV4dChvYmouZ2V0U3lzdGVtQ29udGV4dCgpKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChlcnIpIHsgfQogICAgICAgIH07CgogICAgICAgIG9iai5hamF4ID0gZnVuY3Rpb24gKG9wdGlvbikgewogICAgICAgICAgICBvYmouZ2V0SnF1ZXJ5KCkuYWpheChvcHRpb24pOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTeXN0ZW1Db250ZXh0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLnJlcXVpcmUoInN5c3RlbS1jb3JlOmNvbnRleHQvY29udGV4dC5qcyIpLmluc3RhbmNlRm9yU3lzdGVtOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRKcXVlcnkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBvYmoucmVxdWlyZSgiYmFzZTp3aWRnZXQvbGlicy9qcXVlcnlwYWNrZXQuanMiKTsKICAgICAgICB9OwoKICAgICAgICBvYmoucmVxdWlyZSA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgIHJldHVybiB1bnNhZmVXaW5kb3cucmVxdWlyZShuYW1lKTsKICAgICAgICB9OwoKICAgICAgICBvYmouYXN5bmMgPSBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2spIHsKICAgICAgICAgICAgdW5zYWZlV2luZG93LnJlcXVpcmUuYXN5bmMobmFtZSwgY2FsbGJhY2spOwogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCJhcHBfd2VpeXVuIiwgWyJyb3V0ZXIiLCAib3B0aW9uIiwgImxvZ2dlciIsICJ1bnNhZmVXaW5kb3ciLCAiY29uc3RhbnQiLCAicnVudGltZSIsICJhcGkiLCAic2hhcmVMb2ciLCAiJCJdLCBmdW5jdGlvbiAocm91dGVyLCBvcHRpb24sIGxvZ2dlciwgdW5zYWZlV2luZG93LCBjb25zdGFudCwgcnVudGltZSwgYXBpLCBzaGFyZUxvZywgJCkgewogICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgIG1vZHVsZXM6IHt9LAogICAgICAgICAgICB3ZWJwYWNrX3JlcXVpcmU6IG51bGwsCiAgICAgICAgICAgIHZlcmlmeV9wYWdlOiB7CiAgICAgICAgICAgICAgICBzZXRQd2Q6IG51bGwsCiAgICAgICAgICAgICAgICBzaGFyZV9wd2Q6IG51bGwsCiAgICAgICAgICAgICAgICBzdWJtaXRfcHdkOiBudWxsCiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmoucnVuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdXJsID0gcm91dGVyLmdldFVybCgpOwogICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoIndlaXl1bi5jb20vZGlzayIpID4gMCkgewogICAgICAgICAgICAgICAgb3B0aW9uLmlzT3B0aW9uQWN0aXZlKG9wdGlvbi5jb25zdGFudC53ZWl5dW5fcGFnZV9ob21lKSAmJiBvYmouaW5pdEhvbWVQYWdlKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigic2hhcmUud2VpeXVuLmNvbSIpID4gMCkgewogICAgICAgICAgICAgICAgb2JqLmluaXRWZXJpZnlQYWdlKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5pbml0SG9tZVBhZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG9iai5pbml0V2VicGFja1JlcXVpcmUoKTsKCiAgICAgICAgICAgIHNldEludGVydmFsKG9iai5pbml0SG9tZVBhZ2VFbGVtZW50LCAxMDAwKTsKICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdEhvbWVQYWdlRWxlbWVudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gJzxkaXYgY2xhc3M9ImFjdGlvbi1pdGVtIG1vZC1hY3Rpb24td3JhcC1saW5rIj48ZGl2IGNsYXNzPSJhY3Rpb24taXRlbS1jb24iPjxpIGNsYXNzPSJpY29uIGljb24tbGluayI+PC9pPjxzcGFuIGNsYXNzPSJhY3QtdHh0Ij7mmL7npLrpk77mjqU8L3NwYW4+PC9kaXY+PC9kaXY+JzsKICAgICAgICAgICAgJCgiLm1vZC1hY3Rpb24td3JhcC1tZW51Om5vdCgubmQtc2hvdy1saW5rLWFscmVhZHkpIikuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpOwogICAgICAgICAgICAgICAgaWYgKCR0aGlzLmZpbmQoIi5pY29uLWRvd25sb2FkIikpIHsKICAgICAgICAgICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygibmQtc2hvdy1saW5rLWFscmVhZHkiKTsKCiAgICAgICAgICAgICAgICAgICAgJHRoaXMucHJlcGVuZCh0ZW1wbGF0ZSk7CiAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgiLm1vZC1hY3Rpb24td3JhcC1saW5rIikuY2xpY2soZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dIb21lRG93bmxvYWQoKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmluaXRWZXJpZnlQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBvYmouaW5pdFdlYnBhY2tSZXF1aXJlKCk7CgogICAgICAgICAgICBpZiAob3B0aW9uLmlzT3B0aW9uQWN0aXZlKG9wdGlvbi5jb25zdGFudC53ZWl5dW5fcGFnZV92ZXJpZnkpKSB7CiAgICAgICAgICAgICAgICBvYmoucmVnaXN0ZXJTdG9yZVNoYXJlUHdkKCk7CgogICAgICAgICAgICAgICAgb2JqLmluaXRWZXJpZnlQYWdlRWxlbWVudChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLmF1dG9QYWRkaW5nU2hhcmVQd2QoKTsKICAgICAgICAgICAgICAgICAgICBvYmoucmVnaXN0ZXJQd2RTaGFyZVN3aXRjaCgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChvcHRpb24uaXNPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LndlaXl1bl9wYWdlX3NoYXJlKSAmJiB1bnNhZmVXaW5kb3cuc3luY0RhdGEuc2hhcmVJbmZvLm5vdGVfbGlzdC5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgICAgb2JqLmluaXRTaGFyZVBhZ2UoKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5pbml0U2hhcmVQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoJCgiLm1vZC1hY3Rpb24td3JhcC1saW5rIikubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgIHZhciBodG1sID0gJzxkaXYgY2xhc3M9Im1vZC1hY3Rpb24td3JhcCBtb2QtYWN0aW9uLXdyYXAtbWVudSBtb2QtYWN0aW9uLXdyYXAtbGluayBjbGVhcmZpeCI+PGRpdiBjbGFzcz0iYWN0aW9uLWl0ZW0iPjxkaXYgY2xhc3M9ImFjdGlvbi1pdGVtLWNvbiI+PGkgY2xhc3M9Imljb24gaWNvbi1saW5rIj48L2k+PHNwYW4gY2xhc3M9ImFjdC10eHQiPuaYvuekuumTvuaOpTwvc3Bhbj48L2Rpdj48L2Rpdj48L2Rpdj4nOwogICAgICAgICAgICAgICAgJCgiLm1vZC1hY3Rpb24td3JhcC1jb2RlIikuYWZ0ZXIoaHRtbCk7CgogICAgICAgICAgICAgICAgJCgiLm1vZC1hY3Rpb24td3JhcC1saW5rIikuY2xpY2soZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgIG9iai5zaG93U2hhcmVEb3dubG9hZCgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2V0VGltZW91dChvYmouaW5pdFNoYXJlUGFnZSwgNTAwKTsKICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFZlcmlmeVBhZ2VFbGVtZW50ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciBzaGFyZUlkID0gb2JqLmdldFNoYXJlSWQoKTsKICAgICAgICAgICAgdmFyICRwd2QgPSAkKCIuY2FyZC1pbm5lciAuaW5wdXQtdHh0W3R5cGU9J3Bhc3N3b3JkJ10iKTsKICAgICAgICAgICAgdmFyICRidXR0b24gPSAkKCIuY2FyZC1pbm5lciAuYnRuLW1haW4iKTsKICAgICAgICAgICAgaWYgKHNoYXJlSWQgJiYgJHB3ZC5sZW5ndGggJiYgJGJ1dHRvbi5sZW5ndGgpIHsKCiAgICAgICAgICAgICAgICAvLyDmmL7npLrliIbkuqvlr4bnoIEKICAgICAgICAgICAgICAgICRwd2QuYXR0cigidHlwZSIsICJ0ZXh0Iik7CgogICAgICAgICAgICAgICAgLy8g6K6+572u5YiG5Lqr5a+G56CBCiAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2Uuc2V0UHdkID0gZnVuY3Rpb24gKHB3ZCkgewogICAgICAgICAgICAgICAgICAgICRwd2QudmFsKHB3ZCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIC8vIOmHjemAoOaMiemSrgogICAgICAgICAgICAgICAgdmFyICRpdGVtQnV0dG9uID0gJGJ1dHRvbi5wYXJlbnQoKTsKICAgICAgICAgICAgICAgICRpdGVtQnV0dG9uLnNhZmVIdG1sKCRidXR0b24ucHJvcCgib3V0ZXJIVE1MIikpOwogICAgICAgICAgICAgICAgJGJ1dHRvbiA9ICRpdGVtQnV0dG9uLmZpbmQoIi5idG4tbWFpbiIpOwoKICAgICAgICAgICAgICAgIC8vIOaMiemSruS6i+S7tgogICAgICAgICAgICAgICAgJGJ1dHRvbi5vbigiY2xpY2siLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLmdldFN0b3JlKCkgJiYgb2JqLmdldFN0b3JlKCkuZGlzcGF0Y2goInNoYXJlSW5mby9sb2FkU2hhcmVJbmZvV2l0aG91dExvZ2luIiwgJHB3ZC52YWwoKSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAvLyDmj5DkuqTlr4bnoIEKICAgICAgICAgICAgICAgIG9iai52ZXJpZnlfcGFnZS5zdWJtaXRfcHdkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICRidXR0b24uY2xpY2soKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIG9iai5pbml0VmVyaWZ5UGFnZUVsZW1lbnQoY2FsbGJhY2spOwogICAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5hdXRvUGFkZGluZ1NoYXJlUHdkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgc2hhcmVJZCA9IG9iai5nZXRTaGFyZUlkKCk7CiAgICAgICAgICAgIHZhciBzaGFyZUxpbmsgPSBvYmouZ2V0U2hhcmVMaW5rKCk7CiAgICAgICAgICAgIGFwaS5xdWVyeVNoYXJlUHdkKGNvbnN0YW50LnNvdXJjZS53ZWl5dW4sIHNoYXJlSWQsIHNoYXJlTGluaywgZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuY29kZSA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNoYXJlUHdkID0gcmVzcG9uc2UuZGF0YS5zaGFyZV9wd2Q7CiAgICAgICAgICAgICAgICAgICAgb2JqLnZlcmlmeV9wYWdlLnNoYXJlX3B3ZCA9IHNoYXJlUHdkOwogICAgICAgICAgICAgICAgICAgIG9iai52ZXJpZnlfcGFnZS5zZXRQd2Qoc2hhcmVQd2QpOwogICAgICAgICAgICAgICAgICAgIG9iai5zaG93VGlwU3VjY2Vzcygi5aGr5YWF5a+G56CB5oiQ5YqfIik7CgogICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb24uaXNPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LndlaXl1bl9hdXRvX2p1bXApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9iai52ZXJpZnlfcGFnZS5zdWJtaXRfcHdkICYmIG9iai52ZXJpZnlfcGFnZS5zdWJtaXRfcHdkKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dUaXBFcnJvcigi5pqC5peg5Lq65YiG5Lqr5a+G56CBIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5yZWdpc3RlclB3ZFNoYXJlU3dpdGNoID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyDmt7vliqDlvIDlhbMKICAgICAgICAgICAgJCgiLmNhcmQtaW5uZXIgLmZvcm0taXRlbS1sYWJlbCAuZm9ybS1pdGVtLXRpdCIpLnNhZmVIdG1sKCc8c3BhbiBjbGFzcz0iZm9ybS1pdGVtLXRpdCI+6K+36L6T5YWl5YiG5Lqr5a+G56CBPHNwYW4gc3R5bGU9Im1hcmdpbi1sZWZ0OiA0NXB4OyI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBjaGVja2VkIGlkPSJuZC1zaGFyZS1jaGVjayIgc3R5bGU9InZlcnRpY2FsLWFsaWduOiBtaWRkbGU7Ij4gPGEgY2xhc3M9Im5kLW9wZW4tcGFnZS1vcHRpb24iIGhyZWY9ImphdmFzY3JpcHQ6OyIgdGl0bGU9IueCueWHu+afpeeci+abtOWkmuiEmuacrOmFjee9riI+5YWx5Lqr5a+G56CBPC9hPjwvc3Bhbj48L3NwYW4+Jyk7CiAgICAgICAgICAgIG9iai5pc1B3ZFNoYXJlT3BlbigpIHx8ICQoIiNuZC1zaGFyZS1jaGVjayIpLnJlbW92ZUF0dHIoImNoZWNrZWQiKTsKCiAgICAgICAgICAgIC8vIOW8gOWFsy3kuovku7YKICAgICAgICAgICAgJCgiI25kLXNoYXJlLWNoZWNrIikub24oImNoYW5nZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmlzKCc6Y2hlY2tlZCcpKSB7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnNldE9wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQud2VpeXVuX3NoYXJlX3N0YXR1cyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBvcHRpb24uc2V0T3B0aW9uVW5BY3RpdmUob3B0aW9uLmNvbnN0YW50LndlaXl1bl9zaGFyZV9zdGF0dXMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIOaJk+W8gOmFjee9rumhtQogICAgICAgICAgICAkKCIubmQtb3Blbi1wYWdlLW9wdGlvbiIpLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJ1bnRpbWUub3Blbk9wdGlvbnNQYWdlKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5yZWdpc3RlclN0b3JlU2hhcmVQd2QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG9iai5hZGRSZXNwb25zZUludGVyY2VwdG9yKGZ1bmN0aW9uIChyZXF1ZXN0LCByZXNwb25zZSkgewogICAgICAgICAgICAgICAgdmFyIHJlcXVlc3RVcmwgPSByZXF1ZXN0LnJlc3BvbnNlVVJMOwogICAgICAgICAgICAgICAgaWYgKHJlcXVlc3RVcmwuaW5kZXhPZigid2VpeXVuU2hhcmVOb0xvZ2luL1dlaXl1blNoYXJlVmlldyIpID4gMCkgewogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmRhdGEucnNwX2hlYWRlci5yZXRjb2RlID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gcmVzcG9uc2UuY29uZmlnLmRhdGEubWF0Y2goL1xcInNoYXJlX3B3ZFxcIjpcXCIoW1x3XSspXFwiLyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2dnZXIud2FybigicHdkIHNoYXJlIG5vdCBtYXRjaCIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2hhcmVQd2QgPSBtYXRjaFsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNoYXJlUHdkID09IG9iai52ZXJpZnlfcGFnZS5zaGFyZV9wd2QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2dnZXIud2FybigicHdkIHNoYXJlIG5vdCBjaGFuZ2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvYmouaXNQd2RTaGFyZU9wZW4oKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci53YXJuKCJwd2Qgc2hhcmUgY2xvc2VkIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaGFyZUlkID0gb2JqLmdldFNoYXJlSWQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNoYXJlTGluayA9IG9iai5nZXRTaGFyZUxpbmsoKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVMb2cuYWRkU2hhcmVMb2coc2hhcmVJZCwgc2hhcmVQd2QsIHNoYXJlTGluaywgY29uc3RhbnQuc291cmNlLndlaXl1bik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VyLndhcm4oInB3ZCBzaGFyZSBlcnJvciIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmFkZFJlc3BvbnNlSW50ZXJjZXB0b3IgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsKICAgICAgICAgICAgdmFyIHN1Y2Nlc3MgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzcG9uc2UucmVxdWVzdCwgcmVzcG9uc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIGVycm9yID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgb2JqLmdldEF4aW9zKCkgJiYgb2JqLmdldEF4aW9zKCkuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShzdWNjZXNzLCBlcnJvcik7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dCb3ggPSBmdW5jdGlvbiAoYm9keSkgewogICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSAnPGRpdiBjbGFzcz0ibW9kYWwgbW9kYWwtc2hvdyIgaWQ9ImZpbGUtbW9kYWwiPjxiIGNsYXNzPSJtb2RhbC1tYXNrIj48L2I+PGRpdiBjbGFzcz0ibW9kYWwtZGlhbG9nIG1vZGFsLWRpYWxvZy02ODAiPjxkaXYgY2xhc3M9Im1vZGFsLWRpYWxvZy1oZCBjbGVhcmZpeCI+PGg0IGNsYXNzPSJtb2RhbC1kaWFsb2ctdGl0bGUiPuaWh+S7tuS4i+i9vTwvaDQ+PGJ1dHRvbiBjbGFzcz0iYnRuLWljb24gaWNvbiBpY29uLXBvcC1jbG9zZSI+PC9idXR0b24+PC9kaXY+PGRpdiBjbGFzcz0ibW9kYWwtZGlhbG9nLWJkIG1vZGFsLWJvZHkiPjwvZGl2PjwvZGl2PjwvZGl2Pic7CiAgICAgICAgICAgIGlmICgkKCIjZmlsZS1tb2RhbCIpLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgICAgICAkKCJib2R5IikuYXBwZW5kKHRlbXBsYXRlKTsKICAgICAgICAgICAgICAgICQoIiNmaWxlLW1vZGFsIC5pY29uLXBvcC1jbG9zZSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAkKCIjZmlsZS1tb2RhbCIpLmhpZGUoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgICQoIiNmaWxlLW1vZGFsIikuc2hvdygpOwogICAgICAgICAgICAkKCIjZmlsZS1tb2RhbCAubW9kYWwtYm9keSIpLnNhZmVIdG1sKGJvZHkpOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93U2hhcmVEb3dubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGZpbGVEYXRhID0gb2JqLmdldFNlbGVjdGVkU2hhcmVGaWxlRGF0YSgpOwogICAgICAgICAgICBpZiAoZmlsZURhdGEubm9kZV9saXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLnNob3dUaXBFcnJvcigi6K+36YCJ5oup6Iez5bCR5LiA5Liq5paH5Lu2L+aWh+S7tuWkuSIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBvYmoucmVxdWVzdFNoYXJlRG93bmxvYWQoZmlsZURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBvYmouc2hvd1NoYXJlRG93bmxvYWRCb3goZmlsZURhdGEsIHJlc3BvbnNlKTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBvYmouc2hvd1RpcEVycm9yKHJlc3BvbnNlLm1zZyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93SG9tZURvd25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZmlsZURhdGEgPSBvYmouZ2V0U2VsZWN0ZWRTaGFyZUZpbGVEYXRhKCk7CiAgICAgICAgICAgIGlmIChmaWxlRGF0YS5ub2RlX2xpc3QubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgIHJldHVybiBvYmouc2hvd1RpcEVycm9yKCLor7fpgInmi6noh7PlsJHkuIDkuKrmlofku7Yv5paH5Lu25aS5Iik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG9iai5yZXF1ZXN0SG9tZURvd25sb2FkKGZpbGVEYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgb2JqLnNob3dTaGFyZURvd25sb2FkQm94KGZpbGVEYXRhLCByZXNwb25zZSk7CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgb2JqLnNob3dUaXBFcnJvcihyZXNwb25zZS5tc2cpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmoucGFyc2VEb3duRmlsZSA9IGZ1bmN0aW9uIChmaWxlRGF0YSkgewogICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSAiIiwgcGFja05hbWUgPSAiIjsKICAgICAgICAgICAgaWYgKGZpbGVEYXRhLmRpcl9saXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGlmIChmaWxlRGF0YS5maWxlX2xpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgIHBhY2tOYW1lID0gZmlsZURhdGEuZGlyX2xpc3RbMF0uZmlsZW5hbWUgKyAiIOetiSIgKyAoZmlsZURhdGEuZGlyX2xpc3QubGVuZ3RoICsgZmlsZURhdGEuZmlsZV9saXN0Lmxlbmd0aCkgKyAi5Liq5paH5Lu2IjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHBhY2tOYW1lID0gZmlsZURhdGEuZGlyX2xpc3RbMF0uZmlsZW5hbWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IHBhY2tOYW1lICsgIi56aXAiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgaWYgKGZpbGVEYXRhLmZpbGVfbGlzdC5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgcGFja05hbWUgPSBmaWxlRGF0YS5ub2RlX2xpc3RbMF0uZ2V0TmFtZU5vRXh0KCkgKyAiIOetiSIgKyBmaWxlRGF0YS5maWxlX2xpc3QubGVuZ3RoICsgIuS4quaWh+S7tiI7CiAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWUgPSBwYWNrTmFtZSArICIuemlwIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lID0gZmlsZURhdGEuZmlsZV9saXN0WzBdLmZpbGVuYW1lOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBmaWxlX25hbWU6IGZpbGVOYW1lLAogICAgICAgICAgICAgICAgcGFja19uYW1lOiBwYWNrTmFtZQogICAgICAgICAgICB9OwogICAgICAgIH07CgogICAgICAgIG9iai5yZXF1ZXN0SG9tZURvd25sb2FkID0gZnVuY3Rpb24gKGZpbGVEYXRhKSB7CiAgICAgICAgICAgIHZhciBiYXNlUmVxdWVzdCA9IG9iai5nZXRCYXNlUmVxdWVzdCgpOwogICAgICAgICAgICB2YXIgZG93bkZpbGUgPSBvYmoucGFyc2VEb3duRmlsZShmaWxlRGF0YSk7CiAgICAgICAgICAgIGlmIChiYXNlUmVxdWVzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGRvd25GaWxlLnBhY2tfbmFtZSA/IGJhc2VSZXF1ZXN0LmdldFBhY2tVcmwoZmlsZURhdGEubm9kZV9saXN0LCB7fSkgOiBiYXNlUmVxdWVzdC5nZXRTaW5nbGVVcmwoZmlsZURhdGEubm9kZV9saXN0LCB7fSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgICAgIHJlamVjdCh7IHJldGNvZGU6IC0xLCBtc2c6ICLnlJ/miJDpk77mjqXlpLHotKUiIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmoucmVxdWVzdFNoYXJlRG93bmxvYWQgPSBmdW5jdGlvbiAoZmlsZURhdGEpIHsKICAgICAgICAgICAgdmFyIHNoYXJlRmlsZSA9IG9iai5nZXRTaGFyZUZpbGUoKSwgZG93bmxvYWRSZXF1ZXN0ID0gb2JqLmdldERvd25sb2FkUmVxdWVzdCgpOwogICAgICAgICAgICB2YXIgZG93bkZpbGUgPSBvYmoucGFyc2VEb3duRmlsZShmaWxlRGF0YSk7CiAgICAgICAgICAgIGlmIChzaGFyZUZpbGUgJiYgZG93bmxvYWRSZXF1ZXN0KSB7CiAgICAgICAgICAgICAgICB2YXIgZGV0YWlsID0gewogICAgICAgICAgICAgICAgICAgIHNoYXJlS2V5OiBzaGFyZUZpbGUuc2hhcmVLZXksCiAgICAgICAgICAgICAgICAgICAgc2hhcmVQd2Q6IHNoYXJlRmlsZS5zaGFyZVB3ZCwKICAgICAgICAgICAgICAgICAgICBmaWxlT3duZXI6IHNoYXJlRmlsZS5zaGFyZU93bmVyLAogICAgICAgICAgICAgICAgICAgIGRvd25sb2FkVHlwZTogMCwKICAgICAgICAgICAgICAgICAgICBwYWNrTmFtZTogZG93bkZpbGUucGFja19uYW1lLAogICAgICAgICAgICAgICAgICAgIHBkaXJLZXk6ICIiLAogICAgICAgICAgICAgICAgICAgIGRpckxpc3Q6IGZpbGVEYXRhLmRpcl9saXN0LAogICAgICAgICAgICAgICAgICAgIGZpbGVMaXN0OiBmaWxlRGF0YS5maWxlX2xpc3QKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gZG93bkZpbGUucGFja19uYW1lID8gZG93bmxvYWRSZXF1ZXN0LnNoYXJlUGFydERvd25sb2FkKGRldGFpbCkgOiBkb3dubG9hZFJlcXVlc3Quc2hhcmVCYXRjaERvd25sb2FkKGRldGFpbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgICAgIHJlamVjdCh7IHJldGNvZGU6IC0xLCBtc2c6ICLnlJ/miJDpk77mjqXlpLHotKUiIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd1NoYXJlRG93bmxvYWRCb3ggPSBmdW5jdGlvbiAoZmlsZURhdGEsIHJlc3BvbnNlKSB7CiAgICAgICAgICAgIHZhciBkb3duRmlsZSA9IG9iai5wYXJzZURvd25GaWxlKGZpbGVEYXRhKTsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRvd25sb2FkX3VybCkgewogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihkb3duRmlsZSwgcmVzcG9uc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihkb3duRmlsZSwgcmVzcG9uc2UuZmlsZV9saXN0WzBdKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGh0bWwgPSAnPGRpdiBzdHlsZT0icGFkZGluZzogMjBweDsgb3ZlcmZsb3cteTogYXV0bzsiPic7CiAgICAgICAgICAgIHZhciByb3dTdHlsZSA9ICJtYXJnaW46MTBweCAwcHg7b3ZlcmZsb3c6aGlkZGVuOyB3aGl0ZS1zcGFjZTpub3dyYXA7IHRleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7IjsKICAgICAgICAgICAgaHRtbCArPSAnPHA+JyArIGRvd25GaWxlLmZpbGVfbmFtZSArICc8L3A+JzsKICAgICAgICAgICAgaHRtbCArPSAnPHAgc3R5bGU9IicgKyByb3dTdHlsZSArICciPjxhIHRpdGxlPSInICsgZG93bkZpbGUuZG93bmxvYWRfdXJsICsgJyIgaHJlZj0iJyArIGRvd25GaWxlLmRvd25sb2FkX3VybCArICciIHN0eWxlPSJjb2xvcjogYmx1ZTsiPicgKyBkb3duRmlsZS5kb3dubG9hZF91cmwgKyAnPC9hPjwvcD4nOwogICAgICAgICAgICBodG1sICs9ICc8ZGl2Pic7CiAgICAgICAgICAgIG9iai5zaG93Qm94KGh0bWwpOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93VGlwU3VjY2VzcyA9IGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgb2JqLmdldE1vZGFsKCkgJiYgb2JqLmdldE1vZGFsKCkuc3VjY2Vzcyhtc2cpOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93VGlwRXJyb3IgPSBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICAgIG9iai5nZXRNb2RhbCgpICYmIG9iai5nZXRNb2RhbCgpLmVycm9yKG1zZyk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFNoYXJlSWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB1cmwgPSByb3V0ZXIuZ2V0VXJsKCk7CiAgICAgICAgICAgIHZhciBtYXRjaCA9IHVybC5tYXRjaCgvc2hhcmUud2VpeXVuLmNvbVwvKFswLTlhLXpdKykvaSk7CiAgICAgICAgICAgIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogbnVsbDsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0U2hhcmVMaW5rID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gcm91dGVyLmdldFVybCgpOwogICAgICAgIH07CgogICAgICAgIG9iai5pc0hvbWVQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAocm91dGVyLmdldFVybCgpLmluZGV4T2YoIndlaXl1bi5jb20vZGlzayIpID49IDApIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmlzUHdkU2hhcmVPcGVuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb3B0aW9uLmlzT3B0aW9uQWN0aXZlKG9wdGlvbi5jb25zdGFudC53ZWl5dW5fc2hhcmVfc3RhdHVzKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0U2VsZWN0ZWRTaGFyZUZpbGVEYXRhID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZmlsZURhdGEgPSB7CiAgICAgICAgICAgICAgICBub2RlX2xpc3Q6IG9iai5nZXRTZWxlY3RlZEZpbGVOb2RlcygpLAogICAgICAgICAgICAgICAgZGlyX2xpc3Q6IFtdLAogICAgICAgICAgICAgICAgZmlsZV9saXN0OiBbXQogICAgICAgICAgICB9OwogICAgICAgICAgICBmaWxlRGF0YS5ub2RlX2xpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgaWYgKGl0ZW0uZ2V0U2l6ZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBmaWxlID0gewogICAgICAgICAgICAgICAgICAgICAgICBmaWxlX2lkOiBpdGVtLmdldElkKCksCiAgICAgICAgICAgICAgICAgICAgICAgIHBkaXJfa2V5OiBpdGVtLmdldFBkaXJLZXkoKSwKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IGl0ZW0uZ2V0TmFtZSgpLAogICAgICAgICAgICAgICAgICAgICAgICBmaWxlX3NpemU6IGl0ZW0uZ2V0U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5pc0RpcigpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVEYXRhLmRpcl9saXN0LnB1c2goZmlsZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBmaWxlRGF0YS5maWxlX2xpc3QucHVzaChmaWxlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gZmlsZURhdGE7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFNlbGVjdGVkRmlsZU5vZGVzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZmlsZU5vZGVzID0gW107CiAgICAgICAgICAgIGlmIChvYmouaXNIb21lUGFnZSgpKSB7CiAgICAgICAgICAgICAgICBmaWxlTm9kZXMgPSBvYmouZ2V0SG9tZUZpbGVOb2RlcygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdmFyIHNoYXJlRmlsZSA9IG9iai5nZXRTaGFyZUZpbGUoKTsKICAgICAgICAgICAgICAgIGlmIChzaGFyZUZpbGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoc2hhcmVGaWxlLmlzU2luZ2xlRmlsZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmaWxlTm9kZXMgPSBzaGFyZUZpbGUuY2hpbGROb2RlczsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOb2RlcyA9IHNoYXJlRmlsZS5zZWxlY3RlZE5vZGVzOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZmlsZU5vZGVzOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRIb21lRmlsZU5vZGVzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZmlsZU5vZGVzID0gW107CiAgICAgICAgICAgIHZhciBzdG9yZSA9IG9iai5nZXRTdG9yZSgpOwogICAgICAgICAgICB2YXIgdXJsID0gbG9jYXRpb24uaHJlZjsKICAgICAgICAgICAgdmFyIGZpbHRlciA9IGZ1bmN0aW9uIChub2RlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5pc1NlbGVjdGVkKCkgPyAxIDogMDsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKHN0b3JlIGluc3RhbmNlb2YgT2JqZWN0KSB7CiAgICAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoIndlaXl1bi5jb20vZGlzay9kb2MiKSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgZmlsZU5vZGVzID0gc3RvcmUuc3RhdGUuZG9jLmN1ckNhdGVOb2RlLmdldEtpZE5vZGVzKCkuZmlsdGVyKGZpbHRlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigid2VpeXVuLmNvbS9kaXNrL3Bob3RvIikgPj0gMCkgewogICAgICAgICAgICAgICAgICAgIGZpbGVOb2RlcyA9IHN0b3JlLnN0YXRlLnBob3RvLmN1ckNhdGVOb2RlLmdldEtpZE5vZGVzKCkuZmlsdGVyKGZpbHRlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigid2VpeXVuLmNvbS9kaXNrL3ZpZGVvIikgPj0gMCkgewogICAgICAgICAgICAgICAgICAgIGZpbGVOb2RlcyA9IHN0b3JlLnN0YXRlLnZpZGVvLmNhdGVOb2RlLmdldEtpZE5vZGVzKCkuZmlsdGVyKGZpbHRlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigid2VpeXVuLmNvbS9kaXNrL2F1aWRvIikgPj0gMCkgewogICAgICAgICAgICAgICAgICAgIGZpbGVOb2RlcyA9IHN0b3JlLnN0YXRlLmF1ZGlvLmNhdGVOb2RlLmdldEtpZE5vZGVzKCkuZmlsdGVyKGZpbHRlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigid2VpeXVuLmNvbS9kaXNrL3RpbWUiKSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgZmlsZU5vZGVzID0gc3RvcmUuc3RhdGUudGltZS5yb290Tm9kZS5nZXRLaWROb2RlcygpLmZpbHRlcihmaWx0ZXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAodXJsLmluZGV4T2YoIndlaXl1bi5jb20vZGlzay9zaGFyZWRpciIpID49IDApIHsKICAgICAgICAgICAgICAgICAgICBmaWxlTm9kZXMgPSBzdG9yZS5zdGF0ZS5zaGFyZWRpci5jdXJOb2RlLmdldEtpZE5vZGVzKCkuZmlsdGVyKGZpbHRlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigid2VpeXVuLmNvbS9kaXNrL3JlY2VudCIpID49IDApIHsKICAgICAgICAgICAgICAgICAgICB2YXIga2lkRmVlZHMgPSBzdG9yZS5zdGF0ZS5yZWNlbnQucm9vdE5vZGUuZ2V0S2lkRmVlZHMoKTsKICAgICAgICAgICAgICAgICAgICBraWRGZWVkcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWVkLmlzU2VsZWN0ZWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZU5vZGVzID0gZmlsZU5vZGVzLmNvbmNhdChmZWVkLmdldEtpZE5vZGVzKCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigid2VpeXVuLmNvbS9kaXNrL3JlY3ljbGUiKSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgZmlsZU5vZGVzID0gc3RvcmUuc3RhdGUucmVjeWNsZS5yb290Tm9kZS5nZXRLaWROb2RlcygpLmZpbHRlcihmaWx0ZXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAoc3RvcmUuc3RhdGUuZGlzaykgewogICAgICAgICAgICAgICAgICAgIGZpbGVOb2RlcyA9IHN0b3JlLnN0YXRlLmRpc2suY3VyTm9kZS5nZXRLaWROb2RlcygpLmZpbHRlcihmaWx0ZXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBmaWxlTm9kZXM7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFNoYXJlRmlsZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHN0b3JlID0gb2JqLmdldFN0b3JlKCk7CiAgICAgICAgICAgIGlmIChzdG9yZSBpbnN0YW5jZW9mIE9iamVjdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLnNoYXJlZmlsZS5zaGFyZUZpbGU7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0QmFzZVJlcXVlc3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBvYmoubWF0Y2hXZWJwYWNrTW9kdWxlKCJiYXNlX3JlcXVlc3QiLCBmdW5jdGlvbiAobW9kdWxlLCBuYW1lKSB7CiAgICAgICAgICAgICAgICBpZiAobW9kdWxlICYmIG1vZHVsZS5nZXRTaW5nbGVVcmwpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9kdWxlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0RG93bmxvYWRSZXF1ZXN0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLm1hdGNoV2VicGFja01vZHVsZSgiZG93bmxvYWRfcmVxdWVzdCIsIGZ1bmN0aW9uIChtb2R1bGUsIG5hbWUpIHsKICAgICAgICAgICAgICAgIGlmIChtb2R1bGUgJiYgbW9kdWxlLkRvd25sb2FkUmVxdWVzdCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgbW9kdWxlLkRvd25sb2FkUmVxdWVzdCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0QXhpb3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBvYmoubWF0Y2hXZWJwYWNrTW9kdWxlKCJheGlvcyIsIGZ1bmN0aW9uIChtb2R1bGUsIG5hbWUpIHsKICAgICAgICAgICAgICAgIGlmIChtb2R1bGUgJiYgbW9kdWxlLkF4aW9zKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldE1vZGFsID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLm1hdGNoV2VicGFja01vZHVsZSgibW9kYWwiLCBmdW5jdGlvbiAobW9kdWxlLCBuYW1lKSB7CiAgICAgICAgICAgICAgICBpZiAobW9kdWxlICYmIG1vZHVsZS5jb25maXJtICYmIG1vZHVsZS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFN0b3JlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLm1hdGNoV2VicGFja01vZHVsZSgic3RvcmUiLCBmdW5jdGlvbiAobW9kdWxlLCBuYW1lKSB7CiAgICAgICAgICAgICAgICBpZiAobW9kdWxlICYmIG1vZHVsZS5kZWZhdWx0ICYmIG1vZHVsZS5kZWZhdWx0Ll9tb2R1bGVzTmFtZXNwYWNlTWFwKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZS5kZWZhdWx0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmoubWF0Y2hXZWJwYWNrTW9kdWxlID0gZnVuY3Rpb24gKG5hbWUsIG1hdGNoRnVuYykgewogICAgICAgICAgICBpZiAoIW9iai5tb2R1bGVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqLndlYnBhY2tfcmVxdWlyZS5jKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gbWF0Y2hGdW5jKG9iai53ZWJwYWNrX3JlcXVpcmUoa2V5KSwga2V5KTsKICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb2JqLm1vZHVsZXNbbmFtZV0gPSBtYXRjaDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG9iai5tb2R1bGVzW25hbWVdOwogICAgICAgIH07CgogICAgICAgIG9iai5pbml0V2VicGFja1JlcXVpcmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBpbmplY3ROYW1lID0gIl9uZF9pbmplY3RfIjsKICAgICAgICAgICAgdmFyIG1vcmVNb2R1bGVzID0ge307CiAgICAgICAgICAgIG1vcmVNb2R1bGVzW2luamVjdE5hbWVdID0gZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAgICAgICAgICAgb2JqLndlYnBhY2tfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX187CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHVuc2FmZVdpbmRvdy53ZWJwYWNrSnNvbnAoW2luamVjdE5hbWVdLCBtb3JlTW9kdWxlcywgW2luamVjdE5hbWVdKTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgiYXBwX2xhbnpvdXMiLCBbInJvdXRlciIsICJvcHRpb24iLCAibG9nZ2VyIiwgInVuc2FmZVdpbmRvdyIsICJjb25zdGFudCIsICJydW50aW1lIiwgImFwaSIsICJzaGFyZUxvZyIsICIkIl0sIGZ1bmN0aW9uIChyb3V0ZXIsIG9wdGlvbiwgbG9nZ2VyLCB1bnNhZmVXaW5kb3csIGNvbnN0YW50LCBydW50aW1lLCBhcGksIHNoYXJlTG9nLCAkKSB7CiAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgdmVyaWZ5X3BhZ2U6IHsKICAgICAgICAgICAgICAgIHNldFB3ZDogbnVsbCwKICAgICAgICAgICAgICAgIHNoYXJlX3B3ZDogbnVsbCwKICAgICAgICAgICAgICAgIHN1Ym1pdF9wd2Q6IG51bGwKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5ydW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB1cmwgPSByb3V0ZXIuZ2V0VXJsKCk7CiAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZigibGFuem91cy5jb20iKSA+IDAgfHwgdXJsLmluZGV4T2YoImxhbnpvdXguY29tIikgPiAwKSB7CiAgICAgICAgICAgICAgICBvcHRpb24uaXNPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LmxhbnpvdXNfcGFnZV92ZXJpZnkpICYmIG9iai5pbml0VmVyaWZ5UGFnZSgpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFZlcmlmeVBhZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG9iai5yZWdpc3RlclN0b3JlU2hhcmVQd2QoKTsKCiAgICAgICAgICAgIG9iai5pbml0VmVyaWZ5UGFnZUVsZW1lbnQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgb2JqLmF1dG9QYWRkaW5nU2hhcmVQd2QoKTsKCiAgICAgICAgICAgICAgICBvYmoucmVnaXN0ZXJQd2RTaGFyZVN3aXRjaCgpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFZlcmlmeVBhZ2VFbGVtZW50ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciBzaGFyZUlkID0gb2JqLmdldFNoYXJlSWQoKTsKICAgICAgICAgICAgdmFyICRwd2QgPSAkKCIjcHdkIik7CiAgICAgICAgICAgIGlmIChzaGFyZUlkICYmICRwd2QubGVuZ3RoKSB7CgogICAgICAgICAgICAgICAgLy8g6K6+572u5YiG5Lqr5a+G56CBCiAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2Uuc2V0UHdkID0gZnVuY3Rpb24gKHB3ZCkgewogICAgICAgICAgICAgICAgICAgICRwd2QudmFsKHB3ZCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIC8vIOaPkOS6pOWvhueggQogICAgICAgICAgICAgICAgb2JqLnZlcmlmeV9wYWdlLnN1Ym1pdF9wd2QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgJCgiI3N1YiIpLmNsaWNrKCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBvYmouaW5pdFZlcmlmeVBhZ2VFbGVtZW50KGNhbGxiYWNrKTsKICAgICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouYXV0b1BhZGRpbmdTaGFyZVB3ZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHNoYXJlSWQgPSBvYmouZ2V0U2hhcmVJZCgpOwogICAgICAgICAgICB2YXIgc2hhcmVMaW5rID0gb2JqLmdldFNoYXJlTGluaygpOwogICAgICAgICAgICBhcGkucXVlcnlTaGFyZVB3ZChjb25zdGFudC5zb3VyY2UubGFuem91cywgc2hhcmVJZCwgc2hhcmVMaW5rLCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5jb2RlID09IDEpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc2hhcmVQd2QgPSByZXNwb25zZS5kYXRhLnNoYXJlX3B3ZDsKICAgICAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2Uuc2hhcmVfcHdkID0gc2hhcmVQd2Q7CiAgICAgICAgICAgICAgICAgICAgb2JqLnZlcmlmeV9wYWdlLnNldFB3ZChzaGFyZVB3ZCk7CiAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dUaXAoMSwgIuWhq+WFheWvhueggeaIkOWKnyIsIDIwMDApOwoKICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uLmlzT3B0aW9uQWN0aXZlKG9wdGlvbi5jb25zdGFudC5sYW56b3VzX2F1dG9fanVtcCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnZlcmlmeV9wYWdlLnN1Ym1pdF9wd2QgJiYgb2JqLnZlcmlmeV9wYWdlLnN1Ym1pdF9wd2QoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBvYmouc2hvd1RpcCgwLCAi5pqC5peg5Lq65YiG5Lqr5a+G56CBIiwgMjAwMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5yZWdpc3RlclB3ZFNoYXJlU3dpdGNoID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgaHRtbCA9ICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi10b3A6IDEwcHg7Ij7liIbkuqvorr7nva4gPGlucHV0IHR5cGU9ImNoZWNrYm94IiBjaGVja2VkIGlkPSJuZC1zaGFyZS1jaGVjayIgc3R5bGU9InZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IiA+IDxhIHN0eWxlPSJjdXJzb3I6IHBvaW50ZXI7IiBjbGFzcz0ibmQtb3Blbi1wYWdlLW9wdGlvbiIgaHJlZj0iamF2YXNjcmlwdDo7IiB0aXRsZT0i54K55Ye75p+l55yL5pu05aSa6ISa5pys6YWN572uIj7lhbHkuqvlr4bnoIE8L2E+PC9kaXY+JzsKICAgICAgICAgICAgaWYgKCQoIi5vZmYiKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICQoIi5vZmYiKS5hZnRlcihodG1sKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICQoIi5wYXNzd2RkaXYtdXNlciIpLmFmdGVyKGh0bWwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG9iai5pc1B3ZFNoYXJlT3BlbigpIHx8ICQoIiNuZC1zaGFyZS1jaGVjayIpLnJlbW92ZUF0dHIoImNoZWNrZWQiKTsKCiAgICAgICAgICAgIC8vIOW8gOWFsy3kuovku7YKICAgICAgICAgICAgJCgiI25kLXNoYXJlLWNoZWNrIikub24oImNoYW5nZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmlzKCc6Y2hlY2tlZCcpKSB7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnNldE9wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQubGFuem91c19zaGFyZV9zdGF0dXMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnNldE9wdGlvblVuQWN0aXZlKG9wdGlvbi5jb25zdGFudC5sYW56b3VzX3NoYXJlX3N0YXR1cyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g5omT5byA6YWN572u6aG1CiAgICAgICAgICAgICQoIi5uZC1vcGVuLXBhZ2Utb3B0aW9uIikuY2xpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcnVudGltZS5vcGVuT3B0aW9uc1BhZ2UoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJlZ2lzdGVyU3RvcmVTaGFyZVB3ZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdW5zYWZlV2luZG93LiQoZG9jdW1lbnQpLmFqYXhDb21wbGV0ZShmdW5jdGlvbiAoZXZlbnQsIHhociwgb3B0aW9ucykgewogICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gb3B0aW9ucy5kYXRhLm1hdGNoKC9wd2Q9KFx3KykvKTsKICAgICAgICAgICAgICAgIGlmICghbWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IG9wdGlvbnMuZGF0YS5tYXRjaCgvcD0oXHcrKS8pOwogICAgICAgICAgICAgICAgICAgIGlmICghbWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci53YXJuKCJwd2Qgc2hhcmUgbm90IG1hdGNoIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBzaGFyZVB3ZCA9IG1hdGNoWzFdOwoKICAgICAgICAgICAgICAgIGlmIChzaGFyZVB3ZCA9PSBvYmoudmVyaWZ5X3BhZ2Uuc2hhcmVfcHdkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci53YXJuKCJwd2Qgc2hhcmUgbm90IGNoYW5nZSIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghb2JqLmlzUHdkU2hhcmVPcGVuKCkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VyLndhcm4oInB3ZCBzaGFyZSBjbG9zZWQiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgc2hhcmVJZCA9IG9iai5nZXRTaGFyZUlkKCk7CiAgICAgICAgICAgICAgICB2YXIgc2hhcmVMaW5rID0gb2JqLmdldFNoYXJlTGluaygpOwogICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gb2JqLnBhcnNlSnNvbih4aHIucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnp0ID09IDEgJiYgc2hhcmVQd2QpIHsKICAgICAgICAgICAgICAgICAgICBzaGFyZUxvZy5hZGRTaGFyZUxvZyhzaGFyZUlkLCBzaGFyZVB3ZCwgc2hhcmVMaW5rLCBjb25zdGFudC5zb3VyY2UubGFuem91cyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybigicHdkIHNoYXJlIGVycm9yIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93VGlwID0gZnVuY3Rpb24gKGNvZGUsIG1zZywgdGltZW91dCkgewogICAgICAgICAgICBpZiAodW5zYWZlV2luZG93LnNtcykgewogICAgICAgICAgICAgICAgdW5zYWZlV2luZG93LnNtcyhtc2cpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yOwogICAgICAgICAgICAgICAgaWYgKCQoIi5vZmYiKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICBzZWxlY3RvciA9ICIjcHdkZXJyIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yID0gIiNpbmZvIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChjb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgJChzZWxlY3Rvcikuc2FmZUh0bWwoJzxzcGFuIHN0eWxlPSJjb2xvcjogZ3JlZW47Ij4nICsgbXNnICsgJzwvc3Bhbj4nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICQoc2VsZWN0b3IpLnNhZmVIdG1sKCc8c3BhbiBzdHlsZT0iY29sb3I6IHJlZDsiPicgKyBtc2cgKyAnPC9zcGFuPicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgJChzZWxlY3RvcikudGV4dCgiIik7CiAgICAgICAgICAgICAgICB9LCB0aW1lb3V0KTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTaGFyZUlkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgbWF0Y2g7CgogICAgICAgICAgICBtYXRjaCA9IC9sYW56b3VzLmNvbVwvKFtcd10rKVwvKFthLXowLTktXyVdezQsfSkvZ2kuZXhlYyhsb2NhdGlvbi5ocmVmKTsKICAgICAgICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hbMV0gKyAiLyIgKyBtYXRjaFsyXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbWF0Y2ggPSAvbGFuem91cy5jb21cLyhbYS16MC05LV9dezQsfSkvZ2kuZXhlYyhsb2NhdGlvbi5ocmVmKTsKICAgICAgICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hbMV07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbi5wYXRobmFtZS5zdWJzdHIoMSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFNoYXJlTGluayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRvcC5sb2NhdGlvbi5ocmVmOwogICAgICAgIH07CgogICAgICAgIG9iai5pc1B3ZFNoYXJlT3BlbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi5pc09wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQubGFuem91c19zaGFyZV9zdGF0dXMpOwogICAgICAgIH07CgogICAgICAgIG9iai5wYXJzZUpzb24gPSBmdW5jdGlvbiAoanNvblN0cikgewogICAgICAgICAgICB2YXIganNvbk9iamVjdCA9IHt9OwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYgKGpzb25TdHIpIHsKICAgICAgICAgICAgICAgICAgICBqc29uT2JqZWN0ID0gSlNPTi5wYXJzZShqc29uU3RyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaCAoZSkgeyB9CiAgICAgICAgICAgIHJldHVybiBqc29uT2JqZWN0OwogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCJhcHBfMTg5IiwgWyJyb3V0ZXIiLCAib3B0aW9uIiwgImxvZ2dlciIsICJjb25zdGFudCIsICJhcGkiLCAic2hhcmVMb2ciLCAicnVudGltZSIsICJ1bnNhZmVXaW5kb3ciLCAiJCJdLCBmdW5jdGlvbiAocm91dGVyLCBvcHRpb24sIGxvZ2dlciwgY29uc3RhbnQsIGFwaSwgc2hhcmVMb2csIHJ1bnRpbWUsIHVuc2FmZVdpbmRvdywgJCkgewogICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgIHZlcmlmeV9wYWdlOiB7CiAgICAgICAgICAgICAgICBzaGFyZV9wd2Q6IG51bGwKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5ydW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB1cmwgPSByb3V0ZXIuZ2V0VXJsKCk7CiAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZigiY2xvdWQuMTg5LmNuL3QiKSA+IDApIHsKICAgICAgICAgICAgICAgIG9iai5pbml0U2hhcmVQYWdlKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigiY2xvdWQuMTg5LmNuL21haW4iKSA+IDAgfHwgdXJsLmluZGV4T2YoImNsb3VkLjE4OS5jbi9waG90byIpID4gMCkgewogICAgICAgICAgICAgICAgb3B0aW9uLmlzT3B0aW9uQWN0aXZlKG9wdGlvbi5jb25zdGFudC50eTE4OV9wYWdlX2hvbWUpICYmIG9iai5pbml0SG9tZVBhZ2UoKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmluaXRIb21lUGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKCQoIiNKX0NyZWF0ZSIpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgJCgiI0pfQ3JlYXRlIikuYWZ0ZXIoJzxhIGNsYXNzPSJidG4gYnRuLXNob3ctbGluayIgc3R5bGU9ImJhY2tncm91bmQ6ICMyYjg5ZWE7IGNvbG9yOiAjZmZmOyBjdXJzb3I6IHBvaW50ZXIiPuaYvuekuumTvuaOpTwvYT4nKTsKICAgICAgICAgICAgICAgICQoIi5idG4tc2hvdy1saW5rIikub24oImNsaWNrIiwgb2JqLnNob3dEb3dubG9hZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoJCgiLkpDX1JlZnJlc2giKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICQoIi5KQ19SZWZyZXNoIikuYWZ0ZXIoJzxhIGNsYXNzPSJidG4gYnRuLXNob3ctbGluayIgc3R5bGU9ImJhY2tncm91bmQ6ICMyYjg5ZWE7IGNvbG9yOiAjZmZmOyBjdXJzb3I6IHBvaW50ZXIiPuaYvuekuumTvuaOpTwvYT4nKTsKICAgICAgICAgICAgICAgICQoIi5idG4tc2hvdy1saW5rIikub24oImNsaWNrIiwgb2JqLnNob3dEb3dubG9hZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KG9iai5pbml0SG9tZVBhZ2UsIDUwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFNoYXJlUGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKCQoIi5jb2RlLXBhbmVsIikubGVuZ3RoICYmIG9wdGlvbi5pc09wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQudHkxODlfcGFnZV92ZXJpZnkpKSB7CiAgICAgICAgICAgICAgICBvYmouaW5pdFZlcmlmeVBhZ2UoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKG9wdGlvbi5pc09wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQudHkxODlfcGFnZV9zaGFyZSkpIHsKICAgICAgICAgICAgICAgIG9iai5pbml0RG93bmxvYWRQYWdlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFZlcmlmeVBhZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG9iai5yZWdpc3RlclB3ZFNoYXJlU3dpdGNoKCk7CgogICAgICAgICAgICBvYmoucmVnaXN0ZXJTdG9yZVNoYXJlUHdkKCk7CgogICAgICAgICAgICBvYmouYXV0b1BhZGRpbmdTaGFyZVB3ZCgpOwogICAgICAgIH07CgogICAgICAgIG9iai5yZWdpc3RlclB3ZFNoYXJlU3dpdGNoID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgaHRtbCA9ICc8c3BhbiBzdHlsZT0iZmxvYXQ6cmlnaHQiPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZCBpZD0ibmQtc2hhcmUtY2hlY2siIHN0eWxlPSJ2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyI+IDxhIGNsYXNzPSJuZC1vcGVuLXBhZ2Utb3B0aW9uIG9uZS1wYW4tbGluay1tYXJrIiB0aXRsZT0i54K55Ye75p+l55yL5pu05aSa6ISa5pys6YWN572uIiBzdHlsZT0iY3Vyc29yOiBwb2ludGVyOyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsiPuWFseS6q+aPkOWPlueggTwvYT48L3NwYW4+JzsKICAgICAgICAgICAgJCgiLmNvZGUtcGFuZWwgLnRpdGxlIikuYXBwZW5kKGh0bWwpOwogICAgICAgICAgICBvYmouaXNQd2RTaGFyZU9wZW4oKSB8fCAkKCIjbmQtc2hhcmUtY2hlY2siKS5yZW1vdmVBdHRyKCJjaGVja2VkIik7CgogICAgICAgICAgICAvLyDlvIDlhbMt5LqL5Lu2CiAgICAgICAgICAgICQoIiNuZC1zaGFyZS1jaGVjayIpLm9uKCJjaGFuZ2UiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5pcygnOmNoZWNrZWQnKSkgewogICAgICAgICAgICAgICAgICAgIG9wdGlvbi5zZXRPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LnR5MTg5X3NoYXJlX3N0YXR1cyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBvcHRpb24uc2V0T3B0aW9uVW5BY3RpdmUob3B0aW9uLmNvbnN0YW50LnR5MTg5X3NoYXJlX3N0YXR1cyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g5omT5byA6YWN572u6aG1CiAgICAgICAgICAgICQoIi5uZC1vcGVuLXBhZ2Utb3B0aW9uIikuY2xpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcnVudGltZS5vcGVuT3B0aW9uc1BhZ2UoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJlZ2lzdGVyU3RvcmVTaGFyZVB3ZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdW5zYWZlV2luZG93LiQoZG9jdW1lbnQpLmFqYXhDb21wbGV0ZShmdW5jdGlvbiAoZXZlbnQsIHhociwgb3B0aW9ucykgewogICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0geGhyLnJlc3BvbnNlSlNPTjsKICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnVybC5pbmRleE9mKCJzaGFyZUZpbGVWZXJpZnlQYXNzLmFjdGlvbiIpID4gMCkgewogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSBpbnN0YW5jZW9mIE9iamVjdCAmJiByZXNwb25zZS5zaGFyZUlkICYmIHJlc3BvbnNlLmFjY2Vzc0NvZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNoYXJlUHdkID0gcmVzcG9uc2UuYWNjZXNzQ29kZTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaGFyZVB3ZCA9PSBvYmoudmVyaWZ5X3BhZ2Uuc2hhcmVfcHdkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VyLndhcm4oInB3ZCBzaGFyZSBub3QgY2hhbmdlIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb2JqLmlzUHdkU2hhcmVPcGVuKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2dnZXIud2FybigicHdkIHNoYXJlIGNsb3NlZCIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2hhcmVJZCA9IG9iai5nZXRTaGFyZUlkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaGFyZUxpbmsgPSBvYmouZ2V0U2hhcmVMaW5rKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJlTG9nLmFkZFNoYXJlTG9nKHNoYXJlSWQsIHNoYXJlUHdkLCBzaGFyZUxpbmssIGNvbnN0YW50LnNvdXJjZS50eTE4OSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybigicHdkIHNoYXJlIG5vdCBtYXRjaCIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmF1dG9QYWRkaW5nU2hhcmVQd2QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBzaGFyZUlkID0gb2JqLmdldFNoYXJlSWQoKTsKICAgICAgICAgICAgdmFyIHNoYXJlTGluayA9IG9iai5nZXRTaGFyZUxpbmsoKTsKICAgICAgICAgICAgYXBpLnF1ZXJ5U2hhcmVQd2QoY29uc3RhbnQuc291cmNlLnR5MTg5LCBzaGFyZUlkLCBzaGFyZUxpbmssIGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmNvZGUgPT0gMSkgewogICAgICAgICAgICAgICAgICAgIHZhciBzaGFyZVB3ZCA9IHJlc3BvbnNlLmRhdGEuc2hhcmVfcHdkOwogICAgICAgICAgICAgICAgICAgIG9iai52ZXJpZnlfcGFnZS5zaGFyZV9wd2QgPSBzaGFyZVB3ZDsKCiAgICAgICAgICAgICAgICAgICAgJCgiI2NvZGVfdHh0IikudmFsKHNoYXJlUHdkKTsKICAgICAgICAgICAgICAgICAgICBvYmouc2hvd1RpcCgxLCAi5aGr5YWF6K6/6Zeu56CB5oiQ5YqfIiwgMjAwMCk7CgogICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb24uaXNPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LnR5MTg5X2F1dG9fanVtcCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNhZmVXaW5kb3cuJCgiLmJ0bi52aXNpdCIpLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMDApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIG9iai5zaG93VGlwKDAsICLmmoLml6DkurrliIbkuqvorr/pl67noIEiLCAyMDAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dUaXAgPSBmdW5jdGlvbiAoY29kZSwgbXNnLCB0aW1lb3V0KSB7CiAgICAgICAgICAgIHZhciAkZWxlbWVudCA9ICQoIi52aXNpdF9lcnJvciIpOwogICAgICAgICAgICBpZiAoY29kZSkgewogICAgICAgICAgICAgICAgJGVsZW1lbnQuc2FmZUh0bWwoJzxzcGFuIHN0eWxlPSJjb2xvcjogZ3JlZW47Ij4nICsgbXNnICsgJzwvc3Bhbj4nKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICRlbGVtZW50LnNhZmVIdG1sKCc8c3BhbiBzdHlsZT0iY29sb3I6IHJlZDsiPicgKyBtc2cgKyAnPC9zcGFuPicpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICRlbGVtZW50LnNob3coKTsKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAkZWxlbWVudC5oaWRlKCk7CiAgICAgICAgICAgIH0sIHRpbWVvdXQpOwogICAgICAgIH07CgogICAgICAgIG9iai5pbml0RG93bmxvYWRQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAkKCIuYnRuLWRvd25sb2FkIikuYWZ0ZXIoJzxhIGNsYXNzPSJidG4gYnRuLXNob3ctbGluayIgc3R5bGU9ImJhY2tncm91bmQ6ICMyYjg5ZWE7IGN1cnNvcjogcG9pbnRlciI+5pi+56S66ZO+5o6lPC9hPicpOwogICAgICAgICAgICAkKCIuYnRuLXNob3ctbGluayIpLm9uKCJjbGljayIsIG9iai5zaG93RG93bmxvYWQpOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93RG93bmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBodG1sID0gJzxkaXYgc3R5bGU9InBhZGRpbmc6IDIwcHg7IGhlaWdodDogNDEwcHg7IG92ZXJmbG93LXk6IGF1dG87Ij4nOwogICAgICAgICAgICB2YXIgcm93U3R5bGUgPSAibWFyZ2luOjEwcHggMHB4OyBvdmVyZmxvdzpoaWRkZW47IHdoaXRlLXNwYWNlOm5vd3JhcDsgdGV4dC1vdmVyZmxvdzplbGxpcHNpczsiOwoKICAgICAgICAgICAgdmFyIGZpbGVJZHMgPSBvYmouZ2V0U2VsZWN0ZWRGaWxlSWRzKCksCiAgICAgICAgICAgICAgICBmaWxlTGlzdCA9IG9iai5nZXRTZWxlY3RlZEZpbGVMaXN0KCk7CgogICAgICAgICAgICBpZiAoZmlsZUxpc3QubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgICAgdmFyIHBhY2thZ2VVcmwgPSBvYmouYnVpbGRQYWNrYWdlVXJsKGZpbGVJZHMsICLmiZPljIXkuIvovb0uemlwIik7CiAgICAgICAgICAgICAgICBodG1sICs9ICc8cD7ljovnvKnljIU8L3A+JzsKICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxwIHN0eWxlPSInICsgcm93U3R5bGUgKyAnIj48YSB0aXRsZT0iJyArIHBhY2thZ2VVcmwgKyAnIiBocmVmPSInICsgcGFja2FnZVVybCArICciIHN0eWxlPSJjb2xvcjogYmx1ZTsiPicgKyBwYWNrYWdlVXJsICsgJzwvYT48L3A+JzsKICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxwPiZuYnNwOzwvcD4nOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmaWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgICAgICAgdmFyIGZpbGUgPSBpdGVtLmF0dHJpYnV0ZXM7CiAgICAgICAgICAgICAgICBpZiAoZmlsZS5pc0ZvbGRlcikgewogICAgICAgICAgICAgICAgICAgIGZpbGUuZG93bmxvYWRVcmwgPSBvYmouYnVpbGRQYWNrYWdlVXJsKGZpbGUuZmlsZUlkLCBmaWxlLmZpbGVOYW1lICsgIi56aXAiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGZpbGUuZG93bmxvYWRVcmwgPSBsb2NhdGlvbi5wcm90b2NvbCArIGZpbGUuZG93bmxvYWRVcmw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBodG1sICs9ICc8cD4nICsgKCsraW5kZXgpICsgJ++8micgKyAoZmlsZS5maWxlTmFtZSA/IGZpbGUuZmlsZU5hbWUgOiBmaWxlLmZpbGVJZCkgKyAnPC9wPic7CiAgICAgICAgICAgICAgICBodG1sICs9ICc8cCBzdHlsZT0iJyArIHJvd1N0eWxlICsgJyI+PGEgdGl0bGU9IicgKyBmaWxlLmRvd25sb2FkVXJsICsgJyIgaHJlZj0iJyArIGZpbGUuZG93bmxvYWRVcmwgKyAnIiBzdHlsZT0iY29sb3I6IGJsdWU7Ij4nICsgZmlsZS5kb3dubG9hZFVybCArICc8L2E+PC9wPic7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaHRtbCArPSAnPGRpdj4nOwogICAgICAgICAgICBvYmouc2hvd0JveChodG1sKTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd0JveCA9IGZ1bmN0aW9uIChib2R5KSB7CiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9ICc8ZGl2IGlkPSJKX0ZpbGVNb2RhbCIgY2xhc3M9InRyZWVCb3gtbW9kYWwgbW9kYWwgaW4iIHN0eWxlPSJkaXNwbGF5OmJsb2NrIj48ZGl2IGNsYXNzPSJtb2RhbC1kaWFsb2ciPjxkaXYgY2xhc3M9Im1vZGFsLWhlYWRlciI+PGEgY2xhc3M9ImNsb3NlIj7DlzwvYT48aDM+5paH5Lu25LiL6L29PC9oMz48L2Rpdj48ZGl2IGNsYXNzPSJtb2RhbC1ib2R5Ij48L2Rpdj48L2Rpdj48L2Rpdj4nOwogICAgICAgICAgICBpZiAoJCgiI0pfRmlsZU1vZGFsIikubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgICQoImJvZHkiKS5hcHBlbmQodGVtcGxhdGUpOwogICAgICAgICAgICAgICAgJCgiI0pfRmlsZU1vZGFsIC5jbG9zZSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAkKCIjSl9GaWxlTW9kYWwiKS5oaWRlKCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkKCIjSl9GaWxlTW9kYWwiKS5zaG93KCk7CiAgICAgICAgICAgICQoIiNKX0ZpbGVNb2RhbCAubW9kYWwtYm9keSIpLnNhZmVIdG1sKGJvZHkpOwogICAgICAgIH07CgogICAgICAgIG9iai5idWlsZFBhY2thZ2VVcmwgPSBmdW5jdGlvbiAoZmlsZUlkcywgZmlsZU5hbWUpIHsKICAgICAgICAgICAgdmFyIGRvd25sb2FkVXJsID0gdW5zYWZlV2luZG93LmVkcml2ZS5kb3dubG9hZFVybCwKICAgICAgICAgICAgICAgIHNlc3Npb25LZXkgPSB1bnNhZmVXaW5kb3cuZWRyaXZlLnNlc3Npb25LZXk7CiAgICAgICAgICAgIGZpbGVOYW1lIHx8IChmaWxlTmFtZSA9ICIiKTsKICAgICAgICAgICAgaWYgKHVuc2FmZVdpbmRvdy5fc2hhcmVJZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGxvY2F0aW9uLnByb3RvY29sICsgZG93bmxvYWRVcmwgKyAiP3Nlc3Npb25LZXk9IiArIHNlc3Npb25LZXkgKyAiJmZpbGVJZFM9IiArIGZpbGVJZHMgKyAiJmRvd25sb2FkVHlwZT0zJnNoYXJlSWQ9IiArIHVuc2FmZVdpbmRvdy5fc2hhcmVJZCArICImZmlsZW5hbWU9IiArIGVuY29kZVVSSUNvbXBvbmVudChmaWxlTmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbG9jYXRpb24ucHJvdG9jb2wgKyBkb3dubG9hZFVybCArICI/c2Vzc2lvbktleT0iICsgc2Vzc2lvbktleSArICImZmlsZUlkUz0iICsgZmlsZUlkcyArICImZG93bmxvYWRUeXBlPTEmZmlsZW5hbWU9IiArIGVuY29kZVVSSUNvbXBvbmVudChmaWxlTmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0U2VsZWN0ZWRGaWxlSWRzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZmlsZUlkTGlzdCA9IFtdOwogICAgICAgICAgICB2YXIgZmlsZUxpc3QgPSBvYmouZ2V0U2VsZWN0ZWRGaWxlTGlzdCgpOwogICAgICAgICAgICBmaWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICBmaWxlSWRMaXN0LnB1c2goaXRlbS5hdHRyaWJ1dGVzLmZpbGVJZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gZmlsZUlkTGlzdC5qb2luKCIsIik7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFNlbGVjdGVkRmlsZUxpc3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBtYWluVmlldyA9IG51bGwsIGZpbGVMaXN0ID0gW107CiAgICAgICAgICAgIGlmICh1bnNhZmVXaW5kb3cuZG93bmxvYWRVcmwpIHsKICAgICAgICAgICAgICAgIGZpbGVMaXN0ID0gWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogdW5zYWZlV2luZG93CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmICh1bnNhZmVXaW5kb3cuX3NoYXJlSWQpIHsKICAgICAgICAgICAgICAgIG1haW5WaWV3ID0gdW5zYWZlV2luZG93LmFwcFJvdXRlci5tYWluVmlldzsKICAgICAgICAgICAgICAgIGlmIChtYWluVmlldyBpbnN0YW5jZW9mIE9iamVjdCAmJiBtYWluVmlldy5maWxlTGlzdCkgewogICAgICAgICAgICAgICAgICAgIGZpbGVMaXN0ID0gbWFpblZpZXcuZmlsZUxpc3Q7CiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGVMaXN0LnNlbGVjdGVkKCkubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVMaXN0ID0gZmlsZUxpc3Quc2VsZWN0ZWQoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAodW5zYWZlV2luZG93Lm1haW5WaWV3KSB7CiAgICAgICAgICAgICAgICBtYWluVmlldyA9IHVuc2FmZVdpbmRvdy5tYWluVmlldzsKICAgICAgICAgICAgICAgIGlmIChtYWluVmlldy5maWxlTGlzdFRhYk9iaiAmJiBtYWluVmlldy5maWxlTGlzdFRhYk9ialttYWluVmlldy5vcHRpb25zLmZpbGVJZF0pIHsKICAgICAgICAgICAgICAgICAgICBmaWxlTGlzdCA9IG1haW5WaWV3LmZpbGVMaXN0VGFiT2JqW21haW5WaWV3Lm9wdGlvbnMuZmlsZUlkXS5maWxlTGlzdC5zZWxlY3RlZCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAobWFpblZpZXcuZ2V0U2VsZWN0ZWRNb2RlbHMpIHsKICAgICAgICAgICAgICAgICAgICBmaWxlTGlzdCA9IG1haW5WaWV3LmdldFNlbGVjdGVkTW9kZWxzKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBzZWxlY3RlZEZpbGVMaXN0ID0gW107CiAgICAgICAgICAgIGZpbGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIGlmIChpdGVtLmF0dHJpYnV0ZXMuZmlsZUlkID4gMCkgewogICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRmlsZUxpc3QucHVzaChpdGVtKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZEZpbGVMaXN0OwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTaGFyZUlkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdXJsID0gcm91dGVyLmdldFVybCgpOwogICAgICAgICAgICB2YXIgbWF0Y2ggPSB1cmwubWF0Y2goL2Nsb3VkXC4xODlcLmNuXC90XC8oWzAtOWEtel0rKS9pKTsKICAgICAgICAgICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0gOiBudWxsOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTaGFyZUxpbmsgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbi5ocmVmOwogICAgICAgIH07CgogICAgICAgIG9iai5pc1B3ZFNoYXJlT3BlbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi5pc09wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQudHkxODlfc2hhcmVfc3RhdHVzKTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgiYXBwX21hbmFnZSIsIFsibWV0YSIsICJ1bnNhZmVXaW5kb3ciXSwgZnVuY3Rpb24gKG1ldGEsIHVuc2FmZVdpbmRvdykgewogICAgICAgIHZhciBvYmogPSB7fTsKCiAgICAgICAgb2JqLnJ1biA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKG1ldGEuZXhpc3RNZXRhKCJtYW5hZ2UiKSkgewogICAgICAgICAgICAgICAgdW5zYWZlV2luZG93Lk9uZVBhbiA9IGNvbnRhaW5lcjsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoImFwcCIsIFsiYXBwUnVubmVyIl0sIGZ1bmN0aW9uIChhcHBSdW5uZXIpIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5ydW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGFwcFJ1bm5lci5ydW4oWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJhcHBfYmFpZHUiLAogICAgICAgICAgICAgICAgICAgIG1hdGNoczogWwogICAgICAgICAgICAgICAgICAgICAgICAiYmFpZHUuY29tIgogICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogImFwcF93ZWl5dW4iLAogICAgICAgICAgICAgICAgICAgIG1hdGNoczogWwogICAgICAgICAgICAgICAgICAgICAgICAid2VpeXVuLmNvbSIKICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJhcHBfbGFuem91cyIsCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICJsYW56b3VzLmNvbSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJsYW56b3V4LmNvbSIKICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJhcHBfMTg5IiwKICAgICAgICAgICAgICAgICAgICBtYXRjaHM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgImNsb3VkLjE4OS5jbiIKICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJhcHBfbWFuYWdlIiwKICAgICAgICAgICAgICAgICAgICBtYXRjaHM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgIioiCiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBdKTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgLyoqIGxpYiAqKi8KICAgIGNvbnRhaW5lci5kZWZpbmUoIiQiLCBbXSwgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB3aW5kb3cuJDsKICAgIH0pOwogICAgY29udGFpbmVyLmRlZmluZSgiU25hcCIsIFtdLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHR5cGVvZiBTbmFwICE9ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIHJldHVybiBTbmFwOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5TbmFwOwogICAgICAgIH0KICAgIH0pOwogICAgY29udGFpbmVyLmRlZmluZSgiRE9NUHVyaWZ5IiwgW10sIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAodHlwZW9mIERPTVB1cmlmeSAhPSAidW5kZWZpbmVkIikgewogICAgICAgICAgICByZXR1cm4gRE9NUHVyaWZ5OwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5ET01QdXJpZnk7CiAgICAgICAgfQogICAgfSk7CgogICAgY29udGFpbmVyLnVzZShbImdtIiwgImNvcmUiLCAiYXBwIl0sIGZ1bmN0aW9uIChnbSwgY29yZSwgYXBwKSB7CiAgICAgICAgZ20ucmVhZHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBjb3JlLnJlYWR5KGFwcC5ydW4pOwogICAgICAgIH0pOwogICAgfSk7Cn0pKCk7","requires":[{"meta":{"name":"jquery.min.js","url":"https://cdn.staticfile.org/jquery/3.5.0/jquery.min.js","ts":1597170079824,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2My41LjAgfCAoYykgSlMgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovCiFmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijsib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lLmRvY3VtZW50P3QoZSwhMCk6ZnVuY3Rpb24oZSl7aWYoIWUuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50Iik7cmV0dXJuIHQoZSl9OnQoZSl9KCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKEMsZSl7InVzZSBzdHJpY3QiO3ZhciB0PVtdLHI9T2JqZWN0LmdldFByb3RvdHlwZU9mLHM9dC5zbGljZSxnPXQuZmxhdD9mdW5jdGlvbihlKXtyZXR1cm4gdC5mbGF0LmNhbGwoZSl9OmZ1bmN0aW9uKGUpe3JldHVybiB0LmNvbmNhdC5hcHBseShbXSxlKX0sdT10LnB1c2gsaT10LmluZGV4T2Ysbj17fSxvPW4udG9TdHJpbmcsdj1uLmhhc093blByb3BlcnR5LGE9di50b1N0cmluZyxsPWEuY2FsbChPYmplY3QpLHk9e30sbT1mdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZSYmIm51bWJlciIhPXR5cGVvZiBlLm5vZGVUeXBlfSx4PWZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lJiZlPT09ZS53aW5kb3d9LEU9Qy5kb2N1bWVudCxjPXt0eXBlOiEwLHNyYzohMCxub25jZTohMCxub01vZHVsZTohMH07ZnVuY3Rpb24gYihlLHQsbil7dmFyIHIsaSxvPShuPW58fEUpLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO2lmKG8udGV4dD1lLHQpZm9yKHIgaW4gYykoaT10W3JdfHx0LmdldEF0dHJpYnV0ZSYmdC5nZXRBdHRyaWJ1dGUocikpJiZvLnNldEF0dHJpYnV0ZShyLGkpO24uaGVhZC5hcHBlbmRDaGlsZChvKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG8pfWZ1bmN0aW9uIHcoZSl7cmV0dXJuIG51bGw9PWU/ZSsiIjoib2JqZWN0Ij09dHlwZW9mIGV8fCJmdW5jdGlvbiI9PXR5cGVvZiBlP25bby5jYWxsKGUpXXx8Im9iamVjdCI6dHlwZW9mIGV9dmFyIGY9IjMuNS4wIixTPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBTLmZuLmluaXQoZSx0KX07ZnVuY3Rpb24gcChlKXt2YXIgdD0hIWUmJiJsZW5ndGgiaW4gZSYmZS5sZW5ndGgsbj13KGUpO3JldHVybiFtKGUpJiYheChlKSYmKCJhcnJheSI9PT1ufHwwPT09dHx8Im51bWJlciI9PXR5cGVvZiB0JiYwPHQmJnQtMSBpbiBlKX1TLmZuPVMucHJvdG90eXBlPXtqcXVlcnk6Zixjb25zdHJ1Y3RvcjpTLGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gcy5jYWxsKHRoaXMpfSxnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/cy5jYWxsKHRoaXMpOmU8MD90aGlzW2UrdGhpcy5sZW5ndGhdOnRoaXNbZV19LHB1c2hTdGFjazpmdW5jdGlvbihlKXt2YXIgdD1TLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxlKTtyZXR1cm4gdC5wcmV2T2JqZWN0PXRoaXMsdH0sZWFjaDpmdW5jdGlvbihlKXtyZXR1cm4gUy5lYWNoKHRoaXMsZSl9LG1hcDpmdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soUy5tYXAodGhpcyxmdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0LGUpfSkpfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhzLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGV2ZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soUy5ncmVwKHRoaXMsZnVuY3Rpb24oZSx0KXtyZXR1cm4odCsxKSUyfSkpfSxvZGQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soUy5ncmVwKHRoaXMsZnVuY3Rpb24oZSx0KXtyZXR1cm4gdCUyfSkpfSxlcTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmxlbmd0aCxuPStlKyhlPDA/dDowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soMDw9biYmbjx0P1t0aGlzW25dXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IoKX0scHVzaDp1LHNvcnQ6dC5zb3J0LHNwbGljZTp0LnNwbGljZX0sUy5leHRlbmQ9Uy5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgZSx0LG4scixpLG8sYT1hcmd1bWVudHNbMF18fHt9LHM9MSx1PWFyZ3VtZW50cy5sZW5ndGgsbD0hMTtmb3IoImJvb2xlYW4iPT10eXBlb2YgYSYmKGw9YSxhPWFyZ3VtZW50c1tzXXx8e30scysrKSwib2JqZWN0Ij09dHlwZW9mIGF8fG0oYSl8fChhPXt9KSxzPT09dSYmKGE9dGhpcyxzLS0pO3M8dTtzKyspaWYobnVsbCE9KGU9YXJndW1lbnRzW3NdKSlmb3IodCBpbiBlKXI9ZVt0XSwiX19wcm90b19fIiE9PXQmJmEhPT1yJiYobCYmciYmKFMuaXNQbGFpbk9iamVjdChyKXx8KGk9QXJyYXkuaXNBcnJheShyKSkpPyhuPWFbdF0sbz1pJiYhQXJyYXkuaXNBcnJheShuKT9bXTppfHxTLmlzUGxhaW5PYmplY3Qobik/bjp7fSxpPSExLGFbdF09Uy5leHRlbmQobCxvLHIpKTp2b2lkIDAhPT1yJiYoYVt0XT1yKSk7cmV0dXJuIGF9LFMuZXh0ZW5kKHtleHBhbmRvOiJqUXVlcnkiKyhmK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLGlzUmVhZHk6ITAsZXJyb3I6ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKGUpfSxub29wOmZ1bmN0aW9uKCl7fSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0LG47cmV0dXJuISghZXx8IltvYmplY3QgT2JqZWN0XSIhPT1vLmNhbGwoZSkpJiYoISh0PXIoZSkpfHwiZnVuY3Rpb24iPT10eXBlb2Yobj12LmNhbGwodCwiY29uc3RydWN0b3IiKSYmdC5jb25zdHJ1Y3RvcikmJmEuY2FsbChuKT09PWwpfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIGUpcmV0dXJuITE7cmV0dXJuITB9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oZSx0LG4pe2IoZSx7bm9uY2U6dCYmdC5ub25jZX0sbil9LGVhY2g6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTA7aWYocChlKSl7Zm9yKG49ZS5sZW5ndGg7cjxuO3IrKylpZighMT09PXQuY2FsbChlW3JdLHIsZVtyXSkpYnJlYWt9ZWxzZSBmb3IociBpbiBlKWlmKCExPT09dC5jYWxsKGVbcl0scixlW3JdKSlicmVhaztyZXR1cm4gZX0sbWFrZUFycmF5OmZ1bmN0aW9uKGUsdCl7dmFyIG49dHx8W107cmV0dXJuIG51bGwhPWUmJihwKE9iamVjdChlKSk/Uy5tZXJnZShuLCJzdHJpbmciPT10eXBlb2YgZT9bZV06ZSk6dS5jYWxsKG4sZSkpLG59LGluQXJyYXk6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBudWxsPT10Py0xOmkuY2FsbCh0LGUsbil9LG1lcmdlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPSt0Lmxlbmd0aCxyPTAsaT1lLmxlbmd0aDtyPG47cisrKWVbaSsrXT10W3JdO3JldHVybiBlLmxlbmd0aD1pLGV9LGdyZXA6ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1bXSxpPTAsbz1lLmxlbmd0aCxhPSFuO2k8bztpKyspIXQoZVtpXSxpKSE9PWEmJnIucHVzaChlW2ldKTtyZXR1cm4gcn0sbWFwOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89MCxhPVtdO2lmKHAoZSkpZm9yKHI9ZS5sZW5ndGg7bzxyO28rKyludWxsIT0oaT10KGVbb10sbyxuKSkmJmEucHVzaChpKTtlbHNlIGZvcihvIGluIGUpbnVsbCE9KGk9dChlW29dLG8sbikpJiZhLnB1c2goaSk7cmV0dXJuIGcoYSl9LGd1aWQ6MSxzdXBwb3J0Onl9KSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYoUy5mbltTeW1ib2wuaXRlcmF0b3JdPXRbU3ltYm9sLml0ZXJhdG9yXSksUy5lYWNoKCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbCIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe25bIltvYmplY3QgIit0KyJdIl09dC50b0xvd2VyQ2FzZSgpfSk7dmFyIGQ9ZnVuY3Rpb24obil7dmFyIGUsZCxiLG8saSxoLGYsZyx3LHUsbCxULEMsYSxFLHYscyxjLHksUz0ic2l6emxlIisxKm5ldyBEYXRlLHA9bi5kb2N1bWVudCxrPTAscj0wLG09dWUoKSx4PXVlKCksQT11ZSgpLE49dWUoKSxEPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10JiYobD0hMCksMH0saj17fS5oYXNPd25Qcm9wZXJ0eSx0PVtdLHE9dC5wb3AsTD10LnB1c2gsSD10LnB1c2gsTz10LnNsaWNlLFA9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MCxyPWUubGVuZ3RoO248cjtuKyspaWYoZVtuXT09PXQpcmV0dXJuIG47cmV0dXJuLTF9LFI9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIixNPSJbXFx4MjBcXHRcXHJcXG5cXGZdIixJPSIoPzpcXFxcW1xcZGEtZkEtRl17MSw2fSIrTSsiP3xcXFxcW15cXHJcXG5cXGZdfFtcXHctXXxbXlwwLVxceDdmXSkrIixXPSJcXFsiK00rIiooIitJKyIpKD86IitNKyIqKFsqXiR8IX5dPz0pIitNKyIqKD86JygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCJ8KCIrSSsiKSl8KSIrTSsiKlxcXSIsRj0iOigiK0krIikoPzpcXCgoKCcoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwiKXwoKD86XFxcXC58W15cXFxcKClbXFxdXXwiK1crIikqKXwuKilcXCl8KSIsQj1uZXcgUmVnRXhwKE0rIisiLCJnIiksJD1uZXcgUmVnRXhwKCJeIitNKyIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiK00rIiskIiwiZyIpLF89bmV3IFJlZ0V4cCgiXiIrTSsiKiwiK00rIioiKSx6PW5ldyBSZWdFeHAoIl4iK00rIiooWz4rfl18IitNKyIpIitNKyIqIiksVT1uZXcgUmVnRXhwKE0rInw+IiksWD1uZXcgUmVnRXhwKEYpLFY9bmV3IFJlZ0V4cCgiXiIrSSsiJCIpLEc9e0lEOm5ldyBSZWdFeHAoIl4jKCIrSSsiKSIpLENMQVNTOm5ldyBSZWdFeHAoIl5cXC4oIitJKyIpIiksVEFHOm5ldyBSZWdFeHAoIl4oIitJKyJ8WypdKSIpLEFUVFI6bmV3IFJlZ0V4cCgiXiIrVyksUFNFVURPOm5ldyBSZWdFeHAoIl4iK0YpLENISUxEOm5ldyBSZWdFeHAoIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcKCIrTSsiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIrTSsiKig/OihbKy1dfCkiK00rIiooXFxkKyl8KSkiK00rIipcXCl8KSIsImkiKSxib29sOm5ldyBSZWdFeHAoIl4oPzoiK1IrIikkIiwiaSIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKCJeIitNKyIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiK00rIiooKD86LVxcZCk/XFxkKikiK00rIipcXCl8KSg/PVteLV18JCkiLCJpIil9LFk9L0hUTUwkL2ksUT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLEo9L15oXGQkL2ksSz0vXltee10rXHtccypcW25hdGl2ZSBcdy8sWj0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLGVlPS9bK35dLyx0ZT1uZXcgUmVnRXhwKCJcXFxcW1xcZGEtZkEtRl17MSw2fSIrTSsiP3xcXFxcKFteXFxyXFxuXFxmXSkiLCJnIiksbmU9ZnVuY3Rpb24oZSx0KXt2YXIgbj0iMHgiK2Uuc2xpY2UoMSktNjU1MzY7cmV0dXJuIHR8fChuPDA/U3RyaW5nLmZyb21DaGFyQ29kZShuKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKG4+PjEwfDU1Mjk2LDEwMjMmbnw1NjMyMCkpfSxyZT0vKFtcMC1ceDFmXHg3Zl18Xi0/XGQpfF4tJHxbXlwwLVx4MWZceDdmLVx1RkZGRlx3LV0vZyxpZT1mdW5jdGlvbihlLHQpe3JldHVybiB0PyJcMCI9PT1lPyJcdWZmZmQiOmUuc2xpY2UoMCwtMSkrIlxcIitlLmNoYXJDb2RlQXQoZS5sZW5ndGgtMSkudG9TdHJpbmcoMTYpKyIgIjoiXFwiK2V9LG9lPWZ1bmN0aW9uKCl7VCgpfSxhZT1iZShmdW5jdGlvbihlKXtyZXR1cm4hMD09PWUuZGlzYWJsZWQmJiJmaWVsZHNldCI9PT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCl9LHtkaXI6InBhcmVudE5vZGUiLG5leHQ6ImxlZ2VuZCJ9KTt0cnl7SC5hcHBseSh0PU8uY2FsbChwLmNoaWxkTm9kZXMpLHAuY2hpbGROb2RlcyksdFtwLmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChlKXtIPXthcHBseTp0Lmxlbmd0aD9mdW5jdGlvbihlLHQpe0wuYXBwbHkoZSxPLmNhbGwodCkpfTpmdW5jdGlvbihlLHQpe3ZhciBuPWUubGVuZ3RoLHI9MDt3aGlsZShlW24rK109dFtyKytdKTtlLmxlbmd0aD1uLTF9fX1mdW5jdGlvbiBzZSh0LGUsbixyKXt2YXIgaSxvLGEscyx1LGwsYyxmPWUmJmUub3duZXJEb2N1bWVudCxwPWU/ZS5ub2RlVHlwZTo5O2lmKG49bnx8W10sInN0cmluZyIhPXR5cGVvZiB0fHwhdHx8MSE9PXAmJjkhPT1wJiYxMSE9PXApcmV0dXJuIG47aWYoIXImJihUKGUpLGU9ZXx8QyxFKSl7aWYoMTEhPT1wJiYodT1aLmV4ZWModCkpKWlmKGk9dVsxXSl7aWYoOT09PXApe2lmKCEoYT1lLmdldEVsZW1lbnRCeUlkKGkpKSlyZXR1cm4gbjtpZihhLmlkPT09aSlyZXR1cm4gbi5wdXNoKGEpLG59ZWxzZSBpZihmJiYoYT1mLmdldEVsZW1lbnRCeUlkKGkpKSYmeShlLGEpJiZhLmlkPT09aSlyZXR1cm4gbi5wdXNoKGEpLG59ZWxzZXtpZih1WzJdKXJldHVybiBILmFwcGx5KG4sZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0KSksbjtpZigoaT11WzNdKSYmZC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEguYXBwbHkobixlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoaSkpLG59aWYoZC5xc2EmJiFOW3QrIiAiXSYmKCF2fHwhdi50ZXN0KHQpKSYmKDEhPT1wfHwib2JqZWN0IiE9PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkpe2lmKGM9dCxmPWUsMT09PXAmJihVLnRlc3QodCl8fHoudGVzdCh0KSkpeyhmPWVlLnRlc3QodCkmJnllKGUucGFyZW50Tm9kZSl8fGUpPT09ZSYmZC5zY29wZXx8KChzPWUuZ2V0QXR0cmlidXRlKCJpZCIpKT9zPXMucmVwbGFjZShyZSxpZSk6ZS5zZXRBdHRyaWJ1dGUoImlkIixzPVMpKSxvPShsPWgodCkpLmxlbmd0aDt3aGlsZShvLS0pbFtvXT0ocz8iIyIrczoiOnNjb3BlIikrIiAiK3hlKGxbb10pO2M9bC5qb2luKCIsIil9dHJ5e3JldHVybiBILmFwcGx5KG4sZi5xdWVyeVNlbGVjdG9yQWxsKGMpKSxufWNhdGNoKGUpe04odCwhMCl9ZmluYWxseXtzPT09UyYmZS5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fX1yZXR1cm4gZyh0LnJlcGxhY2UoJCwiJDEiKSxlLG4scil9ZnVuY3Rpb24gdWUoKXt2YXIgcj1bXTtyZXR1cm4gZnVuY3Rpb24gZSh0LG4pe3JldHVybiByLnB1c2godCsiICIpPmIuY2FjaGVMZW5ndGgmJmRlbGV0ZSBlW3Iuc2hpZnQoKV0sZVt0KyIgIl09bn19ZnVuY3Rpb24gbGUoZSl7cmV0dXJuIGVbU109ITAsZX1mdW5jdGlvbiBjZShlKXt2YXIgdD1DLmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0Iik7dHJ5e3JldHVybiEhZSh0KX1jYXRjaChlKXtyZXR1cm4hMX1maW5hbGx5e3QucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLHQ9bnVsbH19ZnVuY3Rpb24gZmUoZSx0KXt2YXIgbj1lLnNwbGl0KCJ8Iikscj1uLmxlbmd0aDt3aGlsZShyLS0pYi5hdHRySGFuZGxlW25bcl1dPXR9ZnVuY3Rpb24gcGUoZSx0KXt2YXIgbj10JiZlLHI9biYmMT09PWUubm9kZVR5cGUmJjE9PT10Lm5vZGVUeXBlJiZlLnNvdXJjZUluZGV4LXQuc291cmNlSW5kZXg7aWYocilyZXR1cm4gcjtpZihuKXdoaWxlKG49bi5uZXh0U2libGluZylpZihuPT09dClyZXR1cm4tMTtyZXR1cm4gZT8xOi0xfWZ1bmN0aW9uIGRlKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4iaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZlLnR5cGU9PT10fX1mdW5jdGlvbiBoZShuKXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybigiaW5wdXQiPT09dHx8ImJ1dHRvbiI9PT10KSYmZS50eXBlPT09bn19ZnVuY3Rpb24gZ2UodCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiJmb3JtImluIGU/ZS5wYXJlbnROb2RlJiYhMT09PWUuZGlzYWJsZWQ/ImxhYmVsImluIGU/ImxhYmVsImluIGUucGFyZW50Tm9kZT9lLnBhcmVudE5vZGUuZGlzYWJsZWQ9PT10OmUuZGlzYWJsZWQ9PT10OmUuaXNEaXNhYmxlZD09PXR8fGUuaXNEaXNhYmxlZCE9PSF0JiZhZShlKT09PXQ6ZS5kaXNhYmxlZD09PXQ6ImxhYmVsImluIGUmJmUuZGlzYWJsZWQ9PT10fX1mdW5jdGlvbiB2ZShhKXtyZXR1cm4gbGUoZnVuY3Rpb24obyl7cmV0dXJuIG89K28sbGUoZnVuY3Rpb24oZSx0KXt2YXIgbixyPWEoW10sZS5sZW5ndGgsbyksaT1yLmxlbmd0aDt3aGlsZShpLS0pZVtuPXJbaV1dJiYoZVtuXT0hKHRbbl09ZVtuXSkpfSl9KX1mdW5jdGlvbiB5ZShlKXtyZXR1cm4gZSYmInVuZGVmaW5lZCIhPXR5cGVvZiBlLmdldEVsZW1lbnRzQnlUYWdOYW1lJiZlfWZvcihlIGluIGQ9c2Uuc3VwcG9ydD17fSxpPXNlLmlzWE1MPWZ1bmN0aW9uKGUpe3ZhciB0PWUubmFtZXNwYWNlVVJJLG49KGUub3duZXJEb2N1bWVudHx8ZSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiFZLnRlc3QodHx8biYmbi5ub2RlTmFtZXx8IkhUTUwiKX0sVD1zZS5zZXREb2N1bWVudD1mdW5jdGlvbihlKXt2YXIgdCxuLHI9ZT9lLm93bmVyRG9jdW1lbnR8fGU6cDtyZXR1cm4gciE9QyYmOT09PXIubm9kZVR5cGUmJnIuZG9jdW1lbnRFbGVtZW50JiYoYT0oQz1yKS5kb2N1bWVudEVsZW1lbnQsRT0haShDKSxwIT1DJiYobj1DLmRlZmF1bHRWaWV3KSYmbi50b3AhPT1uJiYobi5hZGRFdmVudExpc3RlbmVyP24uYWRkRXZlbnRMaXN0ZW5lcigidW5sb2FkIixvZSwhMSk6bi5hdHRhY2hFdmVudCYmbi5hdHRhY2hFdmVudCgib251bmxvYWQiLG9lKSksZC5zY29wZT1jZShmdW5jdGlvbihlKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChlKS5hcHBlbmRDaGlsZChDLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSwidW5kZWZpbmVkIiE9dHlwZW9mIGUucXVlcnlTZWxlY3RvckFsbCYmIWUucXVlcnlTZWxlY3RvckFsbCgiOnNjb3BlIGZpZWxkc2V0IGRpdiIpLmxlbmd0aH0pLGQuYXR0cmlidXRlcz1jZShmdW5jdGlvbihlKXtyZXR1cm4gZS5jbGFzc05hbWU9ImkiLCFlLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxkLmdldEVsZW1lbnRzQnlUYWdOYW1lPWNlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmFwcGVuZENoaWxkKEMuY3JlYXRlQ29tbWVudCgiIikpLCFlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksZC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPUsudGVzdChDLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGQuZ2V0QnlJZD1jZShmdW5jdGlvbihlKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChlKS5pZD1TLCFDLmdldEVsZW1lbnRzQnlOYW1lfHwhQy5nZXRFbGVtZW50c0J5TmFtZShTKS5sZW5ndGh9KSxkLmdldEJ5SWQ/KGIuZmlsdGVyLklEPWZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZSh0ZSxuZSk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSgiaWQiKT09PXR9fSxiLmZpbmQuSUQ9ZnVuY3Rpb24oZSx0KXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHQuZ2V0RWxlbWVudEJ5SWQmJkUpe3ZhciBuPXQuZ2V0RWxlbWVudEJ5SWQoZSk7cmV0dXJuIG4/W25dOltdfX0pOihiLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgbj1lLnJlcGxhY2UodGUsbmUpO3JldHVybiBmdW5jdGlvbihlKXt2YXIgdD0idW5kZWZpbmVkIiE9dHlwZW9mIGUuZ2V0QXR0cmlidXRlTm9kZSYmZS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiB0JiZ0LnZhbHVlPT09bn19LGIuZmluZC5JRD1mdW5jdGlvbihlLHQpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgdC5nZXRFbGVtZW50QnlJZCYmRSl7dmFyIG4scixpLG89dC5nZXRFbGVtZW50QnlJZChlKTtpZihvKXtpZigobj1vLmdldEF0dHJpYnV0ZU5vZGUoImlkIikpJiZuLnZhbHVlPT09ZSlyZXR1cm5bb107aT10LmdldEVsZW1lbnRzQnlOYW1lKGUpLHI9MDt3aGlsZShvPWlbcisrXSlpZigobj1vLmdldEF0dHJpYnV0ZU5vZGUoImlkIikpJiZuLnZhbHVlPT09ZSlyZXR1cm5bb119cmV0dXJuW119fSksYi5maW5kLlRBRz1kLmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGUsdCl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiB0LmdldEVsZW1lbnRzQnlUYWdOYW1lP3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk6ZC5xc2E/dC5xdWVyeVNlbGVjdG9yQWxsKGUpOnZvaWQgMH06ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9MCxvPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk7aWYoIioiPT09ZSl7d2hpbGUobj1vW2krK10pMT09PW4ubm9kZVR5cGUmJnIucHVzaChuKTtyZXR1cm4gcn1yZXR1cm4gb30sYi5maW5kLkNMQVNTPWQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oZSx0KXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmRSlyZXR1cm4gdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGUpfSxzPVtdLHY9W10sKGQucXNhPUsudGVzdChDLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGNlKGZ1bmN0aW9uKGUpe3ZhciB0O2EuYXBwZW5kQ2hpbGQoZSkuaW5uZXJIVE1MPSI8YSBpZD0nIitTKyInPjwvYT48c2VsZWN0IGlkPSciK1MrIi1cclxcJyBtc2FsbG93Y2FwdHVyZT0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PiIsZS5xdWVyeVNlbGVjdG9yQWxsKCJbbXNhbGxvd2NhcHR1cmVePScnXSIpLmxlbmd0aCYmdi5wdXNoKCJbKl4kXT0iK00rIiooPzonJ3xcIlwiKSIpLGUucXVlcnlTZWxlY3RvckFsbCgiW3NlbGVjdGVkXSIpLmxlbmd0aHx8di5wdXNoKCJcXFsiK00rIiooPzp2YWx1ZXwiK1IrIikiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIltpZH49IitTKyItXSIpLmxlbmd0aHx8di5wdXNoKCJ+PSIpLCh0PUMuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSkuc2V0QXR0cmlidXRlKCJuYW1lIiwiIiksZS5hcHBlbmRDaGlsZCh0KSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIltuYW1lPScnXSIpLmxlbmd0aHx8di5wdXNoKCJcXFsiK00rIipuYW1lIitNKyIqPSIrTSsiKig/OicnfFwiXCIpIiksZS5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aHx8di5wdXNoKCI6Y2hlY2tlZCIpLGUucXVlcnlTZWxlY3RvckFsbCgiYSMiK1MrIisqIikubGVuZ3RofHx2LnB1c2goIi4jLitbK35dIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJcXFxmIiksdi5wdXNoKCJbXFxyXFxuXFxmXSIpfSksY2UoZnVuY3Rpb24oZSl7ZS5pbm5lckhUTUw9IjxhIGhyZWY9JycgZGlzYWJsZWQ9J2Rpc2FibGVkJz48L2E+PHNlbGVjdCBkaXNhYmxlZD0nZGlzYWJsZWQnPjxvcHRpb24vPjwvc2VsZWN0PiI7dmFyIHQ9Qy5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO3Quc2V0QXR0cmlidXRlKCJ0eXBlIiwiaGlkZGVuIiksZS5hcHBlbmRDaGlsZCh0KS5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJEIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJbbmFtZT1kXSIpLmxlbmd0aCYmdi5wdXNoKCJuYW1lIitNKyIqWypeJHwhfl0/PSIpLDIhPT1lLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RoJiZ2LnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksYS5hcHBlbmRDaGlsZChlKS5kaXNhYmxlZD0hMCwyIT09ZS5xdWVyeVNlbGVjdG9yQWxsKCI6ZGlzYWJsZWQiKS5sZW5ndGgmJnYucHVzaCgiOmVuYWJsZWQiLCI6ZGlzYWJsZWQiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIiosOngiKSx2LnB1c2goIiwuKjoiKX0pKSwoZC5tYXRjaGVzU2VsZWN0b3I9Sy50ZXN0KGM9YS5tYXRjaGVzfHxhLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8YS5tb3pNYXRjaGVzU2VsZWN0b3J8fGEub01hdGNoZXNTZWxlY3Rvcnx8YS5tc01hdGNoZXNTZWxlY3RvcikpJiZjZShmdW5jdGlvbihlKXtkLmRpc2Nvbm5lY3RlZE1hdGNoPWMuY2FsbChlLCIqIiksYy5jYWxsKGUsIltzIT0nJ106eCIpLHMucHVzaCgiIT0iLEYpfSksdj12Lmxlbmd0aCYmbmV3IFJlZ0V4cCh2LmpvaW4oInwiKSkscz1zLmxlbmd0aCYmbmV3IFJlZ0V4cChzLmpvaW4oInwiKSksdD1LLnRlc3QoYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbikseT10fHxLLnRlc3QoYS5jb250YWlucyk/ZnVuY3Rpb24oZSx0KXt2YXIgbj05PT09ZS5ub2RlVHlwZT9lLmRvY3VtZW50RWxlbWVudDplLHI9dCYmdC5wYXJlbnROb2RlO3JldHVybiBlPT09cnx8ISghcnx8MSE9PXIubm9kZVR5cGV8fCEobi5jb250YWlucz9uLmNvbnRhaW5zKHIpOmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24ocikpKX06ZnVuY3Rpb24oZSx0KXtpZih0KXdoaWxlKHQ9dC5wYXJlbnROb2RlKWlmKHQ9PT1lKXJldHVybiEwO3JldHVybiExfSxEPXQ/ZnVuY3Rpb24oZSx0KXtpZihlPT09dClyZXR1cm4gbD0hMCwwO3ZhciBuPSFlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSF0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBufHwoMSYobj0oZS5vd25lckRvY3VtZW50fHxlKT09KHQub3duZXJEb2N1bWVudHx8dCk/ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0KToxKXx8IWQuc29ydERldGFjaGVkJiZ0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGUpPT09bj9lPT1DfHxlLm93bmVyRG9jdW1lbnQ9PXAmJnkocCxlKT8tMTp0PT1DfHx0Lm93bmVyRG9jdW1lbnQ9PXAmJnkocCx0KT8xOnU/UCh1LGUpLVAodSx0KTowOjQmbj8tMToxKX06ZnVuY3Rpb24oZSx0KXtpZihlPT09dClyZXR1cm4gbD0hMCwwO3ZhciBuLHI9MCxpPWUucGFyZW50Tm9kZSxvPXQucGFyZW50Tm9kZSxhPVtlXSxzPVt0XTtpZighaXx8IW8pcmV0dXJuIGU9PUM/LTE6dD09Qz8xOmk/LTE6bz8xOnU/UCh1LGUpLVAodSx0KTowO2lmKGk9PT1vKXJldHVybiBwZShlLHQpO249ZTt3aGlsZShuPW4ucGFyZW50Tm9kZSlhLnVuc2hpZnQobik7bj10O3doaWxlKG49bi5wYXJlbnROb2RlKXMudW5zaGlmdChuKTt3aGlsZShhW3JdPT09c1tyXSlyKys7cmV0dXJuIHI/cGUoYVtyXSxzW3JdKTphW3JdPT1wPy0xOnNbcl09PXA/MTowfSksQ30sc2UubWF0Y2hlcz1mdW5jdGlvbihlLHQpe3JldHVybiBzZShlLG51bGwsbnVsbCx0KX0sc2UubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGUsdCl7aWYoVChlKSxkLm1hdGNoZXNTZWxlY3RvciYmRSYmIU5bdCsiICJdJiYoIXN8fCFzLnRlc3QodCkpJiYoIXZ8fCF2LnRlc3QodCkpKXRyeXt2YXIgbj1jLmNhbGwoZSx0KTtpZihufHxkLmRpc2Nvbm5lY3RlZE1hdGNofHxlLmRvY3VtZW50JiYxMSE9PWUuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIG59Y2F0Y2goZSl7Tih0LCEwKX1yZXR1cm4gMDxzZSh0LEMsbnVsbCxbZV0pLmxlbmd0aH0sc2UuY29udGFpbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxlKSE9QyYmVChlKSx5KGUsdCl9LHNlLmF0dHI9ZnVuY3Rpb24oZSx0KXsoZS5vd25lckRvY3VtZW50fHxlKSE9QyYmVChlKTt2YXIgbj1iLmF0dHJIYW5kbGVbdC50b0xvd2VyQ2FzZSgpXSxyPW4mJmouY2FsbChiLmF0dHJIYW5kbGUsdC50b0xvd2VyQ2FzZSgpKT9uKGUsdCwhRSk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1yP3I6ZC5hdHRyaWJ1dGVzfHwhRT9lLmdldEF0dHJpYnV0ZSh0KToocj1lLmdldEF0dHJpYnV0ZU5vZGUodCkpJiZyLnNwZWNpZmllZD9yLnZhbHVlOm51bGx9LHNlLmVzY2FwZT1mdW5jdGlvbihlKXtyZXR1cm4oZSsiIikucmVwbGFjZShyZSxpZSl9LHNlLmVycm9yPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIitlKX0sc2UudW5pcXVlU29ydD1mdW5jdGlvbihlKXt2YXIgdCxuPVtdLHI9MCxpPTA7aWYobD0hZC5kZXRlY3REdXBsaWNhdGVzLHU9IWQuc29ydFN0YWJsZSYmZS5zbGljZSgwKSxlLnNvcnQoRCksbCl7d2hpbGUodD1lW2krK10pdD09PWVbaV0mJihyPW4ucHVzaChpKSk7d2hpbGUoci0tKWUuc3BsaWNlKG5bcl0sMSl9cmV0dXJuIHU9bnVsbCxlfSxvPXNlLmdldFRleHQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj0iIixyPTAsaT1lLm5vZGVUeXBlO2lmKGkpe2lmKDE9PT1pfHw5PT09aXx8MTE9PT1pKXtpZigic3RyaW5nIj09dHlwZW9mIGUudGV4dENvbnRlbnQpcmV0dXJuIGUudGV4dENvbnRlbnQ7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKW4rPW8oZSl9ZWxzZSBpZigzPT09aXx8ND09PWkpcmV0dXJuIGUubm9kZVZhbHVlfWVsc2Ugd2hpbGUodD1lW3IrK10pbis9byh0KTtyZXR1cm4gbn0sKGI9c2Uuc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86bGUsbWF0Y2g6RyxhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS5yZXBsYWNlKHRlLG5lKSxlWzNdPShlWzNdfHxlWzRdfHxlWzVdfHwiIikucmVwbGFjZSh0ZSxuZSksIn49Ij09PWVbMl0mJihlWzNdPSIgIitlWzNdKyIgIiksZS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnRvTG93ZXJDYXNlKCksIm50aCI9PT1lWzFdLnNsaWNlKDAsMyk/KGVbM118fHNlLmVycm9yKGVbMF0pLGVbNF09KyhlWzRdP2VbNV0rKGVbNl18fDEpOjIqKCJldmVuIj09PWVbM118fCJvZGQiPT09ZVszXSkpLGVbNV09KyhlWzddK2VbOF18fCJvZGQiPT09ZVszXSkpOmVbM10mJnNlLmVycm9yKGVbMF0pLGV9LFBTRVVETzpmdW5jdGlvbihlKXt2YXIgdCxuPSFlWzZdJiZlWzJdO3JldHVybiBHLkNISUxELnRlc3QoZVswXSk/bnVsbDooZVszXT9lWzJdPWVbNF18fGVbNV18fCIiOm4mJlgudGVzdChuKSYmKHQ9aChuLCEwKSkmJih0PW4uaW5kZXhPZigiKSIsbi5sZW5ndGgtdCktbi5sZW5ndGgpJiYoZVswXT1lWzBdLnNsaWNlKDAsdCksZVsyXT1uLnNsaWNlKDAsdCkpLGUuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UodGUsbmUpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIioiPT09ZT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihlKXtyZXR1cm4gZS5ub2RlTmFtZSYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09dH19LENMQVNTOmZ1bmN0aW9uKGUpe3ZhciB0PW1bZSsiICJdO3JldHVybiB0fHwodD1uZXcgUmVnRXhwKCIoXnwiK00rIikiK2UrIigiK00rInwkKSIpKSYmbShlLGZ1bmN0aW9uKGUpe3JldHVybiB0LnRlc3QoInN0cmluZyI9PXR5cGVvZiBlLmNsYXNzTmFtZSYmZS5jbGFzc05hbWV8fCJ1bmRlZmluZWQiIT10eXBlb2YgZS5nZXRBdHRyaWJ1dGUmJmUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIil9KX0sQVRUUjpmdW5jdGlvbihuLHIsaSl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PXNlLmF0dHIoZSxuKTtyZXR1cm4gbnVsbD09dD8iIT0iPT09cjohcnx8KHQrPSIiLCI9Ij09PXI/dD09PWk6IiE9Ij09PXI/dCE9PWk6Il49Ij09PXI/aSYmMD09PXQuaW5kZXhPZihpKToiKj0iPT09cj9pJiYtMTx0LmluZGV4T2YoaSk6IiQ9Ij09PXI/aSYmdC5zbGljZSgtaS5sZW5ndGgpPT09aToifj0iPT09cj8tMTwoIiAiK3QucmVwbGFjZShCLCIgIikrIiAiKS5pbmRleE9mKGkpOiJ8PSI9PT1yJiYodD09PWl8fHQuc2xpY2UoMCxpLmxlbmd0aCsxKT09PWkrIi0iKSl9fSxDSElMRDpmdW5jdGlvbihoLGUsdCxnLHYpe3ZhciB5PSJudGgiIT09aC5zbGljZSgwLDMpLG09Imxhc3QiIT09aC5zbGljZSgtNCkseD0ib2YtdHlwZSI9PT1lO3JldHVybiAxPT09ZyYmMD09PXY/ZnVuY3Rpb24oZSl7cmV0dXJuISFlLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYSxzLHUsbD15IT09bT8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLGM9ZS5wYXJlbnROb2RlLGY9eCYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHA9IW4mJiF4LGQ9ITE7aWYoYyl7aWYoeSl7d2hpbGUobCl7YT1lO3doaWxlKGE9YVtsXSlpZih4P2Eubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWY6MT09PWEubm9kZVR5cGUpcmV0dXJuITE7dT1sPSJvbmx5Ij09PWgmJiF1JiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKHU9W20/Yy5maXJzdENoaWxkOmMubGFzdENoaWxkXSxtJiZwKXtkPShzPShyPShpPShvPShhPWMpW1NdfHwoYVtTXT17fSkpW2EudW5pcXVlSURdfHwob1thLnVuaXF1ZUlEXT17fSkpW2hdfHxbXSlbMF09PT1rJiZyWzFdKSYmclsyXSxhPXMmJmMuY2hpbGROb2Rlc1tzXTt3aGlsZShhPSsrcyYmYSYmYVtsXXx8KGQ9cz0wKXx8dS5wb3AoKSlpZigxPT09YS5ub2RlVHlwZSYmKytkJiZhPT09ZSl7aVtoXT1bayxzLGRdO2JyZWFrfX1lbHNlIGlmKHAmJihkPXM9KHI9KGk9KG89KGE9ZSlbU118fChhW1NdPXt9KSlbYS51bmlxdWVJRF18fChvW2EudW5pcXVlSURdPXt9KSlbaF18fFtdKVswXT09PWsmJnJbMV0pLCExPT09ZCl3aGlsZShhPSsrcyYmYSYmYVtsXXx8KGQ9cz0wKXx8dS5wb3AoKSlpZigoeD9hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1mOjE9PT1hLm5vZGVUeXBlKSYmKytkJiYocCYmKChpPShvPWFbU118fChhW1NdPXt9KSlbYS51bmlxdWVJRF18fChvW2EudW5pcXVlSURdPXt9KSlbaF09W2ssZF0pLGE9PT1lKSlicmVhaztyZXR1cm4oZC09dik9PT1nfHxkJWc9PTAmJjA8PWQvZ319fSxQU0VVRE86ZnVuY3Rpb24oZSxvKXt2YXIgdCxhPWIucHNldWRvc1tlXXx8Yi5zZXRGaWx0ZXJzW2UudG9Mb3dlckNhc2UoKV18fHNlLmVycm9yKCJ1bnN1cHBvcnRlZCBwc2V1ZG86ICIrZSk7cmV0dXJuIGFbU10/YShvKToxPGEubGVuZ3RoPyh0PVtlLGUsIiIsb10sYi5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGUudG9Mb3dlckNhc2UoKSk/bGUoZnVuY3Rpb24oZSx0KXt2YXIgbixyPWEoZSxvKSxpPXIubGVuZ3RoO3doaWxlKGktLSllW249UChlLHJbaV0pXT0hKHRbbl09cltpXSl9KTpmdW5jdGlvbihlKXtyZXR1cm4gYShlLDAsdCl9KTphfX0scHNldWRvczp7bm90OmxlKGZ1bmN0aW9uKGUpe3ZhciByPVtdLGk9W10scz1mKGUucmVwbGFjZSgkLCIkMSIpKTtyZXR1cm4gc1tTXT9sZShmdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvPXMoZSxudWxsLHIsW10pLGE9ZS5sZW5ndGg7d2hpbGUoYS0tKShpPW9bYV0pJiYoZVthXT0hKHRbYV09aSkpfSk6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiByWzBdPWUscyhyLG51bGwsbixpKSxyWzBdPW51bGwsIWkucG9wKCl9fSksaGFzOmxlKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gMDxzZSh0LGUpLmxlbmd0aH19KSxjb250YWluczpsZShmdW5jdGlvbih0KXtyZXR1cm4gdD10LnJlcGxhY2UodGUsbmUpLGZ1bmN0aW9uKGUpe3JldHVybi0xPChlLnRleHRDb250ZW50fHxvKGUpKS5pbmRleE9mKHQpfX0pLGxhbmc6bGUoZnVuY3Rpb24obil7cmV0dXJuIFYudGVzdChufHwiIil8fHNlLmVycm9yKCJ1bnN1cHBvcnRlZCBsYW5nOiAiK24pLG49bi5yZXBsYWNlKHRlLG5lKS50b0xvd2VyQ2FzZSgpLGZ1bmN0aW9uKGUpe3ZhciB0O2Rve2lmKHQ9RT9lLmxhbmc6ZS5nZXRBdHRyaWJ1dGUoInhtbDpsYW5nIil8fGUuZ2V0QXR0cmlidXRlKCJsYW5nIikpcmV0dXJuKHQ9dC50b0xvd2VyQ2FzZSgpKT09PW58fDA9PT10LmluZGV4T2YobisiLSIpfXdoaWxlKChlPWUucGFyZW50Tm9kZSkmJjE9PT1lLm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9bi5sb2NhdGlvbiYmbi5sb2NhdGlvbi5oYXNoO3JldHVybiB0JiZ0LnNsaWNlKDEpPT09ZS5pZH0scm9vdDpmdW5jdGlvbihlKXtyZXR1cm4gZT09PWF9LGZvY3VzOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09Qy5hY3RpdmVFbGVtZW50JiYoIUMuaGFzRm9jdXN8fEMuaGFzRm9jdXMoKSkmJiEhKGUudHlwZXx8ZS5ocmVmfHx+ZS50YWJJbmRleCl9LGVuYWJsZWQ6Z2UoITEpLGRpc2FibGVkOmdlKCEwKSxjaGVja2VkOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09dCYmISFlLmNoZWNrZWR8fCJvcHRpb24iPT09dCYmISFlLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5wYXJlbnROb2RlJiZlLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCwhMD09PWUuc2VsZWN0ZWR9LGVtcHR5OmZ1bmN0aW9uKGUpe2ZvcihlPWUuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZylpZihlLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihlKXtyZXR1cm4hYi5wc2V1ZG9zLmVtcHR5KGUpfSxoZWFkZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIEoudGVzdChlLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFEudGVzdChlLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09dCYmImJ1dHRvbiI9PT1lLnR5cGV8fCJidXR0b24iPT09dH0sdGV4dDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4iaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1lLnR5cGUmJihudWxsPT0odD1lLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8InRleHQiPT09dC50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6dmUoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0OnZlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuW3QtMV19KSxlcTp2ZShmdW5jdGlvbihlLHQsbil7cmV0dXJuW248MD9uK3Q6bl19KSxldmVuOnZlKGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTA7bjx0O24rPTIpZS5wdXNoKG4pO3JldHVybiBlfSksb2RkOnZlKGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTE7bjx0O24rPTIpZS5wdXNoKG4pO3JldHVybiBlfSksbHQ6dmUoZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1uPDA/bit0OnQ8bj90Om47MDw9LS1yOyllLnB1c2gocik7cmV0dXJuIGV9KSxndDp2ZShmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByPW48MD9uK3Q6bjsrK3I8dDspZS5wdXNoKHIpO3JldHVybiBlfSl9fSkucHNldWRvcy5udGg9Yi5wc2V1ZG9zLmVxLHtyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSliLnBzZXVkb3NbZV09ZGUoZSk7Zm9yKGUgaW57c3VibWl0OiEwLHJlc2V0OiEwfSliLnBzZXVkb3NbZV09aGUoZSk7ZnVuY3Rpb24gbWUoKXt9ZnVuY3Rpb24geGUoZSl7Zm9yKHZhciB0PTAsbj1lLmxlbmd0aCxyPSIiO3Q8bjt0Kyspcis9ZVt0XS52YWx1ZTtyZXR1cm4gcn1mdW5jdGlvbiBiZShzLGUsdCl7dmFyIHU9ZS5kaXIsbD1lLm5leHQsYz1sfHx1LGY9dCYmInBhcmVudE5vZGUiPT09YyxwPXIrKztyZXR1cm4gZS5maXJzdD9mdW5jdGlvbihlLHQsbil7d2hpbGUoZT1lW3VdKWlmKDE9PT1lLm5vZGVUeXBlfHxmKXJldHVybiBzKGUsdCxuKTtyZXR1cm4hMX06ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhPVtrLHBdO2lmKG4pe3doaWxlKGU9ZVt1XSlpZigoMT09PWUubm9kZVR5cGV8fGYpJiZzKGUsdCxuKSlyZXR1cm4hMH1lbHNlIHdoaWxlKGU9ZVt1XSlpZigxPT09ZS5ub2RlVHlwZXx8ZilpZihpPShvPWVbU118fChlW1NdPXt9KSlbZS51bmlxdWVJRF18fChvW2UudW5pcXVlSURdPXt9KSxsJiZsPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKWU9ZVt1XXx8ZTtlbHNle2lmKChyPWlbY10pJiZyWzBdPT09ayYmclsxXT09PXApcmV0dXJuIGFbMl09clsyXTtpZigoaVtjXT1hKVsyXT1zKGUsdCxuKSlyZXR1cm4hMH1yZXR1cm4hMX19ZnVuY3Rpb24gd2UoaSl7cmV0dXJuIDE8aS5sZW5ndGg/ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWkubGVuZ3RoO3doaWxlKHItLSlpZighaVtyXShlLHQsbikpcmV0dXJuITE7cmV0dXJuITB9OmlbMF19ZnVuY3Rpb24gVGUoZSx0LG4scixpKXtmb3IodmFyIG8sYT1bXSxzPTAsdT1lLmxlbmd0aCxsPW51bGwhPXQ7czx1O3MrKykobz1lW3NdKSYmKG4mJiFuKG8scixpKXx8KGEucHVzaChvKSxsJiZ0LnB1c2gocykpKTtyZXR1cm4gYX1mdW5jdGlvbiBDZShkLGgsZyx2LHksZSl7cmV0dXJuIHYmJiF2W1NdJiYodj1DZSh2KSkseSYmIXlbU10mJih5PUNlKHksZSkpLGxlKGZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYSxzPVtdLHU9W10sbD10Lmxlbmd0aCxjPWV8fGZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9MCxpPXQubGVuZ3RoO3I8aTtyKyspc2UoZSx0W3JdLG4pO3JldHVybiBufShofHwiKiIsbi5ub2RlVHlwZT9bbl06bixbXSksZj0hZHx8IWUmJmg/YzpUZShjLHMsZCxuLHIpLHA9Zz95fHwoZT9kOmx8fHYpP1tdOnQ6ZjtpZihnJiZnKGYscCxuLHIpLHYpe2k9VGUocCx1KSx2KGksW10sbixyKSxvPWkubGVuZ3RoO3doaWxlKG8tLSkoYT1pW29dKSYmKHBbdVtvXV09IShmW3Vbb11dPWEpKX1pZihlKXtpZih5fHxkKXtpZih5KXtpPVtdLG89cC5sZW5ndGg7d2hpbGUoby0tKShhPXBbb10pJiZpLnB1c2goZltvXT1hKTt5KG51bGwscD1bXSxpLHIpfW89cC5sZW5ndGg7d2hpbGUoby0tKShhPXBbb10pJiYtMTwoaT15P1AoZSxhKTpzW29dKSYmKGVbaV09ISh0W2ldPWEpKX19ZWxzZSBwPVRlKHA9PT10P3Auc3BsaWNlKGwscC5sZW5ndGgpOnApLHk/eShudWxsLHQscCxyKTpILmFwcGx5KHQscCl9KX1mdW5jdGlvbiBFZShlKXtmb3IodmFyIGksdCxuLHI9ZS5sZW5ndGgsbz1iLnJlbGF0aXZlW2VbMF0udHlwZV0sYT1vfHxiLnJlbGF0aXZlWyIgIl0scz1vPzE6MCx1PWJlKGZ1bmN0aW9uKGUpe3JldHVybiBlPT09aX0sYSwhMCksbD1iZShmdW5jdGlvbihlKXtyZXR1cm4tMTxQKGksZSl9LGEsITApLGM9W2Z1bmN0aW9uKGUsdCxuKXt2YXIgcj0hbyYmKG58fHQhPT13KXx8KChpPXQpLm5vZGVUeXBlP3UoZSx0LG4pOmwoZSx0LG4pKTtyZXR1cm4gaT1udWxsLHJ9XTtzPHI7cysrKWlmKHQ9Yi5yZWxhdGl2ZVtlW3NdLnR5cGVdKWM9W2JlKHdlKGMpLHQpXTtlbHNle2lmKCh0PWIuZmlsdGVyW2Vbc10udHlwZV0uYXBwbHkobnVsbCxlW3NdLm1hdGNoZXMpKVtTXSl7Zm9yKG49KytzO248cjtuKyspaWYoYi5yZWxhdGl2ZVtlW25dLnR5cGVdKWJyZWFrO3JldHVybiBDZSgxPHMmJndlKGMpLDE8cyYmeGUoZS5zbGljZSgwLHMtMSkuY29uY2F0KHt2YWx1ZToiICI9PT1lW3MtMl0udHlwZT8iKiI6IiJ9KSkucmVwbGFjZSgkLCIkMSIpLHQsczxuJiZFZShlLnNsaWNlKHMsbikpLG48ciYmRWUoZT1lLnNsaWNlKG4pKSxuPHImJnhlKGUpKX1jLnB1c2godCl9cmV0dXJuIHdlKGMpfXJldHVybiBtZS5wcm90b3R5cGU9Yi5maWx0ZXJzPWIucHNldWRvcyxiLnNldEZpbHRlcnM9bmV3IG1lLGg9c2UudG9rZW5pemU9ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbyxhLHMsdSxsPXhbZSsiICJdO2lmKGwpcmV0dXJuIHQ/MDpsLnNsaWNlKDApO2E9ZSxzPVtdLHU9Yi5wcmVGaWx0ZXI7d2hpbGUoYSl7Zm9yKG8gaW4gbiYmIShyPV8uZXhlYyhhKSl8fChyJiYoYT1hLnNsaWNlKHJbMF0ubGVuZ3RoKXx8YSkscy5wdXNoKGk9W10pKSxuPSExLChyPXouZXhlYyhhKSkmJihuPXIuc2hpZnQoKSxpLnB1c2goe3ZhbHVlOm4sdHlwZTpyWzBdLnJlcGxhY2UoJCwiICIpfSksYT1hLnNsaWNlKG4ubGVuZ3RoKSksYi5maWx0ZXIpIShyPUdbb10uZXhlYyhhKSl8fHVbb10mJiEocj11W29dKHIpKXx8KG49ci5zaGlmdCgpLGkucHVzaCh7dmFsdWU6bix0eXBlOm8sbWF0Y2hlczpyfSksYT1hLnNsaWNlKG4ubGVuZ3RoKSk7aWYoIW4pYnJlYWt9cmV0dXJuIHQ/YS5sZW5ndGg6YT9zZS5lcnJvcihlKTp4KGUscykuc2xpY2UoMCl9LGY9c2UuY29tcGlsZT1mdW5jdGlvbihlLHQpe3ZhciBuLHYseSxtLHgscixpPVtdLG89W10sYT1BW2UrIiAiXTtpZighYSl7dHx8KHQ9aChlKSksbj10Lmxlbmd0aDt3aGlsZShuLS0pKGE9RWUodFtuXSkpW1NdP2kucHVzaChhKTpvLnB1c2goYSk7KGE9QShlLCh2PW8sbT0wPCh5PWkpLmxlbmd0aCx4PTA8di5sZW5ndGgscj1mdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvLGEscyx1PTAsbD0iMCIsYz1lJiZbXSxmPVtdLHA9dyxkPWV8fHgmJmIuZmluZC5UQUcoIioiLGkpLGg9ays9bnVsbD09cD8xOk1hdGgucmFuZG9tKCl8fC4xLGc9ZC5sZW5ndGg7Zm9yKGkmJih3PXQ9PUN8fHR8fGkpO2whPT1nJiZudWxsIT0obz1kW2xdKTtsKyspe2lmKHgmJm8pe2E9MCx0fHxvLm93bmVyRG9jdW1lbnQ9PUN8fChUKG8pLG49IUUpO3doaWxlKHM9dlthKytdKWlmKHMobyx0fHxDLG4pKXtyLnB1c2gobyk7YnJlYWt9aSYmKGs9aCl9bSYmKChvPSFzJiZvKSYmdS0tLGUmJmMucHVzaChvKSl9aWYodSs9bCxtJiZsIT09dSl7YT0wO3doaWxlKHM9eVthKytdKXMoYyxmLHQsbik7aWYoZSl7aWYoMDx1KXdoaWxlKGwtLSljW2xdfHxmW2xdfHwoZltsXT1xLmNhbGwocikpO2Y9VGUoZil9SC5hcHBseShyLGYpLGkmJiFlJiYwPGYubGVuZ3RoJiYxPHUreS5sZW5ndGgmJnNlLnVuaXF1ZVNvcnQocil9cmV0dXJuIGkmJihrPWgsdz1wKSxjfSxtP2xlKHIpOnIpKSkuc2VsZWN0b3I9ZX1yZXR1cm4gYX0sZz1zZS5zZWxlY3Q9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHMsdSxsPSJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLGM9IXImJmgoZT1sLnNlbGVjdG9yfHxlKTtpZihuPW58fFtdLDE9PT1jLmxlbmd0aCl7aWYoMjwobz1jWzBdPWNbMF0uc2xpY2UoMCkpLmxlbmd0aCYmIklEIj09PShhPW9bMF0pLnR5cGUmJjk9PT10Lm5vZGVUeXBlJiZFJiZiLnJlbGF0aXZlW29bMV0udHlwZV0pe2lmKCEodD0oYi5maW5kLklEKGEubWF0Y2hlc1swXS5yZXBsYWNlKHRlLG5lKSx0KXx8W10pWzBdKSlyZXR1cm4gbjtsJiYodD10LnBhcmVudE5vZGUpLGU9ZS5zbGljZShvLnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1pPUcubmVlZHNDb250ZXh0LnRlc3QoZSk/MDpvLmxlbmd0aDt3aGlsZShpLS0pe2lmKGE9b1tpXSxiLnJlbGF0aXZlW3M9YS50eXBlXSlicmVhaztpZigodT1iLmZpbmRbc10pJiYocj11KGEubWF0Y2hlc1swXS5yZXBsYWNlKHRlLG5lKSxlZS50ZXN0KG9bMF0udHlwZSkmJnllKHQucGFyZW50Tm9kZSl8fHQpKSl7aWYoby5zcGxpY2UoaSwxKSwhKGU9ci5sZW5ndGgmJnhlKG8pKSlyZXR1cm4gSC5hcHBseShuLHIpLG47YnJlYWt9fX1yZXR1cm4obHx8ZihlLGMpKShyLHQsIUUsbiwhdHx8ZWUudGVzdChlKSYmeWUodC5wYXJlbnROb2RlKXx8dCksbn0sZC5zb3J0U3RhYmxlPVMuc3BsaXQoIiIpLnNvcnQoRCkuam9pbigiIik9PT1TLGQuZGV0ZWN0RHVwbGljYXRlcz0hIWwsVCgpLGQuc29ydERldGFjaGVkPWNlKGZ1bmN0aW9uKGUpe3JldHVybiAxJmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24oQy5jcmVhdGVFbGVtZW50KCJmaWVsZHNldCIpKX0pLGNlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsIiMiPT09ZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpfSl8fGZlKCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIixmdW5jdGlvbihlLHQsbil7aWYoIW4pcmV0dXJuIGUuZ2V0QXR0cmlidXRlKHQsInR5cGUiPT09dC50b0xvd2VyQ2FzZSgpPzE6Mil9KSxkLmF0dHJpYnV0ZXMmJmNlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGlucHV0Lz4iLGUuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIiksIiI9PT1lLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpfSl8fGZlKCJ2YWx1ZSIsZnVuY3Rpb24oZSx0LG4pe2lmKCFuJiYiaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXJldHVybiBlLmRlZmF1bHRWYWx1ZX0pLGNlKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKX0pfHxmZShSLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtpZighbilyZXR1cm4hMD09PWVbdF0/dC50b0xvd2VyQ2FzZSgpOihyPWUuZ2V0QXR0cmlidXRlTm9kZSh0KSkmJnIuc3BlY2lmaWVkP3IudmFsdWU6bnVsbH0pLHNlfShDKTtTLmZpbmQ9ZCxTLmV4cHI9ZC5zZWxlY3RvcnMsUy5leHByWyI6Il09Uy5leHByLnBzZXVkb3MsUy51bmlxdWVTb3J0PVMudW5pcXVlPWQudW5pcXVlU29ydCxTLnRleHQ9ZC5nZXRUZXh0LFMuaXNYTUxEb2M9ZC5pc1hNTCxTLmNvbnRhaW5zPWQuY29udGFpbnMsUy5lc2NhcGVTZWxlY3Rvcj1kLmVzY2FwZTt2YXIgaD1mdW5jdGlvbihlLHQsbil7dmFyIHI9W10saT12b2lkIDAhPT1uO3doaWxlKChlPWVbdF0pJiY5IT09ZS5ub2RlVHlwZSlpZigxPT09ZS5ub2RlVHlwZSl7aWYoaSYmUyhlKS5pcyhuKSlicmVhaztyLnB1c2goZSl9cmV0dXJuIHJ9LFQ9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49W107ZTtlPWUubmV4dFNpYmxpbmcpMT09PWUubm9kZVR5cGUmJmUhPT10JiZuLnB1c2goZSk7cmV0dXJuIG59LGs9Uy5leHByLm1hdGNoLm5lZWRzQ29udGV4dDtmdW5jdGlvbiBBKGUsdCl7cmV0dXJuIGUubm9kZU5hbWUmJmUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXQudG9Mb3dlckNhc2UoKX12YXIgTj0vXjwoW2Etel1bXlwvXDA+Olx4MjBcdFxyXG5cZl0qKVtceDIwXHRcclxuXGZdKlwvPz4oPzo8XC9cMT58KSQvaTtmdW5jdGlvbiBEKGUsbixyKXtyZXR1cm4gbShuKT9TLmdyZXAoZSxmdW5jdGlvbihlLHQpe3JldHVybiEhbi5jYWxsKGUsdCxlKSE9PXJ9KTpuLm5vZGVUeXBlP1MuZ3JlcChlLGZ1bmN0aW9uKGUpe3JldHVybiBlPT09biE9PXJ9KToic3RyaW5nIiE9dHlwZW9mIG4/Uy5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuLTE8aS5jYWxsKG4sZSkhPT1yfSk6Uy5maWx0ZXIobixlLHIpfVMuZmlsdGVyPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10WzBdO3JldHVybiBuJiYoZT0iOm5vdCgiK2UrIikiKSwxPT09dC5sZW5ndGgmJjE9PT1yLm5vZGVUeXBlP1MuZmluZC5tYXRjaGVzU2VsZWN0b3IocixlKT9bcl06W106Uy5maW5kLm1hdGNoZXMoZSxTLmdyZXAodCxmdW5jdGlvbihlKXtyZXR1cm4gMT09PWUubm9kZVR5cGV9KSl9LFMuZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj10aGlzLmxlbmd0aCxpPXRoaXM7aWYoInN0cmluZyIhPXR5cGVvZiBlKXJldHVybiB0aGlzLnB1c2hTdGFjayhTKGUpLmZpbHRlcihmdW5jdGlvbigpe2Zvcih0PTA7dDxyO3QrKylpZihTLmNvbnRhaW5zKGlbdF0sdGhpcykpcmV0dXJuITB9KSk7Zm9yKG49dGhpcy5wdXNoU3RhY2soW10pLHQ9MDt0PHI7dCsrKVMuZmluZChlLGlbdF0sbik7cmV0dXJuIDE8cj9TLnVuaXF1ZVNvcnQobik6bn0sZmlsdGVyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhEKHRoaXMsZXx8W10sITEpKX0sbm90OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhEKHRoaXMsZXx8W10sITApKX0saXM6ZnVuY3Rpb24oZSl7cmV0dXJuISFEKHRoaXMsInN0cmluZyI9PXR5cGVvZiBlJiZrLnRlc3QoZSk/UyhlKTplfHxbXSwhMSkubGVuZ3RofX0pO3ZhciBqLHE9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0rKSkkLzsoUy5mbi5pbml0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpO2lmKCFlKXJldHVybiB0aGlzO2lmKG49bnx8aiwic3RyaW5nIj09dHlwZW9mIGUpe2lmKCEocj0iPCI9PT1lWzBdJiYiPiI9PT1lW2UubGVuZ3RoLTFdJiYzPD1lLmxlbmd0aD9bbnVsbCxlLG51bGxdOnEuZXhlYyhlKSl8fCFyWzFdJiZ0KXJldHVybiF0fHx0LmpxdWVyeT8odHx8bikuZmluZChlKTp0aGlzLmNvbnN0cnVjdG9yKHQpLmZpbmQoZSk7aWYoclsxXSl7aWYodD10IGluc3RhbmNlb2YgUz90WzBdOnQsUy5tZXJnZSh0aGlzLFMucGFyc2VIVE1MKHJbMV0sdCYmdC5ub2RlVHlwZT90Lm93bmVyRG9jdW1lbnR8fHQ6RSwhMCkpLE4udGVzdChyWzFdKSYmUy5pc1BsYWluT2JqZWN0KHQpKWZvcihyIGluIHQpbSh0aGlzW3JdKT90aGlzW3JdKHRbcl0pOnRoaXMuYXR0cihyLHRbcl0pO3JldHVybiB0aGlzfXJldHVybihpPUUuZ2V0RWxlbWVudEJ5SWQoclsyXSkpJiYodGhpc1swXT1pLHRoaXMubGVuZ3RoPTEpLHRoaXN9cmV0dXJuIGUubm9kZVR5cGU/KHRoaXNbMF09ZSx0aGlzLmxlbmd0aD0xLHRoaXMpOm0oZSk/dm9pZCAwIT09bi5yZWFkeT9uLnJlYWR5KGUpOmUoUyk6Uy5tYWtlQXJyYXkoZSx0aGlzKX0pLnByb3RvdHlwZT1TLmZuLGo9UyhFKTt2YXIgTD0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxIPXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O2Z1bmN0aW9uIE8oZSx0KXt3aGlsZSgoZT1lW3RdKSYmMSE9PWUubm9kZVR5cGUpO3JldHVybiBlfVMuZm4uZXh0ZW5kKHtoYXM6ZnVuY3Rpb24oZSl7dmFyIHQ9UyhlLHRoaXMpLG49dC5sZW5ndGg7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTxuO2UrKylpZihTLmNvbnRhaW5zKHRoaXMsdFtlXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MCxpPXRoaXMubGVuZ3RoLG89W10sYT0ic3RyaW5nIiE9dHlwZW9mIGUmJlMoZSk7aWYoIWsudGVzdChlKSlmb3IoO3I8aTtyKyspZm9yKG49dGhpc1tyXTtuJiZuIT09dDtuPW4ucGFyZW50Tm9kZSlpZihuLm5vZGVUeXBlPDExJiYoYT8tMTxhLmluZGV4KG4pOjE9PT1uLm5vZGVUeXBlJiZTLmZpbmQubWF0Y2hlc1NlbGVjdG9yKG4sZSkpKXtvLnB1c2gobik7YnJlYWt9cmV0dXJuIHRoaXMucHVzaFN0YWNrKDE8by5sZW5ndGg/Uy51bmlxdWVTb3J0KG8pOm8pfSxpbmRleDpmdW5jdGlvbihlKXtyZXR1cm4gZT8ic3RyaW5nIj09dHlwZW9mIGU/aS5jYWxsKFMoZSksdGhpc1swXSk6aS5jYWxsKHRoaXMsZS5qcXVlcnk/ZVswXTplKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnB1c2hTdGFjayhTLnVuaXF1ZVNvcnQoUy5tZXJnZSh0aGlzLmdldCgpLFMoZSx0KSkpKX0sYWRkQmFjazpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hZGQobnVsbD09ZT90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihlKSl9fSksUy5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0JiYxMSE9PXQubm9kZVR5cGU/dDpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGUpe3JldHVybiBoKGUsInBhcmVudE5vZGUiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gaChlLCJwYXJlbnROb2RlIixuKX0sbmV4dDpmdW5jdGlvbihlKXtyZXR1cm4gTyhlLCJuZXh0U2libGluZyIpfSxwcmV2OmZ1bmN0aW9uKGUpe3JldHVybiBPKGUsInByZXZpb3VzU2libGluZyIpfSxuZXh0QWxsOmZ1bmN0aW9uKGUpe3JldHVybiBoKGUsIm5leHRTaWJsaW5nIil9LHByZXZBbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIGgoZSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGgoZSwibmV4dFNpYmxpbmciLG4pfSxwcmV2VW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBoKGUsInByZXZpb3VzU2libGluZyIsbil9LHNpYmxpbmdzOmZ1bmN0aW9uKGUpe3JldHVybiBUKChlLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGUpfSxjaGlsZHJlbjpmdW5jdGlvbihlKXtyZXR1cm4gVChlLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZS5jb250ZW50RG9jdW1lbnQmJnIoZS5jb250ZW50RG9jdW1lbnQpP2UuY29udGVudERvY3VtZW50OihBKGUsInRlbXBsYXRlIikmJihlPWUuY29udGVudHx8ZSksUy5tZXJnZShbXSxlLmNoaWxkTm9kZXMpKX19LGZ1bmN0aW9uKHIsaSl7Uy5mbltyXT1mdW5jdGlvbihlLHQpe3ZhciBuPVMubWFwKHRoaXMsaSxlKTtyZXR1cm4iVW50aWwiIT09ci5zbGljZSgtNSkmJih0PWUpLHQmJiJzdHJpbmciPT10eXBlb2YgdCYmKG49Uy5maWx0ZXIodCxuKSksMTx0aGlzLmxlbmd0aCYmKEhbcl18fFMudW5pcXVlU29ydChuKSxMLnRlc3QocikmJm4ucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhuKX19KTt2YXIgUD0vW15ceDIwXHRcclxuXGZdKy9nO2Z1bmN0aW9uIFIoZSl7cmV0dXJuIGV9ZnVuY3Rpb24gTShlKXt0aHJvdyBlfWZ1bmN0aW9uIEkoZSx0LG4scil7dmFyIGk7dHJ5e2UmJm0oaT1lLnByb21pc2UpP2kuY2FsbChlKS5kb25lKHQpLmZhaWwobik6ZSYmbShpPWUudGhlbik/aS5jYWxsKGUsdCxuKTp0LmFwcGx5KHZvaWQgMCxbZV0uc2xpY2UocikpfWNhdGNoKGUpe24uYXBwbHkodm9pZCAwLFtlXSl9fVMuQ2FsbGJhY2tzPWZ1bmN0aW9uKHIpe3ZhciBlLG47cj0ic3RyaW5nIj09dHlwZW9mIHI/KGU9cixuPXt9LFMuZWFjaChlLm1hdGNoKFApfHxbXSxmdW5jdGlvbihlLHQpe25bdF09ITB9KSxuKTpTLmV4dGVuZCh7fSxyKTt2YXIgaSx0LG8sYSxzPVtdLHU9W10sbD0tMSxjPWZ1bmN0aW9uKCl7Zm9yKGE9YXx8ci5vbmNlLG89aT0hMDt1Lmxlbmd0aDtsPS0xKXt0PXUuc2hpZnQoKTt3aGlsZSgrK2w8cy5sZW5ndGgpITE9PT1zW2xdLmFwcGx5KHRbMF0sdFsxXSkmJnIuc3RvcE9uRmFsc2UmJihsPXMubGVuZ3RoLHQ9ITEpfXIubWVtb3J5fHwodD0hMSksaT0hMSxhJiYocz10P1tdOiIiKX0sZj17YWRkOmZ1bmN0aW9uKCl7cmV0dXJuIHMmJih0JiYhaSYmKGw9cy5sZW5ndGgtMSx1LnB1c2godCkpLGZ1bmN0aW9uIG4oZSl7Uy5lYWNoKGUsZnVuY3Rpb24oZSx0KXttKHQpP3IudW5pcXVlJiZmLmhhcyh0KXx8cy5wdXNoKHQpOnQmJnQubGVuZ3RoJiYic3RyaW5nIiE9PXcodCkmJm4odCl9KX0oYXJndW1lbnRzKSx0JiYhaSYmYygpKSx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gUy5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihlLHQpe3ZhciBuO3doaWxlKC0xPChuPVMuaW5BcnJheSh0LHMsbikpKXMuc3BsaWNlKG4sMSksbjw9bCYmbC0tfSksdGhpc30saGFzOmZ1bmN0aW9uKGUpe3JldHVybiBlPy0xPFMuaW5BcnJheShlLHMpOjA8cy5sZW5ndGh9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIHMmJihzPVtdKSx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGE9dT1bXSxzPXQ9IiIsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hc30sbG9jazpmdW5jdGlvbigpe3JldHVybiBhPXU9W10sdHx8aXx8KHM9dD0iIiksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuISFhfSxmaXJlV2l0aDpmdW5jdGlvbihlLHQpe3JldHVybiBhfHwodD1bZSwodD10fHxbXSkuc2xpY2U/dC5zbGljZSgpOnRdLHUucHVzaCh0KSxpfHxjKCkpLHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXtyZXR1cm4gZi5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyksdGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIW99fTtyZXR1cm4gZn0sUy5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGUpe3ZhciBvPVtbIm5vdGlmeSIsInByb2dyZXNzIixTLkNhbGxiYWNrcygibWVtb3J5IiksUy5DYWxsYmFja3MoIm1lbW9yeSIpLDJdLFsicmVzb2x2ZSIsImRvbmUiLFMuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLFMuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLDAsInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIixTLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxTLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwxLCJyZWplY3RlZCJdXSxpPSJwZW5kaW5nIixhPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBpfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gcy5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LCJjYXRjaCI6ZnVuY3Rpb24oZSl7cmV0dXJuIGEudGhlbihudWxsLGUpfSxwaXBlOmZ1bmN0aW9uKCl7dmFyIGk9YXJndW1lbnRzO3JldHVybiBTLkRlZmVycmVkKGZ1bmN0aW9uKHIpe1MuZWFjaChvLGZ1bmN0aW9uKGUsdCl7dmFyIG49bShpW3RbNF1dKSYmaVt0WzRdXTtzW3RbMV1dKGZ1bmN0aW9uKCl7dmFyIGU9biYmbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZSYmbShlLnByb21pc2UpP2UucHJvbWlzZSgpLnByb2dyZXNzKHIubm90aWZ5KS5kb25lKHIucmVzb2x2ZSkuZmFpbChyLnJlamVjdCk6clt0WzBdKyJXaXRoIl0odGhpcyxuP1tlXTphcmd1bWVudHMpfSl9KSxpPW51bGx9KS5wcm9taXNlKCl9LHRoZW46ZnVuY3Rpb24odCxuLHIpe3ZhciB1PTA7ZnVuY3Rpb24gbChpLG8sYSxzKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbj10aGlzLHI9YXJndW1lbnRzLGU9ZnVuY3Rpb24oKXt2YXIgZSx0O2lmKCEoaTx1KSl7aWYoKGU9YS5hcHBseShuLHIpKT09PW8ucHJvbWlzZSgpKXRocm93IG5ldyBUeXBlRXJyb3IoIlRoZW5hYmxlIHNlbGYtcmVzb2x1dGlvbiIpO3Q9ZSYmKCJvYmplY3QiPT10eXBlb2YgZXx8ImZ1bmN0aW9uIj09dHlwZW9mIGUpJiZlLnRoZW4sbSh0KT9zP3QuY2FsbChlLGwodSxvLFIscyksbCh1LG8sTSxzKSk6KHUrKyx0LmNhbGwoZSxsKHUsbyxSLHMpLGwodSxvLE0scyksbCh1LG8sUixvLm5vdGlmeVdpdGgpKSk6KGEhPT1SJiYobj12b2lkIDAscj1bZV0pLChzfHxvLnJlc29sdmVXaXRoKShuLHIpKX19LHQ9cz9lOmZ1bmN0aW9uKCl7dHJ5e2UoKX1jYXRjaChlKXtTLkRlZmVycmVkLmV4Y2VwdGlvbkhvb2smJlMuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayhlLHQuc3RhY2tUcmFjZSksdTw9aSsxJiYoYSE9PU0mJihuPXZvaWQgMCxyPVtlXSksby5yZWplY3RXaXRoKG4scikpfX07aT90KCk6KFMuRGVmZXJyZWQuZ2V0U3RhY2tIb29rJiYodC5zdGFja1RyYWNlPVMuRGVmZXJyZWQuZ2V0U3RhY2tIb29rKCkpLEMuc2V0VGltZW91dCh0KSl9fXJldHVybiBTLkRlZmVycmVkKGZ1bmN0aW9uKGUpe29bMF1bM10uYWRkKGwoMCxlLG0ocik/cjpSLGUubm90aWZ5V2l0aCkpLG9bMV1bM10uYWRkKGwoMCxlLG0odCk/dDpSKSksb1syXVszXS5hZGQobCgwLGUsbShuKT9uOk0pKX0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT9TLmV4dGVuZChlLGEpOmF9fSxzPXt9O3JldHVybiBTLmVhY2gobyxmdW5jdGlvbihlLHQpe3ZhciBuPXRbMl0scj10WzVdO2FbdFsxXV09bi5hZGQsciYmbi5hZGQoZnVuY3Rpb24oKXtpPXJ9LG9bMy1lXVsyXS5kaXNhYmxlLG9bMy1lXVszXS5kaXNhYmxlLG9bMF1bMl0ubG9jayxvWzBdWzNdLmxvY2spLG4uYWRkKHRbM10uZmlyZSksc1t0WzBdXT1mdW5jdGlvbigpe3JldHVybiBzW3RbMF0rIldpdGgiXSh0aGlzPT09cz92b2lkIDA6dGhpcyxhcmd1bWVudHMpLHRoaXN9LHNbdFswXSsiV2l0aCJdPW4uZmlyZVdpdGh9KSxhLnByb21pc2UocyksZSYmZS5jYWxsKHMscyksc30sd2hlbjpmdW5jdGlvbihlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoLHQ9bixyPUFycmF5KHQpLGk9cy5jYWxsKGFyZ3VtZW50cyksbz1TLkRlZmVycmVkKCksYT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7clt0XT10aGlzLGlbdF09MTxhcmd1bWVudHMubGVuZ3RoP3MuY2FsbChhcmd1bWVudHMpOmUsLS1ufHxvLnJlc29sdmVXaXRoKHIsaSl9fTtpZihuPD0xJiYoSShlLG8uZG9uZShhKHQpKS5yZXNvbHZlLG8ucmVqZWN0LCFuKSwicGVuZGluZyI9PT1vLnN0YXRlKCl8fG0oaVt0XSYmaVt0XS50aGVuKSkpcmV0dXJuIG8udGhlbigpO3doaWxlKHQtLSlJKGlbdF0sYSh0KSxvLnJlamVjdCk7cmV0dXJuIG8ucHJvbWlzZSgpfX0pO3ZhciBXPS9eKEV2YWx8SW50ZXJuYWx8UmFuZ2V8UmVmZXJlbmNlfFN5bnRheHxUeXBlfFVSSSlFcnJvciQvO1MuRGVmZXJyZWQuZXhjZXB0aW9uSG9vaz1mdW5jdGlvbihlLHQpe0MuY29uc29sZSYmQy5jb25zb2xlLndhcm4mJmUmJlcudGVzdChlLm5hbWUpJiZDLmNvbnNvbGUud2FybigialF1ZXJ5LkRlZmVycmVkIGV4Y2VwdGlvbjogIitlLm1lc3NhZ2UsZS5zdGFjayx0KX0sUy5yZWFkeUV4Y2VwdGlvbj1mdW5jdGlvbihlKXtDLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBlfSl9O3ZhciBGPVMuRGVmZXJyZWQoKTtmdW5jdGlvbiBCKCl7RS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixCKSxDLnJlbW92ZUV2ZW50TGlzdGVuZXIoImxvYWQiLEIpLFMucmVhZHkoKX1TLmZuLnJlYWR5PWZ1bmN0aW9uKGUpe3JldHVybiBGLnRoZW4oZSlbImNhdGNoIl0oZnVuY3Rpb24oZSl7Uy5yZWFkeUV4Y2VwdGlvbihlKX0pLHRoaXN9LFMuZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLHJlYWR5OmZ1bmN0aW9uKGUpeyghMD09PWU/LS1TLnJlYWR5V2FpdDpTLmlzUmVhZHkpfHwoUy5pc1JlYWR5PSEwKSE9PWUmJjA8LS1TLnJlYWR5V2FpdHx8Ri5yZXNvbHZlV2l0aChFLFtTXSl9fSksUy5yZWFkeS50aGVuPUYudGhlbiwiY29tcGxldGUiPT09RS5yZWFkeVN0YXRlfHwibG9hZGluZyIhPT1FLnJlYWR5U3RhdGUmJiFFLmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbD9DLnNldFRpbWVvdXQoUy5yZWFkeSk6KEUuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsQiksQy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixCKSk7dmFyICQ9ZnVuY3Rpb24oZSx0LG4scixpLG8sYSl7dmFyIHM9MCx1PWUubGVuZ3RoLGw9bnVsbD09bjtpZigib2JqZWN0Ij09PXcobikpZm9yKHMgaW4gaT0hMCxuKSQoZSx0LHMsbltzXSwhMCxvLGEpO2Vsc2UgaWYodm9pZCAwIT09ciYmKGk9ITAsbShyKXx8KGE9ITApLGwmJihhPyh0LmNhbGwoZSxyKSx0PW51bGwpOihsPXQsdD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGwuY2FsbChTKGUpLG4pfSkpLHQpKWZvcig7czx1O3MrKyl0KGVbc10sbixhP3I6ci5jYWxsKGVbc10scyx0KGVbc10sbikpKTtyZXR1cm4gaT9lOmw/dC5jYWxsKGUpOnU/dChlWzBdLG4pOm99LF89L14tbXMtLyx6PS8tKFthLXpdKS9nO2Z1bmN0aW9uIFUoZSx0KXtyZXR1cm4gdC50b1VwcGVyQ2FzZSgpfWZ1bmN0aW9uIFgoZSl7cmV0dXJuIGUucmVwbGFjZShfLCJtcy0iKS5yZXBsYWNlKHosVSl9dmFyIFY9ZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLm5vZGVUeXBlfHw5PT09ZS5ub2RlVHlwZXx8IStlLm5vZGVUeXBlfTtmdW5jdGlvbiBHKCl7dGhpcy5leHBhbmRvPVMuZXhwYW5kbytHLnVpZCsrfUcudWlkPTEsRy5wcm90b3R5cGU9e2NhY2hlOmZ1bmN0aW9uKGUpe3ZhciB0PWVbdGhpcy5leHBhbmRvXTtyZXR1cm4gdHx8KHQ9T2JqZWN0LmNyZWF0ZShudWxsKSxWKGUpJiYoZS5ub2RlVHlwZT9lW3RoaXMuZXhwYW5kb109dDpPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0aGlzLmV4cGFuZG8se3ZhbHVlOnQsY29uZmlndXJhYmxlOiEwfSkpKSx0fSxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9dGhpcy5jYWNoZShlKTtpZigic3RyaW5nIj09dHlwZW9mIHQpaVtYKHQpXT1uO2Vsc2UgZm9yKHIgaW4gdClpW1gocildPXRbcl07cmV0dXJuIGl9LGdldDpmdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10P3RoaXMuY2FjaGUoZSk6ZVt0aGlzLmV4cGFuZG9dJiZlW3RoaXMuZXhwYW5kb11bWCh0KV19LGFjY2VzczpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PXR8fHQmJiJzdHJpbmciPT10eXBlb2YgdCYmdm9pZCAwPT09bj90aGlzLmdldChlLHQpOih0aGlzLnNldChlLHQsbiksdm9pZCAwIT09bj9uOnQpfSxyZW1vdmU6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPWVbdGhpcy5leHBhbmRvXTtpZih2b2lkIDAhPT1yKXtpZih2b2lkIDAhPT10KXtuPSh0PUFycmF5LmlzQXJyYXkodCk/dC5tYXAoWCk6KHQ9WCh0KSlpbiByP1t0XTp0Lm1hdGNoKFApfHxbXSkubGVuZ3RoO3doaWxlKG4tLSlkZWxldGUgclt0W25dXX0odm9pZCAwPT09dHx8Uy5pc0VtcHR5T2JqZWN0KHIpKSYmKGUubm9kZVR5cGU/ZVt0aGlzLmV4cGFuZG9dPXZvaWQgMDpkZWxldGUgZVt0aGlzLmV4cGFuZG9dKX19LGhhc0RhdGE6ZnVuY3Rpb24oZSl7dmFyIHQ9ZVt0aGlzLmV4cGFuZG9dO3JldHVybiB2b2lkIDAhPT10JiYhUy5pc0VtcHR5T2JqZWN0KHQpfX07dmFyIFk9bmV3IEcsUT1uZXcgRyxKPS9eKD86XHtbXHdcV10qXH18XFtbXHdcV10qXF0pJC8sSz0vW0EtWl0vZztmdW5jdGlvbiBaKGUsdCxuKXt2YXIgcixpO2lmKHZvaWQgMD09PW4mJjE9PT1lLm5vZGVUeXBlKWlmKHI9ImRhdGEtIit0LnJlcGxhY2UoSywiLSQmIikudG9Mb3dlckNhc2UoKSwic3RyaW5nIj09dHlwZW9mKG49ZS5nZXRBdHRyaWJ1dGUocikpKXt0cnl7bj0idHJ1ZSI9PT0oaT1uKXx8ImZhbHNlIiE9PWkmJigibnVsbCI9PT1pP251bGw6aT09PStpKyIiPytpOkoudGVzdChpKT9KU09OLnBhcnNlKGkpOmkpfWNhdGNoKGUpe31RLnNldChlLHQsbil9ZWxzZSBuPXZvaWQgMDtyZXR1cm4gbn1TLmV4dGVuZCh7aGFzRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gUS5oYXNEYXRhKGUpfHxZLmhhc0RhdGEoZSl9LGRhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBRLmFjY2VzcyhlLHQsbil9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtRLnJlbW92ZShlLHQpfSxfZGF0YTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIFkuYWNjZXNzKGUsdCxuKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtZLnJlbW92ZShlLHQpfX0pLFMuZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKG4sZSl7dmFyIHQscixpLG89dGhpc1swXSxhPW8mJm8uYXR0cmlidXRlcztpZih2b2lkIDA9PT1uKXtpZih0aGlzLmxlbmd0aCYmKGk9US5nZXQobyksMT09PW8ubm9kZVR5cGUmJiFZLmdldChvLCJoYXNEYXRhQXR0cnMiKSkpe3Q9YS5sZW5ndGg7d2hpbGUodC0tKWFbdF0mJjA9PT0ocj1hW3RdLm5hbWUpLmluZGV4T2YoImRhdGEtIikmJihyPVgoci5zbGljZSg1KSksWihvLHIsaVtyXSkpO1kuc2V0KG8sImhhc0RhdGFBdHRycyIsITApfXJldHVybiBpfXJldHVybiJvYmplY3QiPT10eXBlb2Ygbj90aGlzLmVhY2goZnVuY3Rpb24oKXtRLnNldCh0aGlzLG4pfSk6JCh0aGlzLGZ1bmN0aW9uKGUpe3ZhciB0O2lmKG8mJnZvaWQgMD09PWUpcmV0dXJuIHZvaWQgMCE9PSh0PVEuZ2V0KG8sbikpP3Q6dm9pZCAwIT09KHQ9WihvLG4pKT90OnZvaWQgMDt0aGlzLmVhY2goZnVuY3Rpb24oKXtRLnNldCh0aGlzLG4sZSl9KX0sbnVsbCxlLDE8YXJndW1lbnRzLmxlbmd0aCxudWxsLCEwKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7US5yZW1vdmUodGhpcyxlKX0pfX0pLFMuZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI7aWYoZSlyZXR1cm4gdD0odHx8ImZ4IikrInF1ZXVlIixyPVkuZ2V0KGUsdCksbiYmKCFyfHxBcnJheS5pc0FycmF5KG4pP3I9WS5hY2Nlc3MoZSx0LFMubWFrZUFycmF5KG4pKTpyLnB1c2gobikpLHJ8fFtdfSxkZXF1ZXVlOmZ1bmN0aW9uKGUsdCl7dD10fHwiZngiO3ZhciBuPVMucXVldWUoZSx0KSxyPW4ubGVuZ3RoLGk9bi5zaGlmdCgpLG89Uy5fcXVldWVIb29rcyhlLHQpOyJpbnByb2dyZXNzIj09PWkmJihpPW4uc2hpZnQoKSxyLS0pLGkmJigiZngiPT09dCYmbi51bnNoaWZ0KCJpbnByb2dyZXNzIiksZGVsZXRlIG8uc3RvcCxpLmNhbGwoZSxmdW5jdGlvbigpe1MuZGVxdWV1ZShlLHQpfSxvKSksIXImJm8mJm8uZW1wdHkuZmlyZSgpfSxfcXVldWVIb29rczpmdW5jdGlvbihlLHQpe3ZhciBuPXQrInF1ZXVlSG9va3MiO3JldHVybiBZLmdldChlLG4pfHxZLmFjY2VzcyhlLG4se2VtcHR5OlMuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLmFkZChmdW5jdGlvbigpe1kucmVtb3ZlKGUsW3QrInF1ZXVlIixuXSl9KX0pfX0pLFMuZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbih0LG4pe3ZhciBlPTI7cmV0dXJuInN0cmluZyIhPXR5cGVvZiB0JiYobj10LHQ9ImZ4IixlLS0pLGFyZ3VtZW50cy5sZW5ndGg8ZT9TLnF1ZXVlKHRoaXNbMF0sdCk6dm9pZCAwPT09bj90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPVMucXVldWUodGhpcyx0LG4pO1MuX3F1ZXVlSG9va3ModGhpcyx0KSwiZngiPT09dCYmImlucHJvZ3Jlc3MiIT09ZVswXSYmUy5kZXF1ZXVlKHRoaXMsdCl9KX0sZGVxdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Uy5kZXF1ZXVlKHRoaXMsZSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5xdWV1ZShlfHwiZngiLFtdKX0scHJvbWlzZTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MSxpPVMuRGVmZXJyZWQoKSxvPXRoaXMsYT10aGlzLmxlbmd0aCxzPWZ1bmN0aW9uKCl7LS1yfHxpLnJlc29sdmVXaXRoKG8sW29dKX07InN0cmluZyIhPXR5cGVvZiBlJiYodD1lLGU9dm9pZCAwKSxlPWV8fCJmeCI7d2hpbGUoYS0tKShuPVkuZ2V0KG9bYV0sZSsicXVldWVIb29rcyIpKSYmbi5lbXB0eSYmKHIrKyxuLmVtcHR5LmFkZChzKSk7cmV0dXJuIHMoKSxpLnByb21pc2UodCl9fSk7dmFyIGVlPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLHRlPW5ldyBSZWdFeHAoIl4oPzooWystXSk9fCkoIitlZSsiKShbYS16JV0qKSQiLCJpIiksbmU9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXSxyZT1FLmRvY3VtZW50RWxlbWVudCxpZT1mdW5jdGlvbihlKXtyZXR1cm4gUy5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSl9LG9lPXtjb21wb3NlZDohMH07cmUuZ2V0Um9vdE5vZGUmJihpZT1mdW5jdGlvbihlKXtyZXR1cm4gUy5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSl8fGUuZ2V0Um9vdE5vZGUob2UpPT09ZS5vd25lckRvY3VtZW50fSk7dmFyIGFlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIm5vbmUiPT09KGU9dHx8ZSkuc3R5bGUuZGlzcGxheXx8IiI9PT1lLnN0eWxlLmRpc3BsYXkmJmllKGUpJiYibm9uZSI9PT1TLmNzcyhlLCJkaXNwbGF5Iil9O2Z1bmN0aW9uIHNlKGUsdCxuLHIpe3ZhciBpLG8sYT0yMCxzPXI/ZnVuY3Rpb24oKXtyZXR1cm4gci5jdXIoKX06ZnVuY3Rpb24oKXtyZXR1cm4gUy5jc3MoZSx0LCIiKX0sdT1zKCksbD1uJiZuWzNdfHwoUy5jc3NOdW1iZXJbdF0/IiI6InB4IiksYz1lLm5vZGVUeXBlJiYoUy5jc3NOdW1iZXJbdF18fCJweCIhPT1sJiYrdSkmJnRlLmV4ZWMoUy5jc3MoZSx0KSk7aWYoYyYmY1szXSE9PWwpe3UvPTIsbD1sfHxjWzNdLGM9K3V8fDE7d2hpbGUoYS0tKVMuc3R5bGUoZSx0LGMrbCksKDEtbykqKDEtKG89cygpL3V8fC41KSk8PTAmJihhPTApLGMvPW87Yyo9MixTLnN0eWxlKGUsdCxjK2wpLG49bnx8W119cmV0dXJuIG4mJihjPStjfHwrdXx8MCxpPW5bMV0/YysoblsxXSsxKSpuWzJdOituWzJdLHImJihyLnVuaXQ9bCxyLnN0YXJ0PWMsci5lbmQ9aSkpLGl9dmFyIHVlPXt9O2Z1bmN0aW9uIGxlKGUsdCl7Zm9yKHZhciBuLHIsaSxvLGEscyx1LGw9W10sYz0wLGY9ZS5sZW5ndGg7YzxmO2MrKykocj1lW2NdKS5zdHlsZSYmKG49ci5zdHlsZS5kaXNwbGF5LHQ/KCJub25lIj09PW4mJihsW2NdPVkuZ2V0KHIsImRpc3BsYXkiKXx8bnVsbCxsW2NdfHwoci5zdHlsZS5kaXNwbGF5PSIiKSksIiI9PT1yLnN0eWxlLmRpc3BsYXkmJmFlKHIpJiYobFtjXT0odT1hPW89dm9pZCAwLGE9KGk9cikub3duZXJEb2N1bWVudCxzPWkubm9kZU5hbWUsKHU9dWVbc10pfHwobz1hLmJvZHkuYXBwZW5kQ2hpbGQoYS5jcmVhdGVFbGVtZW50KHMpKSx1PVMuY3NzKG8sImRpc3BsYXkiKSxvLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobyksIm5vbmUiPT09dSYmKHU9ImJsb2NrIiksdWVbc109dSkpKSk6Im5vbmUiIT09biYmKGxbY109Im5vbmUiLFkuc2V0KHIsImRpc3BsYXkiLG4pKSk7Zm9yKGM9MDtjPGY7YysrKW51bGwhPWxbY10mJihlW2NdLnN0eWxlLmRpc3BsYXk9bFtjXSk7cmV0dXJuIGV9Uy5mbi5leHRlbmQoe3Nob3c6ZnVuY3Rpb24oKXtyZXR1cm4gbGUodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gbGUodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihlKXtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBlP2U/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7YWUodGhpcyk/Uyh0aGlzKS5zaG93KCk6Uyh0aGlzKS5oaWRlKCl9KX19KTt2YXIgY2UsZmUscGU9L14oPzpjaGVja2JveHxyYWRpbykkL2ksZGU9LzwoW2Etel1bXlwvXDA+XHgyMFx0XHJcblxmXSopL2ksaGU9L14kfF5tb2R1bGUkfFwvKD86amF2YXxlY21hKXNjcmlwdC9pO2NlPUUuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLmFwcGVuZENoaWxkKEUuY3JlYXRlRWxlbWVudCgiZGl2IikpLChmZT1FLmNyZWF0ZUVsZW1lbnQoImlucHV0IikpLnNldEF0dHJpYnV0ZSgidHlwZSIsInJhZGlvIiksZmUuc2V0QXR0cmlidXRlKCJjaGVja2VkIiwiY2hlY2tlZCIpLGZlLnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKSxjZS5hcHBlbmRDaGlsZChmZSkseS5jaGVja0Nsb25lPWNlLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxjZS5pbm5lckhUTUw9Ijx0ZXh0YXJlYT54PC90ZXh0YXJlYT4iLHkubm9DbG9uZUNoZWNrZWQ9ISFjZS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWUsY2UuaW5uZXJIVE1MPSI8b3B0aW9uPjwvb3B0aW9uPiIseS5vcHRpb249ISFjZS5sYXN0Q2hpbGQ7dmFyIGdlPXt0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07ZnVuY3Rpb24gdmUoZSx0KXt2YXIgbjtyZXR1cm4gbj0idW5kZWZpbmVkIiE9dHlwZW9mIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0fHwiKiIpOiJ1bmRlZmluZWQiIT10eXBlb2YgZS5xdWVyeVNlbGVjdG9yQWxsP2UucXVlcnlTZWxlY3RvckFsbCh0fHwiKiIpOltdLHZvaWQgMD09PXR8fHQmJkEoZSx0KT9TLm1lcmdlKFtlXSxuKTpufWZ1bmN0aW9uIHllKGUsdCl7Zm9yKHZhciBuPTAscj1lLmxlbmd0aDtuPHI7bisrKVkuc2V0KGVbbl0sImdsb2JhbEV2YWwiLCF0fHxZLmdldCh0W25dLCJnbG9iYWxFdmFsIikpfWdlLnRib2R5PWdlLnRmb290PWdlLmNvbGdyb3VwPWdlLmNhcHRpb249Z2UudGhlYWQsZ2UudGg9Z2UudGQseS5vcHRpb258fChnZS5vcHRncm91cD1nZS5vcHRpb249WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSk7dmFyIG1lPS88fCYjP1x3KzsvO2Z1bmN0aW9uIHhlKGUsdCxuLHIsaSl7Zm9yKHZhciBvLGEscyx1LGwsYyxmPXQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLHA9W10sZD0wLGg9ZS5sZW5ndGg7ZDxoO2QrKylpZigobz1lW2RdKXx8MD09PW8paWYoIm9iamVjdCI9PT13KG8pKVMubWVyZ2UocCxvLm5vZGVUeXBlP1tvXTpvKTtlbHNlIGlmKG1lLnRlc3Qobykpe2E9YXx8Zi5hcHBlbmRDaGlsZCh0LmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxzPShkZS5leGVjKG8pfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLHU9Z2Vbc118fGdlLl9kZWZhdWx0LGEuaW5uZXJIVE1MPXVbMV0rUy5odG1sUHJlZmlsdGVyKG8pK3VbMl0sYz11WzBdO3doaWxlKGMtLSlhPWEubGFzdENoaWxkO1MubWVyZ2UocCxhLmNoaWxkTm9kZXMpLChhPWYuZmlyc3RDaGlsZCkudGV4dENvbnRlbnQ9IiJ9ZWxzZSBwLnB1c2godC5jcmVhdGVUZXh0Tm9kZShvKSk7Zi50ZXh0Q29udGVudD0iIixkPTA7d2hpbGUobz1wW2QrK10paWYociYmLTE8Uy5pbkFycmF5KG8scikpaSYmaS5wdXNoKG8pO2Vsc2UgaWYobD1pZShvKSxhPXZlKGYuYXBwZW5kQ2hpbGQobyksInNjcmlwdCIpLGwmJnllKGEpLG4pe2M9MDt3aGlsZShvPWFbYysrXSloZS50ZXN0KG8udHlwZXx8IiIpJiZuLnB1c2gobyl9cmV0dXJuIGZ9dmFyIGJlPS9ea2V5Lyx3ZT0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnV8ZHJhZ3xkcm9wKXxjbGljay8sVGU9L14oW14uXSopKD86XC4oLispfCkvO2Z1bmN0aW9uIENlKCl7cmV0dXJuITB9ZnVuY3Rpb24gRWUoKXtyZXR1cm4hMX1mdW5jdGlvbiBTZShlLHQpe3JldHVybiBlPT09ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIEUuYWN0aXZlRWxlbWVudH1jYXRjaChlKXt9fSgpPT0oImZvY3VzIj09PXQpfWZ1bmN0aW9uIGtlKGUsdCxuLHIsaSxvKXt2YXIgYSxzO2lmKCJvYmplY3QiPT10eXBlb2YgdCl7Zm9yKHMgaW4ic3RyaW5nIiE9dHlwZW9mIG4mJihyPXJ8fG4sbj12b2lkIDApLHQpa2UoZSxzLG4scix0W3NdLG8pO3JldHVybiBlfWlmKG51bGw9PXImJm51bGw9PWk/KGk9bixyPW49dm9pZCAwKTpudWxsPT1pJiYoInN0cmluZyI9PXR5cGVvZiBuPyhpPXIscj12b2lkIDApOihpPXIscj1uLG49dm9pZCAwKSksITE9PT1pKWk9RWU7ZWxzZSBpZighaSlyZXR1cm4gZTtyZXR1cm4gMT09PW8mJihhPWksKGk9ZnVuY3Rpb24oZSl7cmV0dXJuIFMoKS5vZmYoZSksYS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KS5ndWlkPWEuZ3VpZHx8KGEuZ3VpZD1TLmd1aWQrKykpLGUuZWFjaChmdW5jdGlvbigpe1MuZXZlbnQuYWRkKHRoaXMsdCxpLHIsbil9KX1mdW5jdGlvbiBBZShlLGksbyl7bz8oWS5zZXQoZSxpLCExKSxTLmV2ZW50LmFkZChlLGkse25hbWVzcGFjZTohMSxoYW5kbGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj1ZLmdldCh0aGlzLGkpO2lmKDEmZS5pc1RyaWdnZXImJnRoaXNbaV0pe2lmKHIubGVuZ3RoKShTLmV2ZW50LnNwZWNpYWxbaV18fHt9KS5kZWxlZ2F0ZVR5cGUmJmUuc3RvcFByb3BhZ2F0aW9uKCk7ZWxzZSBpZihyPXMuY2FsbChhcmd1bWVudHMpLFkuc2V0KHRoaXMsaSxyKSx0PW8odGhpcyxpKSx0aGlzW2ldKCksciE9PShuPVkuZ2V0KHRoaXMsaSkpfHx0P1kuc2V0KHRoaXMsaSwhMSk6bj17fSxyIT09bilyZXR1cm4gZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxlLnByZXZlbnREZWZhdWx0KCksbi52YWx1ZX1lbHNlIHIubGVuZ3RoJiYoWS5zZXQodGhpcyxpLHt2YWx1ZTpTLmV2ZW50LnRyaWdnZXIoUy5leHRlbmQoclswXSxTLkV2ZW50LnByb3RvdHlwZSksci5zbGljZSgxKSx0aGlzKX0pLGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkpfX0pKTp2b2lkIDA9PT1ZLmdldChlLGkpJiZTLmV2ZW50LmFkZChlLGksQ2UpfVMuZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24odCxlLG4scixpKXt2YXIgbyxhLHMsdSxsLGMsZixwLGQsaCxnLHY9WS5nZXQodCk7aWYoVih0KSl7bi5oYW5kbGVyJiYobj0obz1uKS5oYW5kbGVyLGk9by5zZWxlY3RvciksaSYmUy5maW5kLm1hdGNoZXNTZWxlY3RvcihyZSxpKSxuLmd1aWR8fChuLmd1aWQ9Uy5ndWlkKyspLCh1PXYuZXZlbnRzKXx8KHU9di5ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSksKGE9di5oYW5kbGUpfHwoYT12LmhhbmRsZT1mdW5jdGlvbihlKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIFMmJlMuZXZlbnQudHJpZ2dlcmVkIT09ZS50eXBlP1MuZXZlbnQuZGlzcGF0Y2guYXBwbHkodCxhcmd1bWVudHMpOnZvaWQgMH0pLGw9KGU9KGV8fCIiKS5tYXRjaChQKXx8WyIiXSkubGVuZ3RoO3doaWxlKGwtLSlkPWc9KHM9VGUuZXhlYyhlW2xdKXx8W10pWzFdLGg9KHNbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxkJiYoZj1TLmV2ZW50LnNwZWNpYWxbZF18fHt9LGQ9KGk/Zi5kZWxlZ2F0ZVR5cGU6Zi5iaW5kVHlwZSl8fGQsZj1TLmV2ZW50LnNwZWNpYWxbZF18fHt9LGM9Uy5leHRlbmQoe3R5cGU6ZCxvcmlnVHlwZTpnLGRhdGE6cixoYW5kbGVyOm4sZ3VpZDpuLmd1aWQsc2VsZWN0b3I6aSxuZWVkc0NvbnRleHQ6aSYmUy5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KGkpLG5hbWVzcGFjZTpoLmpvaW4oIi4iKX0sbyksKHA9dVtkXSl8fCgocD11W2RdPVtdKS5kZWxlZ2F0ZUNvdW50PTAsZi5zZXR1cCYmITEhPT1mLnNldHVwLmNhbGwodCxyLGgsYSl8fHQuYWRkRXZlbnRMaXN0ZW5lciYmdC5hZGRFdmVudExpc3RlbmVyKGQsYSkpLGYuYWRkJiYoZi5hZGQuY2FsbCh0LGMpLGMuaGFuZGxlci5ndWlkfHwoYy5oYW5kbGVyLmd1aWQ9bi5ndWlkKSksaT9wLnNwbGljZShwLmRlbGVnYXRlQ291bnQrKywwLGMpOnAucHVzaChjKSxTLmV2ZW50Lmdsb2JhbFtkXT0hMCl9fSxyZW1vdmU6ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbyxhLHMsdSxsLGMsZixwLGQsaCxnLHY9WS5oYXNEYXRhKGUpJiZZLmdldChlKTtpZih2JiYodT12LmV2ZW50cykpe2w9KHQ9KHR8fCIiKS5tYXRjaChQKXx8WyIiXSkubGVuZ3RoO3doaWxlKGwtLSlpZihkPWc9KHM9VGUuZXhlYyh0W2xdKXx8W10pWzFdLGg9KHNbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxkKXtmPVMuZXZlbnQuc3BlY2lhbFtkXXx8e30scD11W2Q9KHI/Zi5kZWxlZ2F0ZVR5cGU6Zi5iaW5kVHlwZSl8fGRdfHxbXSxzPXNbMl0mJm5ldyBSZWdFeHAoIihefFxcLikiK2guam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIiksYT1vPXAubGVuZ3RoO3doaWxlKG8tLSljPXBbb10sIWkmJmchPT1jLm9yaWdUeXBlfHxuJiZuLmd1aWQhPT1jLmd1aWR8fHMmJiFzLnRlc3QoYy5uYW1lc3BhY2UpfHxyJiZyIT09Yy5zZWxlY3RvciYmKCIqKiIhPT1yfHwhYy5zZWxlY3Rvcil8fChwLnNwbGljZShvLDEpLGMuc2VsZWN0b3ImJnAuZGVsZWdhdGVDb3VudC0tLGYucmVtb3ZlJiZmLnJlbW92ZS5jYWxsKGUsYykpO2EmJiFwLmxlbmd0aCYmKGYudGVhcmRvd24mJiExIT09Zi50ZWFyZG93bi5jYWxsKGUsaCx2LmhhbmRsZSl8fFMucmVtb3ZlRXZlbnQoZSxkLHYuaGFuZGxlKSxkZWxldGUgdVtkXSl9ZWxzZSBmb3IoZCBpbiB1KVMuZXZlbnQucmVtb3ZlKGUsZCt0W2xdLG4sciwhMCk7Uy5pc0VtcHR5T2JqZWN0KHUpJiZZLnJlbW92ZShlLCJoYW5kbGUgZXZlbnRzIil9fSxkaXNwYXRjaDpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLGEscz1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCksdT1TLmV2ZW50LmZpeChlKSxsPShZLmdldCh0aGlzLCJldmVudHMiKXx8T2JqZWN0LmNyZWF0ZShudWxsKSlbdS50eXBlXXx8W10sYz1TLmV2ZW50LnNwZWNpYWxbdS50eXBlXXx8e307Zm9yKHNbMF09dSx0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKylzW3RdPWFyZ3VtZW50c1t0XTtpZih1LmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWMucHJlRGlzcGF0Y2h8fCExIT09Yy5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsdSkpe2E9Uy5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsdSxsKSx0PTA7d2hpbGUoKGk9YVt0KytdKSYmIXUuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7dS5jdXJyZW50VGFyZ2V0PWkuZWxlbSxuPTA7d2hpbGUoKG89aS5oYW5kbGVyc1tuKytdKSYmIXUuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSl1LnJuYW1lc3BhY2UmJiExIT09by5uYW1lc3BhY2UmJiF1LnJuYW1lc3BhY2UudGVzdChvLm5hbWVzcGFjZSl8fCh1LmhhbmRsZU9iaj1vLHUuZGF0YT1vLmRhdGEsdm9pZCAwIT09KHI9KChTLmV2ZW50LnNwZWNpYWxbby5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fG8uaGFuZGxlcikuYXBwbHkoaS5lbGVtLHMpKSYmITE9PT0odS5yZXN1bHQ9cikmJih1LnByZXZlbnREZWZhdWx0KCksdS5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBjLnBvc3REaXNwYXRjaCYmYy5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLHUpLHUucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbyxhLHM9W10sdT10LmRlbGVnYXRlQ291bnQsbD1lLnRhcmdldDtpZih1JiZsLm5vZGVUeXBlJiYhKCJjbGljayI9PT1lLnR5cGUmJjE8PWUuYnV0dG9uKSlmb3IoO2whPT10aGlzO2w9bC5wYXJlbnROb2RlfHx0aGlzKWlmKDE9PT1sLm5vZGVUeXBlJiYoImNsaWNrIiE9PWUudHlwZXx8ITAhPT1sLmRpc2FibGVkKSl7Zm9yKG89W10sYT17fSxuPTA7bjx1O24rKyl2b2lkIDA9PT1hW2k9KHI9dFtuXSkuc2VsZWN0b3IrIiAiXSYmKGFbaV09ci5uZWVkc0NvbnRleHQ/LTE8UyhpLHRoaXMpLmluZGV4KGwpOlMuZmluZChpLHRoaXMsbnVsbCxbbF0pLmxlbmd0aCksYVtpXSYmby5wdXNoKHIpO28ubGVuZ3RoJiZzLnB1c2goe2VsZW06bCxoYW5kbGVyczpvfSl9cmV0dXJuIGw9dGhpcyx1PHQubGVuZ3RoJiZzLnB1c2goe2VsZW06bCxoYW5kbGVyczp0LnNsaWNlKHUpfSksc30sYWRkUHJvcDpmdW5jdGlvbih0LGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShTLkV2ZW50LnByb3RvdHlwZSx0LHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6bShlKT9mdW5jdGlvbigpe2lmKHRoaXMub3JpZ2luYWxFdmVudClyZXR1cm4gZSh0aGlzLm9yaWdpbmFsRXZlbnQpfTpmdW5jdGlvbigpe2lmKHRoaXMub3JpZ2luYWxFdmVudClyZXR1cm4gdGhpcy5vcmlnaW5hbEV2ZW50W3RdfSxzZXQ6ZnVuY3Rpb24oZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsdCx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6ZX0pfX0pfSxmaXg6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbUy5leHBhbmRvXT9lOm5ldyBTLkV2ZW50KGUpfSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sY2xpY2s6e3NldHVwOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXN8fGU7cmV0dXJuIHBlLnRlc3QodC50eXBlKSYmdC5jbGljayYmQSh0LCJpbnB1dCIpJiZBZSh0LCJjbGljayIsQ2UpLCExfSx0cmlnZ2VyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXN8fGU7cmV0dXJuIHBlLnRlc3QodC50eXBlKSYmdC5jbGljayYmQSh0LCJpbnB1dCIpJiZBZSh0LCJjbGljayIpLCEwfSxfZGVmYXVsdDpmdW5jdGlvbihlKXt2YXIgdD1lLnRhcmdldDtyZXR1cm4gcGUudGVzdCh0LnR5cGUpJiZ0LmNsaWNrJiZBKHQsImlucHV0IikmJlkuZ2V0KHQsImNsaWNrIil8fEEodCwiYSIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oZSl7dm9pZCAwIT09ZS5yZXN1bHQmJmUub3JpZ2luYWxFdmVudCYmKGUub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1lLnJlc3VsdCl9fX19LFMucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oZSx0LG4pe2UucmVtb3ZlRXZlbnRMaXN0ZW5lciYmZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsbil9LFMuRXZlbnQ9ZnVuY3Rpb24oZSx0KXtpZighKHRoaXMgaW5zdGFuY2VvZiBTLkV2ZW50KSlyZXR1cm4gbmV3IFMuRXZlbnQoZSx0KTtlJiZlLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1lLHRoaXMudHlwZT1lLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9ZS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1lLmRlZmF1bHRQcmV2ZW50ZWQmJiExPT09ZS5yZXR1cm5WYWx1ZT9DZTpFZSx0aGlzLnRhcmdldD1lLnRhcmdldCYmMz09PWUudGFyZ2V0Lm5vZGVUeXBlP2UudGFyZ2V0LnBhcmVudE5vZGU6ZS50YXJnZXQsdGhpcy5jdXJyZW50VGFyZ2V0PWUuY3VycmVudFRhcmdldCx0aGlzLnJlbGF0ZWRUYXJnZXQ9ZS5yZWxhdGVkVGFyZ2V0KTp0aGlzLnR5cGU9ZSx0JiZTLmV4dGVuZCh0aGlzLHQpLHRoaXMudGltZVN0YW1wPWUmJmUudGltZVN0YW1wfHxEYXRlLm5vdygpLHRoaXNbUy5leHBhbmRvXT0hMH0sUy5FdmVudC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlMuRXZlbnQsaXNEZWZhdWx0UHJldmVudGVkOkVlLGlzUHJvcGFnYXRpb25TdG9wcGVkOkVlLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOkVlLGlzU2ltdWxhdGVkOiExLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPUNlLGUmJiF0aGlzLmlzU2ltdWxhdGVkJiZlLnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPUNlLGUmJiF0aGlzLmlzU2ltdWxhdGVkJiZlLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1DZSxlJiYhdGhpcy5pc1NpbXVsYXRlZCYmZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0sUy5lYWNoKHthbHRLZXk6ITAsYnViYmxlczohMCxjYW5jZWxhYmxlOiEwLGNoYW5nZWRUb3VjaGVzOiEwLGN0cmxLZXk6ITAsZGV0YWlsOiEwLGV2ZW50UGhhc2U6ITAsbWV0YUtleTohMCxwYWdlWDohMCxwYWdlWTohMCxzaGlmdEtleTohMCx2aWV3OiEwLCJjaGFyIjohMCxjb2RlOiEwLGNoYXJDb2RlOiEwLGtleTohMCxrZXlDb2RlOiEwLGJ1dHRvbjohMCxidXR0b25zOiEwLGNsaWVudFg6ITAsY2xpZW50WTohMCxvZmZzZXRYOiEwLG9mZnNldFk6ITAscG9pbnRlcklkOiEwLHBvaW50ZXJUeXBlOiEwLHNjcmVlblg6ITAsc2NyZWVuWTohMCx0YXJnZXRUb3VjaGVzOiEwLHRvRWxlbWVudDohMCx0b3VjaGVzOiEwLHdoaWNoOmZ1bmN0aW9uKGUpe3ZhciB0PWUuYnV0dG9uO3JldHVybiBudWxsPT1lLndoaWNoJiZiZS50ZXN0KGUudHlwZSk/bnVsbCE9ZS5jaGFyQ29kZT9lLmNoYXJDb2RlOmUua2V5Q29kZTohZS53aGljaCYmdm9pZCAwIT09dCYmd2UudGVzdChlLnR5cGUpPzEmdD8xOjImdD8zOjQmdD8yOjA6ZS53aGljaH19LFMuZXZlbnQuYWRkUHJvcCksUy5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihlLHQpe1MuZXZlbnQuc3BlY2lhbFtlXT17c2V0dXA6ZnVuY3Rpb24oKXtyZXR1cm4gQWUodGhpcyxlLFNlKSwhMX0sdHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiBBZSh0aGlzLGUpLCEwfSxkZWxlZ2F0ZVR5cGU6dH19KSxTLmVhY2goe21vdXNlZW50ZXI6Im1vdXNlb3ZlciIsbW91c2VsZWF2ZToibW91c2VvdXQiLHBvaW50ZXJlbnRlcjoicG9pbnRlcm92ZXIiLHBvaW50ZXJsZWF2ZToicG9pbnRlcm91dCJ9LGZ1bmN0aW9uKGUsaSl7Uy5ldmVudC5zcGVjaWFsW2VdPXtkZWxlZ2F0ZVR5cGU6aSxiaW5kVHlwZTppLGhhbmRsZTpmdW5jdGlvbihlKXt2YXIgdCxuPWUucmVsYXRlZFRhcmdldCxyPWUuaGFuZGxlT2JqO3JldHVybiBuJiYobj09PXRoaXN8fFMuY29udGFpbnModGhpcyxuKSl8fChlLnR5cGU9ci5vcmlnVHlwZSx0PXIuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksZS50eXBlPWkpLHR9fX0pLFMuZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4ga2UodGhpcyxlLHQsbixyKX0sb25lOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBrZSh0aGlzLGUsdCxuLHIsMSl9LG9mZjpmdW5jdGlvbihlLHQsbil7dmFyIHIsaTtpZihlJiZlLnByZXZlbnREZWZhdWx0JiZlLmhhbmRsZU9iailyZXR1cm4gcj1lLmhhbmRsZU9iaixTKGUuZGVsZWdhdGVUYXJnZXQpLm9mZihyLm5hbWVzcGFjZT9yLm9yaWdUeXBlKyIuIityLm5hbWVzcGFjZTpyLm9yaWdUeXBlLHIuc2VsZWN0b3Isci5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgZSl7Zm9yKGkgaW4gZSl0aGlzLm9mZihpLHQsZVtpXSk7cmV0dXJuIHRoaXN9cmV0dXJuITEhPT10JiYiZnVuY3Rpb24iIT10eXBlb2YgdHx8KG49dCx0PXZvaWQgMCksITE9PT1uJiYobj1FZSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Uy5ldmVudC5yZW1vdmUodGhpcyxlLG4sdCl9KX19KTt2YXIgTmU9LzxzY3JpcHR8PHN0eWxlfDxsaW5rL2ksRGU9L2NoZWNrZWRccyooPzpbXj1dfD1ccyouY2hlY2tlZC4pL2ksamU9L15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nO2Z1bmN0aW9uIHFlKGUsdCl7cmV0dXJuIEEoZSwidGFibGUiKSYmQSgxMSE9PXQubm9kZVR5cGU/dDp0LmZpcnN0Q2hpbGQsInRyIikmJlMoZSkuY2hpbGRyZW4oInRib2R5IilbMF18fGV9ZnVuY3Rpb24gTGUoZSl7cmV0dXJuIGUudHlwZT0obnVsbCE9PWUuZ2V0QXR0cmlidXRlKCJ0eXBlIikpKyIvIitlLnR5cGUsZX1mdW5jdGlvbiBIZShlKXtyZXR1cm4idHJ1ZS8iPT09KGUudHlwZXx8IiIpLnNsaWNlKDAsNSk/ZS50eXBlPWUudHlwZS5zbGljZSg1KTplLnJlbW92ZUF0dHJpYnV0ZSgidHlwZSIpLGV9ZnVuY3Rpb24gT2UoZSx0KXt2YXIgbixyLGksbyxhLHM7aWYoMT09PXQubm9kZVR5cGUpe2lmKFkuaGFzRGF0YShlKSYmKHM9WS5nZXQoZSkuZXZlbnRzKSlmb3IoaSBpbiBZLnJlbW92ZSh0LCJoYW5kbGUgZXZlbnRzIikscylmb3Iobj0wLHI9c1tpXS5sZW5ndGg7bjxyO24rKylTLmV2ZW50LmFkZCh0LGksc1tpXVtuXSk7US5oYXNEYXRhKGUpJiYobz1RLmFjY2VzcyhlKSxhPVMuZXh0ZW5kKHt9LG8pLFEuc2V0KHQsYSkpfX1mdW5jdGlvbiBQZShuLHIsaSxvKXtyPWcocik7dmFyIGUsdCxhLHMsdSxsLGM9MCxmPW4ubGVuZ3RoLHA9Zi0xLGQ9clswXSxoPW0oZCk7aWYoaHx8MTxmJiYic3RyaW5nIj09dHlwZW9mIGQmJiF5LmNoZWNrQ2xvbmUmJkRlLnRlc3QoZCkpcmV0dXJuIG4uZWFjaChmdW5jdGlvbihlKXt2YXIgdD1uLmVxKGUpO2gmJihyWzBdPWQuY2FsbCh0aGlzLGUsdC5odG1sKCkpKSxQZSh0LHIsaSxvKX0pO2lmKGYmJih0PShlPXhlKHIsblswXS5vd25lckRvY3VtZW50LCExLG4sbykpLmZpcnN0Q2hpbGQsMT09PWUuY2hpbGROb2Rlcy5sZW5ndGgmJihlPXQpLHR8fG8pKXtmb3Iocz0oYT1TLm1hcCh2ZShlLCJzY3JpcHQiKSxMZSkpLmxlbmd0aDtjPGY7YysrKXU9ZSxjIT09cCYmKHU9Uy5jbG9uZSh1LCEwLCEwKSxzJiZTLm1lcmdlKGEsdmUodSwic2NyaXB0IikpKSxpLmNhbGwobltjXSx1LGMpO2lmKHMpZm9yKGw9YVthLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LFMubWFwKGEsSGUpLGM9MDtjPHM7YysrKXU9YVtjXSxoZS50ZXN0KHUudHlwZXx8IiIpJiYhWS5hY2Nlc3ModSwiZ2xvYmFsRXZhbCIpJiZTLmNvbnRhaW5zKGwsdSkmJih1LnNyYyYmIm1vZHVsZSIhPT0odS50eXBlfHwiIikudG9Mb3dlckNhc2UoKT9TLl9ldmFsVXJsJiYhdS5ub01vZHVsZSYmUy5fZXZhbFVybCh1LnNyYyx7bm9uY2U6dS5ub25jZXx8dS5nZXRBdHRyaWJ1dGUoIm5vbmNlIil9LGwpOmIodS50ZXh0Q29udGVudC5yZXBsYWNlKGplLCIiKSx1LGwpKX1yZXR1cm4gbn1mdW5jdGlvbiBSZShlLHQsbil7Zm9yKHZhciByLGk9dD9TLmZpbHRlcih0LGUpOmUsbz0wO251bGwhPShyPWlbb10pO28rKylufHwxIT09ci5ub2RlVHlwZXx8Uy5jbGVhbkRhdGEodmUocikpLHIucGFyZW50Tm9kZSYmKG4mJmllKHIpJiZ5ZSh2ZShyLCJzY3JpcHQiKSksci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHIpKTtyZXR1cm4gZX1TLmV4dGVuZCh7aHRtbFByZWZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gZX0sY2xvbmU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsLGM9ZS5jbG9uZU5vZGUoITApLGY9aWUoZSk7aWYoISh5Lm5vQ2xvbmVDaGVja2VkfHwxIT09ZS5ub2RlVHlwZSYmMTEhPT1lLm5vZGVUeXBlfHxTLmlzWE1MRG9jKGUpKSlmb3IoYT12ZShjKSxyPTAsaT0obz12ZShlKSkubGVuZ3RoO3I8aTtyKyspcz1vW3JdLHU9YVtyXSx2b2lkIDAsImlucHV0Ij09PShsPXUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkmJnBlLnRlc3Qocy50eXBlKT91LmNoZWNrZWQ9cy5jaGVja2VkOiJpbnB1dCIhPT1sJiYidGV4dGFyZWEiIT09bHx8KHUuZGVmYXVsdFZhbHVlPXMuZGVmYXVsdFZhbHVlKTtpZih0KWlmKG4pZm9yKG89b3x8dmUoZSksYT1hfHx2ZShjKSxyPTAsaT1vLmxlbmd0aDtyPGk7cisrKU9lKG9bcl0sYVtyXSk7ZWxzZSBPZShlLGMpO3JldHVybiAwPChhPXZlKGMsInNjcmlwdCIpKS5sZW5ndGgmJnllKGEsIWYmJnZlKGUsInNjcmlwdCIpKSxjfSxjbGVhbkRhdGE6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG4scixpPVMuZXZlbnQuc3BlY2lhbCxvPTA7dm9pZCAwIT09KG49ZVtvXSk7bysrKWlmKFYobikpe2lmKHQ9bltZLmV4cGFuZG9dKXtpZih0LmV2ZW50cylmb3IociBpbiB0LmV2ZW50cylpW3JdP1MuZXZlbnQucmVtb3ZlKG4scik6Uy5yZW1vdmVFdmVudChuLHIsdC5oYW5kbGUpO25bWS5leHBhbmRvXT12b2lkIDB9bltRLmV4cGFuZG9dJiYobltRLmV4cGFuZG9dPXZvaWQgMCl9fX0pLFMuZm4uZXh0ZW5kKHtkZXRhY2g6ZnVuY3Rpb24oZSl7cmV0dXJuIFJlKHRoaXMsZSwhMCl9LHJlbW92ZTpmdW5jdGlvbihlKXtyZXR1cm4gUmUodGhpcyxlKX0sdGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gJCh0aGlzLGZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lP1MudGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpezEhPT10aGlzLm5vZGVUeXBlJiYxMSE9PXRoaXMubm9kZVR5cGUmJjkhPT10aGlzLm5vZGVUeXBlfHwodGhpcy50ZXh0Q29udGVudD1lKX0pfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiBQZSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlKXsxIT09dGhpcy5ub2RlVHlwZSYmMTEhPT10aGlzLm5vZGVUeXBlJiY5IT09dGhpcy5ub2RlVHlwZXx8cWUodGhpcyxlKS5hcHBlbmRDaGlsZChlKX0pfSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIFBlKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgdD1xZSh0aGlzLGUpO3QuaW5zZXJ0QmVmb3JlKGUsdC5maXJzdENoaWxkKX19KX0sYmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIFBlKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHRoaXMpfSl9LGFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIFBlKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHRoaXMubmV4dFNpYmxpbmcpfSl9LGVtcHR5OmZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQ9MDtudWxsIT0oZT10aGlzW3RdKTt0KyspMT09PWUubm9kZVR5cGUmJihTLmNsZWFuRGF0YSh2ZShlLCExKSksZS50ZXh0Q29udGVudD0iIik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9bnVsbCE9ZSYmZSx0PW51bGw9PXQ/ZTp0LHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIFMuY2xvbmUodGhpcyxlLHQpfSl9LGh0bWw6ZnVuY3Rpb24oZSl7cmV0dXJuICQodGhpcyxmdW5jdGlvbihlKXt2YXIgdD10aGlzWzBdfHx7fSxuPTAscj10aGlzLmxlbmd0aDtpZih2b2lkIDA9PT1lJiYxPT09dC5ub2RlVHlwZSlyZXR1cm4gdC5pbm5lckhUTUw7aWYoInN0cmluZyI9PXR5cGVvZiBlJiYhTmUudGVzdChlKSYmIWdlWyhkZS5leGVjKGUpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7ZT1TLmh0bWxQcmVmaWx0ZXIoZSk7dHJ5e2Zvcig7bjxyO24rKykxPT09KHQ9dGhpc1tuXXx8e30pLm5vZGVUeXBlJiYoUy5jbGVhbkRhdGEodmUodCwhMSkpLHQuaW5uZXJIVE1MPWUpO3Q9MH1jYXRjaChlKXt9fXQmJnRoaXMuZW1wdHkoKS5hcHBlbmQoZSl9LG51bGwsZSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgbj1bXTtyZXR1cm4gUGUodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wYXJlbnROb2RlO1MuaW5BcnJheSh0aGlzLG4pPDAmJihTLmNsZWFuRGF0YSh2ZSh0aGlzKSksdCYmdC5yZXBsYWNlQ2hpbGQoZSx0aGlzKSl9LG4pfX0pLFMuZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGUsYSl7Uy5mbltlXT1mdW5jdGlvbihlKXtmb3IodmFyIHQsbj1bXSxyPVMoZSksaT1yLmxlbmd0aC0xLG89MDtvPD1pO28rKyl0PW89PT1pP3RoaXM6dGhpcy5jbG9uZSghMCksUyhyW29dKVthXSh0KSx1LmFwcGx5KG4sdC5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4pfX0pO3ZhciBNZT1uZXcgUmVnRXhwKCJeKCIrZWUrIikoPyFweClbYS16JV0rJCIsImkiKSxJZT1mdW5jdGlvbihlKXt2YXIgdD1lLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7cmV0dXJuIHQmJnQub3BlbmVyfHwodD1DKSx0LmdldENvbXB1dGVkU3R5bGUoZSl9LFdlPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89e307Zm9yKGkgaW4gdClvW2ldPWUuc3R5bGVbaV0sZS5zdHlsZVtpXT10W2ldO2ZvcihpIGluIHI9bi5jYWxsKGUpLHQpZS5zdHlsZVtpXT1vW2ldO3JldHVybiByfSxGZT1uZXcgUmVnRXhwKG5lLmpvaW4oInwiKSwiaSIpO2Z1bmN0aW9uIEJlKGUsdCxuKXt2YXIgcixpLG8sYSxzPWUuc3R5bGU7cmV0dXJuKG49bnx8SWUoZSkpJiYoIiIhPT0oYT1uLmdldFByb3BlcnR5VmFsdWUodCl8fG5bdF0pfHxpZShlKXx8KGE9Uy5zdHlsZShlLHQpKSwheS5waXhlbEJveFN0eWxlcygpJiZNZS50ZXN0KGEpJiZGZS50ZXN0KHQpJiYocj1zLndpZHRoLGk9cy5taW5XaWR0aCxvPXMubWF4V2lkdGgscy5taW5XaWR0aD1zLm1heFdpZHRoPXMud2lkdGg9YSxhPW4ud2lkdGgscy53aWR0aD1yLHMubWluV2lkdGg9aSxzLm1heFdpZHRoPW8pKSx2b2lkIDAhPT1hP2ErIiI6YX1mdW5jdGlvbiAkZShlLHQpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtpZighZSgpKXJldHVybih0aGlzLmdldD10KS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZGVsZXRlIHRoaXMuZ2V0fX19IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe2lmKGwpe3Uuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTExMTFweDt3aWR0aDo2MHB4O21hcmdpbi10b3A6MXB4O3BhZGRpbmc6MDtib3JkZXI6MCIsbC5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO2JveC1zaXppbmc6Ym9yZGVyLWJveDtvdmVyZmxvdzpzY3JvbGw7bWFyZ2luOmF1dG87Ym9yZGVyOjFweDtwYWRkaW5nOjFweDt3aWR0aDo2MCU7dG9wOjElIixyZS5hcHBlbmRDaGlsZCh1KS5hcHBlbmRDaGlsZChsKTt2YXIgZT1DLmdldENvbXB1dGVkU3R5bGUobCk7bj0iMSUiIT09ZS50b3Ascz0xMj09PXQoZS5tYXJnaW5MZWZ0KSxsLnN0eWxlLnJpZ2h0PSI2MCUiLG89MzY9PT10KGUucmlnaHQpLHI9MzY9PT10KGUud2lkdGgpLGwuc3R5bGUucG9zaXRpb249ImFic29sdXRlIixpPTEyPT09dChsLm9mZnNldFdpZHRoLzMpLHJlLnJlbW92ZUNoaWxkKHUpLGw9bnVsbH19ZnVuY3Rpb24gdChlKXtyZXR1cm4gTWF0aC5yb3VuZChwYXJzZUZsb2F0KGUpKX12YXIgbixyLGksbyxhLHMsdT1FLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGw9RS5jcmVhdGVFbGVtZW50KCJkaXYiKTtsLnN0eWxlJiYobC5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giLGwuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIix5LmNsZWFyQ2xvbmVTdHlsZT0iY29udGVudC1ib3giPT09bC5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCxTLmV4dGVuZCh5LHtib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBlKCkscn0scGl4ZWxCb3hTdHlsZXM6ZnVuY3Rpb24oKXtyZXR1cm4gZSgpLG99LHBpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZSgpLG59LHJlbGlhYmxlTWFyZ2luTGVmdDpmdW5jdGlvbigpe3JldHVybiBlKCksc30sc2Nyb2xsYm94U2l6ZTpmdW5jdGlvbigpe3JldHVybiBlKCksaX0scmVsaWFibGVUckRpbWVuc2lvbnM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4scjtyZXR1cm4gbnVsbD09YSYmKGU9RS5jcmVhdGVFbGVtZW50KCJ0YWJsZSIpLHQ9RS5jcmVhdGVFbGVtZW50KCJ0ciIpLG49RS5jcmVhdGVFbGVtZW50KCJkaXYiKSxlLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTExMTExcHgiLHQuc3R5bGUuaGVpZ2h0PSIxcHgiLG4uc3R5bGUuaGVpZ2h0PSI5cHgiLHJlLmFwcGVuZENoaWxkKGUpLmFwcGVuZENoaWxkKHQpLmFwcGVuZENoaWxkKG4pLHI9Qy5nZXRDb21wdXRlZFN0eWxlKHQpLGE9MzxwYXJzZUludChyLmhlaWdodCkscmUucmVtb3ZlQ2hpbGQoZSkpLGF9fSkpfSgpO3ZhciBfZT1bIldlYmtpdCIsIk1veiIsIm1zIl0semU9RS5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZSxVZT17fTtmdW5jdGlvbiBYZShlKXt2YXIgdD1TLmNzc1Byb3BzW2VdfHxVZVtlXTtyZXR1cm4gdHx8KGUgaW4gemU/ZTpVZVtlXT1mdW5jdGlvbihlKXt2YXIgdD1lWzBdLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKSxuPV9lLmxlbmd0aDt3aGlsZShuLS0paWYoKGU9X2Vbbl0rdClpbiB6ZSlyZXR1cm4gZX0oZSl8fGUpfXZhciBWZT0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sR2U9L14tLS8sWWU9e3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdmlzaWJpbGl0eToiaGlkZGVuIixkaXNwbGF5OiJibG9jayJ9LFFlPXtsZXR0ZXJTcGFjaW5nOiIwIixmb250V2VpZ2h0OiI0MDAifTtmdW5jdGlvbiBKZShlLHQsbil7dmFyIHI9dGUuZXhlYyh0KTtyZXR1cm4gcj9NYXRoLm1heCgwLHJbMl0tKG58fDApKSsoclszXXx8InB4Iik6dH1mdW5jdGlvbiBLZShlLHQsbixyLGksbyl7dmFyIGE9IndpZHRoIj09PXQ/MTowLHM9MCx1PTA7aWYobj09PShyPyJib3JkZXIiOiJjb250ZW50IikpcmV0dXJuIDA7Zm9yKDthPDQ7YSs9MikibWFyZ2luIj09PW4mJih1Kz1TLmNzcyhlLG4rbmVbYV0sITAsaSkpLHI/KCJjb250ZW50Ij09PW4mJih1LT1TLmNzcyhlLCJwYWRkaW5nIituZVthXSwhMCxpKSksIm1hcmdpbiIhPT1uJiYodS09Uy5jc3MoZSwiYm9yZGVyIituZVthXSsiV2lkdGgiLCEwLGkpKSk6KHUrPVMuY3NzKGUsInBhZGRpbmciK25lW2FdLCEwLGkpLCJwYWRkaW5nIiE9PW4/dSs9Uy5jc3MoZSwiYm9yZGVyIituZVthXSsiV2lkdGgiLCEwLGkpOnMrPVMuY3NzKGUsImJvcmRlciIrbmVbYV0rIldpZHRoIiwhMCxpKSk7cmV0dXJuIXImJjA8PW8mJih1Kz1NYXRoLm1heCgwLE1hdGguY2VpbChlWyJvZmZzZXQiK3RbMF0udG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpXS1vLXUtcy0uNSkpfHwwKSx1fWZ1bmN0aW9uIFplKGUsdCxuKXt2YXIgcj1JZShlKSxpPSgheS5ib3hTaXppbmdSZWxpYWJsZSgpfHxuKSYmImJvcmRlci1ib3giPT09Uy5jc3MoZSwiYm94U2l6aW5nIiwhMSxyKSxvPWksYT1CZShlLHQscikscz0ib2Zmc2V0Iit0WzBdLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKTtpZihNZS50ZXN0KGEpKXtpZighbilyZXR1cm4gYTthPSJhdXRvIn1yZXR1cm4oIXkuYm94U2l6aW5nUmVsaWFibGUoKSYmaXx8IXkucmVsaWFibGVUckRpbWVuc2lvbnMoKSYmQShlLCJ0ciIpfHwiYXV0byI9PT1hfHwhcGFyc2VGbG9hdChhKSYmImlubGluZSI9PT1TLmNzcyhlLCJkaXNwbGF5IiwhMSxyKSkmJmUuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgmJihpPSJib3JkZXItYm94Ij09PVMuY3NzKGUsImJveFNpemluZyIsITEsciksKG89cyBpbiBlKSYmKGE9ZVtzXSkpLChhPXBhcnNlRmxvYXQoYSl8fDApK0tlKGUsdCxufHwoaT8iYm9yZGVyIjoiY29udGVudCIpLG8scixhKSsicHgifWZ1bmN0aW9uIGV0KGUsdCxuLHIsaSl7cmV0dXJuIG5ldyBldC5wcm90b3R5cGUuaW5pdChlLHQsbixyLGkpfVMuZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGUsdCl7aWYodCl7dmFyIG49QmUoZSwib3BhY2l0eSIpO3JldHVybiIiPT09bj8iMSI6bn19fX0sY3NzTnVtYmVyOnthbmltYXRpb25JdGVyYXRpb25Db3VudDohMCxjb2x1bW5Db3VudDohMCxmaWxsT3BhY2l0eTohMCxmbGV4R3JvdzohMCxmbGV4U2hyaW5rOiEwLGZvbnRXZWlnaHQ6ITAsZ3JpZEFyZWE6ITAsZ3JpZENvbHVtbjohMCxncmlkQ29sdW1uRW5kOiEwLGdyaWRDb2x1bW5TdGFydDohMCxncmlkUm93OiEwLGdyaWRSb3dFbmQ6ITAsZ3JpZFJvd1N0YXJ0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6e30sc3R5bGU6ZnVuY3Rpb24oZSx0LG4scil7aWYoZSYmMyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlJiZlLnN0eWxlKXt2YXIgaSxvLGEscz1YKHQpLHU9R2UudGVzdCh0KSxsPWUuc3R5bGU7aWYodXx8KHQ9WGUocykpLGE9Uy5jc3NIb29rc1t0XXx8Uy5jc3NIb29rc1tzXSx2b2lkIDA9PT1uKXJldHVybiBhJiYiZ2V0ImluIGEmJnZvaWQgMCE9PShpPWEuZ2V0KGUsITEscikpP2k6bFt0XTsic3RyaW5nIj09PShvPXR5cGVvZiBuKSYmKGk9dGUuZXhlYyhuKSkmJmlbMV0mJihuPXNlKGUsdCxpKSxvPSJudW1iZXIiKSxudWxsIT1uJiZuPT1uJiYoIm51bWJlciIhPT1vfHx1fHwobis9aSYmaVszXXx8KFMuY3NzTnVtYmVyW3NdPyIiOiJweCIpKSx5LmNsZWFyQ2xvbmVTdHlsZXx8IiIhPT1ufHwwIT09dC5pbmRleE9mKCJiYWNrZ3JvdW5kIil8fChsW3RdPSJpbmhlcml0IiksYSYmInNldCJpbiBhJiZ2b2lkIDA9PT0obj1hLnNldChlLG4scikpfHwodT9sLnNldFByb3BlcnR5KHQsbik6bFt0XT1uKSl9fSxjc3M6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHM9WCh0KTtyZXR1cm4gR2UudGVzdCh0KXx8KHQ9WGUocykpLChhPVMuY3NzSG9va3NbdF18fFMuY3NzSG9va3Nbc10pJiYiZ2V0ImluIGEmJihpPWEuZ2V0KGUsITAsbikpLHZvaWQgMD09PWkmJihpPUJlKGUsdCxyKSksIm5vcm1hbCI9PT1pJiZ0IGluIFFlJiYoaT1RZVt0XSksIiI9PT1ufHxuPyhvPXBhcnNlRmxvYXQoaSksITA9PT1ufHxpc0Zpbml0ZShvKT9vfHwwOmkpOml9fSksUy5lYWNoKFsiaGVpZ2h0Iiwid2lkdGgiXSxmdW5jdGlvbihlLHUpe1MuY3NzSG9va3NbdV09e2dldDpmdW5jdGlvbihlLHQsbil7aWYodClyZXR1cm4hVmUudGVzdChTLmNzcyhlLCJkaXNwbGF5IikpfHxlLmdldENsaWVudFJlY3RzKCkubGVuZ3RoJiZlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoP1plKGUsdSxuKTpXZShlLFllLGZ1bmN0aW9uKCl7cmV0dXJuIFplKGUsdSxuKX0pfSxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9SWUoZSksbz0heS5zY3JvbGxib3hTaXplKCkmJiJhYnNvbHV0ZSI9PT1pLnBvc2l0aW9uLGE9KG98fG4pJiYiYm9yZGVyLWJveCI9PT1TLmNzcyhlLCJib3hTaXppbmciLCExLGkpLHM9bj9LZShlLHUsbixhLGkpOjA7cmV0dXJuIGEmJm8mJihzLT1NYXRoLmNlaWwoZVsib2Zmc2V0Iit1WzBdLnRvVXBwZXJDYXNlKCkrdS5zbGljZSgxKV0tcGFyc2VGbG9hdChpW3VdKS1LZShlLHUsImJvcmRlciIsITEsaSktLjUpKSxzJiYocj10ZS5leGVjKHQpKSYmInB4IiE9PShyWzNdfHwicHgiKSYmKGUuc3R5bGVbdV09dCx0PVMuY3NzKGUsdSkpLEplKDAsdCxzKX19fSksUy5jc3NIb29rcy5tYXJnaW5MZWZ0PSRlKHkucmVsaWFibGVNYXJnaW5MZWZ0LGZ1bmN0aW9uKGUsdCl7aWYodClyZXR1cm4ocGFyc2VGbG9hdChCZShlLCJtYXJnaW5MZWZ0IikpfHxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQtV2UoZSx7bWFyZ2luTGVmdDowfSxmdW5jdGlvbigpe3JldHVybiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnR9KSkrInB4In0pLFMuZWFjaCh7bWFyZ2luOiIiLHBhZGRpbmc6IiIsYm9yZGVyOiJXaWR0aCJ9LGZ1bmN0aW9uKGksbyl7Uy5jc3NIb29rc1tpK29dPXtleHBhbmQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj17fSxyPSJzdHJpbmciPT10eXBlb2YgZT9lLnNwbGl0KCIgIik6W2VdO3Q8NDt0KyspbltpK25lW3RdK29dPXJbdF18fHJbdC0yXXx8clswXTtyZXR1cm4gbn19LCJtYXJnaW4iIT09aSYmKFMuY3NzSG9va3NbaStvXS5zZXQ9SmUpfSksUy5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihlLHQpe3JldHVybiAkKHRoaXMsZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz17fSxhPTA7aWYoQXJyYXkuaXNBcnJheSh0KSl7Zm9yKHI9SWUoZSksaT10Lmxlbmd0aDthPGk7YSsrKW9bdFthXV09Uy5jc3MoZSx0W2FdLCExLHIpO3JldHVybiBvfXJldHVybiB2b2lkIDAhPT1uP1Muc3R5bGUoZSx0LG4pOlMuY3NzKGUsdCl9LGUsdCwxPGFyZ3VtZW50cy5sZW5ndGgpfX0pLCgoUy5Ud2Vlbj1ldCkucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpldCxpbml0OmZ1bmN0aW9uKGUsdCxuLHIsaSxvKXt0aGlzLmVsZW09ZSx0aGlzLnByb3A9bix0aGlzLmVhc2luZz1pfHxTLmVhc2luZy5fZGVmYXVsdCx0aGlzLm9wdGlvbnM9dCx0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9cix0aGlzLnVuaXQ9b3x8KFMuY3NzTnVtYmVyW25dPyIiOiJweCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgZT1ldC5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gZSYmZS5nZXQ/ZS5nZXQodGhpcyk6ZXQucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGUpe3ZhciB0LG49ZXQucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMub3B0aW9ucy5kdXJhdGlvbj90aGlzLnBvcz10PVMuZWFzaW5nW3RoaXMuZWFzaW5nXShlLHRoaXMub3B0aW9ucy5kdXJhdGlvbiplLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOnRoaXMucG9zPXQ9ZSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqdCt0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxuJiZuLnNldD9uLnNldCh0aGlzKTpldC5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSkuaW5pdC5wcm90b3R5cGU9ZXQucHJvdG90eXBlLChldC5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIDEhPT1lLmVsZW0ubm9kZVR5cGV8fG51bGwhPWUuZWxlbVtlLnByb3BdJiZudWxsPT1lLmVsZW0uc3R5bGVbZS5wcm9wXT9lLmVsZW1bZS5wcm9wXToodD1TLmNzcyhlLmVsZW0sZS5wcm9wLCIiKSkmJiJhdXRvIiE9PXQ/dDowfSxzZXQ6ZnVuY3Rpb24oZSl7Uy5meC5zdGVwW2UucHJvcF0/Uy5meC5zdGVwW2UucHJvcF0oZSk6MSE9PWUuZWxlbS5ub2RlVHlwZXx8IVMuY3NzSG9va3NbZS5wcm9wXSYmbnVsbD09ZS5lbGVtLnN0eWxlW1hlKGUucHJvcCldP2UuZWxlbVtlLnByb3BdPWUubm93OlMuc3R5bGUoZS5lbGVtLGUucHJvcCxlLm5vdytlLnVuaXQpfX19KS5zY3JvbGxUb3A9ZXQucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihlKXtlLmVsZW0ubm9kZVR5cGUmJmUuZWxlbS5wYXJlbnROb2RlJiYoZS5lbGVtW2UucHJvcF09ZS5ub3cpfX0sUy5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihlKXtyZXR1cm4gZX0sc3dpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuLjUtTWF0aC5jb3MoZSpNYXRoLlBJKS8yfSxfZGVmYXVsdDoic3dpbmcifSxTLmZ4PWV0LnByb3RvdHlwZS5pbml0LFMuZnguc3RlcD17fTt2YXIgdHQsbnQscnQsaXQsb3Q9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLGF0PS9xdWV1ZUhvb2tzJC87ZnVuY3Rpb24gc3QoKXtudCYmKCExPT09RS5oaWRkZW4mJkMucmVxdWVzdEFuaW1hdGlvbkZyYW1lP0MucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0KTpDLnNldFRpbWVvdXQoc3QsUy5meC5pbnRlcnZhbCksUy5meC50aWNrKCkpfWZ1bmN0aW9uIHV0KCl7cmV0dXJuIEMuc2V0VGltZW91dChmdW5jdGlvbigpe3R0PXZvaWQgMH0pLHR0PURhdGUubm93KCl9ZnVuY3Rpb24gbHQoZSx0KXt2YXIgbixyPTAsaT17aGVpZ2h0OmV9O2Zvcih0PXQ/MTowO3I8NDtyKz0yLXQpaVsibWFyZ2luIisobj1uZVtyXSldPWlbInBhZGRpbmciK25dPWU7cmV0dXJuIHQmJihpLm9wYWNpdHk9aS53aWR0aD1lKSxpfWZ1bmN0aW9uIGN0KGUsdCxuKXtmb3IodmFyIHIsaT0oZnQudHdlZW5lcnNbdF18fFtdKS5jb25jYXQoZnQudHdlZW5lcnNbIioiXSksbz0wLGE9aS5sZW5ndGg7bzxhO28rKylpZihyPWlbb10uY2FsbChuLHQsZSkpcmV0dXJuIHJ9ZnVuY3Rpb24gZnQobyxlLHQpe3ZhciBuLGEscj0wLGk9ZnQucHJlZmlsdGVycy5sZW5ndGgscz1TLkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIHUuZWxlbX0pLHU9ZnVuY3Rpb24oKXtpZihhKXJldHVybiExO2Zvcih2YXIgZT10dHx8dXQoKSx0PU1hdGgubWF4KDAsbC5zdGFydFRpbWUrbC5kdXJhdGlvbi1lKSxuPTEtKHQvbC5kdXJhdGlvbnx8MCkscj0wLGk9bC50d2VlbnMubGVuZ3RoO3I8aTtyKyspbC50d2VlbnNbcl0ucnVuKG4pO3JldHVybiBzLm5vdGlmeVdpdGgobyxbbCxuLHRdKSxuPDEmJmk/dDooaXx8cy5ub3RpZnlXaXRoKG8sW2wsMSwwXSkscy5yZXNvbHZlV2l0aChvLFtsXSksITEpfSxsPXMucHJvbWlzZSh7ZWxlbTpvLHByb3BzOlMuZXh0ZW5kKHt9LGUpLG9wdHM6Uy5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e30sZWFzaW5nOlMuZWFzaW5nLl9kZWZhdWx0fSx0KSxvcmlnaW5hbFByb3BlcnRpZXM6ZSxvcmlnaW5hbE9wdGlvbnM6dCxzdGFydFRpbWU6dHR8fHV0KCksZHVyYXRpb246dC5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24oZSx0KXt2YXIgbj1TLlR3ZWVuKG8sbC5vcHRzLGUsdCxsLm9wdHMuc3BlY2lhbEVhc2luZ1tlXXx8bC5vcHRzLmVhc2luZyk7cmV0dXJuIGwudHdlZW5zLnB1c2gobiksbn0sc3RvcDpmdW5jdGlvbihlKXt2YXIgdD0wLG49ZT9sLnR3ZWVucy5sZW5ndGg6MDtpZihhKXJldHVybiB0aGlzO2ZvcihhPSEwO3Q8bjt0KyspbC50d2VlbnNbdF0ucnVuKDEpO3JldHVybiBlPyhzLm5vdGlmeVdpdGgobyxbbCwxLDBdKSxzLnJlc29sdmVXaXRoKG8sW2wsZV0pKTpzLnJlamVjdFdpdGgobyxbbCxlXSksdGhpc319KSxjPWwucHJvcHM7Zm9yKCFmdW5jdGlvbihlLHQpe3ZhciBuLHIsaSxvLGE7Zm9yKG4gaW4gZSlpZihpPXRbcj1YKG4pXSxvPWVbbl0sQXJyYXkuaXNBcnJheShvKSYmKGk9b1sxXSxvPWVbbl09b1swXSksbiE9PXImJihlW3JdPW8sZGVsZXRlIGVbbl0pLChhPVMuY3NzSG9va3Nbcl0pJiYiZXhwYW5kImluIGEpZm9yKG4gaW4gbz1hLmV4cGFuZChvKSxkZWxldGUgZVtyXSxvKW4gaW4gZXx8KGVbbl09b1tuXSx0W25dPWkpO2Vsc2UgdFtyXT1pfShjLGwub3B0cy5zcGVjaWFsRWFzaW5nKTtyPGk7cisrKWlmKG49ZnQucHJlZmlsdGVyc1tyXS5jYWxsKGwsbyxjLGwub3B0cykpcmV0dXJuIG0obi5zdG9wKSYmKFMuX3F1ZXVlSG9va3MobC5lbGVtLGwub3B0cy5xdWV1ZSkuc3RvcD1uLnN0b3AuYmluZChuKSksbjtyZXR1cm4gUy5tYXAoYyxjdCxsKSxtKGwub3B0cy5zdGFydCkmJmwub3B0cy5zdGFydC5jYWxsKG8sbCksbC5wcm9ncmVzcyhsLm9wdHMucHJvZ3Jlc3MpLmRvbmUobC5vcHRzLmRvbmUsbC5vcHRzLmNvbXBsZXRlKS5mYWlsKGwub3B0cy5mYWlsKS5hbHdheXMobC5vcHRzLmFsd2F5cyksUy5meC50aW1lcihTLmV4dGVuZCh1LHtlbGVtOm8sYW5pbTpsLHF1ZXVlOmwub3B0cy5xdWV1ZX0pKSxsfVMuQW5pbWF0aW9uPVMuZXh0ZW5kKGZ0LHt0d2VlbmVyczp7IioiOltmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuY3JlYXRlVHdlZW4oZSx0KTtyZXR1cm4gc2Uobi5lbGVtLGUsdGUuZXhlYyh0KSxuKSxufV19LHR3ZWVuZXI6ZnVuY3Rpb24oZSx0KXttKGUpPyh0PWUsZT1bIioiXSk6ZT1lLm1hdGNoKFApO2Zvcih2YXIgbixyPTAsaT1lLmxlbmd0aDtyPGk7cisrKW49ZVtyXSxmdC50d2VlbmVyc1tuXT1mdC50d2VlbmVyc1tuXXx8W10sZnQudHdlZW5lcnNbbl0udW5zaGlmdCh0KX0scHJlZmlsdGVyczpbZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsLGMsZj0id2lkdGgiaW4gdHx8ImhlaWdodCJpbiB0LHA9dGhpcyxkPXt9LGg9ZS5zdHlsZSxnPWUubm9kZVR5cGUmJmFlKGUpLHY9WS5nZXQoZSwiZnhzaG93Iik7Zm9yKHIgaW4gbi5xdWV1ZXx8KG51bGw9PShhPVMuX3F1ZXVlSG9va3MoZSwiZngiKSkudW5xdWV1ZWQmJihhLnVucXVldWVkPTAscz1hLmVtcHR5LmZpcmUsYS5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7YS51bnF1ZXVlZHx8cygpfSksYS51bnF1ZXVlZCsrLHAuYWx3YXlzKGZ1bmN0aW9uKCl7cC5hbHdheXMoZnVuY3Rpb24oKXthLnVucXVldWVkLS0sUy5xdWV1ZShlLCJmeCIpLmxlbmd0aHx8YS5lbXB0eS5maXJlKCl9KX0pKSx0KWlmKGk9dFtyXSxvdC50ZXN0KGkpKXtpZihkZWxldGUgdFtyXSxvPW98fCJ0b2dnbGUiPT09aSxpPT09KGc/ImhpZGUiOiJzaG93Iikpe2lmKCJzaG93IiE9PWl8fCF2fHx2b2lkIDA9PT12W3JdKWNvbnRpbnVlO2c9ITB9ZFtyXT12JiZ2W3JdfHxTLnN0eWxlKGUscil9aWYoKHU9IVMuaXNFbXB0eU9iamVjdCh0KSl8fCFTLmlzRW1wdHlPYmplY3QoZCkpZm9yKHIgaW4gZiYmMT09PWUubm9kZVR5cGUmJihuLm92ZXJmbG93PVtoLm92ZXJmbG93LGgub3ZlcmZsb3dYLGgub3ZlcmZsb3dZXSxudWxsPT0obD12JiZ2LmRpc3BsYXkpJiYobD1ZLmdldChlLCJkaXNwbGF5IikpLCJub25lIj09PShjPVMuY3NzKGUsImRpc3BsYXkiKSkmJihsP2M9bDoobGUoW2VdLCEwKSxsPWUuc3R5bGUuZGlzcGxheXx8bCxjPVMuY3NzKGUsImRpc3BsYXkiKSxsZShbZV0pKSksKCJpbmxpbmUiPT09Y3x8ImlubGluZS1ibG9jayI9PT1jJiZudWxsIT1sKSYmIm5vbmUiPT09Uy5jc3MoZSwiZmxvYXQiKSYmKHV8fChwLmRvbmUoZnVuY3Rpb24oKXtoLmRpc3BsYXk9bH0pLG51bGw9PWwmJihjPWguZGlzcGxheSxsPSJub25lIj09PWM/IiI6YykpLGguZGlzcGxheT0iaW5saW5lLWJsb2NrIikpLG4ub3ZlcmZsb3cmJihoLm92ZXJmbG93PSJoaWRkZW4iLHAuYWx3YXlzKGZ1bmN0aW9uKCl7aC5vdmVyZmxvdz1uLm92ZXJmbG93WzBdLGgub3ZlcmZsb3dYPW4ub3ZlcmZsb3dbMV0saC5vdmVyZmxvd1k9bi5vdmVyZmxvd1syXX0pKSx1PSExLGQpdXx8KHY/ImhpZGRlbiJpbiB2JiYoZz12LmhpZGRlbik6dj1ZLmFjY2VzcyhlLCJmeHNob3ciLHtkaXNwbGF5Omx9KSxvJiYodi5oaWRkZW49IWcpLGcmJmxlKFtlXSwhMCkscC5kb25lKGZ1bmN0aW9uKCl7Zm9yKHIgaW4gZ3x8bGUoW2VdKSxZLnJlbW92ZShlLCJmeHNob3ciKSxkKVMuc3R5bGUoZSxyLGRbcl0pfSkpLHU9Y3QoZz92W3JdOjAscixwKSxyIGluIHZ8fCh2W3JdPXUuc3RhcnQsZyYmKHUuZW5kPXUuc3RhcnQsdS5zdGFydD0wKSl9XSxwcmVmaWx0ZXI6ZnVuY3Rpb24oZSx0KXt0P2Z0LnByZWZpbHRlcnMudW5zaGlmdChlKTpmdC5wcmVmaWx0ZXJzLnB1c2goZSl9fSksUy5zcGVlZD1mdW5jdGlvbihlLHQsbil7dmFyIHI9ZSYmIm9iamVjdCI9PXR5cGVvZiBlP1MuZXh0ZW5kKHt9LGUpOntjb21wbGV0ZTpufHwhbiYmdHx8bShlKSYmZSxkdXJhdGlvbjplLGVhc2luZzpuJiZ0fHx0JiYhbSh0KSYmdH07cmV0dXJuIFMuZngub2ZmP3IuZHVyYXRpb249MDoibnVtYmVyIiE9dHlwZW9mIHIuZHVyYXRpb24mJihyLmR1cmF0aW9uIGluIFMuZnguc3BlZWRzP3IuZHVyYXRpb249Uy5meC5zcGVlZHNbci5kdXJhdGlvbl06ci5kdXJhdGlvbj1TLmZ4LnNwZWVkcy5fZGVmYXVsdCksbnVsbCE9ci5xdWV1ZSYmITAhPT1yLnF1ZXVlfHwoci5xdWV1ZT0iZngiKSxyLm9sZD1yLmNvbXBsZXRlLHIuY29tcGxldGU9ZnVuY3Rpb24oKXttKHIub2xkKSYmci5vbGQuY2FsbCh0aGlzKSxyLnF1ZXVlJiZTLmRlcXVldWUodGhpcyxyLnF1ZXVlKX0scn0sUy5mbi5leHRlbmQoe2ZhZGVUbzpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5maWx0ZXIoYWUpLmNzcygib3BhY2l0eSIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6dH0sZSxuLHIpfSxhbmltYXRlOmZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpPVMuaXNFbXB0eU9iamVjdCh0KSxvPVMuc3BlZWQoZSxuLHIpLGE9ZnVuY3Rpb24oKXt2YXIgZT1mdCh0aGlzLFMuZXh0ZW5kKHt9LHQpLG8pOyhpfHxZLmdldCh0aGlzLCJmaW5pc2giKSkmJmUuc3RvcCghMCl9O3JldHVybiBhLmZpbmlzaD1hLGl8fCExPT09by5xdWV1ZT90aGlzLmVhY2goYSk6dGhpcy5xdWV1ZShvLnF1ZXVlLGEpfSxzdG9wOmZ1bmN0aW9uKGksZSxvKXt2YXIgYT1mdW5jdGlvbihlKXt2YXIgdD1lLnN0b3A7ZGVsZXRlIGUuc3RvcCx0KG8pfTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGkmJihvPWUsZT1pLGk9dm9pZCAwKSxlJiZ0aGlzLnF1ZXVlKGl8fCJmeCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPSEwLHQ9bnVsbCE9aSYmaSsicXVldWVIb29rcyIsbj1TLnRpbWVycyxyPVkuZ2V0KHRoaXMpO2lmKHQpclt0XSYmclt0XS5zdG9wJiZhKHJbdF0pO2Vsc2UgZm9yKHQgaW4gcilyW3RdJiZyW3RdLnN0b3AmJmF0LnRlc3QodCkmJmEoclt0XSk7Zm9yKHQ9bi5sZW5ndGg7dC0tOyluW3RdLmVsZW0hPT10aGlzfHxudWxsIT1pJiZuW3RdLnF1ZXVlIT09aXx8KG5bdF0uYW5pbS5zdG9wKG8pLGU9ITEsbi5zcGxpY2UodCwxKSk7IWUmJm98fFMuZGVxdWV1ZSh0aGlzLGkpfSl9LGZpbmlzaDpmdW5jdGlvbihhKXtyZXR1cm4hMSE9PWEmJihhPWF8fCJmeCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlLHQ9WS5nZXQodGhpcyksbj10W2ErInF1ZXVlIl0scj10W2ErInF1ZXVlSG9va3MiXSxpPVMudGltZXJzLG89bj9uLmxlbmd0aDowO2Zvcih0LmZpbmlzaD0hMCxTLnF1ZXVlKHRoaXMsYSxbXSksciYmci5zdG9wJiZyLnN0b3AuY2FsbCh0aGlzLCEwKSxlPWkubGVuZ3RoO2UtLTspaVtlXS5lbGVtPT09dGhpcyYmaVtlXS5xdWV1ZT09PWEmJihpW2VdLmFuaW0uc3RvcCghMCksaS5zcGxpY2UoZSwxKSk7Zm9yKGU9MDtlPG87ZSsrKW5bZV0mJm5bZV0uZmluaXNoJiZuW2VdLmZpbmlzaC5jYWxsKHRoaXMpO2RlbGV0ZSB0LmZpbmlzaH0pfX0pLFMuZWFjaChbInRvZ2dsZSIsInNob3ciLCJoaWRlIl0sZnVuY3Rpb24oZSxyKXt2YXIgaT1TLmZuW3JdO1MuZm5bcl09ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBudWxsPT1lfHwiYm9vbGVhbiI9PXR5cGVvZiBlP2kuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShsdChyLCEwKSxlLHQsbil9fSksUy5lYWNoKHtzbGlkZURvd246bHQoInNob3ciKSxzbGlkZVVwOmx0KCJoaWRlIiksc2xpZGVUb2dnbGU6bHQoInRvZ2dsZSIpLGZhZGVJbjp7b3BhY2l0eToic2hvdyJ9LGZhZGVPdXQ6e29wYWNpdHk6ImhpZGUifSxmYWRlVG9nZ2xlOntvcGFjaXR5OiJ0b2dnbGUifX0sZnVuY3Rpb24oZSxyKXtTLmZuW2VdPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5hbmltYXRlKHIsZSx0LG4pfX0pLFMudGltZXJzPVtdLFMuZngudGljaz1mdW5jdGlvbigpe3ZhciBlLHQ9MCxuPVMudGltZXJzO2Zvcih0dD1EYXRlLm5vdygpO3Q8bi5sZW5ndGg7dCsrKShlPW5bdF0pKCl8fG5bdF0hPT1lfHxuLnNwbGljZSh0LS0sMSk7bi5sZW5ndGh8fFMuZnguc3RvcCgpLHR0PXZvaWQgMH0sUy5meC50aW1lcj1mdW5jdGlvbihlKXtTLnRpbWVycy5wdXNoKGUpLFMuZnguc3RhcnQoKX0sUy5meC5pbnRlcnZhbD0xMyxTLmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7bnR8fChudD0hMCxzdCgpKX0sUy5meC5zdG9wPWZ1bmN0aW9uKCl7bnQ9bnVsbH0sUy5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sUy5mbi5kZWxheT1mdW5jdGlvbihyLGUpe3JldHVybiByPVMuZngmJlMuZnguc3BlZWRzW3JdfHxyLGU9ZXx8ImZ4Iix0aGlzLnF1ZXVlKGUsZnVuY3Rpb24oZSx0KXt2YXIgbj1DLnNldFRpbWVvdXQoZSxyKTt0LnN0b3A9ZnVuY3Rpb24oKXtDLmNsZWFyVGltZW91dChuKX19KX0scnQ9RS5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLGl0PUUuY3JlYXRlRWxlbWVudCgic2VsZWN0IikuYXBwZW5kQ2hpbGQoRS5jcmVhdGVFbGVtZW50KCJvcHRpb24iKSkscnQudHlwZT0iY2hlY2tib3giLHkuY2hlY2tPbj0iIiE9PXJ0LnZhbHVlLHkub3B0U2VsZWN0ZWQ9aXQuc2VsZWN0ZWQsKHJ0PUUuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSkudmFsdWU9InQiLHJ0LnR5cGU9InJhZGlvIix5LnJhZGlvVmFsdWU9InQiPT09cnQudmFsdWU7dmFyIHB0LGR0PVMuZXhwci5hdHRySGFuZGxlO1MuZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuICQodGhpcyxTLmF0dHIsZSx0LDE8YXJndW1lbnRzLmxlbmd0aCl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1MucmVtb3ZlQXR0cih0aGlzLGUpfSl9fSksUy5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz1lLm5vZGVUeXBlO2lmKDMhPT1vJiY4IT09byYmMiE9PW8pcmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiBlLmdldEF0dHJpYnV0ZT9TLnByb3AoZSx0LG4pOigxPT09byYmUy5pc1hNTERvYyhlKXx8KGk9Uy5hdHRySG9va3NbdC50b0xvd2VyQ2FzZSgpXXx8KFMuZXhwci5tYXRjaC5ib29sLnRlc3QodCk/cHQ6dm9pZCAwKSksdm9pZCAwIT09bj9udWxsPT09bj92b2lkIFMucmVtb3ZlQXR0cihlLHQpOmkmJiJzZXQiaW4gaSYmdm9pZCAwIT09KHI9aS5zZXQoZSxuLHQpKT9yOihlLnNldEF0dHJpYnV0ZSh0LG4rIiIpLG4pOmkmJiJnZXQiaW4gaSYmbnVsbCE9PShyPWkuZ2V0KGUsdCkpP3I6bnVsbD09KHI9Uy5maW5kLmF0dHIoZSx0KSk/dm9pZCAwOnIpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihlLHQpe2lmKCF5LnJhZGlvVmFsdWUmJiJyYWRpbyI9PT10JiZBKGUsImlucHV0Iikpe3ZhciBuPWUudmFsdWU7cmV0dXJuIGUuc2V0QXR0cmlidXRlKCJ0eXBlIix0KSxuJiYoZS52YWx1ZT1uKSx0fX19fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0wLGk9dCYmdC5tYXRjaChQKTtpZihpJiYxPT09ZS5ub2RlVHlwZSl3aGlsZShuPWlbcisrXSllLnJlbW92ZUF0dHJpYnV0ZShuKX19KSxwdD17c2V0OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4hMT09PXQ/Uy5yZW1vdmVBdHRyKGUsbik6ZS5zZXRBdHRyaWJ1dGUobixuKSxufX0sUy5lYWNoKFMuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXHcrL2cpLGZ1bmN0aW9uKGUsdCl7dmFyIGE9ZHRbdF18fFMuZmluZC5hdHRyO2R0W3RdPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89dC50b0xvd2VyQ2FzZSgpO3JldHVybiBufHwoaT1kdFtvXSxkdFtvXT1yLHI9bnVsbCE9YShlLHQsbik/bzpudWxsLGR0W29dPWkpLHJ9fSk7dmFyIGh0PS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksZ3Q9L14oPzphfGFyZWEpJC9pO2Z1bmN0aW9uIHZ0KGUpe3JldHVybihlLm1hdGNoKFApfHxbXSkuam9pbigiICIpfWZ1bmN0aW9uIHl0KGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSYmZS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIifWZ1bmN0aW9uIG10KGUpe3JldHVybiBBcnJheS5pc0FycmF5KGUpP2U6InN0cmluZyI9PXR5cGVvZiBlJiZlLm1hdGNoKFApfHxbXX1TLmZuLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihlLHQpe3JldHVybiAkKHRoaXMsUy5wcm9wLGUsdCwxPGFyZ3VtZW50cy5sZW5ndGgpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtkZWxldGUgdGhpc1tTLnByb3BGaXhbZV18fGVdfSl9fSksUy5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz1lLm5vZGVUeXBlO2lmKDMhPT1vJiY4IT09byYmMiE9PW8pcmV0dXJuIDE9PT1vJiZTLmlzWE1MRG9jKGUpfHwodD1TLnByb3BGaXhbdF18fHQsaT1TLnByb3BIb29rc1t0XSksdm9pZCAwIT09bj9pJiYic2V0ImluIGkmJnZvaWQgMCE9PShyPWkuc2V0KGUsbix0KSk/cjplW3RdPW46aSYmImdldCJpbiBpJiZudWxsIT09KHI9aS5nZXQoZSx0KSk/cjplW3RdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9Uy5maW5kLmF0dHIoZSwidGFiaW5kZXgiKTtyZXR1cm4gdD9wYXJzZUludCh0LDEwKTpodC50ZXN0KGUubm9kZU5hbWUpfHxndC50ZXN0KGUubm9kZU5hbWUpJiZlLmhyZWY/MDotMX19fSxwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn19KSx5Lm9wdFNlbGVjdGVkfHwoUy5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJnQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsbnVsbH0sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyZW50Tm9kZTt0JiYodC5zZWxlY3RlZEluZGV4LHQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpfX0pLFMuZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7Uy5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pLFMuZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbih0KXt2YXIgZSxuLHIsaSxvLGEscyx1PTA7aWYobSh0KSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGUpe1ModGhpcykuYWRkQ2xhc3ModC5jYWxsKHRoaXMsZSx5dCh0aGlzKSkpfSk7aWYoKGU9bXQodCkpLmxlbmd0aCl3aGlsZShuPXRoaXNbdSsrXSlpZihpPXl0KG4pLHI9MT09PW4ubm9kZVR5cGUmJiIgIit2dChpKSsiICIpe2E9MDt3aGlsZShvPWVbYSsrXSlyLmluZGV4T2YoIiAiK28rIiAiKTwwJiYocis9bysiICIpO2khPT0ocz12dChyKSkmJm4uc2V0QXR0cmlidXRlKCJjbGFzcyIscyl9cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKHQpe3ZhciBlLG4scixpLG8sYSxzLHU9MDtpZihtKHQpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oZSl7Uyh0aGlzKS5yZW1vdmVDbGFzcyh0LmNhbGwodGhpcyxlLHl0KHRoaXMpKSl9KTtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5hdHRyKCJjbGFzcyIsIiIpO2lmKChlPW10KHQpKS5sZW5ndGgpd2hpbGUobj10aGlzW3UrK10paWYoaT15dChuKSxyPTE9PT1uLm5vZGVUeXBlJiYiICIrdnQoaSkrIiAiKXthPTA7d2hpbGUobz1lW2ErK10pd2hpbGUoLTE8ci5pbmRleE9mKCIgIitvKyIgIikpcj1yLnJlcGxhY2UoIiAiK28rIiAiLCIgIik7aSE9PShzPXZ0KHIpKSYmbi5zZXRBdHRyaWJ1dGUoImNsYXNzIixzKX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oaSx0KXt2YXIgbz10eXBlb2YgaSxhPSJzdHJpbmciPT09b3x8QXJyYXkuaXNBcnJheShpKTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiB0JiZhP3Q/dGhpcy5hZGRDbGFzcyhpKTp0aGlzLnJlbW92ZUNsYXNzKGkpOm0oaSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGUpe1ModGhpcykudG9nZ2xlQ2xhc3MoaS5jYWxsKHRoaXMsZSx5dCh0aGlzKSx0KSx0KX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlLHQsbixyO2lmKGEpe3Q9MCxuPVModGhpcykscj1tdChpKTt3aGlsZShlPXJbdCsrXSluLmhhc0NsYXNzKGUpP24ucmVtb3ZlQ2xhc3MoZSk6bi5hZGRDbGFzcyhlKX1lbHNlIHZvaWQgMCE9PWkmJiJib29sZWFuIiE9PW98fCgoZT15dCh0aGlzKSkmJlkuc2V0KHRoaXMsIl9fY2xhc3NOYW1lX18iLGUpLHRoaXMuc2V0QXR0cmlidXRlJiZ0aGlzLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGV8fCExPT09aT8iIjpZLmdldCh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIiKSl9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixyPTA7dD0iICIrZSsiICI7d2hpbGUobj10aGlzW3IrK10paWYoMT09PW4ubm9kZVR5cGUmJi0xPCgiICIrdnQoeXQobikpKyIgIikuaW5kZXhPZih0KSlyZXR1cm4hMDtyZXR1cm4hMX19KTt2YXIgeHQ9L1xyL2c7Uy5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbihuKXt2YXIgcixlLGksdD10aGlzWzBdO3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhpPW0obiksdGhpcy5lYWNoKGZ1bmN0aW9uKGUpe3ZhciB0OzE9PT10aGlzLm5vZGVUeXBlJiYobnVsbD09KHQ9aT9uLmNhbGwodGhpcyxlLFModGhpcykudmFsKCkpOm4pP3Q9IiI6Im51bWJlciI9PXR5cGVvZiB0P3QrPSIiOkFycmF5LmlzQXJyYXkodCkmJih0PVMubWFwKHQsZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/IiI6ZSsiIn0pKSwocj1TLnZhbEhvb2tzW3RoaXMudHlwZV18fFMudmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkmJiJzZXQiaW4gciYmdm9pZCAwIT09ci5zZXQodGhpcyx0LCJ2YWx1ZSIpfHwodGhpcy52YWx1ZT10KSl9KSk6dD8ocj1TLnZhbEhvb2tzW3QudHlwZV18fFMudmFsSG9va3NbdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkmJiJnZXQiaW4gciYmdm9pZCAwIT09KGU9ci5nZXQodCwidmFsdWUiKSk/ZToic3RyaW5nIj09dHlwZW9mKGU9dC52YWx1ZSk/ZS5yZXBsYWNlKHh0LCIiKTpudWxsPT1lPyIiOmU6dm9pZCAwfX0pLFMuZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9Uy5maW5kLmF0dHIoZSwidmFsdWUiKTtyZXR1cm4gbnVsbCE9dD90OnZ0KFMudGV4dChlKSl9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaT1lLm9wdGlvbnMsbz1lLnNlbGVjdGVkSW5kZXgsYT0ic2VsZWN0LW9uZSI9PT1lLnR5cGUscz1hP251bGw6W10sdT1hP28rMTppLmxlbmd0aDtmb3Iocj1vPDA/dTphP286MDtyPHU7cisrKWlmKCgobj1pW3JdKS5zZWxlY3RlZHx8cj09PW8pJiYhbi5kaXNhYmxlZCYmKCFuLnBhcmVudE5vZGUuZGlzYWJsZWR8fCFBKG4ucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe2lmKHQ9UyhuKS52YWwoKSxhKXJldHVybiB0O3MucHVzaCh0KX1yZXR1cm4gc30sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPWUub3B0aW9ucyxvPVMubWFrZUFycmF5KHQpLGE9aS5sZW5ndGg7d2hpbGUoYS0tKSgocj1pW2FdKS5zZWxlY3RlZD0tMTxTLmluQXJyYXkoUy52YWxIb29rcy5vcHRpb24uZ2V0KHIpLG8pKSYmKG49ITApO3JldHVybiBufHwoZS5zZWxlY3RlZEluZGV4PS0xKSxvfX19fSksUy5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7Uy52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGUsdCl7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gZS5jaGVja2VkPS0xPFMuaW5BcnJheShTKGUpLnZhbCgpLHQpfX0seS5jaGVja09ufHwoUy52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PT1lLmdldEF0dHJpYnV0ZSgidmFsdWUiKT8ib24iOmUudmFsdWV9KX0pLHkuZm9jdXNpbj0ib25mb2N1c2luImluIEM7dmFyIGJ0PS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyx3dD1mdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpfTtTLmV4dGVuZChTLmV2ZW50LHt0cmlnZ2VyOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYSxzLHUsbCxjLGYscD1bbnx8RV0sZD12LmNhbGwoZSwidHlwZSIpP2UudHlwZTplLGg9di5jYWxsKGUsIm5hbWVzcGFjZSIpP2UubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYobz1mPWE9bj1ufHxFLDMhPT1uLm5vZGVUeXBlJiY4IT09bi5ub2RlVHlwZSYmIWJ0LnRlc3QoZCtTLmV2ZW50LnRyaWdnZXJlZCkmJigtMTxkLmluZGV4T2YoIi4iKSYmKGQ9KGg9ZC5zcGxpdCgiLiIpKS5zaGlmdCgpLGguc29ydCgpKSx1PWQuaW5kZXhPZigiOiIpPDAmJiJvbiIrZCwoZT1lW1MuZXhwYW5kb10/ZTpuZXcgUy5FdmVudChkLCJvYmplY3QiPT10eXBlb2YgZSYmZSkpLmlzVHJpZ2dlcj1yPzI6MyxlLm5hbWVzcGFjZT1oLmpvaW4oIi4iKSxlLnJuYW1lc3BhY2U9ZS5uYW1lc3BhY2U/bmV3IFJlZ0V4cCgiKF58XFwuKSIraC5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTpudWxsLGUucmVzdWx0PXZvaWQgMCxlLnRhcmdldHx8KGUudGFyZ2V0PW4pLHQ9bnVsbD09dD9bZV06Uy5tYWtlQXJyYXkodCxbZV0pLGM9Uy5ldmVudC5zcGVjaWFsW2RdfHx7fSxyfHwhYy50cmlnZ2VyfHwhMSE9PWMudHJpZ2dlci5hcHBseShuLHQpKSl7aWYoIXImJiFjLm5vQnViYmxlJiYheChuKSl7Zm9yKHM9Yy5kZWxlZ2F0ZVR5cGV8fGQsYnQudGVzdChzK2QpfHwobz1vLnBhcmVudE5vZGUpO287bz1vLnBhcmVudE5vZGUpcC5wdXNoKG8pLGE9bzthPT09KG4ub3duZXJEb2N1bWVudHx8RSkmJnAucHVzaChhLmRlZmF1bHRWaWV3fHxhLnBhcmVudFdpbmRvd3x8Qyl9aT0wO3doaWxlKChvPXBbaSsrXSkmJiFlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpZj1vLGUudHlwZT0xPGk/czpjLmJpbmRUeXBlfHxkLChsPShZLmdldChvLCJldmVudHMiKXx8T2JqZWN0LmNyZWF0ZShudWxsKSlbZS50eXBlXSYmWS5nZXQobywiaGFuZGxlIikpJiZsLmFwcGx5KG8sdCksKGw9dSYmb1t1XSkmJmwuYXBwbHkmJlYobykmJihlLnJlc3VsdD1sLmFwcGx5KG8sdCksITE9PT1lLnJlc3VsdCYmZS5wcmV2ZW50RGVmYXVsdCgpKTtyZXR1cm4gZS50eXBlPWQscnx8ZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8Yy5fZGVmYXVsdCYmITEhPT1jLl9kZWZhdWx0LmFwcGx5KHAucG9wKCksdCl8fCFWKG4pfHx1JiZtKG5bZF0pJiYheChuKSYmKChhPW5bdV0pJiYoblt1XT1udWxsKSxTLmV2ZW50LnRyaWdnZXJlZD1kLGUuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSYmZi5hZGRFdmVudExpc3RlbmVyKGQsd3QpLG5bZF0oKSxlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkmJmYucmVtb3ZlRXZlbnRMaXN0ZW5lcihkLHd0KSxTLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsYSYmKG5bdV09YSkpLGUucmVzdWx0fX0sc2ltdWxhdGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPVMuZXh0ZW5kKG5ldyBTLkV2ZW50LG4se3R5cGU6ZSxpc1NpbXVsYXRlZDohMH0pO1MuZXZlbnQudHJpZ2dlcihyLG51bGwsdCl9fSksUy5mbi5leHRlbmQoe3RyaWdnZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Uy5ldmVudC50cmlnZ2VyKGUsdCx0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXNbMF07aWYobilyZXR1cm4gUy5ldmVudC50cmlnZ2VyKGUsdCxuLCEwKX19KSx5LmZvY3VzaW58fFMuZWFjaCh7Zm9jdXM6ImZvY3VzaW4iLGJsdXI6ImZvY3Vzb3V0In0sZnVuY3Rpb24obixyKXt2YXIgaT1mdW5jdGlvbihlKXtTLmV2ZW50LnNpbXVsYXRlKHIsZS50YXJnZXQsUy5ldmVudC5maXgoZSkpfTtTLmV2ZW50LnNwZWNpYWxbcl09e3NldHVwOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLmRvY3VtZW50fHx0aGlzLHQ9WS5hY2Nlc3MoZSxyKTt0fHxlLmFkZEV2ZW50TGlzdGVuZXIobixpLCEwKSxZLmFjY2VzcyhlLHIsKHR8fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcy5kb2N1bWVudHx8dGhpcyx0PVkuYWNjZXNzKGUsciktMTt0P1kuYWNjZXNzKGUscix0KTooZS5yZW1vdmVFdmVudExpc3RlbmVyKG4saSwhMCksWS5yZW1vdmUoZSxyKSl9fX0pO3ZhciBUdD1DLmxvY2F0aW9uLEN0PXtndWlkOkRhdGUubm93KCl9LEV0PS9cPy87Uy5wYXJzZVhNTD1mdW5jdGlvbihlKXt2YXIgdDtpZighZXx8InN0cmluZyIhPXR5cGVvZiBlKXJldHVybiBudWxsO3RyeXt0PShuZXcgQy5ET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhlLCJ0ZXh0L3htbCIpfWNhdGNoKGUpe3Q9dm9pZCAwfXJldHVybiB0JiYhdC5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGFyc2VyZXJyb3IiKS5sZW5ndGh8fFMuZXJyb3IoIkludmFsaWQgWE1MOiAiK2UpLHR9O3ZhciBTdD0vXFtcXSQvLGt0PS9ccj9cbi9nLEF0PS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxOdD0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7ZnVuY3Rpb24gRHQobixlLHIsaSl7dmFyIHQ7aWYoQXJyYXkuaXNBcnJheShlKSlTLmVhY2goZSxmdW5jdGlvbihlLHQpe3J8fFN0LnRlc3Qobik/aShuLHQpOkR0KG4rIlsiKygib2JqZWN0Ij09dHlwZW9mIHQmJm51bGwhPXQ/ZToiIikrIl0iLHQscixpKX0pO2Vsc2UgaWYocnx8Im9iamVjdCIhPT13KGUpKWkobixlKTtlbHNlIGZvcih0IGluIGUpRHQobisiWyIrdCsiXSIsZVt0XSxyLGkpfVMucGFyYW09ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9ZnVuY3Rpb24oZSx0KXt2YXIgbj1tKHQpP3QoKTp0O3Jbci5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChlKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KG51bGw9PW4/IiI6bil9O2lmKG51bGw9PWUpcmV0dXJuIiI7aWYoQXJyYXkuaXNBcnJheShlKXx8ZS5qcXVlcnkmJiFTLmlzUGxhaW5PYmplY3QoZSkpUy5lYWNoKGUsZnVuY3Rpb24oKXtpKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKG4gaW4gZSlEdChuLGVbbl0sdCxpKTtyZXR1cm4gci5qb2luKCImIil9LFMuZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gUy5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPVMucHJvcCh0aGlzLCJlbGVtZW50cyIpO3JldHVybiBlP1MubWFrZUFycmF5KGUpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgZT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIVModGhpcykuaXMoIjpkaXNhYmxlZCIpJiZOdC50ZXN0KHRoaXMubm9kZU5hbWUpJiYhQXQudGVzdChlKSYmKHRoaXMuY2hlY2tlZHx8IXBlLnRlc3QoZSkpfSkubWFwKGZ1bmN0aW9uKGUsdCl7dmFyIG49Uyh0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09bj9udWxsOkFycmF5LmlzQXJyYXkobik/Uy5tYXAobixmdW5jdGlvbihlKXtyZXR1cm57bmFtZTp0Lm5hbWUsdmFsdWU6ZS5yZXBsYWNlKGt0LCJcclxuIil9fSk6e25hbWU6dC5uYW1lLHZhbHVlOm4ucmVwbGFjZShrdCwiXHJcbiIpfX0pLmdldCgpfX0pO3ZhciBqdD0vJTIwL2cscXQ9LyMuKiQvLEx0PS8oWz8mXSlfPVteJl0qLyxIdD0vXiguKj8pOlsgXHRdKihbXlxyXG5dKikkL2dtLE90PS9eKD86R0VUfEhFQUQpJC8sUHQ9L15cL1wvLyxSdD17fSxNdD17fSxJdD0iKi8iLmNvbmNhdCgiKiIpLFd0PUUuY3JlYXRlRWxlbWVudCgiYSIpO2Z1bmN0aW9uIEZ0KG8pe3JldHVybiBmdW5jdGlvbihlLHQpeyJzdHJpbmciIT10eXBlb2YgZSYmKHQ9ZSxlPSIqIik7dmFyIG4scj0wLGk9ZS50b0xvd2VyQ2FzZSgpLm1hdGNoKFApfHxbXTtpZihtKHQpKXdoaWxlKG49aVtyKytdKSIrIj09PW5bMF0/KG49bi5zbGljZSgxKXx8IioiLChvW25dPW9bbl18fFtdKS51bnNoaWZ0KHQpKToob1tuXT1vW25dfHxbXSkucHVzaCh0KX19ZnVuY3Rpb24gQnQodCxpLG8sYSl7dmFyIHM9e30sdT10PT09TXQ7ZnVuY3Rpb24gbChlKXt2YXIgcjtyZXR1cm4gc1tlXT0hMCxTLmVhY2godFtlXXx8W10sZnVuY3Rpb24oZSx0KXt2YXIgbj10KGksbyxhKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIG58fHV8fHNbbl0/dT8hKHI9bik6dm9pZCAwOihpLmRhdGFUeXBlcy51bnNoaWZ0KG4pLGwobiksITEpfSkscn1yZXR1cm4gbChpLmRhdGFUeXBlc1swXSl8fCFzWyIqIl0mJmwoIioiKX1mdW5jdGlvbiAkdChlLHQpe3ZhciBuLHIsaT1TLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKG4gaW4gdCl2b2lkIDAhPT10W25dJiYoKGlbbl0/ZTpyfHwocj17fSkpW25dPXRbbl0pO3JldHVybiByJiZTLmV4dGVuZCghMCxlLHIpLGV9V3QuaHJlZj1UdC5ocmVmLFMuZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDpUdC5ocmVmLHR5cGU6IkdFVCIsaXNMb2NhbDovXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLy50ZXN0KFR0LnByb3RvY29sKSxnbG9iYWw6ITAscHJvY2Vzc0RhdGE6ITAsYXN5bmM6ITAsY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsYWNjZXB0czp7IioiOkl0LHRleHQ6InRleHQvcGxhaW4iLGh0bWw6InRleHQvaHRtbCIseG1sOiJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sIixqc29uOiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQifSxjb250ZW50czp7eG1sOi9cYnhtbFxiLyxodG1sOi9cYmh0bWwvLGpzb246L1xianNvblxiL30scmVzcG9uc2VGaWVsZHM6e3htbDoicmVzcG9uc2VYTUwiLHRleHQ6InJlc3BvbnNlVGV4dCIsanNvbjoicmVzcG9uc2VKU09OIn0sY29udmVydGVyczp7IiogdGV4dCI6U3RyaW5nLCJ0ZXh0IGh0bWwiOiEwLCJ0ZXh0IGpzb24iOkpTT04ucGFyc2UsInRleHQgeG1sIjpTLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD8kdCgkdChlLFMuYWpheFNldHRpbmdzKSx0KTokdChTLmFqYXhTZXR0aW5ncyxlKX0sYWpheFByZWZpbHRlcjpGdChSdCksYWpheFRyYW5zcG9ydDpGdChNdCksYWpheDpmdW5jdGlvbihlLHQpeyJvYmplY3QiPT10eXBlb2YgZSYmKHQ9ZSxlPXZvaWQgMCksdD10fHx7fTt2YXIgYyxmLHAsbixkLHIsaCxnLGksbyx2PVMuYWpheFNldHVwKHt9LHQpLHk9di5jb250ZXh0fHx2LG09di5jb250ZXh0JiYoeS5ub2RlVHlwZXx8eS5qcXVlcnkpP1MoeSk6Uy5ldmVudCx4PVMuRGVmZXJyZWQoKSxiPVMuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLHc9di5zdGF0dXNDb2RlfHx7fSxhPXt9LHM9e30sdT0iY2FuY2VsZWQiLFQ9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihlKXt2YXIgdDtpZihoKXtpZighbil7bj17fTt3aGlsZSh0PUh0LmV4ZWMocCkpblt0WzFdLnRvTG93ZXJDYXNlKCkrIiAiXT0oblt0WzFdLnRvTG93ZXJDYXNlKCkrIiAiXXx8W10pLmNvbmNhdCh0WzJdKX10PW5bZS50b0xvd2VyQ2FzZSgpKyIgIl19cmV0dXJuIG51bGw9PXQ/bnVsbDp0LmpvaW4oIiwgIil9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiBoP3A6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihlLHQpe3JldHVybiBudWxsPT1oJiYoZT1zW2UudG9Mb3dlckNhc2UoKV09c1tlLnRvTG93ZXJDYXNlKCldfHxlLGFbZV09dCksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09aCYmKHYubWltZVR5cGU9ZSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihlKXt2YXIgdDtpZihlKWlmKGgpVC5hbHdheXMoZVtULnN0YXR1c10pO2Vsc2UgZm9yKHQgaW4gZSl3W3RdPVt3W3RdLGVbdF1dO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihlKXt2YXIgdD1lfHx1O3JldHVybiBjJiZjLmFib3J0KHQpLGwoMCx0KSx0aGlzfX07aWYoeC5wcm9taXNlKFQpLHYudXJsPSgoZXx8di51cmx8fFR0LmhyZWYpKyIiKS5yZXBsYWNlKFB0LFR0LnByb3RvY29sKyIvLyIpLHYudHlwZT10Lm1ldGhvZHx8dC50eXBlfHx2Lm1ldGhvZHx8di50eXBlLHYuZGF0YVR5cGVzPSh2LmRhdGFUeXBlfHwiKiIpLnRvTG93ZXJDYXNlKCkubWF0Y2goUCl8fFsiIl0sbnVsbD09di5jcm9zc0RvbWFpbil7cj1FLmNyZWF0ZUVsZW1lbnQoImEiKTt0cnl7ci5ocmVmPXYudXJsLHIuaHJlZj1yLmhyZWYsdi5jcm9zc0RvbWFpbj1XdC5wcm90b2NvbCsiLy8iK1d0Lmhvc3QhPXIucHJvdG9jb2wrIi8vIityLmhvc3R9Y2F0Y2goZSl7di5jcm9zc0RvbWFpbj0hMH19aWYodi5kYXRhJiZ2LnByb2Nlc3NEYXRhJiYic3RyaW5nIiE9dHlwZW9mIHYuZGF0YSYmKHYuZGF0YT1TLnBhcmFtKHYuZGF0YSx2LnRyYWRpdGlvbmFsKSksQnQoUnQsdix0LFQpLGgpcmV0dXJuIFQ7Zm9yKGkgaW4oZz1TLmV2ZW50JiZ2Lmdsb2JhbCkmJjA9PVMuYWN0aXZlKysmJlMuZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0Iiksdi50eXBlPXYudHlwZS50b1VwcGVyQ2FzZSgpLHYuaGFzQ29udGVudD0hT3QudGVzdCh2LnR5cGUpLGY9di51cmwucmVwbGFjZShxdCwiIiksdi5oYXNDb250ZW50P3YuZGF0YSYmdi5wcm9jZXNzRGF0YSYmMD09PSh2LmNvbnRlbnRUeXBlfHwiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikmJih2LmRhdGE9di5kYXRhLnJlcGxhY2UoanQsIisiKSk6KG89di51cmwuc2xpY2UoZi5sZW5ndGgpLHYuZGF0YSYmKHYucHJvY2Vzc0RhdGF8fCJzdHJpbmciPT10eXBlb2Ygdi5kYXRhKSYmKGYrPShFdC50ZXN0KGYpPyImIjoiPyIpK3YuZGF0YSxkZWxldGUgdi5kYXRhKSwhMT09PXYuY2FjaGUmJihmPWYucmVwbGFjZShMdCwiJDEiKSxvPShFdC50ZXN0KGYpPyImIjoiPyIpKyJfPSIrQ3QuZ3VpZCsrK28pLHYudXJsPWYrbyksdi5pZk1vZGlmaWVkJiYoUy5sYXN0TW9kaWZpZWRbZl0mJlQuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLFMubGFzdE1vZGlmaWVkW2ZdKSxTLmV0YWdbZl0mJlQuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIsUy5ldGFnW2ZdKSksKHYuZGF0YSYmdi5oYXNDb250ZW50JiYhMSE9PXYuY29udGVudFR5cGV8fHQuY29udGVudFR5cGUpJiZULnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsdi5jb250ZW50VHlwZSksVC5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLHYuZGF0YVR5cGVzWzBdJiZ2LmFjY2VwdHNbdi5kYXRhVHlwZXNbMF1dP3YuYWNjZXB0c1t2LmRhdGFUeXBlc1swXV0rKCIqIiE9PXYuZGF0YVR5cGVzWzBdPyIsICIrSXQrIjsgcT0wLjAxIjoiIik6di5hY2NlcHRzWyIqIl0pLHYuaGVhZGVycylULnNldFJlcXVlc3RIZWFkZXIoaSx2LmhlYWRlcnNbaV0pO2lmKHYuYmVmb3JlU2VuZCYmKCExPT09di5iZWZvcmVTZW5kLmNhbGwoeSxULHYpfHxoKSlyZXR1cm4gVC5hYm9ydCgpO2lmKHU9ImFib3J0IixiLmFkZCh2LmNvbXBsZXRlKSxULmRvbmUodi5zdWNjZXNzKSxULmZhaWwodi5lcnJvciksYz1CdChNdCx2LHQsVCkpe2lmKFQucmVhZHlTdGF0ZT0xLGcmJm0udHJpZ2dlcigiYWpheFNlbmQiLFtULHZdKSxoKXJldHVybiBUO3YuYXN5bmMmJjA8di50aW1lb3V0JiYoZD1DLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtULmFib3J0KCJ0aW1lb3V0Iil9LHYudGltZW91dCkpO3RyeXtoPSExLGMuc2VuZChhLGwpfWNhdGNoKGUpe2lmKGgpdGhyb3cgZTtsKC0xLGUpfX1lbHNlIGwoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIGwoZSx0LG4scil7dmFyIGksbyxhLHMsdSxsPXQ7aHx8KGg9ITAsZCYmQy5jbGVhclRpbWVvdXQoZCksYz12b2lkIDAscD1yfHwiIixULnJlYWR5U3RhdGU9MDxlPzQ6MCxpPTIwMDw9ZSYmZTwzMDB8fDMwND09PWUsbiYmKHM9ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHM9ZS5jb250ZW50cyx1PWUuZGF0YVR5cGVzO3doaWxlKCIqIj09PXVbMF0pdS5zaGlmdCgpLHZvaWQgMD09PXImJihyPWUubWltZVR5cGV8fHQuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihyKWZvcihpIGluIHMpaWYoc1tpXSYmc1tpXS50ZXN0KHIpKXt1LnVuc2hpZnQoaSk7YnJlYWt9aWYodVswXWluIG4pbz11WzBdO2Vsc2V7Zm9yKGkgaW4gbil7aWYoIXVbMF18fGUuY29udmVydGVyc1tpKyIgIit1WzBdXSl7bz1pO2JyZWFrfWF8fChhPWkpfW89b3x8YX1pZihvKXJldHVybiBvIT09dVswXSYmdS51bnNoaWZ0KG8pLG5bb119KHYsVCxuKSksIWkmJi0xPFMuaW5BcnJheSgic2NyaXB0Iix2LmRhdGFUeXBlcykmJih2LmNvbnZlcnRlcnNbInRleHQgc2NyaXB0Il09ZnVuY3Rpb24oKXt9KSxzPWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYSxzLHUsbD17fSxjPWUuZGF0YVR5cGVzLnNsaWNlKCk7aWYoY1sxXSlmb3IoYSBpbiBlLmNvbnZlcnRlcnMpbFthLnRvTG93ZXJDYXNlKCldPWUuY29udmVydGVyc1thXTtvPWMuc2hpZnQoKTt3aGlsZShvKWlmKGUucmVzcG9uc2VGaWVsZHNbb10mJihuW2UucmVzcG9uc2VGaWVsZHNbb11dPXQpLCF1JiZyJiZlLmRhdGFGaWx0ZXImJih0PWUuZGF0YUZpbHRlcih0LGUuZGF0YVR5cGUpKSx1PW8sbz1jLnNoaWZ0KCkpaWYoIioiPT09bylvPXU7ZWxzZSBpZigiKiIhPT11JiZ1IT09byl7aWYoIShhPWxbdSsiICIrb118fGxbIiogIitvXSkpZm9yKGkgaW4gbClpZigocz1pLnNwbGl0KCIgIikpWzFdPT09byYmKGE9bFt1KyIgIitzWzBdXXx8bFsiKiAiK3NbMF1dKSl7ITA9PT1hP2E9bFtpXTohMCE9PWxbaV0mJihvPXNbMF0sYy51bnNoaWZ0KHNbMV0pKTticmVha31pZighMCE9PWEpaWYoYSYmZVsidGhyb3dzIl0pdD1hKHQpO2Vsc2UgdHJ5e3Q9YSh0KX1jYXRjaChlKXtyZXR1cm57c3RhdGU6InBhcnNlcmVycm9yIixlcnJvcjphP2U6Ik5vIGNvbnZlcnNpb24gZnJvbSAiK3UrIiB0byAiK299fX1yZXR1cm57c3RhdGU6InN1Y2Nlc3MiLGRhdGE6dH19KHYscyxULGkpLGk/KHYuaWZNb2RpZmllZCYmKCh1PVQuZ2V0UmVzcG9uc2VIZWFkZXIoIkxhc3QtTW9kaWZpZWQiKSkmJihTLmxhc3RNb2RpZmllZFtmXT11KSwodT1ULmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIikpJiYoUy5ldGFnW2ZdPXUpKSwyMDQ9PT1lfHwiSEVBRCI9PT12LnR5cGU/bD0ibm9jb250ZW50IjozMDQ9PT1lP2w9Im5vdG1vZGlmaWVkIjoobD1zLnN0YXRlLG89cy5kYXRhLGk9IShhPXMuZXJyb3IpKSk6KGE9bCwhZSYmbHx8KGw9ImVycm9yIixlPDAmJihlPTApKSksVC5zdGF0dXM9ZSxULnN0YXR1c1RleHQ9KHR8fGwpKyIiLGk/eC5yZXNvbHZlV2l0aCh5LFtvLGwsVF0pOngucmVqZWN0V2l0aCh5LFtULGwsYV0pLFQuc3RhdHVzQ29kZSh3KSx3PXZvaWQgMCxnJiZtLnRyaWdnZXIoaT8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFtULHYsaT9vOmFdKSxiLmZpcmVXaXRoKHksW1QsbF0pLGcmJihtLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW1Qsdl0pLC0tUy5hY3RpdmV8fFMuZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiBUfSxnZXRKU09OOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gUy5nZXQoZSx0LG4sImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIFMuZ2V0KGUsdm9pZCAwLHQsInNjcmlwdCIpfX0pLFMuZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihlLGkpe1NbaV09ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIG0odCkmJihyPXJ8fG4sbj10LHQ9dm9pZCAwKSxTLmFqYXgoUy5leHRlbmQoe3VybDplLHR5cGU6aSxkYXRhVHlwZTpyLGRhdGE6dCxzdWNjZXNzOm59LFMuaXNQbGFpbk9iamVjdChlKSYmZSkpfX0pLFMuYWpheFByZWZpbHRlcihmdW5jdGlvbihlKXt2YXIgdDtmb3IodCBpbiBlLmhlYWRlcnMpImNvbnRlbnQtdHlwZSI9PT10LnRvTG93ZXJDYXNlKCkmJihlLmNvbnRlbnRUeXBlPWUuaGVhZGVyc1t0XXx8IiIpfSksUy5fZXZhbFVybD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIFMuYWpheCh7dXJsOmUsdHlwZToiR0VUIixkYXRhVHlwZToic2NyaXB0IixjYWNoZTohMCxhc3luYzohMSxnbG9iYWw6ITEsY29udmVydGVyczp7InRleHQgc2NyaXB0IjpmdW5jdGlvbigpe319LGRhdGFGaWx0ZXI6ZnVuY3Rpb24oZSl7Uy5nbG9iYWxFdmFsKGUsdCxuKX19KX0sUy5mbi5leHRlbmQoe3dyYXBBbGw6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHRoaXNbMF0mJihtKGUpJiYoZT1lLmNhbGwodGhpc1swXSkpLHQ9UyhlLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmdC5pbnNlcnRCZWZvcmUodGhpc1swXSksdC5tYXAoZnVuY3Rpb24oKXt2YXIgZT10aGlzO3doaWxlKGUuZmlyc3RFbGVtZW50Q2hpbGQpZT1lLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBlfSkuYXBwZW5kKHRoaXMpKSx0aGlzfSx3cmFwSW5uZXI6ZnVuY3Rpb24obil7cmV0dXJuIG0obik/dGhpcy5lYWNoKGZ1bmN0aW9uKGUpe1ModGhpcykud3JhcElubmVyKG4uY2FsbCh0aGlzLGUpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPVModGhpcyksdD1lLmNvbnRlbnRzKCk7dC5sZW5ndGg/dC53cmFwQWxsKG4pOmUuYXBwZW5kKG4pfSl9LHdyYXA6ZnVuY3Rpb24odCl7dmFyIG49bSh0KTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGUpe1ModGhpcykud3JhcEFsbChuP3QuY2FsbCh0aGlzLGUpOnQpfSl9LHVud3JhcDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wYXJlbnQoZSkubm90KCJib2R5IikuZWFjaChmdW5jdGlvbigpe1ModGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLHRoaXN9fSksUy5leHByLnBzZXVkb3MuaGlkZGVuPWZ1bmN0aW9uKGUpe3JldHVybiFTLmV4cHIucHNldWRvcy52aXNpYmxlKGUpfSxTLmV4cHIucHNldWRvcy52aXNpYmxlPWZ1bmN0aW9uKGUpe3JldHVybiEhKGUub2Zmc2V0V2lkdGh8fGUub2Zmc2V0SGVpZ2h0fHxlLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKX0sUy5hamF4U2V0dGluZ3MueGhyPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBuZXcgQy5YTUxIdHRwUmVxdWVzdH1jYXRjaChlKXt9fTt2YXIgX3Q9ezA6MjAwLDEyMjM6MjA0fSx6dD1TLmFqYXhTZXR0aW5ncy54aHIoKTt5LmNvcnM9ISF6dCYmIndpdGhDcmVkZW50aWFscyJpbiB6dCx5LmFqYXg9enQ9ISF6dCxTLmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oaSl7dmFyIG8sYTtpZih5LmNvcnN8fHp0JiYhaS5jcm9zc0RvbWFpbilyZXR1cm57c2VuZDpmdW5jdGlvbihlLHQpe3ZhciBuLHI9aS54aHIoKTtpZihyLm9wZW4oaS50eXBlLGkudXJsLGkuYXN5bmMsaS51c2VybmFtZSxpLnBhc3N3b3JkKSxpLnhockZpZWxkcylmb3IobiBpbiBpLnhockZpZWxkcylyW25dPWkueGhyRmllbGRzW25dO2ZvcihuIGluIGkubWltZVR5cGUmJnIub3ZlcnJpZGVNaW1lVHlwZSYmci5vdmVycmlkZU1pbWVUeXBlKGkubWltZVR5cGUpLGkuY3Jvc3NEb21haW58fGVbIlgtUmVxdWVzdGVkLVdpdGgiXXx8KGVbIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKSxlKXIuc2V0UmVxdWVzdEhlYWRlcihuLGVbbl0pO289ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7byYmKG89YT1yLm9ubG9hZD1yLm9uZXJyb3I9ci5vbmFib3J0PXIub250aW1lb3V0PXIub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsImFib3J0Ij09PWU/ci5hYm9ydCgpOiJlcnJvciI9PT1lPyJudW1iZXIiIT10eXBlb2Ygci5zdGF0dXM/dCgwLCJlcnJvciIpOnQoci5zdGF0dXMsci5zdGF0dXNUZXh0KTp0KF90W3Iuc3RhdHVzXXx8ci5zdGF0dXMsci5zdGF0dXNUZXh0LCJ0ZXh0IiE9PShyLnJlc3BvbnNlVHlwZXx8InRleHQiKXx8InN0cmluZyIhPXR5cGVvZiByLnJlc3BvbnNlVGV4dD97YmluYXJ5OnIucmVzcG9uc2V9Ont0ZXh0OnIucmVzcG9uc2VUZXh0fSxyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl9fSxyLm9ubG9hZD1vKCksYT1yLm9uZXJyb3I9ci5vbnRpbWVvdXQ9bygiZXJyb3IiKSx2b2lkIDAhPT1yLm9uYWJvcnQ/ci5vbmFib3J0PWE6ci5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09ci5yZWFkeVN0YXRlJiZDLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtvJiZhKCl9KX0sbz1vKCJhYm9ydCIpO3RyeXtyLnNlbmQoaS5oYXNDb250ZW50JiZpLmRhdGF8fG51bGwpfWNhdGNoKGUpe2lmKG8pdGhyb3cgZX19LGFib3J0OmZ1bmN0aW9uKCl7byYmbygpfX19KSxTLmFqYXhQcmVmaWx0ZXIoZnVuY3Rpb24oZSl7ZS5jcm9zc0RvbWFpbiYmKGUuY29udGVudHMuc2NyaXB0PSExKX0pLFMuYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0In0sY29udGVudHM6e3NjcmlwdDovXGIoPzpqYXZhfGVjbWEpc2NyaXB0XGIvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGUpe3JldHVybiBTLmdsb2JhbEV2YWwoZSksZX19fSksUy5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUuY2FjaGUmJihlLmNhY2hlPSExKSxlLmNyb3NzRG9tYWluJiYoZS50eXBlPSJHRVQiKX0pLFMuYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihuKXt2YXIgcixpO2lmKG4uY3Jvc3NEb21haW58fG4uc2NyaXB0QXR0cnMpcmV0dXJue3NlbmQ6ZnVuY3Rpb24oZSx0KXtyPVMoIjxzY3JpcHQ+IikuYXR0cihuLnNjcmlwdEF0dHJzfHx7fSkucHJvcCh7Y2hhcnNldDpuLnNjcmlwdENoYXJzZXQsc3JjOm4udXJsfSkub24oImxvYWQgZXJyb3IiLGk9ZnVuY3Rpb24oZSl7ci5yZW1vdmUoKSxpPW51bGwsZSYmdCgiZXJyb3IiPT09ZS50eXBlPzQwNDoyMDAsZS50eXBlKX0pLEUuaGVhZC5hcHBlbmRDaGlsZChyWzBdKX0sYWJvcnQ6ZnVuY3Rpb24oKXtpJiZpKCl9fX0pO3ZhciBVdCxYdD1bXSxWdD0vKD0pXD8oPz0mfCQpfFw/XD8vO1MuYWpheFNldHVwKHtqc29ucDoiY2FsbGJhY2siLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgZT1YdC5wb3AoKXx8Uy5leHBhbmRvKyJfIitDdC5ndWlkKys7cmV0dXJuIHRoaXNbZV09ITAsZX19KSxTLmFqYXhQcmVmaWx0ZXIoImpzb24ganNvbnAiLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYT0hMSE9PWUuanNvbnAmJihWdC50ZXN0KGUudXJsKT8idXJsIjoic3RyaW5nIj09dHlwZW9mIGUuZGF0YSYmMD09PShlLmNvbnRlbnRUeXBlfHwiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikmJlZ0LnRlc3QoZS5kYXRhKSYmImRhdGEiKTtpZihhfHwianNvbnAiPT09ZS5kYXRhVHlwZXNbMF0pcmV0dXJuIHI9ZS5qc29ucENhbGxiYWNrPW0oZS5qc29ucENhbGxiYWNrKT9lLmpzb25wQ2FsbGJhY2soKTplLmpzb25wQ2FsbGJhY2ssYT9lW2FdPWVbYV0ucmVwbGFjZShWdCwiJDEiK3IpOiExIT09ZS5qc29ucCYmKGUudXJsKz0oRXQudGVzdChlLnVybCk/IiYiOiI/IikrZS5qc29ucCsiPSIrciksZS5jb252ZXJ0ZXJzWyJzY3JpcHQganNvbiJdPWZ1bmN0aW9uKCl7cmV0dXJuIG98fFMuZXJyb3IocisiIHdhcyBub3QgY2FsbGVkIiksb1swXX0sZS5kYXRhVHlwZXNbMF09Impzb24iLGk9Q1tyXSxDW3JdPWZ1bmN0aW9uKCl7bz1hcmd1bWVudHN9LG4uYWx3YXlzKGZ1bmN0aW9uKCl7dm9pZCAwPT09aT9TKEMpLnJlbW92ZVByb3Aocik6Q1tyXT1pLGVbcl0mJihlLmpzb25wQ2FsbGJhY2s9dC5qc29ucENhbGxiYWNrLFh0LnB1c2gocikpLG8mJm0oaSkmJmkob1swXSksbz1pPXZvaWQgMH0pLCJzY3JpcHQifSkseS5jcmVhdGVIVE1MRG9jdW1lbnQ9KChVdD1FLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikuYm9keSkuaW5uZXJIVE1MPSI8Zm9ybT48L2Zvcm0+PGZvcm0+PC9mb3JtPiIsMj09PVV0LmNoaWxkTm9kZXMubGVuZ3RoKSxTLnBhcnNlSFRNTD1mdW5jdGlvbihlLHQsbil7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlP1tdOigiYm9vbGVhbiI9PXR5cGVvZiB0JiYobj10LHQ9ITEpLHR8fCh5LmNyZWF0ZUhUTUxEb2N1bWVudD8oKHI9KHQ9RS5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpKS5jcmVhdGVFbGVtZW50KCJiYXNlIikpLmhyZWY9RS5sb2NhdGlvbi5ocmVmLHQuaGVhZC5hcHBlbmRDaGlsZChyKSk6dD1FKSxvPSFuJiZbXSwoaT1OLmV4ZWMoZSkpP1t0LmNyZWF0ZUVsZW1lbnQoaVsxXSldOihpPXhlKFtlXSx0LG8pLG8mJm8ubGVuZ3RoJiZTKG8pLnJlbW92ZSgpLFMubWVyZ2UoW10saS5jaGlsZE5vZGVzKSkpO3ZhciByLGksb30sUy5mbi5sb2FkPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYT10aGlzLHM9ZS5pbmRleE9mKCIgIik7cmV0dXJuLTE8cyYmKHI9dnQoZS5zbGljZShzKSksZT1lLnNsaWNlKDAscykpLG0odCk/KG49dCx0PXZvaWQgMCk6dCYmIm9iamVjdCI9PXR5cGVvZiB0JiYoaT0iUE9TVCIpLDA8YS5sZW5ndGgmJlMuYWpheCh7dXJsOmUsdHlwZTppfHwiR0VUIixkYXRhVHlwZToiaHRtbCIsZGF0YTp0fSkuZG9uZShmdW5jdGlvbihlKXtvPWFyZ3VtZW50cyxhLmh0bWwocj9TKCI8ZGl2PiIpLmFwcGVuZChTLnBhcnNlSFRNTChlKSkuZmluZChyKTplKX0pLmFsd2F5cyhuJiZmdW5jdGlvbihlLHQpe2EuZWFjaChmdW5jdGlvbigpe24uYXBwbHkodGhpcyxvfHxbZS5yZXNwb25zZVRleHQsdCxlXSl9KX0pLHRoaXN9LFMuZXhwci5wc2V1ZG9zLmFuaW1hdGVkPWZ1bmN0aW9uKHQpe3JldHVybiBTLmdyZXAoUy50aW1lcnMsZnVuY3Rpb24oZSl7cmV0dXJuIHQ9PT1lLmVsZW19KS5sZW5ndGh9LFMub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsPVMuY3NzKGUsInBvc2l0aW9uIiksYz1TKGUpLGY9e307InN0YXRpYyI9PT1sJiYoZS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKSxzPWMub2Zmc2V0KCksbz1TLmNzcyhlLCJ0b3AiKSx1PVMuY3NzKGUsImxlZnQiKSwoImFic29sdXRlIj09PWx8fCJmaXhlZCI9PT1sKSYmLTE8KG8rdSkuaW5kZXhPZigiYXV0byIpPyhhPShyPWMucG9zaXRpb24oKSkudG9wLGk9ci5sZWZ0KTooYT1wYXJzZUZsb2F0KG8pfHwwLGk9cGFyc2VGbG9hdCh1KXx8MCksbSh0KSYmKHQ9dC5jYWxsKGUsbixTLmV4dGVuZCh7fSxzKSkpLG51bGwhPXQudG9wJiYoZi50b3A9dC50b3Atcy50b3ArYSksbnVsbCE9dC5sZWZ0JiYoZi5sZWZ0PXQubGVmdC1zLmxlZnQraSksInVzaW5nImluIHQ/dC51c2luZy5jYWxsKGUsZik6KCJudW1iZXIiPT10eXBlb2YgZi50b3AmJihmLnRvcCs9InB4IiksIm51bWJlciI9PXR5cGVvZiBmLmxlZnQmJihmLmxlZnQrPSJweCIpLGMuY3NzKGYpKX19LFMuZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24odCl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09dD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihlKXtTLm9mZnNldC5zZXRPZmZzZXQodGhpcyx0LGUpfSk7dmFyIGUsbixyPXRoaXNbMF07cmV0dXJuIHI/ci5nZXRDbGllbnRSZWN0cygpLmxlbmd0aD8oZT1yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG49ci5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LHt0b3A6ZS50b3Arbi5wYWdlWU9mZnNldCxsZWZ0OmUubGVmdCtuLnBhZ2VYT2Zmc2V0fSk6e3RvcDowLGxlZnQ6MH06dm9pZCAwfSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBlLHQsbixyPXRoaXNbMF0saT17dG9wOjAsbGVmdDowfTtpZigiZml4ZWQiPT09Uy5jc3MociwicG9zaXRpb24iKSl0PXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7ZWxzZXt0PXRoaXMub2Zmc2V0KCksbj1yLm93bmVyRG9jdW1lbnQsZT1yLm9mZnNldFBhcmVudHx8bi5kb2N1bWVudEVsZW1lbnQ7d2hpbGUoZSYmKGU9PT1uLmJvZHl8fGU9PT1uLmRvY3VtZW50RWxlbWVudCkmJiJzdGF0aWMiPT09Uy5jc3MoZSwicG9zaXRpb24iKSllPWUucGFyZW50Tm9kZTtlJiZlIT09ciYmMT09PWUubm9kZVR5cGUmJigoaT1TKGUpLm9mZnNldCgpKS50b3ArPVMuY3NzKGUsImJvcmRlclRvcFdpZHRoIiwhMCksaS5sZWZ0Kz1TLmNzcyhlLCJib3JkZXJMZWZ0V2lkdGgiLCEwKSl9cmV0dXJue3RvcDp0LnRvcC1pLnRvcC1TLmNzcyhyLCJtYXJnaW5Ub3AiLCEwKSxsZWZ0OnQubGVmdC1pLmxlZnQtUy5jc3MociwibWFyZ2luTGVmdCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXMub2Zmc2V0UGFyZW50O3doaWxlKGUmJiJzdGF0aWMiPT09Uy5jc3MoZSwicG9zaXRpb24iKSllPWUub2Zmc2V0UGFyZW50O3JldHVybiBlfHxyZX0pfX0pLFMuZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbih0LGkpe3ZhciBvPSJwYWdlWU9mZnNldCI9PT1pO1MuZm5bdF09ZnVuY3Rpb24oZSl7cmV0dXJuICQodGhpcyxmdW5jdGlvbihlLHQsbil7dmFyIHI7aWYoeChlKT9yPWU6OT09PWUubm9kZVR5cGUmJihyPWUuZGVmYXVsdFZpZXcpLHZvaWQgMD09PW4pcmV0dXJuIHI/cltpXTplW3RdO3I/ci5zY3JvbGxUbyhvP3IucGFnZVhPZmZzZXQ6bixvP246ci5wYWdlWU9mZnNldCk6ZVt0XT1ufSx0LGUsYXJndW1lbnRzLmxlbmd0aCl9fSksUy5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGUsbil7Uy5jc3NIb29rc1tuXT0kZSh5LnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oZSx0KXtpZih0KXJldHVybiB0PUJlKGUsbiksTWUudGVzdCh0KT9TKGUpLnBvc2l0aW9uKClbbl0rInB4Ijp0fSl9KSxTLmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihhLHMpe1MuZWFjaCh7cGFkZGluZzoiaW5uZXIiK2EsY29udGVudDpzLCIiOiJvdXRlciIrYX0sZnVuY3Rpb24ocixvKXtTLmZuW29dPWZ1bmN0aW9uKGUsdCl7dmFyIG49YXJndW1lbnRzLmxlbmd0aCYmKHJ8fCJib29sZWFuIiE9dHlwZW9mIGUpLGk9cnx8KCEwPT09ZXx8ITA9PT10PyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4gJCh0aGlzLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtyZXR1cm4geChlKT8wPT09by5pbmRleE9mKCJvdXRlciIpP2VbImlubmVyIithXTplLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsiY2xpZW50IithXTo5PT09ZS5ub2RlVHlwZT8ocj1lLmRvY3VtZW50RWxlbWVudCxNYXRoLm1heChlLmJvZHlbInNjcm9sbCIrYV0sclsic2Nyb2xsIithXSxlLmJvZHlbIm9mZnNldCIrYV0sclsib2Zmc2V0IithXSxyWyJjbGllbnQiK2FdKSk6dm9pZCAwPT09bj9TLmNzcyhlLHQsaSk6Uy5zdHlsZShlLHQsbixpKX0scyxuP2U6dm9pZCAwLG4pfX0pfSksUy5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oZSx0KXtTLmZuW3RdPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9uKHQsZSl9fSksUy5mbi5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLm9uKGUsbnVsbCx0LG4pfSx1bmJpbmQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5vZmYoZSxudWxsLHQpfSxkZWxlZ2F0ZTpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5vbih0LGUsbixyKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGUsIioqIik6dGhpcy5vZmYodCxlfHwiKioiLG4pfSxob3ZlcjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoZSkubW91c2VsZWF2ZSh0fHxlKX19KSxTLmVhY2goImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCByZXNpemUgc2Nyb2xsIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgY29udGV4dG1lbnUiLnNwbGl0KCIgIiksZnVuY3Rpb24oZSxuKXtTLmZuW25dPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIDA8YXJndW1lbnRzLmxlbmd0aD90aGlzLm9uKG4sbnVsbCxlLHQpOnRoaXMudHJpZ2dlcihuKX19KTt2YXIgR3Q9L15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nO1MucHJveHk9ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk7aWYoInN0cmluZyI9PXR5cGVvZiB0JiYobj1lW3RdLHQ9ZSxlPW4pLG0oZSkpcmV0dXJuIHI9cy5jYWxsKGFyZ3VtZW50cywyKSwoaT1mdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHR8fHRoaXMsci5jb25jYXQocy5jYWxsKGFyZ3VtZW50cykpKX0pLmd1aWQ9ZS5ndWlkPWUuZ3VpZHx8Uy5ndWlkKyssaX0sUy5ob2xkUmVhZHk9ZnVuY3Rpb24oZSl7ZT9TLnJlYWR5V2FpdCsrOlMucmVhZHkoITApfSxTLmlzQXJyYXk9QXJyYXkuaXNBcnJheSxTLnBhcnNlSlNPTj1KU09OLnBhcnNlLFMubm9kZU5hbWU9QSxTLmlzRnVuY3Rpb249bSxTLmlzV2luZG93PXgsUy5jYW1lbENhc2U9WCxTLnR5cGU9dyxTLm5vdz1EYXRlLm5vdyxTLmlzTnVtZXJpYz1mdW5jdGlvbihlKXt2YXIgdD1TLnR5cGUoZSk7cmV0dXJuKCJudW1iZXIiPT09dHx8InN0cmluZyI9PT10KSYmIWlzTmFOKGUtcGFyc2VGbG9hdChlKSl9LFMudHJpbT1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8iIjooZSsiIikucmVwbGFjZShHdCwiIil9LCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZSgianF1ZXJ5IixbXSxmdW5jdGlvbigpe3JldHVybiBTfSk7dmFyIFl0PUMualF1ZXJ5LFF0PUMuJDtyZXR1cm4gUy5ub0NvbmZsaWN0PWZ1bmN0aW9uKGUpe3JldHVybiBDLiQ9PT1TJiYoQy4kPVF0KSxlJiZDLmpRdWVyeT09PVMmJihDLmpRdWVyeT1ZdCksU30sInVuZGVmaW5lZCI9PXR5cGVvZiBlJiYoQy5qUXVlcnk9Qy4kPVMpLFN9KTsK"},{"meta":{"name":"purify.min.js","url":"https://cdn.staticfile.org/dompurify/2.0.10/purify.min.js","ts":1597170079716,"mimetype":"text/javascript"},"source":"LyohIEBsaWNlbnNlIERPTVB1cmlmeSB8IChjKSBDdXJlNTMgYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyB8IFJlbGVhc2VkIHVuZGVyIHRoZSBBcGFjaGUgbGljZW5zZSAyLjAgYW5kIE1vemlsbGEgUHVibGljIExpY2Vuc2UgMi4wIHwgZ2l0aHViLmNvbS9jdXJlNTMvRE9NUHVyaWZ5L2Jsb2IvMi4wLjgvTElDRU5TRSAqLwohZnVuY3Rpb24oZSx0KXsib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKToiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZSh0KTooZT1lfHxzZWxmKS5ET01QdXJpZnk9dCgpfSh0aGlzLChmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1PYmplY3QuaGFzT3duUHJvcGVydHksdD1PYmplY3Quc2V0UHJvdG90eXBlT2Ysbj1PYmplY3QuaXNGcm96ZW4scj1PYmplY3Qua2V5cyxvPU9iamVjdC5mcmVlemUsaT1PYmplY3Quc2VhbCxhPSJ1bmRlZmluZWQiIT10eXBlb2YgUmVmbGVjdCYmUmVmbGVjdCxsPWEuYXBwbHksYz1hLmNvbnN0cnVjdDtsfHwobD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGUuYXBwbHkodCxuKX0pLG98fChvPWZ1bmN0aW9uKGUpe3JldHVybiBlfSksaXx8KGk9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSxjfHwoYz1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoZSxbbnVsbF0uY29uY2F0KGZ1bmN0aW9uKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpe2Zvcih2YXIgdD0wLG49QXJyYXkoZS5sZW5ndGgpO3Q8ZS5sZW5ndGg7dCsrKW5bdF09ZVt0XTtyZXR1cm4gbn1yZXR1cm4gQXJyYXkuZnJvbShlKX0odCkpKSl9KTt2YXIgcz1TKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSx1PVMoQXJyYXkucHJvdG90eXBlLmluZGV4T2YpLGQ9UyhBcnJheS5wcm90b3R5cGUuam9pbiksZj1TKEFycmF5LnByb3RvdHlwZS5wb3ApLHA9UyhBcnJheS5wcm90b3R5cGUucHVzaCksbT1TKEFycmF5LnByb3RvdHlwZS5zbGljZSkseT1TKFN0cmluZy5wcm90b3R5cGUudG9Mb3dlckNhc2UpLGc9UyhTdHJpbmcucHJvdG90eXBlLm1hdGNoKSxoPVMoU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlKSx2PVMoU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mKSxiPVMoU3RyaW5nLnByb3RvdHlwZS50cmltKSxUPVMoUmVnRXhwLnByb3RvdHlwZS50ZXN0KSxBPWsoUmVnRXhwKSx4PWsoVHlwZUVycm9yKTtmdW5jdGlvbiBTKGUpe3JldHVybiBmdW5jdGlvbih0KXtmb3IodmFyIG49YXJndW1lbnRzLmxlbmd0aCxyPUFycmF5KG4+MT9uLTE6MCksbz0xO288bjtvKyspcltvLTFdPWFyZ3VtZW50c1tvXTtyZXR1cm4gbChlLHQscil9fWZ1bmN0aW9uIGsoZSl7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsbj1BcnJheSh0KSxyPTA7cjx0O3IrKyluW3JdPWFyZ3VtZW50c1tyXTtyZXR1cm4gYyhlLG4pfX1mdW5jdGlvbiBMKGUscil7dCYmdChlLG51bGwpO2Zvcih2YXIgbz1yLmxlbmd0aDtvLS07KXt2YXIgaT1yW29dO2lmKCJzdHJpbmciPT10eXBlb2YgaSl7dmFyIGE9eShpKTthIT09aSYmKG4ocil8fChyW29dPWEpLGk9YSl9ZVtpXT0hMH1yZXR1cm4gZX1mdW5jdGlvbiBFKHQpe3ZhciBuPXt9LHI9dm9pZCAwO2ZvcihyIGluIHQpbChlLHQsW3JdKSYmKG5bcl09dFtyXSk7cmV0dXJuIG59dmFyIE09byhbImEiLCJhYmJyIiwiYWNyb255bSIsImFkZHJlc3MiLCJhcmVhIiwiYXJ0aWNsZSIsImFzaWRlIiwiYXVkaW8iLCJiIiwiYmRpIiwiYmRvIiwiYmlnIiwiYmxpbmsiLCJibG9ja3F1b3RlIiwiYm9keSIsImJyIiwiYnV0dG9uIiwiY2FudmFzIiwiY2FwdGlvbiIsImNlbnRlciIsImNpdGUiLCJjb2RlIiwiY29sIiwiY29sZ3JvdXAiLCJjb250ZW50IiwiZGF0YSIsImRhdGFsaXN0IiwiZGQiLCJkZWNvcmF0b3IiLCJkZWwiLCJkZXRhaWxzIiwiZGZuIiwiZGlyIiwiZGl2IiwiZGwiLCJkdCIsImVsZW1lbnQiLCJlbSIsImZpZWxkc2V0IiwiZmlnY2FwdGlvbiIsImZpZ3VyZSIsImZvbnQiLCJmb290ZXIiLCJmb3JtIiwiaDEiLCJoMiIsImgzIiwiaDQiLCJoNSIsImg2IiwiaGVhZCIsImhlYWRlciIsImhncm91cCIsImhyIiwiaHRtbCIsImkiLCJpbWciLCJpbnB1dCIsImlucyIsImtiZCIsImxhYmVsIiwibGVnZW5kIiwibGkiLCJtYWluIiwibWFwIiwibWFyayIsIm1hcnF1ZWUiLCJtZW51IiwibWVudWl0ZW0iLCJtZXRlciIsIm5hdiIsIm5vYnIiLCJvbCIsIm9wdGdyb3VwIiwib3B0aW9uIiwib3V0cHV0IiwicCIsInBpY3R1cmUiLCJwcmUiLCJwcm9ncmVzcyIsInEiLCJycCIsInJ0IiwicnVieSIsInMiLCJzYW1wIiwic2VjdGlvbiIsInNlbGVjdCIsInNoYWRvdyIsInNtYWxsIiwic291cmNlIiwic3BhY2VyIiwic3BhbiIsInN0cmlrZSIsInN0cm9uZyIsInN0eWxlIiwic3ViIiwic3VtbWFyeSIsInN1cCIsInRhYmxlIiwidGJvZHkiLCJ0ZCIsInRlbXBsYXRlIiwidGV4dGFyZWEiLCJ0Zm9vdCIsInRoIiwidGhlYWQiLCJ0aW1lIiwidHIiLCJ0cmFjayIsInR0IiwidSIsInVsIiwidmFyIiwidmlkZW8iLCJ3YnIiXSksXz1vKFsic3ZnIiwiYSIsImFsdGdseXBoIiwiYWx0Z2x5cGhkZWYiLCJhbHRnbHlwaGl0ZW0iLCJhbmltYXRlY29sb3IiLCJhbmltYXRlbW90aW9uIiwiYW5pbWF0ZXRyYW5zZm9ybSIsImF1ZGlvIiwiY2FudmFzIiwiY2lyY2xlIiwiY2xpcHBhdGgiLCJkZWZzIiwiZGVzYyIsImVsbGlwc2UiLCJmaWx0ZXIiLCJmb250IiwiZyIsImdseXBoIiwiZ2x5cGhyZWYiLCJoa2VybiIsImltYWdlIiwibGluZSIsImxpbmVhcmdyYWRpZW50IiwibWFya2VyIiwibWFzayIsIm1ldGFkYXRhIiwibXBhdGgiLCJwYXRoIiwicGF0dGVybiIsInBvbHlnb24iLCJwb2x5bGluZSIsInJhZGlhbGdyYWRpZW50IiwicmVjdCIsInN0b3AiLCJzdHlsZSIsInN3aXRjaCIsInN5bWJvbCIsInRleHQiLCJ0ZXh0cGF0aCIsInRpdGxlIiwidHJlZiIsInRzcGFuIiwidmlkZW8iLCJ2aWV3Iiwidmtlcm4iXSksTj1vKFsiZmVCbGVuZCIsImZlQ29sb3JNYXRyaXgiLCJmZUNvbXBvbmVudFRyYW5zZmVyIiwiZmVDb21wb3NpdGUiLCJmZUNvbnZvbHZlTWF0cml4IiwiZmVEaWZmdXNlTGlnaHRpbmciLCJmZURpc3BsYWNlbWVudE1hcCIsImZlRGlzdGFudExpZ2h0IiwiZmVGbG9vZCIsImZlRnVuY0EiLCJmZUZ1bmNCIiwiZmVGdW5jRyIsImZlRnVuY1IiLCJmZUdhdXNzaWFuQmx1ciIsImZlTWVyZ2UiLCJmZU1lcmdlTm9kZSIsImZlTW9ycGhvbG9neSIsImZlT2Zmc2V0IiwiZmVQb2ludExpZ2h0IiwiZmVTcGVjdWxhckxpZ2h0aW5nIiwiZmVTcG90TGlnaHQiLCJmZVRpbGUiLCJmZVR1cmJ1bGVuY2UiXSksTz1vKFsibWF0aCIsIm1lbmNsb3NlIiwibWVycm9yIiwibWZlbmNlZCIsIm1mcmFjIiwibWdseXBoIiwibWkiLCJtbGFiZWxlZHRyIiwibW11bHRpc2NyaXB0cyIsIm1uIiwibW8iLCJtb3ZlciIsIm1wYWRkZWQiLCJtcGhhbnRvbSIsIm1yb290IiwibXJvdyIsIm1zIiwibXNwYWNlIiwibXNxcnQiLCJtc3R5bGUiLCJtc3ViIiwibXN1cCIsIm1zdWJzdXAiLCJtdGFibGUiLCJtdGQiLCJtdGV4dCIsIm10ciIsIm11bmRlciIsIm11bmRlcm92ZXIiXSksdz1vKFsiI3RleHQiXSksRD1vKFsiYWNjZXB0IiwiYWN0aW9uIiwiYWxpZ24iLCJhbHQiLCJhdXRvY2FwaXRhbGl6ZSIsImF1dG9jb21wbGV0ZSIsImF1dG9waWN0dXJlaW5waWN0dXJlIiwiYXV0b3BsYXkiLCJiYWNrZ3JvdW5kIiwiYmdjb2xvciIsImJvcmRlciIsImNhcHR1cmUiLCJjZWxscGFkZGluZyIsImNlbGxzcGFjaW5nIiwiY2hlY2tlZCIsImNpdGUiLCJjbGFzcyIsImNsZWFyIiwiY29sb3IiLCJjb2xzIiwiY29sc3BhbiIsImNvbnRyb2xzIiwiY29udHJvbHNsaXN0IiwiY29vcmRzIiwiY3Jvc3NvcmlnaW4iLCJkYXRldGltZSIsImRlY29kaW5nIiwiZGVmYXVsdCIsImRpciIsImRpc2FibGVkIiwiZGlzYWJsZXBpY3R1cmVpbnBpY3R1cmUiLCJkaXNhYmxlcmVtb3RlcGxheWJhY2siLCJkb3dubG9hZCIsImRyYWdnYWJsZSIsImVuY3R5cGUiLCJlbnRlcmtleWhpbnQiLCJmYWNlIiwiZm9yIiwiaGVhZGVycyIsImhlaWdodCIsImhpZGRlbiIsImhpZ2giLCJocmVmIiwiaHJlZmxhbmciLCJpZCIsImlucHV0bW9kZSIsImludGVncml0eSIsImlzbWFwIiwia2luZCIsImxhYmVsIiwibGFuZyIsImxpc3QiLCJsb2FkaW5nIiwibG9vcCIsImxvdyIsIm1heCIsIm1heGxlbmd0aCIsIm1lZGlhIiwibWV0aG9kIiwibWluIiwibWlubGVuZ3RoIiwibXVsdGlwbGUiLCJtdXRlZCIsIm5hbWUiLCJub3NoYWRlIiwibm92YWxpZGF0ZSIsIm5vd3JhcCIsIm9wZW4iLCJvcHRpbXVtIiwicGF0dGVybiIsInBsYWNlaG9sZGVyIiwicGxheXNpbmxpbmUiLCJwb3N0ZXIiLCJwcmVsb2FkIiwicHViZGF0ZSIsInJhZGlvZ3JvdXAiLCJyZWFkb25seSIsInJlbCIsInJlcXVpcmVkIiwicmV2IiwicmV2ZXJzZWQiLCJyb2xlIiwicm93cyIsInJvd3NwYW4iLCJzcGVsbGNoZWNrIiwic2NvcGUiLCJzZWxlY3RlZCIsInNoYXBlIiwic2l6ZSIsInNpemVzIiwic3BhbiIsInNyY2xhbmciLCJzdGFydCIsInNyYyIsInNyY3NldCIsInN0ZXAiLCJzdHlsZSIsInN1bW1hcnkiLCJ0YWJpbmRleCIsInRpdGxlIiwidHJhbnNsYXRlIiwidHlwZSIsInVzZW1hcCIsInZhbGlnbiIsInZhbHVlIiwid2lkdGgiLCJ4bWxucyJdKSxSPW8oWyJhY2NlbnQtaGVpZ2h0IiwiYWNjdW11bGF0ZSIsImFkZGl0aXZlIiwiYWxpZ25tZW50LWJhc2VsaW5lIiwiYXNjZW50IiwiYXR0cmlidXRlbmFtZSIsImF0dHJpYnV0ZXR5cGUiLCJhemltdXRoIiwiYmFzZWZyZXF1ZW5jeSIsImJhc2VsaW5lLXNoaWZ0IiwiYmVnaW4iLCJiaWFzIiwiYnkiLCJjbGFzcyIsImNsaXAiLCJjbGlwLXBhdGgiLCJjbGlwLXJ1bGUiLCJjb2xvciIsImNvbG9yLWludGVycG9sYXRpb24iLCJjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnMiLCJjb2xvci1wcm9maWxlIiwiY29sb3ItcmVuZGVyaW5nIiwiY3giLCJjeSIsImQiLCJkeCIsImR5IiwiZGlmZnVzZWNvbnN0YW50IiwiZGlyZWN0aW9uIiwiZGlzcGxheSIsImRpdmlzb3IiLCJkdXIiLCJlZGdlbW9kZSIsImVsZXZhdGlvbiIsImVuZCIsImZpbGwiLCJmaWxsLW9wYWNpdHkiLCJmaWxsLXJ1bGUiLCJmaWx0ZXIiLCJmaWx0ZXJ1bml0cyIsImZsb29kLWNvbG9yIiwiZmxvb2Qtb3BhY2l0eSIsImZvbnQtZmFtaWx5IiwiZm9udC1zaXplIiwiZm9udC1zaXplLWFkanVzdCIsImZvbnQtc3RyZXRjaCIsImZvbnQtc3R5bGUiLCJmb250LXZhcmlhbnQiLCJmb250LXdlaWdodCIsImZ4IiwiZnkiLCJnMSIsImcyIiwiZ2x5cGgtbmFtZSIsImdseXBocmVmIiwiZ3JhZGllbnR1bml0cyIsImdyYWRpZW50dHJhbnNmb3JtIiwiaGVpZ2h0IiwiaHJlZiIsImlkIiwiaW1hZ2UtcmVuZGVyaW5nIiwiaW4iLCJpbjIiLCJrIiwiazEiLCJrMiIsImszIiwiazQiLCJrZXJuaW5nIiwia2V5cG9pbnRzIiwia2V5c3BsaW5lcyIsImtleXRpbWVzIiwibGFuZyIsImxlbmd0aGFkanVzdCIsImxldHRlci1zcGFjaW5nIiwia2VybmVsbWF0cml4Iiwia2VybmVsdW5pdGxlbmd0aCIsImxpZ2h0aW5nLWNvbG9yIiwibG9jYWwiLCJtYXJrZXItZW5kIiwibWFya2VyLW1pZCIsIm1hcmtlci1zdGFydCIsIm1hcmtlcmhlaWdodCIsIm1hcmtlcnVuaXRzIiwibWFya2Vyd2lkdGgiLCJtYXNrY29udGVudHVuaXRzIiwibWFza3VuaXRzIiwibWF4IiwibWFzayIsIm1lZGlhIiwibWV0aG9kIiwibW9kZSIsIm1pbiIsIm5hbWUiLCJudW1vY3RhdmVzIiwib2Zmc2V0Iiwib3BlcmF0b3IiLCJvcGFjaXR5Iiwib3JkZXIiLCJvcmllbnQiLCJvcmllbnRhdGlvbiIsIm9yaWdpbiIsIm92ZXJmbG93IiwicGFpbnQtb3JkZXIiLCJwYXRoIiwicGF0aGxlbmd0aCIsInBhdHRlcm5jb250ZW50dW5pdHMiLCJwYXR0ZXJudHJhbnNmb3JtIiwicGF0dGVybnVuaXRzIiwicG9pbnRzIiwicHJlc2VydmVhbHBoYSIsInByZXNlcnZlYXNwZWN0cmF0aW8iLCJwcmltaXRpdmV1bml0cyIsInIiLCJyeCIsInJ5IiwicmFkaXVzIiwicmVmeCIsInJlZnkiLCJyZXBlYXRjb3VudCIsInJlcGVhdGR1ciIsInJlc3RhcnQiLCJyZXN1bHQiLCJyb3RhdGUiLCJzY2FsZSIsInNlZWQiLCJzaGFwZS1yZW5kZXJpbmciLCJzcGVjdWxhcmNvbnN0YW50Iiwic3BlY3VsYXJleHBvbmVudCIsInNwcmVhZG1ldGhvZCIsInN0YXJ0b2Zmc2V0Iiwic3RkZGV2aWF0aW9uIiwic3RpdGNodGlsZXMiLCJzdG9wLWNvbG9yIiwic3RvcC1vcGFjaXR5Iiwic3Ryb2tlLWRhc2hhcnJheSIsInN0cm9rZS1kYXNob2Zmc2V0Iiwic3Ryb2tlLWxpbmVjYXAiLCJzdHJva2UtbGluZWpvaW4iLCJzdHJva2UtbWl0ZXJsaW1pdCIsInN0cm9rZS1vcGFjaXR5Iiwic3Ryb2tlIiwic3Ryb2tlLXdpZHRoIiwic3R5bGUiLCJzdXJmYWNlc2NhbGUiLCJ0YWJpbmRleCIsInRhcmdldHgiLCJ0YXJnZXR5IiwidHJhbnNmb3JtIiwidGV4dC1hbmNob3IiLCJ0ZXh0LWRlY29yYXRpb24iLCJ0ZXh0LXJlbmRlcmluZyIsInRleHRsZW5ndGgiLCJ0eXBlIiwidTEiLCJ1MiIsInVuaWNvZGUiLCJ2YWx1ZXMiLCJ2aWV3Ym94IiwidmlzaWJpbGl0eSIsInZlcnNpb24iLCJ2ZXJ0LWFkdi15IiwidmVydC1vcmlnaW4teCIsInZlcnQtb3JpZ2luLXkiLCJ3aWR0aCIsIndvcmQtc3BhY2luZyIsIndyYXAiLCJ3cml0aW5nLW1vZGUiLCJ4Y2hhbm5lbHNlbGVjdG9yIiwieWNoYW5uZWxzZWxlY3RvciIsIngiLCJ4MSIsIngyIiwieG1sbnMiLCJ5IiwieTEiLCJ5MiIsInoiLCJ6b29tYW5kcGFuIl0pLEg9byhbImFjY2VudCIsImFjY2VudHVuZGVyIiwiYWxpZ24iLCJiZXZlbGxlZCIsImNsb3NlIiwiY29sdW1uc2FsaWduIiwiY29sdW1ubGluZXMiLCJjb2x1bW5zcGFuIiwiZGVub21hbGlnbiIsImRlcHRoIiwiZGlyIiwiZGlzcGxheSIsImRpc3BsYXlzdHlsZSIsImVuY29kaW5nIiwiZmVuY2UiLCJmcmFtZSIsImhlaWdodCIsImhyZWYiLCJpZCIsImxhcmdlb3AiLCJsZW5ndGgiLCJsaW5ldGhpY2tuZXNzIiwibHNwYWNlIiwibHF1b3RlIiwibWF0aGJhY2tncm91bmQiLCJtYXRoY29sb3IiLCJtYXRoc2l6ZSIsIm1hdGh2YXJpYW50IiwibWF4c2l6ZSIsIm1pbnNpemUiLCJtb3ZhYmxlbGltaXRzIiwibm90YXRpb24iLCJudW1hbGlnbiIsIm9wZW4iLCJyb3dhbGlnbiIsInJvd2xpbmVzIiwicm93c3BhY2luZyIsInJvd3NwYW4iLCJyc3BhY2UiLCJycXVvdGUiLCJzY3JpcHRsZXZlbCIsInNjcmlwdG1pbnNpemUiLCJzY3JpcHRzaXplbXVsdGlwbGllciIsInNlbGVjdGlvbiIsInNlcGFyYXRvciIsInNlcGFyYXRvcnMiLCJzdHJldGNoeSIsInN1YnNjcmlwdHNoaWZ0Iiwic3Vwc2NyaXB0c2hpZnQiLCJzeW1tZXRyaWMiLCJ2b2Zmc2V0Iiwid2lkdGgiLCJ4bWxucyJdKSxDPW8oWyJ4bGluazpocmVmIiwieG1sOmlkIiwieGxpbms6dGl0bGUiLCJ4bWw6c3BhY2UiLCJ4bWxuczp4bGluayJdKSxGPWkoL1x7XHtbXHNcU10qfFtcc1xTXSpcfVx9L2dtKSx6PWkoLzwlW1xzXFNdKnxbXHNcU10qJT4vZ20pLEk9aSgvXmRhdGEtW1wtXHcuXHUwMEI3LVx1RkZGRl0vKSxqPWkoL15hcmlhLVtcLVx3XSskLyksVT1pKC9eKD86KD86KD86ZnxodCl0cHM/fG1haWx0b3x0ZWx8Y2FsbHRvfGNpZHx4bXBwKTp8W15hLXpdfFthLXorLlwtXSsoPzpbXmEteisuXC06XXwkKSkvaSksUD1pKC9eKD86XHcrc2NyaXB0fGRhdGEpOi9pKSxXPWkoL1tcdTAwMDAtXHUwMDIwXHUwMEEwXHUxNjgwXHUxODBFXHUyMDAwLVx1MjAyOVx1MjA1Zlx1MzAwMF0vZyksQj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2YgZX07ZnVuY3Rpb24gRyhlKXtpZihBcnJheS5pc0FycmF5KGUpKXtmb3IodmFyIHQ9MCxuPUFycmF5KGUubGVuZ3RoKTt0PGUubGVuZ3RoO3QrKyluW3RdPWVbdF07cmV0dXJuIG59cmV0dXJuIEFycmF5LmZyb20oZSl9dmFyIHE9ZnVuY3Rpb24oKXtyZXR1cm4idW5kZWZpbmVkIj09dHlwZW9mIHdpbmRvdz9udWxsOndpbmRvd30sSz1mdW5jdGlvbihlLHQpe2lmKCJvYmplY3QiIT09KHZvaWQgMD09PWU/InVuZGVmaW5lZCI6QihlKSl8fCJmdW5jdGlvbiIhPXR5cGVvZiBlLmNyZWF0ZVBvbGljeSlyZXR1cm4gbnVsbDt2YXIgbj1udWxsO3QuY3VycmVudFNjcmlwdCYmdC5jdXJyZW50U2NyaXB0Lmhhc0F0dHJpYnV0ZSgiZGF0YS10dC1wb2xpY3ktc3VmZml4IikmJihuPXQuY3VycmVudFNjcmlwdC5nZXRBdHRyaWJ1dGUoImRhdGEtdHQtcG9saWN5LXN1ZmZpeCIpKTt2YXIgcj0iZG9tcHVyaWZ5Iisobj8iIyIrbjoiIik7dHJ5e3JldHVybiBlLmNyZWF0ZVBvbGljeShyLHtjcmVhdGVIVE1MOmZ1bmN0aW9uKGUpe3JldHVybiBlfX0pfWNhdGNoKGUpe3JldHVybiBjb25zb2xlLndhcm4oIlRydXN0ZWRUeXBlcyBwb2xpY3kgIityKyIgY291bGQgbm90IGJlIGNyZWF0ZWQuIiksbnVsbH19O3JldHVybiBmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnEoKSxuPWZ1bmN0aW9uKHQpe3JldHVybiBlKHQpfTtpZihuLnZlcnNpb249IjIuMC4xMCIsbi5yZW1vdmVkPVtdLCF0fHwhdC5kb2N1bWVudHx8OSE9PXQuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIG4uaXNTdXBwb3J0ZWQ9ITEsbjt2YXIgaT10LmRvY3VtZW50LGE9ITEsbD10LmRvY3VtZW50LGM9dC5Eb2N1bWVudEZyYWdtZW50LFM9dC5IVE1MVGVtcGxhdGVFbGVtZW50LGs9dC5Ob2RlLFY9dC5Ob2RlRmlsdGVyLFk9dC5OYW1lZE5vZGVNYXAsWD12b2lkIDA9PT1ZP3QuTmFtZWROb2RlTWFwfHx0Lk1vek5hbWVkQXR0ck1hcDpZLCQ9dC5UZXh0LEo9dC5Db21tZW50LFE9dC5ET01QYXJzZXIsWj10LnRydXN0ZWRUeXBlcztpZigiZnVuY3Rpb24iPT10eXBlb2YgUyl7dmFyIGVlPWwuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTtlZS5jb250ZW50JiZlZS5jb250ZW50Lm93bmVyRG9jdW1lbnQmJihsPWVlLmNvbnRlbnQub3duZXJEb2N1bWVudCl9dmFyIHRlPUsoWixpKSxuZT10ZT90ZS5jcmVhdGVIVE1MKCIiKToiIixyZT1sLG9lPXJlLmltcGxlbWVudGF0aW9uLGllPXJlLmNyZWF0ZU5vZGVJdGVyYXRvcixhZT1yZS5nZXRFbGVtZW50c0J5VGFnTmFtZSxsZT1yZS5jcmVhdGVEb2N1bWVudEZyYWdtZW50LGNlPWkuaW1wb3J0Tm9kZSxzZT17fTtuLmlzU3VwcG9ydGVkPW9lJiZ2b2lkIDAhPT1vZS5jcmVhdGVIVE1MRG9jdW1lbnQmJjkhPT1sLmRvY3VtZW50TW9kZTt2YXIgdWU9RixkZT16LGZlPUkscGU9aixtZT1QLHllPVcsZ2U9VSxoZT1udWxsLHZlPUwoe30sW10uY29uY2F0KEcoTSksRyhfKSxHKE4pLEcoTyksRyh3KSkpLGJlPW51bGwsVGU9TCh7fSxbXS5jb25jYXQoRyhEKSxHKFIpLEcoSCksRyhDKSkpLEFlPW51bGwseGU9bnVsbCxTZT0hMCxrZT0hMCxMZT0hMSxFZT0hMSxNZT0hMSxfZT0hMSxOZT0hMSxPZT0hMSx3ZT0hMSxEZT0hMSxSZT0hMSxIZT0hMSxDZT0hMCxGZT0hMCx6ZT0hMSxJZT17fSxqZT1MKHt9LFsiYW5ub3RhdGlvbi14bWwiLCJhdWRpbyIsImNvbGdyb3VwIiwiZGVzYyIsImZvcmVpZ25vYmplY3QiLCJoZWFkIiwiaWZyYW1lIiwibWF0aCIsIm1pIiwibW4iLCJtbyIsIm1zIiwibXRleHQiLCJub2VtYmVkIiwibm9mcmFtZXMiLCJwbGFpbnRleHQiLCJzY3JpcHQiLCJzdHlsZSIsInN2ZyIsInRlbXBsYXRlIiwidGhlYWQiLCJ0aXRsZSIsInZpZGVvIiwieG1wIl0pLFVlPUwoe30sWyJhdWRpbyIsInZpZGVvIiwiaW1nIiwic291cmNlIiwiaW1hZ2UiLCJ0cmFjayJdKSxQZT1udWxsLFdlPUwoe30sWyJhbHQiLCJjbGFzcyIsImZvciIsImlkIiwibGFiZWwiLCJuYW1lIiwicGF0dGVybiIsInBsYWNlaG9sZGVyIiwic3VtbWFyeSIsInRpdGxlIiwidmFsdWUiLCJzdHlsZSIsInhtbG5zIl0pLEJlPW51bGwsR2U9bC5jcmVhdGVFbGVtZW50KCJmb3JtIikscWU9ZnVuY3Rpb24oZSl7QmUmJkJlPT09ZXx8KGUmJiJvYmplY3QiPT09KHZvaWQgMD09PWU/InVuZGVmaW5lZCI6QihlKSl8fChlPXt9KSxoZT0iQUxMT1dFRF9UQUdTImluIGU/TCh7fSxlLkFMTE9XRURfVEFHUyk6dmUsYmU9IkFMTE9XRURfQVRUUiJpbiBlP0woe30sZS5BTExPV0VEX0FUVFIpOlRlLFBlPSJBRERfVVJJX1NBRkVfQVRUUiJpbiBlP0woRShXZSksZS5BRERfVVJJX1NBRkVfQVRUUik6V2UsQWU9IkZPUkJJRF9UQUdTImluIGU/TCh7fSxlLkZPUkJJRF9UQUdTKTp7fSx4ZT0iRk9SQklEX0FUVFIiaW4gZT9MKHt9LGUuRk9SQklEX0FUVFIpOnt9LEllPSJVU0VfUFJPRklMRVMiaW4gZSYmZS5VU0VfUFJPRklMRVMsU2U9ITEhPT1lLkFMTE9XX0FSSUFfQVRUUixrZT0hMSE9PWUuQUxMT1dfREFUQV9BVFRSLExlPWUuQUxMT1dfVU5LTk9XTl9QUk9UT0NPTFN8fCExLEVlPWUuU0FGRV9GT1JfSlFVRVJZfHwhMSxNZT1lLlNBRkVfRk9SX1RFTVBMQVRFU3x8ITEsX2U9ZS5XSE9MRV9ET0NVTUVOVHx8ITEsd2U9ZS5SRVRVUk5fRE9NfHwhMSxEZT1lLlJFVFVSTl9ET01fRlJBR01FTlR8fCExLFJlPWUuUkVUVVJOX0RPTV9JTVBPUlR8fCExLEhlPWUuUkVUVVJOX1RSVVNURURfVFlQRXx8ITEsT2U9ZS5GT1JDRV9CT0RZfHwhMSxDZT0hMSE9PWUuU0FOSVRJWkVfRE9NLEZlPSExIT09ZS5LRUVQX0NPTlRFTlQsemU9ZS5JTl9QTEFDRXx8ITEsZ2U9ZS5BTExPV0VEX1VSSV9SRUdFWFB8fGdlLE1lJiYoa2U9ITEpLERlJiYod2U9ITApLEllJiYoaGU9TCh7fSxbXS5jb25jYXQoRyh3KSkpLGJlPVtdLCEwPT09SWUuaHRtbCYmKEwoaGUsTSksTChiZSxEKSksITA9PT1JZS5zdmcmJihMKGhlLF8pLEwoYmUsUiksTChiZSxDKSksITA9PT1JZS5zdmdGaWx0ZXJzJiYoTChoZSxOKSxMKGJlLFIpLEwoYmUsQykpLCEwPT09SWUubWF0aE1sJiYoTChoZSxPKSxMKGJlLEgpLEwoYmUsQykpKSxlLkFERF9UQUdTJiYoaGU9PT12ZSYmKGhlPUUoaGUpKSxMKGhlLGUuQUREX1RBR1MpKSxlLkFERF9BVFRSJiYoYmU9PT1UZSYmKGJlPUUoYmUpKSxMKGJlLGUuQUREX0FUVFIpKSxlLkFERF9VUklfU0FGRV9BVFRSJiZMKFBlLGUuQUREX1VSSV9TQUZFX0FUVFIpLEZlJiYoaGVbIiN0ZXh0Il09ITApLF9lJiZMKGhlLFsiaHRtbCIsImhlYWQiLCJib2R5Il0pLGhlLnRhYmxlJiYoTChoZSxbInRib2R5Il0pLGRlbGV0ZSBBZS50Ym9keSksbyYmbyhlKSxCZT1lKX0sS2U9ZnVuY3Rpb24oZSl7cChuLnJlbW92ZWQse2VsZW1lbnQ6ZX0pO3RyeXtlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSl9Y2F0Y2godCl7ZS5vdXRlckhUTUw9bmV9fSxWZT1mdW5jdGlvbihlLHQpe3RyeXtwKG4ucmVtb3ZlZCx7YXR0cmlidXRlOnQuZ2V0QXR0cmlidXRlTm9kZShlKSxmcm9tOnR9KX1jYXRjaChlKXtwKG4ucmVtb3ZlZCx7YXR0cmlidXRlOm51bGwsZnJvbTp0fSl9dC5yZW1vdmVBdHRyaWJ1dGUoZSl9LFllPWZ1bmN0aW9uKGUpe3ZhciB0PXZvaWQgMCxuPXZvaWQgMDtpZihPZSllPSI8cmVtb3ZlPjwvcmVtb3ZlPiIrZTtlbHNle3ZhciByPWcoZSwvXltcc10rLyk7bj1yJiZyWzBdfXZhciBvPXRlP3RlLmNyZWF0ZUhUTUwoZSk6ZTt0cnl7dD0obmV3IFEpLnBhcnNlRnJvbVN0cmluZyhvLCJ0ZXh0L2h0bWwiKX1jYXRjaChlKXt9aWYoYSYmTChBZSxbInRpdGxlIl0pLCF0fHwhdC5kb2N1bWVudEVsZW1lbnQpe3ZhciBpPSh0PW9lLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikpLmJvZHk7aS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGkucGFyZW50Tm9kZS5maXJzdEVsZW1lbnRDaGlsZCksaS5vdXRlckhUTUw9b31yZXR1cm4gZSYmbiYmdC5ib2R5Lmluc2VydEJlZm9yZShsLmNyZWF0ZVRleHROb2RlKG4pLHQuYm9keS5jaGlsZE5vZGVzWzBdfHxudWxsKSxhZS5jYWxsKHQsX2U/Imh0bWwiOiJib2R5IilbMF19O24uaXNTdXBwb3J0ZWQmJmZ1bmN0aW9uKCl7dHJ5e3ZhciBlPVllKCI8eC8+PHRpdGxlPiZsdDsvdGl0bGUmZ3Q7Jmx0O2ltZyZndDsiKTtUKC88XC90aXRsZS8sZS5xdWVyeVNlbGVjdG9yKCJ0aXRsZSIpLmlubmVySFRNTCkmJihhPSEwKX1jYXRjaChlKXt9fSgpO3ZhciBYZT1mdW5jdGlvbihlKXtyZXR1cm4gaWUuY2FsbChlLm93bmVyRG9jdW1lbnR8fGUsZSxWLlNIT1dfRUxFTUVOVHxWLlNIT1dfQ09NTUVOVHxWLlNIT1dfVEVYVCwoZnVuY3Rpb24oKXtyZXR1cm4gVi5GSUxURVJfQUNDRVBUfSksITEpfSwkZT1mdW5jdGlvbihlKXtyZXR1cm4hKGUgaW5zdGFuY2VvZiAkfHxlIGluc3RhbmNlb2YgSikmJiEoInN0cmluZyI9PXR5cGVvZiBlLm5vZGVOYW1lJiYic3RyaW5nIj09dHlwZW9mIGUudGV4dENvbnRlbnQmJiJmdW5jdGlvbiI9PXR5cGVvZiBlLnJlbW92ZUNoaWxkJiZlLmF0dHJpYnV0ZXMgaW5zdGFuY2VvZiBYJiYiZnVuY3Rpb24iPT10eXBlb2YgZS5yZW1vdmVBdHRyaWJ1dGUmJiJmdW5jdGlvbiI9PXR5cGVvZiBlLnNldEF0dHJpYnV0ZSYmInN0cmluZyI9PXR5cGVvZiBlLm5hbWVzcGFjZVVSSSl9LEplPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT09KHZvaWQgMD09PWs/InVuZGVmaW5lZCI6QihrKSk/ZSBpbnN0YW5jZW9mIGs6ZSYmIm9iamVjdCI9PT0odm9pZCAwPT09ZT8idW5kZWZpbmVkIjpCKGUpKSYmIm51bWJlciI9PXR5cGVvZiBlLm5vZGVUeXBlJiYic3RyaW5nIj09dHlwZW9mIGUubm9kZU5hbWV9LFFlPWZ1bmN0aW9uKGUsdCxyKXtzZVtlXSYmcyhzZVtlXSwoZnVuY3Rpb24oZSl7ZS5jYWxsKG4sdCxyLEJlKX0pKX0sWmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dm9pZCAwO2lmKFFlKCJiZWZvcmVTYW5pdGl6ZUVsZW1lbnRzIixlLG51bGwpLCRlKGUpKXJldHVybiBLZShlKSwhMDt2YXIgcj15KGUubm9kZU5hbWUpO2lmKFFlKCJ1cG9uU2FuaXRpemVFbGVtZW50IixlLHt0YWdOYW1lOnIsYWxsb3dlZFRhZ3M6aGV9KSwoInN2ZyI9PT1yfHwibWF0aCI9PT1yKSYmMCE9PWUucXVlcnlTZWxlY3RvckFsbCgicCwgYnIiKS5sZW5ndGgpcmV0dXJuIEtlKGUpLCEwO2lmKCFoZVtyXXx8QWVbcl0pe2lmKEZlJiYhamVbcl0mJiJmdW5jdGlvbiI9PXR5cGVvZiBlLmluc2VydEFkamFjZW50SFRNTCl0cnl7dmFyIG89ZS5pbm5lckhUTUw7ZS5pbnNlcnRBZGphY2VudEhUTUwoIkFmdGVyRW5kIix0ZT90ZS5jcmVhdGVIVE1MKG8pOm8pfWNhdGNoKGUpe31yZXR1cm4gS2UoZSksITB9cmV0dXJuIm5vc2NyaXB0Ij09PXImJlQoLzxcL25vc2NyaXB0L2ksZS5pbm5lckhUTUwpfHwibm9lbWJlZCI9PT1yJiZUKC88XC9ub2VtYmVkL2ksZS5pbm5lckhUTUwpPyhLZShlKSwhMCk6KCFFZXx8ZS5maXJzdEVsZW1lbnRDaGlsZHx8ZS5jb250ZW50JiZlLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGR8fCFUKC88L2csZS50ZXh0Q29udGVudCl8fChwKG4ucmVtb3ZlZCx7ZWxlbWVudDplLmNsb25lTm9kZSgpfSksZS5pbm5lckhUTUw/ZS5pbm5lckhUTUw9aChlLmlubmVySFRNTCwvPC9nLCImbHQ7Iik6ZS5pbm5lckhUTUw9aChlLnRleHRDb250ZW50LC88L2csIiZsdDsiKSksTWUmJjM9PT1lLm5vZGVUeXBlJiYodD1lLnRleHRDb250ZW50LHQ9aCh0LHVlLCIgIiksdD1oKHQsZGUsIiAiKSxlLnRleHRDb250ZW50IT09dCYmKHAobi5yZW1vdmVkLHtlbGVtZW50OmUuY2xvbmVOb2RlKCl9KSxlLnRleHRDb250ZW50PXQpKSxRZSgiYWZ0ZXJTYW5pdGl6ZUVsZW1lbnRzIixlLG51bGwpLCExKX0sZXQ9ZnVuY3Rpb24oZSx0LG4pe2lmKENlJiYoImlkIj09PXR8fCJuYW1lIj09PXQpJiYobiBpbiBsfHxuIGluIEdlKSlyZXR1cm4hMTtpZihrZSYmVChmZSx0KSk7ZWxzZSBpZihTZSYmVChwZSx0KSk7ZWxzZXtpZighYmVbdF18fHhlW3RdKXJldHVybiExO2lmKFBlW3RdKTtlbHNlIGlmKFQoZ2UsaChuLHllLCIiKSkpO2Vsc2UgaWYoInNyYyIhPT10JiYieGxpbms6aHJlZiIhPT10JiYiaHJlZiIhPT10fHwic2NyaXB0Ij09PWV8fDAhPT12KG4sImRhdGE6Iil8fCFVZVtlXSl7aWYoTGUmJiFUKG1lLGgobix5ZSwiIikpKTtlbHNlIGlmKG4pcmV0dXJuITF9ZWxzZTt9cmV0dXJuITB9LHR0PWZ1bmN0aW9uKGUpe3ZhciB0PXZvaWQgMCxvPXZvaWQgMCxpPXZvaWQgMCxhPXZvaWQgMCxsPXZvaWQgMDtRZSgiYmVmb3JlU2FuaXRpemVBdHRyaWJ1dGVzIixlLG51bGwpO3ZhciBjPWUuYXR0cmlidXRlcztpZihjKXt2YXIgcz17YXR0ck5hbWU6IiIsYXR0clZhbHVlOiIiLGtlZXBBdHRyOiEwLGFsbG93ZWRBdHRyaWJ1dGVzOmJlfTtmb3IobD1jLmxlbmd0aDtsLS07KXt2YXIgcD10PWNbbF0sZz1wLm5hbWUsdj1wLm5hbWVzcGFjZVVSSTtpZihvPWIodC52YWx1ZSksaT15KGcpLHMuYXR0ck5hbWU9aSxzLmF0dHJWYWx1ZT1vLHMua2VlcEF0dHI9ITAscy5mb3JjZUtlZXBBdHRyPXZvaWQgMCxRZSgidXBvblNhbml0aXplQXR0cmlidXRlIixlLHMpLG89cy5hdHRyVmFsdWUsIXMuZm9yY2VLZWVwQXR0cil7aWYoIm5hbWUiPT09aSYmIklNRyI9PT1lLm5vZGVOYW1lJiZjLmlkKWE9Yy5pZCxjPW0oYyxbXSksVmUoImlkIixlKSxWZShnLGUpLHUoYyxhKT5sJiZlLnNldEF0dHJpYnV0ZSgiaWQiLGEudmFsdWUpO2Vsc2V7aWYoIklOUFVUIj09PWUubm9kZU5hbWUmJiJ0eXBlIj09PWkmJiJmaWxlIj09PW8mJnMua2VlcEF0dHImJihiZVtpXXx8IXhlW2ldKSljb250aW51ZTsiaWQiPT09ZyYmZS5zZXRBdHRyaWJ1dGUoZywiIiksVmUoZyxlKX1pZihzLmtlZXBBdHRyKWlmKEVlJiZUKC9cLz4vaSxvKSlWZShnLGUpO2Vsc2UgaWYoVCgvc3ZnfG1hdGgvaSxlLm5hbWVzcGFjZVVSSSkmJlQoQSgiPC8oIitkKHIoamUpLCJ8IikrIikiLCJpIiksbykpVmUoZyxlKTtlbHNle01lJiYobz1oKG8sdWUsIiAiKSxvPWgobyxkZSwiICIpKTt2YXIgeD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYoZXQoeCxpLG8pKXRyeXt2P2Uuc2V0QXR0cmlidXRlTlModixnLG8pOmUuc2V0QXR0cmlidXRlKGcsbyksZihuLnJlbW92ZWQpfWNhdGNoKGUpe319fX1RZSgiYWZ0ZXJTYW5pdGl6ZUF0dHJpYnV0ZXMiLGUsbnVsbCl9fSxudD1mdW5jdGlvbiBlKHQpe3ZhciBuPXZvaWQgMCxyPVhlKHQpO2ZvcihRZSgiYmVmb3JlU2FuaXRpemVTaGFkb3dET00iLHQsbnVsbCk7bj1yLm5leHROb2RlKCk7KVFlKCJ1cG9uU2FuaXRpemVTaGFkb3dOb2RlIixuLG51bGwpLFplKG4pfHwobi5jb250ZW50IGluc3RhbmNlb2YgYyYmZShuLmNvbnRlbnQpLHR0KG4pKTtRZSgiYWZ0ZXJTYW5pdGl6ZVNoYWRvd0RPTSIsdCxudWxsKX07cmV0dXJuIG4uc2FuaXRpemU9ZnVuY3Rpb24oZSxyKXt2YXIgbz12b2lkIDAsYT12b2lkIDAsbD12b2lkIDAscz12b2lkIDAsdT12b2lkIDA7aWYoZXx8KGU9Ilx4M2MhLS1ceDNlIiksInN0cmluZyIhPXR5cGVvZiBlJiYhSmUoZSkpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlLnRvU3RyaW5nKXRocm93IHgoInRvU3RyaW5nIGlzIG5vdCBhIGZ1bmN0aW9uIik7aWYoInN0cmluZyIhPXR5cGVvZihlPWUudG9TdHJpbmcoKSkpdGhyb3cgeCgiZGlydHkgaXMgbm90IGEgc3RyaW5nLCBhYm9ydGluZyIpfWlmKCFuLmlzU3VwcG9ydGVkKXtpZigib2JqZWN0Ij09PUIodC50b1N0YXRpY0hUTUwpfHwiZnVuY3Rpb24iPT10eXBlb2YgdC50b1N0YXRpY0hUTUwpe2lmKCJzdHJpbmciPT10eXBlb2YgZSlyZXR1cm4gdC50b1N0YXRpY0hUTUwoZSk7aWYoSmUoZSkpcmV0dXJuIHQudG9TdGF0aWNIVE1MKGUub3V0ZXJIVE1MKX1yZXR1cm4gZX1pZihOZXx8cWUociksbi5yZW1vdmVkPVtdLCJzdHJpbmciPT10eXBlb2YgZSYmKHplPSExKSx6ZSk7ZWxzZSBpZihlIGluc3RhbmNlb2YgaykxPT09KGE9KG89WWUoIlx4M2MhLS1ceDNlIikpLm93bmVyRG9jdW1lbnQuaW1wb3J0Tm9kZShlLCEwKSkubm9kZVR5cGUmJiJCT0RZIj09PWEubm9kZU5hbWV8fCJIVE1MIj09PWEubm9kZU5hbWU/bz1hOm8uYXBwZW5kQ2hpbGQoYSk7ZWxzZXtpZighd2UmJiFNZSYmIV9lJiZIZSYmLTE9PT1lLmluZGV4T2YoIjwiKSlyZXR1cm4gdGU/dGUuY3JlYXRlSFRNTChlKTplO2lmKCEobz1ZZShlKSkpcmV0dXJuIHdlP251bGw6bmV9byYmT2UmJktlKG8uZmlyc3RDaGlsZCk7Zm9yKHZhciBkPVhlKHplP2U6byk7bD1kLm5leHROb2RlKCk7KTM9PT1sLm5vZGVUeXBlJiZsPT09c3x8WmUobCl8fChsLmNvbnRlbnQgaW5zdGFuY2VvZiBjJiZudChsLmNvbnRlbnQpLHR0KGwpLHM9bCk7aWYocz1udWxsLHplKXJldHVybiBlO2lmKHdlKXtpZihEZSlmb3IodT1sZS5jYWxsKG8ub3duZXJEb2N1bWVudCk7by5maXJzdENoaWxkOyl1LmFwcGVuZENoaWxkKG8uZmlyc3RDaGlsZCk7ZWxzZSB1PW87cmV0dXJuIFJlJiYodT1jZS5jYWxsKGksdSwhMCkpLHV9dmFyIGY9X2U/by5vdXRlckhUTUw6by5pbm5lckhUTUw7cmV0dXJuIE1lJiYoZj1oKGYsdWUsIiAiKSxmPWgoZixkZSwiICIpKSx0ZSYmSGU/dGUuY3JlYXRlSFRNTChmKTpmfSxuLnNldENvbmZpZz1mdW5jdGlvbihlKXtxZShlKSxOZT0hMH0sbi5jbGVhckNvbmZpZz1mdW5jdGlvbigpe0JlPW51bGwsTmU9ITF9LG4uaXNWYWxpZEF0dHJpYnV0ZT1mdW5jdGlvbihlLHQsbil7QmV8fHFlKHt9KTt2YXIgcj15KGUpLG89eSh0KTtyZXR1cm4gZXQocixvLG4pfSxuLmFkZEhvb2s9ZnVuY3Rpb24oZSx0KXsiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHNlW2VdPXNlW2VdfHxbXSxwKHNlW2VdLHQpKX0sbi5yZW1vdmVIb29rPWZ1bmN0aW9uKGUpe3NlW2VdJiZmKHNlW2VdKX0sbi5yZW1vdmVIb29rcz1mdW5jdGlvbihlKXtzZVtlXSYmKHNlW2VdPVtdKX0sbi5yZW1vdmVBbGxIb29rcz1mdW5jdGlvbigpe3NlPXt9fSxufSgpfSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1wdXJpZnkubWluLmpzLm1hcAo="},{"meta":{"name":"snap.svg-min.js","url":"https://cdn.staticfile.org/snap.svg/0.5.1/snap.svg-min.js","ts":1597170079819,"mimetype":"text/javascript"},"source":"Ly8gU25hcC5zdmcgMC41LjAKLy8KLy8gQ29weXJpZ2h0IChjKSAyMDEzIOKAkyAyMDE3IEFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkLiBBbGwgcmlnaHRzIHJlc2VydmVkLgovLwovLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgovLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKLy8KLy8gaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCi8vCi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCi8vCi8vIGJ1aWxkOiAyMDE3LTAyLTA2CgohZnVuY3Rpb24oYSl7dmFyIGIsYyxkPSIwLjUuMCIsZT0iaGFzT3duUHJvcGVydHkiLGY9L1tcLlwvXS8sZz0vXHMqLFxzKi8saD0iKiIsaT1mdW5jdGlvbihhLGIpe3JldHVybiBhLWJ9LGo9e246e319LGs9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXRoaXMubGVuZ3RoO2I+YTthKyspaWYoInVuZGVmaW5lZCIhPXR5cGVvZiB0aGlzW2FdKXJldHVybiB0aGlzW2FdfSxsPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMubGVuZ3RoOy0tYTspaWYoInVuZGVmaW5lZCIhPXR5cGVvZiB0aGlzW2FdKXJldHVybiB0aGlzW2FdfSxtPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsbj1TdHJpbmcsbz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEFycmF5fHwiW29iamVjdCBBcnJheV0iPT1tLmNhbGwoYSl9O2V2ZT1mdW5jdGlvbihhLGQpe3ZhciBlLGY9YyxnPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKSxoPWV2ZS5saXN0ZW5lcnMoYSksaj0wLG09W10sbj17fSxvPVtdLHA9YjtvLmZpcnN0RGVmaW5lZD1rLG8ubGFzdERlZmluZWQ9bCxiPWEsYz0wO2Zvcih2YXIgcT0wLHI9aC5sZW5ndGg7cj5xO3ErKykiekluZGV4ImluIGhbcV0mJihtLnB1c2goaFtxXS56SW5kZXgpLGhbcV0uekluZGV4PDAmJihuW2hbcV0uekluZGV4XT1oW3FdKSk7Zm9yKG0uc29ydChpKTttW2pdPDA7KWlmKGU9blttW2orK11dLG8ucHVzaChlLmFwcGx5KGQsZykpLGMpcmV0dXJuIGM9ZixvO2ZvcihxPTA7cj5xO3ErKylpZihlPWhbcV0sInpJbmRleCJpbiBlKWlmKGUuekluZGV4PT1tW2pdKXtpZihvLnB1c2goZS5hcHBseShkLGcpKSxjKWJyZWFrO2RvIGlmKGorKyxlPW5bbVtqXV0sZSYmby5wdXNoKGUuYXBwbHkoZCxnKSksYylicmVhazt3aGlsZShlKX1lbHNlIG5bZS56SW5kZXhdPWU7ZWxzZSBpZihvLnB1c2goZS5hcHBseShkLGcpKSxjKWJyZWFrO3JldHVybiBjPWYsYj1wLG99LGV2ZS5fZXZlbnRzPWosZXZlLmxpc3RlbmVycz1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxnLGksayxsLG09byhhKT9hOmEuc3BsaXQoZiksbj1qLHA9W25dLHE9W107Zm9yKGU9MCxnPW0ubGVuZ3RoO2c+ZTtlKyspe2ZvcihsPVtdLGk9MCxrPXAubGVuZ3RoO2s+aTtpKyspZm9yKG49cFtpXS5uLGM9W25bbVtlXV0sbltoXV0sZD0yO2QtLTspYj1jW2RdLGImJihsLnB1c2goYikscT1xLmNvbmNhdChiLmZ8fFtdKSk7cD1sfXJldHVybiBxfSxldmUuc2VwYXJhdG9yPWZ1bmN0aW9uKGEpe2E/KGE9bihhKS5yZXBsYWNlKC8oPz1bXC5cXlxdXFtcLV0pL2csIlxcIiksYT0iWyIrYSsiXSIsZj1uZXcgUmVnRXhwKGEpKTpmPS9bXC5cL10vfSxldmUub249ZnVuY3Rpb24oYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYilyZXR1cm4gZnVuY3Rpb24oKXt9O2Zvcih2YXIgYz1vKGEpP28oYVswXSk/YTpbYV06bihhKS5zcGxpdChnKSxkPTAsZT1jLmxlbmd0aDtlPmQ7ZCsrKSFmdW5jdGlvbihhKXtmb3IodmFyIGMsZD1vKGEpP2E6bihhKS5zcGxpdChmKSxlPWosZz0wLGg9ZC5sZW5ndGg7aD5nO2crKyllPWUubixlPWUuaGFzT3duUHJvcGVydHkoZFtnXSkmJmVbZFtnXV18fChlW2RbZ11dPXtuOnt9fSk7Zm9yKGUuZj1lLmZ8fFtdLGc9MCxoPWUuZi5sZW5ndGg7aD5nO2crKylpZihlLmZbZ109PWIpe2M9ITA7YnJlYWt9IWMmJmUuZi5wdXNoKGIpfShjW2RdKTtyZXR1cm4gZnVuY3Rpb24oYSl7K2E9PSthJiYoYi56SW5kZXg9K2EpfX0sZXZlLmY9ZnVuY3Rpb24oYSl7dmFyIGI9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7ZXZlLmFwcGx5KG51bGwsW2EsbnVsbF0uY29uY2F0KGIpLmNvbmNhdChbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSkpfX0sZXZlLnN0b3A9ZnVuY3Rpb24oKXtjPTF9LGV2ZS5udD1mdW5jdGlvbihhKXt2YXIgYz1vKGIpP2Iuam9pbigiLiIpOmI7cmV0dXJuIGE/bmV3IFJlZ0V4cCgiKD86XFwufFxcL3xeKSIrYSsiKD86XFwufFxcL3wkKSIpLnRlc3QoYyk6Y30sZXZlLm50cz1mdW5jdGlvbigpe3JldHVybiBvKGIpP2I6Yi5zcGxpdChmKX0sZXZlLm9mZj1ldmUudW5iaW5kPWZ1bmN0aW9uKGEsYil7aWYoIWEpcmV0dXJuIHZvaWQoZXZlLl9ldmVudHM9aj17bjp7fX0pO3ZhciBjPW8oYSk/byhhWzBdKT9hOlthXTpuKGEpLnNwbGl0KGcpO2lmKGMubGVuZ3RoPjEpZm9yKHZhciBkPTAsaT1jLmxlbmd0aDtpPmQ7ZCsrKWV2ZS5vZmYoY1tkXSxiKTtlbHNle2M9byhhKT9hOm4oYSkuc3BsaXQoZik7dmFyIGssbCxtLGQsaSxwLHEscj1bal0scz1bXTtmb3IoZD0wLGk9Yy5sZW5ndGg7aT5kO2QrKylmb3IocD0wO3A8ci5sZW5ndGg7cCs9bS5sZW5ndGgtMil7aWYobT1bcCwxXSxrPXJbcF0ubixjW2RdIT1oKWtbY1tkXV0mJihtLnB1c2goa1tjW2RdXSkscy51bnNoaWZ0KHtuOmssbmFtZTpjW2RdfSkpO2Vsc2UgZm9yKGwgaW4gaylrW2VdKGwpJiYobS5wdXNoKGtbbF0pLHMudW5zaGlmdCh7bjprLG5hbWU6bH0pKTtyLnNwbGljZS5hcHBseShyLG0pfWZvcihkPTAsaT1yLmxlbmd0aDtpPmQ7ZCsrKWZvcihrPXJbZF07ay5uOyl7aWYoYil7aWYoay5mKXtmb3IocD0wLHE9ay5mLmxlbmd0aDtxPnA7cCsrKWlmKGsuZltwXT09Yil7ay5mLnNwbGljZShwLDEpO2JyZWFrfSFrLmYubGVuZ3RoJiZkZWxldGUgay5mfWZvcihsIGluIGsubilpZihrLm5bZV0obCkmJmsubltsXS5mKXt2YXIgdD1rLm5bbF0uZjtmb3IocD0wLHE9dC5sZW5ndGg7cT5wO3ArKylpZih0W3BdPT1iKXt0LnNwbGljZShwLDEpO2JyZWFrfSF0Lmxlbmd0aCYmZGVsZXRlIGsubltsXS5mfX1lbHNle2RlbGV0ZSBrLmY7Zm9yKGwgaW4gay5uKWsubltlXShsKSYmay5uW2xdLmYmJmRlbGV0ZSBrLm5bbF0uZn1rPWsubn1hOmZvcihkPTAsaT1zLmxlbmd0aDtpPmQ7ZCsrKXtrPXNbZF07Zm9yKGwgaW4gay5uW2submFtZV0uZiljb250aW51ZSBhO2ZvcihsIGluIGsubltrLm5hbWVdLm4pY29udGludWUgYTtkZWxldGUgay5uW2submFtZV19fX0sZXZlLm9uY2U9ZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbigpe3JldHVybiBldmUub2ZmKGEsYyksYi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3JldHVybiBldmUub24oYSxjKX0sZXZlLnZlcnNpb249ZCxldmUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iWW91IGFyZSBydW5uaW5nIEV2ZSAiK2R9LCJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1ldmU6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoImV2ZSIsW10sZnVuY3Rpb24oKXtyZXR1cm4gZXZlfSk6YS5ldmU9ZXZlfSh0aGlzKSxmdW5jdGlvbihhLGIpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFsiZXZlIl0sZnVuY3Rpb24oYyl7cmV0dXJuIGIoYSxjKX0pO2Vsc2UgaWYoInVuZGVmaW5lZCIhPXR5cGVvZiBleHBvcnRzKXt2YXIgYz1yZXF1aXJlKCJldmUiKTttb2R1bGUuZXhwb3J0cz1iKGEsYyl9ZWxzZSBiKGEsYS5ldmUpfSh3aW5kb3d8fHRoaXMsZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbihiKXt2YXIgYyxkPXt9LGU9YS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGEud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxhLm1velJlcXVlc3RBbmltYXRpb25GcmFtZXx8YS5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxhLm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihhKXtyZXR1cm4gc2V0VGltZW91dChhLDE2LChuZXcgRGF0ZSkuZ2V0VGltZSgpKSwhMH0sZj1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEFycmF5fHwiW29iamVjdCBBcnJheV0iPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSl9LGc9MCxoPSJNIisoK25ldyBEYXRlKS50b1N0cmluZygzNiksaT1mdW5jdGlvbigpe3JldHVybiBoKyhnKyspLnRvU3RyaW5nKDM2KX0saj1EYXRlLm5vd3x8ZnVuY3Rpb24oKXtyZXR1cm4rbmV3IERhdGV9LGs9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihudWxsPT1hKXJldHVybiBiLnM7dmFyIGM9Yi5zLWE7Yi5iKz1iLmR1cipjLGIuQis9Yi5kdXIqYyxiLnM9YX0sbD1mdW5jdGlvbihhKXt2YXIgYj10aGlzO3JldHVybiBudWxsPT1hP2Iuc3BkOnZvaWQoYi5zcGQ9YSl9LG09ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztyZXR1cm4gbnVsbD09YT9iLmR1cjooYi5zPWIucyphL2IuZHVyLHZvaWQoYi5kdXI9YSkpfSxuPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztkZWxldGUgZFthLmlkXSxhLnVwZGF0ZSgpLGIoIm1pbmEuc3RvcC4iK2EuaWQsYSl9LG89ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EucGRpZnx8KGRlbGV0ZSBkW2EuaWRdLGEudXBkYXRlKCksYS5wZGlmPWEuZ2V0KCktYS5iKX0scD1mdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5wZGlmJiYoYS5iPWEuZ2V0KCktYS5wZGlmLGRlbGV0ZSBhLnBkaWYsZFthLmlkXT1hLHIoKSl9LHE9ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXM7aWYoZihiLnN0YXJ0KSl7YT1bXTtmb3IodmFyIGM9MCxkPWIuc3RhcnQubGVuZ3RoO2Q+YztjKyspYVtjXT0rYi5zdGFydFtjXSsoYi5lbmRbY10tYi5zdGFydFtjXSkqYi5lYXNpbmcoYi5zKX1lbHNlIGE9K2Iuc3RhcnQrKGIuZW5kLWIuc3RhcnQpKmIuZWFzaW5nKGIucyk7Yi5zZXQoYSl9LHI9ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuIHZvaWQoY3x8KGM9ZShyKSkpO3ZhciBmPTA7Zm9yKHZhciBnIGluIGQpaWYoZC5oYXNPd25Qcm9wZXJ0eShnKSl7dmFyIGg9ZFtnXSxpPWguZ2V0KCk7ZisrLGgucz0oaS1oLmIpLyhoLmR1ci9oLnNwZCksaC5zPj0xJiYoZGVsZXRlIGRbZ10saC5zPTEsZi0tLGZ1bmN0aW9uKGEpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtiKCJtaW5hLmZpbmlzaC4iK2EuaWQsYSl9KX0oaCkpLGgudXBkYXRlKCl9Yz1mP2Uocik6ITF9LHM9ZnVuY3Rpb24oYSxiLGMsZSxmLGcsaCl7dmFyIGo9e2lkOmkoKSxzdGFydDphLGVuZDpiLGI6YyxzOjAsZHVyOmUtYyxzcGQ6MSxnZXQ6ZixzZXQ6ZyxlYXNpbmc6aHx8cy5saW5lYXIsc3RhdHVzOmssc3BlZWQ6bCxkdXJhdGlvbjptLHN0b3A6bixwYXVzZTpvLHJlc3VtZTpwLHVwZGF0ZTpxfTtkW2ouaWRdPWo7dmFyIHQsdT0wO2Zvcih0IGluIGQpaWYoZC5oYXNPd25Qcm9wZXJ0eSh0KSYmKHUrKywyPT11KSlicmVhaztyZXR1cm4gMT09dSYmcigpLGp9O3JldHVybiBzLnRpbWU9aixzLmdldEJ5SWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGRbYV18fG51bGx9LHMubGluZWFyPWZ1bmN0aW9uKGEpe3JldHVybiBhfSxzLmVhc2VvdXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGgucG93KGEsMS43KX0scy5lYXNlaW49ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGgucG93KGEsLjQ4KX0scy5lYXNlaW5vdXQ9ZnVuY3Rpb24oYSl7aWYoMT09YSlyZXR1cm4gMTtpZigwPT1hKXJldHVybiAwO3ZhciBiPS40OC1hLzEuMDQsYz1NYXRoLnNxcnQoLjE3MzQrYipiKSxkPWMtYixlPU1hdGgucG93KE1hdGguYWJzKGQpLDEvMykqKDA+ZD8tMToxKSxmPS1jLWIsZz1NYXRoLnBvdyhNYXRoLmFicyhmKSwxLzMpKigwPmY/LTE6MSksaD1lK2crLjU7cmV0dXJuIDMqKDEtaCkqaCpoK2gqaCpofSxzLmJhY2tpbj1mdW5jdGlvbihhKXtpZigxPT1hKXJldHVybiAxO3ZhciBiPTEuNzAxNTg7cmV0dXJuIGEqYSooKGIrMSkqYS1iKX0scy5iYWNrb3V0PWZ1bmN0aW9uKGEpe2lmKDA9PWEpcmV0dXJuIDA7YS09MTt2YXIgYj0xLjcwMTU4O3JldHVybiBhKmEqKChiKzEpKmErYikrMX0scy5lbGFzdGljPWZ1bmN0aW9uKGEpe3JldHVybiBhPT0hIWE/YTpNYXRoLnBvdygyLC0xMCphKSpNYXRoLnNpbigoYS0uMDc1KSooMipNYXRoLlBJKS8uMykrMX0scy5ib3VuY2U9ZnVuY3Rpb24oYSl7dmFyIGIsYz03LjU2MjUsZD0yLjc1O3JldHVybiAxL2Q+YT9iPWMqYSphOjIvZD5hPyhhLT0xLjUvZCxiPWMqYSphKy43NSk6Mi41L2Q+YT8oYS09Mi4yNS9kLGI9YyphKmErLjkzNzUpOihhLT0yLjYyNS9kLGI9YyphKmErLjk4NDM3NSksYn0sYS5taW5hPXMsc30oInVuZGVmaW5lZCI9PXR5cGVvZiBiP2Z1bmN0aW9uKCl7fTpiKSxkPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGMoYSxiKXtpZihhKXtpZihhLm5vZGVUeXBlKXJldHVybiB3KGEpO2lmKGUoYSwiYXJyYXkiKSYmYy5zZXQpcmV0dXJuIGMuc2V0LmFwcGx5KGMsYSk7aWYoYSBpbnN0YW5jZW9mIHMpcmV0dXJuIGE7aWYobnVsbD09YilyZXR1cm4gYT15LmRvYy5xdWVyeVNlbGVjdG9yKFN0cmluZyhhKSksdyhhKX1yZXR1cm4gYT1udWxsPT1hPyIxMDAlIjphLGI9bnVsbD09Yj8iMTAwJSI6YixuZXcgdihhLGIpfWZ1bmN0aW9uIGQoYSxiKXtpZihiKXtpZigiI3RleHQiPT1hJiYoYT15LmRvYy5jcmVhdGVUZXh0Tm9kZShiLnRleHR8fGJbIiN0ZXh0Il18fCIiKSksIiNjb21tZW50Ij09YSYmKGE9eS5kb2MuY3JlYXRlQ29tbWVudChiLnRleHR8fGJbIiN0ZXh0Il18fCIiKSksInN0cmluZyI9PXR5cGVvZiBhJiYoYT1kKGEpKSwic3RyaW5nIj09dHlwZW9mIGIpcmV0dXJuIDE9PWEubm9kZVR5cGU/InhsaW5rOiI9PWIuc3Vic3RyaW5nKDAsNik/YS5nZXRBdHRyaWJ1dGVOUyhULGIuc3Vic3RyaW5nKDYpKToieG1sOiI9PWIuc3Vic3RyaW5nKDAsNCk/YS5nZXRBdHRyaWJ1dGVOUyhVLGIuc3Vic3RyaW5nKDQpKTphLmdldEF0dHJpYnV0ZShiKToidGV4dCI9PWI/YS5ub2RlVmFsdWU6bnVsbDtpZigxPT1hLm5vZGVUeXBlKXtmb3IodmFyIGMgaW4gYilpZihiW3pdKGMpKXt2YXIgZT1BKGJbY10pO2U/InhsaW5rOiI9PWMuc3Vic3RyaW5nKDAsNik/YS5zZXRBdHRyaWJ1dGVOUyhULGMuc3Vic3RyaW5nKDYpLGUpOiJ4bWw6Ij09Yy5zdWJzdHJpbmcoMCw0KT9hLnNldEF0dHJpYnV0ZU5TKFUsYy5zdWJzdHJpbmcoNCksZSk6YS5zZXRBdHRyaWJ1dGUoYyxlKTphLnJlbW92ZUF0dHJpYnV0ZShjKX19ZWxzZSJ0ZXh0ImluIGImJihhLm5vZGVWYWx1ZT1iLnRleHQpfWVsc2UgYT15LmRvYy5jcmVhdGVFbGVtZW50TlMoVSxhKTtyZXR1cm4gYX1mdW5jdGlvbiBlKGEsYil7cmV0dXJuIGI9QS5wcm90b3R5cGUudG9Mb3dlckNhc2UuY2FsbChiKSwiZmluaXRlIj09Yj9pc0Zpbml0ZShhKToiYXJyYXkiPT1iJiYoYSBpbnN0YW5jZW9mIEFycmF5fHxBcnJheS5pc0FycmF5JiZBcnJheS5pc0FycmF5KGEpKT8hMDoibnVsbCI9PWImJm51bGw9PT1hfHxiPT10eXBlb2YgYSYmbnVsbCE9PWF8fCJvYmplY3QiPT1iJiZhPT09T2JqZWN0KGEpfHxKLmNhbGwoYSkuc2xpY2UoOCwtMSkudG9Mb3dlckNhc2UoKT09Yn1mdW5jdGlvbiBmKGEpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBhfHxPYmplY3QoYSkhPT1hKXJldHVybiBhO3ZhciBiPW5ldyBhLmNvbnN0cnVjdG9yO2Zvcih2YXIgYyBpbiBhKWFbel0oYykmJihiW2NdPWYoYVtjXSkpO3JldHVybiBifWZ1bmN0aW9uIGgoYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspaWYoYVtjXT09PWIpcmV0dXJuIGEucHVzaChhLnNwbGljZShjLDEpWzBdKX1mdW5jdGlvbiBpKGEsYixjKXtmdW5jdGlvbiBkKCl7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApLGY9ZS5qb2luKCLikIAiKSxnPWQuY2FjaGU9ZC5jYWNoZXx8e30saT1kLmNvdW50PWQuY291bnR8fFtdO3JldHVybiBnW3pdKGYpPyhoKGksZiksYz9jKGdbZl0pOmdbZl0pOihpLmxlbmd0aD49MWUzJiZkZWxldGUgZ1tpLnNoaWZ0KCldLGkucHVzaChmKSxnW2ZdPWEuYXBwbHkoYixlKSxjP2MoZ1tmXSk6Z1tmXSl9cmV0dXJuIGR9ZnVuY3Rpb24gaihhLGIsYyxkLGUsZil7aWYobnVsbD09ZSl7dmFyIGc9YS1jLGg9Yi1kO3JldHVybiBnfHxoPygxODArMTgwKkQuYXRhbjIoLWgsLWcpL0grMzYwKSUzNjA6MH1yZXR1cm4gaihhLGIsZSxmKS1qKGMsZCxlLGYpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIGElMzYwKkgvMTgwfWZ1bmN0aW9uIGwoYSl7cmV0dXJuIDE4MCphL0glMzYwfWZ1bmN0aW9uIG0oYSl7dmFyIGI9W107cmV0dXJuIGE9YS5yZXBsYWNlKC8oPzpefFxzKShcdyspXCgoW14pXSspXCkvZyxmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGQ9ZC5zcGxpdCgvXHMqLFxzKnxccysvKSwicm90YXRlIj09YyYmMT09ZC5sZW5ndGgmJmQucHVzaCgwLDApLCJzY2FsZSI9PWMmJihkLmxlbmd0aD4yP2Q9ZC5zbGljZSgwLDIpOjI9PWQubGVuZ3RoJiZkLnB1c2goMCwwKSwxPT1kLmxlbmd0aCYmZC5wdXNoKGRbMF0sMCwwKSksInNrZXdYIj09Yz9iLnB1c2goWyJtIiwxLDAsRC50YW4oayhkWzBdKSksMSwwLDBdKToic2tld1kiPT1jP2IucHVzaChbIm0iLDEsRC50YW4oayhkWzBdKSksMCwxLDAsMF0pOmIucHVzaChbYy5jaGFyQXQoMCldLmNvbmNhdChkKSksYX0pLGJ9ZnVuY3Rpb24gbihhLGIpe3ZhciBkPWFhKGEpLGU9bmV3IGMuTWF0cml4O2lmKGQpZm9yKHZhciBmPTAsZz1kLmxlbmd0aDtnPmY7ZisrKXt2YXIgaCxpLGosayxsLG09ZFtmXSxuPW0ubGVuZ3RoLG89QShtWzBdKS50b0xvd2VyQ2FzZSgpLHA9bVswXSE9byxxPXA/ZS5pbnZlcnQoKTowOyJ0Ij09byYmMj09bj9lLnRyYW5zbGF0ZShtWzFdLDApOiJ0Ij09byYmMz09bj9wPyhoPXEueCgwLDApLGk9cS55KDAsMCksaj1xLngobVsxXSxtWzJdKSxrPXEueShtWzFdLG1bMl0pLGUudHJhbnNsYXRlKGotaCxrLWkpKTplLnRyYW5zbGF0ZShtWzFdLG1bMl0pOiJyIj09bz8yPT1uPyhsPWx8fGIsZS5yb3RhdGUobVsxXSxsLngrbC53aWR0aC8yLGwueStsLmhlaWdodC8yKSk6ND09biYmKHA/KGo9cS54KG1bMl0sbVszXSksaz1xLnkobVsyXSxtWzNdKSxlLnJvdGF0ZShtWzFdLGosaykpOmUucm90YXRlKG1bMV0sbVsyXSxtWzNdKSk6InMiPT1vPzI9PW58fDM9PW4/KGw9bHx8YixlLnNjYWxlKG1bMV0sbVtuLTFdLGwueCtsLndpZHRoLzIsbC55K2wuaGVpZ2h0LzIpKTo0PT1uP3A/KGo9cS54KG1bMl0sbVszXSksaz1xLnkobVsyXSxtWzNdKSxlLnNjYWxlKG1bMV0sbVsxXSxqLGspKTplLnNjYWxlKG1bMV0sbVsxXSxtWzJdLG1bM10pOjU9PW4mJihwPyhqPXEueChtWzNdLG1bNF0pLGs9cS55KG1bM10sbVs0XSksZS5zY2FsZShtWzFdLG1bMl0saixrKSk6ZS5zY2FsZShtWzFdLG1bMl0sbVszXSxtWzRdKSk6Im0iPT1vJiY3PT1uJiZlLmFkZChtWzFdLG1bMl0sbVszXSxtWzRdLG1bNV0sbVs2XSl9cmV0dXJuIGV9ZnVuY3Rpb24gbyhhKXt2YXIgYj1hLm5vZGUub3duZXJTVkdFbGVtZW50JiZ3KGEubm9kZS5vd25lclNWR0VsZW1lbnQpfHxhLm5vZGUucGFyZW50Tm9kZSYmdyhhLm5vZGUucGFyZW50Tm9kZSl8fGMuc2VsZWN0KCJzdmciKXx8YygwLDApLGQ9Yi5zZWxlY3QoImRlZnMiKSxlPW51bGw9PWQ/ITE6ZC5ub2RlO3JldHVybiBlfHwoZT11KCJkZWZzIixiLm5vZGUpLm5vZGUpLGV9ZnVuY3Rpb24gcChhKXtyZXR1cm4gYS5ub2RlLm93bmVyU1ZHRWxlbWVudCYmdyhhLm5vZGUub3duZXJTVkdFbGVtZW50KXx8Yy5zZWxlY3QoInN2ZyIpfWZ1bmN0aW9uIHEoYSxiLGMpe2Z1bmN0aW9uIGUoYSl7aWYobnVsbD09YSlyZXR1cm4gSTtpZihhPT0rYSlyZXR1cm4gYTtkKGose3dpZHRoOmF9KTt0cnl7cmV0dXJuIGouZ2V0QkJveCgpLndpZHRofWNhdGNoKGIpe3JldHVybiAwfX1mdW5jdGlvbiBmKGEpe2lmKG51bGw9PWEpcmV0dXJuIEk7aWYoYT09K2EpcmV0dXJuIGE7ZChqLHtoZWlnaHQ6YX0pO3RyeXtyZXR1cm4gai5nZXRCQm94KCkuaGVpZ2h0fWNhdGNoKGIpe3JldHVybiAwfX1mdW5jdGlvbiBnKGQsZSl7bnVsbD09Yj9pW2RdPWUoYS5hdHRyKGQpfHwwKTpkPT1iJiYoaT1lKG51bGw9PWM/YS5hdHRyKGQpfHwwOmMpKX12YXIgaD1wKGEpLm5vZGUsaT17fSxqPWgucXVlcnlTZWxlY3RvcigiLnN2Zy0tLW1nciIpO3N3aXRjaChqfHwoaj1kKCJyZWN0IiksZChqLHt4Oi05ZTkseTotOWU5LHdpZHRoOjEwLGhlaWdodDoxMCwiY2xhc3MiOiJzdmctLS1tZ3IiLGZpbGw6Im5vbmUifSksaC5hcHBlbmRDaGlsZChqKSksYS50eXBlKXtjYXNlInJlY3QiOmcoInJ4IixlKSxnKCJyeSIsZik7Y2FzZSJpbWFnZSI6Zygid2lkdGgiLGUpLGcoImhlaWdodCIsZik7Y2FzZSJ0ZXh0IjpnKCJ4IixlKSxnKCJ5IixmKTticmVhaztjYXNlImNpcmNsZSI6ZygiY3giLGUpLGcoImN5IixmKSxnKCJyIixlKTticmVhaztjYXNlImVsbGlwc2UiOmcoImN4IixlKSxnKCJjeSIsZiksZygicngiLGUpLGcoInJ5IixmKTticmVhaztjYXNlImxpbmUiOmcoIngxIixlKSxnKCJ4MiIsZSksZygieTEiLGYpLGcoInkyIixmKTticmVhaztjYXNlIm1hcmtlciI6ZygicmVmWCIsZSksZygibWFya2VyV2lkdGgiLGUpLGcoInJlZlkiLGYpLGcoIm1hcmtlckhlaWdodCIsZik7YnJlYWs7Y2FzZSJyYWRpYWxHcmFkaWVudCI6ZygiZngiLGUpLGcoImZ5IixmKTticmVhaztjYXNlInRzcGFuIjpnKCJkeCIsZSksZygiZHkiLGYpO2JyZWFrO2RlZmF1bHQ6ZyhiLGUpfXJldHVybiBoLnJlbW92ZUNoaWxkKGopLGl9ZnVuY3Rpb24gcihhKXtlKGEsImFycmF5Iil8fChhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSk7Zm9yKHZhciBiPTAsYz0wLGQ9dGhpcy5ub2RlO3RoaXNbYl07KWRlbGV0ZSB0aGlzW2IrK107Zm9yKGI9MDtiPGEubGVuZ3RoO2IrKykic2V0Ij09YVtiXS50eXBlP2FbYl0uZm9yRWFjaChmdW5jdGlvbihhKXtkLmFwcGVuZENoaWxkKGEubm9kZSl9KTpkLmFwcGVuZENoaWxkKGFbYl0ubm9kZSk7dmFyIGY9ZC5jaGlsZE5vZGVzO2ZvcihiPTA7YjxmLmxlbmd0aDtiKyspdGhpc1tjKytdPXcoZltiXSk7cmV0dXJuIHRoaXN9ZnVuY3Rpb24gcyhhKXtpZihhLnNuYXAgaW4gVilyZXR1cm4gVlthLnNuYXBdO3ZhciBiO3RyeXtiPWEub3duZXJTVkdFbGVtZW50fWNhdGNoKGMpe310aGlzLm5vZGU9YSxiJiYodGhpcy5wYXBlcj1uZXcgdihiKSksdGhpcy50eXBlPWEudGFnTmFtZXx8YS5ub2RlTmFtZTt2YXIgZD10aGlzLmlkPVModGhpcyk7aWYodGhpcy5hbmltcz17fSx0aGlzLl89e3RyYW5zZm9ybTpbXX0sYS5zbmFwPWQsVltkXT10aGlzLCJnIj09dGhpcy50eXBlJiYodGhpcy5hZGQ9ciksdGhpcy50eXBlIGlue2c6MSxtYXNrOjEscGF0dGVybjoxLHN5bWJvbDoxfSlmb3IodmFyIGUgaW4gdi5wcm90b3R5cGUpdi5wcm90b3R5cGVbel0oZSkmJih0aGlzW2VdPXYucHJvdG90eXBlW2VdKX1mdW5jdGlvbiB0KGEpe3RoaXMubm9kZT1hfWZ1bmN0aW9uIHUoYSxiKXt2YXIgYz1kKGEpO2IuYXBwZW5kQ2hpbGQoYyk7dmFyIGU9dyhjKTtyZXR1cm4gZX1mdW5jdGlvbiB2KGEsYil7dmFyIGMsZSxmLGc9di5wcm90b3R5cGU7aWYoYSYmYS50YWdOYW1lJiYic3ZnIj09YS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpe2lmKGEuc25hcCBpbiBWKXJldHVybiBWW2Euc25hcF07dmFyIGg9YS5vd25lckRvY3VtZW50O2M9bmV3IHMoYSksZT1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkZXNjIilbMF0sZj1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkZWZzIilbMF0sZXx8KGU9ZCgiZGVzYyIpLGUuYXBwZW5kQ2hpbGQoaC5jcmVhdGVUZXh0Tm9kZSgiQ3JlYXRlZCB3aXRoIFNuYXAiKSksYy5ub2RlLmFwcGVuZENoaWxkKGUpKSxmfHwoZj1kKCJkZWZzIiksYy5ub2RlLmFwcGVuZENoaWxkKGYpKSxjLmRlZnM9Zjtmb3IodmFyIGkgaW4gZylnW3pdKGkpJiYoY1tpXT1nW2ldKTtjLnBhcGVyPWMucm9vdD1jfWVsc2UgYz11KCJzdmciLHkuZG9jLmJvZHkpLGQoYy5ub2RlLHtoZWlnaHQ6Yix2ZXJzaW9uOjEuMSx3aWR0aDphLHhtbG5zOlV9KTtyZXR1cm4gY31mdW5jdGlvbiB3KGEpe3JldHVybiBhP2EgaW5zdGFuY2VvZiBzfHxhIGluc3RhbmNlb2YgdD9hOmEudGFnTmFtZSYmInN2ZyI9PWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpP25ldyB2KGEpOmEudGFnTmFtZSYmIm9iamVjdCI9PWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiYiaW1hZ2Uvc3ZnK3htbCI9PWEudHlwZT9uZXcgdihhLmNvbnRlbnREb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic3ZnIilbMF0pOm5ldyBzKGEpOmF9ZnVuY3Rpb24geChhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKyl7dmFyIGU9e3R5cGU6YVtjXS50eXBlLGF0dHI6YVtjXS5hdHRyKCl9LGY9YVtjXS5jaGlsZHJlbigpO2IucHVzaChlKSxmLmxlbmd0aCYmeChmLGUuY2hpbGROb2Rlcz1bXSl9fWMudmVyc2lvbj0iMC41LjEiLGMudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iU25hcCB2Iit0aGlzLnZlcnNpb259LGMuXz17fTt2YXIgeT17d2luOmEud2luZG93LGRvYzphLndpbmRvdy5kb2N1bWVudH07Yy5fLmdsb2I9eTt2YXIgej0iaGFzT3duUHJvcGVydHkiLEE9U3RyaW5nLEI9cGFyc2VGbG9hdCxDPXBhcnNlSW50LEQ9TWF0aCxFPUQubWF4LEY9RC5taW4sRz1ELmFicyxIPShELnBvdyxELlBJKSxJPShELnJvdW5kLCIiKSxKPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsSz0vXlxzKigoI1thLWZcZF17Nn0pfCgjW2EtZlxkXXszfSl8cmdiYT9cKFxzKihbXGRcLl0rJT9ccyosXHMqW1xkXC5dKyU/XHMqLFxzKltcZFwuXSslPyg/OlxzKixccypbXGRcLl0rJT8pPylccypcKXxoc2JhP1woXHMqKFtcZFwuXSsoPzpkZWd8XHhiMHwlKT9ccyosXHMqW1xkXC5dKyU/XHMqLFxzKltcZFwuXSsoPzolP1xzKixccypbXGRcLl0rKT8lPylccypcKXxoc2xhP1woXHMqKFtcZFwuXSsoPzpkZWd8XHhiMHwlKT9ccyosXHMqW1xkXC5dKyU/XHMqLFxzKltcZFwuXSsoPzolP1xzKixccypbXGRcLl0rKT8lPylccypcKSlccyokL2ksTD0oYy5fLnNlcGFyYXRvcj0vWyxcc10rLywvW1xzXSosW1xzXSovKSxNPXtoczoxLHJnOjF9LE49LyhbYS16XSlbXHMsXSooKC0/XGQqXC4/XGQqKD86ZVtcLStdP1xkKyk/W1xzXSosP1tcc10qKSspL2dpLE89LyhbcnN0bV0pW1xzLF0qKCgtP1xkKlwuP1xkKig/OmVbXC0rXT9cZCspP1tcc10qLD9bXHNdKikrKS9naSxQPS8oLT9cZCpcLj9cZCooPzplW1wtK10/XGQrKT8pW1xzXSosP1tcc10qL2dpLFE9MCxSPSJTIisoK25ldyBEYXRlKS50b1N0cmluZygzNiksUz1mdW5jdGlvbihhKXtyZXR1cm4oYSYmYS50eXBlP2EudHlwZTpJKStSKyhRKyspLnRvU3RyaW5nKDM2KX0sVD0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsVT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLFY9e307Yy51cmw9ZnVuY3Rpb24oYSl7cmV0dXJuInVybCgnIyIrYSsiJykifTtjLl8uJD1kLGMuXy5pZD1TLGMuZm9ybWF0PWZ1bmN0aW9uKCl7dmFyIGE9L1x7KFteXH1dKylcfS9nLGI9Lyg/Oig/Ol58XC4pKC4rPykoPz1cW3xcLnwkfFwoKXxcWygnfCIpKC4rPylcMlxdKShcKFwpKT8vZyxjPWZ1bmN0aW9uKGEsYyxkKXt2YXIgZT1kO3JldHVybiBjLnJlcGxhY2UoYixmdW5jdGlvbihhLGIsYyxkLGYpe2I9Ynx8ZCxlJiYoYiBpbiBlJiYoZT1lW2JdKSwiZnVuY3Rpb24iPT10eXBlb2YgZSYmZiYmKGU9ZSgpKSl9KSxlPShudWxsPT1lfHxlPT1kP2E6ZSkrIiJ9O3JldHVybiBmdW5jdGlvbihiLGQpe3JldHVybiBBKGIpLnJlcGxhY2UoYSxmdW5jdGlvbihhLGIpe3JldHVybiBjKGEsYixkKX0pfX0oKSxjLl8uY2xvbmU9ZixjLl8uY2FjaGVyPWksYy5yYWQ9ayxjLmRlZz1sLGMuc2luPWZ1bmN0aW9uKGEpe3JldHVybiBELnNpbihjLnJhZChhKSl9LGMudGFuPWZ1bmN0aW9uKGEpe3JldHVybiBELnRhbihjLnJhZChhKSl9LGMuY29zPWZ1bmN0aW9uKGEpe3JldHVybiBELmNvcyhjLnJhZChhKSl9LGMuYXNpbj1mdW5jdGlvbihhKXtyZXR1cm4gYy5kZWcoRC5hc2luKGEpKX0sYy5hY29zPWZ1bmN0aW9uKGEpe3JldHVybiBjLmRlZyhELmFjb3MoYSkpfSxjLmF0YW49ZnVuY3Rpb24oYSl7cmV0dXJuIGMuZGVnKEQuYXRhbihhKSl9LGMuYXRhbjI9ZnVuY3Rpb24oYSl7cmV0dXJuIGMuZGVnKEQuYXRhbjIoYSkpfSxjLmFuZ2xlPWosYy5sZW49ZnVuY3Rpb24oYSxiLGQsZSl7cmV0dXJuIE1hdGguc3FydChjLmxlbjIoYSxiLGQsZSkpfSxjLmxlbjI9ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuKGEtYykqKGEtYykrKGItZCkqKGItZCl9LGMuY2xvc2VzdFBvaW50PWZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe3ZhciBkPWEueC1iLGU9YS55LWM7cmV0dXJuIGQqZCtlKmV9Zm9yKHZhciBlLGYsZyxoLGk9YS5ub2RlLGo9aS5nZXRUb3RhbExlbmd0aCgpLGs9ai9pLnBhdGhTZWdMaXN0Lm51bWJlck9mSXRlbXMqLjEyNSxsPTEvMCxtPTA7aj49bTttKz1rKShoPWQoZz1pLmdldFBvaW50QXRMZW5ndGgobSkpKTxsJiYoZT1nLGY9bSxsPWgpO2ZvcihrKj0uNTtrPi41Oyl7dmFyIG4sbyxwLHEscixzOyhwPWYtayk+PTAmJihyPWQobj1pLmdldFBvaW50QXRMZW5ndGgocCkpKTxsPyhlPW4sZj1wLGw9cik6KHE9ZitrKTw9aiYmKHM9ZChvPWkuZ2V0UG9pbnRBdExlbmd0aChxKSkpPGw/KGU9byxmPXEsbD1zKTprKj0uNX1yZXR1cm4gZT17eDplLngseTplLnksbGVuZ3RoOmYsZGlzdGFuY2U6TWF0aC5zcXJ0KGwpfX0sYy5pcz1lLGMuc25hcFRvPWZ1bmN0aW9uKGEsYixjKXtpZihjPWUoYywiZmluaXRlIik/YzoxMCxlKGEsImFycmF5Iikpe2Zvcih2YXIgZD1hLmxlbmd0aDtkLS07KWlmKEcoYVtkXS1iKTw9YylyZXR1cm4gYVtkXX1lbHNle2E9K2E7dmFyIGY9YiVhO2lmKGM+ZilyZXR1cm4gYi1mO2lmKGY+YS1jKXJldHVybiBiLWYrYX1yZXR1cm4gYn0sYy5nZXRSR0I9aShmdW5jdGlvbihhKXtpZighYXx8KGE9QShhKSkuaW5kZXhPZigiLSIpKzEpcmV0dXJue3I6LTEsZzotMSxiOi0xLGhleDoibm9uZSIsZXJyb3I6MSx0b1N0cmluZzpafTtpZigibm9uZSI9PWEpcmV0dXJue3I6LTEsZzotMSxiOi0xLGhleDoibm9uZSIsdG9TdHJpbmc6Wn07aWYoIShNW3pdKGEudG9Mb3dlckNhc2UoKS5zdWJzdHJpbmcoMCwyKSl8fCIjIj09YS5jaGFyQXQoKSkmJihhPVcoYSkpLCFhKXJldHVybntyOi0xLGc6LTEsYjotMSxoZXg6Im5vbmUiLGVycm9yOjEsdG9TdHJpbmc6Wn07dmFyIGIsZCxmLGcsaCxpLGo9YS5tYXRjaChLKTtyZXR1cm4gaj8oalsyXSYmKGY9QyhqWzJdLnN1YnN0cmluZyg1KSwxNiksZD1DKGpbMl0uc3Vic3RyaW5nKDMsNSksMTYpLGI9QyhqWzJdLnN1YnN0cmluZygxLDMpLDE2KSksalszXSYmKGY9QygoaD1qWzNdLmNoYXJBdCgzKSkraCwxNiksZD1DKChoPWpbM10uY2hhckF0KDIpKStoLDE2KSxiPUMoKGg9alszXS5jaGFyQXQoMSkpK2gsMTYpKSxqWzRdJiYoaT1qWzRdLnNwbGl0KEwpLGI9QihpWzBdKSwiJSI9PWlbMF0uc2xpY2UoLTEpJiYoYio9Mi41NSksZD1CKGlbMV0pLCIlIj09aVsxXS5zbGljZSgtMSkmJihkKj0yLjU1KSxmPUIoaVsyXSksIiUiPT1pWzJdLnNsaWNlKC0xKSYmKGYqPTIuNTUpLCJyZ2JhIj09alsxXS50b0xvd2VyQ2FzZSgpLnNsaWNlKDAsNCkmJihnPUIoaVszXSkpLGlbM10mJiIlIj09aVszXS5zbGljZSgtMSkmJihnLz0xMDApKSxqWzVdPyhpPWpbNV0uc3BsaXQoTCksYj1CKGlbMF0pLCIlIj09aVswXS5zbGljZSgtMSkmJihiLz0xMDApLGQ9QihpWzFdKSwiJSI9PWlbMV0uc2xpY2UoLTEpJiYoZC89MTAwKSxmPUIoaVsyXSksIiUiPT1pWzJdLnNsaWNlKC0xKSYmKGYvPTEwMCksKCJkZWciPT1pWzBdLnNsaWNlKC0zKXx8IsKwIj09aVswXS5zbGljZSgtMSkpJiYoYi89MzYwKSwiaHNiYSI9PWpbMV0udG9Mb3dlckNhc2UoKS5zbGljZSgwLDQpJiYoZz1CKGlbM10pKSxpWzNdJiYiJSI9PWlbM10uc2xpY2UoLTEpJiYoZy89MTAwKSxjLmhzYjJyZ2IoYixkLGYsZykpOmpbNl0/KGk9als2XS5zcGxpdChMKSxiPUIoaVswXSksIiUiPT1pWzBdLnNsaWNlKC0xKSYmKGIvPTEwMCksZD1CKGlbMV0pLCIlIj09aVsxXS5zbGljZSgtMSkmJihkLz0xMDApLGY9QihpWzJdKSwiJSI9PWlbMl0uc2xpY2UoLTEpJiYoZi89MTAwKSwoImRlZyI9PWlbMF0uc2xpY2UoLTMpfHwiwrAiPT1pWzBdLnNsaWNlKC0xKSkmJihiLz0zNjApLCJoc2xhIj09alsxXS50b0xvd2VyQ2FzZSgpLnNsaWNlKDAsNCkmJihnPUIoaVszXSkpLGlbM10mJiIlIj09aVszXS5zbGljZSgtMSkmJihnLz0xMDApLGMuaHNsMnJnYihiLGQsZixnKSk6KGI9RihELnJvdW5kKGIpLDI1NSksZD1GKEQucm91bmQoZCksMjU1KSxmPUYoRC5yb3VuZChmKSwyNTUpLGc9RihFKGcsMCksMSksaj17cjpiLGc6ZCxiOmYsdG9TdHJpbmc6Wn0sai5oZXg9IiMiKygxNjc3NzIxNnxmfGQ8PDh8Yjw8MTYpLnRvU3RyaW5nKDE2KS5zbGljZSgxKSxqLm9wYWNpdHk9ZShnLCJmaW5pdGUiKT9nOjEsaikpOntyOi0xLGc6LTEsYjotMSxoZXg6Im5vbmUiLGVycm9yOjEsdG9TdHJpbmc6Wn19LGMpLGMuaHNiPWkoZnVuY3Rpb24oYSxiLGQpe3JldHVybiBjLmhzYjJyZ2IoYSxiLGQpLmhleH0pLGMuaHNsPWkoZnVuY3Rpb24oYSxiLGQpe3JldHVybiBjLmhzbDJyZ2IoYSxiLGQpLmhleH0pLGMucmdiPWkoZnVuY3Rpb24oYSxiLGMsZCl7aWYoZShkLCJmaW5pdGUiKSl7dmFyIGY9RC5yb3VuZDtyZXR1cm4icmdiYSgiK1tmKGEpLGYoYiksZihjKSwrZC50b0ZpeGVkKDIpXSsiKSJ9cmV0dXJuIiMiKygxNjc3NzIxNnxjfGI8PDh8YTw8MTYpLnRvU3RyaW5nKDE2KS5zbGljZSgxKX0pO3ZhciBXPWZ1bmN0aW9uKGEpe3ZhciBiPXkuZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF18fHkuZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzdmciKVswXSxjPSJyZ2IoMjU1LCAwLCAwKSI7cmV0dXJuKFc9aShmdW5jdGlvbihhKXtpZigicmVkIj09YS50b0xvd2VyQ2FzZSgpKXJldHVybiBjO2Iuc3R5bGUuY29sb3I9YyxiLnN0eWxlLmNvbG9yPWE7dmFyIGQ9eS5kb2MuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShiLEkpLmdldFByb3BlcnR5VmFsdWUoImNvbG9yIik7cmV0dXJuIGQ9PWM/bnVsbDpkfSkpKGEpfSxYPWZ1bmN0aW9uKCl7cmV0dXJuImhzYigiK1t0aGlzLmgsdGhpcy5zLHRoaXMuYl0rIikifSxZPWZ1bmN0aW9uKCl7cmV0dXJuImhzbCgiK1t0aGlzLmgsdGhpcy5zLHRoaXMubF0rIikifSxaPWZ1bmN0aW9uKCl7cmV0dXJuIDE9PXRoaXMub3BhY2l0eXx8bnVsbD09dGhpcy5vcGFjaXR5P3RoaXMuaGV4OiJyZ2JhKCIrW3RoaXMucix0aGlzLmcsdGhpcy5iLHRoaXMub3BhY2l0eV0rIikifSwkPWZ1bmN0aW9uKGEsYixkKXtpZihudWxsPT1iJiZlKGEsIm9iamVjdCIpJiYiciJpbiBhJiYiZyJpbiBhJiYiYiJpbiBhJiYoZD1hLmIsYj1hLmcsYT1hLnIpLG51bGw9PWImJmUoYSxzdHJpbmcpKXt2YXIgZj1jLmdldFJHQihhKTthPWYucixiPWYuZyxkPWYuYn1yZXR1cm4oYT4xfHxiPjF8fGQ+MSkmJihhLz0yNTUsYi89MjU1LGQvPTI1NSksW2EsYixkXX0sXz1mdW5jdGlvbihhLGIsZCxmKXthPUQucm91bmQoMjU1KmEpLGI9RC5yb3VuZCgyNTUqYiksZD1ELnJvdW5kKDI1NSpkKTt2YXIgZz17cjphLGc6YixiOmQsb3BhY2l0eTplKGYsImZpbml0ZSIpP2Y6MSxoZXg6Yy5yZ2IoYSxiLGQpLHRvU3RyaW5nOlp9O3JldHVybiBlKGYsImZpbml0ZSIpJiYoZy5vcGFjaXR5PWYpLGd9O2MuY29sb3I9ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIGUoYSwib2JqZWN0IikmJiJoImluIGEmJiJzImluIGEmJiJiImluIGE/KGI9Yy5oc2IycmdiKGEpLGEucj1iLnIsYS5nPWIuZyxhLmI9Yi5iLGEub3BhY2l0eT0xLGEuaGV4PWIuaGV4KTplKGEsIm9iamVjdCIpJiYiaCJpbiBhJiYicyJpbiBhJiYibCJpbiBhPyhiPWMuaHNsMnJnYihhKSxhLnI9Yi5yLGEuZz1iLmcsYS5iPWIuYixhLm9wYWNpdHk9MSxhLmhleD1iLmhleCk6KGUoYSwic3RyaW5nIikmJihhPWMuZ2V0UkdCKGEpKSxlKGEsIm9iamVjdCIpJiYiciJpbiBhJiYiZyJpbiBhJiYiYiJpbiBhJiYhKCJlcnJvciJpbiBhKT8oYj1jLnJnYjJoc2woYSksYS5oPWIuaCxhLnM9Yi5zLGEubD1iLmwsYj1jLnJnYjJoc2IoYSksYS52PWIuYik6KGE9e2hleDoibm9uZSJ9LGEucj1hLmc9YS5iPWEuaD1hLnM9YS52PWEubD0tMSxhLmVycm9yPTEpKSxhLnRvU3RyaW5nPVosYX0sYy5oc2IycmdiPWZ1bmN0aW9uKGEsYixjLGQpe2UoYSwib2JqZWN0IikmJiJoImluIGEmJiJzImluIGEmJiJiImluIGEmJihjPWEuYixiPWEucyxkPWEubyxhPWEuaCksYSo9MzYwO3ZhciBmLGcsaCxpLGo7cmV0dXJuIGE9YSUzNjAvNjAsaj1jKmIsaT1qKigxLUcoYSUyLTEpKSxmPWc9aD1jLWosYT1+fmEsZis9W2osaSwwLDAsaSxqXVthXSxnKz1baSxqLGosaSwwLDBdW2FdLGgrPVswLDAsaSxqLGosaV1bYV0sXyhmLGcsaCxkKX0sYy5oc2wycmdiPWZ1bmN0aW9uKGEsYixjLGQpe2UoYSwib2JqZWN0IikmJiJoImluIGEmJiJzImluIGEmJiJsImluIGEmJihjPWEubCxiPWEucyxhPWEuaCksKGE+MXx8Yj4xfHxjPjEpJiYoYS89MzYwLGIvPTEwMCxjLz0xMDApLGEqPTM2MDt2YXIgZixnLGgsaSxqO3JldHVybiBhPWElMzYwLzYwLGo9MipiKiguNT5jP2M6MS1jKSxpPWoqKDEtRyhhJTItMSkpLGY9Zz1oPWMtai8yLGE9fn5hLGYrPVtqLGksMCwwLGksal1bYV0sZys9W2ksaixqLGksMCwwXVthXSxoKz1bMCwwLGksaixqLGldW2FdLF8oZixnLGgsZCl9LGMucmdiMmhzYj1mdW5jdGlvbihhLGIsYyl7Yz0kKGEsYixjKSxhPWNbMF0sYj1jWzFdLGM9Y1syXTt2YXIgZCxlLGYsZztyZXR1cm4gZj1FKGEsYixjKSxnPWYtRihhLGIsYyksZD0wPT1nP251bGw6Zj09YT8oYi1jKS9nOmY9PWI/KGMtYSkvZysyOihhLWIpL2crNCxkPShkKzM2MCklNio2MC8zNjAsZT0wPT1nPzA6Zy9mLHtoOmQsczplLGI6Zix0b1N0cmluZzpYfX0sYy5yZ2IyaHNsPWZ1bmN0aW9uKGEsYixjKXtjPSQoYSxiLGMpLGE9Y1swXSxiPWNbMV0sYz1jWzJdO3ZhciBkLGUsZixnLGgsaTtyZXR1cm4gZz1FKGEsYixjKSxoPUYoYSxiLGMpLGk9Zy1oLGQ9MD09aT9udWxsOmc9PWE/KGItYykvaTpnPT1iPyhjLWEpL2krMjooYS1iKS9pKzQsZD0oZCszNjApJTYqNjAvMzYwLGY9KGcraCkvMixlPTA9PWk/MDouNT5mP2kvKDIqZik6aS8oMi0yKmYpLHtoOmQsczplLGw6Zix0b1N0cmluZzpZfX0sYy5wYXJzZVBhdGhTdHJpbmc9ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuIG51bGw7dmFyIGI9Yy5wYXRoKGEpO2lmKGIuYXJyKXJldHVybiBjLnBhdGguY2xvbmUoYi5hcnIpO3ZhciBkPXthOjcsYzo2LG86MixoOjEsbDoyLG06MixyOjQscTo0LHM6NCx0OjIsdjoxLHU6Myx6OjB9LGY9W107cmV0dXJuIGUoYSwiYXJyYXkiKSYmZShhWzBdLCJhcnJheSIpJiYoZj1jLnBhdGguY2xvbmUoYSkpLGYubGVuZ3RofHxBKGEpLnJlcGxhY2UoTixmdW5jdGlvbihhLGIsYyl7dmFyIGU9W10sZz1iLnRvTG93ZXJDYXNlKCk7aWYoYy5yZXBsYWNlKFAsZnVuY3Rpb24oYSxiKXtiJiZlLnB1c2goK2IpfSksIm0iPT1nJiZlLmxlbmd0aD4yJiYoZi5wdXNoKFtiXS5jb25jYXQoZS5zcGxpY2UoMCwyKSkpLGc9ImwiLGI9Im0iPT1iPyJsIjoiTCIpLCJvIj09ZyYmMT09ZS5sZW5ndGgmJmYucHVzaChbYixlWzBdXSksInIiPT1nKWYucHVzaChbYl0uY29uY2F0KGUpKTtlbHNlIGZvcig7ZS5sZW5ndGg+PWRbZ10mJihmLnB1c2goW2JdLmNvbmNhdChlLnNwbGljZSgwLGRbZ10pKSksZFtnXSk7KTt9KSxmLnRvU3RyaW5nPWMucGF0aC50b1N0cmluZyxiLmFycj1jLnBhdGguY2xvbmUoZiksZn07dmFyIGFhPWMucGFyc2VUcmFuc2Zvcm1TdHJpbmc9ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuIG51bGw7dmFyIGI9W107cmV0dXJuIGUoYSwiYXJyYXkiKSYmZShhWzBdLCJhcnJheSIpJiYoYj1jLnBhdGguY2xvbmUoYSkpLGIubGVuZ3RofHxBKGEpLnJlcGxhY2UoTyxmdW5jdGlvbihhLGMsZCl7dmFyIGU9W107Yy50b0xvd2VyQ2FzZSgpO2QucmVwbGFjZShQLGZ1bmN0aW9uKGEsYil7YiYmZS5wdXNoKCtiKX0pLGIucHVzaChbY10uY29uY2F0KGUpKX0pLGIudG9TdHJpbmc9Yy5wYXRoLnRvU3RyaW5nLGJ9O2MuXy5zdmdUcmFuc2Zvcm0yc3RyaW5nPW0sYy5fLnJnVHJhbnNmb3JtPS9eW2Etel1bXHNdKi0/XC4/XGQvaSxjLl8udHJhbnNmb3JtMm1hdHJpeD1uLGMuX3VuaXQycHg9cTt5LmRvYy5jb250YWluc3x8eS5kb2MuY29tcGFyZURvY3VtZW50UG9zaXRpb24/ZnVuY3Rpb24oYSxiKXt2YXIgYz05PT1hLm5vZGVUeXBlP2EuZG9jdW1lbnRFbGVtZW50OmEsZD1iJiZiLnBhcmVudE5vZGU7cmV0dXJuIGE9PWR8fCEoIWR8fDEhPWQubm9kZVR5cGV8fCEoYy5jb250YWlucz9jLmNvbnRhaW5zKGQpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZCkpKX06ZnVuY3Rpb24oYSxiKXtpZihiKWZvcig7YjspaWYoYj1iLnBhcmVudE5vZGUsYj09YSlyZXR1cm4hMDtyZXR1cm4hMX07Yy5fLmdldFNvbWVEZWZzPW8sYy5fLmdldFNvbWVTVkc9cCxjLnNlbGVjdD1mdW5jdGlvbihhKXtyZXR1cm4gYT1BKGEpLnJlcGxhY2UoLyhbXlxcXSk6L2csIiQxXFw6Iiksdyh5LmRvYy5xdWVyeVNlbGVjdG9yKGEpKX0sYy5zZWxlY3RBbGw9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXkuZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoYSksZD0oYy5zZXR8fEFycmF5KSgpLGU9MDtlPGIubGVuZ3RoO2UrKylkLnB1c2godyhiW2VdKSk7cmV0dXJuIGR9LHNldEludGVydmFsKGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIFYpaWYoVlt6XShhKSl7dmFyIGI9VlthXSxjPWIubm9kZTsoInN2ZyIhPWIudHlwZSYmIWMub3duZXJTVkdFbGVtZW50fHwic3ZnIj09Yi50eXBlJiYoIWMucGFyZW50Tm9kZXx8Im93bmVyU1ZHRWxlbWVudCJpbiBjLnBhcmVudE5vZGUmJiFjLm93bmVyU1ZHRWxlbWVudCkpJiZkZWxldGUgVlthXX19LDFlNCkscy5wcm90b3R5cGUuYXR0cj1mdW5jdGlvbihhLGMpe3ZhciBkPXRoaXMsZj1kLm5vZGU7aWYoIWEpe2lmKDEhPWYubm9kZVR5cGUpcmV0dXJue3RleHQ6Zi5ub2RlVmFsdWV9O2Zvcih2YXIgZz1mLmF0dHJpYnV0ZXMsaD17fSxpPTAsaj1nLmxlbmd0aDtqPmk7aSsrKWhbZ1tpXS5ub2RlTmFtZV09Z1tpXS5ub2RlVmFsdWU7cmV0dXJuIGh9aWYoZShhLCJzdHJpbmciKSl7aWYoIShhcmd1bWVudHMubGVuZ3RoPjEpKXJldHVybiBiKCJzbmFwLnV0aWwuZ2V0YXR0ci4iK2EsZCkuZmlyc3REZWZpbmVkKCk7dmFyIGs9e307a1thXT1jLGE9a31mb3IodmFyIGwgaW4gYSlhW3pdKGwpJiZiKCJzbmFwLnV0aWwuYXR0ci4iK2wsZCxhW2xdKTtyZXR1cm4gZH0sYy5wYXJzZT1mdW5jdGlvbihhKXt2YXIgYj15LmRvYy5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYz0hMCxkPXkuZG9jLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2lmKGE9QShhKSxhLm1hdGNoKC9eXHMqPFxzKnN2Zyg/OlxzfD4pLyl8fChhPSI8c3ZnPiIrYSsiPC9zdmc+IixjPSExKSxkLmlubmVySFRNTD1hLGE9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic3ZnIilbMF0paWYoYyliPWE7ZWxzZSBmb3IoO2EuZmlyc3RDaGlsZDspYi5hcHBlbmRDaGlsZChhLmZpcnN0Q2hpbGQpO3JldHVybiBuZXcgdChiKX0sYy5mcmFnbWVudD1mdW5jdGlvbigpe2Zvcih2YXIgYT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCksYj15LmRvYy5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyl7dmFyIGY9YVtkXTtmLm5vZGUmJmYubm9kZS5ub2RlVHlwZSYmYi5hcHBlbmRDaGlsZChmLm5vZGUpLGYubm9kZVR5cGUmJmIuYXBwZW5kQ2hpbGQoZiksInN0cmluZyI9PXR5cGVvZiBmJiZiLmFwcGVuZENoaWxkKGMucGFyc2UoZikubm9kZSl9cmV0dXJuIG5ldyB0KGIpfSxjLl8ubWFrZT11LGMuXy53cmFwPXcsdi5wcm90b3R5cGUuZWw9ZnVuY3Rpb24oYSxiKXt2YXIgYz11KGEsdGhpcy5ub2RlKTtyZXR1cm4gYiYmYy5hdHRyKGIpLGN9LHMucHJvdG90eXBlLmNoaWxkcmVuPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9dGhpcy5ub2RlLmNoaWxkTm9kZXMsZD0wLGU9Yi5sZW5ndGg7ZT5kO2QrKylhW2RdPWMoYltkXSk7cmV0dXJuIGF9LHMucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBhPVtdO3JldHVybiB4KFt0aGlzXSxhKSxhWzBdfSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ciIsZnVuY3Rpb24oKXt2YXIgYT1iLm50KCk7YT1hLnN1YnN0cmluZyhhLmxhc3RJbmRleE9mKCIuIikrMSk7dmFyIGM9YS5yZXBsYWNlKC9bQS1aXS9nLGZ1bmN0aW9uKGEpe3JldHVybiItIithLnRvTG93ZXJDYXNlKCl9KTtyZXR1cm4gYmFbel0oYyk/dGhpcy5ub2RlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLm5vZGUsbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShjKTpkKHRoaXMubm9kZSxhKX0pO3ZhciBiYT17ImFsaWdubWVudC1iYXNlbGluZSI6MCwiYmFzZWxpbmUtc2hpZnQiOjAsY2xpcDowLCJjbGlwLXBhdGgiOjAsImNsaXAtcnVsZSI6MCxjb2xvcjowLCJjb2xvci1pbnRlcnBvbGF0aW9uIjowLCJjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnMiOjAsImNvbG9yLXByb2ZpbGUiOjAsImNvbG9yLXJlbmRlcmluZyI6MCxjdXJzb3I6MCxkaXJlY3Rpb246MCxkaXNwbGF5OjAsImRvbWluYW50LWJhc2VsaW5lIjowLCJlbmFibGUtYmFja2dyb3VuZCI6MCxmaWxsOjAsImZpbGwtb3BhY2l0eSI6MCwiZmlsbC1ydWxlIjowLGZpbHRlcjowLCJmbG9vZC1jb2xvciI6MCwiZmxvb2Qtb3BhY2l0eSI6MCxmb250OjAsImZvbnQtZmFtaWx5IjowLCJmb250LXNpemUiOjAsImZvbnQtc2l6ZS1hZGp1c3QiOjAsImZvbnQtc3RyZXRjaCI6MCwiZm9udC1zdHlsZSI6MCwiZm9udC12YXJpYW50IjowLCJmb250LXdlaWdodCI6MCwiZ2x5cGgtb3JpZW50YXRpb24taG9yaXpvbnRhbCI6MCwiZ2x5cGgtb3JpZW50YXRpb24tdmVydGljYWwiOjAsImltYWdlLXJlbmRlcmluZyI6MCxrZXJuaW5nOjAsImxldHRlci1zcGFjaW5nIjowLCJsaWdodGluZy1jb2xvciI6MCxtYXJrZXI6MCwibWFya2VyLWVuZCI6MCwibWFya2VyLW1pZCI6MCwibWFya2VyLXN0YXJ0IjowLG1hc2s6MCxvcGFjaXR5OjAsb3ZlcmZsb3c6MCwicG9pbnRlci1ldmVudHMiOjAsInNoYXBlLXJlbmRlcmluZyI6MCwic3RvcC1jb2xvciI6MCwic3RvcC1vcGFjaXR5IjowLHN0cm9rZTowLCJzdHJva2UtZGFzaGFycmF5IjowLCJzdHJva2UtZGFzaG9mZnNldCI6MCwic3Ryb2tlLWxpbmVjYXAiOjAsInN0cm9rZS1saW5lam9pbiI6MCwic3Ryb2tlLW1pdGVybGltaXQiOjAsInN0cm9rZS1vcGFjaXR5IjowLCJzdHJva2Utd2lkdGgiOjAsInRleHQtYW5jaG9yIjowLCJ0ZXh0LWRlY29yYXRpb24iOjAsInRleHQtcmVuZGVyaW5nIjowLCJ1bmljb2RlLWJpZGkiOjAsdmlzaWJpbGl0eTowLCJ3b3JkLXNwYWNpbmciOjAsIndyaXRpbmctbW9kZSI6MH07Yi5vbigic25hcC51dGlsLmF0dHIiLGZ1bmN0aW9uKGEpe3ZhciBjPWIubnQoKSxlPXt9O2M9Yy5zdWJzdHJpbmcoYy5sYXN0SW5kZXhPZigiLiIpKzEpLGVbY109YTt2YXIgZj1jLnJlcGxhY2UoLy0oXHcpL2dpLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudG9VcHBlckNhc2UoKX0pLGc9Yy5yZXBsYWNlKC9bQS1aXS9nLGZ1bmN0aW9uKGEpe3JldHVybiItIithLnRvTG93ZXJDYXNlKCl9KTtiYVt6XShnKT90aGlzLm5vZGUuc3R5bGVbZl09bnVsbD09YT9JOmE6ZCh0aGlzLm5vZGUsZSl9KSxmdW5jdGlvbihhKXt9KHYucHJvdG90eXBlKSxjLmFqYXg9ZnVuY3Rpb24oYSxjLGQsZil7dmFyIGc9bmV3IFhNTEh0dHBSZXF1ZXN0LGg9UygpO2lmKGcpe2lmKGUoYywiZnVuY3Rpb24iKSlmPWQsZD1jLGM9bnVsbDtlbHNlIGlmKGUoYywib2JqZWN0Iikpe3ZhciBpPVtdO2Zvcih2YXIgaiBpbiBjKWMuaGFzT3duUHJvcGVydHkoaikmJmkucHVzaChlbmNvZGVVUklDb21wb25lbnQoaikrIj0iK2VuY29kZVVSSUNvbXBvbmVudChjW2pdKSk7Yz1pLmpvaW4oIiYiKX1yZXR1cm4gZy5vcGVuKGM/IlBPU1QiOiJHRVQiLGEsITApLGMmJihnLnNldFJlcXVlc3RIZWFkZXIoIlgtUmVxdWVzdGVkLVdpdGgiLCJYTUxIdHRwUmVxdWVzdCIpLGcuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC10eXBlIiwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikpLGQmJihiLm9uY2UoInNuYXAuYWpheC4iK2grIi4wIixkKSxiLm9uY2UoInNuYXAuYWpheC4iK2grIi4yMDAiLGQpLGIub25jZSgic25hcC5hamF4LiIraCsiLjMwNCIsZCkpLGcub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09Zy5yZWFkeVN0YXRlJiZiKCJzbmFwLmFqYXguIitoKyIuIitnLnN0YXR1cyxmLGcpfSw0PT1nLnJlYWR5U3RhdGU/ZzooZy5zZW5kKGMpLGcpfX0sYy5sb2FkPWZ1bmN0aW9uKGEsYixkKXtjLmFqYXgoYSxmdW5jdGlvbihhKXt2YXIgZT1jLnBhcnNlKGEucmVzcG9uc2VUZXh0KTtkP2IuY2FsbChkLGUpOmIoZSl9KX07dmFyIGNhPWZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYz1hLm93bmVyRG9jdW1lbnQsZD1jLmJvZHksZT1jLmRvY3VtZW50RWxlbWVudCxmPWUuY2xpZW50VG9wfHxkLmNsaWVudFRvcHx8MCxoPWUuY2xpZW50TGVmdHx8ZC5jbGllbnRMZWZ0fHwwLGk9Yi50b3ArKGcud2luLnBhZ2VZT2Zmc2V0fHxlLnNjcm9sbFRvcHx8ZC5zY3JvbGxUb3ApLWYsaj1iLmxlZnQrKGcud2luLnBhZ2VYT2Zmc2V0fHxlLnNjcm9sbExlZnR8fGQuc2Nyb2xsTGVmdCktaDtyZXR1cm57eTppLHg6an19O3JldHVybiBjLmdldEVsZW1lbnRCeVBvaW50PWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPShjLmNhbnZhcyx5LmRvYy5lbGVtZW50RnJvbVBvaW50KGEsYikpO2lmKHkud2luLm9wZXJhJiYic3ZnIj09ZC50YWdOYW1lKXt2YXIgZT1jYShkKSxmPWQuY3JlYXRlU1ZHUmVjdCgpO2YueD1hLWUueCxmLnk9Yi1lLnksZi53aWR0aD1mLmhlaWdodD0xO3ZhciBnPWQuZ2V0SW50ZXJzZWN0aW9uTGlzdChmLG51bGwpO2cubGVuZ3RoJiYoZD1nW2cubGVuZ3RoLTFdKX1yZXR1cm4gZD93KGQpOm51bGx9LGMucGx1Z2luPWZ1bmN0aW9uKGEpe2EoYyxzLHYseSx0KX0seS53aW4uU25hcD1jLGN9KGF8fHRoaXMpO3JldHVybiBkLnBsdWdpbihmdW5jdGlvbihjLGQsZSxmLGcpe2Z1bmN0aW9uIGgoYSxiKXtpZihudWxsPT1iKXt2YXIgZD0hMDtpZihiPSJsaW5lYXJHcmFkaWVudCI9PWEudHlwZXx8InJhZGlhbEdyYWRpZW50Ij09YS50eXBlP2Eubm9kZS5nZXRBdHRyaWJ1dGUoImdyYWRpZW50VHJhbnNmb3JtIik6InBhdHRlcm4iPT1hLnR5cGU/YS5ub2RlLmdldEF0dHJpYnV0ZSgicGF0dGVyblRyYW5zZm9ybSIpOmEubm9kZS5nZXRBdHRyaWJ1dGUoInRyYW5zZm9ybSIpLCFiKXJldHVybiBuZXcgYy5NYXRyaXg7Yj1jLl8uc3ZnVHJhbnNmb3JtMnN0cmluZyhiKX1lbHNlIGI9Yy5fLnJnVHJhbnNmb3JtLnRlc3QoYik/bShiKS5yZXBsYWNlKC9cLnszfXxcdTIwMjYvZyxhLl8udHJhbnNmb3JtfHwiIik6Yy5fLnN2Z1RyYW5zZm9ybTJzdHJpbmcoYiksbChiLCJhcnJheSIpJiYoYj1jLnBhdGg/Yy5wYXRoLnRvU3RyaW5nLmNhbGwoYik6bShiKSksYS5fLnRyYW5zZm9ybT1iO3ZhciBlPWMuXy50cmFuc2Zvcm0ybWF0cml4KGIsYS5nZXRCQm94KDEpKTtyZXR1cm4gZD9lOnZvaWQoYS5tYXRyaXg9ZSl9ZnVuY3Rpb24gaShhKXtmdW5jdGlvbiBiKGEsYil7dmFyIGQ9byhhLm5vZGUsYik7ZD1kJiZkLm1hdGNoKGcpLGQ9ZCYmZFsyXSxkJiYiIyI9PWQuY2hhckF0KCkmJihkPWQuc3Vic3RyaW5nKDEpLGQmJihpW2RdPShpW2RdfHxbXSkuY29uY2F0KGZ1bmN0aW9uKGQpe3ZhciBlPXt9O2VbYl09Yy51cmwoZCksbyhhLm5vZGUsZSl9KSkpfWZ1bmN0aW9uIGQoYSl7dmFyIGI9byhhLm5vZGUsInhsaW5rOmhyZWYiKTtiJiYiIyI9PWIuY2hhckF0KCkmJihiPWIuc3Vic3RyaW5nKDEpLGImJihpW2JdPShpW2JdfHxbXSkuY29uY2F0KGZ1bmN0aW9uKGIpe2EuYXR0cigieGxpbms6aHJlZiIsIiMiK2IpfSkpKX1mb3IodmFyIGUsZj1hLnNlbGVjdEFsbCgiKiIpLGc9L15ccyp1cmxcKCgifCd8KSguKilcMVwpXHMqJC8saD1bXSxpPXt9LGo9MCxrPWYubGVuZ3RoO2s+ajtqKyspe2U9ZltqXSxiKGUsImZpbGwiKSxiKGUsInN0cm9rZSIpLGIoZSwiZmlsdGVyIiksYihlLCJtYXNrIiksYihlLCJjbGlwLXBhdGgiKSxkKGUpO3ZhciBsPW8oZS5ub2RlLCJpZCIpO2wmJihvKGUubm9kZSx7aWQ6ZS5pZH0pLGgucHVzaCh7b2xkOmwsaWQ6ZS5pZH0pKX1mb3Ioaj0wLGs9aC5sZW5ndGg7az5qO2orKyl7dmFyIG09aVtoW2pdLm9sZF07aWYobSlmb3IodmFyIG49MCxwPW0ubGVuZ3RoO3A+bjtuKyspbVtuXShoW2pdLmlkKX19ZnVuY3Rpb24gaihhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj1hPyI8Iit0aGlzLnR5cGU6IiIsYz10aGlzLm5vZGUuYXR0cmlidXRlcyxkPXRoaXMubm9kZS5jaGlsZE5vZGVzO2lmKGEpZm9yKHZhciBlPTAsZj1jLmxlbmd0aDtmPmU7ZSsrKWIrPSIgIitjW2VdLm5hbWUrJz0iJytjW2VdLnZhbHVlLnJlcGxhY2UoLyIvZywnXFwiJykrJyInO2lmKGQubGVuZ3RoKXtmb3IoYSYmKGIrPSI+IiksZT0wLGY9ZC5sZW5ndGg7Zj5lO2UrKykzPT1kW2VdLm5vZGVUeXBlP2IrPWRbZV0ubm9kZVZhbHVlOjE9PWRbZV0ubm9kZVR5cGUmJihiKz1zKGRbZV0pLnRvU3RyaW5nKCkpO2EmJihiKz0iPC8iK3RoaXMudHlwZSsiPiIpfWVsc2UgYSYmKGIrPSIvPiIpO3JldHVybiBifX12YXIgaz1kLnByb3RvdHlwZSxsPWMuaXMsbT1TdHJpbmcsbj1jLl91bml0MnB4LG89Yy5fLiQscD1jLl8ubWFrZSxxPWMuXy5nZXRTb21lRGVmcyxyPSJoYXNPd25Qcm9wZXJ0eSIscz1jLl8ud3JhcDtrLmdldEJCb3g9ZnVuY3Rpb24oYSl7aWYoInRzcGFuIj09dGhpcy50eXBlKXJldHVybiBjLl8uYm94KHRoaXMubm9kZS5nZXRDbGllbnRSZWN0cygpLml0ZW0oMCkpO2lmKCFjLk1hdHJpeHx8IWMucGF0aClyZXR1cm4gdGhpcy5ub2RlLmdldEJCb3goKTt2YXIgYj10aGlzLGQ9bmV3IGMuTWF0cml4O2lmKGIucmVtb3ZlZClyZXR1cm4gYy5fLmJveCgpO2Zvcig7InVzZSI9PWIudHlwZTspaWYoYXx8KGQ9ZC5hZGQoYi50cmFuc2Zvcm0oKS5sb2NhbE1hdHJpeC50cmFuc2xhdGUoYi5hdHRyKCJ4Iil8fDAsYi5hdHRyKCJ5Iil8fDApKSksYi5vcmlnaW5hbCliPWIub3JpZ2luYWw7ZWxzZXt2YXIgZT1iLmF0dHIoInhsaW5rOmhyZWYiKTtiPWIub3JpZ2luYWw9Yi5ub2RlLm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZS5zdWJzdHJpbmcoZS5pbmRleE9mKCIjIikrMSkpfXZhciBmPWIuXyxnPWMucGF0aC5nZXRbYi50eXBlXXx8Yy5wYXRoLmdldC5kZWZsdDt0cnl7cmV0dXJuIGE/KGYuYmJveHd0PWc/Yy5wYXRoLmdldEJCb3goYi5yZWFsUGF0aD1nKGIpKTpjLl8uYm94KGIubm9kZS5nZXRCQm94KCkpLGMuXy5ib3goZi5iYm94d3QpKTooYi5yZWFsUGF0aD1nKGIpLGIubWF0cml4PWIudHJhbnNmb3JtKCkubG9jYWxNYXRyaXgsZi5iYm94PWMucGF0aC5nZXRCQm94KGMucGF0aC5tYXAoYi5yZWFsUGF0aCxkLmFkZChiLm1hdHJpeCkpKSxjLl8uYm94KGYuYmJveCkpfWNhdGNoKGgpe3JldHVybiBjLl8uYm94KCl9fTt2YXIgdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0cmluZ307ay50cmFuc2Zvcm09ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fO2lmKG51bGw9PWEpe2Zvcih2YXIgZCxlPXRoaXMsZj1uZXcgYy5NYXRyaXgodGhpcy5ub2RlLmdldENUTSgpKSxnPWgodGhpcyksaT1bZ10saj1uZXcgYy5NYXRyaXgsaz1nLnRvVHJhbnNmb3JtU3RyaW5nKCksbD1tKGcpPT1tKHRoaXMubWF0cml4KT9tKGIudHJhbnNmb3JtKTprOyJzdmciIT1lLnR5cGUmJihlPWUucGFyZW50KCkpOylpLnB1c2goaChlKSk7Zm9yKGQ9aS5sZW5ndGg7ZC0tOylqLmFkZChpW2RdKTtyZXR1cm57c3RyaW5nOmwsZ2xvYmFsTWF0cml4OmYsdG90YWxNYXRyaXg6aixsb2NhbE1hdHJpeDpnLGRpZmZNYXRyaXg6Zi5jbG9uZSgpLmFkZChnLmludmVydCgpKSxnbG9iYWw6Zi50b1RyYW5zZm9ybVN0cmluZygpLHRvdGFsOmoudG9UcmFuc2Zvcm1TdHJpbmcoKSxsb2NhbDprLHRvU3RyaW5nOnR9fXJldHVybiBhIGluc3RhbmNlb2YgYy5NYXRyaXg/KHRoaXMubWF0cml4PWEsdGhpcy5fLnRyYW5zZm9ybT1hLnRvVHJhbnNmb3JtU3RyaW5nKCkpOmgodGhpcyxhKSx0aGlzLm5vZGUmJigibGluZWFyR3JhZGllbnQiPT10aGlzLnR5cGV8fCJyYWRpYWxHcmFkaWVudCI9PXRoaXMudHlwZT9vKHRoaXMubm9kZSx7Z3JhZGllbnRUcmFuc2Zvcm06dGhpcy5tYXRyaXh9KToicGF0dGVybiI9PXRoaXMudHlwZT9vKHRoaXMubm9kZSx7cGF0dGVyblRyYW5zZm9ybTp0aGlzLm1hdHJpeH0pOm8odGhpcy5ub2RlLHt0cmFuc2Zvcm06dGhpcy5tYXRyaXh9KSksdGhpc30say5wYXJlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gcyh0aGlzLm5vZGUucGFyZW50Tm9kZSl9LGsuYXBwZW5kPWsuYWRkPWZ1bmN0aW9uKGEpe2lmKGEpe2lmKCJzZXQiPT1hLnR5cGUpe3ZhciBiPXRoaXM7cmV0dXJuIGEuZm9yRWFjaChmdW5jdGlvbihhKXtiLmFkZChhKX0pLHRoaXN9YT1zKGEpLHRoaXMubm9kZS5hcHBlbmRDaGlsZChhLm5vZGUpLGEucGFwZXI9dGhpcy5wYXBlcn1yZXR1cm4gdGhpc30say5hcHBlbmRUbz1mdW5jdGlvbihhKXtyZXR1cm4gYSYmKGE9cyhhKSxhLmFwcGVuZCh0aGlzKSksdGhpc30say5wcmVwZW5kPWZ1bmN0aW9uKGEpe2lmKGEpe2lmKCJzZXQiPT1hLnR5cGUpe3ZhciBiLGM9dGhpcztyZXR1cm4gYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2I/Yi5hZnRlcihhKTpjLnByZXBlbmQoYSksYj1hfSksdGhpc31hPXMoYSk7dmFyIGQ9YS5wYXJlbnQoKTt0aGlzLm5vZGUuaW5zZXJ0QmVmb3JlKGEubm9kZSx0aGlzLm5vZGUuZmlyc3RDaGlsZCksdGhpcy5hZGQmJnRoaXMuYWRkKCksYS5wYXBlcj10aGlzLnBhcGVyLHRoaXMucGFyZW50KCkmJnRoaXMucGFyZW50KCkuYWRkKCksZCYmZC5hZGQoKX1yZXR1cm4gdGhpc30say5wcmVwZW5kVG89ZnVuY3Rpb24oYSl7cmV0dXJuIGE9cyhhKSxhLnByZXBlbmQodGhpcyksdGhpc30say5iZWZvcmU9ZnVuY3Rpb24oYSl7aWYoInNldCI9PWEudHlwZSl7dmFyIGI9dGhpcztyZXR1cm4gYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBjPWEucGFyZW50KCk7Yi5ub2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEubm9kZSxiLm5vZGUpLGMmJmMuYWRkKCl9KSx0aGlzLnBhcmVudCgpLmFkZCgpLHRoaXN9YT1zKGEpO3ZhciBjPWEucGFyZW50KCk7cmV0dXJuIHRoaXMubm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLm5vZGUsdGhpcy5ub2RlKSx0aGlzLnBhcmVudCgpJiZ0aGlzLnBhcmVudCgpLmFkZCgpLGMmJmMuYWRkKCksYS5wYXBlcj10aGlzLnBhcGVyLHRoaXN9LGsuYWZ0ZXI9ZnVuY3Rpb24oYSl7YT1zKGEpO3ZhciBiPWEucGFyZW50KCk7cmV0dXJuIHRoaXMubm9kZS5uZXh0U2libGluZz90aGlzLm5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYS5ub2RlLHRoaXMubm9kZS5uZXh0U2libGluZyk6dGhpcy5ub2RlLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoYS5ub2RlKSx0aGlzLnBhcmVudCgpJiZ0aGlzLnBhcmVudCgpLmFkZCgpLGImJmIuYWRkKCksYS5wYXBlcj10aGlzLnBhcGVyLHRoaXN9LGsuaW5zZXJ0QmVmb3JlPWZ1bmN0aW9uKGEpe2E9cyhhKTt2YXIgYj10aGlzLnBhcmVudCgpO3JldHVybiBhLm5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5ub2RlLGEubm9kZSksdGhpcy5wYXBlcj1hLnBhcGVyLGImJmIuYWRkKCksYS5wYXJlbnQoKSYmYS5wYXJlbnQoKS5hZGQoKSx0aGlzfSxrLmluc2VydEFmdGVyPWZ1bmN0aW9uKGEpe2E9cyhhKTt2YXIgYj10aGlzLnBhcmVudCgpO3JldHVybiBhLm5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5ub2RlLGEubm9kZS5uZXh0U2libGluZyksdGhpcy5wYXBlcj1hLnBhcGVyLGImJmIuYWRkKCksYS5wYXJlbnQoKSYmYS5wYXJlbnQoKS5hZGQoKSx0aGlzfSxrLnJlbW92ZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMucGFyZW50KCk7cmV0dXJuIHRoaXMubm9kZS5wYXJlbnROb2RlJiZ0aGlzLm5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLm5vZGUpLGRlbGV0ZSB0aGlzLnBhcGVyLHRoaXMucmVtb3ZlZD0hMCxhJiZhLmFkZCgpLHRoaXN9LGsuc2VsZWN0PWZ1bmN0aW9uKGEpe3JldHVybiBzKHRoaXMubm9kZS5xdWVyeVNlbGVjdG9yKGEpKX0say5zZWxlY3RBbGw9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMubm9kZS5xdWVyeVNlbGVjdG9yQWxsKGEpLGQ9KGMuc2V0fHxBcnJheSkoKSxlPTA7ZTxiLmxlbmd0aDtlKyspZC5wdXNoKHMoYltlXSkpO3JldHVybiBkfSxrLmFzUFg9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YiYmKGI9dGhpcy5hdHRyKGEpKSwrbih0aGlzLGEsYil9LGsudXNlPWZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLm5vZGUuaWQ7cmV0dXJuIGJ8fChiPXRoaXMuaWQsbyh0aGlzLm5vZGUse2lkOmJ9KSksYT0ibGluZWFyR3JhZGllbnQiPT10aGlzLnR5cGV8fCJyYWRpYWxHcmFkaWVudCI9PXRoaXMudHlwZXx8InBhdHRlcm4iPT10aGlzLnR5cGU/cCh0aGlzLnR5cGUsdGhpcy5ub2RlLnBhcmVudE5vZGUpOnAoInVzZSIsdGhpcy5ub2RlLnBhcmVudE5vZGUpLG8oYS5ub2RlLHsieGxpbms6aHJlZiI6IiMiK2J9KSxhLm9yaWdpbmFsPXRoaXMsYX0say5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPXModGhpcy5ub2RlLmNsb25lTm9kZSghMCkpO3JldHVybiBvKGEubm9kZSwiaWQiKSYmbyhhLm5vZGUse2lkOmEuaWR9KSxpKGEpLGEuaW5zZXJ0QWZ0ZXIodGhpcyksYX0say50b0RlZnM9ZnVuY3Rpb24oKXt2YXIgYT1xKHRoaXMpO3JldHVybiBhLmFwcGVuZENoaWxkKHRoaXMubm9kZSksdGhpc30say5wYXR0ZXJuPWsudG9QYXR0ZXJuPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXAoInBhdHRlcm4iLHEodGhpcykpO3JldHVybiBudWxsPT1hJiYoYT10aGlzLmdldEJCb3goKSksbChhLCJvYmplY3QiKSYmIngiaW4gYSYmKGI9YS55LGM9YS53aWR0aCxkPWEuaGVpZ2h0LGE9YS54KSxvKGUubm9kZSx7eDphLHk6Yix3aWR0aDpjLGhlaWdodDpkLHBhdHRlcm5Vbml0czoidXNlclNwYWNlT25Vc2UiLGlkOmUuaWQsdmlld0JveDpbYSxiLGMsZF0uam9pbigiICIpfSksZS5ub2RlLmFwcGVuZENoaWxkKHRoaXMubm9kZSksZX0say5tYXJrZXI9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPXAoIm1hcmtlciIscSh0aGlzKSk7cmV0dXJuIG51bGw9PWEmJihhPXRoaXMuZ2V0QkJveCgpKSxsKGEsIm9iamVjdCIpJiYieCJpbiBhJiYoYj1hLnksYz1hLndpZHRoLGQ9YS5oZWlnaHQsZT1hLnJlZlh8fGEuY3gsZj1hLnJlZll8fGEuY3ksYT1hLngpLG8oZy5ub2RlLHt2aWV3Qm94OlthLGIsYyxkXS5qb2luKCIgIiksbWFya2VyV2lkdGg6YyxtYXJrZXJIZWlnaHQ6ZCxvcmllbnQ6ImF1dG8iLHJlZlg6ZXx8MCxyZWZZOmZ8fDAsaWQ6Zy5pZH0pLGcubm9kZS5hcHBlbmRDaGlsZCh0aGlzLm5vZGUpLGd9O3ZhciB1PXt9O2suZGF0YT1mdW5jdGlvbihhLGQpe3ZhciBlPXVbdGhpcy5pZF09dVt0aGlzLmlkXXx8e307aWYoMD09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gYigic25hcC5kYXRhLmdldC4iK3RoaXMuaWQsdGhpcyxlLG51bGwpLGU7aWYoMT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYy5pcyhhLCJvYmplY3QiKSl7Zm9yKHZhciBmIGluIGEpYVtyXShmKSYmdGhpcy5kYXRhKGYsYVtmXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGIoInNuYXAuZGF0YS5nZXQuIit0aGlzLmlkLHRoaXMsZVthXSxhKSxlW2FdfXJldHVybiBlW2FdPWQsYigic25hcC5kYXRhLnNldC4iK3RoaXMuaWQsdGhpcyxkLGEpLHRoaXN9LGsucmVtb3ZlRGF0YT1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT91W3RoaXMuaWRdPXt9OnVbdGhpcy5pZF0mJmRlbGV0ZSB1W3RoaXMuaWRdW2FdLHRoaXN9LGsub3V0ZXJTVkc9ay50b1N0cmluZz1qKDEpLGsuaW5uZXJTVkc9aigpLGsudG9EYXRhVVJMPWZ1bmN0aW9uKCl7aWYoYSYmYS5idG9hKXt2YXIgYj10aGlzLmdldEJCb3goKSxkPWMuZm9ybWF0KCc8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9Int3aWR0aH0iIGhlaWdodD0ie2hlaWdodH0iIHZpZXdCb3g9Int4fSB7eX0ge3dpZHRofSB7aGVpZ2h0fSI+e2NvbnRlbnRzfTwvc3ZnPicse3g6K2IueC50b0ZpeGVkKDMpLHk6K2IueS50b0ZpeGVkKDMpLHdpZHRoOitiLndpZHRoLnRvRml4ZWQoMyksaGVpZ2h0OitiLmhlaWdodC50b0ZpeGVkKDMpLGNvbnRlbnRzOnRoaXMub3V0ZXJTVkcoKX0pOwpyZXR1cm4iZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCwiK2J0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGQpKSl9fSxnLnByb3RvdHlwZS5zZWxlY3Q9ay5zZWxlY3QsZy5wcm90b3R5cGUuc2VsZWN0QWxsPWsuc2VsZWN0QWxsfSksZC5wbHVnaW4oZnVuY3Rpb24oYSxkLGUsZixnKXtmdW5jdGlvbiBoKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9ZC5zbGljZShhLGIpO3JldHVybiAxPT1lLmxlbmd0aCYmKGU9ZVswXSksYz9jKGUpOmV9fXZhciBpPWQucHJvdG90eXBlLGo9YS5pcyxrPVN0cmluZyxsPSJoYXNPd25Qcm9wZXJ0eSIsbT1mdW5jdGlvbihhLGIsZCxlKXsiZnVuY3Rpb24iIT10eXBlb2YgZHx8ZC5sZW5ndGh8fChlPWQsZD1jLmxpbmVhciksdGhpcy5hdHRyPWEsdGhpcy5kdXI9YixkJiYodGhpcy5lYXNpbmc9ZCksZSYmKHRoaXMuY2FsbGJhY2s9ZSl9O2EuXy5BbmltYXRpb249bSxhLmFuaW1hdGlvbj1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gbmV3IG0oYSxiLGMsZCl9LGkuaW5BbmltPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPVtdO2Zvcih2YXIgYyBpbiBhLmFuaW1zKWEuYW5pbXNbbF0oYykmJiFmdW5jdGlvbihhKXtiLnB1c2goe2FuaW06bmV3IG0oYS5fYXR0cnMsYS5kdXIsYS5lYXNpbmcsYS5fY2FsbGJhY2spLG1pbmE6YSxjdXJTdGF0dXM6YS5zdGF0dXMoKSxzdGF0dXM6ZnVuY3Rpb24oYil7cmV0dXJuIGEuc3RhdHVzKGIpfSxzdG9wOmZ1bmN0aW9uKCl7YS5zdG9wKCl9fSl9KGEuYW5pbXNbY10pO3JldHVybiBifSxhLmFuaW1hdGU9ZnVuY3Rpb24oYSxkLGUsZixnLGgpeyJmdW5jdGlvbiIhPXR5cGVvZiBnfHxnLmxlbmd0aHx8KGg9ZyxnPWMubGluZWFyKTt2YXIgaT1jLnRpbWUoKSxqPWMoYSxkLGksaStmLGMudGltZSxlLGcpO3JldHVybiBoJiZiLm9uY2UoIm1pbmEuZmluaXNoLiIrai5pZCxoKSxqfSxpLnN0b3A9ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5pbkFuaW0oKSxiPTAsYz1hLmxlbmd0aDtjPmI7YisrKWFbYl0uc3RvcCgpO3JldHVybiB0aGlzfSxpLmFuaW1hdGU9ZnVuY3Rpb24oYSxkLGUsZil7ImZ1bmN0aW9uIiE9dHlwZW9mIGV8fGUubGVuZ3RofHwoZj1lLGU9Yy5saW5lYXIpLGEgaW5zdGFuY2VvZiBtJiYoZj1hLmNhbGxiYWNrLGU9YS5lYXNpbmcsZD1hLmR1cixhPWEuYXR0cik7dmFyIGcsaSxuLG8scD1bXSxxPVtdLHI9e30scz10aGlzO2Zvcih2YXIgdCBpbiBhKWlmKGFbbF0odCkpe3MuZXF1YWw/KG89cy5lcXVhbCh0LGsoYVt0XSkpLGc9by5mcm9tLGk9by50byxuPW8uZik6KGc9K3MuYXR0cih0KSxpPSthW3RdKTt2YXIgdT1qKGcsImFycmF5Iik/Zy5sZW5ndGg6MTtyW3RdPWgocC5sZW5ndGgscC5sZW5ndGgrdSxuKSxwPXAuY29uY2F0KGcpLHE9cS5jb25jYXQoaSl9dmFyIHY9Yy50aW1lKCksdz1jKHAscSx2LHYrZCxjLnRpbWUsZnVuY3Rpb24oYSl7dmFyIGI9e307Zm9yKHZhciBjIGluIHIpcltsXShjKSYmKGJbY109cltjXShhKSk7cy5hdHRyKGIpfSxlKTtyZXR1cm4gcy5hbmltc1t3LmlkXT13LHcuX2F0dHJzPWEsdy5fY2FsbGJhY2s9ZixiKCJzbmFwLmFuaW1jcmVhdGVkLiIrcy5pZCx3KSxiLm9uY2UoIm1pbmEuZmluaXNoLiIrdy5pZCxmdW5jdGlvbigpe2Iub2ZmKCJtaW5hLiouIit3LmlkKSxkZWxldGUgcy5hbmltc1t3LmlkXSxmJiZmLmNhbGwocyl9KSxiLm9uY2UoIm1pbmEuc3RvcC4iK3cuaWQsZnVuY3Rpb24oKXtiLm9mZigibWluYS4qLiIrdy5pZCksZGVsZXRlIHMuYW5pbXNbdy5pZF19KSxzfX0pLGQucGx1Z2luKGZ1bmN0aW9uKGEsYixjLGQsZSl7ZnVuY3Rpb24gZihhLGIsYyxkLGUsZil7cmV0dXJuIG51bGw9PWImJiJbb2JqZWN0IFNWR01hdHJpeF0iPT1nLmNhbGwoYSk/KHRoaXMuYT1hLmEsdGhpcy5iPWEuYix0aGlzLmM9YS5jLHRoaXMuZD1hLmQsdGhpcy5lPWEuZSx2b2lkKHRoaXMuZj1hLmYpKTp2b2lkKG51bGwhPWE/KHRoaXMuYT0rYSx0aGlzLmI9K2IsdGhpcy5jPStjLHRoaXMuZD0rZCx0aGlzLmU9K2UsdGhpcy5mPStmKToodGhpcy5hPTEsdGhpcy5iPTAsdGhpcy5jPTAsdGhpcy5kPTEsdGhpcy5lPTAsdGhpcy5mPTApKX12YXIgZz1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLGg9U3RyaW5nLGk9TWF0aCxqPSIiOyFmdW5jdGlvbihiKXtmdW5jdGlvbiBjKGEpe3JldHVybiBhWzBdKmFbMF0rYVsxXSphWzFdfWZ1bmN0aW9uIGQoYSl7dmFyIGI9aS5zcXJ0KGMoYSkpO2FbMF0mJihhWzBdLz1iKSxhWzFdJiYoYVsxXS89Yil9Yi5hZGQ9ZnVuY3Rpb24oYSxiLGMsZCxlLGcpe2lmKGEmJmEgaW5zdGFuY2VvZiBmKXJldHVybiB0aGlzLmFkZChhLmEsYS5iLGEuYyxhLmQsYS5lLGEuZik7dmFyIGg9YSp0aGlzLmErYip0aGlzLmMsaT1hKnRoaXMuYitiKnRoaXMuZDtyZXR1cm4gdGhpcy5lKz1lKnRoaXMuYStnKnRoaXMuYyx0aGlzLmYrPWUqdGhpcy5iK2cqdGhpcy5kLHRoaXMuYz1jKnRoaXMuYStkKnRoaXMuYyx0aGlzLmQ9Yyp0aGlzLmIrZCp0aGlzLmQsdGhpcy5hPWgsdGhpcy5iPWksdGhpc30sZi5wcm90b3R5cGUubXVsdExlZnQ9ZnVuY3Rpb24oYSxiLGMsZCxlLGcpe2lmKGEmJmEgaW5zdGFuY2VvZiBmKXJldHVybiB0aGlzLm11bHRMZWZ0KGEuYSxhLmIsYS5jLGEuZCxhLmUsYS5mKTt2YXIgaD1hKnRoaXMuYStjKnRoaXMuYixpPWEqdGhpcy5jK2MqdGhpcy5kLGo9YSp0aGlzLmUrYyp0aGlzLmYrZTtyZXR1cm4gdGhpcy5iPWIqdGhpcy5hK2QqdGhpcy5iLHRoaXMuZD1iKnRoaXMuYytkKnRoaXMuZCx0aGlzLmY9Yip0aGlzLmUrZCp0aGlzLmYrZyx0aGlzLmE9aCx0aGlzLmM9aSx0aGlzLmU9aix0aGlzfSxiLmludmVydD1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmEqYS5kLWEuYiphLmM7cmV0dXJuIG5ldyBmKGEuZC9iLC1hLmIvYiwtYS5jL2IsYS5hL2IsKGEuYyphLmYtYS5kKmEuZSkvYiwoYS5iKmEuZS1hLmEqYS5mKS9iKX0sYi5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgZih0aGlzLmEsdGhpcy5iLHRoaXMuYyx0aGlzLmQsdGhpcy5lLHRoaXMuZil9LGIudHJhbnNsYXRlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZSs9YSp0aGlzLmErYip0aGlzLmMsdGhpcy5mKz1hKnRoaXMuYitiKnRoaXMuZCx0aGlzfSxiLnNjYWxlPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBudWxsPT1iJiYoYj1hKSwoY3x8ZCkmJnRoaXMudHJhbnNsYXRlKGMsZCksdGhpcy5hKj1hLHRoaXMuYio9YSx0aGlzLmMqPWIsdGhpcy5kKj1iLChjfHxkKSYmdGhpcy50cmFuc2xhdGUoLWMsLWQpLHRoaXN9LGIucm90YXRlPWZ1bmN0aW9uKGIsYyxkKXtiPWEucmFkKGIpLGM9Y3x8MCxkPWR8fDA7dmFyIGU9K2kuY29zKGIpLnRvRml4ZWQoOSksZj0raS5zaW4oYikudG9GaXhlZCg5KTtyZXR1cm4gdGhpcy5hZGQoZSxmLC1mLGUsYyxkKSx0aGlzLmFkZCgxLDAsMCwxLC1jLC1kKX0sYi5za2V3WD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5za2V3KGEsMCl9LGIuc2tld1k9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2tldygwLGEpfSxiLnNrZXc9ZnVuY3Rpb24oYixjKXtiPWJ8fDAsYz1jfHwwLGI9YS5yYWQoYiksYz1hLnJhZChjKTt2YXIgZD1pLnRhbihiKS50b0ZpeGVkKDkpLGU9aS50YW4oYykudG9GaXhlZCg5KTtyZXR1cm4gdGhpcy5hZGQoMSxlLGQsMSwwLDApfSxiLng9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSp0aGlzLmErYip0aGlzLmMrdGhpcy5lfSxiLnk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSp0aGlzLmIrYip0aGlzLmQrdGhpcy5mfSxiLmdldD1mdW5jdGlvbihhKXtyZXR1cm4rdGhpc1toLmZyb21DaGFyQ29kZSg5NythKV0udG9GaXhlZCg0KX0sYi50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJtYXRyaXgoIitbdGhpcy5nZXQoMCksdGhpcy5nZXQoMSksdGhpcy5nZXQoMiksdGhpcy5nZXQoMyksdGhpcy5nZXQoNCksdGhpcy5nZXQoNSldLmpvaW4oKSsiKSJ9LGIub2Zmc2V0PWZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMuZS50b0ZpeGVkKDQpLHRoaXMuZi50b0ZpeGVkKDQpXX0sYi5kZXRlcm1pbmFudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEqdGhpcy5kLXRoaXMuYip0aGlzLmN9LGIuc3BsaXQ9ZnVuY3Rpb24oKXt2YXIgYj17fTtiLmR4PXRoaXMuZSxiLmR5PXRoaXMuZjt2YXIgZT1bW3RoaXMuYSx0aGlzLmJdLFt0aGlzLmMsdGhpcy5kXV07Yi5zY2FsZXg9aS5zcXJ0KGMoZVswXSkpLGQoZVswXSksYi5zaGVhcj1lWzBdWzBdKmVbMV1bMF0rZVswXVsxXSplWzFdWzFdLGVbMV09W2VbMV1bMF0tZVswXVswXSpiLnNoZWFyLGVbMV1bMV0tZVswXVsxXSpiLnNoZWFyXSxiLnNjYWxleT1pLnNxcnQoYyhlWzFdKSksZChlWzFdKSxiLnNoZWFyLz1iLnNjYWxleSx0aGlzLmRldGVybWluYW50KCk8MCYmKGIuc2NhbGV4PS1iLnNjYWxleCk7dmFyIGY9ZVswXVsxXSxnPWVbMV1bMV07cmV0dXJuIDA+Zz8oYi5yb3RhdGU9YS5kZWcoaS5hY29zKGcpKSwwPmYmJihiLnJvdGF0ZT0zNjAtYi5yb3RhdGUpKTpiLnJvdGF0ZT1hLmRlZyhpLmFzaW4oZikpLGIuaXNTaW1wbGU9ISgrYi5zaGVhci50b0ZpeGVkKDkpfHxiLnNjYWxleC50b0ZpeGVkKDkpIT1iLnNjYWxleS50b0ZpeGVkKDkpJiZiLnJvdGF0ZSksYi5pc1N1cGVyU2ltcGxlPSErYi5zaGVhci50b0ZpeGVkKDkpJiZiLnNjYWxleC50b0ZpeGVkKDkpPT1iLnNjYWxleS50b0ZpeGVkKDkpJiYhYi5yb3RhdGUsYi5ub1JvdGF0aW9uPSErYi5zaGVhci50b0ZpeGVkKDkpJiYhYi5yb3RhdGUsYn0sYi50b1RyYW5zZm9ybVN0cmluZz1mdW5jdGlvbihhKXt2YXIgYj1hfHx0aGlzLnNwbGl0KCk7cmV0dXJuK2Iuc2hlYXIudG9GaXhlZCg5KT8ibSIrW3RoaXMuZ2V0KDApLHRoaXMuZ2V0KDEpLHRoaXMuZ2V0KDIpLHRoaXMuZ2V0KDMpLHRoaXMuZ2V0KDQpLHRoaXMuZ2V0KDUpXTooYi5zY2FsZXg9K2Iuc2NhbGV4LnRvRml4ZWQoNCksYi5zY2FsZXk9K2Iuc2NhbGV5LnRvRml4ZWQoNCksYi5yb3RhdGU9K2Iucm90YXRlLnRvRml4ZWQoNCksKGIuZHh8fGIuZHk/InQiK1srYi5keC50b0ZpeGVkKDQpLCtiLmR5LnRvRml4ZWQoNCldOmopKyhiLnJvdGF0ZT8iciIrWytiLnJvdGF0ZS50b0ZpeGVkKDQpLDAsMF06aikrKDEhPWIuc2NhbGV4fHwxIT1iLnNjYWxleT8icyIrW2Iuc2NhbGV4LGIuc2NhbGV5LDAsMF06aikpfX0oZi5wcm90b3R5cGUpLGEuTWF0cml4PWYsYS5tYXRyaXg9ZnVuY3Rpb24oYSxiLGMsZCxlLGcpe3JldHVybiBuZXcgZihhLGIsYyxkLGUsZyl9fSksZC5wbHVnaW4oZnVuY3Rpb24oYSxjLGQsZSxmKXtmdW5jdGlvbiBnKGQpe3JldHVybiBmdW5jdGlvbihlKXtpZihiLnN0b3AoKSxlIGluc3RhbmNlb2YgZiYmMT09ZS5ub2RlLmNoaWxkTm9kZXMubGVuZ3RoJiYoInJhZGlhbEdyYWRpZW50Ij09ZS5ub2RlLmZpcnN0Q2hpbGQudGFnTmFtZXx8ImxpbmVhckdyYWRpZW50Ij09ZS5ub2RlLmZpcnN0Q2hpbGQudGFnTmFtZXx8InBhdHRlcm4iPT1lLm5vZGUuZmlyc3RDaGlsZC50YWdOYW1lKSYmKGU9ZS5ub2RlLmZpcnN0Q2hpbGQsbih0aGlzKS5hcHBlbmRDaGlsZChlKSxlPWwoZSkpLGUgaW5zdGFuY2VvZiBjKWlmKCJyYWRpYWxHcmFkaWVudCI9PWUudHlwZXx8ImxpbmVhckdyYWRpZW50Ij09ZS50eXBlfHwicGF0dGVybiI9PWUudHlwZSl7ZS5ub2RlLmlkfHxwKGUubm9kZSx7aWQ6ZS5pZH0pO3ZhciBnPXEoZS5ub2RlLmlkKX1lbHNlIGc9ZS5hdHRyKGQpO2Vsc2UgaWYoZz1hLmNvbG9yKGUpLGcuZXJyb3Ipe3ZhciBoPWEobih0aGlzKS5vd25lclNWR0VsZW1lbnQpLmdyYWRpZW50KGUpO2g/KGgubm9kZS5pZHx8cChoLm5vZGUse2lkOmguaWR9KSxnPXEoaC5ub2RlLmlkKSk6Zz1lfWVsc2UgZz1yKGcpO3ZhciBpPXt9O2lbZF09ZyxwKHRoaXMubm9kZSxpKSx0aGlzLm5vZGUuc3R5bGVbZF09dH19ZnVuY3Rpb24gaChhKXtiLnN0b3AoKSxhPT0rYSYmKGErPSJweCIpLHRoaXMubm9kZS5zdHlsZS5mb250U2l6ZT1hfWZ1bmN0aW9uIGkoYSl7Zm9yKHZhciBiPVtdLGM9YS5jaGlsZE5vZGVzLGQ9MCxlPWMubGVuZ3RoO2U+ZDtkKyspe3ZhciBmPWNbZF07Mz09Zi5ub2RlVHlwZSYmYi5wdXNoKGYubm9kZVZhbHVlKSwidHNwYW4iPT1mLnRhZ05hbWUmJigxPT1mLmNoaWxkTm9kZXMubGVuZ3RoJiYzPT1mLmZpcnN0Q2hpbGQubm9kZVR5cGU/Yi5wdXNoKGYuZmlyc3RDaGlsZC5ub2RlVmFsdWUpOmIucHVzaChpKGYpKSl9cmV0dXJuIGJ9ZnVuY3Rpb24gaigpe3JldHVybiBiLnN0b3AoKSx0aGlzLm5vZGUuc3R5bGUuZm9udFNpemV9dmFyIGs9YS5fLm1ha2UsbD1hLl8ud3JhcCxtPWEuaXMsbj1hLl8uZ2V0U29tZURlZnMsbz0vXnVybFwoKFsnIl0/KShbXildKylcMVwpJC8scD1hLl8uJCxxPWEudXJsLHI9U3RyaW5nLHM9YS5fLnNlcGFyYXRvcix0PSIiO2EuZGV1cmw9ZnVuY3Rpb24oYSl7dmFyIGI9U3RyaW5nKGEpLm1hdGNoKG8pO3JldHVybiBiP2JbMl06YX0sYi5vbigic25hcC51dGlsLmF0dHIubWFzayIsZnVuY3Rpb24oYSl7aWYoYSBpbnN0YW5jZW9mIGN8fGEgaW5zdGFuY2VvZiBmKXtpZihiLnN0b3AoKSxhIGluc3RhbmNlb2YgZiYmMT09YS5ub2RlLmNoaWxkTm9kZXMubGVuZ3RoJiYoYT1hLm5vZGUuZmlyc3RDaGlsZCxuKHRoaXMpLmFwcGVuZENoaWxkKGEpLGE9bChhKSksIm1hc2siPT1hLnR5cGUpdmFyIGQ9YTtlbHNlIGQ9aygibWFzayIsbih0aGlzKSksZC5ub2RlLmFwcGVuZENoaWxkKGEubm9kZSk7IWQubm9kZS5pZCYmcChkLm5vZGUse2lkOmQuaWR9KSxwKHRoaXMubm9kZSx7bWFzazpxKGQuaWQpfSl9fSksZnVuY3Rpb24oYSl7Yi5vbigic25hcC51dGlsLmF0dHIuY2xpcCIsYSksYi5vbigic25hcC51dGlsLmF0dHIuY2xpcC1wYXRoIixhKSxiLm9uKCJzbmFwLnV0aWwuYXR0ci5jbGlwUGF0aCIsYSl9KGZ1bmN0aW9uKGEpe2lmKGEgaW5zdGFuY2VvZiBjfHxhIGluc3RhbmNlb2YgZil7Yi5zdG9wKCk7Zm9yKHZhciBkLGU9YS5ub2RlO2U7KXtpZigiY2xpcFBhdGgiPT09ZS5ub2RlTmFtZSl7ZD1uZXcgYyhlKTticmVha31pZigic3ZnIj09PWUubm9kZU5hbWUpe2Q9dm9pZCAwO2JyZWFrfWU9ZS5wYXJlbnROb2RlfWR8fChkPWsoImNsaXBQYXRoIixuKHRoaXMpKSxkLm5vZGUuYXBwZW5kQ2hpbGQoYS5ub2RlKSwhZC5ub2RlLmlkJiZwKGQubm9kZSx7aWQ6ZC5pZH0pKSxwKHRoaXMubm9kZSx7ImNsaXAtcGF0aCI6cShkLm5vZGUuaWR8fGQuaWQpfSl9fSksYi5vbigic25hcC51dGlsLmF0dHIuZmlsbCIsZygiZmlsbCIpKSxiLm9uKCJzbmFwLnV0aWwuYXR0ci5zdHJva2UiLGcoInN0cm9rZSIpKTt2YXIgdT0vXihbbHJdKSg/OlwoKFteKV0qKVwpKT8oLiopJC9pO2Iub24oInNuYXAudXRpbC5ncmFkLnBhcnNlIixmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7Zm9yKHZhciBjPShiLWgpLyhhLWkpLGQ9aTthPmQ7ZCsrKWZbZF0ub2Zmc2V0PSsoK2grYyooZC1pKSkudG9GaXhlZCgyKTtpPWEsaD1ifWE9cihhKTt2YXIgYz1hLm1hdGNoKHUpO2lmKCFjKXJldHVybiBudWxsO3ZhciBkPWNbMV0sZT1jWzJdLGY9Y1szXTtlPWUuc3BsaXQoL1xzKixccyovKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuK2E9PWE/K2E6YX0pLDE9PWUubGVuZ3RoJiYwPT1lWzBdJiYoZT1bXSksZj1mLnNwbGl0KCItIiksZj1mLm1hcChmdW5jdGlvbihhKXthPWEuc3BsaXQoIjoiKTt2YXIgYj17Y29sb3I6YVswXX07cmV0dXJuIGFbMV0mJihiLm9mZnNldD1wYXJzZUZsb2F0KGFbMV0pKSxifSk7dmFyIGc9Zi5sZW5ndGgsaD0wLGk9MDtnLS07Zm9yKHZhciBqPTA7Zz5qO2orKykib2Zmc2V0ImluIGZbal0mJmIoaixmW2pdLm9mZnNldCk7cmV0dXJuIGZbZ10ub2Zmc2V0PWZbZ10ub2Zmc2V0fHwxMDAsYihnLGZbZ10ub2Zmc2V0KSx7dHlwZTpkLHBhcmFtczplLHN0b3BzOmZ9fSksYi5vbigic25hcC51dGlsLmF0dHIuZCIsZnVuY3Rpb24oYyl7Yi5zdG9wKCksbShjLCJhcnJheSIpJiZtKGNbMF0sImFycmF5IikmJihjPWEucGF0aC50b1N0cmluZy5jYWxsKGMpKSxjPXIoYyksYy5tYXRjaCgvW3J1b10vaSkmJihjPWEucGF0aC50b0Fic29sdXRlKGMpKSxwKHRoaXMubm9kZSx7ZDpjfSl9KSgtMSksYi5vbigic25hcC51dGlsLmF0dHIuI3RleHQiLGZ1bmN0aW9uKGEpe2Iuc3RvcCgpLGE9cihhKTtmb3IodmFyIGM9ZS5kb2MuY3JlYXRlVGV4dE5vZGUoYSk7dGhpcy5ub2RlLmZpcnN0Q2hpbGQ7KXRoaXMubm9kZS5yZW1vdmVDaGlsZCh0aGlzLm5vZGUuZmlyc3RDaGlsZCk7dGhpcy5ub2RlLmFwcGVuZENoaWxkKGMpfSkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLnBhdGgiLGZ1bmN0aW9uKGEpe2Iuc3RvcCgpLHRoaXMuYXR0cih7ZDphfSl9KSgtMSksYi5vbigic25hcC51dGlsLmF0dHIuY2xhc3MiLGZ1bmN0aW9uKGEpe2Iuc3RvcCgpLHRoaXMubm9kZS5jbGFzc05hbWUuYmFzZVZhbD1hfSkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLnZpZXdCb3giLGZ1bmN0aW9uKGEpe3ZhciBjO2M9bShhLCJvYmplY3QiKSYmIngiaW4gYT9bYS54LGEueSxhLndpZHRoLGEuaGVpZ2h0XS5qb2luKCIgIik6bShhLCJhcnJheSIpP2Euam9pbigiICIpOmEscCh0aGlzLm5vZGUse3ZpZXdCb3g6Y30pLGIuc3RvcCgpfSkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLnRyYW5zZm9ybSIsZnVuY3Rpb24oYSl7dGhpcy50cmFuc2Zvcm0oYSksYi5zdG9wKCl9KSgtMSksYi5vbigic25hcC51dGlsLmF0dHIuciIsZnVuY3Rpb24oYSl7InJlY3QiPT10aGlzLnR5cGUmJihiLnN0b3AoKSxwKHRoaXMubm9kZSx7cng6YSxyeTphfSkpfSkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLnRleHRwYXRoIixmdW5jdGlvbihhKXtpZihiLnN0b3AoKSwidGV4dCI9PXRoaXMudHlwZSl7dmFyIGQsZSxmO2lmKCFhJiZ0aGlzLnRleHRQYXRoKXtmb3IoZT10aGlzLnRleHRQYXRoO2Uubm9kZS5maXJzdENoaWxkOyl0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoZS5ub2RlLmZpcnN0Q2hpbGQpO3JldHVybiBlLnJlbW92ZSgpLHZvaWQgZGVsZXRlIHRoaXMudGV4dFBhdGh9aWYobShhLCJzdHJpbmciKSl7dmFyIGc9bih0aGlzKSxoPWwoZy5wYXJlbnROb2RlKS5wYXRoKGEpO2cuYXBwZW5kQ2hpbGQoaC5ub2RlKSxkPWguaWQsaC5hdHRyKHtpZDpkfSl9ZWxzZSBhPWwoYSksYSBpbnN0YW5jZW9mIGMmJihkPWEuYXR0cigiaWQiKSxkfHwoZD1hLmlkLGEuYXR0cih7aWQ6ZH0pKSk7aWYoZClpZihlPXRoaXMudGV4dFBhdGgsZj10aGlzLm5vZGUsZSllLmF0dHIoeyJ4bGluazpocmVmIjoiIyIrZH0pO2Vsc2V7Zm9yKGU9cCgidGV4dFBhdGgiLHsieGxpbms6aHJlZiI6IiMiK2R9KTtmLmZpcnN0Q2hpbGQ7KWUuYXBwZW5kQ2hpbGQoZi5maXJzdENoaWxkKTtmLmFwcGVuZENoaWxkKGUpLHRoaXMudGV4dFBhdGg9bChlKX19fSkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLnRleHQiLGZ1bmN0aW9uKGEpe2lmKCJ0ZXh0Ij09dGhpcy50eXBlKXtmb3IodmFyIGM9dGhpcy5ub2RlLGQ9ZnVuY3Rpb24oYSl7dmFyIGI9cCgidHNwYW4iKTtpZihtKGEsImFycmF5IikpZm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspYi5hcHBlbmRDaGlsZChkKGFbY10pKTtlbHNlIGIuYXBwZW5kQ2hpbGQoZS5kb2MuY3JlYXRlVGV4dE5vZGUoYSkpO3JldHVybiBiLm5vcm1hbGl6ZSYmYi5ub3JtYWxpemUoKSxifTtjLmZpcnN0Q2hpbGQ7KWMucmVtb3ZlQ2hpbGQoYy5maXJzdENoaWxkKTtmb3IodmFyIGY9ZChhKTtmLmZpcnN0Q2hpbGQ7KWMuYXBwZW5kQ2hpbGQoZi5maXJzdENoaWxkKX1iLnN0b3AoKX0pKC0xKSxiLm9uKCJzbmFwLnV0aWwuYXR0ci5mb250U2l6ZSIsaCkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLmZvbnQtc2l6ZSIsaCkoLTEpLGIub24oInNuYXAudXRpbC5nZXRhdHRyLnRyYW5zZm9ybSIsZnVuY3Rpb24oKXtyZXR1cm4gYi5zdG9wKCksdGhpcy50cmFuc2Zvcm0oKX0pKC0xKSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ci50ZXh0cGF0aCIsZnVuY3Rpb24oKXtyZXR1cm4gYi5zdG9wKCksdGhpcy50ZXh0UGF0aH0pKC0xKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGMoYyl7cmV0dXJuIGZ1bmN0aW9uKCl7Yi5zdG9wKCk7dmFyIGQ9ZS5kb2MuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLm5vZGUsbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgibWFya2VyLSIrYyk7cmV0dXJuIm5vbmUiPT1kP2Q6YShlLmRvYy5nZXRFbGVtZW50QnlJZChkLm1hdGNoKG8pWzFdKSl9fWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGZ1bmN0aW9uKGMpe2Iuc3RvcCgpO3ZhciBkPSJtYXJrZXIiK2EuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zdWJzdHJpbmcoMSk7aWYoIiI9PWN8fCFjKXJldHVybiB2b2lkKHRoaXMubm9kZS5zdHlsZVtkXT0ibm9uZSIpO2lmKCJtYXJrZXIiPT1jLnR5cGUpe3ZhciBlPWMubm9kZS5pZDtyZXR1cm4gZXx8cChjLm5vZGUse2lkOmMuaWR9KSx2b2lkKHRoaXMubm9kZS5zdHlsZVtkXT1xKGUpKX19fWIub24oInNuYXAudXRpbC5nZXRhdHRyLm1hcmtlci1lbmQiLGMoImVuZCIpKSgtMSksYi5vbigic25hcC51dGlsLmdldGF0dHIubWFya2VyRW5kIixjKCJlbmQiKSkoLTEpLGIub24oInNuYXAudXRpbC5nZXRhdHRyLm1hcmtlci1zdGFydCIsYygic3RhcnQiKSkoLTEpLGIub24oInNuYXAudXRpbC5nZXRhdHRyLm1hcmtlclN0YXJ0IixjKCJzdGFydCIpKSgtMSksYi5vbigic25hcC51dGlsLmdldGF0dHIubWFya2VyLW1pZCIsYygibWlkIikpKC0xKSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ci5tYXJrZXJNaWQiLGMoIm1pZCIpKSgtMSksYi5vbigic25hcC51dGlsLmF0dHIubWFya2VyLWVuZCIsZCgiZW5kIikpKC0xKSxiLm9uKCJzbmFwLnV0aWwuYXR0ci5tYXJrZXJFbmQiLGQoImVuZCIpKSgtMSksYi5vbigic25hcC51dGlsLmF0dHIubWFya2VyLXN0YXJ0IixkKCJzdGFydCIpKSgtMSksYi5vbigic25hcC51dGlsLmF0dHIubWFya2VyU3RhcnQiLGQoInN0YXJ0IikpKC0xKSxiLm9uKCJzbmFwLnV0aWwuYXR0ci5tYXJrZXItbWlkIixkKCJtaWQiKSkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLm1hcmtlck1pZCIsZCgibWlkIikpKC0xKX0oKSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ci5yIixmdW5jdGlvbigpe3JldHVybiJyZWN0Ij09dGhpcy50eXBlJiZwKHRoaXMubm9kZSwicngiKT09cCh0aGlzLm5vZGUsInJ5Iik/KGIuc3RvcCgpLHAodGhpcy5ub2RlLCJyeCIpKTp2b2lkIDB9KSgtMSksYi5vbigic25hcC51dGlsLmdldGF0dHIudGV4dCIsZnVuY3Rpb24oKXtpZigidGV4dCI9PXRoaXMudHlwZXx8InRzcGFuIj09dGhpcy50eXBlKXtiLnN0b3AoKTt2YXIgYT1pKHRoaXMubm9kZSk7cmV0dXJuIDE9PWEubGVuZ3RoP2FbMF06YX19KSgtMSksYi5vbigic25hcC51dGlsLmdldGF0dHIuI3RleHQiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZS50ZXh0Q29udGVudH0pKC0xKSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ci5maWxsIixmdW5jdGlvbihjKXtpZighYyl7Yi5zdG9wKCk7dmFyIGQ9Yigic25hcC51dGlsLmdldGF0dHIuZmlsbCIsdGhpcywhMCkuZmlyc3REZWZpbmVkKCk7cmV0dXJuIGEoYS5kZXVybChkKSl8fGR9fSkoLTEpLGIub24oInNuYXAudXRpbC5nZXRhdHRyLnN0cm9rZSIsZnVuY3Rpb24oYyl7aWYoIWMpe2Iuc3RvcCgpO3ZhciBkPWIoInNuYXAudXRpbC5nZXRhdHRyLnN0cm9rZSIsdGhpcywhMCkuZmlyc3REZWZpbmVkKCk7cmV0dXJuIGEoYS5kZXVybChkKSl8fGR9fSkoLTEpLGIub24oInNuYXAudXRpbC5nZXRhdHRyLnZpZXdCb3giLGZ1bmN0aW9uKCl7Yi5zdG9wKCk7dmFyIGM9cCh0aGlzLm5vZGUsInZpZXdCb3giKTtyZXR1cm4gYz8oYz1jLnNwbGl0KHMpLGEuXy5ib3goK2NbMF0sK2NbMV0sK2NbMl0sK2NbM10pKTp2b2lkIDB9KSgtMSksYi5vbigic25hcC51dGlsLmdldGF0dHIucG9pbnRzIixmdW5jdGlvbigpe3ZhciBhPXAodGhpcy5ub2RlLCJwb2ludHMiKTtyZXR1cm4gYi5zdG9wKCksYT9hLnNwbGl0KHMpOnZvaWQgMH0pKC0xKSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ci5wYXRoIixmdW5jdGlvbigpe3ZhciBhPXAodGhpcy5ub2RlLCJkIik7cmV0dXJuIGIuc3RvcCgpLGF9KSgtMSksYi5vbigic25hcC51dGlsLmdldGF0dHIuY2xhc3MiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZS5jbGFzc05hbWUuYmFzZVZhbH0pKC0xKSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ci5mb250U2l6ZSIsaikoLTEpLGIub24oInNuYXAudXRpbC5nZXRhdHRyLmZvbnQtc2l6ZSIsaikoLTEpfSksZC5wbHVnaW4oZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj0vXFMrL2csZz1TdHJpbmcsaD1iLnByb3RvdHlwZTtoLmFkZENsYXNzPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGg9ZyhhfHwiIikubWF0Y2goZil8fFtdLGk9dGhpcy5ub2RlLGo9aS5jbGFzc05hbWUuYmFzZVZhbCxrPWoubWF0Y2goZil8fFtdO2lmKGgubGVuZ3RoKXtmb3IoYj0wO2Q9aFtiKytdOyljPWsuaW5kZXhPZihkKSx+Y3x8ay5wdXNoKGQpO2U9ay5qb2luKCIgIiksaiE9ZSYmKGkuY2xhc3NOYW1lLmJhc2VWYWw9ZSl9cmV0dXJuIHRoaXN9LGgucmVtb3ZlQ2xhc3M9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsaD1nKGF8fCIiKS5tYXRjaChmKXx8W10saT10aGlzLm5vZGUsaj1pLmNsYXNzTmFtZS5iYXNlVmFsLGs9ai5tYXRjaChmKXx8W107aWYoay5sZW5ndGgpe2ZvcihiPTA7ZD1oW2IrK107KWM9ay5pbmRleE9mKGQpLH5jJiZrLnNwbGljZShjLDEpO2U9ay5qb2luKCIgIiksaiE9ZSYmKGkuY2xhc3NOYW1lLmJhc2VWYWw9ZSl9cmV0dXJuIHRoaXN9LGguaGFzQ2xhc3M9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5ub2RlLGM9Yi5jbGFzc05hbWUuYmFzZVZhbCxkPWMubWF0Y2goZil8fFtdO3JldHVybiEhfmQuaW5kZXhPZihhKX0saC50b2dnbGVDbGFzcz1mdW5jdGlvbihhLGIpe2lmKG51bGwhPWIpcmV0dXJuIGI/dGhpcy5hZGRDbGFzcyhhKTp0aGlzLnJlbW92ZUNsYXNzKGEpO3ZhciBjLGQsZSxnLGg9KGF8fCIiKS5tYXRjaChmKXx8W10saT10aGlzLm5vZGUsaj1pLmNsYXNzTmFtZS5iYXNlVmFsLGs9ai5tYXRjaChmKXx8W107Zm9yKGM9MDtlPWhbYysrXTspZD1rLmluZGV4T2YoZSksfmQ/ay5zcGxpY2UoZCwxKTprLnB1c2goZSk7cmV0dXJuIGc9ay5qb2luKCIgIiksaiE9ZyYmKGkuY2xhc3NOYW1lLmJhc2VWYWw9ZyksdGhpc319KSxkLnBsdWdpbihmdW5jdGlvbihhLGMsZCxlLGYpe2Z1bmN0aW9uIGcoYSl7cmV0dXJuIGF9ZnVuY3Rpb24gaChhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuK2IudG9GaXhlZCgzKSthfX12YXIgaT17IisiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGErYn0sIi0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEtYn0sIi8iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEvYn0sIioiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEqYn19LGo9U3RyaW5nLGs9L1thLXpdKyQvaSxsPS9eXHMqKFsrXC1cLypdKVxzKj1ccyooW1xkLmVFK1wtXSspXHMqKFteXGRcc10rKT9ccyokLztiLm9uKCJzbmFwLnV0aWwuYXR0ciIsZnVuY3Rpb24oYSl7dmFyIGM9aihhKS5tYXRjaChsKTtpZihjKXt2YXIgZD1iLm50KCksZT1kLnN1YnN0cmluZyhkLmxhc3RJbmRleE9mKCIuIikrMSksZj10aGlzLmF0dHIoZSksZz17fTtiLnN0b3AoKTt2YXIgaD1jWzNdfHwiIixtPWYubWF0Y2goayksbj1pW2NbMV1dO2lmKG0mJm09PWg/YT1uKHBhcnNlRmxvYXQoZiksK2NbMl0pOihmPXRoaXMuYXNQWChlKSxhPW4odGhpcy5hc1BYKGUpLHRoaXMuYXNQWChlLGNbMl0raCkpKSxpc05hTihmKXx8aXNOYU4oYSkpcmV0dXJuO2dbZV09YSx0aGlzLmF0dHIoZyl9fSkoLTEwKSxiLm9uKCJzbmFwLnV0aWwuZXF1YWwiLGZ1bmN0aW9uKGEsYyl7dmFyIGQ9aih0aGlzLmF0dHIoYSl8fCIiKSxlPWooYykubWF0Y2gobCk7aWYoZSl7Yi5zdG9wKCk7dmFyIGY9ZVszXXx8IiIsbT1kLm1hdGNoKGspLG49aVtlWzFdXTtyZXR1cm4gbSYmbT09Zj97ZnJvbTpwYXJzZUZsb2F0KGQpLHRvOm4ocGFyc2VGbG9hdChkKSwrZVsyXSksZjpoKG0pfTooZD10aGlzLmFzUFgoYSkse2Zyb206ZCx0bzpuKGQsdGhpcy5hc1BYKGEsZVsyXStmKSksZjpnfSl9fSkoLTEwKX0pLGQucGx1Z2luKGZ1bmN0aW9uKGMsZCxlLGYsZyl7dmFyIGg9ZS5wcm90b3R5cGUsaT1jLmlzO2gucmVjdD1mdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc7cmV0dXJuIG51bGw9PWYmJihmPWUpLGkoYSwib2JqZWN0IikmJiJbb2JqZWN0IE9iamVjdF0iPT1hP2c9YTpudWxsIT1hJiYoZz17eDphLHk6Yix3aWR0aDpjLGhlaWdodDpkfSxudWxsIT1lJiYoZy5yeD1lLGcucnk9ZikpLHRoaXMuZWwoInJlY3QiLGcpfSxoLmNpcmNsZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGkoYSwib2JqZWN0IikmJiJbb2JqZWN0IE9iamVjdF0iPT1hP2Q9YTpudWxsIT1hJiYoZD17Y3g6YSxjeTpiLHI6Y30pLHRoaXMuZWwoImNpcmNsZSIsZCl9O3ZhciBqPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3RoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzKX1yZXR1cm4gZnVuY3Rpb24oYixjKXt2YXIgZD1mLmRvYy5jcmVhdGVFbGVtZW50KCJpbWciKSxlPWYuZG9jLmJvZHk7ZC5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi05OTk5ZW07dG9wOi05OTk5ZW0iLGQub25sb2FkPWZ1bmN0aW9uKCl7Yy5jYWxsKGQpLGQub25sb2FkPWQub25lcnJvcj1udWxsLGUucmVtb3ZlQ2hpbGQoZCl9LGQub25lcnJvcj1hLGUuYXBwZW5kQ2hpbGQoZCksZC5zcmM9Yn19KCk7aC5pbWFnZT1mdW5jdGlvbihhLGIsZCxlLGYpe3ZhciBnPXRoaXMuZWwoImltYWdlIik7aWYoaShhLCJvYmplY3QiKSYmInNyYyJpbiBhKWcuYXR0cihhKTtlbHNlIGlmKG51bGwhPWEpe3ZhciBoPXsieGxpbms6aHJlZiI6YSxwcmVzZXJ2ZUFzcGVjdFJhdGlvOiJub25lIn07bnVsbCE9YiYmbnVsbCE9ZCYmKGgueD1iLGgueT1kKSxudWxsIT1lJiZudWxsIT1mPyhoLndpZHRoPWUsaC5oZWlnaHQ9Zik6aihhLGZ1bmN0aW9uKCl7Yy5fLiQoZy5ub2RlLHt3aWR0aDp0aGlzLm9mZnNldFdpZHRoLGhlaWdodDp0aGlzLm9mZnNldEhlaWdodH0pfSksYy5fLiQoZy5ub2RlLGgpfXJldHVybiBnfSxoLmVsbGlwc2U9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU7cmV0dXJuIGkoYSwib2JqZWN0IikmJiJbb2JqZWN0IE9iamVjdF0iPT1hP2U9YTpudWxsIT1hJiYoZT17Y3g6YSxjeTpiLHJ4OmMscnk6ZH0pLHRoaXMuZWwoImVsbGlwc2UiLGUpfSxoLnBhdGg9ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIGkoYSwib2JqZWN0IikmJiFpKGEsImFycmF5Iik/Yj1hOmEmJihiPXtkOmF9KSx0aGlzLmVsKCJwYXRoIixiKX0saC5ncm91cD1oLmc9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbCgiZyIpO3JldHVybiAxPT1hcmd1bWVudHMubGVuZ3RoJiZhJiYhYS50eXBlP2IuYXR0cihhKTphcmd1bWVudHMubGVuZ3RoJiZiLmFkZChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCkpLGJ9LGguc3ZnPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCl7dmFyIGo9e307cmV0dXJuIGkoYSwib2JqZWN0IikmJm51bGw9PWI/aj1hOihudWxsIT1hJiYoai54PWEpLG51bGwhPWImJihqLnk9YiksbnVsbCE9YyYmKGoud2lkdGg9YyksbnVsbCE9ZCYmKGouaGVpZ2h0PWQpLG51bGwhPWUmJm51bGwhPWYmJm51bGwhPWcmJm51bGwhPWgmJihqLnZpZXdCb3g9W2UsZixnLGhdKSksdGhpcy5lbCgic3ZnIixqKX0saC5tYXNrPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWwoIm1hc2siKTtyZXR1cm4gMT09YXJndW1lbnRzLmxlbmd0aCYmYSYmIWEudHlwZT9iLmF0dHIoYSk6YXJndW1lbnRzLmxlbmd0aCYmYi5hZGQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApKSxifSxoLnB0cm49ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXtpZihpKGEsIm9iamVjdCIpKXZhciBqPWE7ZWxzZSBqPXtwYXR0ZXJuVW5pdHM6InVzZXJTcGFjZU9uVXNlIn0sYSYmKGoueD1hKSxiJiYoai55PWIpLG51bGwhPWMmJihqLndpZHRoPWMpLG51bGwhPWQmJihqLmhlaWdodD1kKSxudWxsIT1lJiZudWxsIT1mJiZudWxsIT1nJiZudWxsIT1oP2oudmlld0JveD1bZSxmLGcsaF06ai52aWV3Qm94PVthfHwwLGJ8fDAsY3x8MCxkfHwwXTtyZXR1cm4gdGhpcy5lbCgicGF0dGVybiIsail9LGgudXNlPWZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hPyhhIGluc3RhbmNlb2YgZCYmKGEuYXR0cigiaWQiKXx8YS5hdHRyKHtpZDpjLl8uaWQoYSl9KSxhPWEuYXR0cigiaWQiKSksIiMiPT1TdHJpbmcoYSkuY2hhckF0KCkmJihhPWEuc3Vic3RyaW5nKDEpKSx0aGlzLmVsKCJ1c2UiLHsieGxpbms6aHJlZiI6IiMiK2F9KSk6ZC5wcm90b3R5cGUudXNlLmNhbGwodGhpcyl9LGguc3ltYm9sPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXt9O3JldHVybiBudWxsIT1hJiZudWxsIT1iJiZudWxsIT1jJiZudWxsIT1kJiYoZS52aWV3Qm94PVthLGIsYyxkXSksdGhpcy5lbCgic3ltYm9sIixlKX0saC50ZXh0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD17fTtyZXR1cm4gaShhLCJvYmplY3QiKT9kPWE6bnVsbCE9YSYmKGQ9e3g6YSx5OmIsdGV4dDpjfHwiIn0pLHRoaXMuZWwoInRleHQiLGQpfSxoLmxpbmU9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9e307cmV0dXJuIGkoYSwib2JqZWN0Iik/ZT1hOm51bGwhPWEmJihlPXt4MTphLHgyOmMseTE6Yix5MjpkfSksdGhpcy5lbCgibGluZSIsZSl9LGgucG9seWxpbmU9ZnVuY3Rpb24oYSl7YXJndW1lbnRzLmxlbmd0aD4xJiYoYT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCkpO3ZhciBiPXt9O3JldHVybiBpKGEsIm9iamVjdCIpJiYhaShhLCJhcnJheSIpP2I9YTpudWxsIT1hJiYoYj17cG9pbnRzOmF9KSx0aGlzLmVsKCJwb2x5bGluZSIsYil9LGgucG9seWdvbj1mdW5jdGlvbihhKXthcmd1bWVudHMubGVuZ3RoPjEmJihhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSk7dmFyIGI9e307cmV0dXJuIGkoYSwib2JqZWN0IikmJiFpKGEsImFycmF5Iik/Yj1hOm51bGwhPWEmJihiPXtwb2ludHM6YX0pLHRoaXMuZWwoInBvbHlnb24iLGIpfSxmdW5jdGlvbigpe2Z1bmN0aW9uIGQoKXtyZXR1cm4gdGhpcy5zZWxlY3RBbGwoInN0b3AiKX1mdW5jdGlvbiBlKGEsYil7dmFyIGQ9bCgic3RvcCIpLGU9e29mZnNldDorYisiJSJ9O2E9Yy5jb2xvcihhKSxlWyJzdG9wLWNvbG9yIl09YS5oZXgsYS5vcGFjaXR5PDEmJihlWyJzdG9wLW9wYWNpdHkiXT1hLm9wYWNpdHkpLGwoZCxlKTtmb3IodmFyIGYsZz10aGlzLnN0b3BzKCksaD0wO2g8Zy5sZW5ndGg7aCsrKXt2YXIgaT1wYXJzZUZsb2F0KGdbaF0uYXR0cigib2Zmc2V0IikpO2lmKGk+Yil7dGhpcy5ub2RlLmluc2VydEJlZm9yZShkLGdbaF0ubm9kZSksZj0hMDticmVha319cmV0dXJuIGZ8fHRoaXMubm9kZS5hcHBlbmRDaGlsZChkKSx0aGlzfWZ1bmN0aW9uIGYoKXtpZigibGluZWFyR3JhZGllbnQiPT10aGlzLnR5cGUpe3ZhciBhPWwodGhpcy5ub2RlLCJ4MSIpfHwwLGI9bCh0aGlzLm5vZGUsIngyIil8fDEsZD1sKHRoaXMubm9kZSwieTEiKXx8MCxlPWwodGhpcy5ub2RlLCJ5MiIpfHwwO3JldHVybiBjLl8uYm94KGEsZCxtYXRoLmFicyhiLWEpLG1hdGguYWJzKGUtZCkpfXZhciBmPXRoaXMubm9kZS5jeHx8LjUsZz10aGlzLm5vZGUuY3l8fC41LGg9dGhpcy5ub2RlLnJ8fDA7cmV0dXJuIGMuXy5ib3goZi1oLGctaCwyKmgsMipoKX1mdW5jdGlvbiBnKGEpe3ZhciBkPWEsZT10aGlzLnN0b3BzKCk7aWYoInN0cmluZyI9PXR5cGVvZiBhJiYoZD1iKCJzbmFwLnV0aWwuZ3JhZC5wYXJzZSIsbnVsbCwibCgwLDAsMCwxKSIrYSkuZmlyc3REZWZpbmVkKCkuc3RvcHMpLGMuaXMoZCwiYXJyYXkiKSl7Zm9yKHZhciBmPTA7ZjxlLmxlbmd0aDtmKyspaWYoZFtmXSl7dmFyIGc9Yy5jb2xvcihkW2ZdLmNvbG9yKSxoPXtvZmZzZXQ6ZFtmXS5vZmZzZXQrIiUifTtoWyJzdG9wLWNvbG9yIl09Zy5oZXgsZy5vcGFjaXR5PDEmJihoWyJzdG9wLW9wYWNpdHkiXT1nLm9wYWNpdHkpLGVbZl0uYXR0cihoKX1lbHNlIGVbZl0ucmVtb3ZlKCk7Zm9yKGY9ZS5sZW5ndGg7ZjxkLmxlbmd0aDtmKyspdGhpcy5hZGRTdG9wKGRbZl0uY29sb3IsZFtmXS5vZmZzZXQpO3JldHVybiB0aGlzfX1mdW5jdGlvbiBpKGEsYyl7dmFyIGQsZT1iKCJzbmFwLnV0aWwuZ3JhZC5wYXJzZSIsbnVsbCxjKS5maXJzdERlZmluZWQoKTtpZighZSlyZXR1cm4gbnVsbDtlLnBhcmFtcy51bnNoaWZ0KGEpLGQ9ImwiPT1lLnR5cGUudG9Mb3dlckNhc2UoKT9qLmFwcGx5KDAsZS5wYXJhbXMpOmsuYXBwbHkoMCxlLnBhcmFtcyksZS50eXBlIT1lLnR5cGUudG9Mb3dlckNhc2UoKSYmbChkLm5vZGUse2dyYWRpZW50VW5pdHM6InVzZXJTcGFjZU9uVXNlIn0pO2Zvcih2YXIgZj1lLnN0b3BzLGc9Zi5sZW5ndGgsaD0wO2c+aDtoKyspe3ZhciBpPWZbaF07ZC5hZGRTdG9wKGkuY29sb3IsaS5vZmZzZXQpfXJldHVybiBkfWZ1bmN0aW9uIGooYSxiLGgsaSxqKXt2YXIgaz1jLl8ubWFrZSgibGluZWFyR3JhZGllbnQiLGEpO3JldHVybiBrLnN0b3BzPWQsay5hZGRTdG9wPWUsay5nZXRCQm94PWYsay5zZXRTdG9wcz1nLG51bGwhPWImJmwoay5ub2RlLHt4MTpiLHkxOmgseDI6aSx5MjpqfSksa31mdW5jdGlvbiBrKGEsYixnLGgsaSxqKXt2YXIgaz1jLl8ubWFrZSgicmFkaWFsR3JhZGllbnQiLGEpO3JldHVybiBrLnN0b3BzPWQsay5hZGRTdG9wPWUsay5nZXRCQm94PWYsbnVsbCE9YiYmbChrLm5vZGUse2N4OmIsY3k6ZyxyOmh9KSxudWxsIT1pJiZudWxsIT1qJiZsKGsubm9kZSx7Zng6aSxmeTpqfSksa312YXIgbD1jLl8uJDtoLmdyYWRpZW50PWZ1bmN0aW9uKGEpe3JldHVybiBpKHRoaXMuZGVmcyxhKX0saC5ncmFkaWVudExpbmVhcj1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gaih0aGlzLmRlZnMsYSxiLGMsZCl9LGguZ3JhZGllbnRSYWRpYWw9ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gayh0aGlzLmRlZnMsYSxiLGMsZCxlKX0saC50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBhLGI9dGhpcy5ub2RlLm93bmVyRG9jdW1lbnQsZD1iLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxlPWIuY3JlYXRlRWxlbWVudCgiZGl2IiksZj10aGlzLm5vZGUuY2xvbmVOb2RlKCEwKTtyZXR1cm4gZC5hcHBlbmRDaGlsZChlKSxlLmFwcGVuZENoaWxkKGYpLGMuXy4kKGYse3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyJ9KSxhPWUuaW5uZXJIVE1MLGQucmVtb3ZlQ2hpbGQoZC5maXJzdENoaWxkKSxhfSxoLnRvRGF0YVVSTD1mdW5jdGlvbigpe3JldHVybiBhJiZhLmJ0b2E/ImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsIitidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudCh0aGlzKSkpOnZvaWQgMH0saC5jbGVhcj1mdW5jdGlvbigpe2Zvcih2YXIgYSxiPXRoaXMubm9kZS5maXJzdENoaWxkO2I7KWE9Yi5uZXh0U2libGluZywiZGVmcyIhPWIudGFnTmFtZT9iLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYik6aC5jbGVhci5jYWxsKHtub2RlOmJ9KSxiPWF9fSgpfSksZC5wbHVnaW4oZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZShhKXt2YXIgYj1lLnBzPWUucHN8fHt9O3JldHVybiBiW2FdP2JbYV0uc2xlZXA9MTAwOmJbYV09e3NsZWVwOjEwMH0sc2V0VGltZW91dChmdW5jdGlvbigpe2Zvcih2YXIgYyBpbiBiKWJbTV0oYykmJmMhPWEmJihiW2NdLnNsZWVwLS0sIWJbY10uc2xlZXAmJmRlbGV0ZSBiW2NdKX0pLGJbYV19ZnVuY3Rpb24gZihhLGIsYyxkKXtyZXR1cm4gbnVsbD09YSYmKGE9Yj1jPWQ9MCksbnVsbD09YiYmKGI9YS55LGM9YS53aWR0aCxkPWEuaGVpZ2h0LGE9YS54KSx7eDphLHk6Yix3aWR0aDpjLHc6YyxoZWlnaHQ6ZCxoOmQseDI6YStjLHkyOmIrZCxjeDphK2MvMixjeTpiK2QvMixyMTpQLm1pbihjLGQpLzIscjI6UC5tYXgoYyxkKS8yLHIwOlAuc3FydChjKmMrZCpkKS8yLHBhdGg6eShhLGIsYyxkKSx2YjpbYSxiLGMsZF0uam9pbigiICIpfX1mdW5jdGlvbiBnKCl7cmV0dXJuIHRoaXMuam9pbigiLCIpLnJlcGxhY2UoTiwiJDEiKX1mdW5jdGlvbiBoKGEpe3ZhciBiPUwoYSk7cmV0dXJuIGIudG9TdHJpbmc9ZyxifWZ1bmN0aW9uIGkoYSxiLGMsZCxlLGYsZyxoLGkpe3JldHVybiBudWxsPT1pP3AoYSxiLGMsZCxlLGYsZyxoKTprKGEsYixjLGQsZSxmLGcsaCxxKGEsYixjLGQsZSxmLGcsaCxpKSl9ZnVuY3Rpb24gaihjLGQpe2Z1bmN0aW9uIGUoYSl7cmV0dXJuKygrYSkudG9GaXhlZCgzKX1yZXR1cm4gYS5fLmNhY2hlcihmdW5jdGlvbihhLGYsZyl7YSBpbnN0YW5jZW9mIGImJihhPWEuYXR0cigiZCIpKSxhPUcoYSk7Zm9yKHZhciBoLGosbCxtLG4sbz0iIixwPXt9LHE9MCxyPTAscz1hLmxlbmd0aDtzPnI7cisrKXtpZihsPWFbcl0sIk0iPT1sWzBdKWg9K2xbMV0saj0rbFsyXTtlbHNle2lmKG09aShoLGosbFsxXSxsWzJdLGxbM10sbFs0XSxsWzVdLGxbNl0pLHErbT5mKXtpZihkJiYhcC5zdGFydCl7aWYobj1pKGgsaixsWzFdLGxbMl0sbFszXSxsWzRdLGxbNV0sbFs2XSxmLXEpLG8rPVsiQyIrZShuLnN0YXJ0LngpLGUobi5zdGFydC55KSxlKG4ubS54KSxlKG4ubS55KSxlKG4ueCksZShuLnkpXSxnKXJldHVybiBvO3Auc3RhcnQ9byxvPVsiTSIrZShuLngpLGUobi55KSsiQyIrZShuLm4ueCksZShuLm4ueSksZShuLmVuZC54KSxlKG4uZW5kLnkpLGUobFs1XSksZShsWzZdKV0uam9pbigpLHErPW0saD0rbFs1XSxqPStsWzZdO2NvbnRpbnVlfWlmKCFjJiYhZClyZXR1cm4gbj1pKGgsaixsWzFdLGxbMl0sbFszXSxsWzRdLGxbNV0sbFs2XSxmLXEpfXErPW0saD0rbFs1XSxqPStsWzZdfW8rPWwuc2hpZnQoKStsfXJldHVybiBwLmVuZD1vLG49Yz9xOmQ/cDprKGgsaixsWzBdLGxbMV0sbFsyXSxsWzNdLGxbNF0sbFs1XSwxKX0sbnVsbCxhLl8uY2xvbmUpfWZ1bmN0aW9uIGsoYSxiLGMsZCxlLGYsZyxoLGkpe3ZhciBqPTEtaSxrPVQoaiwzKSxsPVQoaiwyKSxtPWkqaSxuPW0qaSxvPWsqYSszKmwqaSpjKzMqaippKmkqZStuKmcscD1rKmIrMypsKmkqZCszKmoqaSppKmYrbipoLHE9YSsyKmkqKGMtYSkrbSooZS0yKmMrYSkscj1iKzIqaSooZC1iKSttKihmLTIqZCtiKSxzPWMrMippKihlLWMpK20qKGctMiplK2MpLHQ9ZCsyKmkqKGYtZCkrbSooaC0yKmYrZCksdT1qKmEraSpjLHY9aipiK2kqZCx3PWoqZStpKmcseD1qKmYraSpoLHk9OTAtMTgwKlAuYXRhbjIocS1zLHItdCkvUTtyZXR1cm57eDpvLHk6cCxtOnt4OnEseTpyfSxuOnt4OnMseTp0fSxzdGFydDp7eDp1LHk6dn0sZW5kOnt4OncseTp4fSxhbHBoYTp5fX1mdW5jdGlvbiBsKGIsYyxkLGUsZyxoLGksail7YS5pcyhiLCJhcnJheSIpfHwoYj1bYixjLGQsZSxnLGgsaSxqXSk7dmFyIGs9Ri5hcHBseShudWxsLGIpO3JldHVybiBmKGsubWluLngsay5taW4ueSxrLm1heC54LWsubWluLngsay5tYXgueS1rLm1pbi55KX1mdW5jdGlvbiBtKGEsYixjKXtyZXR1cm4gYj49YS54JiZiPD1hLngrYS53aWR0aCYmYz49YS55JiZjPD1hLnkrYS5oZWlnaHR9ZnVuY3Rpb24gbihhLGIpe3JldHVybiBhPWYoYSksYj1mKGIpLG0oYixhLngsYS55KXx8bShiLGEueDIsYS55KXx8bShiLGEueCxhLnkyKXx8bShiLGEueDIsYS55Mil8fG0oYSxiLngsYi55KXx8bShhLGIueDIsYi55KXx8bShhLGIueCxiLnkyKXx8bShhLGIueDIsYi55Mil8fChhLng8Yi54MiYmYS54PmIueHx8Yi54PGEueDImJmIueD5hLngpJiYoYS55PGIueTImJmEueT5iLnl8fGIueTxhLnkyJiZiLnk+YS55KX1mdW5jdGlvbiBvKGEsYixjLGQsZSl7dmFyIGY9LTMqYis5KmMtOSpkKzMqZSxnPWEqZis2KmItMTIqYys2KmQ7cmV0dXJuIGEqZy0zKmIrMypjfWZ1bmN0aW9uIHAoYSxiLGMsZCxlLGYsZyxoLGkpe251bGw9PWkmJihpPTEpLGk9aT4xPzE6MD5pPzA6aTtmb3IodmFyIGo9aS8yLGs9MTIsbD1bLS4xMjUyLC4xMjUyLC0uMzY3OCwuMzY3OCwtLjU4NzMsLjU4NzMsLS43Njk5LC43Njk5LC0uOTA0MSwuOTA0MSwtLjk4MTYsLjk4MTZdLG09Wy4yNDkxLC4yNDkxLC4yMzM1LC4yMzM1LC4yMDMyLC4yMDMyLC4xNjAxLC4xNjAxLC4xMDY5LC4xMDY5LC4wNDcyLC4wNDcyXSxuPTAscD0wO2s+cDtwKyspe3ZhciBxPWoqbFtwXStqLHI9byhxLGEsYyxlLGcpLHM9byhxLGIsZCxmLGgpLHQ9cipyK3MqcztuKz1tW3BdKlAuc3FydCh0KX1yZXR1cm4gaipufWZ1bmN0aW9uIHEoYSxiLGMsZCxlLGYsZyxoLGkpe2lmKCEoMD5pfHxwKGEsYixjLGQsZSxmLGcsaCk8aSkpe3ZhciBqLGs9MSxsPWsvMixtPWstbCxuPS4wMTtmb3Ioaj1wKGEsYixjLGQsZSxmLGcsaCxtKTtVKGotaSk+bjspbC89MixtKz0oaT5qPzE6LTEpKmwsaj1wKGEsYixjLGQsZSxmLGcsaCxtKTtyZXR1cm4gbX19ZnVuY3Rpb24gcihhLGIsYyxkLGUsZixnLGgpe2lmKCEoUyhhLGMpPFIoZSxnKXx8UihhLGMpPlMoZSxnKXx8UyhiLGQpPFIoZixoKXx8UihiLGQpPlMoZixoKSkpe3ZhciBpPShhKmQtYipjKSooZS1nKS0oYS1jKSooZSpoLWYqZyksaj0oYSpkLWIqYykqKGYtaCktKGItZCkqKGUqaC1mKmcpLGs9KGEtYykqKGYtaCktKGItZCkqKGUtZyk7aWYoayl7dmFyIGw9aS9rLG09ai9rLG49K2wudG9GaXhlZCgyKSxvPSttLnRvRml4ZWQoMik7aWYoIShuPCtSKGEsYykudG9GaXhlZCgyKXx8bj4rUyhhLGMpLnRvRml4ZWQoMil8fG48K1IoZSxnKS50b0ZpeGVkKDIpfHxuPitTKGUsZykudG9GaXhlZCgyKXx8bzwrUihiLGQpLnRvRml4ZWQoMil8fG8+K1MoYixkKS50b0ZpeGVkKDIpfHxvPCtSKGYsaCkudG9GaXhlZCgyKXx8bz4rUyhmLGgpLnRvRml4ZWQoMikpKXJldHVybnt4OmwseTptfX19fWZ1bmN0aW9uIHMoYSxiLGMpe3ZhciBkPWwoYSksZT1sKGIpO2lmKCFuKGQsZSkpcmV0dXJuIGM/MDpbXTtmb3IodmFyIGY9cC5hcHBseSgwLGEpLGc9cC5hcHBseSgwLGIpLGg9fn4oZi84KSxpPX5+KGcvOCksaj1bXSxtPVtdLG89e30scT1jPzA6W10scz0wO2grMT5zO3MrKyl7dmFyIHQ9ay5hcHBseSgwLGEuY29uY2F0KHMvaCkpO2oucHVzaCh7eDp0LngseTp0LnksdDpzL2h9KX1mb3Iocz0wO2krMT5zO3MrKyl0PWsuYXBwbHkoMCxiLmNvbmNhdChzL2kpKSxtLnB1c2goe3g6dC54LHk6dC55LHQ6cy9pfSk7Zm9yKHM9MDtoPnM7cysrKWZvcih2YXIgdT0wO2k+dTt1Kyspe3ZhciB2PWpbc10sdz1qW3MrMV0seD1tW3VdLHk9bVt1KzFdLHo9VSh3Lngtdi54KTwuMDAxPyJ5IjoieCIsQT1VKHkueC14LngpPC4wMDE/InkiOiJ4IixCPXIodi54LHYueSx3Lngsdy55LHgueCx4LnkseS54LHkueSk7aWYoQil7aWYob1tCLngudG9GaXhlZCg0KV09PUIueS50b0ZpeGVkKDQpKWNvbnRpbnVlO29bQi54LnRvRml4ZWQoNCldPUIueS50b0ZpeGVkKDQpO3ZhciBDPXYudCtVKChCW3pdLXZbel0pLyh3W3pdLXZbel0pKSoody50LXYudCksRD14LnQrVSgoQltBXS14W0FdKS8oeVtBXS14W0FdKSkqKHkudC14LnQpO0M+PTAmJjE+PUMmJkQ+PTAmJjE+PUQmJihjP3ErKzpxLnB1c2goe3g6Qi54LHk6Qi55LHQxOkMsdDI6RH0pKX19cmV0dXJuIHF9ZnVuY3Rpb24gdChhLGIpe3JldHVybiB2KGEsYil9ZnVuY3Rpb24gdShhLGIpe3JldHVybiB2KGEsYiwxKX1mdW5jdGlvbiB2KGEsYixjKXthPUcoYSksYj1HKGIpO2Zvcih2YXIgZCxlLGYsZyxoLGksaixrLGwsbSxuPWM/MDpbXSxvPTAscD1hLmxlbmd0aDtwPm87bysrKXt2YXIgcT1hW29dO2lmKCJNIj09cVswXSlkPWg9cVsxXSxlPWk9cVsyXTtlbHNleyJDIj09cVswXT8obD1bZCxlXS5jb25jYXQocS5zbGljZSgxKSksZD1sWzZdLGU9bFs3XSk6KGw9W2QsZSxkLGUsaCxpLGgsaV0sZD1oLGU9aSk7Zm9yKHZhciByPTAsdD1iLmxlbmd0aDt0PnI7cisrKXt2YXIgdT1iW3JdO2lmKCJNIj09dVswXSlmPWo9dVsxXSxnPWs9dVsyXTtlbHNleyJDIj09dVswXT8obT1bZixnXS5jb25jYXQodS5zbGljZSgxKSksZj1tWzZdLGc9bVs3XSk6KG09W2YsZyxmLGcsaixrLGosa10sZj1qLGc9ayk7dmFyIHY9cyhsLG0sYyk7aWYoYyluKz12O2Vsc2V7Zm9yKHZhciB3PTAseD12Lmxlbmd0aDt4Pnc7dysrKXZbd10uc2VnbWVudDE9byx2W3ddLnNlZ21lbnQyPXIsdlt3XS5iZXoxPWwsdlt3XS5iZXoyPW07bj1uLmNvbmNhdCh2KX19fX19cmV0dXJuIG59ZnVuY3Rpb24gdyhhLGIsYyl7dmFyIGQ9eChhKTtyZXR1cm4gbShkLGIsYykmJnYoYSxbWyJNIixiLGNdLFsiSCIsZC54MisxMF1dLDEpJTI9PTF9ZnVuY3Rpb24geChhKXt2YXIgYj1lKGEpO2lmKGIuYmJveClyZXR1cm4gTChiLmJib3gpO2lmKCFhKXJldHVybiBmKCk7YT1HKGEpO2Zvcih2YXIgYyxkPTAsZz0wLGg9W10saT1bXSxqPTAsaz1hLmxlbmd0aDtrPmo7aisrKWlmKGM9YVtqXSwiTSI9PWNbMF0pZD1jWzFdLGc9Y1syXSxoLnB1c2goZCksaS5wdXNoKGcpO2Vsc2V7dmFyIGw9RihkLGcsY1sxXSxjWzJdLGNbM10sY1s0XSxjWzVdLGNbNl0pO2g9aC5jb25jYXQobC5taW4ueCxsLm1heC54KSxpPWkuY29uY2F0KGwubWluLnksbC5tYXgueSksZD1jWzVdLGc9Y1s2XX12YXIgbT1SLmFwcGx5KDAsaCksbj1SLmFwcGx5KDAsaSksbz1TLmFwcGx5KDAsaCkscD1TLmFwcGx5KDAsaSkscT1mKG0sbixvLW0scC1uKTtyZXR1cm4gYi5iYm94PUwocSkscX1mdW5jdGlvbiB5KGEsYixjLGQsZSl7aWYoZSlyZXR1cm5bWyJNIiwrYSsgK2UsYl0sWyJsIixjLTIqZSwwXSxbImEiLGUsZSwwLDAsMSxlLGVdLFsibCIsMCxkLTIqZV0sWyJhIixlLGUsMCwwLDEsLWUsZV0sWyJsIiwyKmUtYywwXSxbImEiLGUsZSwwLDAsMSwtZSwtZV0sWyJsIiwwLDIqZS1kXSxbImEiLGUsZSwwLDAsMSxlLC1lXSxbInoiXV07dmFyIGY9W1siTSIsYSxiXSxbImwiLGMsMF0sWyJsIiwwLGRdLFsibCIsLWMsMF0sWyJ6Il1dO3JldHVybiBmLnRvU3RyaW5nPWcsZn1mdW5jdGlvbiB6KGEsYixjLGQsZSl7aWYobnVsbD09ZSYmbnVsbD09ZCYmKGQ9YyksYT0rYSxiPStiLGM9K2MsZD0rZCxudWxsIT1lKXZhciBmPU1hdGguUEkvMTgwLGg9YStjKk1hdGguY29zKC1kKmYpLGk9YStjKk1hdGguY29zKC1lKmYpLGo9YitjKk1hdGguc2luKC1kKmYpLGs9YitjKk1hdGguc2luKC1lKmYpLGw9W1siTSIsaCxqXSxbIkEiLGMsYywwLCsoZS1kPjE4MCksMCxpLGtdXTtlbHNlIGw9W1siTSIsYSxiXSxbIm0iLDAsLWRdLFsiYSIsYyxkLDAsMSwxLDAsMipkXSxbImEiLGMsZCwwLDEsMSwwLC0yKmRdLFsieiJdXTtyZXR1cm4gbC50b1N0cmluZz1nLGx9ZnVuY3Rpb24gQShiKXt2YXIgYz1lKGIpLGQ9U3RyaW5nLnByb3RvdHlwZS50b0xvd2VyQ2FzZTtpZihjLnJlbClyZXR1cm4gaChjLnJlbCk7YS5pcyhiLCJhcnJheSIpJiZhLmlzKGImJmJbMF0sImFycmF5Iil8fChiPWEucGFyc2VQYXRoU3RyaW5nKGIpKTt2YXIgZj1bXSxpPTAsaj0wLGs9MCxsPTAsbT0wOyJNIj09YlswXVswXSYmKGk9YlswXVsxXSxqPWJbMF1bMl0saz1pLGw9aixtKyssZi5wdXNoKFsiTSIsaSxqXSkpO2Zvcih2YXIgbj1tLG89Yi5sZW5ndGg7bz5uO24rKyl7dmFyIHA9ZltuXT1bXSxxPWJbbl07aWYocVswXSE9ZC5jYWxsKHFbMF0pKXN3aXRjaChwWzBdPWQuY2FsbChxWzBdKSxwWzBdKXtjYXNlImEiOnBbMV09cVsxXSxwWzJdPXFbMl0scFszXT1xWzNdLHBbNF09cVs0XSxwWzVdPXFbNV0scFs2XT0rKHFbNl0taSkudG9GaXhlZCgzKSxwWzddPSsocVs3XS1qKS50b0ZpeGVkKDMpO2JyZWFrO2Nhc2UidiI6cFsxXT0rKHFbMV0taikudG9GaXhlZCgzKTticmVhaztjYXNlIm0iOms9cVsxXSxsPXFbMl07ZGVmYXVsdDpmb3IodmFyIHI9MSxzPXEubGVuZ3RoO3M+cjtyKyspcFtyXT0rKHFbcl0tKHIlMj9pOmopKS50b0ZpeGVkKDMpfWVsc2V7cD1mW25dPVtdLCJtIj09cVswXSYmKGs9cVsxXStpLGw9cVsyXStqKTtmb3IodmFyIHQ9MCx1PXEubGVuZ3RoO3U+dDt0KyspZltuXVt0XT1xW3RdfXZhciB2PWZbbl0ubGVuZ3RoO3N3aXRjaChmW25dWzBdKXtjYXNlInoiOmk9ayxqPWw7YnJlYWs7Y2FzZSJoIjppKz0rZltuXVt2LTFdO2JyZWFrO2Nhc2UidiI6ais9K2Zbbl1bdi0xXTticmVhaztkZWZhdWx0OmkrPStmW25dW3YtMl0sais9K2Zbbl1bdi0xXX19cmV0dXJuIGYudG9TdHJpbmc9ZyxjLnJlbD1oKGYpLGZ9ZnVuY3Rpb24gQihiKXt2YXIgYz1lKGIpO2lmKGMuYWJzKXJldHVybiBoKGMuYWJzKTtpZihLKGIsImFycmF5IikmJksoYiYmYlswXSwiYXJyYXkiKXx8KGI9YS5wYXJzZVBhdGhTdHJpbmcoYikpLCFifHwhYi5sZW5ndGgpcmV0dXJuW1siTSIsMCwwXV07dmFyIGQsZj1bXSxpPTAsaj0wLGs9MCxsPTAsbT0wOyJNIj09YlswXVswXSYmKGk9K2JbMF1bMV0saj0rYlswXVsyXSxrPWksbD1qLG0rKyxmWzBdPVsiTSIsaSxqXSk7Zm9yKHZhciBuLG8scD0zPT1iLmxlbmd0aCYmIk0iPT1iWzBdWzBdJiYiUiI9PWJbMV1bMF0udG9VcHBlckNhc2UoKSYmIloiPT1iWzJdWzBdLnRvVXBwZXJDYXNlKCkscT1tLHI9Yi5sZW5ndGg7cj5xO3ErKyl7aWYoZi5wdXNoKG49W10pLG89YltxXSxkPW9bMF0sZCE9ZC50b1VwcGVyQ2FzZSgpKXN3aXRjaChuWzBdPWQudG9VcHBlckNhc2UoKSxuWzBdKXtjYXNlIkEiOm5bMV09b1sxXSxuWzJdPW9bMl0sblszXT1vWzNdLG5bNF09b1s0XSxuWzVdPW9bNV0sbls2XT0rb1s2XStpLG5bN109K29bN10rajticmVhaztjYXNlIlYiOm5bMV09K29bMV0rajticmVhaztjYXNlIkgiOm5bMV09K29bMV0raTticmVhaztjYXNlIlIiOmZvcih2YXIgcz1baSxqXS5jb25jYXQoby5zbGljZSgxKSksdD0yLHU9cy5sZW5ndGg7dT50O3QrKylzW3RdPStzW3RdK2ksc1srK3RdPStzW3RdK2o7Zi5wb3AoKSxmPWYuY29uY2F0KEkocyxwKSk7YnJlYWs7Y2FzZSJPIjpmLnBvcCgpLHM9eihpLGosb1sxXSxvWzJdKSxzLnB1c2goc1swXSksZj1mLmNvbmNhdChzKTticmVhaztjYXNlIlUiOmYucG9wKCksZj1mLmNvbmNhdCh6KGksaixvWzFdLG9bMl0sb1szXSkpLG49WyJVIl0uY29uY2F0KGZbZi5sZW5ndGgtMV0uc2xpY2UoLTIpKTticmVhaztjYXNlIk0iOms9K29bMV0raSxsPStvWzJdK2o7ZGVmYXVsdDpmb3IodD0xLHU9by5sZW5ndGg7dT50O3QrKyluW3RdPStvW3RdKyh0JTI/aTpqKX1lbHNlIGlmKCJSIj09ZClzPVtpLGpdLmNvbmNhdChvLnNsaWNlKDEpKSxmLnBvcCgpLGY9Zi5jb25jYXQoSShzLHApKSxuPVsiUiJdLmNvbmNhdChvLnNsaWNlKC0yKSk7ZWxzZSBpZigiTyI9PWQpZi5wb3AoKSxzPXooaSxqLG9bMV0sb1syXSkscy5wdXNoKHNbMF0pLGY9Zi5jb25jYXQocyk7ZWxzZSBpZigiVSI9PWQpZi5wb3AoKSxmPWYuY29uY2F0KHooaSxqLG9bMV0sb1syXSxvWzNdKSksbj1bIlUiXS5jb25jYXQoZltmLmxlbmd0aC0xXS5zbGljZSgtMikpO2Vsc2UgZm9yKHZhciB2PTAsdz1vLmxlbmd0aDt3PnY7disrKW5bdl09b1t2XTtpZihkPWQudG9VcHBlckNhc2UoKSwiTyIhPWQpc3dpdGNoKG5bMF0pe2Nhc2UiWiI6aT0rayxqPStsO2JyZWFrO2Nhc2UiSCI6aT1uWzFdO2JyZWFrO2Nhc2UiViI6aj1uWzFdO2JyZWFrO2Nhc2UiTSI6az1uW24ubGVuZ3RoLTJdLGw9bltuLmxlbmd0aC0xXTtkZWZhdWx0Omk9bltuLmxlbmd0aC0yXSxqPW5bbi5sZW5ndGgtMV19fXJldHVybiBmLnRvU3RyaW5nPWcsYy5hYnM9aChmKSxmfWZ1bmN0aW9uIEMoYSxiLGMsZCl7cmV0dXJuW2EsYixjLGQsYyxkXX1mdW5jdGlvbiBEKGEsYixjLGQsZSxmKXt2YXIgZz0xLzMsaD0yLzM7cmV0dXJuW2cqYStoKmMsZypiK2gqZCxnKmUraCpjLGcqZitoKmQsZSxmXX1mdW5jdGlvbiBFKGIsYyxkLGUsZixnLGgsaSxqLGspe3ZhciBsLG09MTIwKlEvMTgwLG49US8xODAqKCtmfHwwKSxvPVtdLHA9YS5fLmNhY2hlcihmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YSpQLmNvcyhjKS1iKlAuc2luKGMpLGU9YSpQLnNpbihjKStiKlAuY29zKGMpO3JldHVybnt4OmQseTplfX0pO2lmKCFkfHwhZSlyZXR1cm5bYixjLGksaixpLGpdO2lmKGspeT1rWzBdLHo9a1sxXSx3PWtbMl0seD1rWzNdO2Vsc2V7bD1wKGIsYywtbiksYj1sLngsYz1sLnksbD1wKGksaiwtbiksaT1sLngsaj1sLnk7dmFyIHE9KFAuY29zKFEvMTgwKmYpLFAuc2luKFEvMTgwKmYpLChiLWkpLzIpLHI9KGMtaikvMixzPXEqcS8oZCpkKStyKnIvKGUqZSk7cz4xJiYocz1QLnNxcnQocyksZD1zKmQsZT1zKmUpO3ZhciB0PWQqZCx1PWUqZSx2PShnPT1oPy0xOjEpKlAuc3FydChVKCh0KnUtdCpyKnItdSpxKnEpLyh0KnIqcit1KnEqcSkpKSx3PXYqZCpyL2UrKGIraSkvMix4PXYqLWUqcS9kKyhjK2opLzIseT1QLmFzaW4oKChjLXgpL2UpLnRvRml4ZWQoOSkpLHo9UC5hc2luKCgoai14KS9lKS50b0ZpeGVkKDkpKTt5PXc+Yj9RLXk6eSx6PXc+aT9RLXo6eiwwPnkmJih5PTIqUSt5KSwwPnomJih6PTIqUSt6KSxoJiZ5PnomJih5LT0yKlEpLCFoJiZ6PnkmJih6LT0yKlEpfXZhciBBPXoteTtpZihVKEEpPm0pe3ZhciBCPXosQz1pLEQ9ajt6PXkrbSooaCYmej55PzE6LTEpLGk9dytkKlAuY29zKHopLGo9eCtlKlAuc2luKHopLG89RShpLGosZCxlLGYsMCxoLEMsRCxbeixCLHcseF0pfUE9ei15O3ZhciBGPVAuY29zKHkpLEc9UC5zaW4oeSksSD1QLmNvcyh6KSxJPVAuc2luKHopLEo9UC50YW4oQS80KSxLPTQvMypkKkosTD00LzMqZSpKLE09W2IsY10sTj1bYitLKkcsYy1MKkZdLE89W2krSypJLGotTCpIXSxSPVtpLGpdO2lmKE5bMF09MipNWzBdLU5bMF0sTlsxXT0yKk1bMV0tTlsxXSxrKXJldHVybltOLE8sUl0uY29uY2F0KG8pO289W04sTyxSXS5jb25jYXQobykuam9pbigpLnNwbGl0KCIsIik7Zm9yKHZhciBTPVtdLFQ9MCxWPW8ubGVuZ3RoO1Y+VDtUKyspU1tUXT1UJTI/cChvW1QtMV0sb1tUXSxuKS55OnAob1tUXSxvW1QrMV0sbikueDtyZXR1cm4gU31mdW5jdGlvbiBGKGEsYixjLGQsZSxmLGcsaCl7Zm9yKHZhciBpLGosayxsLG0sbixvLHAscT1bXSxyPVtbXSxbXV0scz0wOzI+czsrK3MpaWYoMD09cz8oaj02KmEtMTIqYys2KmUsaT0tMyphKzkqYy05KmUrMypnLGs9MypjLTMqYSk6KGo9NipiLTEyKmQrNipmLGk9LTMqYis5KmQtOSpmKzMqaCxrPTMqZC0zKmIpLFUoaSk8MWUtMTIpe2lmKFUoaik8MWUtMTIpY29udGludWU7bD0tay9qLGw+MCYmMT5sJiZxLnB1c2gobCl9ZWxzZSBvPWoqai00KmsqaSxwPVAuc3FydChvKSwwPm98fChtPSgtaitwKS8oMippKSxtPjAmJjE+bSYmcS5wdXNoKG0pLG49KC1qLXApLygyKmkpLG4+MCYmMT5uJiZxLnB1c2gobikpO2Zvcih2YXIgdCx1PXEubGVuZ3RoLHY9dTt1LS07KWw9cVt1XSx0PTEtbCxyWzBdW3VdPXQqdCp0KmErMyp0KnQqbCpjKzMqdCpsKmwqZStsKmwqbCpnLHJbMV1bdV09dCp0KnQqYiszKnQqdCpsKmQrMyp0KmwqbCpmK2wqbCpsKmg7cmV0dXJuIHJbMF1bdl09YSxyWzFdW3ZdPWIsclswXVt2KzFdPWcsclsxXVt2KzFdPWgsclswXS5sZW5ndGg9clsxXS5sZW5ndGg9disyLHttaW46e3g6Ui5hcHBseSgwLHJbMF0pLHk6Ui5hcHBseSgwLHJbMV0pfSxtYXg6e3g6Uy5hcHBseSgwLHJbMF0pLHk6Uy5hcHBseSgwLHJbMV0pfX19ZnVuY3Rpb24gRyhhLGIpe3ZhciBjPSFiJiZlKGEpO2lmKCFiJiZjLmN1cnZlKXJldHVybiBoKGMuY3VydmUpO2Zvcih2YXIgZD1CKGEpLGY9YiYmQihiKSxnPXt4OjAseTowLGJ4OjAsYnk6MCxYOjAsWTowLHF4Om51bGwscXk6bnVsbH0saT17eDowLHk6MCxieDowLGJ5OjAsWDowLFk6MCxxeDpudWxsLHF5Om51bGx9LGo9KGZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlO2lmKCFhKXJldHVyblsiQyIsYi54LGIueSxiLngsYi55LGIueCxiLnldO3N3aXRjaCghKGFbMF1pbntUOjEsUToxfSkmJihiLnF4PWIucXk9bnVsbCksYVswXSl7Y2FzZSJNIjpiLlg9YVsxXSxiLlk9YVsyXTticmVhaztjYXNlIkEiOmE9WyJDIl0uY29uY2F0KEUuYXBwbHkoMCxbYi54LGIueV0uY29uY2F0KGEuc2xpY2UoMSkpKSk7YnJlYWs7Y2FzZSJTIjoiQyI9PWN8fCJTIj09Yz8oZD0yKmIueC1iLmJ4LGU9MipiLnktYi5ieSk6KGQ9Yi54LGU9Yi55KSxhPVsiQyIsZCxlXS5jb25jYXQoYS5zbGljZSgxKSk7YnJlYWs7Y2FzZSJUIjoiUSI9PWN8fCJUIj09Yz8oYi5xeD0yKmIueC1iLnF4LGIucXk9MipiLnktYi5xeSk6KGIucXg9Yi54LGIucXk9Yi55KSxhPVsiQyJdLmNvbmNhdChEKGIueCxiLnksYi5xeCxiLnF5LGFbMV0sYVsyXSkpO2JyZWFrO2Nhc2UiUSI6Yi5xeD1hWzFdLGIucXk9YVsyXSxhPVsiQyJdLmNvbmNhdChEKGIueCxiLnksYVsxXSxhWzJdLGFbM10sYVs0XSkpO2JyZWFrO2Nhc2UiTCI6YT1bIkMiXS5jb25jYXQoQyhiLngsYi55LGFbMV0sYVsyXSkpO2JyZWFrO2Nhc2UiSCI6YT1bIkMiXS5jb25jYXQoQyhiLngsYi55LGFbMV0sYi55KSk7YnJlYWs7Y2FzZSJWIjphPVsiQyJdLmNvbmNhdChDKGIueCxiLnksYi54LGFbMV0pKTticmVhaztjYXNlIloiOmE9WyJDIl0uY29uY2F0KEMoYi54LGIueSxiLlgsYi5ZKSl9cmV0dXJuIGF9KSxrPWZ1bmN0aW9uKGEsYil7aWYoYVtiXS5sZW5ndGg+Nyl7YVtiXS5zaGlmdCgpO2Zvcih2YXIgYz1hW2JdO2MubGVuZ3RoOyltW2JdPSJBIixmJiYobltiXT0iQSIpLGEuc3BsaWNlKGIrKywwLFsiQyJdLmNvbmNhdChjLnNwbGljZSgwLDYpKSk7YS5zcGxpY2UoYiwxKSxyPVMoZC5sZW5ndGgsZiYmZi5sZW5ndGh8fDApfX0sbD1mdW5jdGlvbihhLGIsYyxlLGcpe2EmJmImJiJNIj09YVtnXVswXSYmIk0iIT1iW2ddWzBdJiYoYi5zcGxpY2UoZywwLFsiTSIsZS54LGUueV0pLGMuYng9MCxjLmJ5PTAsYy54PWFbZ11bMV0sYy55PWFbZ11bMl0scj1TKGQubGVuZ3RoLGYmJmYubGVuZ3RofHwwKSl9LG09W10sbj1bXSxvPSIiLHA9IiIscT0wLHI9UyhkLmxlbmd0aCxmJiZmLmxlbmd0aHx8MCk7cj5xO3ErKyl7ZFtxXSYmKG89ZFtxXVswXSksIkMiIT1vJiYobVtxXT1vLHEmJihwPW1bcS0xXSkpLGRbcV09aihkW3FdLGcscCksIkEiIT1tW3FdJiYiQyI9PW8mJihtW3FdPSJDIiksayhkLHEpLGYmJihmW3FdJiYobz1mW3FdWzBdKSwiQyIhPW8mJihuW3FdPW8scSYmKHA9bltxLTFdKSksZltxXT1qKGZbcV0saSxwKSwiQSIhPW5bcV0mJiJDIj09byYmKG5bcV09IkMiKSxrKGYscSkpLGwoZCxmLGcsaSxxKSxsKGYsZCxpLGcscSk7dmFyIHM9ZFtxXSx0PWYmJmZbcV0sdT1zLmxlbmd0aCx2PWYmJnQubGVuZ3RoO2cueD1zW3UtMl0sZy55PXNbdS0xXSxnLmJ4PU8oc1t1LTRdKXx8Zy54LGcuYnk9TyhzW3UtM10pfHxnLnksaS5ieD1mJiYoTyh0W3YtNF0pfHxpLngpLGkuYnk9ZiYmKE8odFt2LTNdKXx8aS55KSxpLng9ZiYmdFt2LTJdLGkueT1mJiZ0W3YtMV19cmV0dXJuIGZ8fChjLmN1cnZlPWgoZCkpLGY/W2QsZl06ZH1mdW5jdGlvbiBIKGEsYil7aWYoIWIpcmV0dXJuIGE7dmFyIGMsZCxlLGYsZyxoLGk7Zm9yKGE9RyhhKSxlPTAsZz1hLmxlbmd0aDtnPmU7ZSsrKWZvcihpPWFbZV0sZj0xLGg9aS5sZW5ndGg7aD5mO2YrPTIpYz1iLngoaVtmXSxpW2YrMV0pLGQ9Yi55KGlbZl0saVtmKzFdKSxpW2ZdPWMsaVtmKzFdPWQ7cmV0dXJuIGF9ZnVuY3Rpb24gSShhLGIpe2Zvcih2YXIgYz1bXSxkPTAsZT1hLmxlbmd0aDtlLTIqIWI+ZDtkKz0yKXt2YXIgZj1be3g6K2FbZC0yXSx5OithW2QtMV19LHt4OithW2RdLHk6K2FbZCsxXX0se3g6K2FbZCsyXSx5OithW2QrM119LHt4OithW2QrNF0seTorYVtkKzVdfV07Yj9kP2UtND09ZD9mWzNdPXt4OithWzBdLHk6K2FbMV19OmUtMj09ZCYmKGZbMl09e3g6K2FbMF0seTorYVsxXX0sZlszXT17eDorYVsyXSx5OithWzNdfSk6ZlswXT17eDorYVtlLTJdLHk6K2FbZS0xXX06ZS00PT1kP2ZbM109ZlsyXTpkfHwoZlswXT17eDorYVtkXSx5OithW2QrMV19KSxjLnB1c2goWyJDIiwoLWZbMF0ueCs2KmZbMV0ueCtmWzJdLngpLzYsKC1mWzBdLnkrNipmWzFdLnkrZlsyXS55KS82LChmWzFdLngrNipmWzJdLngtZlszXS54KS82LChmWzFdLnkrNipmWzJdLnktZlszXS55KS82LGZbMl0ueCxmWzJdLnldKX1yZXR1cm4gY312YXIgSj1iLnByb3RvdHlwZSxLPWEuaXMsTD1hLl8uY2xvbmUsTT0iaGFzT3duUHJvcGVydHkiLE49Lyw/KFthLXpdKSw/L2dpLE89cGFyc2VGbG9hdCxQPU1hdGgsUT1QLlBJLFI9UC5taW4sUz1QLm1heCxUPVAucG93LFU9UC5hYnMsVj1qKDEpLFc9aigpLFg9aigwLDEpLFk9YS5fdW5pdDJweCxaPXtwYXRoOmZ1bmN0aW9uKGEpe3JldHVybiBhLmF0dHIoInBhdGgiKX0sY2lyY2xlOmZ1bmN0aW9uKGEpe3ZhciBiPVkoYSk7cmV0dXJuIHooYi5jeCxiLmN5LGIucil9LGVsbGlwc2U6ZnVuY3Rpb24oYSl7dmFyIGI9WShhKTtyZXR1cm4geihiLmN4fHwwLGIuY3l8fDAsYi5yeCxiLnJ5KTsKfSxyZWN0OmZ1bmN0aW9uKGEpe3ZhciBiPVkoYSk7cmV0dXJuIHkoYi54fHwwLGIueXx8MCxiLndpZHRoLGIuaGVpZ2h0LGIucngsYi5yeSl9LGltYWdlOmZ1bmN0aW9uKGEpe3ZhciBiPVkoYSk7cmV0dXJuIHkoYi54fHwwLGIueXx8MCxiLndpZHRoLGIuaGVpZ2h0KX0sbGluZTpmdW5jdGlvbihhKXtyZXR1cm4iTSIrW2EuYXR0cigieDEiKXx8MCxhLmF0dHIoInkxIil8fDAsYS5hdHRyKCJ4MiIpLGEuYXR0cigieTIiKV19LHBvbHlsaW5lOmZ1bmN0aW9uKGEpe3JldHVybiJNIithLmF0dHIoInBvaW50cyIpfSxwb2x5Z29uOmZ1bmN0aW9uKGEpe3JldHVybiJNIithLmF0dHIoInBvaW50cyIpKyJ6In0sZGVmbHQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlLmdldEJCb3goKTtyZXR1cm4geShiLngsYi55LGIud2lkdGgsYi5oZWlnaHQpfX07YS5wYXRoPWUsYS5wYXRoLmdldFRvdGFsTGVuZ3RoPVYsYS5wYXRoLmdldFBvaW50QXRMZW5ndGg9VyxhLnBhdGguZ2V0U3VicGF0aD1mdW5jdGlvbihhLGIsYyl7aWYodGhpcy5nZXRUb3RhbExlbmd0aChhKS1jPDFlLTYpcmV0dXJuIFgoYSxiKS5lbmQ7dmFyIGQ9WChhLGMsMSk7cmV0dXJuIGI/WChkLGIpLmVuZDpkfSxKLmdldFRvdGFsTGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZS5nZXRUb3RhbExlbmd0aD90aGlzLm5vZGUuZ2V0VG90YWxMZW5ndGgoKTp2b2lkIDB9LEouZ2V0UG9pbnRBdExlbmd0aD1mdW5jdGlvbihhKXtyZXR1cm4gVyh0aGlzLmF0dHIoImQiKSxhKX0sSi5nZXRTdWJwYXRoPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEucGF0aC5nZXRTdWJwYXRoKHRoaXMuYXR0cigiZCIpLGIsYyl9LGEuXy5ib3g9ZixhLnBhdGguZmluZERvdHNBdFNlZ21lbnQ9ayxhLnBhdGguYmV6aWVyQkJveD1sLGEucGF0aC5pc1BvaW50SW5zaWRlQkJveD1tLGEuY2xvc2VzdD1mdW5jdGlvbihiLGMsZCxlKXtmb3IodmFyIGc9MTAwLGg9ZihiLWcvMixjLWcvMixnLGcpLGk9W10saj1kWzBdLmhhc093blByb3BlcnR5KCJ4Iik/ZnVuY3Rpb24oYSl7cmV0dXJue3g6ZFthXS54LHk6ZFthXS55fX06ZnVuY3Rpb24oYSl7cmV0dXJue3g6ZFthXSx5OmVbYV19fSxrPTA7MWU2Pj1nJiYhazspe2Zvcih2YXIgbD0wLG49ZC5sZW5ndGg7bj5sO2wrKyl7dmFyIG89aihsKTtpZihtKGgsby54LG8ueSkpe2srKyxpLnB1c2gobyk7YnJlYWt9fWt8fChnKj0yLGg9ZihiLWcvMixjLWcvMixnLGcpKX1pZigxZTYhPWcpe3ZhciBwLHE9MS8wO2ZvcihsPTAsbj1pLmxlbmd0aDtuPmw7bCsrKXt2YXIgcj1hLmxlbihiLGMsaVtsXS54LGlbbF0ueSk7cT5yJiYocT1yLGlbbF0ubGVuPXIscD1pW2xdKX1yZXR1cm4gcH19LGEucGF0aC5pc0JCb3hJbnRlcnNlY3Q9bixhLnBhdGguaW50ZXJzZWN0aW9uPXQsYS5wYXRoLmludGVyc2VjdGlvbk51bWJlcj11LGEucGF0aC5pc1BvaW50SW5zaWRlPXcsYS5wYXRoLmdldEJCb3g9eCxhLnBhdGguZ2V0PVosYS5wYXRoLnRvUmVsYXRpdmU9QSxhLnBhdGgudG9BYnNvbHV0ZT1CLGEucGF0aC50b0N1YmljPUcsYS5wYXRoLm1hcD1ILGEucGF0aC50b1N0cmluZz1nLGEucGF0aC5jbG9uZT1ofSksZC5wbHVnaW4oZnVuY3Rpb24oYSxkLGUsZil7dmFyIGc9TWF0aC5tYXgsaD1NYXRoLm1pbixpPWZ1bmN0aW9uKGEpe2lmKHRoaXMuaXRlbXM9W10sdGhpcy5iaW5kaW5ncz17fSx0aGlzLmxlbmd0aD0wLHRoaXMudHlwZT0ic2V0IixhKWZvcih2YXIgYj0wLGM9YS5sZW5ndGg7Yz5iO2IrKylhW2JdJiYodGhpc1t0aGlzLml0ZW1zLmxlbmd0aF09dGhpcy5pdGVtc1t0aGlzLml0ZW1zLmxlbmd0aF09YVtiXSx0aGlzLmxlbmd0aCsrKX0saj1pLnByb3RvdHlwZTtqLnB1c2g9ZnVuY3Rpb24oKXtmb3IodmFyIGEsYixjPTAsZD1hcmd1bWVudHMubGVuZ3RoO2Q+YztjKyspYT1hcmd1bWVudHNbY10sYSYmKGI9dGhpcy5pdGVtcy5sZW5ndGgsdGhpc1tiXT10aGlzLml0ZW1zW2JdPWEsdGhpcy5sZW5ndGgrKyk7cmV0dXJuIHRoaXN9LGoucG9wPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RoJiZkZWxldGUgdGhpc1t0aGlzLmxlbmd0aC0tXSx0aGlzLml0ZW1zLnBvcCgpfSxqLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPXRoaXMuaXRlbXMubGVuZ3RoO2Q+YztjKyspaWYoYS5jYWxsKGIsdGhpcy5pdGVtc1tjXSxjKT09PSExKXJldHVybiB0aGlzO3JldHVybiB0aGlzfSxqLmFuaW1hdGU9ZnVuY3Rpb24oZCxlLGYsZyl7ImZ1bmN0aW9uIiE9dHlwZW9mIGZ8fGYubGVuZ3RofHwoZz1mLGY9Yy5saW5lYXIpLGQgaW5zdGFuY2VvZiBhLl8uQW5pbWF0aW9uJiYoZz1kLmNhbGxiYWNrLGY9ZC5lYXNpbmcsZT1mLmR1cixkPWQuYXR0cik7dmFyIGg9YXJndW1lbnRzO2lmKGEuaXMoZCwiYXJyYXkiKSYmYS5pcyhoW2gubGVuZ3RoLTFdLCJhcnJheSIpKXZhciBpPSEwO3ZhciBqLGs9ZnVuY3Rpb24oKXtqP3RoaXMuYj1qOmo9dGhpcy5ifSxsPTAsbT10aGlzLG49ZyYmZnVuY3Rpb24oKXsrK2w9PW0ubGVuZ3RoJiZnLmNhbGwodGhpcyl9O3JldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24oYSxjKXtiLm9uY2UoInNuYXAuYW5pbWNyZWF0ZWQuIithLmlkLGspLGk/aFtjXSYmYS5hbmltYXRlLmFwcGx5KGEsaFtjXSk6YS5hbmltYXRlKGQsZSxmLG4pfSl9LGoucmVtb3ZlPWZ1bmN0aW9uKCl7Zm9yKDt0aGlzLmxlbmd0aDspdGhpcy5wb3AoKS5yZW1vdmUoKTtyZXR1cm4gdGhpc30sai5iaW5kPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD17fTtpZigiZnVuY3Rpb24iPT10eXBlb2YgYil0aGlzLmJpbmRpbmdzW2FdPWI7ZWxzZXt2YXIgZT1jfHxhO3RoaXMuYmluZGluZ3NbYV09ZnVuY3Rpb24oYSl7ZFtlXT1hLGIuYXR0cihkKX19cmV0dXJuIHRoaXN9LGouYXR0cj1mdW5jdGlvbihhKXt2YXIgYj17fTtmb3IodmFyIGMgaW4gYSl0aGlzLmJpbmRpbmdzW2NdP3RoaXMuYmluZGluZ3NbY10oYVtjXSk6YltjXT1hW2NdO2Zvcih2YXIgZD0wLGU9dGhpcy5pdGVtcy5sZW5ndGg7ZT5kO2QrKyl0aGlzLml0ZW1zW2RdLmF0dHIoYik7cmV0dXJuIHRoaXN9LGouY2xlYXI9ZnVuY3Rpb24oKXtmb3IoO3RoaXMubGVuZ3RoOyl0aGlzLnBvcCgpfSxqLnNwbGljZT1mdW5jdGlvbihhLGIsYyl7YT0wPmE/Zyh0aGlzLmxlbmd0aCthLDApOmEsYj1nKDAsaCh0aGlzLmxlbmd0aC1hLGIpKTt2YXIgZCxlPVtdLGY9W10saj1bXTtmb3IoZD0yO2Q8YXJndW1lbnRzLmxlbmd0aDtkKyspai5wdXNoKGFyZ3VtZW50c1tkXSk7Zm9yKGQ9MDtiPmQ7ZCsrKWYucHVzaCh0aGlzW2ErZF0pO2Zvcig7ZDx0aGlzLmxlbmd0aC1hO2QrKyllLnB1c2godGhpc1thK2RdKTt2YXIgaz1qLmxlbmd0aDtmb3IoZD0wO2Q8aytlLmxlbmd0aDtkKyspdGhpcy5pdGVtc1thK2RdPXRoaXNbYStkXT1rPmQ/altkXTplW2Qta107Zm9yKGQ9dGhpcy5pdGVtcy5sZW5ndGg9dGhpcy5sZW5ndGgtPWItazt0aGlzW2RdOylkZWxldGUgdGhpc1tkKytdO3JldHVybiBuZXcgaShmKX0sai5leGNsdWRlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9dGhpcy5sZW5ndGg7Yz5iO2IrKylpZih0aGlzW2JdPT1hKXJldHVybiB0aGlzLnNwbGljZShiLDEpLCEwO3JldHVybiExfSxqLmluc2VydEFmdGVyPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLml0ZW1zLmxlbmd0aDtiLS07KXRoaXMuaXRlbXNbYl0uaW5zZXJ0QWZ0ZXIoYSk7cmV0dXJuIHRoaXN9LGouZ2V0QkJveD1mdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPVtdLGM9W10sZD1bXSxlPXRoaXMuaXRlbXMubGVuZ3RoO2UtLTspaWYoIXRoaXMuaXRlbXNbZV0ucmVtb3ZlZCl7dmFyIGY9dGhpcy5pdGVtc1tlXS5nZXRCQm94KCk7YS5wdXNoKGYueCksYi5wdXNoKGYueSksYy5wdXNoKGYueCtmLndpZHRoKSxkLnB1c2goZi55K2YuaGVpZ2h0KX1yZXR1cm4gYT1oLmFwcGx5KDAsYSksYj1oLmFwcGx5KDAsYiksYz1nLmFwcGx5KDAsYyksZD1nLmFwcGx5KDAsZCkse3g6YSx5OmIseDI6Yyx5MjpkLHdpZHRoOmMtYSxoZWlnaHQ6ZC1iLGN4OmErKGMtYSkvMixjeTpiKyhkLWIpLzJ9fSxqLmNsb25lPWZ1bmN0aW9uKGEpe2E9bmV3IGk7Zm9yKHZhciBiPTAsYz10aGlzLml0ZW1zLmxlbmd0aDtjPmI7YisrKWEucHVzaCh0aGlzLml0ZW1zW2JdLmNsb25lKCkpO3JldHVybiBhfSxqLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIlNuYXDigJhzIHNldCJ9LGoudHlwZT0ic2V0IixhLlNldD1pLGEuc2V0PWZ1bmN0aW9uKCl7dmFyIGE9bmV3IGk7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGgmJmEucHVzaC5hcHBseShhLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSksYX19KSxkLnBsdWdpbihmdW5jdGlvbihhLGMsZCxlKXtmdW5jdGlvbiBmKGEpe3ZhciBiPWFbMF07c3dpdGNoKGIudG9Mb3dlckNhc2UoKSl7Y2FzZSJ0IjpyZXR1cm5bYiwwLDBdO2Nhc2UibSI6cmV0dXJuW2IsMSwwLDAsMSwwLDBdO2Nhc2UiciI6cmV0dXJuIDQ9PWEubGVuZ3RoP1tiLDAsYVsyXSxhWzNdXTpbYiwwXTtjYXNlInMiOnJldHVybiA1PT1hLmxlbmd0aD9bYiwxLDEsYVszXSxhWzRdXTozPT1hLmxlbmd0aD9bYiwxLDFdOltiLDFdfX1mdW5jdGlvbiBnKGIsYyxkKXtiPWJ8fG5ldyBhLk1hdHJpeCxjPWN8fG5ldyBhLk1hdHJpeCxiPWEucGFyc2VUcmFuc2Zvcm1TdHJpbmcoYi50b1RyYW5zZm9ybVN0cmluZygpKXx8W10sYz1hLnBhcnNlVHJhbnNmb3JtU3RyaW5nKGMudG9UcmFuc2Zvcm1TdHJpbmcoKSl8fFtdO2Zvcih2YXIgZSxnLGgsaSxqPU1hdGgubWF4KGIubGVuZ3RoLGMubGVuZ3RoKSxrPVtdLG49W10sbz0wO2o+bztvKyspe2lmKGg9YltvXXx8ZihjW29dKSxpPWNbb118fGYoaCksaFswXSE9aVswXXx8InIiPT1oWzBdLnRvTG93ZXJDYXNlKCkmJihoWzJdIT1pWzJdfHxoWzNdIT1pWzNdKXx8InMiPT1oWzBdLnRvTG93ZXJDYXNlKCkmJihoWzNdIT1pWzNdfHxoWzRdIT1pWzRdKSl7Yj1hLl8udHJhbnNmb3JtMm1hdHJpeChiLGQoKSksYz1hLl8udHJhbnNmb3JtMm1hdHJpeChjLGQoKSksaz1bWyJtIixiLmEsYi5iLGIuYyxiLmQsYi5lLGIuZl1dLG49W1sibSIsYy5hLGMuYixjLmMsYy5kLGMuZSxjLmZdXTticmVha31mb3Ioa1tvXT1bXSxuW29dPVtdLGU9MCxnPU1hdGgubWF4KGgubGVuZ3RoLGkubGVuZ3RoKTtnPmU7ZSsrKWUgaW4gaCYmKGtbb11bZV09aFtlXSksZSBpbiBpJiYobltvXVtlXT1pW2VdKX1yZXR1cm57ZnJvbTptKGspLHRvOm0obiksZjpsKGspfX1mdW5jdGlvbiBoKGEpe3JldHVybiBhfWZ1bmN0aW9uIGkoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybitiLnRvRml4ZWQoMykrYX19ZnVuY3Rpb24gaihhKXtyZXR1cm4gYS5qb2luKCIgIil9ZnVuY3Rpb24gayhiKXtyZXR1cm4gYS5yZ2IoYlswXSxiWzFdLGJbMl0sYlszXSl9ZnVuY3Rpb24gbChhKXt2YXIgYixjLGQsZSxmLGcsaD0wLGk9W107Zm9yKGI9MCxjPWEubGVuZ3RoO2M+YjtiKyspe2ZvcihmPSJbIixnPVsnIicrYVtiXVswXSsnIiddLGQ9MSxlPWFbYl0ubGVuZ3RoO2U+ZDtkKyspZ1tkXT0idmFsWyIraCsrICsiXSI7Zis9ZysiXSIsaVtiXT1mfXJldHVybiBGdW5jdGlvbigidmFsIiwicmV0dXJuIFNuYXAucGF0aC50b1N0cmluZy5jYWxsKFsiK2krIl0pIil9ZnVuY3Rpb24gbShhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKylmb3IodmFyIGU9MSxmPWFbY10ubGVuZ3RoO2Y+ZTtlKyspYi5wdXNoKGFbY11bZV0pO3JldHVybiBifWZ1bmN0aW9uIG4oYSl7cmV0dXJuIGlzRmluaXRlKGEpfWZ1bmN0aW9uIG8oYixjKXtyZXR1cm4gYS5pcyhiLCJhcnJheSIpJiZhLmlzKGMsImFycmF5Iik/Yi50b1N0cmluZygpPT1jLnRvU3RyaW5nKCk6ITF9dmFyIHA9e30scT0vWyVhLXpdKyQvaSxyPVN0cmluZztwLnN0cm9rZT1wLmZpbGw9ImNvbG91ciIsYy5wcm90b3R5cGUuZXF1YWw9ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYigic25hcC51dGlsLmVxdWFsIix0aGlzLGEsYykuZmlyc3REZWZpbmVkKCl9LGIub24oInNuYXAudXRpbC5lcXVhbCIsZnVuY3Rpb24oYixjKXt2YXIgZCxlLGY9cih0aGlzLmF0dHIoYil8fCIiKSxzPXRoaXM7aWYoImNvbG91ciI9PXBbYl0pcmV0dXJuIGQ9YS5jb2xvcihmKSxlPWEuY29sb3IoYykse2Zyb206W2QucixkLmcsZC5iLGQub3BhY2l0eV0sdG86W2UucixlLmcsZS5iLGUub3BhY2l0eV0sZjprfTtpZigidmlld0JveCI9PWIpcmV0dXJuIGQ9dGhpcy5hdHRyKGIpLnZiLnNwbGl0KCIgIikubWFwKE51bWJlciksZT1jLnNwbGl0KCIgIikubWFwKE51bWJlcikse2Zyb206ZCx0bzplLGY6an07aWYoInRyYW5zZm9ybSI9PWJ8fCJncmFkaWVudFRyYW5zZm9ybSI9PWJ8fCJwYXR0ZXJuVHJhbnNmb3JtIj09YilyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGMmJihjPXIoYykucmVwbGFjZSgvXC57M318XHUyMDI2L2csZikpLGY9dGhpcy5tYXRyaXgsYz1hLl8ucmdUcmFuc2Zvcm0udGVzdChjKT9hLl8udHJhbnNmb3JtMm1hdHJpeChjLHRoaXMuZ2V0QkJveCgpKTphLl8udHJhbnNmb3JtMm1hdHJpeChhLl8uc3ZnVHJhbnNmb3JtMnN0cmluZyhjKSx0aGlzLmdldEJCb3goKSksZyhmLGMsZnVuY3Rpb24oKXtyZXR1cm4gcy5nZXRCQm94KDEpfSk7aWYoImQiPT1ifHwicGF0aCI9PWIpcmV0dXJuIGQ9YS5wYXRoLnRvQ3ViaWMoZixjKSx7ZnJvbTptKGRbMF0pLHRvOm0oZFsxXSksZjpsKGRbMF0pfTtpZigicG9pbnRzIj09YilyZXR1cm4gZD1yKGYpLnNwbGl0KGEuXy5zZXBhcmF0b3IpLGU9cihjKS5zcGxpdChhLl8uc2VwYXJhdG9yKSx7ZnJvbTpkLHRvOmUsZjpmdW5jdGlvbihhKXtyZXR1cm4gYX19O2lmKG4oZikmJm4oYykpcmV0dXJue2Zyb206cGFyc2VGbG9hdChmKSx0bzpwYXJzZUZsb2F0KGMpLGY6aH07dmFyIHQ9Zi5tYXRjaChxKSx1PXIoYykubWF0Y2gocSk7cmV0dXJuIHQmJm8odCx1KT97ZnJvbTpwYXJzZUZsb2F0KGYpLHRvOnBhcnNlRmxvYXQoYyksZjppKHQpfTp7ZnJvbTp0aGlzLmFzUFgoYiksdG86dGhpcy5hc1BYKGIsYyksZjpofX0pfSksZC5wbHVnaW4oZnVuY3Rpb24oYSxjLGQsZSl7Zm9yKHZhciBmPWMucHJvdG90eXBlLGc9Imhhc093blByb3BlcnR5IixoPSgiY3JlYXRlVG91Y2giaW4gZS5kb2MpLGk9WyJjbGljayIsImRibGNsaWNrIiwibW91c2Vkb3duIiwibW91c2Vtb3ZlIiwibW91c2VvdXQiLCJtb3VzZW92ZXIiLCJtb3VzZXVwIiwidG91Y2hzdGFydCIsInRvdWNobW92ZSIsInRvdWNoZW5kIiwidG91Y2hjYW5jZWwiXSxqPXttb3VzZWRvd246InRvdWNoc3RhcnQiLG1vdXNlbW92ZToidG91Y2htb3ZlIixtb3VzZXVwOiJ0b3VjaGVuZCJ9LGs9KGZ1bmN0aW9uKGEsYil7dmFyIGM9InkiPT1hPyJzY3JvbGxUb3AiOiJzY3JvbGxMZWZ0IixkPWImJmIubm9kZT9iLm5vZGUub3duZXJEb2N1bWVudDplLmRvYztyZXR1cm4gZFtjIGluIGQuZG9jdW1lbnRFbGVtZW50PyJkb2N1bWVudEVsZW1lbnQiOiJib2R5Il1bY119KSxsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpfSxtPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudC5zdG9wUHJvcGFnYXRpb24oKX0sbj1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1oJiZqW2JdP2pbYl06YixmPWZ1bmN0aW9uKGUpe3ZhciBmPWsoInkiLGQpLGk9aygieCIsZCk7aWYoaCYmaltnXShiKSlmb3IodmFyIG49MCxvPWUudGFyZ2V0VG91Y2hlcyYmZS50YXJnZXRUb3VjaGVzLmxlbmd0aDtvPm47bisrKWlmKGUudGFyZ2V0VG91Y2hlc1tuXS50YXJnZXQ9PWF8fGEuY29udGFpbnMoZS50YXJnZXRUb3VjaGVzW25dLnRhcmdldCkpe3ZhciBwPWU7ZT1lLnRhcmdldFRvdWNoZXNbbl0sZS5vcmlnaW5hbEV2ZW50PXAsZS5wcmV2ZW50RGVmYXVsdD1sLGUuc3RvcFByb3BhZ2F0aW9uPW07YnJlYWt9dmFyIHE9ZS5jbGllbnRYK2kscj1lLmNsaWVudFkrZjtyZXR1cm4gYy5jYWxsKGQsZSxxLHIpfTtyZXR1cm4gYiE9PWUmJmEuYWRkRXZlbnRMaXN0ZW5lcihiLGYsITEpLGEuYWRkRXZlbnRMaXN0ZW5lcihlLGYsITEpLGZ1bmN0aW9uKCl7cmV0dXJuIGIhPT1lJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixmLCExKSxhLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxmLCExKSwhMH19LG89W10scD1mdW5jdGlvbihhKXtmb3IodmFyIGMsZD1hLmNsaWVudFgsZT1hLmNsaWVudFksZj1rKCJ5IiksZz1rKCJ4IiksaT1vLmxlbmd0aDtpLS07KXtpZihjPW9baV0saCl7Zm9yKHZhciBqLGw9YS50b3VjaGVzJiZhLnRvdWNoZXMubGVuZ3RoO2wtLTspaWYoaj1hLnRvdWNoZXNbbF0sai5pZGVudGlmaWVyPT1jLmVsLl9kcmFnLmlkfHxjLmVsLm5vZGUuY29udGFpbnMoai50YXJnZXQpKXtkPWouY2xpZW50WCxlPWouY2xpZW50WSwoYS5vcmlnaW5hbEV2ZW50P2Eub3JpZ2luYWxFdmVudDphKS5wcmV2ZW50RGVmYXVsdCgpO2JyZWFrfX1lbHNlIGEucHJldmVudERlZmF1bHQoKTt2YXIgbT1jLmVsLm5vZGU7bS5uZXh0U2libGluZyxtLnBhcmVudE5vZGUsbS5zdHlsZS5kaXNwbGF5O2QrPWcsZSs9ZixiKCJzbmFwLmRyYWcubW92ZS4iK2MuZWwuaWQsYy5tb3ZlX3Njb3BlfHxjLmVsLGQtYy5lbC5fZHJhZy54LGUtYy5lbC5fZHJhZy55LGQsZSxhKX19LHE9ZnVuY3Rpb24oYyl7YS51bm1vdXNlbW92ZShwKS51bm1vdXNldXAocSk7Zm9yKHZhciBkLGU9by5sZW5ndGg7ZS0tOylkPW9bZV0sZC5lbC5fZHJhZz17fSxiKCJzbmFwLmRyYWcuZW5kLiIrZC5lbC5pZCxkLmVuZF9zY29wZXx8ZC5zdGFydF9zY29wZXx8ZC5tb3ZlX3Njb3BlfHxkLmVsLGMpLGIub2ZmKCJzbmFwLmRyYWcuKi4iK2QuZWwuaWQpO289W119LHI9aS5sZW5ndGg7ci0tOykhZnVuY3Rpb24oYil7YVtiXT1mW2JdPWZ1bmN0aW9uKGMsZCl7aWYoYS5pcyhjLCJmdW5jdGlvbiIpKXRoaXMuZXZlbnRzPXRoaXMuZXZlbnRzfHxbXSx0aGlzLmV2ZW50cy5wdXNoKHtuYW1lOmIsZjpjLHVuYmluZDpuKHRoaXMubm9kZXx8ZG9jdW1lbnQsYixjLGR8fHRoaXMpfSk7ZWxzZSBmb3IodmFyIGU9MCxmPXRoaXMuZXZlbnRzLmxlbmd0aDtmPmU7ZSsrKWlmKHRoaXMuZXZlbnRzW2VdLm5hbWU9PWIpdHJ5e3RoaXMuZXZlbnRzW2VdLmYuY2FsbCh0aGlzKX1jYXRjaChnKXt9cmV0dXJuIHRoaXN9LGFbInVuIitiXT1mWyJ1biIrYl09ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPXRoaXMuZXZlbnRzfHxbXSxkPWMubGVuZ3RoO2QtLTspaWYoY1tkXS5uYW1lPT1iJiYoY1tkXS5mPT1hfHwhYSkpcmV0dXJuIGNbZF0udW5iaW5kKCksYy5zcGxpY2UoZCwxKSwhYy5sZW5ndGgmJmRlbGV0ZSB0aGlzLmV2ZW50cyx0aGlzO3JldHVybiB0aGlzfX0oaVtyXSk7Zi5ob3Zlcj1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5tb3VzZW92ZXIoYSxjKS5tb3VzZW91dChiLGR8fGMpfSxmLnVuaG92ZXI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy51bm1vdXNlb3ZlcihhKS51bm1vdXNlb3V0KGIpfTt2YXIgcz1bXTtmLmRyYWc9ZnVuY3Rpb24oYyxkLGUsZixnLGgpe2Z1bmN0aW9uIGkoaSxqLGwpeyhpLm9yaWdpbmFsRXZlbnR8fGkpLnByZXZlbnREZWZhdWx0KCksay5fZHJhZy54PWosay5fZHJhZy55PWwsay5fZHJhZy5pZD1pLmlkZW50aWZpZXIsIW8ubGVuZ3RoJiZhLm1vdXNlbW92ZShwKS5tb3VzZXVwKHEpLG8ucHVzaCh7ZWw6ayxtb3ZlX3Njb3BlOmYsc3RhcnRfc2NvcGU6ZyxlbmRfc2NvcGU6aH0pLGQmJmIub24oInNuYXAuZHJhZy5zdGFydC4iK2suaWQsZCksYyYmYi5vbigic25hcC5kcmFnLm1vdmUuIitrLmlkLGMpLGUmJmIub24oInNuYXAuZHJhZy5lbmQuIitrLmlkLGUpLGIoInNuYXAuZHJhZy5zdGFydC4iK2suaWQsZ3x8Znx8ayxqLGwsaSl9ZnVuY3Rpb24gaihhLGMsZCl7Yigic25hcC5kcmFnaW5pdC4iK2suaWQsayxhLGMsZCl9dmFyIGs9dGhpcztpZighYXJndW1lbnRzLmxlbmd0aCl7dmFyIGw7cmV0dXJuIGsuZHJhZyhmdW5jdGlvbihhLGIpe3RoaXMuYXR0cih7dHJhbnNmb3JtOmwrKGw/IlQiOiJ0IikrW2EsYl19KX0sZnVuY3Rpb24oKXtsPXRoaXMudHJhbnNmb3JtKCkubG9jYWx9KX1yZXR1cm4gYi5vbigic25hcC5kcmFnaW5pdC4iK2suaWQsaSksay5fZHJhZz17fSxzLnB1c2goe2VsOmssc3RhcnQ6aSxpbml0Omp9KSxrLm1vdXNlZG93bihqKSxrfSxmLnVuZHJhZz1mdW5jdGlvbigpe2Zvcih2YXIgYz1zLmxlbmd0aDtjLS07KXNbY10uZWw9PXRoaXMmJih0aGlzLnVubW91c2Vkb3duKHNbY10uaW5pdCkscy5zcGxpY2UoYywxKSxiLnVuYmluZCgic25hcC5kcmFnLiouIit0aGlzLmlkKSxiLnVuYmluZCgic25hcC5kcmFnaW5pdC4iK3RoaXMuaWQpKTtyZXR1cm4hcy5sZW5ndGgmJmEudW5tb3VzZW1vdmUocCkudW5tb3VzZXVwKHEpLHRoaXN9fSksZC5wbHVnaW4oZnVuY3Rpb24oYSxjLGQsZSl7dmFyIGY9KGMucHJvdG90eXBlLGQucHJvdG90eXBlKSxnPS9eXHMqdXJsXCgoLispXCkvLGg9U3RyaW5nLGk9YS5fLiQ7YS5maWx0ZXI9e30sZi5maWx0ZXI9ZnVuY3Rpb24oYil7dmFyIGQ9dGhpczsic3ZnIiE9ZC50eXBlJiYoZD1kLnBhcGVyKTt2YXIgZT1hLnBhcnNlKGgoYikpLGY9YS5fLmlkKCksZz0oZC5ub2RlLm9mZnNldFdpZHRoLGQubm9kZS5vZmZzZXRIZWlnaHQsaSgiZmlsdGVyIikpO3JldHVybiBpKGcse2lkOmYsZmlsdGVyVW5pdHM6InVzZXJTcGFjZU9uVXNlIn0pLGcuYXBwZW5kQ2hpbGQoZS5ub2RlKSxkLmRlZnMuYXBwZW5kQ2hpbGQoZyksbmV3IGMoZyl9LGIub24oInNuYXAudXRpbC5nZXRhdHRyLmZpbHRlciIsZnVuY3Rpb24oKXtiLnN0b3AoKTt2YXIgYz1pKHRoaXMubm9kZSwiZmlsdGVyIik7aWYoYyl7dmFyIGQ9aChjKS5tYXRjaChnKTtyZXR1cm4gZCYmYS5zZWxlY3QoZFsxXSl9fSksYi5vbigic25hcC51dGlsLmF0dHIuZmlsdGVyIixmdW5jdGlvbihkKXtpZihkIGluc3RhbmNlb2YgYyYmImZpbHRlciI9PWQudHlwZSl7Yi5zdG9wKCk7dmFyIGU9ZC5ub2RlLmlkO2V8fChpKGQubm9kZSx7aWQ6ZC5pZH0pLGU9ZC5pZCksaSh0aGlzLm5vZGUse2ZpbHRlcjphLnVybChlKX0pfWQmJiJub25lIiE9ZHx8KGIuc3RvcCgpLHRoaXMubm9kZS5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpKX0pLGEuZmlsdGVyLmJsdXI9ZnVuY3Rpb24oYixjKXtudWxsPT1iJiYoYj0yKTt2YXIgZD1udWxsPT1jP2I6W2IsY107cmV0dXJuIGEuZm9ybWF0KCc8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSJ7ZGVmfSIvPicse2RlZjpkfSl9LGEuZmlsdGVyLmJsdXIudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcygpfSxhLmZpbHRlci5zaGFkb3c9ZnVuY3Rpb24oYixjLGQsZSxmKXtyZXR1cm4gbnVsbD09ZiYmKG51bGw9PWU/KGY9ZCxkPTQsZT0iIzAwMCIpOihmPWUsZT1kLGQ9NCkpLG51bGw9PWQmJihkPTQpLG51bGw9PWYmJihmPTEpLG51bGw9PWImJihiPTAsYz0yKSxudWxsPT1jJiYoYz1iKSxlPWEuY29sb3IoZSksYS5mb3JtYXQoJzxmZUdhdXNzaWFuQmx1ciBpbj0iU291cmNlQWxwaGEiIHN0ZERldmlhdGlvbj0ie2JsdXJ9Ii8+PGZlT2Zmc2V0IGR4PSJ7ZHh9IiBkeT0ie2R5fSIgcmVzdWx0PSJvZmZzZXRibHVyIi8+PGZlRmxvb2QgZmxvb2QtY29sb3I9Intjb2xvcn0iLz48ZmVDb21wb3NpdGUgaW4yPSJvZmZzZXRibHVyIiBvcGVyYXRvcj0iaW4iLz48ZmVDb21wb25lbnRUcmFuc2Zlcj48ZmVGdW5jQSB0eXBlPSJsaW5lYXIiIHNsb3BlPSJ7b3BhY2l0eX0iLz48L2ZlQ29tcG9uZW50VHJhbnNmZXI+PGZlTWVyZ2U+PGZlTWVyZ2VOb2RlLz48ZmVNZXJnZU5vZGUgaW49IlNvdXJjZUdyYXBoaWMiLz48L2ZlTWVyZ2U+Jyx7Y29sb3I6ZSxkeDpiLGR5OmMsYmx1cjpkLG9wYWNpdHk6Zn0pfSxhLmZpbHRlci5zaGFkb3cudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcygpfSxhLmZpbHRlci5ncmF5c2NhbGU9ZnVuY3Rpb24oYil7cmV0dXJuIG51bGw9PWImJihiPTEpLGEuZm9ybWF0KCc8ZmVDb2xvck1hdHJpeCB0eXBlPSJtYXRyaXgiIHZhbHVlcz0ie2F9IHtifSB7Y30gMCAwIHtkfSB7ZX0ge2Z9IDAgMCB7Z30ge2J9IHtofSAwIDAgMCAwIDAgMSAwIi8+Jyx7YTouMjEyNisuNzg3NCooMS1iKSxiOi43MTUyLS43MTUyKigxLWIpLGM6LjA3MjItLjA3MjIqKDEtYiksZDouMjEyNi0uMjEyNiooMS1iKSxlOi43MTUyKy4yODQ4KigxLWIpLGY6LjA3MjItLjA3MjIqKDEtYiksZzouMjEyNi0uMjEyNiooMS1iKSxoOi4wNzIyKy45Mjc4KigxLWIpfSl9LGEuZmlsdGVyLmdyYXlzY2FsZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzKCl9LGEuZmlsdGVyLnNlcGlhPWZ1bmN0aW9uKGIpe3JldHVybiBudWxsPT1iJiYoYj0xKSxhLmZvcm1hdCgnPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9InthfSB7Yn0ge2N9IDAgMCB7ZH0ge2V9IHtmfSAwIDAge2d9IHtofSB7aX0gMCAwIDAgMCAwIDEgMCIvPicse2E6LjM5MysuNjA3KigxLWIpLGI6Ljc2OS0uNzY5KigxLWIpLGM6LjE4OS0uMTg5KigxLWIpLGQ6LjM0OS0uMzQ5KigxLWIpLGU6LjY4NisuMzE0KigxLWIpLGY6LjE2OC0uMTY4KigxLWIpLGc6LjI3Mi0uMjcyKigxLWIpLGg6LjUzNC0uNTM0KigxLWIpLGk6LjEzMSsuODY5KigxLWIpfSl9LGEuZmlsdGVyLnNlcGlhLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMoKX0sYS5maWx0ZXIuc2F0dXJhdGU9ZnVuY3Rpb24oYil7cmV0dXJuIG51bGw9PWImJihiPTEpLGEuZm9ybWF0KCc8ZmVDb2xvck1hdHJpeCB0eXBlPSJzYXR1cmF0ZSIgdmFsdWVzPSJ7YW1vdW50fSIvPicse2Ftb3VudDoxLWJ9KX0sYS5maWx0ZXIuc2F0dXJhdGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcygpfSxhLmZpbHRlci5odWVSb3RhdGU9ZnVuY3Rpb24oYil7cmV0dXJuIGI9Ynx8MCxhLmZvcm1hdCgnPGZlQ29sb3JNYXRyaXggdHlwZT0iaHVlUm90YXRlIiB2YWx1ZXM9InthbmdsZX0iLz4nLHthbmdsZTpifSl9LGEuZmlsdGVyLmh1ZVJvdGF0ZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzKCl9LGEuZmlsdGVyLmludmVydD1mdW5jdGlvbihiKXtyZXR1cm4gbnVsbD09YiYmKGI9MSksYS5mb3JtYXQoJzxmZUNvbXBvbmVudFRyYW5zZmVyPjxmZUZ1bmNSIHR5cGU9InRhYmxlIiB0YWJsZVZhbHVlcz0ie2Ftb3VudH0ge2Ftb3VudDJ9Ii8+PGZlRnVuY0cgdHlwZT0idGFibGUiIHRhYmxlVmFsdWVzPSJ7YW1vdW50fSB7YW1vdW50Mn0iLz48ZmVGdW5jQiB0eXBlPSJ0YWJsZSIgdGFibGVWYWx1ZXM9InthbW91bnR9IHthbW91bnQyfSIvPjwvZmVDb21wb25lbnRUcmFuc2Zlcj4nLHthbW91bnQ6YixhbW91bnQyOjEtYn0pfSxhLmZpbHRlci5pbnZlcnQudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcygpfSxhLmZpbHRlci5icmlnaHRuZXNzPWZ1bmN0aW9uKGIpe3JldHVybiBudWxsPT1iJiYoYj0xKSxhLmZvcm1hdCgnPGZlQ29tcG9uZW50VHJhbnNmZXI+PGZlRnVuY1IgdHlwZT0ibGluZWFyIiBzbG9wZT0ie2Ftb3VudH0iLz48ZmVGdW5jRyB0eXBlPSJsaW5lYXIiIHNsb3BlPSJ7YW1vdW50fSIvPjxmZUZ1bmNCIHR5cGU9ImxpbmVhciIgc2xvcGU9InthbW91bnR9Ii8+PC9mZUNvbXBvbmVudFRyYW5zZmVyPicse2Ftb3VudDpifSl9LGEuZmlsdGVyLmJyaWdodG5lc3MudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcygpfSxhLmZpbHRlci5jb250cmFzdD1mdW5jdGlvbihiKXtyZXR1cm4gbnVsbD09YiYmKGI9MSksYS5mb3JtYXQoJzxmZUNvbXBvbmVudFRyYW5zZmVyPjxmZUZ1bmNSIHR5cGU9ImxpbmVhciIgc2xvcGU9InthbW91bnR9IiBpbnRlcmNlcHQ9InthbW91bnQyfSIvPjxmZUZ1bmNHIHR5cGU9ImxpbmVhciIgc2xvcGU9InthbW91bnR9IiBpbnRlcmNlcHQ9InthbW91bnQyfSIvPjxmZUZ1bmNCIHR5cGU9ImxpbmVhciIgc2xvcGU9InthbW91bnR9IiBpbnRlcmNlcHQ9InthbW91bnQyfSIvPjwvZmVDb21wb25lbnRUcmFuc2Zlcj4nLHthbW91bnQ6YixhbW91bnQyOi41LWIvMn0pfSxhLmZpbHRlci5jb250cmFzdC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzKCl9fSksZC5wbHVnaW4oZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1hLl8uYm94LGc9YS5pcyxoPS9eW15hLXpdKihbdGJtbHJjXSkvaSxpPWZ1bmN0aW9uKCl7cmV0dXJuIlQiK3RoaXMuZHgrIiwiK3RoaXMuZHl9O2IucHJvdG90eXBlLmdldEFsaWduPWZ1bmN0aW9uKGEsYil7bnVsbD09YiYmZyhhLCJzdHJpbmciKSYmKGI9YSxhPW51bGwpLGE9YXx8dGhpcy5wYXBlcjt2YXIgYz1hLmdldEJCb3g/YS5nZXRCQm94KCk6ZihhKSxkPXRoaXMuZ2V0QkJveCgpLGU9e307c3dpdGNoKGI9YiYmYi5tYXRjaChoKSxiPWI/YlsxXS50b0xvd2VyQ2FzZSgpOiJjIil7Y2FzZSJ0IjplLmR4PTAsZS5keT1jLnktZC55O2JyZWFrO2Nhc2UiYiI6ZS5keD0wLGUuZHk9Yy55Mi1kLnkyO2JyZWFrO2Nhc2UibSI6ZS5keD0wLGUuZHk9Yy5jeS1kLmN5O2JyZWFrO2Nhc2UibCI6ZS5keD1jLngtZC54LGUuZHk9MDticmVhaztjYXNlInIiOmUuZHg9Yy54Mi1kLngyLGUuZHk9MDticmVhaztkZWZhdWx0OmUuZHg9Yy5jeC1kLmN4LGUuZHk9MH1yZXR1cm4gZS50b1N0cmluZz1pLGV9LGIucHJvdG90eXBlLmFsaWduPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMudHJhbnNmb3JtKCIuLi4iK3RoaXMuZ2V0QWxpZ24oYSxiKSl9fSksZC5wbHVnaW4oZnVuY3Rpb24oYixjLGQsZSl7ZnVuY3Rpb24gZihhKXthPWEuc3BsaXQoLyg/PSMpLyk7dmFyIGI9bmV3IFN0cmluZyhhWzVdKTtyZXR1cm4gYls1MF09YVswXSxiWzEwMF09YVsxXSxiWzIwMF09YVsyXSxiWzMwMF09YVszXSxiWzQwMF09YVs0XSxiWzUwMF09YVs1XSxiWzYwMF09YVs2XSxiWzcwMF09YVs3XSxiWzgwMF09YVs4XSxiWzkwMF09YVs5XSxhWzEwXSYmKGIuQTEwMD1hWzEwXSxiLkEyMDA9YVsxMV0sYi5BNDAwPWFbMTJdLGIuQTcwMD1hWzEzXSksYn12YXIgZz0iI2ZmZWJlZSNmZmNkZDIjZWY5YTlhI2U1NzM3MyNlZjUzNTAjZjQ0MzM2I2U1MzkzNSNkMzJmMmYjYzYyODI4I2I3MWMxYyNmZjhhODAjZmY1MjUyI2ZmMTc0NCNkNTAwMDAiLGg9IiNGQ0U0RUMjRjhCQkQwI0Y0OEZCMSNGMDYyOTIjRUM0MDdBI0U5MUU2MyNEODFCNjAjQzIxODVCI0FEMTQ1NyM4ODBFNEYjRkY4MEFCI0ZGNDA4MSNGNTAwNTcjQzUxMTYyIixpPSIjRjNFNUY1I0UxQkVFNyNDRTkzRDgjQkE2OEM4I0FCNDdCQyM5QzI3QjAjOEUyNEFBIzdCMUZBMiM2QTFCOUEjNEExNDhDI0VBODBGQyNFMDQwRkIjRDUwMEY5I0FBMDBGRiIsaj0iI0VERTdGNiNEMUM0RTkjQjM5RERCIzk1NzVDRCM3RTU3QzIjNjczQUI3IzVFMzVCMSM1MTJEQTgjNDUyN0EwIzMxMUI5MiNCMzg4RkYjN0M0REZGIzY1MUZGRiM2MjAwRUEiLGs9IiNFOEVBRjYjQzVDQUU5IzlGQThEQSM3OTg2Q0IjNUM2QkMwIzNGNTFCNSMzOTQ5QUIjMzAzRjlGIzI4MzU5MyMxQTIzN0UjOEM5RUZGIzUzNkRGRSMzRDVBRkUjMzA0RkZFIixsPSIjRTNGMkZEI0JCREVGQiM5MENBRjkjNjRCNUY2IzY0QjVGNiMyMTk2RjMjMUU4OEU1IzE5NzZEMiMxNTY1QzAjMEQ0N0ExIzgyQjFGRiM0NDhBRkYjMjk3OUZGIzI5NjJGRiIsbT0iI0UxRjVGRSNCM0U1RkMjODFENEZBIzRGQzNGNyMyOUI2RjYjMDNBOUY0IzAzOUJFNSMwMjg4RDEjMDI3N0JEIzAxNTc5QiM4MEQ4RkYjNDBDNEZGIzAwQjBGRiMwMDkxRUEiLG49IiNFMEY3RkEjQjJFQkYyIzgwREVFQSM0REQwRTEjMjZDNkRBIzAwQkNENCMwMEFDQzEjMDA5N0E3IzAwODM4RiMwMDYwNjQjODRGRkZGIzE4RkZGRiMwMEU1RkYjMDBCOEQ0IixvPSIjRTBGMkYxI0IyREZEQiM4MENCQzQjNERCNkFDIzI2QTY5QSMwMDk2ODgjMDA4OTdCIzAwNzk2QiMwMDY5NUMjMDA0RDQwI0E3RkZFQiM2NEZGREEjMURFOUI2IzAwQkZBNSIscD0iI0U4RjVFOSNDOEU2QzkjQTVENkE3IzgxQzc4NCM2NkJCNkEjNENBRjUwIzQzQTA0NyMzODhFM0MjMkU3RDMyIzFCNUUyMCNCOUY2Q0EjNjlGMEFFIzAwRTY3NiMwMEM4NTMiLHE9IiNGMUY4RTkjRENFREM4I0M1RTFBNSNBRUQ1ODEjOUNDQzY1IzhCQzM0QSM3Q0IzNDIjNjg5RjM4IzU1OEIyRiMzMzY5MUUjQ0NGRjkwI0IyRkY1OSM3NkZGMDMjNjRERDE3IixyPSIjRjlGQkU3I0YwRjRDMyNFNkVFOUMjRENFNzc1I0Q0RTE1NyNDRERDMzkjQzBDQTMzI0FGQjQyQiM5RTlEMjQjODI3NzE3I0Y0RkY4MSNFRUZGNDEjQzZGRjAwI0FFRUEwMCIscz0iI0ZGRkRFNyNGRkY5QzQjRkZGNTlEI0ZGRjE3NiNGRkVFNTgjRkZFQjNCI0ZERDgzNSNGQkMwMkQjRjlBODI1I0Y1N0YxNyNGRkZGOEQjRkZGRjAwI0ZGRUEwMCNGRkQ2MDAiLHQ9IiNGRkY4RTEjRkZFQ0IzI0ZGRTA4MiNGRkQ1NEYjRkZDQTI4I0ZGQzEwNyNGRkIzMDAjRkZBMDAwI0ZGOEYwMCNGRjZGMDAjRkZFNTdGI0ZGRDc0MCNGRkM0MDAjRkZBQjAwIix1PSIjRkZGM0UwI0ZGRTBCMiNGRkNDODAjRkZCNzREI0ZGQTcyNiNGRjk4MDAjRkI4QzAwI0Y1N0MwMCNFRjZDMDAjRTY1MTAwI0ZGRDE4MCNGRkFCNDAjRkY5MTAwI0ZGNkQwMCIsdj0iI0ZCRTlFNyNGRkNDQkMjRkZBQjkxI0ZGOEE2NSNGRjcwNDMjRkY1NzIyI0Y0NTExRSNFNjRBMTkjRDg0MzE1I0JGMzYwQyNGRjlFODAjRkY2RTQwI0ZGM0QwMCNERDJDMDAiLHc9IiNFRkVCRTkjRDdDQ0M4I0JDQUFBNCNBMTg4N0YjOEQ2RTYzIzc5NTU0OCM2RDRDNDEjNUQ0MDM3IzRFMzQyRSMzRTI3MjMiLHg9IiNGQUZBRkEjRjVGNUY1I0VFRUVFRSNFMEUwRTAjQkRCREJEIzlFOUU5RSM3NTc1NzUjNjE2MTYxIzQyNDI0MiMyMTIxMjEiLHk9IiNFQ0VGRjEjQ0ZEOERDI0IwQkVDNSM5MEE0QUUjNzg5MDlDIzYwN0Q4QiM1NDZFN0EjNDU1QTY0IzM3NDc0RiMyNjMyMzgiO2IubXVpPXt9LGIuZmxhdD17fSxiLm11aS5yZWQ9ZihnKSxiLm11aS5waW5rPWYoaCksYi5tdWkucHVycGxlPWYoaSksYi5tdWkuZGVlcHB1cnBsZT1mKGopLGIubXVpLmluZGlnbz1mKGspLGIubXVpLmJsdWU9ZihsKSxiLm11aS5saWdodGJsdWU9ZihtKSxiLm11aS5jeWFuPWYobiksYi5tdWkudGVhbD1mKG8pLGIubXVpLmdyZWVuPWYocCksYi5tdWkubGlnaHRncmVlbj1mKHEpLGIubXVpLmxpbWU9ZihyKSxiLm11aS55ZWxsb3c9ZihzKSxiLm11aS5hbWJlcj1mKHQpLGIubXVpLm9yYW5nZT1mKHUpLGIubXVpLmRlZXBvcmFuZ2U9Zih2KSxiLm11aS5icm93bj1mKHcpLGIubXVpLmdyZXk9Zih4KSxiLm11aS5ibHVlZ3JleT1mKHkpLGIuZmxhdC50dXJxdW9pc2U9IiMxYWJjOWMiLGIuZmxhdC5ncmVlbnNlYT0iIzE2YTA4NSIsYi5mbGF0LnN1bmZsb3dlcj0iI2YxYzQwZiIsYi5mbGF0Lm9yYW5nZT0iI2YzOWMxMiIsYi5mbGF0LmVtZXJsYW5kPSIjMmVjYzcxIixiLmZsYXQubmVwaHJpdGlzPSIjMjdhZTYwIixiLmZsYXQuY2Fycm90PSIjZTY3ZTIyIixiLmZsYXQucHVtcGtpbj0iI2QzNTQwMCIsYi5mbGF0LnBldGVycml2ZXI9IiMzNDk4ZGIiLGIuZmxhdC5iZWxpemVob2xlPSIjMjk4MGI5IixiLmZsYXQuYWxpemFyaW49IiNlNzRjM2MiLGIuZmxhdC5wb21lZ3JhbmF0ZT0iI2MwMzkyYiIsYi5mbGF0LmFtZXRoeXN0PSIjOWI1OWI2IixiLmZsYXQud2lzdGVyaWE9IiM4ZTQ0YWQiLGIuZmxhdC5jbG91ZHM9IiNlY2YwZjEiLGIuZmxhdC5zaWx2ZXI9IiNiZGMzYzciLGIuZmxhdC53ZXRhc3BoYWx0PSIjMzQ0OTVlIixiLmZsYXQubWlkbmlnaHRibHVlPSIjMmMzZTUwIixiLmZsYXQuY29uY3JldGU9IiM5NWE1YTYiLGIuZmxhdC5hc2Jlc3Rvcz0iIzdmOGM4ZCIsYi5pbXBvcnRNVUlDb2xvcnM9ZnVuY3Rpb24oKXtmb3IodmFyIGMgaW4gYi5tdWkpYi5tdWkuaGFzT3duUHJvcGVydHkoYykmJihhW2NdPWIubXVpW2NdKX19KSxkfSk7"}]},{"name":"Steam Economy Enhancer","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":["*://steamcommunity.com/id/*/inventory*","*://steamcommunity.com/profiles/*/inventory*","*://steamcommunity.com/market*","*://steamcommunity.com/tradeoffer*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null,"orig_connects":[]}},"storage":{"ts":1608308692787,"data":{}},"enabled":true,"position":18,"file_url":"https://raw.githubusercontent.com/Nuklon/Steam-Economy-Enhancer/master/code.user.js","uuid":"1ca287a2-b3ae-4ad4-974c-c2a673b56696","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIFN0ZWFtIEVjb25vbXkgRW5oYW5jZXIKLy8gQGljb24gICAgICAgIGh0dHBzOi8vdXBsb2FkLndpa2ltZWRpYS5vcmcvd2lraXBlZGlhL2NvbW1vbnMvOC84My9TdGVhbV9pY29uX2xvZ28uc3ZnCi8vIEBuYW1lc3BhY2UgICBodHRwczovL2dpdGh1Yi5jb20vTnVrbG9uCi8vIEBhdXRob3IgICAgICBOdWtsb24KLy8gQGxpY2Vuc2UgICAgIE1JVAovLyBAdmVyc2lvbiAgICAgNi44LjIKLy8gQGRlc2NyaXB0aW9uIEVuaGFuY2VzIHRoZSBTdGVhbSBJbnZlbnRvcnkgYW5kIFN0ZWFtIE1hcmtldC4KLy8gQGluY2x1ZGUgICAgICo6Ly9zdGVhbWNvbW11bml0eS5jb20vaWQvKi9pbnZlbnRvcnkqCi8vIEBpbmNsdWRlICAgICAqOi8vc3RlYW1jb21tdW5pdHkuY29tL3Byb2ZpbGVzLyovaW52ZW50b3J5KgovLyBAaW5jbHVkZSAgICAgKjovL3N0ZWFtY29tbXVuaXR5LmNvbS9tYXJrZXQqCi8vIEBpbmNsdWRlICAgICAqOi8vc3RlYW1jb21tdW5pdHkuY29tL3RyYWRlb2ZmZXIqCi8vIEByZXF1aXJlICAgICBodHRwczovL2NvZGUuanF1ZXJ5LmNvbS9qcXVlcnktMy4zLjEubWluLmpzCi8vIEByZXF1aXJlICAgICBodHRwczovL2NvZGUuanF1ZXJ5LmNvbS91aS8xLjEyLjEvanF1ZXJ5LXVpLm1pbi5qcwovLyBAcmVxdWlyZSAgICAgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2thcGV0YW4vanF1ZXJ5LW9ic2VydmUvY2E2N2I3MzViYjNhZThkNjc4ZDE4NDMzODRlYmJlN2MwMjQ2NmM2MS9qcXVlcnktb2JzZXJ2ZS5qcwovLyBAcmVxdWlyZSAgICAgaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvcGFnaW5hdGlvbmpzLzIuMS4yL3BhZ2luYXRpb24ubWluLmpzCi8vIEByZXF1aXJlICAgICBodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9hc3luYy8yLjYuMC9hc3luYy5qcwovLyBAcmVxdWlyZSAgICAgaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbG9jYWxmb3JhZ2UvMS43LjEvbG9jYWxmb3JhZ2UubWluLmpzCi8vIEByZXF1aXJlICAgICBodHRwczovL21vbWVudC5naXRodWIuaW8vbHV4b24vZ2xvYmFsL2x1eG9uLm1pbi5qcwovLyBAcmVxdWlyZSAgICAgaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGlzdC5qcy8xLjUuMC9saXN0LmpzCi8vIEByZXF1aXJlICAgICBodHRwczovL2dpdGh1Yi5jb20vcm1hcml1enpvL2NoZWNrYm94ZXMuanMvcmVsZWFzZXMvZG93bmxvYWQvdjEuMi4yL2pxdWVyeS5jaGVja2JveGVzLTEuMi4yLm1pbi5qcwovLyBAZ3JhbnQgICAgICAgdW5zYWZlV2luZG93Ci8vIEBob21lcGFnZVVSTCBodHRwczovL2dpdGh1Yi5jb20vTnVrbG9uL1N0ZWFtLUVjb25vbXktRW5oYW5jZXIKLy8gQHN1cHBvcnRVUkwgIGh0dHBzOi8vZ2l0aHViLmNvbS9OdWtsb24vU3RlYW0tRWNvbm9teS1FbmhhbmNlci9pc3N1ZXMKLy8gQGRvd25sb2FkVVJMIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9OdWtsb24vU3RlYW0tRWNvbm9teS1FbmhhbmNlci9tYXN0ZXIvY29kZS51c2VyLmpzCi8vIEB1cGRhdGVVUkwgICBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vTnVrbG9uL1N0ZWFtLUVjb25vbXktRW5oYW5jZXIvbWFzdGVyL2NvZGUudXNlci5qcwovLyA9PS9Vc2VyU2NyaXB0PT0KLy8galF1ZXJ5IGlzIGFscmVhZHkgYWRkZWQgYnkgU3RlYW0sIGZvcmNlIG5vIGNvbmZsaWN0IG1vZGUuCihmdW5jdGlvbigkLCBhc3luYykgewogICAgJC5ub0NvbmZsaWN0KHRydWUpOwoKICAgIHZhciBEYXRlVGltZSA9IGx1eG9uLkRhdGVUaW1lOwoKICAgIGNvbnN0IFNURUFNX0lOVkVOVE9SWV9JRCA9IDc1MzsKCiAgICBjb25zdCBQQUdFX01BUktFVCA9IDA7CiAgICBjb25zdCBQQUdFX01BUktFVF9MSVNUSU5HID0gMTsKICAgIGNvbnN0IFBBR0VfVFJBREVPRkZFUiA9IDI7CiAgICBjb25zdCBQQUdFX0lOVkVOVE9SWSA9IDM7CgogICAgY29uc3QgQ09MT1JfRVJST1IgPSAnIzhBNDI0Myc7CiAgICBjb25zdCBDT0xPUl9TVUNDRVNTID0gJyM0MDc3MzYnOwogICAgY29uc3QgQ09MT1JfUEVORElORyA9ICcjOTA4RjQ0JzsKICAgIGNvbnN0IENPTE9SX1BSSUNFX0ZBSVIgPSAnIzQ5NjQyNCc7CiAgICBjb25zdCBDT0xPUl9QUklDRV9DSEVBUCA9ICcjODM3NDMzJzsKICAgIGNvbnN0IENPTE9SX1BSSUNFX0VYUEVOU0lWRSA9ICcjODEzMDMwJzsKICAgIGNvbnN0IENPTE9SX1BSSUNFX05PVF9DSEVDS0VEID0gJyMyNjU2NmMnOwoKICAgIGNvbnN0IEVSUk9SX1NVQ0NFU1MgPSBudWxsOwogICAgY29uc3QgRVJST1JfRkFJTEVEID0gMTsKICAgIGNvbnN0IEVSUk9SX0RBVEEgPSAyOwoKICAgIHZhciBtYXJrZXRMaXN0cyA9IFtdOwogICAgdmFyIHRvdGFsTnVtYmVyT2ZQcm9jZXNzZWRRdWV1ZUl0ZW1zID0gMDsKICAgIHZhciB0b3RhbE51bWJlck9mUXVldWVkSXRlbXMgPSAwOwogICAgdmFyIHRvdGFsUHJpY2VXaXRoRmVlc09uTWFya2V0ID0gMDsKICAgIHZhciB0b3RhbFByaWNlV2l0aG91dEZlZXNPbk1hcmtldCA9IDA7CiAgICB2YXIgdG90YWxTY3JhcCA9IDA7CgogICAgdmFyIHNwaW5uZXJCbG9jayA9CiAgICAgICAgJzxkaXYgY2xhc3M9InNwaW5uZXIiPjxkaXYgY2xhc3M9InJlY3QxIj48L2Rpdj4mbmJzcDs8ZGl2IGNsYXNzPSJyZWN0MiI+PC9kaXY+Jm5ic3A7PGRpdiBjbGFzcz0icmVjdDMiPjwvZGl2PiZuYnNwOzxkaXYgY2xhc3M9InJlY3Q0Ij48L2Rpdj4mbmJzcDs8ZGl2IGNsYXNzPSJyZWN0NSI+PC9kaXY+Jm5ic3A7PC9kaXY+JzsKICAgIHZhciBudW1iZXJPZkZhaWxlZFJlcXVlc3RzID0gMDsKCiAgICB2YXIgZW5hYmxlQ29uc29sZUxvZyA9IGZhbHNlOwoKICAgIHZhciBpc0xvZ2dlZEluID0gdHlwZW9mIHVuc2FmZVdpbmRvdy5nX3JnV2FsbGV0SW5mbyAhPT0gJ3VuZGVmaW5lZCcgJiYgdW5zYWZlV2luZG93LmdfcmdXYWxsZXRJbmZvICE9IG51bGwgfHwgKHR5cGVvZiB1bnNhZmVXaW5kb3cuZ19iTG9nZ2VkSW4gIT09ICd1bmRlZmluZWQnICYmIHVuc2FmZVdpbmRvdy5nX2JMb2dnZWRJbik7CgogICAgdmFyIGN1cnJlbnRQYWdlID0gd2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoJy5jb20vbWFya2V0JykgPwogICAgICAgICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcygnbWFya2V0L2xpc3RpbmdzJykgPwogICAgICAgICAgICBQQUdFX01BUktFVF9MSVNUSU5HIDoKICAgICAgICAgICAgUEFHRV9NQVJLRVQpIDoKICAgICAgICAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoJy5jb20vdHJhZGVvZmZlcicpID8KICAgICAgICAgICAgUEFHRV9UUkFERU9GRkVSIDoKICAgICAgICAgICAgUEFHRV9JTlZFTlRPUlkpOwoKICAgIHZhciBtYXJrZXQgPSBuZXcgU3RlYW1NYXJrZXQodW5zYWZlV2luZG93LmdfcmdBcHBDb250ZXh0RGF0YSwKICAgICAgICB0eXBlb2YgdW5zYWZlV2luZG93Lmdfc3RySW52ZW50b3J5TG9hZFVSTCAhPT0gJ3VuZGVmaW5lZCcgJiYgdW5zYWZlV2luZG93Lmdfc3RySW52ZW50b3J5TG9hZFVSTCAhPSBudWxsID8KICAgICAgICB1bnNhZmVXaW5kb3cuZ19zdHJJbnZlbnRvcnlMb2FkVVJMIDoKICAgICAgICBsb2NhdGlvbi5wcm90b2NvbCArICcvL3N0ZWFtY29tbXVuaXR5LmNvbS9teS9pbnZlbnRvcnkvanNvbi8nLAogICAgICAgIGlzTG9nZ2VkSW4gPyB1bnNhZmVXaW5kb3cuZ19yZ1dhbGxldEluZm8gOiB1bmRlZmluZWQpOwoKICAgIHZhciBjdXJyZW5jeUlkID0KICAgICAgICBpc0xvZ2dlZEluICYmCiAgICAgICAgbWFya2V0ICE9IG51bGwgJiYKICAgICAgICBtYXJrZXQud2FsbGV0SW5mbyAhPSBudWxsICYmCiAgICAgICAgbWFya2V0LndhbGxldEluZm8ud2FsbGV0X2N1cnJlbmN5ICE9IG51bGwgPwogICAgICAgIG1hcmtldC53YWxsZXRJbmZvLndhbGxldF9jdXJyZW5jeSA6CiAgICAgICAgMzsKCiAgICB2YXIgY3VycmVuY3lTeW1ib2wgPSB1bnNhZmVXaW5kb3cuR2V0Q3VycmVuY3lTeW1ib2wodW5zYWZlV2luZG93LkdldEN1cnJlbmN5Q29kZShjdXJyZW5jeUlkKSk7CgogICAgZnVuY3Rpb24gU3RlYW1NYXJrZXQoYXBwQ29udGV4dCwgaW52ZW50b3J5VXJsLCB3YWxsZXRJbmZvKSB7CiAgICAgICAgdGhpcy5hcHBDb250ZXh0ID0gYXBwQ29udGV4dDsKICAgICAgICB0aGlzLmludmVudG9yeVVybCA9IGludmVudG9yeVVybDsKICAgICAgICB0aGlzLndhbGxldEluZm8gPSB3YWxsZXRJbmZvOwogICAgICAgIHRoaXMuaW52ZW50b3J5VXJsQmFzZSA9IGludmVudG9yeVVybC5yZXBsYWNlKCcvaW52ZW50b3J5L2pzb24nLCAnJyk7CiAgICAgICAgaWYgKCF0aGlzLmludmVudG9yeVVybEJhc2UuZW5kc1dpdGgoJy8nKSkKICAgICAgICAgICAgdGhpcy5pbnZlbnRvcnlVcmxCYXNlICs9ICcvJzsKICAgIH0KCiAgICAvLyNyZWdpb24gU2V0dGluZ3MKICAgIGNvbnN0IFNFVFRJTkdfTUlOX05PUk1BTF9QUklDRSA9ICdTRVRUSU5HX01JTl9OT1JNQUxfUFJJQ0UnOwogICAgY29uc3QgU0VUVElOR19NQVhfTk9STUFMX1BSSUNFID0gJ1NFVFRJTkdfTUFYX05PUk1BTF9QUklDRSc7CiAgICBjb25zdCBTRVRUSU5HX01JTl9GT0lMX1BSSUNFID0gJ1NFVFRJTkdfTUlOX0ZPSUxfUFJJQ0UnOwogICAgY29uc3QgU0VUVElOR19NQVhfRk9JTF9QUklDRSA9ICdTRVRUSU5HX01BWF9GT0lMX1BSSUNFJzsKICAgIGNvbnN0IFNFVFRJTkdfTUlOX01JU0NfUFJJQ0UgPSAnU0VUVElOR19NSU5fTUlTQ19QUklDRSc7CiAgICBjb25zdCBTRVRUSU5HX01BWF9NSVNDX1BSSUNFID0gJ1NFVFRJTkdfTUFYX01JU0NfUFJJQ0UnOwogICAgY29uc3QgU0VUVElOR19QUklDRV9PRkZTRVQgPSAnU0VUVElOR19QUklDRV9PRkZTRVQnOwogICAgY29uc3QgU0VUVElOR19QUklDRV9NSU5fQ0hFQ0tfUFJJQ0UgPSAnU0VUVElOR19QUklDRV9NSU5fQ0hFQ0tfUFJJQ0UnOwogICAgY29uc3QgU0VUVElOR19QUklDRV9BTEdPUklUSE0gPSAnU0VUVElOR19QUklDRV9BTEdPUklUSE0nOwogICAgY29uc3QgU0VUVElOR19QUklDRV9JR05PUkVfTE9XRVNUX1EgPSAnU0VUVElOR19QUklDRV9JR05PUkVfTE9XRVNUX1EnOwogICAgY29uc3QgU0VUVElOR19QUklDRV9ISVNUT1JZX0hPVVJTID0gJ1NFVFRJTkdfUFJJQ0VfSElTVE9SWV9IT1VSUyc7CiAgICBjb25zdCBTRVRUSU5HX0lOVkVOVE9SWV9QUklDRV9MQUJFTFMgPSAnU0VUVElOR19JTlZFTlRPUllfUFJJQ0VfTEFCRUxTJzsKICAgIGNvbnN0IFNFVFRJTkdfVFJBREVPRkZFUl9QUklDRV9MQUJFTFMgPSAnU0VUVElOR19UUkFERU9GRkVSX1BSSUNFX0xBQkVMUyc7CiAgICBjb25zdCBTRVRUSU5HX0xBU1RfQ0FDSEUgPSAnU0VUVElOR19MQVNUX0NBQ0hFJzsKICAgIGNvbnN0IFNFVFRJTkdfUkVMSVNUX0FVVE9NQVRJQ0FMTFkgPSAnU0VUVElOR19SRUxJU1RfQVVUT01BVElDQUxMWSc7CiAgICBjb25zdCBTRVRUSU5HX01BUktFVF9QQUdFX0NPVU5UID0gJ1NFVFRJTkdfTUFSS0VUX1BBR0VfQ09VTlQnOwogICAgY29uc3QgU0VUVElOR19JTlZFTlRPUllfUFJJQ0VTID0gJ1NFVFRJTkdfSU5WRU5UT1JZX1BSSUNFUyc7CgogICAgdmFyIHNldHRpbmdEZWZhdWx0cyA9IHsKICAgICAgICBTRVRUSU5HX01JTl9OT1JNQUxfUFJJQ0U6IDAuMDUsCiAgICAgICAgU0VUVElOR19NQVhfTk9STUFMX1BSSUNFOiAyLjUwLAogICAgICAgIFNFVFRJTkdfTUlOX0ZPSUxfUFJJQ0U6IDAuMTUsCiAgICAgICAgU0VUVElOR19NQVhfRk9JTF9QUklDRTogMTAsCiAgICAgICAgU0VUVElOR19NSU5fTUlTQ19QUklDRTogMC4wNSwKICAgICAgICBTRVRUSU5HX01BWF9NSVNDX1BSSUNFOiAxMCwKICAgICAgICBTRVRUSU5HX1BSSUNFX09GRlNFVDogMC4wMCwKICAgICAgICBTRVRUSU5HX1BSSUNFX01JTl9DSEVDS19QUklDRTogMC4wMCwKICAgICAgICBTRVRUSU5HX1BSSUNFX0FMR09SSVRITTogMSwKICAgICAgICBTRVRUSU5HX1BSSUNFX0lHTk9SRV9MT1dFU1RfUTogMSwKICAgICAgICBTRVRUSU5HX1BSSUNFX0hJU1RPUllfSE9VUlM6IDEyLAogICAgICAgIFNFVFRJTkdfSU5WRU5UT1JZX1BSSUNFX0xBQkVMUzogMSwKICAgICAgICBTRVRUSU5HX1RSQURFT0ZGRVJfUFJJQ0VfTEFCRUxTOiAxLAogICAgICAgIFNFVFRJTkdfTEFTVF9DQUNIRTogMCwKICAgICAgICBTRVRUSU5HX1JFTElTVF9BVVRPTUFUSUNBTExZOiAwLAogICAgICAgIFNFVFRJTkdfTUFSS0VUX1BBR0VfQ09VTlQ6IDEwMAogICAgfTsKCiAgICBmdW5jdGlvbiBnZXRTZXR0aW5nV2l0aERlZmF1bHQobmFtZSkgewogICAgICAgIHJldHVybiBnZXRMb2NhbFN0b3JhZ2VJdGVtKG5hbWUpIHx8IChuYW1lIGluIHNldHRpbmdEZWZhdWx0cyA/IHNldHRpbmdEZWZhdWx0c1tuYW1lXSA6IG51bGwpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFNldHRpbmcobmFtZSwgdmFsdWUpIHsKICAgICAgICBzZXRMb2NhbFN0b3JhZ2VJdGVtKG5hbWUsIHZhbHVlKTsKICAgIH0KICAgIC8vI2VuZHJlZ2lvbgoKICAgIC8vI3JlZ2lvbiBTdG9yYWdlCgogICAgdmFyIHN0b3JhZ2VQZXJzaXN0ZW50ID0gbG9jYWxmb3JhZ2UuY3JlYXRlSW5zdGFuY2UoewogICAgICAgIG5hbWU6ICdzZWVfcGVyc2lzdGVudCcKICAgIH0pOwoKICAgIHZhciBzdG9yYWdlU2Vzc2lvbjsKCiAgICB2YXIgY3VycmVudFVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpOwogICAgdmFyIG5vQ2FjaGUgPSBjdXJyZW50VXJsLnNlYXJjaFBhcmFtcy5nZXQoJ25vLWNhY2hlJykgIT0gbnVsbDsKCiAgICAvLyBUaGlzIGRvZXMgbm90IHdvcmsgdGhlIHNhbWUgYXMgdGhlICdub3JtYWwnIHNlc3Npb24gc3RvcmFnZSBiZWNhdXNlIG9wZW5pbmcgYSBuZXcgYnJvd3NlciBzZXNzaW9uL3RhYiB3aWxsIGNsZWFyIHRoZSBjYWNoZS4KICAgIC8vIEZvciB0aGlzIHJlYXNvbiwgYSByb2xsaW5nIGNhY2hlIGlzIHVzZWQuCiAgICBpZiAoZ2V0U2Vzc2lvblN0b3JhZ2VJdGVtKCdTRVNTSU9OJykgPT0gbnVsbCB8fCBub0NhY2hlKSB7CiAgICAgICAgdmFyIGxhc3RDYWNoZSA9IGdldFNldHRpbmdXaXRoRGVmYXVsdChTRVRUSU5HX0xBU1RfQ0FDSEUpOwogICAgICAgIGlmIChsYXN0Q2FjaGUgPiA1KQogICAgICAgICAgICBsYXN0Q2FjaGUgPSAwOwoKICAgICAgICBzZXRTZXR0aW5nKFNFVFRJTkdfTEFTVF9DQUNIRSwgbGFzdENhY2hlICsgMSk7CgogICAgICAgIHN0b3JhZ2VTZXNzaW9uID0gbG9jYWxmb3JhZ2UuY3JlYXRlSW5zdGFuY2UoewogICAgICAgICAgICBuYW1lOiAnc2VlX3Nlc3Npb25fJyArIGxhc3RDYWNoZQogICAgICAgIH0pOwoKICAgICAgICBzdG9yYWdlU2Vzc2lvbi5jbGVhcigpOyAvLyBDbGVhciBhbnkgcHJldmlvdXMgZGF0YS4KICAgICAgICBzZXRTZXNzaW9uU3RvcmFnZUl0ZW0oJ1NFU1NJT04nLCBsYXN0Q2FjaGUpOwogICAgfSBlbHNlIHsKICAgICAgICBzdG9yYWdlU2Vzc2lvbiA9IGxvY2FsZm9yYWdlLmNyZWF0ZUluc3RhbmNlKHsKICAgICAgICAgICAgbmFtZTogJ3NlZV9zZXNzaW9uXycgKyBnZXRTZXNzaW9uU3RvcmFnZUl0ZW0oJ1NFU1NJT04nKQogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldExvY2FsU3RvcmFnZUl0ZW0obmFtZSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShuYW1lKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZXRMb2NhbFN0b3JhZ2VJdGVtKG5hbWUsIHZhbHVlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0obmFtZSwgdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGxvZ0NvbnNvbGUoJ0ZhaWxlZCB0byBzZXQgbG9jYWwgc3RvcmFnZSBpdGVtICcgKyBuYW1lICsgJywgJyArIGUgKyAnLicpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0U2Vzc2lvblN0b3JhZ2VJdGVtKG5hbWUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShuYW1lKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZXRTZXNzaW9uU3RvcmFnZUl0ZW0obmFtZSwgdmFsdWUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKG5hbWUsIHZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBsb2dDb25zb2xlKCdGYWlsZWQgdG8gc2V0IHNlc3Npb24gc3RvcmFnZSBpdGVtICcgKyBuYW1lICsgJywgJyArIGUgKyAnLicpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CiAgICAvLyNlbmRyZWdpb24KCiAgICAvLyNyZWdpb24gUHJpY2UgaGVscGVycwogICAgZnVuY3Rpb24gZ2V0UHJpY2VJbmZvcm1hdGlvbkZyb21JdGVtKGl0ZW0pIHsKICAgICAgICB2YXIgaXNUcmFkaW5nQ2FyZCA9IGdldElzVHJhZGluZ0NhcmQoaXRlbSk7CiAgICAgICAgdmFyIGlzRm9pbFRyYWRpbmdDYXJkID0gZ2V0SXNGb2lsVHJhZGluZ0NhcmQoaXRlbSk7CiAgICAgICAgcmV0dXJuIGdldFByaWNlSW5mb3JtYXRpb24oaXNUcmFkaW5nQ2FyZCwgaXNGb2lsVHJhZGluZ0NhcmQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFByaWNlSW5mb3JtYXRpb24oaXNUcmFkaW5nQ2FyZCwgaXNGb2lsVHJhZGluZ0NhcmQpIHsKICAgICAgICB2YXIgbWF4UHJpY2UgPSAwOwogICAgICAgIHZhciBtaW5QcmljZSA9IDA7CgogICAgICAgIGlmICghaXNUcmFkaW5nQ2FyZCkgewogICAgICAgICAgICBtYXhQcmljZSA9IGdldFNldHRpbmdXaXRoRGVmYXVsdChTRVRUSU5HX01BWF9NSVNDX1BSSUNFKTsKICAgICAgICAgICAgbWluUHJpY2UgPSBnZXRTZXR0aW5nV2l0aERlZmF1bHQoU0VUVElOR19NSU5fTUlTQ19QUklDRSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWF4UHJpY2UgPSBpc0ZvaWxUcmFkaW5nQ2FyZCA/CiAgICAgICAgICAgICAgICBnZXRTZXR0aW5nV2l0aERlZmF1bHQoU0VUVElOR19NQVhfRk9JTF9QUklDRSkgOgogICAgICAgICAgICAgICAgZ2V0U2V0dGluZ1dpdGhEZWZhdWx0KFNFVFRJTkdfTUFYX05PUk1BTF9QUklDRSk7CiAgICAgICAgICAgIG1pblByaWNlID0gaXNGb2lsVHJhZGluZ0NhcmQgPwogICAgICAgICAgICAgICAgZ2V0U2V0dGluZ1dpdGhEZWZhdWx0KFNFVFRJTkdfTUlOX0ZPSUxfUFJJQ0UpIDoKICAgICAgICAgICAgICAgIGdldFNldHRpbmdXaXRoRGVmYXVsdChTRVRUSU5HX01JTl9OT1JNQUxfUFJJQ0UpOwogICAgICAgIH0KCiAgICAgICAgbWF4UHJpY2UgPSBtYXhQcmljZSAqIDEwMC4wOwogICAgICAgIG1pblByaWNlID0gbWluUHJpY2UgKiAxMDAuMDsKCiAgICAgICAgdmFyIG1heFByaWNlQmVmb3JlRmVlcyA9IG1hcmtldC5nZXRQcmljZUJlZm9yZUZlZXMobWF4UHJpY2UpOwogICAgICAgIHZhciBtaW5QcmljZUJlZm9yZUZlZXMgPSBtYXJrZXQuZ2V0UHJpY2VCZWZvcmVGZWVzKG1pblByaWNlKTsKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbWF4UHJpY2UsCiAgICAgICAgICAgIG1pblByaWNlLAogICAgICAgICAgICBtYXhQcmljZUJlZm9yZUZlZXMsCiAgICAgICAgICAgIG1pblByaWNlQmVmb3JlRmVlcwogICAgICAgIH07CiAgICB9CgogICAgLy8gQ2FsY3VsYXRlcyB0aGUgYXZlcmFnZSBoaXN0b3J5IHByaWNlLCBiZWZvcmUgdGhlIGZlZS4KICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUF2ZXJhZ2VIaXN0b3J5UHJpY2VCZWZvcmVGZWVzKGhpc3RvcnkpIHsKICAgICAgICB2YXIgaGlnaGVzdCA9IDA7CiAgICAgICAgdmFyIHRvdGFsID0gMDsKCiAgICAgICAgaWYgKGhpc3RvcnkgIT0gbnVsbCkgewogICAgICAgICAgICAvLyBIaWdoZXN0IGF2ZXJhZ2UgcHJpY2UgaW4gdGhlIGxhc3QgeHggaG91cnMuCiAgICAgICAgICAgIHZhciB0aW1lQWdvID0gRGF0ZS5ub3coKSAtIChnZXRTZXR0aW5nV2l0aERlZmF1bHQoU0VUVElOR19QUklDRV9ISVNUT1JZX0hPVVJTKSAqIDYwICogNjAgKiAxMDAwKTsKCiAgICAgICAgICAgIGhpc3RvcnkuZm9yRWFjaChmdW5jdGlvbihoaXN0b3J5SXRlbSkgewogICAgICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZShoaXN0b3J5SXRlbVswXSk7CiAgICAgICAgICAgICAgICBpZiAoZC5nZXRUaW1lKCkgPiB0aW1lQWdvKSB7CiAgICAgICAgICAgICAgICAgICAgaGlnaGVzdCArPSBoaXN0b3J5SXRlbVsxXSAqIGhpc3RvcnlJdGVtWzJdOwogICAgICAgICAgICAgICAgICAgIHRvdGFsICs9IGhpc3RvcnlJdGVtWzJdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmICh0b3RhbCA9PSAwKQogICAgICAgICAgICByZXR1cm4gMDsKCiAgICAgICAgaGlnaGVzdCA9IE1hdGguZmxvb3IoaGlnaGVzdCAvIHRvdGFsKTsKICAgICAgICByZXR1cm4gbWFya2V0LmdldFByaWNlQmVmb3JlRmVlcyhoaWdoZXN0KTsKICAgIH0KCiAgICAvLyBDYWxjdWxhdGVzIHRoZSBsaXN0aW5nIHByaWNlLCBiZWZvcmUgdGhlIGZlZS4KICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUxpc3RpbmdQcmljZUJlZm9yZUZlZXMoaGlzdG9ncmFtKSB7CiAgICAgICAgaWYgKHR5cGVvZiBoaXN0b2dyYW0gPT09ICd1bmRlZmluZWQnIHx8CiAgICAgICAgICAgIGhpc3RvZ3JhbSA9PSBudWxsIHx8CiAgICAgICAgICAgIGhpc3RvZ3JhbS5sb3dlc3Rfc2VsbF9vcmRlciA9PSBudWxsIHx8CiAgICAgICAgICAgIGhpc3RvZ3JhbS5zZWxsX29yZGVyX2dyYXBoID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiAwOwoKICAgICAgICB2YXIgbGlzdGluZ1ByaWNlID0gbWFya2V0LmdldFByaWNlQmVmb3JlRmVlcyhoaXN0b2dyYW0ubG93ZXN0X3NlbGxfb3JkZXIpOwoKICAgICAgICB2YXIgc2hvdWxkSWdub3JlTG93ZXN0TGlzdGluZ09uTG93UXVhbnRpdHkgPSBnZXRTZXR0aW5nV2l0aERlZmF1bHQoU0VUVElOR19QUklDRV9JR05PUkVfTE9XRVNUX1EpID09IDE7CgogICAgICAgIGlmIChzaG91bGRJZ25vcmVMb3dlc3RMaXN0aW5nT25Mb3dRdWFudGl0eSAmJiBoaXN0b2dyYW0uc2VsbF9vcmRlcl9ncmFwaC5sZW5ndGggPj0gMikgewogICAgICAgICAgICB2YXIgbGlzdGluZ1ByaWNlMm5kTG93ZXN0ID0gbWFya2V0LmdldFByaWNlQmVmb3JlRmVlcyhoaXN0b2dyYW0uc2VsbF9vcmRlcl9ncmFwaFsxXVswXSAqIDEwMCk7CgogICAgICAgICAgICBpZiAobGlzdGluZ1ByaWNlMm5kTG93ZXN0ID4gbGlzdGluZ1ByaWNlKSB7CiAgICAgICAgICAgICAgICB2YXIgbnVtYmVyT2ZMaXN0aW5nc0xvd2VzdCA9IGhpc3RvZ3JhbS5zZWxsX29yZGVyX2dyYXBoWzBdWzFdOwogICAgICAgICAgICAgICAgdmFyIG51bWJlck9mTGlzdGluZ3MybmRMb3dlc3QgPSBoaXN0b2dyYW0uc2VsbF9vcmRlcl9ncmFwaFsxXVsxXTsKCiAgICAgICAgICAgICAgICB2YXIgcGVyY2VudGFnZUxvd2VyID0gKDEwMCAqIChudW1iZXJPZkxpc3RpbmdzTG93ZXN0IC8gbnVtYmVyT2ZMaXN0aW5nczJuZExvd2VzdCkpOwoKICAgICAgICAgICAgICAgIC8vIFRoZSBwZXJjZW50YWdlIHNob3VsZCBjaGFuZ2UgYmFzZWQgb24gdGhlIHF1YW50aXR5IChmb3IgZXhhbXBsZSwgMTIwMCBsaXN0aW5ncyB2cyA1LCBvciAxIHZzIDI1KS4KICAgICAgICAgICAgICAgIGlmIChudW1iZXJPZkxpc3RpbmdzMm5kTG93ZXN0ID49IDEwMDAgJiYgcGVyY2VudGFnZUxvd2VyIDw9IDUpIHsKICAgICAgICAgICAgICAgICAgICBsaXN0aW5nUHJpY2UgPSBsaXN0aW5nUHJpY2UybmRMb3dlc3Q7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG51bWJlck9mTGlzdGluZ3MybmRMb3dlc3QgPCAxMDAwICYmIHBlcmNlbnRhZ2VMb3dlciA8PSAxMCkgewogICAgICAgICAgICAgICAgICAgIGxpc3RpbmdQcmljZSA9IGxpc3RpbmdQcmljZTJuZExvd2VzdDsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobnVtYmVyT2ZMaXN0aW5nczJuZExvd2VzdCA8IDEwMCAmJiBwZXJjZW50YWdlTG93ZXIgPD0gMTUpIHsKICAgICAgICAgICAgICAgICAgICBsaXN0aW5nUHJpY2UgPSBsaXN0aW5nUHJpY2UybmRMb3dlc3Q7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG51bWJlck9mTGlzdGluZ3MybmRMb3dlc3QgPCA1MCAmJiBwZXJjZW50YWdlTG93ZXIgPD0gMjApIHsKICAgICAgICAgICAgICAgICAgICBsaXN0aW5nUHJpY2UgPSBsaXN0aW5nUHJpY2UybmRMb3dlc3Q7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG51bWJlck9mTGlzdGluZ3MybmRMb3dlc3QgPCAyNSAmJiBwZXJjZW50YWdlTG93ZXIgPD0gMjUpIHsKICAgICAgICAgICAgICAgICAgICBsaXN0aW5nUHJpY2UgPSBsaXN0aW5nUHJpY2UybmRMb3dlc3Q7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG51bWJlck9mTGlzdGluZ3MybmRMb3dlc3QgPCAxMCAmJiBwZXJjZW50YWdlTG93ZXIgPD0gMzApIHsKICAgICAgICAgICAgICAgICAgICBsaXN0aW5nUHJpY2UgPSBsaXN0aW5nUHJpY2UybmRMb3dlc3Q7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBsaXN0aW5nUHJpY2U7CiAgICB9CgogICAgZnVuY3Rpb24gY2FsY3VsYXRlQnV5T3JkZXJQcmljZUJlZm9yZUZlZXMoaGlzdG9ncmFtKSB7CiAgICAgICAgaWYgKHR5cGVvZiBoaXN0b2dyYW0gPT09ICd1bmRlZmluZWQnKQogICAgICAgICAgICByZXR1cm4gMDsKCiAgICAgICAgcmV0dXJuIG1hcmtldC5nZXRQcmljZUJlZm9yZUZlZXMoaGlzdG9ncmFtLmhpZ2hlc3RfYnV5X29yZGVyKTsKICAgIH0KCiAgICAvLyBDYWxjdWxhdGUgdGhlIHNlbGwgcHJpY2UgYmFzZWQgb24gdGhlIGhpc3RvcnkgYW5kIGxpc3RpbmdzLgogICAgLy8gYXBwbHlPZmZzZXQgc3BlY2lmaWVzIHdoZXRoZXIgdGhlIHByaWNlIG9mZnNldCBzaG91bGQgYmUgYXBwbGllZCB3aGVuIHRoZSBsaXN0aW5ncyBhcmUgdXNlZCB0byBkZXRlcm1pbmUgdGhlIHByaWNlLgogICAgZnVuY3Rpb24gY2FsY3VsYXRlU2VsbFByaWNlQmVmb3JlRmVlcyhoaXN0b3J5LCBoaXN0b2dyYW0sIGFwcGx5T2Zmc2V0LCBtaW5QcmljZUJlZm9yZUZlZXMsIG1heFByaWNlQmVmb3JlRmVlcykgewogICAgICAgIHZhciBoaXN0b3J5UHJpY2UgPSBjYWxjdWxhdGVBdmVyYWdlSGlzdG9yeVByaWNlQmVmb3JlRmVlcyhoaXN0b3J5KTsKICAgICAgICB2YXIgbGlzdGluZ1ByaWNlID0gY2FsY3VsYXRlTGlzdGluZ1ByaWNlQmVmb3JlRmVlcyhoaXN0b2dyYW0pOwogICAgICAgIHZhciBidXlQcmljZSA9IGNhbGN1bGF0ZUJ1eU9yZGVyUHJpY2VCZWZvcmVGZWVzKGhpc3RvZ3JhbSk7CgogICAgICAgIHZhciBzaG91bGRVc2VBdmVyYWdlID0gZ2V0U2V0dGluZ1dpdGhEZWZhdWx0KFNFVFRJTkdfUFJJQ0VfQUxHT1JJVEhNKSA9PSAxOwogICAgICAgIHZhciBzaG91bGRVc2VCdXlPcmRlciA9IGdldFNldHRpbmdXaXRoRGVmYXVsdChTRVRUSU5HX1BSSUNFX0FMR09SSVRITSkgPT0gMzsKCiAgICAgICAgLy8gSWYgdGhlIGhpZ2hlc3QgYXZlcmFnZSBwcmljZSBpcyBsb3dlciB0aGFuIHRoZSBmaXJzdCBsaXN0aW5nLCByZXR1cm4gdGhlIG9mZnNldCArIHRoYXQgbGlzdGluZy4KICAgICAgICAvLyBPdGhlcndpc2UsIHVzZSB0aGUgaGlnaGVzdCBhdmVyYWdlIHByaWNlIGluc3RlYWQuCiAgICAgICAgdmFyIGNhbGN1bGF0ZWRQcmljZSA9IDA7CiAgICAgICAgaWYgKHNob3VsZFVzZUJ1eU9yZGVyICYmIGJ1eVByaWNlICE9PSAtMikgewogICAgICAgICAgICBjYWxjdWxhdGVkUHJpY2UgPSBidXlQcmljZTsKICAgICAgICB9IGVsc2UgaWYgKGhpc3RvcnlQcmljZSA8IGxpc3RpbmdQcmljZSB8fCAhc2hvdWxkVXNlQXZlcmFnZSkgewogICAgICAgICAgICBjYWxjdWxhdGVkUHJpY2UgPSBsaXN0aW5nUHJpY2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2FsY3VsYXRlZFByaWNlID0gaGlzdG9yeVByaWNlOwogICAgICAgIH0KCiAgICAgICAgdmFyIGNoYW5nZWRUb01heCA9IGZhbHNlOwogICAgICAgIC8vIExpc3QgZm9yIHRoZSBtYXhpbXVtIHByaWNlIGlmIHRoZXJlIGFyZSBubyBsaXN0aW5ncyB5ZXQuCiAgICAgICAgaWYgKGNhbGN1bGF0ZWRQcmljZSA9PSAwKSB7CiAgICAgICAgICAgIGNhbGN1bGF0ZWRQcmljZSA9IG1heFByaWNlQmVmb3JlRmVlczsKICAgICAgICAgICAgY2hhbmdlZFRvTWF4ID0gdHJ1ZTsKICAgICAgICB9CgoKICAgICAgICAvLyBBcHBseSB0aGUgb2Zmc2V0IHRvIHRoZSBjYWxjdWxhdGVkIHByaWNlLCBidXQgb25seSBpZiB0aGUgcHJpY2Ugd2Fzbid0IGNoYW5nZWQgdG8gdGhlIG1heCAoYXMgb3RoZXJ3aXNlIGl0J3MgaW1wb3NzaWJsZSB0byBsaXN0IGZvciB0aGlzIHByaWNlKS4KICAgICAgICBpZiAoIWNoYW5nZWRUb01heCAmJiBhcHBseU9mZnNldCkgewogICAgICAgICAgICBjYWxjdWxhdGVkUHJpY2UgPSBjYWxjdWxhdGVkUHJpY2UgKyAoZ2V0U2V0dGluZ1dpdGhEZWZhdWx0KFNFVFRJTkdfUFJJQ0VfT0ZGU0VUKSAqIDEwMCk7CiAgICAgICAgfQoKCiAgICAgICAgLy8gS2VlcCBvdXIgbWluaW11bSBhbmQgbWF4aW11bSBpbiBtaW5kLgogICAgICAgIGNhbGN1bGF0ZWRQcmljZSA9IGNsYW1wKGNhbGN1bGF0ZWRQcmljZSwgbWluUHJpY2VCZWZvcmVGZWVzLCBtYXhQcmljZUJlZm9yZUZlZXMpOwoKCiAgICAgICAgLy8gSW4gY2FzZSB0aGVyZSdzIGEgYnV5IG9yZGVyIGhpZ2hlciB0aGFuIHRoZSBjYWxjdWxhdGVkIHByaWNlLgogICAgICAgIGlmICh0eXBlb2YgaGlzdG9ncmFtICE9PSAndW5kZWZpbmVkJyAmJiBoaXN0b2dyYW0gIT0gbnVsbCAmJiBoaXN0b2dyYW0uaGlnaGVzdF9idXlfb3JkZXIgIT0gbnVsbCkgewogICAgICAgICAgICB2YXIgYnV5T3JkZXJQcmljZSA9IG1hcmtldC5nZXRQcmljZUJlZm9yZUZlZXMoaGlzdG9ncmFtLmhpZ2hlc3RfYnV5X29yZGVyKTsKICAgICAgICAgICAgaWYgKGJ1eU9yZGVyUHJpY2UgPiBjYWxjdWxhdGVkUHJpY2UpCiAgICAgICAgICAgICAgICBjYWxjdWxhdGVkUHJpY2UgPSBidXlPcmRlclByaWNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGNhbGN1bGF0ZWRQcmljZTsKICAgIH0KICAgIC8vI2VuZHJlZ2lvbgoKICAgIC8vI3JlZ2lvbiBJbnRlZ2VyIGhlbHBlcnMKICAgIGZ1bmN0aW9uIGdldFJhbmRvbUludChtaW4sIG1heCkgewogICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldE51bWJlck9mRGlnaXRzKHgpIHsKICAgICAgICByZXR1cm4gKE1hdGgubG9nMTAoKHggXiAoeCA+PiAzMSkpIC0gKHggPj4gMzEpKSB8IDApICsgMTsKICAgIH0KCiAgICBmdW5jdGlvbiBwYWRMZWZ0WmVybyhzdHIsIG1heCkgewogICAgICAgIHN0ciA9IHN0ci50b1N0cmluZygpOwogICAgICAgIHJldHVybiBzdHIubGVuZ3RoIDwgbWF4ID8gcGFkTGVmdFplcm8oIjAiICsgc3RyLCBtYXgpIDogc3RyOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlcGxhY2VOb25OdW1iZXJzKHN0cikgewogICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvXEQvZywgJycpOwogICAgfQogICAgLy8jZW5kcmVnaW9uCgogICAgLy8jcmVnaW9uIFN0ZWFtIE1hcmtldAoKICAgIC8vIFNlbGwgYW4gaXRlbSB3aXRoIGEgcHJpY2UgaW4gY2VudHMuCiAgICAvLyBQcmljZSBpcyBiZWZvcmUgZmVlcy4KICAgIFN0ZWFtTWFya2V0LnByb3RvdHlwZS5zZWxsSXRlbSA9IGZ1bmN0aW9uKGl0ZW0sIHByaWNlLCBjYWxsYmFjayAvKmVyciwgZGF0YSovICkgewogICAgICAgIHZhciBzZXNzaW9uSWQgPSByZWFkQ29va2llKCdzZXNzaW9uaWQnKTsKICAgICAgICB2YXIgaXRlbUlkID0gaXRlbS5hc3NldGlkIHx8IGl0ZW0uaWQ7CiAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgdHlwZTogIlBPU1QiLAogICAgICAgICAgICB1cmw6ICdodHRwczovL3N0ZWFtY29tbXVuaXR5LmNvbS9tYXJrZXQvc2VsbGl0ZW0vJywKICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgc2Vzc2lvbmlkOiBzZXNzaW9uSWQsCiAgICAgICAgICAgICAgICBhcHBpZDogaXRlbS5hcHBpZCwKICAgICAgICAgICAgICAgIGNvbnRleHRpZDogaXRlbS5jb250ZXh0aWQsCiAgICAgICAgICAgICAgICBhc3NldGlkOiBpdGVtSWQsCiAgICAgICAgICAgICAgICBhbW91bnQ6IDEsCiAgICAgICAgICAgICAgICBwcmljZTogcHJpY2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2VzcyA9PT0gZmFsc2UgJiYgaXNSZXRyeU1lc3NhZ2UoZGF0YS5tZXNzYWdlKSkgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKEVSUk9SX0ZBSUxFRCwgZGF0YSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKEVSUk9SX1NVQ0NFU1MsIGRhdGEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKEVSUk9SX0ZBSUxFRCwgZGF0YSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNyb3NzRG9tYWluOiB0cnVlLAogICAgICAgICAgICB4aHJGaWVsZHM6IHsKICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nCiAgICAgICAgfSk7CiAgICB9OwoKICAgIC8vIFJlbW92ZXMgYW4gaXRlbS4KICAgIC8vIEl0ZW0gaXMgdGhlIHVuaXF1ZSBpdGVtIGlkLgogICAgU3RlYW1NYXJrZXQucHJvdG90eXBlLnJlbW92ZUxpc3RpbmcgPSBmdW5jdGlvbihpdGVtLCBjYWxsYmFjayAvKmVyciwgZGF0YSovICkgewogICAgICAgIHZhciBzZXNzaW9uSWQgPSByZWFkQ29va2llKCdzZXNzaW9uaWQnKTsKICAgICAgICAkLmFqYXgoewogICAgICAgICAgICB0eXBlOiAiUE9TVCIsCiAgICAgICAgICAgIHVybDogd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vc3RlYW1jb21tdW5pdHkuY29tL21hcmtldC9yZW1vdmVsaXN0aW5nLycgKyBpdGVtLAogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICBzZXNzaW9uaWQ6IHNlc3Npb25JZAogICAgICAgICAgICB9LAogICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjayhFUlJPUl9TVUNDRVNTLCBkYXRhKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKEVSUk9SX0ZBSUxFRCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNyb3NzRG9tYWluOiB0cnVlLAogICAgICAgICAgICB4aHJGaWVsZHM6IHsKICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nCiAgICAgICAgfSk7CiAgICB9OwoKICAgIC8vIEdldCB0aGUgcHJpY2UgaGlzdG9yeSBmb3IgYW4gaXRlbS4KICAgIC8vCiAgICAvLyBQcmljZUhpc3RvcnkgaXMgYW4gYXJyYXkgb2YgcHJpY2VzIGluIHRoZSBmb3JtIFtkYXRhLCBwcmljZSwgbnVtYmVyIHNvbGRdLgogICAgLy8gRXhhbXBsZTogW1siRnJpLCAxOSBKdWwgMjAxMyAwMTowMDowMCArMDAwMCIsNy4zMDA1MDIwNjE4NCwzNjJdXQogICAgLy8gUHJpY2VzIGFyZSBvcmRlcmVkIGJ5IG9sZGVzdCB0byBtb3N0IHJlY2VudC4KICAgIC8vIFByaWNlIGlzIGluY2x1c2l2ZSBvZiBmZWVzLgogICAgU3RlYW1NYXJrZXQucHJvdG90eXBlLmdldFByaWNlSGlzdG9yeSA9IGZ1bmN0aW9uKGl0ZW0sIGNhY2hlLCBjYWxsYmFjaykgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHZhciBtYXJrZXRfbmFtZSA9IGdldE1hcmtldEhhc2hOYW1lKGl0ZW0pOwogICAgICAgICAgICBpZiAobWFya2V0X25hbWUgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgY2FsbGJhY2soRVJST1JfRkFJTEVEKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGFwcGlkID0gaXRlbS5hcHBpZDsKCiAgICAgICAgICAgIGlmIChjYWNoZSkgewogICAgICAgICAgICAgICAgdmFyIHN0b3JhZ2VfaGFzaCA9ICdwcmljZWhpc3RvcnlfJyArIGFwcGlkICsgJysnICsgbWFya2V0X25hbWU7CgogICAgICAgICAgICAgICAgc3RvcmFnZVNlc3Npb24uZ2V0SXRlbShzdG9yYWdlX2hhc2gpCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9IG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhFUlJPUl9TVUNDRVNTLCB2YWx1ZSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldC5nZXRDdXJyZW50UHJpY2VIaXN0b3J5KGFwcGlkLCBtYXJrZXRfbmFtZSwgY2FsbGJhY2spOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldC5nZXRDdXJyZW50UHJpY2VIaXN0b3J5KGFwcGlkLCBtYXJrZXRfbmFtZSwgY2FsbGJhY2spOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAgIG1hcmtldC5nZXRDdXJyZW50UHJpY2VIaXN0b3J5KGFwcGlkLCBtYXJrZXRfbmFtZSwgY2FsbGJhY2spOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKEVSUk9SX0ZBSUxFRCk7CiAgICAgICAgfQogICAgfTsKCiAgICBTdGVhbU1hcmtldC5wcm90b3R5cGUuZ2V0R29vVmFsdWUgPSBmdW5jdGlvbihpdGVtLCBjYWxsYmFjaykgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHZhciBzZXNzaW9uSWQgPSByZWFkQ29va2llKCdzZXNzaW9uaWQnKTsKICAgICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICAgIHR5cGU6ICJHRVQiLAogICAgICAgICAgICAgICAgdXJsOiB0aGlzLmludmVudG9yeVVybEJhc2UgKyAnYWpheGdldGdvb3ZhbHVlLycsCiAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbmlkOiBzZXNzaW9uSWQsCiAgICAgICAgICAgICAgICAgICAgYXBwaWQ6IGl0ZW0ubWFya2V0X2ZlZV9hcHAsCiAgICAgICAgICAgICAgICAgICAgYXNzZXRpZDogaXRlbS5hc3NldGlkLAogICAgICAgICAgICAgICAgICAgIGNvbnRleHRpZDogaXRlbS5jb250ZXh0aWQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soRVJST1JfU1VDQ0VTUywgZGF0YSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soRVJST1JfRkFJTEVELCBkYXRhKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjcm9zc0RvbWFpbjogdHJ1ZSwKICAgICAgICAgICAgICAgIHhockZpZWxkczogewogICAgICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soRVJST1JfRkFJTEVEKTsKICAgICAgICB9CiAgICAgICAgLy9odHRwOi8vc3RlYW1jb21tdW5pdHkuY29tL2F1Y3Rpb24vYWpheGdldGdvb3ZhbHVlZm9yaXRlbXR5cGUvP2FwcGlkPTU4Mjk4MCZpdGVtX3R5cGU9MTgmYm9yZGVyX2NvbG9yPTAKICAgICAgICAvLyBPUgogICAgICAgIC8vaHR0cDovL3N0ZWFtY29tbXVuaXR5LmNvbS9teS9hamF4Z2V0Z29vdmFsdWUvP3Nlc3Npb25pZD14eXomYXBwaWQ9NTM1NjkwJmFzc2V0aWQ9NDgzMDYwNTQ2MSZjb250ZXh0aWQ9NgogICAgICAgIC8vc2Vzc2lvbmlkPXh5egogICAgICAgIC8vYXBwaWQgPSA1MzU2OTAKICAgICAgICAvL2Fzc2V0aWQgPSA0ODMwNjA1NDYxCiAgICAgICAgLy9jb250ZXh0aWQgPSA2CiAgICB9CgoKICAgIC8vIEdyaW5kcyB0aGUgaXRlbSBpbnRvIGdlbXMuCiAgICBTdGVhbU1hcmtldC5wcm90b3R5cGUuZ3JpbmRJbnRvR29vID0gZnVuY3Rpb24oaXRlbSwgY2FsbGJhY2spIHsKICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgc2Vzc2lvbklkID0gcmVhZENvb2tpZSgnc2Vzc2lvbmlkJyk7CiAgICAgICAgICAgICQuYWpheCh7CiAgICAgICAgICAgICAgICB0eXBlOiAiUE9TVCIsCiAgICAgICAgICAgICAgICB1cmw6IHRoaXMuaW52ZW50b3J5VXJsQmFzZSArICdhamF4Z3JpbmRpbnRvZ29vLycsCiAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbmlkOiBzZXNzaW9uSWQsCiAgICAgICAgICAgICAgICAgICAgYXBwaWQ6IGl0ZW0ubWFya2V0X2ZlZV9hcHAsCiAgICAgICAgICAgICAgICAgICAgYXNzZXRpZDogaXRlbS5hc3NldGlkLAogICAgICAgICAgICAgICAgICAgIGNvbnRleHRpZDogaXRlbS5jb250ZXh0aWQsCiAgICAgICAgICAgICAgICAgICAgZ29vX3ZhbHVlX2V4cGVjdGVkOiBpdGVtLmdvb192YWx1ZV9leHBlY3RlZAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhFUlJPUl9TVUNDRVNTLCBkYXRhKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhFUlJPUl9GQUlMRUQsIGRhdGEpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNyb3NzRG9tYWluOiB0cnVlLAogICAgICAgICAgICAgICAgeGhyRmllbGRzOiB7CiAgICAgICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJwogICAgICAgICAgICB9KTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhFUlJPUl9GQUlMRUQpOwogICAgICAgIH0KCiAgICAgICAgLy9zZXNzaW9uaWQgPSB4eXoKICAgICAgICAvL2FwcGlkID0gNTM1NjkwCiAgICAgICAgLy9hc3NldGlkID0gNDgzMDYwNTQ2MQogICAgICAgIC8vY29udGV4dGlkID0gNgogICAgICAgIC8vZ29vX3ZhbHVlX2V4cGVjdGVkID0gMTAKICAgICAgICAvL2h0dHA6Ly9zdGVhbWNvbW11bml0eS5jb20vbXkvYWpheGdyaW5kaW50b2dvby8KICAgIH0KCgogICAgLy8gVW5wYWNrcyB0aGUgYm9vc3RlciBwYWNrLgogICAgU3RlYW1NYXJrZXQucHJvdG90eXBlLnVucGFja0Jvb3N0ZXJQYWNrID0gZnVuY3Rpb24oaXRlbSwgY2FsbGJhY2spIHsKICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgc2Vzc2lvbklkID0gcmVhZENvb2tpZSgnc2Vzc2lvbmlkJyk7CiAgICAgICAgICAgICQuYWpheCh7CiAgICAgICAgICAgICAgICB0eXBlOiAiUE9TVCIsCiAgICAgICAgICAgICAgICB1cmw6IHRoaXMuaW52ZW50b3J5VXJsQmFzZSArICdhamF4dW5wYWNrYm9vc3Rlci8nLAogICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgIHNlc3Npb25pZDogc2Vzc2lvbklkLAogICAgICAgICAgICAgICAgICAgIGFwcGlkOiBpdGVtLm1hcmtldF9mZWVfYXBwLAogICAgICAgICAgICAgICAgICAgIGNvbW11bml0eWl0ZW1pZDogaXRlbS5hc3NldGlkCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKEVSUk9SX1NVQ0NFU1MsIGRhdGEpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKEVSUk9SX0ZBSUxFRCwgZGF0YSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY3Jvc3NEb21haW46IHRydWUsCiAgICAgICAgICAgICAgICB4aHJGaWVsZHM6IHsKICAgICAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nCiAgICAgICAgICAgIH0pOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKEVSUk9SX0ZBSUxFRCk7CiAgICAgICAgfQoKICAgICAgICAvL3Nlc3Npb25pZCA9IHh5egogICAgICAgIC8vYXBwaWQgPSA1MzU2OTAKICAgICAgICAvL2NvbW11bml0eWl0ZW1pZCA9IDQ4MzA2MDU0NjEKICAgICAgICAvL2h0dHA6Ly9zdGVhbWNvbW11bml0eS5jb20vbXkvYWpheHVucGFja2Jvb3N0ZXIvCiAgICB9CgogICAgLy8gR2V0IHRoZSBjdXJyZW50IHByaWNlIGhpc3RvcnkgZm9yIGFuIGl0ZW0uCiAgICBTdGVhbU1hcmtldC5wcm90b3R5cGUuZ2V0Q3VycmVudFByaWNlSGlzdG9yeSA9IGZ1bmN0aW9uKGFwcGlkLCBtYXJrZXRfbmFtZSwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsKICAgICAgICAgICAgJy8vc3RlYW1jb21tdW5pdHkuY29tL21hcmtldC9wcmljZWhpc3RvcnkvP2FwcGlkPScgKwogICAgICAgICAgICBhcHBpZCArCiAgICAgICAgICAgICcmbWFya2V0X2hhc2hfbmFtZT0nICsKICAgICAgICAgICAgbWFya2V0X25hbWU7CgogICAgICAgICQuZ2V0KHVybCwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEgfHwgIWRhdGEuc3VjY2VzcyB8fCAhZGF0YS5wcmljZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soRVJST1JfREFUQSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIE11bHRpcGx5IHByaWNlcyBzbyB0aGV5J3JlIGluIHBlbm5pZXMuCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLnByaWNlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnByaWNlc1tpXVsxXSAqPSAxMDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucHJpY2VzW2ldWzJdID0gcGFyc2VJbnQoZGF0YS5wcmljZXNbaV1bMl0pOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gU3RvcmUgdGhlIHByaWNlIGhpc3RvcnkgaW4gdGhlIHNlc3Npb24gc3RvcmFnZS4KICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmFnZV9oYXNoID0gJ3ByaWNlaGlzdG9yeV8nICsgYXBwaWQgKyAnKycgKyBtYXJrZXRfbmFtZTsKICAgICAgICAgICAgICAgICAgICBzdG9yYWdlU2Vzc2lvbi5zZXRJdGVtKHN0b3JhZ2VfaGFzaCwgZGF0YS5wcmljZXMpOwoKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhFUlJPUl9TVUNDRVNTLCBkYXRhLnByaWNlcywgZmFsc2UpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdqc29uJykKICAgICAgICAgICAgLmZhaWwoZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLnJlc3BvbnNlSlNPTikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhFUlJPUl9GQUlMRUQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCFkYXRhLnJlc3BvbnNlSlNPTi5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soRVJST1JfREFUQSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKEVSUk9SX0ZBSUxFRCk7CiAgICAgICAgICAgIH0pOwogICAgfQoKICAgIC8vIEdldCB0aGUgaXRlbSBuYW1lIGlkIGZyb20gYSBtYXJrZXQgaXRlbS4KICAgIC8vCiAgICAvLyBUaGlzIGlkIG5ldmVyIGNoYW5nZXMgc28gd2UgY2FuIHN0b3JlIHRoaXMgaW4gdGhlIHBlcnNpc3RlbnQgc3RvcmFnZS4KICAgIFN0ZWFtTWFya2V0LnByb3RvdHlwZS5nZXRNYXJrZXRJdGVtTmFtZUlkID0gZnVuY3Rpb24oaXRlbSwgY2FsbGJhY2spIHsKICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgbWFya2V0X25hbWUgPSBnZXRNYXJrZXRIYXNoTmFtZShpdGVtKTsKICAgICAgICAgICAgaWYgKG1hcmtldF9uYW1lID09IG51bGwpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKEVSUk9SX0ZBSUxFRCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBhcHBpZCA9IGl0ZW0uYXBwaWQ7CiAgICAgICAgICAgIHZhciBzdG9yYWdlX2hhc2ggPSAnaXRlbW5hbWVpZF8nICsgYXBwaWQgKyAnKycgKyBtYXJrZXRfbmFtZTsKCiAgICAgICAgICAgIHN0b3JhZ2VQZXJzaXN0ZW50LmdldEl0ZW0oc3RvcmFnZV9oYXNoKQogICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soRVJST1JfU1VDQ0VTUywgdmFsdWUpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcmtldC5nZXRDdXJyZW50TWFya2V0SXRlbU5hbWVJZChhcHBpZCwgbWFya2V0X25hbWUsIGNhbGxiYWNrKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFya2V0LmdldEN1cnJlbnRNYXJrZXRJdGVtTmFtZUlkKGFwcGlkLCBtYXJrZXRfbmFtZSwgY2FsbGJhY2spOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soRVJST1JfRkFJTEVEKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gR2V0IHRoZSBpdGVtIG5hbWUgaWQgZnJvbSBhIG1hcmtldCBpdGVtLgogICAgU3RlYW1NYXJrZXQucHJvdG90eXBlLmdldEN1cnJlbnRNYXJrZXRJdGVtTmFtZUlkID0gZnVuY3Rpb24oYXBwaWQsIG1hcmtldF9uYW1lLCBjYWxsYmFjaykgewogICAgICAgIHZhciB1cmwgPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy9zdGVhbWNvbW11bml0eS5jb20vbWFya2V0L2xpc3RpbmdzLycgKyBhcHBpZCArICcvJyArIG1hcmtldF9uYW1lOwogICAgICAgICQuZ2V0KHVybCwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHBhZ2UpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IC9NYXJrZXRfTG9hZE9yZGVyU3ByZWFkXCggKC4rKSBcKTsvLmV4ZWMocGFnZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoZXMgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhFUlJPUl9EQVRBKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1fbmFtZWlkID0gbWF0Y2hlc1sxXTsKCiAgICAgICAgICAgICAgICAgICAgLy8gU3RvcmUgdGhlIGl0ZW0gbmFtZSBpZCBpbiB0aGUgcGVyc2lzdGVudCBzdG9yYWdlLgogICAgICAgICAgICAgICAgICAgIHZhciBzdG9yYWdlX2hhc2ggPSAnaXRlbW5hbWVpZF8nICsgYXBwaWQgKyAnKycgKyBtYXJrZXRfbmFtZTsKICAgICAgICAgICAgICAgICAgICBzdG9yYWdlUGVyc2lzdGVudC5zZXRJdGVtKHN0b3JhZ2VfaGFzaCwgaXRlbV9uYW1laWQpOwoKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhFUlJPUl9TVUNDRVNTLCBpdGVtX25hbWVpZCk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAuZmFpbChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soRVJST1JfRkFJTEVELCBlLnN0YXR1cyk7CiAgICAgICAgICAgIH0pOwogICAgfTsKCiAgICAvLyBHZXQgdGhlIHNhbGVzIGxpc3RpbmdzIGZvciB0aGlzIGl0ZW0gaW4gdGhlIG1hcmtldCwgd2l0aCBtb3JlIGluZm9ybWF0aW9uLgogICAgLy8KICAgIC8vewogICAgLy8ic3VjY2VzcyIgOiAxLAogICAgLy8ic2VsbF9vcmRlcl90YWJsZSIgOiAiPHRhYmxlIGNsYXNzPVwibWFya2V0X2NvbW1vZGl0eV9vcmRlcnNfdGFibGVcIj48dHI+PHRoIGFsaWduPVwicmlnaHRcIj5QcmljZTxcL3RoPjx0aCBhbGlnbj1cInJpZ2h0XCI+UXVhbnRpdHk8XC90aD48XC90cj48dHI+PHRkIGFsaWduPVwicmlnaHRcIiBjbGFzcz1cIlwiPjAsMDRcdTIwYWM8XC90ZD48dGQgYWxpZ249XCJyaWdodFwiPjMxMTxcL3RkPjxcL3RyPjx0cj48dGQgYWxpZ249XCJyaWdodFwiIGNsYXNzPVwiXCI+MCwwNVx1MjBhYzxcL3RkPjx0ZCBhbGlnbj1cInJpZ2h0XCI+ODk1PFwvdGQ+PFwvdHI+PHRyPjx0ZCBhbGlnbj1cInJpZ2h0XCIgY2xhc3M9XCJcIj4wLDA2XHUyMGFjPFwvdGQ+PHRkIGFsaWduPVwicmlnaHRcIj40OTU8XC90ZD48XC90cj48dHI+PHRkIGFsaWduPVwicmlnaHRcIiBjbGFzcz1cIlwiPjAsMDdcdTIwYWM8XC90ZD48dGQgYWxpZ249XCJyaWdodFwiPjE3NDxcL3RkPjxcL3RyPjx0cj48dGQgYWxpZ249XCJyaWdodFwiIGNsYXNzPVwiXCI+MCwwOFx1MjBhYzxcL3RkPjx0ZCBhbGlnbj1cInJpZ2h0XCI+NDk8XC90ZD48XC90cj48dHI+PHRkIGFsaWduPVwicmlnaHRcIiBjbGFzcz1cIlwiPjAsMDlcdTIwYWMgb3IgbW9yZTxcL3RkPjx0ZCBhbGlnbj1cInJpZ2h0XCI+NDE8XC90ZD48XC90cj48XC90YWJsZT4iLAogICAgLy8ic2VsbF9vcmRlcl9zdW1tYXJ5IiA6ICI8c3BhbiBjbGFzcz1cIm1hcmtldF9jb21tb2RpdHlfb3JkZXJzX2hlYWRlcl9wcm9tb3RlXCI+MTk2NTxcL3NwYW4+IGZvciBzYWxlIHN0YXJ0aW5nIGF0IDxzcGFuIGNsYXNzPVwibWFya2V0X2NvbW1vZGl0eV9vcmRlcnNfaGVhZGVyX3Byb21vdGVcIj4wLDA0XHUyMGFjPFwvc3Bhbj4iLAogICAgLy8iYnV5X29yZGVyX3RhYmxlIiA6ICI8dGFibGUgY2xhc3M9XCJtYXJrZXRfY29tbW9kaXR5X29yZGVyc190YWJsZVwiPjx0cj48dGggYWxpZ249XCJyaWdodFwiPlByaWNlPFwvdGg+PHRoIGFsaWduPVwicmlnaHRcIj5RdWFudGl0eTxcL3RoPjxcL3RyPjx0cj48dGQgYWxpZ249XCJyaWdodFwiIGNsYXNzPVwiXCI+MCwwM1x1MjBhYzxcL3RkPjx0ZCBhbGlnbj1cInJpZ2h0XCI+OTM8XC90ZD48XC90cj48XC90YWJsZT4iLAogICAgLy8iYnV5X29yZGVyX3N1bW1hcnkiIDogIjxzcGFuIGNsYXNzPVwibWFya2V0X2NvbW1vZGl0eV9vcmRlcnNfaGVhZGVyX3Byb21vdGVcIj45MzxcL3NwYW4+IHJlcXVlc3RzIHRvIGJ1eSBhdCA8c3BhbiBjbGFzcz1cIm1hcmtldF9jb21tb2RpdHlfb3JkZXJzX2hlYWRlcl9wcm9tb3RlXCI+MCwwM1x1MjBhYzxcL3NwYW4+IG9yIGxvd2VyIiwKICAgIC8vImhpZ2hlc3RfYnV5X29yZGVyIiA6ICIzIiwKICAgIC8vImxvd2VzdF9zZWxsX29yZGVyIiA6ICI0IiwKICAgIC8vImJ1eV9vcmRlcl9ncmFwaCIgOiBbWzAuMDMsIDkzLCAiOTMgYnV5IG9yZGVycyBhdCAwLDAzXHUyMGFjIG9yIGhpZ2hlciJdXSwKICAgIC8vInNlbGxfb3JkZXJfZ3JhcGgiIDogW1swLjA0LCAzMTEsICIzMTEgc2VsbCBvcmRlcnMgYXQgMCwwNFx1MjBhYyBvciBsb3dlciJdLCBbMC4wNSwgMTIwNiwgIjEsMjA2IHNlbGwgb3JkZXJzIGF0IDAsMDVcdTIwYWMgb3IgbG93ZXIiXSwgWzAuMDYsIDE3MDEsICIxLDcwMSBzZWxsIG9yZGVycyBhdCAwLDA2XHUyMGFjIG9yIGxvd2VyIl0sIFswLjA3LCAxODc1LCAiMSw4NzUgc2VsbCBvcmRlcnMgYXQgMCwwN1x1MjBhYyBvciBsb3dlciJdLCBbMC4wOCwgMTkyNCwgIjEsOTI0IHNlbGwgb3JkZXJzIGF0IDAsMDhcdTIwYWMgb3IgbG93ZXIiXSwgWzAuMDksIDE5MzQsICIxLDkzNCBzZWxsIG9yZGVycyBhdCAwLDA5XHUyMGFjIG9yIGxvd2VyIl0sIFswLjEsIDE5MzYsICIxLDkzNiBzZWxsIG9yZGVycyBhdCAwLDEwXHUyMGFjIG9yIGxvd2VyIl0sIFswLjExLCAxOTM3LCAiMSw5Mzcgc2VsbCBvcmRlcnMgYXQgMCwxMVx1MjBhYyBvciBsb3dlciJdLCBbMC4xMiwgMTk0NCwgIjEsOTQ0IHNlbGwgb3JkZXJzIGF0IDAsMTJcdTIwYWMgb3IgbG93ZXIiXSwgWzAuMTQsIDE5NDUsICIxLDk0NSBzZWxsIG9yZGVycyBhdCAwLDE0XHUyMGFjIG9yIGxvd2VyIl1dLAogICAgLy8iZ3JhcGhfbWF4X3kiIDogMzAwMCwKICAgIC8vImdyYXBoX21pbl94IiA6IDAuMDMsCiAgICAvLyJncmFwaF9tYXhfeCIgOiAwLjE0LAogICAgLy8icHJpY2VfcHJlZml4IiA6ICIiLAogICAgLy8icHJpY2Vfc3VmZml4IiA6ICJcdTIwYWMiCiAgICAvL30KICAgIFN0ZWFtTWFya2V0LnByb3RvdHlwZS5nZXRJdGVtT3JkZXJzSGlzdG9ncmFtID0gZnVuY3Rpb24oaXRlbSwgY2FjaGUsIGNhbGxiYWNrKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIG1hcmtldF9uYW1lID0gZ2V0TWFya2V0SGFzaE5hbWUoaXRlbSk7CiAgICAgICAgICAgIGlmIChtYXJrZXRfbmFtZSA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjayhFUlJPUl9GQUlMRUQpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgYXBwaWQgPSBpdGVtLmFwcGlkOwoKICAgICAgICAgICAgaWYgKGNhY2hlKSB7CiAgICAgICAgICAgICAgICB2YXIgc3RvcmFnZV9oYXNoID0gJ2l0ZW1vcmRlcnNoaXN0b2dyYW1fJyArIGFwcGlkICsgJysnICsgbWFya2V0X25hbWU7CiAgICAgICAgICAgICAgICBzdG9yYWdlU2Vzc2lvbi5nZXRJdGVtKHN0b3JhZ2VfaGFzaCkKICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKEVSUk9SX1NVQ0NFU1MsIHZhbHVlLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXQuZ2V0Q3VycmVudEl0ZW1PcmRlcnNIaXN0b2dyYW0oaXRlbSwgbWFya2V0X25hbWUsIGNhbGxiYWNrKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldC5nZXRDdXJyZW50SXRlbU9yZGVyc0hpc3RvZ3JhbShpdGVtLCBtYXJrZXRfbmFtZSwgY2FsbGJhY2spOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbWFya2V0LmdldEN1cnJlbnRJdGVtT3JkZXJzSGlzdG9ncmFtKGl0ZW0sIG1hcmtldF9uYW1lLCBjYWxsYmFjayk7CiAgICAgICAgICAgIH0KCiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soRVJST1JfRkFJTEVEKTsKICAgICAgICB9CiAgICB9OwoKICAgIC8vIEdldCB0aGUgc2FsZXMgbGlzdGluZ3MgZm9yIHRoaXMgaXRlbSBpbiB0aGUgbWFya2V0LCB3aXRoIG1vcmUgaW5mb3JtYXRpb24uCiAgICBTdGVhbU1hcmtldC5wcm90b3R5cGUuZ2V0Q3VycmVudEl0ZW1PcmRlcnNIaXN0b2dyYW0gPSBmdW5jdGlvbihpdGVtLCBtYXJrZXRfbmFtZSwgY2FsbGJhY2spIHsKICAgICAgICBtYXJrZXQuZ2V0TWFya2V0SXRlbU5hbWVJZChpdGVtLAogICAgICAgICAgICBmdW5jdGlvbihlcnJvciwgaXRlbV9uYW1laWQpIHsKICAgICAgICAgICAgICAgIGlmIChlcnJvcikgewogICAgICAgICAgICAgICAgICAgIGlmIChpdGVtX25hbWVpZCAhPSA0MjkpIC8vIDQyOSA9IFRvbyBtYW55IHJlcXVlc3RzIG1hZGUuCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKEVSUk9SX0RBVEEpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soRVJST1JfRkFJTEVEKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsKICAgICAgICAgICAgICAgICAgICAnLy9zdGVhbWNvbW11bml0eS5jb20vbWFya2V0L2l0ZW1vcmRlcnNoaXN0b2dyYW0/bGFuZ3VhZ2U9ZW5nbGlzaCZjdXJyZW5jeT0nICsKICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeUlkICsKICAgICAgICAgICAgICAgICAgICAnJml0ZW1fbmFtZWlkPScgKwogICAgICAgICAgICAgICAgICAgIGl0ZW1fbmFtZWlkICsKICAgICAgICAgICAgICAgICAgICAnJnR3b19mYWN0b3I9MCc7CgogICAgICAgICAgICAgICAgJC5nZXQodXJsLAogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihoaXN0b2dyYW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0b3JlIHRoZSBoaXN0b2dyYW0gaW4gdGhlIHNlc3Npb24gc3RvcmFnZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdG9yYWdlX2hhc2ggPSAnaXRlbW9yZGVyc2hpc3RvZ3JhbV8nICsgaXRlbS5hcHBpZCArICcrJyArIG1hcmtldF9uYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZVNlc3Npb24uc2V0SXRlbShzdG9yYWdlX2hhc2gsIGhpc3RvZ3JhbSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soRVJST1JfU1VDQ0VTUywgaGlzdG9ncmFtLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLmZhaWwoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhFUlJPUl9GQUlMRUQsIG51bGwpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgIH07CgogICAgLy8gQ2FsY3VsYXRlIHRoZSBwcmljZSBiZWZvcmUgZmVlcyAoc2VsbGVyIHByaWNlKSBmcm9tIHRoZSBidXllciBwcmljZQogICAgU3RlYW1NYXJrZXQucHJvdG90eXBlLmdldFByaWNlQmVmb3JlRmVlcyA9IGZ1bmN0aW9uKHByaWNlLCBpdGVtKSB7CiAgICAgICAgdmFyIHB1Ymxpc2hlckZlZSA9IC0xOwoKICAgICAgICBpZiAoaXRlbSAhPSBudWxsKSB7CiAgICAgICAgICAgIGlmIChpdGVtLm1hcmtldF9mZWUgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHB1Ymxpc2hlckZlZSA9IGl0ZW0ubWFya2V0X2ZlZTsKICAgICAgICAgICAgZWxzZSBpZiAoaXRlbS5kZXNjcmlwdGlvbiAhPSBudWxsICYmIGl0ZW0uZGVzY3JpcHRpb24ubWFya2V0X2ZlZSAhPSBudWxsKQogICAgICAgICAgICAgICAgcHVibGlzaGVyRmVlID0gaXRlbS5kZXNjcmlwdGlvbi5tYXJrZXRfZmVlOwogICAgICAgIH0KCiAgICAgICAgaWYgKHB1Ymxpc2hlckZlZSA9PSAtMSkgewogICAgICAgICAgICBpZiAodGhpcy53YWxsZXRJbmZvICE9IG51bGwpCiAgICAgICAgICAgICAgICBwdWJsaXNoZXJGZWUgPSB0aGlzLndhbGxldEluZm9bJ3dhbGxldF9wdWJsaXNoZXJfZmVlX3BlcmNlbnRfZGVmYXVsdCddOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBwdWJsaXNoZXJGZWUgPSAwLjEwOwogICAgICAgIH0KCiAgICAgICAgcHJpY2UgPSBNYXRoLnJvdW5kKHByaWNlKTsKICAgICAgICB2YXIgZmVlSW5mbyA9IENhbGN1bGF0ZUZlZUFtb3VudChwcmljZSwgcHVibGlzaGVyRmVlLCB0aGlzLndhbGxldEluZm8pOwogICAgICAgIHJldHVybiBwcmljZSAtIGZlZUluZm8uZmVlczsKICAgIH07CgogICAgLy8gQ2FsY3VsYXRlIHRoZSBidXllciBwcmljZSBmcm9tIHRoZSBzZWxsZXIgcHJpY2UKICAgIFN0ZWFtTWFya2V0LnByb3RvdHlwZS5nZXRQcmljZUluY2x1ZGluZ0ZlZXMgPSBmdW5jdGlvbihwcmljZSwgaXRlbSkgewogICAgICAgIHZhciBwdWJsaXNoZXJGZWUgPSAtMTsKICAgICAgICBpZiAoaXRlbSAhPSBudWxsKSB7CiAgICAgICAgICAgIGlmIChpdGVtLm1hcmtldF9mZWUgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHB1Ymxpc2hlckZlZSA9IGl0ZW0ubWFya2V0X2ZlZTsKICAgICAgICAgICAgZWxzZSBpZiAoaXRlbS5kZXNjcmlwdGlvbiAhPSBudWxsICYmIGl0ZW0uZGVzY3JpcHRpb24ubWFya2V0X2ZlZSAhPSBudWxsKQogICAgICAgICAgICAgICAgcHVibGlzaGVyRmVlID0gaXRlbS5kZXNjcmlwdGlvbi5tYXJrZXRfZmVlOwogICAgICAgIH0KICAgICAgICBpZiAocHVibGlzaGVyRmVlID09IC0xKSB7CiAgICAgICAgICAgIGlmICh0aGlzLndhbGxldEluZm8gIT0gbnVsbCkKICAgICAgICAgICAgICAgIHB1Ymxpc2hlckZlZSA9IHRoaXMud2FsbGV0SW5mb1snd2FsbGV0X3B1Ymxpc2hlcl9mZWVfcGVyY2VudF9kZWZhdWx0J107CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHB1Ymxpc2hlckZlZSA9IDAuMTA7CiAgICAgICAgfQoKICAgICAgICBwcmljZSA9IE1hdGgucm91bmQocHJpY2UpOwogICAgICAgIHZhciBmZWVJbmZvID0gQ2FsY3VsYXRlQW1vdW50VG9TZW5kRm9yRGVzaXJlZFJlY2VpdmVkQW1vdW50KHByaWNlLCBwdWJsaXNoZXJGZWUsIHRoaXMud2FsbGV0SW5mbyk7CiAgICAgICAgcmV0dXJuIGZlZUluZm8uYW1vdW50OwogICAgfTsKICAgIC8vI2VuZHJlZ2lvbgoKICAgIGZ1bmN0aW9uIHJlcGxhY2VBbGwoc3RyLCBmaW5kLCByZXBsYWNlKSB7CiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKG5ldyBSZWdFeHAoZmluZCwgJ2cnKSwgcmVwbGFjZSk7CiAgICB9CgogICAgLy8gQ2Fubm90IHVzZSBlbmNvZGVVUkkgLyBlbmNvZGVVUklDb21wb25lbnQsIFN0ZWFtIG9ubHkgZXNjYXBlcyBjZXJ0YWluIGNoYXJhY3RlcnMuCiAgICBmdW5jdGlvbiBlc2NhcGVVUkkobmFtZSkgewogICAgICAgIHZhciBwcmV2aW91c05hbWUgPSAnJzsKICAgICAgICB3aGlsZSAocHJldmlvdXNOYW1lICE9IG5hbWUpIHsKICAgICAgICAgICAgcHJldmlvdXNOYW1lID0gbmFtZTsKICAgICAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZSgnPycsICclM0YnKQogICAgICAgICAgICAgICAgLnJlcGxhY2UoJyMnLCAnJTIzJykKICAgICAgICAgICAgICAgIC5yZXBsYWNlKCcJJywgJyUwOScpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbmFtZTsKICAgIH0KCiAgICAvLyNyZWdpb24gU3RlYW0gTWFya2V0IC8gSW52ZW50b3J5IGhlbHBlcnMKICAgIGZ1bmN0aW9uIGdldE1hcmtldEhhc2hOYW1lKGl0ZW0pIHsKICAgICAgICBpZiAoaXRlbSA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgaWYgKGl0ZW0uZGVzY3JpcHRpb24gIT0gbnVsbCAmJiBpdGVtLmRlc2NyaXB0aW9uLm1hcmtldF9oYXNoX25hbWUgIT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIGVzY2FwZVVSSShpdGVtLmRlc2NyaXB0aW9uLm1hcmtldF9oYXNoX25hbWUpOwoKICAgICAgICBpZiAoaXRlbS5kZXNjcmlwdGlvbiAhPSBudWxsICYmIGl0ZW0uZGVzY3JpcHRpb24ubmFtZSAhPSBudWxsKQogICAgICAgICAgICByZXR1cm4gZXNjYXBlVVJJKGl0ZW0uZGVzY3JpcHRpb24ubmFtZSk7CgogICAgICAgIGlmIChpdGVtLm1hcmtldF9oYXNoX25hbWUgIT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIGVzY2FwZVVSSShpdGVtLm1hcmtldF9oYXNoX25hbWUpOwoKICAgICAgICBpZiAoaXRlbS5uYW1lICE9IG51bGwpCiAgICAgICAgICAgIHJldHVybiBlc2NhcGVVUkkoaXRlbS5uYW1lKTsKCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0SXNDcmF0ZShpdGVtKSB7CiAgICAgICAgaWYgKGl0ZW0gPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIC8vIFRoaXMgaXMgYXZhaWxhYmxlIG9uIHRoZSBpbnZlbnRvcnkgcGFnZS4KICAgICAgICB2YXIgdGFncyA9IGl0ZW0udGFncyAhPSBudWxsID8KICAgICAgICAgICAgaXRlbS50YWdzIDoKICAgICAgICAgICAgKGl0ZW0uZGVzY3JpcHRpb24gIT0gbnVsbCAmJiBpdGVtLmRlc2NyaXB0aW9uLnRhZ3MgIT0gbnVsbCA/CiAgICAgICAgICAgICAgICBpdGVtLmRlc2NyaXB0aW9uLnRhZ3MgOgogICAgICAgICAgICAgICAgbnVsbCk7CiAgICAgICAgaWYgKHRhZ3MgIT0gbnVsbCkgewogICAgICAgICAgICB2YXIgaXNUYWdnZWRBc0NyYXRlID0gZmFsc2U7CiAgICAgICAgICAgIHRhZ3MuZm9yRWFjaChmdW5jdGlvbiAoYXJyYXlJdGVtKSB7CiAgICAgICAgICAgICAgICBpZiAoYXJyYXlJdGVtLmNhdGVnb3J5ID09ICdUeXBlJykKICAgICAgICAgICAgICAgICAgICBpZiAoYXJyYXlJdGVtLmludGVybmFsX25hbWUgPT0gJ1N1cHBseSBDcmF0ZScpCiAgICAgICAgICAgICAgICAgICAgICAgIGlzVGFnZ2VkQXNDcmF0ZSA9IHRydWU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoaXNUYWdnZWRBc0NyYXRlKQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGdldElzVHJhZGluZ0NhcmQoaXRlbSkgewogICAgICAgIGlmIChpdGVtID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgLy8gVGhpcyBpcyBhdmFpbGFibGUgb24gdGhlIGludmVudG9yeSBwYWdlLgogICAgICAgIHZhciB0YWdzID0gaXRlbS50YWdzICE9IG51bGwgPwogICAgICAgICAgICBpdGVtLnRhZ3MgOgogICAgICAgICAgICAoaXRlbS5kZXNjcmlwdGlvbiAhPSBudWxsICYmIGl0ZW0uZGVzY3JpcHRpb24udGFncyAhPSBudWxsID8KICAgICAgICAgICAgICAgIGl0ZW0uZGVzY3JpcHRpb24udGFncyA6CiAgICAgICAgICAgICAgICBudWxsKTsKICAgICAgICBpZiAodGFncyAhPSBudWxsKSB7CiAgICAgICAgICAgIHZhciBpc1RhZ2dlZEFzVHJhZGluZ0NhcmQgPSBmYWxzZTsKICAgICAgICAgICAgdGFncy5mb3JFYWNoKGZ1bmN0aW9uKGFycmF5SXRlbSkgewogICAgICAgICAgICAgICAgaWYgKGFycmF5SXRlbS5jYXRlZ29yeSA9PSAnaXRlbV9jbGFzcycpCiAgICAgICAgICAgICAgICAgICAgaWYgKGFycmF5SXRlbS5pbnRlcm5hbF9uYW1lID09ICdpdGVtX2NsYXNzXzInKSAvLyB0cmFkaW5nIGNhcmQuCiAgICAgICAgICAgICAgICAgICAgICAgIGlzVGFnZ2VkQXNUcmFkaW5nQ2FyZCA9IHRydWU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoaXNUYWdnZWRBc1RyYWRpbmdDYXJkKQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICAvLyBUaGlzIGlzIGF2YWlsYWJsZSBvbiB0aGUgbWFya2V0IHBhZ2UuCiAgICAgICAgaWYgKGl0ZW0ub3duZXJfYWN0aW9ucyAhPSBudWxsKSB7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbS5vd25lcl9hY3Rpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAoaXRlbS5vd25lcl9hY3Rpb25zW2ldLmxpbmsgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAgICAgICAvLyBDYXJkcyBpbmNsdWRlIGEgbGluayB0byB0aGUgZ2FtZWNhcmQgcGFnZS4KICAgICAgICAgICAgICAgIC8vIEZvciBleGFtcGxlOiAiaHR0cDovL3N0ZWFtY29tbXVuaXR5LmNvbS9teS9nYW1lY2FyZHMvNTAzODIwLyIuCiAgICAgICAgICAgICAgICBpZiAoaXRlbS5vd25lcl9hY3Rpb25zW2ldLmxpbmsudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdnYW1lY2FyZHMnKSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gQSBmYWxsYmFjayBmb3IgdGhlIG1hcmtldCBwYWdlIChvbmx5IHdvcmtzIHdpdGggbGFuZ3VhZ2Ugb24gRW5nbGlzaCkuCiAgICAgICAgaWYgKGl0ZW0udHlwZSAhPSBudWxsICYmIGl0ZW0udHlwZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd0cmFkaW5nIGNhcmQnKSkKICAgICAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRJc0ZvaWxUcmFkaW5nQ2FyZChpdGVtKSB7CiAgICAgICAgaWYgKCFnZXRJc1RyYWRpbmdDYXJkKGl0ZW0pKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgIC8vIFRoaXMgaXMgYXZhaWxhYmxlIG9uIHRoZSBpbnZlbnRvcnkgcGFnZS4KICAgICAgICB2YXIgdGFncyA9IGl0ZW0udGFncyAhPSBudWxsID8KICAgICAgICAgICAgaXRlbS50YWdzIDoKICAgICAgICAgICAgKGl0ZW0uZGVzY3JpcHRpb24gIT0gbnVsbCAmJiBpdGVtLmRlc2NyaXB0aW9uLnRhZ3MgIT0gbnVsbCA/CiAgICAgICAgICAgICAgICBpdGVtLmRlc2NyaXB0aW9uLnRhZ3MgOgogICAgICAgICAgICAgICAgbnVsbCk7CiAgICAgICAgaWYgKHRhZ3MgIT0gbnVsbCkgewogICAgICAgICAgICB2YXIgaXNUYWdnZWRBc0ZvaWxUcmFkaW5nQ2FyZCA9IGZhbHNlOwogICAgICAgICAgICB0YWdzLmZvckVhY2goZnVuY3Rpb24oYXJyYXlJdGVtKSB7CiAgICAgICAgICAgICAgICBpZiAoYXJyYXlJdGVtLmNhdGVnb3J5ID09ICdjYXJkYm9yZGVyJykKICAgICAgICAgICAgICAgICAgICBpZiAoYXJyYXlJdGVtLmludGVybmFsX25hbWUgPT0gJ2NhcmRib3JkZXJfMScpIC8vIGZvaWwgYm9yZGVyLgogICAgICAgICAgICAgICAgICAgICAgICBpc1RhZ2dlZEFzRm9pbFRyYWRpbmdDYXJkID0gdHJ1ZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmIChpc1RhZ2dlZEFzRm9pbFRyYWRpbmdDYXJkKQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICAvLyBUaGlzIGlzIGF2YWlsYWJsZSBvbiB0aGUgbWFya2V0IHBhZ2UuCiAgICAgICAgaWYgKGl0ZW0ub3duZXJfYWN0aW9ucyAhPSBudWxsKSB7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbS5vd25lcl9hY3Rpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAoaXRlbS5vd25lcl9hY3Rpb25zW2ldLmxpbmsgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAgICAgICAvLyBDYXJkcyBpbmNsdWRlIGEgbGluayB0byB0aGUgZ2FtZWNhcmQgcGFnZS4KICAgICAgICAgICAgICAgIC8vIFRoZSBib3JkZXIgcGFyYW1ldGVyIHNwZWNpZmllcyB0aGUgZm9pbCBjYXJkcy4KICAgICAgICAgICAgICAgIC8vIEZvciBleGFtcGxlOiAiaHR0cDovL3N0ZWFtY29tbXVuaXR5LmNvbS9teS9nYW1lY2FyZHMvNTAzODIwLz9ib3JkZXI9MSIuCiAgICAgICAgICAgICAgICBpZiAoaXRlbS5vd25lcl9hY3Rpb25zW2ldLmxpbmsudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdnYW1lY2FyZHMnKSAmJgogICAgICAgICAgICAgICAgICAgIGl0ZW0ub3duZXJfYWN0aW9uc1tpXS5saW5rLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnYm9yZGVyJykpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIEEgZmFsbGJhY2sgZm9yIHRoZSBtYXJrZXQgcGFnZSAob25seSB3b3JrcyB3aXRoIGxhbmd1YWdlIG9uIEVuZ2xpc2gpLgogICAgICAgIGlmIChpdGVtLnR5cGUgIT0gbnVsbCAmJiBpdGVtLnR5cGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZm9pbCB0cmFkaW5nIGNhcmQnKSkKICAgICAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiBDYWxjdWxhdGVGZWVBbW91bnQoYW1vdW50LCBwdWJsaXNoZXJGZWUsIHdhbGxldEluZm8pIHsKICAgICAgICBpZiAod2FsbGV0SW5mbyA9PSBudWxsIHx8ICF3YWxsZXRJbmZvWyd3YWxsZXRfZmVlJ10pIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGZlZXM6IDAKICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIHB1Ymxpc2hlckZlZSA9IChwdWJsaXNoZXJGZWUgPT0gbnVsbCkgPyAwIDogcHVibGlzaGVyRmVlOwogICAgICAgIC8vIFNpbmNlIENhbGN1bGF0ZUZlZUFtb3VudCBoYXMgYSBNYXRoLmZsb29yLCB3ZSBjb3VsZCBiZSBvZmYgYSBjZW50IG9yIHR3by4gTGV0J3MgY2hlY2s6CiAgICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwOyAvLyBzaG91bGRuJ3QgYmUgbmVlZGVkLCBidXQgaW5jbHVkZWQgdG8gYmUgc3VyZSBub3RoaW5nIHVuZm9yc2VlbiBjYXVzZXMgdXMgdG8gZ2V0IHN0dWNrCiAgICAgICAgdmFyIG5Fc3RpbWF0ZWRBbW91bnRPZldhbGxldEZ1bmRzUmVjZWl2ZWRCeU90aGVyUGFydHkgPQogICAgICAgICAgICBwYXJzZUludCgoYW1vdW50IC0gcGFyc2VJbnQod2FsbGV0SW5mb1snd2FsbGV0X2ZlZV9iYXNlJ10pKSAvCiAgICAgICAgICAgICAgICAocGFyc2VGbG9hdCh3YWxsZXRJbmZvWyd3YWxsZXRfZmVlX3BlcmNlbnQnXSkgKyBwYXJzZUZsb2F0KHB1Ymxpc2hlckZlZSkgKyAxKSk7CiAgICAgICAgdmFyIGJFdmVyVW5kZXJzaG90ID0gZmFsc2U7CiAgICAgICAgdmFyIGZlZXMgPSBDYWxjdWxhdGVBbW91bnRUb1NlbmRGb3JEZXNpcmVkUmVjZWl2ZWRBbW91bnQobkVzdGltYXRlZEFtb3VudE9mV2FsbGV0RnVuZHNSZWNlaXZlZEJ5T3RoZXJQYXJ0eSwKICAgICAgICAgICAgcHVibGlzaGVyRmVlLAogICAgICAgICAgICB3YWxsZXRJbmZvKTsKICAgICAgICB3aGlsZSAoZmVlcy5hbW91bnQgIT0gYW1vdW50ICYmIGl0ZXJhdGlvbnMgPCAxMCkgewogICAgICAgICAgICBpZiAoZmVlcy5hbW91bnQgPiBhbW91bnQpIHsKICAgICAgICAgICAgICAgIGlmIChiRXZlclVuZGVyc2hvdCkgewogICAgICAgICAgICAgICAgICAgIGZlZXMgPSBDYWxjdWxhdGVBbW91bnRUb1NlbmRGb3JEZXNpcmVkUmVjZWl2ZWRBbW91bnQoCiAgICAgICAgICAgICAgICAgICAgICAgIG5Fc3RpbWF0ZWRBbW91bnRPZldhbGxldEZ1bmRzUmVjZWl2ZWRCeU90aGVyUGFydHkgLSAxLAogICAgICAgICAgICAgICAgICAgICAgICBwdWJsaXNoZXJGZWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHdhbGxldEluZm8pOwogICAgICAgICAgICAgICAgICAgIGZlZXMuc3RlYW1fZmVlICs9IChhbW91bnQgLSBmZWVzLmFtb3VudCk7CiAgICAgICAgICAgICAgICAgICAgZmVlcy5mZWVzICs9IChhbW91bnQgLSBmZWVzLmFtb3VudCk7CiAgICAgICAgICAgICAgICAgICAgZmVlcy5hbW91bnQgPSBhbW91bnQ7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIG5Fc3RpbWF0ZWRBbW91bnRPZldhbGxldEZ1bmRzUmVjZWl2ZWRCeU90aGVyUGFydHktLTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGJFdmVyVW5kZXJzaG90ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIG5Fc3RpbWF0ZWRBbW91bnRPZldhbGxldEZ1bmRzUmVjZWl2ZWRCeU90aGVyUGFydHkrKzsKICAgICAgICAgICAgfQogICAgICAgICAgICBmZWVzID0gQ2FsY3VsYXRlQW1vdW50VG9TZW5kRm9yRGVzaXJlZFJlY2VpdmVkQW1vdW50KG5Fc3RpbWF0ZWRBbW91bnRPZldhbGxldEZ1bmRzUmVjZWl2ZWRCeU90aGVyUGFydHksCiAgICAgICAgICAgICAgICBwdWJsaXNoZXJGZWUsCiAgICAgICAgICAgICAgICB3YWxsZXRJbmZvKTsKICAgICAgICAgICAgaXRlcmF0aW9ucysrOwogICAgICAgIH0KICAgICAgICAvLyBmZWVzLmFtb3VudCBzaG91bGQgZXF1YWwgdGhlIHBhc3NlZCBpbiBhbW91bnQKICAgICAgICByZXR1cm4gZmVlczsKICAgIH0KCiAgICAvLyBDbGFtcHMgY3VyIGJldHdlZW4gbWluIGFuZCBtYXggKGluY2x1c2l2ZSkuCiAgICBmdW5jdGlvbiBjbGFtcChjdXIsIG1pbiwgbWF4KSB7CiAgICAgICAgaWYgKGN1ciA8IG1pbikKICAgICAgICAgICAgY3VyID0gbWluOwoKICAgICAgICBpZiAoY3VyID4gbWF4KQogICAgICAgICAgICBjdXIgPSBtYXg7CgogICAgICAgIHJldHVybiBjdXI7CiAgICB9CgogICAgLy8gU3RyYW5nZWx5IG5hbWVkIGZ1bmN0aW9uLCBpdCBhY3R1YWxseSB3b3JrcyBvdXQgdGhlIGZlZXMgYW5kIGJ1eWVyIHByaWNlIGZvciBhIHNlbGxlciBwcmljZQogICAgZnVuY3Rpb24gQ2FsY3VsYXRlQW1vdW50VG9TZW5kRm9yRGVzaXJlZFJlY2VpdmVkQW1vdW50KHJlY2VpdmVkQW1vdW50LCBwdWJsaXNoZXJGZWUsIHdhbGxldEluZm8pIHsKICAgICAgICBpZiAod2FsbGV0SW5mbyA9PSBudWxsIHx8ICF3YWxsZXRJbmZvWyd3YWxsZXRfZmVlJ10pIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGFtb3VudDogcmVjZWl2ZWRBbW91bnQKICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIHB1Ymxpc2hlckZlZSA9IChwdWJsaXNoZXJGZWUgPT0gbnVsbCkgPyAwIDogcHVibGlzaGVyRmVlOwogICAgICAgIHZhciBuU3RlYW1GZWUgPSBwYXJzZUludChNYXRoLmZsb29yKE1hdGgubWF4KHJlY2VpdmVkQW1vdW50ICogcGFyc2VGbG9hdCh3YWxsZXRJbmZvWyd3YWxsZXRfZmVlX3BlcmNlbnQnXSksCiAgICAgICAgICAgICAgICB3YWxsZXRJbmZvWyd3YWxsZXRfZmVlX21pbmltdW0nXSkgKwogICAgICAgICAgICBwYXJzZUludCh3YWxsZXRJbmZvWyd3YWxsZXRfZmVlX2Jhc2UnXSkpKTsKICAgICAgICB2YXIgblB1Ymxpc2hlckZlZSA9IHBhcnNlSW50KE1hdGguZmxvb3IocHVibGlzaGVyRmVlID4gMCA/IE1hdGgubWF4KHJlY2VpdmVkQW1vdW50ICogcHVibGlzaGVyRmVlLCAxKSA6IDApKTsKICAgICAgICB2YXIgbkFtb3VudFRvU2VuZCA9IHJlY2VpdmVkQW1vdW50ICsgblN0ZWFtRmVlICsgblB1Ymxpc2hlckZlZTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzdGVhbV9mZWU6IG5TdGVhbUZlZSwKICAgICAgICAgICAgcHVibGlzaGVyX2ZlZTogblB1Ymxpc2hlckZlZSwKICAgICAgICAgICAgZmVlczogblN0ZWFtRmVlICsgblB1Ymxpc2hlckZlZSwKICAgICAgICAgICAgYW1vdW50OiBwYXJzZUludChuQW1vdW50VG9TZW5kKQogICAgICAgIH07CiAgICB9CgogICAgZnVuY3Rpb24gcmVhZENvb2tpZShuYW1lKSB7CiAgICAgICAgdmFyIG5hbWVFUSA9IG5hbWUgKyAiPSI7CiAgICAgICAgdmFyIGNhID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgYyA9IGNhW2ldOwogICAgICAgICAgICB3aGlsZSAoYy5jaGFyQXQoMCkgPT0gJyAnKQogICAgICAgICAgICAgICAgYyA9IGMuc3Vic3RyaW5nKDEsIGMubGVuZ3RoKTsKICAgICAgICAgICAgaWYgKGMuaW5kZXhPZihuYW1lRVEpID09IDApCiAgICAgICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGMuc3Vic3RyaW5nKG5hbWVFUS5sZW5ndGgsIGMubGVuZ3RoKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzUmV0cnlNZXNzYWdlKG1lc3NhZ2UpIHsKICAgICAgICB2YXIgbWVzc2FnZUxpc3QgPSBbCiAgICAgICAgICAgICJZb3UgY2Fubm90IHNlbGwgYW55IGl0ZW1zIHVudGlsIHlvdXIgcHJldmlvdXMgYWN0aW9uIGNvbXBsZXRlcy4iLAogICAgICAgICAgICAiVGhlcmUgd2FzIGEgcHJvYmxlbSBsaXN0aW5nIHlvdXIgaXRlbS4gUmVmcmVzaCB0aGUgcGFnZSBhbmQgdHJ5IGFnYWluLiIsCiAgICAgICAgICAgICJXZSB3ZXJlIHVuYWJsZSB0byBjb250YWN0IHRoZSBnYW1lJ3MgaXRlbSBzZXJ2ZXIuIFRoZSBnYW1lJ3MgaXRlbSBzZXJ2ZXIgbWF5IGJlIGRvd24gb3IgU3RlYW0gbWF5IGJlIGV4cGVyaWVuY2luZyB0ZW1wb3JhcnkgY29ubmVjdGl2aXR5IGlzc3Vlcy4gWW91ciBsaXN0aW5nIGhhcyBub3QgYmVlbiBjcmVhdGVkLiBSZWZyZXNoIHRoZSBwYWdlIGFuZCB0cnkgYWdhaW4uIgogICAgICAgIF07CgogICAgICAgIHJldHVybiBtZXNzYWdlTGlzdC5pbmRleE9mKG1lc3NhZ2UpICE9PSAtMTsKICAgIH0KICAgIC8vI2VuZHJlZ2lvbgoKICAgIC8vI3JlZ2lvbiBMb2dnaW5nCiAgICB2YXIgdXNlclNjcm9sbGVkID0gZmFsc2U7CiAgICB2YXIgbG9nZ2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBsb2dnZXIuc2V0QXR0cmlidXRlKCdpZCcsICdsb2dnZXInKTsKCiAgICBmdW5jdGlvbiB1cGRhdGVTY3JvbGwoKSB7CiAgICAgICAgaWYgKCF1c2VyU2Nyb2xsZWQpIHsKICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibG9nZ2VyIik7CiAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wID0gZWxlbWVudC5zY3JvbGxIZWlnaHQ7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGxvZ0RPTSh0ZXh0KSB7CiAgICAgICAgbG9nZ2VyLmlubmVySFRNTCArPSB0ZXh0ICsgJzxici8+JzsKCiAgICAgICAgdXBkYXRlU2Nyb2xsKCk7CiAgICB9CgogICAgZnVuY3Rpb24gY2xlYXJMb2dET00oKSB7CiAgICAgICAgbG9nZ2VyLmlubmVySFRNTCA9ICcnOwoKICAgICAgICB1cGRhdGVTY3JvbGwoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBsb2dDb25zb2xlKHRleHQpIHsKICAgICAgICBpZiAoZW5hYmxlQ29uc29sZUxvZykgewogICAgICAgICAgICBjb25zb2xlLmxvZyh0ZXh0KTsKICAgICAgICB9CiAgICB9CiAgICAvLyNlbmRyZWdpb24KCiAgICAvLyNyZWdpb24gSW52ZW50b3J5CiAgICBpZiAoY3VycmVudFBhZ2UgPT0gUEFHRV9JTlZFTlRPUlkpIHsKCiAgICAgICAgZnVuY3Rpb24gb25RdWV1ZURyYWluKCkgewogICAgICAgICAgICBpZiAoaXRlbVF1ZXVlLmxlbmd0aCgpID09IDAgJiYgc2VsbFF1ZXVlLmxlbmd0aCgpID09IDAgJiYgc2NyYXBRdWV1ZS5sZW5ndGgoKSA9PSAwICYmIGJvb3N0ZXJRdWV1ZS5sZW5ndGgoKSA9PSAwKSB7CiAgICAgICAgICAgICAgICAkKCcjaW52ZW50b3J5X2l0ZW1zX3NwaW5uZXInKS5yZW1vdmUoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlVG90YWxzKCkgewogICAgICAgICAgICBpZiAoJCgnI2xvZ2dlclRvdGFsJykubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgICQobG9nZ2VyKS5wYXJlbnQoKS5hcHBlbmQoJzxkaXYgaWQ9ImxvZ2dlclRvdGFsIj48L2Rpdj4nKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHRvdGFscyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dnZXJUb3RhbCcpOwogICAgICAgICAgICB0b3RhbHMuaW5uZXJIVE1MID0gJyc7CgogICAgICAgICAgICBpZiAodG90YWxQcmljZVdpdGhGZWVzT25NYXJrZXQgPiAwKSB7CiAgICAgICAgICAgICAgICB0b3RhbHMuaW5uZXJIVE1MICs9ICc8ZGl2PjxzdHJvbmc+VG90YWwgbGlzdGVkIGZvciAnICsKICAgICAgICAgICAgICAgICAgICAodG90YWxQcmljZVdpdGhGZWVzT25NYXJrZXQgLyAxMDAuMCkudG9GaXhlZCgyKSArCiAgICAgICAgICAgICAgICAgICAgY3VycmVuY3lTeW1ib2wgKwogICAgICAgICAgICAgICAgICAgICcsIHlvdSB3aWxsIHJlY2VpdmUgJyArCiAgICAgICAgICAgICAgICAgICAgKHRvdGFsUHJpY2VXaXRob3V0RmVlc09uTWFya2V0IC8gMTAwKS50b0ZpeGVkKDIpICsKICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeVN5bWJvbCArCiAgICAgICAgICAgICAgICAgICAgJy48L3N0cm9uZz48L2Rpdj4nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0b3RhbFNjcmFwID4gMCkgewogICAgICAgICAgICAgICAgdG90YWxzLmlubmVySFRNTCArPSAnPGRpdj48c3Ryb25nPlRvdGFsIHNjcmFwICcgKyB0b3RhbFNjcmFwICsgJy48L3N0cm9uZz48L2Rpdj4nOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgc2VsbFF1ZXVlID0gYXN5bmMucXVldWUoZnVuY3Rpb24odGFzaywgbmV4dCkgewogICAgICAgICAgICAgICAgbWFya2V0LnNlbGxJdGVtKHRhc2suaXRlbSwKICAgICAgICAgICAgICAgICAgICB0YXNrLnNlbGxQcmljZSwKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihlcnIsIGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxOdW1iZXJPZlByb2Nlc3NlZFF1ZXVlSXRlbXMrKzsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaWdpdHMgPSBnZXROdW1iZXJPZkRpZ2l0cyh0b3RhbE51bWJlck9mUXVldWVkSXRlbXMpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbUlkID0gdGFzay5pdGVtLmFzc2V0aWQgfHwgdGFzay5pdGVtLmlkOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbU5hbWUgPSB0YXNrLml0ZW0ubmFtZSB8fCB0YXNrLml0ZW0uZGVzY3JpcHRpb24ubmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhZExlZnQgPSBwYWRMZWZ0WmVybygnJyArIHRvdGFsTnVtYmVyT2ZQcm9jZXNzZWRRdWV1ZUl0ZW1zLCBkaWdpdHMpICsgJyAvICcgKyB0b3RhbE51bWJlck9mUXVldWVkSXRlbXM7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nRE9NKHBhZExlZnQgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgLSAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtTmFtZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyBsaXN0ZWQgZm9yICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChtYXJrZXQuZ2V0UHJpY2VJbmNsdWRpbmdGZWVzKHRhc2suc2VsbFByaWNlKSAvIDEwMC4wKS50b0ZpeGVkKDIpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeVN5bWJvbCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJywgeW91IHdpbGwgcmVjZWl2ZSAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGFzay5zZWxsUHJpY2UgLyAxMDAuMCkudG9GaXhlZCgyKSArIGN1cnJlbmN5U3ltYm9sICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLicpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyMnICsgdGFzay5pdGVtLmFwcGlkICsgJ18nICsgdGFzay5pdGVtLmNvbnRleHRpZCArICdfJyArIGl0ZW1JZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3NzKCdiYWNrZ3JvdW5kJywgQ09MT1JfU1VDQ0VTUyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxQcmljZVdpdGhvdXRGZWVzT25NYXJrZXQgKz0gdGFzay5zZWxsUHJpY2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFByaWNlV2l0aEZlZXNPbk1hcmtldCArPSBtYXJrZXQuZ2V0UHJpY2VJbmNsdWRpbmdGZWVzKHRhc2suc2VsbFByaWNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRvdGFscygpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEgIT0gbnVsbCAmJiBpc1JldHJ5TWVzc2FnZShkYXRhLm1lc3NhZ2UpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dET00ocGFkTGVmdCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyAtICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1OYW1lICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIHJldHJ5aW5nIGxpc3RpbmcgYmVjYXVzZSAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm1lc3NhZ2VbMF0udG9Mb3dlckNhc2UoKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5tZXNzYWdlLnNsaWNlKDEpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbE51bWJlck9mUHJvY2Vzc2VkUXVldWVJdGVtcy0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsbFF1ZXVlLnVuc2hpZnQodGFzayk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxsUXVldWUucGF1c2UoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGxRdWV1ZS5yZXN1bWUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGdldFJhbmRvbUludCgzMDAwMCwgNDUwMDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhICE9IG51bGwgJiYgZGF0YS5yZXNwb25zZUpTT04gIT0gbnVsbCAmJiBkYXRhLnJlc3BvbnNlSlNPTi5tZXNzYWdlICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dET00ocGFkTGVmdCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgLSAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbU5hbWUgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIG5vdCBhZGRlZCB0byBtYXJrZXQgYmVjYXVzZSAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5yZXNwb25zZUpTT04ubWVzc2FnZVswXS50b0xvd2VyQ2FzZSgpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5yZXNwb25zZUpTT04ubWVzc2FnZS5zbGljZSgxKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dET00ocGFkTGVmdCArICcgLSAnICsgaXRlbU5hbWUgKyAnIG5vdCBhZGRlZCB0byBtYXJrZXQuJyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnIycgKyB0YXNrLml0ZW0uYXBwaWQgKyAnXycgKyB0YXNrLml0ZW0uY29udGV4dGlkICsgJ18nICsgaXRlbUlkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jc3MoJ2JhY2tncm91bmQnLCBDT0xPUl9FUlJPUik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgMSk7CgogICAgICAgIHNlbGxRdWV1ZS5kcmFpbiA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBvblF1ZXVlRHJhaW4oKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNlbGxBbGxJdGVtcyhhcHBJZCkgewogICAgICAgICAgICBsb2FkQWxsSW52ZW50b3JpZXMoKS50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IGdldEludmVudG9yeUl0ZW1zKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkSXRlbXMgPSBbXTsKCiAgICAgICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXRlbS5tYXJrZXRhYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkSXRlbXMucHVzaChpdGVtKTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgc2VsbEl0ZW1zKGZpbHRlcmVkSXRlbXMpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGxvZ0RPTSgnQ291bGQgbm90IHJldHJpZXZlIHRoZSBpbnZlbnRvcnkuLi4nKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2VsbEFsbENhcmRzKCkgewogICAgICAgICAgICBsb2FkQWxsSW52ZW50b3JpZXMoKS50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IGdldEludmVudG9yeUl0ZW1zKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkSXRlbXMgPSBbXTsKCiAgICAgICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZ2V0SXNUcmFkaW5nQ2FyZChpdGVtKSB8fCAhaXRlbS5tYXJrZXRhYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkSXRlbXMucHVzaChpdGVtKTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgc2VsbEl0ZW1zKGZpbHRlcmVkSXRlbXMpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGxvZ0RPTSgnQ291bGQgbm90IHJldHJpZXZlIHRoZSBpbnZlbnRvcnkuLi4nKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2VsbEFsbENyYXRlcygpIHsKICAgICAgICAgICAgbG9hZEFsbEludmVudG9yaWVzKCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gZ2V0SW52ZW50b3J5SXRlbXMoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRJdGVtcyA9IFtdOwogICAgICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRJc0NyYXRlKGl0ZW0pIHx8ICFpdGVtLm1hcmtldGFibGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZEl0ZW1zLnB1c2goaXRlbSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIHNlbGxJdGVtcyhmaWx0ZXJlZEl0ZW1zKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBsb2dET00oJ0NvdWxkIG5vdCByZXRyaWV2ZSB0aGUgaW52ZW50b3J5Li4uJyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHZhciBzY3JhcFF1ZXVlID0gYXN5bmMucXVldWUoZnVuY3Rpb24oaXRlbSwgbmV4dCkgewogICAgICAgICAgICBzY3JhcFF1ZXVlV29ya2VyKGl0ZW0sIGZ1bmN0aW9uKHN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICAgICAgICAgIH0sIDI1MCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZhciBkZWxheSA9IG51bWJlck9mRmFpbGVkUmVxdWVzdHMgPiAxID8KICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UmFuZG9tSW50KDMwMDAwLCA0NTAwMCkgOgogICAgICAgICAgICAgICAgICAgICAgICBnZXRSYW5kb21JbnQoMTAwMCwgMTUwMCk7CgogICAgICAgICAgICAgICAgICAgIGlmIChudW1iZXJPZkZhaWxlZFJlcXVlc3RzID4gMykKICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZGYWlsZWRSZXF1ZXN0cyA9IDA7CgogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgICAgICB9LCBkZWxheSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sIDEpOwoKICAgICAgICBzY3JhcFF1ZXVlLmRyYWluID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIG9uUXVldWVEcmFpbigpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2NyYXBRdWV1ZVdvcmtlcihpdGVtLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgZmFpbGVkID0gMDsKICAgICAgICAgICAgdmFyIGl0ZW1OYW1lID0gaXRlbS5uYW1lIHx8IGl0ZW0uZGVzY3JpcHRpb24ubmFtZTsKICAgICAgICAgICAgdmFyIGl0ZW1JZCA9IGl0ZW0uYXNzZXRpZCB8fCBpdGVtLmlkOwoKICAgICAgICAgICAgbWFya2V0LmdldEdvb1ZhbHVlKGl0ZW0sCiAgICAgICAgICAgICAgICBmdW5jdGlvbihlcnIsIGdvbykgewogICAgICAgICAgICAgICAgICAgIHRvdGFsTnVtYmVyT2ZQcm9jZXNzZWRRdWV1ZUl0ZW1zKys7CgogICAgICAgICAgICAgICAgICAgIHZhciBkaWdpdHMgPSBnZXROdW1iZXJPZkRpZ2l0cyh0b3RhbE51bWJlck9mUXVldWVkSXRlbXMpOwogICAgICAgICAgICAgICAgICAgIHZhciBwYWRMZWZ0ID0gcGFkTGVmdFplcm8oJycgKyB0b3RhbE51bWJlck9mUHJvY2Vzc2VkUXVldWVJdGVtcywgZGlnaXRzKSArICcgLyAnICsgdG90YWxOdW1iZXJPZlF1ZXVlZEl0ZW1zOwoKICAgICAgICAgICAgICAgICAgICBpZiAoZXJyICE9IEVSUk9SX1NVQ0NFU1MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nQ29uc29sZSgnRmFpbGVkIHRvIGdldCBnZW1zIHZhbHVlIGZvciAnICsgaXRlbU5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICBsb2dET00ocGFkTGVmdCArICcgLSAnICsgaXRlbU5hbWUgKyAnIG5vdCB0dXJuZWQgaW50byBnZW1zIGR1ZSB0byBtaXNzaW5nIGdlbXMgdmFsdWUuJyk7CgogICAgICAgICAgICAgICAgICAgICAgICAkKCcjJyArIGl0ZW0uYXBwaWQgKyAnXycgKyBpdGVtLmNvbnRleHRpZCArICdfJyArIGl0ZW1JZCkuY3NzKCdiYWNrZ3JvdW5kJywgQ09MT1JfRVJST1IpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaXRlbS5nb29fdmFsdWVfZXhwZWN0ZWQgPSBwYXJzZUludChnb28uZ29vX3ZhbHVlKTsKCiAgICAgICAgICAgICAgICAgICAgbWFya2V0LmdyaW5kSW50b0dvbyhpdGVtLAogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihlcnIsIHJlc3VsdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVyciAhPSBFUlJPUl9TVUNDRVNTKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nQ29uc29sZSgnRmFpbGVkIHRvIHR1cm4gaXRlbSBpbnRvIGdlbXMgZm9yICcgKyBpdGVtTmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nRE9NKHBhZExlZnQgKyAnIC0gJyArIGl0ZW1OYW1lICsgJyBub3QgdHVybmVkIGludG8gZ2VtcyBkdWUgdG8gdW5rbm93biBlcnJvci4nKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnIycgKyBpdGVtLmFwcGlkICsgJ18nICsgaXRlbS5jb250ZXh0aWQgKyAnXycgKyBpdGVtSWQpLmNzcygnYmFja2dyb3VuZCcsIENPTE9SX0VSUk9SKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0NvbnNvbGUoJz09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nQ29uc29sZShpdGVtTmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dDb25zb2xlKCdUdXJuZWQgaW50byAnICsgZ29vLmdvb192YWx1ZSArICcgZ2VtcycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nRE9NKHBhZExlZnQgKyAnIC0gJyArIGl0ZW1OYW1lICsgJyB0dXJuZWQgaW50byAnICsgaXRlbS5nb29fdmFsdWVfZXhwZWN0ZWQgKyAnIGdlbXMuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjJyArIGl0ZW0uYXBwaWQgKyAnXycgKyBpdGVtLmNvbnRleHRpZCArICdfJyArIGl0ZW1JZCkuY3NzKCdiYWNrZ3JvdW5kJywgQ09MT1JfU1VDQ0VTUyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxTY3JhcCArPSBpdGVtLmdvb192YWx1ZV9leHBlY3RlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRvdGFscygpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdmFyIGJvb3N0ZXJRdWV1ZSA9IGFzeW5jLnF1ZXVlKGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsKICAgICAgICAgICAgYm9vc3RlclF1ZXVlV29ya2VyKGl0ZW0sIGZ1bmN0aW9uKHN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICAgICAgICAgIH0sIDI1MCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZhciBkZWxheSA9IG51bWJlck9mRmFpbGVkUmVxdWVzdHMgPiAxID8KICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UmFuZG9tSW50KDMwMDAwLCA0NTAwMCkgOgogICAgICAgICAgICAgICAgICAgICAgICBnZXRSYW5kb21JbnQoMTAwMCwgMTUwMCk7CgogICAgICAgICAgICAgICAgICAgIGlmIChudW1iZXJPZkZhaWxlZFJlcXVlc3RzID4gMykKICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZGYWlsZWRSZXF1ZXN0cyA9IDA7CgogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgICAgICB9LCBkZWxheSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sIDEpOwoKICAgICAgICBib29zdGVyUXVldWUuZHJhaW4gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgb25RdWV1ZURyYWluKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBib29zdGVyUXVldWVXb3JrZXIoaXRlbSwgY2FsbGJhY2spIHsKICAgICAgICAgICAgdmFyIGZhaWxlZCA9IDA7CiAgICAgICAgICAgIHZhciBpdGVtTmFtZSA9IGl0ZW0ubmFtZSB8fCBpdGVtLmRlc2NyaXB0aW9uLm5hbWU7CiAgICAgICAgICAgIHZhciBpdGVtSWQgPSBpdGVtLmFzc2V0aWQgfHwgaXRlbS5pZDsKCiAgICAgICAgICAgIG1hcmtldC51bnBhY2tCb29zdGVyUGFjayhpdGVtLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyLCBnb28pIHsKICAgICAgICAgICAgICAgICAgICB0b3RhbE51bWJlck9mUHJvY2Vzc2VkUXVldWVJdGVtcysrOwoKICAgICAgICAgICAgICAgICAgICB2YXIgZGlnaXRzID0gZ2V0TnVtYmVyT2ZEaWdpdHModG90YWxOdW1iZXJPZlF1ZXVlZEl0ZW1zKTsKICAgICAgICAgICAgICAgICAgICB2YXIgcGFkTGVmdCA9IHBhZExlZnRaZXJvKCcnICsgdG90YWxOdW1iZXJPZlByb2Nlc3NlZFF1ZXVlSXRlbXMsIGRpZ2l0cykgKyAnIC8gJyArIHRvdGFsTnVtYmVyT2ZRdWV1ZWRJdGVtczsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGVyciAhPSBFUlJPUl9TVUNDRVNTKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0NvbnNvbGUoJ0ZhaWxlZCB0byB1bnBhY2sgYm9vc3RlciBwYWNrICcgKyBpdGVtTmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0RPTShwYWRMZWZ0ICsgJyAtICcgKyBpdGVtTmFtZSArICcgbm90IHVucGFja2VkLicpOwoKICAgICAgICAgICAgICAgICAgICAgICAgJCgnIycgKyBpdGVtLmFwcGlkICsgJ18nICsgaXRlbS5jb250ZXh0aWQgKyAnXycgKyBpdGVtSWQpLmNzcygnYmFja2dyb3VuZCcsIENPTE9SX0VSUk9SKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGxvZ0RPTShwYWRMZWZ0ICsgJyAtICcgKyBpdGVtTmFtZSArICcgdW5wYWNrZWQuJyk7CiAgICAgICAgICAgICAgICAgICAgJCgnIycgKyBpdGVtLmFwcGlkICsgJ18nICsgaXRlbS5jb250ZXh0aWQgKyAnXycgKyBpdGVtSWQpLmNzcygnYmFja2dyb3VuZCcsIENPTE9SX1NVQ0NFU1MpOwoKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh0cnVlKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0KCgogICAgICAgIC8vIFR1cm5zIHRoZSBzZWxlY3RlZCBpdGVtcyBpbnRvIGdlbXMuCiAgICAgICAgZnVuY3Rpb24gdHVyblNlbGVjdGVkSXRlbXNJbnRvR2VtcygpIHsKICAgICAgICAgICAgdmFyIGlkcyA9IGdldFNlbGVjdGVkSXRlbXMoKTsKCiAgICAgICAgICAgIGxvYWRBbGxJbnZlbnRvcmllcygpLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBnZXRJbnZlbnRvcnlJdGVtcygpOwoKICAgICAgICAgICAgICAgIHZhciBudW1iZXJPZlF1ZXVlZEl0ZW1zID0gMDsKICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewogICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZWQgcXVldWVkIGl0ZW1zLgogICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnF1ZXVlZCAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLm93bmVyX2FjdGlvbnMgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB2YXIgY2FuVHVybkludG9HZW1zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgb3duZXJfYWN0aW9uIGluIGl0ZW0ub3duZXJfYWN0aW9ucykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5vd25lcl9hY3Rpb25zW293bmVyX2FjdGlvbl0ubGluayAhPSBudWxsICYmIGl0ZW0ub3duZXJfYWN0aW9uc1tvd25lcl9hY3Rpb25dLmxpbmsuaW5jbHVkZXMoJ0dldEdvb1ZhbHVlJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhblR1cm5JbnRvR2VtcyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICghY2FuVHVybkludG9HZW1zKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CgogICAgICAgICAgICAgICAgICAgIHZhciBpdGVtSWQgPSBpdGVtLmFzc2V0aWQgfHwgaXRlbS5pZDsKICAgICAgICAgICAgICAgICAgICBpZiAoaWRzLmluZGV4T2YoaXRlbUlkKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5xdWV1ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBzY3JhcFF1ZXVlLnB1c2goaXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlck9mUXVldWVkSXRlbXMrKzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAobnVtYmVyT2ZRdWV1ZWRJdGVtcyA+IDApIHsKICAgICAgICAgICAgICAgICAgICB0b3RhbE51bWJlck9mUXVldWVkSXRlbXMgKz0gbnVtYmVyT2ZRdWV1ZWRJdGVtczsKCiAgICAgICAgICAgICAgICAgICAgJCgnI2ludmVudG9yeV9pdGVtc19zcGlubmVyJykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgJCgnI2ludmVudG9yeV9zZWxsX2J1dHRvbnMnKS5hcHBlbmQoJzxkaXYgaWQ9ImludmVudG9yeV9pdGVtc19zcGlubmVyIj4nICsKICAgICAgICAgICAgICAgICAgICAgICAgc3Bpbm5lckJsb2NrICsKICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyIj5Qcm9jZXNzaW5nICcgKyBudW1iZXJPZlF1ZXVlZEl0ZW1zICsgJyBpdGVtczwvZGl2PicgKwogICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+Jyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgbG9nRE9NKCdDb3VsZCBub3QgcmV0cmlldmUgdGhlIGludmVudG9yeS4uLicpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIC8vIFVucGFja3MgdGhlIHNlbGVjdGVkIGJvb3N0ZXIgcGFja3MuCiAgICAgICAgZnVuY3Rpb24gdW5wYWNrU2VsZWN0ZWRCb29zdGVyUGFja3MoKSB7CiAgICAgICAgICAgIHZhciBpZHMgPSBnZXRTZWxlY3RlZEl0ZW1zKCk7CgogICAgICAgICAgICBsb2FkQWxsSW52ZW50b3JpZXMoKS50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gZ2V0SW52ZW50b3J5SXRlbXMoKTsKCiAgICAgICAgICAgICAgICB2YXIgbnVtYmVyT2ZRdWV1ZWRJdGVtcyA9IDA7CiAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmVkIHF1ZXVlZCBpdGVtcy4KICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5xdWV1ZWQgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5vd25lcl9hY3Rpb25zID09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIGNhbk9wZW5Cb29zdGVyID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgb3duZXJfYWN0aW9uIGluIGl0ZW0ub3duZXJfYWN0aW9ucykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5vd25lcl9hY3Rpb25zW293bmVyX2FjdGlvbl0ubGluayAhPSBudWxsICYmIGl0ZW0ub3duZXJfYWN0aW9uc1tvd25lcl9hY3Rpb25dLmxpbmsuaW5jbHVkZXMoJ09wZW5Cb29zdGVyJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbk9wZW5Cb29zdGVyID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKCFjYW5PcGVuQm9vc3RlcikKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbUlkID0gaXRlbS5hc3NldGlkIHx8IGl0ZW0uaWQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlkcy5pbmRleE9mKGl0ZW1JZCkgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ucXVldWVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgYm9vc3RlclF1ZXVlLnB1c2goaXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlck9mUXVldWVkSXRlbXMrKzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAobnVtYmVyT2ZRdWV1ZWRJdGVtcyA+IDApIHsKICAgICAgICAgICAgICAgICAgICB0b3RhbE51bWJlck9mUXVldWVkSXRlbXMgKz0gbnVtYmVyT2ZRdWV1ZWRJdGVtczsKCiAgICAgICAgICAgICAgICAgICAgJCgnI2ludmVudG9yeV9pdGVtc19zcGlubmVyJykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgJCgnI2ludmVudG9yeV9zZWxsX2J1dHRvbnMnKS5hcHBlbmQoJzxkaXYgaWQ9ImludmVudG9yeV9pdGVtc19zcGlubmVyIj4nICsKICAgICAgICAgICAgICAgICAgICAgICAgc3Bpbm5lckJsb2NrICsKICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyIj5Qcm9jZXNzaW5nICcgKyBudW1iZXJPZlF1ZXVlZEl0ZW1zICsgJyBpdGVtczwvZGl2PicgKwogICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+Jyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgbG9nRE9NKCdDb3VsZCBub3QgcmV0cmlldmUgdGhlIGludmVudG9yeS4uLicpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNlbGxTZWxlY3RlZEl0ZW1zKCkgewogICAgICAgICAgICBnZXRJbnZlbnRvcnlTZWxlY3RlZE1hcmtldGFibGVJdGVtcyhmdW5jdGlvbihpdGVtcykgewogICAgICAgICAgICAgICAgc2VsbEl0ZW1zKGl0ZW1zKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoJCQogICAgICAgIGZ1bmN0aW9uIGNhblNlbGxTZWxlY3RlZEl0ZW1zTWFudWFsbHkoaXRlbXMpIHsKICAgICAgICAgICAgLy8gV2UgaGF2ZSB0byBjb25zdHJ1Y3QgYW4gVVJMIGxpa2UgdGhpcwogICAgICAgICAgICAvLyBodHRwczovL3N0ZWFtY29tbXVuaXR5LmNvbS9tYXJrZXQvbXVsdGlzZWxsP2FwcGlkPTczMCZjb250ZXh0aWQ9MiZpdGVtc1tdPUZhbGNoaW9uJTIwQ2FzZSZxdHlbXT0xMDAKICAgICAgICAgICAgdmFyIGFwcGlkID0gaXRlbXNbMF0uYXBwaWQ7CiAgICAgICAgICAgIHZhciBjb250ZXh0aWQgPSBpdGVtc1swXS5jb250ZXh0aWQ7CgogICAgICAgICAgICB2YXIgaGFzSW52YWxpZEl0ZW0gPSBmYWxzZTsKCQkgIAogICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWlmIChpdGVtLmNvbnRleHRpZCAhPSBjb250ZXh0aWQgfHwgaXRlbS5jb21tb2RpdHkgPT0gZmFsc2UpCgkJCQkgICAgaGFzSW52YWxpZEl0ZW0gPSB0cnVlOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHJldHVybiAhaGFzSW52YWxpZEl0ZW07CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzZWxsU2VsZWN0ZWRJdGVtc01hbnVhbGx5KCkgewogICAgICAgICAgICBnZXRJbnZlbnRvcnlTZWxlY3RlZE1hcmtldGFibGVJdGVtcyhmdW5jdGlvbihpdGVtcykgewogICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSB0byBjb25zdHJ1Y3QgYW4gVVJMIGxpa2UgdGhpcwogICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9zdGVhbWNvbW11bml0eS5jb20vbWFya2V0L211bHRpc2VsbD9hcHBpZD03MzAmY29udGV4dGlkPTImaXRlbXNbXT1GYWxjaGlvbiUyMENhc2UmcXR5W109MTAwCiAgICAgICAgICAgICAgICAKCQkJCXZhciBhcHBpZCA9IGl0ZW1zWzBdLmFwcGlkOwogICAgICAgICAgICAgICAgdmFyIGNvbnRleHRpZCA9IGl0ZW1zWzBdLmNvbnRleHRpZDsKCiAgICAgICAgICAgICAgICB2YXIgaXRlbXNXaXRoUXR5ID0ge307CiAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgIGl0ZW1zV2l0aFF0eVtpdGVtLm1hcmtldF9oYXNoX25hbWVdID0gaXRlbXNXaXRoUXR5W2l0ZW0ubWFya2V0X2hhc2hfbmFtZV0gKyAxIHx8IDE7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB2YXIgaXRlbXNTdHJpbmcgPSAnJzsKICAgICAgICAgICAgICAgIGZvciAodmFyIGl0ZW1OYW1lIGluIGl0ZW1zV2l0aFF0eSkgewogICAgICAgICAgICAgICAgICAgIGl0ZW1zU3RyaW5nICs9ICcmaXRlbXNbXT0nICsgZW5jb2RlVVJJKGl0ZW1OYW1lKSArICcmcXR5W109JyArIGl0ZW1zV2l0aFF0eVtpdGVtTmFtZV07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIGJhc2VVcmwgPSAnaHR0cHM6Ly9zdGVhbWNvbW11bml0eS5jb20vbWFya2V0L211bHRpc2VsbCc7CiAgICAgICAgICAgICAgICB2YXIgcmVkaXJlY3RVcmwgPSBiYXNlVXJsICsgJz9hcHBpZD0nICsgYXBwaWQgKyAnJmNvbnRleHRpZD0nICsgY29udGV4dGlkICsgaXRlbXNTdHJpbmc7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBkaWFsb2cgPSB1bnNhZmVXaW5kb3cuU2hvd0RpYWxvZygnU3RlYW0gRWNvbm9teSBFbmhhbmNlcicsICc8aWZyYW1lIGZyYW1lQm9yZGVyPSIwIiBoZWlnaHQ9IjY1MCIgd2lkdGg9IjkwMCIgc3JjPSInICsgcmVkaXJlY3RVcmwgKyAnIj48L2lmcmFtZT4nKTsKICAgICAgICAgICAgICAgIGRpYWxvZy5PbkRpc21pc3MoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtSWQgPSBpdGVtLmFzc2V0aWQgfHwgaXRlbS5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgJCgnIycgKyBpdGVtLmFwcGlkICsgJ18nICsgaXRlbS5jb250ZXh0aWQgKyAnXycgKyBpdGVtSWQpLmNzcygnYmFja2dyb3VuZCcsIENPTE9SX1BFTkRJTkcpOyAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNlbGxJdGVtcyhpdGVtcykgewogICAgICAgICAgICBpZiAoaXRlbXMubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgIGxvZ0RPTSgnVGhlc2UgaXRlbXMgY2Fubm90IGJlIGFkZGVkIHRvIHRoZSBtYXJrZXQuLi4nKTsKCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBudW1iZXJPZlF1ZXVlZEl0ZW1zID0gMDsKCiAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgsIGFycmF5KSB7CiAgICAgICAgICAgICAgICAvLyBJZ25vcmVkIHF1ZXVlZCBpdGVtcy4KICAgICAgICAgICAgICAgIGlmIChpdGVtLnF1ZXVlZCAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGl0ZW0ucXVldWVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHZhciBpdGVtSWQgPSBpdGVtLmFzc2V0aWQgfHwgaXRlbS5pZDsKICAgICAgICAgICAgICAgIGl0ZW0uaWdub3JlRXJyb3JzID0gZmFsc2U7CiAgICAgICAgICAgICAgICBpdGVtUXVldWUucHVzaChpdGVtKTsKICAgICAgICAgICAgICAgIG51bWJlck9mUXVldWVkSXRlbXMrKzsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAobnVtYmVyT2ZRdWV1ZWRJdGVtcyA+IDApIHsKICAgICAgICAgICAgICAgIHRvdGFsTnVtYmVyT2ZRdWV1ZWRJdGVtcyArPSBudW1iZXJPZlF1ZXVlZEl0ZW1zOwoKICAgICAgICAgICAgICAgICQoJyNpbnZlbnRvcnlfaXRlbXNfc3Bpbm5lcicpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgJCgnI2ludmVudG9yeV9zZWxsX2J1dHRvbnMnKS5hcHBlbmQoJzxkaXYgaWQ9ImludmVudG9yeV9pdGVtc19zcGlubmVyIj4nICsKICAgICAgICAgICAgICAgICAgICBzcGlubmVyQmxvY2sgKwogICAgICAgICAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlciI+UHJvY2Vzc2luZyAnICsgbnVtYmVyT2ZRdWV1ZWRJdGVtcyArICcgaXRlbXM8L2Rpdj4nICsKICAgICAgICAgICAgICAgICAgICAnPC9kaXY+Jyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBpdGVtUXVldWUgPSBhc3luYy5xdWV1ZShmdW5jdGlvbihpdGVtLCBuZXh0KSB7CiAgICAgICAgICAgIGl0ZW1RdWV1ZVdvcmtlcihpdGVtLAogICAgICAgICAgICAgICAgaXRlbS5pZ25vcmVFcnJvcnMsCiAgICAgICAgICAgICAgICBmdW5jdGlvbihzdWNjZXNzLCBjYWNoZWQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZWQgPyAwIDogZ2V0UmFuZG9tSW50KDEwMDAsIDE1MDApKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWl0ZW0uaWdub3JlRXJyb3JzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmlnbm9yZUVycm9ycyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtUXVldWUucHVzaChpdGVtKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbGF5ID0gbnVtYmVyT2ZGYWlsZWRSZXF1ZXN0cyA+IDEgPwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UmFuZG9tSW50KDMwMDAwLCA0NTAwMCkgOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UmFuZG9tSW50KDEwMDAsIDE1MDApOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bWJlck9mRmFpbGVkUmVxdWVzdHMgPiAzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZGYWlsZWRSZXF1ZXN0cyA9IDA7CgogICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZWQgPyAwIDogZGVsYXkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0sIDEpOwoKICAgICAgICBmdW5jdGlvbiBpdGVtUXVldWVXb3JrZXIoaXRlbSwgaWdub3JlRXJyb3JzLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgcHJpY2VJbmZvID0gZ2V0UHJpY2VJbmZvcm1hdGlvbkZyb21JdGVtKGl0ZW0pOwoKICAgICAgICAgICAgdmFyIGZhaWxlZCA9IDA7CiAgICAgICAgICAgIHZhciBpdGVtTmFtZSA9IGl0ZW0ubmFtZSB8fCBpdGVtLmRlc2NyaXB0aW9uLm5hbWU7CgogICAgICAgICAgICBtYXJrZXQuZ2V0UHJpY2VIaXN0b3J5KGl0ZW0sCiAgICAgICAgICAgICAgICB0cnVlLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyLCBoaXN0b3J5LCBjYWNoZWRIaXN0b3J5KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgICAgICAgICBsb2dDb25zb2xlKCdGYWlsZWQgdG8gZ2V0IHByaWNlIGhpc3RvcnkgZm9yICcgKyBpdGVtTmFtZSk7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyID09IEVSUk9SX0ZBSUxFRCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxlZCArPSAxOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgbWFya2V0LmdldEl0ZW1PcmRlcnNIaXN0b2dyYW0oaXRlbSwKICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyLCBoaXN0b2dyYW0sIGNhY2hlZExpc3RpbmdzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nQ29uc29sZSgnRmFpbGVkIHRvIGdldCBvcmRlcnMgaGlzdG9ncmFtIGZvciAnICsgaXRlbU5hbWUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyID09IEVSUk9SX0ZBSUxFRCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkICs9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZhaWxlZCA+IDAgJiYgIWlnbm9yZUVycm9ycykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhmYWxzZSwgY2FjaGVkSGlzdG9yeSAmJiBjYWNoZWRMaXN0aW5ncyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nQ29uc29sZSgnPT09PT09PT09PT09PT09PT09PT09PT09PT09PScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dDb25zb2xlKGl0ZW1OYW1lKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VsbFByaWNlID0gY2FsY3VsYXRlU2VsbFByaWNlQmVmb3JlRmVlcyhoaXN0b3J5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvZ3JhbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlSW5mby5taW5QcmljZUJlZm9yZUZlZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2VJbmZvLm1heFByaWNlQmVmb3JlRmVlcyk7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0NvbnNvbGUoJ1NlbGwgcHJpY2U6ICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGxQcmljZSAvIDEwMC4wICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnICgnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXQuZ2V0UHJpY2VJbmNsdWRpbmdGZWVzKHNlbGxQcmljZSkgLyAxMDAuMCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyknKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxsUXVldWUucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbTogaXRlbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxsUHJpY2U6IHNlbGxQcmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHRydWUsIGNhY2hlZEhpc3RvcnkgJiYgY2FjaGVkTGlzdGluZ3MpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgaW52ZW50b3J5IFVJLgogICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemVJbnZlbnRvcnlVSSgpIHsKICAgICAgICAgICAgdmFyIGlzT3duSW52ZW50b3J5ID0gdW5zYWZlV2luZG93LmdfQWN0aXZlVXNlci5zdHJTdGVhbUlkID09IHVuc2FmZVdpbmRvdy5nX3N0ZWFtSUQ7CiAgICAgICAgICAgIHZhciBwcmV2aW91c1NlbGVjdGlvbiA9IC0xOyAvLyBUbyBzdG9yZSB0aGUgaW5kZXggb2YgdGhlIHByZXZpb3VzIHNlbGVjdGlvbi4KICAgICAgICAgICAgdXBkYXRlSW52ZW50b3J5VUkoaXNPd25JbnZlbnRvcnkpOwoKICAgICAgICAgICAgJCgnLmdhbWVzX2xpc3RfdGFicycpLm9uKCdjbGljaycsCiAgICAgICAgICAgICAgICAnKicsCiAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB1cGRhdGVJbnZlbnRvcnlVSShpc093bkludmVudG9yeSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIElnbm9yZSBzZWxlY3Rpb24gb24gb3RoZXIgdXNlcidzIGludmVudG9yaWVzLgogICAgICAgICAgICBpZiAoIWlzT3duSW52ZW50b3J5KQogICAgICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgICAgLy8gU3RlYW0gYWRkcyAnZGlzcGxheTpub25lJyB0byBpdGVtcyB3aGlsZSBzZWFyY2hpbmcuIFRoZXNlIHNob3VsZCBub3QgYmUgc2VsZWN0ZWQgd2hpbGUgdXNpbmcgc2hpZnQvY3RybC4KICAgICAgICAgICAgdmFyIGZpbHRlciA9ICIuaXRlbUhvbGRlcjpub3QoW3N0eWxlKj1ub25lXSkiOwogICAgICAgICAgICAkKCcjaW52ZW50b3JpZXMnKS5zZWxlY3RhYmxlKHsKICAgICAgICAgICAgICAgIGZpbHRlcjogZmlsdGVyLAogICAgICAgICAgICAgICAgc2VsZWN0aW5nOiBmdW5jdGlvbihlLCB1aSkgewogICAgICAgICAgICAgICAgICAgIC8vIEdldCBzZWxlY3RlZCBpdGVtIGluZGV4LgogICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZEluZGV4ID0gJCh1aS5zZWxlY3RpbmcudGFnTmFtZSwgZS50YXJnZXQpLmluZGV4KHVpLnNlbGVjdGluZyk7CgogICAgICAgICAgICAgICAgICAgIC8vIElmIHNoaWZ0IGtleSB3YXMgcHJlc3NlZCBhbmQgdGhlcmUgaXMgcHJldmlvdXMgLSBzZWxlY3QgdGhlbSBhbGwuCiAgICAgICAgICAgICAgICAgICAgaWYgKGUuc2hpZnRLZXkgJiYgcHJldmlvdXNTZWxlY3Rpb24gPiAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAkKHVpLnNlbGVjdGluZy50YWdOYW1lLCBlLnRhcmdldCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zbGljZShNYXRoLm1pbihwcmV2aW91c1NlbGVjdGlvbiwgc2VsZWN0ZWRJbmRleCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMSArIE1hdGgubWF4KHByZXZpb3VzU2VsZWN0aW9uLCBzZWxlY3RlZEluZGV4KSkuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5pcyhmaWx0ZXIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ3VpLXNlbGVjdGVkJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzU2VsZWN0aW9uID0gLTE7IC8vIFJlc2V0IHByZXZpb3VzLgogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzU2VsZWN0aW9uID0gc2VsZWN0ZWRJbmRleDsgLy8gU2F2ZSBwcmV2aW91cy4KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IGZ1bmN0aW9uKGUsIHVpKSB7CiAgICAgICAgICAgICAgICAgICAgdXBkYXRlSW52ZW50b3J5U2VsZWN0aW9uKHVpLnNlbGVjdGVkKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvLyBHZXRzIHRoZSBzZWxlY3RlZCBpdGVtcyBpbiB0aGUgaW52ZW50b3J5LgogICAgICAgIGZ1bmN0aW9uIGdldFNlbGVjdGVkSXRlbXMoKSB7CiAgICAgICAgICAgIHZhciBpZHMgPSBbXTsKICAgICAgICAgICAgJCgnLmludmVudG9yeV9jdG4nKS5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuaW52ZW50b3J5X3BhZ2UnKS5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBpbnZlbnRvcnlfcGFnZSA9IHRoaXM7CgogICAgICAgICAgICAgICAgICAgICQoaW52ZW50b3J5X3BhZ2UpLmZpbmQoJy5pdGVtSG9sZGVyJykuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkKHRoaXMpLmhhc0NsYXNzKCd1aS1zZWxlY3RlZCcpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuaXRlbScpLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IHRoaXMuaWQubWF0Y2goL18oXC0/XGQrKSQvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRzLnB1c2gobWF0Y2hlc1sxXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgcmV0dXJuIGlkczsKICAgICAgICB9CgogICAgICAgIC8vIEdldHMgdGhlIHNlbGVjdGVkIGFuZCBtYXJrZXRhYmxlIGl0ZW1zIGluIHRoZSBpbnZlbnRvcnkuCiAgICAgICAgZnVuY3Rpb24gZ2V0SW52ZW50b3J5U2VsZWN0ZWRNYXJrZXRhYmxlSXRlbXMoY2FsbGJhY2spIHsKICAgICAgICAgICAgdmFyIGlkcyA9IGdldFNlbGVjdGVkSXRlbXMoKTsKCiAgICAgICAgICAgIGxvYWRBbGxJbnZlbnRvcmllcygpLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBnZXRJbnZlbnRvcnlJdGVtcygpOwogICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkSXRlbXMgPSBbXTsKCiAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWl0ZW0ubWFya2V0YWJsZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbUlkID0gaXRlbS5hc3NldGlkIHx8IGl0ZW0uaWQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlkcy5pbmRleE9mKGl0ZW1JZCkgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkSXRlbXMucHVzaChpdGVtKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjYWxsYmFjayhmaWx0ZXJlZEl0ZW1zKTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBsb2dET00oJ0NvdWxkIG5vdCByZXRyaWV2ZSB0aGUgaW52ZW50b3J5Li4uJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy8gR2V0cyB0aGUgc2VsZWN0ZWQgYW5kIGdlbW1hYmxlIGl0ZW1zIGluIHRoZSBpbnZlbnRvcnkuCiAgICAgICAgZnVuY3Rpb24gZ2V0SW52ZW50b3J5U2VsZWN0ZWRHZW1zSXRlbXMoY2FsbGJhY2spIHsKICAgICAgICAgICAgdmFyIGlkcyA9IGdldFNlbGVjdGVkSXRlbXMoKTsKCiAgICAgICAgICAgIGxvYWRBbGxJbnZlbnRvcmllcygpLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBnZXRJbnZlbnRvcnlJdGVtcygpOwogICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkSXRlbXMgPSBbXTsKCiAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgY2FuVHVybkludG9HZW1zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgb3duZXJfYWN0aW9uIGluIGl0ZW0ub3duZXJfYWN0aW9ucykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5vd25lcl9hY3Rpb25zW293bmVyX2FjdGlvbl0ubGluayAhPSBudWxsICYmIGl0ZW0ub3duZXJfYWN0aW9uc1tvd25lcl9hY3Rpb25dLmxpbmsuaW5jbHVkZXMoJ0dldEdvb1ZhbHVlJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhblR1cm5JbnRvR2VtcyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICghY2FuVHVybkludG9HZW1zKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CgogICAgICAgICAgICAgICAgICAgIHZhciBpdGVtSWQgPSBpdGVtLmFzc2V0aWQgfHwgaXRlbS5pZDsKICAgICAgICAgICAgICAgICAgICBpZiAoaWRzLmluZGV4T2YoaXRlbUlkKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRJdGVtcy5wdXNoKGl0ZW0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNhbGxiYWNrKGZpbHRlcmVkSXRlbXMpOwogICAgICAgICAgICB9LCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGxvZ0RPTSgnQ291bGQgbm90IHJldHJpZXZlIHRoZSBpbnZlbnRvcnkuLi4nKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvLyBHZXRzIHRoZSBzZWxlY3RlZCBhbmQgYm9vc3RlciBwYWNrIGl0ZW1zIGluIHRoZSBpbnZlbnRvcnkuCiAgICAgICAgZnVuY3Rpb24gZ2V0SW52ZW50b3J5U2VsZWN0ZWRCb29zdGVyUGFja0l0ZW1zKGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciBpZHMgPSBnZXRTZWxlY3RlZEl0ZW1zKCk7CgogICAgICAgICAgICBsb2FkQWxsSW52ZW50b3JpZXMoKS50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gZ2V0SW52ZW50b3J5SXRlbXMoKTsKICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJlZEl0ZW1zID0gW107CgogICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNhbk9wZW5Cb29zdGVyID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgb3duZXJfYWN0aW9uIGluIGl0ZW0ub3duZXJfYWN0aW9ucykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5vd25lcl9hY3Rpb25zW293bmVyX2FjdGlvbl0ubGluayAhPSBudWxsICYmIGl0ZW0ub3duZXJfYWN0aW9uc1tvd25lcl9hY3Rpb25dLmxpbmsuaW5jbHVkZXMoJ09wZW5Cb29zdGVyJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbk9wZW5Cb29zdGVyID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKCFjYW5PcGVuQm9vc3RlcikKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbUlkID0gaXRlbS5hc3NldGlkIHx8IGl0ZW0uaWQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlkcy5pbmRleE9mKGl0ZW1JZCkgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkSXRlbXMucHVzaChpdGVtKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjYWxsYmFjayhmaWx0ZXJlZEl0ZW1zKTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBsb2dET00oJ0NvdWxkIG5vdCByZXRyaWV2ZSB0aGUgaW52ZW50b3J5Li4uJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy8gVXBkYXRlcyB0aGUgKHNlbGVjdGVkKSBzZWxsIC4uLiBpdGVtcyBidXR0b24uCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlU2VsbFNlbGVjdGVkQnV0dG9uKCkgewogICAgICAgICAgICBnZXRJbnZlbnRvcnlTZWxlY3RlZE1hcmtldGFibGVJdGVtcyhmdW5jdGlvbihpdGVtcykgewogICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkSXRlbXMgPSBpdGVtcy5sZW5ndGg7CiAgICAgICAgICAgICAgICBpZiAoaXRlbXMubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgICAgICAkKCcuc2VsbF9zZWxlY3RlZCcpLmhpZGUoKTsKICAgICAgICAgICAgICAgICAgICAkKCcuc2VsbF9tYW51YWwnKS5oaWRlKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICQoJy5zZWxsX3NlbGVjdGVkJykuc2hvdygpOwogICAgICAgICAgICAgICAgICAgIGlmIChjYW5TZWxsU2VsZWN0ZWRJdGVtc01hbnVhbGx5KGl0ZW1zKSkgewogICAgICAgICAgICAgICAgICAgICAgICAkKCcuc2VsbF9tYW51YWwnKS5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zZWxsX21hbnVhbCA+IHNwYW4nKS50ZXh0KCdTZWxsICcgKyBzZWxlY3RlZEl0ZW1zICsgKHNlbGVjdGVkSXRlbXMgPT0gMSA/ICcgSXRlbSBNYW51YWwnIDogJyBJdGVtcyBNYW51YWwnKSk7CQkJCQkJCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNlbGxfbWFudWFsJykuaGlkZSgpOwkJCQkJCQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAkKCcuc2VsbF9zZWxlY3RlZCA+IHNwYW4nKS50ZXh0KCdTZWxsICcgKyBzZWxlY3RlZEl0ZW1zICsgKHNlbGVjdGVkSXRlbXMgPT0gMSA/ICcgSXRlbScgOiAnIEl0ZW1zJykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIC8vIFVwZGF0ZXMgdGhlIChzZWxlY3RlZCkgdHVybiBpbnRvIC4uLiBnZW1zIGJ1dHRvbi4KICAgICAgICBmdW5jdGlvbiB1cGRhdGVUdXJuSW50b0dlbXNCdXR0b24oKSB7CiAgICAgICAgICAgIGdldEludmVudG9yeVNlbGVjdGVkR2Vtc0l0ZW1zKGZ1bmN0aW9uKGl0ZW1zKSB7CiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRJdGVtcyA9IGl0ZW1zLmxlbmd0aDsKICAgICAgICAgICAgICAgIGlmIChpdGVtcy5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgICAgICAgICQoJy50dXJuX2ludG9fZ2VtcycpLmhpZGUoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJCgnLnR1cm5faW50b19nZW1zJykuc2hvdygpOwogICAgICAgICAgICAgICAgICAgICQoJy50dXJuX2ludG9fZ2VtcyA+IHNwYW4nKQogICAgICAgICAgICAgICAgICAgICAgICAudGV4dCgnVHVybiAnICsgc2VsZWN0ZWRJdGVtcyArIChzZWxlY3RlZEl0ZW1zID09IDEgPyAnIEl0ZW0gSW50byBHZW1zJyA6ICcgSXRlbXMgSW50byBHZW1zJykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIC8vIFVwZGF0ZXMgdGhlIChzZWxlY3RlZCkgb3BlbiAuLi4gYm9vc3RlciBwYWNrcyBidXR0b24uCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlT3BlbkJvb3N0ZXJQYWNrc0J1dHRvbigpIHsKICAgICAgICAgICAgZ2V0SW52ZW50b3J5U2VsZWN0ZWRCb29zdGVyUGFja0l0ZW1zKGZ1bmN0aW9uKGl0ZW1zKSB7CiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRJdGVtcyA9IGl0ZW1zLmxlbmd0aDsKICAgICAgICAgICAgICAgIGlmIChpdGVtcy5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgICAgICAgICQoJy51bnBhY2tfYm9vc3Rlcl9wYWNrcycpLmhpZGUoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJCgnLnVucGFja19ib29zdGVyX3BhY2tzJykuc2hvdygpOwogICAgICAgICAgICAgICAgICAgICQoJy51bnBhY2tfYm9vc3Rlcl9wYWNrcyA+IHNwYW4nKQogICAgICAgICAgICAgICAgICAgICAgICAudGV4dCgnVW5wYWNrICcgKyBzZWxlY3RlZEl0ZW1zICsgKHNlbGVjdGVkSXRlbXMgPT0gMSA/ICcgQm9vc3RlciBQYWNrJyA6ICcgQm9vc3RlciBQYWNrcycpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVJbnZlbnRvcnlTZWxlY3Rpb24oaXRlbSkgewogICAgICAgICAgICB1cGRhdGVTZWxsU2VsZWN0ZWRCdXR0b24oKTsKICAgICAgICAgICAgdXBkYXRlVHVybkludG9HZW1zQnV0dG9uKCk7CiAgICAgICAgICAgIHVwZGF0ZU9wZW5Cb29zdGVyUGFja3NCdXR0b24oKTsKCiAgICAgICAgICAgIC8vIFdhaXQgdW50aWwgZ19BY3RpdmVJbnZlbnRvcnkuc2VsZWN0ZWRJdGVtIGlzIGlkZW50aWNhbCB0byB0aGUgc2VsZWN0ZWQgVUkgaXRlbS4KICAgICAgICAgICAgLy8gVGhpcyBhbHNvIG1ha2VzIHN1cmUgdGhhdCB0aGUgbmV3IC0gYW5kIGNvcnJlY3QgLSBpdGVtX2luZm8gKGl0ZW1pbmZvMCBvciBpdGVtaW5mbzEpIGlzIHZpc2libGUuCiAgICAgICAgICAgIHZhciBzZWxlY3RlZEl0ZW1JZFVJID0gJCgnZGl2JywgaXRlbSkuYXR0cignaWQnKTsKICAgICAgICAgICAgdmFyIHNlbGVjdGVkSXRlbUlkSW52ZW50b3J5ID0gZ2V0QWN0aXZlSW52ZW50b3J5KCkuc2VsZWN0ZWRJdGVtLmFwcGlkICsKICAgICAgICAgICAgICAgICdfJyArCiAgICAgICAgICAgICAgICBnZXRBY3RpdmVJbnZlbnRvcnkoKS5zZWxlY3RlZEl0ZW0uY29udGV4dGlkICsKICAgICAgICAgICAgICAgICdfJyArCiAgICAgICAgICAgICAgICBnZXRBY3RpdmVJbnZlbnRvcnkoKS5zZWxlY3RlZEl0ZW0uYXNzZXRpZDsKICAgICAgICAgICAgaWYgKHNlbGVjdGVkSXRlbUlkVUkgIT09IHNlbGVjdGVkSXRlbUlkSW52ZW50b3J5KSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHVwZGF0ZUludmVudG9yeVNlbGVjdGlvbihpdGVtKTsKICAgICAgICAgICAgICAgIH0sIDI1MCk7CgogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgaXRlbV9pbmZvID0gJCgnLmludmVudG9yeV9pdGVtaW5mbzp2aXNpYmxlJykuZmlyc3QoKTsKICAgICAgICAgICAgaWYgKGl0ZW1faW5mby5odG1sKCkuaW5kZXhPZignY2hlY2tvdXQvc2VuZGdpZnQvJykgPiAtMSkgLy8gR2lmdHMgaGF2ZSBubyBtYXJrZXQgaW5mb3JtYXRpb24uCiAgICAgICAgICAgICAgICByZXR1cm47CgogICAgICAgICAgICAvLyBVc2UgYSAnaGFyZCcgaXRlbSBpZCBpbnN0ZWFkIG9mIHJlbHlpbmcgb24gdGhlIHNlbGVjdGVkIGl0ZW1faW5mbyAoc29tZXRpbWVzIFN0ZWFtIHRlbXBvcmFyaWx5IGNoYW5nZXMgdGhlIGNvcnJlY3QgaXRlbSAoPykpLgogICAgICAgICAgICB2YXIgaXRlbV9pbmZvX2lkID0gaXRlbV9pbmZvLmF0dHIoJ2lkJyk7CgogICAgICAgICAgICAvLyBNb3ZlIHNjcmFwIHRvIGJvdHRvbSwgdGhpcyBpcyBvZiBsaXR0bGUgaW50ZXJlc3QuCiAgICAgICAgICAgIHZhciBzY3JhcCA9ICQoJyMnICsgaXRlbV9pbmZvX2lkICsgJ19zY3JhcF9jb250ZW50Jyk7CiAgICAgICAgICAgIHNjcmFwLm5leHQoKS5pbnNlcnRCZWZvcmUoc2NyYXApOwoKICAgICAgICAgICAgLy8gU3RhcnRpbmcgYXQgcHJpY2VzIGFyZSBhbHJlYWR5IHJldHJpZXZlZCBpbiB0aGUgdGFibGUuCiAgICAgICAgICAgIC8vJCgnIycgKyBpdGVtX2luZm9faWQgKyAnX2l0ZW1fbWFya2V0X2FjdGlvbnMgPiBkaXY6bnRoLWNoaWxkKDEpID4gZGl2Om50aC1jaGlsZCgyKScpCiAgICAgICAgICAgIC8vICAgIC5yZW1vdmUoKTsgLy8gU3RhcnRpbmcgYXQ6IHgseHguCgogICAgICAgICAgICB2YXIgbWFya2V0X2hhc2hfbmFtZSA9IGdldE1hcmtldEhhc2hOYW1lKGdldEFjdGl2ZUludmVudG9yeSgpLnNlbGVjdGVkSXRlbSk7CiAgICAgICAgICAgIGlmIChtYXJrZXRfaGFzaF9uYW1lID09IG51bGwpCiAgICAgICAgICAgICAgICByZXR1cm47CgogICAgICAgICAgICB2YXIgYXBwaWQgPSBnZXRBY3RpdmVJbnZlbnRvcnkoKS5zZWxlY3RlZEl0ZW0uYXBwaWQ7CiAgICAgICAgICAgIHZhciBpdGVtID0gewogICAgICAgICAgICAgICAgYXBwaWQ6IHBhcnNlSW50KGFwcGlkKSwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB7CiAgICAgICAgICAgICAgICAgICAgbWFya2V0X2hhc2hfbmFtZTogbWFya2V0X2hhc2hfbmFtZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbWFya2V0LmdldEl0ZW1PcmRlcnNIaXN0b2dyYW0oaXRlbSwKICAgICAgICAgICAgICAgIGZhbHNlLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyLCBoaXN0b2dyYW0pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0NvbnNvbGUoJ0ZhaWxlZCB0byBnZXQgb3JkZXJzIGhpc3RvZ3JhbSBmb3IgJyArIChnZXRBY3RpdmVJbnZlbnRvcnkoKS5zZWxlY3RlZEl0ZW0ubmFtZSB8fCBnZXRBY3RpdmVJbnZlbnRvcnkoKS5zZWxlY3RlZEl0ZW0uZGVzY3JpcHRpb24ubmFtZSkpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB2YXIgZ3JvdXBNYWluID0gJCgnPGRpdiBpZD0ibGlzdGluZ3NfZ3JvdXAiPicgKwogICAgICAgICAgICAgICAgICAgICAgICAnPGRpdj48ZGl2IGlkPSJsaXN0aW5nc19zZWxsIj5TZWxsPC9kaXY+JyArCiAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvZ3JhbS5zZWxsX29yZGVyX3RhYmxlICsKICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgKwogICAgICAgICAgICAgICAgICAgICAgICAnPGRpdj48ZGl2IGlkPSJsaXN0aW5nc19idXkiPkJ1eTwvZGl2PicgKwogICAgICAgICAgICAgICAgICAgICAgICBoaXN0b2dyYW0uYnV5X29yZGVyX3RhYmxlICsKICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgKwogICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+Jyk7CgogICAgICAgICAgICAgICAgICAgICQoJyMnICsgaXRlbV9pbmZvX2lkICsgJ19pdGVtX21hcmtldF9hY3Rpb25zID4gZGl2JykuYWZ0ZXIoZ3JvdXBNYWluKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIG93bmVyQWN0aW9ucyA9ICQoJyMnICsgaXRlbV9pbmZvX2lkICsgJ19pdGVtX293bmVyX2FjdGlvbnMnKTsKICAgICAgICAgICAgICAgICAgICAvLyBvd25lckFjdGlvbnMgaXMgaGlkZGVuIG9uIG90aGVyIGdhbWVzJyBpbnZlbnRvcmllcywgd2UgbmVlZCB0byBzaG93IGl0IHRvIGhhdmUgYSAiTWFya2V0IiBidXR0b24gdmlzaWJsZQogICAgICAgICAgICAgICAgICAgIG93bmVyQWN0aW9ucy5zaG93KCk7CgogICAgICAgICAgICAgICAgICAgIG93bmVyQWN0aW9ucy5hcHBlbmQoJzxhIGNsYXNzPSJidG5fc21hbGwgYnRuX2dyZXlfd2hpdGVfaW5uZXJmYWRlIiBocmVmPSIvbWFya2V0L2xpc3RpbmdzLycgKyBhcHBpZCArICcvJyArIG1hcmtldF9oYXNoX25hbWUgKyAnIj48c3Bhbj5WaWV3IGluIENvbW11bml0eSBNYXJrZXQ8L3NwYW4+PC9hPicpOwogICAgICAgICAgICAgICAgICAgICQoJyMnICsgaXRlbV9pbmZvX2lkICsgJ19pdGVtX21hcmtldF9hY3Rpb25zID4gZGl2Om50aC1jaGlsZCgxKSA+IGRpdjpudGgtY2hpbGQoMSknKS5oaWRlKCk7CgogICAgICAgICAgICAgICAgICAgIHZhciBpc0Jvb3N0ZXJQYWNrID0gZ2V0QWN0aXZlSW52ZW50b3J5KCkuc2VsZWN0ZWRJdGVtLm5hbWUudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnYm9vc3RlciBwYWNrJyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQm9vc3RlclBhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyYWRpbmdDYXJkc1VybCA9ICIvbWFya2V0L3NlYXJjaD9xPSZjYXRlZ29yeV83NTNfR2FtZSU1QiU1RD10YWdfYXBwXyIgKyBnZXRBY3RpdmVJbnZlbnRvcnkoKS5zZWxlY3RlZEl0ZW0ubWFya2V0X2ZlZV9hcHAgKyAiJmNhdGVnb3J5Xzc1M19pdGVtX2NsYXNzJTVCJTVEPXRhZ19pdGVtX2NsYXNzXzImYXBwaWQ9NzUzIjsKICAgICAgICAgICAgICAgICAgICAgICAgb3duZXJBY3Rpb25zLmFwcGVuZCgnPGJyLz4gPGEgY2xhc3M9ImJ0bl9zbWFsbCBidG5fZ3JleV93aGl0ZV9pbm5lcmZhZGUiIGhyZWY9IicgKyB0cmFkaW5nQ2FyZHNVcmwgKyAnIj48c3Bhbj5WaWV3IHRyYWRpbmcgY2FyZHMgaW4gQ29tbXVuaXR5IE1hcmtldDwvc3Bhbj48L2E+Jyk7CiAgICAgICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgcXVpY2sgc2VsbCBidXR0b25zLgogICAgICAgICAgICAgICAgICAgIHZhciBpdGVtSWQgPSBnZXRBY3RpdmVJbnZlbnRvcnkoKS5zZWxlY3RlZEl0ZW0uYXNzZXRpZCB8fCBnZXRBY3RpdmVJbnZlbnRvcnkoKS5zZWxlY3RlZEl0ZW0uaWQ7CgogICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZWQgcXVldWVkIGl0ZW1zLgogICAgICAgICAgICAgICAgICAgIGlmIChnZXRBY3RpdmVJbnZlbnRvcnkoKS5zZWxlY3RlZEl0ZW0ucXVldWVkICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIHByaWNlcyA9IFtdOwoKICAgICAgICAgICAgICAgICAgICBpZiAoaGlzdG9ncmFtICE9IG51bGwgJiYgaGlzdG9ncmFtLmhpZ2hlc3RfYnV5X29yZGVyICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2VzLnB1c2gocGFyc2VJbnQoaGlzdG9ncmFtLmhpZ2hlc3RfYnV5X29yZGVyKSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoaGlzdG9ncmFtICE9IG51bGwgJiYgaGlzdG9ncmFtLmxvd2VzdF9zZWxsX29yZGVyICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2VzLnB1c2gocGFyc2VJbnQoaGlzdG9ncmFtLmxvd2VzdF9zZWxsX29yZGVyKSAtIDEpOwogICAgICAgICAgICAgICAgICAgICAgICBwcmljZXMucHVzaChwYXJzZUludChoaXN0b2dyYW0ubG93ZXN0X3NlbGxfb3JkZXIpKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHByaWNlcyA9IHByaWNlcy5maWx0ZXIoKHYsIGkpID0+IHByaWNlcy5pbmRleE9mKHYpID09PSBpKS5zb3J0KChhLCBiKSA9PiBhIC0gYik7CgogICAgICAgICAgICAgICAgICAgIHZhciBidXR0b25zID0gJyAnOwogICAgICAgICAgICAgICAgICAgIHByaWNlcy5mb3JFYWNoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9ucyArPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxhIGNsYXNzPSJpdGVtX21hcmtldF9hY3Rpb25fYnV0dG9uIGl0ZW1fbWFya2V0X2FjdGlvbl9idXR0b25fZ3JlZW4gcXVpY2tfc2VsbCIgaWQ9InF1aWNrX3NlbGwnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJyI+JyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9Iml0ZW1fbWFya2V0X2FjdGlvbl9idXR0b25fZWRnZSBpdGVtX21hcmtldF9hY3Rpb25fYnV0dG9uX2xlZnQiPjwvc3Bhbj4nICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0iaXRlbV9tYXJrZXRfYWN0aW9uX2J1dHRvbl9jb250ZW50cyI+JyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZSAvIDEwMC4wKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeVN5bWJvbCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJpdGVtX21hcmtldF9hY3Rpb25fYnV0dG9uX2VkZ2UgaXRlbV9tYXJrZXRfYWN0aW9uX2J1dHRvbl9yaWdodCI+PC9zcGFuPicgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJpdGVtX21hcmtldF9hY3Rpb25fYnV0dG9uX3ByZWxvYWQiPjwvc3Bhbj4nICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2E+JwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAkKCcjJyArIGl0ZW1faW5mb19pZCArICdfaXRlbV9tYXJrZXRfYWN0aW9ucycsIGl0ZW1faW5mbykuYXBwZW5kKGJ1dHRvbnMpOwoKICAgICAgICAgICAgICAgICAgICAkKCcjJyArIGl0ZW1faW5mb19pZCArICdfaXRlbV9tYXJrZXRfYWN0aW9ucycsIGl0ZW1faW5mbykuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4Ij4nICsKICAgICAgICAgICAgICAgICAgICAgICAgJzxpbnB1dCBpZD0icXVpY2tfc2VsbF9pbnB1dCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6IGJsYWNrO2NvbG9yOiB3aGl0ZTtib3JkZXI6IHRyYW5zcGFyZW50O21heC13aWR0aDo2NXB4O3RleHQtYWxpZ246Y2VudGVyOyIgdHlwZT0ibnVtYmVyIiB2YWx1ZT0iJyArIChoaXN0b2dyYW0ubG93ZXN0X3NlbGxfb3JkZXIgLyAxMDApICsgJyIgc3RlcD0iMC4wMSIgLz4nICsKICAgICAgICAgICAgICAgICAgICAgICAgJyZuYnNwOzxhIGNsYXNzPSJpdGVtX21hcmtldF9hY3Rpb25fYnV0dG9uIGl0ZW1fbWFya2V0X2FjdGlvbl9idXR0b25fZ3JlZW4gcXVpY2tfc2VsbF9jdXN0b20iPicgKwogICAgICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9Iml0ZW1fbWFya2V0X2FjdGlvbl9idXR0b25fZWRnZSBpdGVtX21hcmtldF9hY3Rpb25fYnV0dG9uX2xlZnQiPjwvc3Bhbj4nICsKICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJpdGVtX21hcmtldF9hY3Rpb25fYnV0dG9uX2NvbnRlbnRzIj7inpwgU2VsbDwvc3Bhbj4nICsKICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJpdGVtX21hcmtldF9hY3Rpb25fYnV0dG9uX2VkZ2UgaXRlbV9tYXJrZXRfYWN0aW9uX2J1dHRvbl9yaWdodCI+PC9zcGFuPicgKwogICAgICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9Iml0ZW1fbWFya2V0X2FjdGlvbl9idXR0b25fcHJlbG9hZCI+PC9zcGFuPicgKwogICAgICAgICAgICAgICAgICAgICAgICAnPC9hPicgKwogICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+Jyk7CgogICAgICAgICAgICAgICAgICAgICQoJy5xdWlja19zZWxsJykub24oJ2NsaWNrJywKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJpY2UgPSAkKHRoaXMpLmF0dHIoJ2lkJykucmVwbGFjZSgncXVpY2tfc2VsbCcsICcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlID0gbWFya2V0LmdldFByaWNlQmVmb3JlRmVlcyhwcmljZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxOdW1iZXJPZlF1ZXVlZEl0ZW1zKys7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsbFF1ZXVlLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW06IGdldEFjdGl2ZUludmVudG9yeSgpLnNlbGVjdGVkSXRlbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxsUHJpY2U6IHByaWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICQoJy5xdWlja19zZWxsX2N1c3RvbScpLm9uKCdjbGljaycsCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByaWNlID0gJCgnI3F1aWNrX3NlbGxfaW5wdXQnLCAkKCcjJyArIGl0ZW1faW5mb19pZCArICdfaXRlbV9tYXJrZXRfYWN0aW9ucycsIGl0ZW1faW5mbykpLnZhbCgpICogMTAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2UgPSBtYXJrZXQuZ2V0UHJpY2VCZWZvcmVGZWVzKHByaWNlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbE51bWJlck9mUXVldWVkSXRlbXMrKzsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxsUXVldWUucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbTogZ2V0QWN0aXZlSW52ZW50b3J5KCkuc2VsZWN0ZWRJdGVtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGxQcmljZTogcHJpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy8gVXBkYXRlIHRoZSBpbnZlbnRvcnkgVUkuCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlSW52ZW50b3J5VUkoaXNPd25JbnZlbnRvcnkpIHsKICAgICAgICAgICAgLy8gUmVtb3ZlIHByZXZpb3VzIGNvbnRhaW5lcnMgKGUuZy4sIHdoZW4gYSB1c2VyIGNoYW5nZXMgaW52ZW50b3J5KS4KICAgICAgICAgICAgJCgnI2ludmVudG9yeV9zZWxsX2J1dHRvbnMnKS5yZW1vdmUoKTsKICAgICAgICAgICAgJCgnI3ByaWNlX29wdGlvbnMnKS5yZW1vdmUoKTsKICAgICAgICAgICAgJCgnI2ludmVudG9yeV9yZWxvYWRfYnV0dG9uJykucmVtb3ZlKCk7CgogICAgICAgICAgICAkKCcjc2VlX3NldHRpbmdzJykucmVtb3ZlKCk7CiAgICAgICAgICAgICQoJyNnbG9iYWxfYWN0aW9uX21lbnUnKQogICAgICAgICAgICAgICAgLnByZXBlbmQoJzxzcGFuIGlkPSJzZWVfc2V0dGluZ3MiPjxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSI+4qyWIFN0ZWFtIEVjb25vbXkgRW5oYW5jZXI8L2E+PC9zcGFuPicpOwogICAgICAgICAgICAkKCcjc2VlX3NldHRpbmdzJykub24oJ2NsaWNrJywgJyonLCAoKSA9PiBvcGVuU2V0dGluZ3MoKSk7CgogICAgICAgICAgICB2YXIgYXBwSWQgPSBnZXRBY3RpdmVJbnZlbnRvcnkoKS5tX2FwcGlkOwogICAgICAgICAgICB2YXIgc2hvd01pc2NPcHRpb25zID0gYXBwSWQgPT0gNzUzOwogICAgICAgICAgICB2YXIgVEYyID0gYXBwSWQgPT0gNDQwOwoKICAgICAgICAgICAgdmFyIHNlbGxCdXR0b25zID0gJCgnPGRpdiBpZD0iaW52ZW50b3J5X3NlbGxfYnV0dG9ucyIgc3R5bGU9Im1hcmdpbi1ib3R0b206MTJweDsiPicgKwogICAgICAgICAgICAgICAgJzxhIGNsYXNzPSJidG5fZ3JlZW5fd2hpdGVfaW5uZXJmYWRlIGJ0bl9tZWRpdW1fd2lkZSBzZWxsX2FsbCBzZXBhcmF0b3ItYnRuLXJpZ2h0Ij48c3Bhbj5TZWxsIEFsbCBJdGVtczwvc3Bhbj48L2E+JyArCiAgICAgICAgICAgICAgICAnPGEgY2xhc3M9ImJ0bl9ncmVlbl93aGl0ZV9pbm5lcmZhZGUgYnRuX21lZGl1bV93aWRlIHNlbGxfc2VsZWN0ZWQgc2VwYXJhdG9yLWJ0bi1yaWdodCIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+PHNwYW4+U2VsbCBTZWxlY3RlZCBJdGVtczwvc3Bhbj48L2E+JyArCiAgICAgICAgICAgICAgICAnPGEgY2xhc3M9ImJ0bl9ncmVlbl93aGl0ZV9pbm5lcmZhZGUgYnRuX21lZGl1bV93aWRlIHNlbGxfbWFudWFsIHNlcGFyYXRvci1idG4tcmlnaHQiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPjxzcGFuPlNlbGwgTWFudWFsbHk8L3NwYW4+PC9hPicgKwogICAgICAgICAgICAgICAgKHNob3dNaXNjT3B0aW9ucyA/CiAgICAgICAgICAgICAgICAgICAgJzxhIGNsYXNzPSJidG5fZ3JlZW5fd2hpdGVfaW5uZXJmYWRlIGJ0bl9tZWRpdW1fd2lkZSBzZWxsX2FsbF9jYXJkcyBzZXBhcmF0b3ItYnRuLXJpZ2h0Ij48c3Bhbj5TZWxsIEFsbCBDYXJkczwvc3Bhbj48L2E+JyArCiAgICAgICAgICAgICAgICAgICAgJzxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MTJweDsiPicgKwogICAgICAgICAgICAgICAgICAgICc8YSBjbGFzcz0iYnRuX2RhcmtibHVlX3doaXRlX2lubmVyZmFkZSBidG5fbWVkaXVtX3dpZGUgdHVybl9pbnRvX2dlbXMgc2VwYXJhdG9yLWJ0bi1yaWdodCIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+PHNwYW4+VHVybiBTZWxlY3RlZCBJdGVtcyBJbnRvIEdlbXM8L3NwYW4+PC9hPicgKwogICAgICAgICAgICAgICAgICAgICc8YSBjbGFzcz0iYnRuX2RhcmtibHVlX3doaXRlX2lubmVyZmFkZSBidG5fbWVkaXVtX3dpZGUgdW5wYWNrX2Jvb3N0ZXJfcGFja3Mgc2VwYXJhdG9yLWJ0bi1yaWdodCIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+PHNwYW4+VW5wYWNrIFNlbGVjdGVkIEJvb3N0ZXIgUGFja3M8L3NwYW4+PC9hPicgKwogICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nIDoKICAgICAgICAgICAgICAgICAgICAnJykgKwogICAgICAgICAgICAgICAgKFRGMiA/ICc8YSBjbGFzcz0iYnRuX2dyZWVuX3doaXRlX2lubmVyZmFkZSBidG5fbWVkaXVtX3dpZGUgc2VsbF9hbGxfY3JhdGVzIHNlcGFyYXRvci1idG4tcmlnaHQiPjxzcGFuPlNlbGwgQWxsIENyYXRlczwvc3Bhbj48L2E+JyA6ICcnKSArCiAgICAgICAgICAgICAgICAnPC9kaXY+Jyk7CgogICAgICAgICAgICB2YXIgcmVsb2FkQnV0dG9uID0KICAgICAgICAgICAgICAgICQoJzxhIGlkPSJpbnZlbnRvcnlfcmVsb2FkX2J1dHRvbiIgY2xhc3M9ImJ0bl9kYXJrYmx1ZV93aGl0ZV9pbm5lcmZhZGUgYnRuX21lZGl1bV93aWRlIHJlbG9hZF9pbnZlbnRvcnkiIHN0eWxlPSJtYXJnaW4tcmlnaHQ6MTJweCI+PHNwYW4+UmVsb2FkIEludmVudG9yeTwvc3Bhbj48L2E+Jyk7CgogICAgICAgICAgICAkKCcjaW52ZW50b3J5X2xvZ29zJylbMF0uc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nOwoKICAgICAgICAgICAgJCgnI2ludmVudG9yeV9hcHBsb2dvJykuaGlkZSgpOyAvLyBIaWRlIHRoZSBTdGVhbS9nYW1lIGxvZ28sIHdlIGRvbid0IG5lZWQgdG8gc2VlIGl0IHR3aWNlLgogICAgICAgICAgICAkKCcjaW52ZW50b3J5X2FwcGxvZ28nKS5hZnRlcihsb2dnZXIpOwoKCiAgICAgICAgICAgICQoIiNsb2dnZXIiKS5vbignc2Nyb2xsJywKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBoYXNVc2VyU2Nyb2xsZWRUb0JvdHRvbSA9CiAgICAgICAgICAgICAgICAgICAgICAgICQoIiNsb2dnZXIiKS5wcm9wKCdzY3JvbGxIZWlnaHQnKSAtICQoIiNsb2dnZXIiKS5wcm9wKCdjbGllbnRIZWlnaHQnKSA8PQogICAgICAgICAgICAgICAgICAgICAgICAkKCIjbG9nZ2VyIikucHJvcCgnc2Nyb2xsVG9wJykgKyAxOwogICAgICAgICAgICAgICAgICAgIHVzZXJTY3JvbGxlZCA9ICFoYXNVc2VyU2Nyb2xsZWRUb0JvdHRvbTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gT25seSBhZGQgYnV0dG9ucyBvbiB0aGUgdXNlcidzIGludmVudG9yeS4KICAgICAgICAgICAgaWYgKGlzT3duSW52ZW50b3J5KSB7CiAgICAgICAgICAgICAgICAkKCcjaW52ZW50b3J5X2FwcGxvZ28nKS5hZnRlcihzZWxsQnV0dG9ucyk7CgogICAgICAgICAgICAgICAgLy8gQWRkIGJpbmRpbmdzIHRvIHNlbGwgYnV0dG9ucy4KICAgICAgICAgICAgICAgICQoJy5zZWxsX2FsbCcpLm9uKCdjbGljaycsCiAgICAgICAgICAgICAgICAgICAgJyonLAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBzZWxsQWxsSXRlbXMoYXBwSWQpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgJCgnLnNlbGxfc2VsZWN0ZWQnKS5vbignY2xpY2snLCAnKicsIHNlbGxTZWxlY3RlZEl0ZW1zKTsKICAgICAgICAgICAgICAgICQoJy5zZWxsX21hbnVhbCcpLm9uKCdjbGljaycsICcqJywgc2VsbFNlbGVjdGVkSXRlbXNNYW51YWxseSk7CiAgICAgICAgICAgICAgICAkKCcuc2VsbF9hbGxfY2FyZHMnKS5vbignY2xpY2snLCAnKicsIHNlbGxBbGxDYXJkcyk7CiAgICAgICAgICAgICAgICAkKCcuc2VsbF9hbGxfY3JhdGVzJykub24oJ2NsaWNrJywgJyonLCBzZWxsQWxsQ3JhdGVzKTsKICAgICAgICAgICAgICAgICQoJy50dXJuX2ludG9fZ2VtcycpLm9uKCdjbGljaycsICcqJywgdHVyblNlbGVjdGVkSXRlbXNJbnRvR2Vtcyk7CiAgICAgICAgICAgICAgICAkKCcudW5wYWNrX2Jvb3N0ZXJfcGFja3MnKS5vbignY2xpY2snLCAnKicsIHVucGFja1NlbGVjdGVkQm9vc3RlclBhY2tzKTsKCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICQoJy5pbnZlbnRvcnlfcmlnaHRuYXYnKS5wcmVwZW5kKHJlbG9hZEJ1dHRvbik7CiAgICAgICAgICAgICQoJy5yZWxvYWRfaW52ZW50b3J5Jykub24oJ2NsaWNrJywKICAgICAgICAgICAgICAgICcqJywKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgbG9hZEFsbEludmVudG9yaWVzKCkudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlSW52ZW50b3J5UHJpY2VzID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZXRTZXR0aW5nV2l0aERlZmF1bHQoU0VUVElOR19JTlZFTlRPUllfUFJJQ0VfTEFCRUxTKSA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJbnZlbnRvcnlQcmljZXMoZ2V0SW52ZW50b3J5SXRlbXMoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAvLyBMb2FkIGFmdGVyIHRoZSBpbnZlbnRvcnkgaXMgbG9hZGVkLgogICAgICAgICAgICAgICAgICAgIHVwZGF0ZUludmVudG9yeVByaWNlcygpOwoKICAgICAgICAgICAgICAgICAgICAkKCcjaW52ZW50b3J5X3BhZ2Vjb250cm9scycpLm9ic2VydmUoJ2NoaWxkbGlzdCcsCiAgICAgICAgICAgICAgICAgICAgICAgICcqJywKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVJbnZlbnRvcnlQcmljZXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgbG9nRE9NKCdDb3VsZCBub3QgcmV0cmlldmUgdGhlIGludmVudG9yeS4uLicpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvLyBMb2FkcyB0aGUgc3BlY2lmaWVkIGludmVudG9yaWVzLgogICAgICAgIGZ1bmN0aW9uIGxvYWRJbnZlbnRvcmllcyhpbnZlbnRvcmllcykgewogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgaW52ZW50b3JpZXMucmVkdWNlKGZ1bmN0aW9uKHByb21pc2UsIGludmVudG9yeSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGludmVudG9yeS5Mb2FkQ29tcGxldGVJbnZlbnRvcnkoKS5kb25lKGZ1bmN0aW9uKCkge30pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpKTsKCiAgICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy8gTG9hZHMgYWxsIGludmVudG9yaWVzLgogICAgICAgIGZ1bmN0aW9uIGxvYWRBbGxJbnZlbnRvcmllcygpIHsKICAgICAgICAgICAgdmFyIGl0ZW1zID0gW107CgogICAgICAgICAgICBmb3IgKHZhciBjaGlsZCBpbiBnZXRBY3RpdmVJbnZlbnRvcnkoKS5tX3JnQ2hpbGRJbnZlbnRvcmllcykgewogICAgICAgICAgICAgICAgaXRlbXMucHVzaChnZXRBY3RpdmVJbnZlbnRvcnkoKS5tX3JnQ2hpbGRJbnZlbnRvcmllc1tjaGlsZF0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGl0ZW1zLnB1c2goZ2V0QWN0aXZlSW52ZW50b3J5KCkpOwoKICAgICAgICAgICAgcmV0dXJuIGxvYWRJbnZlbnRvcmllcyhpdGVtcyk7CiAgICAgICAgfQoKICAgICAgICAvLyBHZXRzIHRoZSBpbnZlbnRvcnkgaXRlbXMgZnJvbSB0aGUgYWN0aXZlIGludmVudG9yeS4KICAgICAgICBmdW5jdGlvbiBnZXRJbnZlbnRvcnlJdGVtcygpIHsKICAgICAgICAgICAgdmFyIGFyciA9IFtdOwoKICAgICAgICAgICAgZm9yICh2YXIgY2hpbGQgaW4gZ2V0QWN0aXZlSW52ZW50b3J5KCkubV9yZ0NoaWxkSW52ZW50b3JpZXMpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBnZXRBY3RpdmVJbnZlbnRvcnkoKS5tX3JnQ2hpbGRJbnZlbnRvcmllc1tjaGlsZF0ubV9yZ0Fzc2V0cykgewogICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGdldEFjdGl2ZUludmVudG9yeSgpLm1fcmdDaGlsZEludmVudG9yaWVzW2NoaWxkXS5tX3JnQXNzZXRzW2tleV07CiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWVyZ2VzIHRoZSBkZXNjcmlwdGlvbiBpbiB0aGUgbm9ybWFsIG9iamVjdCwgdGhpcyBpcyBkb25lIHRvIGtlZXAgdGhlIGxheW91dCBjb25zaXN0ZW50IHdpdGggdGhlIG1hcmtldCBwYWdlLCB3aGljaCBpcyBhbHNvIGZsYXR0ZW5lZC4KICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih2YWx1ZSwgdmFsdWUuZGVzY3JpcHRpb24pOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmNsdWRlcyB0aGUgaWQgb2YgdGhlIGludmVudG9yeSBpdGVtLgogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVsnaWQnXSA9IGtleTsKICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2godmFsdWUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gU29tZSBpbnZlbnRvcmllcyAoZS5nLiBCYXR0bGVCbG9jayBUaGVhdGVyKSBkbyBub3QgaGF2ZSBjaGlsZCBpbnZlbnRvcmllcywgdGhleSBoYXZlIGp1c3Qgb25lLgogICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gZ2V0QWN0aXZlSW52ZW50b3J5KCkubV9yZ0Fzc2V0cykgewogICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gZ2V0QWN0aXZlSW52ZW50b3J5KCkubV9yZ0Fzc2V0c1trZXldOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgICAgICAvLyBNZXJnZXMgdGhlIGRlc2NyaXB0aW9uIGluIHRoZSBub3JtYWwgb2JqZWN0LCB0aGlzIGlzIGRvbmUgdG8ga2VlcCB0aGUgbGF5b3V0IGNvbnNpc3RlbnQgd2l0aCB0aGUgbWFya2V0IHBhZ2UsIHdoaWNoIGlzIGFsc28gZmxhdHRlbmVkLgogICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odmFsdWUsIHZhbHVlLmRlc2NyaXB0aW9uKTsKICAgICAgICAgICAgICAgICAgICAvLyBJbmNsdWRlcyB0aGUgaWQgb2YgdGhlIGludmVudG9yeSBpdGVtLgogICAgICAgICAgICAgICAgICAgIHZhbHVlWydpZCddID0ga2V5OwogICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKHZhbHVlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGFycjsKICAgICAgICB9CiAgICB9CiAgICAvLyNlbmRyZWdpb24KCiAgICAvLyNyZWdpb24gSW52ZW50b3J5ICsgVHJhZGVvZmZlcgogICAgaWYgKGN1cnJlbnRQYWdlID09IFBBR0VfSU5WRU5UT1JZIHx8IGN1cnJlbnRQYWdlID09IFBBR0VfVFJBREVPRkZFUikgewoKICAgICAgICAvLyBHZXRzIHRoZSBhY3RpdmUgaW52ZW50b3J5LgogICAgICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUludmVudG9yeSgpIHsKICAgICAgICAgICAgcmV0dXJuIHVuc2FmZVdpbmRvdy5nX0FjdGl2ZUludmVudG9yeTsKICAgICAgICB9CgogICAgICAgIC8vIFNldHMgdGhlIHByaWNlcyBmb3IgdGhlIGl0ZW1zLgogICAgICAgIGZ1bmN0aW9uIHNldEludmVudG9yeVByaWNlcyhpdGVtcykgewogICAgICAgICAgICBpbnZlbnRvcnlQcmljZVF1ZXVlLmtpbGwoKTsKCiAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewogICAgICAgICAgICAgICAgaWYgKCFpdGVtLm1hcmtldGFibGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCEkKGl0ZW0uZWxlbWVudCkuaXMoIjp2aXNpYmxlIikpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaW52ZW50b3J5UHJpY2VRdWV1ZS5wdXNoKGl0ZW0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHZhciBpbnZlbnRvcnlQcmljZVF1ZXVlID0gYXN5bmMucXVldWUoZnVuY3Rpb24oaXRlbSwgbmV4dCkgewogICAgICAgICAgICAgICAgaW52ZW50b3J5UHJpY2VRdWV1ZVdvcmtlcihpdGVtLAogICAgICAgICAgICAgICAgICAgIGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHN1Y2Nlc3MsIGNhY2hlZCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVkID8gMCA6IGdldFJhbmRvbUludCgxMDAwLCAxNTAwKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWl0ZW0uaWdub3JlRXJyb3JzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5pZ25vcmVFcnJvcnMgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludmVudG9yeVByaWNlUXVldWUucHVzaChpdGVtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1iZXJPZkZhaWxlZFJlcXVlc3RzKys7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbGF5ID0gbnVtYmVyT2ZGYWlsZWRSZXF1ZXN0cyA+IDEgPwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFJhbmRvbUludCgzMDAwMCwgNDUwMDApIDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRSYW5kb21JbnQoMTAwMCwgMTUwMCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bWJlck9mRmFpbGVkUmVxdWVzdHMgPiAzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlck9mRmFpbGVkUmVxdWVzdHMgPSAwOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgY2FjaGVkID8gMCA6IGRlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LAogICAgICAgICAgICAxKTsKCiAgICAgICAgZnVuY3Rpb24gaW52ZW50b3J5UHJpY2VRdWV1ZVdvcmtlcihpdGVtLCBpZ25vcmVFcnJvcnMsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciBwcmljZUluZm8gPSBnZXRQcmljZUluZm9ybWF0aW9uRnJvbUl0ZW0oaXRlbSk7CgogICAgICAgICAgICB2YXIgZmFpbGVkID0gMDsKICAgICAgICAgICAgdmFyIGl0ZW1OYW1lID0gaXRlbS5uYW1lIHx8IGl0ZW0uZGVzY3JpcHRpb24ubmFtZTsKCiAgICAgICAgICAgIC8vIE9ubHkgZ2V0IHRoZSBtYXJrZXQgb3JkZXJzIGhlcmUsIHRoZSBoaXN0b3J5IGlzIG5vdCBpbXBvcnRhbnQgdG8gdmlzdWFsaXplIHRoZSBjdXJyZW50IHByaWNlcy4KICAgICAgICAgICAgbWFya2V0LmdldEl0ZW1PcmRlcnNIaXN0b2dyYW0oaXRlbSwKICAgICAgICAgICAgICAgIHRydWUsCiAgICAgICAgICAgICAgICBmdW5jdGlvbihlcnIsIGhpc3RvZ3JhbSwgY2FjaGVkTGlzdGluZ3MpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0NvbnNvbGUoJ0ZhaWxlZCB0byBnZXQgb3JkZXJzIGhpc3RvZ3JhbSBmb3IgJyArIGl0ZW1OYW1lKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIgPT0gRVJST1JfRkFJTEVEKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkICs9IDE7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoZmFpbGVkID4gMCAmJiAhaWdub3JlRXJyb3JzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhmYWxzZSwgY2FjaGVkTGlzdGluZ3MpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGxQcmljZSA9IGNhbGN1bGF0ZVNlbGxQcmljZUJlZm9yZUZlZXMobnVsbCwgaGlzdG9ncmFtLCBmYWxzZSwgMCwgNjU1MzUpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbVByaWNlID0gc2VsbFByaWNlID09IDY1NTM1ID8KICAgICAgICAgICAgICAgICAgICAgICAgJ+KInicgOgogICAgICAgICAgICAgICAgICAgICAgICAobWFya2V0LmdldFByaWNlSW5jbHVkaW5nRmVlcyhzZWxsUHJpY2UpIC8gMTAwLjApLnRvRml4ZWQoMikgKyBjdXJyZW5jeVN5bWJvbDsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnROYW1lID0gKGN1cnJlbnRQYWdlID09IFBBR0VfVFJBREVPRkZFUiA/ICcjaXRlbScgOiAnIycpICsKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5hcHBpZCArCiAgICAgICAgICAgICAgICAgICAgICAgICdfJyArCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uY29udGV4dGlkICsKICAgICAgICAgICAgICAgICAgICAgICAgJ18nICsKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5pZDsKICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9ICQoZWxlbWVudE5hbWUpOwoKICAgICAgICAgICAgICAgICAgICAkKCcuaW52ZW50b3J5X2l0ZW1fcHJpY2UnLCBlbGVtZW50KS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZCgnPHNwYW4gY2xhc3M9ImludmVudG9yeV9pdGVtX3ByaWNlIHByaWNlXycgKyAoc2VsbFByaWNlID09IDY1NTM1ID8gMCA6IG1hcmtldC5nZXRQcmljZUluY2x1ZGluZ0ZlZXMoc2VsbFByaWNlKSkgKyAnIj4nICsgaXRlbVByaWNlICsgJzwvc3Bhbj4nKTsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHRydWUsIGNhY2hlZExpc3RpbmdzKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0KICAgIC8vI2VuZHJlZ2lvbgoKICAgIC8vI3JlZ2lvbiBNYXJrZXQKICAgIGlmIChjdXJyZW50UGFnZSA9PSBQQUdFX01BUktFVCB8fCBjdXJyZW50UGFnZSA9PSBQQUdFX01BUktFVF9MSVNUSU5HKSB7CiAgICAgICAgdmFyIG1hcmtldExpc3RpbmdzUmVsaXN0ZWRBc3NldHMgPSBbXTsKCiAgICAgICAgdmFyIG1hcmtldExpc3RpbmdzUXVldWUgPSBhc3luYy5xdWV1ZShmdW5jdGlvbihsaXN0aW5nLCBuZXh0KSB7CiAgICAgICAgICAgIG1hcmtldExpc3RpbmdzUXVldWVXb3JrZXIobGlzdGluZywKICAgICAgICAgICAgICAgIGZhbHNlLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oc3VjY2VzcywgY2FjaGVkKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVkID8gMCA6IGdldFJhbmRvbUludCgxMDAwLCAxNTAwKSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXRMaXN0aW5nc1F1ZXVlV29ya2VyKGxpc3RpbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHN1Y2Nlc3MsIGNhY2hlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCgpOyAvLyBHbyB0byB0aGUgbmV4dCBxdWV1ZSBpdGVtLCByZWdhcmRsZXNzIG9mIHN1Y2Nlc3MuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlZCA/IDAgOiBnZXRSYW5kb21JbnQoMzAwMDAsIDQ1MDAwKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSwgMSk7CgogICAgICAgIG1hcmtldExpc3RpbmdzUXVldWUuZHJhaW4gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgaW5qZWN0SnMoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBnX2JNYXJrZXRXaW5kb3dIaWRkZW4gPSBmYWxzZTsKICAgICAgICAgICAgfSkKICAgICAgICB9OwoKICAgICAgICAvLyBHZXRzIHRoZSBwcmljZSwgaW4gY2VudHMsIGZyb20gYSBtYXJrZXQgbGlzdGluZy4KICAgICAgICBmdW5jdGlvbiBnZXRQcmljZUZyb21NYXJrZXRMaXN0aW5nKGxpc3RpbmcpIHsKICAgICAgICAgICAgdmFyIHByaWNlTGFiZWwgPSBsaXN0aW5nLnRyaW0oKS5yZXBsYWNlKCctLScsICcwMCcpOwoKICAgICAgICAgICAgLy8gRml4ZXMgUlVCLCB3aGljaCBoYXMgYSBkb3QgYXQgdGhlIGVuZC4KICAgICAgICAgICAgaWYgKHByaWNlTGFiZWxbcHJpY2VMYWJlbC5sZW5ndGggLSAxXSA9PT0gJy4nIHx8IHByaWNlTGFiZWxbcHJpY2VMYWJlbC5sZW5ndGggLSAxXSA9PT0gIiwiKQogICAgICAgICAgICAgICAgcHJpY2VMYWJlbCA9IHByaWNlTGFiZWwuc2xpY2UoMCwgLTEpOwoKICAgICAgICAgICAgLy8gRm9yIHJvdW5kIG51bWJlcnMgKGUuZy4sIDEwMCBFVVIpLgogICAgICAgICAgICBpZiAocHJpY2VMYWJlbC5pbmRleE9mKCcuJykgPT09IC0xICYmIHByaWNlTGFiZWwuaW5kZXhPZignLCcpID09PSAtMSkgewogICAgICAgICAgICAgICAgcHJpY2VMYWJlbCA9IHByaWNlTGFiZWwgKyAnLDAwJzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHJlcGxhY2VOb25OdW1iZXJzKHByaWNlTGFiZWwpKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIG1hcmtldExpc3RpbmdzUXVldWVXb3JrZXIobGlzdGluZywgaWdub3JlRXJyb3JzLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgYXNzZXQgPSB1bnNhZmVXaW5kb3cuZ19yZ0Fzc2V0c1tsaXN0aW5nLmFwcGlkXVtsaXN0aW5nLmNvbnRleHRpZF1bbGlzdGluZy5hc3NldGlkXTsKCiAgICAgICAgICAgIC8vIEFuIGFzc2V0OgogICAgICAgICAgICAvL3sKICAgICAgICAgICAgLy8gImN1cnJlbmN5IiA6IDAsCiAgICAgICAgICAgIC8vICJhcHBpZCIgOiA3NTMsCiAgICAgICAgICAgIC8vICJjb250ZXh0aWQiIDogIjYiLAogICAgICAgICAgICAvLyAiaWQiIDogIjQzNjMwNzk2NjQiLAogICAgICAgICAgICAvLyAiY2xhc3NpZCIgOiAiMjIyODUyNjA2MSIsCiAgICAgICAgICAgIC8vICJpbnN0YW5jZWlkIiA6ICIwIiwKICAgICAgICAgICAgLy8gImFtb3VudCIgOiAiMSIsCiAgICAgICAgICAgIC8vICJzdGF0dXMiIDogMiwKICAgICAgICAgICAgLy8gIm9yaWdpbmFsX2Ftb3VudCIgOiAiMSIsCiAgICAgICAgICAgIC8vICJiYWNrZ3JvdW5kX2NvbG9yIiA6ICIiLAogICAgICAgICAgICAvLyAiaWNvbl91cmwiIDogInh4IiwKICAgICAgICAgICAgLy8gImljb25fdXJsX2xhcmdlIiA6ICJ4eHgiLAogICAgICAgICAgICAvLyAiZGVzY3JpcHRpb25zIiA6IFt7CiAgICAgICAgICAgIC8vICAgInZhbHVlIiA6ICJUaGVpciBkZW5zZSwgc2hhZ2d5IGZ1ciBjb25jZWFscyB0aGUgcHJlc2VuY2Ugb2Ygc3dhbXMgb2YgbW9vZ2FtaXRlcywgcHVycGxlIHNjYWx5IHNraW4sIGFuZCBtb3JlIG5pcHBsZXMgdGhhbiBvbmUgd291bGQgZXhwZWN0LiIKICAgICAgICAgICAgLy8gIH0KICAgICAgICAgICAgLy8gXSwKICAgICAgICAgICAgLy8gInRyYWRhYmxlIiA6IDEsCiAgICAgICAgICAgIC8vICJvd25lcl9hY3Rpb25zIiA6IFt7CiAgICAgICAgICAgIC8vICAgImxpbmsiIDogImh0dHA6Ly9zdGVhbWNvbW11bml0eS5jb20vbXkvZ2FtZWNhcmRzLzQ0Mzg4MC8iLAogICAgICAgICAgICAvLyAgICJuYW1lIiA6ICJWaWV3IGJhZGdlIHByb2dyZXNzIgogICAgICAgICAgICAvLyAgfSwgewogICAgICAgICAgICAvLyAgICJsaW5rIiA6ICJqYXZhc2NyaXB0OkdldEdvb1ZhbHVlKCAnJWNvbnRleHRpZCUnLCAnJWFzc2V0aWQlJywgNDQzODgwLCA3LCAwICkiLAogICAgICAgICAgICAvLyAgICJuYW1lIiA6ICJUdXJuIGludG8gR2Vtcy4uLiIKICAgICAgICAgICAgLy8gIH0KICAgICAgICAgICAgLy8gXSwKICAgICAgICAgICAgLy8gIm5hbWUiIDogIldvb2siLAogICAgICAgICAgICAvLyAidHlwZSIgOiAiTG9vdCBSYXNjYWxzIFRyYWRpbmcgQ2FyZCIsCiAgICAgICAgICAgIC8vICJtYXJrZXRfbmFtZSIgOiAiV29vayIsCiAgICAgICAgICAgIC8vICJtYXJrZXRfaGFzaF9uYW1lIiA6ICI0NDM4ODAtV29vayIsCiAgICAgICAgICAgIC8vICJtYXJrZXRfZmVlX2FwcCIgOiA0NDM4ODAsCiAgICAgICAgICAgIC8vICJjb21tb2RpdHkiIDogMSwKICAgICAgICAgICAgLy8gIm1hcmtldF90cmFkYWJsZV9yZXN0cmljdGlvbiIgOiA3LAogICAgICAgICAgICAvLyAibWFya2V0X21hcmtldGFibGVfcmVzdHJpY3Rpb24iIDogNywKICAgICAgICAgICAgLy8gIm1hcmtldGFibGUiIDogMSwKICAgICAgICAgICAgLy8gImFwcF9pY29uIiA6ICJ4eHh4IiwKICAgICAgICAgICAgLy8gIm93bmVyIiA6IDAKICAgICAgICAgICAgLy99CgogICAgICAgICAgICB2YXIgbWFya2V0X2hhc2hfbmFtZSA9IGdldE1hcmtldEhhc2hOYW1lKGFzc2V0KTsKICAgICAgICAgICAgdmFyIGFwcGlkID0gbGlzdGluZy5hcHBpZDsKCiAgICAgICAgICAgIHZhciBsaXN0aW5nVUkgPSAkKGdldExpc3RpbmdGcm9tTGlzdHMobGlzdGluZy5saXN0aW5naWQpLmVsbSk7CgogICAgICAgICAgICB2YXIgZ2FtZV9uYW1lID0gYXNzZXQudHlwZTsKICAgICAgICAgICAgdmFyIHByaWNlID0gZ2V0UHJpY2VGcm9tTWFya2V0TGlzdGluZygkKCcubWFya2V0X2xpc3RpbmdfcHJpY2UgPiBzcGFuOm50aC1jaGlsZCgxKSA+IHNwYW46bnRoLWNoaWxkKDEpJywgbGlzdGluZ1VJKS50ZXh0KCkpOwoKICAgICAgICAgICAgaWYgKHByaWNlIDw9IGdldFNldHRpbmdXaXRoRGVmYXVsdChTRVRUSU5HX1BSSUNFX01JTl9DSEVDS19QUklDRSkgKiAxMDApIHsKICAgICAgICAgICAgICAgICQoJy5tYXJrZXRfbGlzdGluZ19teV9wcmljZScsIGxpc3RpbmdVSSkubGFzdCgpLmNzcygnYmFja2dyb3VuZCcsIENPTE9SX1BSSUNFX05PVF9DSEVDS0VEKTsKICAgICAgICAgICAgICAgICQoJy5tYXJrZXRfbGlzdGluZ19teV9wcmljZScsIGxpc3RpbmdVSSkubGFzdCgpLnByb3AoJ3RpdGxlJywgJ1RoZSBwcmljZSBpcyBub3QgY2hlY2tlZC4nKTsKICAgICAgICAgICAgICAgIGxpc3RpbmdVSS5hZGRDbGFzcygnbm90X2NoZWNrZWQnKTsKICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh0cnVlLCB0cnVlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHByaWNlSW5mbyA9IGdldFByaWNlSW5mb3JtYXRpb25Gcm9tSXRlbShhc3NldCk7CiAgICAgICAgICAgIHZhciBpdGVtID0gewogICAgICAgICAgICAgICAgYXBwaWQ6IHBhcnNlSW50KGFwcGlkKSwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB7CiAgICAgICAgICAgICAgICAgICAgbWFya2V0X2hhc2hfbmFtZTogbWFya2V0X2hhc2hfbmFtZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIGZhaWxlZCA9IDA7CgogICAgICAgICAgICBtYXJrZXQuZ2V0UHJpY2VIaXN0b3J5KGl0ZW0sCiAgICAgICAgICAgICAgICB0cnVlLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyb3JQcmljZUhpc3RvcnksIGhpc3RvcnksIGNhY2hlZEhpc3RvcnkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3JQcmljZUhpc3RvcnkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nQ29uc29sZSgnRmFpbGVkIHRvIGdldCBwcmljZSBoaXN0b3J5IGZvciAnICsgZ2FtZV9uYW1lKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvclByaWNlSGlzdG9yeSA9PSBFUlJPUl9GQUlMRUQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWQgKz0gMTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIG1hcmtldC5nZXRJdGVtT3JkZXJzSGlzdG9ncmFtKGl0ZW0sCiAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVycm9ySGlzdG9ncmFtLCBoaXN0b2dyYW0sIGNhY2hlZExpc3RpbmdzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3JIaXN0b2dyYW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dDb25zb2xlKCdGYWlsZWQgdG8gZ2V0IG9yZGVycyBoaXN0b2dyYW0gZm9yICcgKyBnYW1lX25hbWUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3JIaXN0b2dyYW0gPT0gRVJST1JfRkFJTEVEKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWQgKz0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmFpbGVkID4gMCAmJiAhaWdub3JlRXJyb3JzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGZhbHNlLCBjYWNoZWRIaXN0b3J5ICYmIGNhY2hlZExpc3RpbmdzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaG93cyB0aGUgaGlnaGVzdCBidXkgb3JkZXIgcHJpY2Ugb24gdGhlIG1hcmtldCBsaXN0aW5ncy4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSAnaGlzdG9ncmFtLmhpZ2hlc3RfYnV5X29yZGVyJyBpcyBub3QgcmVsaWFibGUgYXMgU3RlYW0gaXMgY2FjaGluZyB0aGlzIHZhbHVlLCBidXQgaXQgZ2l2ZXMgc29tZSBpZGVhIGZvciBvbGRlciB0aXRsZXMvbGlzdGluZ3MuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGlnaGVzdEJ1eU9yZGVyUHJpY2UgPSAoaGlzdG9ncmFtID09IG51bGwgfHwgaGlzdG9ncmFtLmhpZ2hlc3RfYnV5X29yZGVyID09IG51bGwgPwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICctJyA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChoaXN0b2dyYW0uaGlnaGVzdF9idXlfb3JkZXIgLyAxMDApICsgY3VycmVuY3lTeW1ib2wpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5tYXJrZXRfdGFibGVfdmFsdWUgPiBzcGFuOm50aC1jaGlsZCgxKSA+IHNwYW46bnRoLWNoaWxkKDEpID4gc3BhbjpudGgtY2hpbGQoMSknLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RpbmdVSSkuYXBwZW5kKCcg4p6kIDxzcGFuIHRpdGxlPSJUaGlzIGlzIGxpa2VseSB0aGUgaGlnaGVzdCBidXkgb3JkZXIgcHJpY2UuIj4nICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdoZXN0QnV5T3JkZXJQcmljZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dDb25zb2xlKCc9PT09PT09PT09PT09PT09PT09PT09PT09PT09JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0NvbnNvbGUoSlNPTi5zdHJpbmdpZnkobGlzdGluZykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nQ29uc29sZShnYW1lX25hbWUgKyAnOiAnICsgYXNzZXQubmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dDb25zb2xlKCdDdXJyZW50IHByaWNlOiAnICsgcHJpY2UgLyAxMDAuMCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHR3byBwcmljZXMgaGVyZSwgb25lIHdpdGhvdXQgdGhlIG9mZnNldCBhbmQgb25lIHdpdGggdGhlIG9mZnNldC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBwcmljZSB3aXRob3V0IHRoZSBvZmZzZXQgaXMgcmVxdWlyZWQgdG8gbm90IHJlbGlzdCB0aGUgaXRlbSBjb25zdGFudGx5IHdoZW4geW91IGhhdmUgdGhlIGxvd2VzdCBwcmljZSAoaS5lLiwgd2l0aCBhIG5lZ2F0aXZlIG9mZnNldCkuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgcHJpY2Ugd2l0aCB0aGUgb2Zmc2V0IHNob3VsZCBiZSB1c2VkIGZvciByZWxpc3Rpbmcgc28gaXQgd2lsbCBzdGlsbCBhcHBseSB0aGUgdXNlci1zZXQgb2Zmc2V0LgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxsUHJpY2VXaXRob3V0T2Zmc2V0ID0gY2FsY3VsYXRlU2VsbFByaWNlQmVmb3JlRmVlcyhoaXN0b3J5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvZ3JhbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZUluZm8ubWluUHJpY2VCZWZvcmVGZWVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlSW5mby5tYXhQcmljZUJlZm9yZUZlZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGxQcmljZVdpdGhPZmZzZXQgPSBjYWxjdWxhdGVTZWxsUHJpY2VCZWZvcmVGZWVzKGhpc3RvcnksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9ncmFtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2VJbmZvLm1pblByaWNlQmVmb3JlRmVlcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZUluZm8ubWF4UHJpY2VCZWZvcmVGZWVzKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VsbFByaWNlV2l0aG91dE9mZnNldFdpdGhGZWVzID0gbWFya2V0LmdldFByaWNlSW5jbHVkaW5nRmVlcyhzZWxsUHJpY2VXaXRob3V0T2Zmc2V0KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dDb25zb2xlKCdDYWxjdWxhdGVkIHByaWNlOiAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxsUHJpY2VXaXRob3V0T2Zmc2V0V2l0aEZlZXMgLyAxMDAuMCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyAoJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsbFByaWNlV2l0aG91dE9mZnNldCAvIDEwMC4wICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnKScpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RpbmdVSS5hZGRDbGFzcygncHJpY2VfJyArIHNlbGxQcmljZVdpdGhPZmZzZXQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5tYXJrZXRfbGlzdGluZ19teV9wcmljZScsIGxpc3RpbmdVSSkubGFzdCgpLnByb3AoJ3RpdGxlJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVGhlIGJlc3QgcHJpY2UgaXMgJyArIChzZWxsUHJpY2VXaXRob3V0T2Zmc2V0V2l0aEZlZXMgLyAxMDAuMCkgKyBjdXJyZW5jeVN5bWJvbCArICcuJyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGxQcmljZVdpdGhvdXRPZmZzZXRXaXRoRmVlcyA8IHByaWNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nQ29uc29sZSgnU2VsbCBwcmljZSBpcyB0b28gaGlnaC4nKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm1hcmtldF9saXN0aW5nX215X3ByaWNlJywgbGlzdGluZ1VJKS5sYXN0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNzcygnYmFja2dyb3VuZCcsIENPTE9SX1BSSUNFX0VYUEVOU0lWRSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGluZ1VJLmFkZENsYXNzKCdvdmVycHJpY2VkJyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZXRTZXR0aW5nV2l0aERlZmF1bHQoU0VUVElOR19SRUxJU1RfQVVUT01BVElDQUxMWSkgPT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZU92ZXJwcmljZWRJdGVtTGlzdGluZyhsaXN0aW5nLmxpc3RpbmdpZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxsUHJpY2VXaXRob3V0T2Zmc2V0V2l0aEZlZXMgPiBwcmljZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0NvbnNvbGUoJ1NlbGwgcHJpY2UgaXMgdG9vIGxvdy4nKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm1hcmtldF9saXN0aW5nX215X3ByaWNlJywgbGlzdGluZ1VJKS5sYXN0KCkuY3NzKCdiYWNrZ3JvdW5kJywgQ09MT1JfUFJJQ0VfQ0hFQVApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RpbmdVSS5hZGRDbGFzcygndW5kZXJwcmljZWQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nQ29uc29sZSgnU2VsbCBwcmljZSBpcyBmYWlyLicpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcubWFya2V0X2xpc3RpbmdfbXlfcHJpY2UnLCBsaXN0aW5nVUkpLmxhc3QoKS5jc3MoJ2JhY2tncm91bmQnLCBDT0xPUl9QUklDRV9GQUlSKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0aW5nVUkuYWRkQ2xhc3MoJ2ZhaXInKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sodHJ1ZSwgY2FjaGVkSGlzdG9yeSAmJiBjYWNoZWRMaXN0aW5ncyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgbWFya2V0T3ZlcnByaWNlZFF1ZXVlID0gYXN5bmMucXVldWUoZnVuY3Rpb24oaXRlbSwgbmV4dCkgewogICAgICAgICAgICAgICAgbWFya2V0T3ZlcnByaWNlZFF1ZXVlV29ya2VyKGl0ZW0sCiAgICAgICAgICAgICAgICAgICAgZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UmFuZG9tSW50KDEwMDAsIDE1MDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldE92ZXJwcmljZWRRdWV1ZVdvcmtlcihpdGVtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0KCk7IC8vIEdvIHRvIHRoZSBuZXh0IHF1ZXVlIGl0ZW0sIHJlZ2FyZGxlc3Mgb2Ygc3VjY2Vzcy4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UmFuZG9tSW50KDMwMDAwLCA0NTAwMCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIDEpOwoKICAgICAgICBmdW5jdGlvbiBtYXJrZXRPdmVycHJpY2VkUXVldWVXb3JrZXIoaXRlbSwgaWdub3JlRXJyb3JzLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgbGlzdGluZ1VJID0gZ2V0TGlzdGluZ0Zyb21MaXN0cyhpdGVtLmxpc3RpbmcpLmVsbTsKCiAgICAgICAgICAgIG1hcmtldC5yZW1vdmVMaXN0aW5nKGl0ZW0ubGlzdGluZywKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVycm9yUmVtb3ZlLCBkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFlcnJvclJlbW92ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAkKCcuYWN0dWFsX2NvbnRlbnQnLCBsaXN0aW5nVUkpLmNzcygnYmFja2dyb3VuZCcsIENPTE9SX1BFTkRJTkcpOwoKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYXNlVXJsID0gJCgnLmhlYWRlcl9ub3RpZmljYXRpb25faXRlbXMnKS5maXJzdCgpLmF0dHIoJ2hyZWYnKSArICdqc29uLyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbU5hbWUgPSAkKCcubWFya2V0X2xpc3RpbmdfaXRlbV9uYW1lX2xpbmsnLCBsaXN0aW5nVUkpLmZpcnN0KCkuYXR0cignaHJlZicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtldEhhc2hOYW1lSW5kZXggPSBpdGVtTmFtZS5sYXN0SW5kZXhPZignLycpICsgMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXRIYXNoTmFtZSA9IGl0ZW1OYW1lLnN1YnN0cmluZyhtYXJrZXRIYXNoTmFtZUluZGV4KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWNvZGVkTWFya2V0SGFzaE5hbWUgPSBkZWNvZGVVUklDb21wb25lbnQoaXRlbU5hbWUuc3Vic3RyaW5nKG1hcmtldEhhc2hOYW1lSW5kZXgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdBc3NldElkID0gLTE7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zYWZlV2luZG93LlJlcXVlc3RGdWxsSW52ZW50b3J5KGJhc2VVcmwgKyBpdGVtLmFwcGlkICsgIi8iICsgaXRlbS5jb250ZXh0aWQgKyAiLyIsIHt9LCBudWxsLCBudWxsLCBmdW5jdGlvbih0cmFuc3BvcnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNwb3J0LnJlc3BvbnNlSlNPTiAmJiB0cmFuc3BvcnQucmVzcG9uc2VKU09OLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGludmVudG9yeSA9IHRyYW5zcG9ydC5yZXNwb25zZUpTT04ucmdJbnZlbnRvcnk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjaGlsZCBpbiBpbnZlbnRvcnkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXJrZXRMaXN0aW5nc1JlbGlzdGVkQXNzZXRzLmluZGV4T2YoY2hpbGQpID09IC0xICYmIGludmVudG9yeVtjaGlsZF0uYXBwaWQgPT0gaXRlbS5hcHBpZCAmJiAoaW52ZW50b3J5W2NoaWxkXS5tYXJrZXRfaGFzaF9uYW1lID09IGRlY29kZWRNYXJrZXRIYXNoTmFtZSB8fCBpbnZlbnRvcnlbY2hpbGRdLm1hcmtldF9oYXNoX25hbWUgPT0gbWFya2V0SGFzaE5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXNzZXRJZCA9IGNoaWxkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3QXNzZXRJZCA9PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFjdHVhbF9jb250ZW50JywgbGlzdGluZ1VJKS5jc3MoJ2JhY2tncm91bmQnLCBDT0xPUl9FUlJPUik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmFzc2V0aWQgPSBuZXdBc3NldElkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXRMaXN0aW5nc1JlbGlzdGVkQXNzZXRzLnB1c2gobmV3QXNzZXRJZCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXQuc2VsbEl0ZW0oaXRlbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc2VsbFByaWNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyb3JTZWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlcnJvclNlbGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFjdHVhbF9jb250ZW50JywgbGlzdGluZ1VJKS5jc3MoJ2JhY2tncm91bmQnLCBDT0xPUl9TVUNDRVNTKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVMaXN0aW5nRnJvbUxpc3RzKGl0ZW0ubGlzdGluZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwMCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sodHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFjdHVhbF9jb250ZW50JywgbGlzdGluZ1VJKS5jc3MoJ2JhY2tncm91bmQnLCBDT0xPUl9FUlJPUik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5hY3R1YWxfY29udGVudCcsIGxpc3RpbmdVSSkuY3NzKCdiYWNrZ3JvdW5kJywgQ09MT1JfRVJST1IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9LCBnZXRSYW5kb21JbnQoMTUwMCwgMjUwMCkpOyAvLyBXYWl0IGEgbGl0dGxlIHRvIG1ha2Ugc3VyZSB0aGUgaXRlbSBpcyByZXR1cm5lZCB0byBpbnZlbnRvcnkuCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFjdHVhbF9jb250ZW50JywgbGlzdGluZ1VJKS5jc3MoJ2JhY2tncm91bmQnLCBDT0xPUl9FUlJPUik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvLyBRdWV1ZSBhbiBvdmVycHJpY2VkIGl0ZW0gbGlzdGluZyB0byBiZSByZWxpc3RlZC4KICAgICAgICBmdW5jdGlvbiBxdWV1ZU92ZXJwcmljZWRJdGVtTGlzdGluZyhsaXN0aW5naWQpIHsKICAgICAgICAgICAgdmFyIGFzc2V0SW5mbyA9IGdldEFzc2V0SW5mb0Zyb21MaXN0aW5nSWQobGlzdGluZ2lkKTsKICAgICAgICAgICAgdmFyIGxpc3RpbmdVSSA9ICQoZ2V0TGlzdGluZ0Zyb21MaXN0cyhsaXN0aW5naWQpLmVsbSk7CiAgICAgICAgICAgIHZhciBwcmljZSA9IC0xOwoKICAgICAgICAgICAgdmFyIGl0ZW1zID0gJChsaXN0aW5nVUkpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKTsKICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBpdGVtcykgewogICAgICAgICAgICAgICAgaWYgKGl0ZW1zW2ldLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ3ByaWNlXycpKQogICAgICAgICAgICAgICAgICAgIHByaWNlID0gcGFyc2VJbnQoaXRlbXNbaV0udG9TdHJpbmcoKS5yZXBsYWNlKCdwcmljZV8nLCAnJykpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAocHJpY2UgPiAwKSB7CiAgICAgICAgICAgICAgICBtYXJrZXRPdmVycHJpY2VkUXVldWUucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgbGlzdGluZzogbGlzdGluZ2lkLAogICAgICAgICAgICAgICAgICAgIGFzc2V0aWQ6IGFzc2V0SW5mby5hc3NldGlkLAogICAgICAgICAgICAgICAgICAgIGNvbnRleHRpZDogYXNzZXRJbmZvLmNvbnRleHRpZCwKICAgICAgICAgICAgICAgICAgICBhcHBpZDogYXNzZXRJbmZvLmFwcGlkLAogICAgICAgICAgICAgICAgICAgIHNlbGxQcmljZTogcHJpY2UKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgbWFya2V0UmVtb3ZlUXVldWUgPSBhc3luYy5xdWV1ZShmdW5jdGlvbihsaXN0aW5naWQsIG5leHQpIHsKICAgICAgICAgICAgICAgIG1hcmtldFJlbW92ZVF1ZXVlV29ya2VyKGxpc3RpbmdpZCwKICAgICAgICAgICAgICAgICAgICBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihzdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRSYW5kb21JbnQoNTAsIDEwMCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2V0UmVtb3ZlUXVldWVXb3JrZXIobGlzdGluZ2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0KCk7IC8vIEdvIHRvIHRoZSBuZXh0IHF1ZXVlIGl0ZW0sIHJlZ2FyZGxlc3Mgb2Ygc3VjY2Vzcy4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UmFuZG9tSW50KDMwMDAwLCA0NTAwMCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIDEwKTsKCiAgICAgICAgZnVuY3Rpb24gbWFya2V0UmVtb3ZlUXVldWVXb3JrZXIobGlzdGluZ2lkLCBpZ25vcmVFcnJvcnMsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciBsaXN0aW5nVUkgPSBnZXRMaXN0aW5nRnJvbUxpc3RzKGxpc3RpbmdpZCkuZWxtOwoKICAgICAgICAgICAgbWFya2V0LnJlbW92ZUxpc3RpbmcobGlzdGluZ2lkLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyb3JSZW1vdmUsIGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWVycm9yUmVtb3ZlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5hY3R1YWxfY29udGVudCcsIGxpc3RpbmdVSSkuY3NzKCdiYWNrZ3JvdW5kJywgQ09MT1JfU1VDQ0VTUyk7CgogICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUxpc3RpbmdGcm9tTGlzdHMobGlzdGluZ2lkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG51bWJlck9mTGlzdGluZ3MgPSBtYXJrZXRMaXN0c1swXS5zaXplOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW1iZXJPZkxpc3RpbmdzID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjbXlfbWFya2V0X3NlbGxsaXN0aW5nc19udW1iZXInKS50ZXh0KChudW1iZXJPZkxpc3RpbmdzKS50b1N0cmluZygpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgc2VlbXMgaWRlbnRpY2FsIHRvIHRoZSBudW1iZXIgb2Ygc2VsbCBsaXN0aW5ncy4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI215X21hcmtldF9hY3RpdmVsaXN0aW5nc19udW1iZXInKS50ZXh0KChudW1iZXJPZkxpc3RpbmdzKS50b1N0cmluZygpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMzAwMCk7CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sodHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFjdHVhbF9jb250ZW50JywgbGlzdGluZ1VJKS5jc3MoJ2JhY2tncm91bmQnLCBDT0xPUl9FUlJPUik7CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdmFyIG1hcmtldExpc3RpbmdzSXRlbXNRdWV1ZSA9IGFzeW5jLnF1ZXVlKGZ1bmN0aW9uKGxpc3RpbmcsIG5leHQpIHsKICAgICAgICAgICAgICAgICQuZ2V0KHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArICcvL3N0ZWFtY29tbXVuaXR5LmNvbS9tYXJrZXQvbXlsaXN0aW5ncz9jb3VudD0xMDAmc3RhcnQ9JyArIGxpc3RpbmcsCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSB8fCAhZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXlNYXJrZXRMaXN0aW5ncyA9ICQoJyN0YWJDb250ZW50c015QWN0aXZlTWFya2V0TGlzdGluZ3NSb3dzJyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVzID0gJC5wYXJzZUhUTUwoZGF0YS5yZXN1bHRzX2h0bWwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJvd3MgPSAkKCcubWFya2V0X2xpc3Rpbmdfcm93Jywgbm9kZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbXlNYXJrZXRMaXN0aW5ncy5hcHBlbmQocm93cyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ19yZ0Fzc2V0cwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zYWZlV2luZG93Lk1lcmdlV2l0aEFzc2V0QXJyYXkoZGF0YS5hc3NldHMpOyAvLyBUaGlzIGlzIGEgbWV0aG9kIGZyb20gU3RlYW0uCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAnanNvbicpCiAgICAgICAgICAgICAgICAgICAgLmZhaWwoZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgMSk7CgogICAgICAgIG1hcmtldExpc3RpbmdzSXRlbXNRdWV1ZS5kcmFpbiA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgbXlNYXJrZXRMaXN0aW5ncyA9ICQoJyN0YWJDb250ZW50c015QWN0aXZlTWFya2V0TGlzdGluZ3NSb3dzJyk7CiAgICAgICAgICAgIG15TWFya2V0TGlzdGluZ3MuY2hlY2tib3hlcygncmFuZ2UnLCB0cnVlKTsKCiAgICAgICAgICAgIC8vIFNvbWV0aW1lcyB0aGUgU3RlYW0gQVBJIGlzIHJldHVybmluZyBkdXBsaWNhdGUgZW50cmllcyAoZXNwZWNpYWxseSBkdXJpbmcgaXRlbSBsaXN0aW5nKSwgZmlsdGVyIHRoZXNlLgogICAgICAgICAgICB2YXIgc2VlbiA9IHt9OwogICAgICAgICAgICAkKCcubWFya2V0X2xpc3Rpbmdfcm93JywgbXlNYXJrZXRMaXN0aW5ncykuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBpdGVtX2lkID0gJCh0aGlzKS5hdHRyKCdpZCcpOwogICAgICAgICAgICAgICAgaWYgKHNlZW5baXRlbV9pZF0pCiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBzZWVuW2l0ZW1faWRdID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgbGlzdGluZ3MgYXdhaXRpbmcgY29uZmlybWF0aW9ucywgdGhleSBhcmUgYWxyZWFkeSBsaXN0ZWQgc2VwYXJhdGVseS4KICAgICAgICAgICAgICAgIGlmICgkKCcuaXRlbV9tYXJrZXRfYWN0aW9uX2J1dHRvbicsIHRoaXMpLmF0dHIoJ2hyZWYnKS50b0xvd2VyQ2FzZSgpCiAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKCdDYW5jZWxNYXJrZXRMaXN0aW5nQ29uZmlybWF0aW9uJy50b0xvd2VyQ2FzZSgpKSkKICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpOwoKICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBidXkgb3JkZXIgbGlzdGluZ3MsIHRoZXkgYXJlIGFscmVhZHkgbGlzdGVkIHNlcGFyYXRlbHkuCiAgICAgICAgICAgICAgICBpZiAoJCgnLml0ZW1fbWFya2V0X2FjdGlvbl9idXR0b24nLCB0aGlzKS5hdHRyKCdocmVmJykudG9Mb3dlckNhc2UoKQogICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcygnQ2FuY2VsTWFya2V0QnV5T3JkZXInLnRvTG93ZXJDYXNlKCkpKQogICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gTm93IGFkZCB0aGUgbWFya2V0IGNoZWNrYm94ZXMuCiAgICAgICAgICAgIGFkZE1hcmtldENoZWNrYm94ZXMoKTsKCiAgICAgICAgICAgIC8vIFNob3cgdGhlIGxpc3RpbmdzIGFnYWluLCByZW5kZXJpbmcgaXMgZG9uZS4KICAgICAgICAgICAgJCgnI21hcmtldF9saXN0aW5nc19zcGlubmVyJykucmVtb3ZlKCk7CiAgICAgICAgICAgIG15TWFya2V0TGlzdGluZ3Muc2hvdygpOwoKICAgICAgICAgICAgZmlsbE1hcmtldExpc3RpbmdzUXVldWUoKTsKCiAgICAgICAgICAgIGluamVjdEpzKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgZ19iTWFya2V0V2luZG93SGlkZGVuID0KICAgICAgICAgICAgICAgICAgICB0cnVlOyAvLyBMaW1pdHMgdGhlIG51bWJlciBvZiByZXF1ZXN0cyBtYWRlIHRvIHN0ZWFtIGJ5IHN0b3BwaW5nIGNvbnN0YW50IHBvbGxpbmcgb2YgcG9wdWxhciBsaXN0aW5ncy4KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCgogICAgICAgIGZ1bmN0aW9uIGZpbGxNYXJrZXRMaXN0aW5nc1F1ZXVlKCkgewogICAgICAgICAgICAkKCcubWFya2V0X2hvbWVfbGlzdGluZ190YWJsZScpLmVhY2goZnVuY3Rpb24oZSkgewoKICAgICAgICAgICAgICAgIC8vIE5vdCBmb3IgcG9wdWxhciAvIG5ldyAvIHJlY2VudGx5IHNvbGQgaXRlbXMgKGJvdHRvbSBvZiBwYWdlKS4KICAgICAgICAgICAgICAgIGlmICgkKCcubXlfbWFya2V0X2hlYWRlcicsICQodGhpcykpLmxlbmd0aCA9PSAwKQogICAgICAgICAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgICAgICAgICAvLyBCdXkgb3JkZXJzIGFuZCBsaXN0aW5ncyBjb25maXJtYXRpb25zIGFyZSBub3QgZ3JvdXBlZCBsaWtlIHRoZSBzZWxsIGxpc3RpbmdzLCBhZGQgdGhpcyBzbyBwYWdpbmF0aW9uIHdvcmtzIHRoZXJlIGFzIHdlbGwuCiAgICAgICAgICAgICAgICBpZiAoISQodGhpcykuYXR0cignaWQnKSkgewogICAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignaWQnLCAnbWFya2V0LWxpc3RpbmctJyArIGUpOwoKICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFwcGVuZCgnPGRpdiBjbGFzcz0ibWFya2V0X2xpc3Rpbmdfc2VlIiBpZD0ibWFya2V0LWxpc3RpbmctY29udGFpbmVyLScgKyBlICsgJyI+PC9kaXY+JykKICAgICAgICAgICAgICAgICAgICAkKCcubWFya2V0X2xpc3Rpbmdfcm93JywgJCh0aGlzKSkuYXBwZW5kVG8oJCgnI21hcmtldC1saXN0aW5nLWNvbnRhaW5lci0nICsgZSkpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCkubGFzdCgpLmFkZENsYXNzKCJtYXJrZXRfbGlzdGluZ19zZWUiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBhZGRNYXJrZXRQYWdpbmF0aW9uKCQoJy5tYXJrZXRfbGlzdGluZ19zZWUnLCB0aGlzKS5sYXN0KCkpOwogICAgICAgICAgICAgICAgc29ydE1hcmtldExpc3RpbmdzKCQodGhpcyksIGZhbHNlLCBmYWxzZSwgdHJ1ZSk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgdmFyIHRvdGFsUHJpY2VCdXllciA9IDA7CiAgICAgICAgICAgIHZhciB0b3RhbFByaWNlU2VsbGVyID0gMDsKICAgICAgICAgICAgLy8gQWRkIHRoZSBsaXN0aW5ncyB0byB0aGUgcXVldWUgdG8gYmUgY2hlY2tlZCBmb3IgdGhlIHByaWNlLgogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtldExpc3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1hcmtldExpc3RzW2ldLml0ZW1zLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RpbmdpZCA9IHJlcGxhY2VOb25OdW1iZXJzKG1hcmtldExpc3RzW2ldLml0ZW1zW2pdLnZhbHVlcygpLm1hcmtldF9saXN0aW5nX2l0ZW1fbmFtZSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFzc2V0SW5mbyA9IGdldEFzc2V0SW5mb0Zyb21MaXN0aW5nSWQobGlzdGluZ2lkKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihhc3NldEluZm8ucHJpY2VCdXllcikpCiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsUHJpY2VCdXllciArPSBhc3NldEluZm8ucHJpY2VCdXllcjsKICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKGFzc2V0SW5mby5wcmljZVNlbGxlcikpCiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsUHJpY2VTZWxsZXIgKz0gYXNzZXRJbmZvLnByaWNlU2VsbGVyOwoKICAgICAgICAgICAgICAgICAgICBtYXJrZXRMaXN0aW5nc1F1ZXVlLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICBsaXN0aW5naWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGlkOiBhc3NldEluZm8uYXBwaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRpZDogYXNzZXRJbmZvLmNvbnRleHRpZCwKICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRpZDogYXNzZXRJbmZvLmFzc2V0aWQKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgJCgnI215X21hcmtldF9zZWxsbGlzdGluZ3NfbnVtYmVyJykuYXBwZW5kKCc8c3BhbiBpZD0ibXlfbWFya2V0X3NlbGxpc3RpbmdzX3RvdGFsX3ByaWNlIj4sICcgKyAodG90YWxQcmljZUJ1eWVyIC8gMTAwLjApLnRvRml4ZWQoMikgKyBjdXJyZW5jeVN5bWJvbCArICcg4p6kICcgKyAodG90YWxQcmljZVNlbGxlciAvIDEwMC4wKS50b0ZpeGVkKDIpICsgY3VycmVuY3lTeW1ib2wgKyAnPC9zcGFuPicpOwogICAgICAgIH0KCgogICAgICAgIC8vIEdldHMgdGhlIGFzc2V0IGluZm8gKGFwcGlkL2NvbnRleHRpZC9hc3NldGlkKSBiYXNlZCBvbiBhIGxpc3RpbmdpZC4KICAgICAgICBmdW5jdGlvbiBnZXRBc3NldEluZm9Gcm9tTGlzdGluZ0lkKGxpc3RpbmdpZCkgewogICAgICAgICAgICB2YXIgbGlzdGluZyA9IGdldExpc3RpbmdGcm9tTGlzdHMobGlzdGluZ2lkKTsKICAgICAgICAgICAgaWYgKGxpc3RpbmcgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHt9OwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgYWN0aW9uQnV0dG9uID0gJCgnLml0ZW1fbWFya2V0X2FjdGlvbl9idXR0b24nLCBsaXN0aW5nLmVsbSkuYXR0cignaHJlZicpOwogICAgICAgICAgICAvLyBNYXJrZXQgYnV5IG9yZGVycyBoYXZlIG5vIGFzc2V0IGluZm8uCiAgICAgICAgICAgIGlmIChhY3Rpb25CdXR0b24gPT0gbnVsbCB8fCBhY3Rpb25CdXR0b24udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnY2FuY2VsbWFya2V0YnV5b3JkZXInKSkKICAgICAgICAgICAgICAgIHJldHVybiB7fTsKCiAgICAgICAgICAgIHZhciBwcmljZUJ1eWVyID0gZ2V0UHJpY2VGcm9tTWFya2V0TGlzdGluZygkKCcubWFya2V0X2xpc3RpbmdfcHJpY2UgPiBzcGFuOm50aC1jaGlsZCgxKSA+IHNwYW46bnRoLWNoaWxkKDEpJywgbGlzdGluZy5lbG0pLnRleHQoKSk7CiAgICAgICAgICAgIHZhciBwcmljZVNlbGxlciA9IGdldFByaWNlRnJvbU1hcmtldExpc3RpbmcoJCgnLm1hcmtldF9saXN0aW5nX3ByaWNlID4gc3BhbjpudGgtY2hpbGQoMSkgPiBzcGFuOm50aC1jaGlsZCgzKScsIGxpc3RpbmcuZWxtKS50ZXh0KCkpOwogICAgICAgICAgICB2YXIgaXRlbUlkcyA9IGFjdGlvbkJ1dHRvbi5zcGxpdCgnLCcpOwogICAgICAgICAgICB2YXIgYXBwaWQgPSByZXBsYWNlTm9uTnVtYmVycyhpdGVtSWRzWzJdKTsKICAgICAgICAgICAgdmFyIGNvbnRleHRpZCA9IHJlcGxhY2VOb25OdW1iZXJzKGl0ZW1JZHNbM10pOwogICAgICAgICAgICB2YXIgYXNzZXRpZCA9IHJlcGxhY2VOb25OdW1iZXJzKGl0ZW1JZHNbNF0pOwogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgYXBwaWQsCiAgICAgICAgICAgICAgICBjb250ZXh0aWQsCiAgICAgICAgICAgICAgICBhc3NldGlkLAogICAgICAgICAgICAgICAgcHJpY2VCdXllciwKICAgICAgICAgICAgICAgIHByaWNlU2VsbGVyCiAgICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICAvLyBBZGRzIHBhZ2luYXRpb24gYW5kIHNlYXJjaCBvcHRpb25zIHRvIHRoZSBtYXJrZXQgaXRlbSBsaXN0aW5ncy4KICAgICAgICBmdW5jdGlvbiBhZGRNYXJrZXRQYWdpbmF0aW9uKG1hcmtldF9saXN0aW5nX3NlZSkgewogICAgICAgICAgICBtYXJrZXRfbGlzdGluZ19zZWUuYWRkQ2xhc3MoJ2xpc3QnKTsKCiAgICAgICAgICAgIG1hcmtldF9saXN0aW5nX3NlZS5iZWZvcmUoJzx1bCBjbGFzcz0icGFnaW5hdGlvblRvcCBwYWdpbmF0aW9uIj48L3VsPicpOwogICAgICAgICAgICBtYXJrZXRfbGlzdGluZ19zZWUuYWZ0ZXIoJzx1bCBjbGFzcz0icGFnaW5hdGlvbkJvdHRvbSBwYWdpbmF0aW9uIj48L3VsPicpOwoKICAgICAgICAgICAgJCgnLm1hcmtldF9saXN0aW5nX3RhYmxlX2hlYWRlcicsIG1hcmtldF9saXN0aW5nX3NlZS5wYXJlbnQoKSkKICAgICAgICAgICAgICAgIC5hcHBlbmQoJzxpbnB1dCBjbGFzcz0ic2VhcmNoIiBpZD0ibWFya2V0X25hbWVfc2VhcmNoIiBwbGFjZWhvbGRlcj0iU2VhcmNoLi4uIiAvPicpOwoKICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgICB2YWx1ZU5hbWVzOiBbCiAgICAgICAgICAgICAgICAgICAgJ21hcmtldF9saXN0aW5nX2dhbWVfbmFtZScsICdtYXJrZXRfbGlzdGluZ19pdGVtX25hbWVfbGluaycsICdtYXJrZXRfbGlzdGluZ19wcmljZScsCiAgICAgICAgICAgICAgICAgICAgJ21hcmtldF9saXN0aW5nX2xpc3RlZF9kYXRlJywgewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbWFya2V0X2xpc3RpbmdfaXRlbV9uYW1lJywKICAgICAgICAgICAgICAgICAgICAgICAgYXR0cjogJ2lkJwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICBwYWdpbmF0aW9uOiBbewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJwYWdpbmF0aW9uVG9wIiwKICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uQ2xhc3M6ICJwYWdpbmF0aW9uVG9wIiwKICAgICAgICAgICAgICAgICAgICBpbm5lcldpbmRvdzogMTAwLAogICAgICAgICAgICAgICAgICAgIG91dGVyV2luZG93OiAxMDAsCiAgICAgICAgICAgICAgICAgICAgbGVmdDogMTAwLAogICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAxMDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAicGFnaW5hdGlvbkJvdHRvbSIsCiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbkNsYXNzOiAicGFnaW5hdGlvbkJvdHRvbSIsCiAgICAgICAgICAgICAgICAgICAgaW5uZXJXaW5kb3c6IDEwMCwKICAgICAgICAgICAgICAgICAgICBvdXRlcldpbmRvdzogMTAwLAogICAgICAgICAgICAgICAgICAgIGxlZnQ6IDEwMCwKICAgICAgICAgICAgICAgICAgICByaWdodDogMTAwCiAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgIHBhZ2U6IHBhcnNlSW50KGdldFNldHRpbmdXaXRoRGVmYXVsdChTRVRUSU5HX01BUktFVF9QQUdFX0NPVU5UKSkKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHZhciBsaXN0ID0gbmV3IExpc3QobWFya2V0X2xpc3Rpbmdfc2VlLnBhcmVudCgpLmF0dHIoJ2lkJyksIG9wdGlvbnMpOwogICAgICAgICAgICBsaXN0Lm9uKCdzZWFyY2hDb21wbGV0ZScsIHVwZGF0ZU1hcmtldFNlbGVjdEFsbEJ1dHRvbik7CiAgICAgICAgICAgIG1hcmtldExpc3RzLnB1c2gobGlzdCk7CiAgICAgICAgfQoKICAgICAgICAvLyBBZGRzIGNoZWNrYm94ZXMgdG8gbWFya2V0IGxpc3RpbmdzLgogICAgICAgIGZ1bmN0aW9uIGFkZE1hcmtldENoZWNrYm94ZXMoKSB7CiAgICAgICAgICAgICQoJy5tYXJrZXRfbGlzdGluZ19yb3cnKS5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgLy8gRG9uJ3QgYWRkIGl0IGFnYWluLCBvbmUgdGltZSBpcyBlbm91Z2guCiAgICAgICAgICAgICAgICBpZiAoJCgnLm1hcmtldF9saXN0aW5nX3NlbGVjdCcsIHRoaXMpLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgJCgnLm1hcmtldF9saXN0aW5nX2NhbmNlbF9idXR0b24nLCAkKHRoaXMpKS5hcHBlbmQoJzxkaXYgY2xhc3M9Im1hcmtldF9saXN0aW5nX3NlbGVjdCI+JyArCiAgICAgICAgICAgICAgICAgICAgICAgICc8aW5wdXQgdHlwZT0iY2hlY2tib3giIGNsYXNzPSJtYXJrZXRfc2VsZWN0X2l0ZW0iLz4nICsKICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicpOwoKICAgICAgICAgICAgICAgICAgICAkKCcubWFya2V0X3NlbGVjdF9pdGVtJywgdGhpcykuY2hhbmdlKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlTWFya2V0U2VsZWN0QWxsQnV0dG9uKCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy8gUHJvY2VzcyB0aGUgbWFya2V0IGxpc3RpbmdzLgogICAgICAgIGZ1bmN0aW9uIHByb2Nlc3NNYXJrZXRMaXN0aW5ncygpIHsKICAgICAgICAgICAgYWRkTWFya2V0Q2hlY2tib3hlcygpOwoKICAgICAgICAgICAgaWYgKGN1cnJlbnRQYWdlID09IFBBR0VfTUFSS0VUKSB7CiAgICAgICAgICAgICAgICAvLyBMb2FkIHRoZSBtYXJrZXQgbGlzdGluZ3MuCiAgICAgICAgICAgICAgICB2YXIgY3VycmVudENvdW50ID0gMDsKICAgICAgICAgICAgICAgIHZhciB0b3RhbENvdW50ID0gMDsKCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHVuc2FmZVdpbmRvdy5nX29NeUxpc3RpbmdzICE9PSAndW5kZWZpbmVkJyAmJiB1bnNhZmVXaW5kb3cuZ19vTXlMaXN0aW5ncyAhPSBudWxsICYmIHVuc2FmZVdpbmRvdy5nX29NeUxpc3RpbmdzLm1fY1RvdGFsQ291bnQgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICB0b3RhbENvdW50ID0gdW5zYWZlV2luZG93Lmdfb015TGlzdGluZ3MubV9jVG90YWxDb3VudDsKICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRvdGFsQ291bnQgPSBwYXJzZUludCgkKCcjbXlfbWFya2V0X3NlbGxsaXN0aW5nc19udW1iZXInKS50ZXh0KCkpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChpc05hTih0b3RhbENvdW50KSB8fCB0b3RhbENvdW50ID09IDApIHsKICAgICAgICAgICAgICAgICAgICBmaWxsTWFya2V0TGlzdGluZ3NRdWV1ZSgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAkKCcjdGFiQ29udGVudHNNeUFjdGl2ZU1hcmtldExpc3RpbmdzUm93cycpLmh0bWwoJycpOyAvLyBDbGVhciB0aGUgZGVmYXVsdCBsaXN0aW5ncy4KICAgICAgICAgICAgICAgICQoJyN0YWJDb250ZW50c015QWN0aXZlTWFya2V0TGlzdGluZ3NSb3dzJykuaGlkZSgpOyAvLyBIaWRlIGFsbCBsaXN0aW5ncyB1bnRpbCBldmVyeXRoaW5nIGhhcyBiZWVuIGxvYWRlZC4KCiAgICAgICAgICAgICAgICAvLyBIaWRlIFN0ZWFtJ3MgcGFnaW5nIGNvbnRyb2xzLgogICAgICAgICAgICAgICAgJCgnI3RhYkNvbnRlbnRzTXlBY3RpdmVNYXJrZXRMaXN0aW5nc19jdG4nKS5oaWRlKCk7CiAgICAgICAgICAgICAgICAkKCcubWFya2V0X3BhZ2VzaXplX29wdGlvbnMnKS5oaWRlKCk7CgogICAgICAgICAgICAgICAgLy8gU2hvdyB0aGUgc3Bpbm5lciBzbyB0aGUgdXNlciBrbm93cyB0aGF0IHNvbWV0aGluZyBpcyBnb2luZyBvbi4KICAgICAgICAgICAgICAgICQoJy5teV9tYXJrZXRfaGVhZGVyJykuZXEoMCkuYXBwZW5kKCc8ZGl2IGlkPSJtYXJrZXRfbGlzdGluZ3Nfc3Bpbm5lciI+JyArCiAgICAgICAgICAgICAgICAgICAgc3Bpbm5lckJsb2NrICsKICAgICAgICAgICAgICAgICAgICAnPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXIiPkxvYWRpbmcgbWFya2V0IGxpc3RpbmdzPC9kaXY+JyArCiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicpOwoKICAgICAgICAgICAgICAgIHdoaWxlIChjdXJyZW50Q291bnQgPCB0b3RhbENvdW50KSB7CiAgICAgICAgICAgICAgICAgICAgbWFya2V0TGlzdGluZ3NJdGVtc1F1ZXVlLnB1c2goY3VycmVudENvdW50KTsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q291bnQgKz0gMTAwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBvbiBhIG1hcmtldCBpdGVtIHBhZ2UuCiAgICAgICAgICAgICAgICAkKCcubWFya2V0X2hvbWVfbGlzdGluZ190YWJsZScpLmVhY2goZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIC8vIE5vdCBvbiAneCByZXF1ZXN0cyB0byBidXkgYXQgeSx5eSBvciBsb3dlcicuCiAgICAgICAgICAgICAgICAgICAgaWYgKCQoJyNtYXJrZXRfYnV5b3JkZXJfaW5mb19zaG93X2RldGFpbHMnLCAkKHRoaXMpKS5sZW5ndGggPiAwKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CgogICAgICAgICAgICAgICAgICAgICQodGhpcykuY2hpbGRyZW4oKS5sYXN0KCkuYWRkQ2xhc3MoIm1hcmtldF9saXN0aW5nX3NlZSIpOwoKICAgICAgICAgICAgICAgICAgICBhZGRNYXJrZXRQYWdpbmF0aW9uKCQoJy5tYXJrZXRfbGlzdGluZ19zZWUnLCB0aGlzKS5sYXN0KCkpOwogICAgICAgICAgICAgICAgICAgIHNvcnRNYXJrZXRMaXN0aW5ncygkKHRoaXMpLCBmYWxzZSwgZmFsc2UsIHRydWUpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgJCgnI3RhYkNvbnRlbnRzTXlBY3RpdmVNYXJrZXRMaXN0aW5nc1Jvd3MgPiAubWFya2V0X2xpc3Rpbmdfcm93JykuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdGluZ2lkID0gJCh0aGlzKS5hdHRyKCdpZCcpLnJlcGxhY2UoJ215bGlzdGluZ18nLCAnJykucmVwbGFjZSgnbXlidXlvcmRlcl8nLCAnJykucmVwbGFjZSgnbWJ1eW9yZGVyXycsICcnKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYXNzZXRJbmZvID0gZ2V0QXNzZXRJbmZvRnJvbUxpc3RpbmdJZChsaXN0aW5naWQpOwoKICAgICAgICAgICAgICAgICAgICAvLyBUaGVyZSdzIG9ubHkgb25lIGl0ZW0gaW4gdGhlIGdfcmdBc3NldHMgb24gYSBtYXJrZXQgbGlzdGluZyBwYWdlLgogICAgICAgICAgICAgICAgICAgIHZhciBleGlzdGluZ0Fzc2V0ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBhcHBpZCBpbiB1bnNhZmVXaW5kb3cuZ19yZ0Fzc2V0cykgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjb250ZXh0aWQgaW4gdW5zYWZlV2luZG93LmdfcmdBc3NldHNbYXBwaWRdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBhc3NldGlkIGluIHVuc2FmZVdpbmRvdy5nX3JnQXNzZXRzW2FwcGlkXVtjb250ZXh0aWRdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdBc3NldCA9IHVuc2FmZVdpbmRvdy5nX3JnQXNzZXRzW2FwcGlkXVtjb250ZXh0aWRdW2Fzc2V0aWRdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvLyBhcHBpZCBhbmQgY29udGV4dGlkIGFyZSBpZGVudGljYWwsIG9ubHkgdGhlIGFzc2V0aWQgaXMgZGlmZmVyZW50IGZvciBlYWNoIGFzc2V0LgogICAgICAgICAgICAgICAgICAgIHVuc2FmZVdpbmRvdy5nX3JnQXNzZXRzW2FwcGlkXVtjb250ZXh0aWRdW2Fzc2V0SW5mby5hc3NldGlkXSA9IGV4aXN0aW5nQXNzZXQ7CiAgICAgICAgICAgICAgICAgICAgbWFya2V0TGlzdGluZ3NRdWV1ZS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGluZ2lkLAogICAgICAgICAgICAgICAgICAgICAgICBhcHBpZDogYXNzZXRJbmZvLmFwcGlkLAogICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0aWQ6IGFzc2V0SW5mby5jb250ZXh0aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0aWQ6IGFzc2V0SW5mby5hc3NldGlkCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBVcGRhdGUgdGhlIHNlbGVjdC9kZXNlbGVjdCBhbGwgYnV0dG9uIG9uIHRoZSBtYXJrZXQuCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlTWFya2V0U2VsZWN0QWxsQnV0dG9uKCkgewogICAgICAgICAgICAkKCcubWFya2V0X2xpc3RpbmdfYnV0dG9ucycpLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0aW9uR3JvdXAgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpOwogICAgICAgICAgICAgICAgdmFyIGludmVydCA9ICQoJy5tYXJrZXRfc2VsZWN0X2l0ZW06Y2hlY2tlZCcsIHNlbGVjdGlvbkdyb3VwKS5sZW5ndGggPT0gJCgnLm1hcmtldF9zZWxlY3RfaXRlbScsIHNlbGVjdGlvbkdyb3VwKS5sZW5ndGg7CiAgICAgICAgICAgICAgICBpZiAoJCgnLm1hcmtldF9zZWxlY3RfaXRlbScsIHNlbGVjdGlvbkdyb3VwKS5sZW5ndGggPT0gMCkgLy8gSWYgdGhlcmUgYXJlIG5vIGl0ZW1zIHRvIHNlbGVjdCwga2VlcCBpdCBhdCBTZWxlY3QgYWxsLgogICAgICAgICAgICAgICAgICAgIGludmVydCA9IGZhbHNlOwogICAgICAgICAgICAgICAgJCgnLnNlbGVjdF9hbGwgPiBzcGFuJywgc2VsZWN0aW9uR3JvdXApLnRleHQoaW52ZXJ0ID8gJ0Rlc2VsZWN0IGFsbCcgOiAnU2VsZWN0IGFsbCcpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIC8vIFNvcnQgdGhlIG1hcmtldCBsaXN0aW5ncy4KICAgICAgICBmdW5jdGlvbiBzb3J0TWFya2V0TGlzdGluZ3MoZWxlbSwgaXNQcmljZSwgaXNEYXRlLCBpc05hbWUpIHsKICAgICAgICAgICAgdmFyIGxpc3QgPSBnZXRMaXN0RnJvbUNvbnRhaW5lcihlbGVtKTsKICAgICAgICAgICAgaWYgKGxpc3QgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ludmFsaWQgcGFyYW1ldGVyLCBjb3VsZCBub3QgZmluZCBhIGxpc3QgbWF0Y2hpbmcgZWxlbS4nKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gQ2hhbmdlIHNvcnQgb3JkZXIgKGFzYy9kZXNjKS4KICAgICAgICAgICAgdmFyIG5leHRTb3J0ID0gaXNQcmljZSA/IDEgOiAoaXNEYXRlID8gMiA6IDMpOwogICAgICAgICAgICB2YXIgYXNjID0gdHJ1ZTsKCiAgICAgICAgICAgIC8vIChSZSlzZXQgdGhlIGFzYy9kZXNjIGFycm93cy4KICAgICAgICAgICAgY29uc3QgYXJyb3dfZG93biA9ICfwn6G7JzsKICAgICAgICAgICAgY29uc3QgYXJyb3dfdXAgPSAn8J+huSc7CgogICAgICAgICAgICAkKCcubWFya2V0X2xpc3RpbmdfdGFibGVfaGVhZGVyID4gc3BhbicsIGVsZW0pLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnbWFya2V0X2xpc3RpbmdfZWRpdF9idXR0b25zJykpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLnRleHQoKS5pbmNsdWRlcyhhcnJvd191cCkpCiAgICAgICAgICAgICAgICAgICAgYXNjID0gZmFsc2U7CgogICAgICAgICAgICAgICAgJCh0aGlzKS50ZXh0KCQodGhpcykudGV4dCgpLnJlcGxhY2UoJyAnICsgYXJyb3dfZG93biwgJycpLnJlcGxhY2UoJyAnICsgYXJyb3dfdXAsICcnKSk7CiAgICAgICAgICAgIH0pCgogICAgICAgICAgICB2YXIgbWFya2V0X2xpc3Rpbmdfc2VsZWN0b3I7CiAgICAgICAgICAgIGlmIChpc1ByaWNlKSB7CiAgICAgICAgICAgICAgICBtYXJrZXRfbGlzdGluZ19zZWxlY3RvciA9ICQoJy5tYXJrZXRfbGlzdGluZ190YWJsZV9oZWFkZXInLCBlbGVtKS5jaGlsZHJlbigpLmVxKDEpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGlzRGF0ZSkgewogICAgICAgICAgICAgICAgbWFya2V0X2xpc3Rpbmdfc2VsZWN0b3IgPSAkKCcubWFya2V0X2xpc3RpbmdfdGFibGVfaGVhZGVyJywgZWxlbSkuY2hpbGRyZW4oKS5lcSgyKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChpc05hbWUpIHsKICAgICAgICAgICAgICAgIG1hcmtldF9saXN0aW5nX3NlbGVjdG9yID0gJCgnLm1hcmtldF9saXN0aW5nX3RhYmxlX2hlYWRlcicsIGVsZW0pLmNoaWxkcmVuKCkuZXEoMyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbWFya2V0X2xpc3Rpbmdfc2VsZWN0b3IudGV4dChtYXJrZXRfbGlzdGluZ19zZWxlY3Rvci50ZXh0KCkgKyAnICcgKyAoYXNjID8gYXJyb3dfdXAgOiBhcnJvd19kb3duKSk7CgogICAgICAgICAgICBpZiAobGlzdC5zb3J0ID09IG51bGwpCiAgICAgICAgICAgICAgICByZXR1cm47CgogICAgICAgICAgICBpZiAoaXNOYW1lKSB7CiAgICAgICAgICAgICAgICBsaXN0LnNvcnQoJycsIHsKICAgICAgICAgICAgICAgICAgICBvcmRlcjogYXNjID8gImFzYyIgOiAiZGVzYyIsCiAgICAgICAgICAgICAgICAgICAgc29ydEZ1bmN0aW9uOiBmdW5jdGlvbihhLCBiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhLnZhbHVlcygpLm1hcmtldF9saXN0aW5nX2dhbWVfbmFtZS50b0xvd2VyQ2FzZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubG9jYWxlQ29tcGFyZShiLnZhbHVlcygpLm1hcmtldF9saXN0aW5nX2dhbWVfbmFtZS50b0xvd2VyQ2FzZSgpKSA9PQogICAgICAgICAgICAgICAgICAgICAgICAgICAgMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEudmFsdWVzKCkubWFya2V0X2xpc3RpbmdfaXRlbV9uYW1lX2xpbmsudG9Mb3dlckNhc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5sb2NhbGVDb21wYXJlKGIudmFsdWVzKCkubWFya2V0X2xpc3RpbmdfaXRlbV9uYW1lX2xpbmsudG9Mb3dlckNhc2UoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEudmFsdWVzKCkubWFya2V0X2xpc3RpbmdfZ2FtZV9uYW1lLnRvTG93ZXJDYXNlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5sb2NhbGVDb21wYXJlKGIudmFsdWVzKCkubWFya2V0X2xpc3RpbmdfZ2FtZV9uYW1lLnRvTG93ZXJDYXNlKCkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKGlzRGF0ZSkgewogICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRNb250aCA9IERhdGVUaW1lLmxvY2FsKCkubW9udGg7CgogICAgICAgICAgICAgICAgbGlzdC5zb3J0KCdtYXJrZXRfbGlzdGluZ19saXN0ZWRfZGF0ZScsIHsKICAgICAgICAgICAgICAgICAgICBvcmRlcjogYXNjID8gImFzYyIgOiAiZGVzYyIsCiAgICAgICAgICAgICAgICAgICAgc29ydEZ1bmN0aW9uOiBmdW5jdGlvbihhLCBiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaXJzdERhdGUgPSBEYXRlVGltZS5mcm9tU3RyaW5nKChhLnZhbHVlcygpLm1hcmtldF9saXN0aW5nX2xpc3RlZF9kYXRlKS50cmltKCksICdkIE1NTScpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Vjb25kRGF0ZSA9IERhdGVUaW1lLmZyb21TdHJpbmcoKGIudmFsdWVzKCkubWFya2V0X2xpc3RpbmdfbGlzdGVkX2RhdGUpLnRyaW0oKSwgJ2QgTU1NJyk7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3REYXRlID09IG51bGwgfHwgc2Vjb25kRGF0ZSA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0RGF0ZS5tb250aCA+IGN1cnJlbnRNb250aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0RGF0ZSA9IGZpcnN0RGF0ZS5wbHVzKHsgeWVhcnM6IC0xfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWNvbmREYXRlLm1vbnRoID4gY3VycmVudE1vbnRoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kRGF0ZSA9IHNlY29uZERhdGUucGx1cyh7IHllYXJzOiAtMX0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0RGF0ZSA+IHNlY29uZERhdGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0RGF0ZSA9PT0gc2Vjb25kRGF0ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSBlbHNlIGlmIChpc1ByaWNlKSB7CiAgICAgICAgICAgICAgICBsaXN0LnNvcnQoJ21hcmtldF9saXN0aW5nX3ByaWNlJywgewogICAgICAgICAgICAgICAgICAgIG9yZGVyOiBhc2MgPyAiYXNjIiA6ICJkZXNjIiwKICAgICAgICAgICAgICAgICAgICBzb3J0RnVuY3Rpb246IGZ1bmN0aW9uKGEsIGIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RpbmdQcmljZUEgPSAkKGEudmFsdWVzKCkubWFya2V0X2xpc3RpbmdfcHJpY2UpLnRleHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGluZ1ByaWNlQSA9IGxpc3RpbmdQcmljZUEuc3Vic3RyKDAsIGxpc3RpbmdQcmljZUEuaW5kZXhPZignKCcpKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGluZ1ByaWNlQSA9IGxpc3RpbmdQcmljZUEucmVwbGFjZSgnLS0nLCAnMDAnKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0aW5nUHJpY2VCID0gJChiLnZhbHVlcygpLm1hcmtldF9saXN0aW5nX3ByaWNlKS50ZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RpbmdQcmljZUIgPSBsaXN0aW5nUHJpY2VCLnN1YnN0cigwLCBsaXN0aW5nUHJpY2VCLmluZGV4T2YoJygnKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RpbmdQcmljZUIgPSBsaXN0aW5nUHJpY2VCLnJlcGxhY2UoJy0tJywgJzAwJyk7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlyc3RQcmljZSA9IHBhcnNlSW50KHJlcGxhY2VOb25OdW1iZXJzKGxpc3RpbmdQcmljZUEpKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlY29uZFByaWNlID0gcGFyc2VJbnQocmVwbGFjZU5vbk51bWJlcnMobGlzdGluZ1ByaWNlQikpOwoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0UHJpY2UgLSBzZWNvbmRQcmljZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRMaXN0RnJvbUNvbnRhaW5lcihncm91cCkgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtldExpc3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAoZ3JvdXAuYXR0cignaWQnKSA9PSAkKG1hcmtldExpc3RzW2ldLmxpc3RDb250YWluZXIpLmF0dHIoJ2lkJykpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcmtldExpc3RzW2ldOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRMaXN0aW5nRnJvbUxpc3RzKGxpc3RpbmdpZCkgewogICAgICAgICAgICAvLyBTb21ldGltZXMgbGlzdGluZyBpZHMgYXJlIGNvbnRhaW5lZCBpbiBtdWx0aXBsZSBsaXN0cyAoPyksIHVzZSB0aGUgbGFzdCBvbmUgYXZhaWxhYmxlIGFzIHRoaXMgaXMgdGhlIG9uZSB3ZSdyZSBtb3N0IGxpa2VseSBpbnRlcmVzdGVkIGluLgogICAgICAgICAgICBmb3IgKHZhciBpID0gbWFya2V0TGlzdHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBtYXJrZXRMaXN0c1tpXS5nZXQoIm1hcmtldF9saXN0aW5nX2l0ZW1fbmFtZSIsICdteWxpc3RpbmdfJyArIGxpc3RpbmdpZCArICdfbmFtZScpOwogICAgICAgICAgICAgICAgaWYgKHZhbHVlcyAhPSBudWxsICYmIHZhbHVlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlc1swXTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YWx1ZXMgPSBtYXJrZXRMaXN0c1tpXS5nZXQoIm1hcmtldF9saXN0aW5nX2l0ZW1fbmFtZSIsICdtYnV5b3JkZXJfJyArIGxpc3RpbmdpZCArICdfbmFtZScpOwogICAgICAgICAgICAgICAgaWYgKHZhbHVlcyAhPSBudWxsICYmIHZhbHVlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlc1swXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZW1vdmVMaXN0aW5nRnJvbUxpc3RzKGxpc3RpbmdpZCkgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtldExpc3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBtYXJrZXRMaXN0c1tpXS5yZW1vdmUoIm1hcmtldF9saXN0aW5nX2l0ZW1fbmFtZSIsICdteWxpc3RpbmdfJyArIGxpc3RpbmdpZCArICdfbmFtZScpOwogICAgICAgICAgICAgICAgbWFya2V0TGlzdHNbaV0ucmVtb3ZlKCJtYXJrZXRfbGlzdGluZ19pdGVtX25hbWUiLCAnbWJ1eW9yZGVyXycgKyBsaXN0aW5naWQgKyAnX25hbWUnKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgbWFya2V0IFVJLgogICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemVNYXJrZXRVSSgpIHsKICAgICAgICAgICAgLy8gU2VsbCBvcmRlcnMuCiAgICAgICAgICAgICQoJy5teV9tYXJrZXRfaGVhZGVyJykuZmlyc3QoKS5hcHBlbmQoCiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0ibWFya2V0X2xpc3RpbmdfYnV0dG9ucyI+JyArCiAgICAgICAgICAgICAgICAnPGEgY2xhc3M9Iml0ZW1fbWFya2V0X2FjdGlvbl9idXR0b24gaXRlbV9tYXJrZXRfYWN0aW9uX2J1dHRvbl9ncmVlbiBzZWxlY3RfYWxsIG1hcmtldF9saXN0aW5nX2J1dHRvbiI+JyArCiAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9Iml0ZW1fbWFya2V0X2FjdGlvbl9idXR0b25fY29udGVudHMiIHN0eWxlPSJ0ZXh0LXRyYW5zZm9ybTpub25lIj5TZWxlY3QgYWxsPC9zcGFuPicgKwogICAgICAgICAgICAgICAgJzwvYT4nICsKICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0ic2VwYXJhdG9yLXNtYWxsIj48L3NwYW4+JyArCiAgICAgICAgICAgICAgICAnPGEgY2xhc3M9Iml0ZW1fbWFya2V0X2FjdGlvbl9idXR0b24gaXRlbV9tYXJrZXRfYWN0aW9uX2J1dHRvbl9ncmVlbiByZW1vdmVfc2VsZWN0ZWQgbWFya2V0X2xpc3RpbmdfYnV0dG9uIj4nICsKICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0iaXRlbV9tYXJrZXRfYWN0aW9uX2J1dHRvbl9jb250ZW50cyIgc3R5bGU9InRleHQtdHJhbnNmb3JtOm5vbmUiPlJlbW92ZSBzZWxlY3RlZDwvc3Bhbj4nICsKICAgICAgICAgICAgICAgICc8L2E+JyArCiAgICAgICAgICAgICAgICAnPGEgY2xhc3M9Iml0ZW1fbWFya2V0X2FjdGlvbl9idXR0b24gaXRlbV9tYXJrZXRfYWN0aW9uX2J1dHRvbl9ncmVlbiByZWxpc3Rfc2VsZWN0ZWQgbWFya2V0X2xpc3RpbmdfYnV0dG9uIG1hcmtldF9saXN0aW5nX2J1dHRvbl9yaWdodCI+JyArCiAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9Iml0ZW1fbWFya2V0X2FjdGlvbl9idXR0b25fY29udGVudHMiIHN0eWxlPSJ0ZXh0LXRyYW5zZm9ybTpub25lIj5SZWxpc3Qgc2VsZWN0ZWQ8L3NwYW4+JyArCiAgICAgICAgICAgICAgICAnPC9hPicgKwogICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJzZXBhcmF0b3Itc21hbGwiPjwvc3Bhbj4nICsKICAgICAgICAgICAgICAgICc8YSBjbGFzcz0iaXRlbV9tYXJrZXRfYWN0aW9uX2J1dHRvbiBpdGVtX21hcmtldF9hY3Rpb25fYnV0dG9uX2dyZWVuIHJlbGlzdF9vdmVycHJpY2VkIG1hcmtldF9saXN0aW5nX2J1dHRvbiBtYXJrZXRfbGlzdGluZ19idXR0b25fcmlnaHQiPicgKwogICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJpdGVtX21hcmtldF9hY3Rpb25fYnV0dG9uX2NvbnRlbnRzIiBzdHlsZT0idGV4dC10cmFuc2Zvcm06bm9uZSI+UmVsaXN0IG92ZXJwcmljZWQ8L3NwYW4+JyArCiAgICAgICAgICAgICAgICAnPC9hPicgKwogICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJzZXBhcmF0b3Itc21hbGwiPjwvc3Bhbj4nICsKICAgICAgICAgICAgICAgICc8YSBjbGFzcz0iaXRlbV9tYXJrZXRfYWN0aW9uX2J1dHRvbiBpdGVtX21hcmtldF9hY3Rpb25fYnV0dG9uX2dyZWVuIHNlbGVjdF9vdmVycHJpY2VkIG1hcmtldF9saXN0aW5nX2J1dHRvbiBtYXJrZXRfbGlzdGluZ19idXR0b25fcmlnaHQiPicgKwogICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJpdGVtX21hcmtldF9hY3Rpb25fYnV0dG9uX2NvbnRlbnRzIiBzdHlsZT0idGV4dC10cmFuc2Zvcm06bm9uZSI+U2VsZWN0IG92ZXJwcmljZWQ8L3NwYW4+JyArCiAgICAgICAgICAgICAgICAnPC9hPicgKwogICAgICAgICAgICAgICAgJzwvZGl2PicpOwoKICAgICAgICAgICAgLy8gTGlzdGluZ3MgY29uZmlybWF0aW9ucyBhbmQgYnV5IG9yZGVycy4KICAgICAgICAgICAgJCgnLm15X21hcmtldF9oZWFkZXInKS5zbGljZSgxKS5hcHBlbmQoCiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0ibWFya2V0X2xpc3RpbmdfYnV0dG9ucyI+JyArCiAgICAgICAgICAgICAgICAnPGEgY2xhc3M9Iml0ZW1fbWFya2V0X2FjdGlvbl9idXR0b24gaXRlbV9tYXJrZXRfYWN0aW9uX2J1dHRvbl9ncmVlbiBzZWxlY3RfYWxsIG1hcmtldF9saXN0aW5nX2J1dHRvbiI+JyArCiAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9Iml0ZW1fbWFya2V0X2FjdGlvbl9idXR0b25fY29udGVudHMiIHN0eWxlPSJ0ZXh0LXRyYW5zZm9ybTpub25lIj5TZWxlY3QgYWxsPC9zcGFuPicgKwogICAgICAgICAgICAgICAgJzwvYT4nICsKICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0ic2VwYXJhdG9yLWxhcmdlIj48L3NwYW4+JyArCiAgICAgICAgICAgICAgICAnPGEgY2xhc3M9Iml0ZW1fbWFya2V0X2FjdGlvbl9idXR0b24gaXRlbV9tYXJrZXRfYWN0aW9uX2J1dHRvbl9ncmVlbiByZW1vdmVfc2VsZWN0ZWQgbWFya2V0X2xpc3RpbmdfYnV0dG9uIj4nICsKICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0iaXRlbV9tYXJrZXRfYWN0aW9uX2J1dHRvbl9jb250ZW50cyIgc3R5bGU9InRleHQtdHJhbnNmb3JtOm5vbmUiPlJlbW92ZSBzZWxlY3RlZDwvc3Bhbj4nICsKICAgICAgICAgICAgICAgICc8L2E+JyArCiAgICAgICAgICAgICAgICAnPC9kaXY+Jyk7CgogICAgICAgICAgICAkKCcubWFya2V0X2xpc3RpbmdfdGFibGVfaGVhZGVyJykub24oJ2NsaWNrJywgJ3NwYW4nLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdtYXJrZXRfbGlzdGluZ19lZGl0X2J1dHRvbnMnKSB8fCAkKHRoaXMpLmhhc0NsYXNzKCdpdGVtX21hcmtldF9hY3Rpb25fYnV0dG9uX2NvbnRlbnRzJykpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgICAgICAgIHZhciBpc1ByaWNlID0gJCgnLm1hcmtldF9saXN0aW5nX3RhYmxlX2hlYWRlcicsICQodGhpcykucGFyZW50KCkucGFyZW50KCkpLmNoaWxkcmVuKCkuZXEoMSkudGV4dCgpID09ICQodGhpcykudGV4dCgpOwogICAgICAgICAgICAgICAgdmFyIGlzRGF0ZSA9ICQoJy5tYXJrZXRfbGlzdGluZ190YWJsZV9oZWFkZXInLCAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpKS5jaGlsZHJlbigpLmVxKDIpLnRleHQoKSA9PSAkKHRoaXMpLnRleHQoKTsKICAgICAgICAgICAgICAgIHZhciBpc05hbWUgPSAkKCcubWFya2V0X2xpc3RpbmdfdGFibGVfaGVhZGVyJywgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKSkuY2hpbGRyZW4oKS5lcSgzKS50ZXh0KCkgPT0gJCh0aGlzKS50ZXh0KCk7CgogICAgICAgICAgICAgICAgc29ydE1hcmtldExpc3RpbmdzKCQodGhpcykucGFyZW50KCkucGFyZW50KCksIGlzUHJpY2UsIGlzRGF0ZSwgaXNOYW1lKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAkKCcuc2VsZWN0X2FsbCcpLm9uKCdjbGljaycsICcqJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0aW9uR3JvdXAgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpOwogICAgICAgICAgICAgICAgdmFyIG1hcmtldExpc3QgPSBnZXRMaXN0RnJvbUNvbnRhaW5lcihzZWxlY3Rpb25Hcm91cCk7CgogICAgICAgICAgICAgICAgdmFyIGludmVydCA9ICQoJy5tYXJrZXRfc2VsZWN0X2l0ZW06Y2hlY2tlZCcsIHNlbGVjdGlvbkdyb3VwKS5sZW5ndGggPT0gJCgnLm1hcmtldF9zZWxlY3RfaXRlbScsIHNlbGVjdGlvbkdyb3VwKS5sZW5ndGg7CgogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXRMaXN0Lm1hdGNoaW5nSXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAkKCcubWFya2V0X3NlbGVjdF9pdGVtJywgbWFya2V0TGlzdC5tYXRjaGluZ0l0ZW1zW2ldLmVsbSkucHJvcCgnY2hlY2tlZCcsICFpbnZlcnQpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHVwZGF0ZU1hcmtldFNlbGVjdEFsbEJ1dHRvbigpOwogICAgICAgICAgICB9KTsKCgogICAgICAgICAgICAkKCcjbWFya2V0X3JlbW92ZWxpc3RpbmdfZGlhbG9nX2FjY2VwdCcpLm9uKCdjbGljaycsICcqJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHdoZW4gYSB1c2VyIHJlbW92ZWQgYW4gaXRlbSB0aHJvdWdoIHRoZSBSZW1vdmUvQ2FuY2VsIGJ1dHRvbi4KICAgICAgICAgICAgICAgIC8vIElkZWFsbHksIGl0IHNob3VsZCByZW1vdmUgdGhpcyBpdGVtIGZyb20gdGhlIGxpc3QgKGluc3RlYWQgb2YganVzdCB0aGUgVUkgZWxlbWVudCB3aGljaCBTdGVhbSBkb2VzKSwgYnV0IEknbSBub3Qgc3VyZSBob3cgdG8gZ2V0IHRoZSBjdXJyZW50IGl0ZW0geWV0LgogICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICQoJy5zZWxlY3Rfb3ZlcnByaWNlZCcpLm9uKCdjbGljaycsICcqJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0aW9uR3JvdXAgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpOwogICAgICAgICAgICAgICAgdmFyIG1hcmtldExpc3QgPSBnZXRMaXN0RnJvbUNvbnRhaW5lcihzZWxlY3Rpb25Hcm91cCk7CgogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXRMaXN0Lm1hdGNoaW5nSXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBpZiAoJChtYXJrZXRMaXN0Lm1hdGNoaW5nSXRlbXNbaV0uZWxtKS5oYXNDbGFzcygnb3ZlcnByaWNlZCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5tYXJrZXRfc2VsZWN0X2l0ZW0nLCBtYXJrZXRMaXN0Lm1hdGNoaW5nSXRlbXNbaV0uZWxtKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICQoJy5tYXJrZXRfbGlzdGluZ19yb3cnLCBzZWxlY3Rpb25Hcm91cCkuZWFjaChmdW5jdGlvbihpbmRleCkgewogICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdvdmVycHJpY2VkJykpCiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5tYXJrZXRfc2VsZWN0X2l0ZW0nLCAkKHRoaXMpKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB1cGRhdGVNYXJrZXRTZWxlY3RBbGxCdXR0b24oKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAkKCcucmVtb3ZlX3NlbGVjdGVkJykub24oJ2NsaWNrJywgJyonLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBzZWxlY3Rpb25Hcm91cCA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkucGFyZW50KCk7CiAgICAgICAgICAgICAgICB2YXIgbWFya2V0TGlzdCA9IGdldExpc3RGcm9tQ29udGFpbmVyKHNlbGVjdGlvbkdyb3VwKTsKCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtldExpc3QubWF0Y2hpbmdJdGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmICgkKCcubWFya2V0X3NlbGVjdF9pdGVtJywgJChtYXJrZXRMaXN0Lm1hdGNoaW5nSXRlbXNbaV0uZWxtKSkucHJvcCgnY2hlY2tlZCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0aW5naWQgPSByZXBsYWNlTm9uTnVtYmVycyhtYXJrZXRMaXN0Lm1hdGNoaW5nSXRlbXNbaV0udmFsdWVzKCkubWFya2V0X2xpc3RpbmdfaXRlbV9uYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgbWFya2V0UmVtb3ZlUXVldWUucHVzaChsaXN0aW5naWQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAkKCcubWFya2V0X3JlbGlzdF9hdXRvJykuY2hhbmdlKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgc2V0U2V0dGluZyhTRVRUSU5HX1JFTElTVF9BVVRPTUFUSUNBTExZLCAkKCcubWFya2V0X3JlbGlzdF9hdXRvJykuaXMoIjpjaGVja2VkIikgPyAxIDogMCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgJCgnLnJlbGlzdF9vdmVycHJpY2VkJykub24oJ2NsaWNrJywgJyonLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBzZWxlY3Rpb25Hcm91cCA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkucGFyZW50KCk7CiAgICAgICAgICAgICAgICB2YXIgbWFya2V0TGlzdCA9IGdldExpc3RGcm9tQ29udGFpbmVyKHNlbGVjdGlvbkdyb3VwKTsKCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtldExpc3QubWF0Y2hpbmdJdGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmICgkKG1hcmtldExpc3QubWF0Y2hpbmdJdGVtc1tpXS5lbG0pLmhhc0NsYXNzKCdvdmVycHJpY2VkJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RpbmdpZCA9IHJlcGxhY2VOb25OdW1iZXJzKG1hcmtldExpc3QubWF0Y2hpbmdJdGVtc1tpXS52YWx1ZXMoKS5tYXJrZXRfbGlzdGluZ19pdGVtX25hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZU92ZXJwcmljZWRJdGVtTGlzdGluZyhsaXN0aW5naWQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAkKCcucmVsaXN0X3NlbGVjdGVkJykub24oJ2NsaWNrJywgJyonLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBzZWxlY3Rpb25Hcm91cCA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkucGFyZW50KCk7CiAgICAgICAgICAgICAgICB2YXIgbWFya2V0TGlzdCA9IGdldExpc3RGcm9tQ29udGFpbmVyKHNlbGVjdGlvbkdyb3VwKTsKCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtldExpc3QubWF0Y2hpbmdJdGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmICgkKG1hcmtldExpc3QubWF0Y2hpbmdJdGVtc1tpXS5lbG0pLmhhc0NsYXNzKCdvdmVycHJpY2VkJykgJiYgJCgnLm1hcmtldF9zZWxlY3RfaXRlbScsICQobWFya2V0TGlzdC5tYXRjaGluZ0l0ZW1zW2ldLmVsbSkpLnByb3AoJ2NoZWNrZWQnKSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdGluZ2lkID0gcmVwbGFjZU5vbk51bWJlcnMobWFya2V0TGlzdC5tYXRjaGluZ0l0ZW1zW2ldLnZhbHVlcygpLm1hcmtldF9saXN0aW5nX2l0ZW1fbmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlT3ZlcnByaWNlZEl0ZW1MaXN0aW5nKGxpc3RpbmdpZCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICQoJyNzZWVfc2V0dGluZ3MnKS5yZW1vdmUoKTsKICAgICAgICAgICAgJCgnI2dsb2JhbF9hY3Rpb25fbWVudScpLnByZXBlbmQoJzxzcGFuIGlkPSJzZWVfc2V0dGluZ3MiPjxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSI+4qyWIFN0ZWFtIEVjb25vbXkgRW5oYW5jZXI8L2E+PC9zcGFuPicpOwogICAgICAgICAgICAkKCcjc2VlX3NldHRpbmdzJykub24oJ2NsaWNrJywgJyonLCAoKSA9PiBvcGVuU2V0dGluZ3MoKSk7CgogICAgICAgICAgICBwcm9jZXNzTWFya2V0TGlzdGluZ3MoKTsKICAgICAgICB9CiAgICB9CiAgICAvLyNlbmRyZWdpb24KCiAgICAvLyNyZWdpb24gVHJhZGVvZmZlcnMKICAgIGlmIChjdXJyZW50UGFnZSA9PSBQQUdFX1RSQURFT0ZGRVIpIHsKICAgICAgICAvLyBHZXRzIHRoZSB0cmFkZSBvZmZlcidzIGludmVudG9yeSBpdGVtcyBmcm9tIHRoZSBhY3RpdmUgaW52ZW50b3J5LgogICAgICAgIGZ1bmN0aW9uIGdldFRyYWRlT2ZmZXJJbnZlbnRvcnlJdGVtcygpIHsKICAgICAgICAgICAgdmFyIGFyciA9IFtdOwoKICAgICAgICAgICAgZm9yICh2YXIgY2hpbGQgaW4gZ2V0QWN0aXZlSW52ZW50b3J5KCkucmdDaGlsZEludmVudG9yaWVzKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gZ2V0QWN0aXZlSW52ZW50b3J5KCkucmdDaGlsZEludmVudG9yaWVzW2NoaWxkXS5yZ0ludmVudG9yeSkgewogICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGdldEFjdGl2ZUludmVudG9yeSgpLnJnQ2hpbGRJbnZlbnRvcmllc1tjaGlsZF0ucmdJbnZlbnRvcnlba2V5XTsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBNZXJnZXMgdGhlIGRlc2NyaXB0aW9uIGluIHRoZSBub3JtYWwgb2JqZWN0LCB0aGlzIGlzIGRvbmUgdG8ga2VlcCB0aGUgbGF5b3V0IGNvbnNpc3RlbnQgd2l0aCB0aGUgbWFya2V0IHBhZ2UsIHdoaWNoIGlzIGFsc28gZmxhdHRlbmVkLgogICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHZhbHVlLCB2YWx1ZS5kZXNjcmlwdGlvbik7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluY2x1ZGVzIHRoZSBpZCBvZiB0aGUgaW52ZW50b3J5IGl0ZW0uCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlWydpZCddID0ga2V5OwogICAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaCh2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBTb21lIGludmVudG9yaWVzIChlLmcuIEJhdHRsZUJsb2NrIFRoZWF0ZXIpIGRvIG5vdCBoYXZlIGNoaWxkIGludmVudG9yaWVzLCB0aGV5IGhhdmUganVzdCBvbmUuCiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBnZXRBY3RpdmVJbnZlbnRvcnkoKS5yZ0ludmVudG9yeSkgewogICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gZ2V0QWN0aXZlSW52ZW50b3J5KCkucmdJbnZlbnRvcnlba2V5XTsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gTWVyZ2VzIHRoZSBkZXNjcmlwdGlvbiBpbiB0aGUgbm9ybWFsIG9iamVjdCwgdGhpcyBpcyBkb25lIHRvIGtlZXAgdGhlIGxheW91dCBjb25zaXN0ZW50IHdpdGggdGhlIG1hcmtldCBwYWdlLCB3aGljaCBpcyBhbHNvIGZsYXR0ZW5lZC4KICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHZhbHVlLCB2YWx1ZS5kZXNjcmlwdGlvbik7CiAgICAgICAgICAgICAgICAgICAgLy8gSW5jbHVkZXMgdGhlIGlkIG9mIHRoZSBpbnZlbnRvcnkgaXRlbS4KICAgICAgICAgICAgICAgICAgICB2YWx1ZVsnaWQnXSA9IGtleTsKICAgICAgICAgICAgICAgICAgICBhcnIucHVzaCh2YWx1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBhcnI7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzdW1UcmFkZU9mZmVyQXNzZXRzKGFzc2V0cywgdXNlcikgewogICAgICAgICAgICB2YXIgdG90YWwgPSB7fTsKICAgICAgICAgICAgdmFyIHRvdGFsUHJpY2UgPSAwOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFzc2V0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdmFyIHJnSXRlbSA9IHVzZXIuZmluZEFzc2V0KGFzc2V0c1tpXS5hcHBpZCwgYXNzZXRzW2ldLmNvbnRleHRpZCwgYXNzZXRzW2ldLmFzc2V0aWQpOwoKICAgICAgICAgICAgICAgIHZhciB0ZXh0ID0gJyc7CiAgICAgICAgICAgICAgICBpZiAocmdJdGVtICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocmdJdGVtLmVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGludmVudG9yeVByaWNlRWxlbWVudHMgPSAkKCcuaW52ZW50b3J5X2l0ZW1fcHJpY2UnLCByZ0l0ZW0uZWxlbWVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnZlbnRvcnlQcmljZUVsZW1lbnRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpcnN0UHJpY2VFbGVtZW50ID0gaW52ZW50b3J5UHJpY2VFbGVtZW50c1swXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjbGFzc2VzID0gJChmaXJzdFByaWNlRWxlbWVudCkuYXR0cignY2xhc3MnKS5zcGxpdCgnICcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYyBpbiBjbGFzc2VzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsYXNzZXNbY10udG9TdHJpbmcoKS5pbmNsdWRlcygncHJpY2VfJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByaWNlID0gcGFyc2VJbnQoY2xhc3Nlc1tjXS50b1N0cmluZygpLnJlcGxhY2UoJ3ByaWNlXycsICcnKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsUHJpY2UgKz0gcHJpY2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHJnSXRlbS5vcmlnaW5hbF9hbW91bnQgIT0gbnVsbCAmJiByZ0l0ZW0uYW1vdW50ICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsQW1vdW50ID0gcGFyc2VJbnQocmdJdGVtLm9yaWdpbmFsX2Ftb3VudCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50QW1vdW50ID0gcGFyc2VJbnQocmdJdGVtLmFtb3VudCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1c2VkQW1vdW50ID0gb3JpZ2luYWxBbW91bnQgLSBjdXJyZW50QW1vdW50OwogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IHVzZWRBbW91bnQudG9TdHJpbmcoKSArICd4ICc7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IHJnSXRlbS5uYW1lOwoKICAgICAgICAgICAgICAgICAgICBpZiAocmdJdGVtLnR5cGUgIT0gbnVsbCAmJiByZ0l0ZW0udHlwZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgKz0gJyAoJyArIHJnSXRlbS50eXBlICsgJyknOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgICAgIHRleHQgPSAnVW5rbm93biBJdGVtJzsKCiAgICAgICAgICAgICAgICBpZiAodGV4dCBpbiB0b3RhbCkKICAgICAgICAgICAgICAgICAgICB0b3RhbFt0ZXh0XSA9IHRvdGFsW3RleHRdICsgMTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB0b3RhbFt0ZXh0XSA9IDE7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBzb3J0YWJsZSA9IFtdOwogICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIHRvdGFsKQogICAgICAgICAgICAgICAgc29ydGFibGUucHVzaChbaXRlbSwgdG90YWxbaXRlbV1dKQoKICAgICAgICAgICAgc29ydGFibGUuc29ydChmdW5jdGlvbihhLCBiKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYVsxXSAtIGJbMV07CiAgICAgICAgICAgIH0pLnJldmVyc2UoKTsKCiAgICAgICAgICAgIHZhciB0b3RhbFRleHQgPSAnPHN0cm9uZz5OdW1iZXIgb2YgaXRlbXM6ICcgKyBzb3J0YWJsZS5sZW5ndGggKyAnLCB3b3J0aCAnICsgKHRvdGFsUHJpY2UgLyAxMDApLnRvRml4ZWQoMikgKyBjdXJyZW5jeVN5bWJvbCArICc8YnIvPjxici8+PC9zdHJvbmc+JzsKCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc29ydGFibGUubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHRvdGFsVGV4dCArPSBzb3J0YWJsZVtpXVsxXSArICd4ICcgKyBzb3J0YWJsZVtpXVswXSArICc8YnIvPic7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiB0b3RhbFRleHQ7CiAgICAgICAgfQogICAgfQoKCiAgICB2YXIgbGFzdFRyYWRlT2ZmZXJTdW0gPSAwOwoKICAgIGZ1bmN0aW9uIGhhc0xvYWRlZEFsbFRyYWRlT2ZmZXJJdGVtcygpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVuc2FmZVdpbmRvdy5nX3JnQ3VycmVudFRyYWRlU3RhdHVzLnRoZW0uYXNzZXRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBhc3NldCA9IFVzZXJUaGVtLmZpbmRBc3NldCh1bnNhZmVXaW5kb3cuZ19yZ0N1cnJlbnRUcmFkZVN0YXR1cy50aGVtLmFzc2V0c1tpXS5hcHBpZCwgdW5zYWZlV2luZG93LmdfcmdDdXJyZW50VHJhZGVTdGF0dXMudGhlbS5hc3NldHNbaV0uY29udGV4dGlkLCB1bnNhZmVXaW5kb3cuZ19yZ0N1cnJlbnRUcmFkZVN0YXR1cy50aGVtLmFzc2V0c1tpXS5hc3NldGlkKTsKICAgICAgICAgICAgaWYgKGFzc2V0ID09IG51bGwpCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdW5zYWZlV2luZG93LmdfcmdDdXJyZW50VHJhZGVTdGF0dXMubWUuYXNzZXRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBhc3NldCA9IFVzZXJZb3UuZmluZEFzc2V0KHVuc2FmZVdpbmRvdy5nX3JnQ3VycmVudFRyYWRlU3RhdHVzLm1lLmFzc2V0c1tpXS5hcHBpZCwgdW5zYWZlV2luZG93LmdfcmdDdXJyZW50VHJhZGVTdGF0dXMubWUuYXNzZXRzW2ldLmNvbnRleHRpZCwgdW5zYWZlV2luZG93LmdfcmdDdXJyZW50VHJhZGVTdGF0dXMubWUuYXNzZXRzW2ldLmFzc2V0aWQpOwogICAgICAgICAgICBpZiAoYXNzZXQgPT0gbnVsbCkKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgfQoKICAgIGZ1bmN0aW9uIGluaXRpYWxpemVUcmFkZU9mZmVyVUkoKSB7CiAgICAgICAgdmFyIHVwZGF0ZUludmVudG9yeVByaWNlcyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBpZiAoZ2V0U2V0dGluZ1dpdGhEZWZhdWx0KFNFVFRJTkdfVFJBREVPRkZFUl9QUklDRV9MQUJFTFMpID09IDEpIHsKICAgICAgICAgICAgICAgIHNldEludmVudG9yeVByaWNlcyhnZXRUcmFkZU9mZmVySW52ZW50b3J5SXRlbXMoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICB2YXIgdXBkYXRlSW52ZW50b3J5UHJpY2VzSW5UcmFkZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgaXRlbXMgPSBbXTsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bnNhZmVXaW5kb3cuZ19yZ0N1cnJlbnRUcmFkZVN0YXR1cy50aGVtLmFzc2V0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdmFyIGFzc2V0ID0gVXNlclRoZW0uZmluZEFzc2V0KHVuc2FmZVdpbmRvdy5nX3JnQ3VycmVudFRyYWRlU3RhdHVzLnRoZW0uYXNzZXRzW2ldLmFwcGlkLCB1bnNhZmVXaW5kb3cuZ19yZ0N1cnJlbnRUcmFkZVN0YXR1cy50aGVtLmFzc2V0c1tpXS5jb250ZXh0aWQsIHVuc2FmZVdpbmRvdy5nX3JnQ3VycmVudFRyYWRlU3RhdHVzLnRoZW0uYXNzZXRzW2ldLmFzc2V0aWQpOwogICAgICAgICAgICAgICAgaXRlbXMucHVzaChhc3NldCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bnNhZmVXaW5kb3cuZ19yZ0N1cnJlbnRUcmFkZVN0YXR1cy5tZS5hc3NldHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBhc3NldCA9IFVzZXJZb3UuZmluZEFzc2V0KHVuc2FmZVdpbmRvdy5nX3JnQ3VycmVudFRyYWRlU3RhdHVzLm1lLmFzc2V0c1tpXS5hcHBpZCwgdW5zYWZlV2luZG93LmdfcmdDdXJyZW50VHJhZGVTdGF0dXMubWUuYXNzZXRzW2ldLmNvbnRleHRpZCwgdW5zYWZlV2luZG93LmdfcmdDdXJyZW50VHJhZGVTdGF0dXMubWUuYXNzZXRzW2ldLmFzc2V0aWQpOwogICAgICAgICAgICAgICAgaXRlbXMucHVzaChhc3NldCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2V0SW52ZW50b3J5UHJpY2VzKGl0ZW1zKTsKICAgICAgICB9OwoKICAgICAgICAkKCcudHJhZGVfcmlnaHQgPiBkaXYgPiBkaXYgPiBkaXYgPiAudHJhZGVfaXRlbV9ib3gnKS5vYnNlcnZlKCdjaGlsZGxpc3Qgc3VidHJlZScsIGZ1bmN0aW9uKHJlY29yZCkgewogICAgICAgICAgICBpZiAoIWhhc0xvYWRlZEFsbFRyYWRlT2ZmZXJJdGVtcygpKQogICAgICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgICAgdmFyIGN1cnJlbnRUcmFkZU9mZmVyU3VtID0gdW5zYWZlV2luZG93LmdfcmdDdXJyZW50VHJhZGVTdGF0dXMubWUuYXNzZXRzLmxlbmd0aCArIHVuc2FmZVdpbmRvdy5nX3JnQ3VycmVudFRyYWRlU3RhdHVzLnRoZW0uYXNzZXRzLmxlbmd0aDsKICAgICAgICAgICAgaWYgKGxhc3RUcmFkZU9mZmVyU3VtICE9IGN1cnJlbnRUcmFkZU9mZmVyU3VtKSB7CiAgICAgICAgICAgICAgICB1cGRhdGVJbnZlbnRvcnlQcmljZXNJblRyYWRlKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxhc3RUcmFkZU9mZmVyU3VtID0gY3VycmVudFRyYWRlT2ZmZXJTdW07CgogICAgICAgICAgICAkKCcjdHJhZGVfb2ZmZXJfeW91cl9zdW0nKS5yZW1vdmUoKTsKICAgICAgICAgICAgJCgnI3RyYWRlX29mZmVyX3RoZWlyX3N1bScpLnJlbW92ZSgpOwoKICAgICAgICAgICAgdmFyIHlvdXJfc3VtID0gc3VtVHJhZGVPZmZlckFzc2V0cyh1bnNhZmVXaW5kb3cuZ19yZ0N1cnJlbnRUcmFkZVN0YXR1cy5tZS5hc3NldHMsIFVzZXJZb3UpOwogICAgICAgICAgICB2YXIgdGhlaXJfc3VtID0gc3VtVHJhZGVPZmZlckFzc2V0cyh1bnNhZmVXaW5kb3cuZ19yZ0N1cnJlbnRUcmFkZVN0YXR1cy50aGVtLmFzc2V0cywgVXNlclRoZW0pOwoKICAgICAgICAgICAgJCgnZGl2Lm9mZmVyaGVhZGVyOm50aC1jaGlsZCgxKSA+IGRpdjpudGgtY2hpbGQoMyknKS5hcHBlbmQoJzxkaXYgY2xhc3M9InRyYWRlX29mZmVyX3N1bSIgaWQ9InRyYWRlX29mZmVyX3lvdXJfc3VtIj4nICsgeW91cl9zdW0gKyAnPC9kaXY+Jyk7CiAgICAgICAgICAgICQoJ2Rpdi5vZmZlcmhlYWRlcjpudGgtY2hpbGQoMykgPiBkaXY6bnRoLWNoaWxkKDMpJykuYXBwZW5kKCc8ZGl2IGNsYXNzPSJ0cmFkZV9vZmZlcl9zdW0iIGlkPSJ0cmFkZV9vZmZlcl90aGVpcl9zdW0iPicgKyB0aGVpcl9zdW0gKyAnPC9kaXY+Jyk7CiAgICAgICAgfSk7CgoKICAgICAgICAvLyBMb2FkIGFmdGVyIHRoZSBpbnZlbnRvcnkgaXMgbG9hZGVkLgogICAgICAgIHVwZGF0ZUludmVudG9yeVByaWNlcygpOwoKICAgICAgICAkKCcjaW52ZW50b3J5X3BhZ2Vjb250cm9scycpLm9ic2VydmUoJ2NoaWxkbGlzdCcsCiAgICAgICAgICAgICcqJywKICAgICAgICAgICAgZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgICAgICAgICAgICB1cGRhdGVJbnZlbnRvcnlQcmljZXMoKTsKICAgICAgICAgICAgfSk7CgoKICAgICAgICAvLyBUaGlzIG9ubHkgd29ya3Mgd2l0aCBhIG5ldyB0cmFkZSBvZmZlci4KICAgICAgICBpZiAoIXdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKCd0cmFkZW9mZmVyL25ldycpKQogICAgICAgICAgICByZXR1cm47CgogICAgICAgICQoJyNpbnZlbnRvcnlfZGlzcGxheWNvbnRyb2xzJykuYXBwZW5kKAogICAgICAgICAgICAnPGJyLz4nICsKICAgICAgICAgICAgJzxkaXYgY2xhc3M9InRyYWRlX29mZmVyX2J1dHRvbnMiPicgKwogICAgICAgICAgICAnPGEgY2xhc3M9Iml0ZW1fbWFya2V0X2FjdGlvbl9idXR0b24gaXRlbV9tYXJrZXRfYWN0aW9uX2J1dHRvbl9ncmVlbiBzZWxlY3RfYWxsIiBzdHlsZT0ibWFyZ2luLXRvcDoxcHgiPicgKwogICAgICAgICAgICAnPHNwYW4gY2xhc3M9Iml0ZW1fbWFya2V0X2FjdGlvbl9idXR0b25fY29udGVudHMiIHN0eWxlPSJ0ZXh0LXRyYW5zZm9ybTpub25lIj5TZWxlY3QgYWxsIGZyb20gcGFnZTwvc3Bhbj4nICsKICAgICAgICAgICAgJzwvYT4nICsKICAgICAgICAgICAgJzwvZGl2PicpOwoKICAgICAgICAkKCcuc2VsZWN0X2FsbCcpLm9uKCdjbGljaycsICcqJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICQoJy5pbnZlbnRvcnlfY3RuOnZpc2libGUgPiAuaW52ZW50b3J5X3BhZ2U6dmlzaWJsZSA+IC5pdGVtSG9sZGVyOnZpc2libGUnKS5kZWxheWVkRWFjaCgyNTAsIGZ1bmN0aW9uKGksIGl0KSB7CiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGl0LnJnSXRlbTsKICAgICAgICAgICAgICAgIGlmIChpdGVtLmlzX3N0YWNrYWJsZSkKICAgICAgICAgICAgICAgICAgICByZXR1cm47CgogICAgICAgICAgICAgICAgaWYgKCFpdGVtLnRyYWRhYmxlKQogICAgICAgICAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgICAgICAgICB1bnNhZmVXaW5kb3cuTW92ZUl0ZW1Ub1RyYWRlKGl0KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9CiAgICAvLyNlbmRyZWdpb24KCiAgICAvLyNyZWdpb24gU2V0dGluZ3MKICAgIGZ1bmN0aW9uIG9wZW5TZXR0aW5ncygpIHsKICAgICAgICB2YXIgcHJpY2Vfb3B0aW9ucyA9ICQoJzxkaXYgaWQ9InByaWNlX29wdGlvbnMiPicgKwogICAgICAgICAgICAnPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTo2cHg7Ij4nICsKICAgICAgICAgICAgJ0NhbGN1bGF0ZSBwcmljZXMgYXMgdGhlOiZuYnNwOzxzZWxlY3QgY2xhc3M9InByaWNlX29wdGlvbl9pbnB1dCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6IGJsYWNrO2NvbG9yOiB3aGl0ZTtib3JkZXI6IHRyYW5zcGFyZW50OyIgaWQ9IicgKyBTRVRUSU5HX1BSSUNFX0FMR09SSVRITSArICciPicgKwogICAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT0iMSInICsgKGdldFNldHRpbmdXaXRoRGVmYXVsdChTRVRUSU5HX1BSSUNFX0FMR09SSVRITSkgPT0gMSA/ICdzZWxlY3RlZD0ic2VsZWN0ZWQiJyA6ICcnKSArICc+TWF4aW11bSBvZiB0aGUgYXZlcmFnZSBoaXN0b3J5IGFuZCBsb3dlc3Qgc2VsbCBsaXN0aW5nPC9vcHRpb24+JyArCiAgICAgICAgICAgICc8b3B0aW9uIHZhbHVlPSIyIiAnICsgKGdldFNldHRpbmdXaXRoRGVmYXVsdChTRVRUSU5HX1BSSUNFX0FMR09SSVRITSkgPT0gMiA/ICdzZWxlY3RlZD0ic2VsZWN0ZWQiJyA6ICcnKSArICc+TG93ZXN0IHNlbGwgbGlzdGluZzwvb3B0aW9uPicgKwogICAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT0iMyIgJyArIChnZXRTZXR0aW5nV2l0aERlZmF1bHQoU0VUVElOR19QUklDRV9BTEdPUklUSE0pID09IDMgPyAnc2VsZWN0ZWQ9InNlbGVjdGVkIicgOiAnJykgKyAnPkhpZ2hlc3QgY3VycmVudCBidXkgb3JkZXIgb3IgbG93ZXN0IHNlbGwgbGlzdGluZzwvb3B0aW9uPicgKwogICAgICAgICAgICAnPC9zZWxlY3Q+JyArCiAgICAgICAgICAgICc8YnIvPicgKwogICAgICAgICAgICAnPC9kaXY+JyArCiAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOjZweDsiPicgKwogICAgICAgICAgICAnSG91cnMgdG8gdXNlIGZvciB0aGUgYXZlcmFnZSBoaXN0b3J5IGNhbGN1bGF0ZWQgcHJpY2U6Jm5ic3A7PGlucHV0IGNsYXNzPSJwcmljZV9vcHRpb25faW5wdXQiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztjb2xvcjogd2hpdGU7Ym9yZGVyOiB0cmFuc3BhcmVudDsiIHR5cGU9Im51bWJlciIgc3RlcD0iMiIgaWQ9IicgKyBTRVRUSU5HX1BSSUNFX0hJU1RPUllfSE9VUlMgKyAnIiB2YWx1ZT0nICsgZ2V0U2V0dGluZ1dpdGhEZWZhdWx0KFNFVFRJTkdfUFJJQ0VfSElTVE9SWV9IT1VSUykgKyAnPicgKwogICAgICAgICAgICAnPC9kaXY+JyArCiAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOjZweDsiPicgKwogICAgICAgICAgICAnVGhlIHZhbHVlIHRvIGFkZCB0byB0aGUgY2FsY3VsYXRlZCBwcmljZSAobWluaW11bSBhbmQgbWF4aW11bSBhcmUgcmVzcGVjdGVkKTombmJzcDs8aW5wdXQgY2xhc3M9InByaWNlX29wdGlvbl9pbnB1dCBwcmljZV9vcHRpb25fcHJpY2UiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztjb2xvcjogd2hpdGU7Ym9yZGVyOiB0cmFuc3BhcmVudDsiIHR5cGU9Im51bWJlciIgc3RlcD0iMC4wMSIgaWQ9IicgKyBTRVRUSU5HX1BSSUNFX09GRlNFVCArICciIHZhbHVlPScgKyBnZXRTZXR0aW5nV2l0aERlZmF1bHQoU0VUVElOR19QUklDRV9PRkZTRVQpICsgJz4nICsKICAgICAgICAgICAgJzxici8+JyArCiAgICAgICAgICAgICc8L2Rpdj4nICsKICAgICAgICAgICAgJzxkaXYgc3R5bGU9Im1hcmdpbi10b3A6NnB4Ij4nICsKICAgICAgICAgICAgJ1VzZSB0aGUgc2Vjb25kIGxvd2VzdCBzZWxsIGxpc3Rpbmcgd2hlbiB0aGUgbG93ZXN0IHNlbGwgbGlzdGluZyBoYXMgYSBsb3cgcXVhbnRpdHk6Jm5ic3A7PGlucHV0IGNsYXNzPSJwcmljZV9vcHRpb25faW5wdXQiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztjb2xvcjogd2hpdGU7Ym9yZGVyOiB0cmFuc3BhcmVudDsiIHR5cGU9ImNoZWNrYm94IiBpZD0iJyArIFNFVFRJTkdfUFJJQ0VfSUdOT1JFX0xPV0VTVF9RICsgJyIgJyArIChnZXRTZXR0aW5nV2l0aERlZmF1bHQoU0VUVElOR19QUklDRV9JR05PUkVfTE9XRVNUX1EpID09IDEgPyAnY2hlY2tlZD0iIicgOiAnJykgKyAnPicgKwogICAgICAgICAgICAnPGJyLz4nICsKICAgICAgICAgICAgJzwvZGl2PicgKwogICAgICAgICAgICAnPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDo2cHg7Ij4nICsKICAgICAgICAgICAgJ0RvblwndCBjaGVjayBtYXJrZXQgbGlzdGluZ3Mgd2l0aCBwcmljZXMgb2YgYW5kIGJlbG93OiZuYnNwOzxpbnB1dCBjbGFzcz0icHJpY2Vfb3B0aW9uX2lucHV0IHByaWNlX29wdGlvbl9wcmljZSIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6IGJsYWNrO2NvbG9yOiB3aGl0ZTtib3JkZXI6IHRyYW5zcGFyZW50OyIgdHlwZT0ibnVtYmVyIiBzdGVwPSIwLjAxIiBpZD0iJyArIFNFVFRJTkdfUFJJQ0VfTUlOX0NIRUNLX1BSSUNFICsgJyIgdmFsdWU9JyArIGdldFNldHRpbmdXaXRoRGVmYXVsdChTRVRUSU5HX1BSSUNFX01JTl9DSEVDS19QUklDRSkgKyAnPicgKwogICAgICAgICAgICAnPGJyLz4nICsKICAgICAgICAgICAgJzwvZGl2PicgKwogICAgICAgICAgICAnPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoyNHB4Ij4nICsKICAgICAgICAgICAgJ1Nob3cgcHJpY2UgbGFiZWxzIGluIGludmVudG9yeTombmJzcDs8aW5wdXQgY2xhc3M9InByaWNlX29wdGlvbl9pbnB1dCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6IGJsYWNrO2NvbG9yOiB3aGl0ZTtib3JkZXI6IHRyYW5zcGFyZW50OyIgdHlwZT0iY2hlY2tib3giIGlkPSInICsgU0VUVElOR19JTlZFTlRPUllfUFJJQ0VfTEFCRUxTICsgJyIgJyArIChnZXRTZXR0aW5nV2l0aERlZmF1bHQoU0VUVElOR19JTlZFTlRPUllfUFJJQ0VfTEFCRUxTKSA9PSAxID8gJ2NoZWNrZWQ9IiInIDogJycpICsgJz4nICsKICAgICAgICAgICAgJzwvZGl2PicgKwogICAgICAgICAgICAnPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDo2cHgiPicgKwogICAgICAgICAgICAnU2hvdyBwcmljZSBsYWJlbHMgaW4gdHJhZGUgb2ZmZXJzOiZuYnNwOzxpbnB1dCBjbGFzcz0icHJpY2Vfb3B0aW9uX2lucHV0IiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7Y29sb3I6IHdoaXRlO2JvcmRlcjogdHJhbnNwYXJlbnQ7IiB0eXBlPSJjaGVja2JveCIgaWQ9IicgKyBTRVRUSU5HX1RSQURFT0ZGRVJfUFJJQ0VfTEFCRUxTICsgJyIgJyArIChnZXRTZXR0aW5nV2l0aERlZmF1bHQoU0VUVElOR19UUkFERU9GRkVSX1BSSUNFX0xBQkVMUykgPT0gMSA/ICdjaGVja2VkPSIiJyA6ICcnKSArICc+JyArCiAgICAgICAgICAgICc8L2Rpdj4nICsKICAgICAgICAgICAgJzxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MjRweCI+JyArCiAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOjZweDsiPicgKwogICAgICAgICAgICAnTWluaW11bTombmJzcDs8aW5wdXQgY2xhc3M9InByaWNlX29wdGlvbl9pbnB1dCBwcmljZV9vcHRpb25fcHJpY2UiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztjb2xvcjogd2hpdGU7Ym9yZGVyOiB0cmFuc3BhcmVudDsiIHR5cGU9Im51bWJlciIgc3RlcD0iMC4wMSIgaWQ9IicgKyBTRVRUSU5HX01JTl9OT1JNQUxfUFJJQ0UgKyAnIiB2YWx1ZT0nICsgZ2V0U2V0dGluZ1dpdGhEZWZhdWx0KFNFVFRJTkdfTUlOX05PUk1BTF9QUklDRSkgKyAnPiZuYnNwOycgKwogICAgICAgICAgICAnYW5kIG1heGltdW06Jm5ic3A7PGlucHV0IGNsYXNzPSJwcmljZV9vcHRpb25faW5wdXQgcHJpY2Vfb3B0aW9uX3ByaWNlIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7Y29sb3I6IHdoaXRlO2JvcmRlcjogdHJhbnNwYXJlbnQ7IiB0eXBlPSJudW1iZXIiIHN0ZXA9IjAuMDEiIGlkPSInICsgU0VUVElOR19NQVhfTk9STUFMX1BSSUNFICsgJyIgdmFsdWU9JyArIGdldFNldHRpbmdXaXRoRGVmYXVsdChTRVRUSU5HX01BWF9OT1JNQUxfUFJJQ0UpICsgJz4mbmJzcDtwcmljZSBmb3Igbm9ybWFsIGNhcmRzJyArCiAgICAgICAgICAgICc8YnIvPicgKwogICAgICAgICAgICAnPC9kaXY+JyArCiAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOjZweDsiPicgKwogICAgICAgICAgICAnTWluaW11bTombmJzcDs8aW5wdXQgY2xhc3M9InByaWNlX29wdGlvbl9pbnB1dCBwcmljZV9vcHRpb25fcHJpY2UiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztjb2xvcjogd2hpdGU7Ym9yZGVyOiB0cmFuc3BhcmVudDsiIHR5cGU9Im51bWJlciIgc3RlcD0iMC4wMSIgaWQ9IicgKyBTRVRUSU5HX01JTl9GT0lMX1BSSUNFICsgJyIgdmFsdWU9JyArIGdldFNldHRpbmdXaXRoRGVmYXVsdChTRVRUSU5HX01JTl9GT0lMX1BSSUNFKSArICc+Jm5ic3A7JyArCiAgICAgICAgICAgICdhbmQgbWF4aW11bTombmJzcDs8aW5wdXQgY2xhc3M9InByaWNlX29wdGlvbl9pbnB1dCBwcmljZV9vcHRpb25fcHJpY2UiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztjb2xvcjogd2hpdGU7Ym9yZGVyOiB0cmFuc3BhcmVudDsiIHR5cGU9Im51bWJlciIgc3RlcD0iMC4wMSIgaWQ9IicgKyBTRVRUSU5HX01BWF9GT0lMX1BSSUNFICsgJyIgdmFsdWU9JyArIGdldFNldHRpbmdXaXRoRGVmYXVsdChTRVRUSU5HX01BWF9GT0lMX1BSSUNFKSArICc+Jm5ic3A7cHJpY2UgZm9yIGZvaWwgY2FyZHMnICsKICAgICAgICAgICAgJzxici8+JyArCiAgICAgICAgICAgICc8L2Rpdj4nICsKICAgICAgICAgICAgJzxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206NnB4OyI+JyArCiAgICAgICAgICAgICdNaW5pbXVtOiZuYnNwOzxpbnB1dCBjbGFzcz0icHJpY2Vfb3B0aW9uX2lucHV0IHByaWNlX29wdGlvbl9wcmljZSIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6IGJsYWNrO2NvbG9yOiB3aGl0ZTtib3JkZXI6IHRyYW5zcGFyZW50OyIgdHlwZT0ibnVtYmVyIiBzdGVwPSIwLjAxIiBpZD0iJyArIFNFVFRJTkdfTUlOX01JU0NfUFJJQ0UgKyAnIiB2YWx1ZT0nICsgZ2V0U2V0dGluZ1dpdGhEZWZhdWx0KFNFVFRJTkdfTUlOX01JU0NfUFJJQ0UpICsgJz4mbmJzcDsnICsKICAgICAgICAgICAgJ2FuZCBtYXhpbXVtOiZuYnNwOzxpbnB1dCBjbGFzcz0icHJpY2Vfb3B0aW9uX2lucHV0IHByaWNlX29wdGlvbl9wcmljZSIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6IGJsYWNrO2NvbG9yOiB3aGl0ZTtib3JkZXI6IHRyYW5zcGFyZW50OyIgdHlwZT0ibnVtYmVyIiBzdGVwPSIwLjAxIiBpZD0iJyArIFNFVFRJTkdfTUFYX01JU0NfUFJJQ0UgKyAnIiB2YWx1ZT0nICsgZ2V0U2V0dGluZ1dpdGhEZWZhdWx0KFNFVFRJTkdfTUFYX01JU0NfUFJJQ0UpICsgJz4mbmJzcDtwcmljZSBmb3Igb3RoZXIgaXRlbXMnICsKICAgICAgICAgICAgJzxici8+JyArCiAgICAgICAgICAgICc8L2Rpdj4nICsKICAgICAgICAgICAgJzxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MjRweDttYXJnaW4tYm90dG9tOjZweDsiPicgKwogICAgICAgICAgICAnTWFya2V0IGl0ZW1zIHBlciBwYWdlOiZuYnNwOzxpbnB1dCBjbGFzcz0icHJpY2Vfb3B0aW9uX2lucHV0IHByaWNlX29wdGlvbl9wcmljZSIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6IGJsYWNrO2NvbG9yOiB3aGl0ZTtib3JkZXI6IHRyYW5zcGFyZW50OyIgdHlwZT0ibnVtYmVyIiBzdGVwPSIwLjAxIiBpZD0iJyArIFNFVFRJTkdfTUFSS0VUX1BBR0VfQ09VTlQgKyAnIiB2YWx1ZT0nICsgZ2V0U2V0dGluZ1dpdGhEZWZhdWx0KFNFVFRJTkdfTUFSS0VUX1BBR0VfQ09VTlQpICsgJz4nICsKICAgICAgICAgICAgJzxici8+JyArCiAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjZweDsiPicgKwogICAgICAgICAgICAnQXV0b21hdGljYWxseSByZWxpc3Qgb3ZlcnByaWNlZCBtYXJrZXQgbGlzdGluZ3MgKHNsb3cgb24gbGFyZ2UgaW52ZW50b3JpZXMpOiZuYnNwOzxpbnB1dCBpZD0iJyArIFNFVFRJTkdfUkVMSVNUX0FVVE9NQVRJQ0FMTFkgKyAnIiBjbGFzcz0ibWFya2V0X3JlbGlzdF9hdXRvIiB0eXBlPSJjaGVja2JveCIgJyArIChnZXRTZXR0aW5nV2l0aERlZmF1bHQoU0VUVElOR19SRUxJU1RfQVVUT01BVElDQUxMWSkgPT0gMSA/ICdjaGVja2VkPSIiJyA6ICcnKSArICc+JyArCiAgICAgICAgICAgICc8L2xhYmVsPicgKwogICAgICAgICAgICAnPC9kaXY+JyArCiAgICAgICAgICAgICc8L2Rpdj4nICsKICAgICAgICAgICAgJzwvZGl2PicpOwoKICAgICAgICB2YXIgZGlhbG9nID0gdW5zYWZlV2luZG93LlNob3dDb25maXJtRGlhbG9nKCdTdGVhbSBFY29ub215IEVuaGFuY2VyJywgcHJpY2Vfb3B0aW9ucykuZG9uZShmdW5jdGlvbigpIHsKICAgICAgICAgICAgc2V0U2V0dGluZyhTRVRUSU5HX01JTl9OT1JNQUxfUFJJQ0UsICQoJyMnICsgU0VUVElOR19NSU5fTk9STUFMX1BSSUNFLCBwcmljZV9vcHRpb25zKS52YWwoKSk7CiAgICAgICAgICAgIHNldFNldHRpbmcoU0VUVElOR19NQVhfTk9STUFMX1BSSUNFLCAkKCcjJyArIFNFVFRJTkdfTUFYX05PUk1BTF9QUklDRSwgcHJpY2Vfb3B0aW9ucykudmFsKCkpOwogICAgICAgICAgICBzZXRTZXR0aW5nKFNFVFRJTkdfTUlOX0ZPSUxfUFJJQ0UsICQoJyMnICsgU0VUVElOR19NSU5fRk9JTF9QUklDRSwgcHJpY2Vfb3B0aW9ucykudmFsKCkpOwogICAgICAgICAgICBzZXRTZXR0aW5nKFNFVFRJTkdfTUFYX0ZPSUxfUFJJQ0UsICQoJyMnICsgU0VUVElOR19NQVhfRk9JTF9QUklDRSwgcHJpY2Vfb3B0aW9ucykudmFsKCkpOwogICAgICAgICAgICBzZXRTZXR0aW5nKFNFVFRJTkdfTUlOX01JU0NfUFJJQ0UsICQoJyMnICsgU0VUVElOR19NSU5fTUlTQ19QUklDRSwgcHJpY2Vfb3B0aW9ucykudmFsKCkpOwogICAgICAgICAgICBzZXRTZXR0aW5nKFNFVFRJTkdfTUFYX01JU0NfUFJJQ0UsICQoJyMnICsgU0VUVElOR19NQVhfTUlTQ19QUklDRSwgcHJpY2Vfb3B0aW9ucykudmFsKCkpOwogICAgICAgICAgICBzZXRTZXR0aW5nKFNFVFRJTkdfUFJJQ0VfT0ZGU0VULCAkKCcjJyArIFNFVFRJTkdfUFJJQ0VfT0ZGU0VULCBwcmljZV9vcHRpb25zKS52YWwoKSk7CiAgICAgICAgICAgIHNldFNldHRpbmcoU0VUVElOR19QUklDRV9NSU5fQ0hFQ0tfUFJJQ0UsICQoJyMnICsgU0VUVElOR19QUklDRV9NSU5fQ0hFQ0tfUFJJQ0UsIHByaWNlX29wdGlvbnMpLnZhbCgpKTsKICAgICAgICAgICAgc2V0U2V0dGluZyhTRVRUSU5HX1BSSUNFX0FMR09SSVRITSwgJCgnIycgKyBTRVRUSU5HX1BSSUNFX0FMR09SSVRITSwgcHJpY2Vfb3B0aW9ucykudmFsKCkpOwogICAgICAgICAgICBzZXRTZXR0aW5nKFNFVFRJTkdfUFJJQ0VfSUdOT1JFX0xPV0VTVF9RLCAkKCcjJyArIFNFVFRJTkdfUFJJQ0VfSUdOT1JFX0xPV0VTVF9RLCBwcmljZV9vcHRpb25zKS5wcm9wKCdjaGVja2VkJykgPyAxIDogMCk7CiAgICAgICAgICAgIHNldFNldHRpbmcoU0VUVElOR19QUklDRV9ISVNUT1JZX0hPVVJTLCAkKCcjJyArIFNFVFRJTkdfUFJJQ0VfSElTVE9SWV9IT1VSUywgcHJpY2Vfb3B0aW9ucykudmFsKCkpOwogICAgICAgICAgICBzZXRTZXR0aW5nKFNFVFRJTkdfTUFSS0VUX1BBR0VfQ09VTlQsICQoJyMnICsgU0VUVElOR19NQVJLRVRfUEFHRV9DT1VOVCwgcHJpY2Vfb3B0aW9ucykudmFsKCkpOwogICAgICAgICAgICBzZXRTZXR0aW5nKFNFVFRJTkdfUkVMSVNUX0FVVE9NQVRJQ0FMTFksICQoJyMnICsgU0VUVElOR19SRUxJU1RfQVVUT01BVElDQUxMWSwgcHJpY2Vfb3B0aW9ucykucHJvcCgnY2hlY2tlZCcpID8gMSA6IDApOwogICAgICAgICAgICBzZXRTZXR0aW5nKFNFVFRJTkdfSU5WRU5UT1JZX1BSSUNFX0xBQkVMUywgJCgnIycgKyBTRVRUSU5HX0lOVkVOVE9SWV9QUklDRV9MQUJFTFMsIHByaWNlX29wdGlvbnMpLnByb3AoJ2NoZWNrZWQnKSA/IDEgOiAwKTsKICAgICAgICAgICAgc2V0U2V0dGluZyhTRVRUSU5HX1RSQURFT0ZGRVJfUFJJQ0VfTEFCRUxTLCAkKCcjJyArIFNFVFRJTkdfVFJBREVPRkZFUl9QUklDRV9MQUJFTFMsIHByaWNlX29wdGlvbnMpLnByb3AoJ2NoZWNrZWQnKSA/IDEgOiAwKTsKCiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9KTsKICAgIH0KICAgIC8vI2VuZHJlZ2lvbgoKICAgIC8vI3JlZ2lvbiBVSQogICAgaW5qZWN0Q3NzKCcudWktc2VsZWN0ZWQgeyBvdXRsaW5lOiAycHggZGFzaGVkICNGRkZGRkY7IH0gJyArCiAgICAgICAgJyNsb2dnZXIgeyBjb2xvcjogIzc2NzY3NjsgZm9udC1zaXplOiAxMnB4O21hcmdpbi10b3A6MTZweDsgbWF4LWhlaWdodDogMjAwcHg7IG92ZXJmbG93LXk6IGF1dG87IH0nICsKICAgICAgICAnLnRyYWRlX29mZmVyX3N1bSB7IGNvbG9yOiAjNzY3Njc2OyBmb250LXNpemU6IDEycHg7bWFyZ2luLXRvcDo4cHg7IH0nICsKICAgICAgICAnLnRyYWRlX29mZmVyX2J1dHRvbnMgeyBtYXJnaW4tdG9wOiAxMnB4OyB9JyArCiAgICAgICAgJy5tYXJrZXRfY29tbW9kaXR5X29yZGVyc190YWJsZSB7IGZvbnQtc2l6ZToxMnB4OyBmb250LWZhbWlseTogIk1vdGl2YSBTYW5zIiwgU2Fucy1zZXJpZjsgZm9udC13ZWlnaHQ6IDMwMDsgfScgKwogICAgICAgICcubWFya2V0X2NvbW1vZGl0eV9vcmRlcnNfdGFibGUgdGggeyBwYWRkaW5nLWxlZnQ6IDEwcHg7IH0nICsKICAgICAgICAnI2xpc3RpbmdzX2dyb3VwIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBtYXJnaW4tYm90dG9tOiA4cHg7IH0nICsKICAgICAgICAnI2xpc3RpbmdzX3NlbGwgeyB0ZXh0LWFsaWduOiByaWdodDsgY29sb3I6ICM1ODkzMjg7IGZvbnQtd2VpZ2h0OjYwMDsgfScgKwogICAgICAgICcjbGlzdGluZ3NfYnV5IHsgdGV4dC1hbGlnbjogcmlnaHQ7IGNvbG9yOiAjNTg5MzI4OyBmb250LXdlaWdodDo2MDA7IH0nICsKICAgICAgICAnLm1hcmtldF9saXN0aW5nX215X3ByaWNlIHsgaGVpZ2h0OiA1MHB4OyBwYWRkaW5nLXJpZ2h0OjZweDsgfScgKwogICAgICAgICcubWFya2V0X2xpc3RpbmdfZWRpdF9idXR0b25zLmFjdHVhbF9jb250ZW50IHsgd2lkdGg6Mjc2cHg7IHRyYW5zaXRpb24tcHJvcGVydHk6IGJhY2tncm91bmQtY29sb3IsIGJvcmRlci1jb2xvcjsgdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGxpbmVhcjsgdHJhbnNpdGlvbi1kdXJhdGlvbjogMC41czt9JyArCiAgICAgICAgJy5tYXJrZXRfbGlzdGluZ19idXR0b25zIHsgbWFyZ2luLXRvcDogNnB4OyBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuNCk7IHBhZGRpbmc6IDVweCAwcHggMXB4IDBweDsgfScgKwogICAgICAgICcubWFya2V0X2xpc3RpbmdfYnV0dG9uIHsgbWFyZ2luLXJpZ2h0OiA0cHg7IH0nICsKICAgICAgICAnLm1hcmtldF9saXN0aW5nX2J1dHRvbl9yaWdodCB7IGZsb2F0OnJpZ2h0OyB9JyArCiAgICAgICAgJy5tYXJrZXRfbGlzdGluZ19idXR0b246Zmlyc3QtY2hpbGQgeyBtYXJnaW4tbGVmdDogNHB4OyB9JyArCiAgICAgICAgJy5tYXJrZXRfbGlzdGluZ19sYWJlbF9yaWdodCB7IGZsb2F0OnJpZ2h0OyBmb250LXNpemU6MTJweDsgbWFyZ2luLXRvcDoxcHg7IH0nICsKICAgICAgICAnLm1hcmtldF9saXN0aW5nX3NlbGVjdCB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAxNnB4O3JpZ2h0OiAxMHB4OyBkaXNwbGF5OiBmbGV4OyB9JyArCiAgICAgICAgJyNtYXJrZXRfbGlzdGluZ19yZWxpc3QgeyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyBwb3NpdGlvbjogcmVsYXRpdmU7IGJvdHRvbTogLTFweDsgcmlnaHQ6IDJweDsgfScgKwogICAgICAgICcucGlja19hbmRfc2VsbF9idXR0b24gPiBhIHsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgfScgKwogICAgICAgICcubWFya2V0X3JlbGlzdF9hdXRvIHsgbWFyZ2luLWJvdHRvbTogOHB4OyAgfScgKwogICAgICAgICcubWFya2V0X3JlbGlzdF9hdXRvX2xhYmVsIHsgbWFyZ2luLXJpZ2h0OiA2cHg7ICB9JyArCiAgICAgICAgJy5xdWlja19zZWxsIHsgbWFyZ2luLXJpZ2h0OiA0cHg7IH0nICsKICAgICAgICAnLnNwaW5uZXJ7bWFyZ2luOjEwcHggYXV0bzt3aWR0aDo1MHB4O2hlaWdodDo0MHB4O3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtc2l6ZToxMHB4O30uc3Bpbm5lciA+IGRpdntiYWNrZ3JvdW5kLWNvbG9yOiNjY2M7aGVpZ2h0OjEwMCU7d2lkdGg6NnB4O2Rpc3BsYXk6aW5saW5lLWJsb2NrOy13ZWJraXQtYW5pbWF0aW9uOnNrLXN0cmV0Y2hkZWxheSAxLjJzIGluZmluaXRlIGVhc2UtaW4tb3V0O2FuaW1hdGlvbjpzay1zdHJldGNoZGVsYXkgMS4ycyBpbmZpbml0ZSBlYXNlLWluLW91dH0uc3Bpbm5lciAucmVjdDJ7LXdlYmtpdC1hbmltYXRpb24tZGVsYXk6LTEuMXM7YW5pbWF0aW9uLWRlbGF5Oi0xLjFzfS5zcGlubmVyIC5yZWN0M3std2Via2l0LWFuaW1hdGlvbi1kZWxheTotMXM7YW5pbWF0aW9uLWRlbGF5Oi0xc30uc3Bpbm5lciAucmVjdDR7LXdlYmtpdC1hbmltYXRpb24tZGVsYXk6LS45czthbmltYXRpb24tZGVsYXk6LS45c30uc3Bpbm5lciAucmVjdDV7LXdlYmtpdC1hbmltYXRpb24tZGVsYXk6LS44czthbmltYXRpb24tZGVsYXk6LS44c31ALXdlYmtpdC1rZXlmcmFtZXMgc2stc3RyZXRjaGRlbGF5ezAlLDQwJSwxMDAley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlWSgwLjQpfTIwJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZVkoMS4wKX19QGtleWZyYW1lcyBzay1zdHJldGNoZGVsYXl7MCUsNDAlLDEwMCV7dHJhbnNmb3JtOnNjYWxlWSgwLjQpOy13ZWJraXQtdHJhbnNmb3JtOnNjYWxlWSgwLjQpfTIwJXt0cmFuc2Zvcm06c2NhbGVZKDEuMCk7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGVZKDEuMCl9fScgKwogICAgICAgICcjbWFya2V0X25hbWVfc2VhcmNoIHsgZmxvYXQ6IHJpZ2h0OyBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMjUpOyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTtoZWlnaHQ6IDI1cHg7IHBhZGRpbmctbGVmdDogNnB4O30nICsKICAgICAgICAnLnByaWNlX29wdGlvbl9wcmljZSB7IHdpZHRoOiAxMDBweCB9JyArCiAgICAgICAgJyNzZWVfc2V0dGluZ3MgeyBiYWNrZ3JvdW5kOiAjMjY1NjZjOyBtYXJnaW4tcmlnaHQ6IDEwcHg7IGhlaWdodDogMjRweDsgbGluZS1oZWlnaHQ6MjRweDsgZGlzcGxheTppbmxpbmUtYmxvY2s7IHBhZGRpbmc6IDBweCA2cHg7IH0nICsKICAgICAgICAnLmludmVudG9yeV9pdGVtX3ByaWNlIHsgdG9wOiAwcHg7cG9zaXRpb246IGFic29sdXRlO3JpZ2h0OiAwO2JhY2tncm91bmQ6ICMzNTcxYTU7cGFkZGluZzogMnB4O2NvbG9yOiB3aGl0ZTsgZm9udC1zaXplOjExcHg7IGJvcmRlcjogMXB4IHNvbGlkICM2NjY2NjY7fScgKwogICAgICAgICcuc2VwYXJhdG9yLWxhcmdlIHtkaXNwbGF5OmlubGluZS1ibG9jazt3aWR0aDo2cHg7fScgKwogICAgICAgICcuc2VwYXJhdG9yLXNtYWxsIHtkaXNwbGF5OmlubGluZS1ibG9jazt3aWR0aDoxcHg7fScgKwogICAgICAgICcuc2VwYXJhdG9yLWJ0bi1yaWdodCB7bWFyZ2luLXJpZ2h0OjEycHg7fScgKwogICAgICAgICcucGFnaW5hdGlvbiB7IHBhZGRpbmctbGVmdDogMHB4OyB9JyArCiAgICAgICAgJy5wYWdpbmF0aW9uIGxpIHsgZGlzcGxheTppbmxpbmUtYmxvY2s7IHBhZGRpbmc6IDVweCAxMHB4O2JhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xMCk7IG1hcmdpbi1yaWdodDogNnB4OyBib3JkZXI6IDFweCBzb2xpZCAjNjY2NjY2OyB9JyArCiAgICAgICAgJy5wYWdpbmF0aW9uIGxpLmFjdGl2ZSB7IGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yNSk7IH0nKTsKCiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHsKICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHVzZXIgaXMgbG9nZ2VkIGluLCB0aGVyZSdzIG5vdCBtdWNoIHdlIGNhbiBkbyBvdGhlcndpc2UuCiAgICAgICAgaWYgKCFpc0xvZ2dlZEluKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChjdXJyZW50UGFnZSA9PSBQQUdFX0lOVkVOVE9SWSkgewogICAgICAgICAgICBpbml0aWFsaXplSW52ZW50b3J5VUkoKTsKICAgICAgICB9CgogICAgICAgIGlmIChjdXJyZW50UGFnZSA9PSBQQUdFX01BUktFVCB8fCBjdXJyZW50UGFnZSA9PSBQQUdFX01BUktFVF9MSVNUSU5HKSB7CiAgICAgICAgICAgIGluaXRpYWxpemVNYXJrZXRVSSgpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGN1cnJlbnRQYWdlID09IFBBR0VfVFJBREVPRkZFUikgewogICAgICAgICAgICBpbml0aWFsaXplVHJhZGVPZmZlclVJKCk7CiAgICAgICAgfQogICAgfSk7CgogICAgZnVuY3Rpb24gaW5qZWN0Q3NzKGNzcykgewogICAgICAgIHZhciBoZWFkLCBzdHlsZTsKICAgICAgICBoZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTsKICAgICAgICBpZiAoIWhlYWQpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICAgICAgc3R5bGUudHlwZSA9ICd0ZXh0L2Nzcyc7CiAgICAgICAgc3R5bGUuaW5uZXJIVE1MID0gY3NzOwogICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGluamVjdEpzKGpzKSB7CiAgICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoInR5cGUiLCAiYXBwbGljYXRpb24vamF2YXNjcmlwdCIpOwogICAgICAgIHNjcmlwdC50ZXh0Q29udGVudCA9ICcoJyArIGpzICsgJykoKTsnOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTsKICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcmlwdCk7CiAgICB9CgogICAgJC5mbi5kZWxheWVkRWFjaCA9IGZ1bmN0aW9uKHRpbWVvdXQsIGNhbGxiYWNrLCBjb250aW51b3VzKSB7CiAgICAgICAgdmFyICRlbHMsIGl0ZXJhdG9yOwoKICAgICAgICAkZWxzID0gdGhpczsKICAgICAgICBpdGVyYXRvciA9IGZ1bmN0aW9uKGluZGV4KSB7CiAgICAgICAgICAgIHZhciBjdXI7CgogICAgICAgICAgICBpZiAoaW5kZXggPj0gJGVscy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGlmICghY29udGludW91cykgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGluZGV4ID0gMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY3VyID0gJGVsc1tpbmRleF07CiAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoY3VyLCBpbmRleCwgY3VyKTsKCiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBpdGVyYXRvcigrK2luZGV4KTsKICAgICAgICAgICAgfSwgdGltZW91dCk7CiAgICAgICAgfTsKCiAgICAgICAgaXRlcmF0b3IoMCk7CiAgICB9OwoKICAgIFN0cmluZy5wcm90b3R5cGUucmVwbGFjZUFsbCA9IGZ1bmN0aW9uKHNlYXJjaCwgcmVwbGFjZW1lbnQpIHsKICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpczsKICAgICAgICByZXR1cm4gdGFyZ2V0LnJlcGxhY2UobmV3IFJlZ0V4cChzZWFyY2gsICdnJyksIHJlcGxhY2VtZW50KTsKICAgIH07CiAgICAvLyNlbmRyZWdpb24KfSkoalF1ZXJ5LCBhc3luYyk7Cg==","requires":[{"meta":{"name":"pagination.min.js","url":"https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.1.2/pagination.min.js","ts":1608308695213,"mimetype":"text/javascript"},"source":"LyoKICogcGFnaW5hdGlvbi5qcyAyLjEuMQogKiBBIGpRdWVyeSBwbHVnaW4gdG8gcHJvdmlkZSBzaW1wbGUgeWV0IGZ1bGx5IGN1c3RvbWlzYWJsZSBwYWdpbmF0aW9uCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9zdXBlclJheXRpbi9wYWdpbmF0aW9uanMKCiAqIEhvbWVwYWdlOiBodHRwOi8vcGFnaW5hdGlvbi5qcy5vcmcKICoKICogQ29weXJpZ2h0IDIwMTQtMjEwMCwgc3VwZXJSYXl0aW4KICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgoqLwohZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe3Rocm93IG5ldyBFcnJvcigiUGFnaW5hdGlvbjogIithKX1mdW5jdGlvbiBkKGEpe2EuZGF0YVNvdXJjZXx8YygnImRhdGFTb3VyY2UiIGlzIHJlcXVpcmVkLicpLCJzdHJpbmciPT10eXBlb2YgYS5kYXRhU291cmNlP3ZvaWQgMD09PWEudG90YWxOdW1iZXJMb2NhdG9yP3ZvaWQgMD09PWEudG90YWxOdW1iZXI/YygnInRvdGFsTnVtYmVyIiBpcyByZXF1aXJlZC4nKTpiLmlzTnVtZXJpYyhhLnRvdGFsTnVtYmVyKXx8YygnInRvdGFsTnVtYmVyIiBpcyBpbmNvcnJlY3QuIChOdW1iZXIpJyk6Yi5pc0Z1bmN0aW9uKGEudG90YWxOdW1iZXJMb2NhdG9yKXx8YygnInRvdGFsTnVtYmVyTG9jYXRvciIgc2hvdWxkIGJlIGEgRnVuY3Rpb24uJyk6aS5pc09iamVjdChhLmRhdGFTb3VyY2UpJiYodm9pZCAwPT09YS5sb2NhdG9yP2MoJyJkYXRhU291cmNlIiBpcyBhbiBPYmplY3QsIHBsZWFzZSBzcGVjaWZ5ICJsb2NhdG9yIi4nKToic3RyaW5nIj09dHlwZW9mIGEubG9jYXRvcnx8Yi5pc0Z1bmN0aW9uKGEubG9jYXRvcil8fGMoYS5sb2NhdG9yKyIgaXMgaW5jb3JyZWN0LiAoU3RyaW5nIHwgRnVuY3Rpb24pIikpLHZvaWQgMD09PWEuZm9ybWF0UmVzdWx0fHxiLmlzRnVuY3Rpb24oYS5mb3JtYXRSZXN1bHQpfHxjKCciZm9ybWF0UmVzdWx0IiBzaG91bGQgYmUgYSBGdW5jdGlvbi4nKX1mdW5jdGlvbiBlKGEpe3ZhciBjPVsiZ28iLCJwcmV2aW91cyIsIm5leHQiLCJkaXNhYmxlIiwiZW5hYmxlIiwicmVmcmVzaCIsInNob3ciLCJoaWRlIiwiZGVzdHJveSJdO2IuZWFjaChjLGZ1bmN0aW9uKGIsYyl7YS5vZmYoaCtjKX0pLGEuZGF0YSgicGFnaW5hdGlvbiIse30pLGIoIi5wYWdpbmF0aW9uanMiLGEpLnJlbW92ZSgpfWZ1bmN0aW9uIGYoYSxiKXtyZXR1cm4oIm9iamVjdCI9PShiPXR5cGVvZiBhKT9udWxsPT1hJiYibnVsbCJ8fE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKS5zbGljZSg4LC0xKTpiKS50b0xvd2VyQ2FzZSgpfXZvaWQgMD09PWImJmMoIlBhZ2luYXRpb24gcmVxdWlyZXMgalF1ZXJ5LiIpO3ZhciBnPSJwYWdpbmF0aW9uIixoPSJfX3BhZ2luYXRpb24tIjtiLmZuLnBhZ2luYXRpb24mJihnPSJwYWdpbmF0aW9uMiIpLGIuZm5bZ109ZnVuY3Rpb24oZil7aWYodm9pZCAwPT09ZilyZXR1cm4gdGhpczt2YXIgaj1iKHRoaXMpLGs9Yi5leHRlbmQoe30sYi5mbltnXS5kZWZhdWx0cyxmKSxsPXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihqLmRhdGEoInBhZ2luYXRpb24iKXx8ai5kYXRhKCJwYWdpbmF0aW9uIix7fSksITEhPT1hLmNhbGxIb29rKCJiZWZvcmVJbml0Iikpe2ouZGF0YSgicGFnaW5hdGlvbiIpLmluaXRpYWxpemVkJiZiKCIucGFnaW5hdGlvbmpzIixqKS5yZW1vdmUoKSxhLmRpc2FibGVkPSEhay5kaXNhYmxlZDt2YXIgYz1hLm1vZGVsPXtwYWdlUmFuZ2U6ay5wYWdlUmFuZ2UscGFnZVNpemU6ay5wYWdlU2l6ZX07YS5wYXJzZURhdGFTb3VyY2Uoay5kYXRhU291cmNlLGZ1bmN0aW9uKGIpe2lmKGEuaXNBc3luYz1pLmlzU3RyaW5nKGIpLGkuaXNBcnJheShiKSYmKGMudG90YWxOdW1iZXI9ay50b3RhbE51bWJlcj1iLmxlbmd0aCksYS5pc0R5bmFtaWNUb3RhbE51bWJlcj1hLmlzQXN5bmMmJmsudG90YWxOdW1iZXJMb2NhdG9yLCEoay5oaWRlV2hlbkxlc3NUaGFuT25lUGFnZSYmYS5nZXRUb3RhbFBhZ2UoKTw9MSkpe3ZhciBkPWEucmVuZGVyKCEwKTtrLmNsYXNzTmFtZSYmZC5hZGRDbGFzcyhrLmNsYXNzTmFtZSksYy5lbD1kLGpbImJvdHRvbSI9PT1rLnBvc2l0aW9uPyJhcHBlbmQiOiJwcmVwZW5kIl0oZCksYS5vYnNlcnZlcigpLGouZGF0YSgicGFnaW5hdGlvbiIpLmluaXRpYWxpemVkPSEwLGEuY2FsbEhvb2soImFmdGVySW5pdCIsZCl9fSl9fSxyZW5kZXI6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcyxkPWMubW9kZWwsZT1kLmVsfHxiKCc8ZGl2IGNsYXNzPSJwYWdpbmF0aW9uanMiPjwvZGl2PicpLGY9ITAhPT1hO2MuY2FsbEhvb2soImJlZm9yZVJlbmRlciIsZik7dmFyIGc9ZC5wYWdlTnVtYmVyfHxrLnBhZ2VOdW1iZXIsaD1rLnBhZ2VSYW5nZSxpPWMuZ2V0VG90YWxQYWdlKCksaj1nLWgsbD1nK2g7cmV0dXJuIGw+aSYmKGw9aSxqPWktMipoLGo9ajwxPzE6aiksajw9MSYmKGo9MSxsPU1hdGgubWluKDIqaCsxLGkpKSxlLmh0bWwoYy5nZW5lcmF0ZUhUTUwoe2N1cnJlbnRQYWdlOmcscGFnZVJhbmdlOmgscmFuZ2VTdGFydDpqLHJhbmdlRW5kOmx9KSksYy5jYWxsSG9vaygiYWZ0ZXJSZW5kZXIiLGYpLGV9LGdlbmVyYXRlSFRNTDpmdW5jdGlvbihhKXt2YXIgYyxkLGU9dGhpcyxmPWEuY3VycmVudFBhZ2UsZz1lLmdldFRvdGFsUGFnZSgpLGg9YS5yYW5nZVN0YXJ0LGk9YS5yYW5nZUVuZCxqPWUuZ2V0VG90YWxOdW1iZXIoKSxsPWsuc2hvd1ByZXZpb3VzLG09ay5zaG93TmV4dCxuPWsuc2hvd1BhZ2VOdW1iZXJzLG89ay5zaG93TmF2aWdhdG9yLHA9ay5zaG93R29JbnB1dCxxPWsuc2hvd0dvQnV0dG9uLHI9ay5wYWdlTGluayxzPWsucHJldlRleHQsdD1rLm5leHRUZXh0LHU9ay5lbGxpcHNpc1RleHQsdj1rLmdvQnV0dG9uVGV4dCx3PWsuY2xhc3NQcmVmaXgseD1rLmFjdGl2ZUNsYXNzTmFtZSx5PWsuZGlzYWJsZUNsYXNzTmFtZSx6PWsudWxDbGFzc05hbWUsQT0iIixCPSc8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9IkotcGFnaW5hdGlvbmpzLWdvLXBhZ2VudW1iZXIiPicsQz0nPGlucHV0IHR5cGU9ImJ1dHRvbiIgY2xhc3M9IkotcGFnaW5hdGlvbmpzLWdvLWJ1dHRvbiIgdmFsdWU9IicrdisnIj4nLEQ9Yi5pc0Z1bmN0aW9uKGsuZm9ybWF0TmF2aWdhdG9yKT9rLmZvcm1hdE5hdmlnYXRvcihmLGcsaik6ay5mb3JtYXROYXZpZ2F0b3IsRT1iLmlzRnVuY3Rpb24oay5mb3JtYXRHb0lucHV0KT9rLmZvcm1hdEdvSW5wdXQoQixmLGcsaik6ay5mb3JtYXRHb0lucHV0LEY9Yi5pc0Z1bmN0aW9uKGsuZm9ybWF0R29CdXR0b24pP2suZm9ybWF0R29CdXR0b24oQyxmLGcsaik6ay5mb3JtYXRHb0J1dHRvbixHPWIuaXNGdW5jdGlvbihrLmF1dG9IaWRlUHJldmlvdXMpP2suYXV0b0hpZGVQcmV2aW91cygpOmsuYXV0b0hpZGVQcmV2aW91cyxIPWIuaXNGdW5jdGlvbihrLmF1dG9IaWRlTmV4dCk/ay5hdXRvSGlkZU5leHQoKTprLmF1dG9IaWRlTmV4dCxJPWIuaXNGdW5jdGlvbihrLmhlYWRlcik/ay5oZWFkZXIoZixnLGopOmsuaGVhZGVyLEo9Yi5pc0Z1bmN0aW9uKGsuZm9vdGVyKT9rLmZvb3RlcihmLGcsaik6ay5mb290ZXI7aWYoSSYmKGM9ZS5yZXBsYWNlVmFyaWFibGVzKEkse2N1cnJlbnRQYWdlOmYsdG90YWxQYWdlOmcsdG90YWxOdW1iZXI6an0pLEErPWMpLGx8fG58fG0pe2lmKEErPSc8ZGl2IGNsYXNzPSJwYWdpbmF0aW9uanMtcGFnZXMiPicsQSs9ej8nPHVsIGNsYXNzPSInK3orJyI+JzoiPHVsPiIsbCYmKGY8PTE/R3x8KEErPSc8bGkgY2xhc3M9IicrdysiLXByZXYgIit5KyciPjxhPicrcysiPC9hPjwvbGk+Iik6QSs9JzxsaSBjbGFzcz0iJyt3KyctcHJldiBKLXBhZ2luYXRpb25qcy1wcmV2aW91cyIgZGF0YS1udW09IicrKGYtMSkrJyIgdGl0bGU9IlByZXZpb3VzIHBhZ2UiPjxhIGhyZWY9IicrcisnIj4nK3MrIjwvYT48L2xpPiIpLG4pe2lmKGg8PTMpZm9yKGQ9MTtkPGg7ZCsrKUErPWQ9PWY/JzxsaSBjbGFzcz0iJyt3KyItcGFnZSBKLXBhZ2luYXRpb25qcy1wYWdlICIreCsnIiBkYXRhLW51bT0iJytkKyciPjxhPicrZCsiPC9hPjwvbGk+IjonPGxpIGNsYXNzPSInK3crJy1wYWdlIEotcGFnaW5hdGlvbmpzLXBhZ2UiIGRhdGEtbnVtPSInK2QrJyI+PGEgaHJlZj0iJytyKyciPicrZCsiPC9hPjwvbGk+IjtlbHNlIGsuc2hvd0ZpcnN0T25FbGxpcHNpc1Nob3cmJihBKz0nPGxpIGNsYXNzPSInK3crIi1wYWdlICIrdysnLWZpcnN0IEotcGFnaW5hdGlvbmpzLXBhZ2UiIGRhdGEtbnVtPSIxIj48YSBocmVmPSInK3IrJyI+MTwvYT48L2xpPicpLEErPSc8bGkgY2xhc3M9IicrdysiLWVsbGlwc2lzICIreSsnIj48YT4nK3UrIjwvYT48L2xpPiI7Zm9yKGQ9aDtkPD1pO2QrKylBKz1kPT1mPyc8bGkgY2xhc3M9IicrdysiLXBhZ2UgSi1wYWdpbmF0aW9uanMtcGFnZSAiK3grJyIgZGF0YS1udW09IicrZCsnIj48YT4nK2QrIjwvYT48L2xpPiI6JzxsaSBjbGFzcz0iJyt3KyctcGFnZSBKLXBhZ2luYXRpb25qcy1wYWdlIiBkYXRhLW51bT0iJytkKyciPjxhIGhyZWY9IicrcisnIj4nK2QrIjwvYT48L2xpPiI7aWYoaT49Zy0yKWZvcihkPWkrMTtkPD1nO2QrKylBKz0nPGxpIGNsYXNzPSInK3crJy1wYWdlIEotcGFnaW5hdGlvbmpzLXBhZ2UiIGRhdGEtbnVtPSInK2QrJyI+PGEgaHJlZj0iJytyKyciPicrZCsiPC9hPjwvbGk+IjtlbHNlIEErPSc8bGkgY2xhc3M9IicrdysiLWVsbGlwc2lzICIreSsnIj48YT4nK3UrIjwvYT48L2xpPiIsay5zaG93TGFzdE9uRWxsaXBzaXNTaG93JiYoQSs9JzxsaSBjbGFzcz0iJyt3KyItcGFnZSAiK3crJy1sYXN0IEotcGFnaW5hdGlvbmpzLXBhZ2UiIGRhdGEtbnVtPSInK2crJyI+PGEgaHJlZj0iJytyKyciPicrZysiPC9hPjwvbGk+Iil9bSYmKGY+PWc/SHx8KEErPSc8bGkgY2xhc3M9IicrdysiLW5leHQgIit5KyciPjxhPicrdCsiPC9hPjwvbGk+Iik6QSs9JzxsaSBjbGFzcz0iJyt3KyctbmV4dCBKLXBhZ2luYXRpb25qcy1uZXh0IiBkYXRhLW51bT0iJysoZisxKSsnIiB0aXRsZT0iTmV4dCBwYWdlIj48YSBocmVmPSInK3IrJyI+Jyt0KyI8L2E+PC9saT4iKSxBKz0iPC91bD48L2Rpdj4ifXJldHVybiBvJiZEJiYoYz1lLnJlcGxhY2VWYXJpYWJsZXMoRCx7Y3VycmVudFBhZ2U6Zix0b3RhbFBhZ2U6Zyx0b3RhbE51bWJlcjpqfSksQSs9JzxkaXYgY2xhc3M9IicrdysnLW5hdiBKLXBhZ2luYXRpb25qcy1uYXYiPicrYysiPC9kaXY+IikscCYmRSYmKGM9ZS5yZXBsYWNlVmFyaWFibGVzKEUse2N1cnJlbnRQYWdlOmYsdG90YWxQYWdlOmcsdG90YWxOdW1iZXI6aixpbnB1dDpCfSksQSs9JzxkaXYgY2xhc3M9IicrdysnLWdvLWlucHV0Ij4nK2MrIjwvZGl2PiIpLHEmJkYmJihjPWUucmVwbGFjZVZhcmlhYmxlcyhGLHtjdXJyZW50UGFnZTpmLHRvdGFsUGFnZTpnLHRvdGFsTnVtYmVyOmosYnV0dG9uOkN9KSxBKz0nPGRpdiBjbGFzcz0iJyt3KyctZ28tYnV0dG9uIj4nK2MrIjwvZGl2PiIpLEomJihjPWUucmVwbGFjZVZhcmlhYmxlcyhKLHtjdXJyZW50UGFnZTpmLHRvdGFsUGFnZTpnLHRvdGFsTnVtYmVyOmp9KSxBKz1jKSxBfSxmaW5kVG90YWxOdW1iZXJGcm9tUmVtb3RlUmVzcG9uc2U6ZnVuY3Rpb24oYSl7dGhpcy5tb2RlbC50b3RhbE51bWJlcj1rLnRvdGFsTnVtYmVyTG9jYXRvcihhKX0sZ286ZnVuY3Rpb24oYSxjKXtmdW5jdGlvbiBkKGEpe2lmKCExPT09ZS5jYWxsSG9vaygiYmVmb3JlUGFnaW5nIixnKSlyZXR1cm4hMTtpZihmLmRpcmVjdGlvbj12b2lkIDA9PT1mLnBhZ2VOdW1iZXI/MDpnPmYucGFnZU51bWJlcj8xOi0xLGYucGFnZU51bWJlcj1nLGUucmVuZGVyKCksZS5kaXNhYmxlZCYmZS5pc0FzeW5jJiZlLmVuYWJsZSgpLGouZGF0YSgicGFnaW5hdGlvbiIpLm1vZGVsPWYsay5mb3JtYXRSZXN1bHQpe3ZhciBkPWIuZXh0ZW5kKCEwLFtdLGEpO2kuaXNBcnJheShhPWsuZm9ybWF0UmVzdWx0KGQpKXx8KGE9ZCl9ai5kYXRhKCJwYWdpbmF0aW9uIikuY3VycmVudFBhZ2VEYXRhPWEsZS5kb0NhbGxiYWNrKGEsYyksZS5jYWxsSG9vaygiYWZ0ZXJQYWdpbmciLGcpLDE9PWcmJmUuY2FsbEhvb2soImFmdGVySXNGaXJzdFBhZ2UiKSxnPT1lLmdldFRvdGFsUGFnZSgpJiZlLmNhbGxIb29rKCJhZnRlcklzTGFzdFBhZ2UiKX12YXIgZT10aGlzLGY9ZS5tb2RlbDtpZighZS5kaXNhYmxlZCl7dmFyIGc9YTtpZigoZz1wYXJzZUludChnKSkmJiEoZzwxKSl7dmFyIGg9ay5wYWdlU2l6ZSxsPWUuZ2V0VG90YWxOdW1iZXIoKSxtPWUuZ2V0VG90YWxQYWdlKCk7aWYoIShsJiZnPm0pJiYwIT09bCl7aWYoIWUuaXNBc3luYylyZXR1cm4gdm9pZCBkKGUuZ2V0RGF0YUZyYWdtZW50KGcpKTt2YXIgbj17fSxvPWsuYWxpYXN8fHt9O25bby5wYWdlU2l6ZT9vLnBhZ2VTaXplOiJwYWdlU2l6ZSJdPWgsbltvLnBhZ2VOdW1iZXI/by5wYWdlTnVtYmVyOiJwYWdlTnVtYmVyIl09Zzt2YXIgcD17dHlwZToiZ2V0IixjYWNoZTohMSxkYXRhOnt9LGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLGRhdGFUeXBlOiJqc29uIixhc3luYzohMH07Yi5leHRlbmQoITAscCxrLmFqYXgpLGIuZXh0ZW5kKHAuZGF0YSxuKSxwLnVybD1rLmRhdGFTb3VyY2UscC5zdWNjZXNzPWZ1bmN0aW9uKGEpe2UuaXNEeW5hbWljVG90YWxOdW1iZXI/ZS5maW5kVG90YWxOdW1iZXJGcm9tUmVtb3RlUmVzcG9uc2UoYSk6ZS5tb2RlbC50b3RhbE51bWJlcj1rLnRvdGFsTnVtYmVyLGQoZS5maWx0ZXJEYXRhQnlMb2NhdG9yKGEpKX0scC5lcnJvcj1mdW5jdGlvbihhLGIsYyl7ay5mb3JtYXRBamF4RXJyb3ImJmsuZm9ybWF0QWpheEVycm9yKGEsYixjKSxlLmVuYWJsZSgpfSxlLmRpc2FibGUoKSxiLmFqYXgocCl9fX19LGRvQ2FsbGJhY2s6ZnVuY3Rpb24oYSxjKXt2YXIgZD10aGlzLGU9ZC5tb2RlbDtiLmlzRnVuY3Rpb24oYyk/YyhhLGUpOmIuaXNGdW5jdGlvbihrLmNhbGxiYWNrKSYmay5jYWxsYmFjayhhLGUpfSxkZXN0cm95OmZ1bmN0aW9uKCl7ITEhPT10aGlzLmNhbGxIb29rKCJiZWZvcmVEZXN0cm95IikmJih0aGlzLm1vZGVsLmVsLnJlbW92ZSgpLGoub2ZmKCksYigiI3BhZ2luYXRpb25qcy1zdHlsZSIpLnJlbW92ZSgpLHRoaXMuY2FsbEhvb2soImFmdGVyRGVzdHJveSIpKX0scHJldmlvdXM6ZnVuY3Rpb24oYSl7dGhpcy5nbyh0aGlzLm1vZGVsLnBhZ2VOdW1iZXItMSxhKX0sbmV4dDpmdW5jdGlvbihhKXt0aGlzLmdvKHRoaXMubW9kZWwucGFnZU51bWJlcisxLGEpfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuaXNBc3luYz8iYXN5bmMiOiJzeW5jIjshMSE9PWEuY2FsbEhvb2soImJlZm9yZURpc2FibGUiLGIpJiYoYS5kaXNhYmxlZD0hMCxhLm1vZGVsLmRpc2FibGVkPSEwLGEuY2FsbEhvb2soImFmdGVyRGlzYWJsZSIsYikpfSxlbmFibGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5pc0FzeW5jPyJhc3luYyI6InN5bmMiOyExIT09YS5jYWxsSG9vaygiYmVmb3JlRW5hYmxlIixiKSYmKGEuZGlzYWJsZWQ9ITEsYS5tb2RlbC5kaXNhYmxlZD0hMSxhLmNhbGxIb29rKCJhZnRlckVuYWJsZSIsYikpfSxyZWZyZXNoOmZ1bmN0aW9uKGEpe3RoaXMuZ28odGhpcy5tb2RlbC5wYWdlTnVtYmVyLGEpfSxzaG93OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLm1vZGVsLmVsLmlzKCI6dmlzaWJsZSIpfHxhLm1vZGVsLmVsLnNob3coKX0saGlkZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5tb2RlbC5lbC5pcygiOnZpc2libGUiKSYmYS5tb2RlbC5lbC5oaWRlKCl9LHJlcGxhY2VWYXJpYWJsZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYztmb3IodmFyIGQgaW4gYil7dmFyIGU9YltkXSxmPW5ldyBSZWdFeHAoIjwlPVxccyoiK2QrIlxccyolPiIsImltZyIpO2M9KGN8fGEpLnJlcGxhY2UoZixlKX1yZXR1cm4gY30sZ2V0RGF0YUZyYWdtZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWsucGFnZVNpemUsYz1rLmRhdGFTb3VyY2UsZD10aGlzLmdldFRvdGFsTnVtYmVyKCksZT1iKihhLTEpKzEsZj1NYXRoLm1pbihhKmIsZCk7cmV0dXJuIGMuc2xpY2UoZS0xLGYpfSxnZXRUb3RhbE51bWJlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vZGVsLnRvdGFsTnVtYmVyfHxrLnRvdGFsTnVtYmVyfHwwfSxnZXRUb3RhbFBhZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5jZWlsKHRoaXMuZ2V0VG90YWxOdW1iZXIoKS9rLnBhZ2VTaXplKX0sZ2V0TG9jYXRvcjpmdW5jdGlvbihhKXt2YXIgZDtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGE/ZD1hOmIuaXNGdW5jdGlvbihhKT9kPWEoKTpjKCcibG9jYXRvciIgaXMgaW5jb3JyZWN0LiAoU3RyaW5nIHwgRnVuY3Rpb24pJyksZH0sZmlsdGVyRGF0YUJ5TG9jYXRvcjpmdW5jdGlvbihhKXt2YXIgZCxlPXRoaXMuZ2V0TG9jYXRvcihrLmxvY2F0b3IpO2lmKGkuaXNPYmplY3QoYSkpe3RyeXtiLmVhY2goZS5zcGxpdCgiLiIpLGZ1bmN0aW9uKGIsYyl7ZD0oZHx8YSlbY119KX1jYXRjaChhKXt9ZD9pLmlzQXJyYXkoZCl8fGMoImRhdGFTb3VyY2UuIitlKyIgbXVzdCBiZSBhbiBBcnJheS4iKTpjKCJkYXRhU291cmNlLiIrZSsiIGlzIHVuZGVmaW5lZC4iKX1yZXR1cm4gZHx8YX0scGFyc2VEYXRhU291cmNlOmZ1bmN0aW9uKGEsZCl7dmFyIGU9dGhpcztpLmlzT2JqZWN0KGEpP2Qoay5kYXRhU291cmNlPWUuZmlsdGVyRGF0YUJ5TG9jYXRvcihhKSk6aS5pc0FycmF5KGEpP2Qoay5kYXRhU291cmNlPWEpOmIuaXNGdW5jdGlvbihhKT9rLmRhdGFTb3VyY2UoZnVuY3Rpb24oYSl7aS5pc0FycmF5KGEpfHxjKCdUaGUgcGFyYW1ldGVyIG9mICJkb25lIiBGdW5jdGlvbiBzaG91bGQgYmUgYW4gQXJyYXkuJyksZS5wYXJzZURhdGFTb3VyY2UuY2FsbChlLGEsZCl9KToic3RyaW5nIj09dHlwZW9mIGE/KC9eaHR0cHM/fGZpbGU6Ly50ZXN0KGEpJiYoay5hamF4RGF0YVR5cGU9Impzb25wIiksZChhKSk6YygnVW5leHBlY3RlZCB0eXBlIG9mICJkYXRhU291cmNlIi4nKX0sY2FsbEhvb2s6ZnVuY3Rpb24oYyl7dmFyIGQsZT1qLmRhdGEoInBhZ2luYXRpb24iKSxmPUFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpO3JldHVybiBmLnNoaWZ0KCksa1tjXSYmYi5pc0Z1bmN0aW9uKGtbY10pJiYhMT09PWtbY10uYXBwbHkoYSxmKSYmKGQ9ITEpLGUuaG9va3MmJmUuaG9va3NbY10mJmIuZWFjaChlLmhvb2tzW2NdLGZ1bmN0aW9uKGIsYyl7ITE9PT1jLmFwcGx5KGEsZikmJihkPSExKX0pLCExIT09ZH0sb2JzZXJ2ZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGQ9YS5tb2RlbC5lbDtqLm9uKGgrImdvIixmdW5jdGlvbihkLGUsZil7KGU9cGFyc2VJbnQoYi50cmltKGUpKSkmJihiLmlzTnVtZXJpYyhlKXx8YygnInBhZ2VOdW1iZXIiIGlzIGluY29ycmVjdC4gKE51bWJlciknKSxhLmdvKGUsZikpfSksZC5kZWxlZ2F0ZSgiLkotcGFnaW5hdGlvbmpzLXBhZ2UiLCJjbGljayIsZnVuY3Rpb24oYyl7dmFyIGQ9YihjLmN1cnJlbnRUYXJnZXQpLGU9Yi50cmltKGQuYXR0cigiZGF0YS1udW0iKSk7aWYoZSYmIWQuaGFzQ2xhc3Moay5kaXNhYmxlQ2xhc3NOYW1lKSYmIWQuaGFzQ2xhc3Moay5hY3RpdmVDbGFzc05hbWUpKXJldHVybiExIT09YS5jYWxsSG9vaygiYmVmb3JlUGFnZU9uQ2xpY2siLGMsZSkmJihhLmdvKGUpLGEuY2FsbEhvb2soImFmdGVyUGFnZU9uQ2xpY2siLGMsZSksISFrLnBhZ2VMaW5rJiZ2b2lkIDApfSksZC5kZWxlZ2F0ZSgiLkotcGFnaW5hdGlvbmpzLXByZXZpb3VzIiwiY2xpY2siLGZ1bmN0aW9uKGMpe3ZhciBkPWIoYy5jdXJyZW50VGFyZ2V0KSxlPWIudHJpbShkLmF0dHIoImRhdGEtbnVtIikpO2lmKGUmJiFkLmhhc0NsYXNzKGsuZGlzYWJsZUNsYXNzTmFtZSkpcmV0dXJuITEhPT1hLmNhbGxIb29rKCJiZWZvcmVQcmV2aW91c09uQ2xpY2siLGMsZSkmJihhLmdvKGUpLGEuY2FsbEhvb2soImFmdGVyUHJldmlvdXNPbkNsaWNrIixjLGUpLCEhay5wYWdlTGluayYmdm9pZCAwKX0pLGQuZGVsZWdhdGUoIi5KLXBhZ2luYXRpb25qcy1uZXh0IiwiY2xpY2siLGZ1bmN0aW9uKGMpe3ZhciBkPWIoYy5jdXJyZW50VGFyZ2V0KSxlPWIudHJpbShkLmF0dHIoImRhdGEtbnVtIikpO2lmKGUmJiFkLmhhc0NsYXNzKGsuZGlzYWJsZUNsYXNzTmFtZSkpcmV0dXJuITEhPT1hLmNhbGxIb29rKCJiZWZvcmVOZXh0T25DbGljayIsYyxlKSYmKGEuZ28oZSksYS5jYWxsSG9vaygiYWZ0ZXJOZXh0T25DbGljayIsYyxlKSwhIWsucGFnZUxpbmsmJnZvaWQgMCl9KSxkLmRlbGVnYXRlKCIuSi1wYWdpbmF0aW9uanMtZ28tYnV0dG9uIiwiY2xpY2siLGZ1bmN0aW9uKGMpe3ZhciBlPWIoIi5KLXBhZ2luYXRpb25qcy1nby1wYWdlbnVtYmVyIixkKS52YWwoKTtpZighMT09PWEuY2FsbEhvb2soImJlZm9yZUdvQnV0dG9uT25DbGljayIsYyxlKSlyZXR1cm4hMTtqLnRyaWdnZXIoaCsiZ28iLGUpLGEuY2FsbEhvb2soImFmdGVyR29CdXR0b25PbkNsaWNrIixjLGUpfSksZC5kZWxlZ2F0ZSgiLkotcGFnaW5hdGlvbmpzLWdvLXBhZ2VudW1iZXIiLCJrZXl1cCIsZnVuY3Rpb24oYyl7aWYoMTM9PT1jLndoaWNoKXt2YXIgZT1iKGMuY3VycmVudFRhcmdldCkudmFsKCk7aWYoITE9PT1hLmNhbGxIb29rKCJiZWZvcmVHb0lucHV0T25FbnRlciIsYyxlKSlyZXR1cm4hMTtqLnRyaWdnZXIoaCsiZ28iLGUpLGIoIi5KLXBhZ2luYXRpb25qcy1nby1wYWdlbnVtYmVyIixkKS5mb2N1cygpLGEuY2FsbEhvb2soImFmdGVyR29JbnB1dE9uRW50ZXIiLGMsZSl9fSksai5vbihoKyJwcmV2aW91cyIsZnVuY3Rpb24oYixjKXthLnByZXZpb3VzKGMpfSksai5vbihoKyJuZXh0IixmdW5jdGlvbihiLGMpe2EubmV4dChjKX0pLGoub24oaCsiZGlzYWJsZSIsZnVuY3Rpb24oKXthLmRpc2FibGUoKX0pLGoub24oaCsiZW5hYmxlIixmdW5jdGlvbigpe2EuZW5hYmxlKCl9KSxqLm9uKGgrInJlZnJlc2giLGZ1bmN0aW9uKGIsYyl7YS5yZWZyZXNoKGMpfSksai5vbihoKyJzaG93IixmdW5jdGlvbigpe2Euc2hvdygpfSksai5vbihoKyJoaWRlIixmdW5jdGlvbigpe2EuaGlkZSgpfSksai5vbihoKyJkZXN0cm95IixmdW5jdGlvbigpe2EuZGVzdHJveSgpfSk7dmFyIGU9TWF0aC5tYXgoYS5nZXRUb3RhbFBhZ2UoKSwxKSxmPWsucGFnZU51bWJlcjthLmlzRHluYW1pY1RvdGFsTnVtYmVyJiYoZj0xKSxrLnRyaWdnZXJQYWdpbmdPbkluaXQmJmoudHJpZ2dlcihoKyJnbyIsTWF0aC5taW4oZixlKSl9fTtpZihqLmRhdGEoInBhZ2luYXRpb24iKSYmITA9PT1qLmRhdGEoInBhZ2luYXRpb24iKS5pbml0aWFsaXplZCl7aWYoYi5pc051bWVyaWMoZikpcmV0dXJuIGoudHJpZ2dlci5jYWxsKHRoaXMsaCsiZ28iLGYsYXJndW1lbnRzWzFdKSx0aGlzO2lmKCJzdHJpbmciPT10eXBlb2YgZil7dmFyIG09QXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cyk7c3dpdGNoKG1bMF09aCttWzBdLGYpe2Nhc2UicHJldmlvdXMiOmNhc2UibmV4dCI6Y2FzZSJnbyI6Y2FzZSJkaXNhYmxlIjpjYXNlImVuYWJsZSI6Y2FzZSJyZWZyZXNoIjpjYXNlInNob3ciOmNhc2UiaGlkZSI6Y2FzZSJkZXN0cm95IjpqLnRyaWdnZXIuYXBwbHkodGhpcyxtKTticmVhaztjYXNlImdldFNlbGVjdGVkUGFnZU51bSI6cmV0dXJuIGouZGF0YSgicGFnaW5hdGlvbiIpLm1vZGVsP2ouZGF0YSgicGFnaW5hdGlvbiIpLm1vZGVsLnBhZ2VOdW1iZXI6ai5kYXRhKCJwYWdpbmF0aW9uIikuYXR0cmlidXRlcy5wYWdlTnVtYmVyO2Nhc2UiZ2V0VG90YWxQYWdlIjpyZXR1cm4gTWF0aC5jZWlsKGouZGF0YSgicGFnaW5hdGlvbiIpLm1vZGVsLnRvdGFsTnVtYmVyL2ouZGF0YSgicGFnaW5hdGlvbiIpLm1vZGVsLnBhZ2VTaXplKTtjYXNlImdldFNlbGVjdGVkUGFnZURhdGEiOnJldHVybiBqLmRhdGEoInBhZ2luYXRpb24iKS5jdXJyZW50UGFnZURhdGE7Y2FzZSJpc0Rpc2FibGVkIjpyZXR1cm4hMD09PWouZGF0YSgicGFnaW5hdGlvbiIpLm1vZGVsLmRpc2FibGVkO2RlZmF1bHQ6YygiVW5rbm93biBhY3Rpb246ICIrZil9cmV0dXJuIHRoaXN9ZShqKX1lbHNlIGkuaXNPYmplY3QoZil8fGMoIklsbGVnYWwgb3B0aW9ucyIpO3JldHVybiBkKGspLGwuaW5pdGlhbGl6ZSgpLHRoaXN9LGIuZm5bZ10uZGVmYXVsdHM9e3RvdGFsTnVtYmVyOjAscGFnZU51bWJlcjoxLHBhZ2VTaXplOjEwLHBhZ2VSYW5nZToyLHNob3dQcmV2aW91czohMCxzaG93TmV4dDohMCxzaG93UGFnZU51bWJlcnM6ITAsc2hvd05hdmlnYXRvcjohMSxzaG93R29JbnB1dDohMSxzaG93R29CdXR0b246ITEscGFnZUxpbms6IiIscHJldlRleHQ6IiZsYXF1bzsiLG5leHRUZXh0OiImcmFxdW87IixlbGxpcHNpc1RleHQ6Ii4uLiIsZ29CdXR0b25UZXh0OiJHbyIsY2xhc3NQcmVmaXg6InBhZ2luYXRpb25qcyIsYWN0aXZlQ2xhc3NOYW1lOiJhY3RpdmUiLGRpc2FibGVDbGFzc05hbWU6ImRpc2FibGVkIixpbmxpbmVTdHlsZTohMCxmb3JtYXROYXZpZ2F0b3I6IjwlPSBjdXJyZW50UGFnZSAlPiAvIDwlPSB0b3RhbFBhZ2UgJT4iLGZvcm1hdEdvSW5wdXQ6IjwlPSBpbnB1dCAlPiIsZm9ybWF0R29CdXR0b246IjwlPSBidXR0b24gJT4iLHBvc2l0aW9uOiJib3R0b20iLGF1dG9IaWRlUHJldmlvdXM6ITEsYXV0b0hpZGVOZXh0OiExLHRyaWdnZXJQYWdpbmdPbkluaXQ6ITAsaGlkZVdoZW5MZXNzVGhhbk9uZVBhZ2U6ITEsc2hvd0ZpcnN0T25FbGxpcHNpc1Nob3c6ITAsc2hvd0xhc3RPbkVsbGlwc2lzU2hvdzohMCxjYWxsYmFjazpmdW5jdGlvbigpe319LGIuZm4uYWRkSG9vaz1mdW5jdGlvbihhLGQpe2FyZ3VtZW50cy5sZW5ndGg8MiYmYygiTWlzc2luZyBhcmd1bWVudC4iKSxiLmlzRnVuY3Rpb24oZCl8fGMoImNhbGxiYWNrIG11c3QgYmUgYSBmdW5jdGlvbi4iKTt2YXIgZT1iKHRoaXMpLGY9ZS5kYXRhKCJwYWdpbmF0aW9uIik7Znx8KGUuZGF0YSgicGFnaW5hdGlvbiIse30pLGY9ZS5kYXRhKCJwYWdpbmF0aW9uIikpLCFmLmhvb2tzJiYoZi5ob29rcz17fSksZi5ob29rc1thXT1mLmhvb2tzW2FdfHxbXSxmLmhvb2tzW2FdLnB1c2goZCl9LGJbZ109ZnVuY3Rpb24oYSxkKXthcmd1bWVudHMubGVuZ3RoPDImJmMoIlJlcXVpcmVzIHR3byBwYXJhbWV0ZXJzLiIpO3ZhciBlO2lmKGU9InN0cmluZyIhPXR5cGVvZiBhJiZhIGluc3RhbmNlb2YgalF1ZXJ5P2E6YihhKSxlLmxlbmd0aClyZXR1cm4gZS5wYWdpbmF0aW9uKGQpLGV9O3ZhciBpPXt9O2IuZWFjaChbIk9iamVjdCIsIkFycmF5IiwiU3RyaW5nIl0sZnVuY3Rpb24oYSxiKXtpWyJpcyIrYl09ZnVuY3Rpb24oYSl7cmV0dXJuIGYoYSk9PT1iLnRvTG93ZXJDYXNlKCl9fSksImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKGZ1bmN0aW9uKCl7cmV0dXJuIGJ9KX0odGhpcyx3aW5kb3cualF1ZXJ5KTs="},{"meta":{"name":"async.js","url":"https://cdnjs.cloudflare.com/ajax/libs/async/2.6.0/async.js","ts":1608308697370,"mimetype":"text/javascript"},"source":"KGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHsKICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KGV4cG9ydHMpIDoKICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJ10sIGZhY3RvcnkpIDoKICAoZmFjdG9yeSgoZ2xvYmFsLmFzeW5jID0gZ2xvYmFsLmFzeW5jIHx8IHt9KSkpOwp9KHRoaXMsIChmdW5jdGlvbiAoZXhwb3J0cykgeyAndXNlIHN0cmljdCc7CgpmdW5jdGlvbiBzbGljZShhcnJheUxpa2UsIHN0YXJ0KSB7CiAgICBzdGFydCA9IHN0YXJ0fDA7CiAgICB2YXIgbmV3TGVuID0gTWF0aC5tYXgoYXJyYXlMaWtlLmxlbmd0aCAtIHN0YXJ0LCAwKTsKICAgIHZhciBuZXdBcnIgPSBBcnJheShuZXdMZW4pOwogICAgZm9yKHZhciBpZHggPSAwOyBpZHggPCBuZXdMZW47IGlkeCsrKSAgewogICAgICAgIG5ld0FycltpZHhdID0gYXJyYXlMaWtlW3N0YXJ0ICsgaWR4XTsKICAgIH0KICAgIHJldHVybiBuZXdBcnI7Cn0KCi8qKgogKiBDcmVhdGVzIGEgY29udGludWF0aW9uIGZ1bmN0aW9uIHdpdGggc29tZSBhcmd1bWVudHMgYWxyZWFkeSBhcHBsaWVkLgogKgogKiBVc2VmdWwgYXMgYSBzaG9ydGhhbmQgd2hlbiBjb21iaW5lZCB3aXRoIG90aGVyIGNvbnRyb2wgZmxvdyBmdW5jdGlvbnMuIEFueQogKiBhcmd1bWVudHMgcGFzc2VkIHRvIHRoZSByZXR1cm5lZCBmdW5jdGlvbiBhcmUgYWRkZWQgdG8gdGhlIGFyZ3VtZW50cwogKiBvcmlnaW5hbGx5IHBhc3NlZCB0byBhcHBseS4KICoKICogQG5hbWUgYXBwbHkKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOlV0aWxzCiAqIEBtZXRob2QKICogQGNhdGVnb3J5IFV0aWwKICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSBUaGUgZnVuY3Rpb24geW91IHdhbnQgdG8gZXZlbnR1YWxseSBhcHBseSBhbGwKICogYXJndW1lbnRzIHRvLiBJbnZva2VzIHdpdGggKGFyZ3VtZW50cy4uLikuCiAqIEBwYXJhbSB7Li4uKn0gYXJndW1lbnRzLi4uIC0gQW55IG51bWJlciBvZiBhcmd1bWVudHMgdG8gYXV0b21hdGljYWxseSBhcHBseQogKiB3aGVuIHRoZSBjb250aW51YXRpb24gaXMgY2FsbGVkLgogKiBAcmV0dXJucyB7RnVuY3Rpb259IHRoZSBwYXJ0aWFsbHktYXBwbGllZCBmdW5jdGlvbgogKiBAZXhhbXBsZQogKgogKiAvLyB1c2luZyBhcHBseQogKiBhc3luYy5wYXJhbGxlbChbCiAqICAgICBhc3luYy5hcHBseShmcy53cml0ZUZpbGUsICd0ZXN0ZmlsZTEnLCAndGVzdDEnKSwKICogICAgIGFzeW5jLmFwcGx5KGZzLndyaXRlRmlsZSwgJ3Rlc3RmaWxlMicsICd0ZXN0MicpCiAqIF0pOwogKgogKgogKiAvLyB0aGUgc2FtZSBwcm9jZXNzIHdpdGhvdXQgdXNpbmcgYXBwbHkKICogYXN5bmMucGFyYWxsZWwoWwogKiAgICAgZnVuY3Rpb24oY2FsbGJhY2spIHsKICogICAgICAgICBmcy53cml0ZUZpbGUoJ3Rlc3RmaWxlMScsICd0ZXN0MScsIGNhbGxiYWNrKTsKICogICAgIH0sCiAqICAgICBmdW5jdGlvbihjYWxsYmFjaykgewogKiAgICAgICAgIGZzLndyaXRlRmlsZSgndGVzdGZpbGUyJywgJ3Rlc3QyJywgY2FsbGJhY2spOwogKiAgICAgfQogKiBdKTsKICoKICogLy8gSXQncyBwb3NzaWJsZSB0byBwYXNzIGFueSBudW1iZXIgb2YgYWRkaXRpb25hbCBhcmd1bWVudHMgd2hlbiBjYWxsaW5nIHRoZQogKiAvLyBjb250aW51YXRpb246CiAqCiAqIG5vZGU+IHZhciBmbiA9IGFzeW5jLmFwcGx5KHN5cy5wdXRzLCAnb25lJyk7CiAqIG5vZGU+IGZuKCd0d28nLCAndGhyZWUnKTsKICogb25lCiAqIHR3bwogKiB0aHJlZQogKi8KdmFyIGFwcGx5ID0gZnVuY3Rpb24oZm4vKiwgLi4uYXJncyovKSB7CiAgICB2YXIgYXJncyA9IHNsaWNlKGFyZ3VtZW50cywgMSk7CiAgICByZXR1cm4gZnVuY3Rpb24oLypjYWxsQXJncyovKSB7CiAgICAgICAgdmFyIGNhbGxBcmdzID0gc2xpY2UoYXJndW1lbnRzKTsKICAgICAgICByZXR1cm4gZm4uYXBwbHkobnVsbCwgYXJncy5jb25jYXQoY2FsbEFyZ3MpKTsKICAgIH07Cn07Cgp2YXIgaW5pdGlhbFBhcmFtcyA9IGZ1bmN0aW9uIChmbikgewogICAgcmV0dXJuIGZ1bmN0aW9uICgvKi4uLmFyZ3MsIGNhbGxiYWNrKi8pIHsKICAgICAgICB2YXIgYXJncyA9IHNsaWNlKGFyZ3VtZW50cyk7CiAgICAgICAgdmFyIGNhbGxiYWNrID0gYXJncy5wb3AoKTsKICAgICAgICBmbi5jYWxsKHRoaXMsIGFyZ3MsIGNhbGxiYWNrKTsKICAgIH07Cn07CgovKioKICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlCiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcykKICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKQogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSAwLjEuMAogKiBAY2F0ZWdvcnkgTGFuZwogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuCiAqIEBleGFtcGxlCiAqCiAqIF8uaXNPYmplY3Qoe30pOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTsKICogLy8gPT4gdHJ1ZQogKgogKiBfLmlzT2JqZWN0KF8ubm9vcCk7CiAqIC8vID0+IHRydWUKICoKICogXy5pc09iamVjdChudWxsKTsKICogLy8gPT4gZmFsc2UKICovCmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7CiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7CiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTsKfQoKdmFyIGhhc1NldEltbWVkaWF0ZSA9IHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09ICdmdW5jdGlvbicgJiYgc2V0SW1tZWRpYXRlOwp2YXIgaGFzTmV4dFRpY2sgPSB0eXBlb2YgcHJvY2VzcyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHByb2Nlc3MubmV4dFRpY2sgPT09ICdmdW5jdGlvbic7CgpmdW5jdGlvbiBmYWxsYmFjayhmbikgewogICAgc2V0VGltZW91dChmbiwgMCk7Cn0KCmZ1bmN0aW9uIHdyYXAoZGVmZXIpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoZm4vKiwgLi4uYXJncyovKSB7CiAgICAgICAgdmFyIGFyZ3MgPSBzbGljZShhcmd1bWVudHMsIDEpOwogICAgICAgIGRlZmVyKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZm4uYXBwbHkobnVsbCwgYXJncyk7CiAgICAgICAgfSk7CiAgICB9Owp9Cgp2YXIgX2RlZmVyOwoKaWYgKGhhc1NldEltbWVkaWF0ZSkgewogICAgX2RlZmVyID0gc2V0SW1tZWRpYXRlOwp9IGVsc2UgaWYgKGhhc05leHRUaWNrKSB7CiAgICBfZGVmZXIgPSBwcm9jZXNzLm5leHRUaWNrOwp9IGVsc2UgewogICAgX2RlZmVyID0gZmFsbGJhY2s7Cn0KCnZhciBzZXRJbW1lZGlhdGUkMSA9IHdyYXAoX2RlZmVyKTsKCi8qKgogKiBUYWtlIGEgc3luYyBmdW5jdGlvbiBhbmQgbWFrZSBpdCBhc3luYywgcGFzc2luZyBpdHMgcmV0dXJuIHZhbHVlIHRvIGEKICogY2FsbGJhY2suIFRoaXMgaXMgdXNlZnVsIGZvciBwbHVnZ2luZyBzeW5jIGZ1bmN0aW9ucyBpbnRvIGEgd2F0ZXJmYWxsLAogKiBzZXJpZXMsIG9yIG90aGVyIGFzeW5jIGZ1bmN0aW9ucy4gQW55IGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhlIGdlbmVyYXRlZAogKiBmdW5jdGlvbiB3aWxsIGJlIHBhc3NlZCB0byB0aGUgd3JhcHBlZCBmdW5jdGlvbiAoZXhjZXB0IGZvciB0aGUgZmluYWwKICogY2FsbGJhY2sgYXJndW1lbnQpLiBFcnJvcnMgdGhyb3duIHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBjYWxsYmFjay4KICoKICogSWYgdGhlIGZ1bmN0aW9uIHBhc3NlZCB0byBgYXN5bmNpZnlgIHJldHVybnMgYSBQcm9taXNlLCB0aGF0IHByb21pc2VzJ3MKICogcmVzb2x2ZWQvcmVqZWN0ZWQgc3RhdGUgd2lsbCBiZSB1c2VkIHRvIGNhbGwgdGhlIGNhbGxiYWNrLCByYXRoZXIgdGhhbiBzaW1wbHkKICogdGhlIHN5bmNocm9ub3VzIHJldHVybiB2YWx1ZS4KICoKICogVGhpcyBhbHNvIG1lYW5zIHlvdSBjYW4gYXN5bmNpZnkgRVMyMDE3IGBhc3luY2AgZnVuY3Rpb25zLgogKgogKiBAbmFtZSBhc3luY2lmeQogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6VXRpbHMKICogQG1ldGhvZAogKiBAYWxpYXMgd3JhcFN5bmMKICogQGNhdGVnb3J5IFV0aWwKICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyAtIFRoZSBzeW5jaHJvbm91cyBmdW5jdGlvbiwgb3IgUHJvbWlzZS1yZXR1cm5pbmcKICogZnVuY3Rpb24gdG8gY29udmVydCB0byBhbiB7QGxpbmsgQXN5bmNGdW5jdGlvbn0uCiAqIEByZXR1cm5zIHtBc3luY0Z1bmN0aW9ufSBBbiBhc3luY2hyb25vdXMgd3JhcHBlciBvZiB0aGUgYGZ1bmNgLiBUbyBiZQogKiBpbnZva2VkIHdpdGggYChhcmdzLi4uLCBjYWxsYmFjaylgLgogKiBAZXhhbXBsZQogKgogKiAvLyBwYXNzaW5nIGEgcmVndWxhciBzeW5jaHJvbm91cyBmdW5jdGlvbgogKiBhc3luYy53YXRlcmZhbGwoWwogKiAgICAgYXN5bmMuYXBwbHkoZnMucmVhZEZpbGUsIGZpbGVuYW1lLCAidXRmOCIpLAogKiAgICAgYXN5bmMuYXN5bmNpZnkoSlNPTi5wYXJzZSksCiAqICAgICBmdW5jdGlvbiAoZGF0YSwgbmV4dCkgewogKiAgICAgICAgIC8vIGRhdGEgaXMgdGhlIHJlc3VsdCBvZiBwYXJzaW5nIHRoZSB0ZXh0LgogKiAgICAgICAgIC8vIElmIHRoZXJlIHdhcyBhIHBhcnNpbmcgZXJyb3IsIGl0IHdvdWxkIGhhdmUgYmVlbiBjYXVnaHQuCiAqICAgICB9CiAqIF0sIGNhbGxiYWNrKTsKICoKICogLy8gcGFzc2luZyBhIGZ1bmN0aW9uIHJldHVybmluZyBhIHByb21pc2UKICogYXN5bmMud2F0ZXJmYWxsKFsKICogICAgIGFzeW5jLmFwcGx5KGZzLnJlYWRGaWxlLCBmaWxlbmFtZSwgInV0ZjgiKSwKICogICAgIGFzeW5jLmFzeW5jaWZ5KGZ1bmN0aW9uIChjb250ZW50cykgewogKiAgICAgICAgIHJldHVybiBkYi5tb2RlbC5jcmVhdGUoY29udGVudHMpOwogKiAgICAgfSksCiAqICAgICBmdW5jdGlvbiAobW9kZWwsIG5leHQpIHsKICogICAgICAgICAvLyBgbW9kZWxgIGlzIHRoZSBpbnN0YW50aWF0ZWQgbW9kZWwgb2JqZWN0LgogKiAgICAgICAgIC8vIElmIHRoZXJlIHdhcyBhbiBlcnJvciwgdGhpcyBmdW5jdGlvbiB3b3VsZCBiZSBza2lwcGVkLgogKiAgICAgfQogKiBdLCBjYWxsYmFjayk7CiAqCiAqIC8vIGVzMjAxNyBleGFtcGxlLCB0aG91Z2ggYGFzeW5jaWZ5YCBpcyBub3QgbmVlZGVkIGlmIHlvdXIgSlMgZW52aXJvbm1lbnQKICogLy8gc3VwcG9ydHMgYXN5bmMgZnVuY3Rpb25zIG91dCBvZiB0aGUgYm94CiAqIHZhciBxID0gYXN5bmMucXVldWUoYXN5bmMuYXN5bmNpZnkoYXN5bmMgZnVuY3Rpb24oZmlsZSkgewogKiAgICAgdmFyIGludGVybWVkaWF0ZVN0ZXAgPSBhd2FpdCBwcm9jZXNzRmlsZShmaWxlKTsKICogICAgIHJldHVybiBhd2FpdCBzb21lUHJvbWlzZShpbnRlcm1lZGlhdGVTdGVwKQogKiB9KSk7CiAqCiAqIHEucHVzaChmaWxlcyk7CiAqLwpmdW5jdGlvbiBhc3luY2lmeShmdW5jKSB7CiAgICByZXR1cm4gaW5pdGlhbFBhcmFtcyhmdW5jdGlvbiAoYXJncywgY2FsbGJhY2spIHsKICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpcywgYXJncyk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZSk7CiAgICAgICAgfQogICAgICAgIC8vIGlmIHJlc3VsdCBpcyBQcm9taXNlIG9iamVjdAogICAgICAgIGlmIChpc09iamVjdChyZXN1bHQpICYmIHR5cGVvZiByZXN1bHQudGhlbiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICByZXN1bHQudGhlbihmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgICAgICAgaW52b2tlQ2FsbGJhY2soY2FsbGJhY2ssIG51bGwsIHZhbHVlKTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7CiAgICAgICAgICAgICAgICBpbnZva2VDYWxsYmFjayhjYWxsYmFjaywgZXJyLm1lc3NhZ2UgPyBlcnIgOiBuZXcgRXJyb3IoZXJyKSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdCk7CiAgICAgICAgfQogICAgfSk7Cn0KCmZ1bmN0aW9uIGludm9rZUNhbGxiYWNrKGNhbGxiYWNrLCBlcnJvciwgdmFsdWUpIHsKICAgIHRyeSB7CiAgICAgICAgY2FsbGJhY2soZXJyb3IsIHZhbHVlKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBzZXRJbW1lZGlhdGUkMShyZXRocm93LCBlKTsKICAgIH0KfQoKZnVuY3Rpb24gcmV0aHJvdyhlcnJvcikgewogICAgdGhyb3cgZXJyb3I7Cn0KCnZhciBzdXBwb3J0c1N5bWJvbCA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbic7CgpmdW5jdGlvbiBpc0FzeW5jKGZuKSB7CiAgICByZXR1cm4gc3VwcG9ydHNTeW1ib2wgJiYgZm5bU3ltYm9sLnRvU3RyaW5nVGFnXSA9PT0gJ0FzeW5jRnVuY3Rpb24nOwp9CgpmdW5jdGlvbiB3cmFwQXN5bmMoYXN5bmNGbikgewogICAgcmV0dXJuIGlzQXN5bmMoYXN5bmNGbikgPyBhc3luY2lmeShhc3luY0ZuKSA6IGFzeW5jRm47Cn0KCmZ1bmN0aW9uIGFwcGx5RWFjaCQxKGVhY2hmbikgewogICAgcmV0dXJuIGZ1bmN0aW9uKGZucy8qLCAuLi5hcmdzKi8pIHsKICAgICAgICB2YXIgYXJncyA9IHNsaWNlKGFyZ3VtZW50cywgMSk7CiAgICAgICAgdmFyIGdvID0gaW5pdGlhbFBhcmFtcyhmdW5jdGlvbihhcmdzLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgICAgICAgIHJldHVybiBlYWNoZm4oZm5zLCBmdW5jdGlvbiAoZm4sIGNiKSB7CiAgICAgICAgICAgICAgICB3cmFwQXN5bmMoZm4pLmFwcGx5KHRoYXQsIGFyZ3MuY29uY2F0KGNiKSk7CiAgICAgICAgICAgIH0sIGNhbGxiYWNrKTsKICAgICAgICB9KTsKICAgICAgICBpZiAoYXJncy5sZW5ndGgpIHsKICAgICAgICAgICAgcmV0dXJuIGdvLmFwcGx5KHRoaXMsIGFyZ3MpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGdvOwogICAgICAgIH0KICAgIH07Cn0KCi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovCnZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDsKCi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovCnZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmOwoKLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovCnZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpOwoKLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovCnZhciBTeW1ib2wkMSA9IHJvb3QuU3ltYm9sOwoKLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqLwp2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlOwoKLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovCnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5OwoKLyoqCiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGUKICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpCiAqIG9mIHZhbHVlcy4KICovCnZhciBuYXRpdmVPYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nOwoKLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovCnZhciBzeW1Ub1N0cmluZ1RhZyQxID0gU3ltYm9sJDEgPyBTeW1ib2wkMS50b1N0cmluZ1RhZyA6IHVuZGVmaW5lZDsKCi8qKgogKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VHZXRUYWdgIHdoaWNoIGlnbm9yZXMgYFN5bWJvbC50b1N0cmluZ1RhZ2AgdmFsdWVzLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS4KICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgcmF3IGB0b1N0cmluZ1RhZ2AuCiAqLwpmdW5jdGlvbiBnZXRSYXdUYWcodmFsdWUpIHsKICB2YXIgaXNPd24gPSBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCBzeW1Ub1N0cmluZ1RhZyQxKSwKICAgICAgdGFnID0gdmFsdWVbc3ltVG9TdHJpbmdUYWckMV07CgogIHRyeSB7CiAgICB2YWx1ZVtzeW1Ub1N0cmluZ1RhZyQxXSA9IHVuZGVmaW5lZDsKICAgIHZhciB1bm1hc2tlZCA9IHRydWU7CiAgfSBjYXRjaCAoZSkge30KCiAgdmFyIHJlc3VsdCA9IG5hdGl2ZU9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpOwogIGlmICh1bm1hc2tlZCkgewogICAgaWYgKGlzT3duKSB7CiAgICAgIHZhbHVlW3N5bVRvU3RyaW5nVGFnJDFdID0gdGFnOwogICAgfSBlbHNlIHsKICAgICAgZGVsZXRlIHZhbHVlW3N5bVRvU3RyaW5nVGFnJDFdOwogICAgfQogIH0KICByZXR1cm4gcmVzdWx0Owp9CgovKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovCnZhciBvYmplY3RQcm90byQxID0gT2JqZWN0LnByb3RvdHlwZTsKCi8qKgogKiBVc2VkIHRvIHJlc29sdmUgdGhlCiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKQogKiBvZiB2YWx1ZXMuCiAqLwp2YXIgbmF0aXZlT2JqZWN0VG9TdHJpbmckMSA9IG9iamVjdFByb3RvJDEudG9TdHJpbmc7CgovKioKICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZyB1c2luZyBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2AuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuCiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBzdHJpbmcuCiAqLwpmdW5jdGlvbiBvYmplY3RUb1N0cmluZyh2YWx1ZSkgewogIHJldHVybiBuYXRpdmVPYmplY3RUb1N0cmluZyQxLmNhbGwodmFsdWUpOwp9CgovKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovCnZhciBudWxsVGFnID0gJ1tvYmplY3QgTnVsbF0nOwp2YXIgdW5kZWZpbmVkVGFnID0gJ1tvYmplY3QgVW5kZWZpbmVkXSc7CgovKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi8KdmFyIHN5bVRvU3RyaW5nVGFnID0gU3ltYm9sJDEgPyBTeW1ib2wkMS50b1N0cmluZ1RhZyA6IHVuZGVmaW5lZDsKCi8qKgogKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgZ2V0VGFnYCB3aXRob3V0IGZhbGxiYWNrcyBmb3IgYnVnZ3kgZW52aXJvbm1lbnRzLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS4KICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgYHRvU3RyaW5nVGFnYC4KICovCmZ1bmN0aW9uIGJhc2VHZXRUYWcodmFsdWUpIHsKICBpZiAodmFsdWUgPT0gbnVsbCkgewogICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWRUYWcgOiBudWxsVGFnOwogIH0KICByZXR1cm4gKHN5bVRvU3RyaW5nVGFnICYmIHN5bVRvU3RyaW5nVGFnIGluIE9iamVjdCh2YWx1ZSkpCiAgICA/IGdldFJhd1RhZyh2YWx1ZSkKICAgIDogb2JqZWN0VG9TdHJpbmcodmFsdWUpOwp9CgovKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovCnZhciBhc3luY1RhZyA9ICdbb2JqZWN0IEFzeW5jRnVuY3Rpb25dJzsKdmFyIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nOwp2YXIgZ2VuVGFnID0gJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJzsKdmFyIHByb3h5VGFnID0gJ1tvYmplY3QgUHJveHldJzsKCi8qKgogKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYEZ1bmN0aW9uYCBvYmplY3QuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDAuMS4wCiAqIEBjYXRlZ29yeSBMYW5nCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGZ1bmN0aW9uLCBlbHNlIGBmYWxzZWAuCiAqIEBleGFtcGxlCiAqCiAqIF8uaXNGdW5jdGlvbihfKTsKICogLy8gPT4gdHJ1ZQogKgogKiBfLmlzRnVuY3Rpb24oL2FiYy8pOwogKiAvLyA9PiBmYWxzZQogKi8KZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkgewogIGlmICghaXNPYmplY3QodmFsdWUpKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIC8vIFRoZSB1c2Ugb2YgYE9iamVjdCN0b1N0cmluZ2AgYXZvaWRzIGlzc3VlcyB3aXRoIHRoZSBgdHlwZW9mYCBvcGVyYXRvcgogIC8vIGluIFNhZmFyaSA5IHdoaWNoIHJldHVybnMgJ29iamVjdCcgZm9yIHR5cGVkIGFycmF5cyBhbmQgb3RoZXIgY29uc3RydWN0b3JzLgogIHZhciB0YWcgPSBiYXNlR2V0VGFnKHZhbHVlKTsKICByZXR1cm4gdGFnID09IGZ1bmNUYWcgfHwgdGFnID09IGdlblRhZyB8fCB0YWcgPT0gYXN5bmNUYWcgfHwgdGFnID09IHByb3h5VGFnOwp9CgovKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi8KdmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxOwoKLyoqCiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguCiAqCiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uCiAqIFtgVG9MZW5ndGhgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy10b2xlbmd0aCkuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDQuMC4wCiAqIEBjYXRlZ29yeSBMYW5nCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLgogKiBAZXhhbXBsZQogKgogKiBfLmlzTGVuZ3RoKDMpOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNMZW5ndGgoTnVtYmVyLk1JTl9WQUxVRSk7CiAqIC8vID0+IGZhbHNlCiAqCiAqIF8uaXNMZW5ndGgoSW5maW5pdHkpOwogKiAvLyA9PiBmYWxzZQogKgogKiBfLmlzTGVuZ3RoKCczJyk7CiAqIC8vID0+IGZhbHNlCiAqLwpmdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkgewogIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYKICAgIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjsKfQoKLyoqCiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UuIEEgdmFsdWUgaXMgY29uc2lkZXJlZCBhcnJheS1saWtlIGlmIGl0J3MKICogbm90IGEgZnVuY3Rpb24gYW5kIGhhcyBhIGB2YWx1ZS5sZW5ndGhgIHRoYXQncyBhbiBpbnRlZ2VyIGdyZWF0ZXIgdGhhbiBvcgogKiBlcXVhbCB0byBgMGAgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byBgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJgLgogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSA0LjAuMAogKiBAY2F0ZWdvcnkgTGFuZwogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZSwgZWxzZSBgZmFsc2VgLgogKiBAZXhhbXBsZQogKgogKiBfLmlzQXJyYXlMaWtlKFsxLCAyLCAzXSk7CiAqIC8vID0+IHRydWUKICoKICogXy5pc0FycmF5TGlrZShkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTsKICogLy8gPT4gdHJ1ZQogKgogKiBfLmlzQXJyYXlMaWtlKCdhYmMnKTsKICogLy8gPT4gdHJ1ZQogKgogKiBfLmlzQXJyYXlMaWtlKF8ubm9vcCk7CiAqIC8vID0+IGZhbHNlCiAqLwpmdW5jdGlvbiBpc0FycmF5TGlrZSh2YWx1ZSkgewogIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgIWlzRnVuY3Rpb24odmFsdWUpOwp9CgovLyBBIHRlbXBvcmFyeSB2YWx1ZSB1c2VkIHRvIGlkZW50aWZ5IGlmIHRoZSBsb29wIHNob3VsZCBiZSBicm9rZW4uCi8vIFNlZSAjMTA2NCwgIzEyOTMKdmFyIGJyZWFrTG9vcCA9IHt9OwoKLyoqCiAqIFRoaXMgbWV0aG9kIHJldHVybnMgYHVuZGVmaW5lZGAuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDIuMy4wCiAqIEBjYXRlZ29yeSBVdGlsCiAqIEBleGFtcGxlCiAqCiAqIF8udGltZXMoMiwgXy5ub29wKTsKICogLy8gPT4gW3VuZGVmaW5lZCwgdW5kZWZpbmVkXQogKi8KZnVuY3Rpb24gbm9vcCgpIHsKICAvLyBObyBvcGVyYXRpb24gcGVyZm9ybWVkLgp9CgpmdW5jdGlvbiBvbmNlKGZuKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChmbiA9PT0gbnVsbCkgcmV0dXJuOwogICAgICAgIHZhciBjYWxsRm4gPSBmbjsKICAgICAgICBmbiA9IG51bGw7CiAgICAgICAgY2FsbEZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9Owp9Cgp2YXIgaXRlcmF0b3JTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5pdGVyYXRvcjsKCnZhciBnZXRJdGVyYXRvciA9IGZ1bmN0aW9uIChjb2xsKSB7CiAgICByZXR1cm4gaXRlcmF0b3JTeW1ib2wgJiYgY29sbFtpdGVyYXRvclN5bWJvbF0gJiYgY29sbFtpdGVyYXRvclN5bWJvbF0oKTsKfTsKCi8qKgogKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50aW1lc2Agd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzCiAqIG9yIG1heCBhcnJheSBsZW5ndGggY2hlY2tzLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRvIGludm9rZSBgaXRlcmF0ZWVgLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLgogKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHJlc3VsdHMuCiAqLwpmdW5jdGlvbiBiYXNlVGltZXMobiwgaXRlcmF0ZWUpIHsKICB2YXIgaW5kZXggPSAtMSwKICAgICAgcmVzdWx0ID0gQXJyYXkobik7CgogIHdoaWxlICgrK2luZGV4IDwgbikgewogICAgcmVzdWx0W2luZGV4XSA9IGl0ZXJhdGVlKGluZGV4KTsKICB9CiAgcmV0dXJuIHJlc3VsdDsKfQoKLyoqCiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYAogKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mICJvYmplY3QiLgogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSA0LjAuMAogKiBAY2F0ZWdvcnkgTGFuZwogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC4KICogQGV4YW1wbGUKICoKICogXy5pc09iamVjdExpa2Uoe30pOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7CiAqIC8vID0+IHRydWUKICoKICogXy5pc09iamVjdExpa2UoXy5ub29wKTsKICogLy8gPT4gZmFsc2UKICoKICogXy5pc09iamVjdExpa2UobnVsbCk7CiAqIC8vID0+IGZhbHNlCiAqLwpmdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHsKICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7Cn0KCi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi8KdmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJzsKCi8qKgogKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc0FyZ3VtZW50c2AuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBgYXJndW1lbnRzYCBvYmplY3QsCiAqLwpmdW5jdGlvbiBiYXNlSXNBcmd1bWVudHModmFsdWUpIHsKICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBiYXNlR2V0VGFnKHZhbHVlKSA9PSBhcmdzVGFnOwp9CgovKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovCnZhciBvYmplY3RQcm90byQzID0gT2JqZWN0LnByb3RvdHlwZTsKCi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqLwp2YXIgaGFzT3duUHJvcGVydHkkMiA9IG9iamVjdFByb3RvJDMuaGFzT3duUHJvcGVydHk7CgovKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi8KdmFyIHByb3BlcnR5SXNFbnVtZXJhYmxlID0gb2JqZWN0UHJvdG8kMy5wcm9wZXJ0eUlzRW51bWVyYWJsZTsKCi8qKgogKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsaWtlbHkgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LgogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSAwLjEuMAogKiBAY2F0ZWdvcnkgTGFuZwogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LAogKiAgZWxzZSBgZmFsc2VgLgogKiBAZXhhbXBsZQogKgogKiBfLmlzQXJndW1lbnRzKGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNBcmd1bWVudHMoWzEsIDIsIDNdKTsKICogLy8gPT4gZmFsc2UKICovCnZhciBpc0FyZ3VtZW50cyA9IGJhc2VJc0FyZ3VtZW50cyhmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKSA/IGJhc2VJc0FyZ3VtZW50cyA6IGZ1bmN0aW9uKHZhbHVlKSB7CiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaGFzT3duUHJvcGVydHkkMi5jYWxsKHZhbHVlLCAnY2FsbGVlJykgJiYKICAgICFwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHZhbHVlLCAnY2FsbGVlJyk7Cn07CgovKioKICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhbiBgQXJyYXlgIG9iamVjdC4KICoKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgXwogKiBAc2luY2UgMC4xLjAKICogQGNhdGVnb3J5IExhbmcKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGFycmF5LCBlbHNlIGBmYWxzZWAuCiAqIEBleGFtcGxlCiAqCiAqIF8uaXNBcnJheShbMSwgMiwgM10pOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNBcnJheShkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTsKICogLy8gPT4gZmFsc2UKICoKICogXy5pc0FycmF5KCdhYmMnKTsKICogLy8gPT4gZmFsc2UKICoKICogXy5pc0FycmF5KF8ubm9vcCk7CiAqIC8vID0+IGZhbHNlCiAqLwp2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7CgovKioKICogVGhpcyBtZXRob2QgcmV0dXJucyBgZmFsc2VgLgogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSA0LjEzLjAKICogQGNhdGVnb3J5IFV0aWwKICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYGZhbHNlYC4KICogQGV4YW1wbGUKICoKICogXy50aW1lcygyLCBfLnN0dWJGYWxzZSk7CiAqIC8vID0+IFtmYWxzZSwgZmFsc2VdCiAqLwpmdW5jdGlvbiBzdHViRmFsc2UoKSB7CiAgcmV0dXJuIGZhbHNlOwp9CgovKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGV4cG9ydHNgLiAqLwp2YXIgZnJlZUV4cG9ydHMgPSB0eXBlb2YgZXhwb3J0cyA9PSAnb2JqZWN0JyAmJiBleHBvcnRzICYmICFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7CgovKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYG1vZHVsZWAuICovCnZhciBmcmVlTW9kdWxlID0gZnJlZUV4cG9ydHMgJiYgdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUgJiYgIW1vZHVsZS5ub2RlVHlwZSAmJiBtb2R1bGU7CgovKiogRGV0ZWN0IHRoZSBwb3B1bGFyIENvbW1vbkpTIGV4dGVuc2lvbiBgbW9kdWxlLmV4cG9ydHNgLiAqLwp2YXIgbW9kdWxlRXhwb3J0cyA9IGZyZWVNb2R1bGUgJiYgZnJlZU1vZHVsZS5leHBvcnRzID09PSBmcmVlRXhwb3J0czsKCi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqLwp2YXIgQnVmZmVyID0gbW9kdWxlRXhwb3J0cyA/IHJvb3QuQnVmZmVyIDogdW5kZWZpbmVkOwoKLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqLwp2YXIgbmF0aXZlSXNCdWZmZXIgPSBCdWZmZXIgPyBCdWZmZXIuaXNCdWZmZXIgOiB1bmRlZmluZWQ7CgovKioKICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBidWZmZXIuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDQuMy4wCiAqIEBjYXRlZ29yeSBMYW5nCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGJ1ZmZlciwgZWxzZSBgZmFsc2VgLgogKiBAZXhhbXBsZQogKgogKiBfLmlzQnVmZmVyKG5ldyBCdWZmZXIoMikpOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNCdWZmZXIobmV3IFVpbnQ4QXJyYXkoMikpOwogKiAvLyA9PiBmYWxzZQogKi8KdmFyIGlzQnVmZmVyID0gbmF0aXZlSXNCdWZmZXIgfHwgc3R1YkZhbHNlOwoKLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovCnZhciBNQVhfU0FGRV9JTlRFR0VSJDEgPSA5MDA3MTk5MjU0NzQwOTkxOwoKLyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqLwp2YXIgcmVJc1VpbnQgPSAvXig/OjB8WzEtOV1cZCopJC87CgovKioKICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGluZGV4LgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay4KICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9TUFYX1NBRkVfSU5URUdFUl0gVGhlIHVwcGVyIGJvdW5kcyBvZiBhIHZhbGlkIGluZGV4LgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGluZGV4LCBlbHNlIGBmYWxzZWAuCiAqLwpmdW5jdGlvbiBpc0luZGV4KHZhbHVlLCBsZW5ndGgpIHsKICBsZW5ndGggPSBsZW5ndGggPT0gbnVsbCA/IE1BWF9TQUZFX0lOVEVHRVIkMSA6IGxlbmd0aDsKICByZXR1cm4gISFsZW5ndGggJiYKICAgICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgfHwgcmVJc1VpbnQudGVzdCh2YWx1ZSkpICYmCiAgICAodmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8IGxlbmd0aCk7Cn0KCi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi8KdmFyIGFyZ3NUYWckMSA9ICdbb2JqZWN0IEFyZ3VtZW50c10nOwp2YXIgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nOwp2YXIgYm9vbFRhZyA9ICdbb2JqZWN0IEJvb2xlYW5dJzsKdmFyIGRhdGVUYWcgPSAnW29iamVjdCBEYXRlXSc7CnZhciBlcnJvclRhZyA9ICdbb2JqZWN0IEVycm9yXSc7CnZhciBmdW5jVGFnJDEgPSAnW29iamVjdCBGdW5jdGlvbl0nOwp2YXIgbWFwVGFnID0gJ1tvYmplY3QgTWFwXSc7CnZhciBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJzsKdmFyIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nOwp2YXIgcmVnZXhwVGFnID0gJ1tvYmplY3QgUmVnRXhwXSc7CnZhciBzZXRUYWcgPSAnW29iamVjdCBTZXRdJzsKdmFyIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nOwp2YXIgd2Vha01hcFRhZyA9ICdbb2JqZWN0IFdlYWtNYXBdJzsKCnZhciBhcnJheUJ1ZmZlclRhZyA9ICdbb2JqZWN0IEFycmF5QnVmZmVyXSc7CnZhciBkYXRhVmlld1RhZyA9ICdbb2JqZWN0IERhdGFWaWV3XSc7CnZhciBmbG9hdDMyVGFnID0gJ1tvYmplY3QgRmxvYXQzMkFycmF5XSc7CnZhciBmbG9hdDY0VGFnID0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XSc7CnZhciBpbnQ4VGFnID0gJ1tvYmplY3QgSW50OEFycmF5XSc7CnZhciBpbnQxNlRhZyA9ICdbb2JqZWN0IEludDE2QXJyYXldJzsKdmFyIGludDMyVGFnID0gJ1tvYmplY3QgSW50MzJBcnJheV0nOwp2YXIgdWludDhUYWcgPSAnW29iamVjdCBVaW50OEFycmF5XSc7CnZhciB1aW50OENsYW1wZWRUYWcgPSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nOwp2YXIgdWludDE2VGFnID0gJ1tvYmplY3QgVWludDE2QXJyYXldJzsKdmFyIHVpbnQzMlRhZyA9ICdbb2JqZWN0IFVpbnQzMkFycmF5XSc7CgovKiogVXNlZCB0byBpZGVudGlmeSBgdG9TdHJpbmdUYWdgIHZhbHVlcyBvZiB0eXBlZCBhcnJheXMuICovCnZhciB0eXBlZEFycmF5VGFncyA9IHt9Owp0eXBlZEFycmF5VGFnc1tmbG9hdDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Zsb2F0NjRUYWddID0KdHlwZWRBcnJheVRhZ3NbaW50OFRhZ10gPSB0eXBlZEFycmF5VGFnc1tpbnQxNlRhZ10gPQp0eXBlZEFycmF5VGFnc1tpbnQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50OFRhZ10gPQp0eXBlZEFycmF5VGFnc1t1aW50OENsYW1wZWRUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDE2VGFnXSA9CnR5cGVkQXJyYXlUYWdzW3VpbnQzMlRhZ10gPSB0cnVlOwp0eXBlZEFycmF5VGFnc1thcmdzVGFnJDFdID0gdHlwZWRBcnJheVRhZ3NbYXJyYXlUYWddID0KdHlwZWRBcnJheVRhZ3NbYXJyYXlCdWZmZXJUYWddID0gdHlwZWRBcnJheVRhZ3NbYm9vbFRhZ10gPQp0eXBlZEFycmF5VGFnc1tkYXRhVmlld1RhZ10gPSB0eXBlZEFycmF5VGFnc1tkYXRlVGFnXSA9CnR5cGVkQXJyYXlUYWdzW2Vycm9yVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Z1bmNUYWckMV0gPQp0eXBlZEFycmF5VGFnc1ttYXBUYWddID0gdHlwZWRBcnJheVRhZ3NbbnVtYmVyVGFnXSA9CnR5cGVkQXJyYXlUYWdzW29iamVjdFRhZ10gPSB0eXBlZEFycmF5VGFnc1tyZWdleHBUYWddID0KdHlwZWRBcnJheVRhZ3Nbc2V0VGFnXSA9IHR5cGVkQXJyYXlUYWdzW3N0cmluZ1RhZ10gPQp0eXBlZEFycmF5VGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlOwoKLyoqCiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzVHlwZWRBcnJheWAgd2l0aG91dCBOb2RlLmpzIG9wdGltaXphdGlvbnMuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHR5cGVkIGFycmF5LCBlbHNlIGBmYWxzZWAuCiAqLwpmdW5jdGlvbiBiYXNlSXNUeXBlZEFycmF5KHZhbHVlKSB7CiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYKICAgIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgISF0eXBlZEFycmF5VGFnc1tiYXNlR2V0VGFnKHZhbHVlKV07Cn0KCi8qKgogKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy51bmFyeWAgd2l0aG91dCBzdXBwb3J0IGZvciBzdG9yaW5nIG1ldGFkYXRhLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjYXAgYXJndW1lbnRzIGZvci4KICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgY2FwcGVkIGZ1bmN0aW9uLgogKi8KZnVuY3Rpb24gYmFzZVVuYXJ5KGZ1bmMpIHsKICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHsKICAgIHJldHVybiBmdW5jKHZhbHVlKTsKICB9Owp9CgovKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGV4cG9ydHNgLiAqLwp2YXIgZnJlZUV4cG9ydHMkMSA9IHR5cGVvZiBleHBvcnRzID09ICdvYmplY3QnICYmIGV4cG9ydHMgJiYgIWV4cG9ydHMubm9kZVR5cGUgJiYgZXhwb3J0czsKCi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgbW9kdWxlYC4gKi8KdmFyIGZyZWVNb2R1bGUkMSA9IGZyZWVFeHBvcnRzJDEgJiYgdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUgJiYgIW1vZHVsZS5ub2RlVHlwZSAmJiBtb2R1bGU7CgovKiogRGV0ZWN0IHRoZSBwb3B1bGFyIENvbW1vbkpTIGV4dGVuc2lvbiBgbW9kdWxlLmV4cG9ydHNgLiAqLwp2YXIgbW9kdWxlRXhwb3J0cyQxID0gZnJlZU1vZHVsZSQxICYmIGZyZWVNb2R1bGUkMS5leHBvcnRzID09PSBmcmVlRXhwb3J0cyQxOwoKLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBwcm9jZXNzYCBmcm9tIE5vZGUuanMuICovCnZhciBmcmVlUHJvY2VzcyA9IG1vZHVsZUV4cG9ydHMkMSAmJiBmcmVlR2xvYmFsLnByb2Nlc3M7CgovKiogVXNlZCB0byBhY2Nlc3MgZmFzdGVyIE5vZGUuanMgaGVscGVycy4gKi8KdmFyIG5vZGVVdGlsID0gKGZ1bmN0aW9uKCkgewogIHRyeSB7CiAgICByZXR1cm4gZnJlZVByb2Nlc3MgJiYgZnJlZVByb2Nlc3MuYmluZGluZyAmJiBmcmVlUHJvY2Vzcy5iaW5kaW5nKCd1dGlsJyk7CiAgfSBjYXRjaCAoZSkge30KfSgpKTsKCi8qIE5vZGUuanMgaGVscGVyIHJlZmVyZW5jZXMuICovCnZhciBub2RlSXNUeXBlZEFycmF5ID0gbm9kZVV0aWwgJiYgbm9kZVV0aWwuaXNUeXBlZEFycmF5OwoKLyoqCiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSB0eXBlZCBhcnJheS4KICoKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgXwogKiBAc2luY2UgMy4wLjAKICogQGNhdGVnb3J5IExhbmcKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdHlwZWQgYXJyYXksIGVsc2UgYGZhbHNlYC4KICogQGV4YW1wbGUKICoKICogXy5pc1R5cGVkQXJyYXkobmV3IFVpbnQ4QXJyYXkpOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNUeXBlZEFycmF5KFtdKTsKICogLy8gPT4gZmFsc2UKICovCnZhciBpc1R5cGVkQXJyYXkgPSBub2RlSXNUeXBlZEFycmF5ID8gYmFzZVVuYXJ5KG5vZGVJc1R5cGVkQXJyYXkpIDogYmFzZUlzVHlwZWRBcnJheTsKCi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi8KdmFyIG9iamVjdFByb3RvJDIgPSBPYmplY3QucHJvdG90eXBlOwoKLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovCnZhciBoYXNPd25Qcm9wZXJ0eSQxID0gb2JqZWN0UHJvdG8kMi5oYXNPd25Qcm9wZXJ0eTsKCi8qKgogKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIHRoZSBhcnJheS1saWtlIGB2YWx1ZWAuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LgogKiBAcGFyYW0ge2Jvb2xlYW59IGluaGVyaXRlZCBTcGVjaWZ5IHJldHVybmluZyBpbmhlcml0ZWQgcHJvcGVydHkgbmFtZXMuCiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuCiAqLwpmdW5jdGlvbiBhcnJheUxpa2VLZXlzKHZhbHVlLCBpbmhlcml0ZWQpIHsKICB2YXIgaXNBcnIgPSBpc0FycmF5KHZhbHVlKSwKICAgICAgaXNBcmcgPSAhaXNBcnIgJiYgaXNBcmd1bWVudHModmFsdWUpLAogICAgICBpc0J1ZmYgPSAhaXNBcnIgJiYgIWlzQXJnICYmIGlzQnVmZmVyKHZhbHVlKSwKICAgICAgaXNUeXBlID0gIWlzQXJyICYmICFpc0FyZyAmJiAhaXNCdWZmICYmIGlzVHlwZWRBcnJheSh2YWx1ZSksCiAgICAgIHNraXBJbmRleGVzID0gaXNBcnIgfHwgaXNBcmcgfHwgaXNCdWZmIHx8IGlzVHlwZSwKICAgICAgcmVzdWx0ID0gc2tpcEluZGV4ZXMgPyBiYXNlVGltZXModmFsdWUubGVuZ3RoLCBTdHJpbmcpIDogW10sCiAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7CgogIGZvciAodmFyIGtleSBpbiB2YWx1ZSkgewogICAgaWYgKChpbmhlcml0ZWQgfHwgaGFzT3duUHJvcGVydHkkMS5jYWxsKHZhbHVlLCBrZXkpKSAmJgogICAgICAgICEoc2tpcEluZGV4ZXMgJiYgKAogICAgICAgICAgIC8vIFNhZmFyaSA5IGhhcyBlbnVtZXJhYmxlIGBhcmd1bWVudHMubGVuZ3RoYCBpbiBzdHJpY3QgbW9kZS4KICAgICAgICAgICBrZXkgPT0gJ2xlbmd0aCcgfHwKICAgICAgICAgICAvLyBOb2RlLmpzIDAuMTAgaGFzIGVudW1lcmFibGUgbm9uLWluZGV4IHByb3BlcnRpZXMgb24gYnVmZmVycy4KICAgICAgICAgICAoaXNCdWZmICYmIChrZXkgPT0gJ29mZnNldCcgfHwga2V5ID09ICdwYXJlbnQnKSkgfHwKICAgICAgICAgICAvLyBQaGFudG9tSlMgMiBoYXMgZW51bWVyYWJsZSBub24taW5kZXggcHJvcGVydGllcyBvbiB0eXBlZCBhcnJheXMuCiAgICAgICAgICAgKGlzVHlwZSAmJiAoa2V5ID09ICdidWZmZXInIHx8IGtleSA9PSAnYnl0ZUxlbmd0aCcgfHwga2V5ID09ICdieXRlT2Zmc2V0JykpIHx8CiAgICAgICAgICAgLy8gU2tpcCBpbmRleCBwcm9wZXJ0aWVzLgogICAgICAgICAgIGlzSW5kZXgoa2V5LCBsZW5ndGgpCiAgICAgICAgKSkpIHsKICAgICAgcmVzdWx0LnB1c2goa2V5KTsKICAgIH0KICB9CiAgcmV0dXJuIHJlc3VsdDsKfQoKLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqLwp2YXIgb2JqZWN0UHJvdG8kNSA9IE9iamVjdC5wcm90b3R5cGU7CgovKioKICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGEgcHJvdG90eXBlIG9iamVjdC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvdG90eXBlLCBlbHNlIGBmYWxzZWAuCiAqLwpmdW5jdGlvbiBpc1Byb3RvdHlwZSh2YWx1ZSkgewogIHZhciBDdG9yID0gdmFsdWUgJiYgdmFsdWUuY29uc3RydWN0b3IsCiAgICAgIHByb3RvID0gKHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUpIHx8IG9iamVjdFByb3RvJDU7CgogIHJldHVybiB2YWx1ZSA9PT0gcHJvdG87Cn0KCi8qKgogKiBDcmVhdGVzIGEgdW5hcnkgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIGl0cyBhcmd1bWVudCB0cmFuc2Zvcm1lZC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gd3JhcC4KICogQHBhcmFtIHtGdW5jdGlvbn0gdHJhbnNmb3JtIFRoZSBhcmd1bWVudCB0cmFuc2Zvcm0uCiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLgogKi8KZnVuY3Rpb24gb3ZlckFyZyhmdW5jLCB0cmFuc2Zvcm0pIHsKICByZXR1cm4gZnVuY3Rpb24oYXJnKSB7CiAgICByZXR1cm4gZnVuYyh0cmFuc2Zvcm0oYXJnKSk7CiAgfTsKfQoKLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqLwp2YXIgbmF0aXZlS2V5cyA9IG92ZXJBcmcoT2JqZWN0LmtleXMsIE9iamVjdCk7CgovKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovCnZhciBvYmplY3RQcm90byQ0ID0gT2JqZWN0LnByb3RvdHlwZTsKCi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqLwp2YXIgaGFzT3duUHJvcGVydHkkMyA9IG9iamVjdFByb3RvJDQuaGFzT3duUHJvcGVydHk7CgovKioKICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ua2V5c2Agd2hpY2ggZG9lc24ndCB0cmVhdCBzcGFyc2UgYXJyYXlzIGFzIGRlbnNlLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuCiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuCiAqLwpmdW5jdGlvbiBiYXNlS2V5cyhvYmplY3QpIHsKICBpZiAoIWlzUHJvdG90eXBlKG9iamVjdCkpIHsKICAgIHJldHVybiBuYXRpdmVLZXlzKG9iamVjdCk7CiAgfQogIHZhciByZXN1bHQgPSBbXTsKICBmb3IgKHZhciBrZXkgaW4gT2JqZWN0KG9iamVjdCkpIHsKICAgIGlmIChoYXNPd25Qcm9wZXJ0eSQzLmNhbGwob2JqZWN0LCBrZXkpICYmIGtleSAhPSAnY29uc3RydWN0b3InKSB7CiAgICAgIHJlc3VsdC5wdXNoKGtleSk7CiAgICB9CiAgfQogIHJldHVybiByZXN1bHQ7Cn0KCi8qKgogKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBgb2JqZWN0YC4KICoKICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuIFNlZSB0aGUKICogW0VTIHNwZWNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5rZXlzKQogKiBmb3IgbW9yZSBkZXRhaWxzLgogKgogKiBAc3RhdGljCiAqIEBzaW5jZSAwLjEuMAogKiBAbWVtYmVyT2YgXwogKiBAY2F0ZWdvcnkgT2JqZWN0CiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS4KICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy4KICogQGV4YW1wbGUKICoKICogZnVuY3Rpb24gRm9vKCkgewogKiAgIHRoaXMuYSA9IDE7CiAqICAgdGhpcy5iID0gMjsKICogfQogKgogKiBGb28ucHJvdG90eXBlLmMgPSAzOwogKgogKiBfLmtleXMobmV3IEZvbyk7CiAqIC8vID0+IFsnYScsICdiJ10gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZCkKICoKICogXy5rZXlzKCdoaScpOwogKiAvLyA9PiBbJzAnLCAnMSddCiAqLwpmdW5jdGlvbiBrZXlzKG9iamVjdCkgewogIHJldHVybiBpc0FycmF5TGlrZShvYmplY3QpID8gYXJyYXlMaWtlS2V5cyhvYmplY3QpIDogYmFzZUtleXMob2JqZWN0KTsKfQoKZnVuY3Rpb24gY3JlYXRlQXJyYXlJdGVyYXRvcihjb2xsKSB7CiAgICB2YXIgaSA9IC0xOwogICAgdmFyIGxlbiA9IGNvbGwubGVuZ3RoOwogICAgcmV0dXJuIGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgICAgcmV0dXJuICsraSA8IGxlbiA/IHt2YWx1ZTogY29sbFtpXSwga2V5OiBpfSA6IG51bGw7CiAgICB9Cn0KCmZ1bmN0aW9uIGNyZWF0ZUVTMjAxNUl0ZXJhdG9yKGl0ZXJhdG9yKSB7CiAgICB2YXIgaSA9IC0xOwogICAgcmV0dXJuIGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgICAgdmFyIGl0ZW0gPSBpdGVyYXRvci5uZXh0KCk7CiAgICAgICAgaWYgKGl0ZW0uZG9uZSkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgaSsrOwogICAgICAgIHJldHVybiB7dmFsdWU6IGl0ZW0udmFsdWUsIGtleTogaX07CiAgICB9Cn0KCmZ1bmN0aW9uIGNyZWF0ZU9iamVjdEl0ZXJhdG9yKG9iaikgewogICAgdmFyIG9rZXlzID0ga2V5cyhvYmopOwogICAgdmFyIGkgPSAtMTsKICAgIHZhciBsZW4gPSBva2V5cy5sZW5ndGg7CiAgICByZXR1cm4gZnVuY3Rpb24gbmV4dCgpIHsKICAgICAgICB2YXIga2V5ID0gb2tleXNbKytpXTsKICAgICAgICByZXR1cm4gaSA8IGxlbiA/IHt2YWx1ZTogb2JqW2tleV0sIGtleToga2V5fSA6IG51bGw7CiAgICB9Owp9CgpmdW5jdGlvbiBpdGVyYXRvcihjb2xsKSB7CiAgICBpZiAoaXNBcnJheUxpa2UoY29sbCkpIHsKICAgICAgICByZXR1cm4gY3JlYXRlQXJyYXlJdGVyYXRvcihjb2xsKTsKICAgIH0KCiAgICB2YXIgaXRlcmF0b3IgPSBnZXRJdGVyYXRvcihjb2xsKTsKICAgIHJldHVybiBpdGVyYXRvciA/IGNyZWF0ZUVTMjAxNUl0ZXJhdG9yKGl0ZXJhdG9yKSA6IGNyZWF0ZU9iamVjdEl0ZXJhdG9yKGNvbGwpOwp9CgpmdW5jdGlvbiBvbmx5T25jZShmbikgewogICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgIGlmIChmbiA9PT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKCJDYWxsYmFjayB3YXMgYWxyZWFkeSBjYWxsZWQuIik7CiAgICAgICAgdmFyIGNhbGxGbiA9IGZuOwogICAgICAgIGZuID0gbnVsbDsKICAgICAgICBjYWxsRm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07Cn0KCmZ1bmN0aW9uIF9lYWNoT2ZMaW1pdChsaW1pdCkgewogICAgcmV0dXJuIGZ1bmN0aW9uIChvYmosIGl0ZXJhdGVlLCBjYWxsYmFjaykgewogICAgICAgIGNhbGxiYWNrID0gb25jZShjYWxsYmFjayB8fCBub29wKTsKICAgICAgICBpZiAobGltaXQgPD0gMCB8fCAhb2JqKSB7CiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTsKICAgICAgICB9CiAgICAgICAgdmFyIG5leHRFbGVtID0gaXRlcmF0b3Iob2JqKTsKICAgICAgICB2YXIgZG9uZSA9IGZhbHNlOwogICAgICAgIHZhciBydW5uaW5nID0gMDsKCiAgICAgICAgZnVuY3Rpb24gaXRlcmF0ZWVDYWxsYmFjayhlcnIsIHZhbHVlKSB7CiAgICAgICAgICAgIHJ1bm5pbmcgLT0gMTsKICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgZG9uZSA9IHRydWU7CiAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID09PSBicmVha0xvb3AgfHwgKGRvbmUgJiYgcnVubmluZyA8PSAwKSkgewogICAgICAgICAgICAgICAgZG9uZSA9IHRydWU7CiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXBsZW5pc2goKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVwbGVuaXNoICgpIHsKICAgICAgICAgICAgd2hpbGUgKHJ1bm5pbmcgPCBsaW1pdCAmJiAhZG9uZSkgewogICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBuZXh0RWxlbSgpOwogICAgICAgICAgICAgICAgaWYgKGVsZW0gPT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBkb25lID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBpZiAocnVubmluZyA8PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBydW5uaW5nICs9IDE7CiAgICAgICAgICAgICAgICBpdGVyYXRlZShlbGVtLnZhbHVlLCBlbGVtLmtleSwgb25seU9uY2UoaXRlcmF0ZWVDYWxsYmFjaykpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXBsZW5pc2goKTsKICAgIH07Cn0KCi8qKgogKiBUaGUgc2FtZSBhcyBbYGVhY2hPZmBde0BsaW5rIG1vZHVsZTpDb2xsZWN0aW9ucy5lYWNoT2Z9IGJ1dCBydW5zIGEgbWF4aW11bSBvZiBgbGltaXRgIGFzeW5jIG9wZXJhdGlvbnMgYXQgYQogKiB0aW1lLgogKgogKiBAbmFtZSBlYWNoT2ZMaW1pdAogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29sbGVjdGlvbnMKICogQG1ldGhvZAogKiBAc2VlIFthc3luYy5lYWNoT2Zde0BsaW5rIG1vZHVsZTpDb2xsZWN0aW9ucy5lYWNoT2Z9CiAqIEBhbGlhcyBmb3JFYWNoT2ZMaW1pdAogKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbgogKiBAcGFyYW0ge0FycmF5fEl0ZXJhYmxlfE9iamVjdH0gY29sbCAtIEEgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7bnVtYmVyfSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBhc3luYyBvcGVyYXRpb25zIGF0IGEgdGltZS4KICogQHBhcmFtIHtBc3luY0Z1bmN0aW9ufSBpdGVyYXRlZSAtIEFuIGFzeW5jIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2gKICogaXRlbSBpbiBgY29sbGAuIFRoZSBga2V5YCBpcyB0aGUgaXRlbSdzIGtleSwgb3IgaW5kZXggaW4gdGhlIGNhc2Ugb2YgYW4KICogYXJyYXkuCiAqIEludm9rZWQgd2l0aCAoaXRlbSwga2V5LCBjYWxsYmFjaykuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gLSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCB3aGVuIGFsbAogKiBgaXRlcmF0ZWVgIGZ1bmN0aW9ucyBoYXZlIGZpbmlzaGVkLCBvciBhbiBlcnJvciBvY2N1cnMuIEludm9rZWQgd2l0aCAoZXJyKS4KICovCmZ1bmN0aW9uIGVhY2hPZkxpbWl0KGNvbGwsIGxpbWl0LCBpdGVyYXRlZSwgY2FsbGJhY2spIHsKICAgIF9lYWNoT2ZMaW1pdChsaW1pdCkoY29sbCwgd3JhcEFzeW5jKGl0ZXJhdGVlKSwgY2FsbGJhY2spOwp9CgpmdW5jdGlvbiBkb0xpbWl0KGZuLCBsaW1pdCkgewogICAgcmV0dXJuIGZ1bmN0aW9uIChpdGVyYWJsZSwgaXRlcmF0ZWUsIGNhbGxiYWNrKSB7CiAgICAgICAgcmV0dXJuIGZuKGl0ZXJhYmxlLCBsaW1pdCwgaXRlcmF0ZWUsIGNhbGxiYWNrKTsKICAgIH07Cn0KCi8vIGVhY2hPZiBpbXBsZW1lbnRhdGlvbiBvcHRpbWl6ZWQgZm9yIGFycmF5LWxpa2VzCmZ1bmN0aW9uIGVhY2hPZkFycmF5TGlrZShjb2xsLCBpdGVyYXRlZSwgY2FsbGJhY2spIHsKICAgIGNhbGxiYWNrID0gb25jZShjYWxsYmFjayB8fCBub29wKTsKICAgIHZhciBpbmRleCA9IDAsCiAgICAgICAgY29tcGxldGVkID0gMCwKICAgICAgICBsZW5ndGggPSBjb2xsLmxlbmd0aDsKICAgIGlmIChsZW5ndGggPT09IDApIHsKICAgICAgICBjYWxsYmFjayhudWxsKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpdGVyYXRvckNhbGxiYWNrKGVyciwgdmFsdWUpIHsKICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgIGNhbGxiYWNrKGVycik7CiAgICAgICAgfSBlbHNlIGlmICgoKytjb21wbGV0ZWQgPT09IGxlbmd0aCkgfHwgdmFsdWUgPT09IGJyZWFrTG9vcCkgewogICAgICAgICAgICBjYWxsYmFjayhudWxsKTsKICAgICAgICB9CiAgICB9CgogICAgZm9yICg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgaXRlcmF0ZWUoY29sbFtpbmRleF0sIGluZGV4LCBvbmx5T25jZShpdGVyYXRvckNhbGxiYWNrKSk7CiAgICB9Cn0KCi8vIGEgZ2VuZXJpYyB2ZXJzaW9uIG9mIGVhY2hPZiB3aGljaCBjYW4gaGFuZGxlIGFycmF5LCBvYmplY3QsIGFuZCBpdGVyYXRvciBjYXNlcy4KdmFyIGVhY2hPZkdlbmVyaWMgPSBkb0xpbWl0KGVhY2hPZkxpbWl0LCBJbmZpbml0eSk7CgovKioKICogTGlrZSBbYGVhY2hgXXtAbGluayBtb2R1bGU6Q29sbGVjdGlvbnMuZWFjaH0sIGV4Y2VwdCB0aGF0IGl0IHBhc3NlcyB0aGUga2V5IChvciBpbmRleCkgYXMgdGhlIHNlY29uZCBhcmd1bWVudAogKiB0byB0aGUgaXRlcmF0ZWUuCiAqCiAqIEBuYW1lIGVhY2hPZgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29sbGVjdGlvbnMKICogQG1ldGhvZAogKiBAYWxpYXMgZm9yRWFjaE9mCiAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uCiAqIEBzZWUgW2FzeW5jLmVhY2hde0BsaW5rIG1vZHVsZTpDb2xsZWN0aW9ucy5lYWNofQogKiBAcGFyYW0ge0FycmF5fEl0ZXJhYmxlfE9iamVjdH0gY29sbCAtIEEgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7QXN5bmNGdW5jdGlvbn0gaXRlcmF0ZWUgLSBBIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2gKICogaXRlbSBpbiBgY29sbGAuCiAqIFRoZSBga2V5YCBpcyB0aGUgaXRlbSdzIGtleSwgb3IgaW5kZXggaW4gdGhlIGNhc2Ugb2YgYW4gYXJyYXkuCiAqIEludm9rZWQgd2l0aCAoaXRlbSwga2V5LCBjYWxsYmFjaykuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gLSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCB3aGVuIGFsbAogKiBgaXRlcmF0ZWVgIGZ1bmN0aW9ucyBoYXZlIGZpbmlzaGVkLCBvciBhbiBlcnJvciBvY2N1cnMuIEludm9rZWQgd2l0aCAoZXJyKS4KICogQGV4YW1wbGUKICoKICogdmFyIG9iaiA9IHtkZXY6ICIvZGV2Lmpzb24iLCB0ZXN0OiAiL3Rlc3QuanNvbiIsIHByb2Q6ICIvcHJvZC5qc29uIn07CiAqIHZhciBjb25maWdzID0ge307CiAqCiAqIGFzeW5jLmZvckVhY2hPZihvYmosIGZ1bmN0aW9uICh2YWx1ZSwga2V5LCBjYWxsYmFjaykgewogKiAgICAgZnMucmVhZEZpbGUoX19kaXJuYW1lICsgdmFsdWUsICJ1dGY4IiwgZnVuY3Rpb24gKGVyciwgZGF0YSkgewogKiAgICAgICAgIGlmIChlcnIpIHJldHVybiBjYWxsYmFjayhlcnIpOwogKiAgICAgICAgIHRyeSB7CiAqICAgICAgICAgICAgIGNvbmZpZ3Nba2V5XSA9IEpTT04ucGFyc2UoZGF0YSk7CiAqICAgICAgICAgfSBjYXRjaCAoZSkgewogKiAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZSk7CiAqICAgICAgICAgfQogKiAgICAgICAgIGNhbGxiYWNrKCk7CiAqICAgICB9KTsKICogfSwgZnVuY3Rpb24gKGVycikgewogKiAgICAgaWYgKGVycikgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7CiAqICAgICAvLyBjb25maWdzIGlzIG5vdyBhIG1hcCBvZiBKU09OIGRhdGEKICogICAgIGRvU29tZXRoaW5nV2l0aChjb25maWdzKTsKICogfSk7CiAqLwp2YXIgZWFjaE9mID0gZnVuY3Rpb24oY29sbCwgaXRlcmF0ZWUsIGNhbGxiYWNrKSB7CiAgICB2YXIgZWFjaE9mSW1wbGVtZW50YXRpb24gPSBpc0FycmF5TGlrZShjb2xsKSA/IGVhY2hPZkFycmF5TGlrZSA6IGVhY2hPZkdlbmVyaWM7CiAgICBlYWNoT2ZJbXBsZW1lbnRhdGlvbihjb2xsLCB3cmFwQXN5bmMoaXRlcmF0ZWUpLCBjYWxsYmFjayk7Cn07CgpmdW5jdGlvbiBkb1BhcmFsbGVsKGZuKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKG9iaiwgaXRlcmF0ZWUsIGNhbGxiYWNrKSB7CiAgICAgICAgcmV0dXJuIGZuKGVhY2hPZiwgb2JqLCB3cmFwQXN5bmMoaXRlcmF0ZWUpLCBjYWxsYmFjayk7CiAgICB9Owp9CgpmdW5jdGlvbiBfYXN5bmNNYXAoZWFjaGZuLCBhcnIsIGl0ZXJhdGVlLCBjYWxsYmFjaykgewogICAgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBub29wOwogICAgYXJyID0gYXJyIHx8IFtdOwogICAgdmFyIHJlc3VsdHMgPSBbXTsKICAgIHZhciBjb3VudGVyID0gMDsKICAgIHZhciBfaXRlcmF0ZWUgPSB3cmFwQXN5bmMoaXRlcmF0ZWUpOwoKICAgIGVhY2hmbihhcnIsIGZ1bmN0aW9uICh2YWx1ZSwgXywgY2FsbGJhY2spIHsKICAgICAgICB2YXIgaW5kZXggPSBjb3VudGVyKys7CiAgICAgICAgX2l0ZXJhdGVlKHZhbHVlLCBmdW5jdGlvbiAoZXJyLCB2KSB7CiAgICAgICAgICAgIHJlc3VsdHNbaW5kZXhdID0gdjsKICAgICAgICAgICAgY2FsbGJhY2soZXJyKTsKICAgICAgICB9KTsKICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjYWxsYmFjayhlcnIsIHJlc3VsdHMpOwogICAgfSk7Cn0KCi8qKgogKiBQcm9kdWNlcyBhIG5ldyBjb2xsZWN0aW9uIG9mIHZhbHVlcyBieSBtYXBwaW5nIGVhY2ggdmFsdWUgaW4gYGNvbGxgIHRocm91Z2gKICogdGhlIGBpdGVyYXRlZWAgZnVuY3Rpb24uIFRoZSBgaXRlcmF0ZWVgIGlzIGNhbGxlZCB3aXRoIGFuIGl0ZW0gZnJvbSBgY29sbGAKICogYW5kIGEgY2FsbGJhY2sgZm9yIHdoZW4gaXQgaGFzIGZpbmlzaGVkIHByb2Nlc3NpbmcuIEVhY2ggb2YgdGhlc2UgY2FsbGJhY2sKICogdGFrZXMgMiBhcmd1bWVudHM6IGFuIGBlcnJvcmAsIGFuZCB0aGUgdHJhbnNmb3JtZWQgaXRlbSBmcm9tIGBjb2xsYC4gSWYKICogYGl0ZXJhdGVlYCBwYXNzZXMgYW4gZXJyb3IgdG8gaXRzIGNhbGxiYWNrLCB0aGUgbWFpbiBgY2FsbGJhY2tgIChmb3IgdGhlCiAqIGBtYXBgIGZ1bmN0aW9uKSBpcyBpbW1lZGlhdGVseSBjYWxsZWQgd2l0aCB0aGUgZXJyb3IuCiAqCiAqIE5vdGUsIHRoYXQgc2luY2UgdGhpcyBmdW5jdGlvbiBhcHBsaWVzIHRoZSBgaXRlcmF0ZWVgIHRvIGVhY2ggaXRlbSBpbgogKiBwYXJhbGxlbCwgdGhlcmUgaXMgbm8gZ3VhcmFudGVlIHRoYXQgdGhlIGBpdGVyYXRlZWAgZnVuY3Rpb25zIHdpbGwgY29tcGxldGUKICogaW4gb3JkZXIuIEhvd2V2ZXIsIHRoZSByZXN1bHRzIGFycmF5IHdpbGwgYmUgaW4gdGhlIHNhbWUgb3JkZXIgYXMgdGhlCiAqIG9yaWdpbmFsIGBjb2xsYC4KICoKICogSWYgYG1hcGAgaXMgcGFzc2VkIGFuIE9iamVjdCwgdGhlIHJlc3VsdHMgd2lsbCBiZSBhbiBBcnJheS4gIFRoZSByZXN1bHRzCiAqIHdpbGwgcm91Z2hseSBiZSBpbiB0aGUgb3JkZXIgb2YgdGhlIG9yaWdpbmFsIE9iamVjdHMnIGtleXMgKGJ1dCB0aGlzIGNhbgogKiB2YXJ5IGFjcm9zcyBKYXZhU2NyaXB0IGVuZ2luZXMpLgogKgogKiBAbmFtZSBtYXAKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbGxlY3Rpb25zCiAqIEBtZXRob2QKICogQGNhdGVnb3J5IENvbGxlY3Rpb24KICogQHBhcmFtIHtBcnJheXxJdGVyYWJsZXxPYmplY3R9IGNvbGwgLSBBIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLgogKiBAcGFyYW0ge0FzeW5jRnVuY3Rpb259IGl0ZXJhdGVlIC0gQW4gYXN5bmMgZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCBpdGVtIGluCiAqIGBjb2xsYC4KICogVGhlIGl0ZXJhdGVlIHNob3VsZCBjb21wbGV0ZSB3aXRoIHRoZSB0cmFuc2Zvcm1lZCBpdGVtLgogKiBJbnZva2VkIHdpdGggKGl0ZW0sIGNhbGxiYWNrKS4KICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSAtIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIHdoZW4gYWxsIGBpdGVyYXRlZWAKICogZnVuY3Rpb25zIGhhdmUgZmluaXNoZWQsIG9yIGFuIGVycm9yIG9jY3Vycy4gUmVzdWx0cyBpcyBhbiBBcnJheSBvZiB0aGUKICogdHJhbnNmb3JtZWQgaXRlbXMgZnJvbSB0aGUgYGNvbGxgLiBJbnZva2VkIHdpdGggKGVyciwgcmVzdWx0cykuCiAqIEBleGFtcGxlCiAqCiAqIGFzeW5jLm1hcChbJ2ZpbGUxJywnZmlsZTInLCdmaWxlMyddLCBmcy5zdGF0LCBmdW5jdGlvbihlcnIsIHJlc3VsdHMpIHsKICogICAgIC8vIHJlc3VsdHMgaXMgbm93IGFuIGFycmF5IG9mIHN0YXRzIGZvciBlYWNoIGZpbGUKICogfSk7CiAqLwp2YXIgbWFwID0gZG9QYXJhbGxlbChfYXN5bmNNYXApOwoKLyoqCiAqIEFwcGxpZXMgdGhlIHByb3ZpZGVkIGFyZ3VtZW50cyB0byBlYWNoIGZ1bmN0aW9uIGluIHRoZSBhcnJheSwgY2FsbGluZwogKiBgY2FsbGJhY2tgIGFmdGVyIGFsbCBmdW5jdGlvbnMgaGF2ZSBjb21wbGV0ZWQuIElmIHlvdSBvbmx5IHByb3ZpZGUgdGhlIGZpcnN0CiAqIGFyZ3VtZW50LCBgZm5zYCwgdGhlbiBpdCB3aWxsIHJldHVybiBhIGZ1bmN0aW9uIHdoaWNoIGxldHMgeW91IHBhc3MgaW4gdGhlCiAqIGFyZ3VtZW50cyBhcyBpZiBpdCB3ZXJlIGEgc2luZ2xlIGZ1bmN0aW9uIGNhbGwuIElmIG1vcmUgYXJndW1lbnRzIGFyZQogKiBwcm92aWRlZCwgYGNhbGxiYWNrYCBpcyByZXF1aXJlZCB3aGlsZSBgYXJnc2AgaXMgc3RpbGwgb3B0aW9uYWwuCiAqCiAqIEBuYW1lIGFwcGx5RWFjaAogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29udHJvbEZsb3cKICogQG1ldGhvZAogKiBAY2F0ZWdvcnkgQ29udHJvbCBGbG93CiAqIEBwYXJhbSB7QXJyYXl8SXRlcmFibGV8T2JqZWN0fSBmbnMgLSBBIGNvbGxlY3Rpb24gb2Yge0BsaW5rIEFzeW5jRnVuY3Rpb259cwogKiB0byBhbGwgY2FsbCB3aXRoIHRoZSBzYW1lIGFyZ3VtZW50cwogKiBAcGFyYW0gey4uLip9IFthcmdzXSAtIGFueSBudW1iZXIgb2Ygc2VwYXJhdGUgYXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlCiAqIGZ1bmN0aW9uLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIC0gdGhlIGZpbmFsIGFyZ3VtZW50IHNob3VsZCBiZSB0aGUgY2FsbGJhY2ssCiAqIGNhbGxlZCB3aGVuIGFsbCBmdW5jdGlvbnMgaGF2ZSBjb21wbGV0ZWQgcHJvY2Vzc2luZy4KICogQHJldHVybnMge0Z1bmN0aW9ufSAtIElmIG9ubHkgdGhlIGZpcnN0IGFyZ3VtZW50LCBgZm5zYCwgaXMgcHJvdmlkZWQsIGl0IHdpbGwKICogcmV0dXJuIGEgZnVuY3Rpb24gd2hpY2ggbGV0cyB5b3UgcGFzcyBpbiB0aGUgYXJndW1lbnRzIGFzIGlmIGl0IHdlcmUgYSBzaW5nbGUKICogZnVuY3Rpb24gY2FsbC4gVGhlIHNpZ25hdHVyZSBpcyBgKC4uYXJncywgY2FsbGJhY2spYC4gSWYgaW52b2tlZCB3aXRoIGFueQogKiBhcmd1bWVudHMsIGBjYWxsYmFja2AgaXMgcmVxdWlyZWQuCiAqIEBleGFtcGxlCiAqCiAqIGFzeW5jLmFwcGx5RWFjaChbZW5hYmxlU2VhcmNoLCB1cGRhdGVTY2hlbWFdLCAnYnVja2V0JywgY2FsbGJhY2spOwogKgogKiAvLyBwYXJ0aWFsIGFwcGxpY2F0aW9uIGV4YW1wbGU6CiAqIGFzeW5jLmVhY2goCiAqICAgICBidWNrZXRzLAogKiAgICAgYXN5bmMuYXBwbHlFYWNoKFtlbmFibGVTZWFyY2gsIHVwZGF0ZVNjaGVtYV0pLAogKiAgICAgY2FsbGJhY2sKICogKTsKICovCnZhciBhcHBseUVhY2ggPSBhcHBseUVhY2gkMShtYXApOwoKZnVuY3Rpb24gZG9QYXJhbGxlbExpbWl0KGZuKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKG9iaiwgbGltaXQsIGl0ZXJhdGVlLCBjYWxsYmFjaykgewogICAgICAgIHJldHVybiBmbihfZWFjaE9mTGltaXQobGltaXQpLCBvYmosIHdyYXBBc3luYyhpdGVyYXRlZSksIGNhbGxiYWNrKTsKICAgIH07Cn0KCi8qKgogKiBUaGUgc2FtZSBhcyBbYG1hcGBde0BsaW5rIG1vZHVsZTpDb2xsZWN0aW9ucy5tYXB9IGJ1dCBydW5zIGEgbWF4aW11bSBvZiBgbGltaXRgIGFzeW5jIG9wZXJhdGlvbnMgYXQgYSB0aW1lLgogKgogKiBAbmFtZSBtYXBMaW1pdAogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29sbGVjdGlvbnMKICogQG1ldGhvZAogKiBAc2VlIFthc3luYy5tYXBde0BsaW5rIG1vZHVsZTpDb2xsZWN0aW9ucy5tYXB9CiAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uCiAqIEBwYXJhbSB7QXJyYXl8SXRlcmFibGV8T2JqZWN0fSBjb2xsIC0gQSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci4KICogQHBhcmFtIHtudW1iZXJ9IGxpbWl0IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGFzeW5jIG9wZXJhdGlvbnMgYXQgYSB0aW1lLgogKiBAcGFyYW0ge0FzeW5jRnVuY3Rpb259IGl0ZXJhdGVlIC0gQW4gYXN5bmMgZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCBpdGVtIGluCiAqIGBjb2xsYC4KICogVGhlIGl0ZXJhdGVlIHNob3VsZCBjb21wbGV0ZSB3aXRoIHRoZSB0cmFuc2Zvcm1lZCBpdGVtLgogKiBJbnZva2VkIHdpdGggKGl0ZW0sIGNhbGxiYWNrKS4KICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSAtIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIHdoZW4gYWxsIGBpdGVyYXRlZWAKICogZnVuY3Rpb25zIGhhdmUgZmluaXNoZWQsIG9yIGFuIGVycm9yIG9jY3Vycy4gUmVzdWx0cyBpcyBhbiBhcnJheSBvZiB0aGUKICogdHJhbnNmb3JtZWQgaXRlbXMgZnJvbSB0aGUgYGNvbGxgLiBJbnZva2VkIHdpdGggKGVyciwgcmVzdWx0cykuCiAqLwp2YXIgbWFwTGltaXQgPSBkb1BhcmFsbGVsTGltaXQoX2FzeW5jTWFwKTsKCi8qKgogKiBUaGUgc2FtZSBhcyBbYG1hcGBde0BsaW5rIG1vZHVsZTpDb2xsZWN0aW9ucy5tYXB9IGJ1dCBydW5zIG9ubHkgYSBzaW5nbGUgYXN5bmMgb3BlcmF0aW9uIGF0IGEgdGltZS4KICoKICogQG5hbWUgbWFwU2VyaWVzCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIG1vZHVsZTpDb2xsZWN0aW9ucwogKiBAbWV0aG9kCiAqIEBzZWUgW2FzeW5jLm1hcF17QGxpbmsgbW9kdWxlOkNvbGxlY3Rpb25zLm1hcH0KICogQGNhdGVnb3J5IENvbGxlY3Rpb24KICogQHBhcmFtIHtBcnJheXxJdGVyYWJsZXxPYmplY3R9IGNvbGwgLSBBIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLgogKiBAcGFyYW0ge0FzeW5jRnVuY3Rpb259IGl0ZXJhdGVlIC0gQW4gYXN5bmMgZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCBpdGVtIGluCiAqIGBjb2xsYC4KICogVGhlIGl0ZXJhdGVlIHNob3VsZCBjb21wbGV0ZSB3aXRoIHRoZSB0cmFuc2Zvcm1lZCBpdGVtLgogKiBJbnZva2VkIHdpdGggKGl0ZW0sIGNhbGxiYWNrKS4KICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSAtIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIHdoZW4gYWxsIGBpdGVyYXRlZWAKICogZnVuY3Rpb25zIGhhdmUgZmluaXNoZWQsIG9yIGFuIGVycm9yIG9jY3Vycy4gUmVzdWx0cyBpcyBhbiBhcnJheSBvZiB0aGUKICogdHJhbnNmb3JtZWQgaXRlbXMgZnJvbSB0aGUgYGNvbGxgLiBJbnZva2VkIHdpdGggKGVyciwgcmVzdWx0cykuCiAqLwp2YXIgbWFwU2VyaWVzID0gZG9MaW1pdChtYXBMaW1pdCwgMSk7CgovKioKICogVGhlIHNhbWUgYXMgW2BhcHBseUVhY2hgXXtAbGluayBtb2R1bGU6Q29udHJvbEZsb3cuYXBwbHlFYWNofSBidXQgcnVucyBvbmx5IGEgc2luZ2xlIGFzeW5jIG9wZXJhdGlvbiBhdCBhIHRpbWUuCiAqCiAqIEBuYW1lIGFwcGx5RWFjaFNlcmllcwogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29udHJvbEZsb3cKICogQG1ldGhvZAogKiBAc2VlIFthc3luYy5hcHBseUVhY2hde0BsaW5rIG1vZHVsZTpDb250cm9sRmxvdy5hcHBseUVhY2h9CiAqIEBjYXRlZ29yeSBDb250cm9sIEZsb3cKICogQHBhcmFtIHtBcnJheXxJdGVyYWJsZXxPYmplY3R9IGZucyAtIEEgY29sbGVjdGlvbiBvZiB7QGxpbmsgQXN5bmNGdW5jdGlvbn1zIHRvIGFsbAogKiBjYWxsIHdpdGggdGhlIHNhbWUgYXJndW1lbnRzCiAqIEBwYXJhbSB7Li4uKn0gW2FyZ3NdIC0gYW55IG51bWJlciBvZiBzZXBhcmF0ZSBhcmd1bWVudHMgdG8gcGFzcyB0byB0aGUKICogZnVuY3Rpb24uCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gLSB0aGUgZmluYWwgYXJndW1lbnQgc2hvdWxkIGJlIHRoZSBjYWxsYmFjaywKICogY2FsbGVkIHdoZW4gYWxsIGZ1bmN0aW9ucyBoYXZlIGNvbXBsZXRlZCBwcm9jZXNzaW5nLgogKiBAcmV0dXJucyB7RnVuY3Rpb259IC0gSWYgb25seSB0aGUgZmlyc3QgYXJndW1lbnQgaXMgcHJvdmlkZWQsIGl0IHdpbGwgcmV0dXJuCiAqIGEgZnVuY3Rpb24gd2hpY2ggbGV0cyB5b3UgcGFzcyBpbiB0aGUgYXJndW1lbnRzIGFzIGlmIGl0IHdlcmUgYSBzaW5nbGUKICogZnVuY3Rpb24gY2FsbC4KICovCnZhciBhcHBseUVhY2hTZXJpZXMgPSBhcHBseUVhY2gkMShtYXBTZXJpZXMpOwoKLyoqCiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5mb3JFYWNoYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IKICogaXRlcmF0ZWUgc2hvcnRoYW5kcy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtBcnJheX0gW2FycmF5XSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLgogKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC4KICovCmZ1bmN0aW9uIGFycmF5RWFjaChhcnJheSwgaXRlcmF0ZWUpIHsKICB2YXIgaW5kZXggPSAtMSwKICAgICAgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGg7CgogIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7CiAgICBpZiAoaXRlcmF0ZWUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpID09PSBmYWxzZSkgewogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIGFycmF5Owp9CgovKioKICogQ3JlYXRlcyBhIGJhc2UgZnVuY3Rpb24gZm9yIG1ldGhvZHMgbGlrZSBgXy5mb3JJbmAgYW5kIGBfLmZvck93bmAuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBpdGVyYXRpbmcgZnJvbSByaWdodCB0byBsZWZ0LgogKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBiYXNlIGZ1bmN0aW9uLgogKi8KZnVuY3Rpb24gY3JlYXRlQmFzZUZvcihmcm9tUmlnaHQpIHsKICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0LCBpdGVyYXRlZSwga2V5c0Z1bmMpIHsKICAgIHZhciBpbmRleCA9IC0xLAogICAgICAgIGl0ZXJhYmxlID0gT2JqZWN0KG9iamVjdCksCiAgICAgICAgcHJvcHMgPSBrZXlzRnVuYyhvYmplY3QpLAogICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aDsKCiAgICB3aGlsZSAobGVuZ3RoLS0pIHsKICAgICAgdmFyIGtleSA9IHByb3BzW2Zyb21SaWdodCA/IGxlbmd0aCA6ICsraW5kZXhdOwogICAgICBpZiAoaXRlcmF0ZWUoaXRlcmFibGVba2V5XSwga2V5LCBpdGVyYWJsZSkgPT09IGZhbHNlKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBvYmplY3Q7CiAgfTsKfQoKLyoqCiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBiYXNlRm9yT3duYCB3aGljaCBpdGVyYXRlcyBvdmVyIGBvYmplY3RgCiAqIHByb3BlcnRpZXMgcmV0dXJuZWQgYnkgYGtleXNGdW5jYCBhbmQgaW52b2tlcyBgaXRlcmF0ZWVgIGZvciBlYWNoIHByb3BlcnR5LgogKiBJdGVyYXRlZSBmdW5jdGlvbnMgbWF5IGV4aXQgaXRlcmF0aW9uIGVhcmx5IGJ5IGV4cGxpY2l0bHkgcmV0dXJuaW5nIGBmYWxzZWAuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uCiAqIEBwYXJhbSB7RnVuY3Rpb259IGtleXNGdW5jIFRoZSBmdW5jdGlvbiB0byBnZXQgdGhlIGtleXMgb2YgYG9iamVjdGAuCiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuCiAqLwp2YXIgYmFzZUZvciA9IGNyZWF0ZUJhc2VGb3IoKTsKCi8qKgogKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5mb3JPd25gIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci4KICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi4KICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC4KICovCmZ1bmN0aW9uIGJhc2VGb3JPd24ob2JqZWN0LCBpdGVyYXRlZSkgewogIHJldHVybiBvYmplY3QgJiYgYmFzZUZvcihvYmplY3QsIGl0ZXJhdGVlLCBrZXlzKTsKfQoKLyoqCiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZpbmRJbmRleGAgYW5kIGBfLmZpbmRMYXN0SW5kZXhgIHdpdGhvdXQKICogc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuCiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLgogKiBAcGFyYW0ge251bWJlcn0gZnJvbUluZGV4IFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS4KICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuCiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuCiAqLwpmdW5jdGlvbiBiYXNlRmluZEluZGV4KGFycmF5LCBwcmVkaWNhdGUsIGZyb21JbmRleCwgZnJvbVJpZ2h0KSB7CiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCwKICAgICAgaW5kZXggPSBmcm9tSW5kZXggKyAoZnJvbVJpZ2h0ID8gMSA6IC0xKTsKCiAgd2hpbGUgKChmcm9tUmlnaHQgPyBpbmRleC0tIDogKytpbmRleCA8IGxlbmd0aCkpIHsKICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7CiAgICAgIHJldHVybiBpbmRleDsKICAgIH0KICB9CiAgcmV0dXJuIC0xOwp9CgovKioKICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNOYU5gIHdpdGhvdXQgc3VwcG9ydCBmb3IgbnVtYmVyIG9iamVjdHMuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBgTmFOYCwgZWxzZSBgZmFsc2VgLgogKi8KZnVuY3Rpb24gYmFzZUlzTmFOKHZhbHVlKSB7CiAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZTsKfQoKLyoqCiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5pbmRleE9mYCB3aGljaCBwZXJmb3JtcyBzdHJpY3QgZXF1YWxpdHkKICogY29tcGFyaXNvbnMgb2YgdmFsdWVzLCBpLmUuIGA9PT1gLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC4KICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci4KICogQHBhcmFtIHtudW1iZXJ9IGZyb21JbmRleCBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uCiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuCiAqLwpmdW5jdGlvbiBzdHJpY3RJbmRleE9mKGFycmF5LCB2YWx1ZSwgZnJvbUluZGV4KSB7CiAgdmFyIGluZGV4ID0gZnJvbUluZGV4IC0gMSwKICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoOwoKICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkgewogICAgaWYgKGFycmF5W2luZGV4XSA9PT0gdmFsdWUpIHsKICAgICAgcmV0dXJuIGluZGV4OwogICAgfQogIH0KICByZXR1cm4gLTE7Cn0KCi8qKgogKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pbmRleE9mYCB3aXRob3V0IGBmcm9tSW5kZXhgIGJvdW5kcyBjaGVja3MuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LgogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLgogKiBAcGFyYW0ge251bWJlcn0gZnJvbUluZGV4IFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS4KICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC4KICovCmZ1bmN0aW9uIGJhc2VJbmRleE9mKGFycmF5LCB2YWx1ZSwgZnJvbUluZGV4KSB7CiAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZQogICAgPyBzdHJpY3RJbmRleE9mKGFycmF5LCB2YWx1ZSwgZnJvbUluZGV4KQogICAgOiBiYXNlRmluZEluZGV4KGFycmF5LCBiYXNlSXNOYU4sIGZyb21JbmRleCk7Cn0KCi8qKgogKiBEZXRlcm1pbmVzIHRoZSBiZXN0IG9yZGVyIGZvciBydW5uaW5nIHRoZSB7QGxpbmsgQXN5bmNGdW5jdGlvbn1zIGluIGB0YXNrc2AsIGJhc2VkIG9uCiAqIHRoZWlyIHJlcXVpcmVtZW50cy4gRWFjaCBmdW5jdGlvbiBjYW4gb3B0aW9uYWxseSBkZXBlbmQgb24gb3RoZXIgZnVuY3Rpb25zCiAqIGJlaW5nIGNvbXBsZXRlZCBmaXJzdCwgYW5kIGVhY2ggZnVuY3Rpb24gaXMgcnVuIGFzIHNvb24gYXMgaXRzIHJlcXVpcmVtZW50cwogKiBhcmUgc2F0aXNmaWVkLgogKgogKiBJZiBhbnkgb2YgdGhlIHtAbGluayBBc3luY0Z1bmN0aW9ufXMgcGFzcyBhbiBlcnJvciB0byB0aGVpciBjYWxsYmFjaywgdGhlIGBhdXRvYCBzZXF1ZW5jZQogKiB3aWxsIHN0b3AuIEZ1cnRoZXIgdGFza3Mgd2lsbCBub3QgZXhlY3V0ZSAoc28gYW55IG90aGVyIGZ1bmN0aW9ucyBkZXBlbmRpbmcKICogb24gaXQgd2lsbCBub3QgcnVuKSwgYW5kIHRoZSBtYWluIGBjYWxsYmFja2AgaXMgaW1tZWRpYXRlbHkgY2FsbGVkIHdpdGggdGhlCiAqIGVycm9yLgogKgogKiB7QGxpbmsgQXN5bmNGdW5jdGlvbn1zIGFsc28gcmVjZWl2ZSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgcmVzdWx0cyBvZiBmdW5jdGlvbnMgd2hpY2gKICogaGF2ZSBjb21wbGV0ZWQgc28gZmFyIGFzIHRoZSBmaXJzdCBhcmd1bWVudCwgaWYgdGhleSBoYXZlIGRlcGVuZGVuY2llcy4gSWYgYQogKiB0YXNrIGZ1bmN0aW9uIGhhcyBubyBkZXBlbmRlbmNpZXMsIGl0IHdpbGwgb25seSBiZSBwYXNzZWQgYSBjYWxsYmFjay4KICoKICogQG5hbWUgYXV0bwogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29udHJvbEZsb3cKICogQG1ldGhvZAogKiBAY2F0ZWdvcnkgQ29udHJvbCBGbG93CiAqIEBwYXJhbSB7T2JqZWN0fSB0YXNrcyAtIEFuIG9iamVjdC4gRWFjaCBvZiBpdHMgcHJvcGVydGllcyBpcyBlaXRoZXIgYQogKiBmdW5jdGlvbiBvciBhbiBhcnJheSBvZiByZXF1aXJlbWVudHMsIHdpdGggdGhlIHtAbGluayBBc3luY0Z1bmN0aW9ufSBpdHNlbGYgdGhlIGxhc3QgaXRlbQogKiBpbiB0aGUgYXJyYXkuIFRoZSBvYmplY3QncyBrZXkgb2YgYSBwcm9wZXJ0eSBzZXJ2ZXMgYXMgdGhlIG5hbWUgb2YgdGhlIHRhc2sKICogZGVmaW5lZCBieSB0aGF0IHByb3BlcnR5LCBpLmUuIGNhbiBiZSB1c2VkIHdoZW4gc3BlY2lmeWluZyByZXF1aXJlbWVudHMgZm9yCiAqIG90aGVyIHRhc2tzLiBUaGUgZnVuY3Rpb24gcmVjZWl2ZXMgb25lIG9yIHR3byBhcmd1bWVudHM6CiAqICogYSBgcmVzdWx0c2Agb2JqZWN0LCBjb250YWluaW5nIHRoZSByZXN1bHRzIG9mIHRoZSBwcmV2aW91c2x5IGV4ZWN1dGVkCiAqICAgZnVuY3Rpb25zLCBvbmx5IHBhc3NlZCBpZiB0aGUgdGFzayBoYXMgYW55IGRlcGVuZGVuY2llcywKICogKiBhIGBjYWxsYmFjayhlcnIsIHJlc3VsdClgIGZ1bmN0aW9uLCB3aGljaCBtdXN0IGJlIGNhbGxlZCB3aGVuIGZpbmlzaGVkLAogKiAgIHBhc3NpbmcgYW4gYGVycm9yYCAod2hpY2ggY2FuIGJlIGBudWxsYCkgYW5kIHRoZSByZXN1bHQgb2YgdGhlIGZ1bmN0aW9uJ3MKICogICBleGVjdXRpb24uCiAqIEBwYXJhbSB7bnVtYmVyfSBbY29uY3VycmVuY3k9SW5maW5pdHldIC0gQW4gb3B0aW9uYWwgYGludGVnZXJgIGZvcgogKiBkZXRlcm1pbmluZyB0aGUgbWF4aW11bSBudW1iZXIgb2YgdGFza3MgdGhhdCBjYW4gYmUgcnVuIGluIHBhcmFsbGVsLiBCeQogKiBkZWZhdWx0LCBhcyBtYW55IGFzIHBvc3NpYmxlLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIC0gQW4gb3B0aW9uYWwgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIHdoZW4gYWxsCiAqIHRoZSB0YXNrcyBoYXZlIGJlZW4gY29tcGxldGVkLiBJdCByZWNlaXZlcyB0aGUgYGVycmAgYXJndW1lbnQgaWYgYW55IGB0YXNrc2AKICogcGFzcyBhbiBlcnJvciB0byB0aGVpciBjYWxsYmFjay4gUmVzdWx0cyBhcmUgYWx3YXlzIHJldHVybmVkOyBob3dldmVyLCBpZiBhbgogKiBlcnJvciBvY2N1cnMsIG5vIGZ1cnRoZXIgYHRhc2tzYCB3aWxsIGJlIHBlcmZvcm1lZCwgYW5kIHRoZSByZXN1bHRzIG9iamVjdAogKiB3aWxsIG9ubHkgY29udGFpbiBwYXJ0aWFsIHJlc3VsdHMuIEludm9rZWQgd2l0aCAoZXJyLCByZXN1bHRzKS4KICogQHJldHVybnMgdW5kZWZpbmVkCiAqIEBleGFtcGxlCiAqCiAqIGFzeW5jLmF1dG8oewogKiAgICAgLy8gdGhpcyBmdW5jdGlvbiB3aWxsIGp1c3QgYmUgcGFzc2VkIGEgY2FsbGJhY2sKICogICAgIHJlYWREYXRhOiBhc3luYy5hcHBseShmcy5yZWFkRmlsZSwgJ2RhdGEudHh0JywgJ3V0Zi04JyksCiAqICAgICBzaG93RGF0YTogWydyZWFkRGF0YScsIGZ1bmN0aW9uKHJlc3VsdHMsIGNiKSB7CiAqICAgICAgICAgLy8gcmVzdWx0cy5yZWFkRGF0YSBpcyB0aGUgZmlsZSdzIGNvbnRlbnRzCiAqICAgICAgICAgLy8gLi4uCiAqICAgICB9XQogKiB9LCBjYWxsYmFjayk7CiAqCiAqIGFzeW5jLmF1dG8oewogKiAgICAgZ2V0X2RhdGE6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAqICAgICAgICAgY29uc29sZS5sb2coJ2luIGdldF9kYXRhJyk7CiAqICAgICAgICAgLy8gYXN5bmMgY29kZSB0byBnZXQgc29tZSBkYXRhCiAqICAgICAgICAgY2FsbGJhY2sobnVsbCwgJ2RhdGEnLCAnY29udmVydGVkIHRvIGFycmF5Jyk7CiAqICAgICB9LAogKiAgICAgbWFrZV9mb2xkZXI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAqICAgICAgICAgY29uc29sZS5sb2coJ2luIG1ha2VfZm9sZGVyJyk7CiAqICAgICAgICAgLy8gYXN5bmMgY29kZSB0byBjcmVhdGUgYSBkaXJlY3RvcnkgdG8gc3RvcmUgYSBmaWxlIGluCiAqICAgICAgICAgLy8gdGhpcyBpcyBydW4gYXQgdGhlIHNhbWUgdGltZSBhcyBnZXR0aW5nIHRoZSBkYXRhCiAqICAgICAgICAgY2FsbGJhY2sobnVsbCwgJ2ZvbGRlcicpOwogKiAgICAgfSwKICogICAgIHdyaXRlX2ZpbGU6IFsnZ2V0X2RhdGEnLCAnbWFrZV9mb2xkZXInLCBmdW5jdGlvbihyZXN1bHRzLCBjYWxsYmFjaykgewogKiAgICAgICAgIGNvbnNvbGUubG9nKCdpbiB3cml0ZV9maWxlJywgSlNPTi5zdHJpbmdpZnkocmVzdWx0cykpOwogKiAgICAgICAgIC8vIG9uY2UgdGhlcmUgaXMgc29tZSBkYXRhIGFuZCB0aGUgZGlyZWN0b3J5IGV4aXN0cywKICogICAgICAgICAvLyB3cml0ZSB0aGUgZGF0YSB0byBhIGZpbGUgaW4gdGhlIGRpcmVjdG9yeQogKiAgICAgICAgIGNhbGxiYWNrKG51bGwsICdmaWxlbmFtZScpOwogKiAgICAgfV0sCiAqICAgICBlbWFpbF9saW5rOiBbJ3dyaXRlX2ZpbGUnLCBmdW5jdGlvbihyZXN1bHRzLCBjYWxsYmFjaykgewogKiAgICAgICAgIGNvbnNvbGUubG9nKCdpbiBlbWFpbF9saW5rJywgSlNPTi5zdHJpbmdpZnkocmVzdWx0cykpOwogKiAgICAgICAgIC8vIG9uY2UgdGhlIGZpbGUgaXMgd3JpdHRlbiBsZXQncyBlbWFpbCBhIGxpbmsgdG8gaXQuLi4KICogICAgICAgICAvLyByZXN1bHRzLndyaXRlX2ZpbGUgY29udGFpbnMgdGhlIGZpbGVuYW1lIHJldHVybmVkIGJ5IHdyaXRlX2ZpbGUuCiAqICAgICAgICAgY2FsbGJhY2sobnVsbCwgeydmaWxlJzpyZXN1bHRzLndyaXRlX2ZpbGUsICdlbWFpbCc6J3VzZXJAZXhhbXBsZS5jb20nfSk7CiAqICAgICB9XQogKiB9LCBmdW5jdGlvbihlcnIsIHJlc3VsdHMpIHsKICogICAgIGNvbnNvbGUubG9nKCdlcnIgPSAnLCBlcnIpOwogKiAgICAgY29uc29sZS5sb2coJ3Jlc3VsdHMgPSAnLCByZXN1bHRzKTsKICogfSk7CiAqLwp2YXIgYXV0byA9IGZ1bmN0aW9uICh0YXNrcywgY29uY3VycmVuY3ksIGNhbGxiYWNrKSB7CiAgICBpZiAodHlwZW9mIGNvbmN1cnJlbmN5ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgLy8gY29uY3VycmVuY3kgaXMgb3B0aW9uYWwsIHNoaWZ0IHRoZSBhcmdzLgogICAgICAgIGNhbGxiYWNrID0gY29uY3VycmVuY3k7CiAgICAgICAgY29uY3VycmVuY3kgPSBudWxsOwogICAgfQogICAgY2FsbGJhY2sgPSBvbmNlKGNhbGxiYWNrIHx8IG5vb3ApOwogICAgdmFyIGtleXMkJDEgPSBrZXlzKHRhc2tzKTsKICAgIHZhciBudW1UYXNrcyA9IGtleXMkJDEubGVuZ3RoOwogICAgaWYgKCFudW1UYXNrcykgewogICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTsKICAgIH0KICAgIGlmICghY29uY3VycmVuY3kpIHsKICAgICAgICBjb25jdXJyZW5jeSA9IG51bVRhc2tzOwogICAgfQoKICAgIHZhciByZXN1bHRzID0ge307CiAgICB2YXIgcnVubmluZ1Rhc2tzID0gMDsKICAgIHZhciBoYXNFcnJvciA9IGZhbHNlOwoKICAgIHZhciBsaXN0ZW5lcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwoKICAgIHZhciByZWFkeVRhc2tzID0gW107CgogICAgLy8gZm9yIGN5Y2xlIGRldGVjdGlvbjoKICAgIHZhciByZWFkeVRvQ2hlY2sgPSBbXTsgLy8gdGFza3MgdGhhdCBoYXZlIGJlZW4gaWRlbnRpZmllZCBhcyByZWFjaGFibGUKICAgIC8vIHdpdGhvdXQgdGhlIHBvc3NpYmlsaXR5IG9mIHJldHVybmluZyB0byBhbiBhbmNlc3RvciB0YXNrCiAgICB2YXIgdW5jaGVja2VkRGVwZW5kZW5jaWVzID0ge307CgogICAgYmFzZUZvck93bih0YXNrcywgZnVuY3Rpb24gKHRhc2ssIGtleSkgewogICAgICAgIGlmICghaXNBcnJheSh0YXNrKSkgewogICAgICAgICAgICAvLyBubyBkZXBlbmRlbmNpZXMKICAgICAgICAgICAgZW5xdWV1ZVRhc2soa2V5LCBbdGFza10pOwogICAgICAgICAgICByZWFkeVRvQ2hlY2sucHVzaChrZXkpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgZGVwZW5kZW5jaWVzID0gdGFzay5zbGljZSgwLCB0YXNrLmxlbmd0aCAtIDEpOwogICAgICAgIHZhciByZW1haW5pbmdEZXBlbmRlbmNpZXMgPSBkZXBlbmRlbmNpZXMubGVuZ3RoOwogICAgICAgIGlmIChyZW1haW5pbmdEZXBlbmRlbmNpZXMgPT09IDApIHsKICAgICAgICAgICAgZW5xdWV1ZVRhc2soa2V5LCB0YXNrKTsKICAgICAgICAgICAgcmVhZHlUb0NoZWNrLnB1c2goa2V5KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB1bmNoZWNrZWREZXBlbmRlbmNpZXNba2V5XSA9IHJlbWFpbmluZ0RlcGVuZGVuY2llczsKCiAgICAgICAgYXJyYXlFYWNoKGRlcGVuZGVuY2llcywgZnVuY3Rpb24gKGRlcGVuZGVuY3lOYW1lKSB7CiAgICAgICAgICAgIGlmICghdGFza3NbZGVwZW5kZW5jeU5hbWVdKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2FzeW5jLmF1dG8gdGFzayBgJyArIGtleSArCiAgICAgICAgICAgICAgICAgICAgJ2AgaGFzIGEgbm9uLWV4aXN0ZW50IGRlcGVuZGVuY3kgYCcgKwogICAgICAgICAgICAgICAgICAgIGRlcGVuZGVuY3lOYW1lICsgJ2AgaW4gJyArCiAgICAgICAgICAgICAgICAgICAgZGVwZW5kZW5jaWVzLmpvaW4oJywgJykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGFkZExpc3RlbmVyKGRlcGVuZGVuY3lOYW1lLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZW1haW5pbmdEZXBlbmRlbmNpZXMtLTsKICAgICAgICAgICAgICAgIGlmIChyZW1haW5pbmdEZXBlbmRlbmNpZXMgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBlbnF1ZXVlVGFzayhrZXksIHRhc2spOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0pOwoKICAgIGNoZWNrRm9yRGVhZGxvY2tzKCk7CiAgICBwcm9jZXNzUXVldWUoKTsKCiAgICBmdW5jdGlvbiBlbnF1ZXVlVGFzayhrZXksIHRhc2spIHsKICAgICAgICByZWFkeVRhc2tzLnB1c2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICBydW5UYXNrKGtleSwgdGFzayk7CiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gcHJvY2Vzc1F1ZXVlKCkgewogICAgICAgIGlmIChyZWFkeVRhc2tzLmxlbmd0aCA9PT0gMCAmJiBydW5uaW5nVGFza3MgPT09IDApIHsKICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHJlc3VsdHMpOwogICAgICAgIH0KICAgICAgICB3aGlsZShyZWFkeVRhc2tzLmxlbmd0aCAmJiBydW5uaW5nVGFza3MgPCBjb25jdXJyZW5jeSkgewogICAgICAgICAgICB2YXIgcnVuID0gcmVhZHlUYXNrcy5zaGlmdCgpOwogICAgICAgICAgICBydW4oKTsKICAgICAgICB9CgogICAgfQoKICAgIGZ1bmN0aW9uIGFkZExpc3RlbmVyKHRhc2tOYW1lLCBmbikgewogICAgICAgIHZhciB0YXNrTGlzdGVuZXJzID0gbGlzdGVuZXJzW3Rhc2tOYW1lXTsKICAgICAgICBpZiAoIXRhc2tMaXN0ZW5lcnMpIHsKICAgICAgICAgICAgdGFza0xpc3RlbmVycyA9IGxpc3RlbmVyc1t0YXNrTmFtZV0gPSBbXTsKICAgICAgICB9CgogICAgICAgIHRhc2tMaXN0ZW5lcnMucHVzaChmbik7CiAgICB9CgogICAgZnVuY3Rpb24gdGFza0NvbXBsZXRlKHRhc2tOYW1lKSB7CiAgICAgICAgdmFyIHRhc2tMaXN0ZW5lcnMgPSBsaXN0ZW5lcnNbdGFza05hbWVdIHx8IFtdOwogICAgICAgIGFycmF5RWFjaCh0YXNrTGlzdGVuZXJzLCBmdW5jdGlvbiAoZm4pIHsKICAgICAgICAgICAgZm4oKTsKICAgICAgICB9KTsKICAgICAgICBwcm9jZXNzUXVldWUoKTsKICAgIH0KCgogICAgZnVuY3Rpb24gcnVuVGFzayhrZXksIHRhc2spIHsKICAgICAgICBpZiAoaGFzRXJyb3IpIHJldHVybjsKCiAgICAgICAgdmFyIHRhc2tDYWxsYmFjayA9IG9ubHlPbmNlKGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7CiAgICAgICAgICAgIHJ1bm5pbmdUYXNrcy0tOwogICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIpIHsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHNsaWNlKGFyZ3VtZW50cywgMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgdmFyIHNhZmVSZXN1bHRzID0ge307CiAgICAgICAgICAgICAgICBiYXNlRm9yT3duKHJlc3VsdHMsIGZ1bmN0aW9uKHZhbCwgcmtleSkgewogICAgICAgICAgICAgICAgICAgIHNhZmVSZXN1bHRzW3JrZXldID0gdmFsOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBzYWZlUmVzdWx0c1trZXldID0gcmVzdWx0OwogICAgICAgICAgICAgICAgaGFzRXJyb3IgPSB0cnVlOwogICAgICAgICAgICAgICAgbGlzdGVuZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKCiAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIsIHNhZmVSZXN1bHRzKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlc3VsdHNba2V5XSA9IHJlc3VsdDsKICAgICAgICAgICAgICAgIHRhc2tDb21wbGV0ZShrZXkpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIHJ1bm5pbmdUYXNrcysrOwogICAgICAgIHZhciB0YXNrRm4gPSB3cmFwQXN5bmModGFza1t0YXNrLmxlbmd0aCAtIDFdKTsKICAgICAgICBpZiAodGFzay5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgIHRhc2tGbihyZXN1bHRzLCB0YXNrQ2FsbGJhY2spOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRhc2tGbih0YXNrQ2FsbGJhY2spOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjaGVja0ZvckRlYWRsb2NrcygpIHsKICAgICAgICAvLyBLYWhuJ3MgYWxnb3JpdGhtCiAgICAgICAgLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVG9wb2xvZ2ljYWxfc29ydGluZyNLYWhuLjI3c19hbGdvcml0aG0KICAgICAgICAvLyBodHRwOi8vY29ubmFsbGUuYmxvZ3Nwb3QuY29tLzIwMTMvMTAvdG9wb2xvZ2ljYWwtc29ydGluZ2thaG4tYWxnb3JpdGhtLmh0bWwKICAgICAgICB2YXIgY3VycmVudFRhc2s7CiAgICAgICAgdmFyIGNvdW50ZXIgPSAwOwogICAgICAgIHdoaWxlIChyZWFkeVRvQ2hlY2subGVuZ3RoKSB7CiAgICAgICAgICAgIGN1cnJlbnRUYXNrID0gcmVhZHlUb0NoZWNrLnBvcCgpOwogICAgICAgICAgICBjb3VudGVyKys7CiAgICAgICAgICAgIGFycmF5RWFjaChnZXREZXBlbmRlbnRzKGN1cnJlbnRUYXNrKSwgZnVuY3Rpb24gKGRlcGVuZGVudCkgewogICAgICAgICAgICAgICAgaWYgKC0tdW5jaGVja2VkRGVwZW5kZW5jaWVzW2RlcGVuZGVudF0gPT09IDApIHsKICAgICAgICAgICAgICAgICAgICByZWFkeVRvQ2hlY2sucHVzaChkZXBlbmRlbnQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmIChjb3VudGVyICE9PSBudW1UYXNrcykgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICAgICAgICAgICAnYXN5bmMuYXV0byBjYW5ub3QgZXhlY3V0ZSB0YXNrcyBkdWUgdG8gYSByZWN1cnNpdmUgZGVwZW5kZW5jeScKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0RGVwZW5kZW50cyh0YXNrTmFtZSkgewogICAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgICBiYXNlRm9yT3duKHRhc2tzLCBmdW5jdGlvbiAodGFzaywga2V5KSB7CiAgICAgICAgICAgIGlmIChpc0FycmF5KHRhc2spICYmIGJhc2VJbmRleE9mKHRhc2ssIHRhc2tOYW1lLCAwKSA+PSAwKSB7CiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChrZXkpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KfTsKCi8qKgogKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8ubWFwYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUKICogc2hvcnRoYW5kcy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtBcnJheX0gW2FycmF5XSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLgogKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBtYXBwZWQgYXJyYXkuCiAqLwpmdW5jdGlvbiBhcnJheU1hcChhcnJheSwgaXRlcmF0ZWUpIHsKICB2YXIgaW5kZXggPSAtMSwKICAgICAgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGgsCiAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7CgogIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7CiAgICByZXN1bHRbaW5kZXhdID0gaXRlcmF0ZWUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpOwogIH0KICByZXR1cm4gcmVzdWx0Owp9CgovKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovCnZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJzsKCi8qKgogKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC4KICoKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgXwogKiBAc2luY2UgNC4wLjAKICogQGNhdGVnb3J5IExhbmcKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuCiAqIEBleGFtcGxlCiAqCiAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTsKICogLy8gPT4gdHJ1ZQogKgogKiBfLmlzU3ltYm9sKCdhYmMnKTsKICogLy8gPT4gZmFsc2UKICovCmZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7CiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3ltYm9sJyB8fAogICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgYmFzZUdldFRhZyh2YWx1ZSkgPT0gc3ltYm9sVGFnKTsKfQoKLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovCnZhciBJTkZJTklUWSA9IDEgLyAwOwoKLyoqIFVzZWQgdG8gY29udmVydCBzeW1ib2xzIHRvIHByaW1pdGl2ZXMgYW5kIHN0cmluZ3MuICovCnZhciBzeW1ib2xQcm90byA9IFN5bWJvbCQxID8gU3ltYm9sJDEucHJvdG90eXBlIDogdW5kZWZpbmVkOwp2YXIgc3ltYm9sVG9TdHJpbmcgPSBzeW1ib2xQcm90byA/IHN5bWJvbFByb3RvLnRvU3RyaW5nIDogdW5kZWZpbmVkOwoKLyoqCiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnRvU3RyaW5nYCB3aGljaCBkb2Vzbid0IGNvbnZlcnQgbnVsbGlzaAogKiB2YWx1ZXMgdG8gZW1wdHkgc3RyaW5ncy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy4KICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLgogKi8KZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7CiAgLy8gRXhpdCBlYXJseSBmb3Igc3RyaW5ncyB0byBhdm9pZCBhIHBlcmZvcm1hbmNlIGhpdCBpbiBzb21lIGVudmlyb25tZW50cy4KICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7CiAgICByZXR1cm4gdmFsdWU7CiAgfQogIGlmIChpc0FycmF5KHZhbHVlKSkgewogICAgLy8gUmVjdXJzaXZlbHkgY29udmVydCB2YWx1ZXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS4KICAgIHJldHVybiBhcnJheU1hcCh2YWx1ZSwgYmFzZVRvU3RyaW5nKSArICcnOwogIH0KICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7CiAgICByZXR1cm4gc3ltYm9sVG9TdHJpbmcgPyBzeW1ib2xUb1N0cmluZy5jYWxsKHZhbHVlKSA6ICcnOwogIH0KICB2YXIgcmVzdWx0ID0gKHZhbHVlICsgJycpOwogIHJldHVybiAocmVzdWx0ID09ICcwJyAmJiAoMSAvIHZhbHVlKSA9PSAtSU5GSU5JVFkpID8gJy0wJyA6IHJlc3VsdDsKfQoKLyoqCiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnNsaWNlYCB3aXRob3V0IGFuIGl0ZXJhdGVlIGNhbGwgZ3VhcmQuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzbGljZS4KICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD0wXSBUaGUgc3RhcnQgcG9zaXRpb24uCiAqIEBwYXJhbSB7bnVtYmVyfSBbZW5kPWFycmF5Lmxlbmd0aF0gVGhlIGVuZCBwb3NpdGlvbi4KICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLgogKi8KZnVuY3Rpb24gYmFzZVNsaWNlKGFycmF5LCBzdGFydCwgZW5kKSB7CiAgdmFyIGluZGV4ID0gLTEsCiAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDsKCiAgaWYgKHN0YXJ0IDwgMCkgewogICAgc3RhcnQgPSAtc3RhcnQgPiBsZW5ndGggPyAwIDogKGxlbmd0aCArIHN0YXJ0KTsKICB9CiAgZW5kID0gZW5kID4gbGVuZ3RoID8gbGVuZ3RoIDogZW5kOwogIGlmIChlbmQgPCAwKSB7CiAgICBlbmQgKz0gbGVuZ3RoOwogIH0KICBsZW5ndGggPSBzdGFydCA+IGVuZCA/IDAgOiAoKGVuZCAtIHN0YXJ0KSA+Pj4gMCk7CiAgc3RhcnQgPj4+PSAwOwoKICB2YXIgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTsKICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkgewogICAgcmVzdWx0W2luZGV4XSA9IGFycmF5W2luZGV4ICsgc3RhcnRdOwogIH0KICByZXR1cm4gcmVzdWx0Owp9CgovKioKICogQ2FzdHMgYGFycmF5YCB0byBhIHNsaWNlIGlmIGl0J3MgbmVlZGVkLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC4KICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFRoZSBzdGFydCBwb3NpdGlvbi4KICogQHBhcmFtIHtudW1iZXJ9IFtlbmQ9YXJyYXkubGVuZ3RoXSBUaGUgZW5kIHBvc2l0aW9uLgogKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGNhc3Qgc2xpY2UuCiAqLwpmdW5jdGlvbiBjYXN0U2xpY2UoYXJyYXksIHN0YXJ0LCBlbmQpIHsKICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoOwogIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuZ3RoIDogZW5kOwogIHJldHVybiAoIXN0YXJ0ICYmIGVuZCA+PSBsZW5ndGgpID8gYXJyYXkgOiBiYXNlU2xpY2UoYXJyYXksIHN0YXJ0LCBlbmQpOwp9CgovKioKICogVXNlZCBieSBgXy50cmltYCBhbmQgYF8udHJpbUVuZGAgdG8gZ2V0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBzdHJpbmcgc3ltYm9sCiAqIHRoYXQgaXMgbm90IGZvdW5kIGluIHRoZSBjaGFyYWN0ZXIgc3ltYm9scy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtBcnJheX0gc3RyU3ltYm9scyBUaGUgc3RyaW5nIHN5bWJvbHMgdG8gaW5zcGVjdC4KICogQHBhcmFtIHtBcnJheX0gY2hyU3ltYm9scyBUaGUgY2hhcmFjdGVyIHN5bWJvbHMgdG8gZmluZC4KICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGxhc3QgdW5tYXRjaGVkIHN0cmluZyBzeW1ib2wuCiAqLwpmdW5jdGlvbiBjaGFyc0VuZEluZGV4KHN0clN5bWJvbHMsIGNoclN5bWJvbHMpIHsKICB2YXIgaW5kZXggPSBzdHJTeW1ib2xzLmxlbmd0aDsKCiAgd2hpbGUgKGluZGV4LS0gJiYgYmFzZUluZGV4T2YoY2hyU3ltYm9scywgc3RyU3ltYm9sc1tpbmRleF0sIDApID4gLTEpIHt9CiAgcmV0dXJuIGluZGV4Owp9CgovKioKICogVXNlZCBieSBgXy50cmltYCBhbmQgYF8udHJpbVN0YXJ0YCB0byBnZXQgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBzdHJpbmcgc3ltYm9sCiAqIHRoYXQgaXMgbm90IGZvdW5kIGluIHRoZSBjaGFyYWN0ZXIgc3ltYm9scy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtBcnJheX0gc3RyU3ltYm9scyBUaGUgc3RyaW5nIHN5bWJvbHMgdG8gaW5zcGVjdC4KICogQHBhcmFtIHtBcnJheX0gY2hyU3ltYm9scyBUaGUgY2hhcmFjdGVyIHN5bWJvbHMgdG8gZmluZC4KICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IHVubWF0Y2hlZCBzdHJpbmcgc3ltYm9sLgogKi8KZnVuY3Rpb24gY2hhcnNTdGFydEluZGV4KHN0clN5bWJvbHMsIGNoclN5bWJvbHMpIHsKICB2YXIgaW5kZXggPSAtMSwKICAgICAgbGVuZ3RoID0gc3RyU3ltYm9scy5sZW5ndGg7CgogIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoICYmIGJhc2VJbmRleE9mKGNoclN5bWJvbHMsIHN0clN5bWJvbHNbaW5kZXhdLCAwKSA+IC0xKSB7fQogIHJldHVybiBpbmRleDsKfQoKLyoqCiAqIENvbnZlcnRzIGFuIEFTQ0lJIGBzdHJpbmdgIHRvIGFuIGFycmF5LgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gY29udmVydC4KICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgYXJyYXkuCiAqLwpmdW5jdGlvbiBhc2NpaVRvQXJyYXkoc3RyaW5nKSB7CiAgcmV0dXJuIHN0cmluZy5zcGxpdCgnJyk7Cn0KCi8qKiBVc2VkIHRvIGNvbXBvc2UgdW5pY29kZSBjaGFyYWN0ZXIgY2xhc3Nlcy4gKi8KdmFyIHJzQXN0cmFsUmFuZ2UgPSAnXFx1ZDgwMC1cXHVkZmZmJzsKdmFyIHJzQ29tYm9NYXJrc1JhbmdlID0gJ1xcdTAzMDAtXFx1MDM2Zic7CnZhciByZUNvbWJvSGFsZk1hcmtzUmFuZ2UgPSAnXFx1ZmUyMC1cXHVmZTJmJzsKdmFyIHJzQ29tYm9TeW1ib2xzUmFuZ2UgPSAnXFx1MjBkMC1cXHUyMGZmJzsKdmFyIHJzQ29tYm9SYW5nZSA9IHJzQ29tYm9NYXJrc1JhbmdlICsgcmVDb21ib0hhbGZNYXJrc1JhbmdlICsgcnNDb21ib1N5bWJvbHNSYW5nZTsKdmFyIHJzVmFyUmFuZ2UgPSAnXFx1ZmUwZVxcdWZlMGYnOwoKLyoqIFVzZWQgdG8gY29tcG9zZSB1bmljb2RlIGNhcHR1cmUgZ3JvdXBzLiAqLwp2YXIgcnNaV0ogPSAnXFx1MjAwZCc7CgovKiogVXNlZCB0byBkZXRlY3Qgc3RyaW5ncyB3aXRoIFt6ZXJvLXdpZHRoIGpvaW5lcnMgb3IgY29kZSBwb2ludHMgZnJvbSB0aGUgYXN0cmFsIHBsYW5lc10oaHR0cDovL2Vldi5lZS9ibG9nLzIwMTUvMDkvMTIvZGFyay1jb3JuZXJzLW9mLXVuaWNvZGUvKS4gKi8KdmFyIHJlSGFzVW5pY29kZSA9IFJlZ0V4cCgnWycgKyByc1pXSiArIHJzQXN0cmFsUmFuZ2UgICsgcnNDb21ib1JhbmdlICsgcnNWYXJSYW5nZSArICddJyk7CgovKioKICogQ2hlY2tzIGlmIGBzdHJpbmdgIGNvbnRhaW5zIFVuaWNvZGUgc3ltYm9scy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGluc3BlY3QuCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhIHN5bWJvbCBpcyBmb3VuZCwgZWxzZSBgZmFsc2VgLgogKi8KZnVuY3Rpb24gaGFzVW5pY29kZShzdHJpbmcpIHsKICByZXR1cm4gcmVIYXNVbmljb2RlLnRlc3Qoc3RyaW5nKTsKfQoKLyoqIFVzZWQgdG8gY29tcG9zZSB1bmljb2RlIGNoYXJhY3RlciBjbGFzc2VzLiAqLwp2YXIgcnNBc3RyYWxSYW5nZSQxID0gJ1xcdWQ4MDAtXFx1ZGZmZic7CnZhciByc0NvbWJvTWFya3NSYW5nZSQxID0gJ1xcdTAzMDAtXFx1MDM2Zic7CnZhciByZUNvbWJvSGFsZk1hcmtzUmFuZ2UkMSA9ICdcXHVmZTIwLVxcdWZlMmYnOwp2YXIgcnNDb21ib1N5bWJvbHNSYW5nZSQxID0gJ1xcdTIwZDAtXFx1MjBmZic7CnZhciByc0NvbWJvUmFuZ2UkMSA9IHJzQ29tYm9NYXJrc1JhbmdlJDEgKyByZUNvbWJvSGFsZk1hcmtzUmFuZ2UkMSArIHJzQ29tYm9TeW1ib2xzUmFuZ2UkMTsKdmFyIHJzVmFyUmFuZ2UkMSA9ICdcXHVmZTBlXFx1ZmUwZic7CgovKiogVXNlZCB0byBjb21wb3NlIHVuaWNvZGUgY2FwdHVyZSBncm91cHMuICovCnZhciByc0FzdHJhbCA9ICdbJyArIHJzQXN0cmFsUmFuZ2UkMSArICddJzsKdmFyIHJzQ29tYm8gPSAnWycgKyByc0NvbWJvUmFuZ2UkMSArICddJzsKdmFyIHJzRml0eiA9ICdcXHVkODNjW1xcdWRmZmItXFx1ZGZmZl0nOwp2YXIgcnNNb2RpZmllciA9ICcoPzonICsgcnNDb21ibyArICd8JyArIHJzRml0eiArICcpJzsKdmFyIHJzTm9uQXN0cmFsID0gJ1teJyArIHJzQXN0cmFsUmFuZ2UkMSArICddJzsKdmFyIHJzUmVnaW9uYWwgPSAnKD86XFx1ZDgzY1tcXHVkZGU2LVxcdWRkZmZdKXsyfSc7CnZhciByc1N1cnJQYWlyID0gJ1tcXHVkODAwLVxcdWRiZmZdW1xcdWRjMDAtXFx1ZGZmZl0nOwp2YXIgcnNaV0okMSA9ICdcXHUyMDBkJzsKCi8qKiBVc2VkIHRvIGNvbXBvc2UgdW5pY29kZSByZWdleGVzLiAqLwp2YXIgcmVPcHRNb2QgPSByc01vZGlmaWVyICsgJz8nOwp2YXIgcnNPcHRWYXIgPSAnWycgKyByc1ZhclJhbmdlJDEgKyAnXT8nOwp2YXIgcnNPcHRKb2luID0gJyg/OicgKyByc1pXSiQxICsgJyg/OicgKyBbcnNOb25Bc3RyYWwsIHJzUmVnaW9uYWwsIHJzU3VyclBhaXJdLmpvaW4oJ3wnKSArICcpJyArIHJzT3B0VmFyICsgcmVPcHRNb2QgKyAnKSonOwp2YXIgcnNTZXEgPSByc09wdFZhciArIHJlT3B0TW9kICsgcnNPcHRKb2luOwp2YXIgcnNTeW1ib2wgPSAnKD86JyArIFtyc05vbkFzdHJhbCArIHJzQ29tYm8gKyAnPycsIHJzQ29tYm8sIHJzUmVnaW9uYWwsIHJzU3VyclBhaXIsIHJzQXN0cmFsXS5qb2luKCd8JykgKyAnKSc7CgovKiogVXNlZCB0byBtYXRjaCBbc3RyaW5nIHN5bWJvbHNdKGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LXVuaWNvZGUpLiAqLwp2YXIgcmVVbmljb2RlID0gUmVnRXhwKHJzRml0eiArICcoPz0nICsgcnNGaXR6ICsgJyl8JyArIHJzU3ltYm9sICsgcnNTZXEsICdnJyk7CgovKioKICogQ29udmVydHMgYSBVbmljb2RlIGBzdHJpbmdgIHRvIGFuIGFycmF5LgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gY29udmVydC4KICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgYXJyYXkuCiAqLwpmdW5jdGlvbiB1bmljb2RlVG9BcnJheShzdHJpbmcpIHsKICByZXR1cm4gc3RyaW5nLm1hdGNoKHJlVW5pY29kZSkgfHwgW107Cn0KCi8qKgogKiBDb252ZXJ0cyBgc3RyaW5nYCB0byBhbiBhcnJheS4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuCiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgY29udmVydGVkIGFycmF5LgogKi8KZnVuY3Rpb24gc3RyaW5nVG9BcnJheShzdHJpbmcpIHsKICByZXR1cm4gaGFzVW5pY29kZShzdHJpbmcpCiAgICA/IHVuaWNvZGVUb0FycmF5KHN0cmluZykKICAgIDogYXNjaWlUb0FycmF5KHN0cmluZyk7Cn0KCi8qKgogKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nLiBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWQgZm9yIGBudWxsYAogKiBhbmQgYHVuZGVmaW5lZGAgdmFsdWVzLiBUaGUgc2lnbiBvZiBgLTBgIGlzIHByZXNlcnZlZC4KICoKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgXwogKiBAc2luY2UgNC4wLjAKICogQGNhdGVnb3J5IExhbmcKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC4KICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgY29udmVydGVkIHN0cmluZy4KICogQGV4YW1wbGUKICoKICogXy50b1N0cmluZyhudWxsKTsKICogLy8gPT4gJycKICoKICogXy50b1N0cmluZygtMCk7CiAqIC8vID0+ICctMCcKICoKICogXy50b1N0cmluZyhbMSwgMiwgM10pOwogKiAvLyA9PiAnMSwyLDMnCiAqLwpmdW5jdGlvbiB0b1N0cmluZyh2YWx1ZSkgewogIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiBiYXNlVG9TdHJpbmcodmFsdWUpOwp9CgovKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLiAqLwp2YXIgcmVUcmltID0gL15ccyt8XHMrJC9nOwoKLyoqCiAqIFJlbW92ZXMgbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZSBvciBzcGVjaWZpZWQgY2hhcmFjdGVycyBmcm9tIGBzdHJpbmdgLgogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSAzLjAuMAogKiBAY2F0ZWdvcnkgU3RyaW5nCiAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIHRyaW0uCiAqIEBwYXJhbSB7c3RyaW5nfSBbY2hhcnM9d2hpdGVzcGFjZV0gVGhlIGNoYXJhY3RlcnMgdG8gdHJpbS4KICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGFuIGl0ZXJhdGVlIGZvciBtZXRob2RzIGxpa2UgYF8ubWFwYC4KICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgdHJpbW1lZCBzdHJpbmcuCiAqIEBleGFtcGxlCiAqCiAqIF8udHJpbSgnICBhYmMgICcpOwogKiAvLyA9PiAnYWJjJwogKgogKiBfLnRyaW0oJy1fLWFiYy1fLScsICdfLScpOwogKiAvLyA9PiAnYWJjJwogKgogKiBfLm1hcChbJyAgZm9vICAnLCAnICBiYXIgICddLCBfLnRyaW0pOwogKiAvLyA9PiBbJ2ZvbycsICdiYXInXQogKi8KZnVuY3Rpb24gdHJpbShzdHJpbmcsIGNoYXJzLCBndWFyZCkgewogIHN0cmluZyA9IHRvU3RyaW5nKHN0cmluZyk7CiAgaWYgKHN0cmluZyAmJiAoZ3VhcmQgfHwgY2hhcnMgPT09IHVuZGVmaW5lZCkpIHsKICAgIHJldHVybiBzdHJpbmcucmVwbGFjZShyZVRyaW0sICcnKTsKICB9CiAgaWYgKCFzdHJpbmcgfHwgIShjaGFycyA9IGJhc2VUb1N0cmluZyhjaGFycykpKSB7CiAgICByZXR1cm4gc3RyaW5nOwogIH0KICB2YXIgc3RyU3ltYm9scyA9IHN0cmluZ1RvQXJyYXkoc3RyaW5nKSwKICAgICAgY2hyU3ltYm9scyA9IHN0cmluZ1RvQXJyYXkoY2hhcnMpLAogICAgICBzdGFydCA9IGNoYXJzU3RhcnRJbmRleChzdHJTeW1ib2xzLCBjaHJTeW1ib2xzKSwKICAgICAgZW5kID0gY2hhcnNFbmRJbmRleChzdHJTeW1ib2xzLCBjaHJTeW1ib2xzKSArIDE7CgogIHJldHVybiBjYXN0U2xpY2Uoc3RyU3ltYm9scywgc3RhcnQsIGVuZCkuam9pbignJyk7Cn0KCnZhciBGTl9BUkdTID0gL14oPzphc3luY1xzKyk/KGZ1bmN0aW9uKT9ccypbXlwoXSpcKFxzKihbXlwpXSopXCkvbTsKdmFyIEZOX0FSR19TUExJVCA9IC8sLzsKdmFyIEZOX0FSRyA9IC8oPS4rKT8oXHMqKSQvOwp2YXIgU1RSSVBfQ09NTUVOVFMgPSAvKChcL1wvLiokKXwoXC9cKltcc1xTXSo/XCpcLykpL21nOwoKZnVuY3Rpb24gcGFyc2VQYXJhbXMoZnVuYykgewogICAgZnVuYyA9IGZ1bmMudG9TdHJpbmcoKS5yZXBsYWNlKFNUUklQX0NPTU1FTlRTLCAnJyk7CiAgICBmdW5jID0gZnVuYy5tYXRjaChGTl9BUkdTKVsyXS5yZXBsYWNlKCcgJywgJycpOwogICAgZnVuYyA9IGZ1bmMgPyBmdW5jLnNwbGl0KEZOX0FSR19TUExJVCkgOiBbXTsKICAgIGZ1bmMgPSBmdW5jLm1hcChmdW5jdGlvbiAoYXJnKXsKICAgICAgICByZXR1cm4gdHJpbShhcmcucmVwbGFjZShGTl9BUkcsICcnKSk7CiAgICB9KTsKICAgIHJldHVybiBmdW5jOwp9CgovKioKICogQSBkZXBlbmRlbmN5LWluamVjdGVkIHZlcnNpb24gb2YgdGhlIFthc3luYy5hdXRvXXtAbGluayBtb2R1bGU6Q29udHJvbEZsb3cuYXV0b30gZnVuY3Rpb24uIERlcGVuZGVudAogKiB0YXNrcyBhcmUgc3BlY2lmaWVkIGFzIHBhcmFtZXRlcnMgdG8gdGhlIGZ1bmN0aW9uLCBhZnRlciB0aGUgdXN1YWwgY2FsbGJhY2sKICogcGFyYW1ldGVyLCB3aXRoIHRoZSBwYXJhbWV0ZXIgbmFtZXMgbWF0Y2hpbmcgdGhlIG5hbWVzIG9mIHRoZSB0YXNrcyBpdAogKiBkZXBlbmRzIG9uLiBUaGlzIGNhbiBwcm92aWRlIGV2ZW4gbW9yZSByZWFkYWJsZSB0YXNrIGdyYXBocyB3aGljaCBjYW4gYmUKICogZWFzaWVyIHRvIG1haW50YWluLgogKgogKiBJZiBhIGZpbmFsIGNhbGxiYWNrIGlzIHNwZWNpZmllZCwgdGhlIHRhc2sgcmVzdWx0cyBhcmUgc2ltaWxhcmx5IGluamVjdGVkLAogKiBzcGVjaWZpZWQgYXMgbmFtZWQgcGFyYW1ldGVycyBhZnRlciB0aGUgaW5pdGlhbCBlcnJvciBwYXJhbWV0ZXIuCiAqCiAqIFRoZSBhdXRvSW5qZWN0IGZ1bmN0aW9uIGlzIHB1cmVseSBzeW50YWN0aWMgc3VnYXIgYW5kIGl0cyBzZW1hbnRpY3MgYXJlCiAqIG90aGVyd2lzZSBlcXVpdmFsZW50IHRvIFthc3luYy5hdXRvXXtAbGluayBtb2R1bGU6Q29udHJvbEZsb3cuYXV0b30uCiAqCiAqIEBuYW1lIGF1dG9JbmplY3QKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbnRyb2xGbG93CiAqIEBtZXRob2QKICogQHNlZSBbYXN5bmMuYXV0b117QGxpbmsgbW9kdWxlOkNvbnRyb2xGbG93LmF1dG99CiAqIEBjYXRlZ29yeSBDb250cm9sIEZsb3cKICogQHBhcmFtIHtPYmplY3R9IHRhc2tzIC0gQW4gb2JqZWN0LCBlYWNoIG9mIHdob3NlIHByb3BlcnRpZXMgaXMgYW4ge0BsaW5rIEFzeW5jRnVuY3Rpb259IG9mCiAqIHRoZSBmb3JtICdmdW5jKFtkZXBlbmRlbmNpZXMuLi5dLCBjYWxsYmFjaykuIFRoZSBvYmplY3QncyBrZXkgb2YgYSBwcm9wZXJ0eQogKiBzZXJ2ZXMgYXMgdGhlIG5hbWUgb2YgdGhlIHRhc2sgZGVmaW5lZCBieSB0aGF0IHByb3BlcnR5LCBpLmUuIGNhbiBiZSB1c2VkCiAqIHdoZW4gc3BlY2lmeWluZyByZXF1aXJlbWVudHMgZm9yIG90aGVyIHRhc2tzLgogKiAqIFRoZSBgY2FsbGJhY2tgIHBhcmFtZXRlciBpcyBhIGBjYWxsYmFjayhlcnIsIHJlc3VsdClgIHdoaWNoIG11c3QgYmUgY2FsbGVkCiAqICAgd2hlbiBmaW5pc2hlZCwgcGFzc2luZyBhbiBgZXJyb3JgICh3aGljaCBjYW4gYmUgYG51bGxgKSBhbmQgdGhlIHJlc3VsdCBvZgogKiAgIHRoZSBmdW5jdGlvbidzIGV4ZWN1dGlvbi4gVGhlIHJlbWFpbmluZyBwYXJhbWV0ZXJzIG5hbWUgb3RoZXIgdGFza3Mgb24KICogICB3aGljaCB0aGUgdGFzayBpcyBkZXBlbmRlbnQsIGFuZCB0aGUgcmVzdWx0cyBmcm9tIHRob3NlIHRhc2tzIGFyZSB0aGUKICogICBhcmd1bWVudHMgb2YgdGhvc2UgcGFyYW1ldGVycy4KICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSAtIEFuIG9wdGlvbmFsIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCB3aGVuIGFsbAogKiB0aGUgdGFza3MgaGF2ZSBiZWVuIGNvbXBsZXRlZC4gSXQgcmVjZWl2ZXMgdGhlIGBlcnJgIGFyZ3VtZW50IGlmIGFueSBgdGFza3NgCiAqIHBhc3MgYW4gZXJyb3IgdG8gdGhlaXIgY2FsbGJhY2ssIGFuZCBhIGByZXN1bHRzYCBvYmplY3Qgd2l0aCBhbnkgY29tcGxldGVkCiAqIHRhc2sgcmVzdWx0cywgc2ltaWxhciB0byBgYXV0b2AuCiAqIEBleGFtcGxlCiAqCiAqIC8vICBUaGUgZXhhbXBsZSBmcm9tIGBhdXRvYCBjYW4gYmUgcmV3cml0dGVuIGFzIGZvbGxvd3M6CiAqIGFzeW5jLmF1dG9JbmplY3QoewogKiAgICAgZ2V0X2RhdGE6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAqICAgICAgICAgLy8gYXN5bmMgY29kZSB0byBnZXQgc29tZSBkYXRhCiAqICAgICAgICAgY2FsbGJhY2sobnVsbCwgJ2RhdGEnLCAnY29udmVydGVkIHRvIGFycmF5Jyk7CiAqICAgICB9LAogKiAgICAgbWFrZV9mb2xkZXI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAqICAgICAgICAgLy8gYXN5bmMgY29kZSB0byBjcmVhdGUgYSBkaXJlY3RvcnkgdG8gc3RvcmUgYSBmaWxlIGluCiAqICAgICAgICAgLy8gdGhpcyBpcyBydW4gYXQgdGhlIHNhbWUgdGltZSBhcyBnZXR0aW5nIHRoZSBkYXRhCiAqICAgICAgICAgY2FsbGJhY2sobnVsbCwgJ2ZvbGRlcicpOwogKiAgICAgfSwKICogICAgIHdyaXRlX2ZpbGU6IGZ1bmN0aW9uKGdldF9kYXRhLCBtYWtlX2ZvbGRlciwgY2FsbGJhY2spIHsKICogICAgICAgICAvLyBvbmNlIHRoZXJlIGlzIHNvbWUgZGF0YSBhbmQgdGhlIGRpcmVjdG9yeSBleGlzdHMsCiAqICAgICAgICAgLy8gd3JpdGUgdGhlIGRhdGEgdG8gYSBmaWxlIGluIHRoZSBkaXJlY3RvcnkKICogICAgICAgICBjYWxsYmFjayhudWxsLCAnZmlsZW5hbWUnKTsKICogICAgIH0sCiAqICAgICBlbWFpbF9saW5rOiBmdW5jdGlvbih3cml0ZV9maWxlLCBjYWxsYmFjaykgewogKiAgICAgICAgIC8vIG9uY2UgdGhlIGZpbGUgaXMgd3JpdHRlbiBsZXQncyBlbWFpbCBhIGxpbmsgdG8gaXQuLi4KICogICAgICAgICAvLyB3cml0ZV9maWxlIGNvbnRhaW5zIHRoZSBmaWxlbmFtZSByZXR1cm5lZCBieSB3cml0ZV9maWxlLgogKiAgICAgICAgIGNhbGxiYWNrKG51bGwsIHsnZmlsZSc6d3JpdGVfZmlsZSwgJ2VtYWlsJzondXNlckBleGFtcGxlLmNvbSd9KTsKICogICAgIH0KICogfSwgZnVuY3Rpb24oZXJyLCByZXN1bHRzKSB7CiAqICAgICBjb25zb2xlLmxvZygnZXJyID0gJywgZXJyKTsKICogICAgIGNvbnNvbGUubG9nKCdlbWFpbF9saW5rID0gJywgcmVzdWx0cy5lbWFpbF9saW5rKTsKICogfSk7CiAqCiAqIC8vIElmIHlvdSBhcmUgdXNpbmcgYSBKUyBtaW5pZmllciB0aGF0IG1hbmdsZXMgcGFyYW1ldGVyIG5hbWVzLCBgYXV0b0luamVjdGAKICogLy8gd2lsbCBub3Qgd29yayB3aXRoIHBsYWluIGZ1bmN0aW9ucywgc2luY2UgdGhlIHBhcmFtZXRlciBuYW1lcyB3aWxsIGJlCiAqIC8vIGNvbGxhcHNlZCB0byBhIHNpbmdsZSBsZXR0ZXIgaWRlbnRpZmllci4gIFRvIHdvcmsgYXJvdW5kIHRoaXMsIHlvdSBjYW4KICogLy8gZXhwbGljaXRseSBzcGVjaWZ5IHRoZSBuYW1lcyBvZiB0aGUgcGFyYW1ldGVycyB5b3VyIHRhc2sgZnVuY3Rpb24gbmVlZHMKICogLy8gaW4gYW4gYXJyYXksIHNpbWlsYXIgdG8gQW5ndWxhci5qcyBkZXBlbmRlbmN5IGluamVjdGlvbi4KICoKICogLy8gVGhpcyBzdGlsbCBoYXMgYW4gYWR2YW50YWdlIG92ZXIgcGxhaW4gYGF1dG9gLCBzaW5jZSB0aGUgcmVzdWx0cyBhIHRhc2sKICogLy8gZGVwZW5kcyBvbiBhcmUgc3RpbGwgc3ByZWFkIGludG8gYXJndW1lbnRzLgogKiBhc3luYy5hdXRvSW5qZWN0KHsKICogICAgIC8vLi4uCiAqICAgICB3cml0ZV9maWxlOiBbJ2dldF9kYXRhJywgJ21ha2VfZm9sZGVyJywgZnVuY3Rpb24oZ2V0X2RhdGEsIG1ha2VfZm9sZGVyLCBjYWxsYmFjaykgewogKiAgICAgICAgIGNhbGxiYWNrKG51bGwsICdmaWxlbmFtZScpOwogKiAgICAgfV0sCiAqICAgICBlbWFpbF9saW5rOiBbJ3dyaXRlX2ZpbGUnLCBmdW5jdGlvbih3cml0ZV9maWxlLCBjYWxsYmFjaykgewogKiAgICAgICAgIGNhbGxiYWNrKG51bGwsIHsnZmlsZSc6d3JpdGVfZmlsZSwgJ2VtYWlsJzondXNlckBleGFtcGxlLmNvbSd9KTsKICogICAgIH1dCiAqICAgICAvLy4uLgogKiB9LCBmdW5jdGlvbihlcnIsIHJlc3VsdHMpIHsKICogICAgIGNvbnNvbGUubG9nKCdlcnIgPSAnLCBlcnIpOwogKiAgICAgY29uc29sZS5sb2coJ2VtYWlsX2xpbmsgPSAnLCByZXN1bHRzLmVtYWlsX2xpbmspOwogKiB9KTsKICovCmZ1bmN0aW9uIGF1dG9JbmplY3QodGFza3MsIGNhbGxiYWNrKSB7CiAgICB2YXIgbmV3VGFza3MgPSB7fTsKCiAgICBiYXNlRm9yT3duKHRhc2tzLCBmdW5jdGlvbiAodGFza0ZuLCBrZXkpIHsKICAgICAgICB2YXIgcGFyYW1zOwogICAgICAgIHZhciBmbklzQXN5bmMgPSBpc0FzeW5jKHRhc2tGbik7CiAgICAgICAgdmFyIGhhc05vRGVwcyA9CiAgICAgICAgICAgICghZm5Jc0FzeW5jICYmIHRhc2tGbi5sZW5ndGggPT09IDEpIHx8CiAgICAgICAgICAgIChmbklzQXN5bmMgJiYgdGFza0ZuLmxlbmd0aCA9PT0gMCk7CgogICAgICAgIGlmIChpc0FycmF5KHRhc2tGbikpIHsKICAgICAgICAgICAgcGFyYW1zID0gdGFza0ZuLnNsaWNlKDAsIC0xKTsKICAgICAgICAgICAgdGFza0ZuID0gdGFza0ZuW3Rhc2tGbi5sZW5ndGggLSAxXTsKCiAgICAgICAgICAgIG5ld1Rhc2tzW2tleV0gPSBwYXJhbXMuY29uY2F0KHBhcmFtcy5sZW5ndGggPiAwID8gbmV3VGFzayA6IHRhc2tGbik7CiAgICAgICAgfSBlbHNlIGlmIChoYXNOb0RlcHMpIHsKICAgICAgICAgICAgLy8gbm8gZGVwZW5kZW5jaWVzLCB1c2UgdGhlIGZ1bmN0aW9uIGFzLWlzCiAgICAgICAgICAgIG5ld1Rhc2tzW2tleV0gPSB0YXNrRm47CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcGFyYW1zID0gcGFyc2VQYXJhbXModGFza0ZuKTsKICAgICAgICAgICAgaWYgKHRhc2tGbi5sZW5ndGggPT09IDAgJiYgIWZuSXNBc3luYyAmJiBwYXJhbXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoImF1dG9JbmplY3QgdGFzayBmdW5jdGlvbnMgcmVxdWlyZSBleHBsaWNpdCBwYXJhbWV0ZXJzLiIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyByZW1vdmUgY2FsbGJhY2sgcGFyYW0KICAgICAgICAgICAgaWYgKCFmbklzQXN5bmMpIHBhcmFtcy5wb3AoKTsKCiAgICAgICAgICAgIG5ld1Rhc2tzW2tleV0gPSBwYXJhbXMuY29uY2F0KG5ld1Rhc2spOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbmV3VGFzayhyZXN1bHRzLCB0YXNrQ2IpIHsKICAgICAgICAgICAgdmFyIG5ld0FyZ3MgPSBhcnJheU1hcChwYXJhbXMsIGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0c1tuYW1lXTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIG5ld0FyZ3MucHVzaCh0YXNrQ2IpOwogICAgICAgICAgICB3cmFwQXN5bmModGFza0ZuKS5hcHBseShudWxsLCBuZXdBcmdzKTsKICAgICAgICB9CiAgICB9KTsKCiAgICBhdXRvKG5ld1Rhc2tzLCBjYWxsYmFjayk7Cn0KCi8vIFNpbXBsZSBkb3VibHkgbGlua2VkIGxpc3QgKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0RvdWJseV9saW5rZWRfbGlzdCkgaW1wbGVtZW50YXRpb24KLy8gdXNlZCBmb3IgcXVldWVzLiBUaGlzIGltcGxlbWVudGF0aW9uIGFzc3VtZXMgdGhhdCB0aGUgbm9kZSBwcm92aWRlZCBieSB0aGUgdXNlciBjYW4gYmUgbW9kaWZpZWQKLy8gdG8gYWRqdXN0IHRoZSBuZXh0IGFuZCBsYXN0IHByb3BlcnRpZXMuIFdlIGltcGxlbWVudCBvbmx5IHRoZSBtaW5pbWFsIGZ1bmN0aW9uYWxpdHkKLy8gZm9yIHF1ZXVlIHN1cHBvcnQuCmZ1bmN0aW9uIERMTCgpIHsKICAgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG51bGw7CiAgICB0aGlzLmxlbmd0aCA9IDA7Cn0KCmZ1bmN0aW9uIHNldEluaXRpYWwoZGxsLCBub2RlKSB7CiAgICBkbGwubGVuZ3RoID0gMTsKICAgIGRsbC5oZWFkID0gZGxsLnRhaWwgPSBub2RlOwp9CgpETEwucHJvdG90eXBlLnJlbW92ZUxpbmsgPSBmdW5jdGlvbihub2RlKSB7CiAgICBpZiAobm9kZS5wcmV2KSBub2RlLnByZXYubmV4dCA9IG5vZGUubmV4dDsKICAgIGVsc2UgdGhpcy5oZWFkID0gbm9kZS5uZXh0OwogICAgaWYgKG5vZGUubmV4dCkgbm9kZS5uZXh0LnByZXYgPSBub2RlLnByZXY7CiAgICBlbHNlIHRoaXMudGFpbCA9IG5vZGUucHJldjsKCiAgICBub2RlLnByZXYgPSBub2RlLm5leHQgPSBudWxsOwogICAgdGhpcy5sZW5ndGggLT0gMTsKICAgIHJldHVybiBub2RlOwp9OwoKRExMLnByb3RvdHlwZS5lbXB0eSA9IGZ1bmN0aW9uICgpIHsKICAgIHdoaWxlKHRoaXMuaGVhZCkgdGhpcy5zaGlmdCgpOwogICAgcmV0dXJuIHRoaXM7Cn07CgpETEwucHJvdG90eXBlLmluc2VydEFmdGVyID0gZnVuY3Rpb24obm9kZSwgbmV3Tm9kZSkgewogICAgbmV3Tm9kZS5wcmV2ID0gbm9kZTsKICAgIG5ld05vZGUubmV4dCA9IG5vZGUubmV4dDsKICAgIGlmIChub2RlLm5leHQpIG5vZGUubmV4dC5wcmV2ID0gbmV3Tm9kZTsKICAgIGVsc2UgdGhpcy50YWlsID0gbmV3Tm9kZTsKICAgIG5vZGUubmV4dCA9IG5ld05vZGU7CiAgICB0aGlzLmxlbmd0aCArPSAxOwp9OwoKRExMLnByb3RvdHlwZS5pbnNlcnRCZWZvcmUgPSBmdW5jdGlvbihub2RlLCBuZXdOb2RlKSB7CiAgICBuZXdOb2RlLnByZXYgPSBub2RlLnByZXY7CiAgICBuZXdOb2RlLm5leHQgPSBub2RlOwogICAgaWYgKG5vZGUucHJldikgbm9kZS5wcmV2Lm5leHQgPSBuZXdOb2RlOwogICAgZWxzZSB0aGlzLmhlYWQgPSBuZXdOb2RlOwogICAgbm9kZS5wcmV2ID0gbmV3Tm9kZTsKICAgIHRoaXMubGVuZ3RoICs9IDE7Cn07CgpETEwucHJvdG90eXBlLnVuc2hpZnQgPSBmdW5jdGlvbihub2RlKSB7CiAgICBpZiAodGhpcy5oZWFkKSB0aGlzLmluc2VydEJlZm9yZSh0aGlzLmhlYWQsIG5vZGUpOwogICAgZWxzZSBzZXRJbml0aWFsKHRoaXMsIG5vZGUpOwp9OwoKRExMLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24obm9kZSkgewogICAgaWYgKHRoaXMudGFpbCkgdGhpcy5pbnNlcnRBZnRlcih0aGlzLnRhaWwsIG5vZGUpOwogICAgZWxzZSBzZXRJbml0aWFsKHRoaXMsIG5vZGUpOwp9OwoKRExMLnByb3RvdHlwZS5zaGlmdCA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuaGVhZCAmJiB0aGlzLnJlbW92ZUxpbmsodGhpcy5oZWFkKTsKfTsKCkRMTC5wcm90b3R5cGUucG9wID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy50YWlsICYmIHRoaXMucmVtb3ZlTGluayh0aGlzLnRhaWwpOwp9OwoKRExMLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGFyciA9IEFycmF5KHRoaXMubGVuZ3RoKTsKICAgIHZhciBjdXJyID0gdGhpcy5oZWFkOwogICAgZm9yKHZhciBpZHggPSAwOyBpZHggPCB0aGlzLmxlbmd0aDsgaWR4KyspIHsKICAgICAgICBhcnJbaWR4XSA9IGN1cnIuZGF0YTsKICAgICAgICBjdXJyID0gY3Vyci5uZXh0OwogICAgfQogICAgcmV0dXJuIGFycjsKfTsKCkRMTC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKHRlc3RGbikgewogICAgdmFyIGN1cnIgPSB0aGlzLmhlYWQ7CiAgICB3aGlsZSghIWN1cnIpIHsKICAgICAgICB2YXIgbmV4dCA9IGN1cnIubmV4dDsKICAgICAgICBpZiAodGVzdEZuKGN1cnIpKSB7CiAgICAgICAgICAgIHRoaXMucmVtb3ZlTGluayhjdXJyKTsKICAgICAgICB9CiAgICAgICAgY3VyciA9IG5leHQ7CiAgICB9CiAgICByZXR1cm4gdGhpczsKfTsKCmZ1bmN0aW9uIHF1ZXVlKHdvcmtlciwgY29uY3VycmVuY3ksIHBheWxvYWQpIHsKICAgIGlmIChjb25jdXJyZW5jeSA9PSBudWxsKSB7CiAgICAgICAgY29uY3VycmVuY3kgPSAxOwogICAgfQogICAgZWxzZSBpZihjb25jdXJyZW5jeSA9PT0gMCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignQ29uY3VycmVuY3kgbXVzdCBub3QgYmUgemVybycpOwogICAgfQoKICAgIHZhciBfd29ya2VyID0gd3JhcEFzeW5jKHdvcmtlcik7CiAgICB2YXIgbnVtUnVubmluZyA9IDA7CiAgICB2YXIgd29ya2Vyc0xpc3QgPSBbXTsKCiAgICB2YXIgcHJvY2Vzc2luZ1NjaGVkdWxlZCA9IGZhbHNlOwogICAgZnVuY3Rpb24gX2luc2VydChkYXRhLCBpbnNlcnRBdEZyb250LCBjYWxsYmFjaykgewogICAgICAgIGlmIChjYWxsYmFjayAhPSBudWxsICYmIHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Rhc2sgY2FsbGJhY2sgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CiAgICAgICAgfQogICAgICAgIHEuc3RhcnRlZCA9IHRydWU7CiAgICAgICAgaWYgKCFpc0FycmF5KGRhdGEpKSB7CiAgICAgICAgICAgIGRhdGEgPSBbZGF0YV07CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMCAmJiBxLmlkbGUoKSkgewogICAgICAgICAgICAvLyBjYWxsIGRyYWluIGltbWVkaWF0ZWx5IGlmIHRoZXJlIGFyZSBubyB0YXNrcwogICAgICAgICAgICByZXR1cm4gc2V0SW1tZWRpYXRlJDEoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBxLmRyYWluKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBkYXRhLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgICB2YXIgaXRlbSA9IHsKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGFbaV0sCiAgICAgICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2sgfHwgbm9vcAogICAgICAgICAgICB9OwoKICAgICAgICAgICAgaWYgKGluc2VydEF0RnJvbnQpIHsKICAgICAgICAgICAgICAgIHEuX3Rhc2tzLnVuc2hpZnQoaXRlbSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBxLl90YXNrcy5wdXNoKGl0ZW0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoIXByb2Nlc3NpbmdTY2hlZHVsZWQpIHsKICAgICAgICAgICAgcHJvY2Vzc2luZ1NjaGVkdWxlZCA9IHRydWU7CiAgICAgICAgICAgIHNldEltbWVkaWF0ZSQxKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcHJvY2Vzc2luZ1NjaGVkdWxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgcS5wcm9jZXNzKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBfbmV4dCh0YXNrcykgewogICAgICAgIHJldHVybiBmdW5jdGlvbihlcnIpewogICAgICAgICAgICBudW1SdW5uaW5nIC09IDE7CgogICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRhc2tzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc1tpXTsKCiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBiYXNlSW5kZXhPZih3b3JrZXJzTGlzdCwgdGFzaywgMCk7CiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHsKICAgICAgICAgICAgICAgICAgICB3b3JrZXJzTGlzdC5zaGlmdCgpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbmRleCA+IDApIHsKICAgICAgICAgICAgICAgICAgICB3b3JrZXJzTGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRhc2suY2FsbGJhY2suYXBwbHkodGFzaywgYXJndW1lbnRzKTsKCiAgICAgICAgICAgICAgICBpZiAoZXJyICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBxLmVycm9yKGVyciwgdGFzay5kYXRhKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKG51bVJ1bm5pbmcgPD0gKHEuY29uY3VycmVuY3kgLSBxLmJ1ZmZlcikgKSB7CiAgICAgICAgICAgICAgICBxLnVuc2F0dXJhdGVkKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChxLmlkbGUoKSkgewogICAgICAgICAgICAgICAgcS5kcmFpbigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHEucHJvY2VzcygpOwogICAgICAgIH07CiAgICB9CgogICAgdmFyIGlzUHJvY2Vzc2luZyA9IGZhbHNlOwogICAgdmFyIHEgPSB7CiAgICAgICAgX3Rhc2tzOiBuZXcgRExMKCksCiAgICAgICAgY29uY3VycmVuY3k6IGNvbmN1cnJlbmN5LAogICAgICAgIHBheWxvYWQ6IHBheWxvYWQsCiAgICAgICAgc2F0dXJhdGVkOiBub29wLAogICAgICAgIHVuc2F0dXJhdGVkOm5vb3AsCiAgICAgICAgYnVmZmVyOiBjb25jdXJyZW5jeSAvIDQsCiAgICAgICAgZW1wdHk6IG5vb3AsCiAgICAgICAgZHJhaW46IG5vb3AsCiAgICAgICAgZXJyb3I6IG5vb3AsCiAgICAgICAgc3RhcnRlZDogZmFsc2UsCiAgICAgICAgcGF1c2VkOiBmYWxzZSwKICAgICAgICBwdXNoOiBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHsKICAgICAgICAgICAgX2luc2VydChkYXRhLCBmYWxzZSwgY2FsbGJhY2spOwogICAgICAgIH0sCiAgICAgICAga2lsbDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBxLmRyYWluID0gbm9vcDsKICAgICAgICAgICAgcS5fdGFza3MuZW1wdHkoKTsKICAgICAgICB9LAogICAgICAgIHVuc2hpZnQ6IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykgewogICAgICAgICAgICBfaW5zZXJ0KGRhdGEsIHRydWUsIGNhbGxiYWNrKTsKICAgICAgICB9LAogICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKHRlc3RGbikgewogICAgICAgICAgICBxLl90YXNrcy5yZW1vdmUodGVzdEZuKTsKICAgICAgICB9LAogICAgICAgIHByb2Nlc3M6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8gQXZvaWQgdHJ5aW5nIHRvIHN0YXJ0IHRvbyBtYW55IHByb2Nlc3Npbmcgb3BlcmF0aW9ucy4gVGhpcyBjYW4gb2NjdXIKICAgICAgICAgICAgLy8gd2hlbiBjYWxsYmFja3MgcmVzb2x2ZSBzeW5jaHJvbm91c2x5ICgjMTI2NykuCiAgICAgICAgICAgIGlmIChpc1Byb2Nlc3NpbmcpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpc1Byb2Nlc3NpbmcgPSB0cnVlOwogICAgICAgICAgICB3aGlsZSghcS5wYXVzZWQgJiYgbnVtUnVubmluZyA8IHEuY29uY3VycmVuY3kgJiYgcS5fdGFza3MubGVuZ3RoKXsKICAgICAgICAgICAgICAgIHZhciB0YXNrcyA9IFtdLCBkYXRhID0gW107CiAgICAgICAgICAgICAgICB2YXIgbCA9IHEuX3Rhc2tzLmxlbmd0aDsKICAgICAgICAgICAgICAgIGlmIChxLnBheWxvYWQpIGwgPSBNYXRoLm1pbihsLCBxLnBheWxvYWQpOwogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IHEuX3Rhc2tzLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgdGFza3MucHVzaChub2RlKTsKICAgICAgICAgICAgICAgICAgICB3b3JrZXJzTGlzdC5wdXNoKG5vZGUpOwogICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChub2RlLmRhdGEpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG51bVJ1bm5pbmcgKz0gMTsKCiAgICAgICAgICAgICAgICBpZiAocS5fdGFza3MubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgcS5lbXB0eSgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChudW1SdW5uaW5nID09PSBxLmNvbmN1cnJlbmN5KSB7CiAgICAgICAgICAgICAgICAgICAgcS5zYXR1cmF0ZWQoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgY2IgPSBvbmx5T25jZShfbmV4dCh0YXNrcykpOwogICAgICAgICAgICAgICAgX3dvcmtlcihkYXRhLCBjYik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaXNQcm9jZXNzaW5nID0gZmFsc2U7CiAgICAgICAgfSwKICAgICAgICBsZW5ndGg6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHEuX3Rhc2tzLmxlbmd0aDsKICAgICAgICB9LAogICAgICAgIHJ1bm5pbmc6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG51bVJ1bm5pbmc7CiAgICAgICAgfSwKICAgICAgICB3b3JrZXJzTGlzdDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gd29ya2Vyc0xpc3Q7CiAgICAgICAgfSwKICAgICAgICBpZGxlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIHEuX3Rhc2tzLmxlbmd0aCArIG51bVJ1bm5pbmcgPT09IDA7CiAgICAgICAgfSwKICAgICAgICBwYXVzZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBxLnBhdXNlZCA9IHRydWU7CiAgICAgICAgfSwKICAgICAgICByZXN1bWU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKHEucGF1c2VkID09PSBmYWxzZSkgeyByZXR1cm47IH0KICAgICAgICAgICAgcS5wYXVzZWQgPSBmYWxzZTsKICAgICAgICAgICAgc2V0SW1tZWRpYXRlJDEocS5wcm9jZXNzKTsKICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIHE7Cn0KCi8qKgogKiBBIGNhcmdvIG9mIHRhc2tzIGZvciB0aGUgd29ya2VyIGZ1bmN0aW9uIHRvIGNvbXBsZXRlLiBDYXJnbyBpbmhlcml0cyBhbGwgb2YKICogdGhlIHNhbWUgbWV0aG9kcyBhbmQgZXZlbnQgY2FsbGJhY2tzIGFzIFtgcXVldWVgXXtAbGluayBtb2R1bGU6Q29udHJvbEZsb3cucXVldWV9LgogKiBAdHlwZWRlZiB7T2JqZWN0fSBDYXJnb09iamVjdAogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbnRyb2xGbG93CiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGxlbmd0aCAtIEEgZnVuY3Rpb24gcmV0dXJuaW5nIHRoZSBudW1iZXIgb2YgaXRlbXMKICogd2FpdGluZyB0byBiZSBwcm9jZXNzZWQuIEludm9rZSBsaWtlIGBjYXJnby5sZW5ndGgoKWAuCiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBwYXlsb2FkIC0gQW4gYGludGVnZXJgIGZvciBkZXRlcm1pbmluZyBob3cgbWFueSB0YXNrcwogKiBzaG91bGQgYmUgcHJvY2VzcyBwZXIgcm91bmQuIFRoaXMgcHJvcGVydHkgY2FuIGJlIGNoYW5nZWQgYWZ0ZXIgYSBgY2FyZ29gIGlzCiAqIGNyZWF0ZWQgdG8gYWx0ZXIgdGhlIHBheWxvYWQgb24tdGhlLWZseS4KICogQHByb3BlcnR5IHtGdW5jdGlvbn0gcHVzaCAtIEFkZHMgYHRhc2tgIHRvIHRoZSBgcXVldWVgLiBUaGUgY2FsbGJhY2sgaXMKICogY2FsbGVkIG9uY2UgdGhlIGB3b3JrZXJgIGhhcyBmaW5pc2hlZCBwcm9jZXNzaW5nIHRoZSB0YXNrLiBJbnN0ZWFkIG9mIGEKICogc2luZ2xlIHRhc2ssIGFuIGFycmF5IG9mIGB0YXNrc2AgY2FuIGJlIHN1Ym1pdHRlZC4gVGhlIHJlc3BlY3RpdmUgY2FsbGJhY2sgaXMKICogdXNlZCBmb3IgZXZlcnkgdGFzayBpbiB0aGUgbGlzdC4gSW52b2tlIGxpa2UgYGNhcmdvLnB1c2godGFzaywgW2NhbGxiYWNrXSlgLgogKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzYXR1cmF0ZWQgLSBBIGNhbGxiYWNrIHRoYXQgaXMgY2FsbGVkIHdoZW4gdGhlCiAqIGBxdWV1ZS5sZW5ndGgoKWAgaGl0cyB0aGUgY29uY3VycmVuY3kgYW5kIGZ1cnRoZXIgdGFza3Mgd2lsbCBiZSBxdWV1ZWQuCiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGVtcHR5IC0gQSBjYWxsYmFjayB0aGF0IGlzIGNhbGxlZCB3aGVuIHRoZSBsYXN0IGl0ZW0KICogZnJvbSB0aGUgYHF1ZXVlYCBpcyBnaXZlbiB0byBhIGB3b3JrZXJgLgogKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBkcmFpbiAtIEEgY2FsbGJhY2sgdGhhdCBpcyBjYWxsZWQgd2hlbiB0aGUgbGFzdCBpdGVtCiAqIGZyb20gdGhlIGBxdWV1ZWAgaGFzIHJldHVybmVkIGZyb20gdGhlIGB3b3JrZXJgLgogKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBpZGxlIC0gYSBmdW5jdGlvbiByZXR1cm5pbmcgZmFsc2UgaWYgdGhlcmUgYXJlIGl0ZW1zCiAqIHdhaXRpbmcgb3IgYmVpbmcgcHJvY2Vzc2VkLCBvciB0cnVlIGlmIG5vdC4gSW52b2tlIGxpa2UgYGNhcmdvLmlkbGUoKWAuCiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHBhdXNlIC0gYSBmdW5jdGlvbiB0aGF0IHBhdXNlcyB0aGUgcHJvY2Vzc2luZyBvZiB0YXNrcwogKiB1bnRpbCBgcmVzdW1lKClgIGlzIGNhbGxlZC4gSW52b2tlIGxpa2UgYGNhcmdvLnBhdXNlKClgLgogKiBAcHJvcGVydHkge0Z1bmN0aW9ufSByZXN1bWUgLSBhIGZ1bmN0aW9uIHRoYXQgcmVzdW1lcyB0aGUgcHJvY2Vzc2luZyBvZgogKiBxdWV1ZWQgdGFza3Mgd2hlbiB0aGUgcXVldWUgaXMgcGF1c2VkLiBJbnZva2UgbGlrZSBgY2FyZ28ucmVzdW1lKClgLgogKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBraWxsIC0gYSBmdW5jdGlvbiB0aGF0IHJlbW92ZXMgdGhlIGBkcmFpbmAgY2FsbGJhY2sgYW5kCiAqIGVtcHRpZXMgcmVtYWluaW5nIHRhc2tzIGZyb20gdGhlIHF1ZXVlIGZvcmNpbmcgaXQgdG8gZ28gaWRsZS4gSW52b2tlIGxpa2UgYGNhcmdvLmtpbGwoKWAuCiAqLwoKLyoqCiAqIENyZWF0ZXMgYSBgY2FyZ29gIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQgcGF5bG9hZC4gVGFza3MgYWRkZWQgdG8gdGhlCiAqIGNhcmdvIHdpbGwgYmUgcHJvY2Vzc2VkIGFsdG9nZXRoZXIgKHVwIHRvIHRoZSBgcGF5bG9hZGAgbGltaXQpLiBJZiB0aGUKICogYHdvcmtlcmAgaXMgaW4gcHJvZ3Jlc3MsIHRoZSB0YXNrIGlzIHF1ZXVlZCB1bnRpbCBpdCBiZWNvbWVzIGF2YWlsYWJsZS4gT25jZQogKiB0aGUgYHdvcmtlcmAgaGFzIGNvbXBsZXRlZCBzb21lIHRhc2tzLCBlYWNoIGNhbGxiYWNrIG9mIHRob3NlIHRhc2tzIGlzCiAqIGNhbGxlZC4gQ2hlY2sgb3V0IFt0aGVzZV0oaHR0cHM6Ly9jYW1vLmdpdGh1YnVzZXJjb250ZW50LmNvbS82YmJkMzZmNGNmNWIzNWEwZjExYTk2ZGNkMmU5NzcxMWZmYzJmYjM3LzY4NzQ3NDcwNzMzYTJmMmY2NjJlNjM2YzZmNzU2NDJlNjc2OTc0Njg3NTYyMmU2MzZmNmQyZjYxNzM3MzY1NzQ3MzJmMzEzNjM3MzYzODM3MzEyZjM2MzgzMTMwMzgyZjYyNjI2MzMwNjM2NjYyMzAyZDM1NjYzMjM5MmQzMTMxNjUzMjJkMzkzNzM0NjYyZDMzMzMzOTM3NjMzNjM0NjQ2MzM4MzUzODJlNjc2OTY2KSBbYW5pbWF0aW9uc10oaHR0cHM6Ly9jYW1vLmdpdGh1YnVzZXJjb250ZW50LmNvbS9mNDgxMGUwMGUxYzVmNWY4YWRkYmUzZTlmNDkwNjRmZDVkMTAyNjk5LzY4NzQ3NDcwNzMzYTJmMmY2NjJlNjM2YzZmNzU2NDJlNjc2OTc0Njg3NTYyMmU2MzZmNmQyZjYxNzM3MzY1NzQ3MzJmMzEzNjM3MzYzODM3MzEyZjM2MzgzMTMwMzEyZjM4MzQ2MzM5MzIzMDM2MzYyZDM1NjYzMjM5MmQzMTMxNjUzMjJkMzgzMTM0NjYyZDM5NjQzMzY0MzAzMjM0MzEzMzYyNjY2NDJlNjc2OTY2KQogKiBmb3IgaG93IGBjYXJnb2AgYW5kIGBxdWV1ZWAgd29yay4KICoKICogV2hpbGUgW2BxdWV1ZWBde0BsaW5rIG1vZHVsZTpDb250cm9sRmxvdy5xdWV1ZX0gcGFzc2VzIG9ubHkgb25lIHRhc2sgdG8gb25lIG9mIGEgZ3JvdXAgb2Ygd29ya2VycwogKiBhdCBhIHRpbWUsIGNhcmdvIHBhc3NlcyBhbiBhcnJheSBvZiB0YXNrcyB0byBhIHNpbmdsZSB3b3JrZXIsIHJlcGVhdGluZwogKiB3aGVuIHRoZSB3b3JrZXIgaXMgZmluaXNoZWQuCiAqCiAqIEBuYW1lIGNhcmdvCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIG1vZHVsZTpDb250cm9sRmxvdwogKiBAbWV0aG9kCiAqIEBzZWUgW2FzeW5jLnF1ZXVlXXtAbGluayBtb2R1bGU6Q29udHJvbEZsb3cucXVldWV9CiAqIEBjYXRlZ29yeSBDb250cm9sIEZsb3cKICogQHBhcmFtIHtBc3luY0Z1bmN0aW9ufSB3b3JrZXIgLSBBbiBhc3luY2hyb25vdXMgZnVuY3Rpb24gZm9yIHByb2Nlc3NpbmcgYW4gYXJyYXkKICogb2YgcXVldWVkIHRhc2tzLiBJbnZva2VkIHdpdGggYCh0YXNrcywgY2FsbGJhY2spYC4KICogQHBhcmFtIHtudW1iZXJ9IFtwYXlsb2FkPUluZmluaXR5XSAtIEFuIG9wdGlvbmFsIGBpbnRlZ2VyYCBmb3IgZGV0ZXJtaW5pbmcKICogaG93IG1hbnkgdGFza3Mgc2hvdWxkIGJlIHByb2Nlc3NlZCBwZXIgcm91bmQ7IGlmIG9taXR0ZWQsIHRoZSBkZWZhdWx0IGlzCiAqIHVubGltaXRlZC4KICogQHJldHVybnMge21vZHVsZTpDb250cm9sRmxvdy5DYXJnb09iamVjdH0gQSBjYXJnbyBvYmplY3QgdG8gbWFuYWdlIHRoZSB0YXNrcy4gQ2FsbGJhY2tzIGNhbgogKiBhdHRhY2hlZCBhcyBjZXJ0YWluIHByb3BlcnRpZXMgdG8gbGlzdGVuIGZvciBzcGVjaWZpYyBldmVudHMgZHVyaW5nIHRoZQogKiBsaWZlY3ljbGUgb2YgdGhlIGNhcmdvIGFuZCBpbm5lciBxdWV1ZS4KICogQGV4YW1wbGUKICoKICogLy8gY3JlYXRlIGEgY2FyZ28gb2JqZWN0IHdpdGggcGF5bG9hZCAyCiAqIHZhciBjYXJnbyA9IGFzeW5jLmNhcmdvKGZ1bmN0aW9uKHRhc2tzLCBjYWxsYmFjaykgewogKiAgICAgZm9yICh2YXIgaT0wOyBpPHRhc2tzLmxlbmd0aDsgaSsrKSB7CiAqICAgICAgICAgY29uc29sZS5sb2coJ2hlbGxvICcgKyB0YXNrc1tpXS5uYW1lKTsKICogICAgIH0KICogICAgIGNhbGxiYWNrKCk7CiAqIH0sIDIpOwogKgogKiAvLyBhZGQgc29tZSBpdGVtcwogKiBjYXJnby5wdXNoKHtuYW1lOiAnZm9vJ30sIGZ1bmN0aW9uKGVycikgewogKiAgICAgY29uc29sZS5sb2coJ2ZpbmlzaGVkIHByb2Nlc3NpbmcgZm9vJyk7CiAqIH0pOwogKiBjYXJnby5wdXNoKHtuYW1lOiAnYmFyJ30sIGZ1bmN0aW9uKGVycikgewogKiAgICAgY29uc29sZS5sb2coJ2ZpbmlzaGVkIHByb2Nlc3NpbmcgYmFyJyk7CiAqIH0pOwogKiBjYXJnby5wdXNoKHtuYW1lOiAnYmF6J30sIGZ1bmN0aW9uKGVycikgewogKiAgICAgY29uc29sZS5sb2coJ2ZpbmlzaGVkIHByb2Nlc3NpbmcgYmF6Jyk7CiAqIH0pOwogKi8KZnVuY3Rpb24gY2FyZ28od29ya2VyLCBwYXlsb2FkKSB7CiAgICByZXR1cm4gcXVldWUod29ya2VyLCAxLCBwYXlsb2FkKTsKfQoKLyoqCiAqIFRoZSBzYW1lIGFzIFtgZWFjaE9mYF17QGxpbmsgbW9kdWxlOkNvbGxlY3Rpb25zLmVhY2hPZn0gYnV0IHJ1bnMgb25seSBhIHNpbmdsZSBhc3luYyBvcGVyYXRpb24gYXQgYSB0aW1lLgogKgogKiBAbmFtZSBlYWNoT2ZTZXJpZXMKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbGxlY3Rpb25zCiAqIEBtZXRob2QKICogQHNlZSBbYXN5bmMuZWFjaE9mXXtAbGluayBtb2R1bGU6Q29sbGVjdGlvbnMuZWFjaE9mfQogKiBAYWxpYXMgZm9yRWFjaE9mU2VyaWVzCiAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uCiAqIEBwYXJhbSB7QXJyYXl8SXRlcmFibGV8T2JqZWN0fSBjb2xsIC0gQSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci4KICogQHBhcmFtIHtBc3luY0Z1bmN0aW9ufSBpdGVyYXRlZSAtIEFuIGFzeW5jIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggaXRlbSBpbgogKiBgY29sbGAuCiAqIEludm9rZWQgd2l0aCAoaXRlbSwga2V5LCBjYWxsYmFjaykuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gLSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCB3aGVuIGFsbCBgaXRlcmF0ZWVgCiAqIGZ1bmN0aW9ucyBoYXZlIGZpbmlzaGVkLCBvciBhbiBlcnJvciBvY2N1cnMuIEludm9rZWQgd2l0aCAoZXJyKS4KICovCnZhciBlYWNoT2ZTZXJpZXMgPSBkb0xpbWl0KGVhY2hPZkxpbWl0LCAxKTsKCi8qKgogKiBSZWR1Y2VzIGBjb2xsYCBpbnRvIGEgc2luZ2xlIHZhbHVlIHVzaW5nIGFuIGFzeW5jIGBpdGVyYXRlZWAgdG8gcmV0dXJuIGVhY2gKICogc3VjY2Vzc2l2ZSBzdGVwLiBgbWVtb2AgaXMgdGhlIGluaXRpYWwgc3RhdGUgb2YgdGhlIHJlZHVjdGlvbi4gVGhpcyBmdW5jdGlvbgogKiBvbmx5IG9wZXJhdGVzIGluIHNlcmllcy4KICoKICogRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIGl0IG1heSBtYWtlIHNlbnNlIHRvIHNwbGl0IGEgY2FsbCB0byB0aGlzIGZ1bmN0aW9uCiAqIGludG8gYSBwYXJhbGxlbCBtYXAsIGFuZCB0aGVuIHVzZSB0aGUgbm9ybWFsIGBBcnJheS5wcm90b3R5cGUucmVkdWNlYCBvbiB0aGUKICogcmVzdWx0cy4gVGhpcyBmdW5jdGlvbiBpcyBmb3Igc2l0dWF0aW9ucyB3aGVyZSBlYWNoIHN0ZXAgaW4gdGhlIHJlZHVjdGlvbgogKiBuZWVkcyB0byBiZSBhc3luYzsgaWYgeW91IGNhbiBnZXQgdGhlIGRhdGEgYmVmb3JlIHJlZHVjaW5nIGl0LCB0aGVuIGl0J3MKICogcHJvYmFibHkgYSBnb29kIGlkZWEgdG8gZG8gc28uCiAqCiAqIEBuYW1lIHJlZHVjZQogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29sbGVjdGlvbnMKICogQG1ldGhvZAogKiBAYWxpYXMgaW5qZWN0CiAqIEBhbGlhcyBmb2xkbAogKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbgogKiBAcGFyYW0ge0FycmF5fEl0ZXJhYmxlfE9iamVjdH0gY29sbCAtIEEgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7Kn0gbWVtbyAtIFRoZSBpbml0aWFsIHN0YXRlIG9mIHRoZSByZWR1Y3Rpb24uCiAqIEBwYXJhbSB7QXN5bmNGdW5jdGlvbn0gaXRlcmF0ZWUgLSBBIGZ1bmN0aW9uIGFwcGxpZWQgdG8gZWFjaCBpdGVtIGluIHRoZQogKiBhcnJheSB0byBwcm9kdWNlIHRoZSBuZXh0IHN0ZXAgaW4gdGhlIHJlZHVjdGlvbi4KICogVGhlIGBpdGVyYXRlZWAgc2hvdWxkIGNvbXBsZXRlIHdpdGggdGhlIG5leHQgc3RhdGUgb2YgdGhlIHJlZHVjdGlvbi4KICogSWYgdGhlIGl0ZXJhdGVlIGNvbXBsZXRlIHdpdGggYW4gZXJyb3IsIHRoZSByZWR1Y3Rpb24gaXMgc3RvcHBlZCBhbmQgdGhlCiAqIG1haW4gYGNhbGxiYWNrYCBpcyBpbW1lZGlhdGVseSBjYWxsZWQgd2l0aCB0aGUgZXJyb3IuCiAqIEludm9rZWQgd2l0aCAobWVtbywgaXRlbSwgY2FsbGJhY2spLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIC0gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgYWxsIHRoZQogKiBgaXRlcmF0ZWVgIGZ1bmN0aW9ucyBoYXZlIGZpbmlzaGVkLiBSZXN1bHQgaXMgdGhlIHJlZHVjZWQgdmFsdWUuIEludm9rZWQgd2l0aAogKiAoZXJyLCByZXN1bHQpLgogKiBAZXhhbXBsZQogKgogKiBhc3luYy5yZWR1Y2UoWzEsMiwzXSwgMCwgZnVuY3Rpb24obWVtbywgaXRlbSwgY2FsbGJhY2spIHsKICogICAgIC8vIHBvaW50bGVzcyBhc3luYzoKICogICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7CiAqICAgICAgICAgY2FsbGJhY2sobnVsbCwgbWVtbyArIGl0ZW0pCiAqICAgICB9KTsKICogfSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHsKICogICAgIC8vIHJlc3VsdCBpcyBub3cgZXF1YWwgdG8gdGhlIGxhc3QgdmFsdWUgb2YgbWVtbywgd2hpY2ggaXMgNgogKiB9KTsKICovCmZ1bmN0aW9uIHJlZHVjZShjb2xsLCBtZW1vLCBpdGVyYXRlZSwgY2FsbGJhY2spIHsKICAgIGNhbGxiYWNrID0gb25jZShjYWxsYmFjayB8fCBub29wKTsKICAgIHZhciBfaXRlcmF0ZWUgPSB3cmFwQXN5bmMoaXRlcmF0ZWUpOwogICAgZWFjaE9mU2VyaWVzKGNvbGwsIGZ1bmN0aW9uKHgsIGksIGNhbGxiYWNrKSB7CiAgICAgICAgX2l0ZXJhdGVlKG1lbW8sIHgsIGZ1bmN0aW9uKGVyciwgdikgewogICAgICAgICAgICBtZW1vID0gdjsKICAgICAgICAgICAgY2FsbGJhY2soZXJyKTsKICAgICAgICB9KTsKICAgIH0sIGZ1bmN0aW9uKGVycikgewogICAgICAgIGNhbGxiYWNrKGVyciwgbWVtbyk7CiAgICB9KTsKfQoKLyoqCiAqIFZlcnNpb24gb2YgdGhlIGNvbXBvc2UgZnVuY3Rpb24gdGhhdCBpcyBtb3JlIG5hdHVyYWwgdG8gcmVhZC4gRWFjaCBmdW5jdGlvbgogKiBjb25zdW1lcyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBwcmV2aW91cyBmdW5jdGlvbi4gSXQgaXMgdGhlIGVxdWl2YWxlbnQgb2YKICogW2NvbXBvc2Vde0BsaW5rIG1vZHVsZTpDb250cm9sRmxvdy5jb21wb3NlfSB3aXRoIHRoZSBhcmd1bWVudHMgcmV2ZXJzZWQuCiAqCiAqIEVhY2ggZnVuY3Rpb24gaXMgZXhlY3V0ZWQgd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlIGNvbXBvc2VkIGZ1bmN0aW9uLgogKgogKiBAbmFtZSBzZXEKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbnRyb2xGbG93CiAqIEBtZXRob2QKICogQHNlZSBbYXN5bmMuY29tcG9zZV17QGxpbmsgbW9kdWxlOkNvbnRyb2xGbG93LmNvbXBvc2V9CiAqIEBjYXRlZ29yeSBDb250cm9sIEZsb3cKICogQHBhcmFtIHsuLi5Bc3luY0Z1bmN0aW9ufSBmdW5jdGlvbnMgLSB0aGUgYXN5bmNocm9ub3VzIGZ1bmN0aW9ucyB0byBjb21wb3NlCiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gYSBmdW5jdGlvbiB0aGF0IGNvbXBvc2VzIHRoZSBgZnVuY3Rpb25zYCBpbiBvcmRlcgogKiBAZXhhbXBsZQogKgogKiAvLyBSZXF1aXJlcyBsb2Rhc2ggKG9yIHVuZGVyc2NvcmUpLCBleHByZXNzMyBhbmQgZHJlc2VuZGUncyBvcm0yLgogKiAvLyBQYXJ0IG9mIGFuIGFwcCwgdGhhdCBmZXRjaGVzIGNhdHMgb2YgdGhlIGxvZ2dlZCB1c2VyLgogKiAvLyBUaGlzIGV4YW1wbGUgdXNlcyBgc2VxYCBmdW5jdGlvbiB0byBhdm9pZCBvdmVybmVzdGluZyBhbmQgZXJyb3IKICogLy8gaGFuZGxpbmcgY2x1dHRlci4KICogYXBwLmdldCgnL2NhdHMnLCBmdW5jdGlvbihyZXF1ZXN0LCByZXNwb25zZSkgewogKiAgICAgdmFyIFVzZXIgPSByZXF1ZXN0Lm1vZGVscy5Vc2VyOwogKiAgICAgYXN5bmMuc2VxKAogKiAgICAgICAgIF8uYmluZChVc2VyLmdldCwgVXNlciksICAvLyAnVXNlci5nZXQnIGhhcyBzaWduYXR1cmUgKGlkLCBjYWxsYmFjayhlcnIsIGRhdGEpKQogKiAgICAgICAgIGZ1bmN0aW9uKHVzZXIsIGZuKSB7CiAqICAgICAgICAgICAgIHVzZXIuZ2V0Q2F0cyhmbik7ICAgICAgLy8gJ2dldENhdHMnIGhhcyBzaWduYXR1cmUgKGNhbGxiYWNrKGVyciwgZGF0YSkpCiAqICAgICAgICAgfQogKiAgICAgKShyZXEuc2Vzc2lvbi51c2VyX2lkLCBmdW5jdGlvbiAoZXJyLCBjYXRzKSB7CiAqICAgICAgICAgaWYgKGVycikgewogKiAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7CiAqICAgICAgICAgICAgIHJlc3BvbnNlLmpzb24oeyBzdGF0dXM6ICdlcnJvcicsIG1lc3NhZ2U6IGVyci5tZXNzYWdlIH0pOwogKiAgICAgICAgIH0gZWxzZSB7CiAqICAgICAgICAgICAgIHJlc3BvbnNlLmpzb24oeyBzdGF0dXM6ICdvaycsIG1lc3NhZ2U6ICdDYXRzIGZvdW5kJywgZGF0YTogY2F0cyB9KTsKICogICAgICAgICB9CiAqICAgICB9KTsKICogfSk7CiAqLwpmdW5jdGlvbiBzZXEoLyouLi5mdW5jdGlvbnMqLykgewogICAgdmFyIF9mdW5jdGlvbnMgPSBhcnJheU1hcChhcmd1bWVudHMsIHdyYXBBc3luYyk7CiAgICByZXR1cm4gZnVuY3Rpb24oLyouLi5hcmdzKi8pIHsKICAgICAgICB2YXIgYXJncyA9IHNsaWNlKGFyZ3VtZW50cyk7CiAgICAgICAgdmFyIHRoYXQgPSB0aGlzOwoKICAgICAgICB2YXIgY2IgPSBhcmdzW2FyZ3MubGVuZ3RoIC0gMV07CiAgICAgICAgaWYgKHR5cGVvZiBjYiA9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIGFyZ3MucG9wKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2IgPSBub29wOwogICAgICAgIH0KCiAgICAgICAgcmVkdWNlKF9mdW5jdGlvbnMsIGFyZ3MsIGZ1bmN0aW9uKG5ld2FyZ3MsIGZuLCBjYikgewogICAgICAgICAgICBmbi5hcHBseSh0aGF0LCBuZXdhcmdzLmNvbmNhdChmdW5jdGlvbihlcnIvKiwgLi4ubmV4dGFyZ3MqLykgewogICAgICAgICAgICAgICAgdmFyIG5leHRhcmdzID0gc2xpY2UoYXJndW1lbnRzLCAxKTsKICAgICAgICAgICAgICAgIGNiKGVyciwgbmV4dGFyZ3MpOwogICAgICAgICAgICB9KSk7CiAgICAgICAgfSwKICAgICAgICBmdW5jdGlvbihlcnIsIHJlc3VsdHMpIHsKICAgICAgICAgICAgY2IuYXBwbHkodGhhdCwgW2Vycl0uY29uY2F0KHJlc3VsdHMpKTsKICAgICAgICB9KTsKICAgIH07Cn0KCi8qKgogKiBDcmVhdGVzIGEgZnVuY3Rpb24gd2hpY2ggaXMgYSBjb21wb3NpdGlvbiBvZiB0aGUgcGFzc2VkIGFzeW5jaHJvbm91cwogKiBmdW5jdGlvbnMuIEVhY2ggZnVuY3Rpb24gY29uc3VtZXMgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZnVuY3Rpb24gdGhhdAogKiBmb2xsb3dzLiBDb21wb3NpbmcgZnVuY3Rpb25zIGBmKClgLCBgZygpYCwgYW5kIGBoKClgIHdvdWxkIHByb2R1Y2UgdGhlIHJlc3VsdAogKiBvZiBgZihnKGgoKSkpYCwgb25seSB0aGlzIHZlcnNpb24gdXNlcyBjYWxsYmFja3MgdG8gb2J0YWluIHRoZSByZXR1cm4gdmFsdWVzLgogKgogKiBFYWNoIGZ1bmN0aW9uIGlzIGV4ZWN1dGVkIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBjb21wb3NlZCBmdW5jdGlvbi4KICoKICogQG5hbWUgY29tcG9zZQogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29udHJvbEZsb3cKICogQG1ldGhvZAogKiBAY2F0ZWdvcnkgQ29udHJvbCBGbG93CiAqIEBwYXJhbSB7Li4uQXN5bmNGdW5jdGlvbn0gZnVuY3Rpb25zIC0gdGhlIGFzeW5jaHJvbm91cyBmdW5jdGlvbnMgdG8gY29tcG9zZQogKiBAcmV0dXJucyB7RnVuY3Rpb259IGFuIGFzeW5jaHJvbm91cyBmdW5jdGlvbiB0aGF0IGlzIHRoZSBjb21wb3NlZAogKiBhc3luY2hyb25vdXMgYGZ1bmN0aW9uc2AKICogQGV4YW1wbGUKICoKICogZnVuY3Rpb24gYWRkMShuLCBjYWxsYmFjaykgewogKiAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAqICAgICAgICAgY2FsbGJhY2sobnVsbCwgbiArIDEpOwogKiAgICAgfSwgMTApOwogKiB9CiAqCiAqIGZ1bmN0aW9uIG11bDMobiwgY2FsbGJhY2spIHsKICogICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogKiAgICAgICAgIGNhbGxiYWNrKG51bGwsIG4gKiAzKTsKICogICAgIH0sIDEwKTsKICogfQogKgogKiB2YXIgYWRkMW11bDMgPSBhc3luYy5jb21wb3NlKG11bDMsIGFkZDEpOwogKiBhZGQxbXVsMyg0LCBmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHsKICogICAgIC8vIHJlc3VsdCBub3cgZXF1YWxzIDE1CiAqIH0pOwogKi8KdmFyIGNvbXBvc2UgPSBmdW5jdGlvbigvKi4uLmFyZ3MqLykgewogICAgcmV0dXJuIHNlcS5hcHBseShudWxsLCBzbGljZShhcmd1bWVudHMpLnJldmVyc2UoKSk7Cn07Cgp2YXIgX2NvbmNhdCA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQ7CgovKioKICogVGhlIHNhbWUgYXMgW2Bjb25jYXRgXXtAbGluayBtb2R1bGU6Q29sbGVjdGlvbnMuY29uY2F0fSBidXQgcnVucyBhIG1heGltdW0gb2YgYGxpbWl0YCBhc3luYyBvcGVyYXRpb25zIGF0IGEgdGltZS4KICoKICogQG5hbWUgY29uY2F0TGltaXQKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbGxlY3Rpb25zCiAqIEBtZXRob2QKICogQHNlZSBbYXN5bmMuY29uY2F0XXtAbGluayBtb2R1bGU6Q29sbGVjdGlvbnMuY29uY2F0fQogKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbgogKiBAcGFyYW0ge0FycmF5fEl0ZXJhYmxlfE9iamVjdH0gY29sbCAtIEEgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7bnVtYmVyfSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBhc3luYyBvcGVyYXRpb25zIGF0IGEgdGltZS4KICogQHBhcmFtIHtBc3luY0Z1bmN0aW9ufSBpdGVyYXRlZSAtIEEgZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCBpdGVtIGluIGBjb2xsYCwKICogd2hpY2ggc2hvdWxkIHVzZSBhbiBhcnJheSBhcyBpdHMgcmVzdWx0LiBJbnZva2VkIHdpdGggKGl0ZW0sIGNhbGxiYWNrKS4KICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSAtIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIGFmdGVyIGFsbCB0aGUKICogYGl0ZXJhdGVlYCBmdW5jdGlvbnMgaGF2ZSBmaW5pc2hlZCwgb3IgYW4gZXJyb3Igb2NjdXJzLiBSZXN1bHRzIGlzIGFuIGFycmF5CiAqIGNvbnRhaW5pbmcgdGhlIGNvbmNhdGVuYXRlZCByZXN1bHRzIG9mIHRoZSBgaXRlcmF0ZWVgIGZ1bmN0aW9uLiBJbnZva2VkIHdpdGgKICogKGVyciwgcmVzdWx0cykuCiAqLwp2YXIgY29uY2F0TGltaXQgPSBmdW5jdGlvbihjb2xsLCBsaW1pdCwgaXRlcmF0ZWUsIGNhbGxiYWNrKSB7CiAgICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IG5vb3A7CiAgICB2YXIgX2l0ZXJhdGVlID0gd3JhcEFzeW5jKGl0ZXJhdGVlKTsKICAgIG1hcExpbWl0KGNvbGwsIGxpbWl0LCBmdW5jdGlvbih2YWwsIGNhbGxiYWNrKSB7CiAgICAgICAgX2l0ZXJhdGVlKHZhbCwgZnVuY3Rpb24oZXJyIC8qLCAuLi5hcmdzKi8pIHsKICAgICAgICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycik7CiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBzbGljZShhcmd1bWVudHMsIDEpKTsKICAgICAgICB9KTsKICAgIH0sIGZ1bmN0aW9uKGVyciwgbWFwUmVzdWx0cykgewogICAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcFJlc3VsdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKG1hcFJlc3VsdHNbaV0pIHsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb25jYXQuYXBwbHkocmVzdWx0LCBtYXBSZXN1bHRzW2ldKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyciwgcmVzdWx0KTsKICAgIH0pOwp9OwoKLyoqCiAqIEFwcGxpZXMgYGl0ZXJhdGVlYCB0byBlYWNoIGl0ZW0gaW4gYGNvbGxgLCBjb25jYXRlbmF0aW5nIHRoZSByZXN1bHRzLiBSZXR1cm5zCiAqIHRoZSBjb25jYXRlbmF0ZWQgbGlzdC4gVGhlIGBpdGVyYXRlZWBzIGFyZSBjYWxsZWQgaW4gcGFyYWxsZWwsIGFuZCB0aGUKICogcmVzdWx0cyBhcmUgY29uY2F0ZW5hdGVkIGFzIHRoZXkgcmV0dXJuLiBUaGVyZSBpcyBubyBndWFyYW50ZWUgdGhhdCB0aGUKICogcmVzdWx0cyBhcnJheSB3aWxsIGJlIHJldHVybmVkIGluIHRoZSBvcmlnaW5hbCBvcmRlciBvZiBgY29sbGAgcGFzc2VkIHRvIHRoZQogKiBgaXRlcmF0ZWVgIGZ1bmN0aW9uLgogKgogKiBAbmFtZSBjb25jYXQKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbGxlY3Rpb25zCiAqIEBtZXRob2QKICogQGNhdGVnb3J5IENvbGxlY3Rpb24KICogQHBhcmFtIHtBcnJheXxJdGVyYWJsZXxPYmplY3R9IGNvbGwgLSBBIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLgogKiBAcGFyYW0ge0FzeW5jRnVuY3Rpb259IGl0ZXJhdGVlIC0gQSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIGl0ZW0gaW4gYGNvbGxgLAogKiB3aGljaCBzaG91bGQgdXNlIGFuIGFycmF5IGFzIGl0cyByZXN1bHQuIEludm9rZWQgd2l0aCAoaXRlbSwgY2FsbGJhY2spLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2soZXJyKV0gLSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBhbGwgdGhlCiAqIGBpdGVyYXRlZWAgZnVuY3Rpb25zIGhhdmUgZmluaXNoZWQsIG9yIGFuIGVycm9yIG9jY3Vycy4gUmVzdWx0cyBpcyBhbiBhcnJheQogKiBjb250YWluaW5nIHRoZSBjb25jYXRlbmF0ZWQgcmVzdWx0cyBvZiB0aGUgYGl0ZXJhdGVlYCBmdW5jdGlvbi4gSW52b2tlZCB3aXRoCiAqIChlcnIsIHJlc3VsdHMpLgogKiBAZXhhbXBsZQogKgogKiBhc3luYy5jb25jYXQoWydkaXIxJywnZGlyMicsJ2RpcjMnXSwgZnMucmVhZGRpciwgZnVuY3Rpb24oZXJyLCBmaWxlcykgewogKiAgICAgLy8gZmlsZXMgaXMgbm93IGEgbGlzdCBvZiBmaWxlbmFtZXMgdGhhdCBleGlzdCBpbiB0aGUgMyBkaXJlY3RvcmllcwogKiB9KTsKICovCnZhciBjb25jYXQgPSBkb0xpbWl0KGNvbmNhdExpbWl0LCBJbmZpbml0eSk7CgovKioKICogVGhlIHNhbWUgYXMgW2Bjb25jYXRgXXtAbGluayBtb2R1bGU6Q29sbGVjdGlvbnMuY29uY2F0fSBidXQgcnVucyBvbmx5IGEgc2luZ2xlIGFzeW5jIG9wZXJhdGlvbiBhdCBhIHRpbWUuCiAqCiAqIEBuYW1lIGNvbmNhdFNlcmllcwogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29sbGVjdGlvbnMKICogQG1ldGhvZAogKiBAc2VlIFthc3luYy5jb25jYXRde0BsaW5rIG1vZHVsZTpDb2xsZWN0aW9ucy5jb25jYXR9CiAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uCiAqIEBwYXJhbSB7QXJyYXl8SXRlcmFibGV8T2JqZWN0fSBjb2xsIC0gQSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci4KICogQHBhcmFtIHtBc3luY0Z1bmN0aW9ufSBpdGVyYXRlZSAtIEEgZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCBpdGVtIGluIGBjb2xsYC4KICogVGhlIGl0ZXJhdGVlIHNob3VsZCBjb21wbGV0ZSB3aXRoIGFuIGFycmF5IGFuIGFycmF5IG9mIHJlc3VsdHMuCiAqIEludm9rZWQgd2l0aCAoaXRlbSwgY2FsbGJhY2spLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2soZXJyKV0gLSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBhbGwgdGhlCiAqIGBpdGVyYXRlZWAgZnVuY3Rpb25zIGhhdmUgZmluaXNoZWQsIG9yIGFuIGVycm9yIG9jY3Vycy4gUmVzdWx0cyBpcyBhbiBhcnJheQogKiBjb250YWluaW5nIHRoZSBjb25jYXRlbmF0ZWQgcmVzdWx0cyBvZiB0aGUgYGl0ZXJhdGVlYCBmdW5jdGlvbi4gSW52b2tlZCB3aXRoCiAqIChlcnIsIHJlc3VsdHMpLgogKi8KdmFyIGNvbmNhdFNlcmllcyA9IGRvTGltaXQoY29uY2F0TGltaXQsIDEpOwoKLyoqCiAqIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHdoZW4gY2FsbGVkLCBjYWxscy1iYWNrIHdpdGggdGhlIHZhbHVlcyBwcm92aWRlZC4KICogVXNlZnVsIGFzIHRoZSBmaXJzdCBmdW5jdGlvbiBpbiBhIFtgd2F0ZXJmYWxsYF17QGxpbmsgbW9kdWxlOkNvbnRyb2xGbG93LndhdGVyZmFsbH0sIG9yIGZvciBwbHVnZ2luZyB2YWx1ZXMgaW4gdG8KICogW2BhdXRvYF17QGxpbmsgbW9kdWxlOkNvbnRyb2xGbG93LmF1dG99LgogKgogKiBAbmFtZSBjb25zdGFudAogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6VXRpbHMKICogQG1ldGhvZAogKiBAY2F0ZWdvcnkgVXRpbAogKiBAcGFyYW0gey4uLip9IGFyZ3VtZW50cy4uLiAtIEFueSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIGF1dG9tYXRpY2FsbHkgaW52b2tlCiAqIGNhbGxiYWNrIHdpdGguCiAqIEByZXR1cm5zIHtBc3luY0Z1bmN0aW9ufSBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aGVuIGludm9rZWQsIGF1dG9tYXRpY2FsbHkKICogaW52b2tlcyB0aGUgY2FsbGJhY2sgd2l0aCB0aGUgcHJldmlvdXMgZ2l2ZW4gYXJndW1lbnRzLgogKiBAZXhhbXBsZQogKgogKiBhc3luYy53YXRlcmZhbGwoWwogKiAgICAgYXN5bmMuY29uc3RhbnQoNDIpLAogKiAgICAgZnVuY3Rpb24gKHZhbHVlLCBuZXh0KSB7CiAqICAgICAgICAgLy8gdmFsdWUgPT09IDQyCiAqICAgICB9LAogKiAgICAgLy8uLi4KICogXSwgY2FsbGJhY2spOwogKgogKiBhc3luYy53YXRlcmZhbGwoWwogKiAgICAgYXN5bmMuY29uc3RhbnQoZmlsZW5hbWUsICJ1dGY4IiksCiAqICAgICBmcy5yZWFkRmlsZSwKICogICAgIGZ1bmN0aW9uIChmaWxlRGF0YSwgbmV4dCkgewogKiAgICAgICAgIC8vLi4uCiAqICAgICB9CiAqICAgICAvLy4uLgogKiBdLCBjYWxsYmFjayk7CiAqCiAqIGFzeW5jLmF1dG8oewogKiAgICAgaG9zdG5hbWU6IGFzeW5jLmNvbnN0YW50KCJodHRwczovL3NlcnZlci5uZXQvIiksCiAqICAgICBwb3J0OiBmaW5kRnJlZVBvcnQsCiAqICAgICBsYXVuY2hTZXJ2ZXI6IFsiaG9zdG5hbWUiLCAicG9ydCIsIGZ1bmN0aW9uIChvcHRpb25zLCBjYikgewogKiAgICAgICAgIHN0YXJ0U2VydmVyKG9wdGlvbnMsIGNiKTsKICogICAgIH1dLAogKiAgICAgLy8uLi4KICogfSwgY2FsbGJhY2spOwogKi8KdmFyIGNvbnN0YW50ID0gZnVuY3Rpb24oLyouLi52YWx1ZXMqLykgewogICAgdmFyIHZhbHVlcyA9IHNsaWNlKGFyZ3VtZW50cyk7CiAgICB2YXIgYXJncyA9IFtudWxsXS5jb25jYXQodmFsdWVzKTsKICAgIHJldHVybiBmdW5jdGlvbiAoLyouLi5pZ25vcmVkQXJncywgY2FsbGJhY2sqLykgewogICAgICAgIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoIC0gMV07CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3MpOwogICAgfTsKfTsKCi8qKgogKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBmaXJzdCBhcmd1bWVudCBpdCByZWNlaXZlcy4KICoKICogQHN0YXRpYwogKiBAc2luY2UgMC4xLjAKICogQG1lbWJlck9mIF8KICogQGNhdGVnb3J5IFV0aWwKICogQHBhcmFtIHsqfSB2YWx1ZSBBbnkgdmFsdWUuCiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIGB2YWx1ZWAuCiAqIEBleGFtcGxlCiAqCiAqIHZhciBvYmplY3QgPSB7ICdhJzogMSB9OwogKgogKiBjb25zb2xlLmxvZyhfLmlkZW50aXR5KG9iamVjdCkgPT09IG9iamVjdCk7CiAqIC8vID0+IHRydWUKICovCmZ1bmN0aW9uIGlkZW50aXR5KHZhbHVlKSB7CiAgcmV0dXJuIHZhbHVlOwp9CgpmdW5jdGlvbiBfY3JlYXRlVGVzdGVyKGNoZWNrLCBnZXRSZXN1bHQpIHsKICAgIHJldHVybiBmdW5jdGlvbihlYWNoZm4sIGFyciwgaXRlcmF0ZWUsIGNiKSB7CiAgICAgICAgY2IgPSBjYiB8fCBub29wOwogICAgICAgIHZhciB0ZXN0UGFzc2VkID0gZmFsc2U7CiAgICAgICAgdmFyIHRlc3RSZXN1bHQ7CiAgICAgICAgZWFjaGZuKGFyciwgZnVuY3Rpb24odmFsdWUsIF8sIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIGl0ZXJhdGVlKHZhbHVlLCBmdW5jdGlvbihlcnIsIHJlc3VsdCkgewogICAgICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycik7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNoZWNrKHJlc3VsdCkgJiYgIXRlc3RSZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICB0ZXN0UGFzc2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0ZXN0UmVzdWx0ID0gZ2V0UmVzdWx0KHRydWUsIHZhbHVlKTsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCBicmVha0xvb3ApOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHsKICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgY2IoZXJyKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNiKG51bGwsIHRlc3RQYXNzZWQgPyB0ZXN0UmVzdWx0IDogZ2V0UmVzdWx0KGZhbHNlKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH07Cn0KCmZ1bmN0aW9uIF9maW5kR2V0UmVzdWx0KHYsIHgpIHsKICAgIHJldHVybiB4Owp9CgovKioKICogUmV0dXJucyB0aGUgZmlyc3QgdmFsdWUgaW4gYGNvbGxgIHRoYXQgcGFzc2VzIGFuIGFzeW5jIHRydXRoIHRlc3QuIFRoZQogKiBgaXRlcmF0ZWVgIGlzIGFwcGxpZWQgaW4gcGFyYWxsZWwsIG1lYW5pbmcgdGhlIGZpcnN0IGl0ZXJhdGVlIHRvIHJldHVybgogKiBgdHJ1ZWAgd2lsbCBmaXJlIHRoZSBkZXRlY3QgYGNhbGxiYWNrYCB3aXRoIHRoYXQgcmVzdWx0LiBUaGF0IG1lYW5zIHRoZQogKiByZXN1bHQgbWlnaHQgbm90IGJlIHRoZSBmaXJzdCBpdGVtIGluIHRoZSBvcmlnaW5hbCBgY29sbGAgKGluIHRlcm1zIG9mIG9yZGVyKQogKiB0aGF0IHBhc3NlcyB0aGUgdGVzdC4KCiAqIElmIG9yZGVyIHdpdGhpbiB0aGUgb3JpZ2luYWwgYGNvbGxgIGlzIGltcG9ydGFudCwgdGhlbiBsb29rIGF0CiAqIFtgZGV0ZWN0U2VyaWVzYF17QGxpbmsgbW9kdWxlOkNvbGxlY3Rpb25zLmRldGVjdFNlcmllc30uCiAqCiAqIEBuYW1lIGRldGVjdAogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29sbGVjdGlvbnMKICogQG1ldGhvZAogKiBAYWxpYXMgZmluZAogKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnMKICogQHBhcmFtIHtBcnJheXxJdGVyYWJsZXxPYmplY3R9IGNvbGwgLSBBIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLgogKiBAcGFyYW0ge0FzeW5jRnVuY3Rpb259IGl0ZXJhdGVlIC0gQSB0cnV0aCB0ZXN0IHRvIGFwcGx5IHRvIGVhY2ggaXRlbSBpbiBgY29sbGAuCiAqIFRoZSBpdGVyYXRlZSBtdXN0IGNvbXBsZXRlIHdpdGggYSBib29sZWFuIHZhbHVlIGFzIGl0cyByZXN1bHQuCiAqIEludm9rZWQgd2l0aCAoaXRlbSwgY2FsbGJhY2spLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIC0gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYXMgc29vbiBhcyBhbnkKICogaXRlcmF0ZWUgcmV0dXJucyBgdHJ1ZWAsIG9yIGFmdGVyIGFsbCB0aGUgYGl0ZXJhdGVlYCBmdW5jdGlvbnMgaGF2ZSBmaW5pc2hlZC4KICogUmVzdWx0IHdpbGwgYmUgdGhlIGZpcnN0IGl0ZW0gaW4gdGhlIGFycmF5IHRoYXQgcGFzc2VzIHRoZSB0cnV0aCB0ZXN0CiAqIChpdGVyYXRlZSkgb3IgdGhlIHZhbHVlIGB1bmRlZmluZWRgIGlmIG5vbmUgcGFzc2VkLiBJbnZva2VkIHdpdGgKICogKGVyciwgcmVzdWx0KS4KICogQGV4YW1wbGUKICoKICogYXN5bmMuZGV0ZWN0KFsnZmlsZTEnLCdmaWxlMicsJ2ZpbGUzJ10sIGZ1bmN0aW9uKGZpbGVQYXRoLCBjYWxsYmFjaykgewogKiAgICAgZnMuYWNjZXNzKGZpbGVQYXRoLCBmdW5jdGlvbihlcnIpIHsKICogICAgICAgICBjYWxsYmFjayhudWxsLCAhZXJyKQogKiAgICAgfSk7CiAqIH0sIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7CiAqICAgICAvLyByZXN1bHQgbm93IGVxdWFscyB0aGUgZmlyc3QgZmlsZSBpbiB0aGUgbGlzdCB0aGF0IGV4aXN0cwogKiB9KTsKICovCnZhciBkZXRlY3QgPSBkb1BhcmFsbGVsKF9jcmVhdGVUZXN0ZXIoaWRlbnRpdHksIF9maW5kR2V0UmVzdWx0KSk7CgovKioKICogVGhlIHNhbWUgYXMgW2BkZXRlY3RgXXtAbGluayBtb2R1bGU6Q29sbGVjdGlvbnMuZGV0ZWN0fSBidXQgcnVucyBhIG1heGltdW0gb2YgYGxpbWl0YCBhc3luYyBvcGVyYXRpb25zIGF0IGEKICogdGltZS4KICoKICogQG5hbWUgZGV0ZWN0TGltaXQKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbGxlY3Rpb25zCiAqIEBtZXRob2QKICogQHNlZSBbYXN5bmMuZGV0ZWN0XXtAbGluayBtb2R1bGU6Q29sbGVjdGlvbnMuZGV0ZWN0fQogKiBAYWxpYXMgZmluZExpbWl0CiAqIEBjYXRlZ29yeSBDb2xsZWN0aW9ucwogKiBAcGFyYW0ge0FycmF5fEl0ZXJhYmxlfE9iamVjdH0gY29sbCAtIEEgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7bnVtYmVyfSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBhc3luYyBvcGVyYXRpb25zIGF0IGEgdGltZS4KICogQHBhcmFtIHtBc3luY0Z1bmN0aW9ufSBpdGVyYXRlZSAtIEEgdHJ1dGggdGVzdCB0byBhcHBseSB0byBlYWNoIGl0ZW0gaW4gYGNvbGxgLgogKiBUaGUgaXRlcmF0ZWUgbXVzdCBjb21wbGV0ZSB3aXRoIGEgYm9vbGVhbiB2YWx1ZSBhcyBpdHMgcmVzdWx0LgogKiBJbnZva2VkIHdpdGggKGl0ZW0sIGNhbGxiYWNrKS4KICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSAtIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIGFzIHNvb24gYXMgYW55CiAqIGl0ZXJhdGVlIHJldHVybnMgYHRydWVgLCBvciBhZnRlciBhbGwgdGhlIGBpdGVyYXRlZWAgZnVuY3Rpb25zIGhhdmUgZmluaXNoZWQuCiAqIFJlc3VsdCB3aWxsIGJlIHRoZSBmaXJzdCBpdGVtIGluIHRoZSBhcnJheSB0aGF0IHBhc3NlcyB0aGUgdHJ1dGggdGVzdAogKiAoaXRlcmF0ZWUpIG9yIHRoZSB2YWx1ZSBgdW5kZWZpbmVkYCBpZiBub25lIHBhc3NlZC4gSW52b2tlZCB3aXRoCiAqIChlcnIsIHJlc3VsdCkuCiAqLwp2YXIgZGV0ZWN0TGltaXQgPSBkb1BhcmFsbGVsTGltaXQoX2NyZWF0ZVRlc3RlcihpZGVudGl0eSwgX2ZpbmRHZXRSZXN1bHQpKTsKCi8qKgogKiBUaGUgc2FtZSBhcyBbYGRldGVjdGBde0BsaW5rIG1vZHVsZTpDb2xsZWN0aW9ucy5kZXRlY3R9IGJ1dCBydW5zIG9ubHkgYSBzaW5nbGUgYXN5bmMgb3BlcmF0aW9uIGF0IGEgdGltZS4KICoKICogQG5hbWUgZGV0ZWN0U2VyaWVzCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIG1vZHVsZTpDb2xsZWN0aW9ucwogKiBAbWV0aG9kCiAqIEBzZWUgW2FzeW5jLmRldGVjdF17QGxpbmsgbW9kdWxlOkNvbGxlY3Rpb25zLmRldGVjdH0KICogQGFsaWFzIGZpbmRTZXJpZXMKICogQGNhdGVnb3J5IENvbGxlY3Rpb25zCiAqIEBwYXJhbSB7QXJyYXl8SXRlcmFibGV8T2JqZWN0fSBjb2xsIC0gQSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci4KICogQHBhcmFtIHtBc3luY0Z1bmN0aW9ufSBpdGVyYXRlZSAtIEEgdHJ1dGggdGVzdCB0byBhcHBseSB0byBlYWNoIGl0ZW0gaW4gYGNvbGxgLgogKiBUaGUgaXRlcmF0ZWUgbXVzdCBjb21wbGV0ZSB3aXRoIGEgYm9vbGVhbiB2YWx1ZSBhcyBpdHMgcmVzdWx0LgogKiBJbnZva2VkIHdpdGggKGl0ZW0sIGNhbGxiYWNrKS4KICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSAtIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIGFzIHNvb24gYXMgYW55CiAqIGl0ZXJhdGVlIHJldHVybnMgYHRydWVgLCBvciBhZnRlciBhbGwgdGhlIGBpdGVyYXRlZWAgZnVuY3Rpb25zIGhhdmUgZmluaXNoZWQuCiAqIFJlc3VsdCB3aWxsIGJlIHRoZSBmaXJzdCBpdGVtIGluIHRoZSBhcnJheSB0aGF0IHBhc3NlcyB0aGUgdHJ1dGggdGVzdAogKiAoaXRlcmF0ZWUpIG9yIHRoZSB2YWx1ZSBgdW5kZWZpbmVkYCBpZiBub25lIHBhc3NlZC4gSW52b2tlZCB3aXRoCiAqIChlcnIsIHJlc3VsdCkuCiAqLwp2YXIgZGV0ZWN0U2VyaWVzID0gZG9MaW1pdChkZXRlY3RMaW1pdCwgMSk7CgpmdW5jdGlvbiBjb25zb2xlRnVuYyhuYW1lKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKGZuLyosIC4uLmFyZ3MqLykgewogICAgICAgIHZhciBhcmdzID0gc2xpY2UoYXJndW1lbnRzLCAxKTsKICAgICAgICBhcmdzLnB1c2goZnVuY3Rpb24gKGVyci8qLCAuLi5hcmdzKi8pIHsKICAgICAgICAgICAgdmFyIGFyZ3MgPSBzbGljZShhcmd1bWVudHMsIDEpOwogICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnNvbGUuZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29uc29sZVtuYW1lXSkgewogICAgICAgICAgICAgICAgICAgIGFycmF5RWFjaChhcmdzLCBmdW5jdGlvbiAoeCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlW25hbWVdKHgpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgd3JhcEFzeW5jKGZuKS5hcHBseShudWxsLCBhcmdzKTsKICAgIH07Cn0KCi8qKgogKiBMb2dzIHRoZSByZXN1bHQgb2YgYW4gW2Bhc3luY2AgZnVuY3Rpb25de0BsaW5rIEFzeW5jRnVuY3Rpb259IHRvIHRoZQogKiBgY29uc29sZWAgdXNpbmcgYGNvbnNvbGUuZGlyYCB0byBkaXNwbGF5IHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSByZXN1bHRpbmcgb2JqZWN0LgogKiBPbmx5IHdvcmtzIGluIE5vZGUuanMgb3IgaW4gYnJvd3NlcnMgdGhhdCBzdXBwb3J0IGBjb25zb2xlLmRpcmAgYW5kCiAqIGBjb25zb2xlLmVycm9yYCAoc3VjaCBhcyBGRiBhbmQgQ2hyb21lKS4KICogSWYgbXVsdGlwbGUgYXJndW1lbnRzIGFyZSByZXR1cm5lZCBmcm9tIHRoZSBhc3luYyBmdW5jdGlvbiwKICogYGNvbnNvbGUuZGlyYCBpcyBjYWxsZWQgb24gZWFjaCBhcmd1bWVudCBpbiBvcmRlci4KICoKICogQG5hbWUgZGlyCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIG1vZHVsZTpVdGlscwogKiBAbWV0aG9kCiAqIEBjYXRlZ29yeSBVdGlsCiAqIEBwYXJhbSB7QXN5bmNGdW5jdGlvbn0gZnVuY3Rpb24gLSBUaGUgZnVuY3Rpb24geW91IHdhbnQgdG8gZXZlbnR1YWxseSBhcHBseQogKiBhbGwgYXJndW1lbnRzIHRvLgogKiBAcGFyYW0gey4uLip9IGFyZ3VtZW50cy4uLiAtIEFueSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIGFwcGx5IHRvIHRoZSBmdW5jdGlvbi4KICogQGV4YW1wbGUKICoKICogLy8gaW4gYSBtb2R1bGUKICogdmFyIGhlbGxvID0gZnVuY3Rpb24obmFtZSwgY2FsbGJhY2spIHsKICogICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAqICAgICAgICAgY2FsbGJhY2sobnVsbCwge2hlbGxvOiBuYW1lfSk7CiAqICAgICB9LCAxMDAwKTsKICogfTsKICoKICogLy8gaW4gdGhlIG5vZGUgcmVwbAogKiBub2RlPiBhc3luYy5kaXIoaGVsbG8sICd3b3JsZCcpOwogKiB7aGVsbG86ICd3b3JsZCd9CiAqLwp2YXIgZGlyID0gY29uc29sZUZ1bmMoJ2RpcicpOwoKLyoqCiAqIFRoZSBwb3N0LWNoZWNrIHZlcnNpb24gb2YgW2BkdXJpbmdgXXtAbGluayBtb2R1bGU6Q29udHJvbEZsb3cuZHVyaW5nfS4gVG8gcmVmbGVjdCB0aGUgZGlmZmVyZW5jZSBpbgogKiB0aGUgb3JkZXIgb2Ygb3BlcmF0aW9ucywgdGhlIGFyZ3VtZW50cyBgdGVzdGAgYW5kIGBmbmAgYXJlIHN3aXRjaGVkLgogKgogKiBBbHNvIGEgdmVyc2lvbiBvZiBbYGRvV2hpbHN0YF17QGxpbmsgbW9kdWxlOkNvbnRyb2xGbG93LmRvV2hpbHN0fSB3aXRoIGFzeW5jaHJvbm91cyBgdGVzdGAgZnVuY3Rpb24uCiAqIEBuYW1lIGRvRHVyaW5nCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIG1vZHVsZTpDb250cm9sRmxvdwogKiBAbWV0aG9kCiAqIEBzZWUgW2FzeW5jLmR1cmluZ117QGxpbmsgbW9kdWxlOkNvbnRyb2xGbG93LmR1cmluZ30KICogQGNhdGVnb3J5IENvbnRyb2wgRmxvdwogKiBAcGFyYW0ge0FzeW5jRnVuY3Rpb259IGZuIC0gQW4gYXN5bmMgZnVuY3Rpb24gd2hpY2ggaXMgY2FsbGVkIGVhY2ggdGltZQogKiBgdGVzdGAgcGFzc2VzLiBJbnZva2VkIHdpdGggKGNhbGxiYWNrKS4KICogQHBhcmFtIHtBc3luY0Z1bmN0aW9ufSB0ZXN0IC0gYXN5bmNocm9ub3VzIHRydXRoIHRlc3QgdG8gcGVyZm9ybSBiZWZvcmUgZWFjaAogKiBleGVjdXRpb24gb2YgYGZuYC4gSW52b2tlZCB3aXRoICguLi5hcmdzLCBjYWxsYmFjayksIHdoZXJlIGAuLi5hcmdzYCBhcmUgdGhlCiAqIG5vbi1lcnJvciBhcmdzIGZyb20gdGhlIHByZXZpb3VzIGNhbGxiYWNrIG9mIGBmbmAuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gLSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciB0aGUgdGVzdAogKiBmdW5jdGlvbiBoYXMgZmFpbGVkIGFuZCByZXBlYXRlZCBleGVjdXRpb24gb2YgYGZuYCBoYXMgc3RvcHBlZC4gYGNhbGxiYWNrYAogKiB3aWxsIGJlIHBhc3NlZCBhbiBlcnJvciBpZiBvbmUgb2NjdXJyZWQsIG90aGVyd2lzZSBgbnVsbGAuCiAqLwpmdW5jdGlvbiBkb0R1cmluZyhmbiwgdGVzdCwgY2FsbGJhY2spIHsKICAgIGNhbGxiYWNrID0gb25seU9uY2UoY2FsbGJhY2sgfHwgbm9vcCk7CiAgICB2YXIgX2ZuID0gd3JhcEFzeW5jKGZuKTsKICAgIHZhciBfdGVzdCA9IHdyYXBBc3luYyh0ZXN0KTsKCiAgICBmdW5jdGlvbiBuZXh0KGVyci8qLCAuLi5hcmdzKi8pIHsKICAgICAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKTsKICAgICAgICB2YXIgYXJncyA9IHNsaWNlKGFyZ3VtZW50cywgMSk7CiAgICAgICAgYXJncy5wdXNoKGNoZWNrKTsKICAgICAgICBfdGVzdC5hcHBseSh0aGlzLCBhcmdzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGVjayhlcnIsIHRydXRoKSB7CiAgICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycik7CiAgICAgICAgaWYgKCF0cnV0aCkgcmV0dXJuIGNhbGxiYWNrKG51bGwpOwogICAgICAgIF9mbihuZXh0KTsKICAgIH0KCiAgICBjaGVjayhudWxsLCB0cnVlKTsKCn0KCi8qKgogKiBUaGUgcG9zdC1jaGVjayB2ZXJzaW9uIG9mIFtgd2hpbHN0YF17QGxpbmsgbW9kdWxlOkNvbnRyb2xGbG93LndoaWxzdH0uIFRvIHJlZmxlY3QgdGhlIGRpZmZlcmVuY2UgaW4KICogdGhlIG9yZGVyIG9mIG9wZXJhdGlvbnMsIHRoZSBhcmd1bWVudHMgYHRlc3RgIGFuZCBgaXRlcmF0ZWVgIGFyZSBzd2l0Y2hlZC4KICoKICogYGRvV2hpbHN0YCBpcyB0byBgd2hpbHN0YCBhcyBgZG8gd2hpbGVgIGlzIHRvIGB3aGlsZWAgaW4gcGxhaW4gSmF2YVNjcmlwdC4KICoKICogQG5hbWUgZG9XaGlsc3QKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbnRyb2xGbG93CiAqIEBtZXRob2QKICogQHNlZSBbYXN5bmMud2hpbHN0XXtAbGluayBtb2R1bGU6Q29udHJvbEZsb3cud2hpbHN0fQogKiBAY2F0ZWdvcnkgQ29udHJvbCBGbG93CiAqIEBwYXJhbSB7QXN5bmNGdW5jdGlvbn0gaXRlcmF0ZWUgLSBBIGZ1bmN0aW9uIHdoaWNoIGlzIGNhbGxlZCBlYWNoIHRpbWUgYHRlc3RgCiAqIHBhc3Nlcy4gSW52b2tlZCB3aXRoIChjYWxsYmFjaykuCiAqIEBwYXJhbSB7RnVuY3Rpb259IHRlc3QgLSBzeW5jaHJvbm91cyB0cnV0aCB0ZXN0IHRvIHBlcmZvcm0gYWZ0ZXIgZWFjaAogKiBleGVjdXRpb24gb2YgYGl0ZXJhdGVlYC4gSW52b2tlZCB3aXRoIGFueSBub24tZXJyb3IgY2FsbGJhY2sgcmVzdWx0cyBvZgogKiBgaXRlcmF0ZWVgLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIC0gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgdGhlIHRlc3QKICogZnVuY3Rpb24gaGFzIGZhaWxlZCBhbmQgcmVwZWF0ZWQgZXhlY3V0aW9uIG9mIGBpdGVyYXRlZWAgaGFzIHN0b3BwZWQuCiAqIGBjYWxsYmFja2Agd2lsbCBiZSBwYXNzZWQgYW4gZXJyb3IgYW5kIGFueSBhcmd1bWVudHMgcGFzc2VkIHRvIHRoZSBmaW5hbAogKiBgaXRlcmF0ZWVgJ3MgY2FsbGJhY2suIEludm9rZWQgd2l0aCAoZXJyLCBbcmVzdWx0c10pOwogKi8KZnVuY3Rpb24gZG9XaGlsc3QoaXRlcmF0ZWUsIHRlc3QsIGNhbGxiYWNrKSB7CiAgICBjYWxsYmFjayA9IG9ubHlPbmNlKGNhbGxiYWNrIHx8IG5vb3ApOwogICAgdmFyIF9pdGVyYXRlZSA9IHdyYXBBc3luYyhpdGVyYXRlZSk7CiAgICB2YXIgbmV4dCA9IGZ1bmN0aW9uKGVyci8qLCAuLi5hcmdzKi8pIHsKICAgICAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKTsKICAgICAgICB2YXIgYXJncyA9IHNsaWNlKGFyZ3VtZW50cywgMSk7CiAgICAgICAgaWYgKHRlc3QuYXBwbHkodGhpcywgYXJncykpIHJldHVybiBfaXRlcmF0ZWUobmV4dCk7CiAgICAgICAgY2FsbGJhY2suYXBwbHkobnVsbCwgW251bGxdLmNvbmNhdChhcmdzKSk7CiAgICB9OwogICAgX2l0ZXJhdGVlKG5leHQpOwp9CgovKioKICogTGlrZSBbJ2RvV2hpbHN0J117QGxpbmsgbW9kdWxlOkNvbnRyb2xGbG93LmRvV2hpbHN0fSwgZXhjZXB0IHRoZSBgdGVzdGAgaXMgaW52ZXJ0ZWQuIE5vdGUgdGhlCiAqIGFyZ3VtZW50IG9yZGVyaW5nIGRpZmZlcnMgZnJvbSBgdW50aWxgLgogKgogKiBAbmFtZSBkb1VudGlsCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIG1vZHVsZTpDb250cm9sRmxvdwogKiBAbWV0aG9kCiAqIEBzZWUgW2FzeW5jLmRvV2hpbHN0XXtAbGluayBtb2R1bGU6Q29udHJvbEZsb3cuZG9XaGlsc3R9CiAqIEBjYXRlZ29yeSBDb250cm9sIEZsb3cKICogQHBhcmFtIHtBc3luY0Z1bmN0aW9ufSBpdGVyYXRlZSAtIEFuIGFzeW5jIGZ1bmN0aW9uIHdoaWNoIGlzIGNhbGxlZCBlYWNoIHRpbWUKICogYHRlc3RgIGZhaWxzLiBJbnZva2VkIHdpdGggKGNhbGxiYWNrKS4KICogQHBhcmFtIHtGdW5jdGlvbn0gdGVzdCAtIHN5bmNocm9ub3VzIHRydXRoIHRlc3QgdG8gcGVyZm9ybSBhZnRlciBlYWNoCiAqIGV4ZWN1dGlvbiBvZiBgaXRlcmF0ZWVgLiBJbnZva2VkIHdpdGggYW55IG5vbi1lcnJvciBjYWxsYmFjayByZXN1bHRzIG9mCiAqIGBpdGVyYXRlZWAuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gLSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciB0aGUgdGVzdAogKiBmdW5jdGlvbiBoYXMgcGFzc2VkIGFuZCByZXBlYXRlZCBleGVjdXRpb24gb2YgYGl0ZXJhdGVlYCBoYXMgc3RvcHBlZC4gYGNhbGxiYWNrYAogKiB3aWxsIGJlIHBhc3NlZCBhbiBlcnJvciBhbmQgYW55IGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhlIGZpbmFsIGBpdGVyYXRlZWAncwogKiBjYWxsYmFjay4gSW52b2tlZCB3aXRoIChlcnIsIFtyZXN1bHRzXSk7CiAqLwpmdW5jdGlvbiBkb1VudGlsKGl0ZXJhdGVlLCB0ZXN0LCBjYWxsYmFjaykgewogICAgZG9XaGlsc3QoaXRlcmF0ZWUsIGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiAhdGVzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfSwgY2FsbGJhY2spOwp9CgovKioKICogTGlrZSBbYHdoaWxzdGBde0BsaW5rIG1vZHVsZTpDb250cm9sRmxvdy53aGlsc3R9LCBleGNlcHQgdGhlIGB0ZXN0YCBpcyBhbiBhc3luY2hyb25vdXMgZnVuY3Rpb24gdGhhdAogKiBpcyBwYXNzZWQgYSBjYWxsYmFjayBpbiB0aGUgZm9ybSBvZiBgZnVuY3Rpb24gKGVyciwgdHJ1dGgpYC4gSWYgZXJyb3IgaXMKICogcGFzc2VkIHRvIGB0ZXN0YCBvciBgZm5gLCB0aGUgbWFpbiBjYWxsYmFjayBpcyBpbW1lZGlhdGVseSBjYWxsZWQgd2l0aCB0aGUKICogdmFsdWUgb2YgdGhlIGVycm9yLgogKgogKiBAbmFtZSBkdXJpbmcKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbnRyb2xGbG93CiAqIEBtZXRob2QKICogQHNlZSBbYXN5bmMud2hpbHN0XXtAbGluayBtb2R1bGU6Q29udHJvbEZsb3cud2hpbHN0fQogKiBAY2F0ZWdvcnkgQ29udHJvbCBGbG93CiAqIEBwYXJhbSB7QXN5bmNGdW5jdGlvbn0gdGVzdCAtIGFzeW5jaHJvbm91cyB0cnV0aCB0ZXN0IHRvIHBlcmZvcm0gYmVmb3JlIGVhY2gKICogZXhlY3V0aW9uIG9mIGBmbmAuIEludm9rZWQgd2l0aCAoY2FsbGJhY2spLgogKiBAcGFyYW0ge0FzeW5jRnVuY3Rpb259IGZuIC0gQW4gYXN5bmMgZnVuY3Rpb24gd2hpY2ggaXMgY2FsbGVkIGVhY2ggdGltZQogKiBgdGVzdGAgcGFzc2VzLiBJbnZva2VkIHdpdGggKGNhbGxiYWNrKS4KICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSAtIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIGFmdGVyIHRoZSB0ZXN0CiAqIGZ1bmN0aW9uIGhhcyBmYWlsZWQgYW5kIHJlcGVhdGVkIGV4ZWN1dGlvbiBvZiBgZm5gIGhhcyBzdG9wcGVkLiBgY2FsbGJhY2tgCiAqIHdpbGwgYmUgcGFzc2VkIGFuIGVycm9yLCBpZiBvbmUgb2NjdXJyZWQsIG90aGVyd2lzZSBgbnVsbGAuCiAqIEBleGFtcGxlCiAqCiAqIHZhciBjb3VudCA9IDA7CiAqCiAqIGFzeW5jLmR1cmluZygKICogICAgIGZ1bmN0aW9uIChjYWxsYmFjaykgewogKiAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBjb3VudCA8IDUpOwogKiAgICAgfSwKICogICAgIGZ1bmN0aW9uIChjYWxsYmFjaykgewogKiAgICAgICAgIGNvdW50Kys7CiAqICAgICAgICAgc2V0VGltZW91dChjYWxsYmFjaywgMTAwMCk7CiAqICAgICB9LAogKiAgICAgZnVuY3Rpb24gKGVycikgewogKiAgICAgICAgIC8vIDUgc2Vjb25kcyBoYXZlIHBhc3NlZAogKiAgICAgfQogKiApOwogKi8KZnVuY3Rpb24gZHVyaW5nKHRlc3QsIGZuLCBjYWxsYmFjaykgewogICAgY2FsbGJhY2sgPSBvbmx5T25jZShjYWxsYmFjayB8fCBub29wKTsKICAgIHZhciBfZm4gPSB3cmFwQXN5bmMoZm4pOwogICAgdmFyIF90ZXN0ID0gd3JhcEFzeW5jKHRlc3QpOwoKICAgIGZ1bmN0aW9uIG5leHQoZXJyKSB7CiAgICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycik7CiAgICAgICAgX3Rlc3QoY2hlY2spOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoZWNrKGVyciwgdHJ1dGgpIHsKICAgICAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKTsKICAgICAgICBpZiAoIXRydXRoKSByZXR1cm4gY2FsbGJhY2sobnVsbCk7CiAgICAgICAgX2ZuKG5leHQpOwogICAgfQoKICAgIF90ZXN0KGNoZWNrKTsKfQoKZnVuY3Rpb24gX3dpdGhvdXRJbmRleChpdGVyYXRlZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIGNhbGxiYWNrKSB7CiAgICAgICAgcmV0dXJuIGl0ZXJhdGVlKHZhbHVlLCBjYWxsYmFjayk7CiAgICB9Owp9CgovKioKICogQXBwbGllcyB0aGUgZnVuY3Rpb24gYGl0ZXJhdGVlYCB0byBlYWNoIGl0ZW0gaW4gYGNvbGxgLCBpbiBwYXJhbGxlbC4KICogVGhlIGBpdGVyYXRlZWAgaXMgY2FsbGVkIHdpdGggYW4gaXRlbSBmcm9tIHRoZSBsaXN0LCBhbmQgYSBjYWxsYmFjayBmb3Igd2hlbgogKiBpdCBoYXMgZmluaXNoZWQuIElmIHRoZSBgaXRlcmF0ZWVgIHBhc3NlcyBhbiBlcnJvciB0byBpdHMgYGNhbGxiYWNrYCwgdGhlCiAqIG1haW4gYGNhbGxiYWNrYCAoZm9yIHRoZSBgZWFjaGAgZnVuY3Rpb24pIGlzIGltbWVkaWF0ZWx5IGNhbGxlZCB3aXRoIHRoZQogKiBlcnJvci4KICoKICogTm90ZSwgdGhhdCBzaW5jZSB0aGlzIGZ1bmN0aW9uIGFwcGxpZXMgYGl0ZXJhdGVlYCB0byBlYWNoIGl0ZW0gaW4gcGFyYWxsZWwsCiAqIHRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IHRoZSBpdGVyYXRlZSBmdW5jdGlvbnMgd2lsbCBjb21wbGV0ZSBpbiBvcmRlci4KICoKICogQG5hbWUgZWFjaAogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29sbGVjdGlvbnMKICogQG1ldGhvZAogKiBAYWxpYXMgZm9yRWFjaAogKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbgogKiBAcGFyYW0ge0FycmF5fEl0ZXJhYmxlfE9iamVjdH0gY29sbCAtIEEgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7QXN5bmNGdW5jdGlvbn0gaXRlcmF0ZWUgLSBBbiBhc3luYyBmdW5jdGlvbiB0byBhcHBseSB0bwogKiBlYWNoIGl0ZW0gaW4gYGNvbGxgLiBJbnZva2VkIHdpdGggKGl0ZW0sIGNhbGxiYWNrKS4KICogVGhlIGFycmF5IGluZGV4IGlzIG5vdCBwYXNzZWQgdG8gdGhlIGl0ZXJhdGVlLgogKiBJZiB5b3UgbmVlZCB0aGUgaW5kZXgsIHVzZSBgZWFjaE9mYC4KICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSAtIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIHdoZW4gYWxsCiAqIGBpdGVyYXRlZWAgZnVuY3Rpb25zIGhhdmUgZmluaXNoZWQsIG9yIGFuIGVycm9yIG9jY3Vycy4gSW52b2tlZCB3aXRoIChlcnIpLgogKiBAZXhhbXBsZQogKgogKiAvLyBhc3N1bWluZyBvcGVuRmlsZXMgaXMgYW4gYXJyYXkgb2YgZmlsZSBuYW1lcyBhbmQgc2F2ZUZpbGUgaXMgYSBmdW5jdGlvbgogKiAvLyB0byBzYXZlIHRoZSBtb2RpZmllZCBjb250ZW50cyBvZiB0aGF0IGZpbGU6CiAqCiAqIGFzeW5jLmVhY2gob3BlbkZpbGVzLCBzYXZlRmlsZSwgZnVuY3Rpb24oZXJyKXsKICogICAvLyBpZiBhbnkgb2YgdGhlIHNhdmVzIHByb2R1Y2VkIGFuIGVycm9yLCBlcnIgd291bGQgZXF1YWwgdGhhdCBlcnJvcgogKiB9KTsKICoKICogLy8gYXNzdW1pbmcgb3BlbkZpbGVzIGlzIGFuIGFycmF5IG9mIGZpbGUgbmFtZXMKICogYXN5bmMuZWFjaChvcGVuRmlsZXMsIGZ1bmN0aW9uKGZpbGUsIGNhbGxiYWNrKSB7CiAqCiAqICAgICAvLyBQZXJmb3JtIG9wZXJhdGlvbiBvbiBmaWxlIGhlcmUuCiAqICAgICBjb25zb2xlLmxvZygnUHJvY2Vzc2luZyBmaWxlICcgKyBmaWxlKTsKICoKICogICAgIGlmKCBmaWxlLmxlbmd0aCA+IDMyICkgewogKiAgICAgICBjb25zb2xlLmxvZygnVGhpcyBmaWxlIG5hbWUgaXMgdG9vIGxvbmcnKTsKICogICAgICAgY2FsbGJhY2soJ0ZpbGUgbmFtZSB0b28gbG9uZycpOwogKiAgICAgfSBlbHNlIHsKICogICAgICAgLy8gRG8gd29yayB0byBwcm9jZXNzIGZpbGUgaGVyZQogKiAgICAgICBjb25zb2xlLmxvZygnRmlsZSBwcm9jZXNzZWQnKTsKICogICAgICAgY2FsbGJhY2soKTsKICogICAgIH0KICogfSwgZnVuY3Rpb24oZXJyKSB7CiAqICAgICAvLyBpZiBhbnkgb2YgdGhlIGZpbGUgcHJvY2Vzc2luZyBwcm9kdWNlZCBhbiBlcnJvciwgZXJyIHdvdWxkIGVxdWFsIHRoYXQgZXJyb3IKICogICAgIGlmKCBlcnIgKSB7CiAqICAgICAgIC8vIE9uZSBvZiB0aGUgaXRlcmF0aW9ucyBwcm9kdWNlZCBhbiBlcnJvci4KICogICAgICAgLy8gQWxsIHByb2Nlc3Npbmcgd2lsbCBub3cgc3RvcC4KICogICAgICAgY29uc29sZS5sb2coJ0EgZmlsZSBmYWlsZWQgdG8gcHJvY2VzcycpOwogKiAgICAgfSBlbHNlIHsKICogICAgICAgY29uc29sZS5sb2coJ0FsbCBmaWxlcyBoYXZlIGJlZW4gcHJvY2Vzc2VkIHN1Y2Nlc3NmdWxseScpOwogKiAgICAgfQogKiB9KTsKICovCmZ1bmN0aW9uIGVhY2hMaW1pdChjb2xsLCBpdGVyYXRlZSwgY2FsbGJhY2spIHsKICAgIGVhY2hPZihjb2xsLCBfd2l0aG91dEluZGV4KHdyYXBBc3luYyhpdGVyYXRlZSkpLCBjYWxsYmFjayk7Cn0KCi8qKgogKiBUaGUgc2FtZSBhcyBbYGVhY2hgXXtAbGluayBtb2R1bGU6Q29sbGVjdGlvbnMuZWFjaH0gYnV0IHJ1bnMgYSBtYXhpbXVtIG9mIGBsaW1pdGAgYXN5bmMgb3BlcmF0aW9ucyBhdCBhIHRpbWUuCiAqCiAqIEBuYW1lIGVhY2hMaW1pdAogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29sbGVjdGlvbnMKICogQG1ldGhvZAogKiBAc2VlIFthc3luYy5lYWNoXXtAbGluayBtb2R1bGU6Q29sbGVjdGlvbnMuZWFjaH0KICogQGFsaWFzIGZvckVhY2hMaW1pdAogKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbgogKiBAcGFyYW0ge0FycmF5fEl0ZXJhYmxlfE9iamVjdH0gY29sbCAtIEEgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7bnVtYmVyfSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBhc3luYyBvcGVyYXRpb25zIGF0IGEgdGltZS4KICogQHBhcmFtIHtBc3luY0Z1bmN0aW9ufSBpdGVyYXRlZSAtIEFuIGFzeW5jIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggaXRlbSBpbgogKiBgY29sbGAuCiAqIFRoZSBhcnJheSBpbmRleCBpcyBub3QgcGFzc2VkIHRvIHRoZSBpdGVyYXRlZS4KICogSWYgeW91IG5lZWQgdGhlIGluZGV4LCB1c2UgYGVhY2hPZkxpbWl0YC4KICogSW52b2tlZCB3aXRoIChpdGVtLCBjYWxsYmFjaykuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gLSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCB3aGVuIGFsbAogKiBgaXRlcmF0ZWVgIGZ1bmN0aW9ucyBoYXZlIGZpbmlzaGVkLCBvciBhbiBlcnJvciBvY2N1cnMuIEludm9rZWQgd2l0aCAoZXJyKS4KICovCmZ1bmN0aW9uIGVhY2hMaW1pdCQxKGNvbGwsIGxpbWl0LCBpdGVyYXRlZSwgY2FsbGJhY2spIHsKICAgIF9lYWNoT2ZMaW1pdChsaW1pdCkoY29sbCwgX3dpdGhvdXRJbmRleCh3cmFwQXN5bmMoaXRlcmF0ZWUpKSwgY2FsbGJhY2spOwp9CgovKioKICogVGhlIHNhbWUgYXMgW2BlYWNoYF17QGxpbmsgbW9kdWxlOkNvbGxlY3Rpb25zLmVhY2h9IGJ1dCBydW5zIG9ubHkgYSBzaW5nbGUgYXN5bmMgb3BlcmF0aW9uIGF0IGEgdGltZS4KICoKICogQG5hbWUgZWFjaFNlcmllcwogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29sbGVjdGlvbnMKICogQG1ldGhvZAogKiBAc2VlIFthc3luYy5lYWNoXXtAbGluayBtb2R1bGU6Q29sbGVjdGlvbnMuZWFjaH0KICogQGFsaWFzIGZvckVhY2hTZXJpZXMKICogQGNhdGVnb3J5IENvbGxlY3Rpb24KICogQHBhcmFtIHtBcnJheXxJdGVyYWJsZXxPYmplY3R9IGNvbGwgLSBBIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLgogKiBAcGFyYW0ge0FzeW5jRnVuY3Rpb259IGl0ZXJhdGVlIC0gQW4gYXN5bmMgZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaAogKiBpdGVtIGluIGBjb2xsYC4KICogVGhlIGFycmF5IGluZGV4IGlzIG5vdCBwYXNzZWQgdG8gdGhlIGl0ZXJhdGVlLgogKiBJZiB5b3UgbmVlZCB0aGUgaW5kZXgsIHVzZSBgZWFjaE9mU2VyaWVzYC4KICogSW52b2tlZCB3aXRoIChpdGVtLCBjYWxsYmFjaykuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gLSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCB3aGVuIGFsbAogKiBgaXRlcmF0ZWVgIGZ1bmN0aW9ucyBoYXZlIGZpbmlzaGVkLCBvciBhbiBlcnJvciBvY2N1cnMuIEludm9rZWQgd2l0aCAoZXJyKS4KICovCnZhciBlYWNoU2VyaWVzID0gZG9MaW1pdChlYWNoTGltaXQkMSwgMSk7CgovKioKICogV3JhcCBhbiBhc3luYyBmdW5jdGlvbiBhbmQgZW5zdXJlIGl0IGNhbGxzIGl0cyBjYWxsYmFjayBvbiBhIGxhdGVyIHRpY2sgb2YKICogdGhlIGV2ZW50IGxvb3AuICBJZiB0aGUgZnVuY3Rpb24gYWxyZWFkeSBjYWxscyBpdHMgY2FsbGJhY2sgb24gYSBuZXh0IHRpY2ssCiAqIG5vIGV4dHJhIGRlZmVycmFsIGlzIGFkZGVkLiBUaGlzIGlzIHVzZWZ1bCBmb3IgcHJldmVudGluZyBzdGFjayBvdmVyZmxvd3MKICogKGBSYW5nZUVycm9yOiBNYXhpbXVtIGNhbGwgc3RhY2sgc2l6ZSBleGNlZWRlZGApIGFuZCBnZW5lcmFsbHkga2VlcGluZwogKiBbWmFsZ29dKGh0dHA6Ly9ibG9nLml6cy5tZS9wb3N0LzU5MTQyNzQyMTQzL2Rlc2lnbmluZy1hcGlzLWZvci1hc3luY2hyb255KQogKiBjb250YWluZWQuIEVTMjAxNyBgYXN5bmNgIGZ1bmN0aW9ucyBhcmUgcmV0dXJuZWQgYXMtaXMgLS0gdGhleSBhcmUgaW1tdW5lCiAqIHRvIFphbGdvJ3MgY29ycnVwdGluZyBpbmZsdWVuY2VzLCBhcyB0aGV5IGFsd2F5cyByZXNvbHZlIG9uIGEgbGF0ZXIgdGljay4KICoKICogQG5hbWUgZW5zdXJlQXN5bmMKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOlV0aWxzCiAqIEBtZXRob2QKICogQGNhdGVnb3J5IFV0aWwKICogQHBhcmFtIHtBc3luY0Z1bmN0aW9ufSBmbiAtIGFuIGFzeW5jIGZ1bmN0aW9uLCBvbmUgdGhhdCBleHBlY3RzIGEgbm9kZS1zdHlsZQogKiBjYWxsYmFjayBhcyBpdHMgbGFzdCBhcmd1bWVudC4KICogQHJldHVybnMge0FzeW5jRnVuY3Rpb259IFJldHVybnMgYSB3cmFwcGVkIGZ1bmN0aW9uIHdpdGggdGhlIGV4YWN0IHNhbWUgY2FsbAogKiBzaWduYXR1cmUgYXMgdGhlIGZ1bmN0aW9uIHBhc3NlZCBpbi4KICogQGV4YW1wbGUKICoKICogZnVuY3Rpb24gc29tZXRpbWVzQXN5bmMoYXJnLCBjYWxsYmFjaykgewogKiAgICAgaWYgKGNhY2hlW2FyZ10pIHsKICogICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgY2FjaGVbYXJnXSk7IC8vIHRoaXMgd291bGQgYmUgc3luY2hyb25vdXMhIQogKiAgICAgfSBlbHNlIHsKICogICAgICAgICBkb1NvbWVJTyhhcmcsIGNhbGxiYWNrKTsgLy8gdGhpcyBJTyB3b3VsZCBiZSBhc3luY2hyb25vdXMKICogICAgIH0KICogfQogKgogKiAvLyB0aGlzIGhhcyBhIHJpc2sgb2Ygc3RhY2sgb3ZlcmZsb3dzIGlmIG1hbnkgcmVzdWx0cyBhcmUgY2FjaGVkIGluIGEgcm93CiAqIGFzeW5jLm1hcFNlcmllcyhhcmdzLCBzb21ldGltZXNBc3luYywgZG9uZSk7CiAqCiAqIC8vIHRoaXMgd2lsbCBkZWZlciBzb21ldGltZXNBc3luYydzIGNhbGxiYWNrIGlmIG5lY2Vzc2FyeSwKICogLy8gcHJldmVudGluZyBzdGFjayBvdmVyZmxvd3MKICogYXN5bmMubWFwU2VyaWVzKGFyZ3MsIGFzeW5jLmVuc3VyZUFzeW5jKHNvbWV0aW1lc0FzeW5jKSwgZG9uZSk7CiAqLwpmdW5jdGlvbiBlbnN1cmVBc3luYyhmbikgewogICAgaWYgKGlzQXN5bmMoZm4pKSByZXR1cm4gZm47CiAgICByZXR1cm4gaW5pdGlhbFBhcmFtcyhmdW5jdGlvbiAoYXJncywgY2FsbGJhY2spIHsKICAgICAgICB2YXIgc3luYyA9IHRydWU7CiAgICAgICAgYXJncy5wdXNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGlubmVyQXJncyA9IGFyZ3VtZW50czsKICAgICAgICAgICAgaWYgKHN5bmMpIHsKICAgICAgICAgICAgICAgIHNldEltbWVkaWF0ZSQxKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseShudWxsLCBpbm5lckFyZ3MpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseShudWxsLCBpbm5lckFyZ3MpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgZm4uYXBwbHkodGhpcywgYXJncyk7CiAgICAgICAgc3luYyA9IGZhbHNlOwogICAgfSk7Cn0KCmZ1bmN0aW9uIG5vdElkKHYpIHsKICAgIHJldHVybiAhdjsKfQoKLyoqCiAqIFJldHVybnMgYHRydWVgIGlmIGV2ZXJ5IGVsZW1lbnQgaW4gYGNvbGxgIHNhdGlzZmllcyBhbiBhc3luYyB0ZXN0LiBJZiBhbnkKICogaXRlcmF0ZWUgY2FsbCByZXR1cm5zIGBmYWxzZWAsIHRoZSBtYWluIGBjYWxsYmFja2AgaXMgaW1tZWRpYXRlbHkgY2FsbGVkLgogKgogKiBAbmFtZSBldmVyeQogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29sbGVjdGlvbnMKICogQG1ldGhvZAogKiBAYWxpYXMgYWxsCiAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uCiAqIEBwYXJhbSB7QXJyYXl8SXRlcmFibGV8T2JqZWN0fSBjb2xsIC0gQSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci4KICogQHBhcmFtIHtBc3luY0Z1bmN0aW9ufSBpdGVyYXRlZSAtIEFuIGFzeW5jIHRydXRoIHRlc3QgdG8gYXBwbHkgdG8gZWFjaCBpdGVtCiAqIGluIHRoZSBjb2xsZWN0aW9uIGluIHBhcmFsbGVsLgogKiBUaGUgaXRlcmF0ZWUgbXVzdCBjb21wbGV0ZSB3aXRoIGEgYm9vbGVhbiByZXN1bHQgdmFsdWUuCiAqIEludm9rZWQgd2l0aCAoaXRlbSwgY2FsbGJhY2spLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIC0gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgYWxsIHRoZQogKiBgaXRlcmF0ZWVgIGZ1bmN0aW9ucyBoYXZlIGZpbmlzaGVkLiBSZXN1bHQgd2lsbCBiZSBlaXRoZXIgYHRydWVgIG9yIGBmYWxzZWAKICogZGVwZW5kaW5nIG9uIHRoZSB2YWx1ZXMgb2YgdGhlIGFzeW5jIHRlc3RzLiBJbnZva2VkIHdpdGggKGVyciwgcmVzdWx0KS4KICogQGV4YW1wbGUKICoKICogYXN5bmMuZXZlcnkoWydmaWxlMScsJ2ZpbGUyJywnZmlsZTMnXSwgZnVuY3Rpb24oZmlsZVBhdGgsIGNhbGxiYWNrKSB7CiAqICAgICBmcy5hY2Nlc3MoZmlsZVBhdGgsIGZ1bmN0aW9uKGVycikgewogKiAgICAgICAgIGNhbGxiYWNrKG51bGwsICFlcnIpCiAqICAgICB9KTsKICogfSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHsKICogICAgIC8vIGlmIHJlc3VsdCBpcyB0cnVlIHRoZW4gZXZlcnkgZmlsZSBleGlzdHMKICogfSk7CiAqLwp2YXIgZXZlcnkgPSBkb1BhcmFsbGVsKF9jcmVhdGVUZXN0ZXIobm90SWQsIG5vdElkKSk7CgovKioKICogVGhlIHNhbWUgYXMgW2BldmVyeWBde0BsaW5rIG1vZHVsZTpDb2xsZWN0aW9ucy5ldmVyeX0gYnV0IHJ1bnMgYSBtYXhpbXVtIG9mIGBsaW1pdGAgYXN5bmMgb3BlcmF0aW9ucyBhdCBhIHRpbWUuCiAqCiAqIEBuYW1lIGV2ZXJ5TGltaXQKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbGxlY3Rpb25zCiAqIEBtZXRob2QKICogQHNlZSBbYXN5bmMuZXZlcnlde0BsaW5rIG1vZHVsZTpDb2xsZWN0aW9ucy5ldmVyeX0KICogQGFsaWFzIGFsbExpbWl0CiAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uCiAqIEBwYXJhbSB7QXJyYXl8SXRlcmFibGV8T2JqZWN0fSBjb2xsIC0gQSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci4KICogQHBhcmFtIHtudW1iZXJ9IGxpbWl0IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGFzeW5jIG9wZXJhdGlvbnMgYXQgYSB0aW1lLgogKiBAcGFyYW0ge0FzeW5jRnVuY3Rpb259IGl0ZXJhdGVlIC0gQW4gYXN5bmMgdHJ1dGggdGVzdCB0byBhcHBseSB0byBlYWNoIGl0ZW0KICogaW4gdGhlIGNvbGxlY3Rpb24gaW4gcGFyYWxsZWwuCiAqIFRoZSBpdGVyYXRlZSBtdXN0IGNvbXBsZXRlIHdpdGggYSBib29sZWFuIHJlc3VsdCB2YWx1ZS4KICogSW52b2tlZCB3aXRoIChpdGVtLCBjYWxsYmFjaykuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gLSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBhbGwgdGhlCiAqIGBpdGVyYXRlZWAgZnVuY3Rpb25zIGhhdmUgZmluaXNoZWQuIFJlc3VsdCB3aWxsIGJlIGVpdGhlciBgdHJ1ZWAgb3IgYGZhbHNlYAogKiBkZXBlbmRpbmcgb24gdGhlIHZhbHVlcyBvZiB0aGUgYXN5bmMgdGVzdHMuIEludm9rZWQgd2l0aCAoZXJyLCByZXN1bHQpLgogKi8KdmFyIGV2ZXJ5TGltaXQgPSBkb1BhcmFsbGVsTGltaXQoX2NyZWF0ZVRlc3Rlcihub3RJZCwgbm90SWQpKTsKCi8qKgogKiBUaGUgc2FtZSBhcyBbYGV2ZXJ5YF17QGxpbmsgbW9kdWxlOkNvbGxlY3Rpb25zLmV2ZXJ5fSBidXQgcnVucyBvbmx5IGEgc2luZ2xlIGFzeW5jIG9wZXJhdGlvbiBhdCBhIHRpbWUuCiAqCiAqIEBuYW1lIGV2ZXJ5U2VyaWVzCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIG1vZHVsZTpDb2xsZWN0aW9ucwogKiBAbWV0aG9kCiAqIEBzZWUgW2FzeW5jLmV2ZXJ5XXtAbGluayBtb2R1bGU6Q29sbGVjdGlvbnMuZXZlcnl9CiAqIEBhbGlhcyBhbGxTZXJpZXMKICogQGNhdGVnb3J5IENvbGxlY3Rpb24KICogQHBhcmFtIHtBcnJheXxJdGVyYWJsZXxPYmplY3R9IGNvbGwgLSBBIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLgogKiBAcGFyYW0ge0FzeW5jRnVuY3Rpb259IGl0ZXJhdGVlIC0gQW4gYXN5bmMgdHJ1dGggdGVzdCB0byBhcHBseSB0byBlYWNoIGl0ZW0KICogaW4gdGhlIGNvbGxlY3Rpb24gaW4gc2VyaWVzLgogKiBUaGUgaXRlcmF0ZWUgbXVzdCBjb21wbGV0ZSB3aXRoIGEgYm9vbGVhbiByZXN1bHQgdmFsdWUuCiAqIEludm9rZWQgd2l0aCAoaXRlbSwgY2FsbGJhY2spLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIC0gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgYWxsIHRoZQogKiBgaXRlcmF0ZWVgIGZ1bmN0aW9ucyBoYXZlIGZpbmlzaGVkLiBSZXN1bHQgd2lsbCBiZSBlaXRoZXIgYHRydWVgIG9yIGBmYWxzZWAKICogZGVwZW5kaW5nIG9uIHRoZSB2YWx1ZXMgb2YgdGhlIGFzeW5jIHRlc3RzLiBJbnZva2VkIHdpdGggKGVyciwgcmVzdWx0KS4KICovCnZhciBldmVyeVNlcmllcyA9IGRvTGltaXQoZXZlcnlMaW1pdCwgMSk7CgovKioKICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuCiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLgogKi8KZnVuY3Rpb24gYmFzZVByb3BlcnR5KGtleSkgewogIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHsKICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldOwogIH07Cn0KCmZ1bmN0aW9uIGZpbHRlckFycmF5KGVhY2hmbiwgYXJyLCBpdGVyYXRlZSwgY2FsbGJhY2spIHsKICAgIHZhciB0cnV0aFZhbHVlcyA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsKICAgIGVhY2hmbihhcnIsIGZ1bmN0aW9uICh4LCBpbmRleCwgY2FsbGJhY2spIHsKICAgICAgICBpdGVyYXRlZSh4LCBmdW5jdGlvbiAoZXJyLCB2KSB7CiAgICAgICAgICAgIHRydXRoVmFsdWVzW2luZGV4XSA9ICEhdjsKICAgICAgICAgICAgY2FsbGJhY2soZXJyKTsKICAgICAgICB9KTsKICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKTsKICAgICAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmICh0cnV0aFZhbHVlc1tpXSkgcmVzdWx0cy5wdXNoKGFycltpXSk7CiAgICAgICAgfQogICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdHMpOwogICAgfSk7Cn0KCmZ1bmN0aW9uIGZpbHRlckdlbmVyaWMoZWFjaGZuLCBjb2xsLCBpdGVyYXRlZSwgY2FsbGJhY2spIHsKICAgIHZhciByZXN1bHRzID0gW107CiAgICBlYWNoZm4oY29sbCwgZnVuY3Rpb24gKHgsIGluZGV4LCBjYWxsYmFjaykgewogICAgICAgIGl0ZXJhdGVlKHgsIGZ1bmN0aW9uIChlcnIsIHYpIHsKICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICh2KSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHtpbmRleDogaW5kZXgsIHZhbHVlOiB4fSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LCBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICBjYWxsYmFjayhlcnIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGFycmF5TWFwKHJlc3VsdHMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgcmV0dXJuIGEuaW5kZXggLSBiLmluZGV4OwogICAgICAgICAgICB9KSwgYmFzZVByb3BlcnR5KCd2YWx1ZScpKSk7CiAgICAgICAgfQogICAgfSk7Cn0KCmZ1bmN0aW9uIF9maWx0ZXIoZWFjaGZuLCBjb2xsLCBpdGVyYXRlZSwgY2FsbGJhY2spIHsKICAgIHZhciBmaWx0ZXIgPSBpc0FycmF5TGlrZShjb2xsKSA/IGZpbHRlckFycmF5IDogZmlsdGVyR2VuZXJpYzsKICAgIGZpbHRlcihlYWNoZm4sIGNvbGwsIHdyYXBBc3luYyhpdGVyYXRlZSksIGNhbGxiYWNrIHx8IG5vb3ApOwp9CgovKioKICogUmV0dXJucyBhIG5ldyBhcnJheSBvZiBhbGwgdGhlIHZhbHVlcyBpbiBgY29sbGAgd2hpY2ggcGFzcyBhbiBhc3luYyB0cnV0aAogKiB0ZXN0LiBUaGlzIG9wZXJhdGlvbiBpcyBwZXJmb3JtZWQgaW4gcGFyYWxsZWwsIGJ1dCB0aGUgcmVzdWx0cyBhcnJheSB3aWxsIGJlCiAqIGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZSBvcmlnaW5hbC4KICoKICogQG5hbWUgZmlsdGVyCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIG1vZHVsZTpDb2xsZWN0aW9ucwogKiBAbWV0aG9kCiAqIEBhbGlhcyBzZWxlY3QKICogQGNhdGVnb3J5IENvbGxlY3Rpb24KICogQHBhcmFtIHtBcnJheXxJdGVyYWJsZXxPYmplY3R9IGNvbGwgLSBBIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSAtIEEgdHJ1dGggdGVzdCB0byBhcHBseSB0byBlYWNoIGl0ZW0gaW4gYGNvbGxgLgogKiBUaGUgYGl0ZXJhdGVlYCBpcyBwYXNzZWQgYSBgY2FsbGJhY2soZXJyLCB0cnV0aFZhbHVlKWAsIHdoaWNoIG11c3QgYmUgY2FsbGVkCiAqIHdpdGggYSBib29sZWFuIGFyZ3VtZW50IG9uY2UgaXQgaGFzIGNvbXBsZXRlZC4gSW52b2tlZCB3aXRoIChpdGVtLCBjYWxsYmFjaykuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gLSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBhbGwgdGhlCiAqIGBpdGVyYXRlZWAgZnVuY3Rpb25zIGhhdmUgZmluaXNoZWQuIEludm9rZWQgd2l0aCAoZXJyLCByZXN1bHRzKS4KICogQGV4YW1wbGUKICoKICogYXN5bmMuZmlsdGVyKFsnZmlsZTEnLCdmaWxlMicsJ2ZpbGUzJ10sIGZ1bmN0aW9uKGZpbGVQYXRoLCBjYWxsYmFjaykgewogKiAgICAgZnMuYWNjZXNzKGZpbGVQYXRoLCBmdW5jdGlvbihlcnIpIHsKICogICAgICAgICBjYWxsYmFjayhudWxsLCAhZXJyKQogKiAgICAgfSk7CiAqIH0sIGZ1bmN0aW9uKGVyciwgcmVzdWx0cykgewogKiAgICAgLy8gcmVzdWx0cyBub3cgZXF1YWxzIGFuIGFycmF5IG9mIHRoZSBleGlzdGluZyBmaWxlcwogKiB9KTsKICovCnZhciBmaWx0ZXIgPSBkb1BhcmFsbGVsKF9maWx0ZXIpOwoKLyoqCiAqIFRoZSBzYW1lIGFzIFtgZmlsdGVyYF17QGxpbmsgbW9kdWxlOkNvbGxlY3Rpb25zLmZpbHRlcn0gYnV0IHJ1bnMgYSBtYXhpbXVtIG9mIGBsaW1pdGAgYXN5bmMgb3BlcmF0aW9ucyBhdCBhCiAqIHRpbWUuCiAqCiAqIEBuYW1lIGZpbHRlckxpbWl0CiAqIEBzdGF0aWMKICogQG1lbWJlck9mIG1vZHVsZTpDb2xsZWN0aW9ucwogKiBAbWV0aG9kCiAqIEBzZWUgW2FzeW5jLmZpbHRlcl17QGxpbmsgbW9kdWxlOkNvbGxlY3Rpb25zLmZpbHRlcn0KICogQGFsaWFzIHNlbGVjdExpbWl0CiAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uCiAqIEBwYXJhbSB7QXJyYXl8SXRlcmFibGV8T2JqZWN0fSBjb2xsIC0gQSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci4KICogQHBhcmFtIHtudW1iZXJ9IGxpbWl0IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGFzeW5jIG9wZXJhdGlvbnMgYXQgYSB0aW1lLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSAtIEEgdHJ1dGggdGVzdCB0byBhcHBseSB0byBlYWNoIGl0ZW0gaW4gYGNvbGxgLgogKiBUaGUgYGl0ZXJhdGVlYCBpcyBwYXNzZWQgYSBgY2FsbGJhY2soZXJyLCB0cnV0aFZhbHVlKWAsIHdoaWNoIG11c3QgYmUgY2FsbGVkCiAqIHdpdGggYSBib29sZWFuIGFyZ3VtZW50IG9uY2UgaXQgaGFzIGNvbXBsZXRlZC4gSW52b2tlZCB3aXRoIChpdGVtLCBjYWxsYmFjaykuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gLSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBhbGwgdGhlCiAqIGBpdGVyYXRlZWAgZnVuY3Rpb25zIGhhdmUgZmluaXNoZWQuIEludm9rZWQgd2l0aCAoZXJyLCByZXN1bHRzKS4KICovCnZhciBmaWx0ZXJMaW1pdCA9IGRvUGFyYWxsZWxMaW1pdChfZmlsdGVyKTsKCi8qKgogKiBUaGUgc2FtZSBhcyBbYGZpbHRlcmBde0BsaW5rIG1vZHVsZTpDb2xsZWN0aW9ucy5maWx0ZXJ9IGJ1dCBydW5zIG9ubHkgYSBzaW5nbGUgYXN5bmMgb3BlcmF0aW9uIGF0IGEgdGltZS4KICoKICogQG5hbWUgZmlsdGVyU2VyaWVzCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIG1vZHVsZTpDb2xsZWN0aW9ucwogKiBAbWV0aG9kCiAqIEBzZWUgW2FzeW5jLmZpbHRlcl17QGxpbmsgbW9kdWxlOkNvbGxlY3Rpb25zLmZpbHRlcn0KICogQGFsaWFzIHNlbGVjdFNlcmllcwogKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbgogKiBAcGFyYW0ge0FycmF5fEl0ZXJhYmxlfE9iamVjdH0gY29sbCAtIEEgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIC0gQSB0cnV0aCB0ZXN0IHRvIGFwcGx5IHRvIGVhY2ggaXRlbSBpbiBgY29sbGAuCiAqIFRoZSBgaXRlcmF0ZWVgIGlzIHBhc3NlZCBhIGBjYWxsYmFjayhlcnIsIHRydXRoVmFsdWUpYCwgd2hpY2ggbXVzdCBiZSBjYWxsZWQKICogd2l0aCBhIGJvb2xlYW4gYXJndW1lbnQgb25jZSBpdCBoYXMgY29tcGxldGVkLiBJbnZva2VkIHdpdGggKGl0ZW0sIGNhbGxiYWNrKS4KICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSAtIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIGFmdGVyIGFsbCB0aGUKICogYGl0ZXJhdGVlYCBmdW5jdGlvbnMgaGF2ZSBmaW5pc2hlZC4gSW52b2tlZCB3aXRoIChlcnIsIHJlc3VsdHMpCiAqLwp2YXIgZmlsdGVyU2VyaWVzID0gZG9MaW1pdChmaWx0ZXJMaW1pdCwgMSk7CgovKioKICogQ2FsbHMgdGhlIGFzeW5jaHJvbm91cyBmdW5jdGlvbiBgZm5gIHdpdGggYSBjYWxsYmFjayBwYXJhbWV0ZXIgdGhhdCBhbGxvd3MgaXQKICogdG8gY2FsbCBpdHNlbGYgYWdhaW4sIGluIHNlcmllcywgaW5kZWZpbml0ZWx5LgoKICogSWYgYW4gZXJyb3IgaXMgcGFzc2VkIHRvIHRoZSBjYWxsYmFjayB0aGVuIGBlcnJiYWNrYCBpcyBjYWxsZWQgd2l0aCB0aGUKICogZXJyb3IsIGFuZCBleGVjdXRpb24gc3RvcHMsIG90aGVyd2lzZSBpdCB3aWxsIG5ldmVyIGJlIGNhbGxlZC4KICoKICogQG5hbWUgZm9yZXZlcgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29udHJvbEZsb3cKICogQG1ldGhvZAogKiBAY2F0ZWdvcnkgQ29udHJvbCBGbG93CiAqIEBwYXJhbSB7QXN5bmNGdW5jdGlvbn0gZm4gLSBhbiBhc3luYyBmdW5jdGlvbiB0byBjYWxsIHJlcGVhdGVkbHkuCiAqIEludm9rZWQgd2l0aCAobmV4dCkuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtlcnJiYWNrXSAtIHdoZW4gYGZuYCBwYXNzZXMgYW4gZXJyb3IgdG8gaXQncyBjYWxsYmFjaywKICogdGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCwgYW5kIGV4ZWN1dGlvbiBzdG9wcy4gSW52b2tlZCB3aXRoIChlcnIpLgogKiBAZXhhbXBsZQogKgogKiBhc3luYy5mb3JldmVyKAogKiAgICAgZnVuY3Rpb24obmV4dCkgewogKiAgICAgICAgIC8vIG5leHQgaXMgc3VpdGFibGUgZm9yIHBhc3NpbmcgdG8gdGhpbmdzIHRoYXQgbmVlZCBhIGNhbGxiYWNrKGVyciBbLCB3aGF0ZXZlcl0pOwogKiAgICAgICAgIC8vIGl0IHdpbGwgcmVzdWx0IGluIHRoaXMgZnVuY3Rpb24gYmVpbmcgY2FsbGVkIGFnYWluLgogKiAgICAgfSwKICogICAgIGZ1bmN0aW9uKGVycikgewogKiAgICAgICAgIC8vIGlmIG5leHQgaXMgY2FsbGVkIHdpdGggYSB2YWx1ZSBpbiBpdHMgZmlyc3QgcGFyYW1ldGVyLCBpdCB3aWxsIGFwcGVhcgogKiAgICAgICAgIC8vIGluIGhlcmUgYXMgJ2VycicsIGFuZCBleGVjdXRpb24gd2lsbCBzdG9wLgogKiAgICAgfQogKiApOwogKi8KZnVuY3Rpb24gZm9yZXZlcihmbiwgZXJyYmFjaykgewogICAgdmFyIGRvbmUgPSBvbmx5T25jZShlcnJiYWNrIHx8IG5vb3ApOwogICAgdmFyIHRhc2sgPSB3cmFwQXN5bmMoZW5zdXJlQXN5bmMoZm4pKTsKCiAgICBmdW5jdGlvbiBuZXh0KGVycikgewogICAgICAgIGlmIChlcnIpIHJldHVybiBkb25lKGVycik7CiAgICAgICAgdGFzayhuZXh0KTsKICAgIH0KICAgIG5leHQoKTsKfQoKLyoqCiAqIFRoZSBzYW1lIGFzIFtgZ3JvdXBCeWBde0BsaW5rIG1vZHVsZTpDb2xsZWN0aW9ucy5ncm91cEJ5fSBidXQgcnVucyBhIG1heGltdW0gb2YgYGxpbWl0YCBhc3luYyBvcGVyYXRpb25zIGF0IGEgdGltZS4KICoKICogQG5hbWUgZ3JvdXBCeUxpbWl0CiAqIEBzdGF0aWMKICogQG1lbWJlck9mIG1vZHVsZTpDb2xsZWN0aW9ucwogKiBAbWV0aG9kCiAqIEBzZWUgW2FzeW5jLmdyb3VwQnlde0BsaW5rIG1vZHVsZTpDb2xsZWN0aW9ucy5ncm91cEJ5fQogKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbgogKiBAcGFyYW0ge0FycmF5fEl0ZXJhYmxlfE9iamVjdH0gY29sbCAtIEEgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7bnVtYmVyfSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBhc3luYyBvcGVyYXRpb25zIGF0IGEgdGltZS4KICogQHBhcmFtIHtBc3luY0Z1bmN0aW9ufSBpdGVyYXRlZSAtIEFuIGFzeW5jIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggaXRlbSBpbgogKiBgY29sbGAuCiAqIFRoZSBpdGVyYXRlZSBzaG91bGQgY29tcGxldGUgd2l0aCBhIGBrZXlgIHRvIGdyb3VwIHRoZSB2YWx1ZSB1bmRlci4KICogSW52b2tlZCB3aXRoICh2YWx1ZSwgY2FsbGJhY2spLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIC0gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgd2hlbiBhbGwgYGl0ZXJhdGVlYAogKiBmdW5jdGlvbnMgaGF2ZSBmaW5pc2hlZCwgb3IgYW4gZXJyb3Igb2NjdXJzLiBSZXN1bHQgaXMgYW4gYE9iamVjdGAgd2hvc2VzCiAqIHByb3BlcnRpZXMgYXJlIGFycmF5cyBvZiB2YWx1ZXMgd2hpY2ggcmV0dXJuZWQgdGhlIGNvcnJlc3BvbmRpbmcga2V5LgogKi8KdmFyIGdyb3VwQnlMaW1pdCA9IGZ1bmN0aW9uKGNvbGwsIGxpbWl0LCBpdGVyYXRlZSwgY2FsbGJhY2spIHsKICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgbm9vcDsKICAgIHZhciBfaXRlcmF0ZWUgPSB3cmFwQXN5bmMoaXRlcmF0ZWUpOwogICAgbWFwTGltaXQoY29sbCwgbGltaXQsIGZ1bmN0aW9uKHZhbCwgY2FsbGJhY2spIHsKICAgICAgICBfaXRlcmF0ZWUodmFsLCBmdW5jdGlvbihlcnIsIGtleSkgewogICAgICAgICAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKTsKICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHtrZXk6IGtleSwgdmFsOiB2YWx9KTsKICAgICAgICB9KTsKICAgIH0sIGZ1bmN0aW9uKGVyciwgbWFwUmVzdWx0cykgewogICAgICAgIHZhciByZXN1bHQgPSB7fTsKICAgICAgICAvLyBmcm9tIE1ETiwgaGFuZGxlIG9iamVjdCBoYXZpbmcgYW4gYGhhc093blByb3BlcnR5YCBwcm9wCiAgICAgICAgdmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXBSZXN1bHRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChtYXBSZXN1bHRzW2ldKSB7CiAgICAgICAgICAgICAgICB2YXIga2V5ID0gbWFwUmVzdWx0c1tpXS5rZXk7CiAgICAgICAgICAgICAgICB2YXIgdmFsID0gbWFwUmVzdWx0c1tpXS52YWw7CgogICAgICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwocmVzdWx0LCBrZXkpKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tleV0ucHVzaCh2YWwpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IFt2YWxdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyLCByZXN1bHQpOwogICAgfSk7Cn07CgovKioKICogUmV0dXJucyBhIG5ldyBvYmplY3QsIHdoZXJlIGVhY2ggdmFsdWUgY29ycmVzcG9uZHMgdG8gYW4gYXJyYXkgb2YgaXRlbXMsIGZyb20KICogYGNvbGxgLCB0aGF0IHJldHVybmVkIHRoZSBjb3JyZXNwb25kaW5nIGtleS4gVGhhdCBpcywgdGhlIGtleXMgb2YgdGhlIG9iamVjdAogKiBjb3JyZXNwb25kIHRvIHRoZSB2YWx1ZXMgcGFzc2VkIHRvIHRoZSBgaXRlcmF0ZWVgIGNhbGxiYWNrLgogKgogKiBOb3RlOiBTaW5jZSB0aGlzIGZ1bmN0aW9uIGFwcGxpZXMgdGhlIGBpdGVyYXRlZWAgdG8gZWFjaCBpdGVtIGluIHBhcmFsbGVsLAogKiB0aGVyZSBpcyBubyBndWFyYW50ZWUgdGhhdCB0aGUgYGl0ZXJhdGVlYCBmdW5jdGlvbnMgd2lsbCBjb21wbGV0ZSBpbiBvcmRlci4KICogSG93ZXZlciwgdGhlIHZhbHVlcyBmb3IgZWFjaCBrZXkgaW4gdGhlIGByZXN1bHRgIHdpbGwgYmUgaW4gdGhlIHNhbWUgb3JkZXIgYXMKICogdGhlIG9yaWdpbmFsIGBjb2xsYC4gRm9yIE9iamVjdHMsIHRoZSB2YWx1ZXMgd2lsbCByb3VnaGx5IGJlIGluIHRoZSBvcmRlciBvZgogKiB0aGUgb3JpZ2luYWwgT2JqZWN0cycga2V5cyAoYnV0IHRoaXMgY2FuIHZhcnkgYWNyb3NzIEphdmFTY3JpcHQgZW5naW5lcykuCiAqCiAqIEBuYW1lIGdyb3VwQnkKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbGxlY3Rpb25zCiAqIEBtZXRob2QKICogQGNhdGVnb3J5IENvbGxlY3Rpb24KICogQHBhcmFtIHtBcnJheXxJdGVyYWJsZXxPYmplY3R9IGNvbGwgLSBBIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLgogKiBAcGFyYW0ge0FzeW5jRnVuY3Rpb259IGl0ZXJhdGVlIC0gQW4gYXN5bmMgZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCBpdGVtIGluCiAqIGBjb2xsYC4KICogVGhlIGl0ZXJhdGVlIHNob3VsZCBjb21wbGV0ZSB3aXRoIGEgYGtleWAgdG8gZ3JvdXAgdGhlIHZhbHVlIHVuZGVyLgogKiBJbnZva2VkIHdpdGggKHZhbHVlLCBjYWxsYmFjaykuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gLSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCB3aGVuIGFsbCBgaXRlcmF0ZWVgCiAqIGZ1bmN0aW9ucyBoYXZlIGZpbmlzaGVkLCBvciBhbiBlcnJvciBvY2N1cnMuIFJlc3VsdCBpcyBhbiBgT2JqZWN0YCB3aG9zZXMKICogcHJvcGVydGllcyBhcmUgYXJyYXlzIG9mIHZhbHVlcyB3aGljaCByZXR1cm5lZCB0aGUgY29ycmVzcG9uZGluZyBrZXkuCiAqIEBleGFtcGxlCiAqCiAqIGFzeW5jLmdyb3VwQnkoWyd1c2VySWQxJywgJ3VzZXJJZDInLCAndXNlcklkMyddLCBmdW5jdGlvbih1c2VySWQsIGNhbGxiYWNrKSB7CiAqICAgICBkYi5maW5kQnlJZCh1c2VySWQsIGZ1bmN0aW9uKGVyciwgdXNlcikgewogKiAgICAgICAgIGlmIChlcnIpIHJldHVybiBjYWxsYmFjayhlcnIpOwogKiAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCB1c2VyLmFnZSk7CiAqICAgICB9KTsKICogfSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHsKICogICAgIC8vIHJlc3VsdCBpcyBvYmplY3QgY29udGFpbmluZyB0aGUgdXNlcklkcyBncm91cGVkIGJ5IGFnZQogKiAgICAgLy8gZS5nLiB7IDMwOiBbJ3VzZXJJZDEnLCAndXNlcklkMyddLCA0MjogWyd1c2VySWQyJ119OwogKiB9KTsKICovCnZhciBncm91cEJ5ID0gZG9MaW1pdChncm91cEJ5TGltaXQsIEluZmluaXR5KTsKCi8qKgogKiBUaGUgc2FtZSBhcyBbYGdyb3VwQnlgXXtAbGluayBtb2R1bGU6Q29sbGVjdGlvbnMuZ3JvdXBCeX0gYnV0IHJ1bnMgb25seSBhIHNpbmdsZSBhc3luYyBvcGVyYXRpb24gYXQgYSB0aW1lLgogKgogKiBAbmFtZSBncm91cEJ5U2VyaWVzCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIG1vZHVsZTpDb2xsZWN0aW9ucwogKiBAbWV0aG9kCiAqIEBzZWUgW2FzeW5jLmdyb3VwQnlde0BsaW5rIG1vZHVsZTpDb2xsZWN0aW9ucy5ncm91cEJ5fQogKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbgogKiBAcGFyYW0ge0FycmF5fEl0ZXJhYmxlfE9iamVjdH0gY29sbCAtIEEgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7bnVtYmVyfSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBhc3luYyBvcGVyYXRpb25zIGF0IGEgdGltZS4KICogQHBhcmFtIHtBc3luY0Z1bmN0aW9ufSBpdGVyYXRlZSAtIEFuIGFzeW5jIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggaXRlbSBpbgogKiBgY29sbGAuCiAqIFRoZSBpdGVyYXRlZSBzaG91bGQgY29tcGxldGUgd2l0aCBhIGBrZXlgIHRvIGdyb3VwIHRoZSB2YWx1ZSB1bmRlci4KICogSW52b2tlZCB3aXRoICh2YWx1ZSwgY2FsbGJhY2spLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIC0gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgd2hlbiBhbGwgYGl0ZXJhdGVlYAogKiBmdW5jdGlvbnMgaGF2ZSBmaW5pc2hlZCwgb3IgYW4gZXJyb3Igb2NjdXJzLiBSZXN1bHQgaXMgYW4gYE9iamVjdGAgd2hvc2VzCiAqIHByb3BlcnRpZXMgYXJlIGFycmF5cyBvZiB2YWx1ZXMgd2hpY2ggcmV0dXJuZWQgdGhlIGNvcnJlc3BvbmRpbmcga2V5LgogKi8KdmFyIGdyb3VwQnlTZXJpZXMgPSBkb0xpbWl0KGdyb3VwQnlMaW1pdCwgMSk7CgovKioKICogTG9ncyB0aGUgcmVzdWx0IG9mIGFuIGBhc3luY2AgZnVuY3Rpb24gdG8gdGhlIGBjb25zb2xlYC4gT25seSB3b3JrcyBpbgogKiBOb2RlLmpzIG9yIGluIGJyb3dzZXJzIHRoYXQgc3VwcG9ydCBgY29uc29sZS5sb2dgIGFuZCBgY29uc29sZS5lcnJvcmAgKHN1Y2gKICogYXMgRkYgYW5kIENocm9tZSkuIElmIG11bHRpcGxlIGFyZ3VtZW50cyBhcmUgcmV0dXJuZWQgZnJvbSB0aGUgYXN5bmMKICogZnVuY3Rpb24sIGBjb25zb2xlLmxvZ2AgaXMgY2FsbGVkIG9uIGVhY2ggYXJndW1lbnQgaW4gb3JkZXIuCiAqCiAqIEBuYW1lIGxvZwogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6VXRpbHMKICogQG1ldGhvZAogKiBAY2F0ZWdvcnkgVXRpbAogKiBAcGFyYW0ge0FzeW5jRnVuY3Rpb259IGZ1bmN0aW9uIC0gVGhlIGZ1bmN0aW9uIHlvdSB3YW50IHRvIGV2ZW50dWFsbHkgYXBwbHkKICogYWxsIGFyZ3VtZW50cyB0by4KICogQHBhcmFtIHsuLi4qfSBhcmd1bWVudHMuLi4gLSBBbnkgbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBhcHBseSB0byB0aGUgZnVuY3Rpb24uCiAqIEBleGFtcGxlCiAqCiAqIC8vIGluIGEgbW9kdWxlCiAqIHZhciBoZWxsbyA9IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrKSB7CiAqICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogKiAgICAgICAgIGNhbGxiYWNrKG51bGwsICdoZWxsbyAnICsgbmFtZSk7CiAqICAgICB9LCAxMDAwKTsKICogfTsKICoKICogLy8gaW4gdGhlIG5vZGUgcmVwbAogKiBub2RlPiBhc3luYy5sb2coaGVsbG8sICd3b3JsZCcpOwogKiAnaGVsbG8gd29ybGQnCiAqLwp2YXIgbG9nID0gY29uc29sZUZ1bmMoJ2xvZycpOwoKLyoqCiAqIFRoZSBzYW1lIGFzIFtgbWFwVmFsdWVzYF17QGxpbmsgbW9kdWxlOkNvbGxlY3Rpb25zLm1hcFZhbHVlc30gYnV0IHJ1bnMgYSBtYXhpbXVtIG9mIGBsaW1pdGAgYXN5bmMgb3BlcmF0aW9ucyBhdCBhCiAqIHRpbWUuCiAqCiAqIEBuYW1lIG1hcFZhbHVlc0xpbWl0CiAqIEBzdGF0aWMKICogQG1lbWJlck9mIG1vZHVsZTpDb2xsZWN0aW9ucwogKiBAbWV0aG9kCiAqIEBzZWUgW2FzeW5jLm1hcFZhbHVlc117QGxpbmsgbW9kdWxlOkNvbGxlY3Rpb25zLm1hcFZhbHVlc30KICogQGNhdGVnb3J5IENvbGxlY3Rpb24KICogQHBhcmFtIHtPYmplY3R9IG9iaiAtIEEgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7bnVtYmVyfSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBhc3luYyBvcGVyYXRpb25zIGF0IGEgdGltZS4KICogQHBhcmFtIHtBc3luY0Z1bmN0aW9ufSBpdGVyYXRlZSAtIEEgZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCB2YWx1ZSBhbmQga2V5CiAqIGluIGBjb2xsYC4KICogVGhlIGl0ZXJhdGVlIHNob3VsZCBjb21wbGV0ZSB3aXRoIHRoZSB0cmFuc2Zvcm1lZCB2YWx1ZSBhcyBpdHMgcmVzdWx0LgogKiBJbnZva2VkIHdpdGggKHZhbHVlLCBrZXksIGNhbGxiYWNrKS4KICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSAtIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIHdoZW4gYWxsIGBpdGVyYXRlZWAKICogZnVuY3Rpb25zIGhhdmUgZmluaXNoZWQsIG9yIGFuIGVycm9yIG9jY3Vycy4gYHJlc3VsdGAgaXMgYSBuZXcgb2JqZWN0IGNvbnNpc3RpbmcKICogb2YgZWFjaCBrZXkgZnJvbSBgb2JqYCwgd2l0aCBlYWNoIHRyYW5zZm9ybWVkIHZhbHVlIG9uIHRoZSByaWdodC1oYW5kIHNpZGUuCiAqIEludm9rZWQgd2l0aCAoZXJyLCByZXN1bHQpLgogKi8KZnVuY3Rpb24gbWFwVmFsdWVzTGltaXQob2JqLCBsaW1pdCwgaXRlcmF0ZWUsIGNhbGxiYWNrKSB7CiAgICBjYWxsYmFjayA9IG9uY2UoY2FsbGJhY2sgfHwgbm9vcCk7CiAgICB2YXIgbmV3T2JqID0ge307CiAgICB2YXIgX2l0ZXJhdGVlID0gd3JhcEFzeW5jKGl0ZXJhdGVlKTsKICAgIGVhY2hPZkxpbWl0KG9iaiwgbGltaXQsIGZ1bmN0aW9uKHZhbCwga2V5LCBuZXh0KSB7CiAgICAgICAgX2l0ZXJhdGVlKHZhbCwga2V5LCBmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHsKICAgICAgICAgICAgaWYgKGVycikgcmV0dXJuIG5leHQoZXJyKTsKICAgICAgICAgICAgbmV3T2JqW2tleV0gPSByZXN1bHQ7CiAgICAgICAgICAgIG5leHQoKTsKICAgICAgICB9KTsKICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjYWxsYmFjayhlcnIsIG5ld09iaik7CiAgICB9KTsKfQoKLyoqCiAqIEEgcmVsYXRpdmUgb2YgW2BtYXBgXXtAbGluayBtb2R1bGU6Q29sbGVjdGlvbnMubWFwfSwgZGVzaWduZWQgZm9yIHVzZSB3aXRoIG9iamVjdHMuCiAqCiAqIFByb2R1Y2VzIGEgbmV3IE9iamVjdCBieSBtYXBwaW5nIGVhY2ggdmFsdWUgb2YgYG9iamAgdGhyb3VnaCB0aGUgYGl0ZXJhdGVlYAogKiBmdW5jdGlvbi4gVGhlIGBpdGVyYXRlZWAgaXMgY2FsbGVkIGVhY2ggYHZhbHVlYCBhbmQgYGtleWAgZnJvbSBgb2JqYCBhbmQgYQogKiBjYWxsYmFjayBmb3Igd2hlbiBpdCBoYXMgZmluaXNoZWQgcHJvY2Vzc2luZy4gRWFjaCBvZiB0aGVzZSBjYWxsYmFja3MgdGFrZXMKICogdHdvIGFyZ3VtZW50czogYW4gYGVycm9yYCwgYW5kIHRoZSB0cmFuc2Zvcm1lZCBpdGVtIGZyb20gYG9iamAuIElmIGBpdGVyYXRlZWAKICogcGFzc2VzIGFuIGVycm9yIHRvIGl0cyBjYWxsYmFjaywgdGhlIG1haW4gYGNhbGxiYWNrYCAoZm9yIHRoZSBgbWFwVmFsdWVzYAogKiBmdW5jdGlvbikgaXMgaW1tZWRpYXRlbHkgY2FsbGVkIHdpdGggdGhlIGVycm9yLgogKgogKiBOb3RlLCB0aGUgb3JkZXIgb2YgdGhlIGtleXMgaW4gdGhlIHJlc3VsdCBpcyBub3QgZ3VhcmFudGVlZC4gIFRoZSBrZXlzIHdpbGwKICogYmUgcm91Z2hseSBpbiB0aGUgb3JkZXIgdGhleSBjb21wbGV0ZSwgKGJ1dCB0aGlzIGlzIHZlcnkgZW5naW5lLXNwZWNpZmljKQogKgogKiBAbmFtZSBtYXBWYWx1ZXMKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbGxlY3Rpb25zCiAqIEBtZXRob2QKICogQGNhdGVnb3J5IENvbGxlY3Rpb24KICogQHBhcmFtIHtPYmplY3R9IG9iaiAtIEEgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7QXN5bmNGdW5jdGlvbn0gaXRlcmF0ZWUgLSBBIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggdmFsdWUgYW5kIGtleQogKiBpbiBgY29sbGAuCiAqIFRoZSBpdGVyYXRlZSBzaG91bGQgY29tcGxldGUgd2l0aCB0aGUgdHJhbnNmb3JtZWQgdmFsdWUgYXMgaXRzIHJlc3VsdC4KICogSW52b2tlZCB3aXRoICh2YWx1ZSwga2V5LCBjYWxsYmFjaykuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gLSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCB3aGVuIGFsbCBgaXRlcmF0ZWVgCiAqIGZ1bmN0aW9ucyBoYXZlIGZpbmlzaGVkLCBvciBhbiBlcnJvciBvY2N1cnMuIGByZXN1bHRgIGlzIGEgbmV3IG9iamVjdCBjb25zaXN0aW5nCiAqIG9mIGVhY2gga2V5IGZyb20gYG9iamAsIHdpdGggZWFjaCB0cmFuc2Zvcm1lZCB2YWx1ZSBvbiB0aGUgcmlnaHQtaGFuZCBzaWRlLgogKiBJbnZva2VkIHdpdGggKGVyciwgcmVzdWx0KS4KICogQGV4YW1wbGUKICoKICogYXN5bmMubWFwVmFsdWVzKHsKICogICAgIGYxOiAnZmlsZTEnLAogKiAgICAgZjI6ICdmaWxlMicsCiAqICAgICBmMzogJ2ZpbGUzJwogKiB9LCBmdW5jdGlvbiAoZmlsZSwga2V5LCBjYWxsYmFjaykgewogKiAgIGZzLnN0YXQoZmlsZSwgY2FsbGJhY2spOwogKiB9LCBmdW5jdGlvbihlcnIsIHJlc3VsdCkgewogKiAgICAgLy8gcmVzdWx0IGlzIG5vdyBhIG1hcCBvZiBzdGF0cyBmb3IgZWFjaCBmaWxlLCBlLmcuCiAqICAgICAvLyB7CiAqICAgICAvLyAgICAgZjE6IFtzdGF0cyBmb3IgZmlsZTFdLAogKiAgICAgLy8gICAgIGYyOiBbc3RhdHMgZm9yIGZpbGUyXSwKICogICAgIC8vICAgICBmMzogW3N0YXRzIGZvciBmaWxlM10KICogICAgIC8vIH0KICogfSk7CiAqLwoKdmFyIG1hcFZhbHVlcyA9IGRvTGltaXQobWFwVmFsdWVzTGltaXQsIEluZmluaXR5KTsKCi8qKgogKiBUaGUgc2FtZSBhcyBbYG1hcFZhbHVlc2Bde0BsaW5rIG1vZHVsZTpDb2xsZWN0aW9ucy5tYXBWYWx1ZXN9IGJ1dCBydW5zIG9ubHkgYSBzaW5nbGUgYXN5bmMgb3BlcmF0aW9uIGF0IGEgdGltZS4KICoKICogQG5hbWUgbWFwVmFsdWVzU2VyaWVzCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIG1vZHVsZTpDb2xsZWN0aW9ucwogKiBAbWV0aG9kCiAqIEBzZWUgW2FzeW5jLm1hcFZhbHVlc117QGxpbmsgbW9kdWxlOkNvbGxlY3Rpb25zLm1hcFZhbHVlc30KICogQGNhdGVnb3J5IENvbGxlY3Rpb24KICogQHBhcmFtIHtPYmplY3R9IG9iaiAtIEEgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7QXN5bmNGdW5jdGlvbn0gaXRlcmF0ZWUgLSBBIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggdmFsdWUgYW5kIGtleQogKiBpbiBgY29sbGAuCiAqIFRoZSBpdGVyYXRlZSBzaG91bGQgY29tcGxldGUgd2l0aCB0aGUgdHJhbnNmb3JtZWQgdmFsdWUgYXMgaXRzIHJlc3VsdC4KICogSW52b2tlZCB3aXRoICh2YWx1ZSwga2V5LCBjYWxsYmFjaykuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gLSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCB3aGVuIGFsbCBgaXRlcmF0ZWVgCiAqIGZ1bmN0aW9ucyBoYXZlIGZpbmlzaGVkLCBvciBhbiBlcnJvciBvY2N1cnMuIGByZXN1bHRgIGlzIGEgbmV3IG9iamVjdCBjb25zaXN0aW5nCiAqIG9mIGVhY2gga2V5IGZyb20gYG9iamAsIHdpdGggZWFjaCB0cmFuc2Zvcm1lZCB2YWx1ZSBvbiB0aGUgcmlnaHQtaGFuZCBzaWRlLgogKiBJbnZva2VkIHdpdGggKGVyciwgcmVzdWx0KS4KICovCnZhciBtYXBWYWx1ZXNTZXJpZXMgPSBkb0xpbWl0KG1hcFZhbHVlc0xpbWl0LCAxKTsKCmZ1bmN0aW9uIGhhcyhvYmosIGtleSkgewogICAgcmV0dXJuIGtleSBpbiBvYmo7Cn0KCi8qKgogKiBDYWNoZXMgdGhlIHJlc3VsdHMgb2YgYW4gYXN5bmMgZnVuY3Rpb24uIFdoZW4gY3JlYXRpbmcgYSBoYXNoIHRvIHN0b3JlCiAqIGZ1bmN0aW9uIHJlc3VsdHMgYWdhaW5zdCwgdGhlIGNhbGxiYWNrIGlzIG9taXR0ZWQgZnJvbSB0aGUgaGFzaCBhbmQgYW4KICogb3B0aW9uYWwgaGFzaCBmdW5jdGlvbiBjYW4gYmUgdXNlZC4KICoKICogSWYgbm8gaGFzaCBmdW5jdGlvbiBpcyBzcGVjaWZpZWQsIHRoZSBmaXJzdCBhcmd1bWVudCBpcyB1c2VkIGFzIGEgaGFzaCBrZXksCiAqIHdoaWNoIG1heSB3b3JrIHJlYXNvbmFibHkgaWYgaXQgaXMgYSBzdHJpbmcgb3IgYSBkYXRhIHR5cGUgdGhhdCBjb252ZXJ0cyB0byBhCiAqIGRpc3RpbmN0IHN0cmluZy4gTm90ZSB0aGF0IG9iamVjdHMgYW5kIGFycmF5cyB3aWxsIG5vdCBiZWhhdmUgcmVhc29uYWJseS4KICogTmVpdGhlciB3aWxsIGNhc2VzIHdoZXJlIHRoZSBvdGhlciBhcmd1bWVudHMgYXJlIHNpZ25pZmljYW50LiBJbiBzdWNoIGNhc2VzLAogKiBzcGVjaWZ5IHlvdXIgb3duIGhhc2ggZnVuY3Rpb24uCiAqCiAqIFRoZSBjYWNoZSBvZiByZXN1bHRzIGlzIGV4cG9zZWQgYXMgdGhlIGBtZW1vYCBwcm9wZXJ0eSBvZiB0aGUgZnVuY3Rpb24KICogcmV0dXJuZWQgYnkgYG1lbW9pemVgLgogKgogKiBAbmFtZSBtZW1vaXplCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIG1vZHVsZTpVdGlscwogKiBAbWV0aG9kCiAqIEBjYXRlZ29yeSBVdGlsCiAqIEBwYXJhbSB7QXN5bmNGdW5jdGlvbn0gZm4gLSBUaGUgYXN5bmMgZnVuY3Rpb24gdG8gcHJveHkgYW5kIGNhY2hlIHJlc3VsdHMgZnJvbS4KICogQHBhcmFtIHtGdW5jdGlvbn0gaGFzaGVyIC0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gZm9yIGdlbmVyYXRpbmcgYSBjdXN0b20gaGFzaAogKiBmb3Igc3RvcmluZyByZXN1bHRzLiBJdCBoYXMgYWxsIHRoZSBhcmd1bWVudHMgYXBwbGllZCB0byBpdCBhcGFydCBmcm9tIHRoZQogKiBjYWxsYmFjaywgYW5kIG11c3QgYmUgc3luY2hyb25vdXMuCiAqIEByZXR1cm5zIHtBc3luY0Z1bmN0aW9ufSBhIG1lbW9pemVkIHZlcnNpb24gb2YgYGZuYAogKiBAZXhhbXBsZQogKgogKiB2YXIgc2xvd19mbiA9IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrKSB7CiAqICAgICAvLyBkbyBzb21ldGhpbmcKICogICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdCk7CiAqIH07CiAqIHZhciBmbiA9IGFzeW5jLm1lbW9pemUoc2xvd19mbik7CiAqCiAqIC8vIGZuIGNhbiBub3cgYmUgdXNlZCBhcyBpZiBpdCB3ZXJlIHNsb3dfZm4KICogZm4oJ3NvbWUgbmFtZScsIGZ1bmN0aW9uKCkgewogKiAgICAgLy8gY2FsbGJhY2sKICogfSk7CiAqLwpmdW5jdGlvbiBtZW1vaXplKGZuLCBoYXNoZXIpIHsKICAgIHZhciBtZW1vID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgIHZhciBxdWV1ZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgaGFzaGVyID0gaGFzaGVyIHx8IGlkZW50aXR5OwogICAgdmFyIF9mbiA9IHdyYXBBc3luYyhmbik7CiAgICB2YXIgbWVtb2l6ZWQgPSBpbml0aWFsUGFyYW1zKGZ1bmN0aW9uIG1lbW9pemVkKGFyZ3MsIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIGtleSA9IGhhc2hlci5hcHBseShudWxsLCBhcmdzKTsKICAgICAgICBpZiAoaGFzKG1lbW8sIGtleSkpIHsKICAgICAgICAgICAgc2V0SW1tZWRpYXRlJDEoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseShudWxsLCBtZW1vW2tleV0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKGhhcyhxdWV1ZXMsIGtleSkpIHsKICAgICAgICAgICAgcXVldWVzW2tleV0ucHVzaChjYWxsYmFjayk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcXVldWVzW2tleV0gPSBbY2FsbGJhY2tdOwogICAgICAgICAgICBfZm4uYXBwbHkobnVsbCwgYXJncy5jb25jYXQoZnVuY3Rpb24oLyphcmdzKi8pIHsKICAgICAgICAgICAgICAgIHZhciBhcmdzID0gc2xpY2UoYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIG1lbW9ba2V5XSA9IGFyZ3M7CiAgICAgICAgICAgICAgICB2YXIgcSA9IHF1ZXVlc1trZXldOwogICAgICAgICAgICAgICAgZGVsZXRlIHF1ZXVlc1trZXldOwogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBxLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgICAgICAgICAgIHFbaV0uYXBwbHkobnVsbCwgYXJncyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICB9KTsKICAgIG1lbW9pemVkLm1lbW8gPSBtZW1vOwogICAgbWVtb2l6ZWQudW5tZW1vaXplZCA9IGZuOwogICAgcmV0dXJuIG1lbW9pemVkOwp9CgovKioKICogQ2FsbHMgYGNhbGxiYWNrYCBvbiBhIGxhdGVyIGxvb3AgYXJvdW5kIHRoZSBldmVudCBsb29wLiBJbiBOb2RlLmpzIHRoaXMganVzdAogKiBjYWxscyBgcHJvY2Vzcy5uZXh0VGljbGAuICBJbiB0aGUgYnJvd3NlciBpdCB3aWxsIHVzZSBgc2V0SW1tZWRpYXRlYCBpZgogKiBhdmFpbGFibGUsIG90aGVyd2lzZSBgc2V0VGltZW91dChjYWxsYmFjaywgMClgLCB3aGljaCBtZWFucyBvdGhlciBoaWdoZXIKICogcHJpb3JpdHkgZXZlbnRzIG1heSBwcmVjZWRlIHRoZSBleGVjdXRpb24gb2YgYGNhbGxiYWNrYC4KICoKICogVGhpcyBpcyB1c2VkIGludGVybmFsbHkgZm9yIGJyb3dzZXItY29tcGF0aWJpbGl0eSBwdXJwb3Nlcy4KICoKICogQG5hbWUgbmV4dFRpY2sKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOlV0aWxzCiAqIEBtZXRob2QKICogQHNlZSBbYXN5bmMuc2V0SW1tZWRpYXRlXXtAbGluayBtb2R1bGU6VXRpbHMuc2V0SW1tZWRpYXRlfQogKiBAY2F0ZWdvcnkgVXRpbAogKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIFRoZSBmdW5jdGlvbiB0byBjYWxsIG9uIGEgbGF0ZXIgbG9vcCBhcm91bmQKICogdGhlIGV2ZW50IGxvb3AuIEludm9rZWQgd2l0aCAoYXJncy4uLikuCiAqIEBwYXJhbSB7Li4uKn0gYXJncy4uLiAtIGFueSBudW1iZXIgb2YgYWRkaXRpb25hbCBhcmd1bWVudHMgdG8gcGFzcyB0byB0aGUKICogY2FsbGJhY2sgb24gdGhlIG5leHQgdGljay4KICogQGV4YW1wbGUKICoKICogdmFyIGNhbGxfb3JkZXIgPSBbXTsKICogYXN5bmMubmV4dFRpY2soZnVuY3Rpb24oKSB7CiAqICAgICBjYWxsX29yZGVyLnB1c2goJ3R3bycpOwogKiAgICAgLy8gY2FsbF9vcmRlciBub3cgZXF1YWxzIFsnb25lJywndHdvJ10KICogfSk7CiAqIGNhbGxfb3JkZXIucHVzaCgnb25lJyk7CiAqCiAqIGFzeW5jLnNldEltbWVkaWF0ZShmdW5jdGlvbiAoYSwgYiwgYykgewogKiAgICAgLy8gYSwgYiwgYW5kIGMgZXF1YWwgMSwgMiwgYW5kIDMKICogfSwgMSwgMiwgMyk7CiAqLwp2YXIgX2RlZmVyJDE7CgppZiAoaGFzTmV4dFRpY2spIHsKICAgIF9kZWZlciQxID0gcHJvY2Vzcy5uZXh0VGljazsKfSBlbHNlIGlmIChoYXNTZXRJbW1lZGlhdGUpIHsKICAgIF9kZWZlciQxID0gc2V0SW1tZWRpYXRlOwp9IGVsc2UgewogICAgX2RlZmVyJDEgPSBmYWxsYmFjazsKfQoKdmFyIG5leHRUaWNrID0gd3JhcChfZGVmZXIkMSk7CgpmdW5jdGlvbiBfcGFyYWxsZWwoZWFjaGZuLCB0YXNrcywgY2FsbGJhY2spIHsKICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgbm9vcDsKICAgIHZhciByZXN1bHRzID0gaXNBcnJheUxpa2UodGFza3MpID8gW10gOiB7fTsKCiAgICBlYWNoZm4odGFza3MsIGZ1bmN0aW9uICh0YXNrLCBrZXksIGNhbGxiYWNrKSB7CiAgICAgICAgd3JhcEFzeW5jKHRhc2spKGZ1bmN0aW9uIChlcnIsIHJlc3VsdCkgewogICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIpIHsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHNsaWNlKGFyZ3VtZW50cywgMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVzdWx0c1trZXldID0gcmVzdWx0OwogICAgICAgICAgICBjYWxsYmFjayhlcnIpOwogICAgICAgIH0pOwogICAgfSwgZnVuY3Rpb24gKGVycikgewogICAgICAgIGNhbGxiYWNrKGVyciwgcmVzdWx0cyk7CiAgICB9KTsKfQoKLyoqCiAqIFJ1biB0aGUgYHRhc2tzYCBjb2xsZWN0aW9uIG9mIGZ1bmN0aW9ucyBpbiBwYXJhbGxlbCwgd2l0aG91dCB3YWl0aW5nIHVudGlsCiAqIHRoZSBwcmV2aW91cyBmdW5jdGlvbiBoYXMgY29tcGxldGVkLiBJZiBhbnkgb2YgdGhlIGZ1bmN0aW9ucyBwYXNzIGFuIGVycm9yIHRvCiAqIGl0cyBjYWxsYmFjaywgdGhlIG1haW4gYGNhbGxiYWNrYCBpcyBpbW1lZGlhdGVseSBjYWxsZWQgd2l0aCB0aGUgdmFsdWUgb2YgdGhlCiAqIGVycm9yLiBPbmNlIHRoZSBgdGFza3NgIGhhdmUgY29tcGxldGVkLCB0aGUgcmVzdWx0cyBhcmUgcGFzc2VkIHRvIHRoZSBmaW5hbAogKiBgY2FsbGJhY2tgIGFzIGFuIGFycmF5LgogKgogKiAqKk5vdGU6KiogYHBhcmFsbGVsYCBpcyBhYm91dCBraWNraW5nLW9mZiBJL08gdGFza3MgaW4gcGFyYWxsZWwsIG5vdCBhYm91dAogKiBwYXJhbGxlbCBleGVjdXRpb24gb2YgY29kZS4gIElmIHlvdXIgdGFza3MgZG8gbm90IHVzZSBhbnkgdGltZXJzIG9yIHBlcmZvcm0KICogYW55IEkvTywgdGhleSB3aWxsIGFjdHVhbGx5IGJlIGV4ZWN1dGVkIGluIHNlcmllcy4gIEFueSBzeW5jaHJvbm91cyBzZXR1cAogKiBzZWN0aW9ucyBmb3IgZWFjaCB0YXNrIHdpbGwgaGFwcGVuIG9uZSBhZnRlciB0aGUgb3RoZXIuICBKYXZhU2NyaXB0IHJlbWFpbnMKICogc2luZ2xlLXRocmVhZGVkLgogKgogKiAqKkhpbnQ6KiogVXNlIFtgcmVmbGVjdGBde0BsaW5rIG1vZHVsZTpVdGlscy5yZWZsZWN0fSB0byBjb250aW51ZSB0aGUKICogZXhlY3V0aW9uIG9mIG90aGVyIHRhc2tzIHdoZW4gYSB0YXNrIGZhaWxzLgogKgogKiBJdCBpcyBhbHNvIHBvc3NpYmxlIHRvIHVzZSBhbiBvYmplY3QgaW5zdGVhZCBvZiBhbiBhcnJheS4gRWFjaCBwcm9wZXJ0eSB3aWxsCiAqIGJlIHJ1biBhcyBhIGZ1bmN0aW9uIGFuZCB0aGUgcmVzdWx0cyB3aWxsIGJlIHBhc3NlZCB0byB0aGUgZmluYWwgYGNhbGxiYWNrYAogKiBhcyBhbiBvYmplY3QgaW5zdGVhZCBvZiBhbiBhcnJheS4gVGhpcyBjYW4gYmUgYSBtb3JlIHJlYWRhYmxlIHdheSBvZiBoYW5kbGluZwogKiByZXN1bHRzIGZyb20ge0BsaW5rIGFzeW5jLnBhcmFsbGVsfS4KICoKICogQG5hbWUgcGFyYWxsZWwKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbnRyb2xGbG93CiAqIEBtZXRob2QKICogQGNhdGVnb3J5IENvbnRyb2wgRmxvdwogKiBAcGFyYW0ge0FycmF5fEl0ZXJhYmxlfE9iamVjdH0gdGFza3MgLSBBIGNvbGxlY3Rpb24gb2YKICogW2FzeW5jIGZ1bmN0aW9uc117QGxpbmsgQXN5bmNGdW5jdGlvbn0gdG8gcnVuLgogKiBFYWNoIGFzeW5jIGZ1bmN0aW9uIGNhbiBjb21wbGV0ZSB3aXRoIGFueSBudW1iZXIgb2Ygb3B0aW9uYWwgYHJlc3VsdGAgdmFsdWVzLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIC0gQW4gb3B0aW9uYWwgY2FsbGJhY2sgdG8gcnVuIG9uY2UgYWxsIHRoZQogKiBmdW5jdGlvbnMgaGF2ZSBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LiBUaGlzIGZ1bmN0aW9uIGdldHMgYSByZXN1bHRzIGFycmF5CiAqIChvciBvYmplY3QpIGNvbnRhaW5pbmcgYWxsIHRoZSByZXN1bHQgYXJndW1lbnRzIHBhc3NlZCB0byB0aGUgdGFzayBjYWxsYmFja3MuCiAqIEludm9rZWQgd2l0aCAoZXJyLCByZXN1bHRzKS4KICoKICogQGV4YW1wbGUKICogYXN5bmMucGFyYWxsZWwoWwogKiAgICAgZnVuY3Rpb24oY2FsbGJhY2spIHsKICogICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogKiAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCAnb25lJyk7CiAqICAgICAgICAgfSwgMjAwKTsKICogICAgIH0sCiAqICAgICBmdW5jdGlvbihjYWxsYmFjaykgewogKiAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAqICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsICd0d28nKTsKICogICAgICAgICB9LCAxMDApOwogKiAgICAgfQogKiBdLAogKiAvLyBvcHRpb25hbCBjYWxsYmFjawogKiBmdW5jdGlvbihlcnIsIHJlc3VsdHMpIHsKICogICAgIC8vIHRoZSByZXN1bHRzIGFycmF5IHdpbGwgZXF1YWwgWydvbmUnLCd0d28nXSBldmVuIHRob3VnaAogKiAgICAgLy8gdGhlIHNlY29uZCBmdW5jdGlvbiBoYWQgYSBzaG9ydGVyIHRpbWVvdXQuCiAqIH0pOwogKgogKiAvLyBhbiBleGFtcGxlIHVzaW5nIGFuIG9iamVjdCBpbnN0ZWFkIG9mIGFuIGFycmF5CiAqIGFzeW5jLnBhcmFsbGVsKHsKICogICAgIG9uZTogZnVuY3Rpb24oY2FsbGJhY2spIHsKICogICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogKiAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCAxKTsKICogICAgICAgICB9LCAyMDApOwogKiAgICAgfSwKICogICAgIHR3bzogZnVuY3Rpb24oY2FsbGJhY2spIHsKICogICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogKiAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCAyKTsKICogICAgICAgICB9LCAxMDApOwogKiAgICAgfQogKiB9LCBmdW5jdGlvbihlcnIsIHJlc3VsdHMpIHsKICogICAgIC8vIHJlc3VsdHMgaXMgbm93IGVxdWFscyB0bzoge29uZTogMSwgdHdvOiAyfQogKiB9KTsKICovCmZ1bmN0aW9uIHBhcmFsbGVsTGltaXQodGFza3MsIGNhbGxiYWNrKSB7CiAgICBfcGFyYWxsZWwoZWFjaE9mLCB0YXNrcywgY2FsbGJhY2spOwp9CgovKioKICogVGhlIHNhbWUgYXMgW2BwYXJhbGxlbGBde0BsaW5rIG1vZHVsZTpDb250cm9sRmxvdy5wYXJhbGxlbH0gYnV0IHJ1bnMgYSBtYXhpbXVtIG9mIGBsaW1pdGAgYXN5bmMgb3BlcmF0aW9ucyBhdCBhCiAqIHRpbWUuCiAqCiAqIEBuYW1lIHBhcmFsbGVsTGltaXQKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbnRyb2xGbG93CiAqIEBtZXRob2QKICogQHNlZSBbYXN5bmMucGFyYWxsZWxde0BsaW5rIG1vZHVsZTpDb250cm9sRmxvdy5wYXJhbGxlbH0KICogQGNhdGVnb3J5IENvbnRyb2wgRmxvdwogKiBAcGFyYW0ge0FycmF5fEl0ZXJhYmxlfE9iamVjdH0gdGFza3MgLSBBIGNvbGxlY3Rpb24gb2YKICogW2FzeW5jIGZ1bmN0aW9uc117QGxpbmsgQXN5bmNGdW5jdGlvbn0gdG8gcnVuLgogKiBFYWNoIGFzeW5jIGZ1bmN0aW9uIGNhbiBjb21wbGV0ZSB3aXRoIGFueSBudW1iZXIgb2Ygb3B0aW9uYWwgYHJlc3VsdGAgdmFsdWVzLgogKiBAcGFyYW0ge251bWJlcn0gbGltaXQgLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgYXN5bmMgb3BlcmF0aW9ucyBhdCBhIHRpbWUuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gLSBBbiBvcHRpb25hbCBjYWxsYmFjayB0byBydW4gb25jZSBhbGwgdGhlCiAqIGZ1bmN0aW9ucyBoYXZlIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkuIFRoaXMgZnVuY3Rpb24gZ2V0cyBhIHJlc3VsdHMgYXJyYXkKICogKG9yIG9iamVjdCkgY29udGFpbmluZyBhbGwgdGhlIHJlc3VsdCBhcmd1bWVudHMgcGFzc2VkIHRvIHRoZSB0YXNrIGNhbGxiYWNrcy4KICogSW52b2tlZCB3aXRoIChlcnIsIHJlc3VsdHMpLgogKi8KZnVuY3Rpb24gcGFyYWxsZWxMaW1pdCQxKHRhc2tzLCBsaW1pdCwgY2FsbGJhY2spIHsKICAgIF9wYXJhbGxlbChfZWFjaE9mTGltaXQobGltaXQpLCB0YXNrcywgY2FsbGJhY2spOwp9CgovKioKICogQSBxdWV1ZSBvZiB0YXNrcyBmb3IgdGhlIHdvcmtlciBmdW5jdGlvbiB0byBjb21wbGV0ZS4KICogQHR5cGVkZWYge09iamVjdH0gUXVldWVPYmplY3QKICogQG1lbWJlck9mIG1vZHVsZTpDb250cm9sRmxvdwogKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBsZW5ndGggLSBhIGZ1bmN0aW9uIHJldHVybmluZyB0aGUgbnVtYmVyIG9mIGl0ZW1zCiAqIHdhaXRpbmcgdG8gYmUgcHJvY2Vzc2VkLiBJbnZva2Ugd2l0aCBgcXVldWUubGVuZ3RoKClgLgogKiBAcHJvcGVydHkge2Jvb2xlYW59IHN0YXJ0ZWQgLSBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCBhbnkKICogaXRlbXMgaGF2ZSBiZWVuIHB1c2hlZCBhbmQgcHJvY2Vzc2VkIGJ5IHRoZSBxdWV1ZS4KICogQHByb3BlcnR5IHtGdW5jdGlvbn0gcnVubmluZyAtIGEgZnVuY3Rpb24gcmV0dXJuaW5nIHRoZSBudW1iZXIgb2YgaXRlbXMKICogY3VycmVudGx5IGJlaW5nIHByb2Nlc3NlZC4gSW52b2tlIHdpdGggYHF1ZXVlLnJ1bm5pbmcoKWAuCiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHdvcmtlcnNMaXN0IC0gYSBmdW5jdGlvbiByZXR1cm5pbmcgdGhlIGFycmF5IG9mIGl0ZW1zCiAqIGN1cnJlbnRseSBiZWluZyBwcm9jZXNzZWQuIEludm9rZSB3aXRoIGBxdWV1ZS53b3JrZXJzTGlzdCgpYC4KICogQHByb3BlcnR5IHtGdW5jdGlvbn0gaWRsZSAtIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGZhbHNlIGlmIHRoZXJlIGFyZSBpdGVtcwogKiB3YWl0aW5nIG9yIGJlaW5nIHByb2Nlc3NlZCwgb3IgdHJ1ZSBpZiBub3QuIEludm9rZSB3aXRoIGBxdWV1ZS5pZGxlKClgLgogKiBAcHJvcGVydHkge251bWJlcn0gY29uY3VycmVuY3kgLSBhbiBpbnRlZ2VyIGZvciBkZXRlcm1pbmluZyBob3cgbWFueSBgd29ya2VyYAogKiBmdW5jdGlvbnMgc2hvdWxkIGJlIHJ1biBpbiBwYXJhbGxlbC4gVGhpcyBwcm9wZXJ0eSBjYW4gYmUgY2hhbmdlZCBhZnRlciBhCiAqIGBxdWV1ZWAgaXMgY3JlYXRlZCB0byBhbHRlciB0aGUgY29uY3VycmVuY3kgb24tdGhlLWZseS4KICogQHByb3BlcnR5IHtGdW5jdGlvbn0gcHVzaCAtIGFkZCBhIG5ldyB0YXNrIHRvIHRoZSBgcXVldWVgLiBDYWxscyBgY2FsbGJhY2tgCiAqIG9uY2UgdGhlIGB3b3JrZXJgIGhhcyBmaW5pc2hlZCBwcm9jZXNzaW5nIHRoZSB0YXNrLiBJbnN0ZWFkIG9mIGEgc2luZ2xlIHRhc2ssCiAqIGEgYHRhc2tzYCBhcnJheSBjYW4gYmUgc3VibWl0dGVkLiBUaGUgcmVzcGVjdGl2ZSBjYWxsYmFjayBpcyB1c2VkIGZvciBldmVyeQogKiB0YXNrIGluIHRoZSBsaXN0LiBJbnZva2Ugd2l0aCBgcXVldWUucHVzaCh0YXNrLCBbY2FsbGJhY2tdKWAsCiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHVuc2hpZnQgLSBhZGQgYSBuZXcgdGFzayB0byB0aGUgZnJvbnQgb2YgdGhlIGBxdWV1ZWAuCiAqIEludm9rZSB3aXRoIGBxdWV1ZS51bnNoaWZ0KHRhc2ssIFtjYWxsYmFja10pYC4KICogQHByb3BlcnR5IHtGdW5jdGlvbn0gcmVtb3ZlIC0gcmVtb3ZlIGl0ZW1zIGZyb20gdGhlIHF1ZXVlIHRoYXQgbWF0Y2ggYSB0ZXN0CiAqIGZ1bmN0aW9uLiAgVGhlIHRlc3QgZnVuY3Rpb24gd2lsbCBiZSBwYXNzZWQgYW4gb2JqZWN0IHdpdGggYSBgZGF0YWAgcHJvcGVydHksCiAqIGFuZCBhIGBwcmlvcml0eWAgcHJvcGVydHksIGlmIHRoaXMgaXMgYQogKiBbcHJpb3JpdHlRdWV1ZV17QGxpbmsgbW9kdWxlOkNvbnRyb2xGbG93LnByaW9yaXR5UXVldWV9IG9iamVjdC4KICogSW52b2tlZCB3aXRoIGBxdWV1ZS5yZW1vdmUodGVzdEZuKWAsIHdoZXJlIGB0ZXN0Rm5gIGlzIG9mIHRoZSBmb3JtCiAqIGBmdW5jdGlvbiAoe2RhdGEsIHByaW9yaXR5fSkge31gIGFuZCByZXR1cm5zIGEgQm9vbGVhbi4KICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc2F0dXJhdGVkIC0gYSBjYWxsYmFjayB0aGF0IGlzIGNhbGxlZCB3aGVuIHRoZSBudW1iZXIgb2YKICogcnVubmluZyB3b3JrZXJzIGhpdHMgdGhlIGBjb25jdXJyZW5jeWAgbGltaXQsIGFuZCBmdXJ0aGVyIHRhc2tzIHdpbGwgYmUKICogcXVldWVkLgogKiBAcHJvcGVydHkge0Z1bmN0aW9ufSB1bnNhdHVyYXRlZCAtIGEgY2FsbGJhY2sgdGhhdCBpcyBjYWxsZWQgd2hlbiB0aGUgbnVtYmVyCiAqIG9mIHJ1bm5pbmcgd29ya2VycyBpcyBsZXNzIHRoYW4gdGhlIGBjb25jdXJyZW5jeWAgJiBgYnVmZmVyYCBsaW1pdHMsIGFuZAogKiBmdXJ0aGVyIHRhc2tzIHdpbGwgbm90IGJlIHF1ZXVlZC4KICogQHByb3BlcnR5IHtudW1iZXJ9IGJ1ZmZlciAtIEEgbWluaW11bSB0aHJlc2hvbGQgYnVmZmVyIGluIG9yZGVyIHRvIHNheSB0aGF0CiAqIHRoZSBgcXVldWVgIGlzIGB1bnNhdHVyYXRlZGAuCiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGVtcHR5IC0gYSBjYWxsYmFjayB0aGF0IGlzIGNhbGxlZCB3aGVuIHRoZSBsYXN0IGl0ZW0KICogZnJvbSB0aGUgYHF1ZXVlYCBpcyBnaXZlbiB0byBhIGB3b3JrZXJgLgogKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBkcmFpbiAtIGEgY2FsbGJhY2sgdGhhdCBpcyBjYWxsZWQgd2hlbiB0aGUgbGFzdCBpdGVtCiAqIGZyb20gdGhlIGBxdWV1ZWAgaGFzIHJldHVybmVkIGZyb20gdGhlIGB3b3JrZXJgLgogKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBlcnJvciAtIGEgY2FsbGJhY2sgdGhhdCBpcyBjYWxsZWQgd2hlbiBhIHRhc2sgZXJyb3JzLgogKiBIYXMgdGhlIHNpZ25hdHVyZSBgZnVuY3Rpb24oZXJyb3IsIHRhc2spYC4KICogQHByb3BlcnR5IHtib29sZWFufSBwYXVzZWQgLSBhIGJvb2xlYW4gZm9yIGRldGVybWluaW5nIHdoZXRoZXIgdGhlIHF1ZXVlIGlzCiAqIGluIGEgcGF1c2VkIHN0YXRlLgogKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBwYXVzZSAtIGEgZnVuY3Rpb24gdGhhdCBwYXVzZXMgdGhlIHByb2Nlc3Npbmcgb2YgdGFza3MKICogdW50aWwgYHJlc3VtZSgpYCBpcyBjYWxsZWQuIEludm9rZSB3aXRoIGBxdWV1ZS5wYXVzZSgpYC4KICogQHByb3BlcnR5IHtGdW5jdGlvbn0gcmVzdW1lIC0gYSBmdW5jdGlvbiB0aGF0IHJlc3VtZXMgdGhlIHByb2Nlc3Npbmcgb2YKICogcXVldWVkIHRhc2tzIHdoZW4gdGhlIHF1ZXVlIGlzIHBhdXNlZC4gSW52b2tlIHdpdGggYHF1ZXVlLnJlc3VtZSgpYC4KICogQHByb3BlcnR5IHtGdW5jdGlvbn0ga2lsbCAtIGEgZnVuY3Rpb24gdGhhdCByZW1vdmVzIHRoZSBgZHJhaW5gIGNhbGxiYWNrIGFuZAogKiBlbXB0aWVzIHJlbWFpbmluZyB0YXNrcyBmcm9tIHRoZSBxdWV1ZSBmb3JjaW5nIGl0IHRvIGdvIGlkbGUuIE5vIG1vcmUgdGFza3MKICogc2hvdWxkIGJlIHB1c2hlZCB0byB0aGUgcXVldWUgYWZ0ZXIgY2FsbGluZyB0aGlzIGZ1bmN0aW9uLiBJbnZva2Ugd2l0aCBgcXVldWUua2lsbCgpYC4KICovCgovKioKICogQ3JlYXRlcyBhIGBxdWV1ZWAgb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBgY29uY3VycmVuY3lgLiBUYXNrcyBhZGRlZCB0byB0aGUKICogYHF1ZXVlYCBhcmUgcHJvY2Vzc2VkIGluIHBhcmFsbGVsICh1cCB0byB0aGUgYGNvbmN1cnJlbmN5YCBsaW1pdCkuIElmIGFsbAogKiBgd29ya2VyYHMgYXJlIGluIHByb2dyZXNzLCB0aGUgdGFzayBpcyBxdWV1ZWQgdW50aWwgb25lIGJlY29tZXMgYXZhaWxhYmxlLgogKiBPbmNlIGEgYHdvcmtlcmAgY29tcGxldGVzIGEgYHRhc2tgLCB0aGF0IGB0YXNrYCdzIGNhbGxiYWNrIGlzIGNhbGxlZC4KICoKICogQG5hbWUgcXVldWUKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbnRyb2xGbG93CiAqIEBtZXRob2QKICogQGNhdGVnb3J5IENvbnRyb2wgRmxvdwogKiBAcGFyYW0ge0FzeW5jRnVuY3Rpb259IHdvcmtlciAtIEFuIGFzeW5jIGZ1bmN0aW9uIGZvciBwcm9jZXNzaW5nIGEgcXVldWVkIHRhc2suCiAqIElmIHlvdSB3YW50IHRvIGhhbmRsZSBlcnJvcnMgZnJvbSBhbiBpbmRpdmlkdWFsIHRhc2ssIHBhc3MgYSBjYWxsYmFjayB0bwogKiBgcS5wdXNoKClgLiBJbnZva2VkIHdpdGggKHRhc2ssIGNhbGxiYWNrKS4KICogQHBhcmFtIHtudW1iZXJ9IFtjb25jdXJyZW5jeT0xXSAtIEFuIGBpbnRlZ2VyYCBmb3IgZGV0ZXJtaW5pbmcgaG93IG1hbnkKICogYHdvcmtlcmAgZnVuY3Rpb25zIHNob3VsZCBiZSBydW4gaW4gcGFyYWxsZWwuICBJZiBvbWl0dGVkLCB0aGUgY29uY3VycmVuY3kKICogZGVmYXVsdHMgdG8gYDFgLiAgSWYgdGhlIGNvbmN1cnJlbmN5IGlzIGAwYCwgYW4gZXJyb3IgaXMgdGhyb3duLgogKiBAcmV0dXJucyB7bW9kdWxlOkNvbnRyb2xGbG93LlF1ZXVlT2JqZWN0fSBBIHF1ZXVlIG9iamVjdCB0byBtYW5hZ2UgdGhlIHRhc2tzLiBDYWxsYmFja3MgY2FuCiAqIGF0dGFjaGVkIGFzIGNlcnRhaW4gcHJvcGVydGllcyB0byBsaXN0ZW4gZm9yIHNwZWNpZmljIGV2ZW50cyBkdXJpbmcgdGhlCiAqIGxpZmVjeWNsZSBvZiB0aGUgcXVldWUuCiAqIEBleGFtcGxlCiAqCiAqIC8vIGNyZWF0ZSBhIHF1ZXVlIG9iamVjdCB3aXRoIGNvbmN1cnJlbmN5IDIKICogdmFyIHEgPSBhc3luYy5xdWV1ZShmdW5jdGlvbih0YXNrLCBjYWxsYmFjaykgewogKiAgICAgY29uc29sZS5sb2coJ2hlbGxvICcgKyB0YXNrLm5hbWUpOwogKiAgICAgY2FsbGJhY2soKTsKICogfSwgMik7CiAqCiAqIC8vIGFzc2lnbiBhIGNhbGxiYWNrCiAqIHEuZHJhaW4gPSBmdW5jdGlvbigpIHsKICogICAgIGNvbnNvbGUubG9nKCdhbGwgaXRlbXMgaGF2ZSBiZWVuIHByb2Nlc3NlZCcpOwogKiB9OwogKgogKiAvLyBhZGQgc29tZSBpdGVtcyB0byB0aGUgcXVldWUKICogcS5wdXNoKHtuYW1lOiAnZm9vJ30sIGZ1bmN0aW9uKGVycikgewogKiAgICAgY29uc29sZS5sb2coJ2ZpbmlzaGVkIHByb2Nlc3NpbmcgZm9vJyk7CiAqIH0pOwogKiBxLnB1c2goe25hbWU6ICdiYXInfSwgZnVuY3Rpb24gKGVycikgewogKiAgICAgY29uc29sZS5sb2coJ2ZpbmlzaGVkIHByb2Nlc3NpbmcgYmFyJyk7CiAqIH0pOwogKgogKiAvLyBhZGQgc29tZSBpdGVtcyB0byB0aGUgcXVldWUgKGJhdGNoLXdpc2UpCiAqIHEucHVzaChbe25hbWU6ICdiYXonfSx7bmFtZTogJ2JheSd9LHtuYW1lOiAnYmF4J31dLCBmdW5jdGlvbihlcnIpIHsKICogICAgIGNvbnNvbGUubG9nKCdmaW5pc2hlZCBwcm9jZXNzaW5nIGl0ZW0nKTsKICogfSk7CiAqCiAqIC8vIGFkZCBzb21lIGl0ZW1zIHRvIHRoZSBmcm9udCBvZiB0aGUgcXVldWUKICogcS51bnNoaWZ0KHtuYW1lOiAnYmFyJ30sIGZ1bmN0aW9uIChlcnIpIHsKICogICAgIGNvbnNvbGUubG9nKCdmaW5pc2hlZCBwcm9jZXNzaW5nIGJhcicpOwogKiB9KTsKICovCnZhciBxdWV1ZSQxID0gZnVuY3Rpb24gKHdvcmtlciwgY29uY3VycmVuY3kpIHsKICAgIHZhciBfd29ya2VyID0gd3JhcEFzeW5jKHdvcmtlcik7CiAgICByZXR1cm4gcXVldWUoZnVuY3Rpb24gKGl0ZW1zLCBjYikgewogICAgICAgIF93b3JrZXIoaXRlbXNbMF0sIGNiKTsKICAgIH0sIGNvbmN1cnJlbmN5LCAxKTsKfTsKCi8qKgogKiBUaGUgc2FtZSBhcyBbYXN5bmMucXVldWVde0BsaW5rIG1vZHVsZTpDb250cm9sRmxvdy5xdWV1ZX0gb25seSB0YXNrcyBhcmUgYXNzaWduZWQgYSBwcmlvcml0eSBhbmQKICogY29tcGxldGVkIGluIGFzY2VuZGluZyBwcmlvcml0eSBvcmRlci4KICoKICogQG5hbWUgcHJpb3JpdHlRdWV1ZQogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29udHJvbEZsb3cKICogQG1ldGhvZAogKiBAc2VlIFthc3luYy5xdWV1ZV17QGxpbmsgbW9kdWxlOkNvbnRyb2xGbG93LnF1ZXVlfQogKiBAY2F0ZWdvcnkgQ29udHJvbCBGbG93CiAqIEBwYXJhbSB7QXN5bmNGdW5jdGlvbn0gd29ya2VyIC0gQW4gYXN5bmMgZnVuY3Rpb24gZm9yIHByb2Nlc3NpbmcgYSBxdWV1ZWQgdGFzay4KICogSWYgeW91IHdhbnQgdG8gaGFuZGxlIGVycm9ycyBmcm9tIGFuIGluZGl2aWR1YWwgdGFzaywgcGFzcyBhIGNhbGxiYWNrIHRvCiAqIGBxLnB1c2goKWAuCiAqIEludm9rZWQgd2l0aCAodGFzaywgY2FsbGJhY2spLgogKiBAcGFyYW0ge251bWJlcn0gY29uY3VycmVuY3kgLSBBbiBgaW50ZWdlcmAgZm9yIGRldGVybWluaW5nIGhvdyBtYW55IGB3b3JrZXJgCiAqIGZ1bmN0aW9ucyBzaG91bGQgYmUgcnVuIGluIHBhcmFsbGVsLiAgSWYgb21pdHRlZCwgdGhlIGNvbmN1cnJlbmN5IGRlZmF1bHRzIHRvCiAqIGAxYC4gIElmIHRoZSBjb25jdXJyZW5jeSBpcyBgMGAsIGFuIGVycm9yIGlzIHRocm93bi4KICogQHJldHVybnMge21vZHVsZTpDb250cm9sRmxvdy5RdWV1ZU9iamVjdH0gQSBwcmlvcml0eVF1ZXVlIG9iamVjdCB0byBtYW5hZ2UgdGhlIHRhc2tzLiBUaGVyZSBhcmUgdHdvCiAqIGRpZmZlcmVuY2VzIGJldHdlZW4gYHF1ZXVlYCBhbmQgYHByaW9yaXR5UXVldWVgIG9iamVjdHM6CiAqICogYHB1c2godGFzaywgcHJpb3JpdHksIFtjYWxsYmFja10pYCAtIGBwcmlvcml0eWAgc2hvdWxkIGJlIGEgbnVtYmVyLiBJZiBhbgogKiAgIGFycmF5IG9mIGB0YXNrc2AgaXMgZ2l2ZW4sIGFsbCB0YXNrcyB3aWxsIGJlIGFzc2lnbmVkIHRoZSBzYW1lIHByaW9yaXR5LgogKiAqIFRoZSBgdW5zaGlmdGAgbWV0aG9kIHdhcyByZW1vdmVkLgogKi8KdmFyIHByaW9yaXR5UXVldWUgPSBmdW5jdGlvbih3b3JrZXIsIGNvbmN1cnJlbmN5KSB7CiAgICAvLyBTdGFydCB3aXRoIGEgbm9ybWFsIHF1ZXVlCiAgICB2YXIgcSA9IHF1ZXVlJDEod29ya2VyLCBjb25jdXJyZW5jeSk7CgogICAgLy8gT3ZlcnJpZGUgcHVzaCB0byBhY2NlcHQgc2Vjb25kIHBhcmFtZXRlciByZXByZXNlbnRpbmcgcHJpb3JpdHkKICAgIHEucHVzaCA9IGZ1bmN0aW9uKGRhdGEsIHByaW9yaXR5LCBjYWxsYmFjaykgewogICAgICAgIGlmIChjYWxsYmFjayA9PSBudWxsKSBjYWxsYmFjayA9IG5vb3A7CiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Rhc2sgY2FsbGJhY2sgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CiAgICAgICAgfQogICAgICAgIHEuc3RhcnRlZCA9IHRydWU7CiAgICAgICAgaWYgKCFpc0FycmF5KGRhdGEpKSB7CiAgICAgICAgICAgIGRhdGEgPSBbZGF0YV07CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAvLyBjYWxsIGRyYWluIGltbWVkaWF0ZWx5IGlmIHRoZXJlIGFyZSBubyB0YXNrcwogICAgICAgICAgICByZXR1cm4gc2V0SW1tZWRpYXRlJDEoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBxLmRyYWluKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgcHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwOwogICAgICAgIHZhciBuZXh0Tm9kZSA9IHEuX3Rhc2tzLmhlYWQ7CiAgICAgICAgd2hpbGUgKG5leHROb2RlICYmIHByaW9yaXR5ID49IG5leHROb2RlLnByaW9yaXR5KSB7CiAgICAgICAgICAgIG5leHROb2RlID0gbmV4dE5vZGUubmV4dDsKICAgICAgICB9CgogICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gZGF0YS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICAgICAgdmFyIGl0ZW0gPSB7CiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhW2ldLAogICAgICAgICAgICAgICAgcHJpb3JpdHk6IHByaW9yaXR5LAogICAgICAgICAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrCiAgICAgICAgICAgIH07CgogICAgICAgICAgICBpZiAobmV4dE5vZGUpIHsKICAgICAgICAgICAgICAgIHEuX3Rhc2tzLmluc2VydEJlZm9yZShuZXh0Tm9kZSwgaXRlbSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBxLl90YXNrcy5wdXNoKGl0ZW0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNldEltbWVkaWF0ZSQxKHEucHJvY2Vzcyk7CiAgICB9OwoKICAgIC8vIFJlbW92ZSB1bnNoaWZ0IGZ1bmN0aW9uCiAgICBkZWxldGUgcS51bnNoaWZ0OwoKICAgIHJldHVybiBxOwp9OwoKLyoqCiAqIFJ1bnMgdGhlIGB0YXNrc2AgYXJyYXkgb2YgZnVuY3Rpb25zIGluIHBhcmFsbGVsLCB3aXRob3V0IHdhaXRpbmcgdW50aWwgdGhlCiAqIHByZXZpb3VzIGZ1bmN0aW9uIGhhcyBjb21wbGV0ZWQuIE9uY2UgYW55IG9mIHRoZSBgdGFza3NgIGNvbXBsZXRlIG9yIHBhc3MgYW4KICogZXJyb3IgdG8gaXRzIGNhbGxiYWNrLCB0aGUgbWFpbiBgY2FsbGJhY2tgIGlzIGltbWVkaWF0ZWx5IGNhbGxlZC4gSXQncwogKiBlcXVpdmFsZW50IHRvIGBQcm9taXNlLnJhY2UoKWAuCiAqCiAqIEBuYW1lIHJhY2UKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbnRyb2xGbG93CiAqIEBtZXRob2QKICogQGNhdGVnb3J5IENvbnRyb2wgRmxvdwogKiBAcGFyYW0ge0FycmF5fSB0YXNrcyAtIEFuIGFycmF5IGNvbnRhaW5pbmcgW2FzeW5jIGZ1bmN0aW9uc117QGxpbmsgQXN5bmNGdW5jdGlvbn0KICogdG8gcnVuLiBFYWNoIGZ1bmN0aW9uIGNhbiBjb21wbGV0ZSB3aXRoIGFuIG9wdGlvbmFsIGByZXN1bHRgIHZhbHVlLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIEEgY2FsbGJhY2sgdG8gcnVuIG9uY2UgYW55IG9mIHRoZSBmdW5jdGlvbnMgaGF2ZQogKiBjb21wbGV0ZWQuIFRoaXMgZnVuY3Rpb24gZ2V0cyBhbiBlcnJvciBvciByZXN1bHQgZnJvbSB0aGUgZmlyc3QgZnVuY3Rpb24gdGhhdAogKiBjb21wbGV0ZWQuIEludm9rZWQgd2l0aCAoZXJyLCByZXN1bHQpLgogKiBAcmV0dXJucyB1bmRlZmluZWQKICogQGV4YW1wbGUKICoKICogYXN5bmMucmFjZShbCiAqICAgICBmdW5jdGlvbihjYWxsYmFjaykgewogKiAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAqICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsICdvbmUnKTsKICogICAgICAgICB9LCAyMDApOwogKiAgICAgfSwKICogICAgIGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAqICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICogICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgJ3R3bycpOwogKiAgICAgICAgIH0sIDEwMCk7CiAqICAgICB9CiAqIF0sCiAqIC8vIG1haW4gY2FsbGJhY2sKICogZnVuY3Rpb24oZXJyLCByZXN1bHQpIHsKICogICAgIC8vIHRoZSByZXN1bHQgd2lsbCBiZSBlcXVhbCB0byAndHdvJyBhcyBpdCBmaW5pc2hlcyBlYXJsaWVyCiAqIH0pOwogKi8KZnVuY3Rpb24gcmFjZSh0YXNrcywgY2FsbGJhY2spIHsKICAgIGNhbGxiYWNrID0gb25jZShjYWxsYmFjayB8fCBub29wKTsKICAgIGlmICghaXNBcnJheSh0YXNrcykpIHJldHVybiBjYWxsYmFjayhuZXcgVHlwZUVycm9yKCdGaXJzdCBhcmd1bWVudCB0byByYWNlIG11c3QgYmUgYW4gYXJyYXkgb2YgZnVuY3Rpb25zJykpOwogICAgaWYgKCF0YXNrcy5sZW5ndGgpIHJldHVybiBjYWxsYmFjaygpOwogICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0YXNrcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICB3cmFwQXN5bmModGFza3NbaV0pKGNhbGxiYWNrKTsKICAgIH0KfQoKLyoqCiAqIFNhbWUgYXMgW2ByZWR1Y2VgXXtAbGluayBtb2R1bGU6Q29sbGVjdGlvbnMucmVkdWNlfSwgb25seSBvcGVyYXRlcyBvbiBgYXJyYXlgIGluIHJldmVyc2Ugb3JkZXIuCiAqCiAqIEBuYW1lIHJlZHVjZVJpZ2h0CiAqIEBzdGF0aWMKICogQG1lbWJlck9mIG1vZHVsZTpDb2xsZWN0aW9ucwogKiBAbWV0aG9kCiAqIEBzZWUgW2FzeW5jLnJlZHVjZV17QGxpbmsgbW9kdWxlOkNvbGxlY3Rpb25zLnJlZHVjZX0KICogQGFsaWFzIGZvbGRyCiAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uCiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IC0gQSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci4KICogQHBhcmFtIHsqfSBtZW1vIC0gVGhlIGluaXRpYWwgc3RhdGUgb2YgdGhlIHJlZHVjdGlvbi4KICogQHBhcmFtIHtBc3luY0Z1bmN0aW9ufSBpdGVyYXRlZSAtIEEgZnVuY3Rpb24gYXBwbGllZCB0byBlYWNoIGl0ZW0gaW4gdGhlCiAqIGFycmF5IHRvIHByb2R1Y2UgdGhlIG5leHQgc3RlcCBpbiB0aGUgcmVkdWN0aW9uLgogKiBUaGUgYGl0ZXJhdGVlYCBzaG91bGQgY29tcGxldGUgd2l0aCB0aGUgbmV4dCBzdGF0ZSBvZiB0aGUgcmVkdWN0aW9uLgogKiBJZiB0aGUgaXRlcmF0ZWUgY29tcGxldGUgd2l0aCBhbiBlcnJvciwgdGhlIHJlZHVjdGlvbiBpcyBzdG9wcGVkIGFuZCB0aGUKICogbWFpbiBgY2FsbGJhY2tgIGlzIGltbWVkaWF0ZWx5IGNhbGxlZCB3aXRoIHRoZSBlcnJvci4KICogSW52b2tlZCB3aXRoIChtZW1vLCBpdGVtLCBjYWxsYmFjaykuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gLSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBhbGwgdGhlCiAqIGBpdGVyYXRlZWAgZnVuY3Rpb25zIGhhdmUgZmluaXNoZWQuIFJlc3VsdCBpcyB0aGUgcmVkdWNlZCB2YWx1ZS4gSW52b2tlZCB3aXRoCiAqIChlcnIsIHJlc3VsdCkuCiAqLwpmdW5jdGlvbiByZWR1Y2VSaWdodCAoYXJyYXksIG1lbW8sIGl0ZXJhdGVlLCBjYWxsYmFjaykgewogICAgdmFyIHJldmVyc2VkID0gc2xpY2UoYXJyYXkpLnJldmVyc2UoKTsKICAgIHJlZHVjZShyZXZlcnNlZCwgbWVtbywgaXRlcmF0ZWUsIGNhbGxiYWNrKTsKfQoKLyoqCiAqIFdyYXBzIHRoZSBhc3luYyBmdW5jdGlvbiBpbiBhbm90aGVyIGZ1bmN0aW9uIHRoYXQgYWx3YXlzIGNvbXBsZXRlcyB3aXRoIGEKICogcmVzdWx0IG9iamVjdCwgZXZlbiB3aGVuIGl0IGVycm9ycy4KICoKICogVGhlIHJlc3VsdCBvYmplY3QgaGFzIGVpdGhlciB0aGUgcHJvcGVydHkgYGVycm9yYCBvciBgdmFsdWVgLgogKgogKiBAbmFtZSByZWZsZWN0CiAqIEBzdGF0aWMKICogQG1lbWJlck9mIG1vZHVsZTpVdGlscwogKiBAbWV0aG9kCiAqIEBjYXRlZ29yeSBVdGlsCiAqIEBwYXJhbSB7QXN5bmNGdW5jdGlvbn0gZm4gLSBUaGUgYXN5bmMgZnVuY3Rpb24geW91IHdhbnQgdG8gd3JhcAogKiBAcmV0dXJucyB7RnVuY3Rpb259IC0gQSBmdW5jdGlvbiB0aGF0IGFsd2F5cyBwYXNzZXMgbnVsbCB0byBpdCdzIGNhbGxiYWNrIGFzCiAqIHRoZSBlcnJvci4gVGhlIHNlY29uZCBhcmd1bWVudCB0byB0aGUgY2FsbGJhY2sgd2lsbCBiZSBhbiBgb2JqZWN0YCB3aXRoCiAqIGVpdGhlciBhbiBgZXJyb3JgIG9yIGEgYHZhbHVlYCBwcm9wZXJ0eS4KICogQGV4YW1wbGUKICoKICogYXN5bmMucGFyYWxsZWwoWwogKiAgICAgYXN5bmMucmVmbGVjdChmdW5jdGlvbihjYWxsYmFjaykgewogKiAgICAgICAgIC8vIGRvIHNvbWUgc3R1ZmYgLi4uCiAqICAgICAgICAgY2FsbGJhY2sobnVsbCwgJ29uZScpOwogKiAgICAgfSksCiAqICAgICBhc3luYy5yZWZsZWN0KGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAqICAgICAgICAgLy8gZG8gc29tZSBtb3JlIHN0dWZmIGJ1dCBlcnJvciAuLi4KICogICAgICAgICBjYWxsYmFjaygnYmFkIHN0dWZmIGhhcHBlbmVkJyk7CiAqICAgICB9KSwKICogICAgIGFzeW5jLnJlZmxlY3QoZnVuY3Rpb24oY2FsbGJhY2spIHsKICogICAgICAgICAvLyBkbyBzb21lIG1vcmUgc3R1ZmYgLi4uCiAqICAgICAgICAgY2FsbGJhY2sobnVsbCwgJ3R3bycpOwogKiAgICAgfSkKICogXSwKICogLy8gb3B0aW9uYWwgY2FsbGJhY2sKICogZnVuY3Rpb24oZXJyLCByZXN1bHRzKSB7CiAqICAgICAvLyB2YWx1ZXMKICogICAgIC8vIHJlc3VsdHNbMF0udmFsdWUgPSAnb25lJwogKiAgICAgLy8gcmVzdWx0c1sxXS5lcnJvciA9ICdiYWQgc3R1ZmYgaGFwcGVuZWQnCiAqICAgICAvLyByZXN1bHRzWzJdLnZhbHVlID0gJ3R3bycKICogfSk7CiAqLwpmdW5jdGlvbiByZWZsZWN0KGZuKSB7CiAgICB2YXIgX2ZuID0gd3JhcEFzeW5jKGZuKTsKICAgIHJldHVybiBpbml0aWFsUGFyYW1zKGZ1bmN0aW9uIHJlZmxlY3RPbihhcmdzLCByZWZsZWN0Q2FsbGJhY2spIHsKICAgICAgICBhcmdzLnB1c2goZnVuY3Rpb24gY2FsbGJhY2soZXJyb3IsIGNiQXJnKSB7CiAgICAgICAgICAgIGlmIChlcnJvcikgewogICAgICAgICAgICAgICAgcmVmbGVjdENhbGxiYWNrKG51bGwsIHsgZXJyb3I6IGVycm9yIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdmFyIHZhbHVlOwogICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPD0gMikgewogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY2JBcmc7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gc2xpY2UoYXJndW1lbnRzLCAxKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJlZmxlY3RDYWxsYmFjayhudWxsLCB7IHZhbHVlOiB2YWx1ZSB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICByZXR1cm4gX2ZuLmFwcGx5KHRoaXMsIGFyZ3MpOwogICAgfSk7Cn0KCi8qKgogKiBBIGhlbHBlciBmdW5jdGlvbiB0aGF0IHdyYXBzIGFuIGFycmF5IG9yIGFuIG9iamVjdCBvZiBmdW5jdGlvbnMgd2l0aCBgcmVmbGVjdGAuCiAqCiAqIEBuYW1lIHJlZmxlY3RBbGwKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOlV0aWxzCiAqIEBtZXRob2QKICogQHNlZSBbYXN5bmMucmVmbGVjdF17QGxpbmsgbW9kdWxlOlV0aWxzLnJlZmxlY3R9CiAqIEBjYXRlZ29yeSBVdGlsCiAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fEl0ZXJhYmxlfSB0YXNrcyAtIFRoZSBjb2xsZWN0aW9uIG9mCiAqIFthc3luYyBmdW5jdGlvbnNde0BsaW5rIEFzeW5jRnVuY3Rpb259IHRvIHdyYXAgaW4gYGFzeW5jLnJlZmxlY3RgLgogKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgYXN5bmMgZnVuY3Rpb25zLCBlYWNoIHdyYXBwZWQgaW4KICogYGFzeW5jLnJlZmxlY3RgCiAqIEBleGFtcGxlCiAqCiAqIGxldCB0YXNrcyA9IFsKICogICAgIGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAqICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICogICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgJ29uZScpOwogKiAgICAgICAgIH0sIDIwMCk7CiAqICAgICB9LAogKiAgICAgZnVuY3Rpb24oY2FsbGJhY2spIHsKICogICAgICAgICAvLyBkbyBzb21lIG1vcmUgc3R1ZmYgYnV0IGVycm9yIC4uLgogKiAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcignYmFkIHN0dWZmIGhhcHBlbmVkJykpOwogKiAgICAgfSwKICogICAgIGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAqICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICogICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgJ3R3bycpOwogKiAgICAgICAgIH0sIDEwMCk7CiAqICAgICB9CiAqIF07CiAqCiAqIGFzeW5jLnBhcmFsbGVsKGFzeW5jLnJlZmxlY3RBbGwodGFza3MpLAogKiAvLyBvcHRpb25hbCBjYWxsYmFjawogKiBmdW5jdGlvbihlcnIsIHJlc3VsdHMpIHsKICogICAgIC8vIHZhbHVlcwogKiAgICAgLy8gcmVzdWx0c1swXS52YWx1ZSA9ICdvbmUnCiAqICAgICAvLyByZXN1bHRzWzFdLmVycm9yID0gRXJyb3IoJ2JhZCBzdHVmZiBoYXBwZW5lZCcpCiAqICAgICAvLyByZXN1bHRzWzJdLnZhbHVlID0gJ3R3bycKICogfSk7CiAqCiAqIC8vIGFuIGV4YW1wbGUgdXNpbmcgYW4gb2JqZWN0IGluc3RlYWQgb2YgYW4gYXJyYXkKICogbGV0IHRhc2tzID0gewogKiAgICAgb25lOiBmdW5jdGlvbihjYWxsYmFjaykgewogKiAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAqICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsICdvbmUnKTsKICogICAgICAgICB9LCAyMDApOwogKiAgICAgfSwKICogICAgIHR3bzogZnVuY3Rpb24oY2FsbGJhY2spIHsKICogICAgICAgICBjYWxsYmFjaygndHdvJyk7CiAqICAgICB9LAogKiAgICAgdGhyZWU6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAqICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICogICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgJ3RocmVlJyk7CiAqICAgICAgICAgfSwgMTAwKTsKICogICAgIH0KICogfTsKICoKICogYXN5bmMucGFyYWxsZWwoYXN5bmMucmVmbGVjdEFsbCh0YXNrcyksCiAqIC8vIG9wdGlvbmFsIGNhbGxiYWNrCiAqIGZ1bmN0aW9uKGVyciwgcmVzdWx0cykgewogKiAgICAgLy8gdmFsdWVzCiAqICAgICAvLyByZXN1bHRzLm9uZS52YWx1ZSA9ICdvbmUnCiAqICAgICAvLyByZXN1bHRzLnR3by5lcnJvciA9ICd0d28nCiAqICAgICAvLyByZXN1bHRzLnRocmVlLnZhbHVlID0gJ3RocmVlJwogKiB9KTsKICovCmZ1bmN0aW9uIHJlZmxlY3RBbGwodGFza3MpIHsKICAgIHZhciByZXN1bHRzOwogICAgaWYgKGlzQXJyYXkodGFza3MpKSB7CiAgICAgICAgcmVzdWx0cyA9IGFycmF5TWFwKHRhc2tzLCByZWZsZWN0KTsKICAgIH0gZWxzZSB7CiAgICAgICAgcmVzdWx0cyA9IHt9OwogICAgICAgIGJhc2VGb3JPd24odGFza3MsIGZ1bmN0aW9uKHRhc2ssIGtleSkgewogICAgICAgICAgICByZXN1bHRzW2tleV0gPSByZWZsZWN0LmNhbGwodGhpcywgdGFzayk7CiAgICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0czsKfQoKZnVuY3Rpb24gcmVqZWN0JDEoZWFjaGZuLCBhcnIsIGl0ZXJhdGVlLCBjYWxsYmFjaykgewogICAgX2ZpbHRlcihlYWNoZm4sIGFyciwgZnVuY3Rpb24odmFsdWUsIGNiKSB7CiAgICAgICAgaXRlcmF0ZWUodmFsdWUsIGZ1bmN0aW9uKGVyciwgdikgewogICAgICAgICAgICBjYihlcnIsICF2KTsKICAgICAgICB9KTsKICAgIH0sIGNhbGxiYWNrKTsKfQoKLyoqCiAqIFRoZSBvcHBvc2l0ZSBvZiBbYGZpbHRlcmBde0BsaW5rIG1vZHVsZTpDb2xsZWN0aW9ucy5maWx0ZXJ9LiBSZW1vdmVzIHZhbHVlcyB0aGF0IHBhc3MgYW4gYGFzeW5jYCB0cnV0aCB0ZXN0LgogKgogKiBAbmFtZSByZWplY3QKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbGxlY3Rpb25zCiAqIEBtZXRob2QKICogQHNlZSBbYXN5bmMuZmlsdGVyXXtAbGluayBtb2R1bGU6Q29sbGVjdGlvbnMuZmlsdGVyfQogKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbgogKiBAcGFyYW0ge0FycmF5fEl0ZXJhYmxlfE9iamVjdH0gY29sbCAtIEEgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIC0gQW4gYXN5bmMgdHJ1dGggdGVzdCB0byBhcHBseSB0byBlYWNoIGl0ZW0gaW4KICogYGNvbGxgLgogKiBUaGUgc2hvdWxkIGNvbXBsZXRlIHdpdGggYSBib29sZWFuIHZhbHVlIGFzIGl0cyBgcmVzdWx0YC4KICogSW52b2tlZCB3aXRoIChpdGVtLCBjYWxsYmFjaykuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gLSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBhbGwgdGhlCiAqIGBpdGVyYXRlZWAgZnVuY3Rpb25zIGhhdmUgZmluaXNoZWQuIEludm9rZWQgd2l0aCAoZXJyLCByZXN1bHRzKS4KICogQGV4YW1wbGUKICoKICogYXN5bmMucmVqZWN0KFsnZmlsZTEnLCdmaWxlMicsJ2ZpbGUzJ10sIGZ1bmN0aW9uKGZpbGVQYXRoLCBjYWxsYmFjaykgewogKiAgICAgZnMuYWNjZXNzKGZpbGVQYXRoLCBmdW5jdGlvbihlcnIpIHsKICogICAgICAgICBjYWxsYmFjayhudWxsLCAhZXJyKQogKiAgICAgfSk7CiAqIH0sIGZ1bmN0aW9uKGVyciwgcmVzdWx0cykgewogKiAgICAgLy8gcmVzdWx0cyBub3cgZXF1YWxzIGFuIGFycmF5IG9mIG1pc3NpbmcgZmlsZXMKICogICAgIGNyZWF0ZUZpbGVzKHJlc3VsdHMpOwogKiB9KTsKICovCnZhciByZWplY3QgPSBkb1BhcmFsbGVsKHJlamVjdCQxKTsKCi8qKgogKiBUaGUgc2FtZSBhcyBbYHJlamVjdGBde0BsaW5rIG1vZHVsZTpDb2xsZWN0aW9ucy5yZWplY3R9IGJ1dCBydW5zIGEgbWF4aW11bSBvZiBgbGltaXRgIGFzeW5jIG9wZXJhdGlvbnMgYXQgYQogKiB0aW1lLgogKgogKiBAbmFtZSByZWplY3RMaW1pdAogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29sbGVjdGlvbnMKICogQG1ldGhvZAogKiBAc2VlIFthc3luYy5yZWplY3Rde0BsaW5rIG1vZHVsZTpDb2xsZWN0aW9ucy5yZWplY3R9CiAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uCiAqIEBwYXJhbSB7QXJyYXl8SXRlcmFibGV8T2JqZWN0fSBjb2xsIC0gQSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci4KICogQHBhcmFtIHtudW1iZXJ9IGxpbWl0IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGFzeW5jIG9wZXJhdGlvbnMgYXQgYSB0aW1lLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSAtIEFuIGFzeW5jIHRydXRoIHRlc3QgdG8gYXBwbHkgdG8gZWFjaCBpdGVtIGluCiAqIGBjb2xsYC4KICogVGhlIHNob3VsZCBjb21wbGV0ZSB3aXRoIGEgYm9vbGVhbiB2YWx1ZSBhcyBpdHMgYHJlc3VsdGAuCiAqIEludm9rZWQgd2l0aCAoaXRlbSwgY2FsbGJhY2spLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIC0gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgYWxsIHRoZQogKiBgaXRlcmF0ZWVgIGZ1bmN0aW9ucyBoYXZlIGZpbmlzaGVkLiBJbnZva2VkIHdpdGggKGVyciwgcmVzdWx0cykuCiAqLwp2YXIgcmVqZWN0TGltaXQgPSBkb1BhcmFsbGVsTGltaXQocmVqZWN0JDEpOwoKLyoqCiAqIFRoZSBzYW1lIGFzIFtgcmVqZWN0YF17QGxpbmsgbW9kdWxlOkNvbGxlY3Rpb25zLnJlamVjdH0gYnV0IHJ1bnMgb25seSBhIHNpbmdsZSBhc3luYyBvcGVyYXRpb24gYXQgYSB0aW1lLgogKgogKiBAbmFtZSByZWplY3RTZXJpZXMKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbGxlY3Rpb25zCiAqIEBtZXRob2QKICogQHNlZSBbYXN5bmMucmVqZWN0XXtAbGluayBtb2R1bGU6Q29sbGVjdGlvbnMucmVqZWN0fQogKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbgogKiBAcGFyYW0ge0FycmF5fEl0ZXJhYmxlfE9iamVjdH0gY29sbCAtIEEgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIC0gQW4gYXN5bmMgdHJ1dGggdGVzdCB0byBhcHBseSB0byBlYWNoIGl0ZW0gaW4KICogYGNvbGxgLgogKiBUaGUgc2hvdWxkIGNvbXBsZXRlIHdpdGggYSBib29sZWFuIHZhbHVlIGFzIGl0cyBgcmVzdWx0YC4KICogSW52b2tlZCB3aXRoIChpdGVtLCBjYWxsYmFjaykuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gLSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBhbGwgdGhlCiAqIGBpdGVyYXRlZWAgZnVuY3Rpb25zIGhhdmUgZmluaXNoZWQuIEludm9rZWQgd2l0aCAoZXJyLCByZXN1bHRzKS4KICovCnZhciByZWplY3RTZXJpZXMgPSBkb0xpbWl0KHJlamVjdExpbWl0LCAxKTsKCi8qKgogKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGB2YWx1ZWAuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDIuNC4wCiAqIEBjYXRlZ29yeSBVdGlsCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHJldHVybiBmcm9tIHRoZSBuZXcgZnVuY3Rpb24uCiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGNvbnN0YW50IGZ1bmN0aW9uLgogKiBAZXhhbXBsZQogKgogKiB2YXIgb2JqZWN0cyA9IF8udGltZXMoMiwgXy5jb25zdGFudCh7ICdhJzogMSB9KSk7CiAqCiAqIGNvbnNvbGUubG9nKG9iamVjdHMpOwogKiAvLyA9PiBbeyAnYSc6IDEgfSwgeyAnYSc6IDEgfV0KICoKICogY29uc29sZS5sb2cob2JqZWN0c1swXSA9PT0gb2JqZWN0c1sxXSk7CiAqIC8vID0+IHRydWUKICovCmZ1bmN0aW9uIGNvbnN0YW50JDEodmFsdWUpIHsKICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdmFsdWU7CiAgfTsKfQoKLyoqCiAqIEF0dGVtcHRzIHRvIGdldCBhIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgZnJvbSBgdGFza2Agbm8gbW9yZSB0aGFuIGB0aW1lc2AgdGltZXMKICogYmVmb3JlIHJldHVybmluZyBhbiBlcnJvci4gSWYgdGhlIHRhc2sgaXMgc3VjY2Vzc2Z1bCwgdGhlIGBjYWxsYmFja2Agd2lsbCBiZQogKiBwYXNzZWQgdGhlIHJlc3VsdCBvZiB0aGUgc3VjY2Vzc2Z1bCB0YXNrLiBJZiBhbGwgYXR0ZW1wdHMgZmFpbCwgdGhlIGNhbGxiYWNrCiAqIHdpbGwgYmUgcGFzc2VkIHRoZSBlcnJvciBhbmQgcmVzdWx0IChpZiBhbnkpIG9mIHRoZSBmaW5hbCBhdHRlbXB0LgogKgogKiBAbmFtZSByZXRyeQogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29udHJvbEZsb3cKICogQG1ldGhvZAogKiBAY2F0ZWdvcnkgQ29udHJvbCBGbG93CiAqIEBzZWUgW2FzeW5jLnJldHJ5YWJsZV17QGxpbmsgbW9kdWxlOkNvbnRyb2xGbG93LnJldHJ5YWJsZX0KICogQHBhcmFtIHtPYmplY3R8bnVtYmVyfSBbb3B0cyA9IHt0aW1lczogNSwgaW50ZXJ2YWw6IDB9fCA1XSAtIENhbiBiZSBlaXRoZXIgYW4KICogb2JqZWN0IHdpdGggYHRpbWVzYCBhbmQgYGludGVydmFsYCBvciBhIG51bWJlci4KICogKiBgdGltZXNgIC0gVGhlIG51bWJlciBvZiBhdHRlbXB0cyB0byBtYWtlIGJlZm9yZSBnaXZpbmcgdXAuICBUaGUgZGVmYXVsdAogKiAgIGlzIGA1YC4KICogKiBgaW50ZXJ2YWxgIC0gVGhlIHRpbWUgdG8gd2FpdCBiZXR3ZWVuIHJldHJpZXMsIGluIG1pbGxpc2Vjb25kcy4gIFRoZQogKiAgIGRlZmF1bHQgaXMgYDBgLiBUaGUgaW50ZXJ2YWwgbWF5IGFsc28gYmUgc3BlY2lmaWVkIGFzIGEgZnVuY3Rpb24gb2YgdGhlCiAqICAgcmV0cnkgY291bnQgKHNlZSBleGFtcGxlKS4KICogKiBgZXJyb3JGaWx0ZXJgIC0gQW4gb3B0aW9uYWwgc3luY2hyb25vdXMgZnVuY3Rpb24gdGhhdCBpcyBpbnZva2VkIG9uCiAqICAgZXJyb25lb3VzIHJlc3VsdC4gSWYgaXQgcmV0dXJucyBgdHJ1ZWAgdGhlIHJldHJ5IGF0dGVtcHRzIHdpbGwgY29udGludWU7CiAqICAgaWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYCB0aGUgcmV0cnkgZmxvdyBpcyBhYm9ydGVkIHdpdGggdGhlIGN1cnJlbnQKICogICBhdHRlbXB0J3MgZXJyb3IgYW5kIHJlc3VsdCBiZWluZyByZXR1cm5lZCB0byB0aGUgZmluYWwgY2FsbGJhY2suCiAqICAgSW52b2tlZCB3aXRoIChlcnIpLgogKiAqIElmIGBvcHRzYCBpcyBhIG51bWJlciwgdGhlIG51bWJlciBzcGVjaWZpZXMgdGhlIG51bWJlciBvZiB0aW1lcyB0byByZXRyeSwKICogICB3aXRoIHRoZSBkZWZhdWx0IGludGVydmFsIG9mIGAwYC4KICogQHBhcmFtIHtBc3luY0Z1bmN0aW9ufSB0YXNrIC0gQW4gYXN5bmMgZnVuY3Rpb24gdG8gcmV0cnkuCiAqIEludm9rZWQgd2l0aCAoY2FsbGJhY2spLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIC0gQW4gb3B0aW9uYWwgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIHdoZW4gdGhlCiAqIHRhc2sgaGFzIHN1Y2NlZWRlZCwgb3IgYWZ0ZXIgdGhlIGZpbmFsIGZhaWxlZCBhdHRlbXB0LiBJdCByZWNlaXZlcyB0aGUgYGVycmAKICogYW5kIGByZXN1bHRgIGFyZ3VtZW50cyBvZiB0aGUgbGFzdCBhdHRlbXB0IGF0IGNvbXBsZXRpbmcgdGhlIGB0YXNrYC4gSW52b2tlZAogKiB3aXRoIChlcnIsIHJlc3VsdHMpLgogKgogKiBAZXhhbXBsZQogKgogKiAvLyBUaGUgYHJldHJ5YCBmdW5jdGlvbiBjYW4gYmUgdXNlZCBhcyBhIHN0YW5kLWFsb25lIGNvbnRyb2wgZmxvdyBieSBwYXNzaW5nCiAqIC8vIGEgY2FsbGJhY2ssIGFzIHNob3duIGJlbG93OgogKgogKiAvLyB0cnkgY2FsbGluZyBhcGlNZXRob2QgMyB0aW1lcwogKiBhc3luYy5yZXRyeSgzLCBhcGlNZXRob2QsIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7CiAqICAgICAvLyBkbyBzb21ldGhpbmcgd2l0aCB0aGUgcmVzdWx0CiAqIH0pOwogKgogKiAvLyB0cnkgY2FsbGluZyBhcGlNZXRob2QgMyB0aW1lcywgd2FpdGluZyAyMDAgbXMgYmV0d2VlbiBlYWNoIHJldHJ5CiAqIGFzeW5jLnJldHJ5KHt0aW1lczogMywgaW50ZXJ2YWw6IDIwMH0sIGFwaU1ldGhvZCwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHsKICogICAgIC8vIGRvIHNvbWV0aGluZyB3aXRoIHRoZSByZXN1bHQKICogfSk7CiAqCiAqIC8vIHRyeSBjYWxsaW5nIGFwaU1ldGhvZCAxMCB0aW1lcyB3aXRoIGV4cG9uZW50aWFsIGJhY2tvZmYKICogLy8gKGkuZS4gaW50ZXJ2YWxzIG9mIDEwMCwgMjAwLCA0MDAsIDgwMCwgMTYwMCwgLi4uIG1pbGxpc2Vjb25kcykKICogYXN5bmMucmV0cnkoewogKiAgIHRpbWVzOiAxMCwKICogICBpbnRlcnZhbDogZnVuY3Rpb24ocmV0cnlDb3VudCkgewogKiAgICAgcmV0dXJuIDUwICogTWF0aC5wb3coMiwgcmV0cnlDb3VudCk7CiAqICAgfQogKiB9LCBhcGlNZXRob2QsIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7CiAqICAgICAvLyBkbyBzb21ldGhpbmcgd2l0aCB0aGUgcmVzdWx0CiAqIH0pOwogKgogKiAvLyB0cnkgY2FsbGluZyBhcGlNZXRob2QgdGhlIGRlZmF1bHQgNSB0aW1lcyBubyBkZWxheSBiZXR3ZWVuIGVhY2ggcmV0cnkKICogYXN5bmMucmV0cnkoYXBpTWV0aG9kLCBmdW5jdGlvbihlcnIsIHJlc3VsdCkgewogKiAgICAgLy8gZG8gc29tZXRoaW5nIHdpdGggdGhlIHJlc3VsdAogKiB9KTsKICoKICogLy8gdHJ5IGNhbGxpbmcgYXBpTWV0aG9kIG9ubHkgd2hlbiBlcnJvciBjb25kaXRpb24gc2F0aXNmaWVzLCBhbGwgb3RoZXIKICogLy8gZXJyb3JzIHdpbGwgYWJvcnQgdGhlIHJldHJ5IGNvbnRyb2wgZmxvdyBhbmQgcmV0dXJuIHRvIGZpbmFsIGNhbGxiYWNrCiAqIGFzeW5jLnJldHJ5KHsKICogICBlcnJvckZpbHRlcjogZnVuY3Rpb24oZXJyKSB7CiAqICAgICByZXR1cm4gZXJyLm1lc3NhZ2UgPT09ICdUZW1wb3JhcnkgZXJyb3InOyAvLyBvbmx5IHJldHJ5IG9uIGEgc3BlY2lmaWMgZXJyb3IKICogICB9CiAqIH0sIGFwaU1ldGhvZCwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHsKICogICAgIC8vIGRvIHNvbWV0aGluZyB3aXRoIHRoZSByZXN1bHQKICogfSk7CiAqCiAqIC8vIHRvIHJldHJ5IGluZGl2aWR1YWwgbWV0aG9kcyB0aGF0IGFyZSBub3QgYXMgcmVsaWFibGUgd2l0aGluIG90aGVyCiAqIC8vIGNvbnRyb2wgZmxvdyBmdW5jdGlvbnMsIHVzZSB0aGUgYHJldHJ5YWJsZWAgd3JhcHBlcjoKICogYXN5bmMuYXV0byh7CiAqICAgICB1c2VyczogYXBpLmdldFVzZXJzLmJpbmQoYXBpKSwKICogICAgIHBheW1lbnRzOiBhc3luYy5yZXRyeWFibGUoMywgYXBpLmdldFBheW1lbnRzLmJpbmQoYXBpKSkKICogfSwgZnVuY3Rpb24oZXJyLCByZXN1bHRzKSB7CiAqICAgICAvLyBkbyBzb21ldGhpbmcgd2l0aCB0aGUgcmVzdWx0cwogKiB9KTsKICoKICovCmZ1bmN0aW9uIHJldHJ5KG9wdHMsIHRhc2ssIGNhbGxiYWNrKSB7CiAgICB2YXIgREVGQVVMVF9USU1FUyA9IDU7CiAgICB2YXIgREVGQVVMVF9JTlRFUlZBTCA9IDA7CgogICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAgdGltZXM6IERFRkFVTFRfVElNRVMsCiAgICAgICAgaW50ZXJ2YWxGdW5jOiBjb25zdGFudCQxKERFRkFVTFRfSU5URVJWQUwpCiAgICB9OwoKICAgIGZ1bmN0aW9uIHBhcnNlVGltZXMoYWNjLCB0KSB7CiAgICAgICAgaWYgKHR5cGVvZiB0ID09PSAnb2JqZWN0JykgewogICAgICAgICAgICBhY2MudGltZXMgPSArdC50aW1lcyB8fCBERUZBVUxUX1RJTUVTOwoKICAgICAgICAgICAgYWNjLmludGVydmFsRnVuYyA9IHR5cGVvZiB0LmludGVydmFsID09PSAnZnVuY3Rpb24nID8KICAgICAgICAgICAgICAgIHQuaW50ZXJ2YWwgOgogICAgICAgICAgICAgICAgY29uc3RhbnQkMSgrdC5pbnRlcnZhbCB8fCBERUZBVUxUX0lOVEVSVkFMKTsKCiAgICAgICAgICAgIGFjYy5lcnJvckZpbHRlciA9IHQuZXJyb3JGaWx0ZXI7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHQgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIGFjYy50aW1lcyA9ICt0IHx8IERFRkFVTFRfVElNRVM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGFyZ3VtZW50cyBmb3IgYXN5bmMucmV0cnkiKTsKICAgICAgICB9CiAgICB9CgogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAzICYmIHR5cGVvZiBvcHRzID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgY2FsbGJhY2sgPSB0YXNrIHx8IG5vb3A7CiAgICAgICAgdGFzayA9IG9wdHM7CiAgICB9IGVsc2UgewogICAgICAgIHBhcnNlVGltZXMob3B0aW9ucywgb3B0cyk7CiAgICAgICAgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBub29wOwogICAgfQoKICAgIGlmICh0eXBlb2YgdGFzayAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiSW52YWxpZCBhcmd1bWVudHMgZm9yIGFzeW5jLnJldHJ5Iik7CiAgICB9CgogICAgdmFyIF90YXNrID0gd3JhcEFzeW5jKHRhc2spOwoKICAgIHZhciBhdHRlbXB0ID0gMTsKICAgIGZ1bmN0aW9uIHJldHJ5QXR0ZW1wdCgpIHsKICAgICAgICBfdGFzayhmdW5jdGlvbihlcnIpIHsKICAgICAgICAgICAgaWYgKGVyciAmJiBhdHRlbXB0KysgPCBvcHRpb25zLnRpbWVzICYmCiAgICAgICAgICAgICAgICAodHlwZW9mIG9wdGlvbnMuZXJyb3JGaWx0ZXIgIT0gJ2Z1bmN0aW9uJyB8fAogICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZXJyb3JGaWx0ZXIoZXJyKSkpIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQocmV0cnlBdHRlbXB0LCBvcHRpb25zLmludGVydmFsRnVuYyhhdHRlbXB0KSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseShudWxsLCBhcmd1bWVudHMpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CgogICAgcmV0cnlBdHRlbXB0KCk7Cn0KCi8qKgogKiBBIGNsb3NlIHJlbGF0aXZlIG9mIFtgcmV0cnlgXXtAbGluayBtb2R1bGU6Q29udHJvbEZsb3cucmV0cnl9LiAgVGhpcyBtZXRob2QKICogd3JhcHMgYSB0YXNrIGFuZCBtYWtlcyBpdCByZXRyeWFibGUsIHJhdGhlciB0aGFuIGltbWVkaWF0ZWx5IGNhbGxpbmcgaXQKICogd2l0aCByZXRyaWVzLgogKgogKiBAbmFtZSByZXRyeWFibGUKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbnRyb2xGbG93CiAqIEBtZXRob2QKICogQHNlZSBbYXN5bmMucmV0cnlde0BsaW5rIG1vZHVsZTpDb250cm9sRmxvdy5yZXRyeX0KICogQGNhdGVnb3J5IENvbnRyb2wgRmxvdwogKiBAcGFyYW0ge09iamVjdHxudW1iZXJ9IFtvcHRzID0ge3RpbWVzOiA1LCBpbnRlcnZhbDogMH18IDVdIC0gb3B0aW9uYWwKICogb3B0aW9ucywgZXhhY3RseSB0aGUgc2FtZSBhcyBmcm9tIGByZXRyeWAKICogQHBhcmFtIHtBc3luY0Z1bmN0aW9ufSB0YXNrIC0gdGhlIGFzeW5jaHJvbm91cyBmdW5jdGlvbiB0byB3cmFwLgogKiBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgcGFzc2VkIGFueSBhcmd1bWVudHMgcGFzc2VkIHRvIHRoZSByZXR1cm5lZCB3cmFwcGVyLgogKiBJbnZva2VkIHdpdGggKC4uLmFyZ3MsIGNhbGxiYWNrKS4KICogQHJldHVybnMge0FzeW5jRnVuY3Rpb259IFRoZSB3cmFwcGVkIGZ1bmN0aW9uLCB3aGljaCB3aGVuIGludm9rZWQsIHdpbGwKICogcmV0cnkgb24gYW4gZXJyb3IsIGJhc2VkIG9uIHRoZSBwYXJhbWV0ZXJzIHNwZWNpZmllZCBpbiBgb3B0c2AuCiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBhY2NlcHQgdGhlIHNhbWUgcGFyYW1ldGVycyBhcyBgdGFza2AuCiAqIEBleGFtcGxlCiAqCiAqIGFzeW5jLmF1dG8oewogKiAgICAgZGVwMTogYXN5bmMucmV0cnlhYmxlKDMsIGdldEZyb21GbGFreVNlcnZpY2UpLAogKiAgICAgcHJvY2VzczogWyJkZXAxIiwgYXN5bmMucmV0cnlhYmxlKDMsIGZ1bmN0aW9uIChyZXN1bHRzLCBjYikgewogKiAgICAgICAgIG1heWJlUHJvY2Vzc0RhdGEocmVzdWx0cy5kZXAxLCBjYik7CiAqICAgICB9KV0KICogfSwgY2FsbGJhY2spOwogKi8KdmFyIHJldHJ5YWJsZSA9IGZ1bmN0aW9uIChvcHRzLCB0YXNrKSB7CiAgICBpZiAoIXRhc2spIHsKICAgICAgICB0YXNrID0gb3B0czsKICAgICAgICBvcHRzID0gbnVsbDsKICAgIH0KICAgIHZhciBfdGFzayA9IHdyYXBBc3luYyh0YXNrKTsKICAgIHJldHVybiBpbml0aWFsUGFyYW1zKGZ1bmN0aW9uIChhcmdzLCBjYWxsYmFjaykgewogICAgICAgIGZ1bmN0aW9uIHRhc2tGbihjYikgewogICAgICAgICAgICBfdGFzay5hcHBseShudWxsLCBhcmdzLmNvbmNhdChjYikpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG9wdHMpIHJldHJ5KG9wdHMsIHRhc2tGbiwgY2FsbGJhY2spOwogICAgICAgIGVsc2UgcmV0cnkodGFza0ZuLCBjYWxsYmFjayk7CgogICAgfSk7Cn07CgovKioKICogUnVuIHRoZSBmdW5jdGlvbnMgaW4gdGhlIGB0YXNrc2AgY29sbGVjdGlvbiBpbiBzZXJpZXMsIGVhY2ggb25lIHJ1bm5pbmcgb25jZQogKiB0aGUgcHJldmlvdXMgZnVuY3Rpb24gaGFzIGNvbXBsZXRlZC4gSWYgYW55IGZ1bmN0aW9ucyBpbiB0aGUgc2VyaWVzIHBhc3MgYW4KICogZXJyb3IgdG8gaXRzIGNhbGxiYWNrLCBubyBtb3JlIGZ1bmN0aW9ucyBhcmUgcnVuLCBhbmQgYGNhbGxiYWNrYCBpcwogKiBpbW1lZGlhdGVseSBjYWxsZWQgd2l0aCB0aGUgdmFsdWUgb2YgdGhlIGVycm9yLiBPdGhlcndpc2UsIGBjYWxsYmFja2AKICogcmVjZWl2ZXMgYW4gYXJyYXkgb2YgcmVzdWx0cyB3aGVuIGB0YXNrc2AgaGF2ZSBjb21wbGV0ZWQuCiAqCiAqIEl0IGlzIGFsc28gcG9zc2libGUgdG8gdXNlIGFuIG9iamVjdCBpbnN0ZWFkIG9mIGFuIGFycmF5LiBFYWNoIHByb3BlcnR5IHdpbGwKICogYmUgcnVuIGFzIGEgZnVuY3Rpb24sIGFuZCB0aGUgcmVzdWx0cyB3aWxsIGJlIHBhc3NlZCB0byB0aGUgZmluYWwgYGNhbGxiYWNrYAogKiBhcyBhbiBvYmplY3QgaW5zdGVhZCBvZiBhbiBhcnJheS4gVGhpcyBjYW4gYmUgYSBtb3JlIHJlYWRhYmxlIHdheSBvZiBoYW5kbGluZwogKiAgcmVzdWx0cyBmcm9tIHtAbGluayBhc3luYy5zZXJpZXN9LgogKgogKiAqKk5vdGUqKiB0aGF0IHdoaWxlIG1hbnkgaW1wbGVtZW50YXRpb25zIHByZXNlcnZlIHRoZSBvcmRlciBvZiBvYmplY3QKICogcHJvcGVydGllcywgdGhlIFtFQ01BU2NyaXB0IExhbmd1YWdlIFNwZWNpZmljYXRpb25dKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi81LjEvI3NlYy04LjYpCiAqIGV4cGxpY2l0bHkgc3RhdGVzIHRoYXQKICoKICogPiBUaGUgbWVjaGFuaWNzIGFuZCBvcmRlciBvZiBlbnVtZXJhdGluZyB0aGUgcHJvcGVydGllcyBpcyBub3Qgc3BlY2lmaWVkLgogKgogKiBTbyBpZiB5b3UgcmVseSBvbiB0aGUgb3JkZXIgaW4gd2hpY2ggeW91ciBzZXJpZXMgb2YgZnVuY3Rpb25zIGFyZSBleGVjdXRlZCwKICogYW5kIHdhbnQgdGhpcyB0byB3b3JrIG9uIGFsbCBwbGF0Zm9ybXMsIGNvbnNpZGVyIHVzaW5nIGFuIGFycmF5LgogKgogKiBAbmFtZSBzZXJpZXMKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbnRyb2xGbG93CiAqIEBtZXRob2QKICogQGNhdGVnb3J5IENvbnRyb2wgRmxvdwogKiBAcGFyYW0ge0FycmF5fEl0ZXJhYmxlfE9iamVjdH0gdGFza3MgLSBBIGNvbGxlY3Rpb24gY29udGFpbmluZwogKiBbYXN5bmMgZnVuY3Rpb25zXXtAbGluayBBc3luY0Z1bmN0aW9ufSB0byBydW4gaW4gc2VyaWVzLgogKiBFYWNoIGZ1bmN0aW9uIGNhbiBjb21wbGV0ZSB3aXRoIGFueSBudW1iZXIgb2Ygb3B0aW9uYWwgYHJlc3VsdGAgdmFsdWVzLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIC0gQW4gb3B0aW9uYWwgY2FsbGJhY2sgdG8gcnVuIG9uY2UgYWxsIHRoZQogKiBmdW5jdGlvbnMgaGF2ZSBjb21wbGV0ZWQuIFRoaXMgZnVuY3Rpb24gZ2V0cyBhIHJlc3VsdHMgYXJyYXkgKG9yIG9iamVjdCkKICogY29udGFpbmluZyBhbGwgdGhlIHJlc3VsdCBhcmd1bWVudHMgcGFzc2VkIHRvIHRoZSBgdGFza2AgY2FsbGJhY2tzLiBJbnZva2VkCiAqIHdpdGggKGVyciwgcmVzdWx0KS4KICogQGV4YW1wbGUKICogYXN5bmMuc2VyaWVzKFsKICogICAgIGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAqICAgICAgICAgLy8gZG8gc29tZSBzdHVmZiAuLi4KICogICAgICAgICBjYWxsYmFjayhudWxsLCAnb25lJyk7CiAqICAgICB9LAogKiAgICAgZnVuY3Rpb24oY2FsbGJhY2spIHsKICogICAgICAgICAvLyBkbyBzb21lIG1vcmUgc3R1ZmYgLi4uCiAqICAgICAgICAgY2FsbGJhY2sobnVsbCwgJ3R3bycpOwogKiAgICAgfQogKiBdLAogKiAvLyBvcHRpb25hbCBjYWxsYmFjawogKiBmdW5jdGlvbihlcnIsIHJlc3VsdHMpIHsKICogICAgIC8vIHJlc3VsdHMgaXMgbm93IGVxdWFsIHRvIFsnb25lJywgJ3R3byddCiAqIH0pOwogKgogKiBhc3luYy5zZXJpZXMoewogKiAgICAgb25lOiBmdW5jdGlvbihjYWxsYmFjaykgewogKiAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAqICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIDEpOwogKiAgICAgICAgIH0sIDIwMCk7CiAqICAgICB9LAogKiAgICAgdHdvOiBmdW5jdGlvbihjYWxsYmFjayl7CiAqICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICogICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgMik7CiAqICAgICAgICAgfSwgMTAwKTsKICogICAgIH0KICogfSwgZnVuY3Rpb24oZXJyLCByZXN1bHRzKSB7CiAqICAgICAvLyByZXN1bHRzIGlzIG5vdyBlcXVhbCB0bzoge29uZTogMSwgdHdvOiAyfQogKiB9KTsKICovCmZ1bmN0aW9uIHNlcmllcyh0YXNrcywgY2FsbGJhY2spIHsKICAgIF9wYXJhbGxlbChlYWNoT2ZTZXJpZXMsIHRhc2tzLCBjYWxsYmFjayk7Cn0KCi8qKgogKiBSZXR1cm5zIGB0cnVlYCBpZiBhdCBsZWFzdCBvbmUgZWxlbWVudCBpbiB0aGUgYGNvbGxgIHNhdGlzZmllcyBhbiBhc3luYyB0ZXN0LgogKiBJZiBhbnkgaXRlcmF0ZWUgY2FsbCByZXR1cm5zIGB0cnVlYCwgdGhlIG1haW4gYGNhbGxiYWNrYCBpcyBpbW1lZGlhdGVseQogKiBjYWxsZWQuCiAqCiAqIEBuYW1lIHNvbWUKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbGxlY3Rpb25zCiAqIEBtZXRob2QKICogQGFsaWFzIGFueQogKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbgogKiBAcGFyYW0ge0FycmF5fEl0ZXJhYmxlfE9iamVjdH0gY29sbCAtIEEgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7QXN5bmNGdW5jdGlvbn0gaXRlcmF0ZWUgLSBBbiBhc3luYyB0cnV0aCB0ZXN0IHRvIGFwcGx5IHRvIGVhY2ggaXRlbQogKiBpbiB0aGUgY29sbGVjdGlvbnMgaW4gcGFyYWxsZWwuCiAqIFRoZSBpdGVyYXRlZSBzaG91bGQgY29tcGxldGUgd2l0aCBhIGJvb2xlYW4gYHJlc3VsdGAgdmFsdWUuCiAqIEludm9rZWQgd2l0aCAoaXRlbSwgY2FsbGJhY2spLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIC0gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYXMgc29vbiBhcyBhbnkKICogaXRlcmF0ZWUgcmV0dXJucyBgdHJ1ZWAsIG9yIGFmdGVyIGFsbCB0aGUgaXRlcmF0ZWUgZnVuY3Rpb25zIGhhdmUgZmluaXNoZWQuCiAqIFJlc3VsdCB3aWxsIGJlIGVpdGhlciBgdHJ1ZWAgb3IgYGZhbHNlYCBkZXBlbmRpbmcgb24gdGhlIHZhbHVlcyBvZiB0aGUgYXN5bmMKICogdGVzdHMuIEludm9rZWQgd2l0aCAoZXJyLCByZXN1bHQpLgogKiBAZXhhbXBsZQogKgogKiBhc3luYy5zb21lKFsnZmlsZTEnLCdmaWxlMicsJ2ZpbGUzJ10sIGZ1bmN0aW9uKGZpbGVQYXRoLCBjYWxsYmFjaykgewogKiAgICAgZnMuYWNjZXNzKGZpbGVQYXRoLCBmdW5jdGlvbihlcnIpIHsKICogICAgICAgICBjYWxsYmFjayhudWxsLCAhZXJyKQogKiAgICAgfSk7CiAqIH0sIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7CiAqICAgICAvLyBpZiByZXN1bHQgaXMgdHJ1ZSB0aGVuIGF0IGxlYXN0IG9uZSBvZiB0aGUgZmlsZXMgZXhpc3RzCiAqIH0pOwogKi8KdmFyIHNvbWUgPSBkb1BhcmFsbGVsKF9jcmVhdGVUZXN0ZXIoQm9vbGVhbiwgaWRlbnRpdHkpKTsKCi8qKgogKiBUaGUgc2FtZSBhcyBbYHNvbWVgXXtAbGluayBtb2R1bGU6Q29sbGVjdGlvbnMuc29tZX0gYnV0IHJ1bnMgYSBtYXhpbXVtIG9mIGBsaW1pdGAgYXN5bmMgb3BlcmF0aW9ucyBhdCBhIHRpbWUuCiAqCiAqIEBuYW1lIHNvbWVMaW1pdAogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29sbGVjdGlvbnMKICogQG1ldGhvZAogKiBAc2VlIFthc3luYy5zb21lXXtAbGluayBtb2R1bGU6Q29sbGVjdGlvbnMuc29tZX0KICogQGFsaWFzIGFueUxpbWl0CiAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uCiAqIEBwYXJhbSB7QXJyYXl8SXRlcmFibGV8T2JqZWN0fSBjb2xsIC0gQSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci4KICogQHBhcmFtIHtudW1iZXJ9IGxpbWl0IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGFzeW5jIG9wZXJhdGlvbnMgYXQgYSB0aW1lLgogKiBAcGFyYW0ge0FzeW5jRnVuY3Rpb259IGl0ZXJhdGVlIC0gQW4gYXN5bmMgdHJ1dGggdGVzdCB0byBhcHBseSB0byBlYWNoIGl0ZW0KICogaW4gdGhlIGNvbGxlY3Rpb25zIGluIHBhcmFsbGVsLgogKiBUaGUgaXRlcmF0ZWUgc2hvdWxkIGNvbXBsZXRlIHdpdGggYSBib29sZWFuIGByZXN1bHRgIHZhbHVlLgogKiBJbnZva2VkIHdpdGggKGl0ZW0sIGNhbGxiYWNrKS4KICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSAtIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIGFzIHNvb24gYXMgYW55CiAqIGl0ZXJhdGVlIHJldHVybnMgYHRydWVgLCBvciBhZnRlciBhbGwgdGhlIGl0ZXJhdGVlIGZ1bmN0aW9ucyBoYXZlIGZpbmlzaGVkLgogKiBSZXN1bHQgd2lsbCBiZSBlaXRoZXIgYHRydWVgIG9yIGBmYWxzZWAgZGVwZW5kaW5nIG9uIHRoZSB2YWx1ZXMgb2YgdGhlIGFzeW5jCiAqIHRlc3RzLiBJbnZva2VkIHdpdGggKGVyciwgcmVzdWx0KS4KICovCnZhciBzb21lTGltaXQgPSBkb1BhcmFsbGVsTGltaXQoX2NyZWF0ZVRlc3RlcihCb29sZWFuLCBpZGVudGl0eSkpOwoKLyoqCiAqIFRoZSBzYW1lIGFzIFtgc29tZWBde0BsaW5rIG1vZHVsZTpDb2xsZWN0aW9ucy5zb21lfSBidXQgcnVucyBvbmx5IGEgc2luZ2xlIGFzeW5jIG9wZXJhdGlvbiBhdCBhIHRpbWUuCiAqCiAqIEBuYW1lIHNvbWVTZXJpZXMKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbGxlY3Rpb25zCiAqIEBtZXRob2QKICogQHNlZSBbYXN5bmMuc29tZV17QGxpbmsgbW9kdWxlOkNvbGxlY3Rpb25zLnNvbWV9CiAqIEBhbGlhcyBhbnlTZXJpZXMKICogQGNhdGVnb3J5IENvbGxlY3Rpb24KICogQHBhcmFtIHtBcnJheXxJdGVyYWJsZXxPYmplY3R9IGNvbGwgLSBBIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLgogKiBAcGFyYW0ge0FzeW5jRnVuY3Rpb259IGl0ZXJhdGVlIC0gQW4gYXN5bmMgdHJ1dGggdGVzdCB0byBhcHBseSB0byBlYWNoIGl0ZW0KICogaW4gdGhlIGNvbGxlY3Rpb25zIGluIHNlcmllcy4KICogVGhlIGl0ZXJhdGVlIHNob3VsZCBjb21wbGV0ZSB3aXRoIGEgYm9vbGVhbiBgcmVzdWx0YCB2YWx1ZS4KICogSW52b2tlZCB3aXRoIChpdGVtLCBjYWxsYmFjaykuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gLSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhcyBzb29uIGFzIGFueQogKiBpdGVyYXRlZSByZXR1cm5zIGB0cnVlYCwgb3IgYWZ0ZXIgYWxsIHRoZSBpdGVyYXRlZSBmdW5jdGlvbnMgaGF2ZSBmaW5pc2hlZC4KICogUmVzdWx0IHdpbGwgYmUgZWl0aGVyIGB0cnVlYCBvciBgZmFsc2VgIGRlcGVuZGluZyBvbiB0aGUgdmFsdWVzIG9mIHRoZSBhc3luYwogKiB0ZXN0cy4gSW52b2tlZCB3aXRoIChlcnIsIHJlc3VsdCkuCiAqLwp2YXIgc29tZVNlcmllcyA9IGRvTGltaXQoc29tZUxpbWl0LCAxKTsKCi8qKgogKiBTb3J0cyBhIGxpc3QgYnkgdGhlIHJlc3VsdHMgb2YgcnVubmluZyBlYWNoIGBjb2xsYCB2YWx1ZSB0aHJvdWdoIGFuIGFzeW5jCiAqIGBpdGVyYXRlZWAuCiAqCiAqIEBuYW1lIHNvcnRCeQogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29sbGVjdGlvbnMKICogQG1ldGhvZAogKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbgogKiBAcGFyYW0ge0FycmF5fEl0ZXJhYmxlfE9iamVjdH0gY29sbCAtIEEgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7QXN5bmNGdW5jdGlvbn0gaXRlcmF0ZWUgLSBBbiBhc3luYyBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIGl0ZW0gaW4KICogYGNvbGxgLgogKiBUaGUgaXRlcmF0ZWUgc2hvdWxkIGNvbXBsZXRlIHdpdGggYSB2YWx1ZSB0byB1c2UgYXMgdGhlIHNvcnQgY3JpdGVyaWEgYXMKICogaXRzIGByZXN1bHRgLgogKiBJbnZva2VkIHdpdGggKGl0ZW0sIGNhbGxiYWNrKS4KICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBhbGwgdGhlCiAqIGBpdGVyYXRlZWAgZnVuY3Rpb25zIGhhdmUgZmluaXNoZWQsIG9yIGFuIGVycm9yIG9jY3Vycy4gUmVzdWx0cyBpcyB0aGUgaXRlbXMKICogZnJvbSB0aGUgb3JpZ2luYWwgYGNvbGxgIHNvcnRlZCBieSB0aGUgdmFsdWVzIHJldHVybmVkIGJ5IHRoZSBgaXRlcmF0ZWVgCiAqIGNhbGxzLiBJbnZva2VkIHdpdGggKGVyciwgcmVzdWx0cykuCiAqIEBleGFtcGxlCiAqCiAqIGFzeW5jLnNvcnRCeShbJ2ZpbGUxJywnZmlsZTInLCdmaWxlMyddLCBmdW5jdGlvbihmaWxlLCBjYWxsYmFjaykgewogKiAgICAgZnMuc3RhdChmaWxlLCBmdW5jdGlvbihlcnIsIHN0YXRzKSB7CiAqICAgICAgICAgY2FsbGJhY2soZXJyLCBzdGF0cy5tdGltZSk7CiAqICAgICB9KTsKICogfSwgZnVuY3Rpb24oZXJyLCByZXN1bHRzKSB7CiAqICAgICAvLyByZXN1bHRzIGlzIG5vdyB0aGUgb3JpZ2luYWwgYXJyYXkgb2YgZmlsZXMgc29ydGVkIGJ5CiAqICAgICAvLyBtb2RpZmllZCBkYXRlCiAqIH0pOwogKgogKiAvLyBCeSBtb2RpZnlpbmcgdGhlIGNhbGxiYWNrIHBhcmFtZXRlciB0aGUKICogLy8gc29ydGluZyBvcmRlciBjYW4gYmUgaW5mbHVlbmNlZDoKICoKICogLy8gYXNjZW5kaW5nIG9yZGVyCiAqIGFzeW5jLnNvcnRCeShbMSw5LDMsNV0sIGZ1bmN0aW9uKHgsIGNhbGxiYWNrKSB7CiAqICAgICBjYWxsYmFjayhudWxsLCB4KTsKICogfSwgZnVuY3Rpb24oZXJyLHJlc3VsdCkgewogKiAgICAgLy8gcmVzdWx0IGNhbGxiYWNrCiAqIH0pOwogKgogKiAvLyBkZXNjZW5kaW5nIG9yZGVyCiAqIGFzeW5jLnNvcnRCeShbMSw5LDMsNV0sIGZ1bmN0aW9uKHgsIGNhbGxiYWNrKSB7CiAqICAgICBjYWxsYmFjayhudWxsLCB4Ki0xKTsgICAgLy88LSB4Ki0xIGluc3RlYWQgb2YgeCwgdHVybnMgdGhlIG9yZGVyIGFyb3VuZAogKiB9LCBmdW5jdGlvbihlcnIscmVzdWx0KSB7CiAqICAgICAvLyByZXN1bHQgY2FsbGJhY2sKICogfSk7CiAqLwpmdW5jdGlvbiBzb3J0QnkgKGNvbGwsIGl0ZXJhdGVlLCBjYWxsYmFjaykgewogICAgdmFyIF9pdGVyYXRlZSA9IHdyYXBBc3luYyhpdGVyYXRlZSk7CiAgICBtYXAoY29sbCwgZnVuY3Rpb24gKHgsIGNhbGxiYWNrKSB7CiAgICAgICAgX2l0ZXJhdGVlKHgsIGZ1bmN0aW9uIChlcnIsIGNyaXRlcmlhKSB7CiAgICAgICAgICAgIGlmIChlcnIpIHJldHVybiBjYWxsYmFjayhlcnIpOwogICAgICAgICAgICBjYWxsYmFjayhudWxsLCB7dmFsdWU6IHgsIGNyaXRlcmlhOiBjcml0ZXJpYX0pOwogICAgICAgIH0pOwogICAgfSwgZnVuY3Rpb24gKGVyciwgcmVzdWx0cykgewogICAgICAgIGlmIChlcnIpIHJldHVybiBjYWxsYmFjayhlcnIpOwogICAgICAgIGNhbGxiYWNrKG51bGwsIGFycmF5TWFwKHJlc3VsdHMuc29ydChjb21wYXJhdG9yKSwgYmFzZVByb3BlcnR5KCd2YWx1ZScpKSk7CiAgICB9KTsKCiAgICBmdW5jdGlvbiBjb21wYXJhdG9yKGxlZnQsIHJpZ2h0KSB7CiAgICAgICAgdmFyIGEgPSBsZWZ0LmNyaXRlcmlhLCBiID0gcmlnaHQuY3JpdGVyaWE7CiAgICAgICAgcmV0dXJuIGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiAwOwogICAgfQp9CgovKioKICogU2V0cyBhIHRpbWUgbGltaXQgb24gYW4gYXN5bmNocm9ub3VzIGZ1bmN0aW9uLiBJZiB0aGUgZnVuY3Rpb24gZG9lcyBub3QgY2FsbAogKiBpdHMgY2FsbGJhY2sgd2l0aGluIHRoZSBzcGVjaWZpZWQgbWlsbGlzZWNvbmRzLCBpdCB3aWxsIGJlIGNhbGxlZCB3aXRoIGEKICogdGltZW91dCBlcnJvci4gVGhlIGNvZGUgcHJvcGVydHkgZm9yIHRoZSBlcnJvciBvYmplY3Qgd2lsbCBiZSBgJ0VUSU1FRE9VVCdgLgogKgogKiBAbmFtZSB0aW1lb3V0CiAqIEBzdGF0aWMKICogQG1lbWJlck9mIG1vZHVsZTpVdGlscwogKiBAbWV0aG9kCiAqIEBjYXRlZ29yeSBVdGlsCiAqIEBwYXJhbSB7QXN5bmNGdW5jdGlvbn0gYXN5bmNGbiAtIFRoZSBhc3luYyBmdW5jdGlvbiB0byBsaW1pdCBpbiB0aW1lLgogKiBAcGFyYW0ge251bWJlcn0gbWlsbGlzZWNvbmRzIC0gVGhlIHNwZWNpZmllZCB0aW1lIGxpbWl0LgogKiBAcGFyYW0geyp9IFtpbmZvXSAtIEFueSB2YXJpYWJsZSB5b3Ugd2FudCBhdHRhY2hlZCAoYHN0cmluZ2AsIGBvYmplY3RgLCBldGMpCiAqIHRvIHRpbWVvdXQgRXJyb3IgZm9yIG1vcmUgaW5mb3JtYXRpb24uLgogKiBAcmV0dXJucyB7QXN5bmNGdW5jdGlvbn0gUmV0dXJucyBhIHdyYXBwZWQgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB3aXRoIGFueQogKiBvZiB0aGUgY29udHJvbCBmbG93IGZ1bmN0aW9ucy4KICogSW52b2tlIHRoaXMgZnVuY3Rpb24gd2l0aCB0aGUgc2FtZSBwYXJhbWV0ZXJzIGFzIHlvdSB3b3VsZCBgYXN5bmNGdW5jYC4KICogQGV4YW1wbGUKICoKICogZnVuY3Rpb24gbXlGdW5jdGlvbihmb28sIGNhbGxiYWNrKSB7CiAqICAgICBkb0FzeW5jVGFzayhmb28sIGZ1bmN0aW9uKGVyciwgZGF0YSkgewogKiAgICAgICAgIC8vIGhhbmRsZSBlcnJvcnMKICogICAgICAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKTsKICoKICogICAgICAgICAvLyBkbyBzb21lIHN0dWZmIC4uLgogKgogKiAgICAgICAgIC8vIHJldHVybiBwcm9jZXNzZWQgZGF0YQogKiAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBkYXRhKTsKICogICAgIH0pOwogKiB9CiAqCiAqIHZhciB3cmFwcGVkID0gYXN5bmMudGltZW91dChteUZ1bmN0aW9uLCAxMDAwKTsKICoKICogLy8gY2FsbCBgd3JhcHBlZGAgYXMgeW91IHdvdWxkIGBteUZ1bmN0aW9uYAogKiB3cmFwcGVkKHsgYmFyOiAnYmFyJyB9LCBmdW5jdGlvbihlcnIsIGRhdGEpIHsKICogICAgIC8vIGlmIGBteUZ1bmN0aW9uYCB0YWtlcyA8IDEwMDAgbXMgdG8gZXhlY3V0ZSwgYGVycmAKICogICAgIC8vIGFuZCBgZGF0YWAgd2lsbCBoYXZlIHRoZWlyIGV4cGVjdGVkIHZhbHVlcwogKgogKiAgICAgLy8gZWxzZSBgZXJyYCB3aWxsIGJlIGFuIEVycm9yIHdpdGggdGhlIGNvZGUgJ0VUSU1FRE9VVCcKICogfSk7CiAqLwpmdW5jdGlvbiB0aW1lb3V0KGFzeW5jRm4sIG1pbGxpc2Vjb25kcywgaW5mbykgewogICAgdmFyIGZuID0gd3JhcEFzeW5jKGFzeW5jRm4pOwoKICAgIHJldHVybiBpbml0aWFsUGFyYW1zKGZ1bmN0aW9uIChhcmdzLCBjYWxsYmFjaykgewogICAgICAgIHZhciB0aW1lZE91dCA9IGZhbHNlOwogICAgICAgIHZhciB0aW1lcjsKCiAgICAgICAgZnVuY3Rpb24gdGltZW91dENhbGxiYWNrKCkgewogICAgICAgICAgICB2YXIgbmFtZSA9IGFzeW5jRm4ubmFtZSB8fCAnYW5vbnltb3VzJzsKICAgICAgICAgICAgdmFyIGVycm9yICA9IG5ldyBFcnJvcignQ2FsbGJhY2sgZnVuY3Rpb24gIicgKyBuYW1lICsgJyIgdGltZWQgb3V0LicpOwogICAgICAgICAgICBlcnJvci5jb2RlID0gJ0VUSU1FRE9VVCc7CiAgICAgICAgICAgIGlmIChpbmZvKSB7CiAgICAgICAgICAgICAgICBlcnJvci5pbmZvID0gaW5mbzsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aW1lZE91dCA9IHRydWU7CiAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTsKICAgICAgICB9CgogICAgICAgIGFyZ3MucHVzaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICghdGltZWRPdXQpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIC8vIHNldHVwIHRpbWVyIGFuZCBjYWxsIG9yaWdpbmFsIGZ1bmN0aW9uCiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KHRpbWVvdXRDYWxsYmFjaywgbWlsbGlzZWNvbmRzKTsKICAgICAgICBmbi5hcHBseShudWxsLCBhcmdzKTsKICAgIH0pOwp9CgovKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovCnZhciBuYXRpdmVDZWlsID0gTWF0aC5jZWlsOwp2YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXg7CgovKioKICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucmFuZ2VgIGFuZCBgXy5yYW5nZVJpZ2h0YCB3aGljaCBkb2Vzbid0CiAqIGNvZXJjZSBhcmd1bWVudHMuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCBUaGUgc3RhcnQgb2YgdGhlIHJhbmdlLgogKiBAcGFyYW0ge251bWJlcn0gZW5kIFRoZSBlbmQgb2YgdGhlIHJhbmdlLgogKiBAcGFyYW0ge251bWJlcn0gc3RlcCBUaGUgdmFsdWUgdG8gaW5jcmVtZW50IG9yIGRlY3JlbWVudCBieS4KICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuCiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcmFuZ2Ugb2YgbnVtYmVycy4KICovCmZ1bmN0aW9uIGJhc2VSYW5nZShzdGFydCwgZW5kLCBzdGVwLCBmcm9tUmlnaHQpIHsKICB2YXIgaW5kZXggPSAtMSwKICAgICAgbGVuZ3RoID0gbmF0aXZlTWF4KG5hdGl2ZUNlaWwoKGVuZCAtIHN0YXJ0KSAvIChzdGVwIHx8IDEpKSwgMCksCiAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7CgogIHdoaWxlIChsZW5ndGgtLSkgewogICAgcmVzdWx0W2Zyb21SaWdodCA/IGxlbmd0aCA6ICsraW5kZXhdID0gc3RhcnQ7CiAgICBzdGFydCArPSBzdGVwOwogIH0KICByZXR1cm4gcmVzdWx0Owp9CgovKioKICogVGhlIHNhbWUgYXMgW3RpbWVzXXtAbGluayBtb2R1bGU6Q29udHJvbEZsb3cudGltZXN9IGJ1dCBydW5zIGEgbWF4aW11bSBvZiBgbGltaXRgIGFzeW5jIG9wZXJhdGlvbnMgYXQgYQogKiB0aW1lLgogKgogKiBAbmFtZSB0aW1lc0xpbWl0CiAqIEBzdGF0aWMKICogQG1lbWJlck9mIG1vZHVsZTpDb250cm9sRmxvdwogKiBAbWV0aG9kCiAqIEBzZWUgW2FzeW5jLnRpbWVzXXtAbGluayBtb2R1bGU6Q29udHJvbEZsb3cudGltZXN9CiAqIEBjYXRlZ29yeSBDb250cm9sIEZsb3cKICogQHBhcmFtIHtudW1iZXJ9IGNvdW50IC0gVGhlIG51bWJlciBvZiB0aW1lcyB0byBydW4gdGhlIGZ1bmN0aW9uLgogKiBAcGFyYW0ge251bWJlcn0gbGltaXQgLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgYXN5bmMgb3BlcmF0aW9ucyBhdCBhIHRpbWUuCiAqIEBwYXJhbSB7QXN5bmNGdW5jdGlvbn0gaXRlcmF0ZWUgLSBUaGUgYXN5bmMgZnVuY3Rpb24gdG8gY2FsbCBgbmAgdGltZXMuCiAqIEludm9rZWQgd2l0aCB0aGUgaXRlcmF0aW9uIGluZGV4IGFuZCBhIGNhbGxiYWNrOiAobiwgbmV4dCkuCiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gc2VlIFthc3luYy5tYXBde0BsaW5rIG1vZHVsZTpDb2xsZWN0aW9ucy5tYXB9LgogKi8KZnVuY3Rpb24gdGltZUxpbWl0KGNvdW50LCBsaW1pdCwgaXRlcmF0ZWUsIGNhbGxiYWNrKSB7CiAgICB2YXIgX2l0ZXJhdGVlID0gd3JhcEFzeW5jKGl0ZXJhdGVlKTsKICAgIG1hcExpbWl0KGJhc2VSYW5nZSgwLCBjb3VudCwgMSksIGxpbWl0LCBfaXRlcmF0ZWUsIGNhbGxiYWNrKTsKfQoKLyoqCiAqIENhbGxzIHRoZSBgaXRlcmF0ZWVgIGZ1bmN0aW9uIGBuYCB0aW1lcywgYW5kIGFjY3VtdWxhdGVzIHJlc3VsdHMgaW4gdGhlIHNhbWUKICogbWFubmVyIHlvdSB3b3VsZCB1c2Ugd2l0aCBbbWFwXXtAbGluayBtb2R1bGU6Q29sbGVjdGlvbnMubWFwfS4KICoKICogQG5hbWUgdGltZXMKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbnRyb2xGbG93CiAqIEBtZXRob2QKICogQHNlZSBbYXN5bmMubWFwXXtAbGluayBtb2R1bGU6Q29sbGVjdGlvbnMubWFwfQogKiBAY2F0ZWdvcnkgQ29udHJvbCBGbG93CiAqIEBwYXJhbSB7bnVtYmVyfSBuIC0gVGhlIG51bWJlciBvZiB0aW1lcyB0byBydW4gdGhlIGZ1bmN0aW9uLgogKiBAcGFyYW0ge0FzeW5jRnVuY3Rpb259IGl0ZXJhdGVlIC0gVGhlIGFzeW5jIGZ1bmN0aW9uIHRvIGNhbGwgYG5gIHRpbWVzLgogKiBJbnZva2VkIHdpdGggdGhlIGl0ZXJhdGlvbiBpbmRleCBhbmQgYSBjYWxsYmFjazogKG4sIG5leHQpLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIHNlZSB7QGxpbmsgbW9kdWxlOkNvbGxlY3Rpb25zLm1hcH0uCiAqIEBleGFtcGxlCiAqCiAqIC8vIFByZXRlbmQgdGhpcyBpcyBzb21lIGNvbXBsaWNhdGVkIGFzeW5jIGZhY3RvcnkKICogdmFyIGNyZWF0ZVVzZXIgPSBmdW5jdGlvbihpZCwgY2FsbGJhY2spIHsKICogICAgIGNhbGxiYWNrKG51bGwsIHsKICogICAgICAgICBpZDogJ3VzZXInICsgaWQKICogICAgIH0pOwogKiB9OwogKgogKiAvLyBnZW5lcmF0ZSA1IHVzZXJzCiAqIGFzeW5jLnRpbWVzKDUsIGZ1bmN0aW9uKG4sIG5leHQpIHsKICogICAgIGNyZWF0ZVVzZXIobiwgZnVuY3Rpb24oZXJyLCB1c2VyKSB7CiAqICAgICAgICAgbmV4dChlcnIsIHVzZXIpOwogKiAgICAgfSk7CiAqIH0sIGZ1bmN0aW9uKGVyciwgdXNlcnMpIHsKICogICAgIC8vIHdlIHNob3VsZCBub3cgaGF2ZSA1IHVzZXJzCiAqIH0pOwogKi8KdmFyIHRpbWVzID0gZG9MaW1pdCh0aW1lTGltaXQsIEluZmluaXR5KTsKCi8qKgogKiBUaGUgc2FtZSBhcyBbdGltZXNde0BsaW5rIG1vZHVsZTpDb250cm9sRmxvdy50aW1lc30gYnV0IHJ1bnMgb25seSBhIHNpbmdsZSBhc3luYyBvcGVyYXRpb24gYXQgYSB0aW1lLgogKgogKiBAbmFtZSB0aW1lc1NlcmllcwogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBtb2R1bGU6Q29udHJvbEZsb3cKICogQG1ldGhvZAogKiBAc2VlIFthc3luYy50aW1lc117QGxpbmsgbW9kdWxlOkNvbnRyb2xGbG93LnRpbWVzfQogKiBAY2F0ZWdvcnkgQ29udHJvbCBGbG93CiAqIEBwYXJhbSB7bnVtYmVyfSBuIC0gVGhlIG51bWJlciBvZiB0aW1lcyB0byBydW4gdGhlIGZ1bmN0aW9uLgogKiBAcGFyYW0ge0FzeW5jRnVuY3Rpb259IGl0ZXJhdGVlIC0gVGhlIGFzeW5jIGZ1bmN0aW9uIHRvIGNhbGwgYG5gIHRpbWVzLgogKiBJbnZva2VkIHdpdGggdGhlIGl0ZXJhdGlvbiBpbmRleCBhbmQgYSBjYWxsYmFjazogKG4sIG5leHQpLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIHNlZSB7QGxpbmsgbW9kdWxlOkNvbGxlY3Rpb25zLm1hcH0uCiAqLwp2YXIgdGltZXNTZXJpZXMgPSBkb0xpbWl0KHRpbWVMaW1pdCwgMSk7CgovKioKICogQSByZWxhdGl2ZSBvZiBgcmVkdWNlYC4gIFRha2VzIGFuIE9iamVjdCBvciBBcnJheSwgYW5kIGl0ZXJhdGVzIG92ZXIgZWFjaAogKiBlbGVtZW50IGluIHNlcmllcywgZWFjaCBzdGVwIHBvdGVudGlhbGx5IG11dGF0aW5nIGFuIGBhY2N1bXVsYXRvcmAgdmFsdWUuCiAqIFRoZSB0eXBlIG9mIHRoZSBhY2N1bXVsYXRvciBkZWZhdWx0cyB0byB0aGUgdHlwZSBvZiBjb2xsZWN0aW9uIHBhc3NlZCBpbi4KICoKICogQG5hbWUgdHJhbnNmb3JtCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIG1vZHVsZTpDb2xsZWN0aW9ucwogKiBAbWV0aG9kCiAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uCiAqIEBwYXJhbSB7QXJyYXl8SXRlcmFibGV8T2JqZWN0fSBjb2xsIC0gQSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci4KICogQHBhcmFtIHsqfSBbYWNjdW11bGF0b3JdIC0gVGhlIGluaXRpYWwgc3RhdGUgb2YgdGhlIHRyYW5zZm9ybS4gIElmIG9taXR0ZWQsCiAqIGl0IHdpbGwgZGVmYXVsdCB0byBhbiBlbXB0eSBPYmplY3Qgb3IgQXJyYXksIGRlcGVuZGluZyBvbiB0aGUgdHlwZSBvZiBgY29sbGAKICogQHBhcmFtIHtBc3luY0Z1bmN0aW9ufSBpdGVyYXRlZSAtIEEgZnVuY3Rpb24gYXBwbGllZCB0byBlYWNoIGl0ZW0gaW4gdGhlCiAqIGNvbGxlY3Rpb24gdGhhdCBwb3RlbnRpYWxseSBtb2RpZmllcyB0aGUgYWNjdW11bGF0b3IuCiAqIEludm9rZWQgd2l0aCAoYWNjdW11bGF0b3IsIGl0ZW0sIGtleSwgY2FsbGJhY2spLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIC0gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgYWxsIHRoZQogKiBgaXRlcmF0ZWVgIGZ1bmN0aW9ucyBoYXZlIGZpbmlzaGVkLiBSZXN1bHQgaXMgdGhlIHRyYW5zZm9ybWVkIGFjY3VtdWxhdG9yLgogKiBJbnZva2VkIHdpdGggKGVyciwgcmVzdWx0KS4KICogQGV4YW1wbGUKICoKICogYXN5bmMudHJhbnNmb3JtKFsxLDIsM10sIGZ1bmN0aW9uKGFjYywgaXRlbSwgaW5kZXgsIGNhbGxiYWNrKSB7CiAqICAgICAvLyBwb2ludGxlc3MgYXN5bmM6CiAqICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkgewogKiAgICAgICAgIGFjYy5wdXNoKGl0ZW0gKiAyKQogKiAgICAgICAgIGNhbGxiYWNrKG51bGwpCiAqICAgICB9KTsKICogfSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHsKICogICAgIC8vIHJlc3VsdCBpcyBub3cgZXF1YWwgdG8gWzIsIDQsIDZdCiAqIH0pOwogKgogKiBAZXhhbXBsZQogKgogKiBhc3luYy50cmFuc2Zvcm0oe2E6IDEsIGI6IDIsIGM6IDN9LCBmdW5jdGlvbiAob2JqLCB2YWwsIGtleSwgY2FsbGJhY2spIHsKICogICAgIHNldEltbWVkaWF0ZShmdW5jdGlvbiAoKSB7CiAqICAgICAgICAgb2JqW2tleV0gPSB2YWwgKiAyOwogKiAgICAgICAgIGNhbGxiYWNrKCk7CiAqICAgICB9KQogKiB9LCBmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHsKICogICAgIC8vIHJlc3VsdCBpcyBlcXVhbCB0byB7YTogMiwgYjogNCwgYzogNn0KICogfSkKICovCmZ1bmN0aW9uIHRyYW5zZm9ybSAoY29sbCwgYWNjdW11bGF0b3IsIGl0ZXJhdGVlLCBjYWxsYmFjaykgewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPD0gMykgewogICAgICAgIGNhbGxiYWNrID0gaXRlcmF0ZWU7CiAgICAgICAgaXRlcmF0ZWUgPSBhY2N1bXVsYXRvcjsKICAgICAgICBhY2N1bXVsYXRvciA9IGlzQXJyYXkoY29sbCkgPyBbXSA6IHt9OwogICAgfQogICAgY2FsbGJhY2sgPSBvbmNlKGNhbGxiYWNrIHx8IG5vb3ApOwogICAgdmFyIF9pdGVyYXRlZSA9IHdyYXBBc3luYyhpdGVyYXRlZSk7CgogICAgZWFjaE9mKGNvbGwsIGZ1bmN0aW9uKHYsIGssIGNiKSB7CiAgICAgICAgX2l0ZXJhdGVlKGFjY3VtdWxhdG9yLCB2LCBrLCBjYik7CiAgICB9LCBmdW5jdGlvbihlcnIpIHsKICAgICAgICBjYWxsYmFjayhlcnIsIGFjY3VtdWxhdG9yKTsKICAgIH0pOwp9CgovKioKICogSXQgcnVucyBlYWNoIHRhc2sgaW4gc2VyaWVzIGJ1dCBzdG9wcyB3aGVuZXZlciBhbnkgb2YgdGhlIGZ1bmN0aW9ucyB3ZXJlCiAqIHN1Y2Nlc3NmdWwuIElmIG9uZSBvZiB0aGUgdGFza3Mgd2VyZSBzdWNjZXNzZnVsLCB0aGUgYGNhbGxiYWNrYCB3aWxsIGJlCiAqIHBhc3NlZCB0aGUgcmVzdWx0IG9mIHRoZSBzdWNjZXNzZnVsIHRhc2suIElmIGFsbCB0YXNrcyBmYWlsLCB0aGUgY2FsbGJhY2sKICogd2lsbCBiZSBwYXNzZWQgdGhlIGVycm9yIGFuZCByZXN1bHQgKGlmIGFueSkgb2YgdGhlIGZpbmFsIGF0dGVtcHQuCiAqCiAqIEBuYW1lIHRyeUVhY2gKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbnRyb2xGbG93CiAqIEBtZXRob2QKICogQGNhdGVnb3J5IENvbnRyb2wgRmxvdwogKiBAcGFyYW0ge0FycmF5fEl0ZXJhYmxlfE9iamVjdH0gdGFza3MgLSBBIGNvbGxlY3Rpb24gY29udGFpbmluZyBmdW5jdGlvbnMgdG8KICogcnVuLCBlYWNoIGZ1bmN0aW9uIGlzIHBhc3NlZCBhIGBjYWxsYmFjayhlcnIsIHJlc3VsdClgIGl0IG11c3QgY2FsbCBvbgogKiBjb21wbGV0aW9uIHdpdGggYW4gZXJyb3IgYGVycmAgKHdoaWNoIGNhbiBiZSBgbnVsbGApIGFuZCBhbiBvcHRpb25hbCBgcmVzdWx0YAogKiB2YWx1ZS4KICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSAtIEFuIG9wdGlvbmFsIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCB3aGVuIG9uZQogKiBvZiB0aGUgdGFza3MgaGFzIHN1Y2NlZWRlZCwgb3IgYWxsIGhhdmUgZmFpbGVkLiBJdCByZWNlaXZlcyB0aGUgYGVycmAgYW5kCiAqIGByZXN1bHRgIGFyZ3VtZW50cyBvZiB0aGUgbGFzdCBhdHRlbXB0IGF0IGNvbXBsZXRpbmcgdGhlIGB0YXNrYC4gSW52b2tlZCB3aXRoCiAqIChlcnIsIHJlc3VsdHMpLgogKiBAZXhhbXBsZQogKiBhc3luYy50cnlFYWNoKFsKICogICAgIGZ1bmN0aW9uIGdldERhdGFGcm9tRmlyc3RXZWJzaXRlKGNhbGxiYWNrKSB7CiAqICAgICAgICAgLy8gVHJ5IGdldHRpbmcgdGhlIGRhdGEgZnJvbSB0aGUgZmlyc3Qgd2Vic2l0ZQogKiAgICAgICAgIGNhbGxiYWNrKGVyciwgZGF0YSk7CiAqICAgICB9LAogKiAgICAgZnVuY3Rpb24gZ2V0RGF0YUZyb21TZWNvbmRXZWJzaXRlKGNhbGxiYWNrKSB7CiAqICAgICAgICAgLy8gRmlyc3Qgd2Vic2l0ZSBmYWlsZWQsCiAqICAgICAgICAgLy8gVHJ5IGdldHRpbmcgdGhlIGRhdGEgZnJvbSB0aGUgYmFja3VwIHdlYnNpdGUKICogICAgICAgICBjYWxsYmFjayhlcnIsIGRhdGEpOwogKiAgICAgfQogKiBdLAogKiAvLyBvcHRpb25hbCBjYWxsYmFjawogKiBmdW5jdGlvbihlcnIsIHJlc3VsdHMpIHsKICogICAgIE5vdyBkbyBzb21ldGhpbmcgd2l0aCB0aGUgZGF0YS4KICogfSk7CiAqCiAqLwpmdW5jdGlvbiB0cnlFYWNoKHRhc2tzLCBjYWxsYmFjaykgewogICAgdmFyIGVycm9yID0gbnVsbDsKICAgIHZhciByZXN1bHQ7CiAgICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IG5vb3A7CiAgICBlYWNoU2VyaWVzKHRhc2tzLCBmdW5jdGlvbih0YXNrLCBjYWxsYmFjaykgewogICAgICAgIHdyYXBBc3luYyh0YXNrKShmdW5jdGlvbiAoZXJyLCByZXMvKiwgLi4uYXJncyovKSB7CiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMikgewogICAgICAgICAgICAgICAgcmVzdWx0ID0gc2xpY2UoYXJndW1lbnRzLCAxKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlczsKICAgICAgICAgICAgfQogICAgICAgICAgICBlcnJvciA9IGVycjsKICAgICAgICAgICAgY2FsbGJhY2soIWVycik7CiAgICAgICAgfSk7CiAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgY2FsbGJhY2soZXJyb3IsIHJlc3VsdCk7CiAgICB9KTsKfQoKLyoqCiAqIFVuZG9lcyBhIFttZW1vaXplXXtAbGluayBtb2R1bGU6VXRpbHMubWVtb2l6ZX1kIGZ1bmN0aW9uLCByZXZlcnRpbmcgaXQgdG8gdGhlIG9yaWdpbmFsLAogKiB1bm1lbW9pemVkIGZvcm0uIEhhbmR5IGZvciB0ZXN0aW5nLgogKgogKiBAbmFtZSB1bm1lbW9pemUKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOlV0aWxzCiAqIEBtZXRob2QKICogQHNlZSBbYXN5bmMubWVtb2l6ZV17QGxpbmsgbW9kdWxlOlV0aWxzLm1lbW9pemV9CiAqIEBjYXRlZ29yeSBVdGlsCiAqIEBwYXJhbSB7QXN5bmNGdW5jdGlvbn0gZm4gLSB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24KICogQHJldHVybnMge0FzeW5jRnVuY3Rpb259IGEgZnVuY3Rpb24gdGhhdCBjYWxscyB0aGUgb3JpZ2luYWwgdW5tZW1vaXplZCBmdW5jdGlvbgogKi8KZnVuY3Rpb24gdW5tZW1vaXplKGZuKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAoZm4udW5tZW1vaXplZCB8fCBmbikuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKICAgIH07Cn0KCi8qKgogKiBSZXBlYXRlZGx5IGNhbGwgYGl0ZXJhdGVlYCwgd2hpbGUgYHRlc3RgIHJldHVybnMgYHRydWVgLiBDYWxscyBgY2FsbGJhY2tgIHdoZW4KICogc3RvcHBlZCwgb3IgYW4gZXJyb3Igb2NjdXJzLgogKgogKiBAbmFtZSB3aGlsc3QKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbnRyb2xGbG93CiAqIEBtZXRob2QKICogQGNhdGVnb3J5IENvbnRyb2wgRmxvdwogKiBAcGFyYW0ge0Z1bmN0aW9ufSB0ZXN0IC0gc3luY2hyb25vdXMgdHJ1dGggdGVzdCB0byBwZXJmb3JtIGJlZm9yZSBlYWNoCiAqIGV4ZWN1dGlvbiBvZiBgaXRlcmF0ZWVgLiBJbnZva2VkIHdpdGggKCkuCiAqIEBwYXJhbSB7QXN5bmNGdW5jdGlvbn0gaXRlcmF0ZWUgLSBBbiBhc3luYyBmdW5jdGlvbiB3aGljaCBpcyBjYWxsZWQgZWFjaCB0aW1lCiAqIGB0ZXN0YCBwYXNzZXMuIEludm9rZWQgd2l0aCAoY2FsbGJhY2spLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIC0gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgdGhlIHRlc3QKICogZnVuY3Rpb24gaGFzIGZhaWxlZCBhbmQgcmVwZWF0ZWQgZXhlY3V0aW9uIG9mIGBpdGVyYXRlZWAgaGFzIHN0b3BwZWQuIGBjYWxsYmFja2AKICogd2lsbCBiZSBwYXNzZWQgYW4gZXJyb3IgYW5kIGFueSBhcmd1bWVudHMgcGFzc2VkIHRvIHRoZSBmaW5hbCBgaXRlcmF0ZWVgJ3MKICogY2FsbGJhY2suIEludm9rZWQgd2l0aCAoZXJyLCBbcmVzdWx0c10pOwogKiBAcmV0dXJucyB1bmRlZmluZWQKICogQGV4YW1wbGUKICoKICogdmFyIGNvdW50ID0gMDsKICogYXN5bmMud2hpbHN0KAogKiAgICAgZnVuY3Rpb24oKSB7IHJldHVybiBjb3VudCA8IDU7IH0sCiAqICAgICBmdW5jdGlvbihjYWxsYmFjaykgewogKiAgICAgICAgIGNvdW50Kys7CiAqICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICogICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgY291bnQpOwogKiAgICAgICAgIH0sIDEwMDApOwogKiAgICAgfSwKICogICAgIGZ1bmN0aW9uIChlcnIsIG4pIHsKICogICAgICAgICAvLyA1IHNlY29uZHMgaGF2ZSBwYXNzZWQsIG4gPSA1CiAqICAgICB9CiAqICk7CiAqLwpmdW5jdGlvbiB3aGlsc3QodGVzdCwgaXRlcmF0ZWUsIGNhbGxiYWNrKSB7CiAgICBjYWxsYmFjayA9IG9ubHlPbmNlKGNhbGxiYWNrIHx8IG5vb3ApOwogICAgdmFyIF9pdGVyYXRlZSA9IHdyYXBBc3luYyhpdGVyYXRlZSk7CiAgICBpZiAoIXRlc3QoKSkgcmV0dXJuIGNhbGxiYWNrKG51bGwpOwogICAgdmFyIG5leHQgPSBmdW5jdGlvbihlcnIvKiwgLi4uYXJncyovKSB7CiAgICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycik7CiAgICAgICAgaWYgKHRlc3QoKSkgcmV0dXJuIF9pdGVyYXRlZShuZXh0KTsKICAgICAgICB2YXIgYXJncyA9IHNsaWNlKGFyZ3VtZW50cywgMSk7CiAgICAgICAgY2FsbGJhY2suYXBwbHkobnVsbCwgW251bGxdLmNvbmNhdChhcmdzKSk7CiAgICB9OwogICAgX2l0ZXJhdGVlKG5leHQpOwp9CgovKioKICogUmVwZWF0ZWRseSBjYWxsIGBpdGVyYXRlZWAgdW50aWwgYHRlc3RgIHJldHVybnMgYHRydWVgLiBDYWxscyBgY2FsbGJhY2tgIHdoZW4KICogc3RvcHBlZCwgb3IgYW4gZXJyb3Igb2NjdXJzLiBgY2FsbGJhY2tgIHdpbGwgYmUgcGFzc2VkIGFuIGVycm9yIGFuZCBhbnkKICogYXJndW1lbnRzIHBhc3NlZCB0byB0aGUgZmluYWwgYGl0ZXJhdGVlYCdzIGNhbGxiYWNrLgogKgogKiBUaGUgaW52ZXJzZSBvZiBbd2hpbHN0XXtAbGluayBtb2R1bGU6Q29udHJvbEZsb3cud2hpbHN0fS4KICoKICogQG5hbWUgdW50aWwKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbnRyb2xGbG93CiAqIEBtZXRob2QKICogQHNlZSBbYXN5bmMud2hpbHN0XXtAbGluayBtb2R1bGU6Q29udHJvbEZsb3cud2hpbHN0fQogKiBAY2F0ZWdvcnkgQ29udHJvbCBGbG93CiAqIEBwYXJhbSB7RnVuY3Rpb259IHRlc3QgLSBzeW5jaHJvbm91cyB0cnV0aCB0ZXN0IHRvIHBlcmZvcm0gYmVmb3JlIGVhY2gKICogZXhlY3V0aW9uIG9mIGBpdGVyYXRlZWAuIEludm9rZWQgd2l0aCAoKS4KICogQHBhcmFtIHtBc3luY0Z1bmN0aW9ufSBpdGVyYXRlZSAtIEFuIGFzeW5jIGZ1bmN0aW9uIHdoaWNoIGlzIGNhbGxlZCBlYWNoIHRpbWUKICogYHRlc3RgIGZhaWxzLiBJbnZva2VkIHdpdGggKGNhbGxiYWNrKS4KICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSAtIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIGFmdGVyIHRoZSB0ZXN0CiAqIGZ1bmN0aW9uIGhhcyBwYXNzZWQgYW5kIHJlcGVhdGVkIGV4ZWN1dGlvbiBvZiBgaXRlcmF0ZWVgIGhhcyBzdG9wcGVkLiBgY2FsbGJhY2tgCiAqIHdpbGwgYmUgcGFzc2VkIGFuIGVycm9yIGFuZCBhbnkgYXJndW1lbnRzIHBhc3NlZCB0byB0aGUgZmluYWwgYGl0ZXJhdGVlYCdzCiAqIGNhbGxiYWNrLiBJbnZva2VkIHdpdGggKGVyciwgW3Jlc3VsdHNdKTsKICovCmZ1bmN0aW9uIHVudGlsKHRlc3QsIGl0ZXJhdGVlLCBjYWxsYmFjaykgewogICAgd2hpbHN0KGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiAhdGVzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfSwgaXRlcmF0ZWUsIGNhbGxiYWNrKTsKfQoKLyoqCiAqIFJ1bnMgdGhlIGB0YXNrc2AgYXJyYXkgb2YgZnVuY3Rpb25zIGluIHNlcmllcywgZWFjaCBwYXNzaW5nIHRoZWlyIHJlc3VsdHMgdG8KICogdGhlIG5leHQgaW4gdGhlIGFycmF5LiBIb3dldmVyLCBpZiBhbnkgb2YgdGhlIGB0YXNrc2AgcGFzcyBhbiBlcnJvciB0byB0aGVpcgogKiBvd24gY2FsbGJhY2ssIHRoZSBuZXh0IGZ1bmN0aW9uIGlzIG5vdCBleGVjdXRlZCwgYW5kIHRoZSBtYWluIGBjYWxsYmFja2AgaXMKICogaW1tZWRpYXRlbHkgY2FsbGVkIHdpdGggdGhlIGVycm9yLgogKgogKiBAbmFtZSB3YXRlcmZhbGwKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgbW9kdWxlOkNvbnRyb2xGbG93CiAqIEBtZXRob2QKICogQGNhdGVnb3J5IENvbnRyb2wgRmxvdwogKiBAcGFyYW0ge0FycmF5fSB0YXNrcyAtIEFuIGFycmF5IG9mIFthc3luYyBmdW5jdGlvbnNde0BsaW5rIEFzeW5jRnVuY3Rpb259CiAqIHRvIHJ1bi4KICogRWFjaCBmdW5jdGlvbiBzaG91bGQgY29tcGxldGUgd2l0aCBhbnkgbnVtYmVyIG9mIGByZXN1bHRgIHZhbHVlcy4KICogVGhlIGByZXN1bHRgIHZhbHVlcyB3aWxsIGJlIHBhc3NlZCBhcyBhcmd1bWVudHMsIGluIG9yZGVyLCB0byB0aGUgbmV4dCB0YXNrLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIC0gQW4gb3B0aW9uYWwgY2FsbGJhY2sgdG8gcnVuIG9uY2UgYWxsIHRoZQogKiBmdW5jdGlvbnMgaGF2ZSBjb21wbGV0ZWQuIFRoaXMgd2lsbCBiZSBwYXNzZWQgdGhlIHJlc3VsdHMgb2YgdGhlIGxhc3QgdGFzaydzCiAqIGNhbGxiYWNrLiBJbnZva2VkIHdpdGggKGVyciwgW3Jlc3VsdHNdKS4KICogQHJldHVybnMgdW5kZWZpbmVkCiAqIEBleGFtcGxlCiAqCiAqIGFzeW5jLndhdGVyZmFsbChbCiAqICAgICBmdW5jdGlvbihjYWxsYmFjaykgewogKiAgICAgICAgIGNhbGxiYWNrKG51bGwsICdvbmUnLCAndHdvJyk7CiAqICAgICB9LAogKiAgICAgZnVuY3Rpb24oYXJnMSwgYXJnMiwgY2FsbGJhY2spIHsKICogICAgICAgICAvLyBhcmcxIG5vdyBlcXVhbHMgJ29uZScgYW5kIGFyZzIgbm93IGVxdWFscyAndHdvJwogKiAgICAgICAgIGNhbGxiYWNrKG51bGwsICd0aHJlZScpOwogKiAgICAgfSwKICogICAgIGZ1bmN0aW9uKGFyZzEsIGNhbGxiYWNrKSB7CiAqICAgICAgICAgLy8gYXJnMSBub3cgZXF1YWxzICd0aHJlZScKICogICAgICAgICBjYWxsYmFjayhudWxsLCAnZG9uZScpOwogKiAgICAgfQogKiBdLCBmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHsKICogICAgIC8vIHJlc3VsdCBub3cgZXF1YWxzICdkb25lJwogKiB9KTsKICoKICogLy8gT3IsIHdpdGggbmFtZWQgZnVuY3Rpb25zOgogKiBhc3luYy53YXRlcmZhbGwoWwogKiAgICAgbXlGaXJzdEZ1bmN0aW9uLAogKiAgICAgbXlTZWNvbmRGdW5jdGlvbiwKICogICAgIG15TGFzdEZ1bmN0aW9uLAogKiBdLCBmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHsKICogICAgIC8vIHJlc3VsdCBub3cgZXF1YWxzICdkb25lJwogKiB9KTsKICogZnVuY3Rpb24gbXlGaXJzdEZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAqICAgICBjYWxsYmFjayhudWxsLCAnb25lJywgJ3R3bycpOwogKiB9CiAqIGZ1bmN0aW9uIG15U2Vjb25kRnVuY3Rpb24oYXJnMSwgYXJnMiwgY2FsbGJhY2spIHsKICogICAgIC8vIGFyZzEgbm93IGVxdWFscyAnb25lJyBhbmQgYXJnMiBub3cgZXF1YWxzICd0d28nCiAqICAgICBjYWxsYmFjayhudWxsLCAndGhyZWUnKTsKICogfQogKiBmdW5jdGlvbiBteUxhc3RGdW5jdGlvbihhcmcxLCBjYWxsYmFjaykgewogKiAgICAgLy8gYXJnMSBub3cgZXF1YWxzICd0aHJlZScKICogICAgIGNhbGxiYWNrKG51bGwsICdkb25lJyk7CiAqIH0KICovCnZhciB3YXRlcmZhbGwgPSBmdW5jdGlvbih0YXNrcywgY2FsbGJhY2spIHsKICAgIGNhbGxiYWNrID0gb25jZShjYWxsYmFjayB8fCBub29wKTsKICAgIGlmICghaXNBcnJheSh0YXNrcykpIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IHRvIHdhdGVyZmFsbCBtdXN0IGJlIGFuIGFycmF5IG9mIGZ1bmN0aW9ucycpKTsKICAgIGlmICghdGFza3MubGVuZ3RoKSByZXR1cm4gY2FsbGJhY2soKTsKICAgIHZhciB0YXNrSW5kZXggPSAwOwoKICAgIGZ1bmN0aW9uIG5leHRUYXNrKGFyZ3MpIHsKICAgICAgICB2YXIgdGFzayA9IHdyYXBBc3luYyh0YXNrc1t0YXNrSW5kZXgrK10pOwogICAgICAgIGFyZ3MucHVzaChvbmx5T25jZShuZXh0KSk7CiAgICAgICAgdGFzay5hcHBseShudWxsLCBhcmdzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBuZXh0KGVyci8qLCAuLi5hcmdzKi8pIHsKICAgICAgICBpZiAoZXJyIHx8IHRhc2tJbmRleCA9PT0gdGFza3MubGVuZ3RoKSB7CiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseShudWxsLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgICAgICBuZXh0VGFzayhzbGljZShhcmd1bWVudHMsIDEpKTsKICAgIH0KCiAgICBuZXh0VGFzayhbXSk7Cn07CgovKioKICogQW4gImFzeW5jIGZ1bmN0aW9uIiBpbiB0aGUgY29udGV4dCBvZiBBc3luYyBpcyBhbiBhc3luY2hyb25vdXMgZnVuY3Rpb24gd2l0aAogKiBhIHZhcmlhYmxlIG51bWJlciBvZiBwYXJhbWV0ZXJzLCB3aXRoIHRoZSBmaW5hbCBwYXJhbWV0ZXIgYmVpbmcgYSBjYWxsYmFjay4KICogKGBmdW5jdGlvbiAoYXJnMSwgYXJnMiwgLi4uLCBjYWxsYmFjaykge31gKQogKiBUaGUgZmluYWwgY2FsbGJhY2sgaXMgb2YgdGhlIGZvcm0gYGNhbGxiYWNrKGVyciwgcmVzdWx0cy4uLilgLCB3aGljaCBtdXN0IGJlCiAqIGNhbGxlZCBvbmNlIHRoZSBmdW5jdGlvbiBpcyBjb21wbGV0ZWQuICBUaGUgY2FsbGJhY2sgc2hvdWxkIGJlIGNhbGxlZCB3aXRoIGEKICogRXJyb3IgYXMgaXRzIGZpcnN0IGFyZ3VtZW50IHRvIHNpZ25hbCB0aGF0IGFuIGVycm9yIG9jY3VycmVkLgogKiBPdGhlcndpc2UsIGlmIG5vIGVycm9yIG9jY3VycmVkLCBpdCBzaG91bGQgYmUgY2FsbGVkIHdpdGggYG51bGxgIGFzIHRoZSBmaXJzdAogKiBhcmd1bWVudCwgYW5kIGFueSBhZGRpdGlvbmFsIGByZXN1bHRgIGFyZ3VtZW50cyB0aGF0IG1heSBhcHBseSwgdG8gc2lnbmFsCiAqIHN1Y2Nlc3NmdWwgY29tcGxldGlvbi4KICogVGhlIGNhbGxiYWNrIG11c3QgYmUgY2FsbGVkIGV4YWN0bHkgb25jZSwgaWRlYWxseSBvbiBhIGxhdGVyIHRpY2sgb2YgdGhlCiAqIEphdmFTY3JpcHQgZXZlbnQgbG9vcC4KICoKICogVGhpcyB0eXBlIG9mIGZ1bmN0aW9uIGlzIGFsc28gcmVmZXJyZWQgdG8gYXMgYSAiTm9kZS1zdHlsZSBhc3luYyBmdW5jdGlvbiIsCiAqIG9yIGEgImNvbnRpbnVhdGlvbiBwYXNzaW5nLXN0eWxlIGZ1bmN0aW9uIiAoQ1BTKS4gTW9zdCBvZiB0aGUgbWV0aG9kcyBvZiB0aGlzCiAqIGxpYnJhcnkgYXJlIHRoZW1zZWx2ZXMgQ1BTL05vZGUtc3R5bGUgYXN5bmMgZnVuY3Rpb25zLCBvciBmdW5jdGlvbnMgdGhhdAogKiByZXR1cm4gQ1BTL05vZGUtc3R5bGUgYXN5bmMgZnVuY3Rpb25zLgogKgogKiBXaGVyZXZlciB3ZSBhY2NlcHQgYSBOb2RlLXN0eWxlIGFzeW5jIGZ1bmN0aW9uLCB3ZSBhbHNvIGRpcmVjdGx5IGFjY2VwdCBhbgogKiBbRVMyMDE3IGBhc3luY2AgZnVuY3Rpb25de0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL1N0YXRlbWVudHMvYXN5bmNfZnVuY3Rpb259LgogKiBJbiB0aGlzIGNhc2UsIHRoZSBgYXN5bmNgIGZ1bmN0aW9uIHdpbGwgbm90IGJlIHBhc3NlZCBhIGZpbmFsIGNhbGxiYWNrCiAqIGFyZ3VtZW50LCBhbmQgYW55IHRocm93biBlcnJvciB3aWxsIGJlIHVzZWQgYXMgdGhlIGBlcnJgIGFyZ3VtZW50IG9mIHRoZQogKiBpbXBsaWNpdCBjYWxsYmFjaywgYW5kIHRoZSByZXR1cm4gdmFsdWUgd2lsbCBiZSB1c2VkIGFzIHRoZSBgcmVzdWx0YCB2YWx1ZS4KICogKGkuZS4gYSBgcmVqZWN0ZWRgIG9mIHRoZSByZXR1cm5lZCBQcm9taXNlIGJlY29tZXMgdGhlIGBlcnJgIGNhbGxiYWNrCiAqIGFyZ3VtZW50LCBhbmQgYSBgcmVzb2x2ZWRgIHZhbHVlIGJlY29tZXMgdGhlIGByZXN1bHRgLikKICoKICogTm90ZSwgZHVlIHRvIEphdmFTY3JpcHQgbGltaXRhdGlvbnMsIHdlIGNhbiBvbmx5IGRldGVjdCBuYXRpdmUgYGFzeW5jYAogKiBmdW5jdGlvbnMgYW5kIG5vdCB0cmFuc3BpbGllZCBpbXBsZW1lbnRhdGlvbnMuCiAqIFlvdXIgZW52aXJvbm1lbnQgbXVzdCBoYXZlIGBhc3luY2AvYGF3YWl0YCBzdXBwb3J0IGZvciB0aGlzIHRvIHdvcmsuCiAqIChlLmcuIE5vZGUgPiB2Ny42LCBvciBhIHJlY2VudCB2ZXJzaW9uIG9mIGEgbW9kZXJuIGJyb3dzZXIpLgogKiBJZiB5b3UgYXJlIHVzaW5nIGBhc3luY2AgZnVuY3Rpb25zIHRocm91Z2ggYSB0cmFuc3BpbGVyIChlLmcuIEJhYmVsKSwgeW91CiAqIG11c3Qgc3RpbGwgd3JhcCB0aGUgZnVuY3Rpb24gd2l0aCBbYXN5bmNpZnlde0BsaW5rIG1vZHVsZTpVdGlscy5hc3luY2lmeX0sCiAqIGJlY2F1c2UgdGhlIGBhc3luYyBmdW5jdGlvbmAgd2lsbCBiZSBjb21waWxlZCB0byBhbiBvcmRpbmFyeSBmdW5jdGlvbiB0aGF0CiAqIHJldHVybnMgYSBwcm9taXNlLgogKgogKiBAdHlwZWRlZiB7RnVuY3Rpb259IEFzeW5jRnVuY3Rpb24KICogQHN0YXRpYwogKi8KCi8qKgogKiBBc3luYyBpcyBhIHV0aWxpdHkgbW9kdWxlIHdoaWNoIHByb3ZpZGVzIHN0cmFpZ2h0LWZvcndhcmQsIHBvd2VyZnVsIGZ1bmN0aW9ucwogKiBmb3Igd29ya2luZyB3aXRoIGFzeW5jaHJvbm91cyBKYXZhU2NyaXB0LiBBbHRob3VnaCBvcmlnaW5hbGx5IGRlc2lnbmVkIGZvcgogKiB1c2Ugd2l0aCBbTm9kZS5qc10oaHR0cDovL25vZGVqcy5vcmcpIGFuZCBpbnN0YWxsYWJsZSB2aWEKICogYG5wbSBpbnN0YWxsIC0tc2F2ZSBhc3luY2AsIGl0IGNhbiBhbHNvIGJlIHVzZWQgZGlyZWN0bHkgaW4gdGhlIGJyb3dzZXIuCiAqIEBtb2R1bGUgYXN5bmMKICogQHNlZSBBc3luY0Z1bmN0aW9uCiAqLwoKCi8qKgogKiBBIGNvbGxlY3Rpb24gb2YgYGFzeW5jYCBmdW5jdGlvbnMgZm9yIG1hbmlwdWxhdGluZyBjb2xsZWN0aW9ucywgc3VjaCBhcwogKiBhcnJheXMgYW5kIG9iamVjdHMuCiAqIEBtb2R1bGUgQ29sbGVjdGlvbnMKICovCgovKioKICogQSBjb2xsZWN0aW9uIG9mIGBhc3luY2AgZnVuY3Rpb25zIGZvciBjb250cm9sbGluZyB0aGUgZmxvdyB0aHJvdWdoIGEgc2NyaXB0LgogKiBAbW9kdWxlIENvbnRyb2xGbG93CiAqLwoKLyoqCiAqIEEgY29sbGVjdGlvbiBvZiBgYXN5bmNgIHV0aWxpdHkgZnVuY3Rpb25zLgogKiBAbW9kdWxlIFV0aWxzCiAqLwoKdmFyIGluZGV4ID0gewogICAgYXBwbHk6IGFwcGx5LAogICAgYXBwbHlFYWNoOiBhcHBseUVhY2gsCiAgICBhcHBseUVhY2hTZXJpZXM6IGFwcGx5RWFjaFNlcmllcywKICAgIGFzeW5jaWZ5OiBhc3luY2lmeSwKICAgIGF1dG86IGF1dG8sCiAgICBhdXRvSW5qZWN0OiBhdXRvSW5qZWN0LAogICAgY2FyZ286IGNhcmdvLAogICAgY29tcG9zZTogY29tcG9zZSwKICAgIGNvbmNhdDogY29uY2F0LAogICAgY29uY2F0TGltaXQ6IGNvbmNhdExpbWl0LAogICAgY29uY2F0U2VyaWVzOiBjb25jYXRTZXJpZXMsCiAgICBjb25zdGFudDogY29uc3RhbnQsCiAgICBkZXRlY3Q6IGRldGVjdCwKICAgIGRldGVjdExpbWl0OiBkZXRlY3RMaW1pdCwKICAgIGRldGVjdFNlcmllczogZGV0ZWN0U2VyaWVzLAogICAgZGlyOiBkaXIsCiAgICBkb0R1cmluZzogZG9EdXJpbmcsCiAgICBkb1VudGlsOiBkb1VudGlsLAogICAgZG9XaGlsc3Q6IGRvV2hpbHN0LAogICAgZHVyaW5nOiBkdXJpbmcsCiAgICBlYWNoOiBlYWNoTGltaXQsCiAgICBlYWNoTGltaXQ6IGVhY2hMaW1pdCQxLAogICAgZWFjaE9mOiBlYWNoT2YsCiAgICBlYWNoT2ZMaW1pdDogZWFjaE9mTGltaXQsCiAgICBlYWNoT2ZTZXJpZXM6IGVhY2hPZlNlcmllcywKICAgIGVhY2hTZXJpZXM6IGVhY2hTZXJpZXMsCiAgICBlbnN1cmVBc3luYzogZW5zdXJlQXN5bmMsCiAgICBldmVyeTogZXZlcnksCiAgICBldmVyeUxpbWl0OiBldmVyeUxpbWl0LAogICAgZXZlcnlTZXJpZXM6IGV2ZXJ5U2VyaWVzLAogICAgZmlsdGVyOiBmaWx0ZXIsCiAgICBmaWx0ZXJMaW1pdDogZmlsdGVyTGltaXQsCiAgICBmaWx0ZXJTZXJpZXM6IGZpbHRlclNlcmllcywKICAgIGZvcmV2ZXI6IGZvcmV2ZXIsCiAgICBncm91cEJ5OiBncm91cEJ5LAogICAgZ3JvdXBCeUxpbWl0OiBncm91cEJ5TGltaXQsCiAgICBncm91cEJ5U2VyaWVzOiBncm91cEJ5U2VyaWVzLAogICAgbG9nOiBsb2csCiAgICBtYXA6IG1hcCwKICAgIG1hcExpbWl0OiBtYXBMaW1pdCwKICAgIG1hcFNlcmllczogbWFwU2VyaWVzLAogICAgbWFwVmFsdWVzOiBtYXBWYWx1ZXMsCiAgICBtYXBWYWx1ZXNMaW1pdDogbWFwVmFsdWVzTGltaXQsCiAgICBtYXBWYWx1ZXNTZXJpZXM6IG1hcFZhbHVlc1NlcmllcywKICAgIG1lbW9pemU6IG1lbW9pemUsCiAgICBuZXh0VGljazogbmV4dFRpY2ssCiAgICBwYXJhbGxlbDogcGFyYWxsZWxMaW1pdCwKICAgIHBhcmFsbGVsTGltaXQ6IHBhcmFsbGVsTGltaXQkMSwKICAgIHByaW9yaXR5UXVldWU6IHByaW9yaXR5UXVldWUsCiAgICBxdWV1ZTogcXVldWUkMSwKICAgIHJhY2U6IHJhY2UsCiAgICByZWR1Y2U6IHJlZHVjZSwKICAgIHJlZHVjZVJpZ2h0OiByZWR1Y2VSaWdodCwKICAgIHJlZmxlY3Q6IHJlZmxlY3QsCiAgICByZWZsZWN0QWxsOiByZWZsZWN0QWxsLAogICAgcmVqZWN0OiByZWplY3QsCiAgICByZWplY3RMaW1pdDogcmVqZWN0TGltaXQsCiAgICByZWplY3RTZXJpZXM6IHJlamVjdFNlcmllcywKICAgIHJldHJ5OiByZXRyeSwKICAgIHJldHJ5YWJsZTogcmV0cnlhYmxlLAogICAgc2VxOiBzZXEsCiAgICBzZXJpZXM6IHNlcmllcywKICAgIHNldEltbWVkaWF0ZTogc2V0SW1tZWRpYXRlJDEsCiAgICBzb21lOiBzb21lLAogICAgc29tZUxpbWl0OiBzb21lTGltaXQsCiAgICBzb21lU2VyaWVzOiBzb21lU2VyaWVzLAogICAgc29ydEJ5OiBzb3J0QnksCiAgICB0aW1lb3V0OiB0aW1lb3V0LAogICAgdGltZXM6IHRpbWVzLAogICAgdGltZXNMaW1pdDogdGltZUxpbWl0LAogICAgdGltZXNTZXJpZXM6IHRpbWVzU2VyaWVzLAogICAgdHJhbnNmb3JtOiB0cmFuc2Zvcm0sCiAgICB0cnlFYWNoOiB0cnlFYWNoLAogICAgdW5tZW1vaXplOiB1bm1lbW9pemUsCiAgICB1bnRpbDogdW50aWwsCiAgICB3YXRlcmZhbGw6IHdhdGVyZmFsbCwKICAgIHdoaWxzdDogd2hpbHN0LAoKICAgIC8vIGFsaWFzZXMKICAgIGFsbDogZXZlcnksCiAgICBhbGxMaW1pdDogZXZlcnlMaW1pdCwKICAgIGFsbFNlcmllczogZXZlcnlTZXJpZXMsCiAgICBhbnk6IHNvbWUsCiAgICBhbnlMaW1pdDogc29tZUxpbWl0LAogICAgYW55U2VyaWVzOiBzb21lU2VyaWVzLAogICAgZmluZDogZGV0ZWN0LAogICAgZmluZExpbWl0OiBkZXRlY3RMaW1pdCwKICAgIGZpbmRTZXJpZXM6IGRldGVjdFNlcmllcywKICAgIGZvckVhY2g6IGVhY2hMaW1pdCwKICAgIGZvckVhY2hTZXJpZXM6IGVhY2hTZXJpZXMsCiAgICBmb3JFYWNoTGltaXQ6IGVhY2hMaW1pdCQxLAogICAgZm9yRWFjaE9mOiBlYWNoT2YsCiAgICBmb3JFYWNoT2ZTZXJpZXM6IGVhY2hPZlNlcmllcywKICAgIGZvckVhY2hPZkxpbWl0OiBlYWNoT2ZMaW1pdCwKICAgIGluamVjdDogcmVkdWNlLAogICAgZm9sZGw6IHJlZHVjZSwKICAgIGZvbGRyOiByZWR1Y2VSaWdodCwKICAgIHNlbGVjdDogZmlsdGVyLAogICAgc2VsZWN0TGltaXQ6IGZpbHRlckxpbWl0LAogICAgc2VsZWN0U2VyaWVzOiBmaWx0ZXJTZXJpZXMsCiAgICB3cmFwU3luYzogYXN5bmNpZnkKfTsKCmV4cG9ydHNbJ2RlZmF1bHQnXSA9IGluZGV4OwpleHBvcnRzLmFwcGx5ID0gYXBwbHk7CmV4cG9ydHMuYXBwbHlFYWNoID0gYXBwbHlFYWNoOwpleHBvcnRzLmFwcGx5RWFjaFNlcmllcyA9IGFwcGx5RWFjaFNlcmllczsKZXhwb3J0cy5hc3luY2lmeSA9IGFzeW5jaWZ5OwpleHBvcnRzLmF1dG8gPSBhdXRvOwpleHBvcnRzLmF1dG9JbmplY3QgPSBhdXRvSW5qZWN0OwpleHBvcnRzLmNhcmdvID0gY2FyZ287CmV4cG9ydHMuY29tcG9zZSA9IGNvbXBvc2U7CmV4cG9ydHMuY29uY2F0ID0gY29uY2F0OwpleHBvcnRzLmNvbmNhdExpbWl0ID0gY29uY2F0TGltaXQ7CmV4cG9ydHMuY29uY2F0U2VyaWVzID0gY29uY2F0U2VyaWVzOwpleHBvcnRzLmNvbnN0YW50ID0gY29uc3RhbnQ7CmV4cG9ydHMuZGV0ZWN0ID0gZGV0ZWN0OwpleHBvcnRzLmRldGVjdExpbWl0ID0gZGV0ZWN0TGltaXQ7CmV4cG9ydHMuZGV0ZWN0U2VyaWVzID0gZGV0ZWN0U2VyaWVzOwpleHBvcnRzLmRpciA9IGRpcjsKZXhwb3J0cy5kb0R1cmluZyA9IGRvRHVyaW5nOwpleHBvcnRzLmRvVW50aWwgPSBkb1VudGlsOwpleHBvcnRzLmRvV2hpbHN0ID0gZG9XaGlsc3Q7CmV4cG9ydHMuZHVyaW5nID0gZHVyaW5nOwpleHBvcnRzLmVhY2ggPSBlYWNoTGltaXQ7CmV4cG9ydHMuZWFjaExpbWl0ID0gZWFjaExpbWl0JDE7CmV4cG9ydHMuZWFjaE9mID0gZWFjaE9mOwpleHBvcnRzLmVhY2hPZkxpbWl0ID0gZWFjaE9mTGltaXQ7CmV4cG9ydHMuZWFjaE9mU2VyaWVzID0gZWFjaE9mU2VyaWVzOwpleHBvcnRzLmVhY2hTZXJpZXMgPSBlYWNoU2VyaWVzOwpleHBvcnRzLmVuc3VyZUFzeW5jID0gZW5zdXJlQXN5bmM7CmV4cG9ydHMuZXZlcnkgPSBldmVyeTsKZXhwb3J0cy5ldmVyeUxpbWl0ID0gZXZlcnlMaW1pdDsKZXhwb3J0cy5ldmVyeVNlcmllcyA9IGV2ZXJ5U2VyaWVzOwpleHBvcnRzLmZpbHRlciA9IGZpbHRlcjsKZXhwb3J0cy5maWx0ZXJMaW1pdCA9IGZpbHRlckxpbWl0OwpleHBvcnRzLmZpbHRlclNlcmllcyA9IGZpbHRlclNlcmllczsKZXhwb3J0cy5mb3JldmVyID0gZm9yZXZlcjsKZXhwb3J0cy5ncm91cEJ5ID0gZ3JvdXBCeTsKZXhwb3J0cy5ncm91cEJ5TGltaXQgPSBncm91cEJ5TGltaXQ7CmV4cG9ydHMuZ3JvdXBCeVNlcmllcyA9IGdyb3VwQnlTZXJpZXM7CmV4cG9ydHMubG9nID0gbG9nOwpleHBvcnRzLm1hcCA9IG1hcDsKZXhwb3J0cy5tYXBMaW1pdCA9IG1hcExpbWl0OwpleHBvcnRzLm1hcFNlcmllcyA9IG1hcFNlcmllczsKZXhwb3J0cy5tYXBWYWx1ZXMgPSBtYXBWYWx1ZXM7CmV4cG9ydHMubWFwVmFsdWVzTGltaXQgPSBtYXBWYWx1ZXNMaW1pdDsKZXhwb3J0cy5tYXBWYWx1ZXNTZXJpZXMgPSBtYXBWYWx1ZXNTZXJpZXM7CmV4cG9ydHMubWVtb2l6ZSA9IG1lbW9pemU7CmV4cG9ydHMubmV4dFRpY2sgPSBuZXh0VGljazsKZXhwb3J0cy5wYXJhbGxlbCA9IHBhcmFsbGVsTGltaXQ7CmV4cG9ydHMucGFyYWxsZWxMaW1pdCA9IHBhcmFsbGVsTGltaXQkMTsKZXhwb3J0cy5wcmlvcml0eVF1ZXVlID0gcHJpb3JpdHlRdWV1ZTsKZXhwb3J0cy5xdWV1ZSA9IHF1ZXVlJDE7CmV4cG9ydHMucmFjZSA9IHJhY2U7CmV4cG9ydHMucmVkdWNlID0gcmVkdWNlOwpleHBvcnRzLnJlZHVjZVJpZ2h0ID0gcmVkdWNlUmlnaHQ7CmV4cG9ydHMucmVmbGVjdCA9IHJlZmxlY3Q7CmV4cG9ydHMucmVmbGVjdEFsbCA9IHJlZmxlY3RBbGw7CmV4cG9ydHMucmVqZWN0ID0gcmVqZWN0OwpleHBvcnRzLnJlamVjdExpbWl0ID0gcmVqZWN0TGltaXQ7CmV4cG9ydHMucmVqZWN0U2VyaWVzID0gcmVqZWN0U2VyaWVzOwpleHBvcnRzLnJldHJ5ID0gcmV0cnk7CmV4cG9ydHMucmV0cnlhYmxlID0gcmV0cnlhYmxlOwpleHBvcnRzLnNlcSA9IHNlcTsKZXhwb3J0cy5zZXJpZXMgPSBzZXJpZXM7CmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlJDE7CmV4cG9ydHMuc29tZSA9IHNvbWU7CmV4cG9ydHMuc29tZUxpbWl0ID0gc29tZUxpbWl0OwpleHBvcnRzLnNvbWVTZXJpZXMgPSBzb21lU2VyaWVzOwpleHBvcnRzLnNvcnRCeSA9IHNvcnRCeTsKZXhwb3J0cy50aW1lb3V0ID0gdGltZW91dDsKZXhwb3J0cy50aW1lcyA9IHRpbWVzOwpleHBvcnRzLnRpbWVzTGltaXQgPSB0aW1lTGltaXQ7CmV4cG9ydHMudGltZXNTZXJpZXMgPSB0aW1lc1NlcmllczsKZXhwb3J0cy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07CmV4cG9ydHMudHJ5RWFjaCA9IHRyeUVhY2g7CmV4cG9ydHMudW5tZW1vaXplID0gdW5tZW1vaXplOwpleHBvcnRzLnVudGlsID0gdW50aWw7CmV4cG9ydHMud2F0ZXJmYWxsID0gd2F0ZXJmYWxsOwpleHBvcnRzLndoaWxzdCA9IHdoaWxzdDsKZXhwb3J0cy5hbGwgPSBldmVyeTsKZXhwb3J0cy5hbGxMaW1pdCA9IGV2ZXJ5TGltaXQ7CmV4cG9ydHMuYWxsU2VyaWVzID0gZXZlcnlTZXJpZXM7CmV4cG9ydHMuYW55ID0gc29tZTsKZXhwb3J0cy5hbnlMaW1pdCA9IHNvbWVMaW1pdDsKZXhwb3J0cy5hbnlTZXJpZXMgPSBzb21lU2VyaWVzOwpleHBvcnRzLmZpbmQgPSBkZXRlY3Q7CmV4cG9ydHMuZmluZExpbWl0ID0gZGV0ZWN0TGltaXQ7CmV4cG9ydHMuZmluZFNlcmllcyA9IGRldGVjdFNlcmllczsKZXhwb3J0cy5mb3JFYWNoID0gZWFjaExpbWl0OwpleHBvcnRzLmZvckVhY2hTZXJpZXMgPSBlYWNoU2VyaWVzOwpleHBvcnRzLmZvckVhY2hMaW1pdCA9IGVhY2hMaW1pdCQxOwpleHBvcnRzLmZvckVhY2hPZiA9IGVhY2hPZjsKZXhwb3J0cy5mb3JFYWNoT2ZTZXJpZXMgPSBlYWNoT2ZTZXJpZXM7CmV4cG9ydHMuZm9yRWFjaE9mTGltaXQgPSBlYWNoT2ZMaW1pdDsKZXhwb3J0cy5pbmplY3QgPSByZWR1Y2U7CmV4cG9ydHMuZm9sZGwgPSByZWR1Y2U7CmV4cG9ydHMuZm9sZHIgPSByZWR1Y2VSaWdodDsKZXhwb3J0cy5zZWxlY3QgPSBmaWx0ZXI7CmV4cG9ydHMuc2VsZWN0TGltaXQgPSBmaWx0ZXJMaW1pdDsKZXhwb3J0cy5zZWxlY3RTZXJpZXMgPSBmaWx0ZXJTZXJpZXM7CmV4cG9ydHMud3JhcFN5bmMgPSBhc3luY2lmeTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7Cgp9KSkpOwo="},{"meta":{"name":"localforage.min.js","url":"https://cdnjs.cloudflare.com/ajax/libs/localforage/1.7.1/localforage.min.js","ts":1608308696180,"mimetype":"text/javascript"},"source":"LyohCiAgICBsb2NhbEZvcmFnZSAtLSBPZmZsaW5lIFN0b3JhZ2UsIEltcHJvdmVkCiAgICBWZXJzaW9uIDEuNy4xCiAgICBodHRwczovL2xvY2FsZm9yYWdlLmdpdGh1Yi5pby9sb2NhbEZvcmFnZQogICAgKGMpIDIwMTMtMjAxNyBNb3ppbGxhLCBBcGFjaGUgTGljZW5zZSAyLjAKKi8KIWZ1bmN0aW9uKGEpe2lmKCJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmInVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9YSgpO2Vsc2UgaWYoImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sYSk7ZWxzZXt2YXIgYjtiPSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6dGhpcyxiLmxvY2FsZm9yYWdlPWEoKX19KGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uIGEoYixjLGQpe2Z1bmN0aW9uIGUoZyxoKXtpZighY1tnXSl7aWYoIWJbZ10pe3ZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFoJiZpKXJldHVybiBpKGcsITApO2lmKGYpcmV0dXJuIGYoZywhMCk7dmFyIGo9bmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJyIrZysiJyIpO3Rocm93IGouY29kZT0iTU9EVUxFX05PVF9GT1VORCIsan12YXIgaz1jW2ddPXtleHBvcnRzOnt9fTtiW2ddWzBdLmNhbGwoay5leHBvcnRzLGZ1bmN0aW9uKGEpe3ZhciBjPWJbZ11bMV1bYV07cmV0dXJuIGUoY3x8YSl9LGssay5leHBvcnRzLGEsYixjLGQpfXJldHVybiBjW2ddLmV4cG9ydHN9Zm9yKHZhciBmPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGc9MDtnPGQubGVuZ3RoO2crKyllKGRbZ10pO3JldHVybiBlfSh7MTpbZnVuY3Rpb24oYSxiLGMpeyhmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYygpe2s9ITA7Zm9yKHZhciBhLGIsYz1sLmxlbmd0aDtjOyl7Zm9yKGI9bCxsPVtdLGE9LTE7KythPGM7KWJbYV0oKTtjPWwubGVuZ3RofWs9ITF9ZnVuY3Rpb24gZChhKXsxIT09bC5wdXNoKGEpfHxrfHxlKCl9dmFyIGUsZj1hLk11dGF0aW9uT2JzZXJ2ZXJ8fGEuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtpZihmKXt2YXIgZz0wLGg9bmV3IGYoYyksaT1hLmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTtoLm9ic2VydmUoaSx7Y2hhcmFjdGVyRGF0YTohMH0pLGU9ZnVuY3Rpb24oKXtpLmRhdGE9Zz0rK2clMn19ZWxzZSBpZihhLnNldEltbWVkaWF0ZXx8dm9pZCAwPT09YS5NZXNzYWdlQ2hhbm5lbCllPSJkb2N1bWVudCJpbiBhJiYib25yZWFkeXN0YXRlY2hhbmdlImluIGEuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik/ZnVuY3Rpb24oKXt2YXIgYj1hLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO2Iub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7YygpLGIub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbH0sYS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoYil9OmZ1bmN0aW9uKCl7c2V0VGltZW91dChjLDApfTtlbHNle3ZhciBqPW5ldyBhLk1lc3NhZ2VDaGFubmVsO2oucG9ydDEub25tZXNzYWdlPWMsZT1mdW5jdGlvbigpe2oucG9ydDIucG9zdE1lc3NhZ2UoMCl9fXZhciBrLGw9W107Yi5leHBvcnRzPWR9KS5jYWxsKHRoaXMsInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHt9XSwyOltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoKXt9ZnVuY3Rpb24gZShhKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKCJyZXNvbHZlciBtdXN0IGJlIGEgZnVuY3Rpb24iKTt0aGlzLnN0YXRlPXMsdGhpcy5xdWV1ZT1bXSx0aGlzLm91dGNvbWU9dm9pZCAwLGEhPT1kJiZpKHRoaXMsYSl9ZnVuY3Rpb24gZihhLGIsYyl7dGhpcy5wcm9taXNlPWEsImZ1bmN0aW9uIj09dHlwZW9mIGImJih0aGlzLm9uRnVsZmlsbGVkPWIsdGhpcy5jYWxsRnVsZmlsbGVkPXRoaXMub3RoZXJDYWxsRnVsZmlsbGVkKSwiZnVuY3Rpb24iPT10eXBlb2YgYyYmKHRoaXMub25SZWplY3RlZD1jLHRoaXMuY2FsbFJlamVjdGVkPXRoaXMub3RoZXJDYWxsUmVqZWN0ZWQpfWZ1bmN0aW9uIGcoYSxiLGMpe28oZnVuY3Rpb24oKXt2YXIgZDt0cnl7ZD1iKGMpfWNhdGNoKGIpe3JldHVybiBwLnJlamVjdChhLGIpfWQ9PT1hP3AucmVqZWN0KGEsbmV3IFR5cGVFcnJvcigiQ2Fubm90IHJlc29sdmUgcHJvbWlzZSB3aXRoIGl0c2VsZiIpKTpwLnJlc29sdmUoYSxkKX0pfWZ1bmN0aW9uIGgoYSl7dmFyIGI9YSYmYS50aGVuO2lmKGEmJigib2JqZWN0Ij09dHlwZW9mIGF8fCJmdW5jdGlvbiI9PXR5cGVvZiBhKSYmImZ1bmN0aW9uIj09dHlwZW9mIGIpcmV0dXJuIGZ1bmN0aW9uKCl7Yi5hcHBseShhLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIGkoYSxiKXtmdW5jdGlvbiBjKGIpe2Z8fChmPSEwLHAucmVqZWN0KGEsYikpfWZ1bmN0aW9uIGQoYil7Znx8KGY9ITAscC5yZXNvbHZlKGEsYikpfWZ1bmN0aW9uIGUoKXtiKGQsYyl9dmFyIGY9ITEsZz1qKGUpOyJlcnJvciI9PT1nLnN0YXR1cyYmYyhnLnZhbHVlKX1mdW5jdGlvbiBqKGEsYil7dmFyIGM9e307dHJ5e2MudmFsdWU9YShiKSxjLnN0YXR1cz0ic3VjY2VzcyJ9Y2F0Y2goYSl7Yy5zdGF0dXM9ImVycm9yIixjLnZhbHVlPWF9cmV0dXJuIGN9ZnVuY3Rpb24gayhhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIHRoaXM/YTpwLnJlc29sdmUobmV3IHRoaXMoZCksYSl9ZnVuY3Rpb24gbChhKXt2YXIgYj1uZXcgdGhpcyhkKTtyZXR1cm4gcC5yZWplY3QoYixhKX1mdW5jdGlvbiBtKGEpe2Z1bmN0aW9uIGIoYSxiKXtmdW5jdGlvbiBkKGEpe2dbYl09YSwrK2ghPT1lfHxmfHwoZj0hMCxwLnJlc29sdmUoaixnKSl9Yy5yZXNvbHZlKGEpLnRoZW4oZCxmdW5jdGlvbihhKXtmfHwoZj0hMCxwLnJlamVjdChqLGEpKX0pfXZhciBjPXRoaXM7aWYoIltvYmplY3QgQXJyYXldIiE9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKSlyZXR1cm4gdGhpcy5yZWplY3QobmV3IFR5cGVFcnJvcigibXVzdCBiZSBhbiBhcnJheSIpKTt2YXIgZT1hLmxlbmd0aCxmPSExO2lmKCFlKXJldHVybiB0aGlzLnJlc29sdmUoW10pO2Zvcih2YXIgZz1uZXcgQXJyYXkoZSksaD0wLGk9LTEsaj1uZXcgdGhpcyhkKTsrK2k8ZTspYihhW2ldLGkpO3JldHVybiBqfWZ1bmN0aW9uIG4oYSl7ZnVuY3Rpb24gYihhKXtjLnJlc29sdmUoYSkudGhlbihmdW5jdGlvbihhKXtmfHwoZj0hMCxwLnJlc29sdmUoaCxhKSl9LGZ1bmN0aW9uKGEpe2Z8fChmPSEwLHAucmVqZWN0KGgsYSkpfSl9dmFyIGM9dGhpcztpZigiW29iamVjdCBBcnJheV0iIT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpKXJldHVybiB0aGlzLnJlamVjdChuZXcgVHlwZUVycm9yKCJtdXN0IGJlIGFuIGFycmF5IikpO3ZhciBlPWEubGVuZ3RoLGY9ITE7aWYoIWUpcmV0dXJuIHRoaXMucmVzb2x2ZShbXSk7Zm9yKHZhciBnPS0xLGg9bmV3IHRoaXMoZCk7KytnPGU7KWIoYVtnXSk7cmV0dXJuIGh9dmFyIG89YSgxKSxwPXt9LHE9WyJSRUpFQ1RFRCJdLHI9WyJGVUxGSUxMRUQiXSxzPVsiUEVORElORyJdO2IuZXhwb3J0cz1lLGUucHJvdG90eXBlLmNhdGNoPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRoZW4obnVsbCxhKX0sZS5wcm90b3R5cGUudGhlbj1mdW5jdGlvbihhLGIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBhJiZ0aGlzLnN0YXRlPT09cnx8ImZ1bmN0aW9uIiE9dHlwZW9mIGImJnRoaXMuc3RhdGU9PT1xKXJldHVybiB0aGlzO3ZhciBjPW5ldyB0aGlzLmNvbnN0cnVjdG9yKGQpO2lmKHRoaXMuc3RhdGUhPT1zKXtnKGMsdGhpcy5zdGF0ZT09PXI/YTpiLHRoaXMub3V0Y29tZSl9ZWxzZSB0aGlzLnF1ZXVlLnB1c2gobmV3IGYoYyxhLGIpKTtyZXR1cm4gY30sZi5wcm90b3R5cGUuY2FsbEZ1bGZpbGxlZD1mdW5jdGlvbihhKXtwLnJlc29sdmUodGhpcy5wcm9taXNlLGEpfSxmLnByb3RvdHlwZS5vdGhlckNhbGxGdWxmaWxsZWQ9ZnVuY3Rpb24oYSl7Zyh0aGlzLnByb21pc2UsdGhpcy5vbkZ1bGZpbGxlZCxhKX0sZi5wcm90b3R5cGUuY2FsbFJlamVjdGVkPWZ1bmN0aW9uKGEpe3AucmVqZWN0KHRoaXMucHJvbWlzZSxhKX0sZi5wcm90b3R5cGUub3RoZXJDYWxsUmVqZWN0ZWQ9ZnVuY3Rpb24oYSl7Zyh0aGlzLnByb21pc2UsdGhpcy5vblJlamVjdGVkLGEpfSxwLnJlc29sdmU9ZnVuY3Rpb24oYSxiKXt2YXIgYz1qKGgsYik7aWYoImVycm9yIj09PWMuc3RhdHVzKXJldHVybiBwLnJlamVjdChhLGMudmFsdWUpO3ZhciBkPWMudmFsdWU7aWYoZClpKGEsZCk7ZWxzZXthLnN0YXRlPXIsYS5vdXRjb21lPWI7Zm9yKHZhciBlPS0xLGY9YS5xdWV1ZS5sZW5ndGg7KytlPGY7KWEucXVldWVbZV0uY2FsbEZ1bGZpbGxlZChiKX1yZXR1cm4gYX0scC5yZWplY3Q9ZnVuY3Rpb24oYSxiKXthLnN0YXRlPXEsYS5vdXRjb21lPWI7Zm9yKHZhciBjPS0xLGQ9YS5xdWV1ZS5sZW5ndGg7KytjPGQ7KWEucXVldWVbY10uY2FsbFJlamVjdGVkKGIpO3JldHVybiBhfSxlLnJlc29sdmU9ayxlLnJlamVjdD1sLGUuYWxsPW0sZS5yYWNlPW59LHsxOjF9XSwzOltmdW5jdGlvbihhLGIsYyl7KGZ1bmN0aW9uKGIpeyJ1c2Ugc3RyaWN0IjsiZnVuY3Rpb24iIT10eXBlb2YgYi5Qcm9taXNlJiYoYi5Qcm9taXNlPWEoMikpfSkuY2FsbCh0aGlzLCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjoidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7MjoyfV0sNDpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZSgpe3RyeXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIGluZGV4ZWREQilyZXR1cm4gaW5kZXhlZERCO2lmKCJ1bmRlZmluZWQiIT10eXBlb2Ygd2Via2l0SW5kZXhlZERCKXJldHVybiB3ZWJraXRJbmRleGVkREI7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBtb3pJbmRleGVkREIpcmV0dXJuIG1vekluZGV4ZWREQjtpZigidW5kZWZpbmVkIiE9dHlwZW9mIE9JbmRleGVkREIpcmV0dXJuIE9JbmRleGVkREI7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBtc0luZGV4ZWREQilyZXR1cm4gbXNJbmRleGVkREJ9Y2F0Y2goYSl7cmV0dXJufX1mdW5jdGlvbiBmKCl7dHJ5e2lmKCF1YSlyZXR1cm4hMTt2YXIgYT0idW5kZWZpbmVkIiE9dHlwZW9mIG9wZW5EYXRhYmFzZSYmLyhTYWZhcml8aVBob25lfGlQYWR8aVBvZCkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJiEvQ2hyb21lLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpJiYhL0JsYWNrQmVycnkvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKSxiPSJmdW5jdGlvbiI9PXR5cGVvZiBmZXRjaCYmLTEhPT1mZXRjaC50b1N0cmluZygpLmluZGV4T2YoIltuYXRpdmUgY29kZSIpO3JldHVybighYXx8YikmJiJ1bmRlZmluZWQiIT10eXBlb2YgaW5kZXhlZERCJiYidW5kZWZpbmVkIiE9dHlwZW9mIElEQktleVJhbmdlfWNhdGNoKGEpe3JldHVybiExfX1mdW5jdGlvbiBnKGEsYil7YT1hfHxbXSxiPWJ8fHt9O3RyeXtyZXR1cm4gbmV3IEJsb2IoYSxiKX1jYXRjaChmKXtpZigiVHlwZUVycm9yIiE9PWYubmFtZSl0aHJvdyBmO2Zvcih2YXIgYz0idW5kZWZpbmVkIiE9dHlwZW9mIEJsb2JCdWlsZGVyP0Jsb2JCdWlsZGVyOiJ1bmRlZmluZWQiIT10eXBlb2YgTVNCbG9iQnVpbGRlcj9NU0Jsb2JCdWlsZGVyOiJ1bmRlZmluZWQiIT10eXBlb2YgTW96QmxvYkJ1aWxkZXI/TW96QmxvYkJ1aWxkZXI6V2ViS2l0QmxvYkJ1aWxkZXIsZD1uZXcgYyxlPTA7ZTxhLmxlbmd0aDtlKz0xKWQuYXBwZW5kKGFbZV0pO3JldHVybiBkLmdldEJsb2IoYi50eXBlKX19ZnVuY3Rpb24gaChhLGIpe2ImJmEudGhlbihmdW5jdGlvbihhKXtiKG51bGwsYSl9LGZ1bmN0aW9uKGEpe2IoYSl9KX1mdW5jdGlvbiBpKGEsYixjKXsiZnVuY3Rpb24iPT10eXBlb2YgYiYmYS50aGVuKGIpLCJmdW5jdGlvbiI9PXR5cGVvZiBjJiZhLmNhdGNoKGMpfWZ1bmN0aW9uIGooYSl7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBhJiYoY29uc29sZS53YXJuKGErIiB1c2VkIGFzIGEga2V5LCBidXQgaXQgaXMgbm90IGEgc3RyaW5nLiIpLGE9U3RyaW5nKGEpKSxhfWZ1bmN0aW9uIGsoKXtpZihhcmd1bWVudHMubGVuZ3RoJiYiZnVuY3Rpb24iPT10eXBlb2YgYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGgtMV0pcmV0dXJuIGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoLTFdfWZ1bmN0aW9uIGwoYSl7Zm9yKHZhciBiPWEubGVuZ3RoLGM9bmV3IEFycmF5QnVmZmVyKGIpLGQ9bmV3IFVpbnQ4QXJyYXkoYyksZT0wO2U8YjtlKyspZFtlXT1hLmNoYXJDb2RlQXQoZSk7cmV0dXJuIGN9ZnVuY3Rpb24gbShhKXtyZXR1cm4gbmV3IHZhKGZ1bmN0aW9uKGIpe3ZhciBjPWEudHJhbnNhY3Rpb24od2EsQmEpLGQ9ZyhbIiJdKTtjLm9iamVjdFN0b3JlKHdhKS5wdXQoZCwia2V5IiksYy5vbmFib3J0PWZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpLGIoITEpfSxjLm9uY29tcGxldGU9ZnVuY3Rpb24oKXt2YXIgYT1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9DaHJvbWVcLyhcZCspLyksYz1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9FZGdlXC8vKTtiKGN8fCFhfHxwYXJzZUludChhWzFdLDEwKT49NDMpfX0pLmNhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuITF9KX1mdW5jdGlvbiBuKGEpe3JldHVybiJib29sZWFuIj09dHlwZW9mIHhhP3ZhLnJlc29sdmUoeGEpOm0oYSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4geGE9YX0pfWZ1bmN0aW9uIG8oYSl7dmFyIGI9eWFbYS5uYW1lXSxjPXt9O2MucHJvbWlzZT1uZXcgdmEoZnVuY3Rpb24oYSxiKXtjLnJlc29sdmU9YSxjLnJlamVjdD1ifSksYi5kZWZlcnJlZE9wZXJhdGlvbnMucHVzaChjKSxiLmRiUmVhZHk/Yi5kYlJlYWR5PWIuZGJSZWFkeS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGMucHJvbWlzZX0pOmIuZGJSZWFkeT1jLnByb21pc2V9ZnVuY3Rpb24gcChhKXt2YXIgYj15YVthLm5hbWVdLGM9Yi5kZWZlcnJlZE9wZXJhdGlvbnMucG9wKCk7aWYoYylyZXR1cm4gYy5yZXNvbHZlKCksYy5wcm9taXNlfWZ1bmN0aW9uIHEoYSxiKXt2YXIgYz15YVthLm5hbWVdLGQ9Yy5kZWZlcnJlZE9wZXJhdGlvbnMucG9wKCk7aWYoZClyZXR1cm4gZC5yZWplY3QoYiksZC5wcm9taXNlfWZ1bmN0aW9uIHIoYSxiKXtyZXR1cm4gbmV3IHZhKGZ1bmN0aW9uKGMsZCl7aWYoeWFbYS5uYW1lXT15YVthLm5hbWVdfHxCKCksYS5kYil7aWYoIWIpcmV0dXJuIGMoYS5kYik7byhhKSxhLmRiLmNsb3NlKCl9dmFyIGU9W2EubmFtZV07YiYmZS5wdXNoKGEudmVyc2lvbik7dmFyIGY9dWEub3Blbi5hcHBseSh1YSxlKTtiJiYoZi5vbnVwZ3JhZGVuZWVkZWQ9ZnVuY3Rpb24oYil7dmFyIGM9Zi5yZXN1bHQ7dHJ5e2MuY3JlYXRlT2JqZWN0U3RvcmUoYS5zdG9yZU5hbWUpLGIub2xkVmVyc2lvbjw9MSYmYy5jcmVhdGVPYmplY3RTdG9yZSh3YSl9Y2F0Y2goYyl7aWYoIkNvbnN0cmFpbnRFcnJvciIhPT1jLm5hbWUpdGhyb3cgYztjb25zb2xlLndhcm4oJ1RoZSBkYXRhYmFzZSAiJythLm5hbWUrJyIgaGFzIGJlZW4gdXBncmFkZWQgZnJvbSB2ZXJzaW9uICcrYi5vbGRWZXJzaW9uKyIgdG8gdmVyc2lvbiAiK2IubmV3VmVyc2lvbisnLCBidXQgdGhlIHN0b3JhZ2UgIicrYS5zdG9yZU5hbWUrJyIgYWxyZWFkeSBleGlzdHMuJyl9fSksZi5vbmVycm9yPWZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxkKGYuZXJyb3IpfSxmLm9uc3VjY2Vzcz1mdW5jdGlvbigpe2MoZi5yZXN1bHQpLHAoYSl9fSl9ZnVuY3Rpb24gcyhhKXtyZXR1cm4gcihhLCExKX1mdW5jdGlvbiB0KGEpe3JldHVybiByKGEsITApfWZ1bmN0aW9uIHUoYSxiKXtpZighYS5kYilyZXR1cm4hMDt2YXIgYz0hYS5kYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKGEuc3RvcmVOYW1lKSxkPWEudmVyc2lvbjxhLmRiLnZlcnNpb24sZT1hLnZlcnNpb24+YS5kYi52ZXJzaW9uO2lmKGQmJihhLnZlcnNpb24hPT1iJiZjb25zb2xlLndhcm4oJ1RoZSBkYXRhYmFzZSAiJythLm5hbWUrIlwiIGNhbid0IGJlIGRvd25ncmFkZWQgZnJvbSB2ZXJzaW9uICIrYS5kYi52ZXJzaW9uKyIgdG8gdmVyc2lvbiAiK2EudmVyc2lvbisiLiIpLGEudmVyc2lvbj1hLmRiLnZlcnNpb24pLGV8fGMpe2lmKGMpe3ZhciBmPWEuZGIudmVyc2lvbisxO2Y+YS52ZXJzaW9uJiYoYS52ZXJzaW9uPWYpfXJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIHYoYSl7cmV0dXJuIG5ldyB2YShmdW5jdGlvbihiLGMpe3ZhciBkPW5ldyBGaWxlUmVhZGVyO2Qub25lcnJvcj1jLGQub25sb2FkZW5kPWZ1bmN0aW9uKGMpe3ZhciBkPWJ0b2EoYy50YXJnZXQucmVzdWx0fHwiIik7Yih7X19sb2NhbF9mb3JhZ2VfZW5jb2RlZF9ibG9iOiEwLGRhdGE6ZCx0eXBlOmEudHlwZX0pfSxkLnJlYWRBc0JpbmFyeVN0cmluZyhhKX0pfWZ1bmN0aW9uIHcoYSl7cmV0dXJuIGcoW2woYXRvYihhLmRhdGEpKV0se3R5cGU6YS50eXBlfSl9ZnVuY3Rpb24geChhKXtyZXR1cm4gYSYmYS5fX2xvY2FsX2ZvcmFnZV9lbmNvZGVkX2Jsb2J9ZnVuY3Rpb24geShhKXt2YXIgYj10aGlzLGM9Yi5faW5pdFJlYWR5KCkudGhlbihmdW5jdGlvbigpe3ZhciBhPXlhW2IuX2RiSW5mby5uYW1lXTtpZihhJiZhLmRiUmVhZHkpcmV0dXJuIGEuZGJSZWFkeX0pO3JldHVybiBpKGMsYSxhKSxjfWZ1bmN0aW9uIHooYSl7byhhKTtmb3IodmFyIGI9eWFbYS5uYW1lXSxjPWIuZm9yYWdlcyxkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF07ZS5fZGJJbmZvLmRiJiYoZS5fZGJJbmZvLmRiLmNsb3NlKCksZS5fZGJJbmZvLmRiPW51bGwpfXJldHVybiBhLmRiPW51bGwscyhhKS50aGVuKGZ1bmN0aW9uKGIpe3JldHVybiBhLmRiPWIsdShhKT90KGEpOmJ9KS50aGVuKGZ1bmN0aW9uKGQpe2EuZGI9Yi5kYj1kO2Zvcih2YXIgZT0wO2U8Yy5sZW5ndGg7ZSsrKWNbZV0uX2RiSW5mby5kYj1kfSkuY2F0Y2goZnVuY3Rpb24oYil7dGhyb3cgcShhLGIpLGJ9KX1mdW5jdGlvbiBBKGEsYixjLGQpe3ZvaWQgMD09PWQmJihkPTEpO3RyeXt2YXIgZT1hLmRiLnRyYW5zYWN0aW9uKGEuc3RvcmVOYW1lLGIpO2MobnVsbCxlKX1jYXRjaChlKXtpZihkPjAmJighYS5kYnx8IkludmFsaWRTdGF0ZUVycm9yIj09PWUubmFtZXx8Ik5vdEZvdW5kRXJyb3IiPT09ZS5uYW1lKSlyZXR1cm4gdmEucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKXtpZighYS5kYnx8Ik5vdEZvdW5kRXJyb3IiPT09ZS5uYW1lJiYhYS5kYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKGEuc3RvcmVOYW1lKSYmYS52ZXJzaW9uPD1hLmRiLnZlcnNpb24pcmV0dXJuIGEuZGImJihhLnZlcnNpb249YS5kYi52ZXJzaW9uKzEpLHQoYSl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHooYSkudGhlbihmdW5jdGlvbigpe0EoYSxiLGMsZC0xKX0pfSkuY2F0Y2goYyk7YyhlKX19ZnVuY3Rpb24gQigpe3JldHVybntmb3JhZ2VzOltdLGRiOm51bGwsZGJSZWFkeTpudWxsLGRlZmVycmVkT3BlcmF0aW9uczpbXX19ZnVuY3Rpb24gQyhhKXtmdW5jdGlvbiBiKCl7cmV0dXJuIHZhLnJlc29sdmUoKX12YXIgYz10aGlzLGQ9e2RiOm51bGx9O2lmKGEpZm9yKHZhciBlIGluIGEpZFtlXT1hW2VdO3ZhciBmPXlhW2QubmFtZV07Znx8KGY9QigpLHlhW2QubmFtZV09ZiksZi5mb3JhZ2VzLnB1c2goYyksYy5faW5pdFJlYWR5fHwoYy5faW5pdFJlYWR5PWMucmVhZHksYy5yZWFkeT15KTtmb3IodmFyIGc9W10saD0wO2g8Zi5mb3JhZ2VzLmxlbmd0aDtoKyspe3ZhciBpPWYuZm9yYWdlc1toXTtpIT09YyYmZy5wdXNoKGkuX2luaXRSZWFkeSgpLmNhdGNoKGIpKX12YXIgaj1mLmZvcmFnZXMuc2xpY2UoMCk7cmV0dXJuIHZhLmFsbChnKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGQuZGI9Zi5kYixzKGQpfSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gZC5kYj1hLHUoZCxjLl9kZWZhdWx0Q29uZmlnLnZlcnNpb24pP3QoZCk6YX0pLnRoZW4oZnVuY3Rpb24oYSl7ZC5kYj1mLmRiPWEsYy5fZGJJbmZvPWQ7Zm9yKHZhciBiPTA7YjxqLmxlbmd0aDtiKyspe3ZhciBlPWpbYl07ZSE9PWMmJihlLl9kYkluZm8uZGI9ZC5kYixlLl9kYkluZm8udmVyc2lvbj1kLnZlcnNpb24pfX0pfWZ1bmN0aW9uIEQoYSxiKXt2YXIgYz10aGlzO2E9aihhKTt2YXIgZD1uZXcgdmEoZnVuY3Rpb24oYixkKXtjLnJlYWR5KCkudGhlbihmdW5jdGlvbigpe0EoYy5fZGJJbmZvLEFhLGZ1bmN0aW9uKGUsZil7aWYoZSlyZXR1cm4gZChlKTt0cnl7dmFyIGc9Zi5vYmplY3RTdG9yZShjLl9kYkluZm8uc3RvcmVOYW1lKSxoPWcuZ2V0KGEpO2gub25zdWNjZXNzPWZ1bmN0aW9uKCl7dmFyIGE9aC5yZXN1bHQ7dm9pZCAwPT09YSYmKGE9bnVsbCkseChhKSYmKGE9dyhhKSksYihhKX0saC5vbmVycm9yPWZ1bmN0aW9uKCl7ZChoLmVycm9yKX19Y2F0Y2goYSl7ZChhKX19KX0pLmNhdGNoKGQpfSk7cmV0dXJuIGgoZCxiKSxkfWZ1bmN0aW9uIEUoYSxiKXt2YXIgYz10aGlzLGQ9bmV3IHZhKGZ1bmN0aW9uKGIsZCl7Yy5yZWFkeSgpLnRoZW4oZnVuY3Rpb24oKXtBKGMuX2RiSW5mbyxBYSxmdW5jdGlvbihlLGYpe2lmKGUpcmV0dXJuIGQoZSk7dHJ5e3ZhciBnPWYub2JqZWN0U3RvcmUoYy5fZGJJbmZvLnN0b3JlTmFtZSksaD1nLm9wZW5DdXJzb3IoKSxpPTE7aC5vbnN1Y2Nlc3M9ZnVuY3Rpb24oKXt2YXIgYz1oLnJlc3VsdDtpZihjKXt2YXIgZD1jLnZhbHVlO3goZCkmJihkPXcoZCkpO3ZhciBlPWEoZCxjLmtleSxpKyspO3ZvaWQgMCE9PWU/YihlKTpjLmNvbnRpbnVlKCl9ZWxzZSBiKCl9LGgub25lcnJvcj1mdW5jdGlvbigpe2QoaC5lcnJvcil9fWNhdGNoKGEpe2QoYSl9fSl9KS5jYXRjaChkKX0pO3JldHVybiBoKGQsYiksZH1mdW5jdGlvbiBGKGEsYixjKXt2YXIgZD10aGlzO2E9aihhKTt2YXIgZT1uZXcgdmEoZnVuY3Rpb24oYyxlKXt2YXIgZjtkLnJlYWR5KCkudGhlbihmdW5jdGlvbigpe3JldHVybiBmPWQuX2RiSW5mbywiW29iamVjdCBCbG9iXSI9PT16YS5jYWxsKGIpP24oZi5kYikudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gYT9iOnYoYil9KTpifSkudGhlbihmdW5jdGlvbihiKXtBKGQuX2RiSW5mbyxCYSxmdW5jdGlvbihmLGcpe2lmKGYpcmV0dXJuIGUoZik7dHJ5e3ZhciBoPWcub2JqZWN0U3RvcmUoZC5fZGJJbmZvLnN0b3JlTmFtZSk7bnVsbD09PWImJihiPXZvaWQgMCk7dmFyIGk9aC5wdXQoYixhKTtnLm9uY29tcGxldGU9ZnVuY3Rpb24oKXt2b2lkIDA9PT1iJiYoYj1udWxsKSxjKGIpfSxnLm9uYWJvcnQ9Zy5vbmVycm9yPWZ1bmN0aW9uKCl7dmFyIGE9aS5lcnJvcj9pLmVycm9yOmkudHJhbnNhY3Rpb24uZXJyb3I7ZShhKX19Y2F0Y2goYSl7ZShhKX19KX0pLmNhdGNoKGUpfSk7cmV0dXJuIGgoZSxjKSxlfWZ1bmN0aW9uIEcoYSxiKXt2YXIgYz10aGlzO2E9aihhKTt2YXIgZD1uZXcgdmEoZnVuY3Rpb24oYixkKXtjLnJlYWR5KCkudGhlbihmdW5jdGlvbigpe0EoYy5fZGJJbmZvLEJhLGZ1bmN0aW9uKGUsZil7aWYoZSlyZXR1cm4gZChlKTt0cnl7dmFyIGc9Zi5vYmplY3RTdG9yZShjLl9kYkluZm8uc3RvcmVOYW1lKSxoPWcuZGVsZXRlKGEpO2Yub25jb21wbGV0ZT1mdW5jdGlvbigpe2IoKX0sZi5vbmVycm9yPWZ1bmN0aW9uKCl7ZChoLmVycm9yKX0sZi5vbmFib3J0PWZ1bmN0aW9uKCl7dmFyIGE9aC5lcnJvcj9oLmVycm9yOmgudHJhbnNhY3Rpb24uZXJyb3I7ZChhKX19Y2F0Y2goYSl7ZChhKX19KX0pLmNhdGNoKGQpfSk7cmV0dXJuIGgoZCxiKSxkfWZ1bmN0aW9uIEgoYSl7dmFyIGI9dGhpcyxjPW5ldyB2YShmdW5jdGlvbihhLGMpe2IucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7QShiLl9kYkluZm8sQmEsZnVuY3Rpb24oZCxlKXtpZihkKXJldHVybiBjKGQpO3RyeXt2YXIgZj1lLm9iamVjdFN0b3JlKGIuX2RiSW5mby5zdG9yZU5hbWUpLGc9Zi5jbGVhcigpO2Uub25jb21wbGV0ZT1mdW5jdGlvbigpe2EoKX0sZS5vbmFib3J0PWUub25lcnJvcj1mdW5jdGlvbigpe3ZhciBhPWcuZXJyb3I/Zy5lcnJvcjpnLnRyYW5zYWN0aW9uLmVycm9yO2MoYSl9fWNhdGNoKGEpe2MoYSl9fSl9KS5jYXRjaChjKX0pO3JldHVybiBoKGMsYSksY31mdW5jdGlvbiBJKGEpe3ZhciBiPXRoaXMsYz1uZXcgdmEoZnVuY3Rpb24oYSxjKXtiLnJlYWR5KCkudGhlbihmdW5jdGlvbigpe0EoYi5fZGJJbmZvLEFhLGZ1bmN0aW9uKGQsZSl7aWYoZClyZXR1cm4gYyhkKTt0cnl7dmFyIGY9ZS5vYmplY3RTdG9yZShiLl9kYkluZm8uc3RvcmVOYW1lKSxnPWYuY291bnQoKTtnLm9uc3VjY2Vzcz1mdW5jdGlvbigpe2EoZy5yZXN1bHQpfSxnLm9uZXJyb3I9ZnVuY3Rpb24oKXtjKGcuZXJyb3IpfX1jYXRjaChhKXtjKGEpfX0pfSkuY2F0Y2goYyl9KTtyZXR1cm4gaChjLGEpLGN9ZnVuY3Rpb24gSihhLGIpe3ZhciBjPXRoaXMsZD1uZXcgdmEoZnVuY3Rpb24oYixkKXtpZihhPDApcmV0dXJuIHZvaWQgYihudWxsKTtjLnJlYWR5KCkudGhlbihmdW5jdGlvbigpe0EoYy5fZGJJbmZvLEFhLGZ1bmN0aW9uKGUsZil7aWYoZSlyZXR1cm4gZChlKTt0cnl7dmFyIGc9Zi5vYmplY3RTdG9yZShjLl9kYkluZm8uc3RvcmVOYW1lKSxoPSExLGk9Zy5vcGVuQ3Vyc29yKCk7aS5vbnN1Y2Nlc3M9ZnVuY3Rpb24oKXt2YXIgYz1pLnJlc3VsdDtpZighYylyZXR1cm4gdm9pZCBiKG51bGwpOzA9PT1hP2IoYy5rZXkpOmg/YihjLmtleSk6KGg9ITAsYy5hZHZhbmNlKGEpKX0saS5vbmVycm9yPWZ1bmN0aW9uKCl7ZChpLmVycm9yKX19Y2F0Y2goYSl7ZChhKX19KX0pLmNhdGNoKGQpfSk7cmV0dXJuIGgoZCxiKSxkfWZ1bmN0aW9uIEsoYSl7dmFyIGI9dGhpcyxjPW5ldyB2YShmdW5jdGlvbihhLGMpe2IucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7QShiLl9kYkluZm8sQWEsZnVuY3Rpb24oZCxlKXtpZihkKXJldHVybiBjKGQpO3RyeXt2YXIgZj1lLm9iamVjdFN0b3JlKGIuX2RiSW5mby5zdG9yZU5hbWUpLGc9Zi5vcGVuQ3Vyc29yKCksaD1bXTtnLm9uc3VjY2Vzcz1mdW5jdGlvbigpe3ZhciBiPWcucmVzdWx0O2lmKCFiKXJldHVybiB2b2lkIGEoaCk7aC5wdXNoKGIua2V5KSxiLmNvbnRpbnVlKCl9LGcub25lcnJvcj1mdW5jdGlvbigpe2MoZy5lcnJvcil9fWNhdGNoKGEpe2MoYSl9fSl9KS5jYXRjaChjKX0pO3JldHVybiBoKGMsYSksY31mdW5jdGlvbiBMKGEsYil7Yj1rLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYz10aGlzLmNvbmZpZygpO2E9ImZ1bmN0aW9uIiE9dHlwZW9mIGEmJmF8fHt9LGEubmFtZXx8KGEubmFtZT1hLm5hbWV8fGMubmFtZSxhLnN0b3JlTmFtZT1hLnN0b3JlTmFtZXx8Yy5zdG9yZU5hbWUpO3ZhciBkLGU9dGhpcztpZihhLm5hbWUpe3ZhciBmPWEubmFtZT09PWMubmFtZSYmZS5fZGJJbmZvLmRiLGc9Zj92YS5yZXNvbHZlKGUuX2RiSW5mby5kYik6cyhhKS50aGVuKGZ1bmN0aW9uKGIpe3ZhciBjPXlhW2EubmFtZV0sZD1jLmZvcmFnZXM7Yy5kYj1iO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKWRbZV0uX2RiSW5mby5kYj1iO3JldHVybiBifSk7ZD1hLnN0b3JlTmFtZT9nLnRoZW4oZnVuY3Rpb24oYil7aWYoYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKGEuc3RvcmVOYW1lKSl7dmFyIGM9Yi52ZXJzaW9uKzE7byhhKTt2YXIgZD15YVthLm5hbWVdLGU9ZC5mb3JhZ2VzO2IuY2xvc2UoKTtmb3IodmFyIGY9MDtmPGUubGVuZ3RoO2YrKyl7dmFyIGc9ZVtmXTtnLl9kYkluZm8uZGI9bnVsbCxnLl9kYkluZm8udmVyc2lvbj1jfXJldHVybiBuZXcgdmEoZnVuY3Rpb24oYixkKXt2YXIgZT11YS5vcGVuKGEubmFtZSxjKTtlLm9uZXJyb3I9ZnVuY3Rpb24oYSl7ZS5yZXN1bHQuY2xvc2UoKSxkKGEpfSxlLm9udXBncmFkZW5lZWRlZD1mdW5jdGlvbigpe2UucmVzdWx0LmRlbGV0ZU9iamVjdFN0b3JlKGEuc3RvcmVOYW1lKX0sZS5vbnN1Y2Nlc3M9ZnVuY3Rpb24oKXt2YXIgYT1lLnJlc3VsdDthLmNsb3NlKCksYihhKX19KS50aGVuKGZ1bmN0aW9uKGEpe2QuZGI9YTtmb3IodmFyIGI9MDtiPGUubGVuZ3RoO2IrKyl7dmFyIGM9ZVtiXTtjLl9kYkluZm8uZGI9YSxwKGMuX2RiSW5mbyl9fSkuY2F0Y2goZnVuY3Rpb24oYil7dGhyb3cocShhLGIpfHx2YS5yZXNvbHZlKCkpLmNhdGNoKGZ1bmN0aW9uKCl7fSksYn0pfX0pOmcudGhlbihmdW5jdGlvbihiKXtvKGEpO3ZhciBjPXlhW2EubmFtZV0sZD1jLmZvcmFnZXM7Yi5jbG9zZSgpO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXtkW2VdLl9kYkluZm8uZGI9bnVsbH1yZXR1cm4gbmV3IHZhKGZ1bmN0aW9uKGIsYyl7dmFyIGQ9dWEuZGVsZXRlRGF0YWJhc2UoYS5uYW1lKTtkLm9uZXJyb3I9ZC5vbmJsb2NrZWQ9ZnVuY3Rpb24oYSl7dmFyIGI9ZC5yZXN1bHQ7YiYmYi5jbG9zZSgpLGMoYSl9LGQub25zdWNjZXNzPWZ1bmN0aW9uKCl7dmFyIGE9ZC5yZXN1bHQ7YSYmYS5jbG9zZSgpLGIoYSl9fSkudGhlbihmdW5jdGlvbihhKXtjLmRiPWE7Zm9yKHZhciBiPTA7YjxkLmxlbmd0aDtiKyspcChkW2JdLl9kYkluZm8pfSkuY2F0Y2goZnVuY3Rpb24oYil7dGhyb3cocShhLGIpfHx2YS5yZXNvbHZlKCkpLmNhdGNoKGZ1bmN0aW9uKCl7fSksYn0pfSl9ZWxzZSBkPXZhLnJlamVjdCgiSW52YWxpZCBhcmd1bWVudHMiKTtyZXR1cm4gaChkLGIpLGR9ZnVuY3Rpb24gTSgpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBvcGVuRGF0YWJhc2V9ZnVuY3Rpb24gTihhKXt2YXIgYixjLGQsZSxmLGc9Ljc1KmEubGVuZ3RoLGg9YS5sZW5ndGgsaT0wOyI9Ij09PWFbYS5sZW5ndGgtMV0mJihnLS0sIj0iPT09YVthLmxlbmd0aC0yXSYmZy0tKTt2YXIgaj1uZXcgQXJyYXlCdWZmZXIoZyksaz1uZXcgVWludDhBcnJheShqKTtmb3IoYj0wO2I8aDtiKz00KWM9RGEuaW5kZXhPZihhW2JdKSxkPURhLmluZGV4T2YoYVtiKzFdKSxlPURhLmluZGV4T2YoYVtiKzJdKSxmPURhLmluZGV4T2YoYVtiKzNdKSxrW2krK109Yzw8MnxkPj40LGtbaSsrXT0oMTUmZCk8PDR8ZT4+MixrW2krK109KDMmZSk8PDZ8NjMmZjtyZXR1cm4gan1mdW5jdGlvbiBPKGEpe3ZhciBiLGM9bmV3IFVpbnQ4QXJyYXkoYSksZD0iIjtmb3IoYj0wO2I8Yy5sZW5ndGg7Yis9MylkKz1EYVtjW2JdPj4yXSxkKz1EYVsoMyZjW2JdKTw8NHxjW2IrMV0+PjRdLGQrPURhWygxNSZjW2IrMV0pPDwyfGNbYisyXT4+Nl0sZCs9RGFbNjMmY1tiKzJdXTtyZXR1cm4gYy5sZW5ndGglMz09Mj9kPWQuc3Vic3RyaW5nKDAsZC5sZW5ndGgtMSkrIj0iOmMubGVuZ3RoJTM9PTEmJihkPWQuc3Vic3RyaW5nKDAsZC5sZW5ndGgtMikrIj09IiksZH1mdW5jdGlvbiBQKGEsYil7dmFyIGM9IiI7aWYoYSYmKGM9VWEuY2FsbChhKSksYSYmKCJbb2JqZWN0IEFycmF5QnVmZmVyXSI9PT1jfHxhLmJ1ZmZlciYmIltvYmplY3QgQXJyYXlCdWZmZXJdIj09PVVhLmNhbGwoYS5idWZmZXIpKSl7dmFyIGQsZT1HYTthIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI/KGQ9YSxlKz1JYSk6KGQ9YS5idWZmZXIsIltvYmplY3QgSW50OEFycmF5XSI9PT1jP2UrPUthOiJbb2JqZWN0IFVpbnQ4QXJyYXldIj09PWM/ZSs9TGE6IltvYmplY3QgVWludDhDbGFtcGVkQXJyYXldIj09PWM/ZSs9TWE6IltvYmplY3QgSW50MTZBcnJheV0iPT09Yz9lKz1OYToiW29iamVjdCBVaW50MTZBcnJheV0iPT09Yz9lKz1QYToiW29iamVjdCBJbnQzMkFycmF5XSI9PT1jP2UrPU9hOiJbb2JqZWN0IFVpbnQzMkFycmF5XSI9PT1jP2UrPVFhOiJbb2JqZWN0IEZsb2F0MzJBcnJheV0iPT09Yz9lKz1SYToiW29iamVjdCBGbG9hdDY0QXJyYXldIj09PWM/ZSs9U2E6YihuZXcgRXJyb3IoIkZhaWxlZCB0byBnZXQgdHlwZSBmb3IgQmluYXJ5QXJyYXkiKSkpLGIoZStPKGQpKX1lbHNlIGlmKCJbb2JqZWN0IEJsb2JdIj09PWMpe3ZhciBmPW5ldyBGaWxlUmVhZGVyO2Yub25sb2FkPWZ1bmN0aW9uKCl7dmFyIGM9RWErYS50eXBlKyJ+IitPKHRoaXMucmVzdWx0KTtiKEdhK0phK2MpfSxmLnJlYWRBc0FycmF5QnVmZmVyKGEpfWVsc2UgdHJ5e2IoSlNPTi5zdHJpbmdpZnkoYSkpfWNhdGNoKGMpe2NvbnNvbGUuZXJyb3IoIkNvdWxkbid0IGNvbnZlcnQgdmFsdWUgaW50byBhIEpTT04gc3RyaW5nOiAiLGEpLGIobnVsbCxjKX19ZnVuY3Rpb24gUShhKXtpZihhLnN1YnN0cmluZygwLEhhKSE9PUdhKXJldHVybiBKU09OLnBhcnNlKGEpO3ZhciBiLGM9YS5zdWJzdHJpbmcoVGEpLGQ9YS5zdWJzdHJpbmcoSGEsVGEpO2lmKGQ9PT1KYSYmRmEudGVzdChjKSl7dmFyIGU9Yy5tYXRjaChGYSk7Yj1lWzFdLGM9Yy5zdWJzdHJpbmcoZVswXS5sZW5ndGgpfXZhciBmPU4oYyk7c3dpdGNoKGQpe2Nhc2UgSWE6cmV0dXJuIGY7Y2FzZSBKYTpyZXR1cm4gZyhbZl0se3R5cGU6Yn0pO2Nhc2UgS2E6cmV0dXJuIG5ldyBJbnQ4QXJyYXkoZik7Y2FzZSBMYTpyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoZik7Y2FzZSBNYTpyZXR1cm4gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGYpO2Nhc2UgTmE6cmV0dXJuIG5ldyBJbnQxNkFycmF5KGYpO2Nhc2UgUGE6cmV0dXJuIG5ldyBVaW50MTZBcnJheShmKTtjYXNlIE9hOnJldHVybiBuZXcgSW50MzJBcnJheShmKTtjYXNlIFFhOnJldHVybiBuZXcgVWludDMyQXJyYXkoZik7Y2FzZSBSYTpyZXR1cm4gbmV3IEZsb2F0MzJBcnJheShmKTtjYXNlIFNhOnJldHVybiBuZXcgRmxvYXQ2NEFycmF5KGYpO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbmtvd24gdHlwZTogIitkKX19ZnVuY3Rpb24gUihhLGIsYyxkKXthLmV4ZWN1dGVTcWwoIkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTICIrYi5zdG9yZU5hbWUrIiAoaWQgSU5URUdFUiBQUklNQVJZIEtFWSwga2V5IHVuaXF1ZSwgdmFsdWUpIixbXSxjLGQpfWZ1bmN0aW9uIFMoYSl7dmFyIGI9dGhpcyxjPXtkYjpudWxsfTtpZihhKWZvcih2YXIgZCBpbiBhKWNbZF09InN0cmluZyIhPXR5cGVvZiBhW2RdP2FbZF0udG9TdHJpbmcoKTphW2RdO3ZhciBlPW5ldyB2YShmdW5jdGlvbihhLGQpe3RyeXtjLmRiPW9wZW5EYXRhYmFzZShjLm5hbWUsU3RyaW5nKGMudmVyc2lvbiksYy5kZXNjcmlwdGlvbixjLnNpemUpfWNhdGNoKGEpe3JldHVybiBkKGEpfWMuZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24oZSl7UihlLGMsZnVuY3Rpb24oKXtiLl9kYkluZm89YyxhKCl9LGZ1bmN0aW9uKGEsYil7ZChiKX0pfSxkKX0pO3JldHVybiBjLnNlcmlhbGl6ZXI9VmEsZX1mdW5jdGlvbiBUKGEsYixjLGQsZSxmKXthLmV4ZWN1dGVTcWwoYyxkLGUsZnVuY3Rpb24oYSxnKXtnLmNvZGU9PT1nLlNZTlRBWF9FUlI/YS5leGVjdXRlU3FsKCJTRUxFQ1QgbmFtZSBGUk9NIHNxbGl0ZV9tYXN0ZXIgV0hFUkUgdHlwZT0ndGFibGUnIEFORCBuYW1lID0gPyIsW25hbWVdLGZ1bmN0aW9uKGEsaCl7aC5yb3dzLmxlbmd0aD9mKGEsZyk6UihhLGIsZnVuY3Rpb24oKXthLmV4ZWN1dGVTcWwoYyxkLGUsZil9LGYpfSxmKTpmKGEsZyl9LGYpfWZ1bmN0aW9uIFUoYSxiKXt2YXIgYz10aGlzO2E9aihhKTt2YXIgZD1uZXcgdmEoZnVuY3Rpb24oYixkKXtjLnJlYWR5KCkudGhlbihmdW5jdGlvbigpe3ZhciBlPWMuX2RiSW5mbztlLmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uKGMpe1QoYyxlLCJTRUxFQ1QgKiBGUk9NICIrZS5zdG9yZU5hbWUrIiBXSEVSRSBrZXkgPSA/IExJTUlUIDEiLFthXSxmdW5jdGlvbihhLGMpe3ZhciBkPWMucm93cy5sZW5ndGg/Yy5yb3dzLml0ZW0oMCkudmFsdWU6bnVsbDtkJiYoZD1lLnNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoZCkpLGIoZCl9LGZ1bmN0aW9uKGEsYil7ZChiKX0pfSl9KS5jYXRjaChkKX0pO3JldHVybiBoKGQsYiksZH1mdW5jdGlvbiBWKGEsYil7dmFyIGM9dGhpcyxkPW5ldyB2YShmdW5jdGlvbihiLGQpe2MucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7dmFyIGU9Yy5fZGJJbmZvO2UuZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24oYyl7VChjLGUsIlNFTEVDVCAqIEZST00gIitlLnN0b3JlTmFtZSxbXSxmdW5jdGlvbihjLGQpe2Zvcih2YXIgZj1kLnJvd3MsZz1mLmxlbmd0aCxoPTA7aDxnO2grKyl7dmFyIGk9Zi5pdGVtKGgpLGo9aS52YWx1ZTtpZihqJiYoaj1lLnNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoaikpLHZvaWQgMCE9PShqPWEoaixpLmtleSxoKzEpKSlyZXR1cm4gdm9pZCBiKGopfWIoKX0sZnVuY3Rpb24oYSxiKXtkKGIpfSl9KX0pLmNhdGNoKGQpfSk7cmV0dXJuIGgoZCxiKSxkfWZ1bmN0aW9uIFcoYSxiLGMsZCl7dmFyIGU9dGhpczthPWooYSk7dmFyIGY9bmV3IHZhKGZ1bmN0aW9uKGYsZyl7ZS5yZWFkeSgpLnRoZW4oZnVuY3Rpb24oKXt2b2lkIDA9PT1iJiYoYj1udWxsKTt2YXIgaD1iLGk9ZS5fZGJJbmZvO2kuc2VyaWFsaXplci5zZXJpYWxpemUoYixmdW5jdGlvbihiLGope2o/ZyhqKTppLmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uKGMpe1QoYyxpLCJJTlNFUlQgT1IgUkVQTEFDRSBJTlRPICIraS5zdG9yZU5hbWUrIiAoa2V5LCB2YWx1ZSkgVkFMVUVTICg/LCA/KSIsW2EsYl0sZnVuY3Rpb24oKXtmKGgpfSxmdW5jdGlvbihhLGIpe2coYil9KX0sZnVuY3Rpb24oYil7aWYoYi5jb2RlPT09Yi5RVU9UQV9FUlIpe2lmKGQ+MClyZXR1cm4gdm9pZCBmKFcuYXBwbHkoZSxbYSxoLGMsZC0xXSkpO2coYil9fSl9KX0pLmNhdGNoKGcpfSk7cmV0dXJuIGgoZixjKSxmfWZ1bmN0aW9uIFgoYSxiLGMpe3JldHVybiBXLmFwcGx5KHRoaXMsW2EsYixjLDFdKX1mdW5jdGlvbiBZKGEsYil7dmFyIGM9dGhpczthPWooYSk7dmFyIGQ9bmV3IHZhKGZ1bmN0aW9uKGIsZCl7Yy5yZWFkeSgpLnRoZW4oZnVuY3Rpb24oKXt2YXIgZT1jLl9kYkluZm87ZS5kYi50cmFuc2FjdGlvbihmdW5jdGlvbihjKXtUKGMsZSwiREVMRVRFIEZST00gIitlLnN0b3JlTmFtZSsiIFdIRVJFIGtleSA9ID8iLFthXSxmdW5jdGlvbigpe2IoKX0sZnVuY3Rpb24oYSxiKXtkKGIpfSl9KX0pLmNhdGNoKGQpfSk7cmV0dXJuIGgoZCxiKSxkfWZ1bmN0aW9uIFooYSl7dmFyIGI9dGhpcyxjPW5ldyB2YShmdW5jdGlvbihhLGMpe2IucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7dmFyIGQ9Yi5fZGJJbmZvO2QuZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24oYil7VChiLGQsIkRFTEVURSBGUk9NICIrZC5zdG9yZU5hbWUsW10sZnVuY3Rpb24oKXthKCl9LGZ1bmN0aW9uKGEsYil7YyhiKX0pfSl9KS5jYXRjaChjKX0pO3JldHVybiBoKGMsYSksY31mdW5jdGlvbiAkKGEpe3ZhciBiPXRoaXMsYz1uZXcgdmEoZnVuY3Rpb24oYSxjKXtiLnJlYWR5KCkudGhlbihmdW5jdGlvbigpe3ZhciBkPWIuX2RiSW5mbztkLmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uKGIpe1QoYixkLCJTRUxFQ1QgQ09VTlQoa2V5KSBhcyBjIEZST00gIitkLnN0b3JlTmFtZSxbXSxmdW5jdGlvbihiLGMpe3ZhciBkPWMucm93cy5pdGVtKDApLmM7YShkKX0sZnVuY3Rpb24oYSxiKXtjKGIpfSl9KX0pLmNhdGNoKGMpfSk7cmV0dXJuIGgoYyxhKSxjfWZ1bmN0aW9uIF8oYSxiKXt2YXIgYz10aGlzLGQ9bmV3IHZhKGZ1bmN0aW9uKGIsZCl7Yy5yZWFkeSgpLnRoZW4oZnVuY3Rpb24oKXt2YXIgZT1jLl9kYkluZm87ZS5kYi50cmFuc2FjdGlvbihmdW5jdGlvbihjKXtUKGMsZSwiU0VMRUNUIGtleSBGUk9NICIrZS5zdG9yZU5hbWUrIiBXSEVSRSBpZCA9ID8gTElNSVQgMSIsW2ErMV0sZnVuY3Rpb24oYSxjKXt2YXIgZD1jLnJvd3MubGVuZ3RoP2Mucm93cy5pdGVtKDApLmtleTpudWxsO2IoZCl9LGZ1bmN0aW9uKGEsYil7ZChiKX0pfSl9KS5jYXRjaChkKX0pO3JldHVybiBoKGQsYiksZH1mdW5jdGlvbiBhYShhKXt2YXIgYj10aGlzLGM9bmV3IHZhKGZ1bmN0aW9uKGEsYyl7Yi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24oKXt2YXIgZD1iLl9kYkluZm87ZC5kYi50cmFuc2FjdGlvbihmdW5jdGlvbihiKXtUKGIsZCwiU0VMRUNUIGtleSBGUk9NICIrZC5zdG9yZU5hbWUsW10sZnVuY3Rpb24oYixjKXtmb3IodmFyIGQ9W10sZT0wO2U8Yy5yb3dzLmxlbmd0aDtlKyspZC5wdXNoKGMucm93cy5pdGVtKGUpLmtleSk7YShkKX0sZnVuY3Rpb24oYSxiKXtjKGIpfSl9KX0pLmNhdGNoKGMpfSk7cmV0dXJuIGgoYyxhKSxjfWZ1bmN0aW9uIGJhKGEpe3JldHVybiBuZXcgdmEoZnVuY3Rpb24oYixjKXthLnRyYW5zYWN0aW9uKGZ1bmN0aW9uKGQpe2QuZXhlY3V0ZVNxbCgiU0VMRUNUIG5hbWUgRlJPTSBzcWxpdGVfbWFzdGVyIFdIRVJFIHR5cGU9J3RhYmxlJyBBTkQgbmFtZSA8PiAnX19XZWJLaXREYXRhYmFzZUluZm9UYWJsZV9fJyIsW10sZnVuY3Rpb24oYyxkKXtmb3IodmFyIGU9W10sZj0wO2Y8ZC5yb3dzLmxlbmd0aDtmKyspZS5wdXNoKGQucm93cy5pdGVtKGYpLm5hbWUpO2Ioe2RiOmEsc3RvcmVOYW1lczplfSl9LGZ1bmN0aW9uKGEsYil7YyhiKX0pfSxmdW5jdGlvbihhKXtjKGEpfSl9KX1mdW5jdGlvbiBjYShhLGIpe2I9ay5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGM9dGhpcy5jb25maWcoKTthPSJmdW5jdGlvbiIhPXR5cGVvZiBhJiZhfHx7fSxhLm5hbWV8fChhLm5hbWU9YS5uYW1lfHxjLm5hbWUsYS5zdG9yZU5hbWU9YS5zdG9yZU5hbWV8fGMuc3RvcmVOYW1lKTt2YXIgZCxlPXRoaXM7cmV0dXJuIGQ9YS5uYW1lP25ldyB2YShmdW5jdGlvbihiKXt2YXIgZDtkPWEubmFtZT09PWMubmFtZT9lLl9kYkluZm8uZGI6b3BlbkRhdGFiYXNlKGEubmFtZSwiIiwiIiwwKSxiKGEuc3RvcmVOYW1lP3tkYjpkLHN0b3JlTmFtZXM6W2Euc3RvcmVOYW1lXX06YmEoZCkpfSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gbmV3IHZhKGZ1bmN0aW9uKGIsYyl7YS5kYi50cmFuc2FjdGlvbihmdW5jdGlvbihkKXtmdW5jdGlvbiBlKGEpe3JldHVybiBuZXcgdmEoZnVuY3Rpb24oYixjKXtkLmV4ZWN1dGVTcWwoIkRST1AgVEFCTEUgSUYgRVhJU1RTICIrYSxbXSxmdW5jdGlvbigpe2IoKX0sZnVuY3Rpb24oYSxiKXtjKGIpfSl9KX1mb3IodmFyIGY9W10sZz0wLGg9YS5zdG9yZU5hbWVzLmxlbmd0aDtnPGg7ZysrKWYucHVzaChlKGEuc3RvcmVOYW1lc1tnXSkpO3ZhLmFsbChmKS50aGVuKGZ1bmN0aW9uKCl7YigpfSkuY2F0Y2goZnVuY3Rpb24oYSl7YyhhKX0pfSxmdW5jdGlvbihhKXtjKGEpfSl9KX0pOnZhLnJlamVjdCgiSW52YWxpZCBhcmd1bWVudHMiKSxoKGQsYiksZH1mdW5jdGlvbiBkYSgpe3RyeXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIGxvY2FsU3RvcmFnZSYmInNldEl0ZW0iaW4gbG9jYWxTdG9yYWdlJiYhIWxvY2FsU3RvcmFnZS5zZXRJdGVtfWNhdGNoKGEpe3JldHVybiExfX1mdW5jdGlvbiBlYShhLGIpe3ZhciBjPWEubmFtZSsiLyI7cmV0dXJuIGEuc3RvcmVOYW1lIT09Yi5zdG9yZU5hbWUmJihjKz1hLnN0b3JlTmFtZSsiLyIpLGN9ZnVuY3Rpb24gZmEoKXt2YXIgYT0iX2xvY2FsZm9yYWdlX3N1cHBvcnRfdGVzdCI7dHJ5e3JldHVybiBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShhLCEwKSxsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShhKSwhMX1jYXRjaChhKXtyZXR1cm4hMH19ZnVuY3Rpb24gZ2EoKXtyZXR1cm4hZmEoKXx8bG9jYWxTdG9yYWdlLmxlbmd0aD4wfWZ1bmN0aW9uIGhhKGEpe3ZhciBiPXRoaXMsYz17fTtpZihhKWZvcih2YXIgZCBpbiBhKWNbZF09YVtkXTtyZXR1cm4gYy5rZXlQcmVmaXg9ZWEoYSxiLl9kZWZhdWx0Q29uZmlnKSxnYSgpPyhiLl9kYkluZm89YyxjLnNlcmlhbGl6ZXI9VmEsdmEucmVzb2x2ZSgpKTp2YS5yZWplY3QoKX1mdW5jdGlvbiBpYShhKXt2YXIgYj10aGlzLGM9Yi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24oKXtmb3IodmFyIGE9Yi5fZGJJbmZvLmtleVByZWZpeCxjPWxvY2FsU3RvcmFnZS5sZW5ndGgtMTtjPj0wO2MtLSl7dmFyIGQ9bG9jYWxTdG9yYWdlLmtleShjKTswPT09ZC5pbmRleE9mKGEpJiZsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShkKX19KTtyZXR1cm4gaChjLGEpLGN9ZnVuY3Rpb24gamEoYSxiKXt2YXIgYz10aGlzO2E9aihhKTt2YXIgZD1jLnJlYWR5KCkudGhlbihmdW5jdGlvbigpe3ZhciBiPWMuX2RiSW5mbyxkPWxvY2FsU3RvcmFnZS5nZXRJdGVtKGIua2V5UHJlZml4K2EpO3JldHVybiBkJiYoZD1iLnNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoZCkpLGR9KTtyZXR1cm4gaChkLGIpLGR9ZnVuY3Rpb24ga2EoYSxiKXt2YXIgYz10aGlzLGQ9Yy5yZWFkeSgpLnRoZW4oZnVuY3Rpb24oKXtmb3IodmFyIGI9Yy5fZGJJbmZvLGQ9Yi5rZXlQcmVmaXgsZT1kLmxlbmd0aCxmPWxvY2FsU3RvcmFnZS5sZW5ndGgsZz0xLGg9MDtoPGY7aCsrKXt2YXIgaT1sb2NhbFN0b3JhZ2Uua2V5KGgpO2lmKDA9PT1pLmluZGV4T2YoZCkpe3ZhciBqPWxvY2FsU3RvcmFnZS5nZXRJdGVtKGkpO2lmKGomJihqPWIuc2VyaWFsaXplci5kZXNlcmlhbGl6ZShqKSksdm9pZCAwIT09KGo9YShqLGkuc3Vic3RyaW5nKGUpLGcrKykpKXJldHVybiBqfX19KTtyZXR1cm4gaChkLGIpLGR9ZnVuY3Rpb24gbGEoYSxiKXt2YXIgYz10aGlzLGQ9Yy5yZWFkeSgpLnRoZW4oZnVuY3Rpb24oKXt2YXIgYixkPWMuX2RiSW5mbzt0cnl7Yj1sb2NhbFN0b3JhZ2Uua2V5KGEpfWNhdGNoKGEpe2I9bnVsbH1yZXR1cm4gYiYmKGI9Yi5zdWJzdHJpbmcoZC5rZXlQcmVmaXgubGVuZ3RoKSksYn0pO3JldHVybiBoKGQsYiksZH1mdW5jdGlvbiBtYShhKXt2YXIgYj10aGlzLGM9Yi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24oKXtmb3IodmFyIGE9Yi5fZGJJbmZvLGM9bG9jYWxTdG9yYWdlLmxlbmd0aCxkPVtdLGU9MDtlPGM7ZSsrKXt2YXIgZj1sb2NhbFN0b3JhZ2Uua2V5KGUpOzA9PT1mLmluZGV4T2YoYS5rZXlQcmVmaXgpJiZkLnB1c2goZi5zdWJzdHJpbmcoYS5rZXlQcmVmaXgubGVuZ3RoKSl9cmV0dXJuIGR9KTtyZXR1cm4gaChjLGEpLGN9ZnVuY3Rpb24gbmEoYSl7dmFyIGI9dGhpcyxjPWIua2V5cygpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGEubGVuZ3RofSk7cmV0dXJuIGgoYyxhKSxjfWZ1bmN0aW9uIG9hKGEsYil7dmFyIGM9dGhpczthPWooYSk7dmFyIGQ9Yy5yZWFkeSgpLnRoZW4oZnVuY3Rpb24oKXt2YXIgYj1jLl9kYkluZm87bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYi5rZXlQcmVmaXgrYSl9KTtyZXR1cm4gaChkLGIpLGR9ZnVuY3Rpb24gcGEoYSxiLGMpe3ZhciBkPXRoaXM7YT1qKGEpO3ZhciBlPWQucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7dm9pZCAwPT09YiYmKGI9bnVsbCk7dmFyIGM9YjtyZXR1cm4gbmV3IHZhKGZ1bmN0aW9uKGUsZil7dmFyIGc9ZC5fZGJJbmZvO2cuc2VyaWFsaXplci5zZXJpYWxpemUoYixmdW5jdGlvbihiLGQpe2lmKGQpZihkKTtlbHNlIHRyeXtsb2NhbFN0b3JhZ2Uuc2V0SXRlbShnLmtleVByZWZpeCthLGIpLGUoYyl9Y2F0Y2goYSl7IlF1b3RhRXhjZWVkZWRFcnJvciIhPT1hLm5hbWUmJiJOU19FUlJPUl9ET01fUVVPVEFfUkVBQ0hFRCIhPT1hLm5hbWV8fGYoYSksZihhKX19KX0pfSk7cmV0dXJuIGgoZSxjKSxlfWZ1bmN0aW9uIHFhKGEsYil7aWYoYj1rLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxhPSJmdW5jdGlvbiIhPXR5cGVvZiBhJiZhfHx7fSwhYS5uYW1lKXt2YXIgYz10aGlzLmNvbmZpZygpO2EubmFtZT1hLm5hbWV8fGMubmFtZSxhLnN0b3JlTmFtZT1hLnN0b3JlTmFtZXx8Yy5zdG9yZU5hbWV9dmFyIGQsZT10aGlzO3JldHVybiBkPWEubmFtZT9uZXcgdmEoZnVuY3Rpb24oYil7YihhLnN0b3JlTmFtZT9lYShhLGUuX2RlZmF1bHRDb25maWcpOmEubmFtZSsiLyIpfSkudGhlbihmdW5jdGlvbihhKXtmb3IodmFyIGI9bG9jYWxTdG9yYWdlLmxlbmd0aC0xO2I+PTA7Yi0tKXt2YXIgYz1sb2NhbFN0b3JhZ2Uua2V5KGIpOzA9PT1jLmluZGV4T2YoYSkmJmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGMpfX0pOnZhLnJlamVjdCgiSW52YWxpZCBhcmd1bWVudHMiKSxoKGQsYiksZH1mdW5jdGlvbiByYShhLGIpe2FbYl09ZnVuY3Rpb24oKXt2YXIgYz1hcmd1bWVudHM7cmV0dXJuIGEucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGFbYl0uYXBwbHkoYSxjKX0pfX1mdW5jdGlvbiBzYSgpe2Zvcih2YXIgYT0xO2E8YXJndW1lbnRzLmxlbmd0aDthKyspe3ZhciBiPWFyZ3VtZW50c1thXTtpZihiKWZvcih2YXIgYyBpbiBiKWIuaGFzT3duUHJvcGVydHkoYykmJigkYShiW2NdKT9hcmd1bWVudHNbMF1bY109YltjXS5zbGljZSgpOmFyZ3VtZW50c1swXVtjXT1iW2NdKX1yZXR1cm4gYXJndW1lbnRzWzBdfXZhciB0YT0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihhKXtyZXR1cm4gdHlwZW9mIGF9OmZ1bmN0aW9uKGEpe3JldHVybiBhJiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZhLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZhIT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2YgYX0sdWE9ZSgpOyJ1bmRlZmluZWQiPT10eXBlb2YgUHJvbWlzZSYmYSgzKTt2YXIgdmE9UHJvbWlzZSx3YT0ibG9jYWwtZm9yYWdlLWRldGVjdC1ibG9iLXN1cHBvcnQiLHhhPXZvaWQgMCx5YT17fSx6YT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLEFhPSJyZWFkb25seSIsQmE9InJlYWR3cml0ZSIsQ2E9e19kcml2ZXI6ImFzeW5jU3RvcmFnZSIsX2luaXRTdG9yYWdlOkMsX3N1cHBvcnQ6ZigpLGl0ZXJhdGU6RSxnZXRJdGVtOkQsc2V0SXRlbTpGLHJlbW92ZUl0ZW06RyxjbGVhcjpILGxlbmd0aDpJLGtleTpKLGtleXM6Syxkcm9wSW5zdGFuY2U6TH0sRGE9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iLEVhPSJ+fmxvY2FsX2ZvcmFnZV90eXBlfiIsRmE9L15+fmxvY2FsX2ZvcmFnZV90eXBlfihbXn5dKyl+LyxHYT0iX19sZnNjX186IixIYT1HYS5sZW5ndGgsSWE9ImFyYmYiLEphPSJibG9iIixLYT0ic2kwOCIsTGE9InVpMDgiLE1hPSJ1aWM4IixOYT0ic2kxNiIsT2E9InNpMzIiLFBhPSJ1cjE2IixRYT0idWkzMiIsUmE9ImZsMzIiLFNhPSJmbDY0IixUYT1IYStJYS5sZW5ndGgsVWE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxWYT17c2VyaWFsaXplOlAsZGVzZXJpYWxpemU6USxzdHJpbmdUb0J1ZmZlcjpOLGJ1ZmZlclRvU3RyaW5nOk99LFdhPXtfZHJpdmVyOiJ3ZWJTUUxTdG9yYWdlIixfaW5pdFN0b3JhZ2U6Uyxfc3VwcG9ydDpNKCksaXRlcmF0ZTpWLGdldEl0ZW06VSxzZXRJdGVtOlgscmVtb3ZlSXRlbTpZLGNsZWFyOlosbGVuZ3RoOiQsa2V5Ol8sa2V5czphYSxkcm9wSW5zdGFuY2U6Y2F9LFhhPXtfZHJpdmVyOiJsb2NhbFN0b3JhZ2VXcmFwcGVyIixfaW5pdFN0b3JhZ2U6aGEsX3N1cHBvcnQ6ZGEoKSxpdGVyYXRlOmthLGdldEl0ZW06amEsc2V0SXRlbTpwYSxyZW1vdmVJdGVtOm9hLGNsZWFyOmlhLGxlbmd0aDpuYSxrZXk6bGEsa2V5czptYSxkcm9wSW5zdGFuY2U6cWF9LFlhPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1ifHwibnVtYmVyIj09dHlwZW9mIGEmJiJudW1iZXIiPT10eXBlb2YgYiYmaXNOYU4oYSkmJmlzTmFOKGIpfSxaYT1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1hLmxlbmd0aCxkPTA7ZDxjOyl7aWYoWWEoYVtkXSxiKSlyZXR1cm4hMDtkKyt9cmV0dXJuITF9LCRhPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGEpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSl9LF9hPXt9LGFiPXt9LGJiPXtJTkRFWEVEREI6Q2EsV0VCU1FMOldhLExPQ0FMU1RPUkFHRTpYYX0sY2I9W2JiLklOREVYRUREQi5fZHJpdmVyLGJiLldFQlNRTC5fZHJpdmVyLGJiLkxPQ0FMU1RPUkFHRS5fZHJpdmVyXSxkYj1bImRyb3BJbnN0YW5jZSJdLGViPVsiY2xlYXIiLCJnZXRJdGVtIiwiaXRlcmF0ZSIsImtleSIsImtleXMiLCJsZW5ndGgiLCJyZW1vdmVJdGVtIiwic2V0SXRlbSJdLmNvbmNhdChkYiksZmI9e2Rlc2NyaXB0aW9uOiIiLGRyaXZlcjpjYi5zbGljZSgpLG5hbWU6ImxvY2FsZm9yYWdlIixzaXplOjQ5ODA3MzYsc3RvcmVOYW1lOiJrZXl2YWx1ZXBhaXJzIix2ZXJzaW9uOjF9LGdiPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiKXtkKHRoaXMsYSk7Zm9yKHZhciBjIGluIGJiKWlmKGJiLmhhc093blByb3BlcnR5KGMpKXt2YXIgZT1iYltjXSxmPWUuX2RyaXZlcjt0aGlzW2NdPWYsX2FbZl18fHRoaXMuZGVmaW5lRHJpdmVyKGUpfXRoaXMuX2RlZmF1bHRDb25maWc9c2Eoe30sZmIpLHRoaXMuX2NvbmZpZz1zYSh7fSx0aGlzLl9kZWZhdWx0Q29uZmlnLGIpLHRoaXMuX2RyaXZlclNldD1udWxsLHRoaXMuX2luaXREcml2ZXI9bnVsbCx0aGlzLl9yZWFkeT0hMSx0aGlzLl9kYkluZm89bnVsbCx0aGlzLl93cmFwTGlicmFyeU1ldGhvZHNXaXRoUmVhZHkoKSx0aGlzLnNldERyaXZlcih0aGlzLl9jb25maWcuZHJpdmVyKS5jYXRjaChmdW5jdGlvbigpe30pfXJldHVybiBhLnByb3RvdHlwZS5jb25maWc9ZnVuY3Rpb24oYSl7aWYoIm9iamVjdCI9PT0odm9pZCAwPT09YT8idW5kZWZpbmVkIjp0YShhKSkpe2lmKHRoaXMuX3JlYWR5KXJldHVybiBuZXcgRXJyb3IoIkNhbid0IGNhbGwgY29uZmlnKCkgYWZ0ZXIgbG9jYWxmb3JhZ2UgaGFzIGJlZW4gdXNlZC4iKTtmb3IodmFyIGIgaW4gYSl7aWYoInN0b3JlTmFtZSI9PT1iJiYoYVtiXT1hW2JdLnJlcGxhY2UoL1xXL2csIl8iKSksInZlcnNpb24iPT09YiYmIm51bWJlciIhPXR5cGVvZiBhW2JdKXJldHVybiBuZXcgRXJyb3IoIkRhdGFiYXNlIHZlcnNpb24gbXVzdCBiZSBhIG51bWJlci4iKTt0aGlzLl9jb25maWdbYl09YVtiXX1yZXR1cm4hKCJkcml2ZXIiaW4gYSYmYS5kcml2ZXIpfHx0aGlzLnNldERyaXZlcih0aGlzLl9jb25maWcuZHJpdmVyKX1yZXR1cm4ic3RyaW5nIj09dHlwZW9mIGE/dGhpcy5fY29uZmlnW2FdOnRoaXMuX2NvbmZpZ30sYS5wcm90b3R5cGUuZGVmaW5lRHJpdmVyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1uZXcgdmEoZnVuY3Rpb24oYixjKXt0cnl7dmFyIGQ9YS5fZHJpdmVyLGU9bmV3IEVycm9yKCJDdXN0b20gZHJpdmVyIG5vdCBjb21wbGlhbnQ7IHNlZSBodHRwczovL21vemlsbGEuZ2l0aHViLmlvL2xvY2FsRm9yYWdlLyNkZWZpbmVkcml2ZXIiKTtpZighYS5fZHJpdmVyKXJldHVybiB2b2lkIGMoZSk7Zm9yKHZhciBmPWViLmNvbmNhdCgiX2luaXRTdG9yYWdlIiksZz0wLGk9Zi5sZW5ndGg7ZzxpO2crKyl7dmFyIGo9ZltnXTtpZigoIVphKGRiLGopfHxhW2pdKSYmImZ1bmN0aW9uIiE9dHlwZW9mIGFbal0pcmV0dXJuIHZvaWQgYyhlKX0oZnVuY3Rpb24oKXtmb3IodmFyIGI9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9bmV3IEVycm9yKCJNZXRob2QgIithKyIgaXMgbm90IGltcGxlbWVudGVkIGJ5IHRoZSBjdXJyZW50IGRyaXZlciIpLGM9dmEucmVqZWN0KGIpO3JldHVybiBoKGMsYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGgtMV0pLGN9fSxjPTAsZD1kYi5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9ZGJbY107YVtlXXx8KGFbZV09YihlKSl9fSkoKTt2YXIgaz1mdW5jdGlvbihjKXtfYVtkXSYmY29uc29sZS5pbmZvKCJSZWRlZmluaW5nIExvY2FsRm9yYWdlIGRyaXZlcjogIitkKSxfYVtkXT1hLGFiW2RdPWMsYigpfTsiX3N1cHBvcnQiaW4gYT9hLl9zdXBwb3J0JiYiZnVuY3Rpb24iPT10eXBlb2YgYS5fc3VwcG9ydD9hLl9zdXBwb3J0KCkudGhlbihrLGMpOmsoISFhLl9zdXBwb3J0KTprKCEwKX1jYXRjaChhKXtjKGEpfX0pO3JldHVybiBpKGQsYixjKSxkfSxhLnByb3RvdHlwZS5kcml2ZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZHJpdmVyfHxudWxsfSxhLnByb3RvdHlwZS5nZXREcml2ZXI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPV9hW2FdP3ZhLnJlc29sdmUoX2FbYV0pOnZhLnJlamVjdChuZXcgRXJyb3IoIkRyaXZlciBub3QgZm91bmQuIikpO3JldHVybiBpKGQsYixjKSxkfSxhLnByb3RvdHlwZS5nZXRTZXJpYWxpemVyPWZ1bmN0aW9uKGEpe3ZhciBiPXZhLnJlc29sdmUoVmEpO3JldHVybiBpKGIsYSksYn0sYS5wcm90b3R5cGUucmVhZHk9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIuX2RyaXZlclNldC50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT1iLl9yZWFkeSYmKGIuX3JlYWR5PWIuX2luaXREcml2ZXIoKSksYi5fcmVhZHl9KTtyZXR1cm4gaShjLGEsYSksY30sYS5wcm90b3R5cGUuc2V0RHJpdmVyPWZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKCl7Zy5fY29uZmlnLmRyaXZlcj1nLmRyaXZlcigpfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGcuX2V4dGVuZChhKSxkKCksZy5fcmVhZHk9Zy5faW5pdFN0b3JhZ2UoZy5fY29uZmlnKSxnLl9yZWFkeX1mdW5jdGlvbiBmKGEpe3JldHVybiBmdW5jdGlvbigpe2Z1bmN0aW9uIGIoKXtmb3IoO2M8YS5sZW5ndGg7KXt2YXIgZj1hW2NdO3JldHVybiBjKyssZy5fZGJJbmZvPW51bGwsZy5fcmVhZHk9bnVsbCxnLmdldERyaXZlcihmKS50aGVuKGUpLmNhdGNoKGIpfWQoKTt2YXIgaD1uZXcgRXJyb3IoIk5vIGF2YWlsYWJsZSBzdG9yYWdlIG1ldGhvZCBmb3VuZC4iKTtyZXR1cm4gZy5fZHJpdmVyU2V0PXZhLnJlamVjdChoKSxnLl9kcml2ZXJTZXR9dmFyIGM9MDtyZXR1cm4gYigpfX12YXIgZz10aGlzOyRhKGEpfHwoYT1bYV0pO3ZhciBoPXRoaXMuX2dldFN1cHBvcnRlZERyaXZlcnMoYSksaj1udWxsIT09dGhpcy5fZHJpdmVyU2V0P3RoaXMuX2RyaXZlclNldC5jYXRjaChmdW5jdGlvbigpe3JldHVybiB2YS5yZXNvbHZlKCl9KTp2YS5yZXNvbHZlKCk7cmV0dXJuIHRoaXMuX2RyaXZlclNldD1qLnRoZW4oZnVuY3Rpb24oKXt2YXIgYT1oWzBdO3JldHVybiBnLl9kYkluZm89bnVsbCxnLl9yZWFkeT1udWxsLGcuZ2V0RHJpdmVyKGEpLnRoZW4oZnVuY3Rpb24oYSl7Zy5fZHJpdmVyPWEuX2RyaXZlcixkKCksZy5fd3JhcExpYnJhcnlNZXRob2RzV2l0aFJlYWR5KCksZy5faW5pdERyaXZlcj1mKGgpfSl9KS5jYXRjaChmdW5jdGlvbigpe2QoKTt2YXIgYT1uZXcgRXJyb3IoIk5vIGF2YWlsYWJsZSBzdG9yYWdlIG1ldGhvZCBmb3VuZC4iKTtyZXR1cm4gZy5fZHJpdmVyU2V0PXZhLnJlamVjdChhKSxnLl9kcml2ZXJTZXR9KSxpKHRoaXMuX2RyaXZlclNldCxiLGMpLHRoaXMuX2RyaXZlclNldH0sYS5wcm90b3R5cGUuc3VwcG9ydHM9ZnVuY3Rpb24oYSl7cmV0dXJuISFhYlthXX0sYS5wcm90b3R5cGUuX2V4dGVuZD1mdW5jdGlvbihhKXtzYSh0aGlzLGEpfSxhLnByb3RvdHlwZS5fZ2V0U3VwcG9ydGVkRHJpdmVycz1mdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9YVtjXTt0aGlzLnN1cHBvcnRzKGUpJiZiLnB1c2goZSl9cmV0dXJuIGJ9LGEucHJvdG90eXBlLl93cmFwTGlicmFyeU1ldGhvZHNXaXRoUmVhZHk9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPWViLmxlbmd0aDthPGI7YSsrKXJhKHRoaXMsZWJbYV0pfSxhLnByb3RvdHlwZS5jcmVhdGVJbnN0YW5jZT1mdW5jdGlvbihiKXtyZXR1cm4gbmV3IGEoYil9LGF9KCksaGI9bmV3IGdiO2IuZXhwb3J0cz1oYn0sezM6M31dfSx7fSxbNF0pKDQpfSk7"},{"meta":{"name":"luxon.min.js","url":"https://moment.github.io/luxon/global/luxon.min.js","ts":1608308697781,"mimetype":"text/javascript"},"source":"dmFyIGx1eG9uPWZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLmtleSxyKX19ZnVuY3Rpb24gaShlLHQsbil7cmV0dXJuIHQmJnIoZS5wcm90b3R5cGUsdCksbiYmcihlLG4pLGV9ZnVuY3Rpb24gYShlLHQpe2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUpLChlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lKS5fX3Byb3RvX189dH1mdW5jdGlvbiBvKGUpe3JldHVybihvPU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9KShlKX1mdW5jdGlvbiB1KGUsdCl7cmV0dXJuKHU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHxmdW5jdGlvbihlLHQpe3JldHVybiBlLl9fcHJvdG9fXz10LGV9KShlLHQpfWZ1bmN0aW9uIHMoZSx0LG4pe3JldHVybihzPWZ1bmN0aW9uKCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBSZWZsZWN0JiZSZWZsZWN0LmNvbnN0cnVjdCYmIVJlZmxlY3QuY29uc3RydWN0LnNoYW0pe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBQcm94eSlyZXR1cm4gMTt0cnl7cmV0dXJuIERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoRGF0ZSxbXSxmdW5jdGlvbigpe30pKSwxfWNhdGNoKGUpe3JldHVybn19fSgpP1JlZmxlY3QuY29uc3RydWN0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1bbnVsbF07ci5wdXNoLmFwcGx5KHIsdCk7dmFyIGk9bmV3KEZ1bmN0aW9uLmJpbmQuYXBwbHkoZSxyKSk7cmV0dXJuIG4mJnUoaSxuLnByb3RvdHlwZSksaX0pLmFwcGx5KG51bGwsYXJndW1lbnRzKX1mdW5jdGlvbiB0KGUpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiBNYXA/bmV3IE1hcDp2b2lkIDA7cmV0dXJuKHQ9ZnVuY3Rpb24oZSl7aWYobnVsbD09PWV8fCh0PWUsLTE9PT1GdW5jdGlvbi50b1N0cmluZy5jYWxsKHQpLmluZGV4T2YoIltuYXRpdmUgY29kZV0iKSkpcmV0dXJuIGU7dmFyIHQ7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTtpZih2b2lkIDAhPT1yKXtpZihyLmhhcyhlKSlyZXR1cm4gci5nZXQoZSk7ci5zZXQoZSxuKX1mdW5jdGlvbiBuKCl7cmV0dXJuIHMoZSxhcmd1bWVudHMsbyh0aGlzKS5jb25zdHJ1Y3Rvcil9cmV0dXJuIG4ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTpuLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHUobixlKX0pKGUpfWZ1bmN0aW9uIGMoZSx0KXsobnVsbD09dHx8dD5lLmxlbmd0aCkmJih0PWUubGVuZ3RoKTtmb3IodmFyIG49MCxyPW5ldyBBcnJheSh0KTtuPHQ7bisrKXJbbl09ZVtuXTtyZXR1cm4gcn1mdW5jdGlvbiBWKGUpe3ZhciB0PTA7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJm51bGwhPWVbU3ltYm9sLml0ZXJhdG9yXSlyZXR1cm4odD1lW1N5bWJvbC5pdGVyYXRvcl0oKSkubmV4dC5iaW5kKHQpO2lmKEFycmF5LmlzQXJyYXkoZSl8fChlPWZ1bmN0aW9uKGUsdCl7aWYoZSl7aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybiBjKGUsdCk7dmFyIG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsLTEpO3JldHVybiJPYmplY3QiPT09biYmZS5jb25zdHJ1Y3RvciYmKG49ZS5jb25zdHJ1Y3Rvci5uYW1lKSwiTWFwIj09PW58fCJTZXQiPT09bj9BcnJheS5mcm9tKG4pOiJBcmd1bWVudHMiPT09bnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3Qobik/YyhlLHQpOnZvaWQgMH19KGUpKSlyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdD49ZS5sZW5ndGg/e2RvbmU6ITB9Ontkb25lOiExLHZhbHVlOmVbdCsrXX19O3Rocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKX12YXIgbj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBhKHQsZSksdH0odChFcnJvcikpLGw9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gdC5jYWxsKHRoaXMsIkludmFsaWQgRGF0ZVRpbWU6ICIrZS50b01lc3NhZ2UoKSl8fHRoaXN9cmV0dXJuIGEoZSx0KSxlfShuKSxkPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7cmV0dXJuIHQuY2FsbCh0aGlzLCJJbnZhbGlkIEludGVydmFsOiAiK2UudG9NZXNzYWdlKCkpfHx0aGlzfXJldHVybiBhKGUsdCksZX0obiksZj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3JldHVybiB0LmNhbGwodGhpcywiSW52YWxpZCBEdXJhdGlvbjogIitlLnRvTWVzc2FnZSgpKXx8dGhpc31yZXR1cm4gYShlLHQpLGV9KG4pLEw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gYSh0LGUpLHR9KG4pLGg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gdC5jYWxsKHRoaXMsIkludmFsaWQgdW5pdCAiK2UpfHx0aGlzfXJldHVybiBhKGUsdCksZX0obiksbT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBhKHQsZSksdH0obikseT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIGUuY2FsbCh0aGlzLCJab25lIGlzIGFuIGFic3RyYWN0IGNsYXNzIil8fHRoaXN9cmV0dXJuIGEodCxlKSx0fShuKSx2PSJudW1lcmljIixnPSJzaG9ydCIscD0ibG9uZyIsdz17eWVhcjp2LG1vbnRoOnYsZGF5OnZ9LGs9e3llYXI6dixtb250aDpnLGRheTp2fSxiPXt5ZWFyOnYsbW9udGg6ZyxkYXk6dix3ZWVrZGF5Omd9LE89e3llYXI6dixtb250aDpwLGRheTp2fSxTPXt5ZWFyOnYsbW9udGg6cCxkYXk6dix3ZWVrZGF5OnB9LFQ9e2hvdXI6dixtaW51dGU6dn0sTT17aG91cjp2LG1pbnV0ZTp2LHNlY29uZDp2fSxOPXtob3VyOnYsbWludXRlOnYsc2Vjb25kOnYsdGltZVpvbmVOYW1lOmd9LEQ9e2hvdXI6dixtaW51dGU6dixzZWNvbmQ6dix0aW1lWm9uZU5hbWU6cH0sRT17aG91cjp2LG1pbnV0ZTp2LGhvdXIxMjohMX0seD17aG91cjp2LG1pbnV0ZTp2LHNlY29uZDp2LGhvdXIxMjohMX0sQz17aG91cjp2LG1pbnV0ZTp2LHNlY29uZDp2LGhvdXIxMjohMSx0aW1lWm9uZU5hbWU6Z30sRj17aG91cjp2LG1pbnV0ZTp2LHNlY29uZDp2LGhvdXIxMjohMSx0aW1lWm9uZU5hbWU6cH0sWj17eWVhcjp2LG1vbnRoOnYsZGF5OnYsaG91cjp2LG1pbnV0ZTp2fSxqPXt5ZWFyOnYsbW9udGg6dixkYXk6dixob3VyOnYsbWludXRlOnYsc2Vjb25kOnZ9LEE9e3llYXI6dixtb250aDpnLGRheTp2LGhvdXI6dixtaW51dGU6dn0sej17eWVhcjp2LG1vbnRoOmcsZGF5OnYsaG91cjp2LG1pbnV0ZTp2LHNlY29uZDp2fSxfPXt5ZWFyOnYsbW9udGg6ZyxkYXk6dix3ZWVrZGF5OmcsaG91cjp2LG1pbnV0ZTp2fSxxPXt5ZWFyOnYsbW9udGg6cCxkYXk6dixob3VyOnYsbWludXRlOnYsdGltZVpvbmVOYW1lOmd9LEg9e3llYXI6dixtb250aDpwLGRheTp2LGhvdXI6dixtaW51dGU6dixzZWNvbmQ6dix0aW1lWm9uZU5hbWU6Z30sVT17eWVhcjp2LG1vbnRoOnAsZGF5OnYsd2Vla2RheTpwLGhvdXI6dixtaW51dGU6dix0aW1lWm9uZU5hbWU6cH0sUj17eWVhcjp2LG1vbnRoOnAsZGF5OnYsd2Vla2RheTpwLGhvdXI6dixtaW51dGU6dixzZWNvbmQ6dix0aW1lWm9uZU5hbWU6cH07ZnVuY3Rpb24gVyhlKXtyZXR1cm4gdm9pZCAwPT09ZX1mdW5jdGlvbiBQKGUpe3JldHVybiJudW1iZXIiPT10eXBlb2YgZX1mdW5jdGlvbiBKKGUpe3JldHVybiJudW1iZXIiPT10eXBlb2YgZSYmZSUxPT0wfWZ1bmN0aW9uIEkoKXt0cnl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBJbnRsJiZJbnRsLkRhdGVUaW1lRm9ybWF0fWNhdGNoKGUpe3JldHVybiExfX1mdW5jdGlvbiBZKCl7cmV0dXJuIVcoSW50bC5EYXRlVGltZUZvcm1hdC5wcm90b3R5cGUuZm9ybWF0VG9QYXJ0cyl9ZnVuY3Rpb24gRygpe3RyeXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIEludGwmJiEhSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXR9Y2F0Y2goZSl7cmV0dXJuITF9fWZ1bmN0aW9uICQoZSxyLGkpe2lmKDAhPT1lLmxlbmd0aClyZXR1cm4gZS5yZWR1Y2UoZnVuY3Rpb24oZSx0KXt2YXIgbj1bcih0KSx0XTtyZXR1cm4gZSYmaShlWzBdLG5bMF0pPT09ZVswXT9lOm59LG51bGwpWzFdfWZ1bmN0aW9uIEIobixlKXtyZXR1cm4gZS5yZWR1Y2UoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZVt0XT1uW3RdLGV9LHt9KX1mdW5jdGlvbiBRKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfWZ1bmN0aW9uIEsoZSx0LG4pe3JldHVybiBKKGUpJiZ0PD1lJiZlPD1ufWZ1bmN0aW9uIFgoZSx0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MiksZS50b1N0cmluZygpLmxlbmd0aDx0PygiMCIucmVwZWF0KHQpK2UpLnNsaWNlKC10KTplLnRvU3RyaW5nKCl9ZnVuY3Rpb24gZWUoZSl7cmV0dXJuIFcoZSl8fG51bGw9PT1lfHwiIj09PWU/dm9pZCAwOnBhcnNlSW50KGUsMTApfWZ1bmN0aW9uIHRlKGUpe2lmKCFXKGUpJiZudWxsIT09ZSYmIiIhPT1lKXt2YXIgdD0xZTMqcGFyc2VGbG9hdCgiMC4iK2UpO3JldHVybiBNYXRoLmZsb29yKHQpfX1mdW5jdGlvbiBuZShlLHQsbil7dm9pZCAwPT09biYmKG49ITEpO3ZhciByPU1hdGgucG93KDEwLHQpO3JldHVybihuP01hdGgudHJ1bmM6TWF0aC5yb3VuZCkoZSpyKS9yfWZ1bmN0aW9uIHJlKGUpe3JldHVybiBlJTQ9PTAmJihlJTEwMCE9MHx8ZSU0MDA9PTApfWZ1bmN0aW9uIGllKGUpe3JldHVybiByZShlKT8zNjY6MzY1fWZ1bmN0aW9uIGFlKGUsdCl7dmFyIG4scixpPShuPXQtMSktKHI9MTIpKk1hdGguZmxvb3Iobi9yKSsxO3JldHVybiAyPT1pP3JlKGUrKHQtaSkvMTIpPzI5OjI4OlszMSxudWxsLDMxLDMwLDMxLDMwLDMxLDMxLDMwLDMxLDMwLDMxXVtpLTFdfWZ1bmN0aW9uIG9lKGUpe3ZhciB0PURhdGUuVVRDKGUueWVhcixlLm1vbnRoLTEsZS5kYXksZS5ob3VyLGUubWludXRlLGUuc2Vjb25kLGUubWlsbGlzZWNvbmQpO3JldHVybiBlLnllYXI8MTAwJiYwPD1lLnllYXImJih0PW5ldyBEYXRlKHQpKS5zZXRVVENGdWxsWWVhcih0LmdldFVUQ0Z1bGxZZWFyKCktMTkwMCksK3R9ZnVuY3Rpb24gdWUoZSl7dmFyIHQ9KGUrTWF0aC5mbG9vcihlLzQpLU1hdGguZmxvb3IoZS8xMDApK01hdGguZmxvb3IoZS80MDApKSU3LG49ZS0xLHI9KG4rTWF0aC5mbG9vcihuLzQpLU1hdGguZmxvb3Iobi8xMDApK01hdGguZmxvb3Iobi80MDApKSU3O3JldHVybiA0PT10fHwzPT1yPzUzOjUyfWZ1bmN0aW9uIHNlKGUpe3JldHVybiA5OTxlP2U6NjA8ZT8xOTAwK2U6MmUzK2V9ZnVuY3Rpb24gY2UoZSx0LG4scil7dm9pZCAwPT09ciYmKHI9bnVsbCk7dmFyIGk9bmV3IERhdGUoZSksYT17aG91cjEyOiExLHllYXI6Im51bWVyaWMiLG1vbnRoOiIyLWRpZ2l0IixkYXk6IjItZGlnaXQiLGhvdXI6IjItZGlnaXQiLG1pbnV0ZToiMi1kaWdpdCJ9O3ImJihhLnRpbWVab25lPXIpO3ZhciBvPU9iamVjdC5hc3NpZ24oe3RpbWVab25lTmFtZTp0fSxhKSx1PUkoKTtpZih1JiZZKCkpe3ZhciBzPW5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KG4sbykuZm9ybWF0VG9QYXJ0cyhpKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiJ0aW1lem9uZW5hbWUiPT09ZS50eXBlLnRvTG93ZXJDYXNlKCl9KTtyZXR1cm4gcz9zLnZhbHVlOm51bGx9aWYodSl7dmFyIGM9bmV3IEludGwuRGF0ZVRpbWVGb3JtYXQobixhKS5mb3JtYXQoaSk7cmV0dXJuIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KG4sbykuZm9ybWF0KGkpLnN1YnN0cmluZyhjLmxlbmd0aCkucmVwbGFjZSgvXlssIFx1MjAwZV0rLywiIil9cmV0dXJuIG51bGx9ZnVuY3Rpb24gbGUoZSx0KXt2YXIgbj1wYXJzZUludChlLDEwKTtOdW1iZXIuaXNOYU4obikmJihuPTApO3ZhciByPXBhcnNlSW50KHQsMTApfHwwO3JldHVybiA2MCpuKyhuPDB8fE9iamVjdC5pcyhuLC0wKT8tcjpyKX1mdW5jdGlvbiBmZShlKXt2YXIgdD1OdW1iZXIoZSk7aWYoImJvb2xlYW4iPT10eXBlb2YgZXx8IiI9PT1lfHxOdW1iZXIuaXNOYU4odCkpdGhyb3cgbmV3IG0oIkludmFsaWQgdW5pdCB2YWx1ZSAiK2UpO3JldHVybiB0fWZ1bmN0aW9uIGRlKGUsdCxuKXt2YXIgcj17fTtmb3IodmFyIGkgaW4gZSlpZihRKGUsaSkpe2lmKDA8PW4uaW5kZXhPZihpKSljb250aW51ZTt2YXIgYT1lW2ldO2lmKG51bGw9PWEpY29udGludWU7clt0KGkpXT1mZShhKX1yZXR1cm4gcn1mdW5jdGlvbiBoZShlLHQpe3ZhciBuPU1hdGgudHJ1bmMoTWF0aC5hYnMoZS82MCkpLHI9TWF0aC50cnVuYyhNYXRoLmFicyhlJTYwKSksaT0wPD1lPyIrIjoiLSI7c3dpdGNoKHQpe2Nhc2Uic2hvcnQiOnJldHVybiBpK1gobiwyKSsiOiIrWChyLDIpO2Nhc2UibmFycm93IjpyZXR1cm4gaStuKygwPHI/IjoiK3I6IiIpO2Nhc2UidGVjaGllIjpyZXR1cm4gaStYKG4sMikrWChyLDIpO2RlZmF1bHQ6dGhyb3cgbmV3IFJhbmdlRXJyb3IoIlZhbHVlIGZvcm1hdCAiK3QrIiBpcyBvdXQgb2YgcmFuZ2UgZm9yIHByb3BlcnR5IGZvcm1hdCIpfX1mdW5jdGlvbiBtZShlKXtyZXR1cm4gQihlLFsiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsIm1pbGxpc2Vjb25kIl0pfXZhciB5ZT0vW0EtWmEtel8rLV17MSwyNTZ9KDo/XC9bQS1aYS16XystXXsxLDI1Nn0oXC9bQS1aYS16XystXXsxLDI1Nn0pPyk/LztmdW5jdGlvbiB2ZShlKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSxPYmplY3Qua2V5cyhlKS5zb3J0KCkpfXZhciBnZT1bIkphbnVhcnkiLCJGZWJydWFyeSIsIk1hcmNoIiwiQXByaWwiLCJNYXkiLCJKdW5lIiwiSnVseSIsIkF1Z3VzdCIsIlNlcHRlbWJlciIsIk9jdG9iZXIiLCJOb3ZlbWJlciIsIkRlY2VtYmVyIl0scGU9WyJKYW4iLCJGZWIiLCJNYXIiLCJBcHIiLCJNYXkiLCJKdW4iLCJKdWwiLCJBdWciLCJTZXAiLCJPY3QiLCJOb3YiLCJEZWMiXSx3ZT1bIkoiLCJGIiwiTSIsIkEiLCJNIiwiSiIsIkoiLCJBIiwiUyIsIk8iLCJOIiwiRCJdO2Z1bmN0aW9uIGtlKGUpe3N3aXRjaChlKXtjYXNlIm5hcnJvdyI6cmV0dXJuIHdlO2Nhc2Uic2hvcnQiOnJldHVybiBwZTtjYXNlImxvbmciOnJldHVybiBnZTtjYXNlIm51bWVyaWMiOnJldHVyblsiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyIsIjgiLCI5IiwiMTAiLCIxMSIsIjEyIl07Y2FzZSIyLWRpZ2l0IjpyZXR1cm5bIjAxIiwiMDIiLCIwMyIsIjA0IiwiMDUiLCIwNiIsIjA3IiwiMDgiLCIwOSIsIjEwIiwiMTEiLCIxMiJdO2RlZmF1bHQ6cmV0dXJuIG51bGx9fXZhciBiZT1bIk1vbmRheSIsIlR1ZXNkYXkiLCJXZWRuZXNkYXkiLCJUaHVyc2RheSIsIkZyaWRheSIsIlNhdHVyZGF5IiwiU3VuZGF5Il0sT2U9WyJNb24iLCJUdWUiLCJXZWQiLCJUaHUiLCJGcmkiLCJTYXQiLCJTdW4iXSxTZT1bIk0iLCJUIiwiVyIsIlQiLCJGIiwiUyIsIlMiXTtmdW5jdGlvbiBUZShlKXtzd2l0Y2goZSl7Y2FzZSJuYXJyb3ciOnJldHVybiBTZTtjYXNlInNob3J0IjpyZXR1cm4gT2U7Y2FzZSJsb25nIjpyZXR1cm4gYmU7Y2FzZSJudW1lcmljIjpyZXR1cm5bIjEiLCIyIiwiMyIsIjQiLCI1IiwiNiIsIjciXTtkZWZhdWx0OnJldHVybiBudWxsfX12YXIgTWU9WyJBTSIsIlBNIl0sTmU9WyJCZWZvcmUgQ2hyaXN0IiwiQW5ubyBEb21pbmkiXSxEZT1bIkJDIiwiQUQiXSxFZT1bIkIiLCJBIl07ZnVuY3Rpb24gSWUoZSl7c3dpdGNoKGUpe2Nhc2UibmFycm93IjpyZXR1cm4gRWU7Y2FzZSJzaG9ydCI6cmV0dXJuIERlO2Nhc2UibG9uZyI6cmV0dXJuIE5lO2RlZmF1bHQ6cmV0dXJuIG51bGx9fWZ1bmN0aW9uIFZlKGUsdCl7Zm9yKHZhciBuLHI9IiIsaT1WKGUpOyEobj1pKCkpLmRvbmU7KXt2YXIgYT1uLnZhbHVlO2EubGl0ZXJhbD9yKz1hLnZhbDpyKz10KGEudmFsKX1yZXR1cm4gcn12YXIgTGU9e0Q6dyxERDprLERERDpPLEREREQ6Uyx0OlQsdHQ6TSx0dHQ6Tix0dHR0OkQsVDpFLFRUOngsVFRUOkMsVFRUVDpGLGY6WixmZjpBLGZmZjpxLGZmZmY6VSxGOmosRkY6eixGRkY6SCxGRkZGOlJ9LHhlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gaChlLHQpe3RoaXMub3B0cz10LHRoaXMubG9jPWUsdGhpcy5zeXN0ZW1Mb2M9bnVsbH1oLmNyZWF0ZT1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10JiYodD17fSksbmV3IGgoZSx0KX0saC5wYXJzZUZvcm1hdD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9bnVsbCxuPSIiLHI9ITEsaT1bXSxhPTA7YTxlLmxlbmd0aDthKyspe3ZhciBvPWUuY2hhckF0KGEpOyInIj09PW8/KDA8bi5sZW5ndGgmJmkucHVzaCh7bGl0ZXJhbDpyLHZhbDpufSksdD1udWxsLG49IiIscj0hcik6cnx8bz09PXQ/bis9bzooMDxuLmxlbmd0aCYmaS5wdXNoKHtsaXRlcmFsOiExLHZhbDpufSksdD1uPW8pfXJldHVybiAwPG4ubGVuZ3RoJiZpLnB1c2goe2xpdGVyYWw6cix2YWw6bn0pLGl9LGgubWFjcm9Ub2tlblRvRm9ybWF0T3B0cz1mdW5jdGlvbihlKXtyZXR1cm4gTGVbZV19O3ZhciBlPWgucHJvdG90eXBlO3JldHVybiBlLmZvcm1hdFdpdGhTeXN0ZW1EZWZhdWx0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG51bGw9PT10aGlzLnN5c3RlbUxvYyYmKHRoaXMuc3lzdGVtTG9jPXRoaXMubG9jLnJlZGVmYXVsdFRvU3lzdGVtKCkpLHRoaXMuc3lzdGVtTG9jLmR0Rm9ybWF0dGVyKGUsT2JqZWN0LmFzc2lnbih7fSx0aGlzLm9wdHMsdCkpLmZvcm1hdCgpfSxlLmZvcm1hdERhdGVUaW1lPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PXt9KSx0aGlzLmxvYy5kdEZvcm1hdHRlcihlLE9iamVjdC5hc3NpZ24oe30sdGhpcy5vcHRzLHQpKS5mb3JtYXQoKX0sZS5mb3JtYXREYXRlVGltZVBhcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PXt9KSx0aGlzLmxvYy5kdEZvcm1hdHRlcihlLE9iamVjdC5hc3NpZ24oe30sdGhpcy5vcHRzLHQpKS5mb3JtYXRUb1BhcnRzKCl9LGUucmVzb2x2ZWRPcHRpb25zPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PXt9KSx0aGlzLmxvYy5kdEZvcm1hdHRlcihlLE9iamVjdC5hc3NpZ24oe30sdGhpcy5vcHRzLHQpKS5yZXNvbHZlZE9wdGlvbnMoKX0sZS5udW09ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT10JiYodD0wKSx0aGlzLm9wdHMuZm9yY2VTaW1wbGUpcmV0dXJuIFgoZSx0KTt2YXIgbj1PYmplY3QuYXNzaWduKHt9LHRoaXMub3B0cyk7cmV0dXJuIDA8dCYmKG4ucGFkVG89dCksdGhpcy5sb2MubnVtYmVyRm9ybWF0dGVyKG4pLmZvcm1hdChlKX0sZS5mb3JtYXREYXRlVGltZUZyb21TdHJpbmc9ZnVuY3Rpb24ocixlKXtmdW5jdGlvbiBpKGUsdCl7cmV0dXJuIGwubG9jLmV4dHJhY3QocixlLHQpfWZ1bmN0aW9uIGEoZSl7cmV0dXJuIHIuaXNPZmZzZXRGaXhlZCYmMD09PXIub2Zmc2V0JiZlLmFsbG93Wj8iWiI6ci5pc1ZhbGlkP3Iuem9uZS5mb3JtYXRPZmZzZXQoci50cyxlLmZvcm1hdCk6IiJ9ZnVuY3Rpb24gbygpe3JldHVybiBmP01lW3IuaG91cjwxMj8wOjFdOmkoe2hvdXI6Im51bWVyaWMiLGhvdXIxMjohMH0sImRheXBlcmlvZCIpfWZ1bmN0aW9uIHUoZSx0KXtyZXR1cm4gZj8obj1yLGtlKGUpW24ubW9udGgtMV0pOmkodD97bW9udGg6ZX06e21vbnRoOmUsZGF5OiJudW1lcmljIn0sIm1vbnRoIik7dmFyIG59ZnVuY3Rpb24gcyhlLHQpe3JldHVybiBmPyhuPXIsVGUoZSlbbi53ZWVrZGF5LTFdKTppKHQ/e3dlZWtkYXk6ZX06e3dlZWtkYXk6ZSxtb250aDoibG9uZyIsZGF5OiJudW1lcmljIn0sIndlZWtkYXkiKTt2YXIgbn1mdW5jdGlvbiBjKGUpe3JldHVybiBmPyh0PXIsSWUoZSlbdC55ZWFyPDA/MDoxXSk6aSh7ZXJhOmV9LCJlcmEiKTt2YXIgdH12YXIgbD10aGlzLGY9ImVuIj09PXRoaXMubG9jLmxpc3RpbmdNb2RlKCksZD10aGlzLmxvYy5vdXRwdXRDYWxlbmRhciYmImdyZWdvcnkiIT09dGhpcy5sb2Mub3V0cHV0Q2FsZW5kYXImJlkoKTtyZXR1cm4gVmUoaC5wYXJzZUZvcm1hdChlKSxmdW5jdGlvbihlKXtzd2l0Y2goZSl7Y2FzZSJTIjpyZXR1cm4gbC5udW0oci5taWxsaXNlY29uZCk7Y2FzZSJ1IjpjYXNlIlNTUyI6cmV0dXJuIGwubnVtKHIubWlsbGlzZWNvbmQsMyk7Y2FzZSJzIjpyZXR1cm4gbC5udW0oci5zZWNvbmQpO2Nhc2Uic3MiOnJldHVybiBsLm51bShyLnNlY29uZCwyKTtjYXNlIm0iOnJldHVybiBsLm51bShyLm1pbnV0ZSk7Y2FzZSJtbSI6cmV0dXJuIGwubnVtKHIubWludXRlLDIpO2Nhc2UiaCI6cmV0dXJuIGwubnVtKHIuaG91ciUxMj09MD8xMjpyLmhvdXIlMTIpO2Nhc2UiaGgiOnJldHVybiBsLm51bShyLmhvdXIlMTI9PTA/MTI6ci5ob3VyJTEyLDIpO2Nhc2UiSCI6cmV0dXJuIGwubnVtKHIuaG91cik7Y2FzZSJISCI6cmV0dXJuIGwubnVtKHIuaG91ciwyKTtjYXNlIloiOnJldHVybiBhKHtmb3JtYXQ6Im5hcnJvdyIsYWxsb3daOmwub3B0cy5hbGxvd1p9KTtjYXNlIlpaIjpyZXR1cm4gYSh7Zm9ybWF0OiJzaG9ydCIsYWxsb3daOmwub3B0cy5hbGxvd1p9KTtjYXNlIlpaWiI6cmV0dXJuIGEoe2Zvcm1hdDoidGVjaGllIixhbGxvd1o6bC5vcHRzLmFsbG93Wn0pO2Nhc2UiWlpaWiI6cmV0dXJuIHIuem9uZS5vZmZzZXROYW1lKHIudHMse2Zvcm1hdDoic2hvcnQiLGxvY2FsZTpsLmxvYy5sb2NhbGV9KTtjYXNlIlpaWlpaIjpyZXR1cm4gci56b25lLm9mZnNldE5hbWUoci50cyx7Zm9ybWF0OiJsb25nIixsb2NhbGU6bC5sb2MubG9jYWxlfSk7Y2FzZSJ6IjpyZXR1cm4gci56b25lTmFtZTtjYXNlImEiOnJldHVybiBvKCk7Y2FzZSJkIjpyZXR1cm4gZD9pKHtkYXk6Im51bWVyaWMifSwiZGF5Iik6bC5udW0oci5kYXkpO2Nhc2UiZGQiOnJldHVybiBkP2koe2RheToiMi1kaWdpdCJ9LCJkYXkiKTpsLm51bShyLmRheSwyKTtjYXNlImMiOnJldHVybiBsLm51bShyLndlZWtkYXkpO2Nhc2UiY2NjIjpyZXR1cm4gcygic2hvcnQiLCEwKTtjYXNlImNjY2MiOnJldHVybiBzKCJsb25nIiwhMCk7Y2FzZSJjY2NjYyI6cmV0dXJuIHMoIm5hcnJvdyIsITApO2Nhc2UiRSI6cmV0dXJuIGwubnVtKHIud2Vla2RheSk7Y2FzZSJFRUUiOnJldHVybiBzKCJzaG9ydCIsITEpO2Nhc2UiRUVFRSI6cmV0dXJuIHMoImxvbmciLCExKTtjYXNlIkVFRUVFIjpyZXR1cm4gcygibmFycm93IiwhMSk7Y2FzZSJMIjpyZXR1cm4gZD9pKHttb250aDoibnVtZXJpYyIsZGF5OiJudW1lcmljIn0sIm1vbnRoIik6bC5udW0oci5tb250aCk7Y2FzZSJMTCI6cmV0dXJuIGQ/aSh7bW9udGg6IjItZGlnaXQiLGRheToibnVtZXJpYyJ9LCJtb250aCIpOmwubnVtKHIubW9udGgsMik7Y2FzZSJMTEwiOnJldHVybiB1KCJzaG9ydCIsITApO2Nhc2UiTExMTCI6cmV0dXJuIHUoImxvbmciLCEwKTtjYXNlIkxMTExMIjpyZXR1cm4gdSgibmFycm93IiwhMCk7Y2FzZSJNIjpyZXR1cm4gZD9pKHttb250aDoibnVtZXJpYyJ9LCJtb250aCIpOmwubnVtKHIubW9udGgpO2Nhc2UiTU0iOnJldHVybiBkP2koe21vbnRoOiIyLWRpZ2l0In0sIm1vbnRoIik6bC5udW0oci5tb250aCwyKTtjYXNlIk1NTSI6cmV0dXJuIHUoInNob3J0IiwhMSk7Y2FzZSJNTU1NIjpyZXR1cm4gdSgibG9uZyIsITEpO2Nhc2UiTU1NTU0iOnJldHVybiB1KCJuYXJyb3ciLCExKTtjYXNlInkiOnJldHVybiBkP2koe3llYXI6Im51bWVyaWMifSwieWVhciIpOmwubnVtKHIueWVhcik7Y2FzZSJ5eSI6cmV0dXJuIGQ/aSh7eWVhcjoiMi1kaWdpdCJ9LCJ5ZWFyIik6bC5udW0oci55ZWFyLnRvU3RyaW5nKCkuc2xpY2UoLTIpLDIpO2Nhc2UieXl5eSI6cmV0dXJuIGQ/aSh7eWVhcjoibnVtZXJpYyJ9LCJ5ZWFyIik6bC5udW0oci55ZWFyLDQpO2Nhc2UieXl5eXl5IjpyZXR1cm4gZD9pKHt5ZWFyOiJudW1lcmljIn0sInllYXIiKTpsLm51bShyLnllYXIsNik7Y2FzZSJHIjpyZXR1cm4gYygic2hvcnQiKTtjYXNlIkdHIjpyZXR1cm4gYygibG9uZyIpO2Nhc2UiR0dHR0ciOnJldHVybiBjKCJuYXJyb3ciKTtjYXNlImtrIjpyZXR1cm4gbC5udW0oci53ZWVrWWVhci50b1N0cmluZygpLnNsaWNlKC0yKSwyKTtjYXNlImtra2siOnJldHVybiBsLm51bShyLndlZWtZZWFyLDQpO2Nhc2UiVyI6cmV0dXJuIGwubnVtKHIud2Vla051bWJlcik7Y2FzZSJXVyI6cmV0dXJuIGwubnVtKHIud2Vla051bWJlciwyKTtjYXNlIm8iOnJldHVybiBsLm51bShyLm9yZGluYWwpO2Nhc2Uib29vIjpyZXR1cm4gbC5udW0oci5vcmRpbmFsLDMpO2Nhc2UicSI6cmV0dXJuIGwubnVtKHIucXVhcnRlcik7Y2FzZSJxcSI6cmV0dXJuIGwubnVtKHIucXVhcnRlciwyKTtjYXNlIlgiOnJldHVybiBsLm51bShNYXRoLmZsb29yKHIudHMvMWUzKSk7Y2FzZSJ4IjpyZXR1cm4gbC5udW0oci50cyk7ZGVmYXVsdDpyZXR1cm4obj1oLm1hY3JvVG9rZW5Ub0Zvcm1hdE9wdHModD1lKSk/bC5mb3JtYXRXaXRoU3lzdGVtRGVmYXVsdChyLG4pOnR9dmFyIHQsbn0pfSxlLmZvcm1hdER1cmF0aW9uRnJvbVN0cmluZz1mdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7c3dpdGNoKGVbMF0pe2Nhc2UiUyI6cmV0dXJuIm1pbGxpc2Vjb25kIjtjYXNlInMiOnJldHVybiJzZWNvbmQiO2Nhc2UibSI6cmV0dXJuIm1pbnV0ZSI7Y2FzZSJoIjpyZXR1cm4iaG91ciI7Y2FzZSJkIjpyZXR1cm4iZGF5IjtjYXNlIk0iOnJldHVybiJtb250aCI7Y2FzZSJ5IjpyZXR1cm4ieWVhciI7ZGVmYXVsdDpyZXR1cm4gbnVsbH19dmFyIHIsaT10aGlzLGE9aC5wYXJzZUZvcm1hdCh0KSxvPWEucmVkdWNlKGZ1bmN0aW9uKGUsdCl7dmFyIG49dC5saXRlcmFsLHI9dC52YWw7cmV0dXJuIG4/ZTplLmNvbmNhdChyKX0sW10pLHU9ZS5zaGlmdFRvLmFwcGx5KGUsby5tYXAobikuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlfSkpO3JldHVybiBWZShhLChyPXUsZnVuY3Rpb24oZSl7dmFyIHQ9bihlKTtyZXR1cm4gdD9pLm51bShyLmdldCh0KSxlLmxlbmd0aCk6ZX0pKX0saH0oKSxDZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLnJlYXNvbj1lLHRoaXMuZXhwbGFuYXRpb249dH1yZXR1cm4gZS5wcm90b3R5cGUudG9NZXNzYWdlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXhwbGFuYXRpb24/dGhpcy5yZWFzb24rIjogIit0aGlzLmV4cGxhbmF0aW9uOnRoaXMucmVhc29ufSxlfSgpLEZlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe312YXIgdD1lLnByb3RvdHlwZTtyZXR1cm4gdC5vZmZzZXROYW1lPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IHl9LHQuZm9ybWF0T2Zmc2V0PWZ1bmN0aW9uKCl7dGhyb3cgbmV3IHl9LHQub2Zmc2V0PWZ1bmN0aW9uKCl7dGhyb3cgbmV3IHl9LHQuZXF1YWxzPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IHl9LGkoZSxbe2tleToidHlwZSIsZ2V0OmZ1bmN0aW9uKCl7dGhyb3cgbmV3IHl9fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXt0aHJvdyBuZXcgeX19LHtrZXk6InVuaXZlcnNhbCIsZ2V0OmZ1bmN0aW9uKCl7dGhyb3cgbmV3IHl9fSx7a2V5OiJpc1ZhbGlkIixnZXQ6ZnVuY3Rpb24oKXt0aHJvdyBuZXcgeX19XSksZX0oKSxaZT1udWxsLGplPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9YSh0LGUpO3ZhciBuPXQucHJvdG90eXBlO3JldHVybiBuLm9mZnNldE5hbWU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gY2UoZSx0LmZvcm1hdCx0LmxvY2FsZSl9LG4uZm9ybWF0T2Zmc2V0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGhlKHRoaXMub2Zmc2V0KGUpLHQpfSxuLm9mZnNldD1mdW5jdGlvbihlKXtyZXR1cm4tbmV3IERhdGUoZSkuZ2V0VGltZXpvbmVPZmZzZXQoKX0sbi5lcXVhbHM9ZnVuY3Rpb24oZSl7cmV0dXJuImxvY2FsIj09PWUudHlwZX0saSh0LFt7a2V5OiJ0eXBlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4ibG9jYWwifX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEkoKT8obmV3IEludGwuRGF0ZVRpbWVGb3JtYXQpLnJlc29sdmVkT3B0aW9ucygpLnRpbWVab25lOiJsb2NhbCJ9fSx7a2V5OiJ1bml2ZXJzYWwiLGdldDpmdW5jdGlvbigpe3JldHVybiExfX0se2tleToiaXNWYWxpZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuITB9fV0sW3trZXk6Imluc3RhbmNlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PVplJiYoWmU9bmV3IHQpLFplfX1dKSx0fShGZSksQWU9UmVnRXhwKCJeIit5ZS5zb3VyY2UrIiQiKSx6ZT17fTt2YXIgX2U9e3llYXI6MCxtb250aDoxLGRheToyLGhvdXI6MyxtaW51dGU6NCxzZWNvbmQ6NX07dmFyIHFlPXt9LEhlPWZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHIoZSl7dmFyIHQ7cmV0dXJuKHQ9bi5jYWxsKHRoaXMpfHx0aGlzKS56b25lTmFtZT1lLHQudmFsaWQ9ci5pc1ZhbGlkWm9uZShlKSx0fWEocixuKSxyLmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gcWVbZV18fChxZVtlXT1uZXcgcihlKSkscWVbZV19LHIucmVzZXRDYWNoZT1mdW5jdGlvbigpe3FlPXt9LHplPXt9fSxyLmlzVmFsaWRTcGVjaWZpZXI9ZnVuY3Rpb24oZSl7cmV0dXJuISghZXx8IWUubWF0Y2goQWUpKX0sci5pc1ZhbGlkWm9uZT1mdW5jdGlvbihlKXt0cnl7cmV0dXJuIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCJlbi1VUyIse3RpbWVab25lOmV9KS5mb3JtYXQoKSwhMH1jYXRjaChlKXtyZXR1cm4hMX19LHIucGFyc2VHTVRPZmZzZXQ9ZnVuY3Rpb24oZSl7aWYoZSl7dmFyIHQ9ZS5tYXRjaCgvXkV0Y1wvR01UKFsrLV1cZHsxLDJ9KSQvaSk7aWYodClyZXR1cm4tNjAqcGFyc2VJbnQodFsxXSl9cmV0dXJuIG51bGx9O3ZhciBlPXIucHJvdG90eXBlO3JldHVybiBlLm9mZnNldE5hbWU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gY2UoZSx0LmZvcm1hdCx0LmxvY2FsZSx0aGlzLm5hbWUpfSxlLmZvcm1hdE9mZnNldD1mdW5jdGlvbihlLHQpe3JldHVybiBoZSh0aGlzLm9mZnNldChlKSx0KX0sZS5vZmZzZXQ9ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGksYSxvLHU9bmV3IERhdGUoZSkscz0obz10aGlzLm5hbWUsemVbb118fCh6ZVtvXT1uZXcgSW50bC5EYXRlVGltZUZvcm1hdCgiZW4tVVMiLHtob3VyMTI6ITEsdGltZVpvbmU6byx5ZWFyOiJudW1lcmljIixtb250aDoiMi1kaWdpdCIsZGF5OiIyLWRpZ2l0Iixob3VyOiIyLWRpZ2l0IixtaW51dGU6IjItZGlnaXQiLHNlY29uZDoiMi1kaWdpdCJ9KSksemVbb10pLGM9cy5mb3JtYXRUb1BhcnRzP2Z1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPWUuZm9ybWF0VG9QYXJ0cyh0KSxyPVtdLGk9MDtpPG4ubGVuZ3RoO2krKyl7dmFyIGE9bltpXSxvPWEudHlwZSx1PWEudmFsdWUscz1fZVtvXTtXKHMpfHwocltzXT1wYXJzZUludCh1LDEwKSl9cmV0dXJuIHJ9KHMsdSk6KHQ9dSxuPXMuZm9ybWF0KHQpLnJlcGxhY2UoL1x1MjAwRS9nLCIiKSxyPS8oXGQrKVwvKFxkKylcLyhcZCspLD8gKFxkKyk6KFxkKyk6KFxkKykvLmV4ZWMobiksaT1yWzFdLGE9clsyXSxbclszXSxpLGEscls0XSxyWzVdLHJbNl1dKSxsPWNbMF0sZj1jWzFdLGQ9Y1syXSxoPWNbM10sbT0rdSx5PW0lMWUzO3JldHVybihvZSh7eWVhcjpsLG1vbnRoOmYsZGF5OmQsaG91cjoyND09PWg/MDpoLG1pbnV0ZTpjWzRdLHNlY29uZDpjWzVdLG1pbGxpc2Vjb25kOjB9KS0obS09MDw9eT95OjFlMyt5KSkvNmU0fSxlLmVxdWFscz1mdW5jdGlvbihlKXtyZXR1cm4iaWFuYSI9PT1lLnR5cGUmJmUubmFtZT09PXRoaXMubmFtZX0saShyLFt7a2V5OiJ0eXBlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4iaWFuYSJ9fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy56b25lTmFtZX19LHtrZXk6InVuaXZlcnNhbCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuITF9fSx7a2V5OiJpc1ZhbGlkIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWxpZH19XSkscn0oRmUpLFVlPW51bGwsUmU9ZnVuY3Rpb24obil7ZnVuY3Rpb24gcihlKXt2YXIgdDtyZXR1cm4odD1uLmNhbGwodGhpcyl8fHRoaXMpLmZpeGVkPWUsdH1hKHIsbiksci5pbnN0YW5jZT1mdW5jdGlvbihlKXtyZXR1cm4gMD09PWU/ci51dGNJbnN0YW5jZTpuZXcgcihlKX0sci5wYXJzZVNwZWNpZmllcj1mdW5jdGlvbihlKXtpZihlKXt2YXIgdD1lLm1hdGNoKC9edXRjKD86KFsrLV1cZHsxLDJ9KSg/OjooXGR7Mn0pKT8pPyQvaSk7aWYodClyZXR1cm4gbmV3IHIobGUodFsxXSx0WzJdKSl9cmV0dXJuIG51bGx9LGkocixudWxsLFt7a2V5OiJ1dGNJbnN0YW5jZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT1VZSYmKFVlPW5ldyByKDApKSxVZX19XSk7dmFyIGU9ci5wcm90b3R5cGU7cmV0dXJuIGUub2Zmc2V0TmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5hbWV9LGUuZm9ybWF0T2Zmc2V0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGhlKHRoaXMuZml4ZWQsdCl9LGUub2Zmc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZml4ZWR9LGUuZXF1YWxzPWZ1bmN0aW9uKGUpe3JldHVybiJmaXhlZCI9PT1lLnR5cGUmJmUuZml4ZWQ9PT10aGlzLmZpeGVkfSxpKHIsW3trZXk6InR5cGUiLGdldDpmdW5jdGlvbigpe3JldHVybiJmaXhlZCJ9fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuZml4ZWQ/IlVUQyI6IlVUQyIraGUodGhpcy5maXhlZCwibmFycm93Iil9fSx7a2V5OiJ1bml2ZXJzYWwiLGdldDpmdW5jdGlvbigpe3JldHVybiEwfX0se2tleToiaXNWYWxpZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuITB9fV0pLHJ9KEZlKSxXZT1mdW5jdGlvbihuKXtmdW5jdGlvbiBlKGUpe3ZhciB0O3JldHVybih0PW4uY2FsbCh0aGlzKXx8dGhpcykuem9uZU5hbWU9ZSx0fWEoZSxuKTt2YXIgdD1lLnByb3RvdHlwZTtyZXR1cm4gdC5vZmZzZXROYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LHQuZm9ybWF0T2Zmc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIiJ9LHQub2Zmc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIE5hTn0sdC5lcXVhbHM9ZnVuY3Rpb24oKXtyZXR1cm4hMX0saShlLFt7a2V5OiJ0eXBlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4iaW52YWxpZCJ9fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy56b25lTmFtZX19LHtrZXk6InVuaXZlcnNhbCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuITF9fSx7a2V5OiJpc1ZhbGlkIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hMX19XSksZX0oRmUpO2Z1bmN0aW9uIFBlKGUsdCl7dmFyIG47aWYoVyhlKXx8bnVsbD09PWUpcmV0dXJuIHQ7aWYoZSBpbnN0YW5jZW9mIEZlKXJldHVybiBlO2lmKCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gUChlKT9SZS5pbnN0YW5jZShlKToib2JqZWN0Ij09dHlwZW9mIGUmJmUub2Zmc2V0JiYibnVtYmVyIj09dHlwZW9mIGUub2Zmc2V0P2U6bmV3IFdlKGUpO3ZhciByPWUudG9Mb3dlckNhc2UoKTtyZXR1cm4ibG9jYWwiPT09cj90OiJ1dGMiPT09cnx8ImdtdCI9PT1yP1JlLnV0Y0luc3RhbmNlOm51bGwhPShuPUhlLnBhcnNlR01UT2Zmc2V0KGUpKT9SZS5pbnN0YW5jZShuKTpIZS5pc1ZhbGlkU3BlY2lmaWVyKHIpP0hlLmNyZWF0ZShlKTpSZS5wYXJzZVNwZWNpZmllcihyKXx8bmV3IFdlKGUpfXZhciBKZT1mdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdygpfSxZZT1udWxsLEdlPW51bGwsJGU9bnVsbCxCZT1udWxsLFFlPSExLEtlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5yZXNldENhY2hlcz1mdW5jdGlvbigpe2N0LnJlc2V0Q2FjaGUoKSxIZS5yZXNldENhY2hlKCl9LGkoZSxudWxsLFt7a2V5OiJub3ciLGdldDpmdW5jdGlvbigpe3JldHVybiBKZX0sc2V0OmZ1bmN0aW9uKGUpe0plPWV9fSx7a2V5OiJkZWZhdWx0Wm9uZU5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiBlLmRlZmF1bHRab25lLm5hbWV9LHNldDpmdW5jdGlvbihlKXtZZT1lP1BlKGUpOm51bGx9fSx7a2V5OiJkZWZhdWx0Wm9uZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFllfHxqZS5pbnN0YW5jZX19LHtrZXk6ImRlZmF1bHRMb2NhbGUiLGdldDpmdW5jdGlvbigpe3JldHVybiBHZX0sc2V0OmZ1bmN0aW9uKGUpe0dlPWV9fSx7a2V5OiJkZWZhdWx0TnVtYmVyaW5nU3lzdGVtIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gJGV9LHNldDpmdW5jdGlvbihlKXskZT1lfX0se2tleToiZGVmYXVsdE91dHB1dENhbGVuZGFyIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gQmV9LHNldDpmdW5jdGlvbihlKXtCZT1lfX0se2tleToidGhyb3dPbkludmFsaWQiLGdldDpmdW5jdGlvbigpe3JldHVybiBRZX0sc2V0OmZ1bmN0aW9uKGUpe1FlPWV9fV0pLGV9KCksWGU9e307ZnVuY3Rpb24gZXQoZSx0KXt2b2lkIDA9PT10JiYodD17fSk7dmFyIG49SlNPTi5zdHJpbmdpZnkoW2UsdF0pLHI9WGVbbl07cmV0dXJuIHJ8fChyPW5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGUsdCksWGVbbl09cikscn12YXIgdHQ9e307dmFyIG50PXt9O2Z1bmN0aW9uIHJ0KGUsdCl7dm9pZCAwPT09dCYmKHQ9e30pO3QuYmFzZTt2YXIgbj1mdW5jdGlvbihlLHQpe2lmKG51bGw9PWUpcmV0dXJue307dmFyIG4scixpPXt9LGE9T2JqZWN0LmtleXMoZSk7Zm9yKHI9MDtyPGEubGVuZ3RoO3IrKyluPWFbcl0sMDw9dC5pbmRleE9mKG4pfHwoaVtuXT1lW25dKTtyZXR1cm4gaX0odCxbImJhc2UiXSkscj1KU09OLnN0cmluZ2lmeShbZSxuXSksaT1udFtyXTtyZXR1cm4gaXx8KGk9bmV3IEludGwuUmVsYXRpdmVUaW1lRm9ybWF0KGUsdCksbnRbcl09aSksaX12YXIgaXQ9bnVsbDtmdW5jdGlvbiBhdChlLHQsbixyLGkpe3ZhciBhPWUubGlzdGluZ01vZGUobik7cmV0dXJuImVycm9yIj09PWE/bnVsbDooImVuIj09PWE/cjppKSh0KX12YXIgb3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxuKXtpZih0aGlzLnBhZFRvPW4ucGFkVG98fDAsdGhpcy5mbG9vcj1uLmZsb29yfHwhMSwhdCYmSSgpKXt2YXIgcj17dXNlR3JvdXBpbmc6ITF9OzA8bi5wYWRUbyYmKHIubWluaW11bUludGVnZXJEaWdpdHM9bi5wYWRUbyksdGhpcy5pbmY9ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10JiYodD17fSk7dmFyIG49SlNPTi5zdHJpbmdpZnkoW2UsdF0pLHI9dHRbbl07cmV0dXJuIHJ8fChyPW5ldyBJbnRsLk51bWJlckZvcm1hdChlLHQpLHR0W25dPXIpLHJ9KGUscil9fXJldHVybiBlLnByb3RvdHlwZS5mb3JtYXQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5pbmYpe3ZhciB0PXRoaXMuZmxvb3I/TWF0aC5mbG9vcihlKTplO3JldHVybiB0aGlzLmluZi5mb3JtYXQodCl9cmV0dXJuIFgodGhpcy5mbG9vcj9NYXRoLmZsb29yKGUpOm5lKGUsMyksdGhpcy5wYWRUbyl9LGV9KCksdXQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxuKXt2YXIgcjtpZih0aGlzLm9wdHM9bix0aGlzLmhhc0ludGw9SSgpLGUuem9uZS51bml2ZXJzYWwmJnRoaXMuaGFzSW50bD8ocj0iVVRDIixuLnRpbWVab25lTmFtZT90aGlzLmR0PWU6dGhpcy5kdD0wPT09ZS5vZmZzZXQ/ZTpjci5mcm9tTWlsbGlzKGUudHMrNjAqZS5vZmZzZXQqMWUzKSk6ImxvY2FsIj09PWUuem9uZS50eXBlP3RoaXMuZHQ9ZTpyPSh0aGlzLmR0PWUpLnpvbmUubmFtZSx0aGlzLmhhc0ludGwpe3ZhciBpPU9iamVjdC5hc3NpZ24oe30sdGhpcy5vcHRzKTtyJiYoaS50aW1lWm9uZT1yKSx0aGlzLmR0Zj1ldCh0LGkpfX12YXIgdD1lLnByb3RvdHlwZTtyZXR1cm4gdC5mb3JtYXQ9ZnVuY3Rpb24oKXtpZih0aGlzLmhhc0ludGwpcmV0dXJuIHRoaXMuZHRmLmZvcm1hdCh0aGlzLmR0LnRvSlNEYXRlKCkpO3ZhciBlPWZ1bmN0aW9uKGUpe3ZhciB0PSJFRUVFLCBMTExMIGQsIHl5eXksIGg6bW0gYSI7c3dpdGNoKHZlKEIoZSxbIndlZWtkYXkiLCJlcmEiLCJ5ZWFyIiwibW9udGgiLCJkYXkiLCJob3VyIiwibWludXRlIiwic2Vjb25kIiwidGltZVpvbmVOYW1lIiwiaG91cjEyIl0pKSl7Y2FzZSB2ZSh3KTpyZXR1cm4iTS9kL3l5eXkiO2Nhc2UgdmUoayk6cmV0dXJuIkxMTCBkLCB5eXl5IjtjYXNlIHZlKGIpOnJldHVybiJFRUUsIExMTCBkLCB5eXl5IjtjYXNlIHZlKE8pOnJldHVybiJMTExMIGQsIHl5eXkiO2Nhc2UgdmUoUyk6cmV0dXJuIkVFRUUsIExMTEwgZCwgeXl5eSI7Y2FzZSB2ZShUKTpyZXR1cm4iaDptbSBhIjtjYXNlIHZlKE0pOnJldHVybiJoOm1tOnNzIGEiO2Nhc2UgdmUoTik6Y2FzZSB2ZShEKTpyZXR1cm4iaDptbSBhIjtjYXNlIHZlKEUpOnJldHVybiJISDptbSI7Y2FzZSB2ZSh4KTpyZXR1cm4iSEg6bW06c3MiO2Nhc2UgdmUoQyk6Y2FzZSB2ZShGKTpyZXR1cm4iSEg6bW0iO2Nhc2UgdmUoWik6cmV0dXJuIk0vZC95eXl5LCBoOm1tIGEiO2Nhc2UgdmUoQSk6cmV0dXJuIkxMTCBkLCB5eXl5LCBoOm1tIGEiO2Nhc2UgdmUocSk6cmV0dXJuIkxMTEwgZCwgeXl5eSwgaDptbSBhIjtjYXNlIHZlKFUpOnJldHVybiB0O2Nhc2UgdmUoaik6cmV0dXJuIk0vZC95eXl5LCBoOm1tOnNzIGEiO2Nhc2UgdmUoeik6cmV0dXJuIkxMTCBkLCB5eXl5LCBoOm1tOnNzIGEiO2Nhc2UgdmUoXyk6cmV0dXJuIkVFRSwgZCBMTEwgeXl5eSwgaDptbSBhIjtjYXNlIHZlKEgpOnJldHVybiJMTExMIGQsIHl5eXksIGg6bW06c3MgYSI7Y2FzZSB2ZShSKTpyZXR1cm4iRUVFRSwgTExMTCBkLCB5eXl5LCBoOm1tOnNzIGEiO2RlZmF1bHQ6cmV0dXJuIHR9fSh0aGlzLm9wdHMpLHQ9Y3QuY3JlYXRlKCJlbi1VUyIpO3JldHVybiB4ZS5jcmVhdGUodCkuZm9ybWF0RGF0ZVRpbWVGcm9tU3RyaW5nKHRoaXMuZHQsZSl9LHQuZm9ybWF0VG9QYXJ0cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0ludGwmJlkoKT90aGlzLmR0Zi5mb3JtYXRUb1BhcnRzKHRoaXMuZHQudG9KU0RhdGUoKSk6W119LHQucmVzb2x2ZWRPcHRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzSW50bD90aGlzLmR0Zi5yZXNvbHZlZE9wdGlvbnMoKTp7bG9jYWxlOiJlbi1VUyIsbnVtYmVyaW5nU3lzdGVtOiJsYXRuIixvdXRwdXRDYWxlbmRhcjoiZ3JlZ29yeSJ9fSxlfSgpLHN0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsbil7dGhpcy5vcHRzPU9iamVjdC5hc3NpZ24oe3N0eWxlOiJsb25nIn0sbiksIXQmJkcoKSYmKHRoaXMucnRmPXJ0KGUsbikpfXZhciB0PWUucHJvdG90eXBlO3JldHVybiB0LmZvcm1hdD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnJ0Zj90aGlzLnJ0Zi5mb3JtYXQoZSx0KTpmdW5jdGlvbihlLHQsbixyKXt2b2lkIDA9PT1uJiYobj0iYWx3YXlzIiksdm9pZCAwPT09ciYmKHI9ITEpO3ZhciBpPXt5ZWFyczpbInllYXIiLCJ5ci4iXSxxdWFydGVyczpbInF1YXJ0ZXIiLCJxdHIuIl0sbW9udGhzOlsibW9udGgiLCJtby4iXSx3ZWVrczpbIndlZWsiLCJ3ay4iXSxkYXlzOlsiZGF5IiwiZGF5IiwiZGF5cyJdLGhvdXJzOlsiaG91ciIsImhyLiJdLG1pbnV0ZXM6WyJtaW51dGUiLCJtaW4uIl0sc2Vjb25kczpbInNlY29uZCIsInNlYy4iXX0sYT0tMT09PVsiaG91cnMiLCJtaW51dGVzIiwic2Vjb25kcyJdLmluZGV4T2YoZSk7aWYoImF1dG8iPT09biYmYSl7dmFyIG89ImRheXMiPT09ZTtzd2l0Y2godCl7Y2FzZSAxOnJldHVybiBvPyJ0b21vcnJvdyI6Im5leHQgIitpW2VdWzBdO2Nhc2UtMTpyZXR1cm4gbz8ieWVzdGVyZGF5IjoibGFzdCAiK2lbZV1bMF07Y2FzZSAwOnJldHVybiBvPyJ0b2RheSI6InRoaXMgIitpW2VdWzBdfX12YXIgdT1PYmplY3QuaXModCwtMCl8fHQ8MCxzPU1hdGguYWJzKHQpLGM9MT09PXMsbD1pW2VdLGY9cj8hYyYmbFsyXXx8bFsxXTpjP2lbZV1bMF06ZTtyZXR1cm4gdT9zKyIgIitmKyIgYWdvIjoiaW4gIitzKyIgIitmfSh0LGUsdGhpcy5vcHRzLm51bWVyaWMsImxvbmciIT09dGhpcy5vcHRzLnN0eWxlKX0sdC5mb3JtYXRUb1BhcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMucnRmP3RoaXMucnRmLmZvcm1hdFRvUGFydHMoZSx0KTpbXX0sZX0oKSxjdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoZSx0LG4scil7dmFyIGksYSxvLHU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5pbmRleE9mKCItdS0iKTtpZigtMT09PXQpcmV0dXJuW2VdO3ZhciBuLHI9ZS5zdWJzdHJpbmcoMCx0KTt0cnl7bj1ldChlKS5yZXNvbHZlZE9wdGlvbnMoKX1jYXRjaChlKXtuPWV0KHIpLnJlc29sdmVkT3B0aW9ucygpfXJldHVybltyLG4ubnVtYmVyaW5nU3lzdGVtLG4uY2FsZW5kYXJdfShlKSxzPXVbMF0sYz11WzFdLGw9dVsyXTt0aGlzLmxvY2FsZT1zLHRoaXMubnVtYmVyaW5nU3lzdGVtPXR8fGN8fG51bGwsdGhpcy5vdXRwdXRDYWxlbmRhcj1ufHxsfHxudWxsLHRoaXMuaW50bD0oaT10aGlzLmxvY2FsZSxhPXRoaXMubnVtYmVyaW5nU3lzdGVtLG89dGhpcy5vdXRwdXRDYWxlbmRhcixJKCk/KChvfHxhKSYmKGkrPSItdSIsbyYmKGkrPSItY2EtIitvKSxhJiYoaSs9Ii1udS0iK2EpKSxpKTpbXSksdGhpcy53ZWVrZGF5c0NhY2hlPXtmb3JtYXQ6e30sc3RhbmRhbG9uZTp7fX0sdGhpcy5tb250aHNDYWNoZT17Zm9ybWF0Ont9LHN0YW5kYWxvbmU6e319LHRoaXMubWVyaWRpZW1DYWNoZT1udWxsLHRoaXMuZXJhQ2FjaGU9e30sdGhpcy5zcGVjaWZpZWRMb2NhbGU9cix0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkPW51bGx9YS5mcm9tT3B0cz1mdW5jdGlvbihlKXtyZXR1cm4gYS5jcmVhdGUoZS5sb2NhbGUsZS5udW1iZXJpbmdTeXN0ZW0sZS5vdXRwdXRDYWxlbmRhcixlLmRlZmF1bHRUb0VOKX0sYS5jcmVhdGU9ZnVuY3Rpb24oZSx0LG4scil7dm9pZCAwPT09ciYmKHI9ITEpO3ZhciBpPWV8fEtlLmRlZmF1bHRMb2NhbGU7cmV0dXJuIG5ldyBhKGl8fChyPyJlbi1VUyI6ZnVuY3Rpb24oKXtpZihpdClyZXR1cm4gaXQ7aWYoSSgpKXt2YXIgZT0obmV3IEludGwuRGF0ZVRpbWVGb3JtYXQpLnJlc29sdmVkT3B0aW9ucygpLmxvY2FsZTtyZXR1cm4gaXQ9ZSYmInVuZCIhPT1lP2U6ImVuLVVTIn1yZXR1cm4gaXQ9ImVuLVVTIn0oKSksdHx8S2UuZGVmYXVsdE51bWJlcmluZ1N5c3RlbSxufHxLZS5kZWZhdWx0T3V0cHV0Q2FsZW5kYXIsaSl9LGEucmVzZXRDYWNoZT1mdW5jdGlvbigpe2l0PW51bGwsWGU9e30sdHQ9e30sbnQ9e319LGEuZnJvbU9iamVjdD1mdW5jdGlvbihlKXt2YXIgdD12b2lkIDA9PT1lP3t9OmUsbj10LmxvY2FsZSxyPXQubnVtYmVyaW5nU3lzdGVtLGk9dC5vdXRwdXRDYWxlbmRhcjtyZXR1cm4gYS5jcmVhdGUobixyLGkpfTt2YXIgZT1hLnByb3RvdHlwZTtyZXR1cm4gZS5saXN0aW5nTW9kZT1mdW5jdGlvbihlKXt2b2lkIDA9PT1lJiYoZT0hMCk7dmFyIHQ9SSgpJiZZKCksbj10aGlzLmlzRW5nbGlzaCgpLHI9IShudWxsIT09dGhpcy5udW1iZXJpbmdTeXN0ZW0mJiJsYXRuIiE9PXRoaXMubnVtYmVyaW5nU3lzdGVtfHxudWxsIT09dGhpcy5vdXRwdXRDYWxlbmRhciYmImdyZWdvcnkiIT09dGhpcy5vdXRwdXRDYWxlbmRhcik7cmV0dXJuIHR8fG4mJnJ8fGU/IXR8fG4mJnI/ImVuIjoiaW50bCI6ImVycm9yIn0sZS5jbG9uZT1mdW5jdGlvbihlKXtyZXR1cm4gZSYmMCE9PU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpLmxlbmd0aD9hLmNyZWF0ZShlLmxvY2FsZXx8dGhpcy5zcGVjaWZpZWRMb2NhbGUsZS5udW1iZXJpbmdTeXN0ZW18fHRoaXMubnVtYmVyaW5nU3lzdGVtLGUub3V0cHV0Q2FsZW5kYXJ8fHRoaXMub3V0cHV0Q2FsZW5kYXIsZS5kZWZhdWx0VG9FTnx8ITEpOnRoaXN9LGUucmVkZWZhdWx0VG9FTj1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9e30pLHRoaXMuY2xvbmUoT2JqZWN0LmFzc2lnbih7fSxlLHtkZWZhdWx0VG9FTjohMH0pKX0sZS5yZWRlZmF1bHRUb1N5c3RlbT1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9e30pLHRoaXMuY2xvbmUoT2JqZWN0LmFzc2lnbih7fSxlLHtkZWZhdWx0VG9FTjohMX0pKX0sZS5tb250aHM9ZnVuY3Rpb24obixyLGUpe3ZhciBpPXRoaXM7cmV0dXJuIHZvaWQgMD09PXImJihyPSExKSx2b2lkIDA9PT1lJiYoZT0hMCksYXQodGhpcyxuLGUsa2UsZnVuY3Rpb24oKXt2YXIgdD1yP3ttb250aDpuLGRheToibnVtZXJpYyJ9Onttb250aDpufSxlPXI/ImZvcm1hdCI6InN0YW5kYWxvbmUiO3JldHVybiBpLm1vbnRoc0NhY2hlW2VdW25dfHwoaS5tb250aHNDYWNoZVtlXVtuXT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj0xO248PTEyO24rKyl7dmFyIHI9Y3IudXRjKDIwMTYsbiwxKTt0LnB1c2goZShyKSl9cmV0dXJuIHR9KGZ1bmN0aW9uKGUpe3JldHVybiBpLmV4dHJhY3QoZSx0LCJtb250aCIpfSkpLGkubW9udGhzQ2FjaGVbZV1bbl19KX0sZS53ZWVrZGF5cz1mdW5jdGlvbihuLHIsZSl7dmFyIGk9dGhpcztyZXR1cm4gdm9pZCAwPT09ciYmKHI9ITEpLHZvaWQgMD09PWUmJihlPSEwKSxhdCh0aGlzLG4sZSxUZSxmdW5jdGlvbigpe3ZhciB0PXI/e3dlZWtkYXk6bix5ZWFyOiJudW1lcmljIixtb250aDoibG9uZyIsZGF5OiJudW1lcmljIn06e3dlZWtkYXk6bn0sZT1yPyJmb3JtYXQiOiJzdGFuZGFsb25lIjtyZXR1cm4gaS53ZWVrZGF5c0NhY2hlW2VdW25dfHwoaS53ZWVrZGF5c0NhY2hlW2VdW25dPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPTE7bjw9NztuKyspe3ZhciByPWNyLnV0YygyMDE2LDExLDEzK24pO3QucHVzaChlKHIpKX1yZXR1cm4gdH0oZnVuY3Rpb24oZSl7cmV0dXJuIGkuZXh0cmFjdChlLHQsIndlZWtkYXkiKX0pKSxpLndlZWtkYXlzQ2FjaGVbZV1bbl19KX0sZS5tZXJpZGllbXM9ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztyZXR1cm4gdm9pZCAwPT09ZSYmKGU9ITApLGF0KHRoaXMsdm9pZCAwLGUsZnVuY3Rpb24oKXtyZXR1cm4gTWV9LGZ1bmN0aW9uKCl7aWYoIW4ubWVyaWRpZW1DYWNoZSl7dmFyIHQ9e2hvdXI6Im51bWVyaWMiLGhvdXIxMjohMH07bi5tZXJpZGllbUNhY2hlPVtjci51dGMoMjAxNiwxMSwxMyw5KSxjci51dGMoMjAxNiwxMSwxMywxOSldLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbi5leHRyYWN0KGUsdCwiZGF5cGVyaW9kIil9KX1yZXR1cm4gbi5tZXJpZGllbUNhY2hlfSl9LGUuZXJhcz1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7cmV0dXJuIHZvaWQgMD09PXQmJih0PSEwKSxhdCh0aGlzLGUsdCxJZSxmdW5jdGlvbigpe3ZhciB0PXtlcmE6ZX07cmV0dXJuIG4uZXJhQ2FjaGVbZV18fChuLmVyYUNhY2hlW2VdPVtjci51dGMoLTQwLDEsMSksY3IudXRjKDIwMTcsMSwxKV0ubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBuLmV4dHJhY3QoZSx0LCJlcmEiKX0pKSxuLmVyYUNhY2hlW2VdfSl9LGUuZXh0cmFjdD1mdW5jdGlvbihlLHQsbil7dmFyIHI9dGhpcy5kdEZvcm1hdHRlcihlLHQpLmZvcm1hdFRvUGFydHMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiBlLnR5cGUudG9Mb3dlckNhc2UoKT09PW59KTtyZXR1cm4gcj9yLnZhbHVlOm51bGx9LGUubnVtYmVyRm9ybWF0dGVyPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT17fSksbmV3IG90KHRoaXMuaW50bCxlLmZvcmNlU2ltcGxlfHx0aGlzLmZhc3ROdW1iZXJzLGUpfSxlLmR0Rm9ybWF0dGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PXt9KSxuZXcgdXQoZSx0aGlzLmludGwsdCl9LGUucmVsRm9ybWF0dGVyPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT17fSksbmV3IHN0KHRoaXMuaW50bCx0aGlzLmlzRW5nbGlzaCgpLGUpfSxlLmlzRW5nbGlzaD1mdW5jdGlvbigpe3JldHVybiJlbiI9PT10aGlzLmxvY2FsZXx8ImVuLXVzIj09PXRoaXMubG9jYWxlLnRvTG93ZXJDYXNlKCl8fEkoKSYmbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQodGhpcy5pbnRsKS5yZXNvbHZlZE9wdGlvbnMoKS5sb2NhbGUuc3RhcnRzV2l0aCgiZW4tdXMiKX0sZS5lcXVhbHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubG9jYWxlPT09ZS5sb2NhbGUmJnRoaXMubnVtYmVyaW5nU3lzdGVtPT09ZS5udW1iZXJpbmdTeXN0ZW0mJnRoaXMub3V0cHV0Q2FsZW5kYXI9PT1lLm91dHB1dENhbGVuZGFyfSxpKGEsW3trZXk6ImZhc3ROdW1iZXJzIixnZXQ6ZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gbnVsbD09dGhpcy5mYXN0TnVtYmVyc0NhY2hlZCYmKHRoaXMuZmFzdE51bWJlcnNDYWNoZWQ9KCEoZT10aGlzKS5udW1iZXJpbmdTeXN0ZW18fCJsYXRuIj09PWUubnVtYmVyaW5nU3lzdGVtKSYmKCJsYXRuIj09PWUubnVtYmVyaW5nU3lzdGVtfHwhZS5sb2NhbGV8fGUubG9jYWxlLnN0YXJ0c1dpdGgoImVuIil8fEkoKSYmImxhdG4iPT09bmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoZS5pbnRsKS5yZXNvbHZlZE9wdGlvbnMoKS5udW1iZXJpbmdTeXN0ZW0pKSx0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkfX1dKSxhfSgpO2Z1bmN0aW9uIGx0KCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsdD1uZXcgQXJyYXkoZSksbj0wO248ZTtuKyspdFtuXT1hcmd1bWVudHNbbl07dmFyIHI9dC5yZWR1Y2UoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSt0LnNvdXJjZX0sIiIpO3JldHVybiBSZWdFeHAoIl4iK3IrIiQiKX1mdW5jdGlvbiBmdCgpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLHQ9bmV3IEFycmF5KGUpLG49MDtuPGU7bisrKXRbbl09YXJndW1lbnRzW25dO3JldHVybiBmdW5jdGlvbihjKXtyZXR1cm4gdC5yZWR1Y2UoZnVuY3Rpb24oZSx0KXt2YXIgbj1lWzBdLHI9ZVsxXSxpPWVbMl0sYT10KGMsaSksbz1hWzBdLHU9YVsxXSxzPWFbMl07cmV0dXJuW09iamVjdC5hc3NpZ24obixvKSxyfHx1LHNdfSxbe30sbnVsbCwxXSkuc2xpY2UoMCwyKX19ZnVuY3Rpb24gZHQoZSl7aWYobnVsbD09ZSlyZXR1cm5bbnVsbCxudWxsXTtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxuPW5ldyBBcnJheSgxPHQ/dC0xOjApLHI9MTtyPHQ7cisrKW5bci0xXT1hcmd1bWVudHNbcl07Zm9yKHZhciBpPTAsYT1uO2k8YS5sZW5ndGg7aSsrKXt2YXIgbz1hW2ldLHU9b1swXSxzPW9bMV0sYz11LmV4ZWMoZSk7aWYoYylyZXR1cm4gcyhjKX1yZXR1cm5bbnVsbCxudWxsXX1mdW5jdGlvbiBodCgpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLGk9bmV3IEFycmF5KGUpLHQ9MDt0PGU7dCsrKWlbdF09YXJndW1lbnRzW3RdO3JldHVybiBmdW5jdGlvbihlLHQpe3ZhciBuLHI9e307Zm9yKG49MDtuPGkubGVuZ3RoO24rKylyW2lbbl1dPWVlKGVbdCtuXSk7cmV0dXJuW3IsbnVsbCx0K25dfX12YXIgbXQ9Lyg/OihaKXwoWystXVxkXGQpKD86Oj8oXGRcZCkpPykvLHl0PS8oXGRcZCkoPzo6PyhcZFxkKSg/Ojo/KFxkXGQpKD86Wy4sXShcZHsxLDMwfSkpPyk/KT8vLHZ0PVJlZ0V4cCgiIit5dC5zb3VyY2UrbXQuc291cmNlKyI/IiksZ3Q9UmVnRXhwKCIoPzpUIit2dC5zb3VyY2UrIik/IikscHQ9aHQoIndlZWtZZWFyIiwid2Vla051bWJlciIsIndlZWtEYXkiKSx3dD1odCgieWVhciIsIm9yZGluYWwiKSxrdD1SZWdFeHAoeXQuc291cmNlKyIgPyg/OiIrbXQuc291cmNlKyJ8KCIreWUuc291cmNlKyIpKT8iKSxidD1SZWdFeHAoIig/OiAiK2t0LnNvdXJjZSsiKT8iKTtmdW5jdGlvbiBPdChlLHQsbil7dmFyIHI9ZVt0XTtyZXR1cm4gVyhyKT9uOmVlKHIpfWZ1bmN0aW9uIFN0KGUsdCl7cmV0dXJuW3t5ZWFyOk90KGUsdCksbW9udGg6T3QoZSx0KzEsMSksZGF5Ok90KGUsdCsyLDEpfSxudWxsLHQrM119ZnVuY3Rpb24gVHQoZSx0KXtyZXR1cm5be2hvdXI6T3QoZSx0LDApLG1pbnV0ZTpPdChlLHQrMSwwKSxzZWNvbmQ6T3QoZSx0KzIsMCksbWlsbGlzZWNvbmQ6dGUoZVt0KzNdKX0sbnVsbCx0KzRdfWZ1bmN0aW9uIE10KGUsdCl7dmFyIG49IWVbdF0mJiFlW3QrMV0scj1sZShlW3QrMV0sZVt0KzJdKTtyZXR1cm5be30sbj9udWxsOlJlLmluc3RhbmNlKHIpLHQrM119ZnVuY3Rpb24gTnQoZSx0KXtyZXR1cm5be30sZVt0XT9IZS5jcmVhdGUoZVt0XSk6bnVsbCx0KzFdfXZhciBEdD0vXi0/UCg/Oig/OigtP1xkezEsOX0pWSk/KD86KC0/XGR7MSw5fSlNKT8oPzooLT9cZHsxLDl9KVcpPyg/OigtP1xkezEsOX0pRCk/KD86VCg/OigtP1xkezEsOX0pSCk/KD86KC0/XGR7MSw5fSlNKT8oPzooLT9cZHsxLDIwfSkoPzpbLixdKC0/XGR7MSw5fSkpP1MpPyk/KSQvO2Z1bmN0aW9uIEV0KGUpe2Z1bmN0aW9uIHQoZSl7cmV0dXJuIGUmJmY/LWU6ZX12YXIgbj1lWzBdLHI9ZVsxXSxpPWVbMl0sYT1lWzNdLG89ZVs0XSx1PWVbNV0scz1lWzZdLGM9ZVs3XSxsPWVbOF0sZj0iLSI9PT1uWzBdO3JldHVyblt7eWVhcnM6dChlZShyKSksbW9udGhzOnQoZWUoaSkpLHdlZWtzOnQoZWUoYSkpLGRheXM6dChlZShvKSksaG91cnM6dChlZSh1KSksbWludXRlczp0KGVlKHMpKSxzZWNvbmRzOnQoZWUoYykpLG1pbGxpc2Vjb25kczp0KHRlKGwpKX1dfXZhciBJdD17R01UOjAsRURUOi0yNDAsRVNUOi0zMDAsQ0RUOi0zMDAsQ1NUOi0zNjAsTURUOi0zNjAsTVNUOi00MjAsUERUOi00MjAsUFNUOi00ODB9O2Z1bmN0aW9uIFZ0KGUsdCxuLHIsaSxhLG8pe3ZhciB1PXt5ZWFyOjI9PT10Lmxlbmd0aD9zZShlZSh0KSk6ZWUodCksbW9udGg6cGUuaW5kZXhPZihuKSsxLGRheTplZShyKSxob3VyOmVlKGkpLG1pbnV0ZTplZShhKX07cmV0dXJuIG8mJih1LnNlY29uZD1lZShvKSksZSYmKHUud2Vla2RheT0zPGUubGVuZ3RoP2JlLmluZGV4T2YoZSkrMTpPZS5pbmRleE9mKGUpKzEpLHV9dmFyIEx0PS9eKD86KE1vbnxUdWV8V2VkfFRodXxGcml8U2F0fFN1biksXHMpPyhcZHsxLDJ9KVxzKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKVxzKFxkezIsNH0pXHMoXGRcZCk6KFxkXGQpKD86OihcZFxkKSk/XHMoPzooVVR8R01UfFtFQ01QXVtTRF1UKXwoW1p6XSl8KD86KFsrLV1cZFxkKShcZFxkKSkpJC87ZnVuY3Rpb24geHQoZSl7dmFyIHQsbj1lWzFdLHI9ZVsyXSxpPWVbM10sYT1lWzRdLG89ZVs1XSx1PWVbNl0scz1lWzddLGM9ZVs4XSxsPWVbOV0sZj1lWzEwXSxkPWVbMTFdLGg9VnQobixhLGkscixvLHUscyk7cmV0dXJuIHQ9Yz9JdFtjXTpsPzA6bGUoZixkKSxbaCxuZXcgUmUodCldfXZhciBDdD0vXihNb258VHVlfFdlZHxUaHV8RnJpfFNhdHxTdW4pLCAoXGRcZCkgKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKSAoXGR7NH0pIChcZFxkKTooXGRcZCk6KFxkXGQpIEdNVCQvLEZ0PS9eKE1vbmRheXxUdWVzZGF5fFdlZHNkYXl8VGh1cnNkYXl8RnJpZGF5fFNhdHVyZGF5fFN1bmRheSksIChcZFxkKS0oSmFufEZlYnxNYXJ8QXByfE1heXxKdW58SnVsfEF1Z3xTZXB8T2N0fE5vdnxEZWMpLShcZFxkKSAoXGRcZCk6KFxkXGQpOihcZFxkKSBHTVQkLyxadD0vXihNb258VHVlfFdlZHxUaHV8RnJpfFNhdHxTdW4pIChKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYykgKCBcZHxcZFxkKSAoXGRcZCk6KFxkXGQpOihcZFxkKSAoXGR7NH0pJC87ZnVuY3Rpb24ganQoZSl7dmFyIHQ9ZVsxXSxuPWVbMl0scj1lWzNdO3JldHVybltWdCh0LGVbNF0scixuLGVbNV0sZVs2XSxlWzddKSxSZS51dGNJbnN0YW5jZV19ZnVuY3Rpb24gQXQoZSl7dmFyIHQ9ZVsxXSxuPWVbMl0scj1lWzNdLGk9ZVs0XSxhPWVbNV0sbz1lWzZdO3JldHVybltWdCh0LGVbN10sbixyLGksYSxvKSxSZS51dGNJbnN0YW5jZV19dmFyIHp0PWx0KC8oWystXVxkezZ9fFxkezR9KSg/Oi0/KFxkXGQpKD86LT8oXGRcZCkpPyk/LyxndCksX3Q9bHQoLyhcZHs0fSktP1coXGRcZCkoPzotPyhcZCkpPy8sZ3QpLHF0PWx0KC8oXGR7NH0pLT8oXGR7M30pLyxndCksSHQ9bHQodnQpLFV0PWZ0KFN0LFR0LE10KSxSdD1mdChwdCxUdCxNdCksV3Q9ZnQod3QsVHQpLFB0PWZ0KFR0LE10KTt2YXIgSnQ9bHQoLyhcZHs0fSktKFxkXGQpLShcZFxkKS8sYnQpLFl0PWx0KGt0KSxHdD1mdChTdCxUdCxNdCxOdCksJHQ9ZnQoVHQsTXQsTnQpO3ZhciBCdD17d2Vla3M6e2RheXM6Nyxob3VyczoxNjgsbWludXRlczoxMDA4MCxzZWNvbmRzOjYwNDgwMCxtaWxsaXNlY29uZHM6NjA0OGU1fSxkYXlzOntob3VyczoyNCxtaW51dGVzOjE0NDAsc2Vjb25kczo4NjQwMCxtaWxsaXNlY29uZHM6ODY0ZTV9LGhvdXJzOnttaW51dGVzOjYwLHNlY29uZHM6MzYwMCxtaWxsaXNlY29uZHM6MzZlNX0sbWludXRlczp7c2Vjb25kczo2MCxtaWxsaXNlY29uZHM6NmU0fSxzZWNvbmRzOnttaWxsaXNlY29uZHM6MWUzfX0sUXQ9T2JqZWN0LmFzc2lnbih7eWVhcnM6e3F1YXJ0ZXJzOjQsbW9udGhzOjEyLHdlZWtzOjUyLGRheXM6MzY1LGhvdXJzOjg3NjAsbWludXRlczo1MjU2MDAsc2Vjb25kczozMTUzNmUzLG1pbGxpc2Vjb25kczozMTUzNmU2fSxxdWFydGVyczp7bW9udGhzOjMsd2Vla3M6MTMsZGF5czo5MSxob3VyczoyMTg0LG1pbnV0ZXM6MTMxMDQwLHNlY29uZHM6Nzg2MjQwMCxtaWxsaXNlY29uZHM6Nzg2MjRlNX0sbW9udGhzOnt3ZWVrczo0LGRheXM6MzAsaG91cnM6NzIwLG1pbnV0ZXM6NDMyMDAsc2Vjb25kczoyNTkyZTMsbWlsbGlzZWNvbmRzOjI1OTJlNn19LEJ0KSxLdD0zNjUuMjQyNSxYdD0zMC40MzY4NzUsZW49T2JqZWN0LmFzc2lnbih7eWVhcnM6e3F1YXJ0ZXJzOjQsbW9udGhzOjEyLHdlZWtzOkt0LzcsZGF5czpLdCxob3VyczoyNCpLdCxtaW51dGVzOjUyNTk0OS4yLHNlY29uZHM6NTI1OTQ5LjIqNjAsbWlsbGlzZWNvbmRzOjUyNTk0OS4yKjYwKjFlM30scXVhcnRlcnM6e21vbnRoczozLHdlZWtzOkt0LzI4LGRheXM6S3QvNCxob3VyczoyNCpLdC80LG1pbnV0ZXM6MTMxNDg3LjMsc2Vjb25kczo1MjU5NDkuMio2MC80LG1pbGxpc2Vjb25kczo3ODg5MjM3OTk5Ljk5OTk5OX0sbW9udGhzOnt3ZWVrczpYdC83LGRheXM6WHQsaG91cnM6MjQqWHQsbWludXRlczo0MzgyOS4xLHNlY29uZHM6MjYyOTc0NixtaWxsaXNlY29uZHM6MjYyOTc0NmUzfX0sQnQpLHRuPVsieWVhcnMiLCJxdWFydGVycyIsIm1vbnRocyIsIndlZWtzIiwiZGF5cyIsImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiLCJtaWxsaXNlY29uZHMiXSxubj10bi5zbGljZSgwKS5yZXZlcnNlKCk7ZnVuY3Rpb24gcm4oZSx0LG4pe3ZvaWQgMD09PW4mJihuPSExKTt2YXIgcj17dmFsdWVzOm4/dC52YWx1ZXM6T2JqZWN0LmFzc2lnbih7fSxlLnZhbHVlcyx0LnZhbHVlc3x8e30pLGxvYzplLmxvYy5jbG9uZSh0LmxvYyksY29udmVyc2lvbkFjY3VyYWN5OnQuY29udmVyc2lvbkFjY3VyYWN5fHxlLmNvbnZlcnNpb25BY2N1cmFjeX07cmV0dXJuIG5ldyBvbihyKX1mdW5jdGlvbiBhbihlLHQsbixyLGkpe3ZhciBhLG89ZVtpXVtuXSx1PXRbbl0vbyxzPSEoTWF0aC5zaWduKHUpPT09TWF0aC5zaWduKHJbaV0pKSYmMCE9PXJbaV0mJk1hdGguYWJzKHUpPD0xPyhhPXUpPDA/TWF0aC5mbG9vcihhKTpNYXRoLmNlaWwoYSk6TWF0aC50cnVuYyh1KTtyW2ldKz1zLHRbbl0tPXMqb312YXIgb249ZnVuY3Rpb24oKXtmdW5jdGlvbiB5KGUpe3ZhciB0PSJsb25ndGVybSI9PT1lLmNvbnZlcnNpb25BY2N1cmFjeXx8ITE7dGhpcy52YWx1ZXM9ZS52YWx1ZXMsdGhpcy5sb2M9ZS5sb2N8fGN0LmNyZWF0ZSgpLHRoaXMuY29udmVyc2lvbkFjY3VyYWN5PXQ/Imxvbmd0ZXJtIjoiY2FzdWFsIix0aGlzLmludmFsaWQ9ZS5pbnZhbGlkfHxudWxsLHRoaXMubWF0cml4PXQ/ZW46UXQsdGhpcy5pc0x1eG9uRHVyYXRpb249ITB9eS5mcm9tTWlsbGlzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHkuZnJvbU9iamVjdChPYmplY3QuYXNzaWduKHttaWxsaXNlY29uZHM6ZX0sdCkpfSx5LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYobnVsbD09ZXx8Im9iamVjdCIhPXR5cGVvZiBlKXRocm93IG5ldyBtKCJEdXJhdGlvbi5mcm9tT2JqZWN0OiBhcmd1bWVudCBleHBlY3RlZCB0byBiZSBhbiBvYmplY3QsIGdvdCAiKyhudWxsPT09ZT8ibnVsbCI6dHlwZW9mIGUpKTtyZXR1cm4gbmV3IHkoe3ZhbHVlczpkZShlLHkubm9ybWFsaXplVW5pdCxbImxvY2FsZSIsIm51bWJlcmluZ1N5c3RlbSIsImNvbnZlcnNpb25BY2N1cmFjeSIsInpvbmUiXSksbG9jOmN0LmZyb21PYmplY3QoZSksY29udmVyc2lvbkFjY3VyYWN5OmUuY29udmVyc2lvbkFjY3VyYWN5fSl9LHkuZnJvbUlTTz1mdW5jdGlvbihlLHQpe3ZhciBuPWR0KGUsW0R0LEV0XSlbMF07aWYobil7dmFyIHI9T2JqZWN0LmFzc2lnbihuLHQpO3JldHVybiB5LmZyb21PYmplY3Qocil9cmV0dXJuIHkuaW52YWxpZCgidW5wYXJzYWJsZSIsJ3RoZSBpbnB1dCAiJytlKyJcIiBjYW4ndCBiZSBwYXJzZWQgYXMgSVNPIDg2MDEiKX0seS5pbnZhbGlkPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09dCYmKHQ9bnVsbCksIWUpdGhyb3cgbmV3IG0oIm5lZWQgdG8gc3BlY2lmeSBhIHJlYXNvbiB0aGUgRHVyYXRpb24gaXMgaW52YWxpZCIpO3ZhciBuPWUgaW5zdGFuY2VvZiBDZT9lOm5ldyBDZShlLHQpO2lmKEtlLnRocm93T25JbnZhbGlkKXRocm93IG5ldyBmKG4pO3JldHVybiBuZXcgeSh7aW52YWxpZDpufSl9LHkubm9ybWFsaXplVW5pdD1mdW5jdGlvbihlKXt2YXIgdD17eWVhcjoieWVhcnMiLHllYXJzOiJ5ZWFycyIscXVhcnRlcjoicXVhcnRlcnMiLHF1YXJ0ZXJzOiJxdWFydGVycyIsbW9udGg6Im1vbnRocyIsbW9udGhzOiJtb250aHMiLHdlZWs6IndlZWtzIix3ZWVrczoid2Vla3MiLGRheToiZGF5cyIsZGF5czoiZGF5cyIsaG91cjoiaG91cnMiLGhvdXJzOiJob3VycyIsbWludXRlOiJtaW51dGVzIixtaW51dGVzOiJtaW51dGVzIixzZWNvbmQ6InNlY29uZHMiLHNlY29uZHM6InNlY29uZHMiLG1pbGxpc2Vjb25kOiJtaWxsaXNlY29uZHMiLG1pbGxpc2Vjb25kczoibWlsbGlzZWNvbmRzIn1bZT9lLnRvTG93ZXJDYXNlKCk6ZV07aWYoIXQpdGhyb3cgbmV3IGgoZSk7cmV0dXJuIHR9LHkuaXNEdXJhdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5pc0x1eG9uRHVyYXRpb258fCExfTt2YXIgZT15LnByb3RvdHlwZTtyZXR1cm4gZS50b0Zvcm1hdD1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PXt9KTt2YXIgbj1PYmplY3QuYXNzaWduKHt9LHQse2Zsb29yOiExIT09dC5yb3VuZCYmITEhPT10LmZsb29yfSk7cmV0dXJuIHRoaXMuaXNWYWxpZD94ZS5jcmVhdGUodGhpcy5sb2MsbikuZm9ybWF0RHVyYXRpb25Gcm9tU3RyaW5nKHRoaXMsZSk6IkludmFsaWQgRHVyYXRpb24ifSxlLnRvT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09PWUmJihlPXt9KSwhdGhpcy5pc1ZhbGlkKXJldHVybnt9O3ZhciB0PU9iamVjdC5hc3NpZ24oe30sdGhpcy52YWx1ZXMpO3JldHVybiBlLmluY2x1ZGVDb25maWcmJih0LmNvbnZlcnNpb25BY2N1cmFjeT10aGlzLmNvbnZlcnNpb25BY2N1cmFjeSx0Lm51bWJlcmluZ1N5c3RlbT10aGlzLmxvYy5udW1iZXJpbmdTeXN0ZW0sdC5sb2NhbGU9dGhpcy5sb2MubG9jYWxlKSx0fSxlLnRvSVNPPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gbnVsbDt2YXIgZT0iUCI7cmV0dXJuIDAhPT10aGlzLnllYXJzJiYoZSs9dGhpcy55ZWFycysiWSIpLDA9PT10aGlzLm1vbnRocyYmMD09PXRoaXMucXVhcnRlcnN8fChlKz10aGlzLm1vbnRocyszKnRoaXMucXVhcnRlcnMrIk0iKSwwIT09dGhpcy53ZWVrcyYmKGUrPXRoaXMud2Vla3MrIlciKSwwIT09dGhpcy5kYXlzJiYoZSs9dGhpcy5kYXlzKyJEIiksMD09PXRoaXMuaG91cnMmJjA9PT10aGlzLm1pbnV0ZXMmJjA9PT10aGlzLnNlY29uZHMmJjA9PT10aGlzLm1pbGxpc2Vjb25kc3x8KGUrPSJUIiksMCE9PXRoaXMuaG91cnMmJihlKz10aGlzLmhvdXJzKyJIIiksMCE9PXRoaXMubWludXRlcyYmKGUrPXRoaXMubWludXRlcysiTSIpLDA9PT10aGlzLnNlY29uZHMmJjA9PT10aGlzLm1pbGxpc2Vjb25kc3x8KGUrPW5lKHRoaXMuc2Vjb25kcyt0aGlzLm1pbGxpc2Vjb25kcy8xZTMsMykrIlMiKSwiUCI9PT1lJiYoZSs9IlQwUyIpLGV9LGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9JU08oKX0sZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRvSVNPKCl9LGUudmFsdWVPZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFzKCJtaWxsaXNlY29uZHMiKX0sZS5wbHVzPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Zm9yKHZhciB0LG49dW4oZSkscj17fSxpPVYodG4pOyEodD1pKCkpLmRvbmU7KXt2YXIgYT10LnZhbHVlOyhRKG4udmFsdWVzLGEpfHxRKHRoaXMudmFsdWVzLGEpKSYmKHJbYV09bi5nZXQoYSkrdGhpcy5nZXQoYSkpfXJldHVybiBybih0aGlzLHt2YWx1ZXM6cn0sITApfSxlLm1pbnVzPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7dmFyIHQ9dW4oZSk7cmV0dXJuIHRoaXMucGx1cyh0Lm5lZ2F0ZSgpKX0sZS5tYXBVbml0cz1mdW5jdGlvbihlKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB0aGlzO2Zvcih2YXIgdD17fSxuPTAscj1PYmplY3Qua2V5cyh0aGlzLnZhbHVlcyk7bjxyLmxlbmd0aDtuKyspe3ZhciBpPXJbbl07dFtpXT1mZShlKHRoaXMudmFsdWVzW2ldLGkpKX1yZXR1cm4gcm4odGhpcyx7dmFsdWVzOnR9LCEwKX0sZS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXNbeS5ub3JtYWxpemVVbml0KGUpXX0sZS5zZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaXNWYWxpZD9ybih0aGlzLHt2YWx1ZXM6T2JqZWN0LmFzc2lnbih0aGlzLnZhbHVlcyxkZShlLHkubm9ybWFsaXplVW5pdCxbXSkpfSk6dGhpc30sZS5yZWNvbmZpZ3VyZT1mdW5jdGlvbihlKXt2YXIgdD12b2lkIDA9PT1lP3t9OmUsbj10LmxvY2FsZSxyPXQubnVtYmVyaW5nU3lzdGVtLGk9dC5jb252ZXJzaW9uQWNjdXJhY3ksYT17bG9jOnRoaXMubG9jLmNsb25lKHtsb2NhbGU6bixudW1iZXJpbmdTeXN0ZW06cn0pfTtyZXR1cm4gaSYmKGEuY29udmVyc2lvbkFjY3VyYWN5PWkpLHJuKHRoaXMsYSl9LGUuYXM9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnNoaWZ0VG8oZSkuZ2V0KGUpOk5hTn0sZS5ub3JtYWxpemU9ZnVuY3Rpb24oKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB0aGlzO3ZhciBuLHIsZT10aGlzLnRvT2JqZWN0KCk7cmV0dXJuIG49dGhpcy5tYXRyaXgscj1lLG5uLnJlZHVjZShmdW5jdGlvbihlLHQpe3JldHVybiBXKHJbdF0pP2U6KGUmJmFuKG4scixlLHIsdCksdCl9LG51bGwpLHJuKHRoaXMse3ZhbHVlczplfSwhMCl9LGUuc2hpZnRUbz1mdW5jdGlvbigpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLHQ9bmV3IEFycmF5KGUpLG49MDtuPGU7bisrKXRbbl09YXJndW1lbnRzW25dO2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7aWYoMD09PXQubGVuZ3RoKXJldHVybiB0aGlzO3Q9dC5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHkubm9ybWFsaXplVW5pdChlKX0pO2Zvcih2YXIgcixpLGE9e30sbz17fSx1PXRoaXMudG9PYmplY3QoKSxzPVYodG4pOyEoaT1zKCkpLmRvbmU7KXt2YXIgYz1pLnZhbHVlO2lmKDA8PXQuaW5kZXhPZihjKSl7cj1jO3ZhciBsPTA7Zm9yKHZhciBmIGluIG8pbCs9dGhpcy5tYXRyaXhbZl1bY10qb1tmXSxvW2ZdPTA7UCh1W2NdKSYmKGwrPXVbY10pO3ZhciBkPU1hdGgudHJ1bmMobCk7Zm9yKHZhciBoIGluIGFbY109ZCxvW2NdPWwtZCx1KXRuLmluZGV4T2YoaCk+dG4uaW5kZXhPZihjKSYmYW4odGhpcy5tYXRyaXgsdSxoLGEsYyl9ZWxzZSBQKHVbY10pJiYob1tjXT11W2NdKX1mb3IodmFyIG0gaW4gbykwIT09b1ttXSYmKGFbcl0rPW09PT1yP29bbV06b1ttXS90aGlzLm1hdHJpeFtyXVttXSk7cmV0dXJuIHJuKHRoaXMse3ZhbHVlczphfSwhMCkubm9ybWFsaXplKCl9LGUubmVnYXRlPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gdGhpcztmb3IodmFyIGU9e30sdD0wLG49T2JqZWN0LmtleXModGhpcy52YWx1ZXMpO3Q8bi5sZW5ndGg7dCsrKXt2YXIgcj1uW3RdO2Vbcl09LXRoaXMudmFsdWVzW3JdfXJldHVybiBybih0aGlzLHt2YWx1ZXM6ZX0sITApfSxlLmVxdWFscz1mdW5jdGlvbihlKXtpZighdGhpcy5pc1ZhbGlkfHwhZS5pc1ZhbGlkKXJldHVybiExO2lmKCF0aGlzLmxvYy5lcXVhbHMoZS5sb2MpKXJldHVybiExO2Zvcih2YXIgdCxuPVYodG4pOyEodD1uKCkpLmRvbmU7KXt2YXIgcj10LnZhbHVlO2lmKHRoaXMudmFsdWVzW3JdIT09ZS52YWx1ZXNbcl0pcmV0dXJuITF9cmV0dXJuITB9LGkoeSxbe2tleToibG9jYWxlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMubG9jLmxvY2FsZTpudWxsfX0se2tleToibnVtYmVyaW5nU3lzdGVtIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMubG9jLm51bWJlcmluZ1N5c3RlbTpudWxsfX0se2tleToieWVhcnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy52YWx1ZXMueWVhcnN8fDA6TmFOfX0se2tleToicXVhcnRlcnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy52YWx1ZXMucXVhcnRlcnN8fDA6TmFOfX0se2tleToibW9udGhzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMudmFsdWVzLm1vbnRoc3x8MDpOYU59fSx7a2V5OiJ3ZWVrcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnZhbHVlcy53ZWVrc3x8MDpOYU59fSx7a2V5OiJkYXlzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMudmFsdWVzLmRheXN8fDA6TmFOfX0se2tleToiaG91cnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy52YWx1ZXMuaG91cnN8fDA6TmFOfX0se2tleToibWludXRlcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnZhbHVlcy5taW51dGVzfHwwOk5hTn19LHtrZXk6InNlY29uZHMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy52YWx1ZXMuc2Vjb25kc3x8MDpOYU59fSx7a2V5OiJtaWxsaXNlY29uZHMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy52YWx1ZXMubWlsbGlzZWNvbmRzfHwwOk5hTn19LHtrZXk6ImlzVmFsaWQiLGdldDpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5pbnZhbGlkfX0se2tleToiaW52YWxpZFJlYXNvbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW52YWxpZD90aGlzLmludmFsaWQucmVhc29uOm51bGx9fSx7a2V5OiJpbnZhbGlkRXhwbGFuYXRpb24iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmludmFsaWQ/dGhpcy5pbnZhbGlkLmV4cGxhbmF0aW9uOm51bGx9fV0pLHl9KCk7ZnVuY3Rpb24gdW4oZSl7aWYoUChlKSlyZXR1cm4gb24uZnJvbU1pbGxpcyhlKTtpZihvbi5pc0R1cmF0aW9uKGUpKXJldHVybiBlO2lmKCJvYmplY3QiPT10eXBlb2YgZSlyZXR1cm4gb24uZnJvbU9iamVjdChlKTt0aHJvdyBuZXcgbSgiVW5rbm93biBkdXJhdGlvbiBhcmd1bWVudCAiK2UrIiBvZiB0eXBlICIrdHlwZW9mIGUpfXZhciBzbj0iSW52YWxpZCBJbnRlcnZhbCI7dmFyIGNuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZihlKXt0aGlzLnM9ZS5zdGFydCx0aGlzLmU9ZS5lbmQsdGhpcy5pbnZhbGlkPWUuaW52YWxpZHx8bnVsbCx0aGlzLmlzTHV4b25JbnRlcnZhbD0hMH1mLmludmFsaWQ9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT10JiYodD1udWxsKSwhZSl0aHJvdyBuZXcgbSgibmVlZCB0byBzcGVjaWZ5IGEgcmVhc29uIHRoZSBJbnRlcnZhbCBpcyBpbnZhbGlkIik7dmFyIG49ZSBpbnN0YW5jZW9mIENlP2U6bmV3IENlKGUsdCk7aWYoS2UudGhyb3dPbkludmFsaWQpdGhyb3cgbmV3IGQobik7cmV0dXJuIG5ldyBmKHtpbnZhbGlkOm59KX0sZi5mcm9tRGF0ZVRpbWVzPWZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPWxyKGUpLGE9bHIodCksbz0ocj1hLChuPWkpJiZuLmlzVmFsaWQ/ciYmci5pc1ZhbGlkP3I8bj9jbi5pbnZhbGlkKCJlbmQgYmVmb3JlIHN0YXJ0IiwiVGhlIGVuZCBvZiBhbiBpbnRlcnZhbCBtdXN0IGJlIGFmdGVyIGl0cyBzdGFydCwgYnV0IHlvdSBoYWQgc3RhcnQ9IituLnRvSVNPKCkrIiBhbmQgZW5kPSIrci50b0lTTygpKTpudWxsOmNuLmludmFsaWQoIm1pc3Npbmcgb3IgaW52YWxpZCBlbmQiKTpjbi5pbnZhbGlkKCJtaXNzaW5nIG9yIGludmFsaWQgc3RhcnQiKSk7cmV0dXJuIG51bGw9PW8/bmV3IGYoe3N0YXJ0OmksZW5kOmF9KTpvfSxmLmFmdGVyPWZ1bmN0aW9uKGUsdCl7dmFyIG49dW4odCkscj1scihlKTtyZXR1cm4gZi5mcm9tRGF0ZVRpbWVzKHIsci5wbHVzKG4pKX0sZi5iZWZvcmU9ZnVuY3Rpb24oZSx0KXt2YXIgbj11bih0KSxyPWxyKGUpO3JldHVybiBmLmZyb21EYXRlVGltZXMoci5taW51cyhuKSxyKX0sZi5mcm9tSVNPPWZ1bmN0aW9uKGUsdCl7dmFyIG49KGV8fCIiKS5zcGxpdCgiLyIsMikscj1uWzBdLGk9blsxXTtpZihyJiZpKXt2YXIgYSxvLHUsczt0cnl7bz0oYT1jci5mcm9tSVNPKHIsdCkpLmlzVmFsaWR9Y2F0Y2goaSl7bz0hMX10cnl7cz0odT1jci5mcm9tSVNPKGksdCkpLmlzVmFsaWR9Y2F0Y2goaSl7cz0hMX1pZihvJiZzKXJldHVybiBmLmZyb21EYXRlVGltZXMoYSx1KTtpZihvKXt2YXIgYz1vbi5mcm9tSVNPKGksdCk7aWYoYy5pc1ZhbGlkKXJldHVybiBmLmFmdGVyKGEsYyl9ZWxzZSBpZihzKXt2YXIgbD1vbi5mcm9tSVNPKHIsdCk7aWYobC5pc1ZhbGlkKXJldHVybiBmLmJlZm9yZSh1LGwpfX1yZXR1cm4gZi5pbnZhbGlkKCJ1bnBhcnNhYmxlIiwndGhlIGlucHV0ICInK2UrIlwiIGNhbid0IGJlIHBhcnNlZCBhcyBJU08gODYwMSIpfSxmLmlzSW50ZXJ2YWw9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuaXNMdXhvbkludGVydmFsfHwhMX07dmFyIGU9Zi5wcm90b3R5cGU7cmV0dXJuIGUubGVuZ3RoPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0ibWlsbGlzZWNvbmRzIiksdGhpcy5pc1ZhbGlkP3RoaXMudG9EdXJhdGlvbi5hcHBseSh0aGlzLFtlXSkuZ2V0KGUpOk5hTn0sZS5jb3VudD1mdW5jdGlvbihlKXtpZih2b2lkIDA9PT1lJiYoZT0ibWlsbGlzZWNvbmRzIiksIXRoaXMuaXNWYWxpZClyZXR1cm4gTmFOO3ZhciB0PXRoaXMuc3RhcnQuc3RhcnRPZihlKSxuPXRoaXMuZW5kLnN0YXJ0T2YoZSk7cmV0dXJuIE1hdGguZmxvb3Iobi5kaWZmKHQsZSkuZ2V0KGUpKSsxfSxlLmhhc1NhbWU9ZnVuY3Rpb24oZSl7cmV0dXJuISF0aGlzLmlzVmFsaWQmJih0aGlzLmlzRW1wdHkoKXx8dGhpcy5lLm1pbnVzKDEpLmhhc1NhbWUodGhpcy5zLGUpKX0sZS5pc0VtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucy52YWx1ZU9mKCk9PT10aGlzLmUudmFsdWVPZigpfSxlLmlzQWZ0ZXI9ZnVuY3Rpb24oZSl7cmV0dXJuISF0aGlzLmlzVmFsaWQmJnRoaXMucz5lfSxlLmlzQmVmb3JlPWZ1bmN0aW9uKGUpe3JldHVybiEhdGhpcy5pc1ZhbGlkJiZ0aGlzLmU8PWV9LGUuY29udGFpbnM9ZnVuY3Rpb24oZSl7cmV0dXJuISF0aGlzLmlzVmFsaWQmJih0aGlzLnM8PWUmJnRoaXMuZT5lKX0sZS5zZXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dm9pZCAwPT09ZT97fTplLG49dC5zdGFydCxyPXQuZW5kO3JldHVybiB0aGlzLmlzVmFsaWQ/Zi5mcm9tRGF0ZVRpbWVzKG58fHRoaXMucyxyfHx0aGlzLmUpOnRoaXN9LGUuc3BsaXRBdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm5bXTtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxuPW5ldyBBcnJheShlKSxyPTA7cjxlO3IrKyluW3JdPWFyZ3VtZW50c1tyXTtmb3IodmFyIGk9bi5tYXAobHIpLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gdC5jb250YWlucyhlKX0pLnNvcnQoKSxhPVtdLG89dGhpcy5zLHU9MDtvPHRoaXMuZTspe3ZhciBzPWlbdV18fHRoaXMuZSxjPStzPit0aGlzLmU/dGhpcy5lOnM7YS5wdXNoKGYuZnJvbURhdGVUaW1lcyhvLGMpKSxvPWMsdSs9MX1yZXR1cm4gYX0sZS5zcGxpdEJ5PWZ1bmN0aW9uKGUpe3ZhciB0PXVuKGUpO2lmKCF0aGlzLmlzVmFsaWR8fCF0LmlzVmFsaWR8fDA9PT10LmFzKCJtaWxsaXNlY29uZHMiKSlyZXR1cm5bXTtmb3IodmFyIG4scixpPXRoaXMucyxhPVtdO2k8dGhpcy5lOylyPSsobj1pLnBsdXModCkpPit0aGlzLmU/dGhpcy5lOm4sYS5wdXNoKGYuZnJvbURhdGVUaW1lcyhpLHIpKSxpPXI7cmV0dXJuIGF9LGUuZGl2aWRlRXF1YWxseT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuc3BsaXRCeSh0aGlzLmxlbmd0aCgpL2UpLnNsaWNlKDAsZSk6W119LGUub3ZlcmxhcHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZT5lLnMmJnRoaXMuczxlLmV9LGUuYWJ1dHNTdGFydD1mdW5jdGlvbihlKXtyZXR1cm4hIXRoaXMuaXNWYWxpZCYmK3RoaXMuZT09K2Uuc30sZS5hYnV0c0VuZD1mdW5jdGlvbihlKXtyZXR1cm4hIXRoaXMuaXNWYWxpZCYmK2UuZT09K3RoaXMuc30sZS5lbmd1bGZzPWZ1bmN0aW9uKGUpe3JldHVybiEhdGhpcy5pc1ZhbGlkJiYodGhpcy5zPD1lLnMmJnRoaXMuZT49ZS5lKX0sZS5lcXVhbHM9ZnVuY3Rpb24oZSl7cmV0dXJuISghdGhpcy5pc1ZhbGlkfHwhZS5pc1ZhbGlkKSYmKHRoaXMucy5lcXVhbHMoZS5zKSYmdGhpcy5lLmVxdWFscyhlLmUpKX0sZS5pbnRlcnNlY3Rpb249ZnVuY3Rpb24oZSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gdGhpczt2YXIgdD10aGlzLnM+ZS5zP3RoaXMuczplLnMsbj10aGlzLmU8ZS5lP3RoaXMuZTplLmU7cmV0dXJuIG48dD9udWxsOmYuZnJvbURhdGVUaW1lcyh0LG4pfSxlLnVuaW9uPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7dmFyIHQ9dGhpcy5zPGUucz90aGlzLnM6ZS5zLG49dGhpcy5lPmUuZT90aGlzLmU6ZS5lO3JldHVybiBmLmZyb21EYXRlVGltZXModCxuKX0sZi5tZXJnZT1mdW5jdGlvbihlKXt2YXIgdD1lLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5zLXQuc30pLnJlZHVjZShmdW5jdGlvbihlLHQpe3ZhciBuPWVbMF0scj1lWzFdO3JldHVybiByP3Iub3ZlcmxhcHModCl8fHIuYWJ1dHNTdGFydCh0KT9bbixyLnVuaW9uKHQpXTpbbi5jb25jYXQoW3JdKSx0XTpbbix0XX0sW1tdLG51bGxdKSxuPXRbMF0scj10WzFdO3JldHVybiByJiZuLnB1c2gociksbn0sZi54b3I9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG4scj1udWxsLGk9MCxhPVtdLG89ZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuW3t0aW1lOmUucyx0eXBlOiJzIn0se3RpbWU6ZS5lLHR5cGU6ImUifV19KSx1PVYoKHQ9QXJyYXkucHJvdG90eXBlKS5jb25jYXQuYXBwbHkodCxvKS5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUudGltZS10LnRpbWV9KSk7IShuPXUoKSkuZG9uZTspe3ZhciBzPW4udmFsdWU7cj0xPT09KGkrPSJzIj09PXMudHlwZT8xOi0xKT9zLnRpbWU6KHImJityIT0rcy50aW1lJiZhLnB1c2goZi5mcm9tRGF0ZVRpbWVzKHIscy50aW1lKSksbnVsbCl9cmV0dXJuIGYubWVyZ2UoYSl9LGUuZGlmZmVyZW5jZT1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLGU9YXJndW1lbnRzLmxlbmd0aCxuPW5ldyBBcnJheShlKSxyPTA7cjxlO3IrKyluW3JdPWFyZ3VtZW50c1tyXTtyZXR1cm4gZi54b3IoW3RoaXNdLmNvbmNhdChuKSkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0LmludGVyc2VjdGlvbihlKX0pLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZSYmIWUuaXNFbXB0eSgpfSl9LGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkPyJbIit0aGlzLnMudG9JU08oKSsiIOKAkyAiK3RoaXMuZS50b0lTTygpKyIpIjpzbn0sZS50b0lTTz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMucy50b0lTTyhlKSsiLyIrdGhpcy5lLnRvSVNPKGUpOnNufSxlLnRvSVNPRGF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5zLnRvSVNPRGF0ZSgpKyIvIit0aGlzLmUudG9JU09EYXRlKCk6c259LGUudG9JU09UaW1lPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5zLnRvSVNPVGltZShlKSsiLyIrdGhpcy5lLnRvSVNPVGltZShlKTpzbn0sZS50b0Zvcm1hdD1mdW5jdGlvbihlLHQpe3ZhciBuPSh2b2lkIDA9PT10P3t9OnQpLnNlcGFyYXRvcixyPXZvaWQgMD09PW4/IiDigJMgIjpuO3JldHVybiB0aGlzLmlzVmFsaWQ/IiIrdGhpcy5zLnRvRm9ybWF0KGUpK3IrdGhpcy5lLnRvRm9ybWF0KGUpOnNufSxlLnRvRHVyYXRpb249ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuZS5kaWZmKHRoaXMucyxlLHQpOm9uLmludmFsaWQodGhpcy5pbnZhbGlkUmVhc29uKX0sZS5tYXBFbmRwb2ludHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGYuZnJvbURhdGVUaW1lcyhlKHRoaXMucyksZSh0aGlzLmUpKX0saShmLFt7a2V5OiJzdGFydCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnM6bnVsbH19LHtrZXk6ImVuZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmU6bnVsbH19LHtrZXk6ImlzVmFsaWQiLGdldDpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5pbnZhbGlkUmVhc29ufX0se2tleToiaW52YWxpZFJlYXNvbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW52YWxpZD90aGlzLmludmFsaWQucmVhc29uOm51bGx9fSx7a2V5OiJpbnZhbGlkRXhwbGFuYXRpb24iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmludmFsaWQ/dGhpcy5pbnZhbGlkLmV4cGxhbmF0aW9uOm51bGx9fV0pLGZ9KCksbG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLmhhc0RTVD1mdW5jdGlvbihlKXt2b2lkIDA9PT1lJiYoZT1LZS5kZWZhdWx0Wm9uZSk7dmFyIHQ9Y3IubG9jYWwoKS5zZXRab25lKGUpLnNldCh7bW9udGg6MTJ9KTtyZXR1cm4hZS51bml2ZXJzYWwmJnQub2Zmc2V0IT09dC5zZXQoe21vbnRoOjZ9KS5vZmZzZXR9LGUuaXNWYWxpZElBTkFab25lPWZ1bmN0aW9uKGUpe3JldHVybiBIZS5pc1ZhbGlkU3BlY2lmaWVyKGUpJiZIZS5pc1ZhbGlkWm9uZShlKX0sZS5ub3JtYWxpemVab25lPWZ1bmN0aW9uKGUpe3JldHVybiBQZShlLEtlLmRlZmF1bHRab25lKX0sZS5tb250aHM9ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT1lJiYoZT0ibG9uZyIpO3ZhciBuPXZvaWQgMD09PXQ/e306dCxyPW4ubG9jYWxlLGk9dm9pZCAwPT09cj9udWxsOnIsYT1uLm51bWJlcmluZ1N5c3RlbSxvPXZvaWQgMD09PWE/bnVsbDphLHU9bi5vdXRwdXRDYWxlbmRhcixzPXZvaWQgMD09PXU/ImdyZWdvcnkiOnU7cmV0dXJuIGN0LmNyZWF0ZShpLG8scykubW9udGhzKGUpfSxlLm1vbnRoc0Zvcm1hdD1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PWUmJihlPSJsb25nIik7dmFyIG49dm9pZCAwPT09dD97fTp0LHI9bi5sb2NhbGUsaT12b2lkIDA9PT1yP251bGw6cixhPW4ubnVtYmVyaW5nU3lzdGVtLG89dm9pZCAwPT09YT9udWxsOmEsdT1uLm91dHB1dENhbGVuZGFyLHM9dm9pZCAwPT09dT8iZ3JlZ29yeSI6dTtyZXR1cm4gY3QuY3JlYXRlKGksbyxzKS5tb250aHMoZSwhMCl9LGUud2Vla2RheXM9ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT1lJiYoZT0ibG9uZyIpO3ZhciBuPXZvaWQgMD09PXQ/e306dCxyPW4ubG9jYWxlLGk9dm9pZCAwPT09cj9udWxsOnIsYT1uLm51bWJlcmluZ1N5c3RlbSxvPXZvaWQgMD09PWE/bnVsbDphO3JldHVybiBjdC5jcmVhdGUoaSxvLG51bGwpLndlZWtkYXlzKGUpfSxlLndlZWtkYXlzRm9ybWF0PWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09ZSYmKGU9ImxvbmciKTt2YXIgbj12b2lkIDA9PT10P3t9OnQscj1uLmxvY2FsZSxpPXZvaWQgMD09PXI/bnVsbDpyLGE9bi5udW1iZXJpbmdTeXN0ZW0sbz12b2lkIDA9PT1hP251bGw6YTtyZXR1cm4gY3QuY3JlYXRlKGksbyxudWxsKS53ZWVrZGF5cyhlLCEwKX0sZS5tZXJpZGllbXM9ZnVuY3Rpb24oZSl7dmFyIHQ9KHZvaWQgMD09PWU/e306ZSkubG9jYWxlLG49dm9pZCAwPT09dD9udWxsOnQ7cmV0dXJuIGN0LmNyZWF0ZShuKS5tZXJpZGllbXMoKX0sZS5lcmFzPWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09ZSYmKGU9InNob3J0Iik7dmFyIG49KHZvaWQgMD09PXQ/e306dCkubG9jYWxlLHI9dm9pZCAwPT09bj9udWxsOm47cmV0dXJuIGN0LmNyZWF0ZShyLG51bGwsImdyZWdvcnkiKS5lcmFzKGUpfSxlLmZlYXR1cmVzPWZ1bmN0aW9uKCl7dmFyIGU9ITEsdD0hMSxuPSExLHI9ITE7aWYoSSgpKXtlPSEwLHQ9WSgpLHI9RygpO3RyeXtuPSJBbWVyaWNhL05ld19Zb3JrIj09PW5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCJlbiIse3RpbWVab25lOiJBbWVyaWNhL05ld19Zb3JrIn0pLnJlc29sdmVkT3B0aW9ucygpLnRpbWVab25lfWNhdGNoKGUpe249ITF9fXJldHVybntpbnRsOmUsaW50bFRva2Vuczp0LHpvbmVzOm4scmVsYXRpdmU6cn19LGV9KCk7ZnVuY3Rpb24gZm4oZSx0KXtmdW5jdGlvbiBuKGUpe3JldHVybiBlLnRvVVRDKDAse2tlZXBMb2NhbFRpbWU6ITB9KS5zdGFydE9mKCJkYXkiKS52YWx1ZU9mKCl9dmFyIHI9bih0KS1uKGUpO3JldHVybiBNYXRoLmZsb29yKG9uLmZyb21NaWxsaXMocikuYXMoImRheXMiKSl9ZnVuY3Rpb24gZG4oZSx0LG4scil7dmFyIGk9ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcixpLGE9e30sbz0wLHU9W1sieWVhcnMiLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQueWVhci1lLnllYXJ9XSxbIm1vbnRocyIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5tb250aC1lLm1vbnRoKzEyKih0LnllYXItZS55ZWFyKX1dLFsid2Vla3MiLGZ1bmN0aW9uKGUsdCl7dmFyIG49Zm4oZSx0KTtyZXR1cm4obi1uJTcpLzd9XSxbImRheXMiLGZuXV07bzx1Lmxlbmd0aDtvKyspe3ZhciBzPXVbb10sYz1zWzBdLGw9c1sxXTtpZigwPD1uLmluZGV4T2YoYykpe3ZhciBmO3I9Yzt2YXIgZCxoPWwoZSx0KTtpZih0PChpPWUucGx1cygoKGY9e30pW2NdPWgsZikpKSllPWUucGx1cygoKGQ9e30pW2NdPWgtMSxkKSksLS1oO2Vsc2UgZT1pO2FbY109aH19cmV0dXJuW2UsYSxpLHJdfShlLHQsbiksYT1pWzBdLG89aVsxXSx1PWlbMl0scz1pWzNdLGM9dC1hLGw9bi5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIDA8PVsiaG91cnMiLCJtaW51dGVzIiwic2Vjb25kcyIsIm1pbGxpc2Vjb25kcyJdLmluZGV4T2YoZSl9KTtpZigwPT09bC5sZW5ndGgpe3ZhciBmO2lmKHU8dCl1PWEucGx1cygoKGY9e30pW3NdPTEsZikpO3UhPT1hJiYob1tzXT0ob1tzXXx8MCkrYy8odS1hKSl9dmFyIGQsaD1vbi5mcm9tT2JqZWN0KE9iamVjdC5hc3NpZ24obyxyKSk7cmV0dXJuIDA8bC5sZW5ndGg/KGQ9b24uZnJvbU1pbGxpcyhjLHIpKS5zaGlmdFRvLmFwcGx5KGQsbCkucGx1cyhoKTpofXZhciBobj17YXJhYjoiW9mgLdmpXSIsYXJhYmV4dDoiW9uwLdu5XSIsYmFsaToiW+GtkC3hrZldIixiZW5nOiJb4KemLeCnr10iLGRldmE6IlvgpaYt4KWvXSIsZnVsbHdpZGU6IlvvvJAt77yZXSIsZ3VqcjoiW+Crpi3gq69dIixoYW5pZGVjOiJb44CHfOS4gHzkuox85LiJfOWbm3zkupR85YWtfOS4g3zlhat85LmdXSIsa2htcjoiW+GfoC3hn6ldIixrbmRhOiJb4LOmLeCzr10iLGxhb286Ilvgu5At4LuZXSIsbGltYjoiW+Glhi3hpY9dIixtbHltOiJb4LWmLeC1r10iLG1vbmc6IlvhoJAt4aCZXSIsbXltcjoiW+GBgC3hgYldIixvcnlhOiJb4K2mLeCtr10iLHRhbWxkZWM6Ilvgr6Yt4K+vXSIsdGVsdToiW+Cxpi3gsa9dIix0aGFpOiJb4LmQLeC5mV0iLHRpYnQ6IlvgvKAt4LypXSIsbGF0bjoiXFxkIn0sbW49e2FyYWI6WzE2MzIsMTY0MV0sYXJhYmV4dDpbMTc3NiwxNzg1XSxiYWxpOls2OTkyLDcwMDFdLGJlbmc6WzI1MzQsMjU0M10sZGV2YTpbMjQwNiwyNDE1XSxmdWxsd2lkZTpbNjUyOTYsNjUzMDNdLGd1anI6WzI3OTAsMjc5OV0sa2htcjpbNjExMiw2MTIxXSxrbmRhOlszMzAyLDMzMTFdLGxhb286WzM3OTIsMzgwMV0sbGltYjpbNjQ3MCw2NDc5XSxtbHltOlszNDMwLDM0MzldLG1vbmc6WzYxNjAsNjE2OV0sbXltcjpbNDE2MCw0MTY5XSxvcnlhOlsyOTE4LDI5MjddLHRhbWxkZWM6WzMwNDYsMzA1NV0sdGVsdTpbMzE3NCwzMTgzXSx0aGFpOlszNjY0LDM2NzNdLHRpYnQ6WzM4NzIsMzg4MV19LHluPWhuLmhhbmlkZWMucmVwbGFjZSgvW1xbfFxdXS9nLCIiKS5zcGxpdCgiIik7ZnVuY3Rpb24gdm4oZSx0KXt2YXIgbj1lLm51bWJlcmluZ1N5c3RlbTtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9IiIpLG5ldyBSZWdFeHAoIiIraG5bbnx8ImxhdG4iXSt0KX12YXIgZ249Im1pc3NpbmcgSW50bC5EYXRlVGltZUZvcm1hdC5mb3JtYXRUb1BhcnRzIHN1cHBvcnQiO2Z1bmN0aW9uIHBuKGUsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPWZ1bmN0aW9uKGUpe3JldHVybiBlfSkse3JlZ2V4OmUsZGVzZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXTtyZXR1cm4gbihmdW5jdGlvbihlKXt2YXIgdD1wYXJzZUludChlLDEwKTtpZihpc05hTih0KSl7dD0iIjtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZS5jaGFyQ29kZUF0KG4pO2lmKC0xIT09ZVtuXS5zZWFyY2goaG4uaGFuaWRlYykpdCs9eW4uaW5kZXhPZihlW25dKTtlbHNlIGZvcih2YXIgaSBpbiBtbil7dmFyIGE9bW5baV0sbz1hWzBdLHU9YVsxXTtvPD1yJiZyPD11JiYodCs9ci1vKX19cmV0dXJuIHBhcnNlSW50KHQsMTApfXJldHVybiB0fSh0KSl9fX12YXIgd249IiggfCIrU3RyaW5nLmZyb21DaGFyQ29kZSgxNjApKyIpIixrbj1uZXcgUmVnRXhwKHduLCJnIik7ZnVuY3Rpb24gYm4oZSl7cmV0dXJuIGUucmVwbGFjZSgvXC4vZywiXFwuPyIpLnJlcGxhY2Uoa24sd24pfWZ1bmN0aW9uIE9uKGUpe3JldHVybiBlLnJlcGxhY2UoL1wuL2csIiIpLnJlcGxhY2Uoa24sIiAiKS50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIFNuKG4scil7cmV0dXJuIG51bGw9PT1uP251bGw6e3JlZ2V4OlJlZ0V4cChuLm1hcChibikuam9pbigifCIpKSxkZXNlcjpmdW5jdGlvbihlKXt2YXIgdD1lWzBdO3JldHVybiBuLmZpbmRJbmRleChmdW5jdGlvbihlKXtyZXR1cm4gT24odCk9PT1PbihlKX0pK3J9fX1mdW5jdGlvbiBUbihlLHQpe3JldHVybntyZWdleDplLGRlc2VyOmZ1bmN0aW9uKGUpe3JldHVybiBsZShlWzFdLGVbMl0pfSxncm91cHM6dH19ZnVuY3Rpb24gTW4oZSl7cmV0dXJue3JlZ2V4OmUsZGVzZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMF19fX1mdW5jdGlvbiBObih0LG4pe2Z1bmN0aW9uIHIoZSl7cmV0dXJue3JlZ2V4OlJlZ0V4cChlLnZhbC5yZXBsYWNlKC9bXC1cW1xde30oKSorPy4sXFxcXiR8I1xzXS9nLCJcXCQmIikpLGRlc2VyOmZ1bmN0aW9uKGUpe3JldHVybiBlWzBdfSxsaXRlcmFsOiEwfX12YXIgaT12bihuKSxhPXZuKG4sInsyfSIpLG89dm4obiwiezN9IiksdT12bihuLCJ7NH0iKSxzPXZuKG4sIns2fSIpLGM9dm4obiwiezEsMn0iKSxsPXZuKG4sInsxLDN9IiksZj12bihuLCJ7MSw2fSIpLGQ9dm4obiwiezEsOX0iKSxoPXZuKG4sInsyLDR9IiksbT12bihuLCJ7NCw2fSIpLGU9ZnVuY3Rpb24oZSl7aWYodC5saXRlcmFsKXJldHVybiByKGUpO3N3aXRjaChlLnZhbCl7Y2FzZSJHIjpyZXR1cm4gU24obi5lcmFzKCJzaG9ydCIsITEpLDApO2Nhc2UiR0ciOnJldHVybiBTbihuLmVyYXMoImxvbmciLCExKSwwKTtjYXNlInkiOnJldHVybiBwbihmKTtjYXNlInl5IjpyZXR1cm4gcG4oaCxzZSk7Y2FzZSJ5eXl5IjpyZXR1cm4gcG4odSk7Y2FzZSJ5eXl5eSI6cmV0dXJuIHBuKG0pO2Nhc2UieXl5eXl5IjpyZXR1cm4gcG4ocyk7Y2FzZSJNIjpyZXR1cm4gcG4oYyk7Y2FzZSJNTSI6cmV0dXJuIHBuKGEpO2Nhc2UiTU1NIjpyZXR1cm4gU24obi5tb250aHMoInNob3J0IiwhMCwhMSksMSk7Y2FzZSJNTU1NIjpyZXR1cm4gU24obi5tb250aHMoImxvbmciLCEwLCExKSwxKTtjYXNlIkwiOnJldHVybiBwbihjKTtjYXNlIkxMIjpyZXR1cm4gcG4oYSk7Y2FzZSJMTEwiOnJldHVybiBTbihuLm1vbnRocygic2hvcnQiLCExLCExKSwxKTtjYXNlIkxMTEwiOnJldHVybiBTbihuLm1vbnRocygibG9uZyIsITEsITEpLDEpO2Nhc2UiZCI6cmV0dXJuIHBuKGMpO2Nhc2UiZGQiOnJldHVybiBwbihhKTtjYXNlIm8iOnJldHVybiBwbihsKTtjYXNlIm9vbyI6cmV0dXJuIHBuKG8pO2Nhc2UiSEgiOnJldHVybiBwbihhKTtjYXNlIkgiOnJldHVybiBwbihjKTtjYXNlImhoIjpyZXR1cm4gcG4oYSk7Y2FzZSJoIjpyZXR1cm4gcG4oYyk7Y2FzZSJtbSI6cmV0dXJuIHBuKGEpO2Nhc2UibSI6Y2FzZSJxIjpyZXR1cm4gcG4oYyk7Y2FzZSJxcSI6cmV0dXJuIHBuKGEpO2Nhc2UicyI6cmV0dXJuIHBuKGMpO2Nhc2Uic3MiOnJldHVybiBwbihhKTtjYXNlIlMiOnJldHVybiBwbihsKTtjYXNlIlNTUyI6cmV0dXJuIHBuKG8pO2Nhc2UidSI6cmV0dXJuIE1uKGQpO2Nhc2UiYSI6cmV0dXJuIFNuKG4ubWVyaWRpZW1zKCksMCk7Y2FzZSJra2trIjpyZXR1cm4gcG4odSk7Y2FzZSJrayI6cmV0dXJuIHBuKGgsc2UpO2Nhc2UiVyI6cmV0dXJuIHBuKGMpO2Nhc2UiV1ciOnJldHVybiBwbihhKTtjYXNlIkUiOmNhc2UiYyI6cmV0dXJuIHBuKGkpO2Nhc2UiRUVFIjpyZXR1cm4gU24obi53ZWVrZGF5cygic2hvcnQiLCExLCExKSwxKTtjYXNlIkVFRUUiOnJldHVybiBTbihuLndlZWtkYXlzKCJsb25nIiwhMSwhMSksMSk7Y2FzZSJjY2MiOnJldHVybiBTbihuLndlZWtkYXlzKCJzaG9ydCIsITAsITEpLDEpO2Nhc2UiY2NjYyI6cmV0dXJuIFNuKG4ud2Vla2RheXMoImxvbmciLCEwLCExKSwxKTtjYXNlIloiOmNhc2UiWloiOnJldHVybiBUbihuZXcgUmVnRXhwKCIoWystXSIrYy5zb3VyY2UrIikoPzo6KCIrYS5zb3VyY2UrIikpPyIpLDIpO2Nhc2UiWlpaIjpyZXR1cm4gVG4obmV3IFJlZ0V4cCgiKFsrLV0iK2Muc291cmNlKyIpKCIrYS5zb3VyY2UrIik/IiksMik7Y2FzZSJ6IjpyZXR1cm4gTW4oL1thLXpfKy0vXXsxLDI1Nn0/L2kpO2RlZmF1bHQ6cmV0dXJuIHIoZSl9fSh0KXx8e2ludmFsaWRSZWFzb246Z259O3JldHVybiBlLnRva2VuPXQsZX12YXIgRG49e3llYXI6eyIyLWRpZ2l0IjoieXkiLG51bWVyaWM6Inl5eXl5In0sbW9udGg6e251bWVyaWM6Ik0iLCIyLWRpZ2l0IjoiTU0iLHNob3J0OiJNTU0iLGxvbmc6Ik1NTU0ifSxkYXk6e251bWVyaWM6ImQiLCIyLWRpZ2l0IjoiZGQifSx3ZWVrZGF5OntzaG9ydDoiRUVFIixsb25nOiJFRUVFIn0sZGF5cGVyaW9kOiJhIixkYXlQZXJpb2Q6ImEiLGhvdXI6e251bWVyaWM6ImgiLCIyLWRpZ2l0IjoiaGgifSxtaW51dGU6e251bWVyaWM6Im0iLCIyLWRpZ2l0IjoibW0ifSxzZWNvbmQ6e251bWVyaWM6InMiLCIyLWRpZ2l0Ijoic3MifX07dmFyIEVuPW51bGw7ZnVuY3Rpb24gSW4oZSx0KXtpZihlLmxpdGVyYWwpcmV0dXJuIGU7dmFyIG49eGUubWFjcm9Ub2tlblRvRm9ybWF0T3B0cyhlLnZhbCk7aWYoIW4pcmV0dXJuIGU7dmFyIHI9eGUuY3JlYXRlKHQsbikuZm9ybWF0RGF0ZVRpbWVQYXJ0cyhFbj1Fbnx8Y3IuZnJvbU1pbGxpcygxNTU1NTU1NTU1NTU1KSkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihlLHQpe3ZhciBuPWUudHlwZSxyPWUudmFsdWU7aWYoImxpdGVyYWwiPT09bilyZXR1cm57bGl0ZXJhbDohMCx2YWw6cn07dmFyIGk9dFtuXSxhPURuW25dO3JldHVybiJvYmplY3QiPT10eXBlb2YgYSYmKGE9YVtpXSksYT97bGl0ZXJhbDohMSx2YWw6YX06dm9pZCAwfShlLG4pfSk7cmV0dXJuIHIuaW5jbHVkZXModm9pZCAwKT9lOnJ9ZnVuY3Rpb24gVm4odCxlLG4pe3ZhciByLGksYSxvPShyPXhlLnBhcnNlRm9ybWF0KG4pLGk9dCwoYT1BcnJheS5wcm90b3R5cGUpLmNvbmNhdC5hcHBseShhLHIubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBJbihlLGkpfSkpKSx1PW8ubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBObihlLHQpfSkscz11LmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW52YWxpZFJlYXNvbn0pO2lmKHMpcmV0dXJue2lucHV0OmUsdG9rZW5zOm8saW52YWxpZFJlYXNvbjpzLmludmFsaWRSZWFzb259O3ZhciBjLGwsZixkPVsiXiIrKGY9dSkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnJlZ2V4fSkucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrIigiK3Quc291cmNlKyIpIn0sIiIpKyIkIixmXSxoPWRbMV0sbT1SZWdFeHAoZFswXSwiaSIpLHk9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUubWF0Y2godCk7aWYocil7dmFyIGk9e30sYT0xO2Zvcih2YXIgbyBpbiBuKWlmKFEobixvKSl7dmFyIHU9bltvXSxzPXUuZ3JvdXBzP3UuZ3JvdXBzKzE6MTshdS5saXRlcmFsJiZ1LnRva2VuJiYoaVt1LnRva2VuLnZhbFswXV09dS5kZXNlcihyLnNsaWNlKGEsYStzKSkpLGErPXN9cmV0dXJuW3IsaV19cmV0dXJuW3Ise31dfShlLG0saCksdj15WzBdLGc9eVsxXSxwPWc/KGw9VygoYz1nKS5aKT9XKGMueik/bnVsbDpIZS5jcmVhdGUoYy56KTpuZXcgUmUoYy5aKSxXKGMucSl8fChjLk09MyooYy5xLTEpKzEpLFcoYy5oKXx8KGMuaDwxMiYmMT09PWMuYT9jLmgrPTEyOjEyPT09Yy5oJiYwPT09Yy5hJiYoYy5oPTApKSwwPT09Yy5HJiZjLnkmJihjLnk9LWMueSksVyhjLnUpfHwoYy5TPXRlKGMudSkpLFtPYmplY3Qua2V5cyhjKS5yZWR1Y2UoZnVuY3Rpb24oZSx0KXt2YXIgbj1mdW5jdGlvbihlKXtzd2l0Y2goZSl7Y2FzZSJTIjpyZXR1cm4ibWlsbGlzZWNvbmQiO2Nhc2UicyI6cmV0dXJuInNlY29uZCI7Y2FzZSJtIjpyZXR1cm4ibWludXRlIjtjYXNlImgiOmNhc2UiSCI6cmV0dXJuImhvdXIiO2Nhc2UiZCI6cmV0dXJuImRheSI7Y2FzZSJvIjpyZXR1cm4ib3JkaW5hbCI7Y2FzZSJMIjpjYXNlIk0iOnJldHVybiJtb250aCI7Y2FzZSJ5IjpyZXR1cm4ieWVhciI7Y2FzZSJFIjpjYXNlImMiOnJldHVybiJ3ZWVrZGF5IjtjYXNlIlciOnJldHVybiJ3ZWVrTnVtYmVyIjtjYXNlImsiOnJldHVybiJ3ZWVrWWVhciI7Y2FzZSJxIjpyZXR1cm4icXVhcnRlciI7ZGVmYXVsdDpyZXR1cm4gbnVsbH19KHQpO3JldHVybiBuJiYoZVtuXT1jW3RdKSxlfSx7fSksbF0pOltudWxsLG51bGxdLHc9cFswXSxrPXBbMV07aWYoUShnLCJhIikmJlEoZywiSCIpKXRocm93IG5ldyBMKCJDYW4ndCBpbmNsdWRlIG1lcmlkaWVtIHdoZW4gc3BlY2lmeWluZyAyNC1ob3VyIGZvcm1hdCIpO3JldHVybntpbnB1dDplLHRva2VuczpvLHJlZ2V4Om0scmF3TWF0Y2hlczp2LG1hdGNoZXM6ZyxyZXN1bHQ6dyx6b25lOmt9fXZhciBMbj1bMCwzMSw1OSw5MCwxMjAsMTUxLDE4MSwyMTIsMjQzLDI3MywzMDQsMzM0XSx4bj1bMCwzMSw2MCw5MSwxMjEsMTUyLDE4MiwyMTMsMjQ0LDI3NCwzMDUsMzM1XTtmdW5jdGlvbiBDbihlLHQpe3JldHVybiBuZXcgQ2UoInVuaXQgb3V0IG9mIHJhbmdlIiwieW91IHNwZWNpZmllZCAiK3QrIiAob2YgdHlwZSAiK3R5cGVvZiB0KyIpIGFzIGEgIitlKyIsIHdoaWNoIGlzIGludmFsaWQiKX1mdW5jdGlvbiBGbihlLHQsbil7dmFyIHI9bmV3IERhdGUoRGF0ZS5VVEMoZSx0LTEsbikpLmdldFVUQ0RheSgpO3JldHVybiAwPT09cj83OnJ9ZnVuY3Rpb24gWm4oZSx0LG4pe3JldHVybiBuKyhyZShlKT94bjpMbilbdC0xXX1mdW5jdGlvbiBqbihlLHQpe3ZhciBuPXJlKGUpP3huOkxuLHI9bi5maW5kSW5kZXgoZnVuY3Rpb24oZSl7cmV0dXJuIGU8dH0pO3JldHVybnttb250aDpyKzEsZGF5OnQtbltyXX19ZnVuY3Rpb24gQW4oZSl7dmFyIHQsbj1lLnllYXIscj1lLm1vbnRoLGk9ZS5kYXksYT1abihuLHIsaSksbz1GbihuLHIsaSksdT1NYXRoLmZsb29yKChhLW8rMTApLzcpO3JldHVybiB1PDE/dT11ZSh0PW4tMSk6dT51ZShuKT8odD1uKzEsdT0xKTp0PW4sT2JqZWN0LmFzc2lnbih7d2Vla1llYXI6dCx3ZWVrTnVtYmVyOnUsd2Vla2RheTpvfSxtZShlKSl9ZnVuY3Rpb24gem4oZSl7dmFyIHQsbj1lLndlZWtZZWFyLHI9ZS53ZWVrTnVtYmVyLGk9ZS53ZWVrZGF5LGE9Rm4obiwxLDQpLG89aWUobiksdT03KnIraS1hLTM7dTwxP3UrPWllKHQ9bi0xKTpvPHU/KHQ9bisxLHUtPWllKG4pKTp0PW47dmFyIHM9am4odCx1KSxjPXMubW9udGgsbD1zLmRheTtyZXR1cm4gT2JqZWN0LmFzc2lnbih7eWVhcjp0LG1vbnRoOmMsZGF5Omx9LG1lKGUpKX1mdW5jdGlvbiBfbihlKXt2YXIgdD1lLnllYXIsbj1abih0LGUubW9udGgsZS5kYXkpO3JldHVybiBPYmplY3QuYXNzaWduKHt5ZWFyOnQsb3JkaW5hbDpufSxtZShlKSl9ZnVuY3Rpb24gcW4oZSl7dmFyIHQ9ZS55ZWFyLG49am4odCxlLm9yZGluYWwpLHI9bi5tb250aCxpPW4uZGF5O3JldHVybiBPYmplY3QuYXNzaWduKHt5ZWFyOnQsbW9udGg6cixkYXk6aX0sbWUoZSkpfWZ1bmN0aW9uIEhuKGUpe3ZhciB0PUooZS55ZWFyKSxuPUsoZS5tb250aCwxLDEyKSxyPUsoZS5kYXksMSxhZShlLnllYXIsZS5tb250aCkpO3JldHVybiB0P24/IXImJkNuKCJkYXkiLGUuZGF5KTpDbigibW9udGgiLGUubW9udGgpOkNuKCJ5ZWFyIixlLnllYXIpfWZ1bmN0aW9uIFVuKGUpe3ZhciB0PWUuaG91cixuPWUubWludXRlLHI9ZS5zZWNvbmQsaT1lLm1pbGxpc2Vjb25kLGE9Syh0LDAsMjMpfHwyND09PXQmJjA9PT1uJiYwPT09ciYmMD09PWksbz1LKG4sMCw1OSksdT1LKHIsMCw1OSkscz1LKGksMCw5OTkpO3JldHVybiBhP28/dT8hcyYmQ24oIm1pbGxpc2Vjb25kIixpKTpDbigic2Vjb25kIixyKTpDbigibWludXRlIixuKTpDbigiaG91ciIsdCl9dmFyIFJuPSJJbnZhbGlkIERhdGVUaW1lIjtmdW5jdGlvbiBXbihlKXtyZXR1cm4gbmV3IENlKCJ1bnN1cHBvcnRlZCB6b25lIiwndGhlIHpvbmUgIicrZS5uYW1lKyciIGlzIG5vdCBzdXBwb3J0ZWQnKX1mdW5jdGlvbiBQbihlKXtyZXR1cm4gbnVsbD09PWUud2Vla0RhdGEmJihlLndlZWtEYXRhPUFuKGUuYykpLGUud2Vla0RhdGF9ZnVuY3Rpb24gSm4oZSx0KXt2YXIgbj17dHM6ZS50cyx6b25lOmUuem9uZSxjOmUuYyxvOmUubyxsb2M6ZS5sb2MsaW52YWxpZDplLmludmFsaWR9O3JldHVybiBuZXcgY3IoT2JqZWN0LmFzc2lnbih7fSxuLHQse29sZDpufSkpfWZ1bmN0aW9uIFluKGUsdCxuKXt2YXIgcj1lLTYwKnQqMWUzLGk9bi5vZmZzZXQocik7aWYodD09PWkpcmV0dXJuW3IsdF07ci09NjAqKGktdCkqMWUzO3ZhciBhPW4ub2Zmc2V0KHIpO3JldHVybiBpPT09YT9bcixpXTpbZS02MCpNYXRoLm1pbihpLGEpKjFlMyxNYXRoLm1heChpLGEpXX1mdW5jdGlvbiBHbihlLHQpe2UrPTYwKnQqMWUzO3ZhciBuPW5ldyBEYXRlKGUpO3JldHVybnt5ZWFyOm4uZ2V0VVRDRnVsbFllYXIoKSxtb250aDpuLmdldFVUQ01vbnRoKCkrMSxkYXk6bi5nZXRVVENEYXRlKCksaG91cjpuLmdldFVUQ0hvdXJzKCksbWludXRlOm4uZ2V0VVRDTWludXRlcygpLHNlY29uZDpuLmdldFVUQ1NlY29uZHMoKSxtaWxsaXNlY29uZDpuLmdldFVUQ01pbGxpc2Vjb25kcygpfX1mdW5jdGlvbiAkbihlLHQsbil7cmV0dXJuIFluKG9lKGUpLHQsbil9ZnVuY3Rpb24gQm4oZSx0KXt2YXIgbj1lLm8scj1lLmMueWVhcitNYXRoLnRydW5jKHQueWVhcnMpLGk9ZS5jLm1vbnRoK01hdGgudHJ1bmModC5tb250aHMpKzMqTWF0aC50cnVuYyh0LnF1YXJ0ZXJzKSxhPU9iamVjdC5hc3NpZ24oe30sZS5jLHt5ZWFyOnIsbW9udGg6aSxkYXk6TWF0aC5taW4oZS5jLmRheSxhZShyLGkpKStNYXRoLnRydW5jKHQuZGF5cykrNypNYXRoLnRydW5jKHQud2Vla3MpfSksbz1vbi5mcm9tT2JqZWN0KHt5ZWFyczp0LnllYXJzLU1hdGgudHJ1bmModC55ZWFycykscXVhcnRlcnM6dC5xdWFydGVycy1NYXRoLnRydW5jKHQucXVhcnRlcnMpLG1vbnRoczp0Lm1vbnRocy1NYXRoLnRydW5jKHQubW9udGhzKSx3ZWVrczp0LndlZWtzLU1hdGgudHJ1bmModC53ZWVrcyksZGF5czp0LmRheXMtTWF0aC50cnVuYyh0LmRheXMpLGhvdXJzOnQuaG91cnMsbWludXRlczp0Lm1pbnV0ZXMsc2Vjb25kczp0LnNlY29uZHMsbWlsbGlzZWNvbmRzOnQubWlsbGlzZWNvbmRzfSkuYXMoIm1pbGxpc2Vjb25kcyIpLHU9WW4ob2UoYSksbixlLnpvbmUpLHM9dVswXSxjPXVbMV07cmV0dXJuIDAhPT1vJiYocys9byxjPWUuem9uZS5vZmZzZXQocykpLHt0czpzLG86Y319ZnVuY3Rpb24gUW4oZSx0LG4scixpKXt2YXIgYT1uLnNldFpvbmUsbz1uLnpvbmU7aWYoZSYmMCE9PU9iamVjdC5rZXlzKGUpLmxlbmd0aCl7dmFyIHU9dHx8byxzPWNyLmZyb21PYmplY3QoT2JqZWN0LmFzc2lnbihlLG4se3pvbmU6dSxzZXRab25lOnZvaWQgMH0pKTtyZXR1cm4gYT9zOnMuc2V0Wm9uZShvKX1yZXR1cm4gY3IuaW52YWxpZChuZXcgQ2UoInVucGFyc2FibGUiLCd0aGUgaW5wdXQgIicraSsiXCIgY2FuJ3QgYmUgcGFyc2VkIGFzICIrcikpfWZ1bmN0aW9uIEtuKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49ITApLGUuaXNWYWxpZD94ZS5jcmVhdGUoY3QuY3JlYXRlKCJlbi1VUyIpLHthbGxvd1o6bixmb3JjZVNpbXBsZTohMH0pLmZvcm1hdERhdGVUaW1lRnJvbVN0cmluZyhlLHQpOm51bGx9ZnVuY3Rpb24gWG4oZSx0KXt2YXIgbj10LnN1cHByZXNzU2Vjb25kcyxyPXZvaWQgMCE9PW4mJm4saT10LnN1cHByZXNzTWlsbGlzZWNvbmRzLGE9dm9pZCAwIT09aSYmaSxvPXQuaW5jbHVkZU9mZnNldCx1PXQuaW5jbHVkZVpvbmUscz12b2lkIDAhPT11JiZ1LGM9dC5zcGFjZVpvbmUsbD12b2lkIDAhPT1jJiZjLGY9dC5mb3JtYXQsZD12b2lkIDA9PT1mPyJleHRlbmRlZCI6ZixoPSJiYXNpYyI9PT1kPyJISG1tIjoiSEg6bW0iO3JldHVybiByJiYwPT09ZS5zZWNvbmQmJjA9PT1lLm1pbGxpc2Vjb25kfHwoaCs9ImJhc2ljIj09PWQ/InNzIjoiOnNzIixhJiYwPT09ZS5taWxsaXNlY29uZHx8KGgrPSIuU1NTIikpLChzfHxvKSYmbCYmKGgrPSIgIikscz9oKz0ieiI6byYmKGgrPSJiYXNpYyI9PT1kPyJaWloiOiJaWiIpLEtuKGUsaCl9dmFyIGVyPXttb250aDoxLGRheToxLGhvdXI6MCxtaW51dGU6MCxzZWNvbmQ6MCxtaWxsaXNlY29uZDowfSx0cj17d2Vla051bWJlcjoxLHdlZWtkYXk6MSxob3VyOjAsbWludXRlOjAsc2Vjb25kOjAsbWlsbGlzZWNvbmQ6MH0sbnI9e29yZGluYWw6MSxob3VyOjAsbWludXRlOjAsc2Vjb25kOjAsbWlsbGlzZWNvbmQ6MH0scnI9WyJ5ZWFyIiwibW9udGgiLCJkYXkiLCJob3VyIiwibWludXRlIiwic2Vjb25kIiwibWlsbGlzZWNvbmQiXSxpcj1bIndlZWtZZWFyIiwid2Vla051bWJlciIsIndlZWtkYXkiLCJob3VyIiwibWludXRlIiwic2Vjb25kIiwibWlsbGlzZWNvbmQiXSxhcj1bInllYXIiLCJvcmRpbmFsIiwiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsIm1pbGxpc2Vjb25kIl07ZnVuY3Rpb24gb3IoZSl7dmFyIHQ9e3llYXI6InllYXIiLHllYXJzOiJ5ZWFyIixtb250aDoibW9udGgiLG1vbnRoczoibW9udGgiLGRheToiZGF5IixkYXlzOiJkYXkiLGhvdXI6ImhvdXIiLGhvdXJzOiJob3VyIixtaW51dGU6Im1pbnV0ZSIsbWludXRlczoibWludXRlIixxdWFydGVyOiJxdWFydGVyIixxdWFydGVyczoicXVhcnRlciIsc2Vjb25kOiJzZWNvbmQiLHNlY29uZHM6InNlY29uZCIsbWlsbGlzZWNvbmQ6Im1pbGxpc2Vjb25kIixtaWxsaXNlY29uZHM6Im1pbGxpc2Vjb25kIix3ZWVrZGF5OiJ3ZWVrZGF5Iix3ZWVrZGF5czoid2Vla2RheSIsd2Vla251bWJlcjoid2Vla051bWJlciIsd2Vla3NudW1iZXI6IndlZWtOdW1iZXIiLHdlZWtudW1iZXJzOiJ3ZWVrTnVtYmVyIix3ZWVreWVhcjoid2Vla1llYXIiLHdlZWt5ZWFyczoid2Vla1llYXIiLG9yZGluYWw6Im9yZGluYWwifVtlLnRvTG93ZXJDYXNlKCldO2lmKCF0KXRocm93IG5ldyBoKGUpO3JldHVybiB0fWZ1bmN0aW9uIHVyKGUsdCl7Zm9yKHZhciBuLHI9Vihycik7IShuPXIoKSkuZG9uZTspe3ZhciBpPW4udmFsdWU7VyhlW2ldKSYmKGVbaV09ZXJbaV0pfXZhciBhPUhuKGUpfHxVbihlKTtpZihhKXJldHVybiBjci5pbnZhbGlkKGEpO3ZhciBvPUtlLm5vdygpLHU9JG4oZSx0Lm9mZnNldChvKSx0KSxzPXVbMF0sYz11WzFdO3JldHVybiBuZXcgY3Ioe3RzOnMsem9uZTp0LG86Y30pfWZ1bmN0aW9uIHNyKHQsbixyKXtmdW5jdGlvbiBlKGUsdCl7cmV0dXJuIGU9bmUoZSxhfHxyLmNhbGVuZGFyeT8wOjIsITApLG4ubG9jLmNsb25lKHIpLnJlbEZvcm1hdHRlcihyKS5mb3JtYXQoZSx0KX1mdW5jdGlvbiBpKGUpe3JldHVybiByLmNhbGVuZGFyeT9uLmhhc1NhbWUodCxlKT8wOm4uc3RhcnRPZihlKS5kaWZmKHQuc3RhcnRPZihlKSxlKS5nZXQoZSk6bi5kaWZmKHQsZSkuZ2V0KGUpfXZhciBhPSEhVyhyLnJvdW5kKXx8ci5yb3VuZDtpZihyLnVuaXQpcmV0dXJuIGUoaShyLnVuaXQpLHIudW5pdCk7Zm9yKHZhciBvLHU9VihyLnVuaXRzKTshKG89dSgpKS5kb25lOyl7dmFyIHM9by52YWx1ZSxjPWkocyk7aWYoMTw9TWF0aC5hYnMoYykpcmV0dXJuIGUoYyxzKX1yZXR1cm4gZSgwLHIudW5pdHNbci51bml0cy5sZW5ndGgtMV0pfXZhciBjcj1mdW5jdGlvbigpe2Z1bmN0aW9uIEkoZSl7dmFyIHQ9ZS56b25lfHxLZS5kZWZhdWx0Wm9uZSxuPWUuaW52YWxpZHx8KE51bWJlci5pc05hTihlLnRzKT9uZXcgQ2UoImludmFsaWQgaW5wdXQiKTpudWxsKXx8KHQuaXNWYWxpZD9udWxsOlduKHQpKTt0aGlzLnRzPVcoZS50cyk/S2Uubm93KCk6ZS50czt2YXIgcj1udWxsLGk9bnVsbDtpZighbilpZihlLm9sZCYmZS5vbGQudHM9PT10aGlzLnRzJiZlLm9sZC56b25lLmVxdWFscyh0KSl7dmFyIGE9W2Uub2xkLmMsZS5vbGQub107cj1hWzBdLGk9YVsxXX1lbHNle3ZhciBvPXQub2Zmc2V0KHRoaXMudHMpO3I9R24odGhpcy50cyxvKSxyPShuPU51bWJlci5pc05hTihyLnllYXIpP25ldyBDZSgiaW52YWxpZCBpbnB1dCIpOm51bGwpP251bGw6cixpPW4/bnVsbDpvfXRoaXMuX3pvbmU9dCx0aGlzLmxvYz1lLmxvY3x8Y3QuY3JlYXRlKCksdGhpcy5pbnZhbGlkPW4sdGhpcy53ZWVrRGF0YT1udWxsLHRoaXMuYz1yLHRoaXMubz1pLHRoaXMuaXNMdXhvbkRhdGVUaW1lPSEwfUkubG9jYWw9ZnVuY3Rpb24oZSx0LG4scixpLGEsbyl7cmV0dXJuIFcoZSk/bmV3IEkoe3RzOktlLm5vdygpfSk6dXIoe3llYXI6ZSxtb250aDp0LGRheTpuLGhvdXI6cixtaW51dGU6aSxzZWNvbmQ6YSxtaWxsaXNlY29uZDpvfSxLZS5kZWZhdWx0Wm9uZSl9LEkudXRjPWZ1bmN0aW9uKGUsdCxuLHIsaSxhLG8pe3JldHVybiBXKGUpP25ldyBJKHt0czpLZS5ub3coKSx6b25lOlJlLnV0Y0luc3RhbmNlfSk6dXIoe3llYXI6ZSxtb250aDp0LGRheTpuLGhvdXI6cixtaW51dGU6aSxzZWNvbmQ6YSxtaWxsaXNlY29uZDpvfSxSZS51dGNJbnN0YW5jZSl9LEkuZnJvbUpTRGF0ZT1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PXt9KTt2YXIgbixyPShuPWUsIltvYmplY3QgRGF0ZV0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG4pP2UudmFsdWVPZigpOk5hTik7aWYoTnVtYmVyLmlzTmFOKHIpKXJldHVybiBJLmludmFsaWQoImludmFsaWQgaW5wdXQiKTt2YXIgaT1QZSh0LnpvbmUsS2UuZGVmYXVsdFpvbmUpO3JldHVybiBpLmlzVmFsaWQ/bmV3IEkoe3RzOnIsem9uZTppLGxvYzpjdC5mcm9tT2JqZWN0KHQpfSk6SS5pbnZhbGlkKFduKGkpKX0sSS5mcm9tTWlsbGlzPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09dCYmKHQ9e30pLFAoZSkpcmV0dXJuIGU8LTg2NGUxM3x8ODY0ZTEzPGU/SS5pbnZhbGlkKCJUaW1lc3RhbXAgb3V0IG9mIHJhbmdlIik6bmV3IEkoe3RzOmUsem9uZTpQZSh0LnpvbmUsS2UuZGVmYXVsdFpvbmUpLGxvYzpjdC5mcm9tT2JqZWN0KHQpfSk7dGhyb3cgbmV3IG0oImZyb21NaWxsaXMgcmVxdWlyZXMgYSBudW1lcmljYWwgaW5wdXQsIGJ1dCByZWNlaXZlZCBhICIrdHlwZW9mIGUrIiB3aXRoIHZhbHVlICIrZSl9LEkuZnJvbVNlY29uZHM9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT10JiYodD17fSksUChlKSlyZXR1cm4gbmV3IEkoe3RzOjFlMyplLHpvbmU6UGUodC56b25lLEtlLmRlZmF1bHRab25lKSxsb2M6Y3QuZnJvbU9iamVjdCh0KX0pO3Rocm93IG5ldyBtKCJmcm9tU2Vjb25kcyByZXF1aXJlcyBhIG51bWVyaWNhbCBpbnB1dCIpfSxJLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9UGUoZS56b25lLEtlLmRlZmF1bHRab25lKTtpZighdC5pc1ZhbGlkKXJldHVybiBJLmludmFsaWQoV24odCkpO3ZhciBuPUtlLm5vdygpLHI9dC5vZmZzZXQobiksaT1kZShlLG9yLFsiem9uZSIsImxvY2FsZSIsIm91dHB1dENhbGVuZGFyIiwibnVtYmVyaW5nU3lzdGVtIl0pLGE9IVcoaS5vcmRpbmFsKSxvPSFXKGkueWVhciksdT0hVyhpLm1vbnRoKXx8IVcoaS5kYXkpLHM9b3x8dSxjPWkud2Vla1llYXJ8fGkud2Vla051bWJlcixsPWN0LmZyb21PYmplY3QoZSk7aWYoKHN8fGEpJiZjKXRocm93IG5ldyBMKCJDYW4ndCBtaXggd2Vla1llYXIvd2Vla051bWJlciB1bml0cyB3aXRoIHllYXIvbW9udGgvZGF5IG9yIG9yZGluYWxzIik7aWYodSYmYSl0aHJvdyBuZXcgTCgiQ2FuJ3QgbWl4IG9yZGluYWwgZGF0ZXMgd2l0aCBtb250aC9kYXkiKTt2YXIgZixkLGg9Y3x8aS53ZWVrZGF5JiYhcyxtPUduKG4scik7aD8oZj1pcixkPXRyLG09QW4obSkpOmE/KGY9YXIsZD1ucixtPV9uKG0pKTooZj1ycixkPWVyKTtmb3IodmFyIHksdj0hMSxnPVYoZik7ISh5PWcoKSkuZG9uZTspe3ZhciBwPXkudmFsdWU7VyhpW3BdKT9pW3BdPXY/ZFtwXTptW3BdOnY9ITB9dmFyIHcsayxiLE8sUyxULE0sTj0oaD8oUz1KKChPPWkpLndlZWtZZWFyKSxUPUsoTy53ZWVrTnVtYmVyLDEsdWUoTy53ZWVrWWVhcikpLE09SyhPLndlZWtkYXksMSw3KSxTP1Q/IU0mJkNuKCJ3ZWVrZGF5IixPLndlZWtkYXkpOkNuKCJ3ZWVrIixPLndlZWspOkNuKCJ3ZWVrWWVhciIsTy53ZWVrWWVhcikpOmE/KGs9Sigodz1pKS55ZWFyKSxiPUsody5vcmRpbmFsLDEsaWUody55ZWFyKSksaz8hYiYmQ24oIm9yZGluYWwiLHcub3JkaW5hbCk6Q24oInllYXIiLHcueWVhcikpOkhuKGkpKXx8VW4oaSk7aWYoTilyZXR1cm4gSS5pbnZhbGlkKE4pO3ZhciBEPSRuKGg/em4oaSk6YT9xbihpKTppLHIsdCksRT1uZXcgSSh7dHM6RFswXSx6b25lOnQsbzpEWzFdLGxvYzpsfSk7cmV0dXJuIGkud2Vla2RheSYmcyYmZS53ZWVrZGF5IT09RS53ZWVrZGF5P0kuaW52YWxpZCgibWlzbWF0Y2hlZCB3ZWVrZGF5IiwieW91IGNhbid0IHNwZWNpZnkgYm90aCBhIHdlZWtkYXkgb2YgIitpLndlZWtkYXkrIiBhbmQgYSBkYXRlIG9mICIrRS50b0lTTygpKTpFfSxJLmZyb21JU089ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10JiYodD17fSk7dmFyIG49ZHQoZSxbenQsVXRdLFtfdCxSdF0sW3F0LFd0XSxbSHQsUHRdKTtyZXR1cm4gUW4oblswXSxuWzFdLHQsIklTTyA4NjAxIixlKX0sSS5mcm9tUkZDMjgyMj1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PXt9KTt2YXIgbj1kdChlLnJlcGxhY2UoL1woW14pXSpcKXxbXG5cdF0vZywiICIpLnJlcGxhY2UoLyhcc1xzKykvZywiICIpLnRyaW0oKSxbTHQseHRdKTtyZXR1cm4gUW4oblswXSxuWzFdLHQsIlJGQyAyODIyIixlKX0sSS5mcm9tSFRUUD1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PXt9KTt2YXIgbj1kdChlLFtDdCxqdF0sW0Z0LGp0XSxbWnQsQXRdKTtyZXR1cm4gUW4oblswXSxuWzFdLHQsIkhUVFAiLHQpfSxJLmZyb21Gb3JtYXQ9ZnVuY3Rpb24oZSx0LG4pe2lmKHZvaWQgMD09PW4mJihuPXt9KSxXKGUpfHxXKHQpKXRocm93IG5ldyBtKCJmcm9tRm9ybWF0IHJlcXVpcmVzIGFuIGlucHV0IHN0cmluZyBhbmQgYSBmb3JtYXQiKTt2YXIgcixpPW4ubG9jYWxlLGE9dm9pZCAwPT09aT9udWxsOmksbz1uLm51bWJlcmluZ1N5c3RlbSx1PXZvaWQgMD09PW8/bnVsbDpvLHM9Y3QuZnJvbU9wdHMoe2xvY2FsZTphLG51bWJlcmluZ1N5c3RlbTp1LGRlZmF1bHRUb0VOOiEwfSksYz1bKHI9Vm4ocyxlLHQpKS5yZXN1bHQsci56b25lLHIuaW52YWxpZFJlYXNvbl0sbD1jWzBdLGY9Y1sxXSxkPWNbMl07cmV0dXJuIGQ/SS5pbnZhbGlkKGQpOlFuKGwsZixuLCJmb3JtYXQgIit0LGUpfSxJLmZyb21TdHJpbmc9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj17fSksSS5mcm9tRm9ybWF0KGUsdCxuKX0sSS5mcm9tU1FMPWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9e30pO3ZhciBuPWR0KGUsW0p0LEd0XSxbWXQsJHRdKTtyZXR1cm4gUW4oblswXSxuWzFdLHQsIlNRTCIsZSl9LEkuaW52YWxpZD1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PXQmJih0PW51bGwpLCFlKXRocm93IG5ldyBtKCJuZWVkIHRvIHNwZWNpZnkgYSByZWFzb24gdGhlIERhdGVUaW1lIGlzIGludmFsaWQiKTt2YXIgbj1lIGluc3RhbmNlb2YgQ2U/ZTpuZXcgQ2UoZSx0KTtpZihLZS50aHJvd09uSW52YWxpZCl0aHJvdyBuZXcgbChuKTtyZXR1cm4gbmV3IEkoe2ludmFsaWQ6bn0pfSxJLmlzRGF0ZVRpbWU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuaXNMdXhvbkRhdGVUaW1lfHwhMX07dmFyIGU9SS5wcm90b3R5cGU7cmV0dXJuIGUuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzW2VdfSxlLnJlc29sdmVkTG9jYWxlT3B0cz1mdW5jdGlvbihlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIHQ9eGUuY3JlYXRlKHRoaXMubG9jLmNsb25lKGUpLGUpLnJlc29sdmVkT3B0aW9ucyh0aGlzKTtyZXR1cm57bG9jYWxlOnQubG9jYWxlLG51bWJlcmluZ1N5c3RlbTp0Lm51bWJlcmluZ1N5c3RlbSxvdXRwdXRDYWxlbmRhcjp0LmNhbGVuZGFyfX0sZS50b1VUQz1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT10JiYodD17fSksdGhpcy5zZXRab25lKFJlLmluc3RhbmNlKGUpLHQpfSxlLnRvTG9jYWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRab25lKEtlLmRlZmF1bHRab25lKX0sZS5zZXRab25lPWZ1bmN0aW9uKGUsdCl7dmFyIG49dm9pZCAwPT09dD97fTp0LHI9bi5rZWVwTG9jYWxUaW1lLGk9dm9pZCAwIT09ciYmcixhPW4ua2VlcENhbGVuZGFyVGltZSxvPXZvaWQgMCE9PWEmJmE7aWYoKGU9UGUoZSxLZS5kZWZhdWx0Wm9uZSkpLmVxdWFscyh0aGlzLnpvbmUpKXJldHVybiB0aGlzO2lmKGUuaXNWYWxpZCl7dmFyIHU9dGhpcy50cztpZihpfHxvKXt2YXIgcz1lLm9mZnNldCh0aGlzLnRzKTt1PSRuKHRoaXMudG9PYmplY3QoKSxzLGUpWzBdfXJldHVybiBKbih0aGlzLHt0czp1LHpvbmU6ZX0pfXJldHVybiBJLmludmFsaWQoV24oZSkpfSxlLnJlY29uZmlndXJlPWZ1bmN0aW9uKGUpe3ZhciB0PXZvaWQgMD09PWU/e306ZSxuPXQubG9jYWxlLHI9dC5udW1iZXJpbmdTeXN0ZW0saT10Lm91dHB1dENhbGVuZGFyLGE9dGhpcy5sb2MuY2xvbmUoe2xvY2FsZTpuLG51bWJlcmluZ1N5c3RlbTpyLG91dHB1dENhbGVuZGFyOml9KTtyZXR1cm4gSm4odGhpcyx7bG9jOmF9KX0sZS5zZXRMb2NhbGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVjb25maWd1cmUoe2xvY2FsZTplfSl9LGUuc2V0PWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7dmFyIHQsbj1kZShlLG9yLFtdKTshVyhuLndlZWtZZWFyKXx8IVcobi53ZWVrTnVtYmVyKXx8IVcobi53ZWVrZGF5KT90PXpuKE9iamVjdC5hc3NpZ24oQW4odGhpcy5jKSxuKSk6VyhuLm9yZGluYWwpPyh0PU9iamVjdC5hc3NpZ24odGhpcy50b09iamVjdCgpLG4pLFcobi5kYXkpJiYodC5kYXk9TWF0aC5taW4oYWUodC55ZWFyLHQubW9udGgpLHQuZGF5KSkpOnQ9cW4oT2JqZWN0LmFzc2lnbihfbih0aGlzLmMpLG4pKTt2YXIgcj0kbih0LHRoaXMubyx0aGlzLnpvbmUpO3JldHVybiBKbih0aGlzLHt0czpyWzBdLG86clsxXX0pfSxlLnBsdXM9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaXNWYWxpZD9Kbih0aGlzLEJuKHRoaXMsdW4oZSkpKTp0aGlzfSxlLm1pbnVzPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmlzVmFsaWQ/Sm4odGhpcyxCbih0aGlzLHVuKGUpLm5lZ2F0ZSgpKSk6dGhpc30sZS5zdGFydE9mPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7dmFyIHQ9e30sbj1vbi5ub3JtYWxpemVVbml0KGUpO3N3aXRjaChuKXtjYXNlInllYXJzIjp0Lm1vbnRoPTE7Y2FzZSJxdWFydGVycyI6Y2FzZSJtb250aHMiOnQuZGF5PTE7Y2FzZSJ3ZWVrcyI6Y2FzZSJkYXlzIjp0LmhvdXI9MDtjYXNlImhvdXJzIjp0Lm1pbnV0ZT0wO2Nhc2UibWludXRlcyI6dC5zZWNvbmQ9MDtjYXNlInNlY29uZHMiOnQubWlsbGlzZWNvbmQ9MH1pZigid2Vla3MiPT09biYmKHQud2Vla2RheT0xKSwicXVhcnRlcnMiPT09bil7dmFyIHI9TWF0aC5jZWlsKHRoaXMubW9udGgvMyk7dC5tb250aD0zKihyLTEpKzF9cmV0dXJuIHRoaXMuc2V0KHQpfSxlLmVuZE9mPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5wbHVzKCgodD17fSlbZV09MSx0KSkuc3RhcnRPZihlKS5taW51cygxKTp0aGlzfSxlLnRvRm9ybWF0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PXt9KSx0aGlzLmlzVmFsaWQ/eGUuY3JlYXRlKHRoaXMubG9jLnJlZGVmYXVsdFRvRU4odCkpLmZvcm1hdERhdGVUaW1lRnJvbVN0cmluZyh0aGlzLGUpOlJufSxlLnRvTG9jYWxlU3RyaW5nPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT13KSx0aGlzLmlzVmFsaWQ/eGUuY3JlYXRlKHRoaXMubG9jLmNsb25lKGUpLGUpLmZvcm1hdERhdGVUaW1lKHRoaXMpOlJufSxlLnRvTG9jYWxlUGFydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPXt9KSx0aGlzLmlzVmFsaWQ/eGUuY3JlYXRlKHRoaXMubG9jLmNsb25lKGUpLGUpLmZvcm1hdERhdGVUaW1lUGFydHModGhpcyk6W119LGUudG9JU089ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPXt9KSx0aGlzLmlzVmFsaWQ/dGhpcy50b0lTT0RhdGUoZSkrIlQiK3RoaXMudG9JU09UaW1lKGUpOm51bGx9LGUudG9JU09EYXRlPWZ1bmN0aW9uKGUpe3ZhciB0PSh2b2lkIDA9PT1lP3t9OmUpLmZvcm1hdCxuPSJiYXNpYyI9PT0odm9pZCAwPT09dD8iZXh0ZW5kZWQiOnQpPyJ5eXl5TU1kZCI6Inl5eXktTU0tZGQiO3JldHVybiA5OTk5PHRoaXMueWVhciYmKG49IisiK24pLEtuKHRoaXMsbil9LGUudG9JU09XZWVrRGF0ZT1mdW5jdGlvbigpe3JldHVybiBLbih0aGlzLCJra2trLSdXJ1dXLWMiKX0sZS50b0lTT1RpbWU9ZnVuY3Rpb24oZSl7dmFyIHQ9dm9pZCAwPT09ZT97fTplLG49dC5zdXBwcmVzc01pbGxpc2Vjb25kcyxyPXZvaWQgMCE9PW4mJm4saT10LnN1cHByZXNzU2Vjb25kcyxhPXZvaWQgMCE9PWkmJmksbz10LmluY2x1ZGVPZmZzZXQsdT12b2lkIDA9PT1vfHxvLHM9dC5mb3JtYXQ7cmV0dXJuIFhuKHRoaXMse3N1cHByZXNzU2Vjb25kczphLHN1cHByZXNzTWlsbGlzZWNvbmRzOnIsaW5jbHVkZU9mZnNldDp1LGZvcm1hdDp2b2lkIDA9PT1zPyJleHRlbmRlZCI6c30pfSxlLnRvUkZDMjgyMj1mdW5jdGlvbigpe3JldHVybiBLbih0aGlzLCJFRUUsIGRkIExMTCB5eXl5IEhIOm1tOnNzIFpaWiIsITEpfSxlLnRvSFRUUD1mdW5jdGlvbigpe3JldHVybiBLbih0aGlzLnRvVVRDKCksIkVFRSwgZGQgTExMIHl5eXkgSEg6bW06c3MgJ0dNVCciKX0sZS50b1NRTERhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gS24odGhpcywieXl5eS1NTS1kZCIpfSxlLnRvU1FMVGltZT1mdW5jdGlvbihlKXt2YXIgdD12b2lkIDA9PT1lP3t9OmUsbj10LmluY2x1ZGVPZmZzZXQscj12b2lkIDA9PT1ufHxuLGk9dC5pbmNsdWRlWm9uZTtyZXR1cm4gWG4odGhpcyx7aW5jbHVkZU9mZnNldDpyLGluY2x1ZGVab25lOnZvaWQgMCE9PWkmJmksc3BhY2Vab25lOiEwfSl9LGUudG9TUUw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPXt9KSx0aGlzLmlzVmFsaWQ/dGhpcy50b1NRTERhdGUoKSsiICIrdGhpcy50b1NRTFRpbWUoZSk6bnVsbH0sZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy50b0lTTygpOlJufSxlLnZhbHVlT2Y9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b01pbGxpcygpfSxlLnRvTWlsbGlzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnRzOk5hTn0sZS50b1NlY29uZHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMudHMvMWUzOk5hTn0sZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b0lTTygpfSxlLnRvQlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRvSlNEYXRlKCl9LGUudG9PYmplY3Q9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT09ZSYmKGU9e30pLCF0aGlzLmlzVmFsaWQpcmV0dXJue307dmFyIHQ9T2JqZWN0LmFzc2lnbih7fSx0aGlzLmMpO3JldHVybiBlLmluY2x1ZGVDb25maWcmJih0Lm91dHB1dENhbGVuZGFyPXRoaXMub3V0cHV0Q2FsZW5kYXIsdC5udW1iZXJpbmdTeXN0ZW09dGhpcy5sb2MubnVtYmVyaW5nU3lzdGVtLHQubG9jYWxlPXRoaXMubG9jLmxvY2FsZSksdH0sZS50b0pTRGF0ZT1mdW5jdGlvbigpe3JldHVybiBuZXcgRGF0ZSh0aGlzLmlzVmFsaWQ/dGhpcy50czpOYU4pfSxlLmRpZmY9ZnVuY3Rpb24oZSx0LG4pe2lmKHZvaWQgMD09PXQmJih0PSJtaWxsaXNlY29uZHMiKSx2b2lkIDA9PT1uJiYobj17fSksIXRoaXMuaXNWYWxpZHx8IWUuaXNWYWxpZClyZXR1cm4gb24uaW52YWxpZCh0aGlzLmludmFsaWR8fGUuaW52YWxpZCwiY3JlYXRlZCBieSBkaWZmaW5nIGFuIGludmFsaWQgRGF0ZVRpbWUiKTt2YXIgcixpPU9iamVjdC5hc3NpZ24oe2xvY2FsZTp0aGlzLmxvY2FsZSxudW1iZXJpbmdTeXN0ZW06dGhpcy5udW1iZXJpbmdTeXN0ZW19LG4pLGE9KHI9dCwoQXJyYXkuaXNBcnJheShyKT9yOltyXSkubWFwKG9uLm5vcm1hbGl6ZVVuaXQpKSxvPWUudmFsdWVPZigpPnRoaXMudmFsdWVPZigpLHU9ZG4obz90aGlzOmUsbz9lOnRoaXMsYSxpKTtyZXR1cm4gbz91Lm5lZ2F0ZSgpOnV9LGUuZGlmZk5vdz1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0ibWlsbGlzZWNvbmRzIiksdm9pZCAwPT09dCYmKHQ9e30pLHRoaXMuZGlmZihJLmxvY2FsKCksZSx0KX0sZS51bnRpbD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2NuLmZyb21EYXRlVGltZXModGhpcyxlKTp0aGlzfSxlLmhhc1NhbWU9ZnVuY3Rpb24oZSx0KXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiExO2lmKCJtaWxsaXNlY29uZCI9PT10KXJldHVybiB0aGlzLnZhbHVlT2YoKT09PWUudmFsdWVPZigpO3ZhciBuPWUudmFsdWVPZigpO3JldHVybiB0aGlzLnN0YXJ0T2YodCk8PW4mJm48PXRoaXMuZW5kT2YodCl9LGUuZXF1YWxzPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmlzVmFsaWQmJmUuaXNWYWxpZCYmdGhpcy52YWx1ZU9mKCk9PT1lLnZhbHVlT2YoKSYmdGhpcy56b25lLmVxdWFscyhlLnpvbmUpJiZ0aGlzLmxvYy5lcXVhbHMoZS5sb2MpfSxlLnRvUmVsYXRpdmU9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT09ZSYmKGU9e30pLCF0aGlzLmlzVmFsaWQpcmV0dXJuIG51bGw7dmFyIHQ9ZS5iYXNlfHxJLmZyb21PYmplY3Qoe3pvbmU6dGhpcy56b25lfSksbj1lLnBhZGRpbmc/dGhpczx0Py1lLnBhZGRpbmc6ZS5wYWRkaW5nOjA7cmV0dXJuIHNyKHQsdGhpcy5wbHVzKG4pLE9iamVjdC5hc3NpZ24oZSx7bnVtZXJpYzoiYWx3YXlzIix1bml0czpbInllYXJzIiwibW9udGhzIiwiZGF5cyIsImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiXX0pKX0sZS50b1JlbGF0aXZlQ2FsZW5kYXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPXt9KSx0aGlzLmlzVmFsaWQ/c3IoZS5iYXNlfHxJLmZyb21PYmplY3Qoe3pvbmU6dGhpcy56b25lfSksdGhpcyxPYmplY3QuYXNzaWduKGUse251bWVyaWM6ImF1dG8iLHVuaXRzOlsieWVhcnMiLCJtb250aHMiLCJkYXlzIl0sY2FsZW5kYXJ5OiEwfSkpOm51bGx9LEkubWluPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsdD1uZXcgQXJyYXkoZSksbj0wO248ZTtuKyspdFtuXT1hcmd1bWVudHNbbl07aWYoIXQuZXZlcnkoSS5pc0RhdGVUaW1lKSl0aHJvdyBuZXcgbSgibWluIHJlcXVpcmVzIGFsbCBhcmd1bWVudHMgYmUgRGF0ZVRpbWVzIik7cmV0dXJuICQodCxmdW5jdGlvbihlKXtyZXR1cm4gZS52YWx1ZU9mKCl9LE1hdGgubWluKX0sSS5tYXg9ZnVuY3Rpb24oKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCx0PW5ldyBBcnJheShlKSxuPTA7bjxlO24rKyl0W25dPWFyZ3VtZW50c1tuXTtpZighdC5ldmVyeShJLmlzRGF0ZVRpbWUpKXRocm93IG5ldyBtKCJtYXggcmVxdWlyZXMgYWxsIGFyZ3VtZW50cyBiZSBEYXRlVGltZXMiKTtyZXR1cm4gJCh0LGZ1bmN0aW9uKGUpe3JldHVybiBlLnZhbHVlT2YoKX0sTWF0aC5tYXgpfSxJLmZyb21Gb3JtYXRFeHBsYWluPWZ1bmN0aW9uKGUsdCxuKXt2b2lkIDA9PT1uJiYobj17fSk7dmFyIHI9bi5sb2NhbGUsaT12b2lkIDA9PT1yP251bGw6cixhPW4ubnVtYmVyaW5nU3lzdGVtLG89dm9pZCAwPT09YT9udWxsOmE7cmV0dXJuIFZuKGN0LmZyb21PcHRzKHtsb2NhbGU6aSxudW1iZXJpbmdTeXN0ZW06byxkZWZhdWx0VG9FTjohMH0pLGUsdCl9LEkuZnJvbVN0cmluZ0V4cGxhaW49ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj17fSksSS5mcm9tRm9ybWF0RXhwbGFpbihlLHQsbil9LGkoSSxbe2tleToiaXNWYWxpZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLmludmFsaWR9fSx7a2V5OiJpbnZhbGlkUmVhc29uIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnZhbGlkP3RoaXMuaW52YWxpZC5yZWFzb246bnVsbH19LHtrZXk6ImludmFsaWRFeHBsYW5hdGlvbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW52YWxpZD90aGlzLmludmFsaWQuZXhwbGFuYXRpb246bnVsbH19LHtrZXk6ImxvY2FsZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmxvYy5sb2NhbGU6bnVsbH19LHtrZXk6Im51bWJlcmluZ1N5c3RlbSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmxvYy5udW1iZXJpbmdTeXN0ZW06bnVsbH19LHtrZXk6Im91dHB1dENhbGVuZGFyIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMubG9jLm91dHB1dENhbGVuZGFyOm51bGx9fSx7a2V5OiJ6b25lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fem9uZX19LHtrZXk6InpvbmVOYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuem9uZS5uYW1lOm51bGx9fSx7a2V5OiJ5ZWFyIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuYy55ZWFyOk5hTn19LHtrZXk6InF1YXJ0ZXIiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmFsaWQ/TWF0aC5jZWlsKHRoaXMuYy5tb250aC8zKTpOYU59fSx7a2V5OiJtb250aCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmMubW9udGg6TmFOfX0se2tleToiZGF5IixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuYy5kYXk6TmFOfX0se2tleToiaG91ciIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmMuaG91cjpOYU59fSx7a2V5OiJtaW51dGUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5jLm1pbnV0ZTpOYU59fSx7a2V5OiJzZWNvbmQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5jLnNlY29uZDpOYU59fSx7a2V5OiJtaWxsaXNlY29uZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmMubWlsbGlzZWNvbmQ6TmFOfX0se2tleToid2Vla1llYXIiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmFsaWQ/UG4odGhpcykud2Vla1llYXI6TmFOfX0se2tleToid2Vla051bWJlciIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9Qbih0aGlzKS53ZWVrTnVtYmVyOk5hTn19LHtrZXk6IndlZWtkYXkiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmFsaWQ/UG4odGhpcykud2Vla2RheTpOYU59fSx7a2V5OiJvcmRpbmFsIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP19uKHRoaXMuYykub3JkaW5hbDpOYU59fSx7a2V5OiJtb250aFNob3J0IixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2xuLm1vbnRocygic2hvcnQiLHtsb2NhbGU6dGhpcy5sb2NhbGV9KVt0aGlzLm1vbnRoLTFdOm51bGx9fSx7a2V5OiJtb250aExvbmciLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmFsaWQ/bG4ubW9udGhzKCJsb25nIix7bG9jYWxlOnRoaXMubG9jYWxlfSlbdGhpcy5tb250aC0xXTpudWxsfX0se2tleToid2Vla2RheVNob3J0IixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2xuLndlZWtkYXlzKCJzaG9ydCIse2xvY2FsZTp0aGlzLmxvY2FsZX0pW3RoaXMud2Vla2RheS0xXTpudWxsfX0se2tleToid2Vla2RheUxvbmciLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmFsaWQ/bG4ud2Vla2RheXMoImxvbmciLHtsb2NhbGU6dGhpcy5sb2NhbGV9KVt0aGlzLndlZWtkYXktMV06bnVsbH19LHtrZXk6Im9mZnNldCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD8rdGhpcy5vOk5hTn19LHtrZXk6Im9mZnNldE5hbWVTaG9ydCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnpvbmUub2Zmc2V0TmFtZSh0aGlzLnRzLHtmb3JtYXQ6InNob3J0Iixsb2NhbGU6dGhpcy5sb2NhbGV9KTpudWxsfX0se2tleToib2Zmc2V0TmFtZUxvbmciLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy56b25lLm9mZnNldE5hbWUodGhpcy50cyx7Zm9ybWF0OiJsb25nIixsb2NhbGU6dGhpcy5sb2NhbGV9KTpudWxsfX0se2tleToiaXNPZmZzZXRGaXhlZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnpvbmUudW5pdmVyc2FsOm51bGx9fSx7a2V5OiJpc0luRFNUIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc09mZnNldEZpeGVkJiYodGhpcy5vZmZzZXQ+dGhpcy5zZXQoe21vbnRoOjF9KS5vZmZzZXR8fHRoaXMub2Zmc2V0PnRoaXMuc2V0KHttb250aDo1fSkub2Zmc2V0KX19LHtrZXk6ImlzSW5MZWFwWWVhciIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHJlKHRoaXMueWVhcil9fSx7a2V5OiJkYXlzSW5Nb250aCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGFlKHRoaXMueWVhcix0aGlzLm1vbnRoKX19LHtrZXk6ImRheXNJblllYXIiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmFsaWQ/aWUodGhpcy55ZWFyKTpOYU59fSx7a2V5OiJ3ZWVrc0luV2Vla1llYXIiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmFsaWQ/dWUodGhpcy53ZWVrWWVhcik6TmFOfX1dLFt7a2V5OiJEQVRFX1NIT1JUIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gd319LHtrZXk6IkRBVEVfTUVEIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4ga319LHtrZXk6IkRBVEVfTUVEX1dJVEhfV0VFS0RBWSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGJ9fSx7a2V5OiJEQVRFX0ZVTEwiLGdldDpmdW5jdGlvbigpe3JldHVybiBPfX0se2tleToiREFURV9IVUdFIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gU319LHtrZXk6IlRJTUVfU0lNUExFIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gVH19LHtrZXk6IlRJTUVfV0lUSF9TRUNPTkRTIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gTX19LHtrZXk6IlRJTUVfV0lUSF9TSE9SVF9PRkZTRVQiLGdldDpmdW5jdGlvbigpe3JldHVybiBOfX0se2tleToiVElNRV9XSVRIX0xPTkdfT0ZGU0VUIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gRH19LHtrZXk6IlRJTUVfMjRfU0lNUExFIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gRX19LHtrZXk6IlRJTUVfMjRfV0lUSF9TRUNPTkRTIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4geH19LHtrZXk6IlRJTUVfMjRfV0lUSF9TSE9SVF9PRkZTRVQiLGdldDpmdW5jdGlvbigpe3JldHVybiBDfX0se2tleToiVElNRV8yNF9XSVRIX0xPTkdfT0ZGU0VUIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gRn19LHtrZXk6IkRBVEVUSU1FX1NIT1JUIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gWn19LHtrZXk6IkRBVEVUSU1FX1NIT1JUX1dJVEhfU0VDT05EUyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGp9fSx7a2V5OiJEQVRFVElNRV9NRUQiLGdldDpmdW5jdGlvbigpe3JldHVybiBBfX0se2tleToiREFURVRJTUVfTUVEX1dJVEhfU0VDT05EUyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHp9fSx7a2V5OiJEQVRFVElNRV9NRURfV0lUSF9XRUVLREFZIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gX319LHtrZXk6IkRBVEVUSU1FX0ZVTEwiLGdldDpmdW5jdGlvbigpe3JldHVybiBxfX0se2tleToiREFURVRJTUVfRlVMTF9XSVRIX1NFQ09ORFMiLGdldDpmdW5jdGlvbigpe3JldHVybiBIfX0se2tleToiREFURVRJTUVfSFVHRSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFV9fSx7a2V5OiJEQVRFVElNRV9IVUdFX1dJVEhfU0VDT05EUyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFJ9fV0pLEl9KCk7ZnVuY3Rpb24gbHIoZSl7aWYoY3IuaXNEYXRlVGltZShlKSlyZXR1cm4gZTtpZihlJiZlLnZhbHVlT2YmJlAoZS52YWx1ZU9mKCkpKXJldHVybiBjci5mcm9tSlNEYXRlKGUpO2lmKGUmJiJvYmplY3QiPT10eXBlb2YgZSlyZXR1cm4gY3IuZnJvbU9iamVjdChlKTt0aHJvdyBuZXcgbSgiVW5rbm93biBkYXRldGltZSBhcmd1bWVudDogIitlKyIsIG9mIHR5cGUgIit0eXBlb2YgZSl9cmV0dXJuIGUuRGF0ZVRpbWU9Y3IsZS5EdXJhdGlvbj1vbixlLkZpeGVkT2Zmc2V0Wm9uZT1SZSxlLklBTkFab25lPUhlLGUuSW5mbz1sbixlLkludGVydmFsPWNuLGUuSW52YWxpZFpvbmU9V2UsZS5Mb2NhbFpvbmU9amUsZS5TZXR0aW5ncz1LZSxlLlpvbmU9RmUsZX0oe30pOw=="},{"meta":{"name":"list.js","url":"https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.js","ts":1608308695210,"mimetype":"text/javascript"},"source":"LyohIExpc3QuanMgdjEuNS4wIChodHRwOi8vbGlzdGpzLmNvbSkgYnkgSm9ubnkgU3Ryw7ZtYmVyZyAoaHR0cDovL2phdnZlLmNvbSkgKi8KdmFyIExpc3QgPQovKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwCi8qKioqKiovIAkvLyBUaGUgbW9kdWxlIGNhY2hlCi8qKioqKiovIAl2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9OwoKLyoqKioqKi8gCS8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uCi8qKioqKiovIAlmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7CgovKioqKioqLyAJCS8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZQovKioqKioqLyAJCWlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKQovKioqKioqLyAJCQlyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0czsKCi8qKioqKiovIAkJLy8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSkKLyoqKioqKi8gCQl2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7Ci8qKioqKiovIAkJCWk6IG1vZHVsZUlkLAovKioqKioqLyAJCQlsOiBmYWxzZSwKLyoqKioqKi8gCQkJZXhwb3J0czoge30KLyoqKioqKi8gCQl9OwoKLyoqKioqKi8gCQkvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb24KLyoqKioqKi8gCQltb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTsKCi8qKioqKiovIAkJLy8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZAovKioqKioqLyAJCW1vZHVsZS5sID0gdHJ1ZTsKCi8qKioqKiovIAkJLy8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGUKLyoqKioqKi8gCQlyZXR1cm4gbW9kdWxlLmV4cG9ydHM7Ci8qKioqKiovIAl9CgoKLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzOwoKLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzOwoKLyoqKioqKi8gCS8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHQKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uaSA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfTsKCi8qKioqKiovIAkvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHMKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikgewovKioqKioqLyAJCWlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHsKLyoqKioqKi8gCQkJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsKLyoqKioqKi8gCQkJCWNvbmZpZ3VyYWJsZTogZmFsc2UsCi8qKioqKiovIAkJCQllbnVtZXJhYmxlOiB0cnVlLAovKioqKioqLyAJCQkJZ2V0OiBnZXR0ZXIKLyoqKioqKi8gCQkJfSk7Ci8qKioqKiovIAkJfQovKioqKioqLyAJfTsKCi8qKioqKiovIAkvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlcwovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7Ci8qKioqKiovIAkJdmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/Ci8qKioqKiovIAkJCWZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6Ci8qKioqKiovIAkJCWZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07Ci8qKioqKiovIAkJX193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpOwovKioqKioqLyAJCXJldHVybiBnZXR0ZXI7Ci8qKioqKiovIAl9OwoKLyoqKioqKi8gCS8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbAovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9OwoKLyoqKioqKi8gCS8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSAiIjsKCi8qKioqKiovIAkvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHMKLyoqKioqKi8gCXJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDExKTsKLyoqKioqKi8gfSkKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyoqKioqKi8gKFsKLyogMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovKioKICogTW9kdWxlIGRlcGVuZGVuY2llcy4KICovCgp2YXIgaW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOwoKLyoqCiAqIFdoaXRlc3BhY2UgcmVnZXhwLgogKi8KCnZhciByZSA9IC9ccysvOwoKLyoqCiAqIHRvU3RyaW5nIHJlZmVyZW5jZS4KICovCgp2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOwoKLyoqCiAqIFdyYXAgYGVsYCBpbiBhIGBDbGFzc0xpc3RgLgogKgogKiBAcGFyYW0ge0VsZW1lbnR9IGVsCiAqIEByZXR1cm4ge0NsYXNzTGlzdH0KICogQGFwaSBwdWJsaWMKICovCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGVsKXsKICByZXR1cm4gbmV3IENsYXNzTGlzdChlbCk7Cn07CgovKioKICogSW5pdGlhbGl6ZSBhIG5ldyBDbGFzc0xpc3QgZm9yIGBlbGAuCiAqCiAqIEBwYXJhbSB7RWxlbWVudH0gZWwKICogQGFwaSBwcml2YXRlCiAqLwoKZnVuY3Rpb24gQ2xhc3NMaXN0KGVsKSB7CiAgaWYgKCFlbCB8fCAhZWwubm9kZVR5cGUpIHsKICAgIHRocm93IG5ldyBFcnJvcignQSBET00gZWxlbWVudCByZWZlcmVuY2UgaXMgcmVxdWlyZWQnKTsKICB9CiAgdGhpcy5lbCA9IGVsOwogIHRoaXMubGlzdCA9IGVsLmNsYXNzTGlzdDsKfQoKLyoqCiAqIEFkZCBjbGFzcyBgbmFtZWAgaWYgbm90IGFscmVhZHkgcHJlc2VudC4KICoKICogQHBhcmFtIHtTdHJpbmd9IG5hbWUKICogQHJldHVybiB7Q2xhc3NMaXN0fQogKiBAYXBpIHB1YmxpYwogKi8KCkNsYXNzTGlzdC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24obmFtZSl7CiAgLy8gY2xhc3NMaXN0CiAgaWYgKHRoaXMubGlzdCkgewogICAgdGhpcy5saXN0LmFkZChuYW1lKTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLy8gZmFsbGJhY2sKICB2YXIgYXJyID0gdGhpcy5hcnJheSgpOwogIHZhciBpID0gaW5kZXgoYXJyLCBuYW1lKTsKICBpZiAoIX5pKSBhcnIucHVzaChuYW1lKTsKICB0aGlzLmVsLmNsYXNzTmFtZSA9IGFyci5qb2luKCcgJyk7CiAgcmV0dXJuIHRoaXM7Cn07CgovKioKICogUmVtb3ZlIGNsYXNzIGBuYW1lYCB3aGVuIHByZXNlbnQsIG9yCiAqIHBhc3MgYSByZWd1bGFyIGV4cHJlc3Npb24gdG8gcmVtb3ZlCiAqIGFueSB3aGljaCBtYXRjaC4KICoKICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBuYW1lCiAqIEByZXR1cm4ge0NsYXNzTGlzdH0KICogQGFwaSBwdWJsaWMKICovCgpDbGFzc0xpc3QucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKG5hbWUpewogIC8vIGNsYXNzTGlzdAogIGlmICh0aGlzLmxpc3QpIHsKICAgIHRoaXMubGlzdC5yZW1vdmUobmFtZSk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8vIGZhbGxiYWNrCiAgdmFyIGFyciA9IHRoaXMuYXJyYXkoKTsKICB2YXIgaSA9IGluZGV4KGFyciwgbmFtZSk7CiAgaWYgKH5pKSBhcnIuc3BsaWNlKGksIDEpOwogIHRoaXMuZWwuY2xhc3NOYW1lID0gYXJyLmpvaW4oJyAnKTsKICByZXR1cm4gdGhpczsKfTsKCgovKioKICogVG9nZ2xlIGNsYXNzIGBuYW1lYCwgY2FuIGZvcmNlIHN0YXRlIHZpYSBgZm9yY2VgLgogKgogKiBGb3IgYnJvd3NlcnMgdGhhdCBzdXBwb3J0IGNsYXNzTGlzdCwgYnV0IGRvIG5vdCBzdXBwb3J0IGBmb3JjZWAgeWV0LAogKiB0aGUgbWlzdGFrZSB3aWxsIGJlIGRldGVjdGVkIGFuZCBjb3JyZWN0ZWQuCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lCiAqIEBwYXJhbSB7Qm9vbGVhbn0gZm9yY2UKICogQHJldHVybiB7Q2xhc3NMaXN0fQogKiBAYXBpIHB1YmxpYwogKi8KCkNsYXNzTGlzdC5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24obmFtZSwgZm9yY2UpewogIC8vIGNsYXNzTGlzdAogIGlmICh0aGlzLmxpc3QpIHsKICAgIGlmICgidW5kZWZpbmVkIiAhPT0gdHlwZW9mIGZvcmNlKSB7CiAgICAgIGlmIChmb3JjZSAhPT0gdGhpcy5saXN0LnRvZ2dsZShuYW1lLCBmb3JjZSkpIHsKICAgICAgICB0aGlzLmxpc3QudG9nZ2xlKG5hbWUpOyAvLyB0b2dnbGUgYWdhaW4gdG8gY29ycmVjdAogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aGlzLmxpc3QudG9nZ2xlKG5hbWUpOwogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfQoKICAvLyBmYWxsYmFjawogIGlmICgidW5kZWZpbmVkIiAhPT0gdHlwZW9mIGZvcmNlKSB7CiAgICBpZiAoIWZvcmNlKSB7CiAgICAgIHRoaXMucmVtb3ZlKG5hbWUpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5hZGQobmFtZSk7CiAgICB9CiAgfSBlbHNlIHsKICAgIGlmICh0aGlzLmhhcyhuYW1lKSkgewogICAgICB0aGlzLnJlbW92ZShuYW1lKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuYWRkKG5hbWUpOwogICAgfQogIH0KCiAgcmV0dXJuIHRoaXM7Cn07CgovKioKICogUmV0dXJuIGFuIGFycmF5IG9mIGNsYXNzZXMuCiAqCiAqIEByZXR1cm4ge0FycmF5fQogKiBAYXBpIHB1YmxpYwogKi8KCkNsYXNzTGlzdC5wcm90b3R5cGUuYXJyYXkgPSBmdW5jdGlvbigpewogIHZhciBjbGFzc05hbWUgPSB0aGlzLmVsLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJzsKICB2YXIgc3RyID0gY2xhc3NOYW1lLnJlcGxhY2UoL15ccyt8XHMrJC9nLCAnJyk7CiAgdmFyIGFyciA9IHN0ci5zcGxpdChyZSk7CiAgaWYgKCcnID09PSBhcnJbMF0pIGFyci5zaGlmdCgpOwogIHJldHVybiBhcnI7Cn07CgovKioKICogQ2hlY2sgaWYgY2xhc3MgYG5hbWVgIGlzIHByZXNlbnQuCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lCiAqIEByZXR1cm4ge0NsYXNzTGlzdH0KICogQGFwaSBwdWJsaWMKICovCgpDbGFzc0xpc3QucHJvdG90eXBlLmhhcyA9CkNsYXNzTGlzdC5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbihuYW1lKXsKICByZXR1cm4gdGhpcy5saXN0ID8gdGhpcy5saXN0LmNvbnRhaW5zKG5hbWUpIDogISEgfmluZGV4KHRoaXMuYXJyYXkoKSwgbmFtZSk7Cn07CgoKLyoqKi8gfSksCi8qIDEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGJpbmQgPSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciA/ICdhZGRFdmVudExpc3RlbmVyJyA6ICdhdHRhY2hFdmVudCcsCiAgICB1bmJpbmQgPSB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciA/ICdyZW1vdmVFdmVudExpc3RlbmVyJyA6ICdkZXRhY2hFdmVudCcsCiAgICBwcmVmaXggPSBiaW5kICE9PSAnYWRkRXZlbnRMaXN0ZW5lcicgPyAnb24nIDogJycsCiAgICB0b0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKCi8qKgogKiBCaW5kIGBlbGAgZXZlbnQgYHR5cGVgIHRvIGBmbmAuCiAqCiAqIEBwYXJhbSB7RWxlbWVudH0gZWwsIE5vZGVMaXN0LCBIVE1MQ29sbGVjdGlvbiBvciBBcnJheQogKiBAcGFyYW0ge1N0cmluZ30gdHlwZQogKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbgogKiBAcGFyYW0ge0Jvb2xlYW59IGNhcHR1cmUKICogQGFwaSBwdWJsaWMKICovCgpleHBvcnRzLmJpbmQgPSBmdW5jdGlvbihlbCwgdHlwZSwgZm4sIGNhcHR1cmUpewogIGVsID0gdG9BcnJheShlbCk7CiAgZm9yICggdmFyIGkgPSAwOyBpIDwgZWwubGVuZ3RoOyBpKysgKSB7CiAgICBlbFtpXVtiaW5kXShwcmVmaXggKyB0eXBlLCBmbiwgY2FwdHVyZSB8fCBmYWxzZSk7CiAgfQp9OwoKLyoqCiAqIFVuYmluZCBgZWxgIGV2ZW50IGB0eXBlYCdzIGNhbGxiYWNrIGBmbmAuCiAqCiAqIEBwYXJhbSB7RWxlbWVudH0gZWwsIE5vZGVMaXN0LCBIVE1MQ29sbGVjdGlvbiBvciBBcnJheQogKiBAcGFyYW0ge1N0cmluZ30gdHlwZQogKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbgogKiBAcGFyYW0ge0Jvb2xlYW59IGNhcHR1cmUKICogQGFwaSBwdWJsaWMKICovCgpleHBvcnRzLnVuYmluZCA9IGZ1bmN0aW9uKGVsLCB0eXBlLCBmbiwgY2FwdHVyZSl7CiAgZWwgPSB0b0FycmF5KGVsKTsKICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBlbC5sZW5ndGg7IGkrKyApIHsKICAgIGVsW2ldW3VuYmluZF0ocHJlZml4ICsgdHlwZSwgZm4sIGNhcHR1cmUgfHwgZmFsc2UpOwogIH0KfTsKCgovKioqLyB9KSwKLyogMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QpIHsKICByZXR1cm4gZnVuY3Rpb24oaW5pdFZhbHVlcywgZWxlbWVudCwgbm90Q3JlYXRlKSB7CiAgICB2YXIgaXRlbSA9IHRoaXM7CgogICAgdGhpcy5fdmFsdWVzID0ge307CgogICAgdGhpcy5mb3VuZCA9IGZhbHNlOyAvLyBTaG93IGlmIGxpc3Quc2VhcmNoZWQgPT0gdHJ1ZSBhbmQgdGhpcy5mb3VuZCA9PSB0cnVlCiAgICB0aGlzLmZpbHRlcmVkID0gZmFsc2U7Ly8gU2hvdyBpZiBsaXN0LmZpbHRlcmVkID09IHRydWUgYW5kIHRoaXMuZmlsdGVyZWQgPT0gdHJ1ZQoKICAgIHZhciBpbml0ID0gZnVuY3Rpb24oaW5pdFZhbHVlcywgZWxlbWVudCwgbm90Q3JlYXRlKSB7CiAgICAgIGlmIChlbGVtZW50ID09PSB1bmRlZmluZWQpIHsKICAgICAgICBpZiAobm90Q3JlYXRlKSB7CiAgICAgICAgICBpdGVtLnZhbHVlcyhpbml0VmFsdWVzLCBub3RDcmVhdGUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpdGVtLnZhbHVlcyhpbml0VmFsdWVzKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaXRlbS5lbG0gPSBlbGVtZW50OwogICAgICAgIHZhciB2YWx1ZXMgPSBsaXN0LnRlbXBsYXRlci5nZXQoaXRlbSwgaW5pdFZhbHVlcyk7CiAgICAgICAgaXRlbS52YWx1ZXModmFsdWVzKTsKICAgICAgfQogICAgfTsKCiAgICB0aGlzLnZhbHVlcyA9IGZ1bmN0aW9uKG5ld1ZhbHVlcywgbm90Q3JlYXRlKSB7CiAgICAgIGlmIChuZXdWYWx1ZXMgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGZvcih2YXIgbmFtZSBpbiBuZXdWYWx1ZXMpIHsKICAgICAgICAgIGl0ZW0uX3ZhbHVlc1tuYW1lXSA9IG5ld1ZhbHVlc1tuYW1lXTsKICAgICAgICB9CiAgICAgICAgaWYgKG5vdENyZWF0ZSAhPT0gdHJ1ZSkgewogICAgICAgICAgbGlzdC50ZW1wbGF0ZXIuc2V0KGl0ZW0sIGl0ZW0udmFsdWVzKCkpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gaXRlbS5fdmFsdWVzOwogICAgICB9CiAgICB9OwoKICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uKCkgewogICAgICBsaXN0LnRlbXBsYXRlci5zaG93KGl0ZW0pOwogICAgfTsKCiAgICB0aGlzLmhpZGUgPSBmdW5jdGlvbigpIHsKICAgICAgbGlzdC50ZW1wbGF0ZXIuaGlkZShpdGVtKTsKICAgIH07CgogICAgdGhpcy5tYXRjaGluZyA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gKAogICAgICAgIChsaXN0LmZpbHRlcmVkICYmIGxpc3Quc2VhcmNoZWQgJiYgaXRlbS5mb3VuZCAmJiBpdGVtLmZpbHRlcmVkKSB8fAogICAgICAgIChsaXN0LmZpbHRlcmVkICYmICFsaXN0LnNlYXJjaGVkICYmIGl0ZW0uZmlsdGVyZWQpIHx8CiAgICAgICAgKCFsaXN0LmZpbHRlcmVkICYmIGxpc3Quc2VhcmNoZWQgJiYgaXRlbS5mb3VuZCkgfHwKICAgICAgICAoIWxpc3QuZmlsdGVyZWQgJiYgIWxpc3Quc2VhcmNoZWQpCiAgICAgICk7CiAgICB9OwoKICAgIHRoaXMudmlzaWJsZSA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gKGl0ZW0uZWxtICYmIChpdGVtLmVsbS5wYXJlbnROb2RlID09IGxpc3QubGlzdCkpID8gdHJ1ZSA6IGZhbHNlOwogICAgfTsKCiAgICBpbml0KGluaXRWYWx1ZXMsIGVsZW1lbnQsIG5vdENyZWF0ZSk7CiAgfTsKfTsKCgovKioqLyB9KSwKLyogMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgovKioKICogQSBjcm9zcy1icm93c2VyIGltcGxlbWVudGF0aW9uIG9mIGdldEVsZW1lbnRzQnlDbGFzcy4KICogSGVhdmlseSBiYXNlZCBvbiBEdXN0aW4gRGlheidzIGZ1bmN0aW9uOiBodHRwOi8vZHVzdGluZGlhei5jb20vZ2V0ZWxlbWVudHNieWNsYXNzLgogKgogKiBGaW5kIGFsbCBlbGVtZW50cyB3aXRoIGNsYXNzIGBjbGFzc05hbWVgIGluc2lkZSBgY29udGFpbmVyYC4KICogVXNlIGBzaW5nbGUgPSB0cnVlYCB0byBpbmNyZWFzZSBwZXJmb3JtYW5jZSBpbiBvbGRlciBicm93c2VycwogKiB3aGVuIG9ubHkgb25lIGVsZW1lbnQgaXMgbmVlZGVkLgogKgogKiBAcGFyYW0ge1N0cmluZ30gY2xhc3NOYW1lCiAqIEBwYXJhbSB7RWxlbWVudH0gY29udGFpbmVyCiAqIEBwYXJhbSB7Qm9vbGVhbn0gc2luZ2xlCiAqIEBhcGkgcHVibGljCiAqLwoKdmFyIGdldEVsZW1lbnRzQnlDbGFzc05hbWUgPSBmdW5jdGlvbihjb250YWluZXIsIGNsYXNzTmFtZSwgc2luZ2xlKSB7CiAgaWYgKHNpbmdsZSkgewogICAgcmV0dXJuIGNvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzTmFtZSlbMF07CiAgfSBlbHNlIHsKICAgIHJldHVybiBjb250YWluZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc05hbWUpOwogIH0KfTsKCnZhciBxdWVyeVNlbGVjdG9yID0gZnVuY3Rpb24oY29udGFpbmVyLCBjbGFzc05hbWUsIHNpbmdsZSkgewogIGNsYXNzTmFtZSA9ICcuJyArIGNsYXNzTmFtZTsKICBpZiAoc2luZ2xlKSB7CiAgICByZXR1cm4gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoY2xhc3NOYW1lKTsKICB9IGVsc2UgewogICAgcmV0dXJuIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKGNsYXNzTmFtZSk7CiAgfQp9OwoKdmFyIHBvbHlmaWxsID0gZnVuY3Rpb24oY29udGFpbmVyLCBjbGFzc05hbWUsIHNpbmdsZSkgewogIHZhciBjbGFzc0VsZW1lbnRzID0gW10sCiAgICB0YWcgPSAnKic7CgogIHZhciBlbHMgPSBjb250YWluZXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGFnKTsKICB2YXIgZWxzTGVuID0gZWxzLmxlbmd0aDsKICB2YXIgcGF0dGVybiA9IG5ldyBSZWdFeHAoIihefFxccykiK2NsYXNzTmFtZSsiKFxcc3wkKSIpOwogIGZvciAodmFyIGkgPSAwLCBqID0gMDsgaSA8IGVsc0xlbjsgaSsrKSB7CiAgICBpZiAoIHBhdHRlcm4udGVzdChlbHNbaV0uY2xhc3NOYW1lKSApIHsKICAgICAgaWYgKHNpbmdsZSkgewogICAgICAgIHJldHVybiBlbHNbaV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2xhc3NFbGVtZW50c1tqXSA9IGVsc1tpXTsKICAgICAgICBqKys7CiAgICAgIH0KICAgIH0KICB9CiAgcmV0dXJuIGNsYXNzRWxlbWVudHM7Cn07Cgptb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpIHsKICByZXR1cm4gZnVuY3Rpb24oY29udGFpbmVyLCBjbGFzc05hbWUsIHNpbmdsZSwgb3B0aW9ucykgewogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICBpZiAoKG9wdGlvbnMudGVzdCAmJiBvcHRpb25zLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpIHx8ICghb3B0aW9ucy50ZXN0ICYmIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUpKSB7CiAgICAgIHJldHVybiBnZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNvbnRhaW5lciwgY2xhc3NOYW1lLCBzaW5nbGUpOwogICAgfSBlbHNlIGlmICgob3B0aW9ucy50ZXN0ICYmIG9wdGlvbnMucXVlcnlTZWxlY3RvcikgfHwgKCFvcHRpb25zLnRlc3QgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcikpIHsKICAgICAgcmV0dXJuIHF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyLCBjbGFzc05hbWUsIHNpbmdsZSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gcG9seWZpbGwoY29udGFpbmVyLCBjbGFzc05hbWUsIHNpbmdsZSk7CiAgICB9CiAgfTsKfSkoKTsKCgovKioqLyB9KSwKLyogNCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgp2YXIgaW5kZXhPZiA9IFtdLmluZGV4T2Y7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGFyciwgb2JqKXsKICBpZiAoaW5kZXhPZikgcmV0dXJuIGFyci5pbmRleE9mKG9iaik7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpIHsKICAgIGlmIChhcnJbaV0gPT09IG9iaikgcmV0dXJuIGk7CiAgfQogIHJldHVybiAtMTsKfTsKCgovKioqLyB9KSwKLyogNSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgovKioKICogU291cmNlOiBodHRwczovL2dpdGh1Yi5jb20vdGltb3hsZXkvdG8tYXJyYXkKICoKICogQ29udmVydCBhbiBhcnJheS1saWtlIG9iamVjdCBpbnRvIGFuIGBBcnJheWAuCiAqIElmIGBjb2xsZWN0aW9uYCBpcyBhbHJlYWR5IGFuIGBBcnJheWAsIHRoZW4gd2lsbCByZXR1cm4gYSBjbG9uZSBvZiBgY29sbGVjdGlvbmAuCiAqCiAqIEBwYXJhbSB7QXJyYXkgfCBNaXhlZH0gY29sbGVjdGlvbiBBbiBgQXJyYXlgIG9yIGFycmF5LWxpa2Ugb2JqZWN0IHRvIGNvbnZlcnQgZS5nLiBgYXJndW1lbnRzYCBvciBgTm9kZUxpc3RgCiAqIEByZXR1cm4ge0FycmF5fSBOYWl2ZSBjb252ZXJzaW9uIG9mIGBjb2xsZWN0aW9uYCB0byBhIG5ldyBgQXJyYXlgLgogKiBAYXBpIHB1YmxpYwogKi8KCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdG9BcnJheShjb2xsZWN0aW9uKSB7CiAgaWYgKHR5cGVvZiBjb2xsZWN0aW9uID09PSAndW5kZWZpbmVkJykgcmV0dXJuIFtdOwogIGlmIChjb2xsZWN0aW9uID09PSBudWxsKSByZXR1cm4gW251bGxdOwogIGlmIChjb2xsZWN0aW9uID09PSB3aW5kb3cpIHJldHVybiBbd2luZG93XTsKICBpZiAodHlwZW9mIGNvbGxlY3Rpb24gPT09ICdzdHJpbmcnKSByZXR1cm4gW2NvbGxlY3Rpb25dOwogIGlmIChpc0FycmF5KGNvbGxlY3Rpb24pKSByZXR1cm4gY29sbGVjdGlvbjsKICBpZiAodHlwZW9mIGNvbGxlY3Rpb24ubGVuZ3RoICE9ICdudW1iZXInKSByZXR1cm4gW2NvbGxlY3Rpb25dOwogIGlmICh0eXBlb2YgY29sbGVjdGlvbiA9PT0gJ2Z1bmN0aW9uJyAmJiBjb2xsZWN0aW9uIGluc3RhbmNlb2YgRnVuY3Rpb24pIHJldHVybiBbY29sbGVjdGlvbl07CgogIHZhciBhcnIgPSBbXTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbGxlY3Rpb24ubGVuZ3RoOyBpKyspIHsKICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoY29sbGVjdGlvbiwgaSkgfHwgaSBpbiBjb2xsZWN0aW9uKSB7CiAgICAgIGFyci5wdXNoKGNvbGxlY3Rpb25baV0pOwogICAgfQogIH0KICBpZiAoIWFyci5sZW5ndGgpIHJldHVybiBbXTsKICByZXR1cm4gYXJyOwp9OwoKZnVuY3Rpb24gaXNBcnJheShhcnIpIHsKICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFycikgPT09ICJbb2JqZWN0IEFycmF5XSI7Cn0KCgovKioqLyB9KSwKLyogNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHMpIHsKICBzID0gKHMgPT09IHVuZGVmaW5lZCkgPyAiIiA6IHM7CiAgcyA9IChzID09PSBudWxsKSA/ICIiIDogczsKICBzID0gcy50b1N0cmluZygpOwogIHJldHVybiBzOwp9OwoKCi8qKiovIH0pLAovKiA3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCi8qCiAqIFNvdXJjZTogaHR0cHM6Ly9naXRodWIuY29tL3NlZ21lbnRpby9leHRlbmQKICovCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGV4dGVuZCAob2JqZWN0KSB7CiAgICAvLyBUYWtlcyBhbiB1bmxpbWl0ZWQgbnVtYmVyIG9mIGV4dGVuZGVycy4KICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKCiAgICAvLyBGb3IgZWFjaCBleHRlbmRlciwgY29weSB0aGVpciBwcm9wZXJ0aWVzIG9uIG91ciBvYmplY3QuCiAgICBmb3IgKHZhciBpID0gMCwgc291cmNlOyBzb3VyY2UgPSBhcmdzW2ldOyBpKyspIHsKICAgICAgICBpZiAoIXNvdXJjZSkgY29udGludWU7CiAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gc291cmNlKSB7CiAgICAgICAgICAgIG9iamVjdFtwcm9wZXJ0eV0gPSBzb3VyY2VbcHJvcGVydHldOwogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gb2JqZWN0Owp9OwoKCi8qKiovIH0pLAovKiA4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCkgewogIHZhciBhZGRBc3luYyA9IGZ1bmN0aW9uKHZhbHVlcywgY2FsbGJhY2ssIGl0ZW1zKSB7CiAgICB2YXIgdmFsdWVzVG9BZGQgPSB2YWx1ZXMuc3BsaWNlKDAsIDUwKTsKICAgIGl0ZW1zID0gaXRlbXMgfHwgW107CiAgICBpdGVtcyA9IGl0ZW1zLmNvbmNhdChsaXN0LmFkZCh2YWx1ZXNUb0FkZCkpOwogICAgaWYgKHZhbHVlcy5sZW5ndGggPiAwKSB7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgYWRkQXN5bmModmFsdWVzLCBjYWxsYmFjaywgaXRlbXMpOwogICAgICB9LCAxKTsKICAgIH0gZWxzZSB7CiAgICAgIGxpc3QudXBkYXRlKCk7CiAgICAgIGNhbGxiYWNrKGl0ZW1zKTsKICAgIH0KICB9OwogIHJldHVybiBhZGRBc3luYzsKfTsKCgovKioqLyB9KSwKLyogOSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QpIHsKCiAgLy8gQWRkIGhhbmRsZXJzCiAgbGlzdC5oYW5kbGVycy5maWx0ZXJTdGFydCA9IGxpc3QuaGFuZGxlcnMuZmlsdGVyU3RhcnQgfHwgW107CiAgbGlzdC5oYW5kbGVycy5maWx0ZXJDb21wbGV0ZSA9IGxpc3QuaGFuZGxlcnMuZmlsdGVyQ29tcGxldGUgfHwgW107CgogIHJldHVybiBmdW5jdGlvbihmaWx0ZXJGdW5jdGlvbikgewogICAgbGlzdC50cmlnZ2VyKCdmaWx0ZXJTdGFydCcpOwogICAgbGlzdC5pID0gMTsgLy8gUmVzZXQgcGFnaW5nCiAgICBsaXN0LnJlc2V0LmZpbHRlcigpOwogICAgaWYgKGZpbHRlckZ1bmN0aW9uID09PSB1bmRlZmluZWQpIHsKICAgICAgbGlzdC5maWx0ZXJlZCA9IGZhbHNlOwogICAgfSBlbHNlIHsKICAgICAgbGlzdC5maWx0ZXJlZCA9IHRydWU7CiAgICAgIHZhciBpcyA9IGxpc3QuaXRlbXM7CiAgICAgIGZvciAodmFyIGkgPSAwLCBpbCA9IGlzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHsKICAgICAgICB2YXIgaXRlbSA9IGlzW2ldOwogICAgICAgIGlmIChmaWx0ZXJGdW5jdGlvbihpdGVtKSkgewogICAgICAgICAgaXRlbS5maWx0ZXJlZCA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGl0ZW0uZmlsdGVyZWQgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGxpc3QudXBkYXRlKCk7CiAgICBsaXN0LnRyaWdnZXIoJ2ZpbHRlckNvbXBsZXRlJyk7CiAgICByZXR1cm4gbGlzdC52aXNpYmxlSXRlbXM7CiAgfTsKfTsKCgovKioqLyB9KSwKLyogMTAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCnZhciBjbGFzc2VzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKSwKICBldmVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpLAogIGV4dGVuZCA9IF9fd2VicGFja19yZXF1aXJlX18oNyksCiAgdG9TdHJpbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpLAogIGdldEJ5Q2xhc3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpLAogIGZ1enp5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QsIG9wdGlvbnMpIHsKICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCiAgb3B0aW9ucyA9IGV4dGVuZCh7CiAgICBsb2NhdGlvbjogMCwKICAgIGRpc3RhbmNlOiAxMDAsCiAgICB0aHJlc2hvbGQ6IDAuNCwKICAgIG11bHRpU2VhcmNoOiB0cnVlLAogICAgc2VhcmNoQ2xhc3M6ICdmdXp6eS1zZWFyY2gnCiAgfSwgb3B0aW9ucyk7CgoKCiAgdmFyIGZ1enp5U2VhcmNoID0gewogICAgc2VhcmNoOiBmdW5jdGlvbihzZWFyY2hTdHJpbmcsIGNvbHVtbnMpIHsKICAgICAgLy8gU3Vic3RyYWN0IGFyZ3VtZW50cyBmcm9tIHRoZSBzZWFyY2hTdHJpbmcgb3IgcHV0IHNlYXJjaFN0cmluZyBhcyBvbmx5IGFyZ3VtZW50CiAgICAgIHZhciBzZWFyY2hBcmd1bWVudHMgPSBvcHRpb25zLm11bHRpU2VhcmNoID8gc2VhcmNoU3RyaW5nLnJlcGxhY2UoLyArJC8sICcnKS5zcGxpdCgvICsvKSA6IFtzZWFyY2hTdHJpbmddOwoKICAgICAgZm9yICh2YXIgayA9IDAsIGtsID0gbGlzdC5pdGVtcy5sZW5ndGg7IGsgPCBrbDsgaysrKSB7CiAgICAgICAgZnV6enlTZWFyY2guaXRlbShsaXN0Lml0ZW1zW2tdLCBjb2x1bW5zLCBzZWFyY2hBcmd1bWVudHMpOwogICAgICB9CiAgICB9LAogICAgaXRlbTogZnVuY3Rpb24oaXRlbSwgY29sdW1ucywgc2VhcmNoQXJndW1lbnRzKSB7CiAgICAgIHZhciBmb3VuZCA9IHRydWU7CiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzZWFyY2hBcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgZm91bmRBcmd1bWVudCA9IGZhbHNlOwogICAgICAgIGZvciAodmFyIGogPSAwLCBqbCA9IGNvbHVtbnMubGVuZ3RoOyBqIDwgamw7IGorKykgewogICAgICAgICAgaWYgKGZ1enp5U2VhcmNoLnZhbHVlcyhpdGVtLnZhbHVlcygpLCBjb2x1bW5zW2pdLCBzZWFyY2hBcmd1bWVudHNbaV0pKSB7CiAgICAgICAgICAgIGZvdW5kQXJndW1lbnQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZighZm91bmRBcmd1bWVudCkgewogICAgICAgICAgZm91bmQgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaXRlbS5mb3VuZCA9IGZvdW5kOwogICAgfSwKICAgIHZhbHVlczogZnVuY3Rpb24odmFsdWVzLCB2YWx1ZSwgc2VhcmNoQXJndW1lbnQpIHsKICAgICAgaWYgKHZhbHVlcy5oYXNPd25Qcm9wZXJ0eSh2YWx1ZSkpIHsKICAgICAgICB2YXIgdGV4dCA9IHRvU3RyaW5nKHZhbHVlc1t2YWx1ZV0pLnRvTG93ZXJDYXNlKCk7CgogICAgICAgIGlmIChmdXp6eSh0ZXh0LCBzZWFyY2hBcmd1bWVudCwgb3B0aW9ucykpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfTsKCgogIGV2ZW50cy5iaW5kKGdldEJ5Q2xhc3MobGlzdC5saXN0Q29udGFpbmVyLCBvcHRpb25zLnNlYXJjaENsYXNzKSwgJ2tleXVwJywgZnVuY3Rpb24oZSkgewogICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDsgLy8gSUUgaGF2ZSBzcmNFbGVtZW50CiAgICBsaXN0LnNlYXJjaCh0YXJnZXQudmFsdWUsIGZ1enp5U2VhcmNoLnNlYXJjaCk7CiAgfSk7CgogIHJldHVybiBmdW5jdGlvbihzdHIsIGNvbHVtbnMpIHsKICAgIGxpc3Quc2VhcmNoKHN0ciwgY29sdW1ucywgZnV6enlTZWFyY2guc2VhcmNoKTsKICB9Owp9OwoKCi8qKiovIH0pLAovKiAxMSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgbmF0dXJhbFNvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KSwKICBnZXRCeUNsYXNzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKSwKICBleHRlbmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpLAogIGluZGV4T2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLAogIGV2ZW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSksCiAgdG9TdHJpbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpLAogIGNsYXNzZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLAogIGdldEF0dHJpYnV0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpLAogIHRvQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpZCwgb3B0aW9ucywgdmFsdWVzKSB7CgogIHZhciBzZWxmID0gdGhpcywKICAgIGluaXQsCiAgICBJdGVtID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShzZWxmKSwKICAgIGFkZEFzeW5jID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KShzZWxmKSwKICAgIGluaXRQYWdpbmF0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikoc2VsZik7CgogIGluaXQgPSB7CiAgICBzdGFydDogZnVuY3Rpb24oKSB7CiAgICAgIHNlbGYubGlzdENsYXNzICAgICAgPSAibGlzdCI7CiAgICAgIHNlbGYuc2VhcmNoQ2xhc3MgICAgPSAic2VhcmNoIjsKICAgICAgc2VsZi5zb3J0Q2xhc3MgICAgICA9ICJzb3J0IjsKICAgICAgc2VsZi5wYWdlICAgICAgICAgICA9IDEwMDAwOwogICAgICBzZWxmLmkgICAgICAgICAgICAgID0gMTsKICAgICAgc2VsZi5pdGVtcyAgICAgICAgICA9IFtdOwogICAgICBzZWxmLnZpc2libGVJdGVtcyAgID0gW107CiAgICAgIHNlbGYubWF0Y2hpbmdJdGVtcyAgPSBbXTsKICAgICAgc2VsZi5zZWFyY2hlZCAgICAgICA9IGZhbHNlOwogICAgICBzZWxmLmZpbHRlcmVkICAgICAgID0gZmFsc2U7CiAgICAgIHNlbGYuc2VhcmNoQ29sdW1ucyAgPSB1bmRlZmluZWQ7CiAgICAgIHNlbGYuaGFuZGxlcnMgICAgICAgPSB7ICd1cGRhdGVkJzogW10gfTsKICAgICAgc2VsZi52YWx1ZU5hbWVzICAgICA9IFtdOwogICAgICBzZWxmLnV0aWxzICAgICAgICAgID0gewogICAgICAgIGdldEJ5Q2xhc3M6IGdldEJ5Q2xhc3MsCiAgICAgICAgZXh0ZW5kOiBleHRlbmQsCiAgICAgICAgaW5kZXhPZjogaW5kZXhPZiwKICAgICAgICBldmVudHM6IGV2ZW50cywKICAgICAgICB0b1N0cmluZzogdG9TdHJpbmcsCiAgICAgICAgbmF0dXJhbFNvcnQ6IG5hdHVyYWxTb3J0LAogICAgICAgIGNsYXNzZXM6IGNsYXNzZXMsCiAgICAgICAgZ2V0QXR0cmlidXRlOiBnZXRBdHRyaWJ1dGUsCiAgICAgICAgdG9BcnJheTogdG9BcnJheQogICAgICB9OwoKICAgICAgc2VsZi51dGlscy5leHRlbmQoc2VsZiwgb3B0aW9ucyk7CgogICAgICBzZWxmLmxpc3RDb250YWluZXIgPSAodHlwZW9mKGlkKSA9PT0gJ3N0cmluZycpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpIDogaWQ7CiAgICAgIGlmICghc2VsZi5saXN0Q29udGFpbmVyKSB7IHJldHVybjsgfQogICAgICBzZWxmLmxpc3QgICAgICAgPSBnZXRCeUNsYXNzKHNlbGYubGlzdENvbnRhaW5lciwgc2VsZi5saXN0Q2xhc3MsIHRydWUpOwoKICAgICAgc2VsZi5wYXJzZSAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKShzZWxmKTsKICAgICAgc2VsZi50ZW1wbGF0ZXIgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KShzZWxmKTsKICAgICAgc2VsZi5zZWFyY2ggICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KShzZWxmKTsKICAgICAgc2VsZi5maWx0ZXIgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpKHNlbGYpOwogICAgICBzZWxmLnNvcnQgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpKHNlbGYpOwogICAgICBzZWxmLmZ1enp5U2VhcmNoICA9IF9fd2VicGFja19yZXF1aXJlX18oMTApKHNlbGYsIG9wdGlvbnMuZnV6enlTZWFyY2gpOwoKICAgICAgdGhpcy5oYW5kbGVycygpOwogICAgICB0aGlzLml0ZW1zKCk7CiAgICAgIHRoaXMucGFnaW5hdGlvbigpOwoKICAgICAgc2VsZi51cGRhdGUoKTsKICAgIH0sCiAgICBoYW5kbGVyczogZnVuY3Rpb24oKSB7CiAgICAgIGZvciAodmFyIGhhbmRsZXIgaW4gc2VsZi5oYW5kbGVycykgewogICAgICAgIGlmIChzZWxmW2hhbmRsZXJdKSB7CiAgICAgICAgICBzZWxmLm9uKGhhbmRsZXIsIHNlbGZbaGFuZGxlcl0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGl0ZW1zOiBmdW5jdGlvbigpIHsKICAgICAgc2VsZi5wYXJzZShzZWxmLmxpc3QpOwogICAgICBpZiAodmFsdWVzICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBzZWxmLmFkZCh2YWx1ZXMpOwogICAgICB9CiAgICB9LAogICAgcGFnaW5hdGlvbjogZnVuY3Rpb24oKSB7CiAgICAgIGlmIChvcHRpb25zLnBhZ2luYXRpb24gIT09IHVuZGVmaW5lZCkgewogICAgICAgIGlmIChvcHRpb25zLnBhZ2luYXRpb24gPT09IHRydWUpIHsKICAgICAgICAgIG9wdGlvbnMucGFnaW5hdGlvbiA9IFt7fV07CiAgICAgICAgfQogICAgICAgIGlmIChvcHRpb25zLnBhZ2luYXRpb25bMF0gPT09IHVuZGVmaW5lZCl7CiAgICAgICAgICBvcHRpb25zLnBhZ2luYXRpb24gPSBbb3B0aW9ucy5wYWdpbmF0aW9uXTsKICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlsID0gb3B0aW9ucy5wYWdpbmF0aW9uLmxlbmd0aDsgaSA8IGlsOyBpKyspIHsKICAgICAgICAgIGluaXRQYWdpbmF0aW9uKG9wdGlvbnMucGFnaW5hdGlvbltpXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgLyoKICAqIFJlLXBhcnNlIHRoZSBMaXN0LCB1c2UgaWYgaHRtbCBoYXZlIGNoYW5nZWQKICAqLwogIHRoaXMucmVJbmRleCA9IGZ1bmN0aW9uKCkgewogICAgc2VsZi5pdGVtcyAgICAgICAgICA9IFtdOwogICAgc2VsZi52aXNpYmxlSXRlbXMgICA9IFtdOwogICAgc2VsZi5tYXRjaGluZ0l0ZW1zICA9IFtdOwogICAgc2VsZi5zZWFyY2hlZCAgICAgICA9IGZhbHNlOwogICAgc2VsZi5maWx0ZXJlZCAgICAgICA9IGZhbHNlOwogICAgc2VsZi5wYXJzZShzZWxmLmxpc3QpOwogIH07CgogIHRoaXMudG9KU09OID0gZnVuY3Rpb24oKSB7CiAgICB2YXIganNvbiA9IFtdOwogICAgZm9yICh2YXIgaSA9IDAsIGlsID0gc2VsZi5pdGVtcy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7CiAgICAgIGpzb24ucHVzaChzZWxmLml0ZW1zW2ldLnZhbHVlcygpKTsKICAgIH0KICAgIHJldHVybiBqc29uOwogIH07CgoKICAvKgogICogQWRkIG9iamVjdCB0byBsaXN0CiAgKi8KICB0aGlzLmFkZCA9IGZ1bmN0aW9uKHZhbHVlcywgY2FsbGJhY2spIHsKICAgIGlmICh2YWx1ZXMubGVuZ3RoID09PSAwKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChjYWxsYmFjaykgewogICAgICBhZGRBc3luYyh2YWx1ZXMsIGNhbGxiYWNrKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgdmFyIGFkZGVkID0gW10sCiAgICAgIG5vdENyZWF0ZSA9IGZhbHNlOwogICAgaWYgKHZhbHVlc1swXSA9PT0gdW5kZWZpbmVkKXsKICAgICAgdmFsdWVzID0gW3ZhbHVlc107CiAgICB9CiAgICBmb3IgKHZhciBpID0gMCwgaWwgPSB2YWx1ZXMubGVuZ3RoOyBpIDwgaWw7IGkrKykgewogICAgICB2YXIgaXRlbSA9IG51bGw7CiAgICAgIG5vdENyZWF0ZSA9IChzZWxmLml0ZW1zLmxlbmd0aCA+IHNlbGYucGFnZSkgPyB0cnVlIDogZmFsc2U7CiAgICAgIGl0ZW0gPSBuZXcgSXRlbSh2YWx1ZXNbaV0sIHVuZGVmaW5lZCwgbm90Q3JlYXRlKTsKICAgICAgc2VsZi5pdGVtcy5wdXNoKGl0ZW0pOwogICAgICBhZGRlZC5wdXNoKGl0ZW0pOwogICAgfQogICAgc2VsZi51cGRhdGUoKTsKICAgIHJldHVybiBhZGRlZDsKICB9OwoKCXRoaXMuc2hvdyA9IGZ1bmN0aW9uKGksIHBhZ2UpIHsKCQl0aGlzLmkgPSBpOwoJCXRoaXMucGFnZSA9IHBhZ2U7CgkJc2VsZi51cGRhdGUoKTsKICAgIHJldHVybiBzZWxmOwoJfTsKCiAgLyogUmVtb3ZlcyBvYmplY3QgZnJvbSBsaXN0LgogICogTG9vcHMgdGhyb3VnaCB0aGUgbGlzdCBhbmQgcmVtb3ZlcyBvYmplY3RzIHdoZXJlCiAgKiBwcm9wZXJ0eSAidmFsdWVuYW1lIiA9PT0gdmFsdWUKICAqLwogIHRoaXMucmVtb3ZlID0gZnVuY3Rpb24odmFsdWVOYW1lLCB2YWx1ZSwgb3B0aW9ucykgewogICAgdmFyIGZvdW5kID0gMDsKICAgIGZvciAodmFyIGkgPSAwLCBpbCA9IHNlbGYuaXRlbXMubGVuZ3RoOyBpIDwgaWw7IGkrKykgewogICAgICBpZiAoc2VsZi5pdGVtc1tpXS52YWx1ZXMoKVt2YWx1ZU5hbWVdID09IHZhbHVlKSB7CiAgICAgICAgc2VsZi50ZW1wbGF0ZXIucmVtb3ZlKHNlbGYuaXRlbXNbaV0sIG9wdGlvbnMpOwogICAgICAgIHNlbGYuaXRlbXMuc3BsaWNlKGksMSk7CiAgICAgICAgaWwtLTsKICAgICAgICBpLS07CiAgICAgICAgZm91bmQrKzsKICAgICAgfQogICAgfQogICAgc2VsZi51cGRhdGUoKTsKICAgIHJldHVybiBmb3VuZDsKICB9OwoKICAvKiBHZXRzIHRoZSBvYmplY3RzIGluIHRoZSBsaXN0IHdoaWNoCiAgKiBwcm9wZXJ0eSAidmFsdWVOYW1lIiA9PT0gdmFsdWUKICAqLwogIHRoaXMuZ2V0ID0gZnVuY3Rpb24odmFsdWVOYW1lLCB2YWx1ZSkgewogICAgdmFyIG1hdGNoZWRJdGVtcyA9IFtdOwogICAgZm9yICh2YXIgaSA9IDAsIGlsID0gc2VsZi5pdGVtcy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7CiAgICAgIHZhciBpdGVtID0gc2VsZi5pdGVtc1tpXTsKICAgICAgaWYgKGl0ZW0udmFsdWVzKClbdmFsdWVOYW1lXSA9PSB2YWx1ZSkgewogICAgICAgIG1hdGNoZWRJdGVtcy5wdXNoKGl0ZW0pOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gbWF0Y2hlZEl0ZW1zOwogIH07CgogIC8qCiAgKiBHZXQgc2l6ZSBvZiB0aGUgbGlzdAogICovCiAgdGhpcy5zaXplID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gc2VsZi5pdGVtcy5sZW5ndGg7CiAgfTsKCiAgLyoKICAqIFJlbW92ZXMgYWxsIGl0ZW1zIGZyb20gdGhlIGxpc3QKICAqLwogIHRoaXMuY2xlYXIgPSBmdW5jdGlvbigpIHsKICAgIHNlbGYudGVtcGxhdGVyLmNsZWFyKCk7CiAgICBzZWxmLml0ZW1zID0gW107CiAgICByZXR1cm4gc2VsZjsKICB9OwoKICB0aGlzLm9uID0gZnVuY3Rpb24oZXZlbnQsIGNhbGxiYWNrKSB7CiAgICBzZWxmLmhhbmRsZXJzW2V2ZW50XS5wdXNoKGNhbGxiYWNrKTsKICAgIHJldHVybiBzZWxmOwogIH07CgogIHRoaXMub2ZmID0gZnVuY3Rpb24oZXZlbnQsIGNhbGxiYWNrKSB7CiAgICB2YXIgZSA9IHNlbGYuaGFuZGxlcnNbZXZlbnRdOwogICAgdmFyIGluZGV4ID0gaW5kZXhPZihlLCBjYWxsYmFjayk7CiAgICBpZiAoaW5kZXggPiAtMSkgewogICAgICBlLnNwbGljZShpbmRleCwgMSk7CiAgICB9CiAgICByZXR1cm4gc2VsZjsKICB9OwoKICB0aGlzLnRyaWdnZXIgPSBmdW5jdGlvbihldmVudCkgewogICAgdmFyIGkgPSBzZWxmLmhhbmRsZXJzW2V2ZW50XS5sZW5ndGg7CiAgICB3aGlsZShpLS0pIHsKICAgICAgc2VsZi5oYW5kbGVyc1tldmVudF1baV0oc2VsZik7CiAgICB9CiAgICByZXR1cm4gc2VsZjsKICB9OwoKICB0aGlzLnJlc2V0ID0gewogICAgZmlsdGVyOiBmdW5jdGlvbigpIHsKICAgICAgdmFyIGlzID0gc2VsZi5pdGVtcywKICAgICAgICBpbCA9IGlzLmxlbmd0aDsKICAgICAgd2hpbGUgKGlsLS0pIHsKICAgICAgICBpc1tpbF0uZmlsdGVyZWQgPSBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gc2VsZjsKICAgIH0sCiAgICBzZWFyY2g6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgaXMgPSBzZWxmLml0ZW1zLAogICAgICAgIGlsID0gaXMubGVuZ3RoOwogICAgICB3aGlsZSAoaWwtLSkgewogICAgICAgIGlzW2lsXS5mb3VuZCA9IGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiBzZWxmOwogICAgfQogIH07CgogIHRoaXMudXBkYXRlID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgaXMgPSBzZWxmLml0ZW1zLAoJCQlpbCA9IGlzLmxlbmd0aDsKCiAgICBzZWxmLnZpc2libGVJdGVtcyA9IFtdOwogICAgc2VsZi5tYXRjaGluZ0l0ZW1zID0gW107CiAgICBzZWxmLnRlbXBsYXRlci5jbGVhcigpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbDsgaSsrKSB7CiAgICAgIGlmIChpc1tpXS5tYXRjaGluZygpICYmICgoc2VsZi5tYXRjaGluZ0l0ZW1zLmxlbmd0aCsxKSA+PSBzZWxmLmkgJiYgc2VsZi52aXNpYmxlSXRlbXMubGVuZ3RoIDwgc2VsZi5wYWdlKSkgewogICAgICAgIGlzW2ldLnNob3coKTsKICAgICAgICBzZWxmLnZpc2libGVJdGVtcy5wdXNoKGlzW2ldKTsKICAgICAgICBzZWxmLm1hdGNoaW5nSXRlbXMucHVzaChpc1tpXSk7CiAgICAgIH0gZWxzZSBpZiAoaXNbaV0ubWF0Y2hpbmcoKSkgewogICAgICAgIHNlbGYubWF0Y2hpbmdJdGVtcy5wdXNoKGlzW2ldKTsKICAgICAgICBpc1tpXS5oaWRlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaXNbaV0uaGlkZSgpOwogICAgICB9CiAgICB9CiAgICBzZWxmLnRyaWdnZXIoJ3VwZGF0ZWQnKTsKICAgIHJldHVybiBzZWxmOwogIH07CgogIGluaXQuc3RhcnQoKTsKfTsKCgovKioqLyB9KSwKLyogMTIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGNsYXNzZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLAogIGV2ZW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSksCiAgTGlzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0KSB7CgogIHZhciByZWZyZXNoID0gZnVuY3Rpb24ocGFnaW5nTGlzdCwgb3B0aW9ucykgewogICAgdmFyIGl0ZW0sCiAgICAgIGwgPSBsaXN0Lm1hdGNoaW5nSXRlbXMubGVuZ3RoLAogICAgICBpbmRleCA9IGxpc3QuaSwKICAgICAgcGFnZSA9IGxpc3QucGFnZSwKICAgICAgcGFnZXMgPSBNYXRoLmNlaWwobCAvIHBhZ2UpLAogICAgICBjdXJyZW50UGFnZSA9IE1hdGguY2VpbCgoaW5kZXggLyBwYWdlKSksCiAgICAgIGlubmVyV2luZG93ID0gb3B0aW9ucy5pbm5lcldpbmRvdyB8fCAyLAogICAgICBsZWZ0ID0gb3B0aW9ucy5sZWZ0IHx8IG9wdGlvbnMub3V0ZXJXaW5kb3cgfHwgMCwKICAgICAgcmlnaHQgPSBvcHRpb25zLnJpZ2h0IHx8IG9wdGlvbnMub3V0ZXJXaW5kb3cgfHwgMDsKCiAgICByaWdodCA9IHBhZ2VzIC0gcmlnaHQ7CgogICAgcGFnaW5nTGlzdC5jbGVhcigpOwogICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gcGFnZXM7IGkrKykgewogICAgICB2YXIgY2xhc3NOYW1lID0gKGN1cnJlbnRQYWdlID09PSBpKSA/ICJhY3RpdmUiIDogIiI7CgogICAgICAvL2NvbnNvbGUubG9nKGksIGxlZnQsIHJpZ2h0LCBjdXJyZW50UGFnZSwgKGN1cnJlbnRQYWdlIC0gaW5uZXJXaW5kb3cpLCAoY3VycmVudFBhZ2UgKyBpbm5lcldpbmRvdyksIGNsYXNzTmFtZSk7CgogICAgICBpZiAoaXMubnVtYmVyKGksIGxlZnQsIHJpZ2h0LCBjdXJyZW50UGFnZSwgaW5uZXJXaW5kb3cpKSB7CiAgICAgICAgaXRlbSA9IHBhZ2luZ0xpc3QuYWRkKHsKICAgICAgICAgIHBhZ2U6IGksCiAgICAgICAgICBkb3R0ZWQ6IGZhbHNlCiAgICAgICAgfSlbMF07CiAgICAgICAgaWYgKGNsYXNzTmFtZSkgewogICAgICAgICAgY2xhc3NlcyhpdGVtLmVsbSkuYWRkKGNsYXNzTmFtZSk7CiAgICAgICAgfQogICAgICAgIGFkZEV2ZW50KGl0ZW0uZWxtLCBpLCBwYWdlKTsKICAgICAgfSBlbHNlIGlmIChpcy5kb3R0ZWQocGFnaW5nTGlzdCwgaSwgbGVmdCwgcmlnaHQsIGN1cnJlbnRQYWdlLCBpbm5lcldpbmRvdywgcGFnaW5nTGlzdC5zaXplKCkpKSB7CiAgICAgICAgaXRlbSA9IHBhZ2luZ0xpc3QuYWRkKHsKICAgICAgICAgIHBhZ2U6ICIuLi4iLAogICAgICAgICAgZG90dGVkOiB0cnVlCiAgICAgICAgfSlbMF07CiAgICAgICAgY2xhc3NlcyhpdGVtLmVsbSkuYWRkKCJkaXNhYmxlZCIpOwogICAgICB9CiAgICB9CiAgfTsKCiAgdmFyIGlzID0gewogICAgbnVtYmVyOiBmdW5jdGlvbihpLCBsZWZ0LCByaWdodCwgY3VycmVudFBhZ2UsIGlubmVyV2luZG93KSB7CiAgICAgICByZXR1cm4gdGhpcy5sZWZ0KGksIGxlZnQpIHx8IHRoaXMucmlnaHQoaSwgcmlnaHQpIHx8IHRoaXMuaW5uZXJXaW5kb3coaSwgY3VycmVudFBhZ2UsIGlubmVyV2luZG93KTsKICAgIH0sCiAgICBsZWZ0OiBmdW5jdGlvbihpLCBsZWZ0KSB7CiAgICAgIHJldHVybiAoaSA8PSBsZWZ0KTsKICAgIH0sCiAgICByaWdodDogZnVuY3Rpb24oaSwgcmlnaHQpIHsKICAgICAgcmV0dXJuIChpID4gcmlnaHQpOwogICAgfSwKICAgIGlubmVyV2luZG93OiBmdW5jdGlvbihpLCBjdXJyZW50UGFnZSwgaW5uZXJXaW5kb3cpIHsKICAgICAgcmV0dXJuICggaSA+PSAoY3VycmVudFBhZ2UgLSBpbm5lcldpbmRvdykgJiYgaSA8PSAoY3VycmVudFBhZ2UgKyBpbm5lcldpbmRvdykpOwogICAgfSwKICAgIGRvdHRlZDogZnVuY3Rpb24ocGFnaW5nTGlzdCwgaSwgbGVmdCwgcmlnaHQsIGN1cnJlbnRQYWdlLCBpbm5lcldpbmRvdywgY3VycmVudFBhZ2VJdGVtKSB7CiAgICAgIHJldHVybiB0aGlzLmRvdHRlZExlZnQocGFnaW5nTGlzdCwgaSwgbGVmdCwgcmlnaHQsIGN1cnJlbnRQYWdlLCBpbm5lcldpbmRvdykgfHwgKHRoaXMuZG90dGVkUmlnaHQocGFnaW5nTGlzdCwgaSwgbGVmdCwgcmlnaHQsIGN1cnJlbnRQYWdlLCBpbm5lcldpbmRvdywgY3VycmVudFBhZ2VJdGVtKSk7CiAgICB9LAogICAgZG90dGVkTGVmdDogZnVuY3Rpb24ocGFnaW5nTGlzdCwgaSwgbGVmdCwgcmlnaHQsIGN1cnJlbnRQYWdlLCBpbm5lcldpbmRvdykgewogICAgICByZXR1cm4gKChpID09IChsZWZ0ICsgMSkpICYmICF0aGlzLmlubmVyV2luZG93KGksIGN1cnJlbnRQYWdlLCBpbm5lcldpbmRvdykgJiYgIXRoaXMucmlnaHQoaSwgcmlnaHQpKTsKICAgIH0sCiAgICBkb3R0ZWRSaWdodDogZnVuY3Rpb24ocGFnaW5nTGlzdCwgaSwgbGVmdCwgcmlnaHQsIGN1cnJlbnRQYWdlLCBpbm5lcldpbmRvdywgY3VycmVudFBhZ2VJdGVtKSB7CiAgICAgIGlmIChwYWdpbmdMaXN0Lml0ZW1zW2N1cnJlbnRQYWdlSXRlbS0xXS52YWx1ZXMoKS5kb3R0ZWQpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICgoaSA9PSAocmlnaHQpKSAmJiAhdGhpcy5pbm5lcldpbmRvdyhpLCBjdXJyZW50UGFnZSwgaW5uZXJXaW5kb3cpICYmICF0aGlzLnJpZ2h0KGksIHJpZ2h0KSk7CiAgICAgIH0KICAgIH0KICB9OwoKICB2YXIgYWRkRXZlbnQgPSBmdW5jdGlvbihlbG0sIGksIHBhZ2UpIHsKICAgICBldmVudHMuYmluZChlbG0sICdjbGljaycsIGZ1bmN0aW9uKCkgewogICAgICAgbGlzdC5zaG93KChpLTEpKnBhZ2UgKyAxLCBwYWdlKTsKICAgICB9KTsKICB9OwoKICByZXR1cm4gZnVuY3Rpb24ob3B0aW9ucykgewogICAgdmFyIHBhZ2luZ0xpc3QgPSBuZXcgTGlzdChsaXN0Lmxpc3RDb250YWluZXIuaWQsIHsKICAgICAgbGlzdENsYXNzOiBvcHRpb25zLnBhZ2luYXRpb25DbGFzcyB8fCAncGFnaW5hdGlvbicsCiAgICAgIGl0ZW06ICI8bGk+PGEgY2xhc3M9J3BhZ2UnIGhyZWY9J2phdmFzY3JpcHQ6ZnVuY3Rpb24gWigpe1o9XCJcIn1aKCknPjwvYT48L2xpPiIsCiAgICAgIHZhbHVlTmFtZXM6IFsncGFnZScsICdkb3R0ZWQnXSwKICAgICAgc2VhcmNoQ2xhc3M6ICdwYWdpbmF0aW9uLXNlYXJjaC10aGF0LWlzLW5vdC1zdXBwb3NlZC10by1leGlzdCcsCiAgICAgIHNvcnRDbGFzczogJ3BhZ2luYXRpb24tc29ydC10aGF0LWlzLW5vdC1zdXBwb3NlZC10by1leGlzdCcKICAgIH0pOwoKICAgIGxpc3Qub24oJ3VwZGF0ZWQnLCBmdW5jdGlvbigpIHsKICAgICAgcmVmcmVzaChwYWdpbmdMaXN0LCBvcHRpb25zKTsKICAgIH0pOwogICAgcmVmcmVzaChwYWdpbmdMaXN0LCBvcHRpb25zKTsKICB9Owp9OwoKCi8qKiovIH0pLAovKiAxMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QpIHsKCiAgdmFyIEl0ZW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKGxpc3QpOwoKICB2YXIgZ2V0Q2hpbGRyZW4gPSBmdW5jdGlvbihwYXJlbnQpIHsKICAgIHZhciBub2RlcyA9IHBhcmVudC5jaGlsZE5vZGVzLAogICAgICBpdGVtcyA9IFtdOwogICAgZm9yICh2YXIgaSA9IDAsIGlsID0gbm9kZXMubGVuZ3RoOyBpIDwgaWw7IGkrKykgewogICAgICAvLyBPbmx5IHRleHRub2RlcyBoYXZlIGEgZGF0YSBhdHRyaWJ1dGUKICAgICAgaWYgKG5vZGVzW2ldLmRhdGEgPT09IHVuZGVmaW5lZCkgewogICAgICAgIGl0ZW1zLnB1c2gobm9kZXNbaV0pOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gaXRlbXM7CiAgfTsKCiAgdmFyIHBhcnNlID0gZnVuY3Rpb24oaXRlbUVsZW1lbnRzLCB2YWx1ZU5hbWVzKSB7CiAgICBmb3IgKHZhciBpID0gMCwgaWwgPSBpdGVtRWxlbWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgewogICAgICBsaXN0Lml0ZW1zLnB1c2gobmV3IEl0ZW0odmFsdWVOYW1lcywgaXRlbUVsZW1lbnRzW2ldKSk7CiAgICB9CiAgfTsKICB2YXIgcGFyc2VBc3luYyA9IGZ1bmN0aW9uKGl0ZW1FbGVtZW50cywgdmFsdWVOYW1lcykgewogICAgdmFyIGl0ZW1zVG9JbmRleCA9IGl0ZW1FbGVtZW50cy5zcGxpY2UoMCwgNTApOyAvLyBUT0RPOiBJZiA8IDEwMCBpdGVtcywgd2hhdCBoYXBwZW5zIGluIElFIGV0Yz8KICAgIHBhcnNlKGl0ZW1zVG9JbmRleCwgdmFsdWVOYW1lcyk7CiAgICBpZiAoaXRlbUVsZW1lbnRzLmxlbmd0aCA+IDApIHsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICBwYXJzZUFzeW5jKGl0ZW1FbGVtZW50cywgdmFsdWVOYW1lcyk7CiAgICAgIH0sIDEpOwogICAgfSBlbHNlIHsKICAgICAgbGlzdC51cGRhdGUoKTsKICAgICAgbGlzdC50cmlnZ2VyKCdwYXJzZUNvbXBsZXRlJyk7CiAgICB9CiAgfTsKCiAgbGlzdC5oYW5kbGVycy5wYXJzZUNvbXBsZXRlID0gbGlzdC5oYW5kbGVycy5wYXJzZUNvbXBsZXRlIHx8IFtdOwoKICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICB2YXIgaXRlbXNUb0luZGV4ID0gZ2V0Q2hpbGRyZW4obGlzdC5saXN0KSwKICAgICAgdmFsdWVOYW1lcyA9IGxpc3QudmFsdWVOYW1lczsKCiAgICBpZiAobGlzdC5pbmRleEFzeW5jKSB7CiAgICAgIHBhcnNlQXN5bmMoaXRlbXNUb0luZGV4LCB2YWx1ZU5hbWVzKTsKICAgIH0gZWxzZSB7CiAgICAgIHBhcnNlKGl0ZW1zVG9JbmRleCwgdmFsdWVOYW1lcyk7CiAgICB9CiAgfTsKfTsKCgovKioqLyB9KSwKLyogMTQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0KSB7CiAgdmFyIGl0ZW0sCiAgICB0ZXh0LAogICAgY29sdW1ucywKICAgIHNlYXJjaFN0cmluZywKICAgIGN1c3RvbVNlYXJjaDsKCiAgdmFyIHByZXBhcmUgPSB7CiAgICByZXNldExpc3Q6IGZ1bmN0aW9uKCkgewogICAgICBsaXN0LmkgPSAxOwogICAgICBsaXN0LnRlbXBsYXRlci5jbGVhcigpOwogICAgICBjdXN0b21TZWFyY2ggPSB1bmRlZmluZWQ7CiAgICB9LAogICAgc2V0T3B0aW9uczogZnVuY3Rpb24oYXJncykgewogICAgICBpZiAoYXJncy5sZW5ndGggPT0gMiAmJiBhcmdzWzFdIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICBjb2x1bW5zID0gYXJnc1sxXTsKICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PSAyICYmIHR5cGVvZihhcmdzWzFdKSA9PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgY29sdW1ucyA9IHVuZGVmaW5lZDsKICAgICAgICBjdXN0b21TZWFyY2ggPSBhcmdzWzFdOwogICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09IDMpIHsKICAgICAgICBjb2x1bW5zID0gYXJnc1sxXTsKICAgICAgICBjdXN0b21TZWFyY2ggPSBhcmdzWzJdOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbHVtbnMgPSB1bmRlZmluZWQ7CiAgICAgIH0KICAgIH0sCiAgICBzZXRDb2x1bW5zOiBmdW5jdGlvbigpIHsKICAgICAgaWYgKGxpc3QuaXRlbXMubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgIGlmIChjb2x1bW5zID09PSB1bmRlZmluZWQpIHsKICAgICAgICBjb2x1bW5zID0gKGxpc3Quc2VhcmNoQ29sdW1ucyA9PT0gdW5kZWZpbmVkKSA/IHByZXBhcmUudG9BcnJheShsaXN0Lml0ZW1zWzBdLnZhbHVlcygpKSA6IGxpc3Quc2VhcmNoQ29sdW1uczsKICAgICAgfQogICAgfSwKICAgIHNldFNlYXJjaFN0cmluZzogZnVuY3Rpb24ocykgewogICAgICBzID0gbGlzdC51dGlscy50b1N0cmluZyhzKS50b0xvd2VyQ2FzZSgpOwogICAgICBzID0gcy5yZXBsYWNlKC9bLVtcXXt9KCkqKz8uLFxcXiR8I10vZywgIlxcJCYiKTsgLy8gRXNjYXBlIHJlZ3VsYXIgZXhwcmVzc2lvbiBjaGFyYWN0ZXJzCiAgICAgIHNlYXJjaFN0cmluZyA9IHM7CiAgICB9LAogICAgdG9BcnJheTogZnVuY3Rpb24odmFsdWVzKSB7CiAgICAgIHZhciB0bXBDb2x1bW4gPSBbXTsKICAgICAgZm9yICh2YXIgbmFtZSBpbiB2YWx1ZXMpIHsKICAgICAgICB0bXBDb2x1bW4ucHVzaChuYW1lKTsKICAgICAgfQogICAgICByZXR1cm4gdG1wQ29sdW1uOwogICAgfQogIH07CiAgdmFyIHNlYXJjaCA9IHsKICAgIGxpc3Q6IGZ1bmN0aW9uKCkgewogICAgICBmb3IgKHZhciBrID0gMCwga2wgPSBsaXN0Lml0ZW1zLmxlbmd0aDsgayA8IGtsOyBrKyspIHsKICAgICAgICBzZWFyY2guaXRlbShsaXN0Lml0ZW1zW2tdKTsKICAgICAgfQogICAgfSwKICAgIGl0ZW06IGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgaXRlbS5mb3VuZCA9IGZhbHNlOwogICAgICBmb3IgKHZhciBqID0gMCwgamwgPSBjb2x1bW5zLmxlbmd0aDsgaiA8IGpsOyBqKyspIHsKICAgICAgICBpZiAoc2VhcmNoLnZhbHVlcyhpdGVtLnZhbHVlcygpLCBjb2x1bW5zW2pdKSkgewogICAgICAgICAgaXRlbS5mb3VuZCA9IHRydWU7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgdmFsdWVzOiBmdW5jdGlvbih2YWx1ZXMsIGNvbHVtbikgewogICAgICBpZiAodmFsdWVzLmhhc093blByb3BlcnR5KGNvbHVtbikpIHsKICAgICAgICB0ZXh0ID0gbGlzdC51dGlscy50b1N0cmluZyh2YWx1ZXNbY29sdW1uXSkudG9Mb3dlckNhc2UoKTsKICAgICAgICBpZiAoKHNlYXJjaFN0cmluZyAhPT0gIiIpICYmICh0ZXh0LnNlYXJjaChzZWFyY2hTdHJpbmcpID4gLTEpKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIHJlc2V0OiBmdW5jdGlvbigpIHsKICAgICAgbGlzdC5yZXNldC5zZWFyY2goKTsKICAgICAgbGlzdC5zZWFyY2hlZCA9IGZhbHNlOwogICAgfQogIH07CgogIHZhciBzZWFyY2hNZXRob2QgPSBmdW5jdGlvbihzdHIpIHsKICAgIGxpc3QudHJpZ2dlcignc2VhcmNoU3RhcnQnKTsKCiAgICBwcmVwYXJlLnJlc2V0TGlzdCgpOwogICAgcHJlcGFyZS5zZXRTZWFyY2hTdHJpbmcoc3RyKTsKICAgIHByZXBhcmUuc2V0T3B0aW9ucyhhcmd1bWVudHMpOyAvLyBzdHIsIGNvbHN8c2VhcmNoRnVuY3Rpb24sIHNlYXJjaEZ1bmN0aW9uCiAgICBwcmVwYXJlLnNldENvbHVtbnMoKTsKCiAgICBpZiAoc2VhcmNoU3RyaW5nID09PSAiIiApIHsKICAgICAgc2VhcmNoLnJlc2V0KCk7CiAgICB9IGVsc2UgewogICAgICBsaXN0LnNlYXJjaGVkID0gdHJ1ZTsKICAgICAgaWYgKGN1c3RvbVNlYXJjaCkgewogICAgICAgIGN1c3RvbVNlYXJjaChzZWFyY2hTdHJpbmcsIGNvbHVtbnMpOwogICAgICB9IGVsc2UgewogICAgICAgIHNlYXJjaC5saXN0KCk7CiAgICAgIH0KICAgIH0KCiAgICBsaXN0LnVwZGF0ZSgpOwogICAgbGlzdC50cmlnZ2VyKCdzZWFyY2hDb21wbGV0ZScpOwogICAgcmV0dXJuIGxpc3QudmlzaWJsZUl0ZW1zOwogIH07CgogIGxpc3QuaGFuZGxlcnMuc2VhcmNoU3RhcnQgPSBsaXN0LmhhbmRsZXJzLnNlYXJjaFN0YXJ0IHx8IFtdOwogIGxpc3QuaGFuZGxlcnMuc2VhcmNoQ29tcGxldGUgPSBsaXN0LmhhbmRsZXJzLnNlYXJjaENvbXBsZXRlIHx8IFtdOwoKICBsaXN0LnV0aWxzLmV2ZW50cy5iaW5kKGxpc3QudXRpbHMuZ2V0QnlDbGFzcyhsaXN0Lmxpc3RDb250YWluZXIsIGxpc3Quc2VhcmNoQ2xhc3MpLCAna2V5dXAnLCBmdW5jdGlvbihlKSB7CiAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50LCAvLyBJRSBoYXZlIHNyY0VsZW1lbnQKICAgICAgYWxyZWFkeUNsZWFyZWQgPSAodGFyZ2V0LnZhbHVlID09PSAiIiAmJiAhbGlzdC5zZWFyY2hlZCk7CiAgICBpZiAoIWFscmVhZHlDbGVhcmVkKSB7IC8vIElmIG9uaW5wdXQgYWxyZWFkeSBoYXZlIHJlc2V0dGVkIHRoZSBsaXN0LCBkbyBub3RoaW5nCiAgICAgIHNlYXJjaE1ldGhvZCh0YXJnZXQudmFsdWUpOwogICAgfQogIH0pOwoKICAvLyBVc2VkIHRvIGRldGVjdCBjbGljayBvbiBIVE1MNSBjbGVhciBidXR0b24KICBsaXN0LnV0aWxzLmV2ZW50cy5iaW5kKGxpc3QudXRpbHMuZ2V0QnlDbGFzcyhsaXN0Lmxpc3RDb250YWluZXIsIGxpc3Quc2VhcmNoQ2xhc3MpLCAnaW5wdXQnLCBmdW5jdGlvbihlKSB7CiAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50OwogICAgaWYgKHRhcmdldC52YWx1ZSA9PT0gIiIpIHsKICAgICAgc2VhcmNoTWV0aG9kKCcnKTsKICAgIH0KICB9KTsKCiAgcmV0dXJuIHNlYXJjaE1ldGhvZDsKfTsKCgovKioqLyB9KSwKLyogMTUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0KSB7CgogIHZhciBidXR0b25zID0gewogICAgZWxzOiB1bmRlZmluZWQsCiAgICBjbGVhcjogZnVuY3Rpb24oKSB7CiAgICAgIGZvciAodmFyIGkgPSAwLCBpbCA9IGJ1dHRvbnMuZWxzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHsKICAgICAgICBsaXN0LnV0aWxzLmNsYXNzZXMoYnV0dG9ucy5lbHNbaV0pLnJlbW92ZSgnYXNjJyk7CiAgICAgICAgbGlzdC51dGlscy5jbGFzc2VzKGJ1dHRvbnMuZWxzW2ldKS5yZW1vdmUoJ2Rlc2MnKTsKICAgICAgfQogICAgfSwKICAgIGdldE9yZGVyOiBmdW5jdGlvbihidG4pIHsKICAgICAgdmFyIHByZWRlZmluZWRPcmRlciA9IGxpc3QudXRpbHMuZ2V0QXR0cmlidXRlKGJ0biwgJ2RhdGEtb3JkZXInKTsKICAgICAgaWYgKHByZWRlZmluZWRPcmRlciA9PSAiYXNjIiB8fCBwcmVkZWZpbmVkT3JkZXIgPT0gImRlc2MiKSB7CiAgICAgICAgcmV0dXJuIHByZWRlZmluZWRPcmRlcjsKICAgICAgfSBlbHNlIGlmIChsaXN0LnV0aWxzLmNsYXNzZXMoYnRuKS5oYXMoJ2Rlc2MnKSkgewogICAgICAgIHJldHVybiAiYXNjIjsKICAgICAgfSBlbHNlIGlmIChsaXN0LnV0aWxzLmNsYXNzZXMoYnRuKS5oYXMoJ2FzYycpKSB7CiAgICAgICAgcmV0dXJuICJkZXNjIjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gImFzYyI7CiAgICAgIH0KICAgIH0sCiAgICBnZXRJblNlbnNpdGl2ZTogZnVuY3Rpb24oYnRuLCBvcHRpb25zKSB7CiAgICAgIHZhciBpbnNlbnNpdGl2ZSA9IGxpc3QudXRpbHMuZ2V0QXR0cmlidXRlKGJ0biwgJ2RhdGEtaW5zZW5zaXRpdmUnKTsKICAgICAgaWYgKGluc2Vuc2l0aXZlID09PSAiZmFsc2UiKSB7CiAgICAgICAgb3B0aW9ucy5pbnNlbnNpdGl2ZSA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIG9wdGlvbnMuaW5zZW5zaXRpdmUgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgc2V0T3JkZXI6IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAgICAgZm9yICh2YXIgaSA9IDAsIGlsID0gYnV0dG9ucy5lbHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgewogICAgICAgIHZhciBidG4gPSBidXR0b25zLmVsc1tpXTsKICAgICAgICBpZiAobGlzdC51dGlscy5nZXRBdHRyaWJ1dGUoYnRuLCAnZGF0YS1zb3J0JykgIT09IG9wdGlvbnMudmFsdWVOYW1lKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgdmFyIHByZWRlZmluZWRPcmRlciA9IGxpc3QudXRpbHMuZ2V0QXR0cmlidXRlKGJ0biwgJ2RhdGEtb3JkZXInKTsKICAgICAgICBpZiAocHJlZGVmaW5lZE9yZGVyID09ICJhc2MiIHx8IHByZWRlZmluZWRPcmRlciA9PSAiZGVzYyIpIHsKICAgICAgICAgIGlmIChwcmVkZWZpbmVkT3JkZXIgPT0gb3B0aW9ucy5vcmRlcikgewogICAgICAgICAgICBsaXN0LnV0aWxzLmNsYXNzZXMoYnRuKS5hZGQob3B0aW9ucy5vcmRlcik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGxpc3QudXRpbHMuY2xhc3NlcyhidG4pLmFkZChvcHRpb25zLm9yZGVyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwoKICB2YXIgc29ydCA9IGZ1bmN0aW9uKCkgewogICAgbGlzdC50cmlnZ2VyKCdzb3J0U3RhcnQnKTsKICAgIHZhciBvcHRpb25zID0ge307CgogICAgdmFyIHRhcmdldCA9IGFyZ3VtZW50c1swXS5jdXJyZW50VGFyZ2V0IHx8IGFyZ3VtZW50c1swXS5zcmNFbGVtZW50IHx8IHVuZGVmaW5lZDsKCiAgICBpZiAodGFyZ2V0KSB7CiAgICAgIG9wdGlvbnMudmFsdWVOYW1lID0gbGlzdC51dGlscy5nZXRBdHRyaWJ1dGUodGFyZ2V0LCAnZGF0YS1zb3J0Jyk7CiAgICAgIGJ1dHRvbnMuZ2V0SW5TZW5zaXRpdmUodGFyZ2V0LCBvcHRpb25zKTsKICAgICAgb3B0aW9ucy5vcmRlciA9IGJ1dHRvbnMuZ2V0T3JkZXIodGFyZ2V0KTsKICAgIH0gZWxzZSB7CiAgICAgIG9wdGlvbnMgPSBhcmd1bWVudHNbMV0gfHwgb3B0aW9uczsKICAgICAgb3B0aW9ucy52YWx1ZU5hbWUgPSBhcmd1bWVudHNbMF07CiAgICAgIG9wdGlvbnMub3JkZXIgPSBvcHRpb25zLm9yZGVyIHx8ICJhc2MiOwogICAgICBvcHRpb25zLmluc2Vuc2l0aXZlID0gKHR5cGVvZiBvcHRpb25zLmluc2Vuc2l0aXZlID09ICJ1bmRlZmluZWQiKSA/IHRydWUgOiBvcHRpb25zLmluc2Vuc2l0aXZlOwogICAgfQoKICAgIGJ1dHRvbnMuY2xlYXIoKTsKICAgIGJ1dHRvbnMuc2V0T3JkZXIob3B0aW9ucyk7CgoKICAgIC8vIGNhc2VJbnNlbnNpdGl2ZQogICAgLy8gYWxwaGFiZXQKICAgIHZhciBjdXN0b21Tb3J0RnVuY3Rpb24gPSAob3B0aW9ucy5zb3J0RnVuY3Rpb24gfHwgbGlzdC5zb3J0RnVuY3Rpb24gfHwgbnVsbCksCiAgICAgICAgbXVsdGkgPSAoKG9wdGlvbnMub3JkZXIgPT09ICdkZXNjJykgPyAtMSA6IDEpLAogICAgICAgIHNvcnRGdW5jdGlvbjsKCiAgICBpZiAoY3VzdG9tU29ydEZ1bmN0aW9uKSB7CiAgICAgIHNvcnRGdW5jdGlvbiA9IGZ1bmN0aW9uKGl0ZW1BLCBpdGVtQikgewogICAgICAgIHJldHVybiBjdXN0b21Tb3J0RnVuY3Rpb24oaXRlbUEsIGl0ZW1CLCBvcHRpb25zKSAqIG11bHRpOwogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgc29ydEZ1bmN0aW9uID0gZnVuY3Rpb24oaXRlbUEsIGl0ZW1CKSB7CiAgICAgICAgdmFyIHNvcnQgPSBsaXN0LnV0aWxzLm5hdHVyYWxTb3J0OwogICAgICAgIHNvcnQuYWxwaGFiZXQgPSBsaXN0LmFscGhhYmV0IHx8IG9wdGlvbnMuYWxwaGFiZXQgfHwgdW5kZWZpbmVkOwogICAgICAgIGlmICghc29ydC5hbHBoYWJldCAmJiBvcHRpb25zLmluc2Vuc2l0aXZlKSB7CiAgICAgICAgICBzb3J0ID0gbGlzdC51dGlscy5uYXR1cmFsU29ydC5jYXNlSW5zZW5zaXRpdmU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzb3J0KGl0ZW1BLnZhbHVlcygpW29wdGlvbnMudmFsdWVOYW1lXSwgaXRlbUIudmFsdWVzKClbb3B0aW9ucy52YWx1ZU5hbWVdKSAqIG11bHRpOwogICAgICB9OwogICAgfQoKICAgIGxpc3QuaXRlbXMuc29ydChzb3J0RnVuY3Rpb24pOwogICAgbGlzdC51cGRhdGUoKTsKICAgIGxpc3QudHJpZ2dlcignc29ydENvbXBsZXRlJyk7CiAgfTsKCiAgLy8gQWRkIGhhbmRsZXJzCiAgbGlzdC5oYW5kbGVycy5zb3J0U3RhcnQgPSBsaXN0LmhhbmRsZXJzLnNvcnRTdGFydCB8fCBbXTsKICBsaXN0LmhhbmRsZXJzLnNvcnRDb21wbGV0ZSA9IGxpc3QuaGFuZGxlcnMuc29ydENvbXBsZXRlIHx8IFtdOwoKICBidXR0b25zLmVscyA9IGxpc3QudXRpbHMuZ2V0QnlDbGFzcyhsaXN0Lmxpc3RDb250YWluZXIsIGxpc3Quc29ydENsYXNzKTsKICBsaXN0LnV0aWxzLmV2ZW50cy5iaW5kKGJ1dHRvbnMuZWxzLCAnY2xpY2snLCBzb3J0KTsKICBsaXN0Lm9uKCdzZWFyY2hTdGFydCcsIGJ1dHRvbnMuY2xlYXIpOwogIGxpc3Qub24oJ2ZpbHRlclN0YXJ0JywgYnV0dG9ucy5jbGVhcik7CgogIHJldHVybiBzb3J0Owp9OwoKCi8qKiovIH0pLAovKiAxNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgp2YXIgVGVtcGxhdGVyID0gZnVuY3Rpb24obGlzdCkgewogIHZhciBpdGVtU291cmNlLAogICAgdGVtcGxhdGVyID0gdGhpczsKCiAgdmFyIGluaXQgPSBmdW5jdGlvbigpIHsKICAgIGl0ZW1Tb3VyY2UgPSB0ZW1wbGF0ZXIuZ2V0SXRlbVNvdXJjZShsaXN0Lml0ZW0pOwogICAgaWYgKGl0ZW1Tb3VyY2UpIHsKICAgICAgaXRlbVNvdXJjZSA9IHRlbXBsYXRlci5jbGVhclNvdXJjZUl0ZW0oaXRlbVNvdXJjZSwgbGlzdC52YWx1ZU5hbWVzKTsKICAgIH0KICB9OwoKICB0aGlzLmNsZWFyU291cmNlSXRlbSA9IGZ1bmN0aW9uKGVsLCB2YWx1ZU5hbWVzKSB7CiAgICBmb3IodmFyIGkgPSAwLCBpbCA9IHZhbHVlTmFtZXMubGVuZ3RoOyBpIDwgaWw7IGkrKykgewogICAgICB2YXIgZWxtOwogICAgICBpZiAodmFsdWVOYW1lc1tpXS5kYXRhKSB7CiAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpsID0gdmFsdWVOYW1lc1tpXS5kYXRhLmxlbmd0aDsgaiA8IGpsOyBqKyspIHsKICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS0nK3ZhbHVlTmFtZXNbaV0uZGF0YVtqXSwgJycpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh2YWx1ZU5hbWVzW2ldLmF0dHIgJiYgdmFsdWVOYW1lc1tpXS5uYW1lKSB7CiAgICAgICAgZWxtID0gbGlzdC51dGlscy5nZXRCeUNsYXNzKGVsLCB2YWx1ZU5hbWVzW2ldLm5hbWUsIHRydWUpOwogICAgICAgIGlmIChlbG0pIHsKICAgICAgICAgIGVsbS5zZXRBdHRyaWJ1dGUodmFsdWVOYW1lc1tpXS5hdHRyLCAiIik7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGVsbSA9IGxpc3QudXRpbHMuZ2V0QnlDbGFzcyhlbCwgdmFsdWVOYW1lc1tpXSwgdHJ1ZSk7CiAgICAgICAgaWYgKGVsbSkgewogICAgICAgICAgZWxtLmlubmVySFRNTCA9ICIiOwogICAgICAgIH0KICAgICAgfQogICAgICBlbG0gPSB1bmRlZmluZWQ7CiAgICB9CiAgICByZXR1cm4gZWw7CiAgfTsKCiAgdGhpcy5nZXRJdGVtU291cmNlID0gZnVuY3Rpb24oaXRlbSkgewogICAgaWYgKGl0ZW0gPT09IHVuZGVmaW5lZCkgewogICAgICB2YXIgbm9kZXMgPSBsaXN0Lmxpc3QuY2hpbGROb2RlcywKICAgICAgICBpdGVtcyA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDAsIGlsID0gbm9kZXMubGVuZ3RoOyBpIDwgaWw7IGkrKykgewogICAgICAgIC8vIE9ubHkgdGV4dG5vZGVzIGhhdmUgYSBkYXRhIGF0dHJpYnV0ZQogICAgICAgIGlmIChub2Rlc1tpXS5kYXRhID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHJldHVybiBub2Rlc1tpXS5jbG9uZU5vZGUodHJ1ZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgaWYgKC88dHJbXHM+XS9nLmV4ZWMoaXRlbSkpIHsKICAgICAgdmFyIHRib2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGJvZHknKTsKICAgICAgdGJvZHkuaW5uZXJIVE1MID0gaXRlbTsKICAgICAgcmV0dXJuIHRib2R5LmZpcnN0Q2hpbGQ7CiAgICB9IGVsc2UgaWYgKGl0ZW0uaW5kZXhPZigiPCIpICE9PSAtMSkgewogICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIGRpdi5pbm5lckhUTUwgPSBpdGVtOwogICAgICByZXR1cm4gZGl2LmZpcnN0Q2hpbGQ7CiAgICB9IGVsc2UgewogICAgICB2YXIgc291cmNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGlzdC5pdGVtKTsKICAgICAgaWYgKHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2U7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB1bmRlZmluZWQ7CiAgfTsKCiAgdGhpcy5nZXQgPSBmdW5jdGlvbihpdGVtLCB2YWx1ZU5hbWVzKSB7CiAgICB0ZW1wbGF0ZXIuY3JlYXRlKGl0ZW0pOwogICAgdmFyIHZhbHVlcyA9IHt9OwogICAgZm9yKHZhciBpID0gMCwgaWwgPSB2YWx1ZU5hbWVzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHsKICAgICAgdmFyIGVsbTsKICAgICAgaWYgKHZhbHVlTmFtZXNbaV0uZGF0YSkgewogICAgICAgIGZvciAodmFyIGogPSAwLCBqbCA9IHZhbHVlTmFtZXNbaV0uZGF0YS5sZW5ndGg7IGogPCBqbDsgaisrKSB7CiAgICAgICAgICB2YWx1ZXNbdmFsdWVOYW1lc1tpXS5kYXRhW2pdXSA9IGxpc3QudXRpbHMuZ2V0QXR0cmlidXRlKGl0ZW0uZWxtLCAnZGF0YS0nK3ZhbHVlTmFtZXNbaV0uZGF0YVtqXSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHZhbHVlTmFtZXNbaV0uYXR0ciAmJiB2YWx1ZU5hbWVzW2ldLm5hbWUpIHsKICAgICAgICBlbG0gPSBsaXN0LnV0aWxzLmdldEJ5Q2xhc3MoaXRlbS5lbG0sIHZhbHVlTmFtZXNbaV0ubmFtZSwgdHJ1ZSk7CiAgICAgICAgdmFsdWVzW3ZhbHVlTmFtZXNbaV0ubmFtZV0gPSBlbG0gPyBsaXN0LnV0aWxzLmdldEF0dHJpYnV0ZShlbG0sIHZhbHVlTmFtZXNbaV0uYXR0cikgOiAiIjsKICAgICAgfSBlbHNlIHsKICAgICAgICBlbG0gPSBsaXN0LnV0aWxzLmdldEJ5Q2xhc3MoaXRlbS5lbG0sIHZhbHVlTmFtZXNbaV0sIHRydWUpOwogICAgICAgIHZhbHVlc1t2YWx1ZU5hbWVzW2ldXSA9IGVsbSA/IGVsbS5pbm5lckhUTUwgOiAiIjsKICAgICAgfQogICAgICBlbG0gPSB1bmRlZmluZWQ7CiAgICB9CiAgICByZXR1cm4gdmFsdWVzOwogIH07CgogIHRoaXMuc2V0ID0gZnVuY3Rpb24oaXRlbSwgdmFsdWVzKSB7CiAgICB2YXIgZ2V0VmFsdWVOYW1lID0gZnVuY3Rpb24obmFtZSkgewogICAgICBmb3IgKHZhciBpID0gMCwgaWwgPSBsaXN0LnZhbHVlTmFtZXMubGVuZ3RoOyBpIDwgaWw7IGkrKykgewogICAgICAgIGlmIChsaXN0LnZhbHVlTmFtZXNbaV0uZGF0YSkgewogICAgICAgICAgdmFyIGRhdGEgPSBsaXN0LnZhbHVlTmFtZXNbaV0uZGF0YTsKICAgICAgICAgIGZvciAodmFyIGogPSAwLCBqbCA9IGRhdGEubGVuZ3RoOyBqIDwgamw7IGorKykgewogICAgICAgICAgICBpZiAoZGF0YVtqXSA9PT0gbmFtZSkgewogICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IG5hbWUgfTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAobGlzdC52YWx1ZU5hbWVzW2ldLmF0dHIgJiYgbGlzdC52YWx1ZU5hbWVzW2ldLm5hbWUgJiYgbGlzdC52YWx1ZU5hbWVzW2ldLm5hbWUgPT0gbmFtZSkgewogICAgICAgICAgcmV0dXJuIGxpc3QudmFsdWVOYW1lc1tpXTsKICAgICAgICB9IGVsc2UgaWYgKGxpc3QudmFsdWVOYW1lc1tpXSA9PT0gbmFtZSkgewogICAgICAgICAgcmV0dXJuIG5hbWU7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogICAgdmFyIHNldFZhbHVlID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHsKICAgICAgdmFyIGVsbTsKICAgICAgdmFyIHZhbHVlTmFtZSA9IGdldFZhbHVlTmFtZShuYW1lKTsKICAgICAgaWYgKCF2YWx1ZU5hbWUpCiAgICAgICAgcmV0dXJuOwogICAgICBpZiAodmFsdWVOYW1lLmRhdGEpIHsKICAgICAgICBpdGVtLmVsbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtJyt2YWx1ZU5hbWUuZGF0YSwgdmFsdWUpOwogICAgICB9IGVsc2UgaWYgKHZhbHVlTmFtZS5hdHRyICYmIHZhbHVlTmFtZS5uYW1lKSB7CiAgICAgICAgZWxtID0gbGlzdC51dGlscy5nZXRCeUNsYXNzKGl0ZW0uZWxtLCB2YWx1ZU5hbWUubmFtZSwgdHJ1ZSk7CiAgICAgICAgaWYgKGVsbSkgewogICAgICAgICAgZWxtLnNldEF0dHJpYnV0ZSh2YWx1ZU5hbWUuYXR0ciwgdmFsdWUpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBlbG0gPSBsaXN0LnV0aWxzLmdldEJ5Q2xhc3MoaXRlbS5lbG0sIHZhbHVlTmFtZSwgdHJ1ZSk7CiAgICAgICAgaWYgKGVsbSkgewogICAgICAgICAgZWxtLmlubmVySFRNTCA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfQogICAgICBlbG0gPSB1bmRlZmluZWQ7CiAgICB9OwogICAgaWYgKCF0ZW1wbGF0ZXIuY3JlYXRlKGl0ZW0pKSB7CiAgICAgIGZvcih2YXIgdiBpbiB2YWx1ZXMpIHsKICAgICAgICBpZiAodmFsdWVzLmhhc093blByb3BlcnR5KHYpKSB7CiAgICAgICAgICBzZXRWYWx1ZSh2LCB2YWx1ZXNbdl0pOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIHRoaXMuY3JlYXRlID0gZnVuY3Rpb24oaXRlbSkgewogICAgaWYgKGl0ZW0uZWxtICE9PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgaWYgKGl0ZW1Tb3VyY2UgPT09IHVuZGVmaW5lZCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIlRoZSBsaXN0IG5lZWQgdG8gaGF2ZSBhdCBsaXN0IG9uZSBpdGVtIG9uIGluaXQgb3RoZXJ3aXNlIHlvdSdsbCBoYXZlIHRvIGFkZCBhIHRlbXBsYXRlLiIpOwogICAgfQogICAgLyogSWYgaXRlbSBzb3VyY2UgZG9lcyBub3QgZXhpc3RzLCB1c2UgdGhlIGZpcnN0IGl0ZW0gaW4gbGlzdCBhcwogICAgc291cmNlIGZvciBuZXcgaXRlbXMgKi8KICAgIHZhciBuZXdJdGVtID0gaXRlbVNvdXJjZS5jbG9uZU5vZGUodHJ1ZSk7CiAgICBuZXdJdGVtLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTsKICAgIGl0ZW0uZWxtID0gbmV3SXRlbTsKICAgIHRlbXBsYXRlci5zZXQoaXRlbSwgaXRlbS52YWx1ZXMoKSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9OwogIHRoaXMucmVtb3ZlID0gZnVuY3Rpb24oaXRlbSkgewogICAgaWYgKGl0ZW0uZWxtLnBhcmVudE5vZGUgPT09IGxpc3QubGlzdCkgewogICAgICBsaXN0Lmxpc3QucmVtb3ZlQ2hpbGQoaXRlbS5lbG0pOwogICAgfQogIH07CiAgdGhpcy5zaG93ID0gZnVuY3Rpb24oaXRlbSkgewogICAgdGVtcGxhdGVyLmNyZWF0ZShpdGVtKTsKICAgIGxpc3QubGlzdC5hcHBlbmRDaGlsZChpdGVtLmVsbSk7CiAgfTsKICB0aGlzLmhpZGUgPSBmdW5jdGlvbihpdGVtKSB7CiAgICBpZiAoaXRlbS5lbG0gIT09IHVuZGVmaW5lZCAmJiBpdGVtLmVsbS5wYXJlbnROb2RlID09PSBsaXN0Lmxpc3QpIHsKICAgICAgbGlzdC5saXN0LnJlbW92ZUNoaWxkKGl0ZW0uZWxtKTsKICAgIH0KICB9OwogIHRoaXMuY2xlYXIgPSBmdW5jdGlvbigpIHsKICAgIC8qIC5pbm5lckhUTUwgPSAnJzsgZnVja3MgdXAgSUUgKi8KICAgIGlmIChsaXN0Lmxpc3QuaGFzQ2hpbGROb2RlcygpKSB7CiAgICAgIHdoaWxlIChsaXN0Lmxpc3QuY2hpbGROb2Rlcy5sZW5ndGggPj0gMSkKICAgICAgewogICAgICAgIGxpc3QubGlzdC5yZW1vdmVDaGlsZChsaXN0Lmxpc3QuZmlyc3RDaGlsZCk7CiAgICAgIH0KICAgIH0KICB9OwoKICBpbml0KCk7Cn07Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QpIHsKICByZXR1cm4gbmV3IFRlbXBsYXRlcihsaXN0KTsKfTsKCgovKioqLyB9KSwKLyogMTcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKLyoqCiAqIEEgY3Jvc3MtYnJvd3NlciBpbXBsZW1lbnRhdGlvbiBvZiBnZXRBdHRyaWJ1dGUuCiAqIFNvdXJjZSBmb3VuZCBoZXJlOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zNzU1MzQzLzM2MTMzNyB3cml0dGVuIGJ5IFZpdmluIFBhbGlhdGgKICoKICogUmV0dXJuIHRoZSB2YWx1ZSBmb3IgYGF0dHJgIGF0IGBlbGVtZW50YC4KICoKICogQHBhcmFtIHtFbGVtZW50fSBlbAogKiBAcGFyYW0ge1N0cmluZ30gYXR0cgogKiBAYXBpIHB1YmxpYwogKi8KCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZWwsIGF0dHIpIHsKICB2YXIgcmVzdWx0ID0gKGVsLmdldEF0dHJpYnV0ZSAmJiBlbC5nZXRBdHRyaWJ1dGUoYXR0cikpIHx8IG51bGw7CiAgaWYoICFyZXN1bHQgKSB7CiAgICB2YXIgYXR0cnMgPSBlbC5hdHRyaWJ1dGVzOwogICAgdmFyIGxlbmd0aCA9IGF0dHJzLmxlbmd0aDsKICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBpZiAoYXR0cltpXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgaWYoYXR0cltpXS5ub2RlTmFtZSA9PT0gYXR0cikgewogICAgICAgICAgcmVzdWx0ID0gYXR0cltpXS5ub2RlVmFsdWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQogIHJldHVybiByZXN1bHQ7Cn07CgoKLyoqKi8gfSksCi8qIDE4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgp2YXIgYWxwaGFiZXQ7CnZhciBhbHBoYWJldEluZGV4TWFwOwp2YXIgYWxwaGFiZXRJbmRleE1hcExlbmd0aCA9IDA7CgpmdW5jdGlvbiBpc051bWJlckNvZGUoY29kZSkgewogIHJldHVybiBjb2RlID49IDQ4ICYmIGNvZGUgPD0gNTc7Cn0KCmZ1bmN0aW9uIG5hdHVyYWxDb21wYXJlKGEsIGIpIHsKICB2YXIgbGVuZ3RoQSA9IChhICs9ICcnKS5sZW5ndGg7CiAgdmFyIGxlbmd0aEIgPSAoYiArPSAnJykubGVuZ3RoOwogIHZhciBhSW5kZXggPSAwOwogIHZhciBiSW5kZXggPSAwOwoKICB3aGlsZSAoYUluZGV4IDwgbGVuZ3RoQSAmJiBiSW5kZXggPCBsZW5ndGhCKSB7CiAgICB2YXIgY2hhckNvZGVBID0gYS5jaGFyQ29kZUF0KGFJbmRleCk7CiAgICB2YXIgY2hhckNvZGVCID0gYi5jaGFyQ29kZUF0KGJJbmRleCk7CgogICAgaWYgKGlzTnVtYmVyQ29kZShjaGFyQ29kZUEpKSB7CiAgICAgIGlmICghaXNOdW1iZXJDb2RlKGNoYXJDb2RlQikpIHsKICAgICAgICByZXR1cm4gY2hhckNvZGVBIC0gY2hhckNvZGVCOwogICAgICB9CgogICAgICB2YXIgbnVtU3RhcnRBID0gYUluZGV4OwogICAgICB2YXIgbnVtU3RhcnRCID0gYkluZGV4OwoKICAgICAgd2hpbGUgKGNoYXJDb2RlQSA9PT0gNDggJiYgKytudW1TdGFydEEgPCBsZW5ndGhBKSB7CiAgICAgICAgY2hhckNvZGVBID0gYS5jaGFyQ29kZUF0KG51bVN0YXJ0QSk7CiAgICAgIH0KICAgICAgd2hpbGUgKGNoYXJDb2RlQiA9PT0gNDggJiYgKytudW1TdGFydEIgPCBsZW5ndGhCKSB7CiAgICAgICAgY2hhckNvZGVCID0gYi5jaGFyQ29kZUF0KG51bVN0YXJ0Qik7CiAgICAgIH0KCiAgICAgIHZhciBudW1FbmRBID0gbnVtU3RhcnRBOwogICAgICB2YXIgbnVtRW5kQiA9IG51bVN0YXJ0QjsKCiAgICAgIHdoaWxlIChudW1FbmRBIDwgbGVuZ3RoQSAmJiBpc051bWJlckNvZGUoYS5jaGFyQ29kZUF0KG51bUVuZEEpKSkgewogICAgICAgICsrbnVtRW5kQTsKICAgICAgfQogICAgICB3aGlsZSAobnVtRW5kQiA8IGxlbmd0aEIgJiYgaXNOdW1iZXJDb2RlKGIuY2hhckNvZGVBdChudW1FbmRCKSkpIHsKICAgICAgICArK251bUVuZEI7CiAgICAgIH0KCiAgICAgIHZhciBkaWZmZXJlbmNlID0gbnVtRW5kQSAtIG51bVN0YXJ0QSAtIG51bUVuZEIgKyBudW1TdGFydEI7IC8vIG51bUEgbGVuZ3RoIC0gbnVtQiBsZW5ndGgKICAgICAgaWYgKGRpZmZlcmVuY2UpIHsKICAgICAgICByZXR1cm4gZGlmZmVyZW5jZTsKICAgICAgfQoKICAgICAgd2hpbGUgKG51bVN0YXJ0QSA8IG51bUVuZEEpIHsKICAgICAgICBkaWZmZXJlbmNlID0gYS5jaGFyQ29kZUF0KG51bVN0YXJ0QSsrKSAtIGIuY2hhckNvZGVBdChudW1TdGFydEIrKyk7CiAgICAgICAgaWYgKGRpZmZlcmVuY2UpIHsKICAgICAgICAgIHJldHVybiBkaWZmZXJlbmNlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgYUluZGV4ID0gbnVtRW5kQTsKICAgICAgYkluZGV4ID0gbnVtRW5kQjsKICAgICAgY29udGludWU7CiAgICB9CgogICAgaWYgKGNoYXJDb2RlQSAhPT0gY2hhckNvZGVCKSB7CiAgICAgIGlmICgKICAgICAgICBjaGFyQ29kZUEgPCBhbHBoYWJldEluZGV4TWFwTGVuZ3RoICYmCiAgICAgICAgY2hhckNvZGVCIDwgYWxwaGFiZXRJbmRleE1hcExlbmd0aCAmJgogICAgICAgIGFscGhhYmV0SW5kZXhNYXBbY2hhckNvZGVBXSAhPT0gLTEgJiYKICAgICAgICBhbHBoYWJldEluZGV4TWFwW2NoYXJDb2RlQl0gIT09IC0xCiAgICAgICkgewogICAgICAgIHJldHVybiBhbHBoYWJldEluZGV4TWFwW2NoYXJDb2RlQV0gLSBhbHBoYWJldEluZGV4TWFwW2NoYXJDb2RlQl07CiAgICAgIH0KCiAgICAgIHJldHVybiBjaGFyQ29kZUEgLSBjaGFyQ29kZUI7CiAgICB9CgogICAgKythSW5kZXg7CiAgICArK2JJbmRleDsKICB9CgogIHJldHVybiBsZW5ndGhBIC0gbGVuZ3RoQjsKfQoKbmF0dXJhbENvbXBhcmUuY2FzZUluc2Vuc2l0aXZlID0gbmF0dXJhbENvbXBhcmUuaSA9IGZ1bmN0aW9uKGEsIGIpIHsKICByZXR1cm4gbmF0dXJhbENvbXBhcmUoKCcnICsgYSkudG9Mb3dlckNhc2UoKSwgKCcnICsgYikudG9Mb3dlckNhc2UoKSk7Cn07CgpPYmplY3QuZGVmaW5lUHJvcGVydGllcyhuYXR1cmFsQ29tcGFyZSwgewogIGFscGhhYmV0OiB7CiAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gYWxwaGFiZXQ7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkgewogICAgICBhbHBoYWJldCA9IHZhbHVlOwogICAgICBhbHBoYWJldEluZGV4TWFwID0gW107CiAgICAgIHZhciBpID0gMDsKICAgICAgaWYgKGFscGhhYmV0KSB7CiAgICAgICAgZm9yICg7IGkgPCBhbHBoYWJldC5sZW5ndGg7IGkrKykgewogICAgICAgICAgYWxwaGFiZXRJbmRleE1hcFthbHBoYWJldC5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGFscGhhYmV0SW5kZXhNYXBMZW5ndGggPSBhbHBoYWJldEluZGV4TWFwLmxlbmd0aDsKICAgICAgZm9yIChpID0gMDsgaSA8IGFscGhhYmV0SW5kZXhNYXBMZW5ndGg7IGkrKykgewogICAgICAgIGlmIChhbHBoYWJldEluZGV4TWFwW2ldID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGFscGhhYmV0SW5kZXhNYXBbaV0gPSAtMTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgfSwKfSk7Cgptb2R1bGUuZXhwb3J0cyA9IG5hdHVyYWxDb21wYXJlOwoKCi8qKiovIH0pLAovKiAxOSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRleHQsIHBhdHRlcm4sIG9wdGlvbnMpIHsKICAgIC8vIEFwcm94aW1hdGVseSB3aGVyZSBpbiB0aGUgdGV4dCBpcyB0aGUgcGF0dGVybiBleHBlY3RlZCB0byBiZSBmb3VuZD8KICAgIHZhciBNYXRjaF9Mb2NhdGlvbiA9IG9wdGlvbnMubG9jYXRpb24gfHwgMDsKCiAgICAvL0RldGVybWluZXMgaG93IGNsb3NlIHRoZSBtYXRjaCBtdXN0IGJlIHRvIHRoZSBmdXp6eSBsb2NhdGlvbiAoc3BlY2lmaWVkIGFib3ZlKS4gQW4gZXhhY3QgbGV0dGVyIG1hdGNoIHdoaWNoIGlzICdkaXN0YW5jZScgY2hhcmFjdGVycyBhd2F5IGZyb20gdGhlIGZ1enp5IGxvY2F0aW9uIHdvdWxkIHNjb3JlIGFzIGEgY29tcGxldGUgbWlzbWF0Y2guIEEgZGlzdGFuY2Ugb2YgJzAnIHJlcXVpcmVzIHRoZSBtYXRjaCBiZSBhdCB0aGUgZXhhY3QgbG9jYXRpb24gc3BlY2lmaWVkLCBhIHRocmVzaG9sZCBvZiAnMTAwMCcgd291bGQgcmVxdWlyZSBhIHBlcmZlY3QgbWF0Y2ggdG8gYmUgd2l0aGluIDgwMCBjaGFyYWN0ZXJzIG9mIHRoZSBmdXp6eSBsb2NhdGlvbiB0byBiZSBmb3VuZCB1c2luZyBhIDAuOCB0aHJlc2hvbGQuCiAgICB2YXIgTWF0Y2hfRGlzdGFuY2UgPSBvcHRpb25zLmRpc3RhbmNlIHx8IDEwMDsKCiAgICAvLyBBdCB3aGF0IHBvaW50IGRvZXMgdGhlIG1hdGNoIGFsZ29yaXRobSBnaXZlIHVwLiBBIHRocmVzaG9sZCBvZiAnMC4wJyByZXF1aXJlcyBhIHBlcmZlY3QgbWF0Y2ggKG9mIGJvdGggbGV0dGVycyBhbmQgbG9jYXRpb24pLCBhIHRocmVzaG9sZCBvZiAnMS4wJyB3b3VsZCBtYXRjaCBhbnl0aGluZy4KICAgIHZhciBNYXRjaF9UaHJlc2hvbGQgPSBvcHRpb25zLnRocmVzaG9sZCB8fCAwLjQ7CgogICAgaWYgKHBhdHRlcm4gPT09IHRleHQpIHJldHVybiB0cnVlOyAvLyBFeGFjdCBtYXRjaAogICAgaWYgKHBhdHRlcm4ubGVuZ3RoID4gMzIpIHJldHVybiBmYWxzZTsgLy8gVGhpcyBhbGdvcml0aG0gY2Fubm90IGJlIHVzZWQKCiAgICAvLyBTZXQgc3RhcnRpbmcgbG9jYXRpb24gYXQgYmVnaW5uaW5nIHRleHQgYW5kIGluaXRpYWxpc2UgdGhlIGFscGhhYmV0LgogICAgdmFyIGxvYyA9IE1hdGNoX0xvY2F0aW9uLAogICAgICAgIHMgPSAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBxID0ge30sCiAgICAgICAgICAgICAgICBpOwoKICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHBhdHRlcm4ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHFbcGF0dGVybi5jaGFyQXQoaSldID0gMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHBhdHRlcm4ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHFbcGF0dGVybi5jaGFyQXQoaSldIHw9IDEgPDwgKHBhdHRlcm4ubGVuZ3RoIC0gaSAtIDEpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gcTsKICAgICAgICB9KCkpOwoKICAgIC8vIENvbXB1dGUgYW5kIHJldHVybiB0aGUgc2NvcmUgZm9yIGEgbWF0Y2ggd2l0aCBlIGVycm9ycyBhbmQgeCBsb2NhdGlvbi4KICAgIC8vIEFjY2Vzc2VzIGxvYyBhbmQgcGF0dGVybiB0aHJvdWdoIGJlaW5nIGEgY2xvc3VyZS4KCiAgICBmdW5jdGlvbiBtYXRjaF9iaXRhcFNjb3JlXyhlLCB4KSB7CiAgICAgICAgdmFyIGFjY3VyYWN5ID0gZSAvIHBhdHRlcm4ubGVuZ3RoLAogICAgICAgICAgICBwcm94aW1pdHkgPSBNYXRoLmFicyhsb2MgLSB4KTsKCiAgICAgICAgaWYgKCFNYXRjaF9EaXN0YW5jZSkgewogICAgICAgICAgICAvLyBEb2RnZSBkaXZpZGUgYnkgemVybyBlcnJvci4KICAgICAgICAgICAgcmV0dXJuIHByb3hpbWl0eSA/IDEuMCA6IGFjY3VyYWN5OwogICAgICAgIH0KICAgICAgICByZXR1cm4gYWNjdXJhY3kgKyAocHJveGltaXR5IC8gTWF0Y2hfRGlzdGFuY2UpOwogICAgfQoKICAgIHZhciBzY29yZV90aHJlc2hvbGQgPSBNYXRjaF9UaHJlc2hvbGQsIC8vIEhpZ2hlc3Qgc2NvcmUgYmV5b25kIHdoaWNoIHdlIGdpdmUgdXAuCiAgICAgICAgYmVzdF9sb2MgPSB0ZXh0LmluZGV4T2YocGF0dGVybiwgbG9jKTsgLy8gSXMgdGhlcmUgYSBuZWFyYnkgZXhhY3QgbWF0Y2g/IChzcGVlZHVwKQoKICAgIGlmIChiZXN0X2xvYyAhPSAtMSkgewogICAgICAgIHNjb3JlX3RocmVzaG9sZCA9IE1hdGgubWluKG1hdGNoX2JpdGFwU2NvcmVfKDAsIGJlc3RfbG9jKSwgc2NvcmVfdGhyZXNob2xkKTsKICAgICAgICAvLyBXaGF0IGFib3V0IGluIHRoZSBvdGhlciBkaXJlY3Rpb24/IChzcGVlZHVwKQogICAgICAgIGJlc3RfbG9jID0gdGV4dC5sYXN0SW5kZXhPZihwYXR0ZXJuLCBsb2MgKyBwYXR0ZXJuLmxlbmd0aCk7CgogICAgICAgIGlmIChiZXN0X2xvYyAhPSAtMSkgewogICAgICAgICAgICBzY29yZV90aHJlc2hvbGQgPSBNYXRoLm1pbihtYXRjaF9iaXRhcFNjb3JlXygwLCBiZXN0X2xvYyksIHNjb3JlX3RocmVzaG9sZCk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIEluaXRpYWxpc2UgdGhlIGJpdCBhcnJheXMuCiAgICB2YXIgbWF0Y2htYXNrID0gMSA8PCAocGF0dGVybi5sZW5ndGggLSAxKTsKICAgIGJlc3RfbG9jID0gLTE7CgogICAgdmFyIGJpbl9taW4sIGJpbl9taWQ7CiAgICB2YXIgYmluX21heCA9IHBhdHRlcm4ubGVuZ3RoICsgdGV4dC5sZW5ndGg7CiAgICB2YXIgbGFzdF9yZDsKICAgIGZvciAodmFyIGQgPSAwOyBkIDwgcGF0dGVybi5sZW5ndGg7IGQrKykgewogICAgICAgIC8vIFNjYW4gZm9yIHRoZSBiZXN0IG1hdGNoOyBlYWNoIGl0ZXJhdGlvbiBhbGxvd3MgZm9yIG9uZSBtb3JlIGVycm9yLgogICAgICAgIC8vIFJ1biBhIGJpbmFyeSBzZWFyY2ggdG8gZGV0ZXJtaW5lIGhvdyBmYXIgZnJvbSAnbG9jJyB3ZSBjYW4gc3RyYXkgYXQgdGhpcwogICAgICAgIC8vIGVycm9yIGxldmVsLgogICAgICAgIGJpbl9taW4gPSAwOwogICAgICAgIGJpbl9taWQgPSBiaW5fbWF4OwogICAgICAgIHdoaWxlIChiaW5fbWluIDwgYmluX21pZCkgewogICAgICAgICAgICBpZiAobWF0Y2hfYml0YXBTY29yZV8oZCwgbG9jICsgYmluX21pZCkgPD0gc2NvcmVfdGhyZXNob2xkKSB7CiAgICAgICAgICAgICAgICBiaW5fbWluID0gYmluX21pZDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGJpbl9tYXggPSBiaW5fbWlkOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJpbl9taWQgPSBNYXRoLmZsb29yKChiaW5fbWF4IC0gYmluX21pbikgLyAyICsgYmluX21pbik7CiAgICAgICAgfQogICAgICAgIC8vIFVzZSB0aGUgcmVzdWx0IGZyb20gdGhpcyBpdGVyYXRpb24gYXMgdGhlIG1heGltdW0gZm9yIHRoZSBuZXh0LgogICAgICAgIGJpbl9tYXggPSBiaW5fbWlkOwogICAgICAgIHZhciBzdGFydCA9IE1hdGgubWF4KDEsIGxvYyAtIGJpbl9taWQgKyAxKTsKICAgICAgICB2YXIgZmluaXNoID0gTWF0aC5taW4obG9jICsgYmluX21pZCwgdGV4dC5sZW5ndGgpICsgcGF0dGVybi5sZW5ndGg7CgogICAgICAgIHZhciByZCA9IEFycmF5KGZpbmlzaCArIDIpOwogICAgICAgIHJkW2ZpbmlzaCArIDFdID0gKDEgPDwgZCkgLSAxOwogICAgICAgIGZvciAodmFyIGogPSBmaW5pc2g7IGogPj0gc3RhcnQ7IGotLSkgewogICAgICAgICAgICAvLyBUaGUgYWxwaGFiZXQgKHMpIGlzIGEgc3BhcnNlIGhhc2gsIHNvIHRoZSBmb2xsb3dpbmcgbGluZSBnZW5lcmF0ZXMKICAgICAgICAgICAgLy8gd2FybmluZ3MuCiAgICAgICAgICAgIHZhciBjaGFyTWF0Y2ggPSBzW3RleHQuY2hhckF0KGogLSAxKV07CiAgICAgICAgICAgIGlmIChkID09PSAwKSB7ICAgIC8vIEZpcnN0IHBhc3M6IGV4YWN0IG1hdGNoLgogICAgICAgICAgICAgICAgcmRbal0gPSAoKHJkW2ogKyAxXSA8PCAxKSB8IDEpICYgY2hhck1hdGNoOwogICAgICAgICAgICB9IGVsc2UgeyAgICAvLyBTdWJzZXF1ZW50IHBhc3NlczogZnV6enkgbWF0Y2guCiAgICAgICAgICAgICAgICByZFtqXSA9ICgoKHJkW2ogKyAxXSA8PCAxKSB8IDEpICYgY2hhck1hdGNoKSB8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCgobGFzdF9yZFtqICsgMV0gfCBsYXN0X3JkW2pdKSA8PCAxKSB8IDEpIHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0X3JkW2ogKyAxXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocmRbal0gJiBtYXRjaG1hc2spIHsKICAgICAgICAgICAgICAgIHZhciBzY29yZSA9IG1hdGNoX2JpdGFwU2NvcmVfKGQsIGogLSAxKTsKICAgICAgICAgICAgICAgIC8vIFRoaXMgbWF0Y2ggd2lsbCBhbG1vc3QgY2VydGFpbmx5IGJlIGJldHRlciB0aGFuIGFueSBleGlzdGluZyBtYXRjaC4KICAgICAgICAgICAgICAgIC8vIEJ1dCBjaGVjayBhbnl3YXkuCiAgICAgICAgICAgICAgICBpZiAoc2NvcmUgPD0gc2NvcmVfdGhyZXNob2xkKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gVG9sZCB5b3Ugc28uCiAgICAgICAgICAgICAgICAgICAgc2NvcmVfdGhyZXNob2xkID0gc2NvcmU7CiAgICAgICAgICAgICAgICAgICAgYmVzdF9sb2MgPSBqIC0gMTsKICAgICAgICAgICAgICAgICAgICBpZiAoYmVzdF9sb2MgPiBsb2MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiBwYXNzaW5nIGxvYywgZG9uJ3QgZXhjZWVkIG91ciBjdXJyZW50IGRpc3RhbmNlIGZyb20gbG9jLgogICAgICAgICAgICAgICAgICAgICAgICBzdGFydCA9IE1hdGgubWF4KDEsIDIgKiBsb2MgLSBiZXN0X2xvYyk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxyZWFkeSBwYXNzZWQgbG9jLCBkb3duaGlsbCBmcm9tIGhlcmUgb24gaW4uCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyBObyBob3BlIGZvciBhIChiZXR0ZXIpIG1hdGNoIGF0IGdyZWF0ZXIgZXJyb3IgbGV2ZWxzLgogICAgICAgIGlmIChtYXRjaF9iaXRhcFNjb3JlXyhkICsgMSwgbG9jKSA+IHNjb3JlX3RocmVzaG9sZCkgewogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgbGFzdF9yZCA9IHJkOwogICAgfQoKICAgIHJldHVybiAoYmVzdF9sb2MgPCAwKSA/IGZhbHNlIDogdHJ1ZTsKfTsKCgovKioqLyB9KQovKioqKioqLyBdKTs="},{"meta":{"name":"jquery.checkboxes-1.2.2.min.js","url":"https://github.com/rmariuzzo/checkboxes.js/releases/download/v1.2.2/jquery.checkboxes-1.2.2.min.js","ts":1608308702203,"mimetype":"text/javascript"},"source":"LyohIGNoZWNrYm94ZXMuanMgdjEuMi4yIHwgKGMpIDIwMTMgLSAyMDE4IFJ1YmVucyBNYXJpdXp6byB8IGh0dHA6Ly9naXRodWIuY29tL3JtYXJpdXp6by9jaGVja2JveGVzLmpzL0xJQ0VOU0UgKi8idXNlIHN0cmljdCI7ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9dmFyIF9jcmVhdGVDbGFzcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiKXtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtkLmVudW1lcmFibGU9ZC5lbnVtZXJhYmxlfHwhMSxkLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gZCYmKGQud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGQua2V5LGQpfX1yZXR1cm4gZnVuY3Rpb24oYixjLGQpe3JldHVybiBjJiZhKGIucHJvdG90eXBlLGMpLGQmJmEoYixkKSxifX0oKTshZnVuY3Rpb24oYSl7dmFyIGI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGEpe19jbGFzc0NhbGxDaGVjayh0aGlzLGIpLHRoaXMuJGNvbnRleHQ9YX1yZXR1cm4gX2NyZWF0ZUNsYXNzKGIsW3trZXk6ImNoZWNrIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuJGNvbnRleHQuZmluZCgiOmNoZWNrYm94IikuZmlsdGVyKCI6bm90KDpkaXNhYmxlZCkiKS5maWx0ZXIoIjp2aXNpYmxlIikucHJvcCgiY2hlY2tlZCIsITApLnRyaWdnZXIoImNoYW5nZSIpfX0se2tleToidW5jaGVjayIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLiRjb250ZXh0LmZpbmQoIjpjaGVja2JveDp2aXNpYmxlIikuZmlsdGVyKCI6bm90KDpkaXNhYmxlZCkiKS5wcm9wKCJjaGVja2VkIiwhMSkudHJpZ2dlcigiY2hhbmdlIil9fSx7a2V5OiJ0b2dnbGUiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy4kY29udGV4dC5maW5kKCI6Y2hlY2tib3g6dmlzaWJsZSIpLmZpbHRlcigiOm5vdCg6ZGlzYWJsZWQpIikuZWFjaChmdW5jdGlvbihiLGMpe3ZhciBkPWEoYyk7ZC5wcm9wKCJjaGVja2VkIiwhZC5pcygiOmNoZWNrZWQiKSl9KS50cmlnZ2VyKCJjaGFuZ2UiKX19LHtrZXk6Im1heCIsdmFsdWU6ZnVuY3Rpb24oYSl7aWYoYT4wKXt2YXIgYj10aGlzO3RoaXMuJGNvbnRleHQub24oImNsaWNrLmNoZWNrYm94ZXMubWF4IiwiOmNoZWNrYm94IixmdW5jdGlvbigpe2IuJGNvbnRleHQuZmluZCgiOmNoZWNrZWQiKS5sZW5ndGg9PT1hP2IuJGNvbnRleHQuZmluZCgiOmNoZWNrYm94Om5vdCg6Y2hlY2tlZCkiKS5wcm9wKCJkaXNhYmxlZCIsITApOmIuJGNvbnRleHQuZmluZCgiOmNoZWNrYm94Om5vdCg6Y2hlY2tlZCkiKS5wcm9wKCJkaXNhYmxlZCIsITEpfSl9ZWxzZSB0aGlzLiRjb250ZXh0Lm9mZigiY2xpY2suY2hlY2tib3hlcy5tYXgiKX19LHtrZXk6InJhbmdlIix2YWx1ZTpmdW5jdGlvbihiKXtpZihiKXt2YXIgYz10aGlzO3RoaXMuJGNvbnRleHQub24oImNsaWNrLmNoZWNrYm94ZXMucmFuZ2UiLCI6Y2hlY2tib3giLGZ1bmN0aW9uKGIpe3ZhciBkPWEoYi50YXJnZXQpO2lmKGIuc2hpZnRLZXkmJmMuJGxhc3Qpe3ZhciBlPWMuJGNvbnRleHQuZmluZCgiOmNoZWNrYm94OnZpc2libGUiKSxmPWUuaW5kZXgoYy4kbGFzdCksZz1lLmluZGV4KGQpLGg9TWF0aC5taW4oZixnKSxpPU1hdGgubWF4KGYsZykrMTtlLnNsaWNlKGgsaSkuZmlsdGVyKCI6bm90KDpkaXNhYmxlZCkiKS5wcm9wKCJjaGVja2VkIixkLnByb3AoImNoZWNrZWQiKSkudHJpZ2dlcigiY2hhbmdlIil9Yy4kbGFzdD1kfSl9ZWxzZSB0aGlzLiRjb250ZXh0Lm9mZigiY2xpY2suY2hlY2tib3hlcy5yYW5nZSIpfX1dKSxifSgpLGM9YS5mbi5jaGVja2JveGVzO2EuZm4uY2hlY2tib3hlcz1mdW5jdGlvbihjKXt2YXIgZD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihlLGYpe3ZhciBnPWEoZiksaD1nLmRhdGEoImNoZWNrYm94ZXMiKTtofHxnLmRhdGEoImNoZWNrYm94ZXMiLGg9bmV3IGIoZykpLCJzdHJpbmciPT10eXBlb2YgYyYmaFtjXSYmaFtjXS5hcHBseShoLGQpfSl9LGEuZm4uY2hlY2tib3hlcy5Db25zdHJ1Y3Rvcj1iLGEuZm4uY2hlY2tib3hlcy5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4uY2hlY2tib3hlcz1jLHRoaXN9O3ZhciBkPWZ1bmN0aW9uKGIpe3ZhciBjPWEoYi50YXJnZXQpLGQ9Yy5hdHRyKCJocmVmIiksZT1hKGMuZGF0YSgiY29udGV4dCIpfHxkJiZkLnJlcGxhY2UoLy4qKD89I1teXHNdKyQpLywiIikpLGY9Yy5kYXRhKCJhY3Rpb24iKTtlJiZmJiYoYy5pcygiOmNoZWNrYm94Iil8fGIucHJldmVudERlZmF1bHQoKSxlLmNoZWNrYm94ZXMoZikpfSxlPWZ1bmN0aW9uKCl7YSgiW2RhdGEtdG9nZ2xlXj1jaGVja2JveGVzXSIpLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1hKHRoaXMpLGM9Yi5kYXRhKCk7ZGVsZXRlIGMudG9nZ2xlO2Zvcih2YXIgZCBpbiBjKWIuY2hlY2tib3hlcyhkLGNbZF0pfSl9O2EoZG9jdW1lbnQpLm9uKCJjbGljay5jaGVja2JveGVzLmRhdGEtYXBpIiwiW2RhdGEtdG9nZ2xlXj1jaGVja2JveGVzXSIsZCksYShkb2N1bWVudCkub24oInJlYWR5LmNoZWNrYm94ZXMuZGF0YS1hcGkiLGUpfSh3aW5kb3cualF1ZXJ5KTs="}]},{"name":"饰品比例计算脚本","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["*://www.c5game.com/*","*://buff.163.com/*","*://www.igxe.cn/product/*","*://www.v5fox.com/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null,"orig_connects":["steamcommunity.com"]}},"storage":{"ts":1608309747855,"data":{"version":"s1.9"}},"enabled":true,"position":19,"file_url":"https://greasyfork.org/scripts/35597-c5-extension/code/c5%20extension.user.js","uuid":"a0057b2b-9cbc-4c00-9bbe-b1a670395ba1","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDppbDlk4Hmr5TkvovorqHnrpfohJrmnKwKLy8gQG5hbWVzcGFjZSAgICBvdXQKLy8gQHZlcnNpb24gICAgICAxLjkKLy8gQGRlc2NyaXB0aW9uICDkubDkubDkubAKLy8gQGF1dGhvciAgICAgICBvdXQKLy8gQGljb24gICAgICAJaHR0cHM6Ly9zdG9yZS5zdGVhbXBvd2VyZWQuY29tL2Zhdmljb24uaWNvCi8vIEBtYXRjaCAgICAgICAgKjovL3d3dy5jNWdhbWUuY29tLyoKLy8gQG1hdGNoICAgICAgICAqOi8vYnVmZi4xNjMuY29tLyoKLy8gQG1hdGNoICAgICAgICAqOi8vd3d3LmlneGUuY24vcHJvZHVjdC8qCi8vIEBtYXRjaCAgICAgICAgKjovL3d3dy52NWZveC5jb20vKgovLyBAZ3JhbnQgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0Ci8vIEBncmFudCAgICAgICAgR01fYWRkU3R5bGUKLy8gQGdyYW50ICAgICAgICBHTV9vcGVuSW5UYWIKLy8gQGdyYW50ICAgICAgICBHTV9ub3RpZmljYXRpb24KLy8gQGdyYW50ICAgICAgICBHTV9nZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgIEdNX3NldFZhbHVlCi8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly9jZG4uYm9vdGNzcy5jb20vanF1ZXJ5LzIuMi40L2pxdWVyeS5taW4uanMKLy8gQGNvbm5lY3QgICAgICBzdGVhbWNvbW11bml0eS5jb20KLy8gQHN1cHBvcnRVUkwgICBodHRwczovL3N0ZWFtY24uY29tL3QzMzEzOTctMS0xCgovLyA9PS9Vc2VyU2NyaXB0PT0KY29uc3QgJCA9IHdpbmRvdy5qUXVlcnk7CnZhciBzaXRlOwp2YXIgbG93Owp2YXIgaGlnaDsKKGZ1bmN0aW9uKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8vIFlvdXIgY29kZSBoZXJlLi4uCiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpewogICAgICAgIHN0YXJ0KHF1ZXJ5KTsKICAgIH0pOwp9KSgpOwpmdW5jdGlvbiBzdGFydCgpewogICAgdmFyIG5hbWUsYXBwaWQ7CiAgICBpZigkKCIuc3RlYW1VcmwiKS5sZW5ndGghPT0gMCl7CiAgICAgICAgc2l0ZSA9ICJjNSI7CiAgICAgICAgcXVlcnkoJCgiLnN0ZWFtVXJsIGEiKS5hdHRyKCJocmVmIikpOwogICAgfWVsc2UgaWYoJCgnZGl2LmRldGFpbC1zdW1tID4gYScpLmxlbmd0aCAhPT0gMCl7CiAgICAgICAgc2l0ZSA9ICJidWZmIjsKICAgICAgICBxdWVyeSgkKCdkaXYuZGV0YWlsLXN1bW0gPiBhJykuYXR0cigiaHJlZiIpKTsKICAgIH1lbHNlIGlmKCQoJ2Rpdi5wcm9kdWN0SW5mbycpLmxlbmd0aCAhPT0gMCl7CiAgICAgICAgbmFtZSA9ICQoJy5wcm9kdWN0SW5mbyAubmFtZScpLnRleHQoKTsKICAgICAgICBhcHBpZCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLm1hdGNoKC9wcm9kdWN0XC8oXGQrKS8pWzFdOwogICAgICAgIHNpdGUgPSAiaWciOwogICAgICAgIGdldEl0ZW1VcmwoYXBwaWQsbmFtZSk7CiAgICB9ZWxzZSBpZigkKCdkaXYuZ29vZHMtZGV0YWlscy1yJykubGVuZ3RoICE9PTApewogICAgICAgIHNpdGU9InY1IjsKICAgICAgICBuYW1lID0gJCgnLmdvb2RzLWRldGFpbHMtciAubDpmaXJzdCBlbScpLnRleHQoKTsKICAgICAgICBzd2l0Y2goJCgnLmNydW1icyBhOmxhc3QnKS5hdHRyKCdocmVmJykpewogICAgICAgICAgICBjYXNlICIvZG90YTIiOgogICAgICAgICAgICAgICAgYXBwaWQ9NTcwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgIi9oMXoxL2tvdGsiOgogICAgICAgICAgICAgICAgYXBwaWQ9NDMzODUwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgIi9jc2dvIjoKICAgICAgICAgICAgICAgIGFwcGlkPTczMDsKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgfQoKICAgICAgICBpZihhcHBpZCAmJiBuYW1lKXsKICAgICAgICAgICAgZ2V0SXRlbVVybChhcHBpZCxuYW1lKTsKICAgICAgICB9CiAgICB9Cn0KCmZ1bmN0aW9uIGdldEl0ZW1VcmwoYXBwaWQsbmFtZSl7CiAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgbWV0aG9kOiAiR0VUIiwKICAgICAgICByZXNwb25zZVR5cGU6ICJqc29uIiwKICAgICAgICB1cmw6ICJodHRwczovL3N0ZWFtY29tbXVuaXR5LmNvbS9tYXJrZXQvc2VhcmNoL3JlbmRlci8/Y291bnQ9MSZxPSZhcHBpZD0iICsgYXBwaWQgKyAiJm5vcmVuZGVyPTEmcXVlcnk9IiArIG5hbWUsCiAgICAgICAgdGltZW91dDo1MDAwLAogICAgICAgIG9ubG9hZDogZnVuY3Rpb24ocmVzKXsKICAgICAgICAgICAgaWYocmVzJiZyZXMucmVzcG9uc2UpewogICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gcmVzLnJlc3BvbnNlOwogICAgICAgICAgICAgICAgaWYocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5yZXN1bHRzLmxlbmd0aCA+IDApewogICAgICAgICAgICAgICAgICAgIHF1ZXJ5KCJodHRwczovL3N0ZWFtY29tbXVuaXR5LmNvbS9tYXJrZXQvbGlzdGluZ3MvIiArIGFwcGlkICsgIi8iICsgcmVzcG9uc2UucmVzdWx0c1swXS5oYXNoX25hbWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7Cn0KCmZ1bmN0aW9uIHF1ZXJ5KGl0ZW1VcmwpewogICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgIG1ldGhvZDogIkdFVCIsCiAgICAgICAgdXJsOiBpdGVtVXJsLAogICAgICAgIHRpbWVvdXQ6NTAwMCwKICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uKHJlcyl7CiAgICAgICAgICAgIGlmKHJlcy5zdGF0dXMgPT0gIjIwMCIgJiZyZXMucmVzcG9uc2VUZXh0IT09Im51bGwiKXsKICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICB2YXIgZ19zZXNzaW9uSUQgPSByZXMucmVzcG9uc2VUZXh0Lm1hdGNoKC9nX3Nlc3Npb25JRCA9ICIoW14iXSspIi8pWzFdOwogICAgICAgICAgICAgICAgICAgIHZhciBnX3dhbGxldEN1cnJlbmN5ID0gcGFyc2VJbnQocmVzLnJlc3BvbnNlVGV4dC5tYXRjaCgvIndhbGxldF9jdXJyZW5jeSI6KFxkKykvKVsxXSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGdfc3RyTGFuZ3VhZ2UgPSByZXMucmVzcG9uc2VUZXh0Lm1hdGNoKC9nX3N0ckxhbmd1YWdlID0gIihbXiJdKykiLylbMV07CiAgICAgICAgICAgICAgICAgICAgdmFyIGdfc3RyQ291bnRyeUNvZGUgPSByZXMucmVzcG9uc2VUZXh0Lm1hdGNoKC9nX3N0ckNvdW50cnlDb2RlID0gIihbXiJdKykiLylbMV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaChlcnIpewogICAgICAgICAgICAgICAgICAgIHN0ZWFtbG9naW4oKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgICAgIHZhciBuYW1laWQgPSByZXMucmVzcG9uc2VUZXh0Lm1hdGNoKC9NYXJrZXRfTG9hZE9yZGVyU3ByZWFkXCggKFxkKykvKVsxXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoKGVycil7CiAgICAgICAgICAgICAgICAgICAgaWYocmVzLnJlc3BvbnNlVGV4dC5pbmRleE9mKCdtYXJrZXRfbGlzdGluZ19uYXZfY29udGFpbmVyJykgIT0gLTEpewogICAgICAgICAgICAgICAgICAgICAgICBzdGVhbXhqKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6NTAwMCwKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgICAgICAgICAgIHVybDogImh0dHBzOi8vc3RlYW1jb21tdW5pdHkuY29tL21hcmtldC9pdGVtb3JkZXJzaGlzdG9ncmFtP2NvdW50cnk9IiArIGdfc3RyQ291bnRyeUNvZGUgKyAiJmxhbmd1YWdlPSIgKyBnX3N0ckxhbmd1YWdlICsgIiZjdXJyZW5jeT0iICsgZ193YWxsZXRDdXJyZW5jeSArICImaXRlbV9uYW1laWQ9IiArIG5hbWVpZCwKICAgICAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICJqc29uIiwKICAgICAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uKGRhdGEpewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gZGF0YS5yZXNwb25zZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYob2JqKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFvYmoubG93ZXN0X3NlbGxfb3JkZXImJiFvYmouaGlnaGVzdF9idXlfb3JkZXIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBHTV9hZGRTdHlsZShgLnByaWNlID4gZGl2eyBtYXJnaW4tdG9wOjRweDtmb250LXNpemU6MTZweDsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmxzLCAuaGIge2NvbG9yOiNlNDY0MDk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5sc25mLCAuaGJuZiB7Y29sb3I6IzdjY2MzNTsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmxzciwgLmhiciB7Y29sb3I6IzFlZTQ0YTsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnByaWNlID4gZGl2ID4gc3BhbnsgdGV4dC1hbGlnbjpjZW50ZXI7ZGlzcGxheTotbW96LWlubGluZS1ib3g7IGRpc3BsYXk6aW5saW5lLWJsb2NrOyB3aWR0aDo5MHB4O30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aXRsZSB7IGZvbnQtc2l6ZToxNHB4OyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGl0bGUgPiBzdHJvbmc6bnRoLWNoaWxkKDEpIHsgbWFyZ2luLWxlZnQ6ODBweDsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRpdGxlID4gc3Ryb25nOm50aC1jaGlsZCgyKSB7IG1hcmdpbi1sZWZ0OjYwcHg7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZmtvdXQgeyBmbG9hdDpsZWZ0O3dpZHRoOjI4MHB4OyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWZrb3V0IHN0cm9uZyB7IGNvbG9yOiNhZmIwYjI7Zm9udC1zaXplOiAxNXB4fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHBpbmZvID0gJChgPGRpdiBjbGFzcz0iYWZrb3V0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0aXRsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz7lh7rllK48L3N0cm9uZz48c3Ryb25nPuaxgui0rTwvc3Ryb25nPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InByaWNlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxzdHJvbmc+5Lu35qC877yaPC9zdHJvbmc+PHNwYW4gY2xhc3M9ImxzIj48L3NwYW4+PHNwYW4gY2xhc3M9ImhiIj48L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48c3Ryb25nPueojuWQju+8mjwvc3Ryb25nPjxzcGFuIGNsYXNzPSJsc25mIj48L3NwYW4+PHNwYW4gY2xhc3M9ImhibmYiPjwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxzdHJvbmc+5q+U5L6L77yaPC9zdHJvbmc+PHNwYW4gY2xhc3M9ImxzciI+PC9zcGFuPjxzcGFuIGNsYXNzPSJoYnIiPjwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzaXRlPT0iYzUiKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHTV9hZGRTdHlsZShgIC5oZXJvIC5mdC1vcmFuZ2V7IGRpc3BsYXk6bm9uZSB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGVybyB7IHBvc2l0aW9uOnVuc2V0ICFpbXBvcnRhbnQ7IG1hcmdpbjowcHggfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWUgPiBzcGFuOmZpcnN0LWNoaWxkIHsgd2lkdGg6Zml0LWNvbnRlbnQgIWltcG9ydGFudDsgZGlzcGxheTogaW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFma291dCB7IG1hcmdpbi10b3A6NXB4OyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCIuaGVybyIpLmJlZm9yZSgkcGluZm8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoc2l0ZT09ImJ1ZmYiKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHTV9hZGRTdHlsZShgIC5kZXRhaWwtY29udCA+IGRpdi5ibGFuazIwIHsgaGVpZ2h0OjVweDt9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZGV0YWlsLXN1bW0gc3BhbiB7IGRpc3BsYXk6bm9uZTsgbWFyZ2luLXJpZ2h0OjBweDsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi5kZXRhaWwtc3VtbSBhIHsgZmxvYXQ6cmlnaHQgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgiZGl2LmRldGFpbC1zdW1tIikucHJlcGVuZCgkcGluZm8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoIi5idXlpbmcsIC5zZWxsaW5nLCAuaGlzdG9yeSIpLmNsaWNrKGNhbGNyYXRpbyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihzaXRlPT0iaWciKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHTV9hZGRTdHlsZShgIC5wcm9wb3NlZFByaWNlLCAuYXZlcmFnZVByaWNlIHsgZGlzcGxheTpub25lIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5ibnRzIHsgZmxvYXQ6bGVmdDttYXJnaW4tdG9wOjBweCB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3RlYW1VcmwgYSB7IGNvbG9yOiMwYjg0ZDM7IGZvbnQtc2l6ZToxNnB4IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZmtvdXQsIC5zdGVhbVVybCwgLnJhcml0eSB7IG1hcmdpbi10b3A6MTVweDsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgiZGl2LnJhcml0eTpsYXN0IikuYWZ0ZXIoJHBpbmZvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcucHJvZHVjdEluZm8gLm5hbWUnKS5hZnRlcigkKCc8ZGl2IGNsYXNzPSJzdGVhbVVybCI+PGEgdGFyZ2V0PSJfYmxhbmsiPnN0ZWFt5biC5Zy66ZO+5o6lPC9hPjwvZGl2PicpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCIuc3RlYW1VcmwgYSIpLmF0dHIoImhyZWYiLGl0ZW1VcmwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoc2l0ZT09InY1Iil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR01fYWRkU3R5bGUoYCAuZ29vZHMtZGV0YWlscy1yIGg0LCAuZ29vZHMtZGV0YWlscy1yIGg1IHsgZGlzcGxheTpub25lIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdGVhbVVybCBhIHsgY29sb3I6IzBiODRkMzsgZm9udC1zaXplOjE2cHggO2Zsb2F0OnJpZ2h0IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5nb29kcy1kZXRhaWxzLXIgLmNsZWFyZml4JykuYWZ0ZXIoJCgnPGRpdiBjbGFzcz0ic3RlYW1VcmwiPjxhIHRhcmdldD0iX2JsYW5rIj5zdGVhbeW4guWcuumTvuaOpTwvYT48L2Rpdj4nKSkuYWZ0ZXIoJHBpbmZvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCIuc3RlYW1VcmwgYSIpLmF0dHIoImhyZWYiLGl0ZW1VcmwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9iai5sb3dlc3Rfc2VsbF9vcmRlcil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxvd2VzdF9zZWxsX29yZGVyID0gcGFyc2VJbnQob2JqLmxvd2VzdF9zZWxsX29yZGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCJzcGFuLmxzIikudGV4dChvYmoucHJpY2VfcHJlZml4ICsgIiAiICsgbG93ZXN0X3NlbGxfb3JkZXIvMTAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbHNub2ZlZSA9IGNhbGNmZWUobG93ZXN0X3NlbGxfb3JkZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoInNwYW4ubHNuZiIpLnRleHQob2JqLnByaWNlX3ByZWZpeCArICIgIiArIGxzbm9mZWUvMTAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihvYmouaGlnaGVzdF9idXlfb3JkZXIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoaWdoZXN0X2J1eV9vcmRlciA9IHBhcnNlSW50KG9iai5oaWdoZXN0X2J1eV9vcmRlcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgic3Bhbi5oYiIpLnRleHQob2JqLnByaWNlX3ByZWZpeCArICIgIiArIGhpZ2hlc3RfYnV5X29yZGVyLzEwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhibm9mZWUgPSBjYWxjZmVlKGhpZ2hlc3RfYnV5X29yZGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCJzcGFuLmhibmYiKS50ZXh0KG9iai5wcmljZV9wcmVmaXggKyAiICIgKyBoYm5vZmVlLzEwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoR01fZ2V0VmFsdWUoInZlcnNpb24iLCIwIikgIT0gR01faW5mby5zY3JpcHQudmVyc2lvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJ2ZXJzaW9uIixHTV9pbmZvLnNjcmlwdC52ZXJzaW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGV0YWlscyA9IHt0ZXh0OiAi5aaC5p6c5pyJ55So6K+35biu5b+Z5Yqg54K55L2T5YqbKOeCuei/memHjClcclxu5o+Q5LqkQlVH6K+36ZmE5LiKY29uc29sZei+k+WHuiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICJDNeavlOS+i+iEmuacrCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2U6ICJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUtnQUFBQ29DQVlBQUFCMFM2VzBBQUFQZDBsRVFWUjRuTzJkMlhOYzFSSEdlKzVza21YdGtpV01kemJibU9BQVNSVkpLc1ZqS3NsTC90YUVoN3lrcUlTQUtZS053VVpzRXQ2UkpYczAya2JTM0h0bjB0KzVNL1lnWkNQWloyWjY3bnkvcW1PWm9rcWU1YnQ5dXZ0MDk4bGN1cnRldjF1SnBWWVhRc3lRMFJYb0g3a3JEME81dEJ4U29NUWNPUWgwUjVXNUhWT2R4QjZocmlDWHlUaWxFbUlKU0xLUXplZzJqNzlscUZCaUQrZUhkdnRGRVBJMEtGQmlHZ3FVbUlZQ0phYWhRSWxwS0ZCaUdncVVtSVlDSmFhaFFJbHBLRkJpR2dxVW1JWUNKYWJKK2ZwRk9OalBaaHAvSVgwTmFvdnJXQjUrbHhlQm92SzVxT3FjR1Fna3AvL0I0dWYrQlVhcVhLM0phclV1VlE5QzhDTFF2SXB5ZGpDUVB4OHJ5bmdoOFBMa2tONEVHK2luRDBMNTdHRW9EN2FOQ0JTTzdJQStPaWVHc2pJelNMZTIzMW5ZaU5WbytmbGRYbjRObnBPYWoxOUVVZ0g4VDE5dUhzMGRNUTBGU2t4RGdSTFRVS0RFTkJRb01RMEZTa3hEZ1JMVFVLREVOQlFvTVEwRlNreERnUkxUVUtERU5CUW9NUTBGU2t4RGdSTFRVS0RFTkJRb01RMEZTa3hEZ1JMVFVLREVOQlFvTVEwRlNreERnUkxUVUtERU5CUW9NUTBGU2t4RGdSTFRVS0RFTkJRb01RMEZTa3hEZ1JMVFVLREVOQlFvTVEwRlNreERnUkxUVUtERU5CUW9NUTBGU2t4RGdSTHZaRExKN1lNKzhIWlhKK2x2Y0RmU1RxMHVHMkZkMXFvMUNUMWRuRVdCa3VjQ0YzWkZxczVLSkhKL3F5YmZyVVh5OVdxc0l2VnpreGNGU3A2TE5UV1Y4K3V4WEhrWXlmVnlLRHV4dUV0a1kxcFEwaTFnTlNIQ0wxU1VYNVlqdWJVWnV4dU8xM1I3cjN1K1NaZ0NKUWVpRXRYbFI5M0s1MVNZY3cxeHJvZnR1OSthQWlYN0JoYnlCOTNPUHk4bDEyMXY2bi9IYmI1N25RSWwrMkpibGZpVldzd1A3MWZsMmtyVXNYK1hBaVg3NHNQRnFueThITG90dlpOUW9PU3BJRjMwcVFyem82VlE3bTM1eTIvdUZ3cVVQSkd5aWhPQjBIOTBXMGRnaEVSOHA2RkF5WjVzcWMrNXNCN0pSOHRWdWRIaGJiMFZuc1dUbndFN2VXZXpKcGVSNXl4MUxpRGFDd3FVL0F4RTdQOTdFTHAwVXJlaFFNbFBnUFZFVUlRemRTVGx1dzE5VVBLSVNDUDAxV3BOcnVpMmpzS1BMc1JFUDRNV2xEd0NnUkVxa1c1dHhMSnB3SG9DQ3BRNElFY2NaU0pxdHlKT3dDMmVPTFpRQkZLSjVkdlZ5RzMxVnFCQWlhTzBYWk41RldlblQ0cCtDVzd4eEZIUzRPaUhqZTRsNUo4RUJVcWMxU3hWNis2czNSb1VLSEVGeHcrMms0cDRhMUNnUkZaMGV5OTdhbkx6RFFWS1pGWEZhZEY2QWk5UlBOcE9TenMxdVZhT1pDdk95bFF4a01ONVQ1MzdwTzFzcUJPNmFTMThiK0JIb0hDeVZhRC92VitWZTVXc25ENmNsUmVIc2pLcUloM1dsUXN5UXJuYVpTdEdnVWkzWDhYZWVNdURvZzk2WVQxMmEwUkZlV280SnhmR2N2TGFhRlltQ29FVXMrS0U2bXNrQ3ZGSFdLdTdaWkcySk9vM0lsUmloL0w5V3FSV05KQlhoZ041WGNYNjhsaGVKb3RVcURYQ3VNOEVpdmVLaFRkZGpXT3BxQTl3YzdNbVU2VklYaHJPeXBtR0N6Qk1QN1dyUUpLM2RNZTdXNG1kVWJGSTI0ODY4YjVYTVZBcWpHVlJIWjFGL1RBVzFySnlYRVY2N0ZBZ3M0T0JUT3ZLMDAvdEtEQWdxRjc2ZUxucWpJZlJHS2x6Wi9GNFBqRzM1MjZsNXRhM3V2MGZQWlIxRnZXVXJ1bUJRTWJVVngzS1pWU3NuWHBWL1lzcnJTdEhjbGwzdFFjN1J0VXBYU3dXUWQ1dGJUVnlRaDNLQm5KMkxDc1h4bk55Um9NcitLbXdxRGtWS3EycWZ6QU5CQVhKLzdoVGxmS08vM2xLUHVsNk5STzJtZzMxVWErV2tza1ZVMnBKWHh2TnlSc3FWbGpYUXpsSzFEZndPVDlaRHVYMlJ0VDIwVFhQUzljRkN2QVpZVnBhVlhlYVVMZi85VERwaVRtaGdkUko5VlZQdWFBcWtDSnpWTThOenQyLzBaMExUWEZHNDZLZllFS2dyVUNvcFIwc2NRVU1hRC80WG4zVjR5cFFSUDRJcXNZS0dTbFFyTS9FMXlyT3ErcDNQalRzZDdaaVRxQ3Q0R2xmMStqLzltWXNjK1hBV2RNenc4Z0FCSEprSURtcEdzb3ordDhQTUphTEZmUzZJejl0OU5ob0Qwd0x0QW0ySWxUY3JKUnFybGY3QmJXb09LRkM4di9Wa2F3VXNocFVaVEtTWlZDMUp3aUMwT3Yrd1dKVlhhZlkvYjFYNkFtQjdtWnBLM1puLzUrck5aalZvT3JDZUY3T3FsaVBIZ29ZVk8wQit0dm5Wa0xkMmtQM3VmVVNQU2xRR0lBNHhpa1ZMRU5OU3RXcUcwVjlWUDFUZDFJMW5KT3BnWXl6clAwT1R2UHVhTlQrL3QycUU2ZlJFODBuMHBNQ2JZTFBHdHNWRnBMTlAxWXlja2Y5MVc5MEd6dUJ5SDh3T2FtYUdPamZ6UDg5OVRzLzFZZ2RBOEFzNXp1ZlJFOEx0QlZZaHJYR2tlcDM2N0VjV1ExY2Vnb1c5YVN1MFVMZ3Fxd0cxS3IyaTJFdDYwTjdmU1Z5UThCNlVad2dOUUxkemRKMnphM1BTMG55SDRuL2N3MC9GVUxGU1ZXYWhRbzM2SnErOTZzUGU4L3ZiQ1cxQW0wQ0greCtJNmpDVm9may8za1ZLaklBTDZoWTA1aE9oYlhFYWRGbHRaN3pYWnp0NllQVUN4UTcyNk9nU3NXNkV5ZUNSVVI3dkpGWFBhV2luUnlBUmUxOXRjTFYyZFQzK0s5N1ZYY2poNlVwSWM5QzZnWGFpdnZ5b3JwYjJQNHgxaG9uVmNkVm9NZUdBbGRkaGFCcU1OdTdsZjg0M0xpc0R4L3FHdGFzMXRBZGdMNFNhQ3V3cXRqMnNUQlI0OGhBRWxTOXJCWjFScmYrY1EycWhodEJWYStBRWpvOGNQOWVyTG8yNGg3S3h6K1J2aFZvS3hpY2RYTWpHVHQ0YVNralowYXljbTQwNmFjNnB0WVZ1Zis4OFg0cStKMC9ObzR5c2JXbkJRcTBoV1pWRlhxcGJrQ3N5eG1YOUQvZk9GSWRMd1ptSTMrMGJHQmJ2L1NnKzJPN2ZVS0I3Z0lpaGV2VzdIVGNqRUpuWFQ4YmZKeFhoVlVkVnJOcUthYjZUSVVKNjduZEN6VjBCNEFDZlFySlNPeTZyamdKcWlxSnY0cEFDdW1xRi9RbmNxeERYVHovUitDSDZxUXZWaUozYXBRdWVYb1NLQ3dKcW9ud002cWx3em5mRGRKVDl5cXhHL0thejRvY1A1U2txRTRQUDA3K2orU0RqbFpVdVliRWFrMCtXcW82bDZTWHFwVDJpeGVCd29DTUY1TXBJczA1UDJrVnF2TlROUWFaMTBBRWE3d1l1VWtxQ0twZUg5T3R2em1rSXRQZW9BcXZZME0vNXkvVmNsNHBoZTV6VHlOZUJJb0lkM1l3SzM4N1dYVHBEWHhvcU55KzIrT25HUHNCRnV6YVN0Mk56djVnTVhEQjFPdm9weHJKeVhpaGZRcUYrNEhUb3IvZjNuRkNUU3RlQklvVUJ3YUlvUllUN2NQSUtWNmN5TG5nd2tYRUtsUTg0YjFhc1BBMDRBTlc2MGsvRlVyL2NBaXc0UEtxb1hNQlhobHBUNTBxcmluRUhab29DRW5qVHRYRWowQWw4WWNnUUFRTVdCQXBnZ2lVdmFGbEEvN2I0bFlTYU1CWDZyVzZ4UDJBaHhRN1NMa3F5WHZWaFp3a1BnT0lkR1l3NmYvUEg4QlBoWFhFZ3ZBcmNkMVpUbHpxaXNZMzlMV25XWnlnYlZFOGV0b1I0V0s5b3RzZW9tQjhXWWc0OGVXdDZKT1AzTjFPU2o5aHZDL1VwbUkxaDFTY2FTbW14c3lxUTduRVBXb0ZBc1NKRUZ3SGZENUwrbG1oZWRENTloR0t0T3Z1LzZPeDBPclFXWjkwSk0yRXMrMlRRMWs1b1YvUzc2YlZYMU9SWGk5SDdpZEc0U0R2Q091VFJxc0tFcXNhT1Q5MUpCKzY5cFR6WThsRWxjbEM4T2lVQ25sWFhHWndjeU9wNDBUck5ZUllUZXNIc3c4Nm1nZDE2U2dWS3dZendKcmdIQnpqR3AxWVYyTlgzSkJTZytxQUcxVFc5NGlrK2xYWC9CZTRVNm8zMVY4ZlZvdjZGU0p5SEZXcTFjV1lJR1JDK2xpYmpvNG42ckdod1FlRDFjZ0hTVUVHTE1uRmlacnpWWkVJdjZVL04xTWFtVUp3TzdwYm9JYjQ5aWEyN2xEbTlBSEZMZ05yaWU1Vk5MbWw4OTBmbks2ZUpFR2tvd1VzY1dQRFVmWjJaamp4Mi9EbEljaUFsVTFqQWhyQVQxM0cyaFozeGcveHB2T2RQanRtampxUmhzRkN0SHRXWFFBSWRINDljcWtxQkZYWS9uRUFrTVpVRlVqcE0vamNtQkZvRXdRTHVJRGhuQVlSV011NG9nOStxdnBuMTFkUkRKRlVITVdOdEJaSk4rWUV1cHRKM2ZyaEJxRGg3YjN0Z2x6VElHSk9vK0hiVzdYVStxbmtNZVlGQ290YXlDUkRiUWV5Z1l6a0NuSnVQT2ZtVzk1QVhyWGhBcVExbjlwcjRLS01YTU9mOXBFZU15L1FKb2orTVg1eGVqQWprd1BvSDZxN29PcWxSbDlSODZUcVljcVAvcXlDSUc5SS83Z3drWFBYMnFBT1kybTdqd1RhU3ROUFBaeFBrdDFvemJpOVVYUG4wNWkzRHBIaUpBYXRIQ21yM3pVSlJtSGlkT3pjU0U3ZW5jbTdBV1crZXZGN1VxQzdnWitLaGFjWHdwd3J4L0psS1hUNTFIS1lWTWIzZXZ1dFZTQk9aRjdlbnNyTFg0OFYzV0hNL0xxLzFHQXFCTnJFMWFVV0F2bk5WTVpWVStHeUJnUlU2TlZCVlZXL244cjRCanZacnpRZStQMlJ2SnpWbisxb2dVbVZRQUUrdEtMNlFpZ2FQbms0a0lsaVhzNnJDM0Nua25mSHFzaXJvZ0JqaDJwOVp1QnZqaFF5OHU1MHdRa1VQVnFEYmVvbVRKMUFXMEZQT3hhMi85bEdVSVZnNm83NnFSaEplTDl4QU1EdGYvK2dsQkxsZzI5UDV0eUJDc29IaTIxc2RVMjFRSnZBcWlZOVE4bUZERGp2Um9vS2ZUdzMxVTlGT1JzbWNsUVlVVDBWM0dPRnJ0YTNwckN0RnpyeWIvYUZRRnRCUHZWSW8rci90OU41SjFMNHFDall3TitiTGNjOEYzOE1IbkRzUktpNmdqQmZWWmVwVS9TZFFIZHpySEZ6eURzYWhTSjNkNzBjTzdIaWlMV2Y2ekNiNUp5L0djaWZYaXpJR3hONW1TNTJkaGh3M3dzVVgwQXVtOHdMaFgrRjVyODNHLzFVODJ2cUJxeEhzaHIxWjEwbTNLS1hSM0x5aDVtODh6dHhxMHF1dzhPcSsxNmdUZHhKU0tPZmFyb3hPaHhkQVBkME83dFZxYm5nQ2xZMXpSMlVyVFNMcVMrcTFjUkJTTGN1KzZWQTl3QldGZEVwRm9wVTBONjcwT2lEaDFEWEdyMy84RlhUSk5kTVkwZ2FtaDJ4aTd3MW1YZEJaVGVoUUg4QmJHbTRRQXpybmFtNk81MUM2UjlPcTVBTjJJclRNNlFDMDJGbTlLSDh5L0dpU3lGaGkrODJGT2dCd1BiL3F2cGtzQ3AvbksyN0xsV2NWS0VaRG9VcXZRNEUrZDVzd2IzSHcwYnVtNkpBRHdEU0xVRmpHMFRhQlIwQUdDUCs2OGtrcUZwWXI4bU5qY2psVkh1eG1CcHpwVVkxU3RlZzNjd3NWQXIwR2NrK1N2NWpTRVZHam1yMGYvb3dHdit5em1lRlJjVXNBTmNBMXlOaXhYc2F6b3VwR2FnVXFBZFEwVE16aUJXNGlMYzVwaEVMMi85S0QvUzJ1eG9HL1FQRk5wWXVrNkJBUFlPdC83UWJ5NWgxQWRUN3QzZmtrK1ZRbGowVTc3WVR1QzBZSHptV3QzVi9WUC9lRWRnQkVCVmowdDFvRzZmYytRTFZTQlBxcW1Dd2hpRURTb0cyRTJ5YnVPQVdVME9NQk1WUFpFd2ZJbFI3V1h1WkZHZ2JTVnBUQWlkUzNCVnFGVmpNaVdMUTlhVDhYdGo5MUZJQy9Ebk1vY0xwakZXU0dvVEE1R3YwOW9xc2JRMld3TFJsNUV2ejlyNS85NzJoNWdCQjNhQkhQOFRYYi9MeWtlSEZZSE93NUZ4YkFyblMxMGFTQ25ScjRMRGg0bVRlMVJ6NG9ubWc0UU12cnlxczErWCtkazMrZVdmSFBZVzJFeXFkQjFZQU0wTFhEVlpDNFlBV3VWcTB2dmhJMWVLOUl2Kzc1dW05ZWhGb1hFc3VFN2hTaXR5VDB5c25KNTBpMC9oTUxEYnFvU0xyKy9XazlTWDJVRTZBN3gvNTN5MVA3VFBlWnRTalZjSlhzejdwSEdnWVhESDh2UmwwMndsNURBVktURU9CRXROUW9NUTBGQ2d4RFFWS1RFT0JFdE5Rb01RMEZDZ3hEUVZLVEVPQkV0TlFvTVEwRkNneFRZQ1pRalhXeHhHRFlPYVZLL0ozWnBUVjhNUVFtY2FmT2JTYnpneG1KYUlWSlliQU5GTDBjUDBmenN4QUx4WWxIZ2tBQUFBQVNVVk9SSzVDWUlJPSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0OiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDEwMDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdNX25vdGlmaWNhdGlvbihkZXRhaWxzLGZ1bmN0aW9uKCl7IEdNX29wZW5JblRhYigiaHR0cHM6Ly9zdGVhbWNuLmNvbS90MzMxMzk3LTEtMSIsIHsgYWN0aXZlOiB0cnVlIH0pOyB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvdyA9IGxzbm9mZWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdoID0gaGJub2ZlZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGNyYXRpbygpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBvbnRpbWVvdXQ6c3RlYW0zMDIsCiAgICAgICAgICAgICAgICAgICAgb25lcnJvcjogc3RlYW0zMDIKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBvbnRpbWVvdXQ6c3RlYW0zMDIsCiAgICAgICAgb25lcnJvcjogc3RlYW0zMDIKICAgIH0pOwp9CgpmdW5jdGlvbiBzdGVhbTMwMigpewogICAgdmFyICQzMDIgPSAkKCc8ZGl2IHN0eWxlPSJjb2xvcjojRkYwMDAwO21hcmdpbi10b3A6MTVweCI+PHNwYW4gY2xhc3M9ImdseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlIj48L3NwYW4+PHN0cm9uZz7mn6Xor6LotoXml7bvvIzlu7rorq7kvb/nlKg8YSB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iaHR0cHM6Ly9zdGVhbWNuLmNvbS90MzM5NTI3LTEtMSIgc3R5bGU9ImNvbG9yOiMwYjg0ZDMiPlN0ZWFtMzAyPC9hPjwvc3Ryb25nPjwvZGl2PicpOwogICAgaWYoc2l0ZT09ImM1Iil7CiAgICAgICAgJCgiZGl2Lmhlcm8iKS5iZWZvcmUoJDMwMik7CiAgICB9ZWxzZSBpZihzaXRlPT0iYnVmZiIpewogICAgICAgICQoImRpdi5kZXRhaWwtc3VtbSIpLmFwcGVuZCgkMzAyKTsKICAgIH1lbHNlIGlmKHNpdGU9PSJpZyIpewogICAgICAgICQoImRpdi5zdG9jayIpLmFmdGVyKCQzMDIpOwogICAgfWVsc2UgaWYoc2l0ZT09InY1Iil7CiAgICAgICAgJCgnLmdvb2RzLWRldGFpbHMtciAuY2xlYXJmaXgnKS5hZnRlcigkMzAyKTsKICAgIH0KfQoKZnVuY3Rpb24gc3RlYW1sb2dpbigpewogICAgdmFyICRsb2dpbiA9ICQoJzxkaXYgc3R5bGU9ImNvbG9yOiNGRjAwMDA7bWFyZ2luLXRvcDoxNXB4Ij48c3Ryb25nPuivt+eZu+W9lTxhIHRhcmdldD0iX2JsYW5rIiBocmVmPSJodHRwczovL3N0ZWFtY29tbXVuaXR5LmNvbS9sb2dpbi8iIHN0eWxlPSJjb2xvcjojMGI4NGQzIj5zdGVhbeekvuWMujwvYT48L3N0cm9uZz48L2Rpdj4nKTsKICAgIGlmKHNpdGU9PSJjNSIpewogICAgICAgICQoImRpdi5oZXJvIikuYmVmb3JlKCRsb2dpbik7CiAgICB9ZWxzZSBpZihzaXRlPT0iYnVmZiIpewogICAgICAgICQoImRpdi5kZXRhaWwtc3VtbSIpLmFwcGVuZCgkbG9naW4pOwogICAgfWVsc2UgaWYoc2l0ZT09ImlnIil7CiAgICAgICAgJCgiZGl2LnN0b2NrIikuYWZ0ZXIoJGxvZ2luKTsKICAgIH1lbHNlIGlmKHNpdGU9PSJ2NSIpewogICAgICAgICQoJy5nb29kcy1kZXRhaWxzLXIgLmNsZWFyZml4JykuYWZ0ZXIoJGxvZ2luKTsKICAgIH0KfQoKZnVuY3Rpb24gc3RlYW14aigpewogICAgdmFyICR4aiA9ICQoJzxkaXYgc3R5bGU9ImNvbG9yOiNGRjAwMDA7bWFyZ2luLXRvcDoxNXB4Ij48c3Ryb25nPueJqeWTgeS4jeWcqOi0p+aetuS4ijwvc3Ryb25nPjwvZGl2PicpOwogICAgaWYoc2l0ZT09ImM1Iil7CiAgICAgICAgJCgiZGl2Lmhlcm8iKS5iZWZvcmUoJHhqKTsKICAgIH1lbHNlIGlmKHNpdGU9PSJidWZmIil7CiAgICAgICAgJCgiZGl2LmRldGFpbC1zdW1tIikuYXBwZW5kKCR4aik7CiAgICB9ZWxzZSBpZihzaXRlPT0iaWciKXsKICAgICAgICAkKCJkaXYuc3RvY2siKS5hZnRlcigkeGopOwogICAgfWVsc2UgaWYoc2l0ZT09InY1Iil7CiAgICAgICAgJCgnLmdvb2RzLWRldGFpbHMtciAuY2xlYXJmaXgnKS5hZnRlcigkeGopOwogICAgfQp9CgpmdW5jdGlvbiBnZXRGbG9hdChzdHIpewogICAgdHJ5ewogICAgICAgIHZhciBmID0gcGFyc2VGbG9hdChzdHIubWF0Y2goL1tcZF17MSx9KFwuXGQrKT8vKVswXSk7CiAgICB9CiAgICBjYXRjaChlcnIpewogICAgICAgIHJldHVybiAwOwogICAgfQogICAgcmV0dXJuIGY7Cn0KCmZ1bmN0aW9uIGNhbGNmZWUocCl7CiAgICB2YXIgcG5vZmVlID0gTWF0aC5tYXgoTWF0aC5mbG9vcihwLzEuMTUpLDEpOwogICAgdmFyIHZmZWUgPSBNYXRoLm1heChNYXRoLmZsb29yKHBub2ZlZSowLjEpLDEpOwogICAgdmFyIHBmZWUgPSBNYXRoLm1heChNYXRoLmZsb29yKHBub2ZlZSowLjA1KSwxKTsKICAgIHdoaWxlKChwbm9mZWUgKyB2ZmVlICsgcGZlZSkgIT0gcCkgewogICAgICAgIGlmKChwbm9mZWUgKyB2ZmVlICsgcGZlZSkgPiBwKSB7CiAgICAgICAgICAgIHBub2ZlZS0tOwogICAgICAgIH0KICAgICAgICBpZigocG5vZmVlICsgdmZlZSArIHBmZWUpIDwgcCkgewogICAgICAgICAgICBwbm9mZWUrKzsKICAgICAgICB9CiAgICAgICAgdmZlZSA9IE1hdGgubWF4KE1hdGguZmxvb3IocG5vZmVlKjAuMSksMSk7CiAgICAgICAgcGZlZSA9IE1hdGgubWF4KE1hdGguZmxvb3IocG5vZmVlKjAuMDUpLDEpOwogICAgfQogICAgcmV0dXJuIHBub2ZlZTsKfQoKZnVuY3Rpb24gY2FsY3JhdGlvKCl7CiAgICB2YXIgdCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7CiAgICAgICAgdmFyIHNpdGVwcmljZTsKICAgICAgICBpZihzaXRlID09ICJjNSIpewogICAgICAgICAgICBzaXRlcHJpY2UgPSBzaXRlcHJpY2UgPSBnZXRGbG9hdCgkKCJ0Ym9keSAuZnQtb3JhbmdlOmZpcnN0IHNwYW4iKS50ZXh0KCkpOwogICAgICAgICAgICBpZighc2l0ZXByaWNlKXsKICAgICAgICAgICAgICAgIHNpdGVwcmljZSA9IGdldEZsb2F0KCQoInRib2R5IC5mdC1vcmFuZ2U6Zmlyc3QiKS50ZXh0KCkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZighc2l0ZXByaWNlKXsKICAgICAgICAgICAgICAgIHNpdGVwcmljZSA9IGdldEZsb2F0KCQoIi5zYWxlLWl0ZW0tbGlzdHMgc3Bhbi5mdC1nb2xkOmZpcnN0IikudGV4dCgpKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZihzaXRlID09ICJidWZmIil7CiAgICAgICAgICAgIHNpdGVwcmljZSA9IGdldEZsb2F0KCQoInRhYmxlIGEuaV9CdG46Zmlyc3QiKS5hdHRyKCdkYXRhLXByaWNlJykpOwogICAgICAgICAgICBpZighc2l0ZXByaWNlKXsKICAgICAgICAgICAgICAgIHNpdGVwcmljZSA9IGdldEZsb2F0KCQoInRhYmxlIHN0cm9uZy5mX1N0cm9uZzpmaXJzdCIpLnRleHQoKSArICQoInRhYmxlIHN0cm9uZy5mX1N0cm9uZzpmaXJzdCBzbWFsbCIpLnRleHQoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYoc2l0ZSA9PSAiaWciKXsKICAgICAgICAgICAgc2l0ZXByaWNlID0gZ2V0RmxvYXQoJCgidGQgPiBzcGFuLmMtNDpmaXJzdCIpLnRleHQoKSk7CiAgICAgICAgfSBlbHNlIGlmKHNpdGUgPT0gInY1Iil7CiAgICAgICAgICAgIHNpdGVwcmljZSA9IGdldEZsb2F0KCQoInAubGlzdC1wcmk6Zmlyc3QiKS50ZXh0KCkpOwogICAgICAgIH0KCiAgICAgICAgaWYoc2l0ZXByaWNlICE9IDApewogICAgICAgICAgICBpZihsb3cpIHsKICAgICAgICAgICAgICAgICQoInNwYW4ubHNyIikudGV4dCgoc2l0ZXByaWNlKjEwMC9sb3cpLnRvRml4ZWQoMikpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKGhpZ2gpIHsKICAgICAgICAgICAgICAgICQoInNwYW4uaGJyIikudGV4dCgoc2l0ZXByaWNlKjEwMC9oaWdoKS50b0ZpeGVkKDIpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjbGVhckludGVydmFsKHQpOwogICAgICAgIH0KICAgIH0sMjAwKTsKfQ==","requires":[{"meta":{"name":"jquery.min.js","url":"https://cdn.bootcss.com/jquery/2.2.4/jquery.min.js","ts":1608308851202,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2Mi4yLjQgfCAoYykgalF1ZXJ5IEZvdW5kYXRpb24gfCBqcXVlcnkub3JnL2xpY2Vuc2UgKi8KIWZ1bmN0aW9uKGEsYil7Im9iamVjdCI9PXR5cGVvZiBtb2R1bGUmJiJvYmplY3QiPT10eXBlb2YgbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YS5kb2N1bWVudD9iKGEsITApOmZ1bmN0aW9uKGEpe2lmKCFhLmRvY3VtZW50KXRocm93IG5ldyBFcnJvcigialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudCIpO3JldHVybiBiKGEpfTpiKGEpfSgidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcyxmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9YS5kb2N1bWVudCxlPWMuc2xpY2UsZj1jLmNvbmNhdCxnPWMucHVzaCxoPWMuaW5kZXhPZixpPXt9LGo9aS50b1N0cmluZyxrPWkuaGFzT3duUHJvcGVydHksbD17fSxtPSIyLjIuNCIsbj1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgbi5mbi5pbml0KGEsYil9LG89L15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nLHA9L14tbXMtLyxxPS8tKFtcZGEtel0pL2dpLHI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfTtuLmZuPW4ucHJvdG90eXBlPXtqcXVlcnk6bSxjb25zdHJ1Y3RvcjpuLHNlbGVjdG9yOiIiLGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gZS5jYWxsKHRoaXMpfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWE/MD5hP3RoaXNbYSt0aGlzLmxlbmd0aF06dGhpc1thXTplLmNhbGwodGhpcyl9LHB1c2hTdGFjazpmdW5jdGlvbihhKXt2YXIgYj1uLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxhKTtyZXR1cm4gYi5wcmV2T2JqZWN0PXRoaXMsYi5jb250ZXh0PXRoaXMuY29udGV4dCxifSxlYWNoOmZ1bmN0aW9uKGEpe3JldHVybiBuLmVhY2godGhpcyxhKX0sbWFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhuLm1hcCh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuY2FsbChiLGMsYil9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sZW5ndGgsYz0rYSsoMD5hP2I6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGM+PTAmJmI+Yz9bdGhpc1tjXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKCl9LHB1c2g6Zyxzb3J0OmMuc29ydCxzcGxpY2U6Yy5zcGxpY2V9LG4uZXh0ZW5kPW4uZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZSxmLGc9YXJndW1lbnRzWzBdfHx7fSxoPTEsaT1hcmd1bWVudHMubGVuZ3RoLGo9ITE7Zm9yKCJib29sZWFuIj09dHlwZW9mIGcmJihqPWcsZz1hcmd1bWVudHNbaF18fHt9LGgrKyksIm9iamVjdCI9PXR5cGVvZiBnfHxuLmlzRnVuY3Rpb24oZyl8fChnPXt9KSxoPT09aSYmKGc9dGhpcyxoLS0pO2k+aDtoKyspaWYobnVsbCE9KGE9YXJndW1lbnRzW2hdKSlmb3IoYiBpbiBhKWM9Z1tiXSxkPWFbYl0sZyE9PWQmJihqJiZkJiYobi5pc1BsYWluT2JqZWN0KGQpfHwoZT1uLmlzQXJyYXkoZCkpKT8oZT8oZT0hMSxmPWMmJm4uaXNBcnJheShjKT9jOltdKTpmPWMmJm4uaXNQbGFpbk9iamVjdChjKT9jOnt9LGdbYl09bi5leHRlbmQoaixmLGQpKTp2b2lkIDAhPT1kJiYoZ1tiXT1kKSk7cmV0dXJuIGd9LG4uZXh0ZW5kKHtleHBhbmRvOiJqUXVlcnkiKyhtK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLGlzUmVhZHk6ITAsZXJyb3I6ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKGEpfSxub29wOmZ1bmN0aW9uKCl7fSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiJmdW5jdGlvbiI9PT1uLnR5cGUoYSl9LGlzQXJyYXk6QXJyYXkuaXNBcnJheSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmYT09PWEud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oYSl7dmFyIGI9YSYmYS50b1N0cmluZygpO3JldHVybiFuLmlzQXJyYXkoYSkmJmItcGFyc2VGbG9hdChiKSsxPj0wfSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiO2lmKCJvYmplY3QiIT09bi50eXBlKGEpfHxhLm5vZGVUeXBlfHxuLmlzV2luZG93KGEpKXJldHVybiExO2lmKGEuY29uc3RydWN0b3ImJiFrLmNhbGwoYSwiY29uc3RydWN0b3IiKSYmIWsuY2FsbChhLmNvbnN0cnVjdG9yLnByb3RvdHlwZXx8e30sImlzUHJvdG90eXBlT2YiKSlyZXR1cm4hMTtmb3IoYiBpbiBhKTtyZXR1cm4gdm9pZCAwPT09Ynx8ay5jYWxsKGEsYil9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH0sdHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9hKyIiOiJvYmplY3QiPT10eXBlb2YgYXx8ImZ1bmN0aW9uIj09dHlwZW9mIGE/aVtqLmNhbGwoYSldfHwib2JqZWN0Ijp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihhKXt2YXIgYixjPWV2YWw7YT1uLnRyaW0oYSksYSYmKDE9PT1hLmluZGV4T2YoInVzZSBzdHJpY3QiKT8oYj1kLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpLGIudGV4dD1hLGQuaGVhZC5hcHBlbmRDaGlsZChiKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpKTpjKGEpKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UocCwibXMtIikucmVwbGFjZShxLHIpfSxub2RlTmFtZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1iLnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTA7aWYocyhhKSl7Zm9yKGM9YS5sZW5ndGg7Yz5kO2QrKylpZihiLmNhbGwoYVtkXSxkLGFbZF0pPT09ITEpYnJlYWt9ZWxzZSBmb3IoZCBpbiBhKWlmKGIuY2FsbChhW2RdLGQsYVtkXSk9PT0hMSlicmVhaztyZXR1cm4gYX0sdHJpbTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT8iIjooYSsiIikucmVwbGFjZShvLCIiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8W107cmV0dXJuIG51bGwhPWEmJihzKE9iamVjdChhKSk/bi5tZXJnZShjLCJzdHJpbmciPT10eXBlb2YgYT9bYV06YSk6Zy5jYWxsKGMsYSkpLGN9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBudWxsPT1iPy0xOmguY2FsbChiLGEsYyl9LG1lcmdlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPStiLmxlbmd0aCxkPTAsZT1hLmxlbmd0aDtjPmQ7ZCsrKWFbZSsrXT1iW2RdO3JldHVybiBhLmxlbmd0aD1lLGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCxlPVtdLGY9MCxnPWEubGVuZ3RoLGg9IWM7Zz5mO2YrKylkPSFiKGFbZl0sZiksZCE9PWgmJmUucHVzaChhW2ZdKTtyZXR1cm4gZX0sbWFwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGc9MCxoPVtdO2lmKHMoYSkpZm9yKGQ9YS5sZW5ndGg7ZD5nO2crKyllPWIoYVtnXSxnLGMpLG51bGwhPWUmJmgucHVzaChlKTtlbHNlIGZvcihnIGluIGEpZT1iKGFbZ10sZyxjKSxudWxsIT1lJiZoLnB1c2goZSk7cmV0dXJuIGYuYXBwbHkoW10saCl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZjtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGImJihjPWFbYl0sYj1hLGE9Yyksbi5pc0Z1bmN0aW9uKGEpPyhkPWUuY2FsbChhcmd1bWVudHMsMiksZj1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsZC5jb25jYXQoZS5jYWxsKGFyZ3VtZW50cykpKX0sZi5ndWlkPWEuZ3VpZD1hLmd1aWR8fG4uZ3VpZCsrLGYpOnZvaWQgMH0sbm93OkRhdGUubm93LHN1cHBvcnQ6bH0pLCJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJihuLmZuW1N5bWJvbC5pdGVyYXRvcl09Y1tTeW1ib2wuaXRlcmF0b3JdKSxuLmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGEsYil7aVsiW29iamVjdCAiK2IrIl0iXT1iLnRvTG93ZXJDYXNlKCl9KTtmdW5jdGlvbiBzKGEpe3ZhciBiPSEhYSYmImxlbmd0aCJpbiBhJiZhLmxlbmd0aCxjPW4udHlwZShhKTtyZXR1cm4iZnVuY3Rpb24iPT09Y3x8bi5pc1dpbmRvdyhhKT8hMToiYXJyYXkiPT09Y3x8MD09PWJ8fCJudW1iZXIiPT10eXBlb2YgYiYmYj4wJiZiLTEgaW4gYX12YXIgdD1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpLGosayxsLG0sbixvLHAscSxyLHMsdCx1PSJzaXp6bGUiKzEqbmV3IERhdGUsdj1hLmRvY3VtZW50LHc9MCx4PTAseT1nYSgpLHo9Z2EoKSxBPWdhKCksQj1mdW5jdGlvbihhLGIpe3JldHVybiBhPT09YiYmKGw9ITApLDB9LEM9MTw8MzEsRD17fS5oYXNPd25Qcm9wZXJ0eSxFPVtdLEY9RS5wb3AsRz1FLnB1c2gsSD1FLnB1c2gsST1FLnNsaWNlLEo9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspaWYoYVtjXT09PWIpcmV0dXJuIGM7cmV0dXJuLTF9LEs9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIixMPSJbXFx4MjBcXHRcXHJcXG5cXGZdIixNPSIoPzpcXFxcLnxbXFx3LV18W15cXHgwMC1cXHhhMF0pKyIsTj0iXFxbIitMKyIqKCIrTSsiKSg/OiIrTCsiKihbKl4kfCF+XT89KSIrTCsiKig/OicoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwifCgiK00rIikpfCkiK0wrIipcXF0iLE89IjooIitNKyIpKD86XFwoKCgnKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcIil8KCg/OlxcXFwufFteXFxcXCgpW1xcXV18IitOKyIpKil8LiopXFwpfCkiLFA9bmV3IFJlZ0V4cChMKyIrIiwiZyIpLFE9bmV3IFJlZ0V4cCgiXiIrTCsiK3woKD86XnxbXlxcXFxdKSg/OlxcXFwuKSopIitMKyIrJCIsImciKSxSPW5ldyBSZWdFeHAoIl4iK0wrIiosIitMKyIqIiksUz1uZXcgUmVnRXhwKCJeIitMKyIqKFs+K35dfCIrTCsiKSIrTCsiKiIpLFQ9bmV3IFJlZ0V4cCgiPSIrTCsiKihbXlxcXSdcIl0qPykiK0wrIipcXF0iLCJnIiksVT1uZXcgUmVnRXhwKE8pLFY9bmV3IFJlZ0V4cCgiXiIrTSsiJCIpLFc9e0lEOm5ldyBSZWdFeHAoIl4jKCIrTSsiKSIpLENMQVNTOm5ldyBSZWdFeHAoIl5cXC4oIitNKyIpIiksVEFHOm5ldyBSZWdFeHAoIl4oIitNKyJ8WypdKSIpLEFUVFI6bmV3IFJlZ0V4cCgiXiIrTiksUFNFVURPOm5ldyBSZWdFeHAoIl4iK08pLENISUxEOm5ldyBSZWdFeHAoIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcKCIrTCsiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIrTCsiKig/OihbKy1dfCkiK0wrIiooXFxkKyl8KSkiK0wrIipcXCl8KSIsImkiKSxib29sOm5ldyBSZWdFeHAoIl4oPzoiK0srIikkIiwiaSIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKCJeIitMKyIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiK0wrIiooKD86LVxcZCk/XFxkKikiK0wrIipcXCl8KSg/PVteLV18JCkiLCJpIil9LFg9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxZPS9eaFxkJC9pLFo9L15bXntdK1x7XHMqXFtuYXRpdmUgXHcvLCQ9L14oPzojKFtcdy1dKyl8KFx3Kyl8XC4oW1x3LV0rKSkkLyxfPS9bK35dLyxhYT0vJ3xcXC9nLGJhPW5ldyBSZWdFeHAoIlxcXFwoW1xcZGEtZl17MSw2fSIrTCsiP3woIitMKyIpfC4pIiwiaWciKSxjYT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9IjB4IitiLTY1NTM2O3JldHVybiBkIT09ZHx8Yz9iOjA+ZD9TdHJpbmcuZnJvbUNoYXJDb2RlKGQrNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUoZD4+MTB8NTUyOTYsMTAyMyZkfDU2MzIwKX0sZGE9ZnVuY3Rpb24oKXttKCl9O3RyeXtILmFwcGx5KEU9SS5jYWxsKHYuY2hpbGROb2Rlcyksdi5jaGlsZE5vZGVzKSxFW3YuY2hpbGROb2Rlcy5sZW5ndGhdLm5vZGVUeXBlfWNhdGNoKGVhKXtIPXthcHBseTpFLmxlbmd0aD9mdW5jdGlvbihhLGIpe0cuYXBwbHkoYSxJLmNhbGwoYikpfTpmdW5jdGlvbihhLGIpe3ZhciBjPWEubGVuZ3RoLGQ9MDt3aGlsZShhW2MrK109YltkKytdKTthLmxlbmd0aD1jLTF9fX1mdW5jdGlvbiBmYShhLGIsZCxlKXt2YXIgZixoLGosayxsLG8scixzLHc9YiYmYi5vd25lckRvY3VtZW50LHg9Yj9iLm5vZGVUeXBlOjk7aWYoZD1kfHxbXSwic3RyaW5nIiE9dHlwZW9mIGF8fCFhfHwxIT09eCYmOSE9PXgmJjExIT09eClyZXR1cm4gZDtpZighZSYmKChiP2Iub3duZXJEb2N1bWVudHx8Yjp2KSE9PW4mJm0oYiksYj1ifHxuLHApKXtpZigxMSE9PXgmJihvPSQuZXhlYyhhKSkpaWYoZj1vWzFdKXtpZig5PT09eCl7aWYoIShqPWIuZ2V0RWxlbWVudEJ5SWQoZikpKXJldHVybiBkO2lmKGouaWQ9PT1mKXJldHVybiBkLnB1c2goaiksZH1lbHNlIGlmKHcmJihqPXcuZ2V0RWxlbWVudEJ5SWQoZikpJiZ0KGIsaikmJmouaWQ9PT1mKXJldHVybiBkLnB1c2goaiksZH1lbHNle2lmKG9bMl0pcmV0dXJuIEguYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpKSxkO2lmKChmPW9bM10pJiZjLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gSC5hcHBseShkLGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShmKSksZH1pZihjLnFzYSYmIUFbYSsiICJdJiYoIXF8fCFxLnRlc3QoYSkpKXtpZigxIT09eCl3PWIscz1hO2Vsc2UgaWYoIm9iamVjdCIhPT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpeyhrPWIuZ2V0QXR0cmlidXRlKCJpZCIpKT9rPWsucmVwbGFjZShhYSwiXFwkJiIpOmIuc2V0QXR0cmlidXRlKCJpZCIsaz11KSxyPWcoYSksaD1yLmxlbmd0aCxsPVYudGVzdChrKT8iIyIrazoiW2lkPSciK2srIiddIjt3aGlsZShoLS0pcltoXT1sKyIgIitxYShyW2hdKTtzPXIuam9pbigiLCIpLHc9Xy50ZXN0KGEpJiZvYShiLnBhcmVudE5vZGUpfHxifWlmKHMpdHJ5e3JldHVybiBILmFwcGx5KGQsdy5xdWVyeVNlbGVjdG9yQWxsKHMpKSxkfWNhdGNoKHkpe31maW5hbGx5e2s9PT11JiZiLnJlbW92ZUF0dHJpYnV0ZSgiaWQiKX19fXJldHVybiBpKGEucmVwbGFjZShRLCIkMSIpLGIsZCxlKX1mdW5jdGlvbiBnYSgpe3ZhciBhPVtdO2Z1bmN0aW9uIGIoYyxlKXtyZXR1cm4gYS5wdXNoKGMrIiAiKT5kLmNhY2hlTGVuZ3RoJiZkZWxldGUgYlthLnNoaWZ0KCldLGJbYysiICJdPWV9cmV0dXJuIGJ9ZnVuY3Rpb24gaGEoYSl7cmV0dXJuIGFbdV09ITAsYX1mdW5jdGlvbiBpYShhKXt2YXIgYj1uLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RyeXtyZXR1cm4hIWEoYil9Y2F0Y2goYyl7cmV0dXJuITF9ZmluYWxseXtiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSxiPW51bGx9fWZ1bmN0aW9uIGphKGEsYil7dmFyIGM9YS5zcGxpdCgifCIpLGU9Yy5sZW5ndGg7d2hpbGUoZS0tKWQuYXR0ckhhbmRsZVtjW2VdXT1ifWZ1bmN0aW9uIGthKGEsYil7dmFyIGM9YiYmYSxkPWMmJjE9PT1hLm5vZGVUeXBlJiYxPT09Yi5ub2RlVHlwZSYmKH5iLnNvdXJjZUluZGV4fHxDKS0ofmEuc291cmNlSW5kZXh8fEMpO2lmKGQpcmV0dXJuIGQ7aWYoYyl3aGlsZShjPWMubmV4dFNpYmxpbmcpaWYoYz09PWIpcmV0dXJuLTE7cmV0dXJuIGE/MTotMX1mdW5jdGlvbiBsYShhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT1jJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBtYShhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybigiaW5wdXQiPT09Y3x8ImJ1dHRvbiI9PT1jKSYmYi50eXBlPT09YX19ZnVuY3Rpb24gbmEoYSl7cmV0dXJuIGhhKGZ1bmN0aW9uKGIpe3JldHVybiBiPStiLGhhKGZ1bmN0aW9uKGMsZCl7dmFyIGUsZj1hKFtdLGMubGVuZ3RoLGIpLGc9Zi5sZW5ndGg7d2hpbGUoZy0tKWNbZT1mW2ddXSYmKGNbZV09IShkW2VdPWNbZV0pKX0pfSl9ZnVuY3Rpb24gb2EoYSl7cmV0dXJuIGEmJiJ1bmRlZmluZWQiIT10eXBlb2YgYS5nZXRFbGVtZW50c0J5VGFnTmFtZSYmYX1jPWZhLnN1cHBvcnQ9e30sZj1mYS5pc1hNTD1mdW5jdGlvbihhKXt2YXIgYj1hJiYoYS5vd25lckRvY3VtZW50fHxhKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIGI/IkhUTUwiIT09Yi5ub2RlTmFtZTohMX0sbT1mYS5zZXREb2N1bWVudD1mdW5jdGlvbihhKXt2YXIgYixlLGc9YT9hLm93bmVyRG9jdW1lbnR8fGE6djtyZXR1cm4gZyE9PW4mJjk9PT1nLm5vZGVUeXBlJiZnLmRvY3VtZW50RWxlbWVudD8obj1nLG89bi5kb2N1bWVudEVsZW1lbnQscD0hZihuKSwoZT1uLmRlZmF1bHRWaWV3KSYmZS50b3AhPT1lJiYoZS5hZGRFdmVudExpc3RlbmVyP2UuYWRkRXZlbnRMaXN0ZW5lcigidW5sb2FkIixkYSwhMSk6ZS5hdHRhY2hFdmVudCYmZS5hdHRhY2hFdmVudCgib251bmxvYWQiLGRhKSksYy5hdHRyaWJ1dGVzPWlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmNsYXNzTmFtZT0iaSIsIWEuZ2V0QXR0cmlidXRlKCJjbGFzc05hbWUiKX0pLGMuZ2V0RWxlbWVudHNCeVRhZ05hbWU9aWEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuYXBwZW5kQ2hpbGQobi5jcmVhdGVDb21tZW50KCIiKSksIWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGh9KSxjLmdldEVsZW1lbnRzQnlDbGFzc05hbWU9Wi50ZXN0KG4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSksYy5nZXRCeUlkPWlhKGZ1bmN0aW9uKGEpe3JldHVybiBvLmFwcGVuZENoaWxkKGEpLmlkPXUsIW4uZ2V0RWxlbWVudHNCeU5hbWV8fCFuLmdldEVsZW1lbnRzQnlOYW1lKHUpLmxlbmd0aH0pLGMuZ2V0QnlJZD8oZC5maW5kLklEPWZ1bmN0aW9uKGEsYil7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBiLmdldEVsZW1lbnRCeUlkJiZwKXt2YXIgYz1iLmdldEVsZW1lbnRCeUlkKGEpO3JldHVybiBjP1tjXTpbXX19LGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZSgiaWQiKT09PWJ9fSk6KGRlbGV0ZSBkLmZpbmQuSUQsZC5maWx0ZXIuSUQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGJhLGNhKTtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9InVuZGVmaW5lZCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZU5vZGUmJmEuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gYyYmYy52YWx1ZT09PWJ9fSksZC5maW5kLlRBRz1jLmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGEsYil7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlUYWdOYW1lP2IuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk6Yy5xc2E/Yi5xdWVyeVNlbGVjdG9yQWxsKGEpOnZvaWQgMH06ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9MCxmPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk7aWYoIioiPT09YSl7d2hpbGUoYz1mW2UrK10pMT09PWMubm9kZVR5cGUmJmQucHVzaChjKTtyZXR1cm4gZH1yZXR1cm4gZn0sZC5maW5kLkNMQVNTPWMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oYSxiKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmcD9iLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYSk6dm9pZCAwfSxyPVtdLHE9W10sKGMucXNhPVoudGVzdChuLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGlhKGZ1bmN0aW9uKGEpe28uYXBwZW5kQ2hpbGQoYSkuaW5uZXJIVE1MPSI8YSBpZD0nIit1KyInPjwvYT48c2VsZWN0IGlkPSciK3UrIi1cclxcJyBtc2FsbG93Y2FwdHVyZT0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PiIsYS5xdWVyeVNlbGVjdG9yQWxsKCJbbXNhbGxvd2NhcHR1cmVePScnXSIpLmxlbmd0aCYmcS5wdXNoKCJbKl4kXT0iK0wrIiooPzonJ3xcIlwiKSIpLGEucXVlcnlTZWxlY3RvckFsbCgiW3NlbGVjdGVkXSIpLmxlbmd0aHx8cS5wdXNoKCJcXFsiK0wrIiooPzp2YWx1ZXwiK0srIikiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIltpZH49Iit1KyItXSIpLmxlbmd0aHx8cS5wdXNoKCJ+PSIpLGEucXVlcnlTZWxlY3RvckFsbCgiOmNoZWNrZWQiKS5sZW5ndGh8fHEucHVzaCgiOmNoZWNrZWQiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoImEjIit1KyIrKiIpLmxlbmd0aHx8cS5wdXNoKCIuIy4rWyt+XSIpfSksaWEoZnVuY3Rpb24oYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2Iuc2V0QXR0cmlidXRlKCJ0eXBlIiwiaGlkZGVuIiksYS5hcHBlbmRDaGlsZChiKS5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJEIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJbbmFtZT1kXSIpLmxlbmd0aCYmcS5wdXNoKCJuYW1lIitMKyIqWypeJHwhfl0/PSIpLGEucXVlcnlTZWxlY3RvckFsbCgiOmVuYWJsZWQiKS5sZW5ndGh8fHEucHVzaCgiOmVuYWJsZWQiLCI6ZGlzYWJsZWQiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIiosOngiKSxxLnB1c2goIiwuKjoiKX0pKSwoYy5tYXRjaGVzU2VsZWN0b3I9Wi50ZXN0KHM9by5tYXRjaGVzfHxvLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8by5tb3pNYXRjaGVzU2VsZWN0b3J8fG8ub01hdGNoZXNTZWxlY3Rvcnx8by5tc01hdGNoZXNTZWxlY3RvcikpJiZpYShmdW5jdGlvbihhKXtjLmRpc2Nvbm5lY3RlZE1hdGNoPXMuY2FsbChhLCJkaXYiKSxzLmNhbGwoYSwiW3MhPScnXTp4Iiksci5wdXNoKCIhPSIsTyl9KSxxPXEubGVuZ3RoJiZuZXcgUmVnRXhwKHEuam9pbigifCIpKSxyPXIubGVuZ3RoJiZuZXcgUmVnRXhwKHIuam9pbigifCIpKSxiPVoudGVzdChvLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSx0PWJ8fFoudGVzdChvLmNvbnRhaW5zKT9mdW5jdGlvbihhLGIpe3ZhciBjPTk9PT1hLm5vZGVUeXBlP2EuZG9jdW1lbnRFbGVtZW50OmEsZD1iJiZiLnBhcmVudE5vZGU7cmV0dXJuIGE9PT1kfHwhKCFkfHwxIT09ZC5ub2RlVHlwZXx8IShjLmNvbnRhaW5zP2MuY29udGFpbnMoZCk6YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihkKSkpfTpmdW5jdGlvbihhLGIpe2lmKGIpd2hpbGUoYj1iLnBhcmVudE5vZGUpaWYoYj09PWEpcmV0dXJuITA7cmV0dXJuITF9LEI9Yj9mdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGQ9IWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24tIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247cmV0dXJuIGQ/ZDooZD0oYS5vd25lckRvY3VtZW50fHxhKT09PShiLm93bmVyRG9jdW1lbnR8fGIpP2EuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYik6MSwxJmR8fCFjLnNvcnREZXRhY2hlZCYmYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihhKT09PWQ/YT09PW58fGEub3duZXJEb2N1bWVudD09PXYmJnQodixhKT8tMTpiPT09bnx8Yi5vd25lckRvY3VtZW50PT09diYmdCh2LGIpPzE6az9KKGssYSktSihrLGIpOjA6NCZkPy0xOjEpfTpmdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGMsZD0wLGU9YS5wYXJlbnROb2RlLGY9Yi5wYXJlbnROb2RlLGc9W2FdLGg9W2JdO2lmKCFlfHwhZilyZXR1cm4gYT09PW4/LTE6Yj09PW4/MTplPy0xOmY/MTprP0ooayxhKS1KKGssYik6MDtpZihlPT09ZilyZXR1cm4ga2EoYSxiKTtjPWE7d2hpbGUoYz1jLnBhcmVudE5vZGUpZy51bnNoaWZ0KGMpO2M9Yjt3aGlsZShjPWMucGFyZW50Tm9kZSloLnVuc2hpZnQoYyk7d2hpbGUoZ1tkXT09PWhbZF0pZCsrO3JldHVybiBkP2thKGdbZF0saFtkXSk6Z1tkXT09PXY/LTE6aFtkXT09PXY/MTowfSxuKTpufSxmYS5tYXRjaGVzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGZhKGEsbnVsbCxudWxsLGIpfSxmYS5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oYSxiKXtpZigoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksYj1iLnJlcGxhY2UoVCwiPSckMSddIiksYy5tYXRjaGVzU2VsZWN0b3ImJnAmJiFBW2IrIiAiXSYmKCFyfHwhci50ZXN0KGIpKSYmKCFxfHwhcS50ZXN0KGIpKSl0cnl7dmFyIGQ9cy5jYWxsKGEsYik7aWYoZHx8Yy5kaXNjb25uZWN0ZWRNYXRjaHx8YS5kb2N1bWVudCYmMTEhPT1hLmRvY3VtZW50Lm5vZGVUeXBlKXJldHVybiBkfWNhdGNoKGUpe31yZXR1cm4gZmEoYixuLG51bGwsW2FdKS5sZW5ndGg+MH0sZmEuY29udGFpbnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksdChhLGIpfSxmYS5hdHRyPWZ1bmN0aW9uKGEsYil7KGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpO3ZhciBlPWQuYXR0ckhhbmRsZVtiLnRvTG93ZXJDYXNlKCldLGY9ZSYmRC5jYWxsKGQuYXR0ckhhbmRsZSxiLnRvTG93ZXJDYXNlKCkpP2UoYSxiLCFwKTp2b2lkIDA7cmV0dXJuIHZvaWQgMCE9PWY/ZjpjLmF0dHJpYnV0ZXN8fCFwP2EuZ2V0QXR0cmlidXRlKGIpOihmPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmYuc3BlY2lmaWVkP2YudmFsdWU6bnVsbH0sZmEuZXJyb3I9ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiAiK2EpfSxmYS51bmlxdWVTb3J0PWZ1bmN0aW9uKGEpe3ZhciBiLGQ9W10sZT0wLGY9MDtpZihsPSFjLmRldGVjdER1cGxpY2F0ZXMsaz0hYy5zb3J0U3RhYmxlJiZhLnNsaWNlKDApLGEuc29ydChCKSxsKXt3aGlsZShiPWFbZisrXSliPT09YVtmXSYmKGU9ZC5wdXNoKGYpKTt3aGlsZShlLS0pYS5zcGxpY2UoZFtlXSwxKX1yZXR1cm4gaz1udWxsLGF9LGU9ZmEuZ2V0VGV4dD1mdW5jdGlvbihhKXt2YXIgYixjPSIiLGQ9MCxmPWEubm9kZVR5cGU7aWYoZil7aWYoMT09PWZ8fDk9PT1mfHwxMT09PWYpe2lmKCJzdHJpbmciPT10eXBlb2YgYS50ZXh0Q29udGVudClyZXR1cm4gYS50ZXh0Q29udGVudDtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpYys9ZShhKX1lbHNlIGlmKDM9PT1mfHw0PT09ZilyZXR1cm4gYS5ub2RlVmFsdWV9ZWxzZSB3aGlsZShiPWFbZCsrXSljKz1lKGIpO3JldHVybiBjfSxkPWZhLnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOmhhLG1hdGNoOlcsYXR0ckhhbmRsZTp7fSxmaW5kOnt9LHJlbGF0aXZlOnsiPiI6e2RpcjoicGFyZW50Tm9kZSIsZmlyc3Q6ITB9LCIgIjp7ZGlyOiJwYXJlbnROb2RlIn0sIisiOntkaXI6InByZXZpb3VzU2libGluZyIsZmlyc3Q6ITB9LCJ+Ijp7ZGlyOiJwcmV2aW91c1NpYmxpbmcifX0scHJlRmlsdGVyOntBVFRSOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0ucmVwbGFjZShiYSxjYSksYVszXT0oYVszXXx8YVs0XXx8YVs1XXx8IiIpLnJlcGxhY2UoYmEsY2EpLCJ+PSI9PT1hWzJdJiYoYVszXT0iICIrYVszXSsiICIpLGEuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS50b0xvd2VyQ2FzZSgpLCJudGgiPT09YVsxXS5zbGljZSgwLDMpPyhhWzNdfHxmYS5lcnJvcihhWzBdKSxhWzRdPSsoYVs0XT9hWzVdKyhhWzZdfHwxKToyKigiZXZlbiI9PT1hWzNdfHwib2RkIj09PWFbM10pKSxhWzVdPSsoYVs3XSthWzhdfHwib2RkIj09PWFbM10pKTphWzNdJiZmYS5lcnJvcihhWzBdKSxhfSxQU0VVRE86ZnVuY3Rpb24oYSl7dmFyIGIsYz0hYVs2XSYmYVsyXTtyZXR1cm4gVy5DSElMRC50ZXN0KGFbMF0pP251bGw6KGFbM10/YVsyXT1hWzRdfHxhWzVdfHwiIjpjJiZVLnRlc3QoYykmJihiPWcoYywhMCkpJiYoYj1jLmluZGV4T2YoIikiLGMubGVuZ3RoLWIpLWMubGVuZ3RoKSYmKGFbMF09YVswXS5zbGljZSgwLGIpLGFbMl09Yy5zbGljZSgwLGIpKSxhLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGJhLGNhKS50b0xvd2VyQ2FzZSgpO3JldHVybiIqIj09PWE/ZnVuY3Rpb24oKXtyZXR1cm4hMH06ZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWJ9fSxDTEFTUzpmdW5jdGlvbihhKXt2YXIgYj15W2ErIiAiXTtyZXR1cm4gYnx8KGI9bmV3IFJlZ0V4cCgiKF58IitMKyIpIithKyIoIitMKyJ8JCkiKSkmJnkoYSxmdW5jdGlvbihhKXtyZXR1cm4gYi50ZXN0KCJzdHJpbmciPT10eXBlb2YgYS5jbGFzc05hbWUmJmEuY2xhc3NOYW1lfHwidW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0QXR0cmlidXRlJiZhLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpfSl9LEFUVFI6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXt2YXIgZT1mYS5hdHRyKGQsYSk7cmV0dXJuIG51bGw9PWU/IiE9Ij09PWI6Yj8oZSs9IiIsIj0iPT09Yj9lPT09YzoiIT0iPT09Yj9lIT09YzoiXj0iPT09Yj9jJiYwPT09ZS5pbmRleE9mKGMpOiIqPSI9PT1iP2MmJmUuaW5kZXhPZihjKT4tMToiJD0iPT09Yj9jJiZlLnNsaWNlKC1jLmxlbmd0aCk9PT1jOiJ+PSI9PT1iPygiICIrZS5yZXBsYWNlKFAsIiAiKSsiICIpLmluZGV4T2YoYyk+LTE6Inw9Ij09PWI/ZT09PWN8fGUuc2xpY2UoMCxjLmxlbmd0aCsxKT09PWMrIi0iOiExKTohMH19LENISUxEOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9Im50aCIhPT1hLnNsaWNlKDAsMyksZz0ibGFzdCIhPT1hLnNsaWNlKC00KSxoPSJvZi10eXBlIj09PWI7cmV0dXJuIDE9PT1kJiYwPT09ZT9mdW5jdGlvbihhKXtyZXR1cm4hIWEucGFyZW50Tm9kZX06ZnVuY3Rpb24oYixjLGkpe3ZhciBqLGssbCxtLG4sbyxwPWYhPT1nPyJuZXh0U2libGluZyI6InByZXZpb3VzU2libGluZyIscT1iLnBhcmVudE5vZGUscj1oJiZiLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkscz0haSYmIWgsdD0hMTtpZihxKXtpZihmKXt3aGlsZShwKXttPWI7d2hpbGUobT1tW3BdKWlmKGg/bS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bS5ub2RlVHlwZSlyZXR1cm4hMTtvPXA9Im9ubHkiPT09YSYmIW8mJiJuZXh0U2libGluZyJ9cmV0dXJuITB9aWYobz1bZz9xLmZpcnN0Q2hpbGQ6cS5sYXN0Q2hpbGRdLGcmJnMpe209cSxsPW1bdV18fChtW3VdPXt9KSxrPWxbbS51bmlxdWVJRF18fChsW20udW5pcXVlSURdPXt9KSxqPWtbYV18fFtdLG49alswXT09PXcmJmpbMV0sdD1uJiZqWzJdLG09biYmcS5jaGlsZE5vZGVzW25dO3doaWxlKG09KytuJiZtJiZtW3BdfHwodD1uPTApfHxvLnBvcCgpKWlmKDE9PT1tLm5vZGVUeXBlJiYrK3QmJm09PT1iKXtrW2FdPVt3LG4sdF07YnJlYWt9fWVsc2UgaWYocyYmKG09YixsPW1bdV18fChtW3VdPXt9KSxrPWxbbS51bmlxdWVJRF18fChsW20udW5pcXVlSURdPXt9KSxqPWtbYV18fFtdLG49alswXT09PXcmJmpbMV0sdD1uKSx0PT09ITEpd2hpbGUobT0rK24mJm0mJm1bcF18fCh0PW49MCl8fG8ucG9wKCkpaWYoKGg/bS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bS5ub2RlVHlwZSkmJisrdCYmKHMmJihsPW1bdV18fChtW3VdPXt9KSxrPWxbbS51bmlxdWVJRF18fChsW20udW5pcXVlSURdPXt9KSxrW2FdPVt3LHRdKSxtPT09YikpYnJlYWs7cmV0dXJuIHQtPWUsdD09PWR8fHQlZD09PTAmJnQvZD49MH19fSxQU0VVRE86ZnVuY3Rpb24oYSxiKXt2YXIgYyxlPWQucHNldWRvc1thXXx8ZC5zZXRGaWx0ZXJzW2EudG9Mb3dlckNhc2UoKV18fGZhLmVycm9yKCJ1bnN1cHBvcnRlZCBwc2V1ZG86ICIrYSk7cmV0dXJuIGVbdV0/ZShiKTplLmxlbmd0aD4xPyhjPVthLGEsIiIsYl0sZC5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGEudG9Mb3dlckNhc2UoKSk/aGEoZnVuY3Rpb24oYSxjKXt2YXIgZCxmPWUoYSxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSlkPUooYSxmW2ddKSxhW2RdPSEoY1tkXT1mW2ddKX0pOmZ1bmN0aW9uKGEpe3JldHVybiBlKGEsMCxjKX0pOmV9fSxwc2V1ZG9zOntub3Q6aGEoZnVuY3Rpb24oYSl7dmFyIGI9W10sYz1bXSxkPWgoYS5yZXBsYWNlKFEsIiQxIikpO3JldHVybiBkW3VdP2hhKGZ1bmN0aW9uKGEsYixjLGUpe3ZhciBmLGc9ZChhLG51bGwsZSxbXSksaD1hLmxlbmd0aDt3aGlsZShoLS0pKGY9Z1toXSkmJihhW2hdPSEoYltoXT1mKSl9KTpmdW5jdGlvbihhLGUsZil7cmV0dXJuIGJbMF09YSxkKGIsbnVsbCxmLGMpLGJbMF09bnVsbCwhYy5wb3AoKX19KSxoYXM6aGEoZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBmYShhLGIpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBhPWEucmVwbGFjZShiYSxjYSksZnVuY3Rpb24oYil7cmV0dXJuKGIudGV4dENvbnRlbnR8fGIuaW5uZXJUZXh0fHxlKGIpKS5pbmRleE9mKGEpPi0xfX0pLGxhbmc6aGEoZnVuY3Rpb24oYSl7cmV0dXJuIFYudGVzdChhfHwiIil8fGZhLmVycm9yKCJ1bnN1cHBvcnRlZCBsYW5nOiAiK2EpLGE9YS5yZXBsYWNlKGJhLGNhKS50b0xvd2VyQ2FzZSgpLGZ1bmN0aW9uKGIpe3ZhciBjO2RvIGlmKGM9cD9iLmxhbmc6Yi5nZXRBdHRyaWJ1dGUoInhtbDpsYW5nIil8fGIuZ2V0QXR0cmlidXRlKCJsYW5nIikpcmV0dXJuIGM9Yy50b0xvd2VyQ2FzZSgpLGM9PT1hfHwwPT09Yy5pbmRleE9mKGErIi0iKTt3aGlsZSgoYj1iLnBhcmVudE5vZGUpJiYxPT09Yi5ub2RlVHlwZSk7cmV0dXJuITF9fSksdGFyZ2V0OmZ1bmN0aW9uKGIpe3ZhciBjPWEubG9jYXRpb24mJmEubG9jYXRpb24uaGFzaDtyZXR1cm4gYyYmYy5zbGljZSgxKT09PWIuaWR9LHJvb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1vfSxmb2N1czpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW4uYWN0aXZlRWxlbWVudCYmKCFuLmhhc0ZvY3VzfHxuLmhhc0ZvY3VzKCkpJiYhIShhLnR5cGV8fGEuaHJlZnx8fmEudGFiSW5kZXgpfSxlbmFibGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc2FibGVkPT09ITF9LGRpc2FibGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc2FibGVkPT09ITB9LGNoZWNrZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT1iJiYhIWEuY2hlY2tlZHx8Im9wdGlvbiI9PT1iJiYhIWEuc2VsZWN0ZWR9LHNlbGVjdGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LGEuc2VsZWN0ZWQ9PT0hMH0sZW1wdHk6ZnVuY3Rpb24oYSl7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWlmKGEubm9kZVR5cGU8NilyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybiFkLnBzZXVkb3MuZW1wdHkoYSl9LGhlYWRlcjpmdW5jdGlvbihhKXtyZXR1cm4gWS50ZXN0KGEubm9kZU5hbWUpfSxpbnB1dDpmdW5jdGlvbihhKXtyZXR1cm4gWC50ZXN0KGEubm9kZU5hbWUpfSxidXR0b246ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT1iJiYiYnV0dG9uIj09PWEudHlwZXx8ImJ1dHRvbiI9PT1ifSx0ZXh0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiJpbnB1dCI9PT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJiJ0ZXh0Ij09PWEudHlwZSYmKG51bGw9PShiPWEuZ2V0QXR0cmlidXRlKCJ0eXBlIikpfHwidGV4dCI9PT1iLnRvTG93ZXJDYXNlKCkpfSxmaXJzdDpuYShmdW5jdGlvbigpe3JldHVyblswXX0pLGxhc3Q6bmEoZnVuY3Rpb24oYSxiKXtyZXR1cm5bYi0xXX0pLGVxOm5hKGZ1bmN0aW9uKGEsYixjKXtyZXR1cm5bMD5jP2MrYjpjXX0pLGV2ZW46bmEoZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtiPmM7Yys9MilhLnB1c2goYyk7cmV0dXJuIGF9KSxvZGQ6bmEoZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MTtiPmM7Yys9MilhLnB1c2goYyk7cmV0dXJuIGF9KSxsdDpuYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzstLWQ+PTA7KWEucHVzaChkKTtyZXR1cm4gYX0pLGd0Om5hKGZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MD5jP2MrYjpjOysrZDxiOylhLnB1c2goZCk7cmV0dXJuIGF9KX19LGQucHNldWRvcy5udGg9ZC5wc2V1ZG9zLmVxO2ZvcihiIGlue3JhZGlvOiEwLGNoZWNrYm94OiEwLGZpbGU6ITAscGFzc3dvcmQ6ITAsaW1hZ2U6ITB9KWQucHNldWRvc1tiXT1sYShiKTtmb3IoYiBpbntzdWJtaXQ6ITAscmVzZXQ6ITB9KWQucHNldWRvc1tiXT1tYShiKTtmdW5jdGlvbiBwYSgpe31wYS5wcm90b3R5cGU9ZC5maWx0ZXJzPWQucHNldWRvcyxkLnNldEZpbHRlcnM9bmV3IHBhLGc9ZmEudG9rZW5pemU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGYsZyxoLGksaixrPXpbYSsiICJdO2lmKGspcmV0dXJuIGI/MDprLnNsaWNlKDApO2g9YSxpPVtdLGo9ZC5wcmVGaWx0ZXI7d2hpbGUoaCl7YyYmIShlPVIuZXhlYyhoKSl8fChlJiYoaD1oLnNsaWNlKGVbMF0ubGVuZ3RoKXx8aCksaS5wdXNoKGY9W10pKSxjPSExLChlPVMuZXhlYyhoKSkmJihjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTplWzBdLnJlcGxhY2UoUSwiICIpfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7Zm9yKGcgaW4gZC5maWx0ZXIpIShlPVdbZ10uZXhlYyhoKSl8fGpbZ10mJiEoZT1qW2ddKGUpKXx8KGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmcsbWF0Y2hlczplfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7aWYoIWMpYnJlYWt9cmV0dXJuIGI/aC5sZW5ndGg6aD9mYS5lcnJvcihhKTp6KGEsaSkuc2xpY2UoMCl9O2Z1bmN0aW9uIHFhKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGgsZD0iIjtjPmI7YisrKWQrPWFbYl0udmFsdWU7cmV0dXJuIGR9ZnVuY3Rpb24gcmEoYSxiLGMpe3ZhciBkPWIuZGlyLGU9YyYmInBhcmVudE5vZGUiPT09ZCxmPXgrKztyZXR1cm4gYi5maXJzdD9mdW5jdGlvbihiLGMsZil7d2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxlKXJldHVybiBhKGIsYyxmKX06ZnVuY3Rpb24oYixjLGcpe3ZhciBoLGksaixrPVt3LGZdO2lmKGcpe3doaWxlKGI9YltkXSlpZigoMT09PWIubm9kZVR5cGV8fGUpJiZhKGIsYyxnKSlyZXR1cm4hMH1lbHNlIHdoaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSl7aWYoaj1iW3VdfHwoYlt1XT17fSksaT1qW2IudW5pcXVlSURdfHwoaltiLnVuaXF1ZUlEXT17fSksKGg9aVtkXSkmJmhbMF09PT13JiZoWzFdPT09ZilyZXR1cm4ga1syXT1oWzJdO2lmKGlbZF09ayxrWzJdPWEoYixjLGcpKXJldHVybiEwfX19ZnVuY3Rpb24gc2EoYSl7cmV0dXJuIGEubGVuZ3RoPjE/ZnVuY3Rpb24oYixjLGQpe3ZhciBlPWEubGVuZ3RoO3doaWxlKGUtLSlpZighYVtlXShiLGMsZCkpcmV0dXJuITE7cmV0dXJuITB9OmFbMF19ZnVuY3Rpb24gdGEoYSxiLGMpe2Zvcih2YXIgZD0wLGU9Yi5sZW5ndGg7ZT5kO2QrKylmYShhLGJbZF0sYyk7cmV0dXJuIGN9ZnVuY3Rpb24gdWEoYSxiLGMsZCxlKXtmb3IodmFyIGYsZz1bXSxoPTAsaT1hLmxlbmd0aCxqPW51bGwhPWI7aT5oO2grKykoZj1hW2hdKSYmKGMmJiFjKGYsZCxlKXx8KGcucHVzaChmKSxqJiZiLnB1c2goaCkpKTtyZXR1cm4gZ31mdW5jdGlvbiB2YShhLGIsYyxkLGUsZil7cmV0dXJuIGQmJiFkW3VdJiYoZD12YShkKSksZSYmIWVbdV0mJihlPXZhKGUsZikpLGhhKGZ1bmN0aW9uKGYsZyxoLGkpe3ZhciBqLGssbCxtPVtdLG49W10sbz1nLmxlbmd0aCxwPWZ8fHRhKGJ8fCIqIixoLm5vZGVUeXBlP1toXTpoLFtdKSxxPSFhfHwhZiYmYj9wOnVhKHAsbSxhLGgsaSkscj1jP2V8fChmP2E6b3x8ZCk/W106ZzpxO2lmKGMmJmMocSxyLGgsaSksZCl7aj11YShyLG4pLGQoaixbXSxoLGkpLGs9ai5sZW5ndGg7d2hpbGUoay0tKShsPWpba10pJiYocltuW2tdXT0hKHFbbltrXV09bCkpfWlmKGYpe2lmKGV8fGEpe2lmKGUpe2o9W10saz1yLmxlbmd0aDt3aGlsZShrLS0pKGw9cltrXSkmJmoucHVzaChxW2tdPWwpO2UobnVsbCxyPVtdLGosaSl9az1yLmxlbmd0aDt3aGlsZShrLS0pKGw9cltrXSkmJihqPWU/SihmLGwpOm1ba10pPi0xJiYoZltqXT0hKGdbal09bCkpfX1lbHNlIHI9dWEocj09PWc/ci5zcGxpY2UobyxyLmxlbmd0aCk6ciksZT9lKG51bGwsZyxyLGkpOkguYXBwbHkoZyxyKX0pfWZ1bmN0aW9uIHdhKGEpe2Zvcih2YXIgYixjLGUsZj1hLmxlbmd0aCxnPWQucmVsYXRpdmVbYVswXS50eXBlXSxoPWd8fGQucmVsYXRpdmVbIiAiXSxpPWc/MTowLGs9cmEoZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1ifSxoLCEwKSxsPXJhKGZ1bmN0aW9uKGEpe3JldHVybiBKKGIsYSk+LTF9LGgsITApLG09W2Z1bmN0aW9uKGEsYyxkKXt2YXIgZT0hZyYmKGR8fGMhPT1qKXx8KChiPWMpLm5vZGVUeXBlP2soYSxjLGQpOmwoYSxjLGQpKTtyZXR1cm4gYj1udWxsLGV9XTtmPmk7aSsrKWlmKGM9ZC5yZWxhdGl2ZVthW2ldLnR5cGVdKW09W3JhKHNhKG0pLGMpXTtlbHNle2lmKGM9ZC5maWx0ZXJbYVtpXS50eXBlXS5hcHBseShudWxsLGFbaV0ubWF0Y2hlcyksY1t1XSl7Zm9yKGU9KytpO2Y+ZTtlKyspaWYoZC5yZWxhdGl2ZVthW2VdLnR5cGVdKWJyZWFrO3JldHVybiB2YShpPjEmJnNhKG0pLGk+MSYmcWEoYS5zbGljZSgwLGktMSkuY29uY2F0KHt2YWx1ZToiICI9PT1hW2ktMl0udHlwZT8iKiI6IiJ9KSkucmVwbGFjZShRLCIkMSIpLGMsZT5pJiZ3YShhLnNsaWNlKGksZSkpLGY+ZSYmd2EoYT1hLnNsaWNlKGUpKSxmPmUmJnFhKGEpKX1tLnB1c2goYyl9cmV0dXJuIHNhKG0pfWZ1bmN0aW9uIHhhKGEsYil7dmFyIGM9Yi5sZW5ndGg+MCxlPWEubGVuZ3RoPjAsZj1mdW5jdGlvbihmLGcsaCxpLGspe3ZhciBsLG8scSxyPTAscz0iMCIsdD1mJiZbXSx1PVtdLHY9aix4PWZ8fGUmJmQuZmluZC5UQUcoIioiLGspLHk9dys9bnVsbD09dj8xOk1hdGgucmFuZG9tKCl8fC4xLHo9eC5sZW5ndGg7Zm9yKGsmJihqPWc9PT1ufHxnfHxrKTtzIT09eiYmbnVsbCE9KGw9eFtzXSk7cysrKXtpZihlJiZsKXtvPTAsZ3x8bC5vd25lckRvY3VtZW50PT09bnx8KG0obCksaD0hcCk7d2hpbGUocT1hW28rK10paWYocShsLGd8fG4saCkpe2kucHVzaChsKTticmVha31rJiYodz15KX1jJiYoKGw9IXEmJmwpJiZyLS0sZiYmdC5wdXNoKGwpKX1pZihyKz1zLGMmJnMhPT1yKXtvPTA7d2hpbGUocT1iW28rK10pcSh0LHUsZyxoKTtpZihmKXtpZihyPjApd2hpbGUocy0tKXRbc118fHVbc118fCh1W3NdPUYuY2FsbChpKSk7dT11YSh1KX1ILmFwcGx5KGksdSksayYmIWYmJnUubGVuZ3RoPjAmJnIrYi5sZW5ndGg+MSYmZmEudW5pcXVlU29ydChpKX1yZXR1cm4gayYmKHc9eSxqPXYpLHR9O3JldHVybiBjP2hhKGYpOmZ9cmV0dXJuIGg9ZmEuY29tcGlsZT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1bXSxmPUFbYSsiICJdO2lmKCFmKXtifHwoYj1nKGEpKSxjPWIubGVuZ3RoO3doaWxlKGMtLSlmPXdhKGJbY10pLGZbdV0/ZC5wdXNoKGYpOmUucHVzaChmKTtmPUEoYSx4YShlLGQpKSxmLnNlbGVjdG9yPWF9cmV0dXJuIGZ9LGk9ZmEuc2VsZWN0PWZ1bmN0aW9uKGEsYixlLGYpe3ZhciBpLGosayxsLG0sbj0iZnVuY3Rpb24iPT10eXBlb2YgYSYmYSxvPSFmJiZnKGE9bi5zZWxlY3Rvcnx8YSk7aWYoZT1lfHxbXSwxPT09by5sZW5ndGgpe2lmKGo9b1swXT1vWzBdLnNsaWNlKDApLGoubGVuZ3RoPjImJiJJRCI9PT0oaz1qWzBdKS50eXBlJiZjLmdldEJ5SWQmJjk9PT1iLm5vZGVUeXBlJiZwJiZkLnJlbGF0aXZlW2pbMV0udHlwZV0pe2lmKGI9KGQuZmluZC5JRChrLm1hdGNoZXNbMF0ucmVwbGFjZShiYSxjYSksYil8fFtdKVswXSwhYilyZXR1cm4gZTtuJiYoYj1iLnBhcmVudE5vZGUpLGE9YS5zbGljZShqLnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1pPVcubmVlZHNDb250ZXh0LnRlc3QoYSk/MDpqLmxlbmd0aDt3aGlsZShpLS0pe2lmKGs9altpXSxkLnJlbGF0aXZlW2w9ay50eXBlXSlicmVhaztpZigobT1kLmZpbmRbbF0pJiYoZj1tKGsubWF0Y2hlc1swXS5yZXBsYWNlKGJhLGNhKSxfLnRlc3QoalswXS50eXBlKSYmb2EoYi5wYXJlbnROb2RlKXx8YikpKXtpZihqLnNwbGljZShpLDEpLGE9Zi5sZW5ndGgmJnFhKGopLCFhKXJldHVybiBILmFwcGx5KGUsZiksZTticmVha319fXJldHVybihufHxoKGEsbykpKGYsYiwhcCxlLCFifHxfLnRlc3QoYSkmJm9hKGIucGFyZW50Tm9kZSl8fGIpLGV9LGMuc29ydFN0YWJsZT11LnNwbGl0KCIiKS5zb3J0KEIpLmpvaW4oIiIpPT09dSxjLmRldGVjdER1cGxpY2F0ZXM9ISFsLG0oKSxjLnNvcnREZXRhY2hlZD1pYShmdW5jdGlvbihhKXtyZXR1cm4gMSZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKG4uY3JlYXRlRWxlbWVudCgiZGl2IikpfSksaWEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPSI8YSBocmVmPScjJz48L2E+IiwiIyI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIil9KXx8amEoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYz92b2lkIDA6YS5nZXRBdHRyaWJ1dGUoYiwidHlwZSI9PT1iLnRvTG93ZXJDYXNlKCk/MToyKX0pLGMuYXR0cmlidXRlcyYmaWEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPSI8aW5wdXQvPiIsYS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSwiIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoInZhbHVlIil9KXx8amEoInZhbHVlIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGN8fCJpbnB1dCIhPT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk/dm9pZCAwOmEuZGVmYXVsdFZhbHVlfSksaWEoZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWEuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpfSl8fGphKEssZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBjP3ZvaWQgMDphW2JdPT09ITA/Yi50b0xvd2VyQ2FzZSgpOihkPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmQuc3BlY2lmaWVkP2QudmFsdWU6bnVsbH0pLGZhfShhKTtuLmZpbmQ9dCxuLmV4cHI9dC5zZWxlY3RvcnMsbi5leHByWyI6Il09bi5leHByLnBzZXVkb3Msbi51bmlxdWVTb3J0PW4udW5pcXVlPXQudW5pcXVlU29ydCxuLnRleHQ9dC5nZXRUZXh0LG4uaXNYTUxEb2M9dC5pc1hNTCxuLmNvbnRhaW5zPXQuY29udGFpbnM7dmFyIHU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9dm9pZCAwIT09Yzt3aGlsZSgoYT1hW2JdKSYmOSE9PWEubm9kZVR5cGUpaWYoMT09PWEubm9kZVR5cGUpe2lmKGUmJm4oYSkuaXMoYykpYnJlYWs7ZC5wdXNoKGEpfXJldHVybiBkfSx2PWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdO2E7YT1hLm5leHRTaWJsaW5nKTE9PT1hLm5vZGVUeXBlJiZhIT09YiYmYy5wdXNoKGEpO3JldHVybiBjfSx3PW4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQseD0vXjwoW1x3LV0rKVxzKlwvPz4oPzo8XC9cMT58KSQvLHk9L14uW146I1xbXC4sXSokLztmdW5jdGlvbiB6KGEsYixjKXtpZihuLmlzRnVuY3Rpb24oYikpcmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEsZCl7cmV0dXJuISFiLmNhbGwoYSxkLGEpIT09Y30pO2lmKGIubm9kZVR5cGUpcmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBhPT09YiE9PWN9KTtpZigic3RyaW5nIj09dHlwZW9mIGIpe2lmKHkudGVzdChiKSlyZXR1cm4gbi5maWx0ZXIoYixhLGMpO2I9bi5maWx0ZXIoYixhKX1yZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGguY2FsbChiLGEpPi0xIT09Y30pfW4uZmlsdGVyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1iWzBdO3JldHVybiBjJiYoYT0iOm5vdCgiK2ErIikiKSwxPT09Yi5sZW5ndGgmJjE9PT1kLm5vZGVUeXBlP24uZmluZC5tYXRjaGVzU2VsZWN0b3IoZCxhKT9bZF06W106bi5maW5kLm1hdGNoZXMoYSxuLmdyZXAoYixmdW5jdGlvbihhKXtyZXR1cm4gMT09PWEubm9kZVR5cGV9KSl9LG4uZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5sZW5ndGgsZD1bXSxlPXRoaXM7aWYoInN0cmluZyIhPXR5cGVvZiBhKXJldHVybiB0aGlzLnB1c2hTdGFjayhuKGEpLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7Yz5iO2IrKylpZihuLmNvbnRhaW5zKGVbYl0sdGhpcykpcmV0dXJuITB9KSk7Zm9yKGI9MDtjPmI7YisrKW4uZmluZChhLGVbYl0sZCk7cmV0dXJuIGQ9dGhpcy5wdXNoU3RhY2soYz4xP24udW5pcXVlKGQpOmQpLGQuc2VsZWN0b3I9dGhpcy5zZWxlY3Rvcj90aGlzLnNlbGVjdG9yKyIgIithOmEsZH0sZmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh6KHRoaXMsYXx8W10sITEpKX0sbm90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh6KHRoaXMsYXx8W10sITApKX0saXM6ZnVuY3Rpb24oYSl7cmV0dXJuISF6KHRoaXMsInN0cmluZyI9PXR5cGVvZiBhJiZ3LnRlc3QoYSk/bihhKTphfHxbXSwhMSkubGVuZ3RofX0pO3ZhciBBLEI9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0qKSkkLyxDPW4uZm4uaW5pdD1mdW5jdGlvbihhLGIsYyl7dmFyIGUsZjtpZighYSlyZXR1cm4gdGhpcztpZihjPWN8fEEsInN0cmluZyI9PXR5cGVvZiBhKXtpZihlPSI8Ij09PWFbMF0mJiI+Ij09PWFbYS5sZW5ndGgtMV0mJmEubGVuZ3RoPj0zP1tudWxsLGEsbnVsbF06Qi5leGVjKGEpLCFlfHwhZVsxXSYmYilyZXR1cm4hYnx8Yi5qcXVlcnk/KGJ8fGMpLmZpbmQoYSk6dGhpcy5jb25zdHJ1Y3RvcihiKS5maW5kKGEpO2lmKGVbMV0pe2lmKGI9YiBpbnN0YW5jZW9mIG4/YlswXTpiLG4ubWVyZ2UodGhpcyxuLnBhcnNlSFRNTChlWzFdLGImJmIubm9kZVR5cGU/Yi5vd25lckRvY3VtZW50fHxiOmQsITApKSx4LnRlc3QoZVsxXSkmJm4uaXNQbGFpbk9iamVjdChiKSlmb3IoZSBpbiBiKW4uaXNGdW5jdGlvbih0aGlzW2VdKT90aGlzW2VdKGJbZV0pOnRoaXMuYXR0cihlLGJbZV0pO3JldHVybiB0aGlzfXJldHVybiBmPWQuZ2V0RWxlbWVudEJ5SWQoZVsyXSksZiYmZi5wYXJlbnROb2RlJiYodGhpcy5sZW5ndGg9MSx0aGlzWzBdPWYpLHRoaXMuY29udGV4dD1kLHRoaXMuc2VsZWN0b3I9YSx0aGlzfXJldHVybiBhLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6bi5pc0Z1bmN0aW9uKGEpP3ZvaWQgMCE9PWMucmVhZHk/Yy5yZWFkeShhKTphKG4pOih2b2lkIDAhPT1hLnNlbGVjdG9yJiYodGhpcy5zZWxlY3Rvcj1hLnNlbGVjdG9yLHRoaXMuY29udGV4dD1hLmNvbnRleHQpLG4ubWFrZUFycmF5KGEsdGhpcykpfTtDLnByb3RvdHlwZT1uLmZuLEE9bihkKTt2YXIgRD0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxFPXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O24uZm4uZXh0ZW5kKHtoYXM6ZnVuY3Rpb24oYSl7dmFyIGI9bihhLHRoaXMpLGM9Yi5sZW5ndGg7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7Yz5hO2ErKylpZihuLmNvbnRhaW5zKHRoaXMsYlthXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT10aGlzLmxlbmd0aCxmPVtdLGc9dy50ZXN0KGEpfHwic3RyaW5nIiE9dHlwZW9mIGE/bihhLGJ8fHRoaXMuY29udGV4dCk6MDtlPmQ7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmbi5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP24udW5pcXVlU29ydChmKTpmKX0saW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/InN0cmluZyI9PXR5cGVvZiBhP2guY2FsbChuKGEpLHRoaXNbMF0pOmguY2FsbCh0aGlzLGEuanF1ZXJ5P2FbMF06YSk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobi51bmlxdWVTb3J0KG4ubWVyZ2UodGhpcy5nZXQoKSxuKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEYoYSxiKXt3aGlsZSgoYT1hW2JdKSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW4uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gdShhLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHUoYSwicGFyZW50Tm9kZSIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEYoYSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihhKXtyZXR1cm4gRihhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihhKXtyZXR1cm4gdShhLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiB1KGEsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB1KGEsIm5leHRTaWJsaW5nIixjKX0scHJldlVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdShhLCJwcmV2aW91c1NpYmxpbmciLGMpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4gdigoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIHYoYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29udGVudERvY3VtZW50fHxuLm1lcmdlKFtdLGEuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYyxkKXt2YXIgZT1uLm1hcCh0aGlzLGIsYyk7cmV0dXJuIlVudGlsIiE9PWEuc2xpY2UoLTUpJiYoZD1jKSxkJiYic3RyaW5nIj09dHlwZW9mIGQmJihlPW4uZmlsdGVyKGQsZSkpLHRoaXMubGVuZ3RoPjEmJihFW2FdfHxuLnVuaXF1ZVNvcnQoZSksRC50ZXN0KGEpJiZlLnJldmVyc2UoKSksdGhpcy5wdXNoU3RhY2soZSl9fSk7dmFyIEc9L1xTKy9nO2Z1bmN0aW9uIEgoYSl7dmFyIGI9e307cmV0dXJuIG4uZWFjaChhLm1hdGNoKEcpfHxbXSxmdW5jdGlvbihhLGMpe2JbY109ITB9KSxifW4uQ2FsbGJhY2tzPWZ1bmN0aW9uKGEpe2E9InN0cmluZyI9PXR5cGVvZiBhP0goYSk6bi5leHRlbmQoe30sYSk7dmFyIGIsYyxkLGUsZj1bXSxnPVtdLGg9LTEsaT1mdW5jdGlvbigpe2ZvcihlPWEub25jZSxkPWI9ITA7Zy5sZW5ndGg7aD0tMSl7Yz1nLnNoaWZ0KCk7d2hpbGUoKytoPGYubGVuZ3RoKWZbaF0uYXBwbHkoY1swXSxjWzFdKT09PSExJiZhLnN0b3BPbkZhbHNlJiYoaD1mLmxlbmd0aCxjPSExKX1hLm1lbW9yeXx8KGM9ITEpLGI9ITEsZSYmKGY9Yz9bXToiIil9LGo9e2FkZDpmdW5jdGlvbigpe3JldHVybiBmJiYoYyYmIWImJihoPWYubGVuZ3RoLTEsZy5wdXNoKGMpKSxmdW5jdGlvbiBkKGIpe24uZWFjaChiLGZ1bmN0aW9uKGIsYyl7bi5pc0Z1bmN0aW9uKGMpP2EudW5pcXVlJiZqLmhhcyhjKXx8Zi5wdXNoKGMpOmMmJmMubGVuZ3RoJiYic3RyaW5nIiE9PW4udHlwZShjKSYmZChjKX0pfShhcmd1bWVudHMpLGMmJiFiJiZpKCkpLHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiBuLmVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKGEsYil7dmFyIGM7d2hpbGUoKGM9bi5pbkFycmF5KGIsZixjKSk+LTEpZi5zcGxpY2UoYywxKSxoPj1jJiZoLS19KSx0aGlzfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/bi5pbkFycmF5KGEsZik+LTE6Zi5sZW5ndGg+MH0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gZiYmKGY9W10pLHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gZT1nPVtdLGY9Yz0iIix0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFmfSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGU9Zz1bXSxjfHwoZj1jPSIiKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWV9LGZpcmVXaXRoOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGV8fChjPWN8fFtdLGM9W2EsYy5zbGljZT9jLnNsaWNlKCk6Y10sZy5wdXNoKGMpLGJ8fGkoKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBqLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZH19O3JldHVybiBqfSxuLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9W1sicmVzb2x2ZSIsImRvbmUiLG4uQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCJyZXNvbHZlZCJdLFsicmVqZWN0IiwiZmFpbCIsbi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlamVjdGVkIl0sWyJub3RpZnkiLCJwcm9ncmVzcyIsbi5DYWxsYmFja3MoIm1lbW9yeSIpXV0sYz0icGVuZGluZyIsZD17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gY30sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiBuLkRlZmVycmVkKGZ1bmN0aW9uKGMpe24uZWFjaChiLGZ1bmN0aW9uKGIsZil7dmFyIGc9bi5pc0Z1bmN0aW9uKGFbYl0pJiZhW2JdO2VbZlsxXV0oZnVuY3Rpb24oKXt2YXIgYT1nJiZnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthJiZuLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9hLnByb21pc2UoKS5wcm9ncmVzcyhjLm5vdGlmeSkuZG9uZShjLnJlc29sdmUpLmZhaWwoYy5yZWplY3QpOmNbZlswXSsiV2l0aCJdKHRoaXM9PT1kP2MucHJvbWlzZSgpOnRoaXMsZz9bYV06YXJndW1lbnRzKX0pfSksYT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hP24uZXh0ZW5kKGEsZCk6ZH19LGU9e307cmV0dXJuIGQucGlwZT1kLnRoZW4sbi5lYWNoKGIsZnVuY3Rpb24oYSxmKXt2YXIgZz1mWzJdLGg9ZlszXTtkW2ZbMV1dPWcuYWRkLGgmJmcuYWRkKGZ1bmN0aW9uKCl7Yz1ofSxiWzFeYV1bMl0uZGlzYWJsZSxiWzJdWzJdLmxvY2spLGVbZlswXV09ZnVuY3Rpb24oKXtyZXR1cm4gZVtmWzBdKyJXaXRoIl0odGhpcz09PWU/ZDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZVtmWzBdKyJXaXRoIl09Zy5maXJlV2l0aH0pLGQucHJvbWlzZShlKSxhJiZhLmNhbGwoZSxlKSxlfSx3aGVuOmZ1bmN0aW9uKGEpe3ZhciBiPTAsYz1lLmNhbGwoYXJndW1lbnRzKSxkPWMubGVuZ3RoLGY9MSE9PWR8fGEmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2Q6MCxnPTE9PT1mP2E6bi5EZWZlcnJlZCgpLGg9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtiW2FdPXRoaXMsY1thXT1hcmd1bWVudHMubGVuZ3RoPjE/ZS5jYWxsKGFyZ3VtZW50cyk6ZCxjPT09aT9nLm5vdGlmeVdpdGgoYixjKTotLWZ8fGcucmVzb2x2ZVdpdGgoYixjKX19LGksaixrO2lmKGQ+MSlmb3IoaT1uZXcgQXJyYXkoZCksaj1uZXcgQXJyYXkoZCksaz1uZXcgQXJyYXkoZCk7ZD5iO2IrKyljW2JdJiZuLmlzRnVuY3Rpb24oY1tiXS5wcm9taXNlKT9jW2JdLnByb21pc2UoKS5wcm9ncmVzcyhoKGIsaixpKSkuZG9uZShoKGIsayxjKSkuZmFpbChnLnJlamVjdCk6LS1mO3JldHVybiBmfHxnLnJlc29sdmVXaXRoKGssYyksZy5wcm9taXNlKCl9fSk7dmFyIEk7bi5mbi5yZWFkeT1mdW5jdGlvbihhKXtyZXR1cm4gbi5yZWFkeS5wcm9taXNlKCkuZG9uZShhKSx0aGlzfSxuLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oYSl7YT9uLnJlYWR5V2FpdCsrOm4ucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihhKXsoYT09PSEwPy0tbi5yZWFkeVdhaXQ6bi5pc1JlYWR5KXx8KG4uaXNSZWFkeT0hMCxhIT09ITAmJi0tbi5yZWFkeVdhaXQ+MHx8KEkucmVzb2x2ZVdpdGgoZCxbbl0pLG4uZm4udHJpZ2dlckhhbmRsZXImJihuKGQpLnRyaWdnZXJIYW5kbGVyKCJyZWFkeSIpLG4oZCkub2ZmKCJyZWFkeSIpKSkpfX0pO2Z1bmN0aW9uIEooKXtkLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLEopLGEucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsSiksbi5yZWFkeSgpfW4ucmVhZHkucHJvbWlzZT1mdW5jdGlvbihiKXtyZXR1cm4gSXx8KEk9bi5EZWZlcnJlZCgpLCJjb21wbGV0ZSI9PT1kLnJlYWR5U3RhdGV8fCJsb2FkaW5nIiE9PWQucmVhZHlTdGF0ZSYmIWQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsP2Euc2V0VGltZW91dChuLnJlYWR5KTooZC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixKKSxhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLEopKSksSS5wcm9taXNlKGIpfSxuLnJlYWR5LnByb21pc2UoKTt2YXIgSz1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXt2YXIgaD0wLGk9YS5sZW5ndGgsaj1udWxsPT1jO2lmKCJvYmplY3QiPT09bi50eXBlKGMpKXtlPSEwO2ZvcihoIGluIGMpSyhhLGIsaCxjW2hdLCEwLGYsZyl9ZWxzZSBpZih2b2lkIDAhPT1kJiYoZT0hMCxuLmlzRnVuY3Rpb24oZCl8fChnPSEwKSxqJiYoZz8oYi5jYWxsKGEsZCksYj1udWxsKTooaj1iLGI9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBqLmNhbGwobihhKSxjKX0pKSxiKSlmb3IoO2k+aDtoKyspYihhW2hdLGMsZz9kOmQuY2FsbChhW2hdLGgsYihhW2hdLGMpKSk7cmV0dXJuIGU/YTpqP2IuY2FsbChhKTppP2IoYVswXSxjKTpmfSxMPWZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZXx8OT09PWEubm9kZVR5cGV8fCErYS5ub2RlVHlwZX07ZnVuY3Rpb24gTSgpe3RoaXMuZXhwYW5kbz1uLmV4cGFuZG8rTS51aWQrK31NLnVpZD0xLE0ucHJvdG90eXBlPXtyZWdpc3RlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWJ8fHt9O3JldHVybiBhLm5vZGVUeXBlP2FbdGhpcy5leHBhbmRvXT1jOk9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLHRoaXMuZXhwYW5kbyx7dmFsdWU6Yyx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxhW3RoaXMuZXhwYW5kb119LGNhY2hlOmZ1bmN0aW9uKGEpe2lmKCFMKGEpKXJldHVybnt9O3ZhciBiPWFbdGhpcy5leHBhbmRvXTtyZXR1cm4gYnx8KGI9e30sTChhKSYmKGEubm9kZVR5cGU/YVt0aGlzLmV4cGFuZG9dPWI6T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsdGhpcy5leHBhbmRvLHt2YWx1ZTpiLGNvbmZpZ3VyYWJsZTohMH0pKSksYn0sc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPXRoaXMuY2FjaGUoYSk7aWYoInN0cmluZyI9PXR5cGVvZiBiKWVbYl09YztlbHNlIGZvcihkIGluIGIpZVtkXT1iW2RdO3JldHVybiBlfSxnZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdm9pZCAwPT09Yj90aGlzLmNhY2hlKGEpOmFbdGhpcy5leHBhbmRvXSYmYVt0aGlzLmV4cGFuZG9dW2JdfSxhY2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiB2b2lkIDA9PT1ifHxiJiYic3RyaW5nIj09dHlwZW9mIGImJnZvaWQgMD09PWM/KGQ9dGhpcy5nZXQoYSxiKSx2b2lkIDAhPT1kP2Q6dGhpcy5nZXQoYSxuLmNhbWVsQ2FzZShiKSkpOih0aGlzLnNldChhLGIsYyksdm9pZCAwIT09Yz9jOmIpfSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj1hW3RoaXMuZXhwYW5kb107aWYodm9pZCAwIT09Zil7aWYodm9pZCAwPT09Yil0aGlzLnJlZ2lzdGVyKGEpO2Vsc2V7bi5pc0FycmF5KGIpP2Q9Yi5jb25jYXQoYi5tYXAobi5jYW1lbENhc2UpKTooZT1uLmNhbWVsQ2FzZShiKSxiIGluIGY/ZD1bYixlXTooZD1lLGQ9ZCBpbiBmP1tkXTpkLm1hdGNoKEcpfHxbXSkpLGM9ZC5sZW5ndGg7d2hpbGUoYy0tKWRlbGV0ZSBmW2RbY11dfSh2b2lkIDA9PT1ifHxuLmlzRW1wdHlPYmplY3QoZikpJiYoYS5ub2RlVHlwZT9hW3RoaXMuZXhwYW5kb109dm9pZCAwOmRlbGV0ZSBhW3RoaXMuZXhwYW5kb10pfX0saGFzRGF0YTpmdW5jdGlvbihhKXt2YXIgYj1hW3RoaXMuZXhwYW5kb107cmV0dXJuIHZvaWQgMCE9PWImJiFuLmlzRW1wdHlPYmplY3QoYil9fTt2YXIgTj1uZXcgTSxPPW5ldyBNLFA9L14oPzpce1tcd1xXXSpcfXxcW1tcd1xXXSpcXSkkLyxRPS9bQS1aXS9nO2Z1bmN0aW9uIFIoYSxiLGMpe3ZhciBkO2lmKHZvaWQgMD09PWMmJjE9PT1hLm5vZGVUeXBlKWlmKGQ9ImRhdGEtIitiLnJlcGxhY2UoUSwiLSQmIikudG9Mb3dlckNhc2UoKSxjPWEuZ2V0QXR0cmlidXRlKGQpLCJzdHJpbmciPT10eXBlb2YgYyl7dHJ5e2M9InRydWUiPT09Yz8hMDoiZmFsc2UiPT09Yz8hMToibnVsbCI9PT1jP251bGw6K2MrIiI9PT1jPytjOlAudGVzdChjKT9uLnBhcnNlSlNPTihjKTpjOwp9Y2F0Y2goZSl7fU8uc2V0KGEsYixjKX1lbHNlIGM9dm9pZCAwO3JldHVybiBjfW4uZXh0ZW5kKHtoYXNEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBPLmhhc0RhdGEoYSl8fE4uaGFzRGF0YShhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIE8uYWNjZXNzKGEsYixjKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe08ucmVtb3ZlKGEsYil9LF9kYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTi5hY2Nlc3MoYSxiLGMpfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe04ucmVtb3ZlKGEsYil9fSksbi5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzWzBdLGc9ZiYmZi5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PWEpe2lmKHRoaXMubGVuZ3RoJiYoZT1PLmdldChmKSwxPT09Zi5ub2RlVHlwZSYmIU4uZ2V0KGYsImhhc0RhdGFBdHRycyIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoImRhdGEtIikmJihkPW4uY2FtZWxDYXNlKGQuc2xpY2UoNSkpLFIoZixkLGVbZF0pKSk7Ti5zZXQoZiwiaGFzRGF0YUF0dHJzIiwhMCl9cmV0dXJuIGV9cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBhP3RoaXMuZWFjaChmdW5jdGlvbigpe08uc2V0KHRoaXMsYSl9KTpLKHRoaXMsZnVuY3Rpb24oYil7dmFyIGMsZDtpZihmJiZ2b2lkIDA9PT1iKXtpZihjPU8uZ2V0KGYsYSl8fE8uZ2V0KGYsYS5yZXBsYWNlKFEsIi0kJiIpLnRvTG93ZXJDYXNlKCkpLHZvaWQgMCE9PWMpcmV0dXJuIGM7aWYoZD1uLmNhbWVsQ2FzZShhKSxjPU8uZ2V0KGYsZCksdm9pZCAwIT09YylyZXR1cm4gYztpZihjPVIoZixkLHZvaWQgMCksdm9pZCAwIT09YylyZXR1cm4gY31lbHNlIGQ9bi5jYW1lbENhc2UoYSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9Ty5nZXQodGhpcyxkKTtPLnNldCh0aGlzLGQsYiksYS5pbmRleE9mKCItIik+LTEmJnZvaWQgMCE9PWMmJk8uc2V0KHRoaXMsYSxiKX0pfSxudWxsLGIsYXJndW1lbnRzLmxlbmd0aD4xLG51bGwsITApfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtPLnJlbW92ZSh0aGlzLGEpfSl9fSksbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYT8oYj0oYnx8ImZ4IikrInF1ZXVlIixkPU4uZ2V0KGEsYiksYyYmKCFkfHxuLmlzQXJyYXkoYyk/ZD1OLmFjY2VzcyhhLGIsbi5tYWtlQXJyYXkoYykpOmQucHVzaChjKSksZHx8W10pOnZvaWQgMH0sZGVxdWV1ZTpmdW5jdGlvbihhLGIpe2I9Ynx8ImZ4Ijt2YXIgYz1uLnF1ZXVlKGEsYiksZD1jLmxlbmd0aCxlPWMuc2hpZnQoKSxmPW4uX3F1ZXVlSG9va3MoYSxiKSxnPWZ1bmN0aW9uKCl7bi5kZXF1ZXVlKGEsYil9OyJpbnByb2dyZXNzIj09PWUmJihlPWMuc2hpZnQoKSxkLS0pLGUmJigiZngiPT09YiYmYy51bnNoaWZ0KCJpbnByb2dyZXNzIiksZGVsZXRlIGYuc3RvcCxlLmNhbGwoYSxnLGYpKSwhZCYmZiYmZi5lbXB0eS5maXJlKCl9LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YisicXVldWVIb29rcyI7cmV0dXJuIE4uZ2V0KGEsYyl8fE4uYWNjZXNzKGEsYyx7ZW1wdHk6bi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7Ti5yZW1vdmUoYSxbYisicXVldWUiLGNdKX0pfSl9fSksbi5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYil7dmFyIGM9MjtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGEmJihiPWEsYT0iZngiLGMtLSksYXJndW1lbnRzLmxlbmd0aDxjP24ucXVldWUodGhpc1swXSxhKTp2b2lkIDA9PT1iP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9bi5xdWV1ZSh0aGlzLGEsYik7bi5fcXVldWVIb29rcyh0aGlzLGEpLCJmeCI9PT1hJiYiaW5wcm9ncmVzcyIhPT1jWzBdJiZuLmRlcXVldWUodGhpcyxhKX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRlcXVldWUodGhpcyxhKX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXVlKGF8fCJmeCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0xLGU9bi5EZWZlcnJlZCgpLGY9dGhpcyxnPXRoaXMubGVuZ3RoLGg9ZnVuY3Rpb24oKXstLWR8fGUucmVzb2x2ZVdpdGgoZixbZl0pfTsic3RyaW5nIiE9dHlwZW9mIGEmJihiPWEsYT12b2lkIDApLGE9YXx8ImZ4Ijt3aGlsZShnLS0pYz1OLmdldChmW2ddLGErInF1ZXVlSG9va3MiKSxjJiZjLmVtcHR5JiYoZCsrLGMuZW1wdHkuYWRkKGgpKTtyZXR1cm4gaCgpLGUucHJvbWlzZShiKX19KTt2YXIgUz0vWystXT8oPzpcZCpcLnwpXGQrKD86W2VFXVsrLV0/XGQrfCkvLnNvdXJjZSxUPW5ldyBSZWdFeHAoIl4oPzooWystXSk9fCkoIitTKyIpKFthLXolXSopJCIsImkiKSxVPVsiVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il0sVj1mdW5jdGlvbihhLGIpe3JldHVybiBhPWJ8fGEsIm5vbmUiPT09bi5jc3MoYSwiZGlzcGxheSIpfHwhbi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl9O2Z1bmN0aW9uIFcoYSxiLGMsZCl7dmFyIGUsZj0xLGc9MjAsaD1kP2Z1bmN0aW9uKCl7cmV0dXJuIGQuY3VyKCl9OmZ1bmN0aW9uKCl7cmV0dXJuIG4uY3NzKGEsYiwiIil9LGk9aCgpLGo9YyYmY1szXXx8KG4uY3NzTnVtYmVyW2JdPyIiOiJweCIpLGs9KG4uY3NzTnVtYmVyW2JdfHwicHgiIT09aiYmK2kpJiZULmV4ZWMobi5jc3MoYSxiKSk7aWYoayYma1szXSE9PWope2o9anx8a1szXSxjPWN8fFtdLGs9K2l8fDE7ZG8gZj1mfHwiLjUiLGsvPWYsbi5zdHlsZShhLGIsaytqKTt3aGlsZShmIT09KGY9aCgpL2kpJiYxIT09ZiYmLS1nKX1yZXR1cm4gYyYmKGs9K2t8fCtpfHwwLGU9Y1sxXT9rKyhjWzFdKzEpKmNbMl06K2NbMl0sZCYmKGQudW5pdD1qLGQuc3RhcnQ9ayxkLmVuZD1lKSksZX12YXIgWD0vXig/OmNoZWNrYm94fHJhZGlvKSQvaSxZPS88KFtcdzotXSspLyxaPS9eJHxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSwkPXtvcHRpb246WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSx0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07JC5vcHRncm91cD0kLm9wdGlvbiwkLnRib2R5PSQudGZvb3Q9JC5jb2xncm91cD0kLmNhcHRpb249JC50aGVhZCwkLnRoPSQudGQ7ZnVuY3Rpb24gXyhhLGIpe3ZhciBjPSJ1bmRlZmluZWQiIT10eXBlb2YgYS5nZXRFbGVtZW50c0J5VGFnTmFtZT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGJ8fCIqIik6InVuZGVmaW5lZCIhPXR5cGVvZiBhLnF1ZXJ5U2VsZWN0b3JBbGw/YS5xdWVyeVNlbGVjdG9yQWxsKGJ8fCIqIik6W107cmV0dXJuIHZvaWQgMD09PWJ8fGImJm4ubm9kZU5hbWUoYSxiKT9uLm1lcmdlKFthXSxjKTpjfWZ1bmN0aW9uIGFhKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKU4uc2V0KGFbY10sImdsb2JhbEV2YWwiLCFifHxOLmdldChiW2NdLCJnbG9iYWxFdmFsIikpfXZhciBiYT0vPHwmIz9cdys7LztmdW5jdGlvbiBjYShhLGIsYyxkLGUpe2Zvcih2YXIgZixnLGgsaSxqLGssbD1iLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxtPVtdLG89MCxwPWEubGVuZ3RoO3A+bztvKyspaWYoZj1hW29dLGZ8fDA9PT1mKWlmKCJvYmplY3QiPT09bi50eXBlKGYpKW4ubWVyZ2UobSxmLm5vZGVUeXBlP1tmXTpmKTtlbHNlIGlmKGJhLnRlc3QoZikpe2c9Z3x8bC5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxoPShZLmV4ZWMoZil8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCksaT0kW2hdfHwkLl9kZWZhdWx0LGcuaW5uZXJIVE1MPWlbMV0rbi5odG1sUHJlZmlsdGVyKGYpK2lbMl0saz1pWzBdO3doaWxlKGstLSlnPWcubGFzdENoaWxkO24ubWVyZ2UobSxnLmNoaWxkTm9kZXMpLGc9bC5maXJzdENoaWxkLGcudGV4dENvbnRlbnQ9IiJ9ZWxzZSBtLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShmKSk7bC50ZXh0Q29udGVudD0iIixvPTA7d2hpbGUoZj1tW28rK10paWYoZCYmbi5pbkFycmF5KGYsZCk+LTEpZSYmZS5wdXNoKGYpO2Vsc2UgaWYoaj1uLmNvbnRhaW5zKGYub3duZXJEb2N1bWVudCxmKSxnPV8obC5hcHBlbmRDaGlsZChmKSwic2NyaXB0IiksaiYmYWEoZyksYyl7az0wO3doaWxlKGY9Z1trKytdKVoudGVzdChmLnR5cGV8fCIiKSYmYy5wdXNoKGYpfXJldHVybiBsfSFmdW5jdGlvbigpe3ZhciBhPWQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGI9YS5hcHBlbmRDaGlsZChkLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxjPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtjLnNldEF0dHJpYnV0ZSgidHlwZSIsInJhZGlvIiksYy5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCJjaGVja2VkIiksYy5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJ0IiksYi5hcHBlbmRDaGlsZChjKSxsLmNoZWNrQ2xvbmU9Yi5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsYi5pbm5lckhUTUw9Ijx0ZXh0YXJlYT54PC90ZXh0YXJlYT4iLGwubm9DbG9uZUNoZWNrZWQ9ISFiLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZX0oKTt2YXIgZGE9L15rZXkvLGVhPS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudXxkcmFnfGRyb3ApfGNsaWNrLyxmYT0vXihbXi5dKikoPzpcLiguKyl8KS87ZnVuY3Rpb24gZ2EoKXtyZXR1cm4hMH1mdW5jdGlvbiBoYSgpe3JldHVybiExfWZ1bmN0aW9uIGlhKCl7dHJ5e3JldHVybiBkLmFjdGl2ZUVsZW1lbnR9Y2F0Y2goYSl7fX1mdW5jdGlvbiBqYShhLGIsYyxkLGUsZil7dmFyIGcsaDtpZigib2JqZWN0Ij09dHlwZW9mIGIpeyJzdHJpbmciIT10eXBlb2YgYyYmKGQ9ZHx8YyxjPXZvaWQgMCk7Zm9yKGggaW4gYilqYShhLGgsYyxkLGJbaF0sZik7cmV0dXJuIGF9aWYobnVsbD09ZCYmbnVsbD09ZT8oZT1jLGQ9Yz12b2lkIDApOm51bGw9PWUmJigic3RyaW5nIj09dHlwZW9mIGM/KGU9ZCxkPXZvaWQgMCk6KGU9ZCxkPWMsYz12b2lkIDApKSxlPT09ITEpZT1oYTtlbHNlIGlmKCFlKXJldHVybiBhO3JldHVybiAxPT09ZiYmKGc9ZSxlPWZ1bmN0aW9uKGEpe3JldHVybiBuKCkub2ZmKGEpLGcuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlLmd1aWQ9Zy5ndWlkfHwoZy5ndWlkPW4uZ3VpZCsrKSksYS5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC5hZGQodGhpcyxiLGUsZCxjKX0pfW4uZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9Ti5nZXQoYSk7aWYocil7Yy5oYW5kbGVyJiYoZj1jLGM9Zi5oYW5kbGVyLGU9Zi5zZWxlY3RvciksYy5ndWlkfHwoYy5ndWlkPW4uZ3VpZCsrKSwoaT1yLmV2ZW50cyl8fChpPXIuZXZlbnRzPXt9KSwoZz1yLmhhbmRsZSl8fChnPXIuaGFuZGxlPWZ1bmN0aW9uKGIpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgbiYmbi5ldmVudC50cmlnZ2VyZWQhPT1iLnR5cGU/bi5ldmVudC5kaXNwYXRjaC5hcHBseShhLGFyZ3VtZW50cyk6dm9pZCAwfSksYj0oYnx8IiIpLm1hdGNoKEcpfHxbIiJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWg9ZmEuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLG8mJihsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30sbz0oZT9sLmRlbGVnYXRlVHlwZTpsLmJpbmRUeXBlKXx8byxsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30saz1uLmV4dGVuZCh7dHlwZTpvLG9yaWdUeXBlOnEsZGF0YTpkLGhhbmRsZXI6YyxndWlkOmMuZ3VpZCxzZWxlY3RvcjplLG5lZWRzQ29udGV4dDplJiZuLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoZSksbmFtZXNwYWNlOnAuam9pbigiLiIpfSxmKSwobT1pW29dKXx8KG09aVtvXT1bXSxtLmRlbGVnYXRlQ291bnQ9MCxsLnNldHVwJiZsLnNldHVwLmNhbGwoYSxkLHAsZykhPT0hMXx8YS5hZGRFdmVudExpc3RlbmVyJiZhLmFkZEV2ZW50TGlzdGVuZXIobyxnKSksbC5hZGQmJihsLmFkZC5jYWxsKGEsayksay5oYW5kbGVyLmd1aWR8fChrLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP20uc3BsaWNlKG0uZGVsZWdhdGVDb3VudCsrLDAsayk6bS5wdXNoKGspLG4uZXZlbnQuZ2xvYmFsW29dPSEwKX19LHJlbW92ZTpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbyxwLHEscj1OLmhhc0RhdGEoYSkmJk4uZ2V0KGEpO2lmKHImJihpPXIuZXZlbnRzKSl7Yj0oYnx8IiIpLm1hdGNoKEcpfHxbIiJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWlmKGg9ZmEuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLG8pe2w9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShkP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxvLG09aVtvXXx8W10saD1oWzJdJiZuZXcgUmVnRXhwKCIoXnxcXC4pIitwLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpLGc9Zj1tLmxlbmd0aDt3aGlsZShmLS0paz1tW2ZdLCFlJiZxIT09ay5vcmlnVHlwZXx8YyYmYy5ndWlkIT09ay5ndWlkfHxoJiYhaC50ZXN0KGsubmFtZXNwYWNlKXx8ZCYmZCE9PWsuc2VsZWN0b3ImJigiKioiIT09ZHx8IWsuc2VsZWN0b3IpfHwobS5zcGxpY2UoZiwxKSxrLnNlbGVjdG9yJiZtLmRlbGVnYXRlQ291bnQtLSxsLnJlbW92ZSYmbC5yZW1vdmUuY2FsbChhLGspKTtnJiYhbS5sZW5ndGgmJihsLnRlYXJkb3duJiZsLnRlYXJkb3duLmNhbGwoYSxwLHIuaGFuZGxlKSE9PSExfHxuLnJlbW92ZUV2ZW50KGEsbyxyLmhhbmRsZSksZGVsZXRlIGlbb10pfWVsc2UgZm9yKG8gaW4gaSluLmV2ZW50LnJlbW92ZShhLG8rYltqXSxjLGQsITApO24uaXNFbXB0eU9iamVjdChpKSYmTi5yZW1vdmUoYSwiaGFuZGxlIGV2ZW50cyIpfX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YT1uLmV2ZW50LmZpeChhKTt2YXIgYixjLGQsZixnLGg9W10saT1lLmNhbGwoYXJndW1lbnRzKSxqPShOLmdldCh0aGlzLCJldmVudHMiKXx8e30pW2EudHlwZV18fFtdLGs9bi5ldmVudC5zcGVjaWFsW2EudHlwZV18fHt9O2lmKGlbMF09YSxhLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWsucHJlRGlzcGF0Y2h8fGsucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGEpIT09ITEpe2g9bi5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsYSxqKSxiPTA7d2hpbGUoKGY9aFtiKytdKSYmIWEuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7YS5jdXJyZW50VGFyZ2V0PWYuZWxlbSxjPTA7d2hpbGUoKGc9Zi5oYW5kbGVyc1tjKytdKSYmIWEuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSlhLnJuYW1lc3BhY2UmJiFhLnJuYW1lc3BhY2UudGVzdChnLm5hbWVzcGFjZSl8fChhLmhhbmRsZU9iaj1nLGEuZGF0YT1nLmRhdGEsZD0oKG4uZXZlbnQuc3BlY2lhbFtnLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8Zy5oYW5kbGVyKS5hcHBseShmLmVsZW0saSksdm9pZCAwIT09ZCYmKGEucmVzdWx0PWQpPT09ITEmJihhLnByZXZlbnREZWZhdWx0KCksYS5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBrLnBvc3REaXNwYXRjaCYmay5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLGEpLGEucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnPVtdLGg9Yi5kZWxlZ2F0ZUNvdW50LGk9YS50YXJnZXQ7aWYoaCYmaS5ub2RlVHlwZSYmKCJjbGljayIhPT1hLnR5cGV8fGlzTmFOKGEuYnV0dG9uKXx8YS5idXR0b248MSkpZm9yKDtpIT09dGhpcztpPWkucGFyZW50Tm9kZXx8dGhpcylpZigxPT09aS5ub2RlVHlwZSYmKGkuZGlzYWJsZWQhPT0hMHx8ImNsaWNrIiE9PWEudHlwZSkpe2ZvcihkPVtdLGM9MDtoPmM7YysrKWY9YltjXSxlPWYuc2VsZWN0b3IrIiAiLHZvaWQgMD09PWRbZV0mJihkW2VdPWYubmVlZHNDb250ZXh0P24oZSx0aGlzKS5pbmRleChpKT4tMTpuLmZpbmQoZSx0aGlzLG51bGwsW2ldKS5sZW5ndGgpLGRbZV0mJmQucHVzaChmKTtkLmxlbmd0aCYmZy5wdXNoKHtlbGVtOmksaGFuZGxlcnM6ZH0pfXJldHVybiBoPGIubGVuZ3RoJiZnLnB1c2goe2VsZW06dGhpcyxoYW5kbGVyczpiLnNsaWNlKGgpfSksZ30scHJvcHM6ImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGRldGFpbCBldmVudFBoYXNlIG1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2giLnNwbGl0KCIgIiksZml4SG9va3M6e30sa2V5SG9va3M6e3Byb3BzOiJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlIi5zcGxpdCgiICIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe3JldHVybiBudWxsPT1hLndoaWNoJiYoYS53aGljaD1udWxsIT1iLmNoYXJDb2RlP2IuY2hhckNvZGU6Yi5rZXlDb2RlKSxhfX0sbW91c2VIb29rczp7cHJvcHM6ImJ1dHRvbiBidXR0b25zIGNsaWVudFggY2xpZW50WSBvZmZzZXRYIG9mZnNldFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudCIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGYsZz1iLmJ1dHRvbjtyZXR1cm4gbnVsbD09YS5wYWdlWCYmbnVsbCE9Yi5jbGllbnRYJiYoYz1hLnRhcmdldC5vd25lckRvY3VtZW50fHxkLGU9Yy5kb2N1bWVudEVsZW1lbnQsZj1jLmJvZHksYS5wYWdlWD1iLmNsaWVudFgrKGUmJmUuc2Nyb2xsTGVmdHx8ZiYmZi5zY3JvbGxMZWZ0fHwwKS0oZSYmZS5jbGllbnRMZWZ0fHxmJiZmLmNsaWVudExlZnR8fDApLGEucGFnZVk9Yi5jbGllbnRZKyhlJiZlLnNjcm9sbFRvcHx8ZiYmZi5zY3JvbGxUb3B8fDApLShlJiZlLmNsaWVudFRvcHx8ZiYmZi5jbGllbnRUb3B8fDApKSxhLndoaWNofHx2b2lkIDA9PT1nfHwoYS53aGljaD0xJmc/MToyJmc/Mzo0Jmc/MjowKSxhfX0sZml4OmZ1bmN0aW9uKGEpe2lmKGFbbi5leHBhbmRvXSlyZXR1cm4gYTt2YXIgYixjLGUsZj1hLnR5cGUsZz1hLGg9dGhpcy5maXhIb29rc1tmXTtofHwodGhpcy5maXhIb29rc1tmXT1oPWVhLnRlc3QoZik/dGhpcy5tb3VzZUhvb2tzOmRhLnRlc3QoZik/dGhpcy5rZXlIb29rczp7fSksZT1oLnByb3BzP3RoaXMucHJvcHMuY29uY2F0KGgucHJvcHMpOnRoaXMucHJvcHMsYT1uZXcgbi5FdmVudChnKSxiPWUubGVuZ3RoO3doaWxlKGItLSljPWVbYl0sYVtjXT1nW2NdO3JldHVybiBhLnRhcmdldHx8KGEudGFyZ2V0PWQpLDM9PT1hLnRhcmdldC5ub2RlVHlwZSYmKGEudGFyZ2V0PWEudGFyZ2V0LnBhcmVudE5vZGUpLGguZmlsdGVyP2guZmlsdGVyKGEsZyk6YX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGZvY3VzOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMhPT1pYSgpJiZ0aGlzLmZvY3VzPyh0aGlzLmZvY3VzKCksITEpOnZvaWQgMH0sZGVsZWdhdGVUeXBlOiJmb2N1c2luIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzPT09aWEoKSYmdGhpcy5ibHVyPyh0aGlzLmJsdXIoKSwhMSk6dm9pZCAwfSxkZWxlZ2F0ZVR5cGU6ImZvY3Vzb3V0In0sY2xpY2s6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4iY2hlY2tib3giPT09dGhpcy50eXBlJiZ0aGlzLmNsaWNrJiZuLm5vZGVOYW1lKHRoaXMsImlucHV0Iik/KHRoaXMuY2xpY2soKSwhMSk6dm9pZCAwfSxfZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4gbi5ub2RlTmFtZShhLnRhcmdldCwiYSIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7dm9pZCAwIT09YS5yZXN1bHQmJmEub3JpZ2luYWxFdmVudCYmKGEub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1hLnJlc3VsdCl9fX19LG4ucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYyl9LG4uRXZlbnQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIG4uRXZlbnQ/KGEmJmEudHlwZT8odGhpcy5vcmlnaW5hbEV2ZW50PWEsdGhpcy50eXBlPWEudHlwZSx0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1hLmRlZmF1bHRQcmV2ZW50ZWR8fHZvaWQgMD09PWEuZGVmYXVsdFByZXZlbnRlZCYmYS5yZXR1cm5WYWx1ZT09PSExP2dhOmhhKTp0aGlzLnR5cGU9YSxiJiZuLmV4dGVuZCh0aGlzLGIpLHRoaXMudGltZVN0YW1wPWEmJmEudGltZVN0YW1wfHxuLm5vdygpLHZvaWQodGhpc1tuLmV4cGFuZG9dPSEwKSk6bmV3IG4uRXZlbnQoYSxiKX0sbi5FdmVudC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOm4uRXZlbnQsaXNEZWZhdWx0UHJldmVudGVkOmhhLGlzUHJvcGFnYXRpb25TdG9wcGVkOmhhLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOmhhLGlzU2ltdWxhdGVkOiExLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPWdhLGEmJiF0aGlzLmlzU2ltdWxhdGVkJiZhLnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPWdhLGEmJiF0aGlzLmlzU2ltdWxhdGVkJiZhLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1nYSxhJiYhdGhpcy5pc1NpbXVsYXRlZCYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0sbi5lYWNoKHttb3VzZWVudGVyOiJtb3VzZW92ZXIiLG1vdXNlbGVhdmU6Im1vdXNlb3V0Iixwb2ludGVyZW50ZXI6InBvaW50ZXJvdmVyIixwb2ludGVybGVhdmU6InBvaW50ZXJvdXQifSxmdW5jdGlvbihhLGIpe24uZXZlbnQuc3BlY2lhbFthXT17ZGVsZWdhdGVUeXBlOmIsYmluZFR5cGU6YixoYW5kbGU6ZnVuY3Rpb24oYSl7dmFyIGMsZD10aGlzLGU9YS5yZWxhdGVkVGFyZ2V0LGY9YS5oYW5kbGVPYmo7cmV0dXJuIGUmJihlPT09ZHx8bi5jb250YWlucyhkLGUpKXx8KGEudHlwZT1mLm9yaWdUeXBlLGM9Zi5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxhLnR5cGU9YiksY319fSksbi5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBqYSh0aGlzLGEsYixjLGQpfSxvbmU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGphKHRoaXMsYSxiLGMsZCwxKX0sb2ZmOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlO2lmKGEmJmEucHJldmVudERlZmF1bHQmJmEuaGFuZGxlT2JqKXJldHVybiBkPWEuaGFuZGxlT2JqLG4oYS5kZWxlZ2F0ZVRhcmdldCkub2ZmKGQubmFtZXNwYWNlP2Qub3JpZ1R5cGUrIi4iK2QubmFtZXNwYWNlOmQub3JpZ1R5cGUsZC5zZWxlY3RvcixkLmhhbmRsZXIpLHRoaXM7aWYoIm9iamVjdCI9PXR5cGVvZiBhKXtmb3IoZSBpbiBhKXRoaXMub2ZmKGUsYixhW2VdKTtyZXR1cm4gdGhpc31yZXR1cm4gYiE9PSExJiYiZnVuY3Rpb24iIT10eXBlb2YgYnx8KGM9YixiPXZvaWQgMCksYz09PSExJiYoYz1oYSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC5yZW1vdmUodGhpcyxhLGMsYil9KX19KTt2YXIga2E9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1x3Oi1dKylbXj5dKilcLz4vZ2ksbGE9LzxzY3JpcHR8PHN0eWxlfDxsaW5rL2ksbWE9L2NoZWNrZWRccyooPzpbXj1dfD1ccyouY2hlY2tlZC4pL2ksbmE9L150cnVlXC8oLiopLyxvYT0vXlxzKjwhKD86XFtDREFUQVxbfC0tKXwoPzpcXVxdfC0tKT5ccyokL2c7ZnVuY3Rpb24gcGEoYSxiKXtyZXR1cm4gbi5ub2RlTmFtZShhLCJ0YWJsZSIpJiZuLm5vZGVOYW1lKDExIT09Yi5ub2RlVHlwZT9iOmIuZmlyc3RDaGlsZCwidHIiKT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpWzBdfHxhLmFwcGVuZENoaWxkKGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpKTphfWZ1bmN0aW9uIHFhKGEpe3JldHVybiBhLnR5cGU9KG51bGwhPT1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKSsiLyIrYS50eXBlLGF9ZnVuY3Rpb24gcmEoYSl7dmFyIGI9bmEuZXhlYyhhLnR5cGUpO3JldHVybiBiP2EudHlwZT1iWzFdOmEucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksYX1mdW5jdGlvbiBzYShhLGIpe3ZhciBjLGQsZSxmLGcsaCxpLGo7aWYoMT09PWIubm9kZVR5cGUpe2lmKE4uaGFzRGF0YShhKSYmKGY9Ti5hY2Nlc3MoYSksZz1OLnNldChiLGYpLGo9Zi5ldmVudHMpKXtkZWxldGUgZy5oYW5kbGUsZy5ldmVudHM9e307Zm9yKGUgaW4gailmb3IoYz0wLGQ9altlXS5sZW5ndGg7ZD5jO2MrKyluLmV2ZW50LmFkZChiLGUsaltlXVtjXSl9Ty5oYXNEYXRhKGEpJiYoaD1PLmFjY2VzcyhhKSxpPW4uZXh0ZW5kKHt9LGgpLE8uc2V0KGIsaSkpfX1mdW5jdGlvbiB0YShhLGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsiaW5wdXQiPT09YyYmWC50ZXN0KGEudHlwZSk/Yi5jaGVja2VkPWEuY2hlY2tlZDoiaW5wdXQiIT09YyYmInRleHRhcmVhIiE9PWN8fChiLmRlZmF1bHRWYWx1ZT1hLmRlZmF1bHRWYWx1ZSl9ZnVuY3Rpb24gdWEoYSxiLGMsZCl7Yj1mLmFwcGx5KFtdLGIpO3ZhciBlLGcsaCxpLGosayxtPTAsbz1hLmxlbmd0aCxwPW8tMSxxPWJbMF0scj1uLmlzRnVuY3Rpb24ocSk7aWYocnx8bz4xJiYic3RyaW5nIj09dHlwZW9mIHEmJiFsLmNoZWNrQ2xvbmUmJm1hLnRlc3QocSkpcmV0dXJuIGEuZWFjaChmdW5jdGlvbihlKXt2YXIgZj1hLmVxKGUpO3ImJihiWzBdPXEuY2FsbCh0aGlzLGUsZi5odG1sKCkpKSx1YShmLGIsYyxkKX0pO2lmKG8mJihlPWNhKGIsYVswXS5vd25lckRvY3VtZW50LCExLGEsZCksZz1lLmZpcnN0Q2hpbGQsMT09PWUuY2hpbGROb2Rlcy5sZW5ndGgmJihlPWcpLGd8fGQpKXtmb3IoaD1uLm1hcChfKGUsInNjcmlwdCIpLHFhKSxpPWgubGVuZ3RoO28+bTttKyspaj1lLG0hPT1wJiYoaj1uLmNsb25lKGosITAsITApLGkmJm4ubWVyZ2UoaCxfKGosInNjcmlwdCIpKSksYy5jYWxsKGFbbV0saixtKTtpZihpKWZvcihrPWhbaC5sZW5ndGgtMV0ub3duZXJEb2N1bWVudCxuLm1hcChoLHJhKSxtPTA7aT5tO20rKylqPWhbbV0sWi50ZXN0KGoudHlwZXx8IiIpJiYhTi5hY2Nlc3MoaiwiZ2xvYmFsRXZhbCIpJiZuLmNvbnRhaW5zKGssaikmJihqLnNyYz9uLl9ldmFsVXJsJiZuLl9ldmFsVXJsKGouc3JjKTpuLmdsb2JhbEV2YWwoai50ZXh0Q29udGVudC5yZXBsYWNlKG9hLCIiKSkpfXJldHVybiBhfWZ1bmN0aW9uIHZhKGEsYixjKXtmb3IodmFyIGQsZT1iP24uZmlsdGVyKGIsYSk6YSxmPTA7bnVsbCE9KGQ9ZVtmXSk7ZisrKWN8fDEhPT1kLm5vZGVUeXBlfHxuLmNsZWFuRGF0YShfKGQpKSxkLnBhcmVudE5vZGUmJihjJiZuLmNvbnRhaW5zKGQub3duZXJEb2N1bWVudCxkKSYmYWEoXyhkLCJzY3JpcHQiKSksZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGQpKTtyZXR1cm4gYX1uLmV4dGVuZCh7aHRtbFByZWZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKGthLCI8JDE+PC8kMj4iKX0sY2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jbG9uZU5vZGUoITApLGk9bi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSk7aWYoIShsLm5vQ2xvbmVDaGVja2VkfHwxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxuLmlzWE1MRG9jKGEpKSlmb3IoZz1fKGgpLGY9XyhhKSxkPTAsZT1mLmxlbmd0aDtlPmQ7ZCsrKXRhKGZbZF0sZ1tkXSk7aWYoYilpZihjKWZvcihmPWZ8fF8oYSksZz1nfHxfKGgpLGQ9MCxlPWYubGVuZ3RoO2U+ZDtkKyspc2EoZltkXSxnW2RdKTtlbHNlIHNhKGEsaCk7cmV0dXJuIGc9XyhoLCJzY3JpcHQiKSxnLmxlbmd0aD4wJiZhYShnLCFpJiZfKGEsInNjcmlwdCIpKSxofSxjbGVhbkRhdGE6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGMsZCxlPW4uZXZlbnQuc3BlY2lhbCxmPTA7dm9pZCAwIT09KGM9YVtmXSk7ZisrKWlmKEwoYykpe2lmKGI9Y1tOLmV4cGFuZG9dKXtpZihiLmV2ZW50cylmb3IoZCBpbiBiLmV2ZW50cyllW2RdP24uZXZlbnQucmVtb3ZlKGMsZCk6bi5yZW1vdmVFdmVudChjLGQsYi5oYW5kbGUpO2NbTi5leHBhbmRvXT12b2lkIDB9Y1tPLmV4cGFuZG9dJiYoY1tPLmV4cGFuZG9dPXZvaWQgMCl9fX0pLG4uZm4uZXh0ZW5kKHtkb21NYW5pcDp1YSxkZXRhY2g6ZnVuY3Rpb24oYSl7cmV0dXJuIHZhKHRoaXMsYSwhMCl9LHJlbW92ZTpmdW5jdGlvbihhKXtyZXR1cm4gdmEodGhpcyxhKX0sdGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gSyh0aGlzLGZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP24udGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpezEhPT10aGlzLm5vZGVUeXBlJiYxMSE9PXRoaXMubm9kZVR5cGUmJjkhPT10aGlzLm5vZGVUeXBlfHwodGhpcy50ZXh0Q29udGVudD1hKX0pfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiB1YSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIGI9cGEodGhpcyxhKTtiLmFwcGVuZENoaWxkKGEpfX0pfSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHVhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1wYSh0aGlzLGEpO2IuaW5zZXJ0QmVmb3JlKGEsYi5maXJzdENoaWxkKX19KX0sYmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHVhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGEpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMpfSl9LGFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHVhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGEpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMubmV4dFNpYmxpbmcpfSl9LGVtcHR5OmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MDtudWxsIT0oYT10aGlzW2JdKTtiKyspMT09PWEubm9kZVR5cGUmJihuLmNsZWFuRGF0YShfKGEsITEpKSxhLnRleHRDb250ZW50PSIiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1udWxsPT1hPyExOmEsYj1udWxsPT1iP2E6Yix0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiBuLmNsb25lKHRoaXMsYSxiKX0pfSxodG1sOmZ1bmN0aW9uKGEpe3JldHVybiBLKHRoaXMsZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXXx8e30sYz0wLGQ9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09YSYmMT09PWIubm9kZVR5cGUpcmV0dXJuIGIuaW5uZXJIVE1MO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmIWxhLnRlc3QoYSkmJiEkWyhZLmV4ZWMoYSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCldKXthPW4uaHRtbFByZWZpbHRlcihhKTt0cnl7Zm9yKDtkPmM7YysrKWI9dGhpc1tjXXx8e30sMT09PWIubm9kZVR5cGUmJihuLmNsZWFuRGF0YShfKGIsITEpKSxiLmlubmVySFRNTD1hKTtiPTB9Y2F0Y2goZSl7fX1iJiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGEpfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuIHVhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMucGFyZW50Tm9kZTtuLmluQXJyYXkodGhpcyxhKTwwJiYobi5jbGVhbkRhdGEoXyh0aGlzKSksYyYmYy5yZXBsYWNlQ2hpbGQoYix0aGlzKSl9LGEpfX0pLG4uZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhKXtmb3IodmFyIGMsZD1bXSxlPW4oYSksZj1lLmxlbmd0aC0xLGg9MDtmPj1oO2grKyljPWg9PT1mP3RoaXM6dGhpcy5jbG9uZSghMCksbihlW2hdKVtiXShjKSxnLmFwcGx5KGQsYy5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGQpfX0pO3ZhciB3YSx4YT17SFRNTDoiYmxvY2siLEJPRFk6ImJsb2NrIn07ZnVuY3Rpb24geWEoYSxiKXt2YXIgYz1uKGIuY3JlYXRlRWxlbWVudChhKSkuYXBwZW5kVG8oYi5ib2R5KSxkPW4uY3NzKGNbMF0sImRpc3BsYXkiKTtyZXR1cm4gYy5kZXRhY2goKSxkfWZ1bmN0aW9uIHphKGEpe3ZhciBiPWQsYz14YVthXTtyZXR1cm4gY3x8KGM9eWEoYSxiKSwibm9uZSIhPT1jJiZjfHwod2E9KHdhfHxuKCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+IikpLmFwcGVuZFRvKGIuZG9jdW1lbnRFbGVtZW50KSxiPXdhWzBdLmNvbnRlbnREb2N1bWVudCxiLndyaXRlKCksYi5jbG9zZSgpLGM9eWEoYSxiKSx3YS5kZXRhY2goKSkseGFbYV09YyksY312YXIgQWE9L15tYXJnaW4vLEJhPW5ldyBSZWdFeHAoIl4oIitTKyIpKD8hcHgpW2EteiVdKyQiLCJpIiksQ2E9ZnVuY3Rpb24oYil7dmFyIGM9Yi5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O3JldHVybiBjJiZjLm9wZW5lcnx8KGM9YSksYy5nZXRDb21wdXRlZFN0eWxlKGIpfSxEYT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX0sRWE9ZC5kb2N1bWVudEVsZW1lbnQ7IWZ1bmN0aW9uKCl7dmFyIGIsYyxlLGYsZz1kLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGg9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKTtpZihoLnN0eWxlKXtoLnN0eWxlLmJhY2tncm91bmRDbGlwPSJjb250ZW50LWJveCIsaC5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPSIiLGwuY2xlYXJDbG9uZVN0eWxlPSJjb250ZW50LWJveCI9PT1oLnN0eWxlLmJhY2tncm91bmRDbGlwLGcuc3R5bGUuY3NzVGV4dD0iYm9yZGVyOjA7d2lkdGg6OHB4O2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweDtwYWRkaW5nOjA7bWFyZ2luLXRvcDoxcHg7cG9zaXRpb246YWJzb2x1dGUiLGcuYXBwZW5kQ2hpbGQoaCk7ZnVuY3Rpb24gaSgpe2guc3R5bGUuY3NzVGV4dD0iLXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7LW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94O3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7bWFyZ2luOmF1dG87Ym9yZGVyOjFweDtwYWRkaW5nOjFweDt0b3A6MSU7d2lkdGg6NTAlIixoLmlubmVySFRNTD0iIixFYS5hcHBlbmRDaGlsZChnKTt2YXIgZD1hLmdldENvbXB1dGVkU3R5bGUoaCk7Yj0iMSUiIT09ZC50b3AsZj0iMnB4Ij09PWQubWFyZ2luTGVmdCxjPSI0cHgiPT09ZC53aWR0aCxoLnN0eWxlLm1hcmdpblJpZ2h0PSI1MCUiLGU9IjRweCI9PT1kLm1hcmdpblJpZ2h0LEVhLnJlbW92ZUNoaWxkKGcpfW4uZXh0ZW5kKGwse3BpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gaSgpLGJ9LGJveFNpemluZ1JlbGlhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWMmJmkoKSxjfSxwaXhlbE1hcmdpblJpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWMmJmkoKSxlfSxyZWxpYWJsZU1hcmdpbkxlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09YyYmaSgpLGZ9LHJlbGlhYmxlTWFyZ2luUmlnaHQ6ZnVuY3Rpb24oKXt2YXIgYixjPWguYXBwZW5kQ2hpbGQoZC5jcmVhdGVFbGVtZW50KCJkaXYiKSk7cmV0dXJuIGMuc3R5bGUuY3NzVGV4dD1oLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDtib3gtc2l6aW5nOmNvbnRlbnQtYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowIixjLnN0eWxlLm1hcmdpblJpZ2h0PWMuc3R5bGUud2lkdGg9IjAiLGguc3R5bGUud2lkdGg9IjFweCIsRWEuYXBwZW5kQ2hpbGQoZyksYj0hcGFyc2VGbG9hdChhLmdldENvbXB1dGVkU3R5bGUoYykubWFyZ2luUmlnaHQpLEVhLnJlbW92ZUNoaWxkKGcpLGgucmVtb3ZlQ2hpbGQoYyksYn19KX19KCk7ZnVuY3Rpb24gRmEoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5zdHlsZTtyZXR1cm4gYz1jfHxDYShhKSxnPWM/Yy5nZXRQcm9wZXJ0eVZhbHVlKGIpfHxjW2JdOnZvaWQgMCwiIiE9PWcmJnZvaWQgMCE9PWd8fG4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfHwoZz1uLnN0eWxlKGEsYikpLGMmJiFsLnBpeGVsTWFyZ2luUmlnaHQoKSYmQmEudGVzdChnKSYmQWEudGVzdChiKSYmKGQ9aC53aWR0aCxlPWgubWluV2lkdGgsZj1oLm1heFdpZHRoLGgubWluV2lkdGg9aC5tYXhXaWR0aD1oLndpZHRoPWcsZz1jLndpZHRoLGgud2lkdGg9ZCxoLm1pbldpZHRoPWUsaC5tYXhXaWR0aD1mKSx2b2lkIDAhPT1nP2crIiI6Z31mdW5jdGlvbiBHYShhLGIpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYSgpP3ZvaWQgZGVsZXRlIHRoaXMuZ2V0Oih0aGlzLmdldD1iKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX12YXIgSGE9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLElhPXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxKYT17bGV0dGVyU3BhY2luZzoiMCIsZm9udFdlaWdodDoiNDAwIn0sS2E9WyJXZWJraXQiLCJPIiwiTW96IiwibXMiXSxMYT1kLmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlO2Z1bmN0aW9uIE1hKGEpe2lmKGEgaW4gTGEpcmV0dXJuIGE7dmFyIGI9YVswXS50b1VwcGVyQ2FzZSgpK2Euc2xpY2UoMSksYz1LYS5sZW5ndGg7d2hpbGUoYy0tKWlmKGE9S2FbY10rYixhIGluIExhKXJldHVybiBhfWZ1bmN0aW9uIE5hKGEsYixjKXt2YXIgZD1ULmV4ZWMoYik7cmV0dXJuIGQ/TWF0aC5tYXgoMCxkWzJdLShjfHwwKSkrKGRbM118fCJweCIpOmJ9ZnVuY3Rpb24gT2EoYSxiLGMsZCxlKXtmb3IodmFyIGY9Yz09PShkPyJib3JkZXIiOiJjb250ZW50Iik/NDoid2lkdGgiPT09Yj8xOjAsZz0wOzQ+ZjtmKz0yKSJtYXJnaW4iPT09YyYmKGcrPW4uY3NzKGEsYytVW2ZdLCEwLGUpKSxkPygiY29udGVudCI9PT1jJiYoZy09bi5jc3MoYSwicGFkZGluZyIrVVtmXSwhMCxlKSksIm1hcmdpbiIhPT1jJiYoZy09bi5jc3MoYSwiYm9yZGVyIitVW2ZdKyJXaWR0aCIsITAsZSkpKTooZys9bi5jc3MoYSwicGFkZGluZyIrVVtmXSwhMCxlKSwicGFkZGluZyIhPT1jJiYoZys9bi5jc3MoYSwiYm9yZGVyIitVW2ZdKyJXaWR0aCIsITAsZSkpKTtyZXR1cm4gZ31mdW5jdGlvbiBQYShhLGIsYyl7dmFyIGQ9ITAsZT0id2lkdGgiPT09Yj9hLm9mZnNldFdpZHRoOmEub2Zmc2V0SGVpZ2h0LGY9Q2EoYSksZz0iYm9yZGVyLWJveCI9PT1uLmNzcyhhLCJib3hTaXppbmciLCExLGYpO2lmKDA+PWV8fG51bGw9PWUpe2lmKGU9RmEoYSxiLGYpLCgwPmV8fG51bGw9PWUpJiYoZT1hLnN0eWxlW2JdKSxCYS50ZXN0KGUpKXJldHVybiBlO2Q9ZyYmKGwuYm94U2l6aW5nUmVsaWFibGUoKXx8ZT09PWEuc3R5bGVbYl0pLGU9cGFyc2VGbG9hdChlKXx8MH1yZXR1cm4gZStPYShhLGIsY3x8KGc/ImJvcmRlciI6ImNvbnRlbnQiKSxkLGYpKyJweCJ9ZnVuY3Rpb24gUWEoYSxiKXtmb3IodmFyIGMsZCxlLGY9W10sZz0wLGg9YS5sZW5ndGg7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGZbZ109Ti5nZXQoZCwib2xkZGlzcGxheSIpLGM9ZC5zdHlsZS5kaXNwbGF5LGI/KGZbZ118fCJub25lIiE9PWN8fChkLnN0eWxlLmRpc3BsYXk9IiIpLCIiPT09ZC5zdHlsZS5kaXNwbGF5JiZWKGQpJiYoZltnXT1OLmFjY2VzcyhkLCJvbGRkaXNwbGF5Iix6YShkLm5vZGVOYW1lKSkpKTooZT1WKGQpLCJub25lIj09PWMmJmV8fE4uc2V0KGQsIm9sZGRpc3BsYXkiLGU/YzpuLmNzcyhkLCJkaXNwbGF5IikpKSk7Zm9yKGc9MDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoYiYmIm5vbmUiIT09ZC5zdHlsZS5kaXNwbGF5JiYiIiE9PWQuc3R5bGUuZGlzcGxheXx8KGQuc3R5bGUuZGlzcGxheT1iP2ZbZ118fCIiOiJub25lIikpO3JldHVybiBhfW4uZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGEsYil7aWYoYil7dmFyIGM9RmEoYSwib3BhY2l0eSIpO3JldHVybiIiPT09Yz8iMSI6Y319fX0sY3NzTnVtYmVyOnthbmltYXRpb25JdGVyYXRpb25Db3VudDohMCxjb2x1bW5Db3VudDohMCxmaWxsT3BhY2l0eTohMCxmbGV4R3JvdzohMCxmbGV4U2hyaW5rOiEwLGZvbnRXZWlnaHQ6ITAsbGluZUhlaWdodDohMCxvcGFjaXR5OiEwLG9yZGVyOiEwLG9ycGhhbnM6ITAsd2lkb3dzOiEwLHpJbmRleDohMCx6b29tOiEwfSxjc3NQcm9wczp7ImZsb2F0IjoiY3NzRmxvYXQifSxzdHlsZTpmdW5jdGlvbihhLGIsYyxkKXtpZihhJiYzIT09YS5ub2RlVHlwZSYmOCE9PWEubm9kZVR5cGUmJmEuc3R5bGUpe3ZhciBlLGYsZyxoPW4uY2FtZWxDYXNlKGIpLGk9YS5zdHlsZTtyZXR1cm4gYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1NYShoKXx8aCksZz1uLmNzc0hvb2tzW2JdfHxuLmNzc0hvb2tzW2hdLHZvaWQgMD09PWM/ZyYmImdldCJpbiBnJiZ2b2lkIDAhPT0oZT1nLmdldChhLCExLGQpKT9lOmlbYl06KGY9dHlwZW9mIGMsInN0cmluZyI9PT1mJiYoZT1ULmV4ZWMoYykpJiZlWzFdJiYoYz1XKGEsYixlKSxmPSJudW1iZXIiKSxudWxsIT1jJiZjPT09YyYmKCJudW1iZXIiPT09ZiYmKGMrPWUmJmVbM118fChuLmNzc051bWJlcltoXT8iIjoicHgiKSksbC5jbGVhckNsb25lU3R5bGV8fCIiIT09Y3x8MCE9PWIuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwoaVtiXT0iaW5oZXJpdCIpLGcmJiJzZXQiaW4gZyYmdm9pZCAwPT09KGM9Zy5zZXQoYSxjLGQpKXx8KGlbYl09YykpLHZvaWQgMCl9fSxjc3M6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGg9bi5jYW1lbENhc2UoYik7cmV0dXJuIGI9bi5jc3NQcm9wc1toXXx8KG4uY3NzUHJvcHNbaF09TWEoaCl8fGgpLGc9bi5jc3NIb29rc1tiXXx8bi5jc3NIb29rc1toXSxnJiYiZ2V0ImluIGcmJihlPWcuZ2V0KGEsITAsYykpLHZvaWQgMD09PWUmJihlPUZhKGEsYixkKSksIm5vcm1hbCI9PT1lJiZiIGluIEphJiYoZT1KYVtiXSksIiI9PT1jfHxjPyhmPXBhcnNlRmxvYXQoZSksYz09PSEwfHxpc0Zpbml0ZShmKT9mfHwwOmUpOmV9fSksbi5lYWNoKFsiaGVpZ2h0Iiwid2lkdGgiXSxmdW5jdGlvbihhLGIpe24uY3NzSG9va3NbYl09e2dldDpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGM/SGEudGVzdChuLmNzcyhhLCJkaXNwbGF5IikpJiYwPT09YS5vZmZzZXRXaWR0aD9EYShhLElhLGZ1bmN0aW9uKCl7cmV0dXJuIFBhKGEsYixkKX0pOlBhKGEsYixkKTp2b2lkIDB9LHNldDpmdW5jdGlvbihhLGMsZCl7dmFyIGUsZj1kJiZDYShhKSxnPWQmJk9hKGEsYixkLCJib3JkZXItYm94Ij09PW4uY3NzKGEsImJveFNpemluZyIsITEsZiksZik7cmV0dXJuIGcmJihlPVQuZXhlYyhjKSkmJiJweCIhPT0oZVszXXx8InB4IikmJihhLnN0eWxlW2JdPWMsYz1uLmNzcyhhLGIpKSxOYShhLGMsZyl9fX0pLG4uY3NzSG9va3MubWFyZ2luTGVmdD1HYShsLnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihhLGIpe3JldHVybiBiPyhwYXJzZUZsb2F0KEZhKGEsIm1hcmdpbkxlZnQiKSl8fGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdC1EYShhLHttYXJnaW5MZWZ0OjB9LGZ1bmN0aW9uKCl7cmV0dXJuIGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdH0pKSsicHgiOnZvaWQgMH0pLG4uY3NzSG9va3MubWFyZ2luUmlnaHQ9R2EobC5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/RGEoYSx7ZGlzcGxheToiaW5saW5lLWJsb2NrIn0sRmEsW2EsIm1hcmdpblJpZ2h0Il0pOnZvaWQgMH0pLG4uZWFjaCh7bWFyZ2luOiIiLHBhZGRpbmc6IiIsYm9yZGVyOiJXaWR0aCJ9LGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1thK2JdPXtleHBhbmQ6ZnVuY3Rpb24oYyl7Zm9yKHZhciBkPTAsZT17fSxmPSJzdHJpbmciPT10eXBlb2YgYz9jLnNwbGl0KCIgIik6W2NdOzQ+ZDtkKyspZVthK1VbZF0rYl09ZltkXXx8ZltkLTJdfHxmWzBdO3JldHVybiBlfX0sQWEudGVzdChhKXx8KG4uY3NzSG9va3NbYStiXS5zZXQ9TmEpfSksbi5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihhLGIpe3JldHVybiBLKHRoaXMsZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj17fSxnPTA7aWYobi5pc0FycmF5KGIpKXtmb3IoZD1DYShhKSxlPWIubGVuZ3RoO2U+ZztnKyspZltiW2ddXT1uLmNzcyhhLGJbZ10sITEsZCk7cmV0dXJuIGZ9cmV0dXJuIHZvaWQgMCE9PWM/bi5zdHlsZShhLGIsYyk6bi5jc3MoYSxiKX0sYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gUWEodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gUWEodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihhKXtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBhP2E/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7Vih0aGlzKT9uKHRoaXMpLnNob3coKTpuKHRoaXMpLmhpZGUoKX0pfX0pO2Z1bmN0aW9uIFJhKGEsYixjLGQsZSl7cmV0dXJuIG5ldyBSYS5wcm90b3R5cGUuaW5pdChhLGIsYyxkLGUpfW4uVHdlZW49UmEsUmEucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpSYSxpbml0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmVsZW09YSx0aGlzLnByb3A9Yyx0aGlzLmVhc2luZz1lfHxuLmVhc2luZy5fZGVmYXVsdCx0aGlzLm9wdGlvbnM9Yix0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9ZCx0aGlzLnVuaXQ9Znx8KG4uY3NzTnVtYmVyW2NdPyIiOiJweCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgYT1SYS5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gYSYmYS5nZXQ/YS5nZXQodGhpcyk6UmEucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGEpe3ZhciBiLGM9UmEucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMub3B0aW9ucy5kdXJhdGlvbj90aGlzLnBvcz1iPW4uZWFzaW5nW3RoaXMuZWFzaW5nXShhLHRoaXMub3B0aW9ucy5kdXJhdGlvbiphLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOnRoaXMucG9zPWI9YSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqYit0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxjJiZjLnNldD9jLnNldCh0aGlzKTpSYS5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSxSYS5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9UmEucHJvdG90eXBlLFJhLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gMSE9PWEuZWxlbS5ub2RlVHlwZXx8bnVsbCE9YS5lbGVtW2EucHJvcF0mJm51bGw9PWEuZWxlbS5zdHlsZVthLnByb3BdP2EuZWxlbVthLnByb3BdOihiPW4uY3NzKGEuZWxlbSxhLnByb3AsIiIpLGImJiJhdXRvIiE9PWI/YjowKX0sc2V0OmZ1bmN0aW9uKGEpe24uZnguc3RlcFthLnByb3BdP24uZnguc3RlcFthLnByb3BdKGEpOjEhPT1hLmVsZW0ubm9kZVR5cGV8fG51bGw9PWEuZWxlbS5zdHlsZVtuLmNzc1Byb3BzW2EucHJvcF1dJiYhbi5jc3NIb29rc1thLnByb3BdP2EuZWxlbVthLnByb3BdPWEubm93Om4uc3R5bGUoYS5lbGVtLGEucHJvcCxhLm5vdythLnVuaXQpfX19LFJhLnByb3BIb29rcy5zY3JvbGxUb3A9UmEucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihhKXthLmVsZW0ubm9kZVR5cGUmJmEuZWxlbS5wYXJlbnROb2RlJiYoYS5lbGVtW2EucHJvcF09YS5ub3cpfX0sbi5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gYX0sc3dpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuLjUtTWF0aC5jb3MoYSpNYXRoLlBJKS8yfSxfZGVmYXVsdDoic3dpbmcifSxuLmZ4PVJhLnByb3RvdHlwZS5pbml0LG4uZnguc3RlcD17fTt2YXIgU2EsVGEsVWE9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLFZhPS9xdWV1ZUhvb2tzJC87ZnVuY3Rpb24gV2EoKXtyZXR1cm4gYS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7U2E9dm9pZCAwfSksU2E9bi5ub3coKX1mdW5jdGlvbiBYYShhLGIpe3ZhciBjLGQ9MCxlPXtoZWlnaHQ6YX07Zm9yKGI9Yj8xOjA7ND5kO2QrPTItYiljPVVbZF0sZVsibWFyZ2luIitjXT1lWyJwYWRkaW5nIitjXT1hO3JldHVybiBiJiYoZS5vcGFjaXR5PWUud2lkdGg9YSksZX1mdW5jdGlvbiBZYShhLGIsYyl7Zm9yKHZhciBkLGU9KF9hLnR3ZWVuZXJzW2JdfHxbXSkuY29uY2F0KF9hLnR3ZWVuZXJzWyIqIl0pLGY9MCxnPWUubGVuZ3RoO2c+ZjtmKyspaWYoZD1lW2ZdLmNhbGwoYyxiLGEpKXJldHVybiBkfWZ1bmN0aW9uIFphKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrLGw9dGhpcyxtPXt9LG89YS5zdHlsZSxwPWEubm9kZVR5cGUmJlYoYSkscT1OLmdldChhLCJmeHNob3ciKTtjLnF1ZXVlfHwoaD1uLl9xdWV1ZUhvb2tzKGEsImZ4IiksbnVsbD09aC51bnF1ZXVlZCYmKGgudW5xdWV1ZWQ9MCxpPWguZW1wdHkuZmlyZSxoLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtoLnVucXVldWVkfHxpKCl9KSxoLnVucXVldWVkKyssbC5hbHdheXMoZnVuY3Rpb24oKXtsLmFsd2F5cyhmdW5jdGlvbigpe2gudW5xdWV1ZWQtLSxuLnF1ZXVlKGEsImZ4IikubGVuZ3RofHxoLmVtcHR5LmZpcmUoKX0pfSkpLDE9PT1hLm5vZGVUeXBlJiYoImhlaWdodCJpbiBifHwid2lkdGgiaW4gYikmJihjLm92ZXJmbG93PVtvLm92ZXJmbG93LG8ub3ZlcmZsb3dYLG8ub3ZlcmZsb3dZXSxqPW4uY3NzKGEsImRpc3BsYXkiKSxrPSJub25lIj09PWo/Ti5nZXQoYSwib2xkZGlzcGxheSIpfHx6YShhLm5vZGVOYW1lKTpqLCJpbmxpbmUiPT09ayYmIm5vbmUiPT09bi5jc3MoYSwiZmxvYXQiKSYmKG8uZGlzcGxheT0iaW5saW5lLWJsb2NrIikpLGMub3ZlcmZsb3cmJihvLm92ZXJmbG93PSJoaWRkZW4iLGwuYWx3YXlzKGZ1bmN0aW9uKCl7by5vdmVyZmxvdz1jLm92ZXJmbG93WzBdLG8ub3ZlcmZsb3dYPWMub3ZlcmZsb3dbMV0sby5vdmVyZmxvd1k9Yy5vdmVyZmxvd1syXX0pKTtmb3IoZCBpbiBiKWlmKGU9YltkXSxVYS5leGVjKGUpKXtpZihkZWxldGUgYltkXSxmPWZ8fCJ0b2dnbGUiPT09ZSxlPT09KHA/ImhpZGUiOiJzaG93Iikpe2lmKCJzaG93IiE9PWV8fCFxfHx2b2lkIDA9PT1xW2RdKWNvbnRpbnVlO3A9ITB9bVtkXT1xJiZxW2RdfHxuLnN0eWxlKGEsZCl9ZWxzZSBqPXZvaWQgMDtpZihuLmlzRW1wdHlPYmplY3QobSkpImlubGluZSI9PT0oIm5vbmUiPT09aj96YShhLm5vZGVOYW1lKTpqKSYmKG8uZGlzcGxheT1qKTtlbHNle3E/ImhpZGRlbiJpbiBxJiYocD1xLmhpZGRlbik6cT1OLmFjY2VzcyhhLCJmeHNob3ciLHt9KSxmJiYocS5oaWRkZW49IXApLHA/bihhKS5zaG93KCk6bC5kb25lKGZ1bmN0aW9uKCl7bihhKS5oaWRlKCl9KSxsLmRvbmUoZnVuY3Rpb24oKXt2YXIgYjtOLnJlbW92ZShhLCJmeHNob3ciKTtmb3IoYiBpbiBtKW4uc3R5bGUoYSxiLG1bYl0pfSk7Zm9yKGQgaW4gbSlnPVlhKHA/cVtkXTowLGQsbCksZCBpbiBxfHwocVtkXT1nLnN0YXJ0LHAmJihnLmVuZD1nLnN0YXJ0LGcuc3RhcnQ9IndpZHRoIj09PWR8fCJoZWlnaHQiPT09ZD8xOjApKX19ZnVuY3Rpb24gJGEoYSxiKXt2YXIgYyxkLGUsZixnO2ZvcihjIGluIGEpaWYoZD1uLmNhbWVsQ2FzZShjKSxlPWJbZF0sZj1hW2NdLG4uaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9bi5jc3NIb29rc1tkXSxnJiYiZXhwYW5kImluIGcpe2Y9Zy5leHBhbmQoZiksZGVsZXRlIGFbZF07Zm9yKGMgaW4gZiljIGluIGF8fChhW2NdPWZbY10sYltjXT1lKX1lbHNlIGJbZF09ZX1mdW5jdGlvbiBfYShhLGIsYyl7dmFyIGQsZSxmPTAsZz1fYS5wcmVmaWx0ZXJzLmxlbmd0aCxoPW4uRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPVNhfHxXYSgpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtpPmc7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksMT5mJiZpP2M6KGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpuLmV4dGVuZCh7fSxiKSxvcHRzOm4uZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9LGVhc2luZzpuLmVhc2luZy5fZGVmYXVsdH0sYyksb3JpZ2luYWxQcm9wZXJ0aWVzOmIsb3JpZ2luYWxPcHRpb25zOmMsc3RhcnRUaW1lOlNhfHxXYSgpLGR1cmF0aW9uOmMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9bi5Ud2VlbihhLGoub3B0cyxiLGMsai5vcHRzLnNwZWNpYWxFYXNpbmdbYl18fGoub3B0cy5lYXNpbmcpO3JldHVybiBqLnR3ZWVucy5wdXNoKGQpLGR9LHN0b3A6ZnVuY3Rpb24oYil7dmFyIGM9MCxkPWI/ai50d2VlbnMubGVuZ3RoOjA7aWYoZSlyZXR1cm4gdGhpcztmb3IoZT0hMDtkPmM7YysrKWoudHdlZW5zW2NdLnJ1bigxKTtyZXR1cm4gYj8oaC5ub3RpZnlXaXRoKGEsW2osMSwwXSksaC5yZXNvbHZlV2l0aChhLFtqLGJdKSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcigkYShrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtnPmY7ZisrKWlmKGQ9X2EucHJlZmlsdGVyc1tmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIG4uaXNGdW5jdGlvbihkLnN0b3ApJiYobi5fcXVldWVIb29rcyhqLmVsZW0sai5vcHRzLnF1ZXVlKS5zdG9wPW4ucHJveHkoZC5zdG9wLGQpKSxkO3JldHVybiBuLm1hcChrLFlhLGopLG4uaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLG4uZngudGltZXIobi5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksai5wcm9ncmVzcyhqLm9wdHMucHJvZ3Jlc3MpLmRvbmUoai5vcHRzLmRvbmUsai5vcHRzLmNvbXBsZXRlKS5mYWlsKGoub3B0cy5mYWlsKS5hbHdheXMoai5vcHRzLmFsd2F5cyl9bi5BbmltYXRpb249bi5leHRlbmQoX2Ese3R3ZWVuZXJzOnsiKiI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVUd2VlbihhLGIpO3JldHVybiBXKGMuZWxlbSxhLFQuZXhlYyhiKSxjKSxjfV19LHR3ZWVuZXI6ZnVuY3Rpb24oYSxiKXtuLmlzRnVuY3Rpb24oYSk/KGI9YSxhPVsiKiJdKTphPWEubWF0Y2goRyk7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYz1hW2RdLF9hLnR3ZWVuZXJzW2NdPV9hLnR3ZWVuZXJzW2NdfHxbXSxfYS50d2VlbmVyc1tjXS51bnNoaWZ0KGIpfSxwcmVmaWx0ZXJzOltaYV0scHJlZmlsdGVyOmZ1bmN0aW9uKGEsYil7Yj9fYS5wcmVmaWx0ZXJzLnVuc2hpZnQoYSk6X2EucHJlZmlsdGVycy5wdXNoKGEpfX0pLG4uc3BlZWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEmJiJvYmplY3QiPT10eXBlb2YgYT9uLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fG4uaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhbi5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gZC5kdXJhdGlvbj1uLmZ4Lm9mZj8wOiJudW1iZXIiPT10eXBlb2YgZC5kdXJhdGlvbj9kLmR1cmF0aW9uOmQuZHVyYXRpb24gaW4gbi5meC5zcGVlZHM/bi5meC5zcGVlZHNbZC5kdXJhdGlvbl06bi5meC5zcGVlZHMuX2RlZmF1bHQsbnVsbCE9ZC5xdWV1ZSYmZC5xdWV1ZSE9PSEwfHwoZC5xdWV1ZT0iZngiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtuLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJm4uZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxuLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihWKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OmJ9LGEsYyxkKX0sYW5pbWF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uLmlzRW1wdHlPYmplY3QoYSksZj1uLnNwZWVkKGIsYyxkKSxnPWZ1bmN0aW9uKCl7dmFyIGI9X2EodGhpcyxuLmV4dGVuZCh7fSxhKSxmKTsoZXx8Ti5nZXQodGhpcywiZmluaXNoIikpJiZiLnN0b3AoITApfTtyZXR1cm4gZy5maW5pc2g9ZyxlfHxmLnF1ZXVlPT09ITE/dGhpcy5lYWNoKGcpOnRoaXMucXVldWUoZi5xdWV1ZSxnKX0sc3RvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdG9wO2RlbGV0ZSBhLnN0b3AsYihjKX07cmV0dXJuInN0cmluZyIhPXR5cGVvZiBhJiYoYz1iLGI9YSxhPXZvaWQgMCksYiYmYSE9PSExJiZ0aGlzLnF1ZXVlKGF8fCJmeCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPSEwLGU9bnVsbCE9YSYmYSsicXVldWVIb29rcyIsZj1uLnRpbWVycyxnPU4uZ2V0KHRoaXMpO2lmKGUpZ1tlXSYmZ1tlXS5zdG9wJiZkKGdbZV0pO2Vsc2UgZm9yKGUgaW4gZylnW2VdJiZnW2VdLnN0b3AmJlZhLnRlc3QoZSkmJmQoZ1tlXSk7Zm9yKGU9Zi5sZW5ndGg7ZS0tOylmW2VdLmVsZW0hPT10aGlzfHxudWxsIT1hJiZmW2VdLnF1ZXVlIT09YXx8KGZbZV0uYW5pbS5zdG9wKGMpLGI9ITEsZi5zcGxpY2UoZSwxKSk7IWImJmN8fG4uZGVxdWV1ZSh0aGlzLGEpfSl9LGZpbmlzaDpmdW5jdGlvbihhKXtyZXR1cm4gYSE9PSExJiYoYT1hfHwiZngiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYixjPU4uZ2V0KHRoaXMpLGQ9Y1thKyJxdWV1ZSJdLGU9Y1thKyJxdWV1ZUhvb2tzIl0sZj1uLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsbi5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxuLmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9bi5mbltiXTtuLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8ImJvb2xlYW4iPT10eXBlb2YgYT9jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUoWGEoYiwhMCksYSxkLGUpfX0pLG4uZWFjaCh7c2xpZGVEb3duOlhhKCJzaG93Iiksc2xpZGVVcDpYYSgiaGlkZSIpLHNsaWRlVG9nZ2xlOlhhKCJ0b2dnbGUiKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhLGMsZCl7cmV0dXJuIHRoaXMuYW5pbWF0ZShiLGEsYyxkKX19KSxuLnRpbWVycz1bXSxuLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgYSxiPTAsYz1uLnRpbWVycztmb3IoU2E9bi5ub3coKTtiPGMubGVuZ3RoO2IrKylhPWNbYl0sYSgpfHxjW2JdIT09YXx8Yy5zcGxpY2UoYi0tLDEpO2MubGVuZ3RofHxuLmZ4LnN0b3AoKSxTYT12b2lkIDB9LG4uZngudGltZXI9ZnVuY3Rpb24oYSl7bi50aW1lcnMucHVzaChhKSxhKCk/bi5meC5zdGFydCgpOm4udGltZXJzLnBvcCgpfSxuLmZ4LmludGVydmFsPTEzLG4uZnguc3RhcnQ9ZnVuY3Rpb24oKXtUYXx8KFRhPWEuc2V0SW50ZXJ2YWwobi5meC50aWNrLG4uZnguaW50ZXJ2YWwpKX0sbi5meC5zdG9wPWZ1bmN0aW9uKCl7YS5jbGVhckludGVydmFsKFRhKSxUYT1udWxsfSxuLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxuLmZuLmRlbGF5PWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGI9bi5meD9uLmZ4LnNwZWVkc1tiXXx8YjpiLGM9Y3x8ImZ4Iix0aGlzLnF1ZXVlKGMsZnVuY3Rpb24oYyxkKXt2YXIgZT1hLnNldFRpbWVvdXQoYyxiKTtkLnN0b3A9ZnVuY3Rpb24oKXthLmNsZWFyVGltZW91dChlKX19KX0sZnVuY3Rpb24oKXt2YXIgYT1kLmNyZWF0ZUVsZW1lbnQoImlucHV0IiksYj1kLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLGM9Yi5hcHBlbmRDaGlsZChkLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTthLnR5cGU9ImNoZWNrYm94IixsLmNoZWNrT249IiIhPT1hLnZhbHVlLGwub3B0U2VsZWN0ZWQ9Yy5zZWxlY3RlZCxiLmRpc2FibGVkPSEwLGwub3B0RGlzYWJsZWQ9IWMuZGlzYWJsZWQsYT1kLmNyZWF0ZUVsZW1lbnQoImlucHV0IiksYS52YWx1ZT0idCIsYS50eXBlPSJyYWRpbyIsbC5yYWRpb1ZhbHVlPSJ0Ij09PWEudmFsdWV9KCk7dmFyIGFiLGJiPW4uZXhwci5hdHRySGFuZGxlO24uZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEsodGhpcyxuLmF0dHIsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24ucmVtb3ZlQXR0cih0aGlzLGEpfSl9fSksbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLm5vZGVUeXBlO2lmKDMhPT1mJiY4IT09ZiYmMiE9PWYpcmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiBhLmdldEF0dHJpYnV0ZT9uLnByb3AoYSxiLGMpOigxPT09ZiYmbi5pc1hNTERvYyhhKXx8KGI9Yi50b0xvd2VyQ2FzZSgpLGU9bi5hdHRySG9va3NbYl18fChuLmV4cHIubWF0Y2guYm9vbC50ZXN0KGIpP2FiOnZvaWQgMCkpLHZvaWQgMCE9PWM/bnVsbD09PWM/dm9pZCBuLnJlbW92ZUF0dHIoYSxiKTplJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDooYS5zZXRBdHRyaWJ1dGUoYixjKyIiKSxjKTplJiYiZ2V0ImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOihkPW4uZmluZC5hdHRyKGEsYiksbnVsbD09ZD92b2lkIDA6ZCkpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihhLGIpe2lmKCFsLnJhZGlvVmFsdWUmJiJyYWRpbyI9PT1iJiZuLm5vZGVOYW1lKGEsImlucHV0Iikpe3ZhciBjPWEudmFsdWU7cmV0dXJuIGEuc2V0QXR0cmlidXRlKCJ0eXBlIixiKSxjJiYoYS52YWx1ZT1jKSxifX19fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPTAsZj1iJiZiLm1hdGNoKEcpO2lmKGYmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZltlKytdKWQ9bi5wcm9wRml4W2NdfHxjLG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYykmJihhW2RdPSExKSxhLnJlbW92ZUF0dHJpYnV0ZShjKX19KSxhYj17c2V0OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYj09PSExP24ucmVtb3ZlQXR0cihhLGMpOmEuc2V0QXR0cmlidXRlKGMsYyksY319LG4uZWFjaChuLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihhLGIpe3ZhciBjPWJiW2JdfHxuLmZpbmQuYXR0cjtiYltiXT1mdW5jdGlvbihhLGIsZCl7dmFyIGUsZjtyZXR1cm4gZHx8KGY9YmJbYl0sYmJbYl09ZSxlPW51bGwhPWMoYSxiLGQpP2IudG9Mb3dlckNhc2UoKTpudWxsLGJiW2JdPWYpLGV9fSk7dmFyIGNiPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksZGI9L14oPzphfGFyZWEpJC9pO24uZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEsodGhpcyxuLnByb3AsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RlbGV0ZSB0aGlzW24ucHJvcEZpeFthXXx8YV19KX19KSxuLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4gMT09PWYmJm4uaXNYTUxEb2MoYSl8fChiPW4ucHJvcEZpeFtiXXx8YixlPW4ucHJvcEhvb2tzW2JdKSwKdm9pZCAwIT09Yz9lJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDphW2JdPWM6ZSYmImdldCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDphW2JdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bi5maW5kLmF0dHIoYSwidGFiaW5kZXgiKTtyZXR1cm4gYj9wYXJzZUludChiLDEwKTpjYi50ZXN0KGEubm9kZU5hbWUpfHxkYi50ZXN0KGEubm9kZU5hbWUpJiZhLmhyZWY/MDotMX19fSxwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn19KSxsLm9wdFNlbGVjdGVkfHwobi5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJmIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsbnVsbH0sc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtiJiYoYi5zZWxlY3RlZEluZGV4LGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpfX0pLG4uZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7bi5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pO3ZhciBlYj0vW1x0XHJcblxmXS9nO2Z1bmN0aW9uIGZiKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZSYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIifW4uZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpPTA7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5hZGRDbGFzcyhhLmNhbGwodGhpcyxiLGZiKHRoaXMpKSl9KTtpZigic3RyaW5nIj09dHlwZW9mIGEmJmEpe2I9YS5tYXRjaChHKXx8W107d2hpbGUoYz10aGlzW2krK10paWYoZT1mYihjKSxkPTE9PT1jLm5vZGVUeXBlJiYoIiAiK2UrIiAiKS5yZXBsYWNlKGViLCIgIikpe2c9MDt3aGlsZShmPWJbZysrXSlkLmluZGV4T2YoIiAiK2YrIiAiKTwwJiYoZCs9ZisiICIpO2g9bi50cmltKGQpLGUhPT1oJiZjLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGgpfX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaT0wO2lmKG4uaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykucmVtb3ZlQ2xhc3MoYS5jYWxsKHRoaXMsYixmYih0aGlzKSkpfSk7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuYXR0cigiY2xhc3MiLCIiKTtpZigic3RyaW5nIj09dHlwZW9mIGEmJmEpe2I9YS5tYXRjaChHKXx8W107d2hpbGUoYz10aGlzW2krK10paWYoZT1mYihjKSxkPTE9PT1jLm5vZGVUeXBlJiYoIiAiK2UrIiAiKS5yZXBsYWNlKGViLCIgIikpe2c9MDt3aGlsZShmPWJbZysrXSl3aGlsZShkLmluZGV4T2YoIiAiK2YrIiAiKT4tMSlkPWQucmVwbGFjZSgiICIrZisiICIsIiAiKTtoPW4udHJpbShkKSxlIT09aCYmYy5zZXRBdHRyaWJ1dGUoImNsYXNzIixoKX19cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dHlwZW9mIGE7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgYiYmInN0cmluZyI9PT1jP2I/dGhpcy5hZGRDbGFzcyhhKTp0aGlzLnJlbW92ZUNsYXNzKGEpOm4uaXNGdW5jdGlvbihhKT90aGlzLmVhY2goZnVuY3Rpb24oYyl7bih0aGlzKS50b2dnbGVDbGFzcyhhLmNhbGwodGhpcyxjLGZiKHRoaXMpLGIpLGIpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsZCxlLGY7aWYoInN0cmluZyI9PT1jKXtkPTAsZT1uKHRoaXMpLGY9YS5tYXRjaChHKXx8W107d2hpbGUoYj1mW2QrK10pZS5oYXNDbGFzcyhiKT9lLnJlbW92ZUNsYXNzKGIpOmUuYWRkQ2xhc3MoYil9ZWxzZSB2b2lkIDAhPT1hJiYiYm9vbGVhbiIhPT1jfHwoYj1mYih0aGlzKSxiJiZOLnNldCh0aGlzLCJfX2NsYXNzTmFtZV9fIixiKSx0aGlzLnNldEF0dHJpYnV0ZSYmdGhpcy5zZXRBdHRyaWJ1dGUoImNsYXNzIixifHxhPT09ITE/IiI6Ti5nZXQodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIikpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZD0wO2I9IiAiK2ErIiAiO3doaWxlKGM9dGhpc1tkKytdKWlmKDE9PT1jLm5vZGVUeXBlJiYoIiAiK2ZiKGMpKyIgIikucmVwbGFjZShlYiwiICIpLmluZGV4T2YoYik+LTEpcmV0dXJuITA7cmV0dXJuITF9fSk7dmFyIGdiPS9cci9nLGhiPS9bXHgyMFx0XHJcblxmXSsvZztuLmZuLmV4dGVuZCh7dmFsOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPXRoaXNbMF07e2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQ9bi5pc0Z1bmN0aW9uKGEpLHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZTsxPT09dGhpcy5ub2RlVHlwZSYmKGU9ZD9hLmNhbGwodGhpcyxjLG4odGhpcykudmFsKCkpOmEsbnVsbD09ZT9lPSIiOiJudW1iZXIiPT10eXBlb2YgZT9lKz0iIjpuLmlzQXJyYXkoZSkmJihlPW4ubWFwKGUsZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/IiI6YSsiIn0pKSxiPW4udmFsSG9va3NbdGhpcy50eXBlXXx8bi52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJiJzZXQiaW4gYiYmdm9pZCAwIT09Yi5zZXQodGhpcyxlLCJ2YWx1ZSIpfHwodGhpcy52YWx1ZT1lKSl9KTtpZihlKXJldHVybiBiPW4udmFsSG9va3NbZS50eXBlXXx8bi52YWxIb29rc1tlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJiJnZXQiaW4gYiYmdm9pZCAwIT09KGM9Yi5nZXQoZSwidmFsdWUiKSk/YzooYz1lLnZhbHVlLCJzdHJpbmciPT10eXBlb2YgYz9jLnJlcGxhY2UoZ2IsIiIpOm51bGw9PWM/IiI6Yyl9fX0pLG4uZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bi5maW5kLmF0dHIoYSwidmFsdWUiKTtyZXR1cm4gbnVsbCE9Yj9iOm4udHJpbShuLnRleHQoYSkpLnJlcGxhY2UoaGIsIiAiKX19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQ9YS5vcHRpb25zLGU9YS5zZWxlY3RlZEluZGV4LGY9InNlbGVjdC1vbmUiPT09YS50eXBlfHwwPmUsZz1mP251bGw6W10saD1mP2UrMTpkLmxlbmd0aCxpPTA+ZT9oOmY/ZTowO2g+aTtpKyspaWYoYz1kW2ldLChjLnNlbGVjdGVkfHxpPT09ZSkmJihsLm9wdERpc2FibGVkPyFjLmRpc2FibGVkOm51bGw9PT1jLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKSkmJighYy5wYXJlbnROb2RlLmRpc2FibGVkfHwhbi5ub2RlTmFtZShjLnBhcmVudE5vZGUsIm9wdGdyb3VwIikpKXtpZihiPW4oYykudmFsKCksZilyZXR1cm4gYjtnLnB1c2goYil9cmV0dXJuIGd9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT1hLm9wdGlvbnMsZj1uLm1ha2VBcnJheShiKSxnPWUubGVuZ3RoO3doaWxlKGctLSlkPWVbZ10sKGQuc2VsZWN0ZWQ9bi5pbkFycmF5KG4udmFsSG9va3Mub3B0aW9uLmdldChkKSxmKT4tMSkmJihjPSEwKTtyZXR1cm4gY3x8KGEuc2VsZWN0ZWRJbmRleD0tMSksZn19fX0pLG4uZWFjaChbInJhZGlvIiwiY2hlY2tib3giXSxmdW5jdGlvbigpe24udmFsSG9va3NbdGhpc109e3NldDpmdW5jdGlvbihhLGIpe3JldHVybiBuLmlzQXJyYXkoYik/YS5jaGVja2VkPW4uaW5BcnJheShuKGEpLnZhbCgpLGIpPi0xOnZvaWQgMH19LGwuY2hlY2tPbnx8KG4udmFsSG9va3NbdGhpc10uZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT09YS5nZXRBdHRyaWJ1dGUoInZhbHVlIik/Im9uIjphLnZhbHVlfSl9KTt2YXIgaWI9L14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvO24uZXh0ZW5kKG4uZXZlbnQse3RyaWdnZXI6ZnVuY3Rpb24oYixjLGUsZil7dmFyIGcsaCxpLGosbCxtLG8scD1bZXx8ZF0scT1rLmNhbGwoYiwidHlwZSIpP2IudHlwZTpiLHI9ay5jYWxsKGIsIm5hbWVzcGFjZSIpP2IubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYoaD1pPWU9ZXx8ZCwzIT09ZS5ub2RlVHlwZSYmOCE9PWUubm9kZVR5cGUmJiFpYi50ZXN0KHErbi5ldmVudC50cmlnZ2VyZWQpJiYocS5pbmRleE9mKCIuIik+LTEmJihyPXEuc3BsaXQoIi4iKSxxPXIuc2hpZnQoKSxyLnNvcnQoKSksbD1xLmluZGV4T2YoIjoiKTwwJiYib24iK3EsYj1iW24uZXhwYW5kb10/YjpuZXcgbi5FdmVudChxLCJvYmplY3QiPT10eXBlb2YgYiYmYiksYi5pc1RyaWdnZXI9Zj8yOjMsYi5uYW1lc3BhY2U9ci5qb2luKCIuIiksYi5ybmFtZXNwYWNlPWIubmFtZXNwYWNlP25ldyBSZWdFeHAoIihefFxcLikiK3Iuam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVsbCxiLnJlc3VsdD12b2lkIDAsYi50YXJnZXR8fChiLnRhcmdldD1lKSxjPW51bGw9PWM/W2JdOm4ubWFrZUFycmF5KGMsW2JdKSxvPW4uZXZlbnQuc3BlY2lhbFtxXXx8e30sZnx8IW8udHJpZ2dlcnx8by50cmlnZ2VyLmFwcGx5KGUsYykhPT0hMSkpe2lmKCFmJiYhby5ub0J1YmJsZSYmIW4uaXNXaW5kb3coZSkpe2ZvcihqPW8uZGVsZWdhdGVUeXBlfHxxLGliLnRlc3QoaitxKXx8KGg9aC5wYXJlbnROb2RlKTtoO2g9aC5wYXJlbnROb2RlKXAucHVzaChoKSxpPWg7aT09PShlLm93bmVyRG9jdW1lbnR8fGQpJiZwLnB1c2goaS5kZWZhdWx0Vmlld3x8aS5wYXJlbnRXaW5kb3d8fGEpfWc9MDt3aGlsZSgoaD1wW2crK10pJiYhYi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKWIudHlwZT1nPjE/ajpvLmJpbmRUeXBlfHxxLG09KE4uZ2V0KGgsImV2ZW50cyIpfHx7fSlbYi50eXBlXSYmTi5nZXQoaCwiaGFuZGxlIiksbSYmbS5hcHBseShoLGMpLG09bCYmaFtsXSxtJiZtLmFwcGx5JiZMKGgpJiYoYi5yZXN1bHQ9bS5hcHBseShoLGMpLGIucmVzdWx0PT09ITEmJmIucHJldmVudERlZmF1bHQoKSk7cmV0dXJuIGIudHlwZT1xLGZ8fGIuaXNEZWZhdWx0UHJldmVudGVkKCl8fG8uX2RlZmF1bHQmJm8uX2RlZmF1bHQuYXBwbHkocC5wb3AoKSxjKSE9PSExfHwhTChlKXx8bCYmbi5pc0Z1bmN0aW9uKGVbcV0pJiYhbi5pc1dpbmRvdyhlKSYmKGk9ZVtsXSxpJiYoZVtsXT1udWxsKSxuLmV2ZW50LnRyaWdnZXJlZD1xLGVbcV0oKSxuLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsaSYmKGVbbF09aSkpLGIucmVzdWx0fX0sc2ltdWxhdGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW4uZXh0ZW5kKG5ldyBuLkV2ZW50LGMse3R5cGU6YSxpc1NpbXVsYXRlZDohMH0pO24uZXZlbnQudHJpZ2dlcihkLG51bGwsYil9fSksbi5mbi5leHRlbmQoe3RyaWdnZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC50cmlnZ2VyKGEsYix0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXNbMF07cmV0dXJuIGM/bi5ldmVudC50cmlnZ2VyKGEsYixjLCEwKTp2b2lkIDB9fSksbi5lYWNoKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51Ii5zcGxpdCgiICIpLGZ1bmN0aW9uKGEsYil7bi5mbltiXT1mdW5jdGlvbihhLGMpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbihiLG51bGwsYSxjKTp0aGlzLnRyaWdnZXIoYil9fSksbi5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubW91c2VlbnRlcihhKS5tb3VzZWxlYXZlKGJ8fGEpfX0pLGwuZm9jdXNpbj0ib25mb2N1c2luImluIGEsbC5mb2N1c2lufHxuLmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYSl7bi5ldmVudC5zaW11bGF0ZShiLGEudGFyZ2V0LG4uZXZlbnQuZml4KGEpKX07bi5ldmVudC5zcGVjaWFsW2JdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPU4uYWNjZXNzKGQsYik7ZXx8ZC5hZGRFdmVudExpc3RlbmVyKGEsYywhMCksTi5hY2Nlc3MoZCxiLChlfHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1OLmFjY2VzcyhkLGIpLTE7ZT9OLmFjY2VzcyhkLGIsZSk6KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITApLE4ucmVtb3ZlKGQsYikpfX19KTt2YXIgamI9YS5sb2NhdGlvbixrYj1uLm5vdygpLGxiPS9cPy87bi5wYXJzZUpTT049ZnVuY3Rpb24oYSl7cmV0dXJuIEpTT04ucGFyc2UoYSsiIil9LG4ucGFyc2VYTUw9ZnVuY3Rpb24oYil7dmFyIGM7aWYoIWJ8fCJzdHJpbmciIT10eXBlb2YgYilyZXR1cm4gbnVsbDt0cnl7Yz0obmV3IGEuRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoYiwidGV4dC94bWwiKX1jYXRjaChkKXtjPXZvaWQgMH1yZXR1cm4gYyYmIWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RofHxuLmVycm9yKCJJbnZhbGlkIFhNTDogIitiKSxjfTt2YXIgbWI9LyMuKiQvLG5iPS8oWz8mXSlfPVteJl0qLyxvYj0vXiguKj8pOlsgXHRdKihbXlxyXG5dKikkL2dtLHBiPS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLHFiPS9eKD86R0VUfEhFQUQpJC8scmI9L15cL1wvLyxzYj17fSx0Yj17fSx1Yj0iKi8iLmNvbmNhdCgiKiIpLHZiPWQuY3JlYXRlRWxlbWVudCgiYSIpO3ZiLmhyZWY9amIuaHJlZjtmdW5jdGlvbiB3YihhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXsic3RyaW5nIiE9dHlwZW9mIGImJihjPWIsYj0iKiIpO3ZhciBkLGU9MCxmPWIudG9Mb3dlckNhc2UoKS5tYXRjaChHKXx8W107aWYobi5pc0Z1bmN0aW9uKGMpKXdoaWxlKGQ9ZltlKytdKSIrIj09PWRbMF0/KGQ9ZC5zbGljZSgxKXx8IioiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24geGIoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09dGI7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxuLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlWyIqIl0mJmcoIioiKX1mdW5jdGlvbiB5YihhLGIpe3ZhciBjLGQsZT1uLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGMgaW4gYil2b2lkIDAhPT1iW2NdJiYoKGVbY10/YTpkfHwoZD17fSkpW2NdPWJbY10pO3JldHVybiBkJiZuLmV4dGVuZCghMCxhLGQpLGF9ZnVuY3Rpb24gemIoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKCIqIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWQmJihkPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihkKWZvcihlIGluIGgpaWYoaFtlXSYmaFtlXS50ZXN0KGQpKXtpLnVuc2hpZnQoZSk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGUgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tlKyIgIitpWzBdXSl7Zj1lO2JyZWFrfWd8fChnPWUpfWY9Znx8Z31yZXR1cm4gZj8oZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdKTp2b2lkIDB9ZnVuY3Rpb24gQWIoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZigiKiI9PT1mKWY9aTtlbHNlIGlmKCIqIiE9PWkmJmkhPT1mKXtpZihnPWpbaSsiICIrZl18fGpbIiogIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdCgiICIpLGhbMV09PT1mJiYoZz1qW2krIiAiK2hbMF1dfHxqWyIqICIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhWyJ0aHJvd3MiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmc/bDoiTm8gY29udmVyc2lvbiBmcm9tICIraSsiIHRvICIrZn19fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTpifX1uLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6amIuaHJlZix0eXBlOiJHRVQiLGlzTG9jYWw6cGIudGVzdChqYi5wcm90b2NvbCksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLGFjY2VwdHM6eyIqIjp1Yix0ZXh0OiJ0ZXh0L3BsYWluIixodG1sOiJ0ZXh0L2h0bWwiLHhtbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0In0sY29udGVudHM6e3htbDovXGJ4bWxcYi8saHRtbDovXGJodG1sLyxqc29uOi9cYmpzb25cYi99LHJlc3BvbnNlRmllbGRzOnt4bWw6InJlc3BvbnNlWE1MIix0ZXh0OiJyZXNwb25zZVRleHQiLGpzb246InJlc3BvbnNlSlNPTiJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOlN0cmluZywidGV4dCBodG1sIjohMCwidGV4dCBqc29uIjpuLnBhcnNlSlNPTiwidGV4dCB4bWwiOm4ucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbihhLGIpe3JldHVybiBiP3liKHliKGEsbi5hamF4U2V0dGluZ3MpLGIpOnliKG4uYWpheFNldHRpbmdzLGEpfSxhamF4UHJlZmlsdGVyOndiKHNiKSxhamF4VHJhbnNwb3J0OndiKHRiKSxhamF4OmZ1bmN0aW9uKGIsYyl7Im9iamVjdCI9PXR5cGVvZiBiJiYoYz1iLGI9dm9pZCAwKSxjPWN8fHt9O3ZhciBlLGYsZyxoLGksaixrLGwsbT1uLmFqYXhTZXR1cCh7fSxjKSxvPW0uY29udGV4dHx8bSxwPW0uY29udGV4dCYmKG8ubm9kZVR5cGV8fG8uanF1ZXJ5KT9uKG8pOm4uZXZlbnQscT1uLkRlZmVycmVkKCkscj1uLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxzPW0uc3RhdHVzQ29kZXx8e30sdD17fSx1PXt9LHY9MCx3PSJjYW5jZWxlZCIseD17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKDI9PT12KXtpZighaCl7aD17fTt3aGlsZShiPW9iLmV4ZWMoZykpaFtiWzFdLnRvTG93ZXJDYXNlKCldPWJbMl19Yj1oW2EudG9Mb3dlckNhc2UoKV19cmV0dXJuIG51bGw9PWI/bnVsbDpifSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gMj09PXY/ZzpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS50b0xvd2VyQ2FzZSgpO3JldHVybiB2fHwoYT11W2NdPXVbY118fGEsdFthXT1iKSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGEpe3JldHVybiB2fHwobS5taW1lVHlwZT1hKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEpaWYoMj52KWZvcihiIGluIGEpc1tiXT1bc1tiXSxhW2JdXTtlbHNlIHguYWx3YXlzKGFbeC5zdGF0dXNdKTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YXx8dztyZXR1cm4gZSYmZS5hYm9ydChiKSx6KDAsYiksdGhpc319O2lmKHEucHJvbWlzZSh4KS5jb21wbGV0ZT1yLmFkZCx4LnN1Y2Nlc3M9eC5kb25lLHguZXJyb3I9eC5mYWlsLG0udXJsPSgoYnx8bS51cmx8fGpiLmhyZWYpKyIiKS5yZXBsYWNlKG1iLCIiKS5yZXBsYWNlKHJiLGpiLnByb3RvY29sKyIvLyIpLG0udHlwZT1jLm1ldGhvZHx8Yy50eXBlfHxtLm1ldGhvZHx8bS50eXBlLG0uZGF0YVR5cGVzPW4udHJpbShtLmRhdGFUeXBlfHwiKiIpLnRvTG93ZXJDYXNlKCkubWF0Y2goRyl8fFsiIl0sbnVsbD09bS5jcm9zc0RvbWFpbil7aj1kLmNyZWF0ZUVsZW1lbnQoImEiKTt0cnl7ai5ocmVmPW0udXJsLGouaHJlZj1qLmhyZWYsbS5jcm9zc0RvbWFpbj12Yi5wcm90b2NvbCsiLy8iK3ZiLmhvc3QhPWoucHJvdG9jb2wrIi8vIitqLmhvc3R9Y2F0Y2goeSl7bS5jcm9zc0RvbWFpbj0hMH19aWYobS5kYXRhJiZtLnByb2Nlc3NEYXRhJiYic3RyaW5nIiE9dHlwZW9mIG0uZGF0YSYmKG0uZGF0YT1uLnBhcmFtKG0uZGF0YSxtLnRyYWRpdGlvbmFsKSkseGIoc2IsbSxjLHgpLDI9PT12KXJldHVybiB4O2s9bi5ldmVudCYmbS5nbG9iYWwsayYmMD09PW4uYWN0aXZlKysmJm4uZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0IiksbS50eXBlPW0udHlwZS50b1VwcGVyQ2FzZSgpLG0uaGFzQ29udGVudD0hcWIudGVzdChtLnR5cGUpLGY9bS51cmwsbS5oYXNDb250ZW50fHwobS5kYXRhJiYoZj1tLnVybCs9KGxiLnRlc3QoZik/IiYiOiI/IikrbS5kYXRhLGRlbGV0ZSBtLmRhdGEpLG0uY2FjaGU9PT0hMSYmKG0udXJsPW5iLnRlc3QoZik/Zi5yZXBsYWNlKG5iLCIkMV89IitrYisrKTpmKyhsYi50ZXN0KGYpPyImIjoiPyIpKyJfPSIra2IrKykpLG0uaWZNb2RpZmllZCYmKG4ubGFzdE1vZGlmaWVkW2ZdJiZ4LnNldFJlcXVlc3RIZWFkZXIoIklmLU1vZGlmaWVkLVNpbmNlIixuLmxhc3RNb2RpZmllZFtmXSksbi5ldGFnW2ZdJiZ4LnNldFJlcXVlc3RIZWFkZXIoIklmLU5vbmUtTWF0Y2giLG4uZXRhZ1tmXSkpLChtLmRhdGEmJm0uaGFzQ29udGVudCYmbS5jb250ZW50VHlwZSE9PSExfHxjLmNvbnRlbnRUeXBlKSYmeC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLG0uY29udGVudFR5cGUpLHguc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IixtLmRhdGFUeXBlc1swXSYmbS5hY2NlcHRzW20uZGF0YVR5cGVzWzBdXT9tLmFjY2VwdHNbbS5kYXRhVHlwZXNbMF1dKygiKiIhPT1tLmRhdGFUeXBlc1swXT8iLCAiK3ViKyI7IHE9MC4wMSI6IiIpOm0uYWNjZXB0c1siKiJdKTtmb3IobCBpbiBtLmhlYWRlcnMpeC5zZXRSZXF1ZXN0SGVhZGVyKGwsbS5oZWFkZXJzW2xdKTtpZihtLmJlZm9yZVNlbmQmJihtLmJlZm9yZVNlbmQuY2FsbChvLHgsbSk9PT0hMXx8Mj09PXYpKXJldHVybiB4LmFib3J0KCk7dz0iYWJvcnQiO2ZvcihsIGlue3N1Y2Nlc3M6MSxlcnJvcjoxLGNvbXBsZXRlOjF9KXhbbF0obVtsXSk7aWYoZT14Yih0YixtLGMseCkpe2lmKHgucmVhZHlTdGF0ZT0xLGsmJnAudHJpZ2dlcigiYWpheFNlbmQiLFt4LG1dKSwyPT09dilyZXR1cm4geDttLmFzeW5jJiZtLnRpbWVvdXQ+MCYmKGk9YS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7eC5hYm9ydCgidGltZW91dCIpfSxtLnRpbWVvdXQpKTt0cnl7dj0xLGUuc2VuZCh0LHopfWNhdGNoKHkpe2lmKCEoMj52KSl0aHJvdyB5O3ooLTEseSl9fWVsc2UgeigtMSwiTm8gVHJhbnNwb3J0Iik7ZnVuY3Rpb24geihiLGMsZCxoKXt2YXIgaixsLHQsdSx3LHk9YzsyIT09diYmKHY9MixpJiZhLmNsZWFyVGltZW91dChpKSxlPXZvaWQgMCxnPWh8fCIiLHgucmVhZHlTdGF0ZT1iPjA/NDowLGo9Yj49MjAwJiYzMDA+Ynx8MzA0PT09YixkJiYodT16YihtLHgsZCkpLHU9QWIobSx1LHgsaiksaj8obS5pZk1vZGlmaWVkJiYodz14LmdldFJlc3BvbnNlSGVhZGVyKCJMYXN0LU1vZGlmaWVkIiksdyYmKG4ubGFzdE1vZGlmaWVkW2ZdPXcpLHc9eC5nZXRSZXNwb25zZUhlYWRlcigiZXRhZyIpLHcmJihuLmV0YWdbZl09dykpLDIwND09PWJ8fCJIRUFEIj09PW0udHlwZT95PSJub2NvbnRlbnQiOjMwND09PWI/eT0ibm90bW9kaWZpZWQiOih5PXUuc3RhdGUsbD11LmRhdGEsdD11LmVycm9yLGo9IXQpKToodD15LCFiJiZ5fHwoeT0iZXJyb3IiLDA+YiYmKGI9MCkpKSx4LnN0YXR1cz1iLHguc3RhdHVzVGV4dD0oY3x8eSkrIiIsaj9xLnJlc29sdmVXaXRoKG8sW2wseSx4XSk6cS5yZWplY3RXaXRoKG8sW3gseSx0XSkseC5zdGF0dXNDb2RlKHMpLHM9dm9pZCAwLGsmJnAudHJpZ2dlcihqPyJhamF4U3VjY2VzcyI6ImFqYXhFcnJvciIsW3gsbSxqP2w6dF0pLHIuZmlyZVdpdGgobyxbeCx5XSksayYmKHAudHJpZ2dlcigiYWpheENvbXBsZXRlIixbeCxtXSksLS1uLmFjdGl2ZXx8bi5ldmVudC50cmlnZ2VyKCJhamF4U3RvcCIpKSl9cmV0dXJuIHh9LGdldEpTT046ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLmdldChhLGIsYywianNvbiIpfSxnZXRTY3JpcHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5nZXQoYSx2b2lkIDAsYiwic2NyaXB0Iil9fSksbi5lYWNoKFsiZ2V0IiwicG9zdCJdLGZ1bmN0aW9uKGEsYil7bltiXT1mdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gbi5pc0Z1bmN0aW9uKGMpJiYoZT1lfHxkLGQ9YyxjPXZvaWQgMCksbi5hamF4KG4uZXh0ZW5kKHt1cmw6YSx0eXBlOmIsZGF0YVR5cGU6ZSxkYXRhOmMsc3VjY2VzczpkfSxuLmlzUGxhaW5PYmplY3QoYSkmJmEpKX19KSxuLl9ldmFsVXJsPWZ1bmN0aW9uKGEpe3JldHVybiBuLmFqYXgoe3VybDphLHR5cGU6IkdFVCIsZGF0YVR5cGU6InNjcmlwdCIsYXN5bmM6ITEsZ2xvYmFsOiExLCJ0aHJvd3MiOiEwfSl9LG4uZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBuLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykud3JhcEFsbChhLmNhbGwodGhpcyxiKSl9KToodGhpc1swXSYmKGI9bihhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSksYi5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzO3doaWxlKGEuZmlyc3RFbGVtZW50Q2hpbGQpYT1hLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBhfSkuYXBwZW5kKHRoaXMpKSx0aGlzKX0sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiBuLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPW4odGhpcyksYz1iLmNvbnRlbnRzKCk7Yy5sZW5ndGg/Yy53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7dmFyIGI9bi5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7bih0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsYyk6YSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe24ubm9kZU5hbWUodGhpcywiYm9keSIpfHxuKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KSxuLmV4cHIuZmlsdGVycy5oaWRkZW49ZnVuY3Rpb24oYSl7cmV0dXJuIW4uZXhwci5maWx0ZXJzLnZpc2libGUoYSl9LG4uZXhwci5maWx0ZXJzLnZpc2libGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGEub2Zmc2V0V2lkdGg+MHx8YS5vZmZzZXRIZWlnaHQ+MHx8YS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aD4wfTt2YXIgQmI9LyUyMC9nLENiPS9cW1xdJC8sRGI9L1xyP1xuL2csRWI9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLEZiPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBHYihhLGIsYyxkKXt2YXIgZTtpZihuLmlzQXJyYXkoYikpbi5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHxDYi50ZXN0KGEpP2QoYSxlKTpHYihhKyJbIisoIm9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT1lP2I6IiIpKyJdIixlLGMsZCl9KTtlbHNlIGlmKGN8fCJvYmplY3QiIT09bi50eXBlKGIpKWQoYSxiKTtlbHNlIGZvcihlIGluIGIpR2IoYSsiWyIrZSsiXSIsYltlXSxjLGQpfW4ucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXtiPW4uaXNGdW5jdGlvbihiKT9iKCk6bnVsbD09Yj8iIjpiLGRbZC5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChhKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfTtpZih2b2lkIDA9PT1iJiYoYj1uLmFqYXhTZXR0aW5ncyYmbi5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLG4uaXNBcnJheShhKXx8YS5qcXVlcnkmJiFuLmlzUGxhaW5PYmplY3QoYSkpbi5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlHYihjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKCImIikucmVwbGFjZShCYiwiKyIpfSxuLmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG4ucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT1uLnByb3AodGhpcywiZWxlbWVudHMiKTtyZXR1cm4gYT9uLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFuKHRoaXMpLmlzKCI6ZGlzYWJsZWQiKSYmRmIudGVzdCh0aGlzLm5vZGVOYW1lKSYmIUViLnRlc3QoYSkmJih0aGlzLmNoZWNrZWR8fCFYLnRlc3QoYSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9bih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09Yz9udWxsOm4uaXNBcnJheShjKT9uLm1hcChjLGZ1bmN0aW9uKGEpe3JldHVybntuYW1lOmIubmFtZSx2YWx1ZTphLnJlcGxhY2UoRGIsIlxyXG4iKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKERiLCJcclxuIil9fSkuZ2V0KCl9fSksbi5hamF4U2V0dGluZ3MueGhyPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBuZXcgYS5YTUxIdHRwUmVxdWVzdH1jYXRjaChiKXt9fTt2YXIgSGI9ezA6MjAwLDEyMjM6MjA0fSxJYj1uLmFqYXhTZXR0aW5ncy54aHIoKTtsLmNvcnM9ISFJYiYmIndpdGhDcmVkZW50aWFscyJpbiBJYixsLmFqYXg9SWI9ISFJYixuLmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oYil7dmFyIGMsZDtyZXR1cm4gbC5jb3JzfHxJYiYmIWIuY3Jvc3NEb21haW4/e3NlbmQ6ZnVuY3Rpb24oZSxmKXt2YXIgZyxoPWIueGhyKCk7aWYoaC5vcGVuKGIudHlwZSxiLnVybCxiLmFzeW5jLGIudXNlcm5hbWUsYi5wYXNzd29yZCksYi54aHJGaWVsZHMpZm9yKGcgaW4gYi54aHJGaWVsZHMpaFtnXT1iLnhockZpZWxkc1tnXTtiLm1pbWVUeXBlJiZoLm92ZXJyaWRlTWltZVR5cGUmJmgub3ZlcnJpZGVNaW1lVHlwZShiLm1pbWVUeXBlKSxiLmNyb3NzRG9tYWlufHxlWyJYLVJlcXVlc3RlZC1XaXRoIl18fChlWyJYLVJlcXVlc3RlZC1XaXRoIl09IlhNTEh0dHBSZXF1ZXN0Iik7Zm9yKGcgaW4gZSloLnNldFJlcXVlc3RIZWFkZXIoZyxlW2ddKTtjPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe2MmJihjPWQ9aC5vbmxvYWQ9aC5vbmVycm9yPWgub25hYm9ydD1oLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLCJhYm9ydCI9PT1hP2guYWJvcnQoKToiZXJyb3IiPT09YT8ibnVtYmVyIiE9dHlwZW9mIGguc3RhdHVzP2YoMCwiZXJyb3IiKTpmKGguc3RhdHVzLGguc3RhdHVzVGV4dCk6ZihIYltoLnN0YXR1c118fGguc3RhdHVzLGguc3RhdHVzVGV4dCwidGV4dCIhPT0oaC5yZXNwb25zZVR5cGV8fCJ0ZXh0Iil8fCJzdHJpbmciIT10eXBlb2YgaC5yZXNwb25zZVRleHQ/e2JpbmFyeTpoLnJlc3BvbnNlfTp7dGV4dDpoLnJlc3BvbnNlVGV4dH0saC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpfX0saC5vbmxvYWQ9YygpLGQ9aC5vbmVycm9yPWMoImVycm9yIiksdm9pZCAwIT09aC5vbmFib3J0P2gub25hYm9ydD1kOmgub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PWgucmVhZHlTdGF0ZSYmYS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YyYmZCgpfSl9LGM9YygiYWJvcnQiKTt0cnl7aC5zZW5kKGIuaGFzQ29udGVudCYmYi5kYXRhfHxudWxsKX1jYXRjaChpKXtpZihjKXRocm93IGl9fSxhYm9ydDpmdW5jdGlvbigpe2MmJmMoKX19OnZvaWQgMH0pLG4uYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0In0sY29udGVudHM6e3NjcmlwdDovXGIoPzpqYXZhfGVjbWEpc2NyaXB0XGIvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGEpe3JldHVybiBuLmdsb2JhbEV2YWwoYSksYX19fSksbi5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEuY2FjaGUmJihhLmNhY2hlPSExKSxhLmNyb3NzRG9tYWluJiYoYS50eXBlPSJHRVQiKX0pLG4uYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgYixjO3JldHVybntzZW5kOmZ1bmN0aW9uKGUsZil7Yj1uKCI8c2NyaXB0PiIpLnByb3Aoe2NoYXJzZXQ6YS5zY3JpcHRDaGFyc2V0LHNyYzphLnVybH0pLm9uKCJsb2FkIGVycm9yIixjPWZ1bmN0aW9uKGEpe2IucmVtb3ZlKCksYz1udWxsLGEmJmYoImVycm9yIj09PWEudHlwZT80MDQ6MjAwLGEudHlwZSl9KSxkLmhlYWQuYXBwZW5kQ2hpbGQoYlswXSl9LGFib3J0OmZ1bmN0aW9uKCl7YyYmYygpfX19fSk7dmFyIEpiPVtdLEtiPS8oPSlcPyg/PSZ8JCl8XD9cPy87bi5hamF4U2V0dXAoe2pzb25wOiJjYWxsYmFjayIsanNvbnBDYWxsYmFjazpmdW5jdGlvbigpe3ZhciBhPUpiLnBvcCgpfHxuLmV4cGFuZG8rIl8iK2tiKys7cmV0dXJuIHRoaXNbYV09ITAsYX19KSxuLmFqYXhQcmVmaWx0ZXIoImpzb24ganNvbnAiLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZSxmLGcsaD1iLmpzb25wIT09ITEmJihLYi50ZXN0KGIudXJsKT8idXJsIjoic3RyaW5nIj09dHlwZW9mIGIuZGF0YSYmMD09PShiLmNvbnRlbnRUeXBlfHwiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikmJktiLnRlc3QoYi5kYXRhKSYmImRhdGEiKTtyZXR1cm4gaHx8Impzb25wIj09PWIuZGF0YVR5cGVzWzBdPyhlPWIuanNvbnBDYWxsYmFjaz1uLmlzRnVuY3Rpb24oYi5qc29ucENhbGxiYWNrKT9iLmpzb25wQ2FsbGJhY2soKTpiLmpzb25wQ2FsbGJhY2ssaD9iW2hdPWJbaF0ucmVwbGFjZShLYiwiJDEiK2UpOmIuanNvbnAhPT0hMSYmKGIudXJsKz0obGIudGVzdChiLnVybCk/IiYiOiI/IikrYi5qc29ucCsiPSIrZSksYi5jb252ZXJ0ZXJzWyJzY3JpcHQganNvbiJdPWZ1bmN0aW9uKCl7cmV0dXJuIGd8fG4uZXJyb3IoZSsiIHdhcyBub3QgY2FsbGVkIiksZ1swXX0sYi5kYXRhVHlwZXNbMF09Impzb24iLGY9YVtlXSxhW2VdPWZ1bmN0aW9uKCl7Zz1hcmd1bWVudHN9LGQuYWx3YXlzKGZ1bmN0aW9uKCl7dm9pZCAwPT09Zj9uKGEpLnJlbW92ZVByb3AoZSk6YVtlXT1mLGJbZV0mJihiLmpzb25wQ2FsbGJhY2s9Yy5qc29ucENhbGxiYWNrLEpiLnB1c2goZSkpLGcmJm4uaXNGdW5jdGlvbihmKSYmZihnWzBdKSxnPWY9dm9pZCAwfSksInNjcmlwdCIpOnZvaWQgMH0pLG4ucGFyc2VIVE1MPWZ1bmN0aW9uKGEsYixjKXtpZighYXx8InN0cmluZyIhPXR5cGVvZiBhKXJldHVybiBudWxsOyJib29sZWFuIj09dHlwZW9mIGImJihjPWIsYj0hMSksYj1ifHxkO3ZhciBlPXguZXhlYyhhKSxmPSFjJiZbXTtyZXR1cm4gZT9bYi5jcmVhdGVFbGVtZW50KGVbMV0pXTooZT1jYShbYV0sYixmKSxmJiZmLmxlbmd0aCYmbihmKS5yZW1vdmUoKSxuLm1lcmdlKFtdLGUuY2hpbGROb2RlcykpfTt2YXIgTGI9bi5mbi5sb2FkO24uZm4ubG9hZD1mdW5jdGlvbihhLGIsYyl7aWYoInN0cmluZyIhPXR5cGVvZiBhJiZMYilyZXR1cm4gTGIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBkLGUsZixnPXRoaXMsaD1hLmluZGV4T2YoIiAiKTtyZXR1cm4gaD4tMSYmKGQ9bi50cmltKGEuc2xpY2UoaCkpLGE9YS5zbGljZSgwLGgpKSxuLmlzRnVuY3Rpb24oYik/KGM9YixiPXZvaWQgMCk6YiYmIm9iamVjdCI9PXR5cGVvZiBiJiYoZT0iUE9TVCIpLGcubGVuZ3RoPjAmJm4uYWpheCh7dXJsOmEsdHlwZTplfHwiR0VUIixkYXRhVHlwZToiaHRtbCIsZGF0YTpifSkuZG9uZShmdW5jdGlvbihhKXtmPWFyZ3VtZW50cyxnLmh0bWwoZD9uKCI8ZGl2PiIpLmFwcGVuZChuLnBhcnNlSFRNTChhKSkuZmluZChkKTphKX0pLmFsd2F5cyhjJiZmdW5jdGlvbihhLGIpe2cuZWFjaChmdW5jdGlvbigpe2MuYXBwbHkodGhpcyxmfHxbYS5yZXNwb25zZVRleHQsYixhXSl9KX0pLHRoaXN9LG4uZWFjaChbImFqYXhTdGFydCIsImFqYXhTdG9wIiwiYWpheENvbXBsZXRlIiwiYWpheEVycm9yIiwiYWpheFN1Y2Nlc3MiLCJhamF4U2VuZCJdLGZ1bmN0aW9uKGEsYil7bi5mbltiXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vbihiLGEpfX0pLG4uZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGEpe3JldHVybiBuLmdyZXAobi50aW1lcnMsZnVuY3Rpb24oYil7cmV0dXJuIGE9PT1iLmVsZW19KS5sZW5ndGh9O2Z1bmN0aW9uIE1iKGEpe3JldHVybiBuLmlzV2luZG93KGEpP2E6OT09PWEubm9kZVR5cGUmJmEuZGVmYXVsdFZpZXd9bi5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaCxpLGosaz1uLmNzcyhhLCJwb3NpdGlvbiIpLGw9bihhKSxtPXt9OyJzdGF0aWMiPT09ayYmKGEuc3R5bGUucG9zaXRpb249InJlbGF0aXZlIiksaD1sLm9mZnNldCgpLGY9bi5jc3MoYSwidG9wIiksaT1uLmNzcyhhLCJsZWZ0Iiksaj0oImFic29sdXRlIj09PWt8fCJmaXhlZCI9PT1rKSYmKGYraSkuaW5kZXhPZigiYXV0byIpPi0xLGo/KGQ9bC5wb3NpdGlvbigpLGc9ZC50b3AsZT1kLmxlZnQpOihnPXBhcnNlRmxvYXQoZil8fDAsZT1wYXJzZUZsb2F0KGkpfHwwKSxuLmlzRnVuY3Rpb24oYikmJihiPWIuY2FsbChhLGMsbi5leHRlbmQoe30saCkpKSxudWxsIT1iLnRvcCYmKG0udG9wPWIudG9wLWgudG9wK2cpLG51bGwhPWIubGVmdCYmKG0ubGVmdD1iLmxlZnQtaC5sZWZ0K2UpLCJ1c2luZyJpbiBiP2IudXNpbmcuY2FsbChhLG0pOmwuY3NzKG0pfX0sbi5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihhKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiB2b2lkIDA9PT1hP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24ub2Zmc2V0LnNldE9mZnNldCh0aGlzLGEsYil9KTt2YXIgYixjLGQ9dGhpc1swXSxlPXt0b3A6MCxsZWZ0OjB9LGY9ZCYmZC5vd25lckRvY3VtZW50O2lmKGYpcmV0dXJuIGI9Zi5kb2N1bWVudEVsZW1lbnQsbi5jb250YWlucyhiLGQpPyhlPWQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYz1NYihmKSx7dG9wOmUudG9wK2MucGFnZVlPZmZzZXQtYi5jbGllbnRUb3AsbGVmdDplLmxlZnQrYy5wYWdlWE9mZnNldC1iLmNsaWVudExlZnR9KTplfSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBhLGIsYz10aGlzWzBdLGQ9e3RvcDowLGxlZnQ6MH07cmV0dXJuImZpeGVkIj09PW4uY3NzKGMsInBvc2l0aW9uIik/Yj1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihhPXRoaXMub2Zmc2V0UGFyZW50KCksYj10aGlzLm9mZnNldCgpLG4ubm9kZU5hbWUoYVswXSwiaHRtbCIpfHwoZD1hLm9mZnNldCgpKSxkLnRvcCs9bi5jc3MoYVswXSwiYm9yZGVyVG9wV2lkdGgiLCEwKSxkLmxlZnQrPW4uY3NzKGFbMF0sImJvcmRlckxlZnRXaWR0aCIsITApKSx7dG9wOmIudG9wLWQudG9wLW4uY3NzKGMsIm1hcmdpblRvcCIsITApLGxlZnQ6Yi5sZWZ0LWQubGVmdC1uLmNzcyhjLCJtYXJnaW5MZWZ0IiwhMCl9fX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vZmZzZXRQYXJlbnQ7d2hpbGUoYSYmInN0YXRpYyI9PT1uLmNzcyhhLCJwb3NpdGlvbiIpKWE9YS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGF8fEVhfSl9fSksbi5lYWNoKHtzY3JvbGxMZWZ0OiJwYWdlWE9mZnNldCIsc2Nyb2xsVG9wOiJwYWdlWU9mZnNldCJ9LGZ1bmN0aW9uKGEsYil7dmFyIGM9InBhZ2VZT2Zmc2V0Ij09PWI7bi5mblthXT1mdW5jdGlvbihkKXtyZXR1cm4gSyh0aGlzLGZ1bmN0aW9uKGEsZCxlKXt2YXIgZj1NYihhKTtyZXR1cm4gdm9pZCAwPT09ZT9mP2ZbYl06YVtkXTp2b2lkKGY/Zi5zY3JvbGxUbyhjP2YucGFnZVhPZmZzZXQ6ZSxjP2U6Zi5wYWdlWU9mZnNldCk6YVtkXT1lKX0sYSxkLGFyZ3VtZW50cy5sZW5ndGgpfX0pLG4uZWFjaChbInRvcCIsImxlZnQiXSxmdW5jdGlvbihhLGIpe24uY3NzSG9va3NbYl09R2EobC5waXhlbFBvc2l0aW9uLGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGM/KGM9RmEoYSxiKSxCYS50ZXN0KGMpP24oYSkucG9zaXRpb24oKVtiXSsicHgiOmMpOnZvaWQgMH0pfSksbi5lYWNoKHtIZWlnaHQ6ImhlaWdodCIsV2lkdGg6IndpZHRoIn0sZnVuY3Rpb24oYSxiKXtuLmVhY2goe3BhZGRpbmc6ImlubmVyIithLGNvbnRlbnQ6YiwiIjoib3V0ZXIiK2F9LGZ1bmN0aW9uKGMsZCl7bi5mbltkXT1mdW5jdGlvbihkLGUpe3ZhciBmPWFyZ3VtZW50cy5sZW5ndGgmJihjfHwiYm9vbGVhbiIhPXR5cGVvZiBkKSxnPWN8fChkPT09ITB8fGU9PT0hMD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIEsodGhpcyxmdW5jdGlvbihiLGMsZCl7dmFyIGU7cmV0dXJuIG4uaXNXaW5kb3coYik/Yi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrYV06OT09PWIubm9kZVR5cGU/KGU9Yi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoYi5ib2R5WyJzY3JvbGwiK2FdLGVbInNjcm9sbCIrYV0sYi5ib2R5WyJvZmZzZXQiK2FdLGVbIm9mZnNldCIrYV0sZVsiY2xpZW50IithXSkpOnZvaWQgMD09PWQ/bi5jc3MoYixjLGcpOm4uc3R5bGUoYixjLGQsZyl9LGIsZj9kOnZvaWQgMCxmLG51bGwpfX0pfSksbi5mbi5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLm9uKGEsbnVsbCxiLGMpfSx1bmJpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5vZmYoYSxudWxsLGIpfSxkZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihiLGEsYyxkKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGEsIioqIik6dGhpcy5vZmYoYixhfHwiKioiLGMpfSxzaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RofX0pLG4uZm4uYW5kU2VsZj1uLmZuLmFkZEJhY2ssImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKCJqcXVlcnkiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIG59KTt2YXIgTmI9YS5qUXVlcnksT2I9YS4kO3JldHVybiBuLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oYil7cmV0dXJuIGEuJD09PW4mJihhLiQ9T2IpLGImJmEualF1ZXJ5PT09biYmKGEualF1ZXJ5PU5iKSxufSxifHwoYS5qUXVlcnk9YS4kPW4pLG59KTsK"}]},{"name":"饰品比例列表计算","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["https://buff.163.com/market/?game=*","https://www.c5game.com/dota.html*","https://www.c5game.com/csgo/default/*","https://www.igxe.cn/dota2/*","https://www.igxe.cn/csgo/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null,"orig_connects":["www.c5game.com","buff.163.com","steamcommunity.com","steamcommunity-a.akamaihd.net"]}},"storage":{"ts":1608308899818,"data":{}},"enabled":false,"position":20,"file_url":"https://greasyfork.org/scripts/411234-%E9%A5%B0%E5%93%81%E6%AF%94%E4%BE%8B%E5%88%97%E8%A1%A8%E8%AE%A1%E7%AE%97/code/%E9%A5%B0%E5%93%81%E6%AF%94%E4%BE%8B%E5%88%97%E8%A1%A8%E8%AE%A1%E7%AE%97.user.js","uuid":"a1d12719-cc04-415a-aabc-94763da10c4a","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDppbDlk4Hmr5TkvovliJfooajorqHnrpcKLy8gQG5hbWVzcGFjZSAgICBzb3VyY2V3YXRlcgovLyBAdmVyc2lvbiAgICAgIDAuMS4yMwovLyBAZGVzY3JpcHRpb24gIOmlsOWTgeavlOS+i+WIl+ihqOiuoeeul+afpeeciwovLyBAYXV0aG9yICAgICAgIHNvdXJjZXdhdGVyCi8vIEBtYXRjaCAgICAgICAgaHR0cHM6Ly9idWZmLjE2My5jb20vbWFya2V0Lz9nYW1lPSoKLy8gQG1hdGNoICAgICAgICBodHRwczovL3d3dy5jNWdhbWUuY29tL2RvdGEuaHRtbCoKLy8gQG1hdGNoICAgICAgICBodHRwczovL3d3dy5jNWdhbWUuY29tL2NzZ28vZGVmYXVsdC8qCi8vIEBtYXRjaCAgICAgICAgaHR0cHM6Ly93d3cuaWd4ZS5jbi9kb3RhMi8qCi8vIEBtYXRjaCAgICAgICAgaHR0cHM6Ly93d3cuaWd4ZS5jbi9jc2dvLyoKLy8gQGdyYW50ICAgICAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAY29ubmVjdCAgICAgIHd3dy5jNWdhbWUuY29tCi8vIEBjb25uZWN0ICAgICAgYnVmZi4xNjMuY29tCi8vIEBjb25uZWN0ICAgICAgc3RlYW1jb21tdW5pdHkuY29tCi8vIEBjb25uZWN0ICAgICAgc3RlYW1jb21tdW5pdHktYS5ha2FtYWloZC5uZXQKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24oKSB7CgogICAgbGV0IGxvZz17CiAgICAgICAgREVCVUc6MSwKICAgICAgICBJTkZPOjUsCiAgICAgICAgbGV2ZWw6MSwKICAgICAgICBzZXRMZXZlbDpmdW5jdGlvbihsZXZlbCl7CiAgICAgICAgICAgIHRoaXMubGV2ZWw9bGV2ZWw7CiAgICAgICAgfSwKICAgICAgICBsb2c6ZnVuY3Rpb24obXNnLGxldmVsLHByZWZpeCl7CiAgICAgICAgICAgIGxldCBkYXRlPW5ldyBEYXRlKCk7CiAgICAgICAgICAgIGxldCB0aW1lPWRhdGUuZ2V0SG91cnMoKSsiOiIrZGF0ZS5nZXRNaW51dGVzKCkrIjoiK2RhdGUuZ2V0U2Vjb25kcygpOwogICAgICAgICAgICBpZihsZXZlbD49dGhpcy5sZXZlbCl7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwcmVmaXgrdGltZSsiID4+Pj4gIittc2cpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBpbmZvOmZ1bmN0aW9uIChtc2cpewogICAgICAgICAgICB0aGlzLmxvZyhtc2csdGhpcy5JTkZPLCJpbmZvOiAiKTsKICAgICAgICB9LAogICAgICAgIGRlYnVnOmZ1bmN0aW9uKG1zZyl7CiAgICAgICAgICAgIHRoaXMubG9nKG1zZyx0aGlzLkRFQlVHLCJkZWJ1ZzogIik7CiAgICAgICAgfQogICAgfTsKICAgIGxvZy5zZXRMZXZlbChsb2cuSU5GTyk7CiAgICBsZXQgcHJpY2VDU1NFbGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKICAgIHByaWNlQ1NTRWxlLnNldEF0dHJpYnV0ZSgidHlwZSIsInRleHQvY3NzIik7CiAgICBjb25zdCBkaXNwbGF5U3VjY2Vzc0NsYXNzPSJzX3Nfc19zX2Rpc3BsYXlfc3VjY2VzcyI7CiAgICBjb25zdCBpdGVtaWRBdHRyPSJzX3Nfc19zX2l0ZW1faWQiOwogICAgY29uc3Qgc3VjY2Vzc0F0dHI9InNfc19zX3Nfc3VjY2VzcyI7CiAgICBjb25zdCBsaW5rUmVnQXR0cj0ic19zX3Nfc19jbGlja19yZWdpc3RlciI7CiAgICBjb25zdCBjb250ZW50Q2hhbmdlQXR0cj0ic19zX3Nfc19jb250ZW50X2NoYW5nZSI7CiAgICBjb25zdCBwcm9ncmVzc0RpdklkPSJzX3Nfc19zX3Byb2dyZXNzX2RpdiI7CiAgICBjb25zdCBwcm9ncmVzc0RpdkF0dHI9InNfc19zX3NfcHJvZ3Jlc3NfaW5pdF9zdWNjZXNzIjsKICAgIGNvbnN0IHdhaXRpbmdEaXZJZD0ic19zX3Nfc193YWl0aW5nX2RpdiI7CiAgICBjb25zdCBhcHBpZExpc3Q9eyJjc2dvIjo3MzAsImRvdGEyIjo1NzB9OwogICAgY29uc3QgYnVmZlVybFJlZz0vYnVmZlwuMTYzXC5jb21cLy87CiAgICBjb25zdCBjNVVybFJlZz0vYzVnYW1lXC5jb21cLy87CiAgICBjb25zdCBpZ3hlVXJsUmVnPS9pZ3hlXC5jbi87CiAgICBjb25zdCB0aW1lb3V0PTYwMDA7CiAgICBsZXQgaW5kZXg9MDsKICAgIGxldCBwcm9ncmVzc0RpdkVsZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHByb2dyZXNzRGl2RWxlLnNldEF0dHJpYnV0ZSgiaWQiLHByb2dyZXNzRGl2SWQpOwogICAgcHJvZ3Jlc3NEaXZFbGUuc2V0QXR0cmlidXRlKCJzdHlsZSIsInotaW5kZXg6IDk5OTtib3JkZXItcmFkaXVzOjRweDsgYm9yZGVyOiA0cHggc29saWQgd2hpdGU7IHRleHQtYWxpZ246IGNlbnRlcjtwb3NpdGlvbjogYWJzb2x1dGU7bGVmdDogNTAlO3RvcDogNTUlO3RyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO2JhY2tncm91bmQ6d2hpdGU7cGFkZGluZzo1cHg7Iik7CiAgICBwcm9ncmVzc0RpdkVsZS5pbm5lckhUTUw9YAoJPHA+CgkgIDxzdHJvbmcgc3R5bGU9ImNvbG9yOmJsYWNrOyI+5q2j5Zyo5Yid5aeL5YyWPC9zdHJvbmc+PGJyPgoJICA8cHJvZ3Jlc3Mgc3R5bGU9IndpZHRoOjIwMHB4O2hlaWdodDoyNXB4OyI+PC9wcm9ncmVzcz4KCTwvcD4KCWA7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHByb2dyZXNzRGl2RWxlKTsKICAgIGxldCBwcmljZUNTUz1gCiAgICAgICAgLnNfc19zX3NfZGlzcGxheV9zdWNjZXNzewogICAgICAgICAgICBkaXNwbGF5OmJsb2NrOwogICAgICAgIH0KICAgICAgICAuc19zX3Nfc19jZWxsX3JpZ2h0LAogICAgICAgIC5zX3Nfc19zX2NlbGxfbGluaywKICAgICAgICAuc19zX3Nfc19jZWxsX2FmdGVyX2ZlZSwKICAgICAgICAuc19zX3Nfc19jZWxsX3JhdGUsCiAgICAgICAgLnNfc19zX3NfY2VsbF9yYXRlX2hpZ2h7CiAgICAgICAgICAgIHdpZHRoOjUwcHg7CiAgICAgICAgICAgIHRleHQtYWxpZ246cmlnaHQ7CiAgICAgICAgfQogICAgICAgIC5zX3Nfc19zX2NlbGxfbGVmdHsKICAgICAgICAgICAgZGlzcGxheTppbmxpbmUtYmxvY2s7CiAgICAgICAgICAgIHdpZHRoOjUwcHg7CiAgICAgICAgICAgIHRleHQtYWxpZ246bGVmdDsKICAgICAgICB9CiAgICAgICAgLnNfc19zX3NfY2VsbF9yaWdodHsKICAgICAgICAgICAgY29sb3I6I2VlYTIwZTsKICAgICAgICB9CiAgICAgICAgLnNfc19zX3NfY2VsbF9saW5rewogICAgICAgICAgICBjb2xvcjpibGFjazsKICAgICAgICB9CiAgICAgICAgLnNfc19zX3NfY2VsbF9yYXRlewogICAgICAgICAgICBjb2xvcjpncmVlbjsKICAgICAgICB9CiAgICAgICAgLnNfc19zX3NfY2VsbF9yYXRlX2hpZ2h7CiAgICAgICAgICAgIGNvbG9yOnJlZDsKICAgICAgICB9CiAgICBgOwogICAgbGV0IGN1c3RvbVByaWNlQ3NzOwogICAgaWYoYnVmZlVybFJlZy50ZXN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKSl7CiAgICAgICAgY3VzdG9tUHJpY2VDc3M9YAogICAgICAgIC5zX3Nfc19zX2NlbGxfbGVmdHsKICAgICAgICAgICAgY29sb3I6YmxhY2s7CiAgICAgICAgfQogICAgICAgIC5zX3Nfc19zX2Rpc3BsYXlfc3VjY2Vzc3sKICAgICAgICAgICAgbWFyZ2luLWxlZnQ6MTVweDsKICAgICAgICAgICAgaGVpZ2h0OjE2N3B4OwogICAgICAgIH0KICAgICAgICAuc19zX3Nfc19jZWxsX2FmdGVyX2ZlZXsKICAgICAgICAgICAgY29sb3I6cHVycGxlOwogICAgICAgIH0KICAgICAgICBgOwogICAgICAgIC8qCiAgICAgICAgbGV0IGVuTG9jYWxlPSJMb2NhbGUtU3VwcG9ydGVkPWVuOyI7CiAgICAgICAgaWYoZG9jdW1lbnQuY29va2llLmxhc3RJbmRleE9mKGVuTG9jYWxlKTwwKXsKICAgICAgICAgICAgZG9jdW1lbnQuY29va2llPWVuTG9jYWxlKyJwYXRoPS8iOwogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgfQogICAgICAgICovCiAgICB9ZWxzZSBpZihjNVVybFJlZy50ZXN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKSl7CiAgICAgICAgY3VzdG9tUHJpY2VDc3M9YAogICAgICAgIC5zX3Nfc19zX2NlbGxfbGVmdHsKICAgICAgICAgICAgY29sb3I6d2hpdGU7CiAgICAgICAgfQogICAgICAgIC5zX3Nfc19zX2Rpc3BsYXlfc3VjY2Vzc3sKICAgICAgICAgICAgbWFyZ2luLWxlZnQ6MTVweDsKICAgICAgICAgICAgaGVpZ2h0OjIwNXB4OwogICAgICAgIH0KICAgICAgICAuc19zX3Nfc19jZWxsX2FmdGVyX2ZlZXsKICAgICAgICAgICAgY29sb3I6IzU1YWE4ODsKICAgICAgICB9CiAgICAgICAgYDsKICAgIH1lbHNlIGlmKGlneGVVcmxSZWcudGVzdCh3aW5kb3cubG9jYXRpb24uaHJlZikpewogICAgICAgIGN1c3RvbVByaWNlQ3NzPWAKICAgICAgICAuc19zX3Nfc19jZWxsX2xlZnR7CiAgICAgICAgICAgIGNvbG9yOndoaXRlOwogICAgICAgIH0KICAgICAgICAuc19zX3Nfc19kaXNwbGF5X3N1Y2Nlc3N7CiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OjE1cHg7CiAgICAgICAgICAgIGhlaWdodDoyMDVweDsKICAgICAgICB9CiAgICAgICAgLnNfc19zX3NfY2VsbF9hZnRlcl9mZWV7CiAgICAgICAgICAgIGNvbG9yOiM1NWFhODg7CiAgICAgICAgfQogICAgICAgIGA7CiAgICB9CiAgICBwcmljZUNTU0VsZS5pbm5lckhUTUw9cHJpY2VDU1MrY3VzdG9tUHJpY2VDc3M7CiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHByaWNlQ1NTRWxlKTsKICAgIGZ1bmN0aW9uIGNoZWNrSW5pdENhbGN1bGF0ZSgpewogICAgICAgIGlmKCFwcm9ncmVzc0RpdkVsZS5nZXRBdHRyaWJ1dGUocHJvZ3Jlc3NEaXZBdHRyKSl7CiAgICAgICAgICAgIGluaXRDYWxjdWxhdGUoKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBsb2cuaW5mbygiaW5pdCBzdWNjZXNzZnVsbHkhIik7CiAgICB9CiAgICBmdW5jdGlvbiBpbml0Q2FsY3VsYXRlKCl7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe2NoZWNrSW5pdENhbGN1bGF0ZSgpO30sdGltZW91dCk7CiAgICAgICAgbGV0IHN0ZWFtTWFya2V0VXJsPSJodHRwczovL3N0ZWFtY29tbXVuaXR5LmNvbS9tYXJrZXQvIjsKICAgICAgICBsZXQgd2FsbGV0VmFyaWFibGU9InZhciBnX3JnV2FsbGV0SW5mbyA9ICI7CiAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICB1cmw6IHN0ZWFtTWFya2V0VXJsLAogICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAvL3RpbWVvdXQ6MTAwMDAsCiAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24ocmVzKXsKICAgICAgICAgICAgICAgIGlmKHJlcy5zdGF0dXMgPT09IDIwMCl7CiAgICAgICAgICAgICAgICAgICAgbGV0IGh0bWw9cmVzLnJlc3BvbnNlVGV4dDsKICAgICAgICAgICAgICAgICAgICB3YWxsZXRWYXJpYWJsZSs9aHRtbC5tYXRjaCgvdmFyIGdfcmdXYWxsZXRJbmZvKC58XG4pKj8oXHsrPygufFxuKSo/XH0rPykrLylbMl07CiAgICAgICAgICAgICAgICAgICAgbGV0IHZhclNjcmlwdEVsZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsKICAgICAgICAgICAgICAgICAgICB2YXJTY3JpcHRFbGUuc2V0QXR0cmlidXRlKCJ0eXBlIiwidGV4dC9qYXZhc2NyaXB0Iik7CiAgICAgICAgICAgICAgICAgICAgdmFyU2NyaXB0RWxlLmlubmVySFRNTD13YWxsZXRWYXJpYWJsZTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHZhclNjcmlwdEVsZSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGNhbGN1bGF0ZUpTVXJsPSJodHRwczovL3N0ZWFtY29tbXVuaXR5LWEuYWthbWFpaGQubmV0L3B1YmxpYy9qYXZhc2NyaXB0L2Vjb25vbXlfY29tbW9uLmpzP3Y9dHNYZFJWQjB5RWFSJmw9c2NoaW5lc2UmX2Nkbj1jaGluYV9waW55dW5jbG91ZCI7CiAgICAgICAgICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGNhbGN1bGF0ZUpTVXJsLAogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgICAgICAgICAvL3RpbWVvdXQ6MTAwMDAsCiAgICAgICAgICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24ocmVzKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlcy5zdGF0dXMgPT09IDIwMCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhbGN1bGF0ZVNjcmlwdD1yZXMucmVzcG9uc2VUZXh0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYWxTY3JpcHRFbGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsU2NyaXB0RWxlLnNldEF0dHJpYnV0ZSgidHlwZSIsInRleHQvamF2YXNjcmlwdCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbFNjcmlwdEVsZS5pbm5lckhUTUw9Y2FsY3VsYXRlU2NyaXB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoY2FsU2NyaXB0RWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0RpdkVsZS5zZXRBdHRyaWJ1dGUocHJvZ3Jlc3NEaXZBdHRyLCJzdWNjZXNzIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQod2luZG93LmxvY2F0aW9uLmhyZWYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQocHJvZ3Jlc3NEaXZFbGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmluZm8oImluaXRDYWxjdWxhdGUoKTog6K6/6ZeuU3RlYW3luILlnLrplJnor6/vvIEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSxvbmVycm9yIDogZnVuY3Rpb24oZXJyKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5pbmZvKCJpbml0Q2FsY3VsYXRlKCk6IOiuv+mXrlN0ZWFt5biC5Zy66LaF5pe277yBIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sb250aW1lb3V0IDogZnVuY3Rpb24oZXJyKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5pbmZvKCJpbml0Q2FsY3VsYXRlKCk6IOiuv+mXrui2heaXtiIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBsb2cuaW5mbygiaW5pdENhbGN1bGF0ZSgpOiDorr/pl65TdGVhbeW4guWcuumUmeivr++8gSIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LG9uZXJyb3IgOiBmdW5jdGlvbihlcnIpewogICAgICAgICAgICAgICAgbG9nLmluZm8oImluaXRDYWxjdWxhdGUoKTog6K6/6ZeuU3RlYW3luILlnLrotoXml7bvvIEiKTsKICAgICAgICAgICAgfSxvbnRpbWVvdXQgOiBmdW5jdGlvbihlcnIpewogICAgICAgICAgICAgICAgbG9nLmluZm8oImluaXRDYWxjdWxhdGUoKTog6K6/6Zeu6LaF5pe2Iik7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICB9CiAgICBpbml0Q2FsY3VsYXRlKCk7CiAgICBmdW5jdGlvbiBnZXRQcmljZVZhbHVlQXNJbnQodmFsdWUpewogICAgICAgIGlmKCFpc05hTih2YWx1ZSkpewogICAgICAgICAgICB2YWx1ZT12YWx1ZS50b1N0cmluZygpOwogICAgICAgICAgICBpZih2YWx1ZS5sYXN0SW5kZXhPZigiLiIpPDApewogICAgICAgICAgICAgICAgdmFsdWU9dmFsdWUrIjAwIjsKICAgICAgICAgICAgfWVsc2UgaWYodmFsdWUubGVuZ3RoLXZhbHVlLmxhc3RJbmRleE9mKCIuIikgPT0gMil7CiAgICAgICAgICAgICAgICB2YWx1ZSs9IjAiOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBwYXJzZUludCh2YWx1ZS5yZXBsYWNlKCIuIiwiIikpOwogICAgfQogICAgZnVuY3Rpb24gcmVjZWl2ZVByaWNlKHByaWNlKXsKICAgICAgICBpZih0eXBlb2YgcHJpY2UgIT0gJ3VuZGVmaW5lZCcpewogICAgICAgICAgICByZXR1cm4gKGdldFByaWNlVmFsdWVBc0ludChwcmljZSktcGFyc2VJbnQoQ2FsY3VsYXRlRmVlQW1vdW50KGdldFByaWNlVmFsdWVBc0ludChwcmljZSksZ19yZ1dhbGxldEluZm9bIndhbGxldF9wdWJsaXNoZXJfZmVlX3BlcmNlbnRfZGVmYXVsdCJdKS5mZWVzKSkvMTAwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gMDsKICAgIH0KICAgIGZ1bmN0aW9uIHF1ZXJ5UHJpY2UoY3VycmVudEluZGV4LGFwcGlkLG5hbWUsdXBkYXRlVmlldyxhcmdzKXsKICAgICAgICBsb2cuaW5mbygibmV3IHRhc2sgaW5kZXg6ICIrY3VycmVudEluZGV4KTsKICAgICAgICBpZihjdXJyZW50SW5kZXg8aW5kZXgpewogICAgICAgICAgICBsb2cuZGVidWcoInN0b3AgcHJldmlvdXMgY2hlY2sgdXBkYXRlIGZvciBpbmRleDogIitjdXJyZW50SW5kZXgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGNoZWNrVXBkYXRlKGN1cnJlbnRJbmRleCxpdGVtX25hbWVpZCxzdGVhbVVybCxlbGVtZW50KXsKICAgICAgICAgICAgaWYoY3VycmVudEluZGV4PGluZGV4KXsKICAgICAgICAgICAgICAgIGxvZy5kZWJ1Zygic3RvcCBwcmV2aW91cyBjaGVjayB1cGRhdGUgZm9yIGluZGV4OiAiK2N1cnJlbnRJbmRleCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoIWFyZ3MuZWxlbWVudC5nZXRBdHRyaWJ1dGUoc3VjY2Vzc0F0dHIpKXsKICAgICAgICAgICAgICAgIHVwZGF0ZShpdGVtX25hbWVpZCxzdGVhbVVybCk7CiAgICAgICAgICAgICAgICBsb2cuZGVidWcoInJldHJ5IGdldCBwcmljZSA+Pj4+ICIraXRlbV9uYW1laWQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxvZy5kZWJ1ZyhpdGVtX25hbWVpZCsiID4+Pj4gZ2V0IHByaWNlIGZpbmlzaCEiKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gdXBkYXRlKGl0ZW1fbmFtZWlkLHN0ZWFtVXJsKXsKICAgICAgICAgICAgaWYoY3VycmVudEluZGV4PGluZGV4KXsKICAgICAgICAgICAgICAgIGxvZy5kZWJ1Zygic3RvcCBwcmV2aW91cyBjaGVjayB1cGRhdGUgZm9yIGluZGV4OiAiK2N1cnJlbnRJbmRleCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IGJ1eVByaWNlPS0xOwogICAgICAgICAgICBsZXQgc2VsbFByaWNlPS0xOwogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Y2hlY2tVcGRhdGUoY3VycmVudEluZGV4LGl0ZW1fbmFtZWlkLHN0ZWFtVXJsLGFyZ3MuZWxlbWVudCk7fSx0aW1lb3V0KTsKICAgICAgICAgICAgbG9nLmRlYnVnKGB1cGRhdGU6ICJodHRwczovL3N0ZWFtY29tbXVuaXR5LmNvbS9tYXJrZXQvaXRlbW9yZGVyc2hpc3RvZ3JhbT9jb3VudHJ5PUNOJmxhbmd1YWdlPXNjaGluZXNlJmN1cnJlbmN5PTIzJml0ZW1fbmFtZWlkPSR7aXRlbV9uYW1laWR9JnR3b19mYWN0b3I9MCJgKTsKICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgdXJsOiBgaHR0cHM6Ly9zdGVhbWNvbW11bml0eS5jb20vbWFya2V0L2l0ZW1vcmRlcnNoaXN0b2dyYW0/Y291bnRyeT1DTiZsYW5ndWFnZT1zY2hpbmVzZSZjdXJyZW5jeT0yMyZpdGVtX25hbWVpZD0ke2l0ZW1fbmFtZWlkfSZ0d29fZmFjdG9yPTBgLAogICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgICAgIC8vdGltZW91dDoxMDAwMCwKICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ2pzb24nLAogICAgICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbihyZXMpewogICAgICAgICAgICAgICAgICAgIGlmKHJlcy5zdGF0dXMgPT09IDIwMCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXRhPXJlcy5yZXNwb25zZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzPT0xKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuYnV5X29yZGVyX2dyYXBoLmxlbmd0aD4wJiZkYXRhLmJ1eV9vcmRlcl9ncmFwaFswXS5sZW5ndGg+MCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV5UHJpY2U9ZGF0YS5idXlfb3JkZXJfZ3JhcGhbMF1bMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnNlbGxfb3JkZXJfZ3JhcGgubGVuZ3RoPjAmJmRhdGEuc2VsbF9vcmRlcl9ncmFwaFswXS5sZW5ndGg+MCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsbFByaWNlPWRhdGEuc2VsbF9vcmRlcl9ncmFwaFswXVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3Muc2VsbFByaWNlPXNlbGxQcmljZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MuYnV5UHJpY2U9YnV5UHJpY2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLnN0ZWFtVXJsPXN0ZWFtVXJsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVmlldyhhcmdzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBsb2cuaW5mbygidXBkYXRlKCk6ICIrcmVzLnN0YXR1cysiIDrorr/pl65TdGVhbeW4guWcuumUmeivr++8gSIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sb25lcnJvciA6IGZ1bmN0aW9uKGVycil7CiAgICAgICAgICAgICAgICAgICAgbG9nLmluZm8oInVwZGF0ZSgpOiDorr/pl65TdGVhbeW4guWcuui2heaXtu+8gSIpOwogICAgICAgICAgICAgICAgfSxvbnRpbWVvdXQgOiBmdW5jdGlvbihlcnIpewogICAgICAgICAgICAgICAgICAgIGxvZy5pbmZvKCJ1cGRhdGUoKTog6K6/6Zeu6LaF5pe2Iik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBjaGVja0ZldGNoSW5mbyhjdXJyZW50SW5kZXgsaXRlbV9uYW1laWQpewogICAgICAgICAgICBpZihjdXJyZW50SW5kZXg8aW5kZXgpewogICAgICAgICAgICAgICAgbG9nLmRlYnVnKCJzdG9wIHByZXZpb3VzIGNoZWNrIGZldGNoIGluZm8gZm9yIGluZGV4OiAiK2N1cnJlbnRJbmRleCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoIWFyZ3MuZWxlbWVudC5nZXRBdHRyaWJ1dGUoaXRlbWlkQXR0cikpewogICAgICAgICAgICAgICAgZmV0Y2hJbmZvKCk7CiAgICAgICAgICAgICAgICBsb2cuZGVidWcoInJldHJ5IGdldCBpdGVtIG5hbWUgaWQuIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbG9nLmRlYnVnKGl0ZW1fbmFtZWlkKyIgPj4+PiBnZXQgaXRlbSBuYW1lIGlkIGZpbmlzaCEiKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZmV0Y2hJbmZvKCl7CiAgICAgICAgICAgIGxldCBpdGVtX25hbWVpZD0iIjsKICAgICAgICAgICAgaWYoY3VycmVudEluZGV4PGluZGV4KXsKICAgICAgICAgICAgICAgIGxvZy5kZWJ1Zygic3RvcCBwcmV2aW91cyBjaGVjayB1cGRhdGUgZm9yIGluZGV4OiAiK2N1cnJlbnRJbmRleCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IHN0ZWFtVXJsPWBodHRwczovL3N0ZWFtY29tbXVuaXR5LmNvbS9tYXJrZXQvbGlzdGluZ3MvJHthcHBpZH0vJHtuYW1lfWA7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtjaGVja0ZldGNoSW5mbyhjdXJyZW50SW5kZXgsaXRlbV9uYW1laWQpO30sdGltZW91dCk7CiAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgICAgICAgICB1cmw6IHN0ZWFtVXJsLAogICAgICAgICAgICAgICAgLy90aW1lb3V0OjEwMDAwLAogICAgICAgICAgICAgICAgYXN5bmM6IGZhbHNlLAogICAgICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbihyZXMpewogICAgICAgICAgICAgICAgICAgIGlmKHJlcy5zdGF0dXMgPT09IDIwMCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXNwb25zZT1yZXMucmVzcG9uc2VUZXh0OwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmFtZWlkTWF0Y2hzPXJlc3BvbnNlLm1hdGNoKC9NYXJrZXRfTG9hZE9yZGVyU3ByZWFkXCguKj8oW1xkXSspLio/XCk7Lyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZygiPG5hbWVpZE1hdGNoczogIituYW1laWRNYXRjaHMrIj4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYobmFtZWlkTWF0Y2hzKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1fbmFtZWlkPW5hbWVpZE1hdGNocy5sZW5ndGggPT0gMiA/IG5hbWVpZE1hdGNoc1sxXSA6ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnKCI8aXRlbV9uYW1laWQ6ICIraXRlbV9uYW1laWQrIj4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW1fbmFtZWlkIT0iIil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5lbGVtZW50LnNldEF0dHJpYnV0ZShpdGVtaWRBdHRyLCJzdWNjZXNzIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlKGl0ZW1fbmFtZWlkLHN0ZWFtVXJsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigiIyIrd2FpdGluZ0RpdklkKS5pbm5lckhUTUw9YDxzcGFuIHN0eWxlPSJjb2xvcjogcmVkO2Rpc3BsYXk6YmxvY2s7dGV4dC1hbGlnbjogY2VudGVyO3Bvc2l0aW9uOiByZWxhdGl2ZTtsZWZ0OiA1MCU7dG9wOiA1MCU7dHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7Ij7mraTnianlk4HkuI3lnKjotKfmnrbkuIrjgII8L3NwYW4+YDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCIjIit3YWl0aW5nRGl2SWQpLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGRpc3BsYXlTdWNjZXNzQ2xhc3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5lbGVtZW50LnNldEF0dHJpYnV0ZShpdGVtaWRBdHRyLCJzdWNjZXNzIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLmVsZW1lbnQuc2V0QXR0cmlidXRlKHN1Y2Nlc3NBdHRyLCJ0cnVlIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmluZm8oImZldGNoSW5mbygpOiBFcnJvciBDb2RlOiAiK3Jlcy5zdGF0dXMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sb25lcnJvciA6IGZ1bmN0aW9uKGVycil7CiAgICAgICAgICAgICAgICAgICAgbG9nLmluZm8oImZldGNoSW5mbygpOiDorr/pl65TdGVhbeW4guWcuumUmeivr++8gSIpOwogICAgICAgICAgICAgICAgfSxvbnRpbWVvdXQgOiBmdW5jdGlvbihlcnIpewogICAgICAgICAgICAgICAgICAgIGxvZy5pbmZvKCJmZXRjaEluZm8oKTog6K6/6Zeu6LaF5pe2Iik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBmZXRjaEluZm8oKTsKICAgIH0KICAgIGZ1bmN0aW9uIHVwZGF0ZVZpZXcoYXJncyl7CiAgICAgICAgbGV0IHB1cmNoYXNlUHJpY2Usc2VsbFJhdGUsYnV5UmF0ZTsKICAgICAgICBsZXQgcHJpY2VTcGFuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICBsZXQgc3VjY2Vzcz10cnVlOwogICAgICAgIGlmKGJ1ZmZVcmxSZWcudGVzdChhcmdzLnVybCkmJiFhcmdzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKHN1Y2Nlc3NBdHRyKSl7CiAgICAgICAgICAgIHB1cmNoYXNlUHJpY2U9cGFyc2VGbG9hdChhcmdzLmVsZW1lbnQucXVlcnlTZWxlY3Rvcigic3Ryb25nLmZfU3Ryb25nIikuaW5uZXJIVE1MLm1hdGNoKC9bXGRcLl0vZykuam9pbigiIikpOwogICAgICAgIH1lbHNlIGlmKGM1VXJsUmVnLnRlc3QoYXJncy51cmwpJiYhYXJncy5lbGVtZW50LmdldEF0dHJpYnV0ZShzdWNjZXNzQXR0cikpewogICAgICAgICAgICBwdXJjaGFzZVByaWNlPXBhcnNlRmxvYXQoYXJncy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoInNwYW4ucHJpY2UiKS5pbm5lckhUTUwubWF0Y2goL1tcZFwuXS9nKS5qb2luKCIiKSk7CiAgICAgICAgfWVsc2UgaWYoaWd4ZVVybFJlZy50ZXN0KGFyZ3MudXJsKSYmIWFyZ3MuZWxlbWVudC5nZXRBdHRyaWJ1dGUoc3VjY2Vzc0F0dHIpKXsKICAgICAgICAgICAgcHVyY2hhc2VQcmljZT1wYXJzZUZsb2F0KGFyZ3MuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCIucHJpY2UuZmwiKS50ZXh0Q29udGVudC5tYXRjaCgvW1xkXC5dKy9nKS5qb2luKCIiKSk7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIHN1Y2Nlc3M9ZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmKHN1Y2Nlc3MpewogICAgICAgICAgICBzZWxsUmF0ZT0ocHVyY2hhc2VQcmljZS9yZWNlaXZlUHJpY2UoYXJncy5zZWxsUHJpY2UpKS50b0ZpeGVkKDIpOwogICAgICAgICAgICBidXlSYXRlPShwdXJjaGFzZVByaWNlL3JlY2VpdmVQcmljZShhcmdzLmJ1eVByaWNlKSkudG9GaXhlZCgyKTsKICAgICAgICAgICAgYXJncy5lbGVtZW50LnJlbW92ZUNoaWxkKGFyZ3MuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCIjIit3YWl0aW5nRGl2SWQpKTsKICAgICAgICAgICAgcHJpY2VTcGFuLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGRpc3BsYXlTdWNjZXNzQ2xhc3MpOwogICAgICAgICAgICBsZXQgcHJpY2VDb250ZW50PWAKICAgICAgICAgICAgICAgIDxicj48c3BhbiBjbGFzcz0ic19zX3Nfc19jZWxsX2xlZnQiPuWNluWHuu+8mjwvc3Bhbj48c3BhbiBjbGFzcz0ic19zX3Nfc19jZWxsX3JpZ2h0Ij4keyhhcmdzLnNlbGxQcmljZSA9PSAtMSA/ICLml6AiIDogYXJncy5zZWxsUHJpY2UpfTwvc3Bhbj4KICAgICAgICAgICAgICAgIDxicj48c3BhbiBjbGFzcz0ic19zX3Nfc19jZWxsX2xlZnQiPueojuWQju+8mjwvc3Bhbj48c3BhbiBjbGFzcz0ic19zX3Nfc19jZWxsX2FmdGVyX2ZlZSI+JHthcmdzLnNlbGxQcmljZSA9PSAtMSA/ICLml6AiIDogcmVjZWl2ZVByaWNlKGFyZ3Muc2VsbFByaWNlKX08L3NwYW4+CiAgICAgICAgICAgICAgICA8YnI+PHNwYW4gY2xhc3M9InNfc19zX3NfY2VsbF9sZWZ0Ij7mr5TkvovvvJo8L3NwYW4+PHNwYW4gY2xhc3M9IiR7IHNlbGxSYXRlID4gMC43ID8gInNfc19zX3NfY2VsbF9yYXRlX2hpZ2giOiAic19zX3Nfc19jZWxsX3JhdGUifSI+JHthcmdzLnNlbGxQcmljZSA9PSAtMSA/ICLml6AiIDogc2VsbFJhdGV9PC9zcGFuPgogICAgICAgICAgICAgICAgPGJyPjxicj48c3BhbiBjbGFzcz0ic19zX3Nfc19jZWxsX2xlZnQiPuS5sOWFpe+8mjwvc3Bhbj48c3BhbiBjbGFzcz0ic19zX3Nfc19jZWxsX3JpZ2h0Ij4keyhhcmdzLmJ1eVByaWNlID09IC0xID8gIuaXoCIgOiBhcmdzLmJ1eVByaWNlKX08L3NwYW4+CiAgICAgICAgICAgICAgICA8YnI+PHNwYW4gY2xhc3M9InNfc19zX3NfY2VsbF9sZWZ0Ij7nqI7lkI7vvJo8L3NwYW4+PHNwYW4gY2xhc3M9InNfc19zX3NfY2VsbF9hZnRlcl9mZWUiPiR7YXJncy5idXlQcmljZSA9PSAtMSA/ICLml6AiIDogcmVjZWl2ZVByaWNlKGFyZ3MuYnV5UHJpY2UpfTwvc3Bhbj4KICAgICAgICAgICAgICAgIDxicj48c3BhbiBjbGFzcz0ic19zX3Nfc19jZWxsX2xlZnQiPuavlOS+i++8mjwvc3Bhbj48c3BhbiBjbGFzcz0iJHsgYnV5UmF0ZSA+IDAuOSA/ICJzX3Nfc19zX2NlbGxfcmF0ZV9oaWdoIjogInNfc19zX3NfY2VsbF9yYXRlIn0iPiR7YXJncy5idXlQcmljZSA9PSAtMSA/ICLml6AiIDogYnV5UmF0ZX08L3NwYW4+CiAgICAgICAgICAgICAgICA8YnI+PGJyPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNfc19zX3NfY2VsbF9saW5rIj48YSBocmVmPSIke2FyZ3Muc3RlYW1Vcmx9IiB0YXJnZXQ9Il9ibGFuayI+U3RlYW3pk77mjqU8L2E+PC9zcGFuPgogICAgICAgIGA7CiAgICAgICAgICAgIHByaWNlU3Bhbi5pbm5lckhUTUw9cHJpY2VDb250ZW50OwogICAgICAgICAgICBhcmdzLmVsZW1lbnQuc2V0QXR0cmlidXRlKHN1Y2Nlc3NBdHRyLCJ0cnVlIik7CiAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5hcHBlbmRDaGlsZChwcmljZVNwYW4pOwogICAgICAgICAgICBsb2cuZGVidWcoInVwZGF0ZSB2aWV3IHN1Y2Nlc3NmdWxseSEiKTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiB3YWl0Rm9yRWxlbWVudChzZWxlY3Rvcix0YXNrKXsKICAgICAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSl7CiAgICAgICAgICAgIHRhc2soKTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe3dhaXRGb3JFbGVtZW50KHNlbGVjdG9yLHRhc2spO30sMTAwKTsKICAgICAgICB9CiAgICB9CiAgICBsZXQgbWlzc2lvblN0YXJ0PWZhbHNlOwogICAgZnVuY3Rpb24gc3RhcnQodXJsKXsKICAgICAgICBsZXQgY2FyZHM7CiAgICAgICAgbGV0IGNhcmRDbGFzczsKICAgICAgICBsZXQgYXBwaWQ7CiAgICAgICAgaWYoYnVmZlVybFJlZy50ZXN0KHVybCkpewogICAgICAgICAgICBsZXQgYnVmZkNTR09SZWc9L2dhbWU9Y3Nnby87CiAgICAgICAgICAgIGxldCBidWZmRG90YVJlZz0vZ2FtZT1kb3RhMi87CiAgICAgICAgICAgIGlmKGJ1ZmZDU0dPUmVnLnRlc3QodXJsKSl7CiAgICAgICAgICAgICAgICBjYXJkQ2xhc3M9Ii5jYXJkX2NzZ28iOwogICAgICAgICAgICAgICAgYXBwaWQ9YXBwaWRMaXN0LmNzZ287CiAgICAgICAgICAgIH1lbHNlIGlmKGJ1ZmZEb3RhUmVnLnRlc3QodXJsKSl7CiAgICAgICAgICAgICAgICBjYXJkQ2xhc3M9Ii5jYXJkX2RvdGEyIjsKICAgICAgICAgICAgICAgIGFwcGlkPWFwcGlkTGlzdC5kb3RhMjsKICAgICAgICAgICAgfQogICAgICAgICAgICB3YWl0Rm9yRWxlbWVudChjYXJkQ2xhc3MsZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGNhcmRzPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZENsYXNzKS5xdWVyeVNlbGVjdG9yQWxsKCJsaSIpOwogICAgICAgICAgICAgICAgc3RhcnRRdWVyeSgpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgfWVsc2UgaWYoYzVVcmxSZWcudGVzdCh1cmwpKXsKICAgICAgICAgICAgbGV0IGM1Q1NHT1JlZz0vXC9jc2dvXC8vOwogICAgICAgICAgICBsZXQgYzVEb3RhUmVnPS9kb3RhXC5odG1sLzsKICAgICAgICAgICAgY2FyZENsYXNzPSIubGlzdC1pdGVtNCI7CiAgICAgICAgICAgIGlmKGM1RG90YVJlZy50ZXN0KHVybCkpewogICAgICAgICAgICAgICAgYXBwaWQ9YXBwaWRMaXN0LmRvdGEyOwogICAgICAgICAgICB9ZWxzZSBpZihjNUNTR09SZWcudGVzdCh1cmwpKXsKICAgICAgICAgICAgICAgIGFwcGlkPWFwcGlkTGlzdC5jc2dvOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHdhaXRGb3JFbGVtZW50KGNhcmRDbGFzcyxmdW5jdGlvbigpewogICAgICAgICAgICAgICAgY2FyZHM9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXJkQ2xhc3MpLnF1ZXJ5U2VsZWN0b3JBbGwoImxpIik7CiAgICAgICAgICAgICAgICBzdGFydFF1ZXJ5KCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH1lbHNlIGlmKGlneGVVcmxSZWcudGVzdCh1cmwpKXsKICAgICAgICAgICAgbGV0IGlneGVDU0dPUmVnPS9cL2NzZ29cLy87CiAgICAgICAgICAgIGxldCBpZ3hlRG90YVJlZz0vXC9kb3RhMlwvLzsKICAgICAgICAgICAgY2FyZENsYXNzPSIuZGF0YUxpc3QiOwogICAgICAgICAgICBpZihpZ3hlRG90YVJlZy50ZXN0KHVybCkpewogICAgICAgICAgICAgICAgYXBwaWQ9YXBwaWRMaXN0LmRvdGEyOwogICAgICAgICAgICB9ZWxzZSBpZihpZ3hlQ1NHT1JlZy50ZXN0KHVybCkpewogICAgICAgICAgICAgICAgYXBwaWQ9YXBwaWRMaXN0LmNzZ287CiAgICAgICAgICAgIH0KICAgICAgICAgICAgd2FpdEZvckVsZW1lbnQoY2FyZENsYXNzLGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBjYXJkcz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNhcmRDbGFzcykucXVlcnlTZWxlY3RvckFsbCgiYSIpOwogICAgICAgICAgICAgICAgc3RhcnRRdWVyeSgpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gc3RhcnRRdWVyeSgpewogICAgICAgICAgICArK2luZGV4OwogICAgICAgICAgICBpZihidWZmVXJsUmVnLnRlc3QodXJsKSl7CiAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDtpPGNhcmRzLmxlbmd0aDsrK2kpewogICAgICAgICAgICAgICAgICAgIGxldCBjYXJkPWNhcmRzW2ldOwogICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50SW5kZXg9aW5kZXg7CiAgICAgICAgICAgICAgICAgICAgbGV0IHByb2dyZXNzRWxlRGl2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICAgICAgICAgIHByb2dyZXNzRWxlRGl2LnNldEF0dHJpYnV0ZSgiaWQiLHdhaXRpbmdEaXZJZCk7CiAgICAgICAgICAgICAgICAgICAgY2FyZC5zZXRBdHRyaWJ1dGUoInN0eWxlIiwiaGVpZ2h0OjM5OXB4IWltcG9ydGFudDsiKTsKICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0VsZURpdi5zZXRBdHRyaWJ1dGUoInN0eWxlIiwid2lkdGg6MjA4cHg7aGVpZ2h0OjEyMHB4OyIpOwogICAgICAgICAgICAgICAgICAgIHByb2dyZXNzRWxlRGl2LmlubmVySFRNTD1gPHByb2dyZXNzIHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7cG9zaXRpb246IHJlbGF0aXZlO2xlZnQ6IDUwJTt0b3A6IDUwJTt0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsiPjwvcHJvZ3Jlc3M+YDsKICAgICAgICAgICAgICAgICAgICBsZXQgYnVmZkl0ZW1Fbk5hbWVBdHRyPSJzX3Nfc19zX2J1ZmZfaXRlbV9lbl9uYW1lX2F0dHIiOwogICAgICAgICAgICAgICAgICAgIGxldCBkZWNvZGVUZXh0RWxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRleHRhcmVhIik7CiAgICAgICAgICAgICAgICAgICAgY2FyZC5hcHBlbmRDaGlsZChwcm9ncmVzc0VsZURpdik7CiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tJdGVtRW5OYW1lKGNhcmQsY3VycmVudEluZGV4KXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWNhcmQuZ2V0QXR0cmlidXRlKGJ1ZmZJdGVtRW5OYW1lQXR0cikpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0SXRlbUVuTmFtZShjYXJkLGN1cnJlbnRJbmRleCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcoIkJ1ZmY6IHJldHJ5IGdldCB0aGUgZW4gbmFtZSEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcoIkJ1ZmY6IGdvdCB0aGUgZW4gbmFtZSEiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0SXRlbUVuTmFtZShjYXJkLGN1cnJlbnRJbmRleCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtjaGVja0l0ZW1Fbk5hbWUoY2FyZCxjdXJyZW50SW5kZXgpO30sNTAwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogYCR7Y2FyZC5xdWVyeVNlbGVjdG9yKCJhIikuaHJlZn1gLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGltZW91dDoxMDAwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24ocmVzKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZXMuc3RhdHVzID09PSAyMDApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaHRtbD1yZXMucmVzcG9uc2VUZXh0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RlYW1MaW5rUmVnPS8iaHR0cHM6XC9cL3N0ZWFtY29tbXVuaXR5LmNvbVwvbWFya2V0XC9saXN0aW5nc1wvKC4qPykiLzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0ZWFtTGluaz1odG1sLm1hdGNoKC8iaHR0cHM6XC9cL3N0ZWFtY29tbXVuaXR5LmNvbVwvbWFya2V0XC9saXN0aW5nc1wvKC4qPykiLyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHN0ZWFtTGluay5sZW5ndGg+MCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVUZXh0RWxlLmlubmVySFRNTD1zdGVhbUxpbmtbMV0uc3Vic3RyaW5nKHN0ZWFtTGlua1sxXS5sYXN0SW5kZXhPZigiXC8iKSsxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbk5hbWU9ZGVjb2RlVGV4dEVsZS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5UHJpY2UoY3VycmVudEluZGV4LGFwcGlkLGVuTmFtZSx1cGRhdGVWaWV3LHsidXJsIjp1cmwsImVsZW1lbnQiOmNhcmR9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmQuc2V0QXR0cmlidXRlKGJ1ZmZJdGVtRW5OYW1lQXR0ciwic3VjY2VzcyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5pbmZvKCLorr/pl65CdWZm6aG16Z2i6ZSZ6K+vOiBlcnJvciBjb2RlOiAiK3Jlcy5zdGF0dXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sb25lcnJvciA6IGZ1bmN0aW9uKGVycil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmluZm8oIuiuv+mXrkJ1ZmbpobXpnaLplJnor6/vvIEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sb250aW1lb3V0IDogZnVuY3Rpb24oZXJyKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuaW5mbygi6K6/6ZeuQnVmZumhtemdoui2heaXtu+8gSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZ2V0SXRlbUVuTmFtZShjYXJkLGN1cnJlbnRJbmRleCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBsZXQgbWFya2V0Q2FyZD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjal9tYXJrZXRfY2FyZCIpOwogICAgICAgICAgICAgICAgaWYoIW1pc3Npb25TdGFydCl7CiAgICAgICAgICAgICAgICAgICAgbGV0IG1hcmtldENhcmRDb25maWcgPSB7IGNoaWxkTGlzdDogdHJ1ZSB9OwogICAgICAgICAgICAgICAgICAgIGxldCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNhcmRDbGFzcykpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIW1hcmtldENhcmQuZ2V0QXR0cmlidXRlKGNvbnRlbnRDaGFuZ2VBdHRyKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2V0Q2FyZC5zZXRBdHRyaWJ1dGUoY29udGVudENoYW5nZUF0dHIsInRydWUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUobWFya2V0Q2FyZCwgbWFya2V0Q2FyZENvbmZpZyk7CiAgICAgICAgICAgICAgICAgICAgbGV0IG1hcmtldENhcmRDb25maWdBdHRyPXsgYXR0cmlidXRlczogdHJ1ZSB9OwogICAgICAgICAgICAgICAgICAgIGxldCBvYnNlcnZlckF0dHIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICBpZihtYXJrZXRDYXJkLmdldEF0dHJpYnV0ZShjb250ZW50Q2hhbmdlQXR0cikpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2V0Q2FyZC5yZW1vdmVBdHRyaWJ1dGUoY29udGVudENoYW5nZUF0dHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQod2luZG93LmxvY2F0aW9uLmhyZWYpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXJBdHRyLm9ic2VydmUobWFya2V0Q2FyZCwgbWFya2V0Q2FyZENvbmZpZ0F0dHIpOwogICAgICAgICAgICAgICAgICAgIG1pc3Npb25TdGFydD10cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYoYzVVcmxSZWcudGVzdCh1cmwpKXsKICAgICAgICAgICAgICAgIGxldCBjNUl0ZW1Fbk5hbWVBdHRyPSJzX3Nfc19zX2M1X2l0ZW1fZW5fbmFtZV9hdHRyIjsKICAgICAgICAgICAgICAgIGxldCBkZWNvZGVUZXh0RWxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRleHRhcmVhIik7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBydW5QYXJ0KHN0YXJ0LGVuZCl7CiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPXN0YXJ0O2k8ZW5kOysraSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50SW5kZXg9aW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYXJkPWNhcmRzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJvZ3Jlc3NFbGVTcGFuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NFbGVTcGFuLnNldEF0dHJpYnV0ZSgic3R5bGUiLCJoZWlnaHQ6MjA1cHg7ZGlzcGxheTpibG9jazsiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NFbGVTcGFuLnNldEF0dHJpYnV0ZSgiaWQiLHdhaXRpbmdEaXZJZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzRWxlU3Bhbi5pbm5lckhUTUw9YDxwcm9ncmVzcyBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyO3Bvc2l0aW9uOiByZWxhdGl2ZTtsZWZ0OiA1MCU7dG9wOiA1MCU7dHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7Ij48L3Byb2dyZXNzPmA7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmQuYXBwZW5kQ2hpbGQocHJvZ3Jlc3NFbGVTcGFuKTsKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tJdGVtRW5OYW1lKGNhcmQsY3VycmVudEluZGV4KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFjYXJkLmdldEF0dHJpYnV0ZShjNUl0ZW1Fbk5hbWVBdHRyKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0SXRlbUVuTmFtZShjYXJkLGN1cnJlbnRJbmRleCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnKCJjNTogcmV0cnkgZ2V0IHRoZSBlbiBuYW1lISIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnKCJjNTogZ290IHRoZSBlbiBuYW1lISIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldEl0ZW1Fbk5hbWUoY2FyZCxjdXJyZW50SW5kZXgpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe2NoZWNrSXRlbUVuTmFtZShjYXJkLGN1cnJlbnRJbmRleCk7fSw1MDAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGAke2NhcmQucXVlcnlTZWxlY3RvcigiYSIpLmhyZWZ9YCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGltZW91dDoxMDAwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uKHJlcyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlcy5zdGF0dXMgPT09IDIwMCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaHRtbD1yZXMucmVzcG9uc2VUZXh0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0ZWFtTGlua1JlZz0vImh0dHBzOlwvXC9zdGVhbWNvbW11bml0eS5jb21cL21hcmtldFwvbGlzdGluZ3NcLyguKj8pIi87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RlYW1MaW5rPWh0bWwubWF0Y2goLyJodHRwczpcL1wvc3RlYW1jb21tdW5pdHkuY29tXC9tYXJrZXRcL2xpc3RpbmdzXC8oLio/KSIvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHN0ZWFtTGluay5sZW5ndGg+MCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjb2RlVGV4dEVsZS5pbm5lckhUTUw9c3RlYW1MaW5rWzFdLnN1YnN0cmluZyhzdGVhbUxpbmtbMV0ubGFzdEluZGV4T2YoIlwvIikrMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVuTmFtZT1kZWNvZGVUZXh0RWxlLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5UHJpY2UoY3VycmVudEluZGV4LGFwcGlkLGVuTmFtZSx1cGRhdGVWaWV3LHsidXJsIjp1cmwsImVsZW1lbnQiOmNhcmR9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkLnNldEF0dHJpYnV0ZShjNUl0ZW1Fbk5hbWVBdHRyLCJzdWNjZXNzIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmluZm8oIuiuv+mXrkM16aG16Z2i6ZSZ6K+vOiBlcnJvciBjb2RlOiAiK3Jlcy5zdGF0dXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxvbmVycm9yIDogZnVuY3Rpb24oZXJyKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmluZm8oIuiuv+mXrkM16aG16Z2i6ZSZ6K+v77yBIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxvbnRpbWVvdXQgOiBmdW5jdGlvbihlcnIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuaW5mbygi6K6/6ZeuQzXpobXpnaLotoXml7bvvIEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBnZXRJdGVtRW5OYW1lKGNhcmQsY3VycmVudEluZGV4KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBsZXQgaGFsZj1jYXJkcy5sZW5ndGg+MzIgPyBwYXJzZUludChjYXJkcy5sZW5ndGgvMikgOiBjYXJkcy5sZW5ndGg7CiAgICAgICAgICAgICAgICBpZihoYWxmIT0wJiZoYWxmPGNhcmRzLmxlbmd0aCl7CiAgICAgICAgICAgICAgICAgICAgbGV0IGludGVydmFsSWQ9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvdW50PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi4iK2Rpc3BsYXlTdWNjZXNzQ2xhc3MpLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoY291bnQ9PWhhbGYpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5pbmZvKCJydW4gcGFydCAyISIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnQybm90aWZ5SWQ9InNfc19zX3NfYzVfcGFydDJfbm90aWZ5IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3aWR0aD0yMDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGVpZ2h0PTI1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxlZnQ9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgKyAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIC0gd2lkdGgpIC8gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0b3A9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCArIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IC0gaGVpZ2h0KSAvIDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbm90aWZ5RWxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZ5RWxlLnNldEF0dHJpYnV0ZSgiaWQiLHBhcnQybm90aWZ5SWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZ5RWxlLnNldEF0dHJpYnV0ZSgic3R5bGUiLCJ6LWluZGV4OiA5OTk7Ym9yZGVyLXJhZGl1czo0cHg7IGJvcmRlcjogNHB4IHNvbGlkIHdoaXRlOyB0ZXh0LWFsaWduOiBjZW50ZXI7cG9zaXRpb246IGFic29sdXRlO2xlZnQ6ICIrbGVmdCsicHg7dG9wOiAiK3RvcCsicHg7dHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7YmFja2dyb3VuZDp3aGl0ZTtwYWRkaW5nOjVweDsiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmeUVsZS5pbm5lckhUTUw9YAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nIHN0eWxlPSJjb2xvcjpibGFjazsiPuivt+etieW+hTEw56eS5ZCO5Yqg6L2956ys5LqM6YOo5YiG77yBPC9zdHJvbmc+PGJyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cHJvZ3Jlc3Mgc3R5bGU9IndpZHRoOiR7d2lkdGh9cHg7aGVpZ2h0OiR7aGVpZ2h0fXB4OyI+PC9wcm9ncmVzcz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChub3RpZnlFbGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiIyIrcGFydDJub3RpZnlJZCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1blBhcnQoaGFsZixjYXJkcy5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwxMDAwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LDEwMDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbG9nLmluZm8oInJ1biBwYXJ0IDEhIik7CiAgICAgICAgICAgICAgICBydW5QYXJ0KDAsaGFsZik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZihpZ3hlVXJsUmVnLnRlc3QodXJsKXx8YzVVcmxSZWcudGVzdCh1cmwpKXsKICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1Fbk5hbWVBdHRyPSJzX3Nfc19zX2l0ZW1fZW5OYW1lX3N1Y2Nlc3MiOwogICAgICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tHZXRFbk5hbWVBbmRRdWVyeShhcHBpZCxjbk5hbWUscHJvZ3Jlc3NFbGVTcGFuLGNhcmQpewogICAgICAgICAgICAgICAgICAgIGlmKCFjYXJkLmdldEF0dHJpYnV0ZShpdGVtRW5OYW1lQXR0cikpewogICAgICAgICAgICAgICAgICAgICAgICBnZXRFbk5hbWVBbmRRdWVyeShhcHBpZCxjbk5hbWUscHJvZ3Jlc3NFbGVTcGFuLGNhcmQpOwogICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcoInJldHJ5IGdldCBlbiBuYW1lIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZygiZ2V0IGVuIG5hbWUgZm9yICIrY25OYW1lKyIgc3VjY2Vzc2Z1bGx5ISIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0RW5OYW1lQW5kUXVlcnkoYXBwaWQsY25OYW1lLHByb2dyZXNzRWxlU3BhbixjYXJkKXsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Y2hlY2tHZXRFbk5hbWVBbmRRdWVyeShhcHBpZCxjbk5hbWUscHJvZ3Jlc3NFbGVTcGFuLGNhcmQpO30sdGltZW91dCk7CiAgICAgICAgICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgICAgICAvL3VybDogYGh0dHBzOi8vc3RlYW1jb21tdW5pdHkuY29tL21hcmtldC9zZWFyY2g/YXBwaWQ9JHthcHBpZH0mcT0ke2NuTmFtZX1gLAogICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGBodHRwczovL3N0ZWFtY29tbXVuaXR5LmNvbS9tYXJrZXQvc2VhcmNoL3JlbmRlci8/cXVlcnk9JHtjbk5hbWV9JnN0YXJ0PTAmY291bnQ9MSZhcHBpZD0ke2FwcGlkfSZub3JlbmRlcj0xYCwKICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAnanNvbicsCiAgICAgICAgICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24ocmVzKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlcy5zdGF0dXMgPT09IDIwMCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGE9cmVzLnJlc3BvbnNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsaW5rTGlzdD1kYXRhLnJlc3VsdHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVuTmFtZT0iIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihsaW5rTGlzdCYmbGlua0xpc3QubGVuZ3RoPjApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDtpPGxpbmtMaXN0Lmxlbmd0aDsrK2kpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoQ05OYW1lPWxpbmtMaXN0W2ldLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtYXRjaENOTmFtZT09Y25OYW1lKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbk5hbWU9bGlua0xpc3RbaV0uaGFzaF9uYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVuTmFtZSE9IiIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlQcmljZShpbmRleCxhcHBpZCxlbk5hbWUsdXBkYXRlVmlldyx7InVybCI6dXJsLCJlbGVtZW50IjpjYXJkfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NFbGVTcGFuLmlubmVySFRNTD1gPHNwYW4gc3R5bGU9ImNvbG9yOiByZWQ7ZGlzcGxheTpibG9jazt0ZXh0LWFsaWduOiBjZW50ZXI7cG9zaXRpb246IHJlbGF0aXZlO2xlZnQ6IDUwJTt0b3A6IDUwJTt0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsiPuatpOeJqeWTgeS4jeWcqOi0p+aetuS4iuOAgjwvc3Bhbj5gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NFbGVTcGFuLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGRpc3BsYXlTdWNjZXNzQ2xhc3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZC5zZXRBdHRyaWJ1dGUoaXRlbWlkQXR0ciwic3VjY2VzcyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmQuc2V0QXR0cmlidXRlKGl0ZW1Fbk5hbWVBdHRyLCJzdWNjZXNzIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmluZm8oInN0YXJ0UXVlcnkoKTog6K6/6ZeuU3RlYW3luILlnLrplJnor6/vvIFDb2RlOiAiK3Jlcy5zdGF0dXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LG9uZXJyb3IgOiBmdW5jdGlvbihlcnIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmluZm8oInN0YXJ0UXVlcnkoKTog6K6/6ZeuU3RlYW3luILlnLrplJnor6/vvIEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSxvbnRpbWVvdXQgOiBmdW5jdGlvbihlcnIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmluZm8oInN0YXJ0UXVlcnkoKTog6K6/6Zeu6LaF5pe2Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wO2k8Y2FyZHMubGVuZ3RoOysraSl7CiAgICAgICAgICAgICAgICAgICAgbGV0IHByb2dyZXNzRWxlU3Bhbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NFbGVTcGFuLnNldEF0dHJpYnV0ZSgic3R5bGUiLCJoZWlnaHQ6MjA1cHg7ZGlzcGxheTpibG9jazsiKTsKICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0VsZVNwYW4uc2V0QXR0cmlidXRlKCJpZCIsd2FpdGluZ0RpdklkKTsKICAgICAgICAgICAgICAgICAgICBsZXQgY2FyZD1jYXJkc1tpXTsKICAgICAgICAgICAgICAgICAgICBsZXQgY25OYW1lPWNhcmQucXVlcnlTZWxlY3RvcigiLm5hbWUiKS50aXRsZTsKICAgICAgICAgICAgICAgICAgICBjYXJkLnNldEF0dHJpYnV0ZSgic3R5bGUiLCJoZWlnaHQ6IDQ1MHB4OyIpOwogICAgICAgICAgICAgICAgICAgIHByb2dyZXNzRWxlU3Bhbi5pbm5lckhUTUw9YDxwcm9ncmVzcyBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyO3Bvc2l0aW9uOiByZWxhdGl2ZTtsZWZ0OiA1MCU7dG9wOiA1MCU7dHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7Ij48L3Byb2dyZXNzPmA7CiAgICAgICAgICAgICAgICAgICAgY2FyZC5hcHBlbmRDaGlsZChwcm9ncmVzc0VsZVNwYW4pOwogICAgICAgICAgICAgICAgICAgIGdldEVuTmFtZUFuZFF1ZXJ5KGFwcGlkLGNuTmFtZSxwcm9ncmVzc0VsZVNwYW4sY2FyZCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0pKCk7"},{"name":"饰品筛选倒余额 比例自定义 支持buff c5game igxe","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["*://buff.163.com/market/?game=*","*://buff.163.com/market/goods?goods_id=*","*://www.c5game.com/*","*://www.igxe.cn/*","*://www.igxe.cn/product/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null,"orig_connects":[]}},"storage":{"ts":1608309002282,"data":{"saved":"o[\"300\",\"0.7\",\"0.75\",\"3\",\"2\"]"}},"enabled":false,"position":21,"file_url":"https://greasyfork.org/scripts/399176-%E9%A5%B0%E5%93%81%E7%AD%9B%E9%80%89%E5%80%92%E4%BD%99%E9%A2%9D-%E6%AF%94%E4%BE%8B%E8%87%AA%E5%AE%9A%E4%B9%89-%E6%94%AF%E6%8C%81buff-c5game-igxe/code/%E9%A5%B0%E5%93%81%E7%AD%9B%E9%80%89%E5%80%92%E4%BD%99%E9%A2%9D%20%E6%AF%94%E4%BE%8B%E8%87%AA%E5%AE%9A%E4%B9%89%20%E6%94%AF%E6%8C%81buff%20c5game%20igxe.user.js","uuid":"57c6acfe-d891-4d8d-8bc7-99774c2dcb54","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDppbDlk4HnrZvpgInlgJLkvZnpop0g5q+U5L6L6Ieq5a6a5LmJIOaUr+aMgWJ1ZmYgYzVnYW1lIGlneGUKLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vdGFtcGVybW9ua2V5Lm5ldC8KLy8gQGljb24gICAgICAJIGh0dHBzOi8vc3RvcmUuc3RlYW1wb3dlcmVkLmNvbS9mYXZpY29uLmljbwovLyBAdmVyc2lvbiAgICAgIDAuMjMKLy8gQGRlc2NyaXB0aW9uICDppbDlk4HnrZvpgInlgJLkvZnpop0g5Y+v6KeG5YyW5q+U5L6L6Ieq5a6a5LmJ6Z2i5p2/IOaUr+aMgWJ1ZmYgYzVnYW1lIGlneGUKLy8gQGF1dGhvciAgICAgICB3c3o5ODcKLy8gQG1hdGNoICAgICAgICAqOi8vYnVmZi4xNjMuY29tL21hcmtldC8/Z2FtZT0qCi8vIEBtYXRjaCAgICAgICAgKjovL2J1ZmYuMTYzLmNvbS9tYXJrZXQvZ29vZHM/Z29vZHNfaWQ9KgovLyBAbWF0Y2ggICAgICAgICo6Ly93d3cuYzVnYW1lLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgKjovL3d3dy5pZ3hlLmNuLyoKLy8gQG1hdGNoICAgICAgICAqOi8vd3d3LmlneGUuY24vcHJvZHVjdC8qCi8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly9jZG4uc3RhdGljZmlsZS5vcmcvanF1ZXJ5LzEuMTIuNC9qcXVlcnkubWluLmpzCi8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly9jZG4uc3RhdGljZmlsZS5vcmcvdnVlLzIuNC4yL3Z1ZS5taW4uanMKLy8gQGdyYW50ICAgICAgICBHTV9nZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICAgR01fb3BlbkluVGFiCi8vIEBncmFudCAgICAgICAgR01fYWRkU3R5bGUKLy8gQHN1cHBvcnRVUkwgICBodHRwczovL2tleWxvbC5jb20vdDU3NzY2OS0xLTEKLy8gPT0vVXNlclNjcmlwdD09CgovKkEg5LiK5LiA6aG1ClMg5bGF5Lit5LiU6L+H5rukCkQg5LiL5LiA6aG1Clcg5bGF5LitCkUg6L+H5ruk5ZCO5YWo6YOo5omT5byAKi8KCihmdW5jdGlvbigpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGNvbnN0IHRvb2xfZGVmYXVsdCA9IFsnMzAwJywnMC43JywnMC43NScsJzMnLCcyJ10vL+iHquWumuS5iem7mOiupOmFjee9rgogICAgd2ViKCk7CiAgICBtaWRkbGUoKQogICAgdHJ5ewogICAgICAgIGRvY3VtZW50Lm9ua2V5ZG93bj1mdW5jdGlvbihldmVudCl7CiAgICAgICAgICAgIHZhciBlID0gZXZlbnQgfHwgd2luZG93LmV2ZW50IHx8IGFyZ3VtZW50cy5jYWxsZWUuY2FsbGVyLmFyZ3VtZW50c1swXTsKICAgICAgICAgICAgaWYoZSAmJiBlLmtleUNvZGU9PTgzKXsKICAgICAgICAgICAgICAgIG1pZGRsZSgpLnRoZW4odi5maWx0ZXIoKSkKICAgICAgICAgICAgfQogICAgICAgICAgICBpZihlICYmIGUua2V5Q29kZT09NjgpewogICAgICAgICAgICAgICAgdi5uZXh0cGFnZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKGUgJiYgZS5rZXlDb2RlPT02NSl7CiAgICAgICAgICAgICAgICB2LnByZXZwYWdlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoZSAmJiBlLmtleUNvZGU9PTg3KXsKICAgICAgICAgICAgICAgIG1pZGRsZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKGUgJiYgZS5rZXlDb2RlPT02OSl7CiAgICAgICAgICAgICAgICB2LmZpbHRlcigpLnRoZW4odi5hbGxvcGVuKCkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfWNhdGNoKGUpe2NvbnNvbGUubG9nKGUpfQogICAgJCgiYm9keSIpLmFwcGVuZChgCjxkaXYgY2xhc3M9ImNhcmQiIGlkPSd0b29scycgc3R5bGU9J3otaW5kZXg6OTk4O3Bvc2l0aW9uOmZpeGVkO2xlZnQ6MTBweDt0b3A6NDAwcHg7Jz4KICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLWhlYWRlciI+CgkJCTxhIGhyZWY9IiMiIGNsYXNzPSJiYWRnZSBiYWRnZS1zZWNvbmRhcnkiIHRpdGxlPSLmlK/mjIHmjInplK7mjIfku6Tlk6YmIzEwO0Eg5LiK5LiA6aG1JiMxMDtEIOS4i+S4gOmhtSYjMTA7VyDlsYXkuK0mIzEwO1Mg6L+H5rukJiMxMDtFIOi/h+a7pOWQjuWFqOmDqOaJk+W8gCI+6byg5qCH56e75Yqo5Yiw5oiR6L+ZPC9hPgoJCQk8YSBocmVmPSJodHRwczovL2tleWxvbC5jb20vdDU3NzY2OS0xLTEiIGNsYXNzPSJiYWRnZSBiYWRnZS1zZWNvbmRhcnkiIHRhcmdldD0nX2JsYW5rJyB0aXRsZT0i54K55Ye75LqG6Kej6ISa5pysJiMxMDvpl67popjlj43ppogmIzEwO+aIkeS4jeS7i+aEj+aJk+i1j+WTiCYjMTA75L2c6ICFOiB3c3o5ODciPmF1dGg8L2E+CgkJPC9kaXY+CgkJPGRpdiBjbGFzcz0iY2FyZC1ib2R5IiBzdHlsZT0nZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjsnPgogICAgICAgICAgICA8bGFiZWwgdGl0bGU9IuS+v+S6juW/q+mAn+WHuuaJiyYjMTA76YG/5YWN6K+v5beuIj7lnKjllK7mlbDph48mbmJzcDs8aW5wdXQgdHlwZT0nbnVtYmVyJyB2LW1vZGVsLmxhenk9J2NvdW50JyBtaW49JzAnIHN0ZXA9JzEwJyBtYXg9Jzk5OTknIHBsYWNlaG9sZGVyPSfmnIDkvY4nLz48L2xhYmVsPgogICAgICAgICAgICA8bGFiZWwgdGl0bGU9IuWunui0qOS4iuaYr+mBv+WFjSYjMTA75Ye65ZSuLeaUtui0rSDmr5Tkvovlt67ot53ov4flpKcmIzEwO+mBv+WFjUpT5oqs5Lu36ICM6YCg5oiQ5o2f5aSxIj7nkIbmg7Pmr5TkvosmbmJzcDs8aW5wdXQgdHlwZT0nbnVtYmVyJyB2LW1vZGVsLmxhenk9J2lkZWEnIHN0ZXA9JzAuMDEnIG1pbj0nMC42JyBtYXg9JzEnIHBsYWNlaG9sZGVyPScgMC42fjEnLz48L2xhYmVsPgogICAgICAgICAgICA8bGFiZWwgdGl0bGU9IuacgOe7iOetm+mAieS4jei2hei/h+avlOS+iyI+5pyA6auY5q+U5L6LJm5ic3A7PGlucHV0IHR5cGU9J251bWJlcicgdi1tb2RlbC5sYXp5PSd1bmlkZWEnIHN0ZXA9JzAuMDEnIG1pbj0nMC42JyBtYXg9JzEnIHBsYWNlaG9sZGVyPScgMC42MX4xJy8+PC9sYWJlbD4KICAgICAgICAgICAgPHNwYW4gdGl0bGU9Iue9kemAn+aFouiAheemj+mfsyYjMTA75pyA5bCP5YC8MXMmIzEwO+acgOWkp+WAvDEwcyYjMTA76buY6K6k5bu26L+fM3MmIzEwO+S9nOeUqOS6jumlsOWTgemhtemdoiYjMTA76YG/5YWN5pWw5o2u5Yqg6L295LiN5Y+K5pe2JiMxMDvlr7zoh7TnrZvpgInlpLHotKUmIzEwO+W7uuiuruS4gOasoeS4jeimgeaJk+W8gOWkquWkmumhtemdoiI+5bu26L+fJm5ic3A7e3t0aW1lb3V0fX1zJm5ic3A75ZCO562b6YCJPC9zcGFuPjxpbnB1dCB0eXBlPSJyYW5nZSIgdi1tb2RlbD0idGltZW91dCIgbWluPSIxIiBtYXg9IjEwIiBzdGVwPSIwLjUiPjwvbGFiZWw+CiAgICAgICAgICAgIDxzcGFuIHRpdGxlPSLnlKjkuo7kuIDkuI3lsI/lv4PmiZPlvIDlpKrlpJrpobXpnaLnmoTlho3moKHpqowmIzEwO+azqOaEjzrov5nkuKrpgInpobnkvJrmtojogJfmtY/op4jlmajmgKfog70mIzEwO+acgOWwjzDmrKEmIzEwO+acgOWkpzEw5qyhJiMxMDvpu5jorqQy5qyhJiMxMDvmr4/mrKHlu7bov58wLjVzIj4mbmJzcDt7e2ZvcnRpbWVvdXR9feasoSZuYnNwO+agoemqjDwvc3Bhbj48aW5wdXQgdHlwZT0icmFuZ2UiIHYtbW9kZWw9ImZvcnRpbWVvdXQiIG1pbj0iMCIgbWF4PSIxMCIgc3RlcD0iMSI+PC9sYWJlbD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLWZvb3RlciBidG4tZ3JvdXAiIHN0eWxlPSdqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3BhZGRpbmc6IDAuNXJlbTsnPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4iIEBjbGljaz0ncHJldnBhZ2UnPiZsdDs8L2J1dHRvbj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIiBAY2xpY2s9J3Rvb2xzX3Jlc2V0Jz7ph43nva48L2J1dHRvbj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIiBAY2xpY2s9J25leHRwYWdlJz4mZ3Q7PC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KYCk7CiAgICBpZihHTV9nZXRWYWx1ZSgic2F2ZWQiKT09bnVsbCkKICAgICAgICBHTV9zZXRWYWx1ZSgic2F2ZWQiLCB0b29sX2RlZmF1bHQpCiAgICBjb25zb2xlLmxvZyhg6YWN572uWyR7R01fZ2V0VmFsdWUoJ3NhdmVkJyl9XWApCiAgICB2YXIgc2F2ZWRfdXBkYXRlID0gR01fZ2V0VmFsdWUoInNhdmVkIikKICAgIHZhciB2PW5ldyBWdWUoewogICAgICAgIGVsOiAnI3Rvb2xzJywKICAgICAgICBkYXRhOnsKICAgICAgICAgICAgY291bnQ6R01fZ2V0VmFsdWUoInNhdmVkIilbMF0sCiAgICAgICAgICAgIGlkZWE6R01fZ2V0VmFsdWUoInNhdmVkIilbMV0sCiAgICAgICAgICAgIHVuaWRlYTpHTV9nZXRWYWx1ZSgic2F2ZWQiKVsyXSwKICAgICAgICAgICAgdGltZW91dDpHTV9nZXRWYWx1ZSgic2F2ZWQiKVszXSwKICAgICAgICAgICAgZm9ydGltZW91dDpHTV9nZXRWYWx1ZSgic2F2ZWQiKVs0XQogICAgICAgIH0sCiAgICAgICAgbW91bnRlZCgpIHsKICAgICAgICAgICAgaWYobG9jYXRpb24uaHJlZi5pbmNsdWRlcygnYnVmZi4xNjMuY29tL21hcmtldC9nb29kcz9nb29kc19pZD0nKXx8bG9jYXRpb24uaHJlZi5pbmNsdWRlcygnd3d3LmlneGUuY24vcHJvZHVjdCcpfHxsb2NhdGlvbi5ocmVmLmluY2x1ZGVzKCdjNWdhbWUuY29tL2RvdGEvJyl8fGxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoJ2M1Z2FtZS5jb20vY3Nnby9pdGVtJykpewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOaJp+ihjOavlOS+izogJHtHTV9nZXRWYWx1ZSgnc2F2ZWQnKVsxXX0gJHtHTV9nZXRWYWx1ZSgnc2F2ZWQnKVsyXX1gKQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYCR7dGhpcy50aW1lb3V0fXPlkI7lvIDlp4vnrZvpgIkgJHt0aGlzLmZvcnRpbWVvdXR95qyh5qCh6aqMYCkKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PnsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg5piv5ZCm6L+b5YWl5qCh6aqMJHt0aGlzLmNob2ljZSgpfWApCiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5jaG9pY2UoKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDlkK/liqjmoKHpqoxgKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZm9ydGltZW91dDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaT0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDnrKwgJHtpKzF95qyh5qCh6aqMYCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaG9pY2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMCAqIGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkoaSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LHRoaXMudGltZW91dCoxMDAwKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgbWV0aG9kczp7CiAgICAgICAgICAgIHByZXZwYWdlKCl7CiAgICAgICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICAgICAgJCgiLnBhZ2UtbGluay5wcmV2IilbMF0uY2xpY2soKTsKICAgICAgICAgICAgICAgIH1jYXRjaChlKXsKICAgICAgICAgICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpCiAgICAgICAgICAgICAgICAgICAgICAgICQoIi5wcmV2aW91cyIpWzBdLmNoaWxkTm9kZXNbMF0uY2xpY2soKTsKICAgICAgICAgICAgICAgICAgICB9Y2F0Y2goZSl7Y29uc29sZS5sb2coZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgiLnByZXYuanMtcGFnZSIpWzBdLmNsaWNrKCk7fQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBuZXh0cGFnZSgpewogICAgICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgICAgICQoIi5wYWdlLWxpbmsubmV4dCIpWzBdLmNsaWNrKCkKICAgICAgICAgICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5maWx0ZXIsMjAwMCk7CiAgICAgICAgICAgICAgICAgICAgfWNhdGNoKGUpe2NvbnNvbGUubG9nKGUpfQogICAgICAgICAgICAgICAgfWNhdGNoKGUpewogICAgICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkKICAgICAgICAgICAgICAgICAgICAgICAgJCgiLm5leHQiKVswXS5jaGlsZE5vZGVzWzBdLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgfWNhdGNoKGUpewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQogICAgICAgICAgICAgICAgICAgICAgICAkKCIubmV4dC5qcy1wYWdlIilbMF0uY2xpY2soKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRvb2xzX3Jlc2V0KCl7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5pWw5o2u6YeN572uJykKICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJzYXZlZCIsIG51bGwpCiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2hvaWNlKCl7CiAgICAgICAgICAgICAgICBpZigkKCcubHNyJykgJiYgJCgnLmhicicpKXsKICAgICAgICAgICAgICAgICAgICBjb25zdCBsc3I9TnVtYmVyKCQoJy5sc3InKS50ZXh0KCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgIGhicj1OdW1iZXIoJCgnLmhicicpLnRleHQoKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWVfMT1OdW1iZXIodGhpcy5pZGVhKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZV8yPU51bWJlcih0aGlzLnVuaWRlYSkKICAgICAgICAgICAgICAgICAgICBpZihsc3I9PScnIHx8IGhicj09JycpIHJldHVybiB0cnVlCiAgICAgICAgICAgICAgICAgICAgaWYobHNyPjEgfHwgaGJyPjEpIHdpbmRvdy5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgaWYobHNyID4gVmFsdWVfMSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcxJykKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaGJyID4gVmFsdWVfMikgd2luZG93LmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcyJykKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaGJyID4gVmFsdWVfMikgd2luZG93LmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBmaWx0ZXIoKXsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgICAgICBsZXQgbj0wCiAgICAgICAgICAgICAgICAgICAgQXJyYXkuZnJvbSgkKHdlYnNpdGVbMV0pKS5maWx0ZXIoeD0+ewogICAgICAgICAgICAgICAgICAgICAgICBpZihldmFsKHguaW5uZXJIVE1MLnJlcGxhY2UoL1teMC05XS9nLCAnJykpPnBhcnNlSW50KHRoaXMuY291bnQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgICAgICsrbjsKICAgICAgICAgICAgICAgICAgICAgICAgeC5wYXJlbnROb2RlLnBhcmVudE5vZGUucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICBpZihldmFsKG4pPT1ldmFsKHdlYnNpdGVbM10pKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0cGFnZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LAogICAgICAgICAgICBhbGxvcGVuKCl7CiAgICAgICAgICAgICAgICBsZXQgaT0wLGw9JCh3ZWJzaXRlWzJdKQogICAgICAgICAgICAgICAgZm9yKGk7aTxsLmxlbmd0aDtpKyspewogICAgICAgICAgICAgICAgICAgIEdNX29wZW5JblRhYihsW2ldLnBhcmVudE5vZGUuaHJlZik7Ly/kvp3ml6flgZznlZnnrZvpgInpobXpnaIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgd2F0Y2g6ewogICAgICAgICAgICBjb3VudCh2YWwpewogICAgICAgICAgICAgICAgaWYodmFsPT0nJyl7YWxlcnQoJ+S4jeW7uuiuruS4uuepuicpO3JldHVybjt9CiAgICAgICAgICAgICAgICBzYXZlZF91cGRhdGVbMF09dmFsCiAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgic2F2ZWQiLHNhdmVkX3VwZGF0ZSkKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDmlbDph4/kv67mlLnkuLoke0dNX2dldFZhbHVlKCJzYXZlZCIpWzBdfWApCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGlkZWEodmFsKXsKICAgICAgICAgICAgICAgIGlmKHZhbD09Jyd8fGV2YWwodmFsKTwwLjYpe2FsZXJ0KCfkuI3og708MC42Jyk7cmV0dXJuO30KICAgICAgICAgICAgICAgIHNhdmVkX3VwZGF0ZVsxXT12YWwKICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJzYXZlZCIsc2F2ZWRfdXBkYXRlKQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOeQhuaDs+avlOS+i+S/ruaUueS4uiR7R01fZ2V0VmFsdWUoInNhdmVkIilbMV19YCkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdW5pZGVhKHZhbCl7CiAgICAgICAgICAgICAgICBpZih2YWw9PScnfHxldmFsKHZhbCk8MC42KXthbGVydCgn5LiN6IO9PDAuNicpO3JldHVybjt9CiAgICAgICAgICAgICAgICBzYXZlZF91cGRhdGVbMl09dmFsCiAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgic2F2ZWQiLHNhdmVkX3VwZGF0ZSkKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDmnIDpq5jmr5Tkvovkv67mlLnkuLoke0dNX2dldFZhbHVlKCJzYXZlZCIpWzJdfWApCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRpbWVvdXQodmFsKXsKICAgICAgICAgICAgICAgIHNhdmVkX3VwZGF0ZVszXT12YWwKICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJzYXZlZCIsc2F2ZWRfdXBkYXRlKQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOW7tui/n+etm+mAieS/ruaUueS4uiR7R01fZ2V0VmFsdWUoInNhdmVkIilbM119c2ApCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZvcnRpbWVvdXQodmFsKXsKICAgICAgICAgICAgICAgIHNhdmVkX3VwZGF0ZVs0XT12YWwKICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJzYXZlZCIsc2F2ZWRfdXBkYXRlKQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOagoemqjOetm+mAieS/ruaUueS4uiR7R01fZ2V0VmFsdWUoInNhdmVkIilbNF195qyhLS0ke0dNX2dldFZhbHVlKCJzYXZlZCIpWzRdKjAuNX1zYCkKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pCiAgICB9KSgpOwoKZnVuY3Rpb24gd2ViKCl7CiAgICBzd2l0Y2gobG9jYXRpb24uaG9zdCl7CiAgICAgICAgY2FzZSAiYnVmZi4xNjMuY29tIjoKICAgICAgICAgICAgd2luZG93LndlYnNpdGUgPSBbJy5tYXJrZXQtY2FyZCcsJy5mX0JvbGQuY19HcmF5JywnLmxhenknLCcyMCddCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgInd3dy5pZ3hlLmNuIjoKICAgICAgICAgICAgd2luZG93LndlYnNpdGUgPSBbJy5kYXRhTGlzdCcsJy5zdW0nLCcubGFiZWwnLCcyMCddCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgInd3dy5jNWdhbWUuY29tIjoKICAgICAgICAgICAgd2luZG93LndlYnNpdGUgPSBbJy5saXN0LWl0ZW00JywnLm51bScsJy5tYXJrZXQtc3RhdGUnLCcyOCddCiAgICAgICAgICAgIGJyZWFrOwogICAgfQp9CgpmdW5jdGlvbiBtaWRkbGUoKXsgIC8v5bGF5LitCiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgdHJ5ewogICAgICAgICAgICBpZighbG9jYXRpb24uaHJlZi5pbmNsdWRlcygnYnVmZi4xNjMuY29tL21hcmtldC9nb29kcz9nb29kc19pZD0nKXx8IWxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoJ3Byb2R1Y3QnKXx8IWxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoJ3d3dy5jNWdhbWUuY29tL2RvdGEvJykpewogICAgICAgICAgICAgICAgaWYoJCh3ZWJzaXRlWzBdKS53aWR0aCgpPiQod2luZG93KS5oZWlnaHQoKSl7CiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5zY3JvbGxUb3AoJCh3ZWJzaXRlWzBdKS5vZmZzZXQoKS50b3ApCiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNjcm9sbFRvcCgkKHdlYnNpdGVbMF0pLm9mZnNldCgpLnRvcCsoJCh3aW5kb3cpLmhlaWdodCgpLSQod2Vic2l0ZVswXSkud2lkdGgoKSkvMik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9CiAgICAgICAgfWNhdGNoKGUpe2NvbnNvbGUubG9nKGUpfQogICAgfSk7Cn0KCkdNX2FkZFN0eWxlKGAKLmNhcmQgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgbWluLXdpZHRoOiAwOwogIHdvcmQtd3JhcDogYnJlYWstd29yZDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogIGJhY2tncm91bmQtY2xpcDogYm9yZGVyLWJveDsKICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMTI1KTsKICBib3JkZXItcmFkaXVzOiAwLjI1cmVtOwp9Ci5jYXJkLWhlYWRlciB7CiAgcGFkZGluZzogMC43NXJlbSAxLjI1cmVtOwogIG1hcmdpbi1ib3R0b206IDA7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjAzKTsKICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjEyNSk7Cn0KLmNhcmQtYm9keSB7CiAgZmxleDogMSAxIGF1dG87CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIHBhZGRpbmc6IDAuNXJlbSAxcmVtIDByZW07Cn0KLmNhcmQtZm9vdGVyIHsKICBwYWRkaW5nOiAwLjc1cmVtIDEuMjVyZW07CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjAzKTsKICBib3JkZXItdG9wOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjEyNSk7Cn0KLmJ0biB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgLW1zLXVzZXItc2VsZWN0OiBub25lOwogIHVzZXItc2VsZWN0OiBub25lOwogIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50OwogIHBhZGRpbmc6IDAuMzc1cmVtIDAuNzVyZW07CiAgZm9udC1zaXplOiAxcmVtOwogIGxpbmUtaGVpZ2h0OiAxLjU7CiAgYm9yZGVyLXJhZGl1czogMC4yNXJlbTsKICB0cmFuc2l0aW9uOiBjb2xvciAwLjE1cyBlYXNlLWluLW91dCwgYmFja2dyb3VuZC1jb2xvciAwLjE1cyBlYXNlLWluLW91dCwgYm9yZGVyLWNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0LCBib3gtc2hhZG93IDAuMTVzIGVhc2UtaW4tb3V0Owp9Ci5idG4tZ3JvdXB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGRpc3BsYXk6IC1tcy1pbmxpbmUtZmxleGJveDsKICBkaXNwbGF5OiBpbmxpbmUtZmxleDsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwp9Ci5iYWRnZSB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIHBhZGRpbmc6IDAuMjVlbSAwLjRlbTsKICBmb250LXNpemU6IDc1JTsKICBmb250LXdlaWdodDogNzAwOwogIGxpbmUtaGVpZ2h0OiAxOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICB3aGl0ZS1zcGFjZTogbm93cmFwOwogIHZlcnRpY2FsLWFsaWduOiBiYXNlbGluZTsKICBib3JkZXItcmFkaXVzOiAwLjI1cmVtOwp9Ci5iYWRnZS1zZWNvbmRhcnkgewogIGNvbG9yOiAjZmZmICFpbXBvcnRhbnQ7CiAgYmFja2dyb3VuZC1jb2xvcjogIzZjNzU3ZDsKfQpsYWJlbCB7CiAgICBjb2xvcjpyZ2IoMCwgMCwgMCk7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07Cn0KaW5wdXQgewogICAgcGFkZGluZzogMXB4IDBweDsKICAgIGJvcmRlci13aWR0aDogMnB4OwogICAgYm9yZGVyLXN0eWxlOiBpbnNldDsKICAgIGJvcmRlci1jb2xvcjogaW5pdGlhbDsKICAgIGJvcmRlci1pbWFnZTogaW5pdGlhbDsKICAgIGZvbnQ6IDQwMCAxMy4zMzMzcHggQXJpYWw7CiAgICBtYXJnaW46IDA7CiAgICBmb250LWZhbWlseTogaW5oZXJpdDsKICAgIG92ZXJmbG93OiB2aXNpYmxlOwogICAgZm9udC1zaXplOiBpbmhlcml0OwogICAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7CiAgICBvdmVyZmxvdzogdmlzaWJsZTsKfQphewogICB0ZXh0LWRlY29yYXRpb246IG5vbmU7Cn0KYCk=","requires":[{"meta":{"name":"jquery.min.js","url":"https://cdn.staticfile.org/jquery/1.12.4/jquery.min.js","ts":1608308905387,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2MS4xMi40IHwgKGMpIGpRdWVyeSBGb3VuZGF0aW9uIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovCiFmdW5jdGlvbihhLGIpeyJvYmplY3QiPT10eXBlb2YgbW9kdWxlJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWEuZG9jdW1lbnQ/YihhLCEwKTpmdW5jdGlvbihhKXtpZighYS5kb2N1bWVudCl0aHJvdyBuZXcgRXJyb3IoImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnQiKTtyZXR1cm4gYihhKX06YihhKX0oInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXMsZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkPWEuZG9jdW1lbnQsZT1jLnNsaWNlLGY9Yy5jb25jYXQsZz1jLnB1c2gsaD1jLmluZGV4T2YsaT17fSxqPWkudG9TdHJpbmcsaz1pLmhhc093blByb3BlcnR5LGw9e30sbT0iMS4xMi40IixuPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBuLmZuLmluaXQoYSxiKX0sbz0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2cscD0vXi1tcy0vLHE9Ly0oW1xkYS16XSkvZ2kscj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O24uZm49bi5wcm90b3R5cGU9e2pxdWVyeTptLGNvbnN0cnVjdG9yOm4sc2VsZWN0b3I6IiIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBlLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT8wPmE/dGhpc1thK3RoaXMubGVuZ3RoXTp0aGlzW2FdOmUuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPW4ubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxiLmNvbnRleHQ9dGhpcy5jb250ZXh0LGJ9LGVhY2g6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZWFjaCh0aGlzLGEpfSxtYXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4ubWFwKHRoaXMsZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5jYWxsKGIsYyxiKX0pKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKDApfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoLTEpfSxlcTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxlbmd0aCxjPSthKygwPmE/YjowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soYz49MCYmYj5jP1t0aGlzW2NdXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IoKX0scHVzaDpnLHNvcnQ6Yy5zb3J0LHNwbGljZTpjLnNwbGljZX0sbi5leHRlbmQ9bi5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZz1hcmd1bWVudHNbMF18fHt9LGg9MSxpPWFyZ3VtZW50cy5sZW5ndGgsaj0hMTtmb3IoImJvb2xlYW4iPT10eXBlb2YgZyYmKGo9ZyxnPWFyZ3VtZW50c1toXXx8e30saCsrKSwib2JqZWN0Ij09dHlwZW9mIGd8fG4uaXNGdW5jdGlvbihnKXx8KGc9e30pLGg9PT1pJiYoZz10aGlzLGgtLSk7aT5oO2grKylpZihudWxsIT0oZT1hcmd1bWVudHNbaF0pKWZvcihkIGluIGUpYT1nW2RdLGM9ZVtkXSxnIT09YyYmKGomJmMmJihuLmlzUGxhaW5PYmplY3QoYyl8fChiPW4uaXNBcnJheShjKSkpPyhiPyhiPSExLGY9YSYmbi5pc0FycmF5KGEpP2E6W10pOmY9YSYmbi5pc1BsYWluT2JqZWN0KGEpP2E6e30sZ1tkXT1uLmV4dGVuZChqLGYsYykpOnZvaWQgMCE9PWMmJihnW2RdPWMpKTtyZXR1cm4gZ30sbi5leHRlbmQoe2V4cGFuZG86ImpRdWVyeSIrKG0rTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXEQvZywiIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuImZ1bmN0aW9uIj09PW4udHlwZShhKX0saXNBcnJheTpBcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4iYXJyYXkiPT09bi50eXBlKGEpfSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmYT09YS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihhKXt2YXIgYj1hJiZhLnRvU3RyaW5nKCk7cmV0dXJuIW4uaXNBcnJheShhKSYmYi1wYXJzZUZsb2F0KGIpKzE+PTB9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtpZighYXx8Im9iamVjdCIhPT1uLnR5cGUoYSl8fGEubm9kZVR5cGV8fG4uaXNXaW5kb3coYSkpcmV0dXJuITE7dHJ5e2lmKGEuY29uc3RydWN0b3ImJiFrLmNhbGwoYSwiY29uc3RydWN0b3IiKSYmIWsuY2FsbChhLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpKXJldHVybiExfWNhdGNoKGMpe3JldHVybiExfWlmKCFsLm93bkZpcnN0KWZvcihiIGluIGEpcmV0dXJuIGsuY2FsbChhLGIpO2ZvcihiIGluIGEpO3JldHVybiB2b2lkIDA9PT1ifHxrLmNhbGwoYSxiKX0sdHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9hKyIiOiJvYmplY3QiPT10eXBlb2YgYXx8ImZ1bmN0aW9uIj09dHlwZW9mIGE/aVtqLmNhbGwoYSldfHwib2JqZWN0Ijp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihiKXtiJiZuLnRyaW0oYikmJihhLmV4ZWNTY3JpcHR8fGZ1bmN0aW9uKGIpe2EuZXZhbC5jYWxsKGEsYil9KShiKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UocCwibXMtIikucmVwbGFjZShxLHIpfSxub2RlTmFtZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1iLnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTA7aWYocyhhKSl7Zm9yKGM9YS5sZW5ndGg7Yz5kO2QrKylpZihiLmNhbGwoYVtkXSxkLGFbZF0pPT09ITEpYnJlYWt9ZWxzZSBmb3IoZCBpbiBhKWlmKGIuY2FsbChhW2RdLGQsYVtkXSk9PT0hMSlicmVhaztyZXR1cm4gYX0sdHJpbTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT8iIjooYSsiIikucmVwbGFjZShvLCIiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8W107cmV0dXJuIG51bGwhPWEmJihzKE9iamVjdChhKSk/bi5tZXJnZShjLCJzdHJpbmciPT10eXBlb2YgYT9bYV06YSk6Zy5jYWxsKGMsYSkpLGN9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2lmKGIpe2lmKGgpcmV0dXJuIGguY2FsbChiLGEsYyk7Zm9yKGQ9Yi5sZW5ndGgsYz1jPzA+Yz9NYXRoLm1heCgwLGQrYyk6YzowO2Q+YztjKyspaWYoYyBpbiBiJiZiW2NdPT09YSlyZXR1cm4gY31yZXR1cm4tMX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz0rYi5sZW5ndGgsZD0wLGU9YS5sZW5ndGg7d2hpbGUoYz5kKWFbZSsrXT1iW2QrK107aWYoYyE9PWMpd2hpbGUodm9pZCAwIT09YltkXSlhW2UrK109YltkKytdO3JldHVybiBhLmxlbmd0aD1lLGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCxlPVtdLGY9MCxnPWEubGVuZ3RoLGg9IWM7Zz5mO2YrKylkPSFiKGFbZl0sZiksZCE9PWgmJmUucHVzaChhW2ZdKTtyZXR1cm4gZX0sbWFwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGc9MCxoPVtdO2lmKHMoYSkpZm9yKGQ9YS5sZW5ndGg7ZD5nO2crKyllPWIoYVtnXSxnLGMpLG51bGwhPWUmJmgucHVzaChlKTtlbHNlIGZvcihnIGluIGEpZT1iKGFbZ10sZyxjKSxudWxsIT1lJiZoLnB1c2goZSk7cmV0dXJuIGYuYXBwbHkoW10saCl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZjtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGImJihmPWFbYl0sYj1hLGE9Ziksbi5pc0Z1bmN0aW9uKGEpPyhjPWUuY2FsbChhcmd1bWVudHMsMiksZD1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsYy5jb25jYXQoZS5jYWxsKGFyZ3VtZW50cykpKX0sZC5ndWlkPWEuZ3VpZD1hLmd1aWR8fG4uZ3VpZCsrLGQpOnZvaWQgMH0sbm93OmZ1bmN0aW9uKCl7cmV0dXJuK25ldyBEYXRlfSxzdXBwb3J0Omx9KSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYobi5mbltTeW1ib2wuaXRlcmF0b3JdPWNbU3ltYm9sLml0ZXJhdG9yXSksbi5lYWNoKCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbCIuc3BsaXQoIiAiKSxmdW5jdGlvbihhLGIpe2lbIltvYmplY3QgIitiKyJdIl09Yi50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gcyhhKXt2YXIgYj0hIWEmJiJsZW5ndGgiaW4gYSYmYS5sZW5ndGgsYz1uLnR5cGUoYSk7cmV0dXJuImZ1bmN0aW9uIj09PWN8fG4uaXNXaW5kb3coYSk/ITE6ImFycmF5Ij09PWN8fDA9PT1ifHwibnVtYmVyIj09dHlwZW9mIGImJmI+MCYmYi0xIGluIGF9dmFyIHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdT0ic2l6emxlIisxKm5ldyBEYXRlLHY9YS5kb2N1bWVudCx3PTAseD0wLHk9Z2EoKSx6PWdhKCksQT1nYSgpLEI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWImJihsPSEwKSwwfSxDPTE8PDMxLEQ9e30uaGFzT3duUHJvcGVydHksRT1bXSxGPUUucG9wLEc9RS5wdXNoLEg9RS5wdXNoLEk9RS5zbGljZSxKPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKWlmKGFbY109PT1iKXJldHVybiBjO3JldHVybi0xfSxLPSJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZCIsTD0iW1xceDIwXFx0XFxyXFxuXFxmXSIsTT0iKD86XFxcXC58W1xcdy1dfFteXFx4MDAtXFx4YTBdKSsiLE49IlxcWyIrTCsiKigiK00rIikoPzoiK0wrIiooWypeJHwhfl0/PSkiK0wrIiooPzonKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcInwoIitNKyIpKXwpIitMKyIqXFxdIixPPSI6KCIrTSsiKSg/OlxcKCgoJygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCIpfCgoPzpcXFxcLnxbXlxcXFwoKVtcXF1dfCIrTisiKSopfC4qKVxcKXwpIixQPW5ldyBSZWdFeHAoTCsiKyIsImciKSxRPW5ldyBSZWdFeHAoIl4iK0wrIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIrTCsiKyQiLCJnIiksUj1uZXcgUmVnRXhwKCJeIitMKyIqLCIrTCsiKiIpLFM9bmV3IFJlZ0V4cCgiXiIrTCsiKihbPit+XXwiK0wrIikiK0wrIioiKSxUPW5ldyBSZWdFeHAoIj0iK0wrIiooW15cXF0nXCJdKj8pIitMKyIqXFxdIiwiZyIpLFU9bmV3IFJlZ0V4cChPKSxWPW5ldyBSZWdFeHAoIl4iK00rIiQiKSxXPXtJRDpuZXcgUmVnRXhwKCJeIygiK00rIikiKSxDTEFTUzpuZXcgUmVnRXhwKCJeXFwuKCIrTSsiKSIpLFRBRzpuZXcgUmVnRXhwKCJeKCIrTSsifFsqXSkiKSxBVFRSOm5ldyBSZWdFeHAoIl4iK04pLFBTRVVETzpuZXcgUmVnRXhwKCJeIitPKSxDSElMRDpuZXcgUmVnRXhwKCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiK0wrIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK0wrIiooPzooWystXXwpIitMKyIqKFxcZCspfCkpIitMKyIqXFwpfCkiLCJpIiksYm9vbDpuZXcgUmVnRXhwKCJeKD86IitLKyIpJCIsImkiKSxuZWVkc0NvbnRleHQ6bmV3IFJlZ0V4cCgiXiIrTCsiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFwoIitMKyIqKCg/Oi1cXGQpP1xcZCopIitMKyIqXFwpfCkoPz1bXi1dfCQpIiwiaSIpfSxYPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksWT0vXmhcZCQvaSxaPS9eW157XStce1xzKlxbbmF0aXZlIFx3LywkPS9eKD86IyhbXHctXSspfChcdyspfFwuKFtcdy1dKykpJC8sXz0vWyt+XS8sYWE9Lyd8XFwvZyxiYT1uZXcgUmVnRXhwKCJcXFxcKFtcXGRhLWZdezEsNn0iK0wrIj98KCIrTCsiKXwuKSIsImlnIiksY2E9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSIweCIrYi02NTUzNjtyZXR1cm4gZCE9PWR8fGM/YjowPmQ/U3RyaW5nLmZyb21DaGFyQ29kZShkKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQ+PjEwfDU1Mjk2LDEwMjMmZHw1NjMyMCl9LGRhPWZ1bmN0aW9uKCl7bSgpfTt0cnl7SC5hcHBseShFPUkuY2FsbCh2LmNoaWxkTm9kZXMpLHYuY2hpbGROb2RlcyksRVt2LmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChlYSl7SD17YXBwbHk6RS5sZW5ndGg/ZnVuY3Rpb24oYSxiKXtHLmFwcGx5KGEsSS5jYWxsKGIpKX06ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxlbmd0aCxkPTA7d2hpbGUoYVtjKytdPWJbZCsrXSk7YS5sZW5ndGg9Yy0xfX19ZnVuY3Rpb24gZmEoYSxiLGQsZSl7dmFyIGYsaCxqLGssbCxvLHIscyx3PWImJmIub3duZXJEb2N1bWVudCx4PWI/Yi5ub2RlVHlwZTo5O2lmKGQ9ZHx8W10sInN0cmluZyIhPXR5cGVvZiBhfHwhYXx8MSE9PXgmJjkhPT14JiYxMSE9PXgpcmV0dXJuIGQ7aWYoIWUmJigoYj9iLm93bmVyRG9jdW1lbnR8fGI6dikhPT1uJiZtKGIpLGI9Ynx8bixwKSl7aWYoMTEhPT14JiYobz0kLmV4ZWMoYSkpKWlmKGY9b1sxXSl7aWYoOT09PXgpe2lmKCEoaj1iLmdldEVsZW1lbnRCeUlkKGYpKSlyZXR1cm4gZDtpZihqLmlkPT09ZilyZXR1cm4gZC5wdXNoKGopLGR9ZWxzZSBpZih3JiYoaj13LmdldEVsZW1lbnRCeUlkKGYpKSYmdChiLGopJiZqLmlkPT09ZilyZXR1cm4gZC5wdXNoKGopLGR9ZWxzZXtpZihvWzJdKXJldHVybiBILmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKSksZDtpZigoZj1vWzNdKSYmYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEguYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZikpLGR9aWYoYy5xc2EmJiFBW2ErIiAiXSYmKCFxfHwhcS50ZXN0KGEpKSl7aWYoMSE9PXgpdz1iLHM9YTtlbHNlIGlmKCJvYmplY3QiIT09Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXsoaz1iLmdldEF0dHJpYnV0ZSgiaWQiKSk/az1rLnJlcGxhY2UoYWEsIlxcJCYiKTpiLnNldEF0dHJpYnV0ZSgiaWQiLGs9dSkscj1nKGEpLGg9ci5sZW5ndGgsbD1WLnRlc3Qoayk/IiMiK2s6IltpZD0nIitrKyInXSI7d2hpbGUoaC0tKXJbaF09bCsiICIrcWEocltoXSk7cz1yLmpvaW4oIiwiKSx3PV8udGVzdChhKSYmb2EoYi5wYXJlbnROb2RlKXx8Yn1pZihzKXRyeXtyZXR1cm4gSC5hcHBseShkLHcucXVlcnlTZWxlY3RvckFsbChzKSksZH1jYXRjaCh5KXt9ZmluYWxseXtrPT09dSYmYi5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fX1yZXR1cm4gaShhLnJlcGxhY2UoUSwiJDEiKSxiLGQsZSl9ZnVuY3Rpb24gZ2EoKXt2YXIgYT1bXTtmdW5jdGlvbiBiKGMsZSl7cmV0dXJuIGEucHVzaChjKyIgIik+ZC5jYWNoZUxlbmd0aCYmZGVsZXRlIGJbYS5zaGlmdCgpXSxiW2MrIiAiXT1lfXJldHVybiBifWZ1bmN0aW9uIGhhKGEpe3JldHVybiBhW3VdPSEwLGF9ZnVuY3Rpb24gaWEoYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KCJkaXYiKTt0cnl7cmV0dXJuISFhKGIpfWNhdGNoKGMpe3JldHVybiExfWZpbmFsbHl7Yi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYj1udWxsfX1mdW5jdGlvbiBqYShhLGIpe3ZhciBjPWEuc3BsaXQoInwiKSxlPWMubGVuZ3RoO3doaWxlKGUtLSlkLmF0dHJIYW5kbGVbY1tlXV09Yn1mdW5jdGlvbiBrYShhLGIpe3ZhciBjPWImJmEsZD1jJiYxPT09YS5ub2RlVHlwZSYmMT09PWIubm9kZVR5cGUmJih+Yi5zb3VyY2VJbmRleHx8QyktKH5hLnNvdXJjZUluZGV4fHxDKTtpZihkKXJldHVybiBkO2lmKGMpd2hpbGUoYz1jLm5leHRTaWJsaW5nKWlmKGM9PT1iKXJldHVybi0xO3JldHVybiBhPzE6LTF9ZnVuY3Rpb24gbGEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YyYmYi50eXBlPT09YX19ZnVuY3Rpb24gbWEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oImlucHV0Ij09PWN8fCJidXR0b24iPT09YykmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG5hKGEpe3JldHVybiBoYShmdW5jdGlvbihiKXtyZXR1cm4gYj0rYixoYShmdW5jdGlvbihjLGQpe3ZhciBlLGY9YShbXSxjLmxlbmd0aCxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSljW2U9ZltnXV0mJihjW2VdPSEoZFtlXT1jW2VdKSl9KX0pfWZ1bmN0aW9uIG9hKGEpe3JldHVybiBhJiYidW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmF9Yz1mYS5zdXBwb3J0PXt9LGY9ZmEuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBiPyJIVE1MIiE9PWIubm9kZU5hbWU6ITF9LG09ZmEuc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZSxnPWE/YS5vd25lckRvY3VtZW50fHxhOnY7cmV0dXJuIGchPT1uJiY5PT09Zy5ub2RlVHlwZSYmZy5kb2N1bWVudEVsZW1lbnQ/KG49ZyxvPW4uZG9jdW1lbnRFbGVtZW50LHA9IWYobiksKGU9bi5kZWZhdWx0VmlldykmJmUudG9wIT09ZSYmKGUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsZGEsITEpOmUuYXR0YWNoRXZlbnQmJmUuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixkYSkpLGMuYXR0cmlidXRlcz1pYShmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9ImkiLCFhLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxjLmdldEVsZW1lbnRzQnlUYWdOYW1lPWlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGVuZENoaWxkKG4uY3JlYXRlQ29tbWVudCgiIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPVoudGVzdChuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGMuZ2V0QnlJZD1pYShmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFuLmdldEVsZW1lbnRzQnlOYW1lfHwhbi5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50QnlJZCYmcCl7dmFyIGM9Yi5nZXRFbGVtZW50QnlJZChhKTtyZXR1cm4gYz9bY106W119fSxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoYmEsY2EpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoImlkIik9PT1ifX0pOihkZWxldGUgZC5maW5kLklELGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBjPSJ1bmRlZmluZWQiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGVOb2RlJiZhLmdldEF0dHJpYnV0ZU5vZGUoImlkIik7cmV0dXJuIGMmJmMudmFsdWU9PT1ifX0pLGQuZmluZC5UQUc9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZT9iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpOmMucXNhP2IucXVlcnlTZWxlY3RvckFsbChhKTp2b2lkIDB9OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPTAsZj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKCIqIj09PWEpe3doaWxlKGM9ZltlKytdKTE9PT1jLm5vZGVUeXBlJiZkLnB1c2goYyk7cmV0dXJuIGR9cmV0dXJuIGZ9LGQuZmluZC5DTEFTUz1jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJnA/Yi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGEpOnZvaWQgMH0scj1bXSxxPVtdLChjLnFzYT1aLnRlc3Qobi5xdWVyeVNlbGVjdG9yQWxsKSkmJihpYShmdW5jdGlvbihhKXtvLmFwcGVuZENoaWxkKGEpLmlubmVySFRNTD0iPGEgaWQ9JyIrdSsiJz48L2E+PHNlbGVjdCBpZD0nIit1KyItXHJcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iLGEucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djYXB0dXJlXj0nJ10iKS5sZW5ndGgmJnEucHVzaCgiWypeJF09IitMKyIqKD86Jyd8XCJcIikiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fHEucHVzaCgiXFxbIitMKyIqKD86dmFsdWV8IitLKyIpIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJbaWR+PSIrdSsiLV0iKS5sZW5ndGh8fHEucHVzaCgifj0iKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RofHxxLnB1c2goIjpjaGVja2VkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJhIyIrdSsiKyoiKS5sZW5ndGh8fHEucHVzaCgiLiMuK1srfl0iKX0pLGlhKGZ1bmN0aW9uKGEpe3ZhciBiPW4uY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImhpZGRlbiIpLGEuYXBwZW5kQ2hpbGQoYikuc2V0QXR0cmlidXRlKCJuYW1lIiwiRCIpLGEucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGgmJnEucHVzaCgibmFtZSIrTCsiKlsqXiR8IX5dPz0iKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RofHxxLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IikscS5wdXNoKCIsLio6Iil9KSksKGMubWF0Y2hlc1NlbGVjdG9yPVoudGVzdChzPW8ubWF0Y2hlc3x8by53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG8ubW96TWF0Y2hlc1NlbGVjdG9yfHxvLm9NYXRjaGVzU2VsZWN0b3J8fG8ubXNNYXRjaGVzU2VsZWN0b3IpKSYmaWEoZnVuY3Rpb24oYSl7Yy5kaXNjb25uZWN0ZWRNYXRjaD1zLmNhbGwoYSwiZGl2Iikscy5jYWxsKGEsIltzIT0nJ106eCIpLHIucHVzaCgiIT0iLE8pfSkscT1xLmxlbmd0aCYmbmV3IFJlZ0V4cChxLmpvaW4oInwiKSkscj1yLmxlbmd0aCYmbmV3IFJlZ0V4cChyLmpvaW4oInwiKSksYj1aLnRlc3Qoby5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiksdD1ifHxaLnRlc3Qoby5jb250YWlucyk/ZnVuY3Rpb24oYSxiKXt2YXIgYz05PT09YS5ub2RlVHlwZT9hLmRvY3VtZW50RWxlbWVudDphLGQ9YiYmYi5wYXJlbnROb2RlO3JldHVybiBhPT09ZHx8ISghZHx8MSE9PWQubm9kZVR5cGV8fCEoYy5jb250YWlucz9jLmNvbnRhaW5zKGQpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZCkpKX06ZnVuY3Rpb24oYSxiKXtpZihiKXdoaWxlKGI9Yi5wYXJlbnROb2RlKWlmKGI9PT1hKXJldHVybiEwO3JldHVybiExfSxCPWI/ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBkPSFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBkP2Q6KGQ9KGEub3duZXJEb2N1bWVudHx8YSk9PT0oYi5vd25lckRvY3VtZW50fHxiKT9hLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGIpOjEsMSZkfHwhYy5zb3J0RGV0YWNoZWQmJmIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYSk9PT1kP2E9PT1ufHxhLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYSk/LTE6Yj09PW58fGIub3duZXJEb2N1bWVudD09PXYmJnQodixiKT8xOms/SihrLGEpLUooayxiKTowOjQmZD8tMToxKX06ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBjLGQ9MCxlPWEucGFyZW50Tm9kZSxmPWIucGFyZW50Tm9kZSxnPVthXSxoPVtiXTtpZighZXx8IWYpcmV0dXJuIGE9PT1uPy0xOmI9PT1uPzE6ZT8tMTpmPzE6az9KKGssYSktSihrLGIpOjA7aWYoZT09PWYpcmV0dXJuIGthKGEsYik7Yz1hO3doaWxlKGM9Yy5wYXJlbnROb2RlKWcudW5zaGlmdChjKTtjPWI7d2hpbGUoYz1jLnBhcmVudE5vZGUpaC51bnNoaWZ0KGMpO3doaWxlKGdbZF09PT1oW2RdKWQrKztyZXR1cm4gZD9rYShnW2RdLGhbZF0pOmdbZF09PT12Py0xOmhbZF09PT12PzE6MH0sbik6bn0sZmEubWF0Y2hlcz1mdW5jdGlvbihhLGIpe3JldHVybiBmYShhLG51bGwsbnVsbCxiKX0sZmEubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGEsYil7aWYoKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLGI9Yi5yZXBsYWNlKFQsIj0nJDEnXSIpLGMubWF0Y2hlc1NlbGVjdG9yJiZwJiYhQVtiKyIgIl0mJighcnx8IXIudGVzdChiKSkmJighcXx8IXEudGVzdChiKSkpdHJ5e3ZhciBkPXMuY2FsbChhLGIpO2lmKGR8fGMuZGlzY29ubmVjdGVkTWF0Y2h8fGEuZG9jdW1lbnQmJjExIT09YS5kb2N1bWVudC5ub2RlVHlwZSlyZXR1cm4gZH1jYXRjaChlKXt9cmV0dXJuIGZhKGIsbixudWxsLFthXSkubGVuZ3RoPjB9LGZhLmNvbnRhaW5zPWZ1bmN0aW9uKGEsYil7cmV0dXJuKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLHQoYSxiKX0sZmEuYXR0cj1mdW5jdGlvbihhLGIpeyhhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKTt2YXIgZT1kLmF0dHJIYW5kbGVbYi50b0xvd2VyQ2FzZSgpXSxmPWUmJkQuY2FsbChkLmF0dHJIYW5kbGUsYi50b0xvd2VyQ2FzZSgpKT9lKGEsYiwhcCk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1mP2Y6Yy5hdHRyaWJ1dGVzfHwhcD9hLmdldEF0dHJpYnV0ZShiKTooZj1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZmLnNwZWNpZmllZD9mLnZhbHVlOm51bGx9LGZhLmVycm9yPWZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIithKX0sZmEudW5pcXVlU29ydD1mdW5jdGlvbihhKXt2YXIgYixkPVtdLGU9MCxmPTA7aWYobD0hYy5kZXRlY3REdXBsaWNhdGVzLGs9IWMuc29ydFN0YWJsZSYmYS5zbGljZSgwKSxhLnNvcnQoQiksbCl7d2hpbGUoYj1hW2YrK10pYj09PWFbZl0mJihlPWQucHVzaChmKSk7d2hpbGUoZS0tKWEuc3BsaWNlKGRbZV0sMSl9cmV0dXJuIGs9bnVsbCxhfSxlPWZhLmdldFRleHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz0iIixkPTAsZj1hLm5vZGVUeXBlO2lmKGYpe2lmKDE9PT1mfHw5PT09Znx8MTE9PT1mKXtpZigic3RyaW5nIj09dHlwZW9mIGEudGV4dENvbnRlbnQpcmV0dXJuIGEudGV4dENvbnRlbnQ7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWMrPWUoYSl9ZWxzZSBpZigzPT09Znx8ND09PWYpcmV0dXJuIGEubm9kZVZhbHVlfWVsc2Ugd2hpbGUoYj1hW2QrK10pYys9ZShiKTtyZXR1cm4gY30sZD1mYS5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpoYSxtYXRjaDpXLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7Ij4iOntkaXI6InBhcmVudE5vZGUiLGZpcnN0OiEwfSwiICI6e2RpcjoicGFyZW50Tm9kZSJ9LCIrIjp7ZGlyOiJwcmV2aW91c1NpYmxpbmciLGZpcnN0OiEwfSwifiI6e2RpcjoicHJldmlvdXNTaWJsaW5nIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnJlcGxhY2UoYmEsY2EpLGFbM109KGFbM118fGFbNF18fGFbNV18fCIiKS5yZXBsYWNlKGJhLGNhKSwifj0iPT09YVsyXSYmKGFbM109IiAiK2FbM10rIiAiKSxhLnNsaWNlKDAsNCl9LENISUxEOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0udG9Mb3dlckNhc2UoKSwibnRoIj09PWFbMV0uc2xpY2UoMCwzKT8oYVszXXx8ZmEuZXJyb3IoYVswXSksYVs0XT0rKGFbNF0/YVs1XSsoYVs2XXx8MSk6MiooImV2ZW4iPT09YVszXXx8Im9kZCI9PT1hWzNdKSksYVs1XT0rKGFbN10rYVs4XXx8Im9kZCI9PT1hWzNdKSk6YVszXSYmZmEuZXJyb3IoYVswXSksYX0sUFNFVURPOmZ1bmN0aW9uKGEpe3ZhciBiLGM9IWFbNl0mJmFbMl07cmV0dXJuIFcuQ0hJTEQudGVzdChhWzBdKT9udWxsOihhWzNdP2FbMl09YVs0XXx8YVs1XXx8IiI6YyYmVS50ZXN0KGMpJiYoYj1nKGMsITApKSYmKGI9Yy5pbmRleE9mKCIpIixjLmxlbmd0aC1iKS1jLmxlbmd0aCkmJihhWzBdPWFbMF0uc2xpY2UoMCxiKSxhWzJdPWMuc2xpY2UoMCxiKSksYS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSkudG9Mb3dlckNhc2UoKTtyZXR1cm4iKiI9PT1hP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1ifX0sQ0xBU1M6ZnVuY3Rpb24oYSl7dmFyIGI9eVthKyIgIl07cmV0dXJuIGJ8fChiPW5ldyBSZWdFeHAoIihefCIrTCsiKSIrYSsiKCIrTCsifCQpIikpJiZ5KGEsZnVuY3Rpb24oYSl7cmV0dXJuIGIudGVzdCgic3RyaW5nIj09dHlwZW9mIGEuY2xhc3NOYW1lJiZhLmNsYXNzTmFtZXx8InVuZGVmaW5lZCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZSYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKX0pfSxBVFRSOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9ZmEuYXR0cihkLGEpO3JldHVybiBudWxsPT1lPyIhPSI9PT1iOmI/KGUrPSIiLCI9Ij09PWI/ZT09PWM6IiE9Ij09PWI/ZSE9PWM6Il49Ij09PWI/YyYmMD09PWUuaW5kZXhPZihjKToiKj0iPT09Yj9jJiZlLmluZGV4T2YoYyk+LTE6IiQ9Ij09PWI/YyYmZS5zbGljZSgtYy5sZW5ndGgpPT09Yzoifj0iPT09Yj8oIiAiK2UucmVwbGFjZShQLCIgIikrIiAiKS5pbmRleE9mKGMpPi0xOiJ8PSI9PT1iP2U9PT1jfHxlLnNsaWNlKDAsYy5sZW5ndGgrMSk9PT1jKyItIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPSJudGgiIT09YS5zbGljZSgwLDMpLGc9Imxhc3QiIT09YS5zbGljZSgtNCksaD0ib2YtdHlwZSI9PT1iO3JldHVybiAxPT09ZCYmMD09PWU/ZnVuY3Rpb24oYSl7cmV0dXJuISFhLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGIsYyxpKXt2YXIgaixrLGwsbSxuLG8scD1mIT09Zz8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLHE9Yi5wYXJlbnROb2RlLHI9aCYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHM9IWkmJiFoLHQ9ITE7aWYocSl7aWYoZil7d2hpbGUocCl7bT1iO3doaWxlKG09bVtwXSlpZihoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpcmV0dXJuITE7bz1wPSJvbmx5Ij09PWEmJiFvJiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZzKXttPXEsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biYmalsyXSxtPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShtPSsrbiYmbSYmbVtwXXx8KHQ9bj0wKXx8by5wb3AoKSlpZigxPT09bS5ub2RlVHlwZSYmKyt0JiZtPT09Yil7a1thXT1bdyxuLHRdO2JyZWFrfX1lbHNlIGlmKHMmJihtPWIsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biksdD09PSExKXdoaWxlKG09KytuJiZtJiZtW3BdfHwodD1uPTApfHxvLnBvcCgpKWlmKChoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpJiYrK3QmJihzJiYobD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksa1thXT1bdyx0XSksbT09PWIpKWJyZWFrO3JldHVybiB0LT1lLHQ9PT1kfHx0JWQ9PT0wJiZ0L2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxmYS5lcnJvcigidW5zdXBwb3J0ZWQgcHNldWRvOiAiK2EpO3JldHVybiBlW3VdP2UoYik6ZS5sZW5ndGg+MT8oYz1bYSxhLCIiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2hhKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1KKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmhhKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShRLCIkMSIpKTtyZXR1cm4gZFt1XT9oYShmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSxiWzBdPW51bGwsIWMucG9wKCl9fSksaGFzOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZmEoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczpoYShmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoYmEsY2EpLGZ1bmN0aW9uKGIpe3JldHVybihiLnRleHRDb250ZW50fHxiLmlubmVyVGV4dHx8ZShiKSkuaW5kZXhPZihhKT4tMX19KSxsYW5nOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBWLnRlc3QoYXx8IiIpfHxmYS5lcnJvcigidW5zdXBwb3J0ZWQgbGFuZzogIithKSxhPWEucmVwbGFjZShiYSxjYSkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbihiKXt2YXIgYztkbyBpZihjPXA/Yi5sYW5nOmIuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpfHxiLmdldEF0dHJpYnV0ZSgibGFuZyIpKXJldHVybiBjPWMudG9Mb3dlckNhc2UoKSxjPT09YXx8MD09PWMuaW5kZXhPZihhKyItIik7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSYmMT09PWIubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbihiKXt2YXIgYz1hLmxvY2F0aW9uJiZhLmxvY2F0aW9uLmhhc2g7cmV0dXJuIGMmJmMuc2xpY2UoMSk9PT1iLmlkfSxyb290OmZ1bmN0aW9uKGEpe3JldHVybiBhPT09b30sZm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1uLmFjdGl2ZUVsZW1lbnQmJighbi5oYXNGb2N1c3x8bi5oYXNGb2N1cygpKSYmISEoYS50eXBlfHxhLmhyZWZ8fH5hLnRhYkluZGV4KX0sZW5hYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSExfSxkaXNhYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmISFhLmNoZWNrZWR8fCJvcHRpb24iPT09YiYmISFhLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxhLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4hZC5wc2V1ZG9zLmVtcHR5KGEpfSxoZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIFkudGVzdChhLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFgudGVzdChhLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmImJ1dHRvbiI9PT1hLnR5cGV8fCJidXR0b24iPT09Yn0sdGV4dDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4iaW5wdXQiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8InRleHQiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6bmEoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Om5hKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpuYShmdW5jdGlvbihhLGIsYyl7cmV0dXJuWzA+Yz9jK2I6Y119KSxldmVuOm5hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOm5hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6bmEoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpuYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bGEoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bWEoYik7ZnVuY3Rpb24gcGEoKXt9cGEucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyBwYSxnPWZhLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErIiAiXTtpZihrKXJldHVybiBiPzA6ay5zbGljZSgwKTtoPWEsaT1bXSxqPWQucHJlRmlsdGVyO3doaWxlKGgpe2MmJiEoZT1SLmV4ZWMoaCkpfHwoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1TLmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFEsIiAiKX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2ZvcihnIGluIGQuZmlsdGVyKSEoZT1XW2ddLmV4ZWMoaCkpfHxqW2ddJiYhKGU9altnXShlKSl8fChjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTpnLG1hdGNoZXM6ZX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2lmKCFjKWJyZWFrfXJldHVybiBiP2gubGVuZ3RoOmg/ZmEuZXJyb3IoYSk6eihhLGkpLnNsaWNlKDApfTtmdW5jdGlvbiBxYShhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9IiI7Yz5iO2IrKylkKz1hW2JdLnZhbHVlO3JldHVybiBkfWZ1bmN0aW9uIHJhKGEsYixjKXt2YXIgZD1iLmRpcixlPWMmJiJwYXJlbnROb2RlIj09PWQsZj14Kys7cmV0dXJuIGIuZmlyc3Q/ZnVuY3Rpb24oYixjLGYpe3doaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSlyZXR1cm4gYShiLGMsZil9OmZ1bmN0aW9uKGIsYyxnKXt2YXIgaCxpLGosaz1bdyxmXTtpZihnKXt3aGlsZShiPWJbZF0paWYoKDE9PT1iLm5vZGVUeXBlfHxlKSYmYShiLGMsZykpcmV0dXJuITB9ZWxzZSB3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpe2lmKGo9Ylt1XXx8KGJbdV09e30pLGk9altiLnVuaXF1ZUlEXXx8KGpbYi51bmlxdWVJRF09e30pLChoPWlbZF0pJiZoWzBdPT09dyYmaFsxXT09PWYpcmV0dXJuIGtbMl09aFsyXTtpZihpW2RdPWssa1syXT1hKGIsYyxnKSlyZXR1cm4hMH19fWZ1bmN0aW9uIHNhKGEpe3JldHVybiBhLmxlbmd0aD4xP2Z1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLmxlbmd0aDt3aGlsZShlLS0paWYoIWFbZV0oYixjLGQpKXJldHVybiExO3JldHVybiEwfTphWzBdfWZ1bmN0aW9uIHRhKGEsYixjKXtmb3IodmFyIGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspZmEoYSxiW2RdLGMpO3JldHVybiBjfWZ1bmN0aW9uIHVhKGEsYixjLGQsZSl7Zm9yKHZhciBmLGc9W10saD0wLGk9YS5sZW5ndGgsaj1udWxsIT1iO2k+aDtoKyspKGY9YVtoXSkmJihjJiYhYyhmLGQsZSl8fChnLnB1c2goZiksaiYmYi5wdXNoKGgpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gdmEoYSxiLGMsZCxlLGYpe3JldHVybiBkJiYhZFt1XSYmKGQ9dmEoZCkpLGUmJiFlW3VdJiYoZT12YShlLGYpKSxoYShmdW5jdGlvbihmLGcsaCxpKXt2YXIgaixrLGwsbT1bXSxuPVtdLG89Zy5sZW5ndGgscD1mfHx0YShifHwiKiIsaC5ub2RlVHlwZT9baF06aCxbXSkscT0hYXx8IWYmJmI/cDp1YShwLG0sYSxoLGkpLHI9Yz9lfHwoZj9hOm98fGQpP1tdOmc6cTtpZihjJiZjKHEscixoLGkpLGQpe2o9dWEocixuKSxkKGosW10saCxpKSxrPWoubGVuZ3RoO3doaWxlKGstLSkobD1qW2tdKSYmKHJbbltrXV09IShxW25ba11dPWwpKX1pZihmKXtpZihlfHxhKXtpZihlKXtqPVtdLGs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiZqLnB1c2gocVtrXT1sKTtlKG51bGwscj1bXSxqLGkpfWs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiYoaj1lP0ooZixsKTptW2tdKT4tMSYmKGZbal09IShnW2pdPWwpKX19ZWxzZSByPXVhKHI9PT1nP3Iuc3BsaWNlKG8sci5sZW5ndGgpOnIpLGU/ZShudWxsLGcscixpKTpILmFwcGx5KGcscil9KX1mdW5jdGlvbiB3YShhKXtmb3IodmFyIGIsYyxlLGY9YS5sZW5ndGgsZz1kLnJlbGF0aXZlW2FbMF0udHlwZV0saD1nfHxkLnJlbGF0aXZlWyIgIl0saT1nPzE6MCxrPXJhKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0saCwhMCksbD1yYShmdW5jdGlvbihhKXtyZXR1cm4gSihiLGEpPi0xfSxoLCEwKSxtPVtmdW5jdGlvbihhLGMsZCl7dmFyIGU9IWcmJihkfHxjIT09ail8fCgoYj1jKS5ub2RlVHlwZT9rKGEsYyxkKTpsKGEsYyxkKSk7cmV0dXJuIGI9bnVsbCxlfV07Zj5pO2krKylpZihjPWQucmVsYXRpdmVbYVtpXS50eXBlXSltPVtyYShzYShtKSxjKV07ZWxzZXtpZihjPWQuZmlsdGVyW2FbaV0udHlwZV0uYXBwbHkobnVsbCxhW2ldLm1hdGNoZXMpLGNbdV0pe2ZvcihlPSsraTtmPmU7ZSsrKWlmKGQucmVsYXRpdmVbYVtlXS50eXBlXSlicmVhaztyZXR1cm4gdmEoaT4xJiZzYShtKSxpPjEmJnFhKGEuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6IiAiPT09YVtpLTJdLnR5cGU/IioiOiIifSkpLnJlcGxhY2UoUSwiJDEiKSxjLGU+aSYmd2EoYS5zbGljZShpLGUpKSxmPmUmJndhKGE9YS5zbGljZShlKSksZj5lJiZxYShhKSl9bS5wdXNoKGMpfXJldHVybiBzYShtKX1mdW5jdGlvbiB4YShhLGIpe3ZhciBjPWIubGVuZ3RoPjAsZT1hLmxlbmd0aD4wLGY9ZnVuY3Rpb24oZixnLGgsaSxrKXt2YXIgbCxvLHEscj0wLHM9IjAiLHQ9ZiYmW10sdT1bXSx2PWoseD1mfHxlJiZkLmZpbmQuVEFHKCIqIixrKSx5PXcrPW51bGw9PXY/MTpNYXRoLnJhbmRvbSgpfHwuMSx6PXgubGVuZ3RoO2ZvcihrJiYoaj1nPT09bnx8Z3x8ayk7cyE9PXomJm51bGwhPShsPXhbc10pO3MrKyl7aWYoZSYmbCl7bz0wLGd8fGwub3duZXJEb2N1bWVudD09PW58fChtKGwpLGg9IXApO3doaWxlKHE9YVtvKytdKWlmKHEobCxnfHxuLGgpKXtpLnB1c2gobCk7YnJlYWt9ayYmKHc9eSl9YyYmKChsPSFxJiZsKSYmci0tLGYmJnQucHVzaChsKSl9aWYocis9cyxjJiZzIT09cil7bz0wO3doaWxlKHE9YltvKytdKXEodCx1LGcsaCk7aWYoZil7aWYocj4wKXdoaWxlKHMtLSl0W3NdfHx1W3NdfHwodVtzXT1GLmNhbGwoaSkpO3U9dWEodSl9SC5hcHBseShpLHUpLGsmJiFmJiZ1Lmxlbmd0aD4wJiZyK2IubGVuZ3RoPjEmJmZhLnVuaXF1ZVNvcnQoaSl9cmV0dXJuIGsmJih3PXksaj12KSx0fTtyZXR1cm4gYz9oYShmKTpmfXJldHVybiBoPWZhLmNvbXBpbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9W10sZj1BW2ErIiAiXTtpZighZil7Ynx8KGI9ZyhhKSksYz1iLmxlbmd0aDt3aGlsZShjLS0pZj13YShiW2NdKSxmW3VdP2QucHVzaChmKTplLnB1c2goZik7Zj1BKGEseGEoZSxkKSksZi5zZWxlY3Rvcj1hfXJldHVybiBmfSxpPWZhLnNlbGVjdD1mdW5jdGlvbihhLGIsZSxmKXt2YXIgaSxqLGssbCxtLG49ImZ1bmN0aW9uIj09dHlwZW9mIGEmJmEsbz0hZiYmZyhhPW4uc2VsZWN0b3J8fGEpO2lmKGU9ZXx8W10sMT09PW8ubGVuZ3RoKXtpZihqPW9bMF09b1swXS5zbGljZSgwKSxqLmxlbmd0aD4yJiYiSUQiPT09KGs9alswXSkudHlwZSYmYy5nZXRCeUlkJiY5PT09Yi5ub2RlVHlwZSYmcCYmZC5yZWxhdGl2ZVtqWzFdLnR5cGVdKXtpZihiPShkLmZpbmQuSUQoay5tYXRjaGVzWzBdLnJlcGxhY2UoYmEsY2EpLGIpfHxbXSlbMF0sIWIpcmV0dXJuIGU7biYmKGI9Yi5wYXJlbnROb2RlKSxhPWEuc2xpY2Uoai5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aT1XLm5lZWRzQ29udGV4dC50ZXN0KGEpPzA6ai5sZW5ndGg7d2hpbGUoaS0tKXtpZihrPWpbaV0sZC5yZWxhdGl2ZVtsPWsudHlwZV0pYnJlYWs7aWYoKG09ZC5maW5kW2xdKSYmKGY9bShrLm1hdGNoZXNbMF0ucmVwbGFjZShiYSxjYSksXy50ZXN0KGpbMF0udHlwZSkmJm9hKGIucGFyZW50Tm9kZSl8fGIpKSl7aWYoai5zcGxpY2UoaSwxKSxhPWYubGVuZ3RoJiZxYShqKSwhYSlyZXR1cm4gSC5hcHBseShlLGYpLGU7YnJlYWt9fX1yZXR1cm4obnx8aChhLG8pKShmLGIsIXAsZSwhYnx8Xy50ZXN0KGEpJiZvYShiLnBhcmVudE5vZGUpfHxiKSxlfSxjLnNvcnRTdGFibGU9dS5zcGxpdCgiIikuc29ydChCKS5qb2luKCIiKT09PXUsYy5kZXRlY3REdXBsaWNhdGVzPSEhbCxtKCksYy5zb3J0RGV0YWNoZWQ9aWEoZnVuY3Rpb24oYSl7cmV0dXJuIDEmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuLmNyZWF0ZUVsZW1lbnQoImRpdiIpKX0pLGlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsIiMiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpfSl8fGphKCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dm9pZCAwOmEuZ2V0QXR0cmlidXRlKGIsInR5cGUiPT09Yi50b0xvd2VyQ2FzZSgpPzE6Mil9KSxjLmF0dHJpYnV0ZXMmJmlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD0iPGlucHV0Lz4iLGEuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIiksIiI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpfSl8fGphKCJ2YWx1ZSIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjfHwiaW5wdXQiIT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpP3ZvaWQgMDphLmRlZmF1bHRWYWx1ZX0pLGlhKGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKX0pfHxqYShLLGZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYz92b2lkIDA6YVtiXT09PSEwP2IudG9Mb3dlckNhc2UoKTooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZkLnNwZWNpZmllZD9kLnZhbHVlOm51bGx9KSxmYX0oYSk7bi5maW5kPXQsbi5leHByPXQuc2VsZWN0b3JzLG4uZXhwclsiOiJdPW4uZXhwci5wc2V1ZG9zLG4udW5pcXVlU29ydD1uLnVuaXF1ZT10LnVuaXF1ZVNvcnQsbi50ZXh0PXQuZ2V0VGV4dCxuLmlzWE1MRG9jPXQuaXNYTUwsbi5jb250YWlucz10LmNvbnRhaW5zO3ZhciB1PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPXZvaWQgMCE9PWM7d2hpbGUoKGE9YVtiXSkmJjkhPT1hLm5vZGVUeXBlKWlmKDE9PT1hLm5vZGVUeXBlKXtpZihlJiZuKGEpLmlzKGMpKWJyZWFrO2QucHVzaChhKX1yZXR1cm4gZH0sdj1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXTthO2E9YS5uZXh0U2libGluZykxPT09YS5ub2RlVHlwZSYmYSE9PWImJmMucHVzaChhKTtyZXR1cm4gY30sdz1uLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LHg9L148KFtcdy1dKylccypcLz8+KD86PFwvXDE+fCkkLyx5PS9eLlteOiNcW1wuLF0qJC87ZnVuY3Rpb24geihhLGIsYyl7aWYobi5pc0Z1bmN0aW9uKGIpKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhLGQpe3JldHVybiEhYi5jYWxsKGEsZCxhKSE9PWN9KTtpZihiLm5vZGVUeXBlKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWIhPT1jfSk7aWYoInN0cmluZyI9PXR5cGVvZiBiKXtpZih5LnRlc3QoYikpcmV0dXJuIG4uZmlsdGVyKGIsYSxjKTtiPW4uZmlsdGVyKGIsYSl9cmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBuLmluQXJyYXkoYSxiKT4tMSE9PWN9KX1uLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9Ijpub3QoIithKyIpIiksMT09PWIubGVuZ3RoJiYxPT09ZC5ub2RlVHlwZT9uLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGQsYSk/W2RdOltdOm4uZmluZC5tYXRjaGVzKGEsbi5ncmVwKGIsZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfSkpfSxuLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXt2YXIgYixjPVtdLGQ9dGhpcyxlPWQubGVuZ3RoO2lmKCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2sobihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2U+YjtiKyspaWYobi5jb250YWlucyhkW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihiPTA7ZT5iO2IrKyluLmZpbmQoYSxkW2JdLGMpO3JldHVybiBjPXRoaXMucHVzaFN0YWNrKGU+MT9uLnVuaXF1ZShjKTpjKSxjLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcisiICIrYTphLGN9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeih0aGlzLGF8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeih0aGlzLGF8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEheih0aGlzLCJzdHJpbmciPT10eXBlb2YgYSYmdy50ZXN0KGEpP24oYSk6YXx8W10sITEpLmxlbmd0aH19KTt2YXIgQSxCPS9eKD86XHMqKDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKikpJC8sQz1uLmZuLmluaXQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBlLGY7aWYoIWEpcmV0dXJuIHRoaXM7aWYoYz1jfHxBLCJzdHJpbmciPT10eXBlb2YgYSl7aWYoZT0iPCI9PT1hLmNoYXJBdCgwKSYmIj4iPT09YS5jaGFyQXQoYS5sZW5ndGgtMSkmJmEubGVuZ3RoPj0zP1tudWxsLGEsbnVsbF06Qi5leGVjKGEpLCFlfHwhZVsxXSYmYilyZXR1cm4hYnx8Yi5qcXVlcnk/KGJ8fGMpLmZpbmQoYSk6dGhpcy5jb25zdHJ1Y3RvcihiKS5maW5kKGEpO2lmKGVbMV0pe2lmKGI9YiBpbnN0YW5jZW9mIG4/YlswXTpiLG4ubWVyZ2UodGhpcyxuLnBhcnNlSFRNTChlWzFdLGImJmIubm9kZVR5cGU/Yi5vd25lckRvY3VtZW50fHxiOmQsITApKSx4LnRlc3QoZVsxXSkmJm4uaXNQbGFpbk9iamVjdChiKSlmb3IoZSBpbiBiKW4uaXNGdW5jdGlvbih0aGlzW2VdKT90aGlzW2VdKGJbZV0pOnRoaXMuYXR0cihlLGJbZV0pO3JldHVybiB0aGlzfWlmKGY9ZC5nZXRFbGVtZW50QnlJZChlWzJdKSxmJiZmLnBhcmVudE5vZGUpe2lmKGYuaWQhPT1lWzJdKXJldHVybiBBLmZpbmQoYSk7dGhpcy5sZW5ndGg9MSx0aGlzWzBdPWZ9cmV0dXJuIHRoaXMuY29udGV4dD1kLHRoaXMuc2VsZWN0b3I9YSx0aGlzfXJldHVybiBhLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6bi5pc0Z1bmN0aW9uKGEpPyJ1bmRlZmluZWQiIT10eXBlb2YgYy5yZWFkeT9jLnJlYWR5KGEpOmEobik6KHZvaWQgMCE9PWEuc2VsZWN0b3ImJih0aGlzLnNlbGVjdG9yPWEuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWEuY29udGV4dCksbi5tYWtlQXJyYXkoYSx0aGlzKSl9O0MucHJvdG90eXBlPW4uZm4sQT1uKGQpO3ZhciBEPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEU9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07bi5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYixjPW4oYSx0aGlzKSxkPWMubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7ZD5iO2IrKylpZihuLmNvbnRhaW5zKHRoaXMsY1tiXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT10aGlzLmxlbmd0aCxmPVtdLGc9dy50ZXN0KGEpfHwic3RyaW5nIiE9dHlwZW9mIGE/bihhLGJ8fHRoaXMuY29udGV4dCk6MDtlPmQ7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmbi5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP24udW5pcXVlU29ydChmKTpmKX0saW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/InN0cmluZyI9PXR5cGVvZiBhP24uaW5BcnJheSh0aGlzWzBdLG4oYSkpOm4uaW5BcnJheShhLmpxdWVyeT9hWzBdOmEsdGhpcyk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobi51bmlxdWVTb3J0KG4ubWVyZ2UodGhpcy5nZXQoKSxuKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEYoYSxiKXtkbyBhPWFbYl07d2hpbGUoYSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW4uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gdShhLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHUoYSwicGFyZW50Tm9kZSIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEYoYSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihhKXtyZXR1cm4gRihhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihhKXtyZXR1cm4gdShhLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiB1KGEsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB1KGEsIm5leHRTaWJsaW5nIixjKX0scHJldlVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdShhLCJwcmV2aW91c1NpYmxpbmciLGMpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4gdigoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIHYoYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIG4ubm9kZU5hbWUoYSwiaWZyYW1lIik/YS5jb250ZW50RG9jdW1lbnR8fGEuY29udGVudFdpbmRvdy5kb2N1bWVudDpuLm1lcmdlKFtdLGEuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYyxkKXt2YXIgZT1uLm1hcCh0aGlzLGIsYyk7cmV0dXJuIlVudGlsIiE9PWEuc2xpY2UoLTUpJiYoZD1jKSxkJiYic3RyaW5nIj09dHlwZW9mIGQmJihlPW4uZmlsdGVyKGQsZSkpLHRoaXMubGVuZ3RoPjEmJihFW2FdfHwoZT1uLnVuaXF1ZVNvcnQoZSkpLEQudGVzdChhKSYmKGU9ZS5yZXZlcnNlKCkpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgRz0vXFMrL2c7ZnVuY3Rpb24gSChhKXt2YXIgYj17fTtyZXR1cm4gbi5lYWNoKGEubWF0Y2goRyl8fFtdLGZ1bmN0aW9uKGEsYyl7YltjXT0hMH0pLGJ9bi5DYWxsYmFja3M9ZnVuY3Rpb24oYSl7YT0ic3RyaW5nIj09dHlwZW9mIGE/SChhKTpuLmV4dGVuZCh7fSxhKTt2YXIgYixjLGQsZSxmPVtdLGc9W10saD0tMSxpPWZ1bmN0aW9uKCl7Zm9yKGU9YS5vbmNlLGQ9Yj0hMDtnLmxlbmd0aDtoPS0xKXtjPWcuc2hpZnQoKTt3aGlsZSgrK2g8Zi5sZW5ndGgpZltoXS5hcHBseShjWzBdLGNbMV0pPT09ITEmJmEuc3RvcE9uRmFsc2UmJihoPWYubGVuZ3RoLGM9ITEpfWEubWVtb3J5fHwoYz0hMSksYj0hMSxlJiYoZj1jP1tdOiIiKX0saj17YWRkOmZ1bmN0aW9uKCl7cmV0dXJuIGYmJihjJiYhYiYmKGg9Zi5sZW5ndGgtMSxnLnB1c2goYykpLGZ1bmN0aW9uIGQoYil7bi5lYWNoKGIsZnVuY3Rpb24oYixjKXtuLmlzRnVuY3Rpb24oYyk/YS51bmlxdWUmJmouaGFzKGMpfHxmLnB1c2goYyk6YyYmYy5sZW5ndGgmJiJzdHJpbmciIT09bi50eXBlKGMpJiZkKGMpfSl9KGFyZ3VtZW50cyksYyYmIWImJmkoKSksdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIG4uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxiKXt2YXIgYzt3aGlsZSgoYz1uLmluQXJyYXkoYixmLGMpKT4tMSlmLnNwbGljZShjLDEpLGg+PWMmJmgtLX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9uLmluQXJyYXkoYSxmKT4tMTpmLmxlbmd0aD4wfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBmJiYoZj1bXSksdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiBlPWc9W10sZj1jPSIiLHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIWZ9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gZT0hMCxjfHxqLmRpc2FibGUoKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWV9LGZpcmVXaXRoOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGV8fChjPWN8fFtdLGM9W2EsYy5zbGljZT9jLnNsaWNlKCk6Y10sZy5wdXNoKGMpLGJ8fGkoKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBqLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZH19O3JldHVybiBqfSxuLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9W1sicmVzb2x2ZSIsImRvbmUiLG4uQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCJyZXNvbHZlZCJdLFsicmVqZWN0IiwiZmFpbCIsbi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlamVjdGVkIl0sWyJub3RpZnkiLCJwcm9ncmVzcyIsbi5DYWxsYmFja3MoIm1lbW9yeSIpXV0sYz0icGVuZGluZyIsZD17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gY30sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiBuLkRlZmVycmVkKGZ1bmN0aW9uKGMpe24uZWFjaChiLGZ1bmN0aW9uKGIsZil7dmFyIGc9bi5pc0Z1bmN0aW9uKGFbYl0pJiZhW2JdO2VbZlsxXV0oZnVuY3Rpb24oKXt2YXIgYT1nJiZnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthJiZuLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9hLnByb21pc2UoKS5wcm9ncmVzcyhjLm5vdGlmeSkuZG9uZShjLnJlc29sdmUpLmZhaWwoYy5yZWplY3QpOmNbZlswXSsiV2l0aCJdKHRoaXM9PT1kP2MucHJvbWlzZSgpOnRoaXMsZz9bYV06YXJndW1lbnRzKX0pfSksYT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hP24uZXh0ZW5kKGEsZCk6ZH19LGU9e307cmV0dXJuIGQucGlwZT1kLnRoZW4sbi5lYWNoKGIsZnVuY3Rpb24oYSxmKXt2YXIgZz1mWzJdLGg9ZlszXTtkW2ZbMV1dPWcuYWRkLGgmJmcuYWRkKGZ1bmN0aW9uKCl7Yz1ofSxiWzFeYV1bMl0uZGlzYWJsZSxiWzJdWzJdLmxvY2spLGVbZlswXV09ZnVuY3Rpb24oKXtyZXR1cm4gZVtmWzBdKyJXaXRoIl0odGhpcz09PWU/ZDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZVtmWzBdKyJXaXRoIl09Zy5maXJlV2l0aH0pLGQucHJvbWlzZShlKSxhJiZhLmNhbGwoZSxlKSxlfSx3aGVuOmZ1bmN0aW9uKGEpe3ZhciBiPTAsYz1lLmNhbGwoYXJndW1lbnRzKSxkPWMubGVuZ3RoLGY9MSE9PWR8fGEmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2Q6MCxnPTE9PT1mP2E6bi5EZWZlcnJlZCgpLGg9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtiW2FdPXRoaXMsY1thXT1hcmd1bWVudHMubGVuZ3RoPjE/ZS5jYWxsKGFyZ3VtZW50cyk6ZCxjPT09aT9nLm5vdGlmeVdpdGgoYixjKTotLWZ8fGcucmVzb2x2ZVdpdGgoYixjKX19LGksaixrO2lmKGQ+MSlmb3IoaT1uZXcgQXJyYXkoZCksaj1uZXcgQXJyYXkoZCksaz1uZXcgQXJyYXkoZCk7ZD5iO2IrKyljW2JdJiZuLmlzRnVuY3Rpb24oY1tiXS5wcm9taXNlKT9jW2JdLnByb21pc2UoKS5wcm9ncmVzcyhoKGIsaixpKSkuZG9uZShoKGIsayxjKSkuZmFpbChnLnJlamVjdCk6LS1mO3JldHVybiBmfHxnLnJlc29sdmVXaXRoKGssYyksZy5wcm9taXNlKCl9fSk7dmFyIEk7bi5mbi5yZWFkeT1mdW5jdGlvbihhKXtyZXR1cm4gbi5yZWFkeS5wcm9taXNlKCkuZG9uZShhKSx0aGlzfSxuLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oYSl7YT9uLnJlYWR5V2FpdCsrOm4ucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihhKXsoYT09PSEwPy0tbi5yZWFkeVdhaXQ6bi5pc1JlYWR5KXx8KG4uaXNSZWFkeT0hMCxhIT09ITAmJi0tbi5yZWFkeVdhaXQ+MHx8KEkucmVzb2x2ZVdpdGgoZCxbbl0pLG4uZm4udHJpZ2dlckhhbmRsZXImJihuKGQpLnRyaWdnZXJIYW5kbGVyKCJyZWFkeSIpLG4oZCkub2ZmKCJyZWFkeSIpKSkpfX0pO2Z1bmN0aW9uIEooKXtkLmFkZEV2ZW50TGlzdGVuZXI/KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsSyksYS5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixLKSk6KGQuZGV0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsSyksYS5kZXRhY2hFdmVudCgib25sb2FkIixLKSl9ZnVuY3Rpb24gSygpeyhkLmFkZEV2ZW50TGlzdGVuZXJ8fCJsb2FkIj09PWEuZXZlbnQudHlwZXx8ImNvbXBsZXRlIj09PWQucmVhZHlTdGF0ZSkmJihKKCksbi5yZWFkeSgpKX1uLnJlYWR5LnByb21pc2U9ZnVuY3Rpb24oYil7aWYoIUkpaWYoST1uLkRlZmVycmVkKCksImNvbXBsZXRlIj09PWQucmVhZHlTdGF0ZXx8ImxvYWRpbmciIT09ZC5yZWFkeVN0YXRlJiYhZC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwpYS5zZXRUaW1lb3V0KG4ucmVhZHkpO2Vsc2UgaWYoZC5hZGRFdmVudExpc3RlbmVyKWQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsSyksYS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixLKTtlbHNle2QuYXR0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsSyksYS5hdHRhY2hFdmVudCgib25sb2FkIixLKTt2YXIgYz0hMTt0cnl7Yz1udWxsPT1hLmZyYW1lRWxlbWVudCYmZC5kb2N1bWVudEVsZW1lbnR9Y2F0Y2goZSl7fWMmJmMuZG9TY3JvbGwmJiFmdW5jdGlvbiBmKCl7aWYoIW4uaXNSZWFkeSl7dHJ5e2MuZG9TY3JvbGwoImxlZnQiKX1jYXRjaChiKXtyZXR1cm4gYS5zZXRUaW1lb3V0KGYsNTApfUooKSxuLnJlYWR5KCl9fSgpfXJldHVybiBJLnByb21pc2UoYil9LG4ucmVhZHkucHJvbWlzZSgpO3ZhciBMO2ZvcihMIGluIG4obCkpYnJlYWs7bC5vd25GaXJzdD0iMCI9PT1MLGwuaW5saW5lQmxvY2tOZWVkc0xheW91dD0hMSxuKGZ1bmN0aW9uKCl7dmFyIGEsYixjLGU7Yz1kLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF0sYyYmYy5zdHlsZSYmKGI9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxlPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZS5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweCIsYy5hcHBlbmRDaGlsZChlKS5hcHBlbmRDaGlsZChiKSwidW5kZWZpbmVkIiE9dHlwZW9mIGIuc3R5bGUuem9vbSYmKGIuc3R5bGUuY3NzVGV4dD0iZGlzcGxheTppbmxpbmU7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzoxcHg7d2lkdGg6MXB4O3pvb206MSIsbC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0PWE9Mz09PWIub2Zmc2V0V2lkdGgsYSYmKGMuc3R5bGUuem9vbT0xKSksYy5yZW1vdmVDaGlsZChlKSl9KSxmdW5jdGlvbigpe3ZhciBhPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7bC5kZWxldGVFeHBhbmRvPSEwO3RyeXtkZWxldGUgYS50ZXN0fWNhdGNoKGIpe2wuZGVsZXRlRXhwYW5kbz0hMX1hPW51bGx9KCk7dmFyIE09ZnVuY3Rpb24oYSl7dmFyIGI9bi5ub0RhdGFbKGEubm9kZU5hbWUrIiAiKS50b0xvd2VyQ2FzZSgpXSxjPSthLm5vZGVUeXBlfHwxO3JldHVybiAxIT09YyYmOSE9PWM/ITE6IWJ8fGIhPT0hMCYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzaWQiKT09PWJ9LE49L14oPzpce1tcd1xXXSpcfXxcW1tcd1xXXSpcXSkkLyxPPS8oW0EtWl0pL2c7ZnVuY3Rpb24gUChhLGIsYyl7aWYodm9pZCAwPT09YyYmMT09PWEubm9kZVR5cGUpe3ZhciBkPSJkYXRhLSIrYi5yZXBsYWNlKE8sIi0kMSIpLnRvTG93ZXJDYXNlKCk7aWYoYz1hLmdldEF0dHJpYnV0ZShkKSwic3RyaW5nIj09dHlwZW9mIGMpe3RyeXtjPSJ0cnVlIj09PWM/ITA6ImZhbHNlIj09PWM/ITE6Im51bGwiPT09Yz9udWxsOitjKyIiPT09Yz8rYzpOLnRlc3QoYyk/bi5wYXJzZUpTT04oYyk6Y31jYXRjaChlKXt9bi5kYXRhKGEsYixjKX1lbHNlIGM9dm9pZCAwOwp9cmV0dXJuIGN9ZnVuY3Rpb24gUShhKXt2YXIgYjtmb3IoYiBpbiBhKWlmKCgiZGF0YSIhPT1ifHwhbi5pc0VtcHR5T2JqZWN0KGFbYl0pKSYmInRvSlNPTiIhPT1iKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIFIoYSxiLGQsZSl7aWYoTShhKSl7dmFyIGYsZyxoPW4uZXhwYW5kbyxpPWEubm9kZVR5cGUsaj1pP24uY2FjaGU6YSxrPWk/YVtoXTphW2hdJiZoO2lmKGsmJmpba10mJihlfHxqW2tdLmRhdGEpfHx2b2lkIDAhPT1kfHwic3RyaW5nIiE9dHlwZW9mIGIpcmV0dXJuIGt8fChrPWk/YVtoXT1jLnBvcCgpfHxuLmd1aWQrKzpoKSxqW2tdfHwoaltrXT1pP3t9Ont0b0pTT046bi5ub29wfSksIm9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYnx8KGU/altrXT1uLmV4dGVuZChqW2tdLGIpOmpba10uZGF0YT1uLmV4dGVuZChqW2tdLmRhdGEsYikpLGc9altrXSxlfHwoZy5kYXRhfHwoZy5kYXRhPXt9KSxnPWcuZGF0YSksdm9pZCAwIT09ZCYmKGdbbi5jYW1lbENhc2UoYildPWQpLCJzdHJpbmciPT10eXBlb2YgYj8oZj1nW2JdLG51bGw9PWYmJihmPWdbbi5jYW1lbENhc2UoYildKSk6Zj1nLGZ9fWZ1bmN0aW9uIFMoYSxiLGMpe2lmKE0oYSkpe3ZhciBkLGUsZj1hLm5vZGVUeXBlLGc9Zj9uLmNhY2hlOmEsaD1mP2Fbbi5leHBhbmRvXTpuLmV4cGFuZG87aWYoZ1toXSl7aWYoYiYmKGQ9Yz9nW2hdOmdbaF0uZGF0YSkpe24uaXNBcnJheShiKT9iPWIuY29uY2F0KG4ubWFwKGIsbi5jYW1lbENhc2UpKTpiIGluIGQ/Yj1bYl06KGI9bi5jYW1lbENhc2UoYiksYj1iIGluIGQ/W2JdOmIuc3BsaXQoIiAiKSksZT1iLmxlbmd0aDt3aGlsZShlLS0pZGVsZXRlIGRbYltlXV07aWYoYz8hUShkKTohbi5pc0VtcHR5T2JqZWN0KGQpKXJldHVybn0oY3x8KGRlbGV0ZSBnW2hdLmRhdGEsUShnW2hdKSkpJiYoZj9uLmNsZWFuRGF0YShbYV0sITApOmwuZGVsZXRlRXhwYW5kb3x8ZyE9Zy53aW5kb3c/ZGVsZXRlIGdbaF06Z1toXT12b2lkIDApfX19bi5leHRlbmQoe2NhY2hlOnt9LG5vRGF0YTp7ImFwcGxldCAiOiEwLCJlbWJlZCAiOiEwLCJvYmplY3QgIjoiY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwIn0saGFzRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gYT1hLm5vZGVUeXBlP24uY2FjaGVbYVtuLmV4cGFuZG9dXTphW24uZXhwYW5kb10sISFhJiYhUShhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIFIoYSxiLGMpfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoYSxiKX0sX2RhdGE6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBSKGEsYixjLCEwKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUyhhLGIsITApfX0pLG4uZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9dGhpc1swXSxnPWYmJmYuYXR0cmlidXRlcztpZih2b2lkIDA9PT1hKXtpZih0aGlzLmxlbmd0aCYmKGU9bi5kYXRhKGYpLDE9PT1mLm5vZGVUeXBlJiYhbi5fZGF0YShmLCJwYXJzZWRBdHRycyIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoImRhdGEtIikmJihkPW4uY2FtZWxDYXNlKGQuc2xpY2UoNSkpLFAoZixkLGVbZF0pKSk7bi5fZGF0YShmLCJwYXJzZWRBdHRycyIsITApfXJldHVybiBlfXJldHVybiJvYmplY3QiPT10eXBlb2YgYT90aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRhdGEodGhpcyxhKX0pOmFyZ3VtZW50cy5sZW5ndGg+MT90aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRhdGEodGhpcyxhLGIpfSk6Zj9QKGYsYSxuLmRhdGEoZixhKSk6dm9pZCAwfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLnJlbW92ZURhdGEodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGE/KGI9KGJ8fCJmeCIpKyJxdWV1ZSIsZD1uLl9kYXRhKGEsYiksYyYmKCFkfHxuLmlzQXJyYXkoYyk/ZD1uLl9kYXRhKGEsYixuLm1ha2VBcnJheShjKSk6ZC5wdXNoKGMpKSxkfHxbXSk6dm9pZCAwfSxkZXF1ZXVlOmZ1bmN0aW9uKGEsYil7Yj1ifHwiZngiO3ZhciBjPW4ucXVldWUoYSxiKSxkPWMubGVuZ3RoLGU9Yy5zaGlmdCgpLGY9bi5fcXVldWVIb29rcyhhLGIpLGc9ZnVuY3Rpb24oKXtuLmRlcXVldWUoYSxiKX07ImlucHJvZ3Jlc3MiPT09ZSYmKGU9Yy5zaGlmdCgpLGQtLSksZSYmKCJmeCI9PT1iJiZjLnVuc2hpZnQoImlucHJvZ3Jlc3MiKSxkZWxldGUgZi5zdG9wLGUuY2FsbChhLGcsZikpLCFkJiZmJiZmLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iKyJxdWV1ZUhvb2tzIjtyZXR1cm4gbi5fZGF0YShhLGMpfHxuLl9kYXRhKGEsYyx7ZW1wdHk6bi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7bi5fcmVtb3ZlRGF0YShhLGIrInF1ZXVlIiksbi5fcmVtb3ZlRGF0YShhLGMpfSl9KX19KSxuLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0yO3JldHVybiJzdHJpbmciIT10eXBlb2YgYSYmKGI9YSxhPSJmeCIsYy0tKSxhcmd1bWVudHMubGVuZ3RoPGM/bi5xdWV1ZSh0aGlzWzBdLGEpOnZvaWQgMD09PWI/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1uLnF1ZXVlKHRoaXMsYSxiKTtuLl9xdWV1ZUhvb2tzKHRoaXMsYSksImZ4Ij09PWEmJiJpbnByb2dyZXNzIiE9PWNbMF0mJm4uZGVxdWV1ZSh0aGlzLGEpfSl9LGRlcXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24uZGVxdWV1ZSh0aGlzLGEpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVldWUoYXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTEsZT1uLkRlZmVycmVkKCksZj10aGlzLGc9dGhpcy5sZW5ndGgsaD1mdW5jdGlvbigpey0tZHx8ZS5yZXNvbHZlV2l0aChmLFtmXSl9OyJzdHJpbmciIT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYT1hfHwiZngiO3doaWxlKGctLSljPW4uX2RhdGEoZltnXSxhKyJxdWV1ZUhvb2tzIiksYyYmYy5lbXB0eSYmKGQrKyxjLmVtcHR5LmFkZChoKSk7cmV0dXJuIGgoKSxlLnByb21pc2UoYil9fSksZnVuY3Rpb24oKXt2YXIgYTtsLnNocmlua1dyYXBCbG9ja3M9ZnVuY3Rpb24oKXtpZihudWxsIT1hKXJldHVybiBhO2E9ITE7dmFyIGIsYyxlO3JldHVybiBjPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXSxjJiZjLnN0eWxlPyhiPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZT1kLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGUuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHgiLGMuYXBwZW5kQ2hpbGQoZSkuYXBwZW5kQ2hpbGQoYiksInVuZGVmaW5lZCIhPXR5cGVvZiBiLnN0eWxlLnpvb20mJihiLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MXB4O3dpZHRoOjFweDt6b29tOjEiLGIuYXBwZW5kQ2hpbGQoZC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuc3R5bGUud2lkdGg9IjVweCIsYT0zIT09Yi5vZmZzZXRXaWR0aCksYy5yZW1vdmVDaGlsZChlKSxhKTp2b2lkIDB9fSgpO3ZhciBUPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLFU9bmV3IFJlZ0V4cCgiXig/OihbKy1dKT18KSgiK1QrIikoW2EteiVdKikkIiwiaSIpLFY9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXSxXPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9Ynx8YSwibm9uZSI9PT1uLmNzcyhhLCJkaXNwbGF5Iil8fCFuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKX07ZnVuY3Rpb24gWChhLGIsYyxkKXt2YXIgZSxmPTEsZz0yMCxoPWQ/ZnVuY3Rpb24oKXtyZXR1cm4gZC5jdXIoKX06ZnVuY3Rpb24oKXtyZXR1cm4gbi5jc3MoYSxiLCIiKX0saT1oKCksaj1jJiZjWzNdfHwobi5jc3NOdW1iZXJbYl0/IiI6InB4Iiksaz0obi5jc3NOdW1iZXJbYl18fCJweCIhPT1qJiYraSkmJlUuZXhlYyhuLmNzcyhhLGIpKTtpZihrJiZrWzNdIT09ail7aj1qfHxrWzNdLGM9Y3x8W10saz0raXx8MTtkbyBmPWZ8fCIuNSIsay89ZixuLnN0eWxlKGEsYixrK2opO3doaWxlKGYhPT0oZj1oKCkvaSkmJjEhPT1mJiYtLWcpfXJldHVybiBjJiYoaz0ra3x8K2l8fDAsZT1jWzFdP2srKGNbMV0rMSkqY1syXTorY1syXSxkJiYoZC51bml0PWosZC5zdGFydD1rLGQuZW5kPWUpKSxlfXZhciBZPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZhciBoPTAsaT1hLmxlbmd0aCxqPW51bGw9PWM7aWYoIm9iamVjdCI9PT1uLnR5cGUoYykpe2U9ITA7Zm9yKGggaW4gYylZKGEsYixoLGNbaF0sITAsZixnKX1lbHNlIGlmKHZvaWQgMCE9PWQmJihlPSEwLG4uaXNGdW5jdGlvbihkKXx8KGc9ITApLGomJihnPyhiLmNhbGwoYSxkKSxiPW51bGwpOihqPWIsYj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGouY2FsbChuKGEpLGMpfSkpLGIpKWZvcig7aT5oO2grKyliKGFbaF0sYyxnP2Q6ZC5jYWxsKGFbaF0saCxiKGFbaF0sYykpKTtyZXR1cm4gZT9hOmo/Yi5jYWxsKGEpOmk/YihhWzBdLGMpOmZ9LFo9L14oPzpjaGVja2JveHxyYWRpbykkL2ksJD0vPChbXHc6LV0rKS8sXz0vXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksYWE9L15ccysvLGJhPSJhYmJyfGFydGljbGV8YXNpZGV8YXVkaW98YmRpfGNhbnZhc3xkYXRhfGRhdGFsaXN0fGRldGFpbHN8ZGlhbG9nfGZpZ2NhcHRpb258ZmlndXJlfGZvb3RlcnxoZWFkZXJ8aGdyb3VwfG1haW58bWFya3xtZXRlcnxuYXZ8b3V0cHV0fHBpY3R1cmV8cHJvZ3Jlc3N8c2VjdGlvbnxzdW1tYXJ5fHRlbXBsYXRlfHRpbWV8dmlkZW8iO2Z1bmN0aW9uIGNhKGEpe3ZhciBiPWJhLnNwbGl0KCJ8IiksYz1hLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihjLmNyZWF0ZUVsZW1lbnQpd2hpbGUoYi5sZW5ndGgpYy5jcmVhdGVFbGVtZW50KGIucG9wKCkpO3JldHVybiBjfSFmdW5jdGlvbigpe3ZhciBhPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksYj1kLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxjPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTthLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IixsLmxlYWRpbmdXaGl0ZXNwYWNlPTM9PT1hLmZpcnN0Q2hpbGQubm9kZVR5cGUsbC50Ym9keT0hYS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKS5sZW5ndGgsbC5odG1sU2VyaWFsaXplPSEhYS5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpLmxlbmd0aCxsLmh0bWw1Q2xvbmU9Ijw6bmF2PjwvOm5hdj4iIT09ZC5jcmVhdGVFbGVtZW50KCJuYXYiKS5jbG9uZU5vZGUoITApLm91dGVySFRNTCxjLnR5cGU9ImNoZWNrYm94IixjLmNoZWNrZWQ9ITAsYi5hcHBlbmRDaGlsZChjKSxsLmFwcGVuZENoZWNrZWQ9Yy5jaGVja2VkLGEuaW5uZXJIVE1MPSI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+IixsLm5vQ2xvbmVDaGVja2VkPSEhYS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWUsYi5hcHBlbmRDaGlsZChhKSxjPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxjLnNldEF0dHJpYnV0ZSgidHlwZSIsInJhZGlvIiksYy5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCJjaGVja2VkIiksYy5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJ0IiksYS5hcHBlbmRDaGlsZChjKSxsLmNoZWNrQ2xvbmU9YS5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsbC5ub0Nsb25lRXZlbnQ9ISFhLmFkZEV2ZW50TGlzdGVuZXIsYVtuLmV4cGFuZG9dPTEsbC5hdHRyaWJ1dGVzPSFhLmdldEF0dHJpYnV0ZShuLmV4cGFuZG8pfSgpO3ZhciBkYT17b3B0aW9uOlsxLCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+IiwiPC9zZWxlY3Q+Il0sbGVnZW5kOlsxLCI8ZmllbGRzZXQ+IiwiPC9maWVsZHNldD4iXSxhcmVhOlsxLCI8bWFwPiIsIjwvbWFwPiJdLHBhcmFtOlsxLCI8b2JqZWN0PiIsIjwvb2JqZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6bC5odG1sU2VyaWFsaXplP1swLCIiLCIiXTpbMSwiWDxkaXY+IiwiPC9kaXY+Il19O2RhLm9wdGdyb3VwPWRhLm9wdGlvbixkYS50Ym9keT1kYS50Zm9vdD1kYS5jb2xncm91cD1kYS5jYXB0aW9uPWRhLnRoZWFkLGRhLnRoPWRhLnRkO2Z1bmN0aW9uIGVhKGEsYil7dmFyIGMsZCxlPTAsZj0idW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShifHwiKiIpOiJ1bmRlZmluZWQiIT10eXBlb2YgYS5xdWVyeVNlbGVjdG9yQWxsP2EucXVlcnlTZWxlY3RvckFsbChifHwiKiIpOnZvaWQgMDtpZighZilmb3IoZj1bXSxjPWEuY2hpbGROb2Rlc3x8YTtudWxsIT0oZD1jW2VdKTtlKyspIWJ8fG4ubm9kZU5hbWUoZCxiKT9mLnB1c2goZCk6bi5tZXJnZShmLGVhKGQsYikpO3JldHVybiB2b2lkIDA9PT1ifHxiJiZuLm5vZGVOYW1lKGEsYik/bi5tZXJnZShbYV0sZik6Zn1mdW5jdGlvbiBmYShhLGIpe2Zvcih2YXIgYyxkPTA7bnVsbCE9KGM9YVtkXSk7ZCsrKW4uX2RhdGEoYywiZ2xvYmFsRXZhbCIsIWJ8fG4uX2RhdGEoYltkXSwiZ2xvYmFsRXZhbCIpKX12YXIgZ2E9Lzx8JiM/XHcrOy8saGE9Lzx0Ym9keS9pO2Z1bmN0aW9uIGlhKGEpe1oudGVzdChhLnR5cGUpJiYoYS5kZWZhdWx0Q2hlY2tlZD1hLmNoZWNrZWQpfWZ1bmN0aW9uIGphKGEsYixjLGQsZSl7Zm9yKHZhciBmLGcsaCxpLGosayxtLG89YS5sZW5ndGgscD1jYShiKSxxPVtdLHI9MDtvPnI7cisrKWlmKGc9YVtyXSxnfHwwPT09ZylpZigib2JqZWN0Ij09PW4udHlwZShnKSluLm1lcmdlKHEsZy5ub2RlVHlwZT9bZ106Zyk7ZWxzZSBpZihnYS50ZXN0KGcpKXtpPWl8fHAuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KCJkaXYiKSksaj0oJC5leGVjKGcpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLG09ZGFbal18fGRhLl9kZWZhdWx0LGkuaW5uZXJIVE1MPW1bMV0rbi5odG1sUHJlZmlsdGVyKGcpK21bMl0sZj1tWzBdO3doaWxlKGYtLSlpPWkubGFzdENoaWxkO2lmKCFsLmxlYWRpbmdXaGl0ZXNwYWNlJiZhYS50ZXN0KGcpJiZxLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShhYS5leGVjKGcpWzBdKSksIWwudGJvZHkpe2c9InRhYmxlIiE9PWp8fGhhLnRlc3QoZyk/Ijx0YWJsZT4iIT09bVsxXXx8aGEudGVzdChnKT8wOmk6aS5maXJzdENoaWxkLGY9ZyYmZy5jaGlsZE5vZGVzLmxlbmd0aDt3aGlsZShmLS0pbi5ub2RlTmFtZShrPWcuY2hpbGROb2Rlc1tmXSwidGJvZHkiKSYmIWsuY2hpbGROb2Rlcy5sZW5ndGgmJmcucmVtb3ZlQ2hpbGQoayl9bi5tZXJnZShxLGkuY2hpbGROb2RlcyksaS50ZXh0Q29udGVudD0iIjt3aGlsZShpLmZpcnN0Q2hpbGQpaS5yZW1vdmVDaGlsZChpLmZpcnN0Q2hpbGQpO2k9cC5sYXN0Q2hpbGR9ZWxzZSBxLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShnKSk7aSYmcC5yZW1vdmVDaGlsZChpKSxsLmFwcGVuZENoZWNrZWR8fG4uZ3JlcChlYShxLCJpbnB1dCIpLGlhKSxyPTA7d2hpbGUoZz1xW3IrK10paWYoZCYmbi5pbkFycmF5KGcsZCk+LTEpZSYmZS5wdXNoKGcpO2Vsc2UgaWYoaD1uLmNvbnRhaW5zKGcub3duZXJEb2N1bWVudCxnKSxpPWVhKHAuYXBwZW5kQ2hpbGQoZyksInNjcmlwdCIpLGgmJmZhKGkpLGMpe2Y9MDt3aGlsZShnPWlbZisrXSlfLnRlc3QoZy50eXBlfHwiIikmJmMucHVzaChnKX1yZXR1cm4gaT1udWxsLHB9IWZ1bmN0aW9uKCl7dmFyIGIsYyxlPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zm9yKGIgaW57c3VibWl0OiEwLGNoYW5nZTohMCxmb2N1c2luOiEwfSljPSJvbiIrYiwobFtiXT1jIGluIGEpfHwoZS5zZXRBdHRyaWJ1dGUoYywidCIpLGxbYl09ZS5hdHRyaWJ1dGVzW2NdLmV4cGFuZG89PT0hMSk7ZT1udWxsfSgpO3ZhciBrYT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYSkkL2ksbGE9L15rZXkvLG1hPS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudXxkcmFnfGRyb3ApfGNsaWNrLyxuYT0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sb2E9L14oW14uXSopKD86XC4oLispfCkvO2Z1bmN0aW9uIHBhKCl7cmV0dXJuITB9ZnVuY3Rpb24gcWEoKXtyZXR1cm4hMX1mdW5jdGlvbiByYSgpe3RyeXtyZXR1cm4gZC5hY3RpdmVFbGVtZW50fWNhdGNoKGEpe319ZnVuY3Rpb24gc2EoYSxiLGMsZCxlLGYpe3ZhciBnLGg7aWYoIm9iamVjdCI9PXR5cGVvZiBiKXsic3RyaW5nIiE9dHlwZW9mIGMmJihkPWR8fGMsYz12b2lkIDApO2ZvcihoIGluIGIpc2EoYSxoLGMsZCxiW2hdLGYpO3JldHVybiBhfWlmKG51bGw9PWQmJm51bGw9PWU/KGU9YyxkPWM9dm9pZCAwKTpudWxsPT1lJiYoInN0cmluZyI9PXR5cGVvZiBjPyhlPWQsZD12b2lkIDApOihlPWQsZD1jLGM9dm9pZCAwKSksZT09PSExKWU9cWE7ZWxzZSBpZighZSlyZXR1cm4gYTtyZXR1cm4gMT09PWYmJihnPWUsZT1mdW5jdGlvbihhKXtyZXR1cm4gbigpLm9mZihhKSxnLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5ndWlkPWcuZ3VpZHx8KGcuZ3VpZD1uLmd1aWQrKykpLGEuZWFjaChmdW5jdGlvbigpe24uZXZlbnQuYWRkKHRoaXMsYixlLGQsYyl9KX1uLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZyxoLGksaixrLGwsbSxvLHAscSxyPW4uX2RhdGEoYSk7aWYocil7Yy5oYW5kbGVyJiYoaT1jLGM9aS5oYW5kbGVyLGU9aS5zZWxlY3RvciksYy5ndWlkfHwoYy5ndWlkPW4uZ3VpZCsrKSwoZz1yLmV2ZW50cyl8fChnPXIuZXZlbnRzPXt9KSwoaz1yLmhhbmRsZSl8fChrPXIuaGFuZGxlPWZ1bmN0aW9uKGEpe3JldHVybiJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8YSYmbi5ldmVudC50cmlnZ2VyZWQ9PT1hLnR5cGU/dm9pZCAwOm4uZXZlbnQuZGlzcGF0Y2guYXBwbHkoay5lbGVtLGFyZ3VtZW50cyl9LGsuZWxlbT1hKSxiPShifHwiIikubWF0Y2goRyl8fFsiIl0saD1iLmxlbmd0aDt3aGlsZShoLS0pZj1vYS5leGVjKGJbaF0pfHxbXSxvPXE9ZlsxXSxwPShmWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksbyYmKGo9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShlP2ouZGVsZWdhdGVUeXBlOmouYmluZFR5cGUpfHxvLGo9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxsPW4uZXh0ZW5kKHt0eXBlOm8sb3JpZ1R5cGU6cSxkYXRhOmQsaGFuZGxlcjpjLGd1aWQ6Yy5ndWlkLHNlbGVjdG9yOmUsbmVlZHNDb250ZXh0OmUmJm4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChlKSxuYW1lc3BhY2U6cC5qb2luKCIuIil9LGkpLChtPWdbb10pfHwobT1nW29dPVtdLG0uZGVsZWdhdGVDb3VudD0wLGouc2V0dXAmJmouc2V0dXAuY2FsbChhLGQscCxrKSE9PSExfHwoYS5hZGRFdmVudExpc3RlbmVyP2EuYWRkRXZlbnRMaXN0ZW5lcihvLGssITEpOmEuYXR0YWNoRXZlbnQmJmEuYXR0YWNoRXZlbnQoIm9uIitvLGspKSksai5hZGQmJihqLmFkZC5jYWxsKGEsbCksbC5oYW5kbGVyLmd1aWR8fChsLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP20uc3BsaWNlKG0uZGVsZWdhdGVDb3VudCsrLDAsbCk6bS5wdXNoKGwpLG4uZXZlbnQuZ2xvYmFsW29dPSEwKTthPW51bGx9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9bi5oYXNEYXRhKGEpJiZuLl9kYXRhKGEpO2lmKHImJihrPXIuZXZlbnRzKSl7Yj0oYnx8IiIpLm1hdGNoKEcpfHxbIiJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWlmKGg9b2EuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLG8pe2w9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShkP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxvLG09a1tvXXx8W10saD1oWzJdJiZuZXcgUmVnRXhwKCIoXnxcXC4pIitwLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpLGk9Zj1tLmxlbmd0aDt3aGlsZShmLS0pZz1tW2ZdLCFlJiZxIT09Zy5vcmlnVHlwZXx8YyYmYy5ndWlkIT09Zy5ndWlkfHxoJiYhaC50ZXN0KGcubmFtZXNwYWNlKXx8ZCYmZCE9PWcuc2VsZWN0b3ImJigiKioiIT09ZHx8IWcuc2VsZWN0b3IpfHwobS5zcGxpY2UoZiwxKSxnLnNlbGVjdG9yJiZtLmRlbGVnYXRlQ291bnQtLSxsLnJlbW92ZSYmbC5yZW1vdmUuY2FsbChhLGcpKTtpJiYhbS5sZW5ndGgmJihsLnRlYXJkb3duJiZsLnRlYXJkb3duLmNhbGwoYSxwLHIuaGFuZGxlKSE9PSExfHxuLnJlbW92ZUV2ZW50KGEsbyxyLmhhbmRsZSksZGVsZXRlIGtbb10pfWVsc2UgZm9yKG8gaW4gayluLmV2ZW50LnJlbW92ZShhLG8rYltqXSxjLGQsITApO24uaXNFbXB0eU9iamVjdChrKSYmKGRlbGV0ZSByLmhhbmRsZSxuLl9yZW1vdmVEYXRhKGEsImV2ZW50cyIpKX19LHRyaWdnZXI6ZnVuY3Rpb24oYixjLGUsZil7dmFyIGcsaCxpLGosbCxtLG8scD1bZXx8ZF0scT1rLmNhbGwoYiwidHlwZSIpP2IudHlwZTpiLHI9ay5jYWxsKGIsIm5hbWVzcGFjZSIpP2IubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYoaT1tPWU9ZXx8ZCwzIT09ZS5ub2RlVHlwZSYmOCE9PWUubm9kZVR5cGUmJiFuYS50ZXN0KHErbi5ldmVudC50cmlnZ2VyZWQpJiYocS5pbmRleE9mKCIuIik+LTEmJihyPXEuc3BsaXQoIi4iKSxxPXIuc2hpZnQoKSxyLnNvcnQoKSksaD1xLmluZGV4T2YoIjoiKTwwJiYib24iK3EsYj1iW24uZXhwYW5kb10/YjpuZXcgbi5FdmVudChxLCJvYmplY3QiPT10eXBlb2YgYiYmYiksYi5pc1RyaWdnZXI9Zj8yOjMsYi5uYW1lc3BhY2U9ci5qb2luKCIuIiksYi5ybmFtZXNwYWNlPWIubmFtZXNwYWNlP25ldyBSZWdFeHAoIihefFxcLikiK3Iuam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVsbCxiLnJlc3VsdD12b2lkIDAsYi50YXJnZXR8fChiLnRhcmdldD1lKSxjPW51bGw9PWM/W2JdOm4ubWFrZUFycmF5KGMsW2JdKSxsPW4uZXZlbnQuc3BlY2lhbFtxXXx8e30sZnx8IWwudHJpZ2dlcnx8bC50cmlnZ2VyLmFwcGx5KGUsYykhPT0hMSkpe2lmKCFmJiYhbC5ub0J1YmJsZSYmIW4uaXNXaW5kb3coZSkpe2ZvcihqPWwuZGVsZWdhdGVUeXBlfHxxLG5hLnRlc3QoaitxKXx8KGk9aS5wYXJlbnROb2RlKTtpO2k9aS5wYXJlbnROb2RlKXAucHVzaChpKSxtPWk7bT09PShlLm93bmVyRG9jdW1lbnR8fGQpJiZwLnB1c2gobS5kZWZhdWx0Vmlld3x8bS5wYXJlbnRXaW5kb3d8fGEpfW89MDt3aGlsZSgoaT1wW28rK10pJiYhYi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKWIudHlwZT1vPjE/ajpsLmJpbmRUeXBlfHxxLGc9KG4uX2RhdGEoaSwiZXZlbnRzIil8fHt9KVtiLnR5cGVdJiZuLl9kYXRhKGksImhhbmRsZSIpLGcmJmcuYXBwbHkoaSxjKSxnPWgmJmlbaF0sZyYmZy5hcHBseSYmTShpKSYmKGIucmVzdWx0PWcuYXBwbHkoaSxjKSxiLnJlc3VsdD09PSExJiZiLnByZXZlbnREZWZhdWx0KCkpO2lmKGIudHlwZT1xLCFmJiYhYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmKCFsLl9kZWZhdWx0fHxsLl9kZWZhdWx0LmFwcGx5KHAucG9wKCksYyk9PT0hMSkmJk0oZSkmJmgmJmVbcV0mJiFuLmlzV2luZG93KGUpKXttPWVbaF0sbSYmKGVbaF09bnVsbCksbi5ldmVudC50cmlnZ2VyZWQ9cTt0cnl7ZVtxXSgpfWNhdGNoKHMpe31uLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsbSYmKGVbaF09bSl9cmV0dXJuIGIucmVzdWx0fX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YT1uLmV2ZW50LmZpeChhKTt2YXIgYixjLGQsZixnLGg9W10saT1lLmNhbGwoYXJndW1lbnRzKSxqPShuLl9kYXRhKHRoaXMsImV2ZW50cyIpfHx7fSlbYS50eXBlXXx8W10saz1uLmV2ZW50LnNwZWNpYWxbYS50eXBlXXx8e307aWYoaVswXT1hLGEuZGVsZWdhdGVUYXJnZXQ9dGhpcywhay5wcmVEaXNwYXRjaHx8ay5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsYSkhPT0hMSl7aD1uLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxhLGopLGI9MDt3aGlsZSgoZj1oW2IrK10pJiYhYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXthLmN1cnJlbnRUYXJnZXQ9Zi5lbGVtLGM9MDt3aGlsZSgoZz1mLmhhbmRsZXJzW2MrK10pJiYhYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKWEucm5hbWVzcGFjZSYmIWEucm5hbWVzcGFjZS50ZXN0KGcubmFtZXNwYWNlKXx8KGEuaGFuZGxlT2JqPWcsYS5kYXRhPWcuZGF0YSxkPSgobi5ldmVudC5zcGVjaWFsW2cub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxnLmhhbmRsZXIpLmFwcGx5KGYuZWxlbSxpKSx2b2lkIDAhPT1kJiYoYS5yZXN1bHQ9ZCk9PT0hMSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGsucG9zdERpc3BhdGNoJiZrLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsYSksYS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9W10saD1iLmRlbGVnYXRlQ291bnQsaT1hLnRhcmdldDtpZihoJiZpLm5vZGVUeXBlJiYoImNsaWNrIiE9PWEudHlwZXx8aXNOYU4oYS5idXR0b24pfHxhLmJ1dHRvbjwxKSlmb3IoO2khPXRoaXM7aT1pLnBhcmVudE5vZGV8fHRoaXMpaWYoMT09PWkubm9kZVR5cGUmJihpLmRpc2FibGVkIT09ITB8fCJjbGljayIhPT1hLnR5cGUpKXtmb3IoZD1bXSxjPTA7aD5jO2MrKylmPWJbY10sZT1mLnNlbGVjdG9yKyIgIix2b2lkIDA9PT1kW2VdJiYoZFtlXT1mLm5lZWRzQ29udGV4dD9uKGUsdGhpcykuaW5kZXgoaSk+LTE6bi5maW5kKGUsdGhpcyxudWxsLFtpXSkubGVuZ3RoKSxkW2VdJiZkLnB1c2goZik7ZC5sZW5ndGgmJmcucHVzaCh7ZWxlbTppLGhhbmRsZXJzOmR9KX1yZXR1cm4gaDxiLmxlbmd0aCYmZy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6Yi5zbGljZShoKX0pLGd9LGZpeDpmdW5jdGlvbihhKXtpZihhW24uZXhwYW5kb10pcmV0dXJuIGE7dmFyIGIsYyxlLGY9YS50eXBlLGc9YSxoPXRoaXMuZml4SG9va3NbZl07aHx8KHRoaXMuZml4SG9va3NbZl09aD1tYS50ZXN0KGYpP3RoaXMubW91c2VIb29rczpsYS50ZXN0KGYpP3RoaXMua2V5SG9va3M6e30pLGU9aC5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChoLnByb3BzKTp0aGlzLnByb3BzLGE9bmV3IG4uRXZlbnQoZyksYj1lLmxlbmd0aDt3aGlsZShiLS0pYz1lW2JdLGFbY109Z1tjXTtyZXR1cm4gYS50YXJnZXR8fChhLnRhcmdldD1nLnNyY0VsZW1lbnR8fGQpLDM9PT1hLnRhcmdldC5ub2RlVHlwZSYmKGEudGFyZ2V0PWEudGFyZ2V0LnBhcmVudE5vZGUpLGEubWV0YUtleT0hIWEubWV0YUtleSxoLmZpbHRlcj9oLmZpbHRlcihhLGcpOmF9LHByb3BzOiJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBkZXRhaWwgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoIi5zcGxpdCgiICIpLGZpeEhvb2tzOnt9LGtleUhvb2tzOntwcm9wczoiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZSIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YS53aGljaCYmKGEud2hpY2g9bnVsbCE9Yi5jaGFyQ29kZT9iLmNoYXJDb2RlOmIua2V5Q29kZSksYX19LG1vdXNlSG9va3M6e3Byb3BzOiJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgZnJvbUVsZW1lbnQgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnQiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGc9Yi5idXR0b24saD1iLmZyb21FbGVtZW50O3JldHVybiBudWxsPT1hLnBhZ2VYJiZudWxsIT1iLmNsaWVudFgmJihlPWEudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fGQsZj1lLmRvY3VtZW50RWxlbWVudCxjPWUuYm9keSxhLnBhZ2VYPWIuY2xpZW50WCsoZiYmZi5zY3JvbGxMZWZ0fHxjJiZjLnNjcm9sbExlZnR8fDApLShmJiZmLmNsaWVudExlZnR8fGMmJmMuY2xpZW50TGVmdHx8MCksYS5wYWdlWT1iLmNsaWVudFkrKGYmJmYuc2Nyb2xsVG9wfHxjJiZjLnNjcm9sbFRvcHx8MCktKGYmJmYuY2xpZW50VG9wfHxjJiZjLmNsaWVudFRvcHx8MCkpLCFhLnJlbGF0ZWRUYXJnZXQmJmgmJihhLnJlbGF0ZWRUYXJnZXQ9aD09PWEudGFyZ2V0P2IudG9FbGVtZW50OmgpLGEud2hpY2h8fHZvaWQgMD09PWd8fChhLndoaWNoPTEmZz8xOjImZz8zOjQmZz8yOjApLGF9fSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZih0aGlzIT09cmEoKSYmdGhpcy5mb2N1cyl0cnl7cmV0dXJuIHRoaXMuZm9jdXMoKSwhMX1jYXRjaChhKXt9fSxkZWxlZ2F0ZVR5cGU6ImZvY3VzaW4ifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM9PT1yYSgpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiBuLm5vZGVOYW1lKHRoaXMsImlucHV0IikmJiJjaGVja2JveCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2s/KHRoaXMuY2xpY2soKSwhMSk6dm9pZCAwfSxfZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4gbi5ub2RlTmFtZShhLnRhcmdldCwiYSIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7dm9pZCAwIT09YS5yZXN1bHQmJmEub3JpZ2luYWxFdmVudCYmKGEub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1hLnJlc3VsdCl9fX0sc2ltdWxhdGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW4uZXh0ZW5kKG5ldyBuLkV2ZW50LGMse3R5cGU6YSxpc1NpbXVsYXRlZDohMH0pO24uZXZlbnQudHJpZ2dlcihkLG51bGwsYiksZC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmYy5wcmV2ZW50RGVmYXVsdCgpfX0sbi5yZW1vdmVFdmVudD1kLnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYyl9OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0ib24iK2I7YS5kZXRhY2hFdmVudCYmKCJ1bmRlZmluZWQiPT10eXBlb2YgYVtkXSYmKGFbZF09bnVsbCksYS5kZXRhY2hFdmVudChkLGMpKX0sbi5FdmVudD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzIGluc3RhbmNlb2Ygbi5FdmVudD8oYSYmYS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9YSx0aGlzLnR5cGU9YS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWEuZGVmYXVsdFByZXZlbnRlZHx8dm9pZCAwPT09YS5kZWZhdWx0UHJldmVudGVkJiZhLnJldHVyblZhbHVlPT09ITE/cGE6cWEpOnRoaXMudHlwZT1hLGImJm4uZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fG4ubm93KCksdm9pZCh0aGlzW24uZXhwYW5kb109ITApKTpuZXcgbi5FdmVudChhLGIpfSxuLkV2ZW50LnByb3RvdHlwZT17Y29uc3RydWN0b3I6bi5FdmVudCxpc0RlZmF1bHRQcmV2ZW50ZWQ6cWEsaXNQcm9wYWdhdGlvblN0b3BwZWQ6cWEsaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6cWEscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9cGEsYSYmKGEucHJldmVudERlZmF1bHQ/YS5wcmV2ZW50RGVmYXVsdCgpOmEucmV0dXJuVmFsdWU9ITEpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1wYSxhJiYhdGhpcy5pc1NpbXVsYXRlZCYmKGEuc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpLGEuY2FuY2VsQnViYmxlPSEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9cGEsYSYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24mJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LG4uZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oYSxiKXtuLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybiBlJiYoZT09PWR8fG4uY29udGFpbnMoZCxlKSl8fChhLnR5cGU9Zi5vcmlnVHlwZSxjPWYuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYS50eXBlPWIpLGN9fX0pLGwuc3VibWl0fHwobi5ldmVudC5zcGVjaWFsLnN1Ym1pdD17c2V0dXA6ZnVuY3Rpb24oKXtyZXR1cm4gbi5ub2RlTmFtZSh0aGlzLCJmb3JtIik/ITE6dm9pZCBuLmV2ZW50LmFkZCh0aGlzLCJjbGljay5fc3VibWl0IGtleXByZXNzLl9zdWJtaXQiLGZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0LGM9bi5ub2RlTmFtZShiLCJpbnB1dCIpfHxuLm5vZGVOYW1lKGIsImJ1dHRvbiIpP24ucHJvcChiLCJmb3JtIik6dm9pZCAwO2MmJiFuLl9kYXRhKGMsInN1Ym1pdCIpJiYobi5ldmVudC5hZGQoYywic3VibWl0Ll9zdWJtaXQiLGZ1bmN0aW9uKGEpe2EuX3N1Ym1pdEJ1YmJsZT0hMH0pLG4uX2RhdGEoYywic3VibWl0IiwhMCkpfSl9LHBvc3REaXNwYXRjaDpmdW5jdGlvbihhKXthLl9zdWJtaXRCdWJibGUmJihkZWxldGUgYS5fc3VibWl0QnViYmxlLHRoaXMucGFyZW50Tm9kZSYmIWEuaXNUcmlnZ2VyJiZuLmV2ZW50LnNpbXVsYXRlKCJzdWJtaXQiLHRoaXMucGFyZW50Tm9kZSxhKSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7cmV0dXJuIG4ubm9kZU5hbWUodGhpcywiZm9ybSIpPyExOnZvaWQgbi5ldmVudC5yZW1vdmUodGhpcywiLl9zdWJtaXQiKX19KSxsLmNoYW5nZXx8KG4uZXZlbnQuc3BlY2lhbC5jaGFuZ2U9e3NldHVwOmZ1bmN0aW9uKCl7cmV0dXJuIGthLnRlc3QodGhpcy5ub2RlTmFtZSk/KCJjaGVja2JveCIhPT10aGlzLnR5cGUmJiJyYWRpbyIhPT10aGlzLnR5cGV8fChuLmV2ZW50LmFkZCh0aGlzLCJwcm9wZXJ0eWNoYW5nZS5fY2hhbmdlIixmdW5jdGlvbihhKXsiY2hlY2tlZCI9PT1hLm9yaWdpbmFsRXZlbnQucHJvcGVydHlOYW1lJiYodGhpcy5fanVzdENoYW5nZWQ9ITApfSksbi5ldmVudC5hZGQodGhpcywiY2xpY2suX2NoYW5nZSIsZnVuY3Rpb24oYSl7dGhpcy5fanVzdENoYW5nZWQmJiFhLmlzVHJpZ2dlciYmKHRoaXMuX2p1c3RDaGFuZ2VkPSExKSxuLmV2ZW50LnNpbXVsYXRlKCJjaGFuZ2UiLHRoaXMsYSl9KSksITEpOnZvaWQgbi5ldmVudC5hZGQodGhpcywiYmVmb3JlYWN0aXZhdGUuX2NoYW5nZSIsZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQ7a2EudGVzdChiLm5vZGVOYW1lKSYmIW4uX2RhdGEoYiwiY2hhbmdlIikmJihuLmV2ZW50LmFkZChiLCJjaGFuZ2UuX2NoYW5nZSIsZnVuY3Rpb24oYSl7IXRoaXMucGFyZW50Tm9kZXx8YS5pc1NpbXVsYXRlZHx8YS5pc1RyaWdnZXJ8fG4uZXZlbnQuc2ltdWxhdGUoImNoYW5nZSIsdGhpcy5wYXJlbnROb2RlLGEpfSksbi5fZGF0YShiLCJjaGFuZ2UiLCEwKSl9KX0saGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0O3JldHVybiB0aGlzIT09Ynx8YS5pc1NpbXVsYXRlZHx8YS5pc1RyaWdnZXJ8fCJyYWRpbyIhPT1iLnR5cGUmJiJjaGVja2JveCIhPT1iLnR5cGU/YS5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dm9pZCAwfSx0ZWFyZG93bjpmdW5jdGlvbigpe3JldHVybiBuLmV2ZW50LnJlbW92ZSh0aGlzLCIuX2NoYW5nZSIpLCFrYS50ZXN0KHRoaXMubm9kZU5hbWUpfX0pLGwuZm9jdXNpbnx8bi5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe24uZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxuLmV2ZW50LmZpeChhKSl9O24uZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1uLl9kYXRhKGQsYik7ZXx8ZC5hZGRFdmVudExpc3RlbmVyKGEsYywhMCksbi5fZGF0YShkLGIsKGV8fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPW4uX2RhdGEoZCxiKS0xO2U/bi5fZGF0YShkLGIsZSk6KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITApLG4uX3JlbW92ZURhdGEoZCxiKSl9fX0pLG4uZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gc2EodGhpcyxhLGIsYyxkKX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBzYSh0aGlzLGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixuKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlKyIuIitkLm5hbWVzcGFjZTpkLm9yaWdUeXBlLGQuc2VsZWN0b3IsZC5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgYSl7Zm9yKGUgaW4gYSl0aGlzLm9mZihlLGIsYVtlXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGIhPT0hMSYmImZ1bmN0aW9uIiE9dHlwZW9mIGJ8fChjPWIsYj12b2lkIDApLGM9PT0hMSYmKGM9cWEpLHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9LHRyaWdnZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC50cmlnZ2VyKGEsYix0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXNbMF07cmV0dXJuIGM/bi5ldmVudC50cmlnZ2VyKGEsYixjLCEwKTp2b2lkIDB9fSk7dmFyIHRhPS8galF1ZXJ5XGQrPSIoPzpudWxsfFxkKykiL2csdWE9bmV3IFJlZ0V4cCgiPCg/OiIrYmErIilbXFxzLz5dIiwiaSIpLHZhPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzotXSspW14+XSopXC8+L2dpLHdhPS88c2NyaXB0fDxzdHlsZXw8bGluay9pLHhhPS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLHlhPS9edHJ1ZVwvKC4qKS8semE9L15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nLEFhPWNhKGQpLEJhPUFhLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudCgiZGl2IikpO2Z1bmN0aW9uIENhKGEsYil7cmV0dXJuIG4ubm9kZU5hbWUoYSwidGFibGUiKSYmbi5ub2RlTmFtZSgxMSE9PWIubm9kZVR5cGU/YjpiLmZpcnN0Q2hpbGQsInRyIik/YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKVswXXx8YS5hcHBlbmRDaGlsZChhLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGJvZHkiKSk6YX1mdW5jdGlvbiBEYShhKXtyZXR1cm4gYS50eXBlPShudWxsIT09bi5maW5kLmF0dHIoYSwidHlwZSIpKSsiLyIrYS50eXBlLGF9ZnVuY3Rpb24gRWEoYSl7dmFyIGI9eWEuZXhlYyhhLnR5cGUpO3JldHVybiBiP2EudHlwZT1iWzFdOmEucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksYX1mdW5jdGlvbiBGYShhLGIpe2lmKDE9PT1iLm5vZGVUeXBlJiZuLmhhc0RhdGEoYSkpe3ZhciBjLGQsZSxmPW4uX2RhdGEoYSksZz1uLl9kYXRhKGIsZiksaD1mLmV2ZW50cztpZihoKXtkZWxldGUgZy5oYW5kbGUsZy5ldmVudHM9e307Zm9yKGMgaW4gaClmb3IoZD0wLGU9aFtjXS5sZW5ndGg7ZT5kO2QrKyluLmV2ZW50LmFkZChiLGMsaFtjXVtkXSl9Zy5kYXRhJiYoZy5kYXRhPW4uZXh0ZW5kKHt9LGcuZGF0YSkpfX1mdW5jdGlvbiBHYShhLGIpe3ZhciBjLGQsZTtpZigxPT09Yi5ub2RlVHlwZSl7aWYoYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksIWwubm9DbG9uZUV2ZW50JiZiW24uZXhwYW5kb10pe2U9bi5fZGF0YShiKTtmb3IoZCBpbiBlLmV2ZW50cyluLnJlbW92ZUV2ZW50KGIsZCxlLmhhbmRsZSk7Yi5yZW1vdmVBdHRyaWJ1dGUobi5leHBhbmRvKX0ic2NyaXB0Ij09PWMmJmIudGV4dCE9PWEudGV4dD8oRGEoYikudGV4dD1hLnRleHQsRWEoYikpOiJvYmplY3QiPT09Yz8oYi5wYXJlbnROb2RlJiYoYi5vdXRlckhUTUw9YS5vdXRlckhUTUwpLGwuaHRtbDVDbG9uZSYmYS5pbm5lckhUTUwmJiFuLnRyaW0oYi5pbm5lckhUTUwpJiYoYi5pbm5lckhUTUw9YS5pbm5lckhUTUwpKToiaW5wdXQiPT09YyYmWi50ZXN0KGEudHlwZSk/KGIuZGVmYXVsdENoZWNrZWQ9Yi5jaGVja2VkPWEuY2hlY2tlZCxiLnZhbHVlIT09YS52YWx1ZSYmKGIudmFsdWU9YS52YWx1ZSkpOiJvcHRpb24iPT09Yz9iLmRlZmF1bHRTZWxlY3RlZD1iLnNlbGVjdGVkPWEuZGVmYXVsdFNlbGVjdGVkOiJpbnB1dCIhPT1jJiYidGV4dGFyZWEiIT09Y3x8KGIuZGVmYXVsdFZhbHVlPWEuZGVmYXVsdFZhbHVlKX19ZnVuY3Rpb24gSGEoYSxiLGMsZCl7Yj1mLmFwcGx5KFtdLGIpO3ZhciBlLGcsaCxpLGosayxtPTAsbz1hLmxlbmd0aCxwPW8tMSxxPWJbMF0scj1uLmlzRnVuY3Rpb24ocSk7aWYocnx8bz4xJiYic3RyaW5nIj09dHlwZW9mIHEmJiFsLmNoZWNrQ2xvbmUmJnhhLnRlc3QocSkpcmV0dXJuIGEuZWFjaChmdW5jdGlvbihlKXt2YXIgZj1hLmVxKGUpO3ImJihiWzBdPXEuY2FsbCh0aGlzLGUsZi5odG1sKCkpKSxIYShmLGIsYyxkKX0pO2lmKG8mJihrPWphKGIsYVswXS5vd25lckRvY3VtZW50LCExLGEsZCksZT1rLmZpcnN0Q2hpbGQsMT09PWsuY2hpbGROb2Rlcy5sZW5ndGgmJihrPWUpLGV8fGQpKXtmb3IoaT1uLm1hcChlYShrLCJzY3JpcHQiKSxEYSksaD1pLmxlbmd0aDtvPm07bSsrKWc9ayxtIT09cCYmKGc9bi5jbG9uZShnLCEwLCEwKSxoJiZuLm1lcmdlKGksZWEoZywic2NyaXB0IikpKSxjLmNhbGwoYVttXSxnLG0pO2lmKGgpZm9yKGo9aVtpLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LG4ubWFwKGksRWEpLG09MDtoPm07bSsrKWc9aVttXSxfLnRlc3QoZy50eXBlfHwiIikmJiFuLl9kYXRhKGcsImdsb2JhbEV2YWwiKSYmbi5jb250YWlucyhqLGcpJiYoZy5zcmM/bi5fZXZhbFVybCYmbi5fZXZhbFVybChnLnNyYyk6bi5nbG9iYWxFdmFsKChnLnRleHR8fGcudGV4dENvbnRlbnR8fGcuaW5uZXJIVE1MfHwiIikucmVwbGFjZSh6YSwiIikpKTtrPWU9bnVsbH1yZXR1cm4gYX1mdW5jdGlvbiBJYShhLGIsYyl7Zm9yKHZhciBkLGU9Yj9uLmZpbHRlcihiLGEpOmEsZj0wO251bGwhPShkPWVbZl0pO2YrKyljfHwxIT09ZC5ub2RlVHlwZXx8bi5jbGVhbkRhdGEoZWEoZCkpLGQucGFyZW50Tm9kZSYmKGMmJm4uY29udGFpbnMoZC5vd25lckRvY3VtZW50LGQpJiZmYShlYShkLCJzY3JpcHQiKSksZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGQpKTtyZXR1cm4gYX1uLmV4dGVuZCh7aHRtbFByZWZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHZhLCI8JDE+PC8kMj4iKX0sY2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaT1uLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKTtpZihsLmh0bWw1Q2xvbmV8fG4uaXNYTUxEb2MoYSl8fCF1YS50ZXN0KCI8IithLm5vZGVOYW1lKyI+Iik/Zj1hLmNsb25lTm9kZSghMCk6KEJhLmlubmVySFRNTD1hLm91dGVySFRNTCxCYS5yZW1vdmVDaGlsZChmPUJhLmZpcnN0Q2hpbGQpKSwhKGwubm9DbG9uZUV2ZW50JiZsLm5vQ2xvbmVDaGVja2VkfHwxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxuLmlzWE1MRG9jKGEpKSlmb3IoZD1lYShmKSxoPWVhKGEpLGc9MDtudWxsIT0oZT1oW2ddKTsrK2cpZFtnXSYmR2EoZSxkW2ddKTtpZihiKWlmKGMpZm9yKGg9aHx8ZWEoYSksZD1kfHxlYShmKSxnPTA7bnVsbCE9KGU9aFtnXSk7ZysrKUZhKGUsZFtnXSk7ZWxzZSBGYShhLGYpO3JldHVybiBkPWVhKGYsInNjcmlwdCIpLGQubGVuZ3RoPjAmJmZhKGQsIWkmJmVhKGEsInNjcmlwdCIpKSxkPWg9ZT1udWxsLGZ9LGNsZWFuRGF0YTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgZCxlLGYsZyxoPTAsaT1uLmV4cGFuZG8saj1uLmNhY2hlLGs9bC5hdHRyaWJ1dGVzLG09bi5ldmVudC5zcGVjaWFsO251bGwhPShkPWFbaF0pO2grKylpZigoYnx8TShkKSkmJihmPWRbaV0sZz1mJiZqW2ZdKSl7aWYoZy5ldmVudHMpZm9yKGUgaW4gZy5ldmVudHMpbVtlXT9uLmV2ZW50LnJlbW92ZShkLGUpOm4ucmVtb3ZlRXZlbnQoZCxlLGcuaGFuZGxlKTtqW2ZdJiYoZGVsZXRlIGpbZl0sa3x8InVuZGVmaW5lZCI9PXR5cGVvZiBkLnJlbW92ZUF0dHJpYnV0ZT9kW2ldPXZvaWQgMDpkLnJlbW92ZUF0dHJpYnV0ZShpKSxjLnB1c2goZikpfX19KSxuLmZuLmV4dGVuZCh7ZG9tTWFuaXA6SGEsZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiBJYSh0aGlzLGEsITApfSxyZW1vdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIElhKHRoaXMsYSl9LHRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9uLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmFwcGVuZCgodGhpc1swXSYmdGhpc1swXS5vd25lckRvY3VtZW50fHxkKS5jcmVhdGVUZXh0Tm9kZShhKSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIEhhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1DYSh0aGlzLGEpO2IuYXBwZW5kQ2hpbGQoYSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPUNhKHRoaXMsYSk7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcy5uZXh0U2libGluZyl9KX0sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO251bGwhPShhPXRoaXNbYl0pO2IrKyl7MT09PWEubm9kZVR5cGUmJm4uY2xlYW5EYXRhKGVhKGEsITEpKTt3aGlsZShhLmZpcnN0Q2hpbGQpYS5yZW1vdmVDaGlsZChhLmZpcnN0Q2hpbGQpO2Eub3B0aW9ucyYmbi5ub2RlTmFtZShhLCJzZWxlY3QiKSYmKGEub3B0aW9ucy5sZW5ndGg9MCl9cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bnVsbD09YT8hMTphLGI9bnVsbD09Yj9hOmIsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gbi5jbG9uZSh0aGlzLGEsYil9KX0saHRtbDpmdW5jdGlvbihhKXtyZXR1cm4gWSh0aGlzLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXNbMF18fHt9LGM9MCxkPXRoaXMubGVuZ3RoO2lmKHZvaWQgMD09PWEpcmV0dXJuIDE9PT1iLm5vZGVUeXBlP2IuaW5uZXJIVE1MLnJlcGxhY2UodGEsIiIpOnZvaWQgMDtpZigic3RyaW5nIj09dHlwZW9mIGEmJiF3YS50ZXN0KGEpJiYobC5odG1sU2VyaWFsaXplfHwhdWEudGVzdChhKSkmJihsLmxlYWRpbmdXaGl0ZXNwYWNlfHwhYWEudGVzdChhKSkmJiFkYVsoJC5leGVjKGEpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7YT1uLmh0bWxQcmVmaWx0ZXIoYSk7dHJ5e2Zvcig7ZD5jO2MrKyliPXRoaXNbY118fHt9LDE9PT1iLm5vZGVUeXBlJiYobi5jbGVhbkRhdGEoZWEoYiwhMSkpLGIuaW5uZXJIVE1MPWEpO2I9MH1jYXRjaChlKXt9fWImJnRoaXMuZW1wdHkoKS5hcHBlbmQoYSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgYT1bXTtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5wYXJlbnROb2RlO24uaW5BcnJheSh0aGlzLGEpPDAmJihuLmNsZWFuRGF0YShlYSh0aGlzKSksYyYmYy5yZXBsYWNlQ2hpbGQoYix0aGlzKSl9LGEpfX0pLG4uZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhKXtmb3IodmFyIGMsZD0wLGU9W10sZj1uKGEpLGg9Zi5sZW5ndGgtMTtoPj1kO2QrKyljPWQ9PT1oP3RoaXM6dGhpcy5jbG9uZSghMCksbihmW2RdKVtiXShjKSxnLmFwcGx5KGUsYy5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGUpfX0pO3ZhciBKYSxLYT17SFRNTDoiYmxvY2siLEJPRFk6ImJsb2NrIn07ZnVuY3Rpb24gTGEoYSxiKXt2YXIgYz1uKGIuY3JlYXRlRWxlbWVudChhKSkuYXBwZW5kVG8oYi5ib2R5KSxkPW4uY3NzKGNbMF0sImRpc3BsYXkiKTtyZXR1cm4gYy5kZXRhY2goKSxkfWZ1bmN0aW9uIE1hKGEpe3ZhciBiPWQsYz1LYVthXTtyZXR1cm4gY3x8KGM9TGEoYSxiKSwibm9uZSIhPT1jJiZjfHwoSmE9KEphfHxuKCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+IikpLmFwcGVuZFRvKGIuZG9jdW1lbnRFbGVtZW50KSxiPShKYVswXS5jb250ZW50V2luZG93fHxKYVswXS5jb250ZW50RG9jdW1lbnQpLmRvY3VtZW50LGIud3JpdGUoKSxiLmNsb3NlKCksYz1MYShhLGIpLEphLmRldGFjaCgpKSxLYVthXT1jKSxjfXZhciBOYT0vXm1hcmdpbi8sT2E9bmV3IFJlZ0V4cCgiXigiK1QrIikoPyFweClbYS16JV0rJCIsImkiKSxQYT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX0sUWE9ZC5kb2N1bWVudEVsZW1lbnQ7IWZ1bmN0aW9uKCl7dmFyIGIsYyxlLGYsZyxoLGk9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxqPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7aWYoai5zdHlsZSl7ai5zdHlsZS5jc3NUZXh0PSJmbG9hdDpsZWZ0O29wYWNpdHk6LjUiLGwub3BhY2l0eT0iMC41Ij09PWouc3R5bGUub3BhY2l0eSxsLmNzc0Zsb2F0PSEhai5zdHlsZS5jc3NGbG9hdCxqLnN0eWxlLmJhY2tncm91bmRDbGlwPSJjb250ZW50LWJveCIsai5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPSIiLGwuY2xlYXJDbG9uZVN0eWxlPSJjb250ZW50LWJveCI9PT1qLnN0eWxlLmJhY2tncm91bmRDbGlwLGk9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxpLnN0eWxlLmNzc1RleHQ9ImJvcmRlcjowO3dpZHRoOjhweDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7cGFkZGluZzowO21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlIixqLmlubmVySFRNTD0iIixpLmFwcGVuZENoaWxkKGopLGwuYm94U2l6aW5nPSIiPT09ai5zdHlsZS5ib3hTaXppbmd8fCIiPT09ai5zdHlsZS5Nb3pCb3hTaXppbmd8fCIiPT09ai5zdHlsZS5XZWJraXRCb3hTaXppbmcsbi5leHRlbmQobCx7cmVsaWFibGVIaWRkZW5PZmZzZXRzOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWImJmsoKSxmfSxib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksZX0scGl4ZWxNYXJnaW5SaWdodDpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksY30scGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksYn0scmVsaWFibGVNYXJnaW5SaWdodDpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksZ30scmVsaWFibGVNYXJnaW5MZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWImJmsoKSxofX0pO2Z1bmN0aW9uIGsoKXt2YXIgayxsLG09ZC5kb2N1bWVudEVsZW1lbnQ7bS5hcHBlbmRDaGlsZChpKSxqLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO21hcmdpbjphdXRvO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7dG9wOjElO3dpZHRoOjUwJSIsYj1lPWg9ITEsYz1nPSEwLGEuZ2V0Q29tcHV0ZWRTdHlsZSYmKGw9YS5nZXRDb21wdXRlZFN0eWxlKGopLGI9IjElIiE9PShsfHx7fSkudG9wLGg9IjJweCI9PT0obHx8e30pLm1hcmdpbkxlZnQsZT0iNHB4Ij09PShsfHx7d2lkdGg6IjRweCJ9KS53aWR0aCxqLnN0eWxlLm1hcmdpblJpZ2h0PSI1MCUiLGM9IjRweCI9PT0obHx8e21hcmdpblJpZ2h0OiI0cHgifSkubWFyZ2luUmlnaHQsaz1qLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudCgiZGl2IikpLGsuc3R5bGUuY3NzVGV4dD1qLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MCIsay5zdHlsZS5tYXJnaW5SaWdodD1rLnN0eWxlLndpZHRoPSIwIixqLnN0eWxlLndpZHRoPSIxcHgiLGc9IXBhcnNlRmxvYXQoKGEuZ2V0Q29tcHV0ZWRTdHlsZShrKXx8e30pLm1hcmdpblJpZ2h0KSxqLnJlbW92ZUNoaWxkKGspKSxqLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGY9MD09PWouZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgsZiYmKGouc3R5bGUuZGlzcGxheT0iIixqLmlubmVySFRNTD0iPHRhYmxlPjx0cj48dGQ+PC90ZD48dGQ+dDwvdGQ+PC90cj48L3RhYmxlPiIsai5jaGlsZE5vZGVzWzBdLnN0eWxlLmJvcmRlckNvbGxhcHNlPSJzZXBhcmF0ZSIsaz1qLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZCIpLGtbMF0uc3R5bGUuY3NzVGV4dD0ibWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowO2Rpc3BsYXk6bm9uZSIsZj0wPT09a1swXS5vZmZzZXRIZWlnaHQsZiYmKGtbMF0uc3R5bGUuZGlzcGxheT0iIixrWzFdLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGY9MD09PWtbMF0ub2Zmc2V0SGVpZ2h0KSksbS5yZW1vdmVDaGlsZChpKX19fSgpO3ZhciBSYSxTYSxUYT0vXih0b3B8cmlnaHR8Ym90dG9tfGxlZnQpJC87YS5nZXRDb21wdXRlZFN0eWxlPyhSYT1mdW5jdGlvbihiKXt2YXIgYz1iLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7cmV0dXJuIGMmJmMub3BlbmVyfHwoYz1hKSxjLmdldENvbXB1dGVkU3R5bGUoYil9LFNhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8UmEoYSksZz1jP2MuZ2V0UHJvcGVydHlWYWx1ZShiKXx8Y1tiXTp2b2lkIDAsIiIhPT1nJiZ2b2lkIDAhPT1nfHxuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKXx8KGc9bi5zdHlsZShhLGIpKSxjJiYhbC5waXhlbE1hcmdpblJpZ2h0KCkmJk9hLnRlc3QoZykmJk5hLnRlc3QoYikmJihkPWgud2lkdGgsZT1oLm1pbldpZHRoLGY9aC5tYXhXaWR0aCxoLm1pbldpZHRoPWgubWF4V2lkdGg9aC53aWR0aD1nLGc9Yy53aWR0aCxoLndpZHRoPWQsaC5taW5XaWR0aD1lLGgubWF4V2lkdGg9Ziksdm9pZCAwPT09Zz9nOmcrIiJ9KTpRYS5jdXJyZW50U3R5bGUmJihSYT1mdW5jdGlvbihhKXtyZXR1cm4gYS5jdXJyZW50U3R5bGV9LFNhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8UmEoYSksZz1jP2NbYl06dm9pZCAwLG51bGw9PWcmJmgmJmhbYl0mJihnPWhbYl0pLE9hLnRlc3QoZykmJiFUYS50ZXN0KGIpJiYoZD1oLmxlZnQsZT1hLnJ1bnRpbWVTdHlsZSxmPWUmJmUubGVmdCxmJiYoZS5sZWZ0PWEuY3VycmVudFN0eWxlLmxlZnQpLGgubGVmdD0iZm9udFNpemUiPT09Yj8iMWVtIjpnLGc9aC5waXhlbExlZnQrInB4IixoLmxlZnQ9ZCxmJiYoZS5sZWZ0PWYpKSx2b2lkIDA9PT1nP2c6ZysiInx8ImF1dG8ifSk7ZnVuY3Rpb24gVWEoYSxiKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEoKT92b2lkIGRlbGV0ZSB0aGlzLmdldDoodGhpcy5nZXQ9YikuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19dmFyIFZhPS9hbHBoYVwoW14pXSpcKS9pLFdhPS9vcGFjaXR5XHMqPVxzKihbXildKikvaSxYYT0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sWWE9bmV3IFJlZ0V4cCgiXigiK1QrIikoLiopJCIsImkiKSxaYT17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sJGE9e2xldHRlclNwYWNpbmc6IjAiLGZvbnRXZWlnaHQ6IjQwMCJ9LF9hPVsiV2Via2l0IiwiTyIsIk1veiIsIm1zIl0sYWI9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZTtmdW5jdGlvbiBiYihhKXtpZihhIGluIGFiKXJldHVybiBhO3ZhciBiPWEuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKSxjPV9hLmxlbmd0aDt3aGlsZShjLS0paWYoYT1fYVtjXStiLGEgaW4gYWIpcmV0dXJuIGF9ZnVuY3Rpb24gY2IoYSxiKXtmb3IodmFyIGMsZCxlLGY9W10sZz0wLGg9YS5sZW5ndGg7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGZbZ109bi5fZGF0YShkLCJvbGRkaXNwbGF5IiksYz1kLnN0eWxlLmRpc3BsYXksYj8oZltnXXx8Im5vbmUiIT09Y3x8KGQuc3R5bGUuZGlzcGxheT0iIiksIiI9PT1kLnN0eWxlLmRpc3BsYXkmJlcoZCkmJihmW2ddPW4uX2RhdGEoZCwib2xkZGlzcGxheSIsTWEoZC5ub2RlTmFtZSkpKSk6KGU9VyhkKSwoYyYmIm5vbmUiIT09Y3x8IWUpJiZuLl9kYXRhKGQsIm9sZGRpc3BsYXkiLGU/YzpuLmNzcyhkLCJkaXNwbGF5IikpKSk7Zm9yKGc9MDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoYiYmIm5vbmUiIT09ZC5zdHlsZS5kaXNwbGF5JiYiIiE9PWQuc3R5bGUuZGlzcGxheXx8KGQuc3R5bGUuZGlzcGxheT1iP2ZbZ118fCIiOiJub25lIikpO3JldHVybiBhfWZ1bmN0aW9uIGRiKGEsYixjKXt2YXIgZD1ZYS5leGVjKGIpO3JldHVybiBkP01hdGgubWF4KDAsZFsxXS0oY3x8MCkpKyhkWzJdfHwicHgiKTpifWZ1bmN0aW9uIGViKGEsYixjLGQsZSl7Zm9yKHZhciBmPWM9PT0oZD8iYm9yZGVyIjoiY29udGVudCIpPzQ6IndpZHRoIj09PWI/MTowLGc9MDs0PmY7Zis9MikibWFyZ2luIj09PWMmJihnKz1uLmNzcyhhLGMrVltmXSwhMCxlKSksZD8oImNvbnRlbnQiPT09YyYmKGctPW4uY3NzKGEsInBhZGRpbmciK1ZbZl0sITAsZSkpLCJtYXJnaW4iIT09YyYmKGctPW4uY3NzKGEsImJvcmRlciIrVltmXSsiV2lkdGgiLCEwLGUpKSk6KGcrPW4uY3NzKGEsInBhZGRpbmciK1ZbZl0sITAsZSksInBhZGRpbmciIT09YyYmKGcrPW4uY3NzKGEsImJvcmRlciIrVltmXSsiV2lkdGgiLCEwLGUpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gZmIoYSxiLGMpe3ZhciBkPSEwLGU9IndpZHRoIj09PWI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodCxmPVJhKGEpLGc9bC5ib3hTaXppbmcmJiJib3JkZXItYm94Ij09PW4uY3NzKGEsImJveFNpemluZyIsITEsZik7aWYoMD49ZXx8bnVsbD09ZSl7aWYoZT1TYShhLGIsZiksKDA+ZXx8bnVsbD09ZSkmJihlPWEuc3R5bGVbYl0pLE9hLnRlc3QoZSkpcmV0dXJuIGU7ZD1nJiYobC5ib3hTaXppbmdSZWxpYWJsZSgpfHxlPT09YS5zdHlsZVtiXSksZT1wYXJzZUZsb2F0KGUpfHwwfXJldHVybiBlK2ViKGEsYixjfHwoZz8iYm9yZGVyIjoiY29udGVudCIpLGQsZikrInB4In1uLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihhLGIpe2lmKGIpe3ZhciBjPVNhKGEsIm9wYWNpdHkiKTtyZXR1cm4iIj09PWM/IjEiOmN9fX19LGNzc051bWJlcjp7YW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6ITAsY29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6eyJmbG9hdCI6bC5jc3NGbG9hdD8iY3NzRmxvYXQiOiJzdHlsZUZsb2F0In0sc3R5bGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYoYSYmMyE9PWEubm9kZVR5cGUmJjghPT1hLm5vZGVUeXBlJiZhLnN0eWxlKXt2YXIgZSxmLGcsaD1uLmNhbWVsQ2FzZShiKSxpPWEuc3R5bGU7aWYoYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1iYihoKXx8aCksZz1uLmNzc0hvb2tzW2JdfHxuLmNzc0hvb2tzW2hdLHZvaWQgMD09PWMpcmV0dXJuIGcmJiJnZXQiaW4gZyYmdm9pZCAwIT09KGU9Zy5nZXQoYSwhMSxkKSk/ZTppW2JdO2lmKGY9dHlwZW9mIGMsInN0cmluZyI9PT1mJiYoZT1VLmV4ZWMoYykpJiZlWzFdJiYoYz1YKGEsYixlKSxmPSJudW1iZXIiKSxudWxsIT1jJiZjPT09YyYmKCJudW1iZXIiPT09ZiYmKGMrPWUmJmVbM118fChuLmNzc051bWJlcltoXT8iIjoicHgiKSksbC5jbGVhckNsb25lU3R5bGV8fCIiIT09Y3x8MCE9PWIuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwoaVtiXT0iaW5oZXJpdCIpLCEoZyYmInNldCJpbiBnJiZ2b2lkIDA9PT0oYz1nLnNldChhLGMsZCkpKSkpdHJ5e2lbYl09Y31jYXRjaChqKXt9fX0sY3NzOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZyxoPW4uY2FtZWxDYXNlKGIpO3JldHVybiBiPW4uY3NzUHJvcHNbaF18fChuLmNzc1Byb3BzW2hdPWJiKGgpfHxoKSxnPW4uY3NzSG9va3NbYl18fG4uY3NzSG9va3NbaF0sZyYmImdldCJpbiBnJiYoZj1nLmdldChhLCEwLGMpKSx2b2lkIDA9PT1mJiYoZj1TYShhLGIsZCkpLCJub3JtYWwiPT09ZiYmYiBpbiAkYSYmKGY9JGFbYl0pLCIiPT09Y3x8Yz8oZT1wYXJzZUZsb2F0KGYpLGM9PT0hMHx8aXNGaW5pdGUoZSk/ZXx8MDpmKTpmfX0pLG4uZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2JdPXtnZXQ6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBjP1hhLnRlc3Qobi5jc3MoYSwiZGlzcGxheSIpKSYmMD09PWEub2Zmc2V0V2lkdGg/UGEoYSxaYSxmdW5jdGlvbigpe3JldHVybiBmYihhLGIsZCl9KTpmYihhLGIsZCk6dm9pZCAwfSxzZXQ6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWQmJlJhKGEpO3JldHVybiBkYihhLGMsZD9lYihhLGIsZCxsLmJveFNpemluZyYmImJvcmRlci1ib3giPT09bi5jc3MoYSwiYm94U2l6aW5nIiwhMSxlKSxlKTowKX19fSksbC5vcGFjaXR5fHwobi5jc3NIb29rcy5vcGFjaXR5PXtnZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gV2EudGVzdCgoYiYmYS5jdXJyZW50U3R5bGU/YS5jdXJyZW50U3R5bGUuZmlsdGVyOmEuc3R5bGUuZmlsdGVyKXx8IiIpPy4wMSpwYXJzZUZsb2F0KFJlZ0V4cC4kMSkrIiI6Yj8iMSI6IiJ9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjPWEuc3R5bGUsZD1hLmN1cnJlbnRTdHlsZSxlPW4uaXNOdW1lcmljKGIpPyJhbHBoYShvcGFjaXR5PSIrMTAwKmIrIikiOiIiLGY9ZCYmZC5maWx0ZXJ8fGMuZmlsdGVyfHwiIjtjLnpvb209MSwoYj49MXx8IiI9PT1iKSYmIiI9PT1uLnRyaW0oZi5yZXBsYWNlKFZhLCIiKSkmJmMucmVtb3ZlQXR0cmlidXRlJiYoYy5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpLCIiPT09Ynx8ZCYmIWQuZmlsdGVyKXx8KGMuZmlsdGVyPVZhLnRlc3QoZik/Zi5yZXBsYWNlKFZhLGUpOmYrIiAiK2UpfX0pLG4uY3NzSG9va3MubWFyZ2luUmlnaHQ9VWEobC5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/UGEoYSx7ZGlzcGxheToiaW5saW5lLWJsb2NrIn0sU2EsW2EsIm1hcmdpblJpZ2h0Il0pOnZvaWQgMH0pLG4uY3NzSG9va3MubWFyZ2luTGVmdD1VYShsLnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihhLGIpe3JldHVybiBiPyhwYXJzZUZsb2F0KFNhKGEsIm1hcmdpbkxlZnQiKSl8fChuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKT9hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQtUGEoYSx7Cm1hcmdpbkxlZnQ6MH0sZnVuY3Rpb24oKXtyZXR1cm4gYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0fSk6MCkpKyJweCI6dm9pZCAwfSksbi5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3JkZXI6IldpZHRoIn0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9InN0cmluZyI9PXR5cGVvZiBjP2Muc3BsaXQoIiAiKTpbY107ND5kO2QrKyllW2ErVltkXStiXT1mW2RdfHxmW2QtMl18fGZbMF07cmV0dXJuIGV9fSxOYS50ZXN0KGEpfHwobi5jc3NIb29rc1thK2JdLnNldD1kYil9KSxuLmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPXt9LGc9MDtpZihuLmlzQXJyYXkoYikpe2ZvcihkPVJhKGEpLGU9Yi5sZW5ndGg7ZT5nO2crKylmW2JbZ11dPW4uY3NzKGEsYltnXSwhMSxkKTtyZXR1cm4gZn1yZXR1cm4gdm9pZCAwIT09Yz9uLnN0eWxlKGEsYixjKTpuLmNzcyhhLGIpfSxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0sc2hvdzpmdW5jdGlvbigpe3JldHVybiBjYih0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBjYih0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe3JldHVybiJib29sZWFuIj09dHlwZW9mIGE/YT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtXKHRoaXMpP24odGhpcykuc2hvdygpOm4odGhpcykuaGlkZSgpfSl9fSk7ZnVuY3Rpb24gZ2IoYSxiLGMsZCxlKXtyZXR1cm4gbmV3IGdiLnByb3RvdHlwZS5pbml0KGEsYixjLGQsZSl9bi5Ud2Vlbj1nYixnYi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmdiLGluaXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuZWxlbT1hLHRoaXMucHJvcD1jLHRoaXMuZWFzaW5nPWV8fG4uZWFzaW5nLl9kZWZhdWx0LHRoaXMub3B0aW9ucz1iLHRoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKSx0aGlzLmVuZD1kLHRoaXMudW5pdD1mfHwobi5jc3NOdW1iZXJbY10/IiI6InB4Iil9LGN1cjpmdW5jdGlvbigpe3ZhciBhPWdiLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBhJiZhLmdldD9hLmdldCh0aGlzKTpnYi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oYSl7dmFyIGIsYz1nYi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5vcHRpb25zLmR1cmF0aW9uP3RoaXMucG9zPWI9bi5lYXNpbmdbdGhpcy5lYXNpbmddKGEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmEsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6dGhpcy5wb3M9Yj1hLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSpiK3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLGMmJmMuc2V0P2Muc2V0KHRoaXMpOmdiLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LGdiLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1nYi5wcm90b3R5cGUsZ2IucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiAxIT09YS5lbGVtLm5vZGVUeXBlfHxudWxsIT1hLmVsZW1bYS5wcm9wXSYmbnVsbD09YS5lbGVtLnN0eWxlW2EucHJvcF0/YS5lbGVtW2EucHJvcF06KGI9bi5jc3MoYS5lbGVtLGEucHJvcCwiIiksYiYmImF1dG8iIT09Yj9iOjApfSxzZXQ6ZnVuY3Rpb24oYSl7bi5meC5zdGVwW2EucHJvcF0/bi5meC5zdGVwW2EucHJvcF0oYSk6MSE9PWEuZWxlbS5ub2RlVHlwZXx8bnVsbD09YS5lbGVtLnN0eWxlW24uY3NzUHJvcHNbYS5wcm9wXV0mJiFuLmNzc0hvb2tzW2EucHJvcF0/YS5lbGVtW2EucHJvcF09YS5ub3c6bi5zdHlsZShhLmVsZW0sYS5wcm9wLGEubm93K2EudW5pdCl9fX0sZ2IucHJvcEhvb2tzLnNjcm9sbFRvcD1nYi5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGEpe2EuZWxlbS5ub2RlVHlwZSYmYS5lbGVtLnBhcmVudE5vZGUmJihhLmVsZW1bYS5wcm9wXT1hLm5vdyl9fSxuLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzd2luZzpmdW5jdGlvbihhKXtyZXR1cm4uNS1NYXRoLmNvcyhhKk1hdGguUEkpLzJ9LF9kZWZhdWx0OiJzd2luZyJ9LG4uZng9Z2IucHJvdG90eXBlLmluaXQsbi5meC5zdGVwPXt9O3ZhciBoYixpYixqYj0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sa2I9L3F1ZXVlSG9va3MkLztmdW5jdGlvbiBsYigpe3JldHVybiBhLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtoYj12b2lkIDB9KSxoYj1uLm5vdygpfWZ1bmN0aW9uIG1iKGEsYil7dmFyIGMsZD17aGVpZ2h0OmF9LGU9MDtmb3IoYj1iPzE6MDs0PmU7ZSs9Mi1iKWM9VltlXSxkWyJtYXJnaW4iK2NdPWRbInBhZGRpbmciK2NdPWE7cmV0dXJuIGImJihkLm9wYWNpdHk9ZC53aWR0aD1hKSxkfWZ1bmN0aW9uIG5iKGEsYixjKXtmb3IodmFyIGQsZT0ocWIudHdlZW5lcnNbYl18fFtdKS5jb25jYXQocWIudHdlZW5lcnNbIioiXSksZj0wLGc9ZS5sZW5ndGg7Zz5mO2YrKylpZihkPWVbZl0uY2FsbChjLGIsYSkpcmV0dXJuIGR9ZnVuY3Rpb24gb2IoYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGssbT10aGlzLG89e30scD1hLnN0eWxlLHE9YS5ub2RlVHlwZSYmVyhhKSxyPW4uX2RhdGEoYSwiZnhzaG93Iik7Yy5xdWV1ZXx8KGg9bi5fcXVldWVIb29rcyhhLCJmeCIpLG51bGw9PWgudW5xdWV1ZWQmJihoLnVucXVldWVkPTAsaT1oLmVtcHR5LmZpcmUsaC5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7aC51bnF1ZXVlZHx8aSgpfSksaC51bnF1ZXVlZCsrLG0uYWx3YXlzKGZ1bmN0aW9uKCl7bS5hbHdheXMoZnVuY3Rpb24oKXtoLnVucXVldWVkLS0sbi5xdWV1ZShhLCJmeCIpLmxlbmd0aHx8aC5lbXB0eS5maXJlKCl9KX0pKSwxPT09YS5ub2RlVHlwZSYmKCJoZWlnaHQiaW4gYnx8IndpZHRoImluIGIpJiYoYy5vdmVyZmxvdz1bcC5vdmVyZmxvdyxwLm92ZXJmbG93WCxwLm92ZXJmbG93WV0saj1uLmNzcyhhLCJkaXNwbGF5Iiksaz0ibm9uZSI9PT1qP24uX2RhdGEoYSwib2xkZGlzcGxheSIpfHxNYShhLm5vZGVOYW1lKTpqLCJpbmxpbmUiPT09ayYmIm5vbmUiPT09bi5jc3MoYSwiZmxvYXQiKSYmKGwuaW5saW5lQmxvY2tOZWVkc0xheW91dCYmImlubGluZSIhPT1NYShhLm5vZGVOYW1lKT9wLnpvb209MTpwLmRpc3BsYXk9ImlubGluZS1ibG9jayIpKSxjLm92ZXJmbG93JiYocC5vdmVyZmxvdz0iaGlkZGVuIixsLnNocmlua1dyYXBCbG9ja3MoKXx8bS5hbHdheXMoZnVuY3Rpb24oKXtwLm92ZXJmbG93PWMub3ZlcmZsb3dbMF0scC5vdmVyZmxvd1g9Yy5vdmVyZmxvd1sxXSxwLm92ZXJmbG93WT1jLm92ZXJmbG93WzJdfSkpO2ZvcihkIGluIGIpaWYoZT1iW2RdLGpiLmV4ZWMoZSkpe2lmKGRlbGV0ZSBiW2RdLGY9Znx8InRvZ2dsZSI9PT1lLGU9PT0ocT8iaGlkZSI6InNob3ciKSl7aWYoInNob3ciIT09ZXx8IXJ8fHZvaWQgMD09PXJbZF0pY29udGludWU7cT0hMH1vW2RdPXImJnJbZF18fG4uc3R5bGUoYSxkKX1lbHNlIGo9dm9pZCAwO2lmKG4uaXNFbXB0eU9iamVjdChvKSkiaW5saW5lIj09PSgibm9uZSI9PT1qP01hKGEubm9kZU5hbWUpOmopJiYocC5kaXNwbGF5PWopO2Vsc2V7cj8iaGlkZGVuImluIHImJihxPXIuaGlkZGVuKTpyPW4uX2RhdGEoYSwiZnhzaG93Iix7fSksZiYmKHIuaGlkZGVuPSFxKSxxP24oYSkuc2hvdygpOm0uZG9uZShmdW5jdGlvbigpe24oYSkuaGlkZSgpfSksbS5kb25lKGZ1bmN0aW9uKCl7dmFyIGI7bi5fcmVtb3ZlRGF0YShhLCJmeHNob3ciKTtmb3IoYiBpbiBvKW4uc3R5bGUoYSxiLG9bYl0pfSk7Zm9yKGQgaW4gbylnPW5iKHE/cltkXTowLGQsbSksZCBpbiByfHwocltkXT1nLnN0YXJ0LHEmJihnLmVuZD1nLnN0YXJ0LGcuc3RhcnQ9IndpZHRoIj09PWR8fCJoZWlnaHQiPT09ZD8xOjApKX19ZnVuY3Rpb24gcGIoYSxiKXt2YXIgYyxkLGUsZixnO2ZvcihjIGluIGEpaWYoZD1uLmNhbWVsQ2FzZShjKSxlPWJbZF0sZj1hW2NdLG4uaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9bi5jc3NIb29rc1tkXSxnJiYiZXhwYW5kImluIGcpe2Y9Zy5leHBhbmQoZiksZGVsZXRlIGFbZF07Zm9yKGMgaW4gZiljIGluIGF8fChhW2NdPWZbY10sYltjXT1lKX1lbHNlIGJbZF09ZX1mdW5jdGlvbiBxYihhLGIsYyl7dmFyIGQsZSxmPTAsZz1xYi5wcmVmaWx0ZXJzLmxlbmd0aCxoPW4uRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPWhifHxsYigpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtpPmc7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksMT5mJiZpP2M6KGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpuLmV4dGVuZCh7fSxiKSxvcHRzOm4uZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9LGVhc2luZzpuLmVhc2luZy5fZGVmYXVsdH0sYyksb3JpZ2luYWxQcm9wZXJ0aWVzOmIsb3JpZ2luYWxPcHRpb25zOmMsc3RhcnRUaW1lOmhifHxsYigpLGR1cmF0aW9uOmMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9bi5Ud2VlbihhLGoub3B0cyxiLGMsai5vcHRzLnNwZWNpYWxFYXNpbmdbYl18fGoub3B0cy5lYXNpbmcpO3JldHVybiBqLnR3ZWVucy5wdXNoKGQpLGR9LHN0b3A6ZnVuY3Rpb24oYil7dmFyIGM9MCxkPWI/ai50d2VlbnMubGVuZ3RoOjA7aWYoZSlyZXR1cm4gdGhpcztmb3IoZT0hMDtkPmM7YysrKWoudHdlZW5zW2NdLnJ1bigxKTtyZXR1cm4gYj8oaC5ub3RpZnlXaXRoKGEsW2osMSwwXSksaC5yZXNvbHZlV2l0aChhLFtqLGJdKSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihwYihrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtnPmY7ZisrKWlmKGQ9cWIucHJlZmlsdGVyc1tmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIG4uaXNGdW5jdGlvbihkLnN0b3ApJiYobi5fcXVldWVIb29rcyhqLmVsZW0sai5vcHRzLnF1ZXVlKS5zdG9wPW4ucHJveHkoZC5zdG9wLGQpKSxkO3JldHVybiBuLm1hcChrLG5iLGopLG4uaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLG4uZngudGltZXIobi5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksai5wcm9ncmVzcyhqLm9wdHMucHJvZ3Jlc3MpLmRvbmUoai5vcHRzLmRvbmUsai5vcHRzLmNvbXBsZXRlKS5mYWlsKGoub3B0cy5mYWlsKS5hbHdheXMoai5vcHRzLmFsd2F5cyl9bi5BbmltYXRpb249bi5leHRlbmQocWIse3R3ZWVuZXJzOnsiKiI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVUd2VlbihhLGIpO3JldHVybiBYKGMuZWxlbSxhLFUuZXhlYyhiKSxjKSxjfV19LHR3ZWVuZXI6ZnVuY3Rpb24oYSxiKXtuLmlzRnVuY3Rpb24oYSk/KGI9YSxhPVsiKiJdKTphPWEubWF0Y2goRyk7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYz1hW2RdLHFiLnR3ZWVuZXJzW2NdPXFiLnR3ZWVuZXJzW2NdfHxbXSxxYi50d2VlbmVyc1tjXS51bnNoaWZ0KGIpfSxwcmVmaWx0ZXJzOltvYl0scHJlZmlsdGVyOmZ1bmN0aW9uKGEsYil7Yj9xYi5wcmVmaWx0ZXJzLnVuc2hpZnQoYSk6cWIucHJlZmlsdGVycy5wdXNoKGEpfX0pLG4uc3BlZWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEmJiJvYmplY3QiPT10eXBlb2YgYT9uLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fG4uaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhbi5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gZC5kdXJhdGlvbj1uLmZ4Lm9mZj8wOiJudW1iZXIiPT10eXBlb2YgZC5kdXJhdGlvbj9kLmR1cmF0aW9uOmQuZHVyYXRpb24gaW4gbi5meC5zcGVlZHM/bi5meC5zcGVlZHNbZC5kdXJhdGlvbl06bi5meC5zcGVlZHMuX2RlZmF1bHQsbnVsbCE9ZC5xdWV1ZSYmZC5xdWV1ZSE9PSEwfHwoZC5xdWV1ZT0iZngiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtuLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJm4uZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxuLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihXKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OmJ9LGEsYyxkKX0sYW5pbWF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uLmlzRW1wdHlPYmplY3QoYSksZj1uLnNwZWVkKGIsYyxkKSxnPWZ1bmN0aW9uKCl7dmFyIGI9cWIodGhpcyxuLmV4dGVuZCh7fSxhKSxmKTsoZXx8bi5fZGF0YSh0aGlzLCJmaW5pc2giKSkmJmIuc3RvcCghMCl9O3JldHVybiBnLmZpbmlzaD1nLGV8fGYucXVldWU9PT0hMT90aGlzLmVhY2goZyk6dGhpcy5xdWV1ZShmLnF1ZXVlLGcpfSxzdG9wOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihhKXt2YXIgYj1hLnN0b3A7ZGVsZXRlIGEuc3RvcCxiKGMpfTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGEmJihjPWIsYj1hLGE9dm9pZCAwKSxiJiZhIT09ITEmJnRoaXMucXVldWUoYXx8ImZ4IixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9ITAsZT1udWxsIT1hJiZhKyJxdWV1ZUhvb2tzIixmPW4udGltZXJzLGc9bi5fZGF0YSh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZrYi50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyFiJiZjfHxuLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8ImZ4IiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsYz1uLl9kYXRhKHRoaXMpLGQ9Y1thKyJxdWV1ZSJdLGU9Y1thKyJxdWV1ZUhvb2tzIl0sZj1uLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsbi5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxuLmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9bi5mbltiXTtuLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8ImJvb2xlYW4iPT10eXBlb2YgYT9jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUobWIoYiwhMCksYSxkLGUpfX0pLG4uZWFjaCh7c2xpZGVEb3duOm1iKCJzaG93Iiksc2xpZGVVcDptYigiaGlkZSIpLHNsaWRlVG9nZ2xlOm1iKCJ0b2dnbGUiKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhLGMsZCl7cmV0dXJuIHRoaXMuYW5pbWF0ZShiLGEsYyxkKX19KSxuLnRpbWVycz1bXSxuLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgYSxiPW4udGltZXJzLGM9MDtmb3IoaGI9bi5ub3coKTtjPGIubGVuZ3RoO2MrKylhPWJbY10sYSgpfHxiW2NdIT09YXx8Yi5zcGxpY2UoYy0tLDEpO2IubGVuZ3RofHxuLmZ4LnN0b3AoKSxoYj12b2lkIDB9LG4uZngudGltZXI9ZnVuY3Rpb24oYSl7bi50aW1lcnMucHVzaChhKSxhKCk/bi5meC5zdGFydCgpOm4udGltZXJzLnBvcCgpfSxuLmZ4LmludGVydmFsPTEzLG4uZnguc3RhcnQ9ZnVuY3Rpb24oKXtpYnx8KGliPWEuc2V0SW50ZXJ2YWwobi5meC50aWNrLG4uZnguaW50ZXJ2YWwpKX0sbi5meC5zdG9wPWZ1bmN0aW9uKCl7YS5jbGVhckludGVydmFsKGliKSxpYj1udWxsfSxuLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxuLmZuLmRlbGF5PWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGI9bi5meD9uLmZ4LnNwZWVkc1tiXXx8YjpiLGM9Y3x8ImZ4Iix0aGlzLnF1ZXVlKGMsZnVuY3Rpb24oYyxkKXt2YXIgZT1hLnNldFRpbWVvdXQoYyxiKTtkLnN0b3A9ZnVuY3Rpb24oKXthLmNsZWFyVGltZW91dChlKX19KX0sZnVuY3Rpb24oKXt2YXIgYSxiPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxjPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZT1kLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLGY9ZS5hcHBlbmRDaGlsZChkLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtjPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksYy5zZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIsInQiKSxjLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IixhPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXSxiLnNldEF0dHJpYnV0ZSgidHlwZSIsImNoZWNrYm94IiksYy5hcHBlbmRDaGlsZChiKSxhPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXSxhLnN0eWxlLmNzc1RleHQ9InRvcDoxcHgiLGwuZ2V0U2V0QXR0cmlidXRlPSJ0IiE9PWMuY2xhc3NOYW1lLGwuc3R5bGU9L3RvcC8udGVzdChhLmdldEF0dHJpYnV0ZSgic3R5bGUiKSksbC5ocmVmTm9ybWFsaXplZD0iL2EiPT09YS5nZXRBdHRyaWJ1dGUoImhyZWYiKSxsLmNoZWNrT249ISFiLnZhbHVlLGwub3B0U2VsZWN0ZWQ9Zi5zZWxlY3RlZCxsLmVuY3R5cGU9ISFkLmNyZWF0ZUVsZW1lbnQoImZvcm0iKS5lbmN0eXBlLGUuZGlzYWJsZWQ9ITAsbC5vcHREaXNhYmxlZD0hZi5kaXNhYmxlZCxiPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxiLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSxsLmlucHV0PSIiPT09Yi5nZXRBdHRyaWJ1dGUoInZhbHVlIiksYi52YWx1ZT0idCIsYi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJyYWRpbyIpLGwucmFkaW9WYWx1ZT0idCI9PT1iLnZhbHVlfSgpO3ZhciByYj0vXHIvZyxzYj0vW1x4MjBcdFxyXG5cZl0rL2c7bi5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT10aGlzWzBdO3tpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBkPW4uaXNGdW5jdGlvbihhKSx0aGlzLmVhY2goZnVuY3Rpb24oYyl7dmFyIGU7MT09PXRoaXMubm9kZVR5cGUmJihlPWQ/YS5jYWxsKHRoaXMsYyxuKHRoaXMpLnZhbCgpKTphLG51bGw9PWU/ZT0iIjoibnVtYmVyIj09dHlwZW9mIGU/ZSs9IiI6bi5pc0FycmF5KGUpJiYoZT1uLm1hcChlLGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hPyIiOmErIiJ9KSksYj1uLnZhbEhvb2tzW3RoaXMudHlwZV18fG4udmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiYic2V0ImluIGImJnZvaWQgMCE9PWIuc2V0KHRoaXMsZSwidmFsdWUiKXx8KHRoaXMudmFsdWU9ZSkpfSk7aWYoZSlyZXR1cm4gYj1uLnZhbEhvb2tzW2UudHlwZV18fG4udmFsSG9va3NbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiYiZ2V0ImluIGImJnZvaWQgMCE9PShjPWIuZ2V0KGUsInZhbHVlIikpP2M6KGM9ZS52YWx1ZSwic3RyaW5nIj09dHlwZW9mIGM/Yy5yZXBsYWNlKHJiLCIiKTpudWxsPT1jPyIiOmMpfX19KSxuLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPW4uZmluZC5hdHRyKGEsInZhbHVlIik7cmV0dXJuIG51bGwhPWI/YjpuLnRyaW0obi50ZXh0KGEpKS5yZXBsYWNlKHNiLCIgIil9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkPWEub3B0aW9ucyxlPWEuc2VsZWN0ZWRJbmRleCxmPSJzZWxlY3Qtb25lIj09PWEudHlwZXx8MD5lLGc9Zj9udWxsOltdLGg9Zj9lKzE6ZC5sZW5ndGgsaT0wPmU/aDpmP2U6MDtoPmk7aSsrKWlmKGM9ZFtpXSwoYy5zZWxlY3RlZHx8aT09PWUpJiYobC5vcHREaXNhYmxlZD8hYy5kaXNhYmxlZDpudWxsPT09Yy5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikpJiYoIWMucGFyZW50Tm9kZS5kaXNhYmxlZHx8IW4ubm9kZU5hbWUoYy5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7aWYoYj1uKGMpLnZhbCgpLGYpcmV0dXJuIGI7Zy5wdXNoKGIpfXJldHVybiBnfSxzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9YS5vcHRpb25zLGY9bi5tYWtlQXJyYXkoYiksZz1lLmxlbmd0aDt3aGlsZShnLS0paWYoZD1lW2ddLG4uaW5BcnJheShuLnZhbEhvb2tzLm9wdGlvbi5nZXQoZCksZik+LTEpdHJ5e2Quc2VsZWN0ZWQ9Yz0hMH1jYXRjaChoKXtkLnNjcm9sbEhlaWdodH1lbHNlIGQuc2VsZWN0ZWQ9ITE7cmV0dXJuIGN8fChhLnNlbGVjdGVkSW5kZXg9LTEpLGV9fX19KSxuLmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXtuLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5pc0FycmF5KGIpP2EuY2hlY2tlZD1uLmluQXJyYXkobihhKS52YWwoKSxiKT4tMTp2b2lkIDB9fSxsLmNoZWNrT258fChuLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09PWEuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPyJvbiI6YS52YWx1ZX0pfSk7dmFyIHRiLHViLHZiPW4uZXhwci5hdHRySGFuZGxlLHdiPS9eKD86Y2hlY2tlZHxzZWxlY3RlZCkkL2kseGI9bC5nZXRTZXRBdHRyaWJ1dGUseWI9bC5pbnB1dDtuLmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIpe3JldHVybiBZKHRoaXMsbi5hdHRyLGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLnJlbW92ZUF0dHIodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9YS5ub2RlVHlwZTtpZigzIT09ZiYmOCE9PWYmJjIhPT1mKXJldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgYS5nZXRBdHRyaWJ1dGU/bi5wcm9wKGEsYixjKTooMT09PWYmJm4uaXNYTUxEb2MoYSl8fChiPWIudG9Mb3dlckNhc2UoKSxlPW4uYXR0ckhvb2tzW2JdfHwobi5leHByLm1hdGNoLmJvb2wudGVzdChiKT91Yjp0YikpLHZvaWQgMCE9PWM/bnVsbD09PWM/dm9pZCBuLnJlbW92ZUF0dHIoYSxiKTplJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDooYS5zZXRBdHRyaWJ1dGUoYixjKyIiKSxjKTplJiYiZ2V0ImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOihkPW4uZmluZC5hdHRyKGEsYiksbnVsbD09ZD92b2lkIDA6ZCkpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihhLGIpe2lmKCFsLnJhZGlvVmFsdWUmJiJyYWRpbyI9PT1iJiZuLm5vZGVOYW1lKGEsImlucHV0Iikpe3ZhciBjPWEudmFsdWU7cmV0dXJuIGEuc2V0QXR0cmlidXRlKCJ0eXBlIixiKSxjJiYoYS52YWx1ZT1jKSxifX19fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPTAsZj1iJiZiLm1hdGNoKEcpO2lmKGYmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZltlKytdKWQ9bi5wcm9wRml4W2NdfHxjLG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYyk/eWImJnhifHwhd2IudGVzdChjKT9hW2RdPSExOmFbbi5jYW1lbENhc2UoImRlZmF1bHQtIitjKV09YVtkXT0hMTpuLmF0dHIoYSxjLCIiKSxhLnJlbW92ZUF0dHJpYnV0ZSh4Yj9jOmQpfX0pLHViPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPT09ITE/bi5yZW1vdmVBdHRyKGEsYyk6eWImJnhifHwhd2IudGVzdChjKT9hLnNldEF0dHJpYnV0ZSgheGImJm4ucHJvcEZpeFtjXXx8YyxjKTphW24uY2FtZWxDYXNlKCJkZWZhdWx0LSIrYyldPWFbY109ITAsY319LG4uZWFjaChuLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihhLGIpe3ZhciBjPXZiW2JdfHxuLmZpbmQuYXR0cjt5YiYmeGJ8fCF3Yi50ZXN0KGIpP3ZiW2JdPWZ1bmN0aW9uKGEsYixkKXt2YXIgZSxmO3JldHVybiBkfHwoZj12YltiXSx2YltiXT1lLGU9bnVsbCE9YyhhLGIsZCk/Yi50b0xvd2VyQ2FzZSgpOm51bGwsdmJbYl09ZiksZX06dmJbYl09ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjP3ZvaWQgMDphW24uY2FtZWxDYXNlKCJkZWZhdWx0LSIrYildP2IudG9Mb3dlckNhc2UoKTpudWxsfX0pLHliJiZ4Ynx8KG4uYXR0ckhvb2tzLnZhbHVlPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLm5vZGVOYW1lKGEsImlucHV0Iik/dm9pZChhLmRlZmF1bHRWYWx1ZT1iKTp0YiYmdGIuc2V0KGEsYixjKX19KSx4Ynx8KHRiPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEuZ2V0QXR0cmlidXRlTm9kZShjKTtyZXR1cm4gZHx8YS5zZXRBdHRyaWJ1dGVOb2RlKGQ9YS5vd25lckRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZShjKSksZC52YWx1ZT1iKz0iIiwidmFsdWUiPT09Y3x8Yj09PWEuZ2V0QXR0cmlidXRlKGMpP2I6dm9pZCAwfX0sdmIuaWQ9dmIubmFtZT12Yi5jb29yZHM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBjP3ZvaWQgMDooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiYiIiE9PWQudmFsdWU/ZC52YWx1ZTpudWxsfSxuLnZhbEhvb2tzLmJ1dHRvbj17Z2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpO3JldHVybiBjJiZjLnNwZWNpZmllZD9jLnZhbHVlOnZvaWQgMH0sc2V0OnRiLnNldH0sbi5hdHRySG9va3MuY29udGVudGVkaXRhYmxlPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3RiLnNldChhLCIiPT09Yj8hMTpiLGMpfX0sbi5lYWNoKFsid2lkdGgiLCJoZWlnaHQiXSxmdW5jdGlvbihhLGIpe24uYXR0ckhvb2tzW2JdPXtzZXQ6ZnVuY3Rpb24oYSxjKXtyZXR1cm4iIj09PWM/KGEuc2V0QXR0cmlidXRlKGIsImF1dG8iKSxjKTp2b2lkIDB9fX0pKSxsLnN0eWxlfHwobi5hdHRySG9va3Muc3R5bGU9e2dldDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdHlsZS5jc3NUZXh0fHx2b2lkIDB9LHNldDpmdW5jdGlvbihhLGIpe3JldHVybiBhLnN0eWxlLmNzc1RleHQ9YisiIn19KTt2YXIgemI9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkL2ksQWI9L14oPzphfGFyZWEpJC9pO24uZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFkodGhpcyxuLnByb3AsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9bi5wcm9wRml4W2FdfHxhLHRoaXMuZWFjaChmdW5jdGlvbigpe3RyeXt0aGlzW2FdPXZvaWQgMCxkZWxldGUgdGhpc1thXX1jYXRjaChiKXt9fSl9fSksbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLm5vZGVUeXBlO2lmKDMhPT1mJiY4IT09ZiYmMiE9PWYpcmV0dXJuIDE9PT1mJiZuLmlzWE1MRG9jKGEpfHwoYj1uLnByb3BGaXhbYl18fGIsZT1uLnByb3BIb29rc1tiXSksdm9pZCAwIT09Yz9lJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDphW2JdPWM6ZSYmImdldCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDphW2JdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bi5maW5kLmF0dHIoYSwidGFiaW5kZXgiKTtyZXR1cm4gYj9wYXJzZUludChiLDEwKTp6Yi50ZXN0KGEubm9kZU5hbWUpfHxBYi50ZXN0KGEubm9kZU5hbWUpJiZhLmhyZWY/MDotMX19fSxwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn19KSxsLmhyZWZOb3JtYWxpemVkfHxuLmVhY2goWyJocmVmIiwic3JjIl0sZnVuY3Rpb24oYSxiKXtuLnByb3BIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShiLDQpfX19KSxsLm9wdFNlbGVjdGVkfHwobi5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJihiLnNlbGVjdGVkSW5kZXgsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCksbnVsbH0sc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtiJiYoYi5zZWxlY3RlZEluZGV4LGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpfX0pLG4uZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7bi5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pLGwuZW5jdHlwZXx8KG4ucHJvcEZpeC5lbmN0eXBlPSJlbmNvZGluZyIpO3ZhciBCYj0vW1x0XHJcblxmXS9nO2Z1bmN0aW9uIENiKGEpe3JldHVybiBuLmF0dHIoYSwiY2xhc3MiKXx8IiJ9bi5mbi5leHRlbmQoe2FkZENsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGk9MDtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLmFkZENsYXNzKGEuY2FsbCh0aGlzLGIsQ2IodGhpcykpKX0pO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEcpfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPUNiKGMpLGQ9MT09PWMubm9kZVR5cGUmJigiICIrZSsiICIpLnJlcGxhY2UoQmIsIiAiKSl7Zz0wO3doaWxlKGY9YltnKytdKWQuaW5kZXhPZigiICIrZisiICIpPDAmJihkKz1mKyIgIik7aD1uLnRyaW0oZCksZSE9PWgmJm4uYXR0cihjLCJjbGFzcyIsaCl9fXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpPTA7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5yZW1vdmVDbGFzcyhhLmNhbGwodGhpcyxiLENiKHRoaXMpKSl9KTtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5hdHRyKCJjbGFzcyIsIiIpO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEcpfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPUNiKGMpLGQ9MT09PWMubm9kZVR5cGUmJigiICIrZSsiICIpLnJlcGxhY2UoQmIsIiAiKSl7Zz0wO3doaWxlKGY9YltnKytdKXdoaWxlKGQuaW5kZXhPZigiICIrZisiICIpPi0xKWQ9ZC5yZXBsYWNlKCIgIitmKyIgIiwiICIpO2g9bi50cmltKGQpLGUhPT1oJiZuLmF0dHIoYywiY2xhc3MiLGgpfX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz10eXBlb2YgYTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBiJiYic3RyaW5nIj09PWM/Yj90aGlzLmFkZENsYXNzKGEpOnRoaXMucmVtb3ZlQ2xhc3MoYSk6bi5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihjKXtuKHRoaXMpLnRvZ2dsZUNsYXNzKGEuY2FsbCh0aGlzLGMsQ2IodGhpcyksYiksYil9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYixkLGUsZjtpZigic3RyaW5nIj09PWMpe2Q9MCxlPW4odGhpcyksZj1hLm1hdGNoKEcpfHxbXTt3aGlsZShiPWZbZCsrXSllLmhhc0NsYXNzKGIpP2UucmVtb3ZlQ2xhc3MoYik6ZS5hZGRDbGFzcyhiKX1lbHNlIHZvaWQgMCE9PWEmJiJib29sZWFuIiE9PWN8fChiPUNiKHRoaXMpLGImJm4uX2RhdGEodGhpcywiX19jbGFzc05hbWVfXyIsYiksbi5hdHRyKHRoaXMsImNsYXNzIixifHxhPT09ITE/IiI6bi5fZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIiKSl9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPTA7Yj0iICIrYSsiICI7d2hpbGUoYz10aGlzW2QrK10paWYoMT09PWMubm9kZVR5cGUmJigiICIrQ2IoYykrIiAiKS5yZXBsYWNlKEJiLCIgIikuaW5kZXhPZihiKT4tMSlyZXR1cm4hMDtyZXR1cm4hMX19KSxuLmVhY2goImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnUiLnNwbGl0KCIgIiksZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKGIsbnVsbCxhLGMpOnRoaXMudHJpZ2dlcihiKX19KSxuLmZuLmV4dGVuZCh7aG92ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGEpLm1vdXNlbGVhdmUoYnx8YSl9fSk7dmFyIERiPWEubG9jYXRpb24sRWI9bi5ub3coKSxGYj0vXD8vLEdiPS8oLCl8KFxbfHspfCh9fF0pfCIoPzpbXiJcXFxyXG5dfFxcWyJcXFwvYmZucnRdfFxcdVtcZGEtZkEtRl17NH0pKiJccyo6P3x0cnVlfGZhbHNlfG51bGx8LT8oPyEwXGQpXGQrKD86XC5cZCt8KSg/OltlRV1bKy1dP1xkK3wpL2c7bi5wYXJzZUpTT049ZnVuY3Rpb24oYil7aWYoYS5KU09OJiZhLkpTT04ucGFyc2UpcmV0dXJuIGEuSlNPTi5wYXJzZShiKyIiKTt2YXIgYyxkPW51bGwsZT1uLnRyaW0oYisiIik7cmV0dXJuIGUmJiFuLnRyaW0oZS5yZXBsYWNlKEdiLGZ1bmN0aW9uKGEsYixlLGYpe3JldHVybiBjJiZiJiYoZD0wKSwwPT09ZD9hOihjPWV8fGIsZCs9IWYtIWUsIiIpfSkpP0Z1bmN0aW9uKCJyZXR1cm4gIitlKSgpOm4uZXJyb3IoIkludmFsaWQgSlNPTjogIitiKX0sbi5wYXJzZVhNTD1mdW5jdGlvbihiKXt2YXIgYyxkO2lmKCFifHwic3RyaW5nIiE9dHlwZW9mIGIpcmV0dXJuIG51bGw7dHJ5e2EuRE9NUGFyc2VyPyhkPW5ldyBhLkRPTVBhcnNlcixjPWQucGFyc2VGcm9tU3RyaW5nKGIsInRleHQveG1sIikpOihjPW5ldyBhLkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxET00iKSxjLmFzeW5jPSJmYWxzZSIsYy5sb2FkWE1MKGIpKX1jYXRjaChlKXtjPXZvaWQgMH1yZXR1cm4gYyYmYy5kb2N1bWVudEVsZW1lbnQmJiFjLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aHx8bi5lcnJvcigiSW52YWxpZCBYTUw6ICIrYiksY307dmFyIEhiPS8jLiokLyxJYj0vKFs/Jl0pXz1bXiZdKi8sSmI9L14oLio/KTpbIFx0XSooW15cclxuXSopXHI/JC9nbSxLYj0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxMYj0vXig/OkdFVHxIRUFEKSQvLE1iPS9eXC9cLy8sTmI9L14oW1x3ListXSs6KSg/OlwvXC8oPzpbXlwvPyNdKkB8KShbXlwvPyM6XSopKD86OihcZCspfCl8KS8sT2I9e30sUGI9e30sUWI9IiovIi5jb25jYXQoIioiKSxSYj1EYi5ocmVmLFNiPU5iLmV4ZWMoUmIudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIFRiKGEpe3JldHVybiBmdW5jdGlvbihiLGMpeyJzdHJpbmciIT10eXBlb2YgYiYmKGM9YixiPSIqIik7dmFyIGQsZT0wLGY9Yi50b0xvd2VyQ2FzZSgpLm1hdGNoKEcpfHxbXTtpZihuLmlzRnVuY3Rpb24oYykpd2hpbGUoZD1mW2UrK10pIisiPT09ZC5jaGFyQXQoMCk/KGQ9ZC5zbGljZSgxKXx8IioiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24gVWIoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09UGI7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxuLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlWyIqIl0mJmcoIioiKX1mdW5jdGlvbiBWYihhLGIpe3ZhciBjLGQsZT1uLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGQgaW4gYil2b2lkIDAhPT1iW2RdJiYoKGVbZF0/YTpjfHwoYz17fSkpW2RdPWJbZF0pO3JldHVybiBjJiZuLmV4dGVuZCghMCxhLGMpLGF9ZnVuY3Rpb24gV2IoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKCIqIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWUmJihlPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihlKWZvcihnIGluIGgpaWYoaFtnXSYmaFtnXS50ZXN0KGUpKXtpLnVuc2hpZnQoZyk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGcgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tnKyIgIitpWzBdXSl7Zj1nO2JyZWFrfWR8fChkPWcpfWY9Znx8ZH1yZXR1cm4gZj8oZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdKTp2b2lkIDB9ZnVuY3Rpb24gWGIoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZigiKiI9PT1mKWY9aTtlbHNlIGlmKCIqIiE9PWkmJmkhPT1mKXtpZihnPWpbaSsiICIrZl18fGpbIiogIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdCgiICIpLGhbMV09PT1mJiYoZz1qW2krIiAiK2hbMF1dfHxqWyIqICIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhWyJ0aHJvd3MiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmc/bDoiTm8gY29udmVyc2lvbiBmcm9tICIraSsiIHRvICIrZn19fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTpifX1uLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6UmIsdHlwZToiR0VUIixpc0xvY2FsOktiLnRlc3QoU2JbMV0pLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZToiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IixhY2NlcHRzOnsiKiI6UWIsdGV4dDoidGV4dC9wbGFpbiIsaHRtbDoidGV4dC9odG1sIix4bWw6ImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwiLGpzb246ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCJ9LGNvbnRlbnRzOnt4bWw6L1xieG1sXGIvLGh0bWw6L1xiaHRtbC8sanNvbjovXGJqc29uXGIvfSxyZXNwb25zZUZpZWxkczp7eG1sOiJyZXNwb25zZVhNTCIsdGV4dDoicmVzcG9uc2VUZXh0Iixqc29uOiJyZXNwb25zZUpTT04ifSxjb252ZXJ0ZXJzOnsiKiB0ZXh0IjpTdHJpbmcsInRleHQgaHRtbCI6ITAsInRleHQganNvbiI6bi5wYXJzZUpTT04sInRleHQgeG1sIjpuLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9WYihWYihhLG4uYWpheFNldHRpbmdzKSxiKTpWYihuLmFqYXhTZXR0aW5ncyxhKX0sYWpheFByZWZpbHRlcjpUYihPYiksYWpheFRyYW5zcG9ydDpUYihQYiksYWpheDpmdW5jdGlvbihiLGMpeyJvYmplY3QiPT10eXBlb2YgYiYmKGM9YixiPXZvaWQgMCksYz1jfHx7fTt2YXIgZCxlLGYsZyxoLGksaixrLGw9bi5hamF4U2V0dXAoe30sYyksbT1sLmNvbnRleHR8fGwsbz1sLmNvbnRleHQmJihtLm5vZGVUeXBlfHxtLmpxdWVyeSk/bihtKTpuLmV2ZW50LHA9bi5EZWZlcnJlZCgpLHE9bi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5Iikscj1sLnN0YXR1c0NvZGV8fHt9LHM9e30sdD17fSx1PTAsdj0iY2FuY2VsZWQiLHc9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihhKXt2YXIgYjtpZigyPT09dSl7aWYoIWspe2s9e307d2hpbGUoYj1KYi5leGVjKGcpKWtbYlsxXS50b0xvd2VyQ2FzZSgpXT1iWzJdfWI9a1thLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT1iP251bGw6Yn0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIDI9PT11P2c6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWEudG9Mb3dlckNhc2UoKTtyZXR1cm4gdXx8KGE9dFtjXT10W2NdfHxhLHNbYV09YiksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gdXx8KGwubWltZVR5cGU9YSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihhKXt2YXIgYjtpZihhKWlmKDI+dSlmb3IoYiBpbiBhKXJbYl09W3JbYl0sYVtiXV07ZWxzZSB3LmFsd2F5cyhhW3cuc3RhdHVzXSk7cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGEpe3ZhciBiPWF8fHY7cmV0dXJuIGomJmouYWJvcnQoYikseSgwLGIpLHRoaXN9fTtpZihwLnByb21pc2UodykuY29tcGxldGU9cS5hZGQsdy5zdWNjZXNzPXcuZG9uZSx3LmVycm9yPXcuZmFpbCxsLnVybD0oKGJ8fGwudXJsfHxSYikrIiIpLnJlcGxhY2UoSGIsIiIpLnJlcGxhY2UoTWIsU2JbMV0rIi8vIiksbC50eXBlPWMubWV0aG9kfHxjLnR5cGV8fGwubWV0aG9kfHxsLnR5cGUsbC5kYXRhVHlwZXM9bi50cmltKGwuZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5tYXRjaChHKXx8WyIiXSxudWxsPT1sLmNyb3NzRG9tYWluJiYoZD1OYi5leGVjKGwudXJsLnRvTG93ZXJDYXNlKCkpLGwuY3Jvc3NEb21haW49ISghZHx8ZFsxXT09PVNiWzFdJiZkWzJdPT09U2JbMl0mJihkWzNdfHwoImh0dHA6Ij09PWRbMV0/IjgwIjoiNDQzIikpPT09KFNiWzNdfHwoImh0dHA6Ij09PVNiWzFdPyI4MCI6IjQ0MyIpKSkpLGwuZGF0YSYmbC5wcm9jZXNzRGF0YSYmInN0cmluZyIhPXR5cGVvZiBsLmRhdGEmJihsLmRhdGE9bi5wYXJhbShsLmRhdGEsbC50cmFkaXRpb25hbCkpLFViKE9iLGwsYyx3KSwyPT09dSlyZXR1cm4gdztpPW4uZXZlbnQmJmwuZ2xvYmFsLGkmJjA9PT1uLmFjdGl2ZSsrJiZuLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpLGwudHlwZT1sLnR5cGUudG9VcHBlckNhc2UoKSxsLmhhc0NvbnRlbnQ9IUxiLnRlc3QobC50eXBlKSxmPWwudXJsLGwuaGFzQ29udGVudHx8KGwuZGF0YSYmKGY9bC51cmwrPShGYi50ZXN0KGYpPyImIjoiPyIpK2wuZGF0YSxkZWxldGUgbC5kYXRhKSxsLmNhY2hlPT09ITEmJihsLnVybD1JYi50ZXN0KGYpP2YucmVwbGFjZShJYiwiJDFfPSIrRWIrKyk6ZisoRmIudGVzdChmKT8iJiI6Ij8iKSsiXz0iK0ViKyspKSxsLmlmTW9kaWZpZWQmJihuLmxhc3RNb2RpZmllZFtmXSYmdy5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Nb2RpZmllZC1TaW5jZSIsbi5sYXN0TW9kaWZpZWRbZl0pLG4uZXRhZ1tmXSYmdy5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Ob25lLU1hdGNoIixuLmV0YWdbZl0pKSwobC5kYXRhJiZsLmhhc0NvbnRlbnQmJmwuY29udGVudFR5cGUhPT0hMXx8Yy5jb250ZW50VHlwZSkmJncuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIixsLmNvbnRlbnRUeXBlKSx3LnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIsbC5kYXRhVHlwZXNbMF0mJmwuYWNjZXB0c1tsLmRhdGFUeXBlc1swXV0/bC5hY2NlcHRzW2wuZGF0YVR5cGVzWzBdXSsoIioiIT09bC5kYXRhVHlwZXNbMF0/IiwgIitRYisiOyBxPTAuMDEiOiIiKTpsLmFjY2VwdHNbIioiXSk7Zm9yKGUgaW4gbC5oZWFkZXJzKXcuc2V0UmVxdWVzdEhlYWRlcihlLGwuaGVhZGVyc1tlXSk7aWYobC5iZWZvcmVTZW5kJiYobC5iZWZvcmVTZW5kLmNhbGwobSx3LGwpPT09ITF8fDI9PT11KSlyZXR1cm4gdy5hYm9ydCgpO3Y9ImFib3J0Ijtmb3IoZSBpbntzdWNjZXNzOjEsZXJyb3I6MSxjb21wbGV0ZToxfSl3W2VdKGxbZV0pO2lmKGo9VWIoUGIsbCxjLHcpKXtpZih3LnJlYWR5U3RhdGU9MSxpJiZvLnRyaWdnZXIoImFqYXhTZW5kIixbdyxsXSksMj09PXUpcmV0dXJuIHc7bC5hc3luYyYmbC50aW1lb3V0PjAmJihoPWEuc2V0VGltZW91dChmdW5jdGlvbigpe3cuYWJvcnQoInRpbWVvdXQiKX0sbC50aW1lb3V0KSk7dHJ5e3U9MSxqLnNlbmQocyx5KX1jYXRjaCh4KXtpZighKDI+dSkpdGhyb3cgeDt5KC0xLHgpfX1lbHNlIHkoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIHkoYixjLGQsZSl7dmFyIGsscyx0LHYseCx5PWM7MiE9PXUmJih1PTIsaCYmYS5jbGVhclRpbWVvdXQoaCksaj12b2lkIDAsZz1lfHwiIix3LnJlYWR5U3RhdGU9Yj4wPzQ6MCxrPWI+PTIwMCYmMzAwPmJ8fDMwND09PWIsZCYmKHY9V2IobCx3LGQpKSx2PVhiKGwsdix3LGspLGs/KGwuaWZNb2RpZmllZCYmKHg9dy5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLHgmJihuLmxhc3RNb2RpZmllZFtmXT14KSx4PXcuZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWciKSx4JiYobi5ldGFnW2ZdPXgpKSwyMDQ9PT1ifHwiSEVBRCI9PT1sLnR5cGU/eT0ibm9jb250ZW50IjozMDQ9PT1iP3k9Im5vdG1vZGlmaWVkIjooeT12LnN0YXRlLHM9di5kYXRhLHQ9di5lcnJvcixrPSF0KSk6KHQ9eSwhYiYmeXx8KHk9ImVycm9yIiwwPmImJihiPTApKSksdy5zdGF0dXM9Yix3LnN0YXR1c1RleHQ9KGN8fHkpKyIiLGs/cC5yZXNvbHZlV2l0aChtLFtzLHksd10pOnAucmVqZWN0V2l0aChtLFt3LHksdF0pLHcuc3RhdHVzQ29kZShyKSxyPXZvaWQgMCxpJiZvLnRyaWdnZXIoaz8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFt3LGwsaz9zOnRdKSxxLmZpcmVXaXRoKG0sW3cseV0pLGkmJihvLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW3csbF0pLC0tbi5hY3RpdmV8fG4uZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiB3fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5nZXQoYSxiLGMsImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uZ2V0KGEsdm9pZCAwLGIsInNjcmlwdCIpfX0pLG4uZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihhLGIpe25bYl09ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIG4uaXNGdW5jdGlvbihjKSYmKGU9ZXx8ZCxkPWMsYz12b2lkIDApLG4uYWpheChuLmV4dGVuZCh7dXJsOmEsdHlwZTpiLGRhdGFUeXBlOmUsZGF0YTpjLHN1Y2Nlc3M6ZH0sbi5pc1BsYWluT2JqZWN0KGEpJiZhKSl9fSksbi5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gbi5hamF4KHt1cmw6YSx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGNhY2hlOiEwLGFzeW5jOiExLGdsb2JhbDohMSwidGhyb3dzIjohMH0pfSxuLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihhKXtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLndyYXBBbGwoYS5jYWxsKHRoaXMsYikpfSk7aWYodGhpc1swXSl7dmFyIGI9bihhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApO3RoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSksYi5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzO3doaWxlKGEuZmlyc3RDaGlsZCYmMT09PWEuZmlyc3RDaGlsZC5ub2RlVHlwZSlhPWEuZmlyc3RDaGlsZDtyZXR1cm4gYX0pLmFwcGVuZCh0aGlzKX1yZXR1cm4gdGhpc30sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiBuLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPW4odGhpcyksYz1iLmNvbnRlbnRzKCk7Yy5sZW5ndGg/Yy53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7dmFyIGI9bi5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7bih0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsYyk6YSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe24ubm9kZU5hbWUodGhpcywiYm9keSIpfHxuKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KTtmdW5jdGlvbiBZYihhKXtyZXR1cm4gYS5zdHlsZSYmYS5zdHlsZS5kaXNwbGF5fHxuLmNzcyhhLCJkaXNwbGF5Iil9ZnVuY3Rpb24gWmIoYSl7aWYoIW4uY29udGFpbnMoYS5vd25lckRvY3VtZW50fHxkLGEpKXJldHVybiEwO3doaWxlKGEmJjE9PT1hLm5vZGVUeXBlKXtpZigibm9uZSI9PT1ZYihhKXx8ImhpZGRlbiI9PT1hLnR5cGUpcmV0dXJuITA7YT1hLnBhcmVudE5vZGV9cmV0dXJuITF9bi5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGEpe3JldHVybiBsLnJlbGlhYmxlSGlkZGVuT2Zmc2V0cygpP2Eub2Zmc2V0V2lkdGg8PTAmJmEub2Zmc2V0SGVpZ2h0PD0wJiYhYS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aDpaYihhKX0sbi5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihhKXtyZXR1cm4hbi5leHByLmZpbHRlcnMuaGlkZGVuKGEpfTt2YXIgJGI9LyUyMC9nLF9iPS9cW1xdJC8sYWM9L1xyP1xuL2csYmM9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLGNjPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBkYyhhLGIsYyxkKXt2YXIgZTtpZihuLmlzQXJyYXkoYikpbi5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHxfYi50ZXN0KGEpP2QoYSxlKTpkYyhhKyJbIisoIm9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT1lP2I6IiIpKyJdIixlLGMsZCl9KTtlbHNlIGlmKGN8fCJvYmplY3QiIT09bi50eXBlKGIpKWQoYSxiKTtlbHNlIGZvcihlIGluIGIpZGMoYSsiWyIrZSsiXSIsYltlXSxjLGQpfW4ucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXtiPW4uaXNGdW5jdGlvbihiKT9iKCk6bnVsbD09Yj8iIjpiLGRbZC5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChhKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfTtpZih2b2lkIDA9PT1iJiYoYj1uLmFqYXhTZXR0aW5ncyYmbi5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLG4uaXNBcnJheShhKXx8YS5qcXVlcnkmJiFuLmlzUGxhaW5PYmplY3QoYSkpbi5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlkYyhjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKCImIikucmVwbGFjZSgkYiwiKyIpfSxuLmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG4ucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT1uLnByb3AodGhpcywiZWxlbWVudHMiKTtyZXR1cm4gYT9uLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFuKHRoaXMpLmlzKCI6ZGlzYWJsZWQiKSYmY2MudGVzdCh0aGlzLm5vZGVOYW1lKSYmIWJjLnRlc3QoYSkmJih0aGlzLmNoZWNrZWR8fCFaLnRlc3QoYSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9bih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09Yz9udWxsOm4uaXNBcnJheShjKT9uLm1hcChjLGZ1bmN0aW9uKGEpe3JldHVybntuYW1lOmIubmFtZSx2YWx1ZTphLnJlcGxhY2UoYWMsIlxyXG4iKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKGFjLCJcclxuIil9fSkuZ2V0KCl9fSksbi5hamF4U2V0dGluZ3MueGhyPXZvaWQgMCE9PWEuQWN0aXZlWE9iamVjdD9mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTG9jYWw/aWMoKTpkLmRvY3VtZW50TW9kZT44P2hjKCk6L14oZ2V0fHBvc3R8aGVhZHxwdXR8ZGVsZXRlfG9wdGlvbnMpJC9pLnRlc3QodGhpcy50eXBlKSYmaGMoKXx8aWMoKX06aGM7dmFyIGVjPTAsZmM9e30sZ2M9bi5hamF4U2V0dGluZ3MueGhyKCk7YS5hdHRhY2hFdmVudCYmYS5hdHRhY2hFdmVudCgib251bmxvYWQiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIGZjKWZjW2FdKHZvaWQgMCwhMCl9KSxsLmNvcnM9ISFnYyYmIndpdGhDcmVkZW50aWFscyJpbiBnYyxnYz1sLmFqYXg9ISFnYyxnYyYmbi5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGIpe2lmKCFiLmNyb3NzRG9tYWlufHxsLmNvcnMpe3ZhciBjO3JldHVybntzZW5kOmZ1bmN0aW9uKGQsZSl7dmFyIGYsZz1iLnhocigpLGg9KytlYztpZihnLm9wZW4oYi50eXBlLGIudXJsLGIuYXN5bmMsYi51c2VybmFtZSxiLnBhc3N3b3JkKSxiLnhockZpZWxkcylmb3IoZiBpbiBiLnhockZpZWxkcylnW2ZdPWIueGhyRmllbGRzW2ZdO2IubWltZVR5cGUmJmcub3ZlcnJpZGVNaW1lVHlwZSYmZy5vdmVycmlkZU1pbWVUeXBlKGIubWltZVR5cGUpLGIuY3Jvc3NEb21haW58fGRbIlgtUmVxdWVzdGVkLVdpdGgiXXx8KGRbIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKTtmb3IoZiBpbiBkKXZvaWQgMCE9PWRbZl0mJmcuc2V0UmVxdWVzdEhlYWRlcihmLGRbZl0rIiIpO2cuc2VuZChiLmhhc0NvbnRlbnQmJmIuZGF0YXx8bnVsbCksYz1mdW5jdGlvbihhLGQpe3ZhciBmLGksajtpZihjJiYoZHx8ND09PWcucmVhZHlTdGF0ZSkpaWYoZGVsZXRlIGZjW2hdLGM9dm9pZCAwLGcub25yZWFkeXN0YXRlY2hhbmdlPW4ubm9vcCxkKTQhPT1nLnJlYWR5U3RhdGUmJmcuYWJvcnQoKTtlbHNle2o9e30sZj1nLnN0YXR1cywic3RyaW5nIj09dHlwZW9mIGcucmVzcG9uc2VUZXh0JiYoai50ZXh0PWcucmVzcG9uc2VUZXh0KTt0cnl7aT1nLnN0YXR1c1RleHR9Y2F0Y2goayl7aT0iIn1mfHwhYi5pc0xvY2FsfHxiLmNyb3NzRG9tYWluPzEyMjM9PT1mJiYoZj0yMDQpOmY9ai50ZXh0PzIwMDo0MDR9aiYmZShmLGksaixnLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKX0sYi5hc3luYz80PT09Zy5yZWFkeVN0YXRlP2Euc2V0VGltZW91dChjKTpnLm9ucmVhZHlzdGF0ZWNoYW5nZT1mY1toXT1jOmMoKX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKHZvaWQgMCwhMCl9fX19KTtmdW5jdGlvbiBoYygpe3RyeXtyZXR1cm4gbmV3IGEuWE1MSHR0cFJlcXVlc3R9Y2F0Y2goYil7fX1mdW5jdGlvbiBpYygpe3RyeXtyZXR1cm4gbmV3IGEuQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKX1jYXRjaChiKXt9fW4uYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0In0sY29udGVudHM6e3NjcmlwdDovXGIoPzpqYXZhfGVjbWEpc2NyaXB0XGIvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGEpe3JldHVybiBuLmdsb2JhbEV2YWwoYSksYX19fSksbi5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEuY2FjaGUmJihhLmNhY2hlPSExKSxhLmNyb3NzRG9tYWluJiYoYS50eXBlPSJHRVQiLGEuZ2xvYmFsPSExKX0pLG4uYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgYixjPWQuaGVhZHx8bigiaGVhZCIpWzBdfHxkLmRvY3VtZW50RWxlbWVudDtyZXR1cm57c2VuZDpmdW5jdGlvbihlLGYpe2I9ZC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSxiLmFzeW5jPSEwLGEuc2NyaXB0Q2hhcnNldCYmKGIuY2hhcnNldD1hLnNjcmlwdENoYXJzZXQpLGIuc3JjPWEudXJsLGIub25sb2FkPWIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKGEsYyl7KGN8fCFiLnJlYWR5U3RhdGV8fC9sb2FkZWR8Y29tcGxldGUvLnRlc3QoYi5yZWFkeVN0YXRlKSkmJihiLm9ubG9hZD1iLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbCxjfHxmKDIwMCwic3VjY2VzcyIpKX0sYy5pbnNlcnRCZWZvcmUoYixjLmZpcnN0Q2hpbGQpfSxhYm9ydDpmdW5jdGlvbigpe2ImJmIub25sb2FkKHZvaWQgMCwhMCl9fX19KTt2YXIgamM9W10sa2M9Lyg9KVw/KD89JnwkKXxcP1w/LztuLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9amMucG9wKCl8fG4uZXhwYW5kbysiXyIrRWIrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLG4uYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKGtjLnRlc3QoYi51cmwpPyJ1cmwiOiJzdHJpbmciPT10eXBlb2YgYi5kYXRhJiYwPT09KGIuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYma2MudGVzdChiLmRhdGEpJiYiZGF0YSIpO3JldHVybiBofHwianNvbnAiPT09Yi5kYXRhVHlwZXNbMF0/KGU9Yi5qc29ucENhbGxiYWNrPW4uaXNGdW5jdGlvbihiLmpzb25wQ2FsbGJhY2spP2IuanNvbnBDYWxsYmFjaygpOmIuanNvbnBDYWxsYmFjayxoP2JbaF09YltoXS5yZXBsYWNlKGtjLCIkMSIrZSk6Yi5qc29ucCE9PSExJiYoYi51cmwrPShGYi50ZXN0KGIudXJsKT8iJiI6Ij8iKStiLmpzb25wKyI9IitlKSxiLmNvbnZlcnRlcnNbInNjcmlwdCBqc29uIl09ZnVuY3Rpb24oKXtyZXR1cm4gZ3x8bi5lcnJvcihlKyIgd2FzIG5vdCBjYWxsZWQiKSxnWzBdfSxiLmRhdGFUeXBlc1swXT0ianNvbiIsZj1hW2VdLGFbZV09ZnVuY3Rpb24oKXtnPWFyZ3VtZW50c30sZC5hbHdheXMoZnVuY3Rpb24oKXt2b2lkIDA9PT1mP24oYSkucmVtb3ZlUHJvcChlKTphW2VdPWYsYltlXSYmKGIuanNvbnBDYWxsYmFjaz1jLmpzb25wQ2FsbGJhY2ssamMucHVzaChlKSksZyYmbi5pc0Z1bmN0aW9uKGYpJiZmKGdbMF0pLGc9Zj12b2lkIDB9KSwic2NyaXB0Iik6dm9pZCAwfSksbi5wYXJzZUhUTUw9ZnVuY3Rpb24oYSxiLGMpe2lmKCFhfHwic3RyaW5nIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7ImJvb2xlYW4iPT10eXBlb2YgYiYmKGM9YixiPSExKSxiPWJ8fGQ7dmFyIGU9eC5leGVjKGEpLGY9IWMmJltdO3JldHVybiBlP1tiLmNyZWF0ZUVsZW1lbnQoZVsxXSldOihlPWphKFthXSxiLGYpLGYmJmYubGVuZ3RoJiZuKGYpLnJlbW92ZSgpLG4ubWVyZ2UoW10sZS5jaGlsZE5vZGVzKSl9O3ZhciBsYz1uLmZuLmxvYWQ7bi5mbi5sb2FkPWZ1bmN0aW9uKGEsYixjKXtpZigic3RyaW5nIiE9dHlwZW9mIGEmJmxjKXJldHVybiBsYy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGQsZSxmLGc9dGhpcyxoPWEuaW5kZXhPZigiICIpO3JldHVybiBoPi0xJiYoZD1uLnRyaW0oYS5zbGljZShoLGEubGVuZ3RoKSksYT1hLnNsaWNlKDAsaCkpLG4uaXNGdW5jdGlvbihiKT8oYz1iLGI9dm9pZCAwKTpiJiYib2JqZWN0Ij09dHlwZW9mIGImJihlPSJQT1NUIiksZy5sZW5ndGg+MCYmbi5hamF4KHt1cmw6YSx0eXBlOmV8fCJHRVQiLGRhdGFUeXBlOiJodG1sIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2Y9YXJndW1lbnRzLGcuaHRtbChkP24oIjxkaXY+IikuYXBwZW5kKG4ucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuYWx3YXlzKGMmJmZ1bmN0aW9uKGEsYil7Zy5lYWNoKGZ1bmN0aW9uKCl7Yy5hcHBseSh0aGlzLGZ8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pfSksdGhpc30sbi5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksbi5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZ3JlcChuLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH07ZnVuY3Rpb24gbWMoYSl7cmV0dXJuIG4uaXNXaW5kb3coYSk/YTo5PT09YS5ub2RlVHlwZT9hLmRlZmF1bHRWaWV3fHxhLnBhcmVudFdpbmRvdzohMX1uLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrPW4uY3NzKGEsInBvc2l0aW9uIiksbD1uKGEpLG09e307InN0YXRpYyI9PT1rJiYoYS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKSxoPWwub2Zmc2V0KCksZj1uLmNzcyhhLCJ0b3AiKSxpPW4uY3NzKGEsImxlZnQiKSxqPSgiYWJzb2x1dGUiPT09a3x8ImZpeGVkIj09PWspJiZuLmluQXJyYXkoImF1dG8iLFtmLGldKT4tMSxqPyhkPWwucG9zaXRpb24oKSxnPWQudG9wLGU9ZC5sZWZ0KTooZz1wYXJzZUZsb2F0KGYpfHwwLGU9cGFyc2VGbG9hdChpKXx8MCksbi5pc0Z1bmN0aW9uKGIpJiYoYj1iLmNhbGwoYSxjLG4uZXh0ZW5kKHt9LGgpKSksbnVsbCE9Yi50b3AmJihtLnRvcD1iLnRvcC1oLnRvcCtnKSxudWxsIT1iLmxlZnQmJihtLmxlZnQ9Yi5sZWZ0LWgubGVmdCtlKSwidXNpbmciaW4gYj9iLnVzaW5nLmNhbGwoYSxtKTpsLmNzcyhtKX19LG4uZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24oYSl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09YT90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihiKXtuLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGIpfSk7dmFyIGIsYyxkPXt0b3A6MCxsZWZ0OjB9LGU9dGhpc1swXSxmPWUmJmUub3duZXJEb2N1bWVudDtpZihmKXJldHVybiBiPWYuZG9jdW1lbnRFbGVtZW50LG4uY29udGFpbnMoYixlKT8oInVuZGVmaW5lZCIhPXR5cGVvZiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCYmKGQ9ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksYz1tYyhmKSx7dG9wOmQudG9wKyhjLnBhZ2VZT2Zmc2V0fHxiLnNjcm9sbFRvcCktKGIuY2xpZW50VG9wfHwwKSxsZWZ0OmQubGVmdCsoYy5wYWdlWE9mZnNldHx8Yi5zY3JvbGxMZWZ0KS0oYi5jbGllbnRMZWZ0fHwwKX0pOmR9LHBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpc1swXSl7dmFyIGEsYixjPXt0b3A6MCxsZWZ0OjB9LGQ9dGhpc1swXTtyZXR1cm4iZml4ZWQiPT09bi5jc3MoZCwicG9zaXRpb24iKT9iPWQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6KGE9dGhpcy5vZmZzZXRQYXJlbnQoKSxiPXRoaXMub2Zmc2V0KCksbi5ub2RlTmFtZShhWzBdLCJodG1sIil8fChjPWEub2Zmc2V0KCkpLGMudG9wKz1uLmNzcyhhWzBdLCJib3JkZXJUb3BXaWR0aCIsITApLGMubGVmdCs9bi5jc3MoYVswXSwiYm9yZGVyTGVmdFdpZHRoIiwhMCkpLHt0b3A6Yi50b3AtYy50b3Atbi5jc3MoZCwibWFyZ2luVG9wIiwhMCksbGVmdDpiLmxlZnQtYy5sZWZ0LW4uY3NzKGQsIm1hcmdpbkxlZnQiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudDt3aGlsZShhJiYhbi5ub2RlTmFtZShhLCJodG1sIikmJiJzdGF0aWMiPT09bi5jc3MoYSwicG9zaXRpb24iKSlhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfHxRYX0pfX0pLG4uZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPS9ZLy50ZXN0KGIpO24uZm5bYV09ZnVuY3Rpb24oZCl7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhLGQsZSl7dmFyIGY9bWMoYSk7cmV0dXJuIHZvaWQgMD09PWU/Zj9iIGluIGY/ZltiXTpmLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtkXTphW2RdOnZvaWQoZj9mLnNjcm9sbFRvKGM/bihmKS5zY3JvbGxMZWZ0KCk6ZSxjP2U6bihmKS5zY3JvbGxUb3AoKSk6YVtkXT1lKX0sYSxkLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSksbi5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT1VYShsLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8oYz1TYShhLGIpLE9hLnRlc3QoYyk/bihhKS5wb3NpdGlvbigpW2JdKyJweCI6Yyk6dm9pZCAwfSl9KSxuLmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihhLGIpe24uZWFjaCh7CnBhZGRpbmc6ImlubmVyIithLGNvbnRlbnQ6YiwiIjoib3V0ZXIiK2F9LGZ1bmN0aW9uKGMsZCl7bi5mbltkXT1mdW5jdGlvbihkLGUpe3ZhciBmPWFyZ3VtZW50cy5sZW5ndGgmJihjfHwiYm9vbGVhbiIhPXR5cGVvZiBkKSxnPWN8fChkPT09ITB8fGU9PT0hMD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihiLGMsZCl7dmFyIGU7cmV0dXJuIG4uaXNXaW5kb3coYik/Yi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrYV06OT09PWIubm9kZVR5cGU/KGU9Yi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoYi5ib2R5WyJzY3JvbGwiK2FdLGVbInNjcm9sbCIrYV0sYi5ib2R5WyJvZmZzZXQiK2FdLGVbIm9mZnNldCIrYV0sZVsiY2xpZW50IithXSkpOnZvaWQgMD09PWQ/bi5jc3MoYixjLGcpOm4uc3R5bGUoYixjLGQsZyl9LGIsZj9kOnZvaWQgMCxmLG51bGwpfX0pfSksbi5mbi5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLm9uKGEsbnVsbCxiLGMpfSx1bmJpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5vZmYoYSxudWxsLGIpfSxkZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihiLGEsYyxkKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGEsIioqIik6dGhpcy5vZmYoYixhfHwiKioiLGMpfX0pLG4uZm4uc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sbi5mbi5hbmRTZWxmPW4uZm4uYWRkQmFjaywiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4gbn0pO3ZhciBuYz1hLmpRdWVyeSxvYz1hLiQ7cmV0dXJuIG4ubm9Db25mbGljdD1mdW5jdGlvbihiKXtyZXR1cm4gYS4kPT09biYmKGEuJD1vYyksYiYmYS5qUXVlcnk9PT1uJiYoYS5qUXVlcnk9bmMpLG59LGJ8fChhLmpRdWVyeT1hLiQ9biksbn0pOwo="},{"meta":{"name":"vue.min.js","url":"https://cdn.staticfile.org/vue/2.4.2/vue.min.js","ts":1608308905353,"mimetype":"text/javascript"},"source":"LyohCiAqIFZ1ZS5qcyB2Mi40LjIKICogKGMpIDIwMTQtMjAxNyBFdmFuIFlvdQogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuCiAqLwohZnVuY3Rpb24odCxlKXsib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKToiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShlKTp0LlZ1ZT1lKCl9KHRoaXMsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gdCh0KXtyZXR1cm4gdm9pZCAwPT09dHx8bnVsbD09PXR9ZnVuY3Rpb24gZSh0KXtyZXR1cm4gdm9pZCAwIT09dCYmbnVsbCE9PXR9ZnVuY3Rpb24gbih0KXtyZXR1cm4hMD09PXR9ZnVuY3Rpb24gcih0KXtyZXR1cm4hMT09PXR9ZnVuY3Rpb24gaSh0KXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHR8fCJudW1iZXIiPT10eXBlb2YgdHx8ImJvb2xlYW4iPT10eXBlb2YgdH1mdW5jdGlvbiBvKHQpe3JldHVybiBudWxsIT09dCYmIm9iamVjdCI9PXR5cGVvZiB0fWZ1bmN0aW9uIGEodCl7cmV0dXJuIltvYmplY3QgT2JqZWN0XSI9PT1waS5jYWxsKHQpfWZ1bmN0aW9uIHModCl7cmV0dXJuIltvYmplY3QgUmVnRXhwXSI9PT1waS5jYWxsKHQpfWZ1bmN0aW9uIGModCl7dmFyIGU9cGFyc2VGbG9hdCh0KTtyZXR1cm4gZT49MCYmTWF0aC5mbG9vcihlKT09PWUmJmlzRmluaXRlKHQpfWZ1bmN0aW9uIHUodCl7cmV0dXJuIG51bGw9PXQ/IiI6Im9iamVjdCI9PXR5cGVvZiB0P0pTT04uc3RyaW5naWZ5KHQsbnVsbCwyKTpTdHJpbmcodCl9ZnVuY3Rpb24gbCh0KXt2YXIgZT1wYXJzZUZsb2F0KHQpO3JldHVybiBpc05hTihlKT90OmV9ZnVuY3Rpb24gZih0LGUpe2Zvcih2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9dC5zcGxpdCgiLCIpLGk9MDtpPHIubGVuZ3RoO2krKyluW3JbaV1dPSEwO3JldHVybiBlP2Z1bmN0aW9uKHQpe3JldHVybiBuW3QudG9Mb3dlckNhc2UoKV19OmZ1bmN0aW9uKHQpe3JldHVybiBuW3RdfX1mdW5jdGlvbiBwKHQsZSl7aWYodC5sZW5ndGgpe3ZhciBuPXQuaW5kZXhPZihlKTtpZihuPi0xKXJldHVybiB0LnNwbGljZShuLDEpfX1mdW5jdGlvbiBkKHQsZSl7cmV0dXJuIGhpLmNhbGwodCxlKX1mdW5jdGlvbiB2KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBlW25dfHwoZVtuXT10KG4pKX19ZnVuY3Rpb24gaCh0LGUpe2Z1bmN0aW9uIG4obil7dmFyIHI9YXJndW1lbnRzLmxlbmd0aDtyZXR1cm4gcj9yPjE/dC5hcHBseShlLGFyZ3VtZW50cyk6dC5jYWxsKGUsbik6dC5jYWxsKGUpfXJldHVybiBuLl9sZW5ndGg9dC5sZW5ndGgsbn1mdW5jdGlvbiBtKHQsZSl7ZT1lfHwwO2Zvcih2YXIgbj10Lmxlbmd0aC1lLHI9bmV3IEFycmF5KG4pO24tLTspcltuXT10W24rZV07cmV0dXJuIHJ9ZnVuY3Rpb24geSh0LGUpe2Zvcih2YXIgbiBpbiBlKXRbbl09ZVtuXTtyZXR1cm4gdH1mdW5jdGlvbiBnKHQpe2Zvcih2YXIgZT17fSxuPTA7bjx0Lmxlbmd0aDtuKyspdFtuXSYmeShlLHRbbl0pO3JldHVybiBlfWZ1bmN0aW9uIF8odCxlLG4pe31mdW5jdGlvbiBiKHQsZSl7aWYodD09PWUpcmV0dXJuITA7dmFyIG49byh0KSxyPW8oZSk7aWYoIW58fCFyKXJldHVybiFuJiYhciYmU3RyaW5nKHQpPT09U3RyaW5nKGUpO3RyeXt2YXIgaT1BcnJheS5pc0FycmF5KHQpLGE9QXJyYXkuaXNBcnJheShlKTtpZihpJiZhKXJldHVybiB0Lmxlbmd0aD09PWUubGVuZ3RoJiZ0LmV2ZXJ5KGZ1bmN0aW9uKHQsbil7cmV0dXJuIGIodCxlW25dKX0pO2lmKGl8fGEpcmV0dXJuITE7dmFyIHM9T2JqZWN0LmtleXModCksYz1PYmplY3Qua2V5cyhlKTtyZXR1cm4gcy5sZW5ndGg9PT1jLmxlbmd0aCYmcy5ldmVyeShmdW5jdGlvbihuKXtyZXR1cm4gYih0W25dLGVbbl0pfSl9Y2F0Y2godCl7cmV0dXJuITF9fWZ1bmN0aW9uICQodCxlKXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKylpZihiKHRbbl0sZSkpcmV0dXJuIG47cmV0dXJuLTF9ZnVuY3Rpb24gQyh0KXt2YXIgZT0hMTtyZXR1cm4gZnVuY3Rpb24oKXtlfHwoZT0hMCx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fWZ1bmN0aW9uIHcodCl7dmFyIGU9KHQrIiIpLmNoYXJDb2RlQXQoMCk7cmV0dXJuIDM2PT09ZXx8OTU9PT1lfWZ1bmN0aW9uIHgodCxlLG4scil7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7dmFsdWU6bixlbnVtZXJhYmxlOiEhcix3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KX1mdW5jdGlvbiBBKHQpe2lmKCFUaS50ZXN0KHQpKXt2YXIgZT10LnNwbGl0KCIuIik7cmV0dXJuIGZ1bmN0aW9uKHQpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXtpZighdClyZXR1cm47dD10W2Vbbl1dfXJldHVybiB0fX19ZnVuY3Rpb24gayh0LGUsbil7aWYoa2kuZXJyb3JIYW5kbGVyKWtpLmVycm9ySGFuZGxlci5jYWxsKG51bGwsdCxlLG4pO2Vsc2V7aWYoIWppfHwidW5kZWZpbmVkIj09dHlwZW9mIGNvbnNvbGUpdGhyb3cgdDtjb25zb2xlLmVycm9yKHQpfX1mdW5jdGlvbiBPKHQpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0JiYvbmF0aXZlIGNvZGUvLnRlc3QodC50b1N0cmluZygpKX1mdW5jdGlvbiBUKHQpe0dpLnRhcmdldCYmWmkucHVzaChHaS50YXJnZXQpLEdpLnRhcmdldD10fWZ1bmN0aW9uIFMoKXtHaS50YXJnZXQ9WmkucG9wKCl9ZnVuY3Rpb24gRSh0LGUsbil7dC5fX3Byb3RvX189ZX1mdW5jdGlvbiBqKHQsZSxuKXtmb3IodmFyIHI9MCxpPW4ubGVuZ3RoO3I8aTtyKyspe3ZhciBvPW5bcl07eCh0LG8sZVtvXSl9fWZ1bmN0aW9uIEwodCxlKXtpZihvKHQpKXt2YXIgbjtyZXR1cm4gZCh0LCJfX29iX18iKSYmdC5fX29iX18gaW5zdGFuY2VvZiBlbz9uPXQuX19vYl9fOnRvLnNob3VsZENvbnZlcnQmJiF6aSgpJiYoQXJyYXkuaXNBcnJheSh0KXx8YSh0KSkmJk9iamVjdC5pc0V4dGVuc2libGUodCkmJiF0Ll9pc1Z1ZSYmKG49bmV3IGVvKHQpKSxlJiZuJiZuLnZtQ291bnQrKyxufX1mdW5jdGlvbiBOKHQsZSxuLHIsaSl7dmFyIG89bmV3IEdpLGE9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGUpO2lmKCFhfHwhMSE9PWEuY29uZmlndXJhYmxlKXt2YXIgcz1hJiZhLmdldCxjPWEmJmEuc2V0LHU9IWkmJkwobik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9cz9zLmNhbGwodCk6bjtyZXR1cm4gR2kudGFyZ2V0JiYoby5kZXBlbmQoKSx1JiZ1LmRlcC5kZXBlbmQoKSxBcnJheS5pc0FycmF5KGUpJiZEKGUpKSxlfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHI9cz9zLmNhbGwodCk6bjtlPT09cnx8ZSE9PWUmJnIhPT1yfHwoYz9jLmNhbGwodCxlKTpuPWUsdT0haSYmTChlKSxvLm5vdGlmeSgpKX19KX19ZnVuY3Rpb24gSSh0LGUsbil7aWYoQXJyYXkuaXNBcnJheSh0KSYmYyhlKSlyZXR1cm4gdC5sZW5ndGg9TWF0aC5tYXgodC5sZW5ndGgsZSksdC5zcGxpY2UoZSwxLG4pLG47aWYoZCh0LGUpKXJldHVybiB0W2VdPW4sbjt2YXIgcj10Ll9fb2JfXztyZXR1cm4gdC5faXNWdWV8fHImJnIudm1Db3VudD9uOnI/KE4oci52YWx1ZSxlLG4pLHIuZGVwLm5vdGlmeSgpLG4pOih0W2VdPW4sbil9ZnVuY3Rpb24gTSh0LGUpe2lmKEFycmF5LmlzQXJyYXkodCkmJmMoZSkpdC5zcGxpY2UoZSwxKTtlbHNle3ZhciBuPXQuX19vYl9fO3QuX2lzVnVlfHxuJiZuLnZtQ291bnR8fGQodCxlKSYmKGRlbGV0ZSB0W2VdLG4mJm4uZGVwLm5vdGlmeSgpKX19ZnVuY3Rpb24gRCh0KXtmb3IodmFyIGU9dm9pZCAwLG49MCxyPXQubGVuZ3RoO248cjtuKyspKGU9dFtuXSkmJmUuX19vYl9fJiZlLl9fb2JfXy5kZXAuZGVwZW5kKCksQXJyYXkuaXNBcnJheShlKSYmRChlKX1mdW5jdGlvbiBQKHQsZSl7aWYoIWUpcmV0dXJuIHQ7Zm9yKHZhciBuLHIsaSxvPU9iamVjdC5rZXlzKGUpLHM9MDtzPG8ubGVuZ3RoO3MrKylyPXRbbj1vW3NdXSxpPWVbbl0sZCh0LG4pP2EocikmJmEoaSkmJlAocixpKTpJKHQsbixpKTtyZXR1cm4gdH1mdW5jdGlvbiBGKHQsZSxuKXtyZXR1cm4gbj90fHxlP2Z1bmN0aW9uKCl7dmFyIHI9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZS5jYWxsKG4pOmUsaT0iZnVuY3Rpb24iPT10eXBlb2YgdD90LmNhbGwobik6dm9pZCAwO3JldHVybiByP1AocixpKTppfTp2b2lkIDA6ZT90P2Z1bmN0aW9uKCl7cmV0dXJuIFAoImZ1bmN0aW9uIj09dHlwZW9mIGU/ZS5jYWxsKHRoaXMpOmUsImZ1bmN0aW9uIj09dHlwZW9mIHQ/dC5jYWxsKHRoaXMpOnQpfTplOnR9ZnVuY3Rpb24gUih0LGUpe3JldHVybiBlP3Q/dC5jb25jYXQoZSk6QXJyYXkuaXNBcnJheShlKT9lOltlXTp0fWZ1bmN0aW9uIEgodCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKHR8fG51bGwpO3JldHVybiBlP3kobixlKTpufWZ1bmN0aW9uIEIodCl7dmFyIGU9dC5wcm9wcztpZihlKXt2YXIgbixyLGk9e307aWYoQXJyYXkuaXNBcnJheShlKSlmb3Iobj1lLmxlbmd0aDtuLS07KSJzdHJpbmciPT10eXBlb2Yocj1lW25dKSYmKGlbeWkocildPXt0eXBlOm51bGx9KTtlbHNlIGlmKGEoZSkpZm9yKHZhciBvIGluIGUpcj1lW29dLGlbeWkobyldPWEocik/cjp7dHlwZTpyfTt0LnByb3BzPWl9fWZ1bmN0aW9uIFUodCl7dmFyIGU9dC5pbmplY3Q7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIG49dC5pbmplY3Q9e30scj0wO3I8ZS5sZW5ndGg7cisrKW5bZVtyXV09ZVtyXX1mdW5jdGlvbiBWKHQpe3ZhciBlPXQuZGlyZWN0aXZlcztpZihlKWZvcih2YXIgbiBpbiBlKXt2YXIgcj1lW25dOyJmdW5jdGlvbiI9PXR5cGVvZiByJiYoZVtuXT17YmluZDpyLHVwZGF0ZTpyfSl9fWZ1bmN0aW9uIHoodCxlLG4pe2Z1bmN0aW9uIHIocil7dmFyIGk9bm9bcl18fHJvO2Nbcl09aSh0W3JdLGVbcl0sbixyKX0iZnVuY3Rpb24iPT10eXBlb2YgZSYmKGU9ZS5vcHRpb25zKSxCKGUpLFUoZSksVihlKTt2YXIgaT1lLmV4dGVuZHM7aWYoaSYmKHQ9eih0LGksbikpLGUubWl4aW5zKWZvcih2YXIgbz0wLGE9ZS5taXhpbnMubGVuZ3RoO288YTtvKyspdD16KHQsZS5taXhpbnNbb10sbik7dmFyIHMsYz17fTtmb3IocyBpbiB0KXIocyk7Zm9yKHMgaW4gZSlkKHQscyl8fHIocyk7cmV0dXJuIGN9ZnVuY3Rpb24gSyh0LGUsbixyKXtpZigic3RyaW5nIj09dHlwZW9mIG4pe3ZhciBpPXRbZV07aWYoZChpLG4pKXJldHVybiBpW25dO3ZhciBvPXlpKG4pO2lmKGQoaSxvKSlyZXR1cm4gaVtvXTt2YXIgYT1naShvKTtpZihkKGksYSkpcmV0dXJuIGlbYV07dmFyIHM9aVtuXXx8aVtvXXx8aVthXTtyZXR1cm4gc319ZnVuY3Rpb24gSih0LGUsbixyKXt2YXIgaT1lW3RdLG89IWQobix0KSxhPW5bdF07aWYoRyhCb29sZWFuLGkudHlwZSkmJihvJiYhZChpLCJkZWZhdWx0Iik/YT0hMTpHKFN0cmluZyxpLnR5cGUpfHwiIiE9PWEmJmEhPT1iaSh0KXx8KGE9ITApKSx2b2lkIDA9PT1hKXthPXEocixpLHQpO3ZhciBzPXRvLnNob3VsZENvbnZlcnQ7dG8uc2hvdWxkQ29udmVydD0hMCxMKGEpLHRvLnNob3VsZENvbnZlcnQ9c31yZXR1cm4gYX1mdW5jdGlvbiBxKHQsZSxuKXtpZihkKGUsImRlZmF1bHQiKSl7dmFyIHI9ZS5kZWZhdWx0O3JldHVybiB0JiZ0LiRvcHRpb25zLnByb3BzRGF0YSYmdm9pZCAwPT09dC4kb3B0aW9ucy5wcm9wc0RhdGFbbl0mJnZvaWQgMCE9PXQuX3Byb3BzW25dP3QuX3Byb3BzW25dOiJmdW5jdGlvbiI9PXR5cGVvZiByJiYiRnVuY3Rpb24iIT09VyhlLnR5cGUpP3IuY2FsbCh0KTpyfX1mdW5jdGlvbiBXKHQpe3ZhciBlPXQmJnQudG9TdHJpbmcoKS5tYXRjaCgvXlxzKmZ1bmN0aW9uIChcdyspLyk7cmV0dXJuIGU/ZVsxXToiIn1mdW5jdGlvbiBHKHQsZSl7aWYoIUFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIFcoZSk9PT1XKHQpO2Zvcih2YXIgbj0wLHI9ZS5sZW5ndGg7bjxyO24rKylpZihXKGVbbl0pPT09Vyh0KSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBaKHQpe3JldHVybiBuZXcgaW8odm9pZCAwLHZvaWQgMCx2b2lkIDAsU3RyaW5nKHQpKX1mdW5jdGlvbiBZKHQpe3ZhciBlPW5ldyBpbyh0LnRhZyx0LmRhdGEsdC5jaGlsZHJlbix0LnRleHQsdC5lbG0sdC5jb250ZXh0LHQuY29tcG9uZW50T3B0aW9ucyx0LmFzeW5jRmFjdG9yeSk7cmV0dXJuIGUubnM9dC5ucyxlLmlzU3RhdGljPXQuaXNTdGF0aWMsZS5rZXk9dC5rZXksZS5pc0NvbW1lbnQ9dC5pc0NvbW1lbnQsZS5pc0Nsb25lZD0hMCxlfWZ1bmN0aW9uIFEodCl7Zm9yKHZhciBlPXQubGVuZ3RoLG49bmV3IEFycmF5KGUpLHI9MDtyPGU7cisrKW5bcl09WSh0W3JdKTtyZXR1cm4gbn1mdW5jdGlvbiBYKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMsbj1lLmZucztpZighQXJyYXkuaXNBcnJheShuKSlyZXR1cm4gbi5hcHBseShudWxsLGFyZ3VtZW50cyk7Zm9yKHZhciByPW4uc2xpY2UoKSxpPTA7aTxyLmxlbmd0aDtpKyspcltpXS5hcHBseShudWxsLHQpfXJldHVybiBlLmZucz10LGV9ZnVuY3Rpb24gdHQoZSxuLHIsaSxvKXt2YXIgYSxzLGMsdTtmb3IoYSBpbiBlKXM9ZVthXSxjPW5bYV0sdT1jbyhhKSx0KHMpfHwodChjKT8odChzLmZucykmJihzPWVbYV09WChzKSkscih1Lm5hbWUscyx1Lm9uY2UsdS5jYXB0dXJlLHUucGFzc2l2ZSkpOnMhPT1jJiYoYy5mbnM9cyxlW2FdPWMpKTtmb3IoYSBpbiBuKXQoZVthXSkmJmkoKHU9Y28oYSkpLm5hbWUsblthXSx1LmNhcHR1cmUpfWZ1bmN0aW9uIGV0KHIsaSxvKXtmdW5jdGlvbiBhKCl7by5hcHBseSh0aGlzLGFyZ3VtZW50cykscChzLmZucyxhKX12YXIgcyxjPXJbaV07dChjKT9zPVgoW2FdKTplKGMuZm5zKSYmbihjLm1lcmdlZCk/KHM9YykuZm5zLnB1c2goYSk6cz1YKFtjLGFdKSxzLm1lcmdlZD0hMCxyW2ldPXN9ZnVuY3Rpb24gbnQobixyLGkpe3ZhciBvPXIub3B0aW9ucy5wcm9wcztpZighdChvKSl7dmFyIGE9e30scz1uLmF0dHJzLGM9bi5wcm9wcztpZihlKHMpfHxlKGMpKWZvcih2YXIgdSBpbiBvKXt2YXIgbD1iaSh1KTtydChhLGMsdSxsLCEwKXx8cnQoYSxzLHUsbCwhMSl9cmV0dXJuIGF9fWZ1bmN0aW9uIHJ0KHQsbixyLGksbyl7aWYoZShuKSl7aWYoZChuLHIpKXJldHVybiB0W3JdPW5bcl0sb3x8ZGVsZXRlIG5bcl0sITA7aWYoZChuLGkpKXJldHVybiB0W3JdPW5baV0sb3x8ZGVsZXRlIG5baV0sITB9cmV0dXJuITF9ZnVuY3Rpb24gaXQodCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYoQXJyYXkuaXNBcnJheSh0W2VdKSlyZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSx0KTtyZXR1cm4gdH1mdW5jdGlvbiBvdCh0KXtyZXR1cm4gaSh0KT9bWih0KV06QXJyYXkuaXNBcnJheSh0KT9zdCh0KTp2b2lkIDB9ZnVuY3Rpb24gYXQodCl7cmV0dXJuIGUodCkmJmUodC50ZXh0KSYmcih0LmlzQ29tbWVudCl9ZnVuY3Rpb24gc3QocixvKXt2YXIgYSxzLGMsdT1bXTtmb3IoYT0wO2E8ci5sZW5ndGg7YSsrKXQocz1yW2FdKXx8ImJvb2xlYW4iPT10eXBlb2Ygc3x8KGM9dVt1Lmxlbmd0aC0xXSxBcnJheS5pc0FycmF5KHMpP3UucHVzaC5hcHBseSh1LHN0KHMsKG98fCIiKSsiXyIrYSkpOmkocyk/YXQoYyk/Yy50ZXh0Kz1TdHJpbmcocyk6IiIhPT1zJiZ1LnB1c2goWihzKSk6YXQocykmJmF0KGMpP3VbdS5sZW5ndGgtMV09WihjLnRleHQrcy50ZXh0KToobihyLl9pc1ZMaXN0KSYmZShzLnRhZykmJnQocy5rZXkpJiZlKG8pJiYocy5rZXk9Il9fdmxpc3QiK28rIl8iK2ErIl9fIiksdS5wdXNoKHMpKSk7cmV0dXJuIHV9ZnVuY3Rpb24gY3QodCxlKXtyZXR1cm4gdC5fX2VzTW9kdWxlJiZ0LmRlZmF1bHQmJih0PXQuZGVmYXVsdCksbyh0KT9lLmV4dGVuZCh0KTp0fWZ1bmN0aW9uIHV0KHQsZSxuLHIsaSl7dmFyIG89c28oKTtyZXR1cm4gby5hc3luY0ZhY3Rvcnk9dCxvLmFzeW5jTWV0YT17ZGF0YTplLGNvbnRleHQ6bixjaGlsZHJlbjpyLHRhZzppfSxvfWZ1bmN0aW9uIGx0KHIsaSxhKXtpZihuKHIuZXJyb3IpJiZlKHIuZXJyb3JDb21wKSlyZXR1cm4gci5lcnJvckNvbXA7aWYoZShyLnJlc29sdmVkKSlyZXR1cm4gci5yZXNvbHZlZDtpZihuKHIubG9hZGluZykmJmUoci5sb2FkaW5nQ29tcCkpcmV0dXJuIHIubG9hZGluZ0NvbXA7aWYoIWUoci5jb250ZXh0cykpe3ZhciBzPXIuY29udGV4dHM9W2FdLGM9ITAsdT1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9cy5sZW5ndGg7dDxlO3QrKylzW3RdLiRmb3JjZVVwZGF0ZSgpfSxsPUMoZnVuY3Rpb24odCl7ci5yZXNvbHZlZD1jdCh0LGkpLGN8fHUoKX0pLGY9QyhmdW5jdGlvbih0KXtlKHIuZXJyb3JDb21wKSYmKHIuZXJyb3I9ITAsdSgpKX0pLHA9cihsLGYpO3JldHVybiBvKHApJiYoImZ1bmN0aW9uIj09dHlwZW9mIHAudGhlbj90KHIucmVzb2x2ZWQpJiZwLnRoZW4obCxmKTplKHAuY29tcG9uZW50KSYmImZ1bmN0aW9uIj09dHlwZW9mIHAuY29tcG9uZW50LnRoZW4mJihwLmNvbXBvbmVudC50aGVuKGwsZiksZShwLmVycm9yKSYmKHIuZXJyb3JDb21wPWN0KHAuZXJyb3IsaSkpLGUocC5sb2FkaW5nKSYmKHIubG9hZGluZ0NvbXA9Y3QocC5sb2FkaW5nLGkpLDA9PT1wLmRlbGF5P3IubG9hZGluZz0hMDpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dChyLnJlc29sdmVkKSYmdChyLmVycm9yKSYmKHIubG9hZGluZz0hMCx1KCkpfSxwLmRlbGF5fHwyMDApKSxlKHAudGltZW91dCkmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0KHIucmVzb2x2ZWQpJiZmKG51bGwpfSxwLnRpbWVvdXQpKSksYz0hMSxyLmxvYWRpbmc/ci5sb2FkaW5nQ29tcDpyLnJlc29sdmVkfXIuY29udGV4dHMucHVzaChhKX1mdW5jdGlvbiBmdCh0KXtpZihBcnJheS5pc0FycmF5KHQpKWZvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO2lmKGUocikmJmUoci5jb21wb25lbnRPcHRpb25zKSlyZXR1cm4gcn19ZnVuY3Rpb24gcHQodCl7dC5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCksdC5faGFzSG9va0V2ZW50PSExO3ZhciBlPXQuJG9wdGlvbnMuX3BhcmVudExpc3RlbmVycztlJiZodCh0LGUpfWZ1bmN0aW9uIGR0KHQsZSxuKXtuP2FvLiRvbmNlKHQsZSk6YW8uJG9uKHQsZSl9ZnVuY3Rpb24gdnQodCxlKXthby4kb2ZmKHQsZSl9ZnVuY3Rpb24gaHQodCxlLG4pe2FvPXQsdHQoZSxufHx7fSxkdCx2dCx0KX1mdW5jdGlvbiBtdCh0LGUpe3ZhciBuPXt9O2lmKCF0KXJldHVybiBuO2Zvcih2YXIgcj1bXSxpPTAsbz10Lmxlbmd0aDtpPG87aSsrKXt2YXIgYT10W2ldO2lmKGEuY29udGV4dCE9PWUmJmEuZnVuY3Rpb25hbENvbnRleHQhPT1lfHwhYS5kYXRhfHxudWxsPT1hLmRhdGEuc2xvdClyLnB1c2goYSk7ZWxzZXt2YXIgcz1hLmRhdGEuc2xvdCxjPW5bc118fChuW3NdPVtdKTsidGVtcGxhdGUiPT09YS50YWc/Yy5wdXNoLmFwcGx5KGMsYS5jaGlsZHJlbik6Yy5wdXNoKGEpfX1yZXR1cm4gci5ldmVyeSh5dCl8fChuLmRlZmF1bHQ9ciksbn1mdW5jdGlvbiB5dCh0KXtyZXR1cm4gdC5pc0NvbW1lbnR8fCIgIj09PXQudGV4dH1mdW5jdGlvbiBndCh0LGUpe2U9ZXx8e307Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspQXJyYXkuaXNBcnJheSh0W25dKT9ndCh0W25dLGUpOmVbdFtuXS5rZXldPXRbbl0uZm47cmV0dXJuIGV9ZnVuY3Rpb24gX3QodCl7dmFyIGU9dC4kb3B0aW9ucyxuPWUucGFyZW50O2lmKG4mJiFlLmFic3RyYWN0KXtmb3IoO24uJG9wdGlvbnMuYWJzdHJhY3QmJm4uJHBhcmVudDspbj1uLiRwYXJlbnQ7bi4kY2hpbGRyZW4ucHVzaCh0KX10LiRwYXJlbnQ9bix0LiRyb290PW4/bi4kcm9vdDp0LHQuJGNoaWxkcmVuPVtdLHQuJHJlZnM9e30sdC5fd2F0Y2hlcj1udWxsLHQuX2luYWN0aXZlPW51bGwsdC5fZGlyZWN0SW5hY3RpdmU9ITEsdC5faXNNb3VudGVkPSExLHQuX2lzRGVzdHJveWVkPSExLHQuX2lzQmVpbmdEZXN0cm95ZWQ9ITF9ZnVuY3Rpb24gYnQodCxlLG4pe3QuJGVsPWUsdC4kb3B0aW9ucy5yZW5kZXJ8fCh0LiRvcHRpb25zLnJlbmRlcj1zbyksQXQodCwiYmVmb3JlTW91bnQiKTt2YXIgcjtyZXR1cm4gcj1mdW5jdGlvbigpe3QuX3VwZGF0ZSh0Ll9yZW5kZXIoKSxuKX0sdC5fd2F0Y2hlcj1uZXcgZ28odCxyLF8pLG49ITEsbnVsbD09dC4kdm5vZGUmJih0Ll9pc01vdW50ZWQ9ITAsQXQodCwibW91bnRlZCIpKSx0fWZ1bmN0aW9uICR0KHQsZSxuLHIsaSl7dmFyIG89ISEoaXx8dC4kb3B0aW9ucy5fcmVuZGVyQ2hpbGRyZW58fHIuZGF0YS5zY29wZWRTbG90c3x8dC4kc2NvcGVkU2xvdHMhPT1PaSk7aWYodC4kb3B0aW9ucy5fcGFyZW50Vm5vZGU9cix0LiR2bm9kZT1yLHQuX3Zub2RlJiYodC5fdm5vZGUucGFyZW50PXIpLHQuJG9wdGlvbnMuX3JlbmRlckNoaWxkcmVuPWksdC4kYXR0cnM9ci5kYXRhJiZyLmRhdGEuYXR0cnMsdC4kbGlzdGVuZXJzPW4sZSYmdC4kb3B0aW9ucy5wcm9wcyl7dG8uc2hvdWxkQ29udmVydD0hMTtmb3IodmFyIGE9dC5fcHJvcHMscz10LiRvcHRpb25zLl9wcm9wS2V5c3x8W10sYz0wO2M8cy5sZW5ndGg7YysrKXt2YXIgdT1zW2NdO2FbdV09Sih1LHQuJG9wdGlvbnMucHJvcHMsZSx0KX10by5zaG91bGRDb252ZXJ0PSEwLHQuJG9wdGlvbnMucHJvcHNEYXRhPWV9aWYobil7dmFyIGw9dC4kb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzO3QuJG9wdGlvbnMuX3BhcmVudExpc3RlbmVycz1uLGh0KHQsbixsKX1vJiYodC4kc2xvdHM9bXQoaSxyLmNvbnRleHQpLHQuJGZvcmNlVXBkYXRlKCkpfWZ1bmN0aW9uIEN0KHQpe2Zvcig7dCYmKHQ9dC4kcGFyZW50KTspaWYodC5faW5hY3RpdmUpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gd3QodCxlKXtpZihlKXtpZih0Ll9kaXJlY3RJbmFjdGl2ZT0hMSxDdCh0KSlyZXR1cm59ZWxzZSBpZih0Ll9kaXJlY3RJbmFjdGl2ZSlyZXR1cm47aWYodC5faW5hY3RpdmV8fG51bGw9PT10Ll9pbmFjdGl2ZSl7dC5faW5hY3RpdmU9ITE7Zm9yKHZhciBuPTA7bjx0LiRjaGlsZHJlbi5sZW5ndGg7bisrKXd0KHQuJGNoaWxkcmVuW25dKTtBdCh0LCJhY3RpdmF0ZWQiKX19ZnVuY3Rpb24geHQodCxlKXtpZighKGUmJih0Ll9kaXJlY3RJbmFjdGl2ZT0hMCxDdCh0KSl8fHQuX2luYWN0aXZlKSl7dC5faW5hY3RpdmU9ITA7Zm9yKHZhciBuPTA7bjx0LiRjaGlsZHJlbi5sZW5ndGg7bisrKXh0KHQuJGNoaWxkcmVuW25dKTtBdCh0LCJkZWFjdGl2YXRlZCIpfX1mdW5jdGlvbiBBdCh0LGUpe3ZhciBuPXQuJG9wdGlvbnNbZV07aWYobilmb3IodmFyIHI9MCxpPW4ubGVuZ3RoO3I8aTtyKyspdHJ5e25bcl0uY2FsbCh0KX1jYXRjaChuKXtrKG4sdCxlKyIgaG9vayIpfXQuX2hhc0hvb2tFdmVudCYmdC4kZW1pdCgiaG9vazoiK2UpfWZ1bmN0aW9uIGt0KCl7bW89bG8ubGVuZ3RoPWZvLmxlbmd0aD0wLHBvPXt9LHZvPWhvPSExfWZ1bmN0aW9uIE90KCl7aG89ITA7dmFyIHQsZTtmb3IobG8uc29ydChmdW5jdGlvbih0LGUpe3JldHVybiB0LmlkLWUuaWR9KSxtbz0wO21vPGxvLmxlbmd0aDttbysrKWU9KHQ9bG9bbW9dKS5pZCxwb1tlXT1udWxsLHQucnVuKCk7dmFyIG49Zm8uc2xpY2UoKSxyPWxvLnNsaWNlKCk7a3QoKSxFdChuKSxUdChyKSxLaSYma2kuZGV2dG9vbHMmJktpLmVtaXQoImZsdXNoIil9ZnVuY3Rpb24gVHQodCl7Zm9yKHZhciBlPXQubGVuZ3RoO2UtLTspe3ZhciBuPXRbZV0scj1uLnZtO3IuX3dhdGNoZXI9PT1uJiZyLl9pc01vdW50ZWQmJkF0KHIsInVwZGF0ZWQiKX19ZnVuY3Rpb24gU3QodCl7dC5faW5hY3RpdmU9ITEsZm8ucHVzaCh0KX1mdW5jdGlvbiBFdCh0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKyl0W2VdLl9pbmFjdGl2ZT0hMCx3dCh0W2VdLCEwKX1mdW5jdGlvbiBqdCh0KXt2YXIgZT10LmlkO2lmKG51bGw9PXBvW2VdKXtpZihwb1tlXT0hMCxobyl7Zm9yKHZhciBuPWxvLmxlbmd0aC0xO24+bW8mJmxvW25dLmlkPnQuaWQ7KW4tLTtsby5zcGxpY2UobisxLDAsdCl9ZWxzZSBsby5wdXNoKHQpO3ZvfHwodm89ITAscWkoT3QpKX19ZnVuY3Rpb24gTHQodCl7X28uY2xlYXIoKSxOdCh0LF9vKX1mdW5jdGlvbiBOdCh0LGUpe3ZhciBuLHIsaT1BcnJheS5pc0FycmF5KHQpO2lmKChpfHxvKHQpKSYmT2JqZWN0LmlzRXh0ZW5zaWJsZSh0KSl7aWYodC5fX29iX18pe3ZhciBhPXQuX19vYl9fLmRlcC5pZDtpZihlLmhhcyhhKSlyZXR1cm47ZS5hZGQoYSl9aWYoaSlmb3Iobj10Lmxlbmd0aDtuLS07KU50KHRbbl0sZSk7ZWxzZSBmb3Iobj0ocj1PYmplY3Qua2V5cyh0KSkubGVuZ3RoO24tLTspTnQodFtyW25dXSxlKX19ZnVuY3Rpb24gSXQodCxlLG4pe2JvLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzW2VdW25dfSxiby5zZXQ9ZnVuY3Rpb24odCl7dGhpc1tlXVtuXT10fSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLGJvKX1mdW5jdGlvbiBNdCh0KXt0Ll93YXRjaGVycz1bXTt2YXIgZT10LiRvcHRpb25zO2UucHJvcHMmJkR0KHQsZS5wcm9wcyksZS5tZXRob2RzJiZVdCh0LGUubWV0aG9kcyksZS5kYXRhP1B0KHQpOkwodC5fZGF0YT17fSwhMCksZS5jb21wdXRlZCYmUnQodCxlLmNvbXB1dGVkKSxlLndhdGNoJiZlLndhdGNoIT09UmkmJlZ0KHQsZS53YXRjaCl9ZnVuY3Rpb24gRHQodCxlKXt2YXIgbj10LiRvcHRpb25zLnByb3BzRGF0YXx8e30scj10Ll9wcm9wcz17fSxpPXQuJG9wdGlvbnMuX3Byb3BLZXlzPVtdLG89IXQuJHBhcmVudDt0by5zaG91bGRDb252ZXJ0PW87Zm9yKHZhciBhIGluIGUpIWZ1bmN0aW9uKG8pe2kucHVzaChvKTt2YXIgYT1KKG8sZSxuLHQpO04ocixvLGEpLG8gaW4gdHx8SXQodCwiX3Byb3BzIixvKX0oYSk7dG8uc2hvdWxkQ29udmVydD0hMH1mdW5jdGlvbiBQdCh0KXt2YXIgZT10LiRvcHRpb25zLmRhdGE7YShlPXQuX2RhdGE9ImZ1bmN0aW9uIj09dHlwZW9mIGU/RnQoZSx0KTplfHx7fSl8fChlPXt9KTtmb3IodmFyIG49T2JqZWN0LmtleXMoZSkscj10LiRvcHRpb25zLnByb3BzLGk9KHQuJG9wdGlvbnMubWV0aG9kcyxuLmxlbmd0aCk7aS0tOyl7dmFyIG89bltpXTtyJiZkKHIsbyl8fHcobyl8fEl0KHQsIl9kYXRhIixvKX1MKGUsITApfWZ1bmN0aW9uIEZ0KHQsZSl7dHJ5e3JldHVybiB0LmNhbGwoZSl9Y2F0Y2godCl7cmV0dXJuIGsodCxlLCJkYXRhKCkiKSx7fX19ZnVuY3Rpb24gUnQodCxlKXt2YXIgbj10Ll9jb21wdXRlZFdhdGNoZXJzPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciByIGluIGUpe3ZhciBpPWVbcl0sbz0iZnVuY3Rpb24iPT10eXBlb2YgaT9pOmkuZ2V0O25bcl09bmV3IGdvKHQsb3x8XyxfLCRvKSxyIGluIHR8fEh0KHQscixpKX19ZnVuY3Rpb24gSHQodCxlLG4peyJmdW5jdGlvbiI9PXR5cGVvZiBuPyhiby5nZXQ9QnQoZSksYm8uc2V0PV8pOihiby5nZXQ9bi5nZXQ/ITEhPT1uLmNhY2hlP0J0KGUpOm4uZ2V0Ol8sYm8uc2V0PW4uc2V0P24uc2V0Ol8pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUsYm8pfWZ1bmN0aW9uIEJ0KHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2NvbXB1dGVkV2F0Y2hlcnMmJnRoaXMuX2NvbXB1dGVkV2F0Y2hlcnNbdF07aWYoZSlyZXR1cm4gZS5kaXJ0eSYmZS5ldmFsdWF0ZSgpLEdpLnRhcmdldCYmZS5kZXBlbmQoKSxlLnZhbHVlfX1mdW5jdGlvbiBVdCh0LGUpe3QuJG9wdGlvbnMucHJvcHM7Zm9yKHZhciBuIGluIGUpdFtuXT1udWxsPT1lW25dP186aChlW25dLHQpfWZ1bmN0aW9uIFZ0KHQsZSl7Zm9yKHZhciBuIGluIGUpe3ZhciByPWVbbl07aWYoQXJyYXkuaXNBcnJheShyKSlmb3IodmFyIGk9MDtpPHIubGVuZ3RoO2krKyl6dCh0LG4scltpXSk7ZWxzZSB6dCh0LG4scil9fWZ1bmN0aW9uIHp0KHQsZSxuLHIpe3JldHVybiBhKG4pJiYocj1uLG49bi5oYW5kbGVyKSwic3RyaW5nIj09dHlwZW9mIG4mJihuPXRbbl0pLHQuJHdhdGNoKGUsbixyKX1mdW5jdGlvbiBLdCh0KXt2YXIgZT10LiRvcHRpb25zLnByb3ZpZGU7ZSYmKHQuX3Byb3ZpZGVkPSJmdW5jdGlvbiI9PXR5cGVvZiBlP2UuY2FsbCh0KTplKX1mdW5jdGlvbiBKdCh0KXt2YXIgZT1xdCh0LiRvcHRpb25zLmluamVjdCx0KTtlJiYodG8uc2hvdWxkQ29udmVydD0hMSxPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe04odCxuLGVbbl0pfSksdG8uc2hvdWxkQ29udmVydD0hMCl9ZnVuY3Rpb24gcXQodCxlKXtpZih0KXtmb3IodmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPUppP1JlZmxlY3Qub3duS2V5cyh0KTpPYmplY3Qua2V5cyh0KSxpPTA7aTxyLmxlbmd0aDtpKyspZm9yKHZhciBvPXJbaV0sYT10W29dLHM9ZTtzOyl7aWYocy5fcHJvdmlkZWQmJmEgaW4gcy5fcHJvdmlkZWQpe25bb109cy5fcHJvdmlkZWRbYV07YnJlYWt9cz1zLiRwYXJlbnR9cmV0dXJuIG59fWZ1bmN0aW9uIFd0KHQsbixyLGksbyl7dmFyIGE9e30scz10Lm9wdGlvbnMucHJvcHM7aWYoZShzKSlmb3IodmFyIGMgaW4gcylhW2NdPUooYyxzLG58fHt9KTtlbHNlIGUoci5hdHRycykmJkd0KGEsci5hdHRycyksZShyLnByb3BzKSYmR3QoYSxyLnByb3BzKTt2YXIgdT1PYmplY3QuY3JlYXRlKGkpLGw9dC5vcHRpb25zLnJlbmRlci5jYWxsKG51bGwsZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIGVlKHUsdCxlLG4sciwhMCl9LHtkYXRhOnIscHJvcHM6YSxjaGlsZHJlbjpvLHBhcmVudDppLGxpc3RlbmVyczpyLm9ufHx7fSxpbmplY3Rpb25zOnF0KHQub3B0aW9ucy5pbmplY3QsaSksc2xvdHM6ZnVuY3Rpb24oKXtyZXR1cm4gbXQobyxpKX19KTtyZXR1cm4gbCBpbnN0YW5jZW9mIGlvJiYobC5mdW5jdGlvbmFsQ29udGV4dD1pLGwuZnVuY3Rpb25hbE9wdGlvbnM9dC5vcHRpb25zLHIuc2xvdCYmKChsLmRhdGF8fChsLmRhdGE9e30pKS5zbG90PXIuc2xvdCkpLGx9ZnVuY3Rpb24gR3QodCxlKXtmb3IodmFyIG4gaW4gZSl0W3lpKG4pXT1lW25dfWZ1bmN0aW9uIFp0KHIsaSxhLHMsYyl7aWYoIXQocikpe3ZhciB1PWEuJG9wdGlvbnMuX2Jhc2U7aWYobyhyKSYmKHI9dS5leHRlbmQocikpLCJmdW5jdGlvbiI9PXR5cGVvZiByKXt2YXIgbDtpZih0KHIuY2lkKSYmKGw9cix2b2lkIDA9PT0ocj1sdChsLHUsYSkpKSlyZXR1cm4gdXQobCxpLGEscyxjKTtpPWl8fHt9LG1lKHIpLGUoaS5tb2RlbCkmJnRlKHIub3B0aW9ucyxpKTt2YXIgZj1udChpLHIsYyk7aWYobihyLm9wdGlvbnMuZnVuY3Rpb25hbCkpcmV0dXJuIFd0KHIsZixpLGEscyk7dmFyIHA9aS5vbjtpZihpLm9uPWkubmF0aXZlT24sbihyLm9wdGlvbnMuYWJzdHJhY3QpKXt2YXIgZD1pLnNsb3Q7aT17fSxkJiYoaS5zbG90PWQpfVF0KGkpO3ZhciB2PXIub3B0aW9ucy5uYW1lfHxjO3JldHVybiBuZXcgaW8oInZ1ZS1jb21wb25lbnQtIityLmNpZCsodj8iLSIrdjoiIiksaSx2b2lkIDAsdm9pZCAwLHZvaWQgMCxhLHtDdG9yOnIscHJvcHNEYXRhOmYsbGlzdGVuZXJzOnAsdGFnOmMsY2hpbGRyZW46c30sbCl9fX1mdW5jdGlvbiBZdCh0LG4scixpKXt2YXIgbz10LmNvbXBvbmVudE9wdGlvbnMsYT17X2lzQ29tcG9uZW50OiEwLHBhcmVudDpuLHByb3BzRGF0YTpvLnByb3BzRGF0YSxfY29tcG9uZW50VGFnOm8udGFnLF9wYXJlbnRWbm9kZTp0LF9wYXJlbnRMaXN0ZW5lcnM6by5saXN0ZW5lcnMsX3JlbmRlckNoaWxkcmVuOm8uY2hpbGRyZW4sX3BhcmVudEVsbTpyfHxudWxsLF9yZWZFbG06aXx8bnVsbH0scz10LmRhdGEuaW5saW5lVGVtcGxhdGU7cmV0dXJuIGUocykmJihhLnJlbmRlcj1zLnJlbmRlcixhLnN0YXRpY1JlbmRlckZucz1zLnN0YXRpY1JlbmRlckZucyksbmV3IG8uQ3RvcihhKX1mdW5jdGlvbiBRdCh0KXt0Lmhvb2t8fCh0Lmhvb2s9e30pO2Zvcih2YXIgZT0wO2U8d28ubGVuZ3RoO2UrKyl7dmFyIG49d29bZV0scj10Lmhvb2tbbl0saT1Db1tuXTt0Lmhvb2tbbl09cj9YdChpLHIpOml9fWZ1bmN0aW9uIFh0KHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4scixpLG8pe3QobixyLGksbyksZShuLHIsaSxvKX19ZnVuY3Rpb24gdGUodCxuKXt2YXIgcj10Lm1vZGVsJiZ0Lm1vZGVsLnByb3B8fCJ2YWx1ZSIsaT10Lm1vZGVsJiZ0Lm1vZGVsLmV2ZW50fHwiaW5wdXQiOyhuLnByb3BzfHwobi5wcm9wcz17fSkpW3JdPW4ubW9kZWwudmFsdWU7dmFyIG89bi5vbnx8KG4ub249e30pO2Uob1tpXSk/b1tpXT1bbi5tb2RlbC5jYWxsYmFja10uY29uY2F0KG9baV0pOm9baV09bi5tb2RlbC5jYWxsYmFja31mdW5jdGlvbiBlZSh0LGUscixvLGEscyl7cmV0dXJuKEFycmF5LmlzQXJyYXkocil8fGkocikpJiYoYT1vLG89cixyPXZvaWQgMCksbihzKSYmKGE9QW8pLG5lKHQsZSxyLG8sYSl9ZnVuY3Rpb24gbmUodCxuLHIsaSxvKXtpZihlKHIpJiZlKHIuX19vYl9fKSlyZXR1cm4gc28oKTtpZihlKHIpJiZlKHIuaXMpJiYobj1yLmlzKSwhbilyZXR1cm4gc28oKTtBcnJheS5pc0FycmF5KGkpJiYiZnVuY3Rpb24iPT10eXBlb2YgaVswXSYmKChyPXJ8fHt9KS5zY29wZWRTbG90cz17ZGVmYXVsdDppWzBdfSxpLmxlbmd0aD0wKSxvPT09QW8/aT1vdChpKTpvPT09eG8mJihpPWl0KGkpKTt2YXIgYSxzO2lmKCJzdHJpbmciPT10eXBlb2Ygbil7dmFyIGM7cz1raS5nZXRUYWdOYW1lc3BhY2UobiksYT1raS5pc1Jlc2VydmVkVGFnKG4pP25ldyBpbyhraS5wYXJzZVBsYXRmb3JtVGFnTmFtZShuKSxyLGksdm9pZCAwLHZvaWQgMCx0KTplKGM9Syh0LiRvcHRpb25zLCJjb21wb25lbnRzIixuKSk/WnQoYyxyLHQsaSxuKTpuZXcgaW8obixyLGksdm9pZCAwLHZvaWQgMCx0KX1lbHNlIGE9WnQobixyLHQsaSk7cmV0dXJuIGUoYSk/KHMmJnJlKGEscyksYSk6c28oKX1mdW5jdGlvbiByZShuLHIpe2lmKG4ubnM9ciwiZm9yZWlnbk9iamVjdCIhPT1uLnRhZyYmZShuLmNoaWxkcmVuKSlmb3IodmFyIGk9MCxvPW4uY2hpbGRyZW4ubGVuZ3RoO2k8bztpKyspe3ZhciBhPW4uY2hpbGRyZW5baV07ZShhLnRhZykmJnQoYS5ucykmJnJlKGEscil9fWZ1bmN0aW9uIGllKHQsbil7dmFyIHIsaSxhLHMsYztpZihBcnJheS5pc0FycmF5KHQpfHwic3RyaW5nIj09dHlwZW9mIHQpZm9yKHI9bmV3IEFycmF5KHQubGVuZ3RoKSxpPTAsYT10Lmxlbmd0aDtpPGE7aSsrKXJbaV09bih0W2ldLGkpO2Vsc2UgaWYoIm51bWJlciI9PXR5cGVvZiB0KWZvcihyPW5ldyBBcnJheSh0KSxpPTA7aTx0O2krKylyW2ldPW4oaSsxLGkpO2Vsc2UgaWYobyh0KSlmb3Iocz1PYmplY3Qua2V5cyh0KSxyPW5ldyBBcnJheShzLmxlbmd0aCksaT0wLGE9cy5sZW5ndGg7aTxhO2krKyljPXNbaV0scltpXT1uKHRbY10sYyxpKTtyZXR1cm4gZShyKSYmKHIuX2lzVkxpc3Q9ITApLHJ9ZnVuY3Rpb24gb2UodCxlLG4scil7dmFyIGk9dGhpcy4kc2NvcGVkU2xvdHNbdF07aWYoaSlyZXR1cm4gbj1ufHx7fSxyJiYobj15KHkoe30sciksbikpLGkobil8fGU7dmFyIG89dGhpcy4kc2xvdHNbdF07cmV0dXJuIG98fGV9ZnVuY3Rpb24gYWUodCl7cmV0dXJuIEsodGhpcy4kb3B0aW9ucywiZmlsdGVycyIsdCwhMCl8fENpfWZ1bmN0aW9uIHNlKHQsZSxuKXt2YXIgcj1raS5rZXlDb2Rlc1tlXXx8bjtyZXR1cm4gQXJyYXkuaXNBcnJheShyKT8tMT09PXIuaW5kZXhPZih0KTpyIT09dH1mdW5jdGlvbiBjZSh0LGUsbixyLGkpe2lmKG4paWYobyhuKSl7QXJyYXkuaXNBcnJheShuKSYmKG49ZyhuKSk7dmFyIGE7Zm9yKHZhciBzIGluIG4pIWZ1bmN0aW9uKG8pe2lmKCJjbGFzcyI9PT1vfHwic3R5bGUiPT09b3x8dmkobykpYT10O2Vsc2V7dmFyIHM9dC5hdHRycyYmdC5hdHRycy50eXBlO2E9cnx8a2kubXVzdFVzZVByb3AoZSxzLG8pP3QuZG9tUHJvcHN8fCh0LmRvbVByb3BzPXt9KTp0LmF0dHJzfHwodC5hdHRycz17fSl9byBpbiBhfHwoYVtvXT1uW29dLGkmJigodC5vbnx8KHQub249e30pKVsidXBkYXRlOiIrb109ZnVuY3Rpb24odCl7bltvXT10fSkpfShzKX1lbHNlO3JldHVybiB0fWZ1bmN0aW9uIHVlKHQsZSl7dmFyIG49dGhpcy5fc3RhdGljVHJlZXNbdF07cmV0dXJuIG4mJiFlP0FycmF5LmlzQXJyYXkobik/UShuKTpZKG4pOihuPXRoaXMuX3N0YXRpY1RyZWVzW3RdPXRoaXMuJG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zW3RdLmNhbGwodGhpcy5fcmVuZGVyUHJveHkpLGZlKG4sIl9fc3RhdGljX18iK3QsITEpLG4pfWZ1bmN0aW9uIGxlKHQsZSxuKXtyZXR1cm4gZmUodCwiX19vbmNlX18iK2UrKG4/Il8iK246IiIpLCEwKSx0fWZ1bmN0aW9uIGZlKHQsZSxuKXtpZihBcnJheS5pc0FycmF5KHQpKWZvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXRbcl0mJiJzdHJpbmciIT10eXBlb2YgdFtyXSYmcGUodFtyXSxlKyJfIityLG4pO2Vsc2UgcGUodCxlLG4pfWZ1bmN0aW9uIHBlKHQsZSxuKXt0LmlzU3RhdGljPSEwLHQua2V5PWUsdC5pc09uY2U9bn1mdW5jdGlvbiBkZSh0LGUpe2lmKGUpaWYoYShlKSl7dmFyIG49dC5vbj10Lm9uP3koe30sdC5vbik6e307Zm9yKHZhciByIGluIGUpe3ZhciBpPW5bcl0sbz1lW3JdO25bcl09aT9bXS5jb25jYXQobyxpKTpvfX1lbHNlO3JldHVybiB0fWZ1bmN0aW9uIHZlKHQpe3QuX3Zub2RlPW51bGwsdC5fc3RhdGljVHJlZXM9bnVsbDt2YXIgZT10LiR2bm9kZT10LiRvcHRpb25zLl9wYXJlbnRWbm9kZSxuPWUmJmUuY29udGV4dDt0LiRzbG90cz1tdCh0LiRvcHRpb25zLl9yZW5kZXJDaGlsZHJlbixuKSx0LiRzY29wZWRTbG90cz1PaSx0Ll9jPWZ1bmN0aW9uKGUsbixyLGkpe3JldHVybiBlZSh0LGUsbixyLGksITEpfSx0LiRjcmVhdGVFbGVtZW50PWZ1bmN0aW9uKGUsbixyLGkpe3JldHVybiBlZSh0LGUsbixyLGksITApfTt2YXIgcj1lJiZlLmRhdGE7Tih0LCIkYXR0cnMiLHImJnIuYXR0cnMsbnVsbCwhMCksTih0LCIkbGlzdGVuZXJzIix0LiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnMsbnVsbCwhMCl9ZnVuY3Rpb24gaGUodCxlKXt2YXIgbj10LiRvcHRpb25zPU9iamVjdC5jcmVhdGUodC5jb25zdHJ1Y3Rvci5vcHRpb25zKTtuLnBhcmVudD1lLnBhcmVudCxuLnByb3BzRGF0YT1lLnByb3BzRGF0YSxuLl9wYXJlbnRWbm9kZT1lLl9wYXJlbnRWbm9kZSxuLl9wYXJlbnRMaXN0ZW5lcnM9ZS5fcGFyZW50TGlzdGVuZXJzLG4uX3JlbmRlckNoaWxkcmVuPWUuX3JlbmRlckNoaWxkcmVuLG4uX2NvbXBvbmVudFRhZz1lLl9jb21wb25lbnRUYWcsbi5fcGFyZW50RWxtPWUuX3BhcmVudEVsbSxuLl9yZWZFbG09ZS5fcmVmRWxtLGUucmVuZGVyJiYobi5yZW5kZXI9ZS5yZW5kZXIsbi5zdGF0aWNSZW5kZXJGbnM9ZS5zdGF0aWNSZW5kZXJGbnMpfWZ1bmN0aW9uIG1lKHQpe3ZhciBlPXQub3B0aW9ucztpZih0LnN1cGVyKXt2YXIgbj1tZSh0LnN1cGVyKTtpZihuIT09dC5zdXBlck9wdGlvbnMpe3Quc3VwZXJPcHRpb25zPW47dmFyIHI9eWUodCk7ciYmeSh0LmV4dGVuZE9wdGlvbnMsciksKGU9dC5vcHRpb25zPXoobix0LmV4dGVuZE9wdGlvbnMpKS5uYW1lJiYoZS5jb21wb25lbnRzW2UubmFtZV09dCl9fXJldHVybiBlfWZ1bmN0aW9uIHllKHQpe3ZhciBlLG49dC5vcHRpb25zLHI9dC5leHRlbmRPcHRpb25zLGk9dC5zZWFsZWRPcHRpb25zO2Zvcih2YXIgbyBpbiBuKW5bb10hPT1pW29dJiYoZXx8KGU9e30pLGVbb109Z2UobltvXSxyW29dLGlbb10pKTtyZXR1cm4gZX1mdW5jdGlvbiBnZSh0LGUsbil7aWYoQXJyYXkuaXNBcnJheSh0KSl7dmFyIHI9W107bj1BcnJheS5pc0FycmF5KG4pP246W25dLGU9QXJyYXkuaXNBcnJheShlKT9lOltlXTtmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKykoZS5pbmRleE9mKHRbaV0pPj0wfHxuLmluZGV4T2YodFtpXSk8MCkmJnIucHVzaCh0W2ldKTtyZXR1cm4gcn1yZXR1cm4gdH1mdW5jdGlvbiBfZSh0KXt0aGlzLl9pbml0KHQpfWZ1bmN0aW9uIGJlKHQpe3QudXNlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2luc3RhbGxlZFBsdWdpbnN8fCh0aGlzLl9pbnN0YWxsZWRQbHVnaW5zPVtdKTtpZihlLmluZGV4T2YodCk+LTEpcmV0dXJuIHRoaXM7dmFyIG49bShhcmd1bWVudHMsMSk7cmV0dXJuIG4udW5zaGlmdCh0aGlzKSwiZnVuY3Rpb24iPT10eXBlb2YgdC5pbnN0YWxsP3QuaW5zdGFsbC5hcHBseSh0LG4pOiJmdW5jdGlvbiI9PXR5cGVvZiB0JiZ0LmFwcGx5KG51bGwsbiksZS5wdXNoKHQpLHRoaXN9fWZ1bmN0aW9uICRlKHQpe3QubWl4aW49ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9ucz16KHRoaXMub3B0aW9ucyx0KSx0aGlzfX1mdW5jdGlvbiBDZSh0KXt0LmNpZD0wO3ZhciBlPTE7dC5leHRlbmQ9ZnVuY3Rpb24odCl7dD10fHx7fTt2YXIgbj10aGlzLHI9bi5jaWQsaT10Ll9DdG9yfHwodC5fQ3Rvcj17fSk7aWYoaVtyXSlyZXR1cm4gaVtyXTt2YXIgbz10Lm5hbWV8fG4ub3B0aW9ucy5uYW1lLGE9ZnVuY3Rpb24odCl7dGhpcy5faW5pdCh0KX07cmV0dXJuIGEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLGEucHJvdG90eXBlLmNvbnN0cnVjdG9yPWEsYS5jaWQ9ZSsrLGEub3B0aW9ucz16KG4ub3B0aW9ucyx0KSxhLnN1cGVyPW4sYS5vcHRpb25zLnByb3BzJiZ3ZShhKSxhLm9wdGlvbnMuY29tcHV0ZWQmJnhlKGEpLGEuZXh0ZW5kPW4uZXh0ZW5kLGEubWl4aW49bi5taXhpbixhLnVzZT1uLnVzZSx4aS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2FbdF09blt0XX0pLG8mJihhLm9wdGlvbnMuY29tcG9uZW50c1tvXT1hKSxhLnN1cGVyT3B0aW9ucz1uLm9wdGlvbnMsYS5leHRlbmRPcHRpb25zPXQsYS5zZWFsZWRPcHRpb25zPXkoe30sYS5vcHRpb25zKSxpW3JdPWEsYX19ZnVuY3Rpb24gd2UodCl7dmFyIGU9dC5vcHRpb25zLnByb3BzO2Zvcih2YXIgbiBpbiBlKUl0KHQucHJvdG90eXBlLCJfcHJvcHMiLG4pfWZ1bmN0aW9uIHhlKHQpe3ZhciBlPXQub3B0aW9ucy5jb21wdXRlZDtmb3IodmFyIG4gaW4gZSlIdCh0LnByb3RvdHlwZSxuLGVbbl0pfWZ1bmN0aW9uIEFlKHQpe3hpLmZvckVhY2goZnVuY3Rpb24oZSl7dFtlXT1mdW5jdGlvbih0LG4pe3JldHVybiBuPygiY29tcG9uZW50Ij09PWUmJmEobikmJihuLm5hbWU9bi5uYW1lfHx0LG49dGhpcy5vcHRpb25zLl9iYXNlLmV4dGVuZChuKSksImRpcmVjdGl2ZSI9PT1lJiYiZnVuY3Rpb24iPT10eXBlb2YgbiYmKG49e2JpbmQ6bix1cGRhdGU6bn0pLHRoaXMub3B0aW9uc1tlKyJzIl1bdF09bixuKTp0aGlzLm9wdGlvbnNbZSsicyJdW3RdfX0pfWZ1bmN0aW9uIGtlKHQpe3JldHVybiB0JiYodC5DdG9yLm9wdGlvbnMubmFtZXx8dC50YWcpfWZ1bmN0aW9uIE9lKHQsZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkodCk/dC5pbmRleE9mKGUpPi0xOiJzdHJpbmciPT10eXBlb2YgdD90LnNwbGl0KCIsIikuaW5kZXhPZihlKT4tMTohIXModCkmJnQudGVzdChlKX1mdW5jdGlvbiBUZSh0LGUsbil7Zm9yKHZhciByIGluIHQpe3ZhciBpPXRbcl07aWYoaSl7dmFyIG89a2UoaS5jb21wb25lbnRPcHRpb25zKTtvJiYhbihvKSYmKGkhPT1lJiZTZShpKSx0W3JdPW51bGwpfX19ZnVuY3Rpb24gU2UodCl7dCYmdC5jb21wb25lbnRJbnN0YW5jZS4kZGVzdHJveSgpfWZ1bmN0aW9uIEVlKHQpe2Zvcih2YXIgbj10LmRhdGEscj10LGk9dDtlKGkuY29tcG9uZW50SW5zdGFuY2UpOykoaT1pLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZSkuZGF0YSYmKG49amUoaS5kYXRhLG4pKTtmb3IoO2Uocj1yLnBhcmVudCk7KXIuZGF0YSYmKG49amUobixyLmRhdGEpKTtyZXR1cm4gTGUobi5zdGF0aWNDbGFzcyxuLmNsYXNzKX1mdW5jdGlvbiBqZSh0LG4pe3JldHVybntzdGF0aWNDbGFzczpOZSh0LnN0YXRpY0NsYXNzLG4uc3RhdGljQ2xhc3MpLGNsYXNzOmUodC5jbGFzcyk/W3QuY2xhc3Msbi5jbGFzc106bi5jbGFzc319ZnVuY3Rpb24gTGUodCxuKXtyZXR1cm4gZSh0KXx8ZShuKT9OZSh0LEllKG4pKToiIn1mdW5jdGlvbiBOZSh0LGUpe3JldHVybiB0P2U/dCsiICIrZTp0OmV8fCIifWZ1bmN0aW9uIEllKHQpe3JldHVybiBBcnJheS5pc0FycmF5KHQpP01lKHQpOm8odCk/RGUodCk6InN0cmluZyI9PXR5cGVvZiB0P3Q6IiJ9ZnVuY3Rpb24gTWUodCl7Zm9yKHZhciBuLHI9IiIsaT0wLG89dC5sZW5ndGg7aTxvO2krKyllKG49SWUodFtpXSkpJiYiIiE9PW4mJihyJiYocis9IiAiKSxyKz1uKTtyZXR1cm4gcn1mdW5jdGlvbiBEZSh0KXt2YXIgZT0iIjtmb3IodmFyIG4gaW4gdCl0W25dJiYoZSYmKGUrPSIgIiksZSs9bik7cmV0dXJuIGV9ZnVuY3Rpb24gUGUodCl7cmV0dXJuIEdvKHQpPyJzdmciOiJtYXRoIj09PXQ/Im1hdGgiOnZvaWQgMH1mdW5jdGlvbiBGZSh0KXtpZigic3RyaW5nIj09dHlwZW9mIHQpe3ZhciBlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodCk7cmV0dXJuIGV8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpfXJldHVybiB0fWZ1bmN0aW9uIFJlKHQsZSl7dmFyIG49dC5kYXRhLnJlZjtpZihuKXt2YXIgcj10LmNvbnRleHQsaT10LmNvbXBvbmVudEluc3RhbmNlfHx0LmVsbSxvPXIuJHJlZnM7ZT9BcnJheS5pc0FycmF5KG9bbl0pP3Aob1tuXSxpKTpvW25dPT09aSYmKG9bbl09dm9pZCAwKTp0LmRhdGEucmVmSW5Gb3I/QXJyYXkuaXNBcnJheShvW25dKT9vW25dLmluZGV4T2YoaSk8MCYmb1tuXS5wdXNoKGkpOm9bbl09W2ldOm9bbl09aX19ZnVuY3Rpb24gSGUocixpKXtyZXR1cm4gci5rZXk9PT1pLmtleSYmKHIudGFnPT09aS50YWcmJnIuaXNDb21tZW50PT09aS5pc0NvbW1lbnQmJmUoci5kYXRhKT09PWUoaS5kYXRhKSYmQmUocixpKXx8bihyLmlzQXN5bmNQbGFjZWhvbGRlcikmJnIuYXN5bmNGYWN0b3J5PT09aS5hc3luY0ZhY3RvcnkmJnQoaS5hc3luY0ZhY3RvcnkuZXJyb3IpKX1mdW5jdGlvbiBCZSh0LG4pe2lmKCJpbnB1dCIhPT10LnRhZylyZXR1cm4hMDt2YXIgcjtyZXR1cm4oZShyPXQuZGF0YSkmJmUocj1yLmF0dHJzKSYmci50eXBlKT09PShlKHI9bi5kYXRhKSYmZShyPXIuYXR0cnMpJiZyLnR5cGUpfWZ1bmN0aW9uIFVlKHQsbixyKXt2YXIgaSxvLGE9e307Zm9yKGk9bjtpPD1yOysraSllKG89dFtpXS5rZXkpJiYoYVtvXT1pKTtyZXR1cm4gYX1mdW5jdGlvbiBWZSh0LGUpeyh0LmRhdGEuZGlyZWN0aXZlc3x8ZS5kYXRhLmRpcmVjdGl2ZXMpJiZ6ZSh0LGUpfWZ1bmN0aW9uIHplKHQsZSl7dmFyIG4scixpLG89dD09PXRhLGE9ZT09PXRhLHM9S2UodC5kYXRhLmRpcmVjdGl2ZXMsdC5jb250ZXh0KSxjPUtlKGUuZGF0YS5kaXJlY3RpdmVzLGUuY29udGV4dCksdT1bXSxsPVtdO2ZvcihuIGluIGMpcj1zW25dLGk9Y1tuXSxyPyhpLm9sZFZhbHVlPXIudmFsdWUscWUoaSwidXBkYXRlIixlLHQpLGkuZGVmJiZpLmRlZi5jb21wb25lbnRVcGRhdGVkJiZsLnB1c2goaSkpOihxZShpLCJiaW5kIixlLHQpLGkuZGVmJiZpLmRlZi5pbnNlcnRlZCYmdS5wdXNoKGkpKTtpZih1Lmxlbmd0aCl7dmFyIGY9ZnVuY3Rpb24oKXtmb3IodmFyIG49MDtuPHUubGVuZ3RoO24rKylxZSh1W25dLCJpbnNlcnRlZCIsZSx0KX07bz9ldChlLmRhdGEuaG9va3x8KGUuZGF0YS5ob29rPXt9KSwiaW5zZXJ0IixmKTpmKCl9aWYobC5sZW5ndGgmJmV0KGUuZGF0YS5ob29rfHwoZS5kYXRhLmhvb2s9e30pLCJwb3N0cGF0Y2giLGZ1bmN0aW9uKCl7Zm9yKHZhciBuPTA7bjxsLmxlbmd0aDtuKyspcWUobFtuXSwiY29tcG9uZW50VXBkYXRlZCIsZSx0KX0pLCFvKWZvcihuIGluIHMpY1tuXXx8cWUoc1tuXSwidW5iaW5kIix0LHQsYSl9ZnVuY3Rpb24gS2UodCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO2lmKCF0KXJldHVybiBuO3ZhciByLGk7Zm9yKHI9MDtyPHQubGVuZ3RoO3IrKykoaT10W3JdKS5tb2RpZmllcnN8fChpLm1vZGlmaWVycz1yYSksbltKZShpKV09aSxpLmRlZj1LKGUuJG9wdGlvbnMsImRpcmVjdGl2ZXMiLGkubmFtZSwhMCk7cmV0dXJuIG59ZnVuY3Rpb24gSmUodCl7cmV0dXJuIHQucmF3TmFtZXx8dC5uYW1lKyIuIitPYmplY3Qua2V5cyh0Lm1vZGlmaWVyc3x8e30pLmpvaW4oIi4iKX1mdW5jdGlvbiBxZSh0LGUsbixyLGkpe3ZhciBvPXQuZGVmJiZ0LmRlZltlXTtpZihvKXRyeXtvKG4uZWxtLHQsbixyLGkpfWNhdGNoKHIpe2socixuLmNvbnRleHQsImRpcmVjdGl2ZSAiK3QubmFtZSsiICIrZSsiIGhvb2siKX19ZnVuY3Rpb24gV2UobixyKXt2YXIgaT1yLmNvbXBvbmVudE9wdGlvbnM7aWYoIShlKGkpJiYhMT09PWkuQ3Rvci5vcHRpb25zLmluaGVyaXRBdHRyc3x8dChuLmRhdGEuYXR0cnMpJiZ0KHIuZGF0YS5hdHRycykpKXt2YXIgbyxhLHM9ci5lbG0sYz1uLmRhdGEuYXR0cnN8fHt9LHU9ci5kYXRhLmF0dHJzfHx7fTtlKHUuX19vYl9fKSYmKHU9ci5kYXRhLmF0dHJzPXkoe30sdSkpO2ZvcihvIGluIHUpYT11W29dLGNbb10hPT1hJiZHZShzLG8sYSk7SWkmJnUudmFsdWUhPT1jLnZhbHVlJiZHZShzLCJ2YWx1ZSIsdS52YWx1ZSk7Zm9yKG8gaW4gYyl0KHVbb10pJiYoem8obyk/cy5yZW1vdmVBdHRyaWJ1dGVOUyhWbyxLbyhvKSk6Qm8obyl8fHMucmVtb3ZlQXR0cmlidXRlKG8pKX19ZnVuY3Rpb24gR2UodCxlLG4pe1VvKGUpP0pvKG4pP3QucmVtb3ZlQXR0cmlidXRlKGUpOnQuc2V0QXR0cmlidXRlKGUsZSk6Qm8oZSk/dC5zZXRBdHRyaWJ1dGUoZSxKbyhuKXx8ImZhbHNlIj09PW4/ImZhbHNlIjoidHJ1ZSIpOnpvKGUpP0pvKG4pP3QucmVtb3ZlQXR0cmlidXRlTlMoVm8sS28oZSkpOnQuc2V0QXR0cmlidXRlTlMoVm8sZSxuKTpKbyhuKT90LnJlbW92ZUF0dHJpYnV0ZShlKTp0LnNldEF0dHJpYnV0ZShlLG4pfWZ1bmN0aW9uIFplKG4scil7dmFyIGk9ci5lbG0sbz1yLmRhdGEsYT1uLmRhdGE7aWYoISh0KG8uc3RhdGljQ2xhc3MpJiZ0KG8uY2xhc3MpJiYodChhKXx8dChhLnN0YXRpY0NsYXNzKSYmdChhLmNsYXNzKSkpKXt2YXIgcz1FZShyKSxjPWkuX3RyYW5zaXRpb25DbGFzc2VzO2UoYykmJihzPU5lKHMsSWUoYykpKSxzIT09aS5fcHJldkNsYXNzJiYoaS5zZXRBdHRyaWJ1dGUoImNsYXNzIixzKSxpLl9wcmV2Q2xhc3M9cyl9fWZ1bmN0aW9uIFllKHQpe2Z1bmN0aW9uIGUoKXsoYXx8KGE9W10pKS5wdXNoKHQuc2xpY2UodixpKS50cmltKCkpLHY9aSsxfXZhciBuLHIsaSxvLGEscz0hMSxjPSExLHU9ITEsbD0hMSxmPTAscD0wLGQ9MCx2PTA7Zm9yKGk9MDtpPHQubGVuZ3RoO2krKylpZihyPW4sbj10LmNoYXJDb2RlQXQoaSkscykzOT09PW4mJjkyIT09ciYmKHM9ITEpO2Vsc2UgaWYoYykzND09PW4mJjkyIT09ciYmKGM9ITEpO2Vsc2UgaWYodSk5Nj09PW4mJjkyIT09ciYmKHU9ITEpO2Vsc2UgaWYobCk0Nz09PW4mJjkyIT09ciYmKGw9ITEpO2Vsc2UgaWYoMTI0IT09bnx8MTI0PT09dC5jaGFyQ29kZUF0KGkrMSl8fDEyND09PXQuY2hhckNvZGVBdChpLTEpfHxmfHxwfHxkKXtzd2l0Y2gobil7Y2FzZSAzNDpjPSEwO2JyZWFrO2Nhc2UgMzk6cz0hMDticmVhaztjYXNlIDk2OnU9ITA7YnJlYWs7Y2FzZSA0MDpkKys7YnJlYWs7Y2FzZSA0MTpkLS07YnJlYWs7Y2FzZSA5MTpwKys7YnJlYWs7Y2FzZSA5MzpwLS07YnJlYWs7Y2FzZSAxMjM6ZisrO2JyZWFrO2Nhc2UgMTI1OmYtLX1pZig0Nz09PW4pe2Zvcih2YXIgaD1pLTEsbT12b2lkIDA7aD49MCYmIiAiPT09KG09dC5jaGFyQXQoaCkpO2gtLSk7bSYmc2EudGVzdChtKXx8KGw9ITApfX1lbHNlIHZvaWQgMD09PW8/KHY9aSsxLG89dC5zbGljZSgwLGkpLnRyaW0oKSk6ZSgpO2lmKHZvaWQgMD09PW8/bz10LnNsaWNlKDAsaSkudHJpbSgpOjAhPT12JiZlKCksYSlmb3IoaT0wO2k8YS5sZW5ndGg7aSsrKW89UWUobyxhW2ldKTtyZXR1cm4gb31mdW5jdGlvbiBRZSh0LGUpe3ZhciBuPWUuaW5kZXhPZigiKCIpO3JldHVybiBuPDA/J19mKCInK2UrJyIpKCcrdCsiKSI6J19mKCInK2Uuc2xpY2UoMCxuKSsnIikoJyt0KyIsIitlLnNsaWNlKG4rMSl9ZnVuY3Rpb24gWGUodCl7Y29uc29sZS5lcnJvcigiW1Z1ZSBjb21waWxlcl06ICIrdCl9ZnVuY3Rpb24gdG4odCxlKXtyZXR1cm4gdD90Lm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdFtlXX0pLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdH0pOltdfWZ1bmN0aW9uIGVuKHQsZSxuKXsodC5wcm9wc3x8KHQucHJvcHM9W10pKS5wdXNoKHtuYW1lOmUsdmFsdWU6bn0pfWZ1bmN0aW9uIG5uKHQsZSxuKXsodC5hdHRyc3x8KHQuYXR0cnM9W10pKS5wdXNoKHtuYW1lOmUsdmFsdWU6bn0pfWZ1bmN0aW9uIHJuKHQsZSxuLHIsaSxvKXsodC5kaXJlY3RpdmVzfHwodC5kaXJlY3RpdmVzPVtdKSkucHVzaCh7bmFtZTplLHJhd05hbWU6bix2YWx1ZTpyLGFyZzppLG1vZGlmaWVyczpvfSl9ZnVuY3Rpb24gb24odCxlLG4scixpLG8pe3ImJnIuY2FwdHVyZSYmKGRlbGV0ZSByLmNhcHR1cmUsZT0iISIrZSksciYmci5vbmNlJiYoZGVsZXRlIHIub25jZSxlPSJ+IitlKSxyJiZyLnBhc3NpdmUmJihkZWxldGUgci5wYXNzaXZlLGU9IiYiK2UpO3ZhciBhO3ImJnIubmF0aXZlPyhkZWxldGUgci5uYXRpdmUsYT10Lm5hdGl2ZUV2ZW50c3x8KHQubmF0aXZlRXZlbnRzPXt9KSk6YT10LmV2ZW50c3x8KHQuZXZlbnRzPXt9KTt2YXIgcz17dmFsdWU6bixtb2RpZmllcnM6cn0sYz1hW2VdO0FycmF5LmlzQXJyYXkoYyk/aT9jLnVuc2hpZnQocyk6Yy5wdXNoKHMpOmFbZV09Yz9pP1tzLGNdOltjLHNdOnN9ZnVuY3Rpb24gYW4odCxlLG4pe3ZhciByPXNuKHQsIjoiK2UpfHxzbih0LCJ2LWJpbmQ6IitlKTtpZihudWxsIT1yKXJldHVybiBZZShyKTtpZighMSE9PW4pe3ZhciBpPXNuKHQsZSk7aWYobnVsbCE9aSlyZXR1cm4gSlNPTi5zdHJpbmdpZnkoaSl9fWZ1bmN0aW9uIHNuKHQsZSl7dmFyIG47aWYobnVsbCE9KG49dC5hdHRyc01hcFtlXSkpZm9yKHZhciByPXQuYXR0cnNMaXN0LGk9MCxvPXIubGVuZ3RoO2k8bztpKyspaWYocltpXS5uYW1lPT09ZSl7ci5zcGxpY2UoaSwxKTticmVha31yZXR1cm4gbn1mdW5jdGlvbiBjbih0LGUsbil7dmFyIHI9bnx8e30saT1yLm51bWJlcixvPSIkJHYiO3IudHJpbSYmKG89Iih0eXBlb2YgJCR2ID09PSAnc3RyaW5nJz8gJCR2LnRyaW0oKTogJCR2KSIpLGkmJihvPSJfbigiK28rIikiKTt2YXIgYT11bihlLG8pO3QubW9kZWw9e3ZhbHVlOiIoIitlKyIpIixleHByZXNzaW9uOiciJytlKyciJyxjYWxsYmFjazoiZnVuY3Rpb24gKCQkdikgeyIrYSsifSJ9fWZ1bmN0aW9uIHVuKHQsZSl7dmFyIG49bG4odCk7cmV0dXJuIG51bGw9PT1uLmlkeD90KyI9IitlOiIkc2V0KCIrbi5leHArIiwgIituLmlkeCsiLCAiK2UrIikifWZ1bmN0aW9uIGxuKHQpe2lmKEVvPXQsU289RW8ubGVuZ3RoLExvPU5vPUlvPTAsdC5pbmRleE9mKCJbIik8MHx8dC5sYXN0SW5kZXhPZigiXSIpPFNvLTEpcmV0dXJue2V4cDp0LGlkeDpudWxsfTtmb3IoOyFwbigpOylkbihqbz1mbigpKT9obihqbyk6OTE9PT1qbyYmdm4oam8pO3JldHVybntleHA6dC5zdWJzdHJpbmcoMCxObyksaWR4OnQuc3Vic3RyaW5nKE5vKzEsSW8pfX1mdW5jdGlvbiBmbigpe3JldHVybiBFby5jaGFyQ29kZUF0KCsrTG8pfWZ1bmN0aW9uIHBuKCl7cmV0dXJuIExvPj1Tb31mdW5jdGlvbiBkbih0KXtyZXR1cm4gMzQ9PT10fHwzOT09PXR9ZnVuY3Rpb24gdm4odCl7dmFyIGU9MTtmb3IoTm89TG87IXBuKCk7KWlmKHQ9Zm4oKSxkbih0KSlobih0KTtlbHNlIGlmKDkxPT09dCYmZSsrLDkzPT09dCYmZS0tLDA9PT1lKXtJbz1MbzticmVha319ZnVuY3Rpb24gaG4odCl7Zm9yKHZhciBlPXQ7IXBuKCkmJih0PWZuKCkpIT09ZTspO31mdW5jdGlvbiBtbih0LGUsbil7dmFyIHI9biYmbi5udW1iZXIsaT1hbih0LCJ2YWx1ZSIpfHwibnVsbCIsbz1hbih0LCJ0cnVlLXZhbHVlIil8fCJ0cnVlIixhPWFuKHQsImZhbHNlLXZhbHVlIil8fCJmYWxzZSI7ZW4odCwiY2hlY2tlZCIsIkFycmF5LmlzQXJyYXkoIitlKyIpP19pKCIrZSsiLCIraSsiKT4tMSIrKCJ0cnVlIj09PW8/IjooIitlKyIpIjoiOl9xKCIrZSsiLCIrbysiKSIpKSxvbih0LHVhLCJ2YXIgJCRhPSIrZSsiLCQkZWw9JGV2ZW50LnRhcmdldCwkJGM9JCRlbC5jaGVja2VkPygiK28rIik6KCIrYSsiKTtpZihBcnJheS5pc0FycmF5KCQkYSkpe3ZhciAkJHY9Iisocj8iX24oIitpKyIpIjppKSsiLCQkaT1faSgkJGEsJCR2KTtpZigkJGVsLmNoZWNrZWQpeyQkaTwwJiYoIitlKyI9JCRhLmNvbmNhdCgkJHYpKX1lbHNleyQkaT4tMSYmKCIrZSsiPSQkYS5zbGljZSgwLCQkaSkuY29uY2F0KCQkYS5zbGljZSgkJGkrMSkpKX19ZWxzZXsiK3VuKGUsIiQkYyIpKyJ9IixudWxsLCEwKX1mdW5jdGlvbiB5bih0LGUsbil7dmFyIHI9biYmbi5udW1iZXIsaT1hbih0LCJ2YWx1ZSIpfHwibnVsbCI7ZW4odCwiY2hlY2tlZCIsIl9xKCIrZSsiLCIrKGk9cj8iX24oIitpKyIpIjppKSsiKSIpLG9uKHQsdWEsdW4oZSxpKSxudWxsLCEwKX1mdW5jdGlvbiBnbih0LGUsbil7dmFyIHI9InZhciAkJHNlbGVjdGVkVmFsID0gIisoJ0FycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCgkZXZlbnQudGFyZ2V0Lm9wdGlvbnMsZnVuY3Rpb24obyl7cmV0dXJuIG8uc2VsZWN0ZWR9KS5tYXAoZnVuY3Rpb24obyl7dmFyIHZhbCA9ICJfdmFsdWUiIGluIG8gPyBvLl92YWx1ZSA6IG8udmFsdWU7cmV0dXJuICcrKG4mJm4ubnVtYmVyPyJfbih2YWwpIjoidmFsIikrIn0pIikrIjsiO29uKHQsImNoYW5nZSIscj1yKyIgIit1bihlLCIkZXZlbnQudGFyZ2V0Lm11bHRpcGxlID8gJCRzZWxlY3RlZFZhbCA6ICQkc2VsZWN0ZWRWYWxbMF0iKSxudWxsLCEwKX1mdW5jdGlvbiBfbih0LGUsbil7dmFyIHI9dC5hdHRyc01hcC50eXBlLGk9bnx8e30sbz1pLmxhenksYT1pLm51bWJlcixzPWkudHJpbSxjPSFvJiYicmFuZ2UiIT09cix1PW8/ImNoYW5nZSI6InJhbmdlIj09PXI/Y2E6ImlucHV0IixsPSIkZXZlbnQudGFyZ2V0LnZhbHVlIjtzJiYobD0iJGV2ZW50LnRhcmdldC52YWx1ZS50cmltKCkiKSxhJiYobD0iX24oIitsKyIpIik7dmFyIGY9dW4oZSxsKTtjJiYoZj0iaWYoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpcmV0dXJuOyIrZiksZW4odCwidmFsdWUiLCIoIitlKyIpIiksb24odCx1LGYsbnVsbCwhMCksKHN8fGEpJiZvbih0LCJibHVyIiwiJGZvcmNlVXBkYXRlKCkiKX1mdW5jdGlvbiBibih0KXt2YXIgbjtlKHRbY2FdKSYmKHRbbj1OaT8iY2hhbmdlIjoiaW5wdXQiXT1bXS5jb25jYXQodFtjYV0sdFtuXXx8W10pLGRlbGV0ZSB0W2NhXSksZSh0W3VhXSkmJih0W249Rmk/ImNsaWNrIjoiY2hhbmdlIl09W10uY29uY2F0KHRbdWFdLHRbbl18fFtdKSxkZWxldGUgdFt1YV0pfWZ1bmN0aW9uICRuKHQsZSxuLHIsaSl7aWYobil7dmFyIG89ZSxhPURvO2U9ZnVuY3Rpb24obil7bnVsbCE9PSgxPT09YXJndW1lbnRzLmxlbmd0aD9vKG4pOm8uYXBwbHkobnVsbCxhcmd1bWVudHMpKSYmQ24odCxlLHIsYSl9fURvLmFkZEV2ZW50TGlzdGVuZXIodCxlLEhpP3tjYXB0dXJlOnIscGFzc2l2ZTppfTpyKX1mdW5jdGlvbiBDbih0LGUsbixyKXsocnx8RG8pLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxlLG4pfWZ1bmN0aW9uIHduKGUsbil7aWYoIXQoZS5kYXRhLm9uKXx8IXQobi5kYXRhLm9uKSl7dmFyIHI9bi5kYXRhLm9ufHx7fSxpPWUuZGF0YS5vbnx8e307RG89bi5lbG0sYm4ociksdHQocixpLCRuLENuLG4uY29udGV4dCl9fWZ1bmN0aW9uIHhuKG4scil7aWYoIXQobi5kYXRhLmRvbVByb3BzKXx8IXQoci5kYXRhLmRvbVByb3BzKSl7dmFyIGksbyxhPXIuZWxtLHM9bi5kYXRhLmRvbVByb3BzfHx7fSxjPXIuZGF0YS5kb21Qcm9wc3x8e307ZShjLl9fb2JfXykmJihjPXIuZGF0YS5kb21Qcm9wcz15KHt9LGMpKTtmb3IoaSBpbiBzKXQoY1tpXSkmJihhW2ldPSIiKTtmb3IoaSBpbiBjKWlmKG89Y1tpXSwidGV4dENvbnRlbnQiIT09aSYmImlubmVySFRNTCIhPT1pfHwoci5jaGlsZHJlbiYmKHIuY2hpbGRyZW4ubGVuZ3RoPTApLG8hPT1zW2ldKSlpZigidmFsdWUiPT09aSl7YS5fdmFsdWU9bzt2YXIgdT10KG8pPyIiOlN0cmluZyhvKTtBbihhLHIsdSkmJihhLnZhbHVlPXUpfWVsc2UgYVtpXT1vfX1mdW5jdGlvbiBBbih0LGUsbil7cmV0dXJuIXQuY29tcG9zaW5nJiYoIm9wdGlvbiI9PT1lLnRhZ3x8a24odCxuKXx8T24odCxuKSl9ZnVuY3Rpb24ga24odCxlKXt2YXIgbj0hMDt0cnl7bj1kb2N1bWVudC5hY3RpdmVFbGVtZW50IT09dH1jYXRjaCh0KXt9cmV0dXJuIG4mJnQudmFsdWUhPT1lfWZ1bmN0aW9uIE9uKHQsbil7dmFyIHI9dC52YWx1ZSxpPXQuX3ZNb2RpZmllcnM7cmV0dXJuIGUoaSkmJmkubnVtYmVyP2wocikhPT1sKG4pOmUoaSkmJmkudHJpbT9yLnRyaW0oKSE9PW4udHJpbSgpOnIhPT1ufWZ1bmN0aW9uIFRuKHQpe3ZhciBlPVNuKHQuc3R5bGUpO3JldHVybiB0LnN0YXRpY1N0eWxlP3kodC5zdGF0aWNTdHlsZSxlKTplfWZ1bmN0aW9uIFNuKHQpe3JldHVybiBBcnJheS5pc0FycmF5KHQpP2codCk6InN0cmluZyI9PXR5cGVvZiB0P3BhKHQpOnR9ZnVuY3Rpb24gRW4odCxlKXt2YXIgbixyPXt9O2lmKGUpZm9yKHZhciBpPXQ7aS5jb21wb25lbnRJbnN0YW5jZTspKGk9aS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpLmRhdGEmJihuPVRuKGkuZGF0YSkpJiZ5KHIsbik7KG49VG4odC5kYXRhKSkmJnkocixuKTtmb3IodmFyIG89dDtvPW8ucGFyZW50OylvLmRhdGEmJihuPVRuKG8uZGF0YSkpJiZ5KHIsbik7cmV0dXJuIHJ9ZnVuY3Rpb24gam4obixyKXt2YXIgaT1yLmRhdGEsbz1uLmRhdGE7aWYoISh0KGkuc3RhdGljU3R5bGUpJiZ0KGkuc3R5bGUpJiZ0KG8uc3RhdGljU3R5bGUpJiZ0KG8uc3R5bGUpKSl7dmFyIGEscyxjPXIuZWxtLHU9by5zdGF0aWNTdHlsZSxsPW8ubm9ybWFsaXplZFN0eWxlfHxvLnN0eWxlfHx7fSxmPXV8fGwscD1TbihyLmRhdGEuc3R5bGUpfHx7fTtyLmRhdGEubm9ybWFsaXplZFN0eWxlPWUocC5fX29iX18pP3koe30scCk6cDt2YXIgZD1FbihyLCEwKTtmb3IocyBpbiBmKXQoZFtzXSkmJmhhKGMscywiIik7Zm9yKHMgaW4gZCkoYT1kW3NdKSE9PWZbc10mJmhhKGMscyxudWxsPT1hPyIiOmEpfX1mdW5jdGlvbiBMbih0LGUpe2lmKGUmJihlPWUudHJpbSgpKSlpZih0LmNsYXNzTGlzdCllLmluZGV4T2YoIiAiKT4tMT9lLnNwbGl0KC9ccysvKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiB0LmNsYXNzTGlzdC5hZGQoZSl9KTp0LmNsYXNzTGlzdC5hZGQoZSk7ZWxzZXt2YXIgbj0iICIrKHQuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIikrIiAiO24uaW5kZXhPZigiICIrZSsiICIpPDAmJnQuc2V0QXR0cmlidXRlKCJjbGFzcyIsKG4rZSkudHJpbSgpKX19ZnVuY3Rpb24gTm4odCxlKXtpZihlJiYoZT1lLnRyaW0oKSkpaWYodC5jbGFzc0xpc3QpZS5pbmRleE9mKCIgIik+LTE/ZS5zcGxpdCgvXHMrLykuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gdC5jbGFzc0xpc3QucmVtb3ZlKGUpfSk6dC5jbGFzc0xpc3QucmVtb3ZlKGUpLHQuY2xhc3NMaXN0Lmxlbmd0aHx8dC5yZW1vdmVBdHRyaWJ1dGUoImNsYXNzIik7ZWxzZXtmb3IodmFyIG49IiAiKyh0LmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpKyIgIixyPSIgIitlKyIgIjtuLmluZGV4T2Yocik+PTA7KW49bi5yZXBsYWNlKHIsIiAiKTsobj1uLnRyaW0oKSk/dC5zZXRBdHRyaWJ1dGUoImNsYXNzIixuKTp0LnJlbW92ZUF0dHJpYnV0ZSgiY2xhc3MiKX19ZnVuY3Rpb24gSW4odCl7aWYodCl7aWYoIm9iamVjdCI9PXR5cGVvZiB0KXt2YXIgZT17fTtyZXR1cm4hMSE9PXQuY3NzJiZ5KGUsX2EodC5uYW1lfHwidiIpKSx5KGUsdCksZX1yZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQ/X2EodCk6dm9pZCAwfX1mdW5jdGlvbiBNbih0KXtPYShmdW5jdGlvbigpe09hKHQpfSl9ZnVuY3Rpb24gRG4odCxlKXt2YXIgbj10Ll90cmFuc2l0aW9uQ2xhc3Nlc3x8KHQuX3RyYW5zaXRpb25DbGFzc2VzPVtdKTtuLmluZGV4T2YoZSk8MCYmKG4ucHVzaChlKSxMbih0LGUpKX1mdW5jdGlvbiBQbih0LGUpe3QuX3RyYW5zaXRpb25DbGFzc2VzJiZwKHQuX3RyYW5zaXRpb25DbGFzc2VzLGUpLE5uKHQsZSl9ZnVuY3Rpb24gRm4odCxlLG4pe3ZhciByPVJuKHQsZSksaT1yLnR5cGUsbz1yLnRpbWVvdXQsYT1yLnByb3BDb3VudDtpZighaSlyZXR1cm4gbigpO3ZhciBzPWk9PT0kYT94YTprYSxjPTAsdT1mdW5jdGlvbigpe3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihzLGwpLG4oKX0sbD1mdW5jdGlvbihlKXtlLnRhcmdldD09PXQmJisrYz49YSYmdSgpfTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YzxhJiZ1KCl9LG8rMSksdC5hZGRFdmVudExpc3RlbmVyKHMsbCl9ZnVuY3Rpb24gUm4odCxlKXt2YXIgbixyPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHQpLGk9clt3YSsiRGVsYXkiXS5zcGxpdCgiLCAiKSxvPXJbd2ErIkR1cmF0aW9uIl0uc3BsaXQoIiwgIiksYT1IbihpLG8pLHM9cltBYSsiRGVsYXkiXS5zcGxpdCgiLCAiKSxjPXJbQWErIkR1cmF0aW9uIl0uc3BsaXQoIiwgIiksdT1IbihzLGMpLGw9MCxmPTA7cmV0dXJuIGU9PT0kYT9hPjAmJihuPSRhLGw9YSxmPW8ubGVuZ3RoKTplPT09Q2E/dT4wJiYobj1DYSxsPXUsZj1jLmxlbmd0aCk6Zj0obj0obD1NYXRoLm1heChhLHUpKT4wP2E+dT8kYTpDYTpudWxsKT9uPT09JGE/by5sZW5ndGg6Yy5sZW5ndGg6MCx7dHlwZTpuLHRpbWVvdXQ6bCxwcm9wQ291bnQ6ZixoYXNUcmFuc2Zvcm06bj09PSRhJiZUYS50ZXN0KHJbd2ErIlByb3BlcnR5Il0pfX1mdW5jdGlvbiBIbih0LGUpe2Zvcig7dC5sZW5ndGg8ZS5sZW5ndGg7KXQ9dC5jb25jYXQodCk7cmV0dXJuIE1hdGgubWF4LmFwcGx5KG51bGwsZS5tYXAoZnVuY3Rpb24oZSxuKXtyZXR1cm4gQm4oZSkrQm4odFtuXSl9KSl9ZnVuY3Rpb24gQm4odCl7cmV0dXJuIDFlMypOdW1iZXIodC5zbGljZSgwLC0xKSl9ZnVuY3Rpb24gVW4obixyKXt2YXIgaT1uLmVsbTtlKGkuX2xlYXZlQ2IpJiYoaS5fbGVhdmVDYi5jYW5jZWxsZWQ9ITAsaS5fbGVhdmVDYigpKTt2YXIgYT1JbihuLmRhdGEudHJhbnNpdGlvbik7aWYoIXQoYSkmJiFlKGkuX2VudGVyQ2IpJiYxPT09aS5ub2RlVHlwZSl7Zm9yKHZhciBzPWEuY3NzLGM9YS50eXBlLHU9YS5lbnRlckNsYXNzLGY9YS5lbnRlclRvQ2xhc3MscD1hLmVudGVyQWN0aXZlQ2xhc3MsZD1hLmFwcGVhckNsYXNzLHY9YS5hcHBlYXJUb0NsYXNzLGg9YS5hcHBlYXJBY3RpdmVDbGFzcyxtPWEuYmVmb3JlRW50ZXIseT1hLmVudGVyLGc9YS5hZnRlckVudGVyLF89YS5lbnRlckNhbmNlbGxlZCxiPWEuYmVmb3JlQXBwZWFyLCQ9YS5hcHBlYXIsdz1hLmFmdGVyQXBwZWFyLHg9YS5hcHBlYXJDYW5jZWxsZWQsQT1hLmR1cmF0aW9uLGs9dW8sTz11by4kdm5vZGU7TyYmTy5wYXJlbnQ7KWs9KE89Ty5wYXJlbnQpLmNvbnRleHQ7dmFyIFQ9IWsuX2lzTW91bnRlZHx8IW4uaXNSb290SW5zZXJ0O2lmKCFUfHwkfHwiIj09PSQpe3ZhciBTPVQmJmQ/ZDp1LEU9VCYmaD9oOnAsaj1UJiZ2P3Y6ZixMPVQ/Ynx8bTptLE49VCYmImZ1bmN0aW9uIj09dHlwZW9mICQ/JDp5LEk9VD93fHxnOmcsTT1UP3h8fF86XyxEPWwobyhBKT9BLmVudGVyOkEpLFA9ITEhPT1zJiYhSWksRj1LbihOKSxSPWkuX2VudGVyQ2I9QyhmdW5jdGlvbigpe1AmJihQbihpLGopLFBuKGksRSkpLFIuY2FuY2VsbGVkPyhQJiZQbihpLFMpLE0mJk0oaSkpOkkmJkkoaSksaS5fZW50ZXJDYj1udWxsfSk7bi5kYXRhLnNob3d8fGV0KG4uZGF0YS5ob29rfHwobi5kYXRhLmhvb2s9e30pLCJpbnNlcnQiLGZ1bmN0aW9uKCl7dmFyIHQ9aS5wYXJlbnROb2RlLGU9dCYmdC5fcGVuZGluZyYmdC5fcGVuZGluZ1tuLmtleV07ZSYmZS50YWc9PT1uLnRhZyYmZS5lbG0uX2xlYXZlQ2ImJmUuZWxtLl9sZWF2ZUNiKCksTiYmTihpLFIpfSksTCYmTChpKSxQJiYoRG4oaSxTKSxEbihpLEUpLE1uKGZ1bmN0aW9uKCl7RG4oaSxqKSxQbihpLFMpLFIuY2FuY2VsbGVkfHxGfHwoem4oRCk/c2V0VGltZW91dChSLEQpOkZuKGksYyxSKSl9KSksbi5kYXRhLnNob3cmJihyJiZyKCksTiYmTihpLFIpKSxQfHxGfHxSKCl9fX1mdW5jdGlvbiBWbihuLHIpe2Z1bmN0aW9uIGkoKXt4LmNhbmNlbGxlZHx8KG4uZGF0YS5zaG93fHwoKGEucGFyZW50Tm9kZS5fcGVuZGluZ3x8KGEucGFyZW50Tm9kZS5fcGVuZGluZz17fSkpW24ua2V5XT1uKSx2JiZ2KGEpLGImJihEbihhLGYpLERuKGEsZCksTW4oZnVuY3Rpb24oKXtEbihhLHApLFBuKGEsZikseC5jYW5jZWxsZWR8fCR8fCh6bih3KT9zZXRUaW1lb3V0KHgsdyk6Rm4oYSx1LHgpKX0pKSxoJiZoKGEseCksYnx8JHx8eCgpKX12YXIgYT1uLmVsbTtlKGEuX2VudGVyQ2IpJiYoYS5fZW50ZXJDYi5jYW5jZWxsZWQ9ITAsYS5fZW50ZXJDYigpKTt2YXIgcz1JbihuLmRhdGEudHJhbnNpdGlvbik7aWYodChzKSlyZXR1cm4gcigpO2lmKCFlKGEuX2xlYXZlQ2IpJiYxPT09YS5ub2RlVHlwZSl7dmFyIGM9cy5jc3MsdT1zLnR5cGUsZj1zLmxlYXZlQ2xhc3MscD1zLmxlYXZlVG9DbGFzcyxkPXMubGVhdmVBY3RpdmVDbGFzcyx2PXMuYmVmb3JlTGVhdmUsaD1zLmxlYXZlLG09cy5hZnRlckxlYXZlLHk9cy5sZWF2ZUNhbmNlbGxlZCxnPXMuZGVsYXlMZWF2ZSxfPXMuZHVyYXRpb24sYj0hMSE9PWMmJiFJaSwkPUtuKGgpLHc9bChvKF8pP18ubGVhdmU6XykseD1hLl9sZWF2ZUNiPUMoZnVuY3Rpb24oKXthLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5fcGVuZGluZyYmKGEucGFyZW50Tm9kZS5fcGVuZGluZ1tuLmtleV09bnVsbCksYiYmKFBuKGEscCksUG4oYSxkKSkseC5jYW5jZWxsZWQ/KGImJlBuKGEsZikseSYmeShhKSk6KHIoKSxtJiZtKGEpKSxhLl9sZWF2ZUNiPW51bGx9KTtnP2coaSk6aSgpfX1mdW5jdGlvbiB6bih0KXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIHQmJiFpc05hTih0KX1mdW5jdGlvbiBLbihuKXtpZih0KG4pKXJldHVybiExO3ZhciByPW4uZm5zO3JldHVybiBlKHIpP0tuKEFycmF5LmlzQXJyYXkocik/clswXTpyKToobi5fbGVuZ3RofHxuLmxlbmd0aCk+MX1mdW5jdGlvbiBKbih0LGUpeyEwIT09ZS5kYXRhLnNob3cmJlVuKGUpfWZ1bmN0aW9uIHFuKHQsZSxuKXt2YXIgcj1lLnZhbHVlLGk9dC5tdWx0aXBsZTtpZighaXx8QXJyYXkuaXNBcnJheShyKSl7Zm9yKHZhciBvLGEscz0wLGM9dC5vcHRpb25zLmxlbmd0aDtzPGM7cysrKWlmKGE9dC5vcHRpb25zW3NdLGkpbz0kKHIsV24oYSkpPi0xLGEuc2VsZWN0ZWQhPT1vJiYoYS5zZWxlY3RlZD1vKTtlbHNlIGlmKGIoV24oYSkscikpcmV0dXJuIHZvaWQodC5zZWxlY3RlZEluZGV4IT09cyYmKHQuc2VsZWN0ZWRJbmRleD1zKSk7aXx8KHQuc2VsZWN0ZWRJbmRleD0tMSl9fWZ1bmN0aW9uIFduKHQpe3JldHVybiJfdmFsdWUiaW4gdD90Ll92YWx1ZTp0LnZhbHVlfWZ1bmN0aW9uIEduKHQpe3QudGFyZ2V0LmNvbXBvc2luZz0hMH1mdW5jdGlvbiBabih0KXt0LnRhcmdldC5jb21wb3NpbmcmJih0LnRhcmdldC5jb21wb3Npbmc9ITEsWW4odC50YXJnZXQsImlucHV0IikpfWZ1bmN0aW9uIFluKHQsZSl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkhUTUxFdmVudHMiKTtuLmluaXRFdmVudChlLCEwLCEwKSx0LmRpc3BhdGNoRXZlbnQobil9ZnVuY3Rpb24gUW4odCl7cmV0dXJuIXQuY29tcG9uZW50SW5zdGFuY2V8fHQuZGF0YSYmdC5kYXRhLnRyYW5zaXRpb24/dDpRbih0LmNvbXBvbmVudEluc3RhbmNlLl92bm9kZSl9ZnVuY3Rpb24gWG4odCl7dmFyIGU9dCYmdC5jb21wb25lbnRPcHRpb25zO3JldHVybiBlJiZlLkN0b3Iub3B0aW9ucy5hYnN0cmFjdD9YbihmdChlLmNoaWxkcmVuKSk6dH1mdW5jdGlvbiB0cih0KXt2YXIgZT17fSxuPXQuJG9wdGlvbnM7Zm9yKHZhciByIGluIG4ucHJvcHNEYXRhKWVbcl09dFtyXTt2YXIgaT1uLl9wYXJlbnRMaXN0ZW5lcnM7Zm9yKHZhciBvIGluIGkpZVt5aShvKV09aVtvXTtyZXR1cm4gZX1mdW5jdGlvbiBlcih0LGUpe2lmKC9cZC1rZWVwLWFsaXZlJC8udGVzdChlLnRhZykpcmV0dXJuIHQoImtlZXAtYWxpdmUiLHtwcm9wczplLmNvbXBvbmVudE9wdGlvbnMucHJvcHNEYXRhfSl9ZnVuY3Rpb24gbnIodCl7Zm9yKDt0PXQucGFyZW50OylpZih0LmRhdGEudHJhbnNpdGlvbilyZXR1cm4hMH1mdW5jdGlvbiBycih0LGUpe3JldHVybiBlLmtleT09PXQua2V5JiZlLnRhZz09PXQudGFnfWZ1bmN0aW9uIGlyKHQpe3JldHVybiB0LmlzQ29tbWVudCYmdC5hc3luY0ZhY3Rvcnl9ZnVuY3Rpb24gb3IodCl7dC5lbG0uX21vdmVDYiYmdC5lbG0uX21vdmVDYigpLHQuZWxtLl9lbnRlckNiJiZ0LmVsbS5fZW50ZXJDYigpfWZ1bmN0aW9uIGFyKHQpe3QuZGF0YS5uZXdQb3M9dC5lbG0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCl9ZnVuY3Rpb24gc3IodCl7dmFyIGU9dC5kYXRhLnBvcyxuPXQuZGF0YS5uZXdQb3Mscj1lLmxlZnQtbi5sZWZ0LGk9ZS50b3Atbi50b3A7aWYocnx8aSl7dC5kYXRhLm1vdmVkPSEwO3ZhciBvPXQuZWxtLnN0eWxlO28udHJhbnNmb3JtPW8uV2Via2l0VHJhbnNmb3JtPSJ0cmFuc2xhdGUoIityKyJweCwiK2krInB4KSIsby50cmFuc2l0aW9uRHVyYXRpb249IjBzIn19ZnVuY3Rpb24gY3IodCxlKXt2YXIgbj1lP0hhKGUpOkZhO2lmKG4udGVzdCh0KSl7Zm9yKHZhciByLGksbz1bXSxhPW4ubGFzdEluZGV4PTA7cj1uLmV4ZWModCk7KXsoaT1yLmluZGV4KT5hJiZvLnB1c2goSlNPTi5zdHJpbmdpZnkodC5zbGljZShhLGkpKSk7dmFyIHM9WWUoclsxXS50cmltKCkpO28ucHVzaCgiX3MoIitzKyIpIiksYT1pK3JbMF0ubGVuZ3RofXJldHVybiBhPHQubGVuZ3RoJiZvLnB1c2goSlNPTi5zdHJpbmdpZnkodC5zbGljZShhKSkpLG8uam9pbigiKyIpfX1mdW5jdGlvbiB1cih0LGUpe3ZhciBuPWU/JHM6YnM7cmV0dXJuIHQucmVwbGFjZShuLGZ1bmN0aW9uKHQpe3JldHVybiBfc1t0XX0pfWZ1bmN0aW9uIGxyKHQsZSl7ZnVuY3Rpb24gbihlKXtsKz1lLHQ9dC5zdWJzdHJpbmcoZSl9ZnVuY3Rpb24gcih0LG4scil7dmFyIGkscztpZihudWxsPT1uJiYobj1sKSxudWxsPT1yJiYocj1sKSx0JiYocz10LnRvTG93ZXJDYXNlKCkpLHQpZm9yKGk9YS5sZW5ndGgtMTtpPj0wJiZhW2ldLmxvd2VyQ2FzZWRUYWchPT1zO2ktLSk7ZWxzZSBpPTA7aWYoaT49MCl7Zm9yKHZhciBjPWEubGVuZ3RoLTE7Yz49aTtjLS0pZS5lbmQmJmUuZW5kKGFbY10udGFnLG4scik7YS5sZW5ndGg9aSxvPWkmJmFbaS0xXS50YWd9ZWxzZSJiciI9PT1zP2Uuc3RhcnQmJmUuc3RhcnQodCxbXSwhMCxuLHIpOiJwIj09PXMmJihlLnN0YXJ0JiZlLnN0YXJ0KHQsW10sITEsbixyKSxlLmVuZCYmZS5lbmQodCxuLHIpKX1mb3IodmFyIGksbyxhPVtdLHM9ZS5leHBlY3RIVE1MLGM9ZS5pc1VuYXJ5VGFnfHwkaSx1PWUuY2FuQmVMZWZ0T3BlblRhZ3x8JGksbD0wO3Q7KXtpZihpPXQsbyYmeXMobykpe3ZhciBmPTAscD1vLnRvTG93ZXJDYXNlKCksZD1nc1twXXx8KGdzW3BdPW5ldyBSZWdFeHAoIihbXFxzXFxTXSo/KSg8LyIrcCsiW14+XSo+KSIsImkiKSksdj10LnJlcGxhY2UoZCxmdW5jdGlvbih0LG4scil7cmV0dXJuIGY9ci5sZW5ndGgseXMocCl8fCJub3NjcmlwdCI9PT1wfHwobj1uLnJlcGxhY2UoLzwhLS0oW1xzXFNdKj8pLS0+L2csIiQxIikucmVwbGFjZSgvPCFcW0NEQVRBXFsoW1xzXFNdKj8pXV0+L2csIiQxIikpLHdzKHAsbikmJihuPW4uc2xpY2UoMSkpLGUuY2hhcnMmJmUuY2hhcnMobiksIiJ9KTtsKz10Lmxlbmd0aC12Lmxlbmd0aCx0PXYscihwLGwtZixsKX1lbHNle3ZhciBoPXQuaW5kZXhPZigiPCIpO2lmKDA9PT1oKXtpZihpcy50ZXN0KHQpKXt2YXIgbT10LmluZGV4T2YoIi0tXHgzZSIpO2lmKG0+PTApe2Uuc2hvdWxkS2VlcENvbW1lbnQmJmUuY29tbWVudCh0LnN1YnN0cmluZyg0LG0pKSxuKG0rMyk7Y29udGludWV9fWlmKG9zLnRlc3QodCkpe3ZhciB5PXQuaW5kZXhPZigiXT4iKTtpZih5Pj0wKXtuKHkrMik7Y29udGludWV9fXZhciBnPXQubWF0Y2gocnMpO2lmKGcpe24oZ1swXS5sZW5ndGgpO2NvbnRpbnVlfXZhciBfPXQubWF0Y2gobnMpO2lmKF8pe3ZhciBiPWw7bihfWzBdLmxlbmd0aCkscihfWzFdLGIsbCk7Y29udGludWV9dmFyICQ9ZnVuY3Rpb24oKXt2YXIgZT10Lm1hdGNoKHRzKTtpZihlKXt2YXIgcj17dGFnTmFtZTplWzFdLGF0dHJzOltdLHN0YXJ0Omx9O24oZVswXS5sZW5ndGgpO2Zvcih2YXIgaSxvOyEoaT10Lm1hdGNoKGVzKSkmJihvPXQubWF0Y2goWWEpKTspbihvWzBdLmxlbmd0aCksci5hdHRycy5wdXNoKG8pO2lmKGkpcmV0dXJuIHIudW5hcnlTbGFzaD1pWzFdLG4oaVswXS5sZW5ndGgpLHIuZW5kPWwscn19KCk7aWYoJCl7IWZ1bmN0aW9uKHQpe3ZhciBuPXQudGFnTmFtZSxpPXQudW5hcnlTbGFzaDtzJiYoInAiPT09byYmS2EobikmJnIobyksdShuKSYmbz09PW4mJnIobikpO2Zvcih2YXIgbD1jKG4pfHwhIWksZj10LmF0dHJzLmxlbmd0aCxwPW5ldyBBcnJheShmKSxkPTA7ZDxmO2QrKyl7dmFyIHY9dC5hdHRyc1tkXTthcyYmLTE9PT12WzBdLmluZGV4T2YoJyIiJykmJigiIj09PXZbM10mJmRlbGV0ZSB2WzNdLCIiPT09dls0XSYmZGVsZXRlIHZbNF0sIiI9PT12WzVdJiZkZWxldGUgdls1XSk7dmFyIGg9dlszXXx8dls0XXx8dls1XXx8IiI7cFtkXT17bmFtZTp2WzFdLHZhbHVlOnVyKGgsZS5zaG91bGREZWNvZGVOZXdsaW5lcyl9fWx8fChhLnB1c2goe3RhZzpuLGxvd2VyQ2FzZWRUYWc6bi50b0xvd2VyQ2FzZSgpLGF0dHJzOnB9KSxvPW4pLGUuc3RhcnQmJmUuc3RhcnQobixwLGwsdC5zdGFydCx0LmVuZCl9KCQpLHdzKG8sdCkmJm4oMSk7Y29udGludWV9fXZhciBDPXZvaWQgMCx3PXZvaWQgMCx4PXZvaWQgMDtpZihoPj0wKXtmb3Iodz10LnNsaWNlKGgpOyEobnMudGVzdCh3KXx8dHMudGVzdCh3KXx8aXMudGVzdCh3KXx8b3MudGVzdCh3KXx8KHg9dy5pbmRleE9mKCI8IiwxKSk8MCk7KWgrPXgsdz10LnNsaWNlKGgpO0M9dC5zdWJzdHJpbmcoMCxoKSxuKGgpfWg8MCYmKEM9dCx0PSIiKSxlLmNoYXJzJiZDJiZlLmNoYXJzKEMpfWlmKHQ9PT1pKXtlLmNoYXJzJiZlLmNoYXJzKHQpO2JyZWFrfX1yKCl9ZnVuY3Rpb24gZnIodCxlKXtmdW5jdGlvbiBuKHQpe3QucHJlJiYocz0hMSkscHModC50YWcpJiYoYz0hMSl9c3M9ZS53YXJufHxYZSxwcz1lLmlzUHJlVGFnfHwkaSxkcz1lLm11c3RVc2VQcm9wfHwkaSx2cz1lLmdldFRhZ05hbWVzcGFjZXx8JGksdXM9dG4oZS5tb2R1bGVzLCJ0cmFuc2Zvcm1Ob2RlIiksbHM9dG4oZS5tb2R1bGVzLCJwcmVUcmFuc2Zvcm1Ob2RlIiksZnM9dG4oZS5tb2R1bGVzLCJwb3N0VHJhbnNmb3JtTm9kZSIpLGNzPWUuZGVsaW1pdGVyczt2YXIgcixpLG89W10sYT0hMSE9PWUucHJlc2VydmVXaGl0ZXNwYWNlLHM9ITEsYz0hMTtyZXR1cm4gbHIodCx7d2FybjpzcyxleHBlY3RIVE1MOmUuZXhwZWN0SFRNTCxpc1VuYXJ5VGFnOmUuaXNVbmFyeVRhZyxjYW5CZUxlZnRPcGVuVGFnOmUuY2FuQmVMZWZ0T3BlblRhZyxzaG91bGREZWNvZGVOZXdsaW5lczplLnNob3VsZERlY29kZU5ld2xpbmVzLHNob3VsZEtlZXBDb21tZW50OmUuY29tbWVudHMsc3RhcnQ6ZnVuY3Rpb24odCxhLHUpe2Z1bmN0aW9uIGwodCl7fXZhciBmPWkmJmkubnN8fHZzKHQpO05pJiYic3ZnIj09PWYmJihhPUVyKGEpKTt2YXIgcD17dHlwZToxLHRhZzp0LGF0dHJzTGlzdDphLGF0dHJzTWFwOk9yKGEpLHBhcmVudDppLGNoaWxkcmVuOltdfTtmJiYocC5ucz1mKSxTcihwKSYmIXppKCkmJihwLmZvcmJpZGRlbj0hMCk7Zm9yKHZhciBkPTA7ZDxscy5sZW5ndGg7ZCsrKWxzW2RdKHAsZSk7aWYoc3x8KHByKHApLHAucHJlJiYocz0hMCkpLHBzKHAudGFnKSYmKGM9ITApLHMpZHIocCk7ZWxzZXttcihwKSx5cihwKSwkcihwKSx2cihwKSxwLnBsYWluPSFwLmtleSYmIWEubGVuZ3RoLGhyKHApLENyKHApLHdyKHApO2Zvcih2YXIgdj0wO3Y8dXMubGVuZ3RoO3YrKyl1c1t2XShwLGUpO3hyKHApfWlmKHI/by5sZW5ndGh8fHIuaWYmJihwLmVsc2VpZnx8cC5lbHNlKSYmKGwoKSxicihyLHtleHA6cC5lbHNlaWYsYmxvY2s6cH0pKToocj1wLGwoKSksaSYmIXAuZm9yYmlkZGVuKWlmKHAuZWxzZWlmfHxwLmVsc2UpZ3IocCxpKTtlbHNlIGlmKHAuc2xvdFNjb3BlKXtpLnBsYWluPSExO3ZhciBoPXAuc2xvdFRhcmdldHx8JyJkZWZhdWx0Iic7KGkuc2NvcGVkU2xvdHN8fChpLnNjb3BlZFNsb3RzPXt9KSlbaF09cH1lbHNlIGkuY2hpbGRyZW4ucHVzaChwKSxwLnBhcmVudD1pO3U/bihwKTooaT1wLG8ucHVzaChwKSk7Zm9yKHZhciBtPTA7bTxmcy5sZW5ndGg7bSsrKWZzW21dKHAsZSl9LGVuZDpmdW5jdGlvbigpe3ZhciB0PW9bby5sZW5ndGgtMV0sZT10LmNoaWxkcmVuW3QuY2hpbGRyZW4ubGVuZ3RoLTFdO2UmJjM9PT1lLnR5cGUmJiIgIj09PWUudGV4dCYmIWMmJnQuY2hpbGRyZW4ucG9wKCksby5sZW5ndGgtPTEsaT1vW28ubGVuZ3RoLTFdLG4odCl9LGNoYXJzOmZ1bmN0aW9uKHQpe2lmKGkmJighTml8fCJ0ZXh0YXJlYSIhPT1pLnRhZ3x8aS5hdHRyc01hcC5wbGFjZWhvbGRlciE9PXQpKXt2YXIgZT1pLmNoaWxkcmVuO2lmKHQ9Y3x8dC50cmltKCk/VHIoaSk/dDpqcyh0KTphJiZlLmxlbmd0aD8iICI6IiIpe3ZhciBuOyFzJiYiICIhPT10JiYobj1jcih0LGNzKSk/ZS5wdXNoKHt0eXBlOjIsZXhwcmVzc2lvbjpuLHRleHQ6dH0pOiIgIj09PXQmJmUubGVuZ3RoJiYiICI9PT1lW2UubGVuZ3RoLTFdLnRleHR8fGUucHVzaCh7dHlwZTozLHRleHQ6dH0pfX19LGNvbW1lbnQ6ZnVuY3Rpb24odCl7aS5jaGlsZHJlbi5wdXNoKHt0eXBlOjMsdGV4dDp0LGlzQ29tbWVudDohMH0pfX0pLHJ9ZnVuY3Rpb24gcHIodCl7bnVsbCE9c24odCwidi1wcmUiKSYmKHQucHJlPSEwKX1mdW5jdGlvbiBkcih0KXt2YXIgZT10LmF0dHJzTGlzdC5sZW5ndGg7aWYoZSlmb3IodmFyIG49dC5hdHRycz1uZXcgQXJyYXkoZSkscj0wO3I8ZTtyKyspbltyXT17bmFtZTp0LmF0dHJzTGlzdFtyXS5uYW1lLHZhbHVlOkpTT04uc3RyaW5naWZ5KHQuYXR0cnNMaXN0W3JdLnZhbHVlKX07ZWxzZSB0LnByZXx8KHQucGxhaW49ITApfWZ1bmN0aW9uIHZyKHQpe3ZhciBlPWFuKHQsImtleSIpO2UmJih0LmtleT1lKX1mdW5jdGlvbiBocih0KXt2YXIgZT1hbih0LCJyZWYiKTtlJiYodC5yZWY9ZSx0LnJlZkluRm9yPUFyKHQpKX1mdW5jdGlvbiBtcih0KXt2YXIgZTtpZihlPXNuKHQsInYtZm9yIikpe3ZhciBuPWUubWF0Y2goa3MpO2lmKCFuKXJldHVybjt0LmZvcj1uWzJdLnRyaW0oKTt2YXIgcj1uWzFdLnRyaW0oKSxpPXIubWF0Y2goT3MpO2k/KHQuYWxpYXM9aVsxXS50cmltKCksdC5pdGVyYXRvcjE9aVsyXS50cmltKCksaVszXSYmKHQuaXRlcmF0b3IyPWlbM10udHJpbSgpKSk6dC5hbGlhcz1yfX1mdW5jdGlvbiB5cih0KXt2YXIgZT1zbih0LCJ2LWlmIik7aWYoZSl0LmlmPWUsYnIodCx7ZXhwOmUsYmxvY2s6dH0pO2Vsc2V7bnVsbCE9c24odCwidi1lbHNlIikmJih0LmVsc2U9ITApO3ZhciBuPXNuKHQsInYtZWxzZS1pZiIpO24mJih0LmVsc2VpZj1uKX19ZnVuY3Rpb24gZ3IodCxlKXt2YXIgbj1fcihlLmNoaWxkcmVuKTtuJiZuLmlmJiZicihuLHtleHA6dC5lbHNlaWYsYmxvY2s6dH0pfWZ1bmN0aW9uIF9yKHQpe2Zvcih2YXIgZT10Lmxlbmd0aDtlLS07KXtpZigxPT09dFtlXS50eXBlKXJldHVybiB0W2VdO3QucG9wKCl9fWZ1bmN0aW9uIGJyKHQsZSl7dC5pZkNvbmRpdGlvbnN8fCh0LmlmQ29uZGl0aW9ucz1bXSksdC5pZkNvbmRpdGlvbnMucHVzaChlKX1mdW5jdGlvbiAkcih0KXtudWxsIT1zbih0LCJ2LW9uY2UiKSYmKHQub25jZT0hMCl9ZnVuY3Rpb24gQ3IodCl7aWYoInNsb3QiPT09dC50YWcpdC5zbG90TmFtZT1hbih0LCJuYW1lIik7ZWxzZXt2YXIgZT1hbih0LCJzbG90Iik7ZSYmKHQuc2xvdFRhcmdldD0nIiInPT09ZT8nImRlZmF1bHQiJzplKSwidGVtcGxhdGUiPT09dC50YWcmJih0LnNsb3RTY29wZT1zbih0LCJzY29wZSIpKX19ZnVuY3Rpb24gd3IodCl7dmFyIGU7KGU9YW4odCwiaXMiKSkmJih0LmNvbXBvbmVudD1lKSxudWxsIT1zbih0LCJpbmxpbmUtdGVtcGxhdGUiKSYmKHQuaW5saW5lVGVtcGxhdGU9ITApfWZ1bmN0aW9uIHhyKHQpe3ZhciBlLG4scixpLG8sYSxzLGM9dC5hdHRyc0xpc3Q7Zm9yKGU9MCxuPWMubGVuZ3RoO2U8bjtlKyspaWYocj1pPWNbZV0ubmFtZSxvPWNbZV0udmFsdWUsQXMudGVzdChyKSlpZih0Lmhhc0JpbmRpbmdzPSEwLChhPWtyKHIpKSYmKHI9ci5yZXBsYWNlKEVzLCIiKSksU3MudGVzdChyKSlyPXIucmVwbGFjZShTcywiIiksbz1ZZShvKSxzPSExLGEmJihhLnByb3AmJihzPSEwLCJpbm5lckh0bWwiPT09KHI9eWkocikpJiYocj0iaW5uZXJIVE1MIikpLGEuY2FtZWwmJihyPXlpKHIpKSxhLnN5bmMmJm9uKHQsInVwZGF0ZToiK3lpKHIpLHVuKG8sIiRldmVudCIpKSksc3x8IXQuY29tcG9uZW50JiZkcyh0LnRhZyx0LmF0dHJzTWFwLnR5cGUscik/ZW4odCxyLG8pOm5uKHQscixvKTtlbHNlIGlmKHhzLnRlc3Qocikpb24odCxyPXIucmVwbGFjZSh4cywiIiksbyxhLCExLHNzKTtlbHNle3ZhciB1PShyPXIucmVwbGFjZShBcywiIikpLm1hdGNoKFRzKSxsPXUmJnVbMV07bCYmKHI9ci5zbGljZSgwLC0obC5sZW5ndGgrMSkpKSxybih0LHIsaSxvLGwsYSl9ZWxzZSBubih0LHIsSlNPTi5zdHJpbmdpZnkobykpfWZ1bmN0aW9uIEFyKHQpe2Zvcih2YXIgZT10O2U7KXtpZih2b2lkIDAhPT1lLmZvcilyZXR1cm4hMDtlPWUucGFyZW50fXJldHVybiExfWZ1bmN0aW9uIGtyKHQpe3ZhciBlPXQubWF0Y2goRXMpO2lmKGUpe3ZhciBuPXt9O3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24odCl7blt0LnNsaWNlKDEpXT0hMH0pLG59fWZ1bmN0aW9uIE9yKHQpe2Zvcih2YXIgZT17fSxuPTAscj10Lmxlbmd0aDtuPHI7bisrKWVbdFtuXS5uYW1lXT10W25dLnZhbHVlO3JldHVybiBlfWZ1bmN0aW9uIFRyKHQpe3JldHVybiJzY3JpcHQiPT09dC50YWd8fCJzdHlsZSI9PT10LnRhZ31mdW5jdGlvbiBTcih0KXtyZXR1cm4ic3R5bGUiPT09dC50YWd8fCJzY3JpcHQiPT09dC50YWcmJighdC5hdHRyc01hcC50eXBlfHwidGV4dC9qYXZhc2NyaXB0Ij09PXQuYXR0cnNNYXAudHlwZSl9ZnVuY3Rpb24gRXIodCl7Zm9yKHZhciBlPVtdLG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtMcy50ZXN0KHIubmFtZSl8fChyLm5hbWU9ci5uYW1lLnJlcGxhY2UoTnMsIiIpLGUucHVzaChyKSl9cmV0dXJuIGV9ZnVuY3Rpb24ganIodCxlKXt0JiYoaHM9SXMoZS5zdGF0aWNLZXlzfHwiIiksbXM9ZS5pc1Jlc2VydmVkVGFnfHwkaSxMcih0KSxOcih0LCExKSl9ZnVuY3Rpb24gTHIodCl7aWYodC5zdGF0aWM9SXIodCksMT09PXQudHlwZSl7aWYoIW1zKHQudGFnKSYmInNsb3QiIT09dC50YWcmJm51bGw9PXQuYXR0cnNNYXBbImlubGluZS10ZW1wbGF0ZSJdKXJldHVybjtmb3IodmFyIGU9MCxuPXQuY2hpbGRyZW4ubGVuZ3RoO2U8bjtlKyspe3ZhciByPXQuY2hpbGRyZW5bZV07THIociksci5zdGF0aWN8fCh0LnN0YXRpYz0hMSl9aWYodC5pZkNvbmRpdGlvbnMpZm9yKHZhciBpPTEsbz10LmlmQ29uZGl0aW9ucy5sZW5ndGg7aTxvO2krKyl7dmFyIGE9dC5pZkNvbmRpdGlvbnNbaV0uYmxvY2s7THIoYSksYS5zdGF0aWN8fCh0LnN0YXRpYz0hMSl9fX1mdW5jdGlvbiBOcih0LGUpe2lmKDE9PT10LnR5cGUpe2lmKCh0LnN0YXRpY3x8dC5vbmNlKSYmKHQuc3RhdGljSW5Gb3I9ZSksdC5zdGF0aWMmJnQuY2hpbGRyZW4ubGVuZ3RoJiYoMSE9PXQuY2hpbGRyZW4ubGVuZ3RofHwzIT09dC5jaGlsZHJlblswXS50eXBlKSlyZXR1cm4gdm9pZCh0LnN0YXRpY1Jvb3Q9ITApO2lmKHQuc3RhdGljUm9vdD0hMSx0LmNoaWxkcmVuKWZvcih2YXIgbj0wLHI9dC5jaGlsZHJlbi5sZW5ndGg7bjxyO24rKylOcih0LmNoaWxkcmVuW25dLGV8fCEhdC5mb3IpO2lmKHQuaWZDb25kaXRpb25zKWZvcih2YXIgaT0xLG89dC5pZkNvbmRpdGlvbnMubGVuZ3RoO2k8bztpKyspTnIodC5pZkNvbmRpdGlvbnNbaV0uYmxvY2ssZSl9fWZ1bmN0aW9uIElyKHQpe3JldHVybiAyIT09dC50eXBlJiYoMz09PXQudHlwZXx8ISghdC5wcmUmJih0Lmhhc0JpbmRpbmdzfHx0LmlmfHx0LmZvcnx8ZGkodC50YWcpfHwhbXModC50YWcpfHxNcih0KXx8IU9iamVjdC5rZXlzKHQpLmV2ZXJ5KGhzKSkpKX1mdW5jdGlvbiBNcih0KXtmb3IoO3QucGFyZW50Oyl7aWYoInRlbXBsYXRlIiE9PSh0PXQucGFyZW50KS50YWcpcmV0dXJuITE7aWYodC5mb3IpcmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gRHIodCxlLG4pe3ZhciByPWU/Im5hdGl2ZU9uOnsiOiJvbjp7Ijtmb3IodmFyIGkgaW4gdCl7dmFyIG89dFtpXTtyKz0nIicraSsnIjonK1ByKGksbykrIiwifXJldHVybiByLnNsaWNlKDAsLTEpKyJ9In1mdW5jdGlvbiBQcih0LGUpe2lmKCFlKXJldHVybiJmdW5jdGlvbigpe30iO2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIlsiK2UubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBQcih0LGUpfSkuam9pbigiLCIpKyJdIjt2YXIgbj1Ecy50ZXN0KGUudmFsdWUpLHI9TXMudGVzdChlLnZhbHVlKTtpZihlLm1vZGlmaWVycyl7dmFyIGk9IiIsbz0iIixhPVtdO2Zvcih2YXIgcyBpbiBlLm1vZGlmaWVycylSc1tzXT8obys9UnNbc10sUHNbc10mJmEucHVzaChzKSk6YS5wdXNoKHMpO3JldHVybiBhLmxlbmd0aCYmKGkrPUZyKGEpKSxvJiYoaSs9byksImZ1bmN0aW9uKCRldmVudCl7IitpKyhuP2UudmFsdWUrIigkZXZlbnQpIjpyPyIoIitlLnZhbHVlKyIpKCRldmVudCkiOmUudmFsdWUpKyJ9In1yZXR1cm4gbnx8cj9lLnZhbHVlOiJmdW5jdGlvbigkZXZlbnQpeyIrZS52YWx1ZSsifSJ9ZnVuY3Rpb24gRnIodCl7cmV0dXJuImlmKCEoJ2J1dHRvbicgaW4gJGV2ZW50KSYmIit0Lm1hcChScikuam9pbigiJiYiKSsiKXJldHVybiBudWxsOyJ9ZnVuY3Rpb24gUnIodCl7dmFyIGU9cGFyc2VJbnQodCwxMCk7aWYoZSlyZXR1cm4iJGV2ZW50LmtleUNvZGUhPT0iK2U7dmFyIG49UHNbdF07cmV0dXJuIl9rKCRldmVudC5rZXlDb2RlLCIrSlNPTi5zdHJpbmdpZnkodCkrKG4/IiwiK0pTT04uc3RyaW5naWZ5KG4pOiIiKSsiKSJ9ZnVuY3Rpb24gSHIodCxlKXt2YXIgbj1uZXcgQnMoZSk7cmV0dXJue3JlbmRlcjoid2l0aCh0aGlzKXtyZXR1cm4gIisodD9Ccih0LG4pOidfYygiZGl2IiknKSsifSIsc3RhdGljUmVuZGVyRm5zOm4uc3RhdGljUmVuZGVyRm5zfX1mdW5jdGlvbiBCcih0LGUpe2lmKHQuc3RhdGljUm9vdCYmIXQuc3RhdGljUHJvY2Vzc2VkKXJldHVybiBVcih0LGUpO2lmKHQub25jZSYmIXQub25jZVByb2Nlc3NlZClyZXR1cm4gVnIodCxlKTtpZih0LmZvciYmIXQuZm9yUHJvY2Vzc2VkKXJldHVybiBKcih0LGUpO2lmKHQuaWYmJiF0LmlmUHJvY2Vzc2VkKXJldHVybiB6cih0LGUpO2lmKCJ0ZW1wbGF0ZSIhPT10LnRhZ3x8dC5zbG90VGFyZ2V0KXtpZigic2xvdCI9PT10LnRhZylyZXR1cm4gb2kodCxlKTt2YXIgbjtpZih0LmNvbXBvbmVudCluPWFpKHQuY29tcG9uZW50LHQsZSk7ZWxzZXt2YXIgcj10LnBsYWluP3ZvaWQgMDpxcih0LGUpLGk9dC5pbmxpbmVUZW1wbGF0ZT9udWxsOlhyKHQsZSwhMCk7bj0iX2MoJyIrdC50YWcrIiciKyhyPyIsIityOiIiKSsoaT8iLCIraToiIikrIikifWZvcih2YXIgbz0wO288ZS50cmFuc2Zvcm1zLmxlbmd0aDtvKyspbj1lLnRyYW5zZm9ybXNbb10odCxuKTtyZXR1cm4gbn1yZXR1cm4gWHIodCxlKXx8InZvaWQgMCJ9ZnVuY3Rpb24gVXIodCxlKXtyZXR1cm4gdC5zdGF0aWNQcm9jZXNzZWQ9ITAsZS5zdGF0aWNSZW5kZXJGbnMucHVzaCgid2l0aCh0aGlzKXtyZXR1cm4gIitCcih0LGUpKyJ9IiksIl9tKCIrKGUuc3RhdGljUmVuZGVyRm5zLmxlbmd0aC0xKSsodC5zdGF0aWNJbkZvcj8iLHRydWUiOiIiKSsiKSJ9ZnVuY3Rpb24gVnIodCxlKXtpZih0Lm9uY2VQcm9jZXNzZWQ9ITAsdC5pZiYmIXQuaWZQcm9jZXNzZWQpcmV0dXJuIHpyKHQsZSk7aWYodC5zdGF0aWNJbkZvcil7Zm9yKHZhciBuPSIiLHI9dC5wYXJlbnQ7cjspe2lmKHIuZm9yKXtuPXIua2V5O2JyZWFrfXI9ci5wYXJlbnR9cmV0dXJuIG4/Il9vKCIrQnIodCxlKSsiLCIrZS5vbmNlSWQrKysobj8iLCIrbjoiIikrIikiOkJyKHQsZSl9cmV0dXJuIFVyKHQsZSl9ZnVuY3Rpb24genIodCxlLG4scil7cmV0dXJuIHQuaWZQcm9jZXNzZWQ9ITAsS3IodC5pZkNvbmRpdGlvbnMuc2xpY2UoKSxlLG4scil9ZnVuY3Rpb24gS3IodCxlLG4scil7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gbj9uKHQsZSk6dC5vbmNlP1ZyKHQsZSk6QnIodCxlKX1pZighdC5sZW5ndGgpcmV0dXJuIHJ8fCJfZSgpIjt2YXIgbz10LnNoaWZ0KCk7cmV0dXJuIG8uZXhwPyIoIitvLmV4cCsiKT8iK2koby5ibG9jaykrIjoiK0tyKHQsZSxuLHIpOiIiK2koby5ibG9jayl9ZnVuY3Rpb24gSnIodCxlLG4scil7dmFyIGk9dC5mb3Isbz10LmFsaWFzLGE9dC5pdGVyYXRvcjE/IiwiK3QuaXRlcmF0b3IxOiIiLHM9dC5pdGVyYXRvcjI/IiwiK3QuaXRlcmF0b3IyOiIiO3JldHVybiB0LmZvclByb2Nlc3NlZD0hMCwocnx8Il9sIikrIigoIitpKyIpLGZ1bmN0aW9uKCIrbythK3MrIil7cmV0dXJuICIrKG58fEJyKSh0LGUpKyJ9KSJ9ZnVuY3Rpb24gcXIodCxlKXt2YXIgbj0ieyIscj1Xcih0LGUpO3ImJihuKz1yKyIsIiksdC5rZXkmJihuKz0ia2V5OiIrdC5rZXkrIiwiKSx0LnJlZiYmKG4rPSJyZWY6Iit0LnJlZisiLCIpLHQucmVmSW5Gb3ImJihuKz0icmVmSW5Gb3I6dHJ1ZSwiKSx0LnByZSYmKG4rPSJwcmU6dHJ1ZSwiKSx0LmNvbXBvbmVudCYmKG4rPSd0YWc6IicrdC50YWcrJyIsJyk7Zm9yKHZhciBpPTA7aTxlLmRhdGFHZW5GbnMubGVuZ3RoO2krKyluKz1lLmRhdGFHZW5GbnNbaV0odCk7aWYodC5hdHRycyYmKG4rPSJhdHRyczp7IitzaSh0LmF0dHJzKSsifSwiKSx0LnByb3BzJiYobis9ImRvbVByb3BzOnsiK3NpKHQucHJvcHMpKyJ9LCIpLHQuZXZlbnRzJiYobis9RHIodC5ldmVudHMsITEsZS53YXJuKSsiLCIpLHQubmF0aXZlRXZlbnRzJiYobis9RHIodC5uYXRpdmVFdmVudHMsITAsZS53YXJuKSsiLCIpLHQuc2xvdFRhcmdldCYmKG4rPSJzbG90OiIrdC5zbG90VGFyZ2V0KyIsIiksdC5zY29wZWRTbG90cyYmKG4rPVpyKHQuc2NvcGVkU2xvdHMsZSkrIiwiKSx0Lm1vZGVsJiYobis9Im1vZGVsOnt2YWx1ZToiK3QubW9kZWwudmFsdWUrIixjYWxsYmFjazoiK3QubW9kZWwuY2FsbGJhY2srIixleHByZXNzaW9uOiIrdC5tb2RlbC5leHByZXNzaW9uKyJ9LCIpLHQuaW5saW5lVGVtcGxhdGUpe3ZhciBvPUdyKHQsZSk7byYmKG4rPW8rIiwiKX1yZXR1cm4gbj1uLnJlcGxhY2UoLywkLywiIikrIn0iLHQud3JhcERhdGEmJihuPXQud3JhcERhdGEobikpLHQud3JhcExpc3RlbmVycyYmKG49dC53cmFwTGlzdGVuZXJzKG4pKSxufWZ1bmN0aW9uIFdyKHQsZSl7dmFyIG49dC5kaXJlY3RpdmVzO2lmKG4pe3ZhciByLGksbyxhLHM9ImRpcmVjdGl2ZXM6WyIsYz0hMTtmb3Iocj0wLGk9bi5sZW5ndGg7cjxpO3IrKyl7bz1uW3JdLGE9ITA7dmFyIHU9ZS5kaXJlY3RpdmVzW28ubmFtZV07dSYmKGE9ISF1KHQsbyxlLndhcm4pKSxhJiYoYz0hMCxzKz0ne25hbWU6Iicrby5uYW1lKyciLHJhd05hbWU6Iicrby5yYXdOYW1lKyciJysoby52YWx1ZT8iLHZhbHVlOigiK28udmFsdWUrIiksZXhwcmVzc2lvbjoiK0pTT04uc3RyaW5naWZ5KG8udmFsdWUpOiIiKSsoby5hcmc/Jyxhcmc6Iicrby5hcmcrJyInOiIiKSsoby5tb2RpZmllcnM/Iixtb2RpZmllcnM6IitKU09OLnN0cmluZ2lmeShvLm1vZGlmaWVycyk6IiIpKyJ9LCIpfXJldHVybiBjP3Muc2xpY2UoMCwtMSkrIl0iOnZvaWQgMH19ZnVuY3Rpb24gR3IodCxlKXt2YXIgbj10LmNoaWxkcmVuWzBdO2lmKDE9PT1uLnR5cGUpe3ZhciByPUhyKG4sZS5vcHRpb25zKTtyZXR1cm4iaW5saW5lVGVtcGxhdGU6e3JlbmRlcjpmdW5jdGlvbigpeyIrci5yZW5kZXIrIn0sc3RhdGljUmVuZGVyRm5zOlsiK3Iuc3RhdGljUmVuZGVyRm5zLm1hcChmdW5jdGlvbih0KXtyZXR1cm4iZnVuY3Rpb24oKXsiK3QrIn0ifSkuam9pbigiLCIpKyJdfSJ9fWZ1bmN0aW9uIFpyKHQsZSl7cmV0dXJuInNjb3BlZFNsb3RzOl91KFsiK09iamVjdC5rZXlzKHQpLm1hcChmdW5jdGlvbihuKXtyZXR1cm4gWXIobix0W25dLGUpfSkuam9pbigiLCIpKyJdKSJ9ZnVuY3Rpb24gWXIodCxlLG4pe3JldHVybiBlLmZvciYmIWUuZm9yUHJvY2Vzc2VkP1FyKHQsZSxuKToie2tleToiK3QrIixmbjpmdW5jdGlvbigiK1N0cmluZyhlLmF0dHJzTWFwLnNjb3BlKSsiKXtyZXR1cm4gIisoInRlbXBsYXRlIj09PWUudGFnP1hyKGUsbil8fCJ2b2lkIDAiOkJyKGUsbikpKyJ9fSJ9ZnVuY3Rpb24gUXIodCxlLG4pe3ZhciByPWUuZm9yLGk9ZS5hbGlhcyxvPWUuaXRlcmF0b3IxPyIsIitlLml0ZXJhdG9yMToiIixhPWUuaXRlcmF0b3IyPyIsIitlLml0ZXJhdG9yMjoiIjtyZXR1cm4gZS5mb3JQcm9jZXNzZWQ9ITAsIl9sKCgiK3IrIiksZnVuY3Rpb24oIitpK28rYSsiKXtyZXR1cm4gIitZcih0LGUsbikrIn0pIn1mdW5jdGlvbiBYcih0LGUsbixyLGkpe3ZhciBvPXQuY2hpbGRyZW47aWYoby5sZW5ndGgpe3ZhciBhPW9bMF07aWYoMT09PW8ubGVuZ3RoJiZhLmZvciYmInRlbXBsYXRlIiE9PWEudGFnJiYic2xvdCIhPT1hLnRhZylyZXR1cm4ocnx8QnIpKGEsZSk7dmFyIHM9bj90aShvLGUubWF5YmVDb21wb25lbnQpOjAsYz1pfHxuaTtyZXR1cm4iWyIrby5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGModCxlKX0pLmpvaW4oIiwiKSsiXSIrKHM/IiwiK3M6IiIpfX1mdW5jdGlvbiB0aSh0LGUpe2Zvcih2YXIgbj0wLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIGk9dFtyXTtpZigxPT09aS50eXBlKXtpZihlaShpKXx8aS5pZkNvbmRpdGlvbnMmJmkuaWZDb25kaXRpb25zLnNvbWUoZnVuY3Rpb24odCl7cmV0dXJuIGVpKHQuYmxvY2spfSkpe249MjticmVha30oZShpKXx8aS5pZkNvbmRpdGlvbnMmJmkuaWZDb25kaXRpb25zLnNvbWUoZnVuY3Rpb24odCl7cmV0dXJuIGUodC5ibG9jayl9KSkmJihuPTEpfX1yZXR1cm4gbn1mdW5jdGlvbiBlaSh0KXtyZXR1cm4gdm9pZCAwIT09dC5mb3J8fCJ0ZW1wbGF0ZSI9PT10LnRhZ3x8InNsb3QiPT09dC50YWd9ZnVuY3Rpb24gbmkodCxlKXtyZXR1cm4gMT09PXQudHlwZT9Ccih0LGUpOjM9PT10LnR5cGUmJnQuaXNDb21tZW50P2lpKHQpOnJpKHQpfWZ1bmN0aW9uIHJpKHQpe3JldHVybiJfdigiKygyPT09dC50eXBlP3QuZXhwcmVzc2lvbjpjaShKU09OLnN0cmluZ2lmeSh0LnRleHQpKSkrIikifWZ1bmN0aW9uIGlpKHQpe3JldHVybiJfZSgiK0pTT04uc3RyaW5naWZ5KHQudGV4dCkrIikifWZ1bmN0aW9uIG9pKHQsZSl7dmFyIG49dC5zbG90TmFtZXx8JyJkZWZhdWx0Iicscj1Ycih0LGUpLGk9Il90KCIrbisocj8iLCIrcjoiIiksbz10LmF0dHJzJiYieyIrdC5hdHRycy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHlpKHQubmFtZSkrIjoiK3QudmFsdWV9KS5qb2luKCIsIikrIn0iLGE9dC5hdHRyc01hcFsidi1iaW5kIl07cmV0dXJuIW8mJiFhfHxyfHwoaSs9IixudWxsIiksbyYmKGkrPSIsIitvKSxhJiYoaSs9KG8/IiI6IixudWxsIikrIiwiK2EpLGkrIikifWZ1bmN0aW9uIGFpKHQsZSxuKXt2YXIgcj1lLmlubGluZVRlbXBsYXRlP251bGw6WHIoZSxuLCEwKTtyZXR1cm4iX2MoIit0KyIsIitxcihlLG4pKyhyPyIsIityOiIiKSsiKSJ9ZnVuY3Rpb24gc2kodCl7Zm9yKHZhciBlPSIiLG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtlKz0nIicrci5uYW1lKyciOicrY2koci52YWx1ZSkrIiwifXJldHVybiBlLnNsaWNlKDAsLTEpfWZ1bmN0aW9uIGNpKHQpe3JldHVybiB0LnJlcGxhY2UoL1x1MjAyOC9nLCJcXHUyMDI4IikucmVwbGFjZSgvXHUyMDI5L2csIlxcdTIwMjkiKX1mdW5jdGlvbiB1aSh0LGUpe3RyeXtyZXR1cm4gbmV3IEZ1bmN0aW9uKHQpfWNhdGNoKG4pe3JldHVybiBlLnB1c2goe2VycjpuLGNvZGU6dH0pLF99fWZ1bmN0aW9uIGxpKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIGZ1bmN0aW9uKG4scixpKXt2YXIgbz0ocj1yfHx7fSkuZGVsaW1pdGVycz9TdHJpbmcoci5kZWxpbWl0ZXJzKStuOm47aWYoZVtvXSlyZXR1cm4gZVtvXTt2YXIgYT10KG4scikscz17fSxjPVtdO3JldHVybiBzLnJlbmRlcj11aShhLnJlbmRlcixjKSxzLnN0YXRpY1JlbmRlckZucz1hLnN0YXRpY1JlbmRlckZucy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHVpKHQsYyl9KSxlW29dPXN9fWZ1bmN0aW9uIGZpKHQpe2lmKHQub3V0ZXJIVE1MKXJldHVybiB0Lm91dGVySFRNTDt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gZS5hcHBlbmRDaGlsZCh0LmNsb25lTm9kZSghMCkpLGUuaW5uZXJIVE1MfXZhciBwaT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLGRpPWYoInNsb3QsY29tcG9uZW50IiwhMCksdmk9Zigia2V5LHJlZixzbG90LGlzIiksaGk9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxtaT0vLShcdykvZyx5aT12KGZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UobWksZnVuY3Rpb24odCxlKXtyZXR1cm4gZT9lLnRvVXBwZXJDYXNlKCk6IiJ9KX0pLGdpPXYoZnVuY3Rpb24odCl7cmV0dXJuIHQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKX0pLF9pPS8oW14tXSkoW0EtWl0pL2csYmk9dihmdW5jdGlvbih0KXtyZXR1cm4gdC5yZXBsYWNlKF9pLCIkMS0kMiIpLnJlcGxhY2UoX2ksIiQxLSQyIikudG9Mb3dlckNhc2UoKX0pLCRpPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4hMX0sQ2k9ZnVuY3Rpb24odCl7cmV0dXJuIHR9LHdpPSJkYXRhLXNlcnZlci1yZW5kZXJlZCIseGk9WyJjb21wb25lbnQiLCJkaXJlY3RpdmUiLCJmaWx0ZXIiXSxBaT1bImJlZm9yZUNyZWF0ZSIsImNyZWF0ZWQiLCJiZWZvcmVNb3VudCIsIm1vdW50ZWQiLCJiZWZvcmVVcGRhdGUiLCJ1cGRhdGVkIiwiYmVmb3JlRGVzdHJveSIsImRlc3Ryb3llZCIsImFjdGl2YXRlZCIsImRlYWN0aXZhdGVkIl0sa2k9e29wdGlvbk1lcmdlU3RyYXRlZ2llczpPYmplY3QuY3JlYXRlKG51bGwpLHNpbGVudDohMSxwcm9kdWN0aW9uVGlwOiExLGRldnRvb2xzOiExLHBlcmZvcm1hbmNlOiExLGVycm9ySGFuZGxlcjpudWxsLHdhcm5IYW5kbGVyOm51bGwsaWdub3JlZEVsZW1lbnRzOltdLGtleUNvZGVzOk9iamVjdC5jcmVhdGUobnVsbCksaXNSZXNlcnZlZFRhZzokaSxpc1Jlc2VydmVkQXR0cjokaSxpc1Vua25vd25FbGVtZW50OiRpLGdldFRhZ05hbWVzcGFjZTpfLHBhcnNlUGxhdGZvcm1UYWdOYW1lOkNpLG11c3RVc2VQcm9wOiRpLF9saWZlY3ljbGVIb29rczpBaX0sT2k9T2JqZWN0LmZyZWV6ZSh7fSksVGk9L1teXHcuJF0vLFNpPV8sRWk9Il9fcHJvdG9fXyJpbnt9LGppPSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93LExpPWppJiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLE5pPUxpJiYvbXNpZXx0cmlkZW50Ly50ZXN0KExpKSxJaT1MaSYmTGkuaW5kZXhPZigibXNpZSA5LjAiKT4wLE1pPUxpJiZMaS5pbmRleE9mKCJlZGdlLyIpPjAsRGk9TGkmJkxpLmluZGV4T2YoImFuZHJvaWQiKT4wLFBpPUxpJiYvaXBob25lfGlwYWR8aXBvZHxpb3MvLnRlc3QoTGkpLEZpPUxpJiYvY2hyb21lXC9cZCsvLnRlc3QoTGkpJiYhTWksUmk9e30ud2F0Y2gsSGk9ITE7aWYoamkpdHJ5e3ZhciBCaT17fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoQmksInBhc3NpdmUiLHtnZXQ6ZnVuY3Rpb24oKXtIaT0hMH19KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigidGVzdC1wYXNzaXZlIixudWxsLEJpKX1jYXRjaCh0KXt9dmFyIFVpLFZpLHppPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PVVpJiYoVWk9IWppJiYidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbCYmInNlcnZlciI9PT1nbG9iYWwucHJvY2Vzcy5lbnYuVlVFX0VOViksVWl9LEtpPWppJiZ3aW5kb3cuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyxKaT0idW5kZWZpbmVkIiE9dHlwZW9mIFN5bWJvbCYmTyhTeW1ib2wpJiYidW5kZWZpbmVkIiE9dHlwZW9mIFJlZmxlY3QmJk8oUmVmbGVjdC5vd25LZXlzKSxxaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtyPSExO3ZhciB0PW4uc2xpY2UoMCk7bi5sZW5ndGg9MDtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKyl0W2VdKCl9dmFyIGUsbj1bXSxyPSExO2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgUHJvbWlzZSYmTyhQcm9taXNlKSl7dmFyIGk9UHJvbWlzZS5yZXNvbHZlKCksbz1mdW5jdGlvbih0KXtjb25zb2xlLmVycm9yKHQpfTtlPWZ1bmN0aW9uKCl7aS50aGVuKHQpLmNhdGNoKG8pLFBpJiZzZXRUaW1lb3V0KF8pfX1lbHNlIGlmKCJ1bmRlZmluZWQiPT10eXBlb2YgTXV0YXRpb25PYnNlcnZlcnx8IU8oTXV0YXRpb25PYnNlcnZlcikmJiJbb2JqZWN0IE11dGF0aW9uT2JzZXJ2ZXJDb25zdHJ1Y3Rvcl0iIT09TXV0YXRpb25PYnNlcnZlci50b1N0cmluZygpKWU9ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KHQsMCl9O2Vsc2V7dmFyIGE9MSxzPW5ldyBNdXRhdGlvbk9ic2VydmVyKHQpLGM9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoU3RyaW5nKGEpKTtzLm9ic2VydmUoYyx7Y2hhcmFjdGVyRGF0YTohMH0pLGU9ZnVuY3Rpb24oKXthPShhKzEpJTIsYy5kYXRhPVN0cmluZyhhKX19cmV0dXJuIGZ1bmN0aW9uKHQsaSl7dmFyIG87aWYobi5wdXNoKGZ1bmN0aW9uKCl7aWYodCl0cnl7dC5jYWxsKGkpfWNhdGNoKHQpe2sodCxpLCJuZXh0VGljayIpfWVsc2UgbyYmbyhpKX0pLHJ8fChyPSEwLGUoKSksIXQmJiJ1bmRlZmluZWQiIT10eXBlb2YgUHJvbWlzZSlyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24odCxlKXtvPXR9KX19KCk7Vmk9InVuZGVmaW5lZCIhPXR5cGVvZiBTZXQmJk8oU2V0KT9TZXQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5zZXQ9T2JqZWN0LmNyZWF0ZShudWxsKX1yZXR1cm4gdC5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3JldHVybiEwPT09dGhpcy5zZXRbdF19LHQucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXt0aGlzLnNldFt0XT0hMH0sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLnNldD1PYmplY3QuY3JlYXRlKG51bGwpfSx0fSgpO3ZhciBXaT0wLEdpPWZ1bmN0aW9uKCl7dGhpcy5pZD1XaSsrLHRoaXMuc3Vicz1bXX07R2kucHJvdG90eXBlLmFkZFN1Yj1mdW5jdGlvbih0KXt0aGlzLnN1YnMucHVzaCh0KX0sR2kucHJvdG90eXBlLnJlbW92ZVN1Yj1mdW5jdGlvbih0KXtwKHRoaXMuc3Vicyx0KX0sR2kucHJvdG90eXBlLmRlcGVuZD1mdW5jdGlvbigpe0dpLnRhcmdldCYmR2kudGFyZ2V0LmFkZERlcCh0aGlzKX0sR2kucHJvdG90eXBlLm5vdGlmeT1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLnN1YnMuc2xpY2UoKSxlPTAsbj10Lmxlbmd0aDtlPG47ZSsrKXRbZV0udXBkYXRlKCl9LEdpLnRhcmdldD1udWxsO3ZhciBaaT1bXSxZaT1BcnJheS5wcm90b3R5cGUsUWk9T2JqZWN0LmNyZWF0ZShZaSk7WyJwdXNoIiwicG9wIiwic2hpZnQiLCJ1bnNoaWZ0Iiwic3BsaWNlIiwic29ydCIsInJldmVyc2UiXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPVlpW3RdO3goUWksdCxmdW5jdGlvbigpe2Zvcih2YXIgbj1bXSxyPWFyZ3VtZW50cy5sZW5ndGg7ci0tOyluW3JdPWFyZ3VtZW50c1tyXTt2YXIgaSxvPWUuYXBwbHkodGhpcyxuKSxhPXRoaXMuX19vYl9fO3N3aXRjaCh0KXtjYXNlInB1c2giOmNhc2UidW5zaGlmdCI6aT1uO2JyZWFrO2Nhc2Uic3BsaWNlIjppPW4uc2xpY2UoMil9cmV0dXJuIGkmJmEub2JzZXJ2ZUFycmF5KGkpLGEuZGVwLm5vdGlmeSgpLG99KX0pO3ZhciBYaT1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhRaSksdG89e3Nob3VsZENvbnZlcnQ6ITB9LGVvPWZ1bmN0aW9uKHQpe3RoaXMudmFsdWU9dCx0aGlzLmRlcD1uZXcgR2ksdGhpcy52bUNvdW50PTAseCh0LCJfX29iX18iLHRoaXMpLEFycmF5LmlzQXJyYXkodCk/KChFaT9FOmopKHQsUWksWGkpLHRoaXMub2JzZXJ2ZUFycmF5KHQpKTp0aGlzLndhbGsodCl9O2VvLnByb3RvdHlwZS53YWxrPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1PYmplY3Qua2V5cyh0KSxuPTA7bjxlLmxlbmd0aDtuKyspTih0LGVbbl0sdFtlW25dXSl9LGVvLnByb3RvdHlwZS5vYnNlcnZlQXJyYXk9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10Lmxlbmd0aDtlPG47ZSsrKUwodFtlXSl9O3ZhciBubz1raS5vcHRpb25NZXJnZVN0cmF0ZWdpZXM7bm8uZGF0YT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG4/Rih0LGUsbik6ZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGU/dDpGLmNhbGwodGhpcyx0LGUpfSxBaS5mb3JFYWNoKGZ1bmN0aW9uKHQpe25vW3RdPVJ9KSx4aS5mb3JFYWNoKGZ1bmN0aW9uKHQpe25vW3QrInMiXT1IfSksbm8ud2F0Y2g9ZnVuY3Rpb24odCxlKXtpZih0PT09UmkmJih0PXZvaWQgMCksZT09PVJpJiYoZT12b2lkIDApLCFlKXJldHVybiBPYmplY3QuY3JlYXRlKHR8fG51bGwpO2lmKCF0KXJldHVybiBlO3ZhciBuPXt9O3kobix0KTtmb3IodmFyIHIgaW4gZSl7dmFyIGk9bltyXSxvPWVbcl07aSYmIUFycmF5LmlzQXJyYXkoaSkmJihpPVtpXSksbltyXT1pP2kuY29uY2F0KG8pOkFycmF5LmlzQXJyYXkobyk/bzpbb119cmV0dXJuIG59LG5vLnByb3BzPW5vLm1ldGhvZHM9bm8uaW5qZWN0PW5vLmNvbXB1dGVkPWZ1bmN0aW9uKHQsZSl7aWYoIXQpcmV0dXJuIGU7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4geShuLHQpLGUmJnkobixlKSxufSxuby5wcm92aWRlPUY7dmFyIHJvPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWU/dDplfSxpbz1mdW5jdGlvbih0LGUsbixyLGksbyxhLHMpe3RoaXMudGFnPXQsdGhpcy5kYXRhPWUsdGhpcy5jaGlsZHJlbj1uLHRoaXMudGV4dD1yLHRoaXMuZWxtPWksdGhpcy5ucz12b2lkIDAsdGhpcy5jb250ZXh0PW8sdGhpcy5mdW5jdGlvbmFsQ29udGV4dD12b2lkIDAsdGhpcy5rZXk9ZSYmZS5rZXksdGhpcy5jb21wb25lbnRPcHRpb25zPWEsdGhpcy5jb21wb25lbnRJbnN0YW5jZT12b2lkIDAsdGhpcy5wYXJlbnQ9dm9pZCAwLHRoaXMucmF3PSExLHRoaXMuaXNTdGF0aWM9ITEsdGhpcy5pc1Jvb3RJbnNlcnQ9ITAsdGhpcy5pc0NvbW1lbnQ9ITEsdGhpcy5pc0Nsb25lZD0hMSx0aGlzLmlzT25jZT0hMSx0aGlzLmFzeW5jRmFjdG9yeT1zLHRoaXMuYXN5bmNNZXRhPXZvaWQgMCx0aGlzLmlzQXN5bmNQbGFjZWhvbGRlcj0hMX0sb289e2NoaWxkOnt9fTtvby5jaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21wb25lbnRJbnN0YW5jZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoaW8ucHJvdG90eXBlLG9vKTt2YXIgYW8sc289ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9IiIpO3ZhciBlPW5ldyBpbztyZXR1cm4gZS50ZXh0PXQsZS5pc0NvbW1lbnQ9ITAsZX0sY289dihmdW5jdGlvbih0KXt2YXIgZT0iJiI9PT10LmNoYXJBdCgwKSxuPSJ+Ij09PSh0PWU/dC5zbGljZSgxKTp0KS5jaGFyQXQoMCkscj0iISI9PT0odD1uP3Quc2xpY2UoMSk6dCkuY2hhckF0KDApO3JldHVybiB0PXI/dC5zbGljZSgxKTp0LHtuYW1lOnQsb25jZTpuLGNhcHR1cmU6cixwYXNzaXZlOmV9fSksdW89bnVsbCxsbz1bXSxmbz1bXSxwbz17fSx2bz0hMSxobz0hMSxtbz0wLHlvPTAsZ289ZnVuY3Rpb24odCxlLG4scil7dGhpcy52bT10LHQuX3dhdGNoZXJzLnB1c2godGhpcykscj8odGhpcy5kZWVwPSEhci5kZWVwLHRoaXMudXNlcj0hIXIudXNlcix0aGlzLmxhenk9ISFyLmxhenksdGhpcy5zeW5jPSEhci5zeW5jKTp0aGlzLmRlZXA9dGhpcy51c2VyPXRoaXMubGF6eT10aGlzLnN5bmM9ITEsdGhpcy5jYj1uLHRoaXMuaWQ9Kyt5byx0aGlzLmFjdGl2ZT0hMCx0aGlzLmRpcnR5PXRoaXMubGF6eSx0aGlzLmRlcHM9W10sdGhpcy5uZXdEZXBzPVtdLHRoaXMuZGVwSWRzPW5ldyBWaSx0aGlzLm5ld0RlcElkcz1uZXcgVmksdGhpcy5leHByZXNzaW9uPSIiLCJmdW5jdGlvbiI9PXR5cGVvZiBlP3RoaXMuZ2V0dGVyPWU6KHRoaXMuZ2V0dGVyPUEoZSksdGhpcy5nZXR0ZXJ8fCh0aGlzLmdldHRlcj1mdW5jdGlvbigpe30pKSx0aGlzLnZhbHVlPXRoaXMubGF6eT92b2lkIDA6dGhpcy5nZXQoKX07Z28ucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe1QodGhpcyk7dmFyIHQsZT10aGlzLnZtO3RyeXt0PXRoaXMuZ2V0dGVyLmNhbGwoZSxlKX1jYXRjaCh0KXtpZighdGhpcy51c2VyKXRocm93IHQ7ayh0LGUsJ2dldHRlciBmb3Igd2F0Y2hlciAiJyt0aGlzLmV4cHJlc3Npb24rJyInKX1maW5hbGx5e3RoaXMuZGVlcCYmTHQodCksUygpLHRoaXMuY2xlYW51cERlcHMoKX1yZXR1cm4gdH0sZ28ucHJvdG90eXBlLmFkZERlcD1mdW5jdGlvbih0KXt2YXIgZT10LmlkO3RoaXMubmV3RGVwSWRzLmhhcyhlKXx8KHRoaXMubmV3RGVwSWRzLmFkZChlKSx0aGlzLm5ld0RlcHMucHVzaCh0KSx0aGlzLmRlcElkcy5oYXMoZSl8fHQuYWRkU3ViKHRoaXMpKX0sZ28ucHJvdG90eXBlLmNsZWFudXBEZXBzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMsZT10aGlzLmRlcHMubGVuZ3RoO2UtLTspe3ZhciBuPXQuZGVwc1tlXTt0Lm5ld0RlcElkcy5oYXMobi5pZCl8fG4ucmVtb3ZlU3ViKHQpfXZhciByPXRoaXMuZGVwSWRzO3RoaXMuZGVwSWRzPXRoaXMubmV3RGVwSWRzLHRoaXMubmV3RGVwSWRzPXIsdGhpcy5uZXdEZXBJZHMuY2xlYXIoKSxyPXRoaXMuZGVwcyx0aGlzLmRlcHM9dGhpcy5uZXdEZXBzLHRoaXMubmV3RGVwcz1yLHRoaXMubmV3RGVwcy5sZW5ndGg9MH0sZ28ucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3RoaXMubGF6eT90aGlzLmRpcnR5PSEwOnRoaXMuc3luYz90aGlzLnJ1bigpOmp0KHRoaXMpfSxnby5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7aWYodGhpcy5hY3RpdmUpe3ZhciB0PXRoaXMuZ2V0KCk7aWYodCE9PXRoaXMudmFsdWV8fG8odCl8fHRoaXMuZGVlcCl7dmFyIGU9dGhpcy52YWx1ZTtpZih0aGlzLnZhbHVlPXQsdGhpcy51c2VyKXRyeXt0aGlzLmNiLmNhbGwodGhpcy52bSx0LGUpfWNhdGNoKHQpe2sodCx0aGlzLnZtLCdjYWxsYmFjayBmb3Igd2F0Y2hlciAiJyt0aGlzLmV4cHJlc3Npb24rJyInKX1lbHNlIHRoaXMuY2IuY2FsbCh0aGlzLnZtLHQsZSl9fX0sZ28ucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKCl7dGhpcy52YWx1ZT10aGlzLmdldCgpLHRoaXMuZGlydHk9ITF9LGdvLnByb3RvdHlwZS5kZXBlbmQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcyxlPXRoaXMuZGVwcy5sZW5ndGg7ZS0tOyl0LmRlcHNbZV0uZGVwZW5kKCl9LGdvLnByb3RvdHlwZS50ZWFyZG93bj1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodGhpcy5hY3RpdmUpe3RoaXMudm0uX2lzQmVpbmdEZXN0cm95ZWR8fHAodGhpcy52bS5fd2F0Y2hlcnMsdGhpcyk7Zm9yKHZhciBlPXRoaXMuZGVwcy5sZW5ndGg7ZS0tOyl0LmRlcHNbZV0ucmVtb3ZlU3ViKHQpO3RoaXMuYWN0aXZlPSExfX07dmFyIF9vPW5ldyBWaSxibz17ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsZ2V0Ol8sc2V0Ol99LCRvPXtsYXp5OiEwfSxDbz17aW5pdDpmdW5jdGlvbih0LGUsbixyKXtpZighdC5jb21wb25lbnRJbnN0YW5jZXx8dC5jb21wb25lbnRJbnN0YW5jZS5faXNEZXN0cm95ZWQpKHQuY29tcG9uZW50SW5zdGFuY2U9WXQodCx1byxuLHIpKS4kbW91bnQoZT90LmVsbTp2b2lkIDAsZSk7ZWxzZSBpZih0LmRhdGEua2VlcEFsaXZlKXt2YXIgaT10O0NvLnByZXBhdGNoKGksaSl9fSxwcmVwYXRjaDpmdW5jdGlvbih0LGUpe3ZhciBuPWUuY29tcG9uZW50T3B0aW9uczskdChlLmNvbXBvbmVudEluc3RhbmNlPXQuY29tcG9uZW50SW5zdGFuY2Usbi5wcm9wc0RhdGEsbi5saXN0ZW5lcnMsZSxuLmNoaWxkcmVuKX0saW5zZXJ0OmZ1bmN0aW9uKHQpe3ZhciBlPXQuY29udGV4dCxuPXQuY29tcG9uZW50SW5zdGFuY2U7bi5faXNNb3VudGVkfHwobi5faXNNb3VudGVkPSEwLEF0KG4sIm1vdW50ZWQiKSksdC5kYXRhLmtlZXBBbGl2ZSYmKGUuX2lzTW91bnRlZD9TdChuKTp3dChuLCEwKSl9LGRlc3Ryb3k6ZnVuY3Rpb24odCl7dmFyIGU9dC5jb21wb25lbnRJbnN0YW5jZTtlLl9pc0Rlc3Ryb3llZHx8KHQuZGF0YS5rZWVwQWxpdmU/eHQoZSwhMCk6ZS4kZGVzdHJveSgpKX19LHdvPU9iamVjdC5rZXlzKENvKSx4bz0xLEFvPTIsa289MDshZnVuY3Rpb24odCl7dC5wcm90b3R5cGUuX2luaXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztlLl91aWQ9a28rKyxlLl9pc1Z1ZT0hMCx0JiZ0Ll9pc0NvbXBvbmVudD9oZShlLHQpOmUuJG9wdGlvbnM9eihtZShlLmNvbnN0cnVjdG9yKSx0fHx7fSxlKSxlLl9yZW5kZXJQcm94eT1lLGUuX3NlbGY9ZSxfdChlKSxwdChlKSx2ZShlKSxBdChlLCJiZWZvcmVDcmVhdGUiKSxKdChlKSxNdChlKSxLdChlKSxBdChlLCJjcmVhdGVkIiksZS4kb3B0aW9ucy5lbCYmZS4kbW91bnQoZS4kb3B0aW9ucy5lbCl9fShfZSksZnVuY3Rpb24odCl7dmFyIGU9e307ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YX07dmFyIG49e307bi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvcHN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiJGRhdGEiLGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiJHByb3BzIixuKSx0LnByb3RvdHlwZS4kc2V0PUksdC5wcm90b3R5cGUuJGRlbGV0ZT1NLHQucHJvdG90eXBlLiR3YXRjaD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcztpZihhKGUpKXJldHVybiB6dChyLHQsZSxuKTsobj1ufHx7fSkudXNlcj0hMDt2YXIgaT1uZXcgZ28ocix0LGUsbik7cmV0dXJuIG4uaW1tZWRpYXRlJiZlLmNhbGwocixpLnZhbHVlKSxmdW5jdGlvbigpe2kudGVhcmRvd24oKX19fShfZSksZnVuY3Rpb24odCl7dmFyIGU9L15ob29rOi87dC5wcm90b3R5cGUuJG9uPWZ1bmN0aW9uKHQsbil7dmFyIHI9dGhpcyxpPXRoaXM7aWYoQXJyYXkuaXNBcnJheSh0KSlmb3IodmFyIG89MCxhPXQubGVuZ3RoO288YTtvKyspci4kb24odFtvXSxuKTtlbHNlKGkuX2V2ZW50c1t0XXx8KGkuX2V2ZW50c1t0XT1bXSkpLnB1c2gobiksZS50ZXN0KHQpJiYoaS5faGFzSG9va0V2ZW50PSEwKTtyZXR1cm4gaX0sdC5wcm90b3R5cGUuJG9uY2U9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7ci4kb2ZmKHQsbiksZS5hcHBseShyLGFyZ3VtZW50cyl9dmFyIHI9dGhpcztyZXR1cm4gbi5mbj1lLHIuJG9uKHQsbikscn0sdC5wcm90b3R5cGUuJG9mZj1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMscj10aGlzO2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiByLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSxyO2lmKEFycmF5LmlzQXJyYXkodCkpe2Zvcih2YXIgaT0wLG89dC5sZW5ndGg7aTxvO2krKyluLiRvZmYodFtpXSxlKTtyZXR1cm4gcn12YXIgYT1yLl9ldmVudHNbdF07aWYoIWEpcmV0dXJuIHI7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHIuX2V2ZW50c1t0XT1udWxsLHI7Zm9yKHZhciBzLGM9YS5sZW5ndGg7Yy0tOylpZigocz1hW2NdKT09PWV8fHMuZm49PT1lKXthLnNwbGljZShjLDEpO2JyZWFrfXJldHVybiByfSx0LnByb3RvdHlwZS4kZW1pdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLG49ZS5fZXZlbnRzW3RdO2lmKG4pe249bi5sZW5ndGg+MT9tKG4pOm47Zm9yKHZhciByPW0oYXJndW1lbnRzLDEpLGk9MCxvPW4ubGVuZ3RoO2k8bztpKyspdHJ5e25baV0uYXBwbHkoZSxyKX1jYXRjaChuKXtrKG4sZSwnZXZlbnQgaGFuZGxlciBmb3IgIicrdCsnIicpfX1yZXR1cm4gZX19KF9lKSxmdW5jdGlvbih0KXt0LnByb3RvdHlwZS5fdXBkYXRlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztuLl9pc01vdW50ZWQmJkF0KG4sImJlZm9yZVVwZGF0ZSIpO3ZhciByPW4uJGVsLGk9bi5fdm5vZGUsbz11bzt1bz1uLG4uX3Zub2RlPXQsaT9uLiRlbD1uLl9fcGF0Y2hfXyhpLHQpOihuLiRlbD1uLl9fcGF0Y2hfXyhuLiRlbCx0LGUsITEsbi4kb3B0aW9ucy5fcGFyZW50RWxtLG4uJG9wdGlvbnMuX3JlZkVsbSksbi4kb3B0aW9ucy5fcGFyZW50RWxtPW4uJG9wdGlvbnMuX3JlZkVsbT1udWxsKSx1bz1vLHImJihyLl9fdnVlX189bnVsbCksbi4kZWwmJihuLiRlbC5fX3Z1ZV9fPW4pLG4uJHZub2RlJiZuLiRwYXJlbnQmJm4uJHZub2RlPT09bi4kcGFyZW50Ll92bm9kZSYmKG4uJHBhcmVudC4kZWw9bi4kZWwpfSx0LnByb3RvdHlwZS4kZm9yY2VVcGRhdGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QuX3dhdGNoZXImJnQuX3dhdGNoZXIudXBkYXRlKCl9LHQucHJvdG90eXBlLiRkZXN0cm95PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZighdC5faXNCZWluZ0Rlc3Ryb3llZCl7QXQodCwiYmVmb3JlRGVzdHJveSIpLHQuX2lzQmVpbmdEZXN0cm95ZWQ9ITA7dmFyIGU9dC4kcGFyZW50OyFlfHxlLl9pc0JlaW5nRGVzdHJveWVkfHx0LiRvcHRpb25zLmFic3RyYWN0fHxwKGUuJGNoaWxkcmVuLHQpLHQuX3dhdGNoZXImJnQuX3dhdGNoZXIudGVhcmRvd24oKTtmb3IodmFyIG49dC5fd2F0Y2hlcnMubGVuZ3RoO24tLTspdC5fd2F0Y2hlcnNbbl0udGVhcmRvd24oKTt0Ll9kYXRhLl9fb2JfXyYmdC5fZGF0YS5fX29iX18udm1Db3VudC0tLHQuX2lzRGVzdHJveWVkPSEwLHQuX19wYXRjaF9fKHQuX3Zub2RlLG51bGwpLEF0KHQsImRlc3Ryb3llZCIpLHQuJG9mZigpLHQuJGVsJiYodC4kZWwuX192dWVfXz1udWxsKX19fShfZSksZnVuY3Rpb24odCl7dC5wcm90b3R5cGUuJG5leHRUaWNrPWZ1bmN0aW9uKHQpe3JldHVybiBxaSh0LHRoaXMpfSx0LnByb3RvdHlwZS5fcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXQuJG9wdGlvbnMsbj1lLnJlbmRlcixyPWUuc3RhdGljUmVuZGVyRm5zLGk9ZS5fcGFyZW50Vm5vZGU7aWYodC5faXNNb3VudGVkKWZvcih2YXIgbyBpbiB0LiRzbG90cyl0LiRzbG90c1tvXT1RKHQuJHNsb3RzW29dKTt0LiRzY29wZWRTbG90cz1pJiZpLmRhdGEuc2NvcGVkU2xvdHN8fE9pLHImJiF0Ll9zdGF0aWNUcmVlcyYmKHQuX3N0YXRpY1RyZWVzPVtdKSx0LiR2bm9kZT1pO3ZhciBhO3RyeXthPW4uY2FsbCh0Ll9yZW5kZXJQcm94eSx0LiRjcmVhdGVFbGVtZW50KX1jYXRjaChlKXtrKGUsdCwicmVuZGVyIGZ1bmN0aW9uIiksYT10Ll92bm9kZX1yZXR1cm4gYSBpbnN0YW5jZW9mIGlvfHwoYT1zbygpKSxhLnBhcmVudD1pLGF9LHQucHJvdG90eXBlLl9vPWxlLHQucHJvdG90eXBlLl9uPWwsdC5wcm90b3R5cGUuX3M9dSx0LnByb3RvdHlwZS5fbD1pZSx0LnByb3RvdHlwZS5fdD1vZSx0LnByb3RvdHlwZS5fcT1iLHQucHJvdG90eXBlLl9pPSQsdC5wcm90b3R5cGUuX209dWUsdC5wcm90b3R5cGUuX2Y9YWUsdC5wcm90b3R5cGUuX2s9c2UsdC5wcm90b3R5cGUuX2I9Y2UsdC5wcm90b3R5cGUuX3Y9Wix0LnByb3RvdHlwZS5fZT1zbyx0LnByb3RvdHlwZS5fdT1ndCx0LnByb3RvdHlwZS5fZz1kZX0oX2UpO3ZhciBPbz1bU3RyaW5nLFJlZ0V4cCxBcnJheV0sVG89e0tlZXBBbGl2ZTp7bmFtZToia2VlcC1hbGl2ZSIsYWJzdHJhY3Q6ITAscHJvcHM6e2luY2x1ZGU6T28sZXhjbHVkZTpPb30sY3JlYXRlZDpmdW5jdGlvbigpe3RoaXMuY2FjaGU9T2JqZWN0LmNyZWF0ZShudWxsKX0sZGVzdHJveWVkOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztmb3IodmFyIGUgaW4gdC5jYWNoZSlTZSh0LmNhY2hlW2VdKX0sd2F0Y2g6e2luY2x1ZGU6ZnVuY3Rpb24odCl7VGUodGhpcy5jYWNoZSx0aGlzLl92bm9kZSxmdW5jdGlvbihlKXtyZXR1cm4gT2UodCxlKX0pfSxleGNsdWRlOmZ1bmN0aW9uKHQpe1RlKHRoaXMuY2FjaGUsdGhpcy5fdm5vZGUsZnVuY3Rpb24oZSl7cmV0dXJuIU9lKHQsZSl9KX19LHJlbmRlcjpmdW5jdGlvbigpe3ZhciB0PWZ0KHRoaXMuJHNsb3RzLmRlZmF1bHQpLGU9dCYmdC5jb21wb25lbnRPcHRpb25zO2lmKGUpe3ZhciBuPWtlKGUpO2lmKG4mJih0aGlzLmluY2x1ZGUmJiFPZSh0aGlzLmluY2x1ZGUsbil8fHRoaXMuZXhjbHVkZSYmT2UodGhpcy5leGNsdWRlLG4pKSlyZXR1cm4gdDt2YXIgcj1udWxsPT10LmtleT9lLkN0b3IuY2lkKyhlLnRhZz8iOjoiK2UudGFnOiIiKTp0LmtleTt0aGlzLmNhY2hlW3JdP3QuY29tcG9uZW50SW5zdGFuY2U9dGhpcy5jYWNoZVtyXS5jb21wb25lbnRJbnN0YW5jZTp0aGlzLmNhY2hlW3JdPXQsdC5kYXRhLmtlZXBBbGl2ZT0hMH1yZXR1cm4gdH19fTshZnVuY3Rpb24odCl7dmFyIGU9e307ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4ga2l9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJjb25maWciLGUpLHQudXRpbD17d2FybjpTaSxleHRlbmQ6eSxtZXJnZU9wdGlvbnM6eixkZWZpbmVSZWFjdGl2ZTpOfSx0LnNldD1JLHQuZGVsZXRlPU0sdC5uZXh0VGljaz1xaSx0Lm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShudWxsKSx4aS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3Qub3B0aW9uc1tlKyJzIl09T2JqZWN0LmNyZWF0ZShudWxsKX0pLHQub3B0aW9ucy5fYmFzZT10LHkodC5vcHRpb25zLmNvbXBvbmVudHMsVG8pLGJlKHQpLCRlKHQpLENlKHQpLEFlKHQpfShfZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KF9lLnByb3RvdHlwZSwiJGlzU2VydmVyIix7Z2V0OnppfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KF9lLnByb3RvdHlwZSwiJHNzckNvbnRleHQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdm5vZGUmJnRoaXMuJHZub2RlLnNzckNvbnRleHR9fSksX2UudmVyc2lvbj0iMi40LjIiO3ZhciBTbyxFbyxqbyxMbyxObyxJbyxNbyxEbyxQbyxGbz1mKCJzdHlsZSxjbGFzcyIpLFJvPWYoImlucHV0LHRleHRhcmVhLG9wdGlvbixzZWxlY3QiKSxIbz1mdW5jdGlvbih0LGUsbil7cmV0dXJuInZhbHVlIj09PW4mJlJvKHQpJiYiYnV0dG9uIiE9PWV8fCJzZWxlY3RlZCI9PT1uJiYib3B0aW9uIj09PXR8fCJjaGVja2VkIj09PW4mJiJpbnB1dCI9PT10fHwibXV0ZWQiPT09biYmInZpZGVvIj09PXR9LEJvPWYoImNvbnRlbnRlZGl0YWJsZSxkcmFnZ2FibGUsc3BlbGxjaGVjayIpLFVvPWYoImFsbG93ZnVsbHNjcmVlbixhc3luYyxhdXRvZm9jdXMsYXV0b3BsYXksY2hlY2tlZCxjb21wYWN0LGNvbnRyb2xzLGRlY2xhcmUsZGVmYXVsdCxkZWZhdWx0Y2hlY2tlZCxkZWZhdWx0bXV0ZWQsZGVmYXVsdHNlbGVjdGVkLGRlZmVyLGRpc2FibGVkLGVuYWJsZWQsZm9ybW5vdmFsaWRhdGUsaGlkZGVuLGluZGV0ZXJtaW5hdGUsaW5lcnQsaXNtYXAsaXRlbXNjb3BlLGxvb3AsbXVsdGlwbGUsbXV0ZWQsbm9ocmVmLG5vcmVzaXplLG5vc2hhZGUsbm92YWxpZGF0ZSxub3dyYXAsb3BlbixwYXVzZW9uZXhpdCxyZWFkb25seSxyZXF1aXJlZCxyZXZlcnNlZCxzY29wZWQsc2VhbWxlc3Msc2VsZWN0ZWQsc29ydGFibGUsdHJhbnNsYXRlLHRydWVzcGVlZCx0eXBlbXVzdG1hdGNoLHZpc2libGUiKSxWbz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsem89ZnVuY3Rpb24odCl7cmV0dXJuIjoiPT09dC5jaGFyQXQoNSkmJiJ4bGluayI9PT10LnNsaWNlKDAsNSl9LEtvPWZ1bmN0aW9uKHQpe3JldHVybiB6byh0KT90LnNsaWNlKDYsdC5sZW5ndGgpOiIifSxKbz1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dHx8ITE9PT10fSxxbz17c3ZnOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsbWF0aDoiaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoL01hdGhNTCJ9LFdvPWYoImh0bWwsYm9keSxiYXNlLGhlYWQsbGluayxtZXRhLHN0eWxlLHRpdGxlLGFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxmb290ZXIsaGVhZGVyLGgxLGgyLGgzLGg0LGg1LGg2LGhncm91cCxuYXYsc2VjdGlvbixkaXYsZGQsZGwsZHQsZmlnY2FwdGlvbixmaWd1cmUscGljdHVyZSxocixpbWcsbGksbWFpbixvbCxwLHByZSx1bCxhLGIsYWJicixiZGksYmRvLGJyLGNpdGUsY29kZSxkYXRhLGRmbixlbSxpLGtiZCxtYXJrLHEscnAscnQscnRjLHJ1YnkscyxzYW1wLHNtYWxsLHNwYW4sc3Ryb25nLHN1YixzdXAsdGltZSx1LHZhcix3YnIsYXJlYSxhdWRpbyxtYXAsdHJhY2ssdmlkZW8sZW1iZWQsb2JqZWN0LHBhcmFtLHNvdXJjZSxjYW52YXMsc2NyaXB0LG5vc2NyaXB0LGRlbCxpbnMsY2FwdGlvbixjb2wsY29sZ3JvdXAsdGFibGUsdGhlYWQsdGJvZHksdGQsdGgsdHIsYnV0dG9uLGRhdGFsaXN0LGZpZWxkc2V0LGZvcm0saW5wdXQsbGFiZWwsbGVnZW5kLG1ldGVyLG9wdGdyb3VwLG9wdGlvbixvdXRwdXQscHJvZ3Jlc3Msc2VsZWN0LHRleHRhcmVhLGRldGFpbHMsZGlhbG9nLG1lbnUsbWVudWl0ZW0sc3VtbWFyeSxjb250ZW50LGVsZW1lbnQsc2hhZG93LHRlbXBsYXRlLGJsb2NrcXVvdGUsaWZyYW1lLHRmb290IiksR289Zigic3ZnLGFuaW1hdGUsY2lyY2xlLGNsaXBwYXRoLGN1cnNvcixkZWZzLGRlc2MsZWxsaXBzZSxmaWx0ZXIsZm9udC1mYWNlLGZvcmVpZ25PYmplY3QsZyxnbHlwaCxpbWFnZSxsaW5lLG1hcmtlcixtYXNrLG1pc3NpbmctZ2x5cGgscGF0aCxwYXR0ZXJuLHBvbHlnb24scG9seWxpbmUscmVjdCxzd2l0Y2gsc3ltYm9sLHRleHQsdGV4dHBhdGgsdHNwYW4sdXNlLHZpZXciLCEwKSxabz1mdW5jdGlvbih0KXtyZXR1cm4gV28odCl8fEdvKHQpfSxZbz1PYmplY3QuY3JlYXRlKG51bGwpLFFvPU9iamVjdC5mcmVlemUoe2NyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24odCxlKXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KHQpO3JldHVybiJzZWxlY3QiIT09dD9uOihlLmRhdGEmJmUuZGF0YS5hdHRycyYmdm9pZCAwIT09ZS5kYXRhLmF0dHJzLm11bHRpcGxlJiZuLnNldEF0dHJpYnV0ZSgibXVsdGlwbGUiLCJtdWx0aXBsZSIpLG4pfSxjcmVhdGVFbGVtZW50TlM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHFvW3RdLGUpfSxjcmVhdGVUZXh0Tm9kZTpmdW5jdGlvbih0KXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodCl9LGNyZWF0ZUNvbW1lbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQodCl9LGluc2VydEJlZm9yZTpmdW5jdGlvbih0LGUsbil7dC5pbnNlcnRCZWZvcmUoZSxuKX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24odCxlKXt0LnJlbW92ZUNoaWxkKGUpfSxhcHBlbmRDaGlsZDpmdW5jdGlvbih0LGUpe3QuYXBwZW5kQ2hpbGQoZSl9LHBhcmVudE5vZGU6ZnVuY3Rpb24odCl7cmV0dXJuIHQucGFyZW50Tm9kZX0sbmV4dFNpYmxpbmc6ZnVuY3Rpb24odCl7cmV0dXJuIHQubmV4dFNpYmxpbmd9LHRhZ05hbWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQudGFnTmFtZX0sc2V0VGV4dENvbnRlbnQ6ZnVuY3Rpb24odCxlKXt0LnRleHRDb250ZW50PWV9LHNldEF0dHJpYnV0ZTpmdW5jdGlvbih0LGUsbil7dC5zZXRBdHRyaWJ1dGUoZSxuKX19KSxYbz17Y3JlYXRlOmZ1bmN0aW9uKHQsZSl7UmUoZSl9LHVwZGF0ZTpmdW5jdGlvbih0LGUpe3QuZGF0YS5yZWYhPT1lLmRhdGEucmVmJiYoUmUodCwhMCksUmUoZSkpfSxkZXN0cm95OmZ1bmN0aW9uKHQpe1JlKHQsITApfX0sdGE9bmV3IGlvKCIiLHt9LFtdKSxlYT1bImNyZWF0ZSIsImFjdGl2YXRlIiwidXBkYXRlIiwicmVtb3ZlIiwiZGVzdHJveSJdLG5hPXtjcmVhdGU6VmUsdXBkYXRlOlZlLGRlc3Ryb3k6ZnVuY3Rpb24odCl7VmUodCx0YSl9fSxyYT1PYmplY3QuY3JlYXRlKG51bGwpLGlhPVtYbyxuYV0sb2E9e2NyZWF0ZTpXZSx1cGRhdGU6V2V9LGFhPXtjcmVhdGU6WmUsdXBkYXRlOlplfSxzYT0vW1x3KS4rXC1fJFxdXS8sY2E9Il9fciIsdWE9Il9fYyIsbGE9e2NyZWF0ZTp3bix1cGRhdGU6d259LGZhPXtjcmVhdGU6eG4sdXBkYXRlOnhufSxwYT12KGZ1bmN0aW9uKHQpe3ZhciBlPXt9LG49LzsoPyFbXihdKlwpKS9nLHI9LzooLispLztyZXR1cm4gdC5zcGxpdChuKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lmKHQpe3ZhciBuPXQuc3BsaXQocik7bi5sZW5ndGg+MSYmKGVbblswXS50cmltKCldPW5bMV0udHJpbSgpKX19KSxlfSksZGE9L14tLS8sdmE9L1xzKiFpbXBvcnRhbnQkLyxoYT1mdW5jdGlvbih0LGUsbil7aWYoZGEudGVzdChlKSl0LnN0eWxlLnNldFByb3BlcnR5KGUsbik7ZWxzZSBpZih2YS50ZXN0KG4pKXQuc3R5bGUuc2V0UHJvcGVydHkoZSxuLnJlcGxhY2UodmEsIiIpLCJpbXBvcnRhbnQiKTtlbHNle3ZhciByPXlhKGUpO2lmKEFycmF5LmlzQXJyYXkobikpZm9yKHZhciBpPTAsbz1uLmxlbmd0aDtpPG87aSsrKXQuc3R5bGVbcl09bltpXTtlbHNlIHQuc3R5bGVbcl09bn19LG1hPVsiV2Via2l0IiwiTW96IiwibXMiXSx5YT12KGZ1bmN0aW9uKHQpe2lmKFBvPVBvfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZSwiZmlsdGVyIiE9PSh0PXlpKHQpKSYmdCBpbiBQbylyZXR1cm4gdDtmb3IodmFyIGU9dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpLG49MDtuPG1hLmxlbmd0aDtuKyspe3ZhciByPW1hW25dK2U7aWYociBpbiBQbylyZXR1cm4gcn19KSxnYT17Y3JlYXRlOmpuLHVwZGF0ZTpqbn0sX2E9dihmdW5jdGlvbih0KXtyZXR1cm57ZW50ZXJDbGFzczp0KyItZW50ZXIiLGVudGVyVG9DbGFzczp0KyItZW50ZXItdG8iLGVudGVyQWN0aXZlQ2xhc3M6dCsiLWVudGVyLWFjdGl2ZSIsbGVhdmVDbGFzczp0KyItbGVhdmUiLGxlYXZlVG9DbGFzczp0KyItbGVhdmUtdG8iLGxlYXZlQWN0aXZlQ2xhc3M6dCsiLWxlYXZlLWFjdGl2ZSJ9fSksYmE9amkmJiFJaSwkYT0idHJhbnNpdGlvbiIsQ2E9ImFuaW1hdGlvbiIsd2E9InRyYW5zaXRpb24iLHhhPSJ0cmFuc2l0aW9uZW5kIixBYT0iYW5pbWF0aW9uIixrYT0iYW5pbWF0aW9uZW5kIjtiYSYmKHZvaWQgMD09PXdpbmRvdy5vbnRyYW5zaXRpb25lbmQmJnZvaWQgMCE9PXdpbmRvdy5vbndlYmtpdHRyYW5zaXRpb25lbmQmJih3YT0iV2Via2l0VHJhbnNpdGlvbiIseGE9IndlYmtpdFRyYW5zaXRpb25FbmQiKSx2b2lkIDA9PT13aW5kb3cub25hbmltYXRpb25lbmQmJnZvaWQgMCE9PXdpbmRvdy5vbndlYmtpdGFuaW1hdGlvbmVuZCYmKEFhPSJXZWJraXRBbmltYXRpb24iLGthPSJ3ZWJraXRBbmltYXRpb25FbmQiKSk7dmFyIE9hPWppJiZ3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lP3dpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYmluZCh3aW5kb3cpOnNldFRpbWVvdXQsVGE9L1xiKHRyYW5zZm9ybXxhbGwpKCx8JCkvLFNhPWZ1bmN0aW9uKHIpe2Z1bmN0aW9uIG8odCl7cmV0dXJuIG5ldyBpbyhFLnRhZ05hbWUodCkudG9Mb3dlckNhc2UoKSx7fSxbXSx2b2lkIDAsdCl9ZnVuY3Rpb24gYSh0LGUpe2Z1bmN0aW9uIG4oKXswPT0tLW4ubGlzdGVuZXJzJiZzKHQpfXJldHVybiBuLmxpc3RlbmVycz1lLG59ZnVuY3Rpb24gcyh0KXt2YXIgbj1FLnBhcmVudE5vZGUodCk7ZShuKSYmRS5yZW1vdmVDaGlsZChuLHQpfWZ1bmN0aW9uIGModCxyLGksbyxhKXtpZih0LmlzUm9vdEluc2VydD0hYSwhdSh0LHIsaSxvKSl7dmFyIHM9dC5kYXRhLGM9dC5jaGlsZHJlbixsPXQudGFnO2UobCk/KHQuZWxtPXQubnM/RS5jcmVhdGVFbGVtZW50TlModC5ucyxsKTpFLmNyZWF0ZUVsZW1lbnQobCx0KSx5KHQpLHYodCxjLHIpLGUocykmJm0odCxyKSxkKGksdC5lbG0sbykpOm4odC5pc0NvbW1lbnQpPyh0LmVsbT1FLmNyZWF0ZUNvbW1lbnQodC50ZXh0KSxkKGksdC5lbG0sbykpOih0LmVsbT1FLmNyZWF0ZVRleHROb2RlKHQudGV4dCksZChpLHQuZWxtLG8pKX19ZnVuY3Rpb24gdSh0LHIsaSxvKXt2YXIgYT10LmRhdGE7aWYoZShhKSl7dmFyIHM9ZSh0LmNvbXBvbmVudEluc3RhbmNlKSYmYS5rZWVwQWxpdmU7aWYoZShhPWEuaG9vaykmJmUoYT1hLmluaXQpJiZhKHQsITEsaSxvKSxlKHQuY29tcG9uZW50SW5zdGFuY2UpKXJldHVybiBsKHQsciksbihzKSYmcCh0LHIsaSxvKSwhMH19ZnVuY3Rpb24gbCh0LG4pe2UodC5kYXRhLnBlbmRpbmdJbnNlcnQpJiYobi5wdXNoLmFwcGx5KG4sdC5kYXRhLnBlbmRpbmdJbnNlcnQpLHQuZGF0YS5wZW5kaW5nSW5zZXJ0PW51bGwpLHQuZWxtPXQuY29tcG9uZW50SW5zdGFuY2UuJGVsLGgodCk/KG0odCxuKSx5KHQpKTooUmUodCksbi5wdXNoKHQpKX1mdW5jdGlvbiBwKHQsbixyLGkpe2Zvcih2YXIgbyxhPXQ7YS5jb21wb25lbnRJbnN0YW5jZTspaWYoYT1hLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZSxlKG89YS5kYXRhKSYmZShvPW8udHJhbnNpdGlvbikpe2ZvcihvPTA7bzxULmFjdGl2YXRlLmxlbmd0aDsrK28pVC5hY3RpdmF0ZVtvXSh0YSxhKTtuLnB1c2goYSk7YnJlYWt9ZChyLHQuZWxtLGkpfWZ1bmN0aW9uIGQodCxuLHIpe2UodCkmJihlKHIpP3IucGFyZW50Tm9kZT09PXQmJkUuaW5zZXJ0QmVmb3JlKHQsbixyKTpFLmFwcGVuZENoaWxkKHQsbikpfWZ1bmN0aW9uIHYodCxlLG4pe2lmKEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciByPTA7cjxlLmxlbmd0aDsrK3IpYyhlW3JdLG4sdC5lbG0sbnVsbCwhMCk7ZWxzZSBpKHQudGV4dCkmJkUuYXBwZW5kQ2hpbGQodC5lbG0sRS5jcmVhdGVUZXh0Tm9kZSh0LnRleHQpKX1mdW5jdGlvbiBoKHQpe2Zvcig7dC5jb21wb25lbnRJbnN0YW5jZTspdD10LmNvbXBvbmVudEluc3RhbmNlLl92bm9kZTtyZXR1cm4gZSh0LnRhZyl9ZnVuY3Rpb24gbSh0LG4pe2Zvcih2YXIgcj0wO3I8VC5jcmVhdGUubGVuZ3RoOysrcilULmNyZWF0ZVtyXSh0YSx0KTtlKGs9dC5kYXRhLmhvb2spJiYoZShrLmNyZWF0ZSkmJmsuY3JlYXRlKHRhLHQpLGUoay5pbnNlcnQpJiZuLnB1c2godCkpfWZ1bmN0aW9uIHkodCl7Zm9yKHZhciBuLHI9dDtyOyllKG49ci5jb250ZXh0KSYmZShuPW4uJG9wdGlvbnMuX3Njb3BlSWQpJiZFLnNldEF0dHJpYnV0ZSh0LmVsbSxuLCIiKSxyPXIucGFyZW50O2Uobj11bykmJm4hPT10LmNvbnRleHQmJmUobj1uLiRvcHRpb25zLl9zY29wZUlkKSYmRS5zZXRBdHRyaWJ1dGUodC5lbG0sbiwiIil9ZnVuY3Rpb24gZyh0LGUsbixyLGksbyl7Zm9yKDtyPD1pOysrciljKG5bcl0sbyx0LGUpfWZ1bmN0aW9uIF8odCl7dmFyIG4scixpPXQuZGF0YTtpZihlKGkpKWZvcihlKG49aS5ob29rKSYmZShuPW4uZGVzdHJveSkmJm4odCksbj0wO248VC5kZXN0cm95Lmxlbmd0aDsrK24pVC5kZXN0cm95W25dKHQpO2lmKGUobj10LmNoaWxkcmVuKSlmb3Iocj0wO3I8dC5jaGlsZHJlbi5sZW5ndGg7KytyKV8odC5jaGlsZHJlbltyXSl9ZnVuY3Rpb24gYih0LG4scixpKXtmb3IoO3I8PWk7KytyKXt2YXIgbz1uW3JdO2UobykmJihlKG8udGFnKT8oJChvKSxfKG8pKTpzKG8uZWxtKSl9fWZ1bmN0aW9uICQodCxuKXtpZihlKG4pfHxlKHQuZGF0YSkpe3ZhciByLGk9VC5yZW1vdmUubGVuZ3RoKzE7Zm9yKGUobik/bi5saXN0ZW5lcnMrPWk6bj1hKHQuZWxtLGkpLGUocj10LmNvbXBvbmVudEluc3RhbmNlKSYmZShyPXIuX3Zub2RlKSYmZShyLmRhdGEpJiYkKHIsbikscj0wO3I8VC5yZW1vdmUubGVuZ3RoOysrcilULnJlbW92ZVtyXSh0LG4pO2Uocj10LmRhdGEuaG9vaykmJmUocj1yLnJlbW92ZSk/cih0LG4pOm4oKX1lbHNlIHModC5lbG0pfWZ1bmN0aW9uIEMobixyLGksbyxhKXtmb3IodmFyIHMsdSxsLGY9MCxwPTAsZD1yLmxlbmd0aC0xLHY9clswXSxoPXJbZF0sbT1pLmxlbmd0aC0xLHk9aVswXSxfPWlbbV0sJD0hYTtmPD1kJiZwPD1tOyl0KHYpP3Y9clsrK2ZdOnQoaCk/aD1yWy0tZF06SGUodix5KT8odyh2LHksbyksdj1yWysrZl0seT1pWysrcF0pOkhlKGgsXyk/KHcoaCxfLG8pLGg9clstLWRdLF89aVstLW1dKTpIZSh2LF8pPyh3KHYsXyxvKSwkJiZFLmluc2VydEJlZm9yZShuLHYuZWxtLEUubmV4dFNpYmxpbmcoaC5lbG0pKSx2PXJbKytmXSxfPWlbLS1tXSk6SGUoaCx5KT8odyhoLHksbyksJCYmRS5pbnNlcnRCZWZvcmUobixoLmVsbSx2LmVsbSksaD1yWy0tZF0seT1pWysrcF0pOih0KHMpJiYocz1VZShyLGYsZCkpLHQodT1lKHkua2V5KT9zW3kua2V5XTpudWxsKT8oYyh5LG8sbix2LmVsbSkseT1pWysrcF0pOkhlKGw9clt1XSx5KT8odyhsLHksbyksclt1XT12b2lkIDAsJCYmRS5pbnNlcnRCZWZvcmUobixsLmVsbSx2LmVsbSkseT1pWysrcF0pOihjKHksbyxuLHYuZWxtKSx5PWlbKytwXSkpO2Y+ZD9nKG4sdChpW20rMV0pP251bGw6aVttKzFdLmVsbSxpLHAsbSxvKTpwPm0mJmIobixyLGYsZCl9ZnVuY3Rpb24gdyhyLGksbyxhKXtpZihyIT09aSl7dmFyIHM9aS5lbG09ci5lbG07aWYobihyLmlzQXN5bmNQbGFjZWhvbGRlcikpZShpLmFzeW5jRmFjdG9yeS5yZXNvbHZlZCk/QShyLmVsbSxpLG8pOmkuaXNBc3luY1BsYWNlaG9sZGVyPSEwO2Vsc2UgaWYobihpLmlzU3RhdGljKSYmbihyLmlzU3RhdGljKSYmaS5rZXk9PT1yLmtleSYmKG4oaS5pc0Nsb25lZCl8fG4oaS5pc09uY2UpKSlpLmNvbXBvbmVudEluc3RhbmNlPXIuY29tcG9uZW50SW5zdGFuY2U7ZWxzZXt2YXIgYyx1PWkuZGF0YTtlKHUpJiZlKGM9dS5ob29rKSYmZShjPWMucHJlcGF0Y2gpJiZjKHIsaSk7dmFyIGw9ci5jaGlsZHJlbixmPWkuY2hpbGRyZW47aWYoZSh1KSYmaChpKSl7Zm9yKGM9MDtjPFQudXBkYXRlLmxlbmd0aDsrK2MpVC51cGRhdGVbY10ocixpKTtlKGM9dS5ob29rKSYmZShjPWMudXBkYXRlKSYmYyhyLGkpfXQoaS50ZXh0KT9lKGwpJiZlKGYpP2whPT1mJiZDKHMsbCxmLG8sYSk6ZShmKT8oZShyLnRleHQpJiZFLnNldFRleHRDb250ZW50KHMsIiIpLGcocyxudWxsLGYsMCxmLmxlbmd0aC0xLG8pKTplKGwpP2IocyxsLDAsbC5sZW5ndGgtMSk6ZShyLnRleHQpJiZFLnNldFRleHRDb250ZW50KHMsIiIpOnIudGV4dCE9PWkudGV4dCYmRS5zZXRUZXh0Q29udGVudChzLGkudGV4dCksZSh1KSYmZShjPXUuaG9vaykmJmUoYz1jLnBvc3RwYXRjaCkmJmMocixpKX19fWZ1bmN0aW9uIHgodCxyLGkpe2lmKG4oaSkmJmUodC5wYXJlbnQpKXQucGFyZW50LmRhdGEucGVuZGluZ0luc2VydD1yO2Vsc2UgZm9yKHZhciBvPTA7bzxyLmxlbmd0aDsrK28pcltvXS5kYXRhLmhvb2suaW5zZXJ0KHJbb10pfWZ1bmN0aW9uIEEodCxyLGkpe2lmKG4oci5pc0NvbW1lbnQpJiZlKHIuYXN5bmNGYWN0b3J5KSlyZXR1cm4gci5lbG09dCxyLmlzQXN5bmNQbGFjZWhvbGRlcj0hMCwhMDtyLmVsbT10O3ZhciBvPXIudGFnLGE9ci5kYXRhLHM9ci5jaGlsZHJlbjtpZihlKGEpJiYoZShrPWEuaG9vaykmJmUoaz1rLmluaXQpJiZrKHIsITApLGUoaz1yLmNvbXBvbmVudEluc3RhbmNlKSkpcmV0dXJuIGwocixpKSwhMDtpZihlKG8pKXtpZihlKHMpKWlmKHQuaGFzQ2hpbGROb2RlcygpKXtmb3IodmFyIGM9ITAsdT10LmZpcnN0Q2hpbGQsZj0wO2Y8cy5sZW5ndGg7ZisrKXtpZighdXx8IUEodSxzW2ZdLGkpKXtjPSExO2JyZWFrfXU9dS5uZXh0U2libGluZ31pZighY3x8dSlyZXR1cm4hMX1lbHNlIHYocixzLGkpO2lmKGUoYSkpZm9yKHZhciBwIGluIGEpaWYoIWoocCkpe20ocixpKTticmVha319ZWxzZSB0LmRhdGEhPT1yLnRleHQmJih0LmRhdGE9ci50ZXh0KTtyZXR1cm4hMH12YXIgayxPLFQ9e30sUz1yLm1vZHVsZXMsRT1yLm5vZGVPcHM7Zm9yKGs9MDtrPGVhLmxlbmd0aDsrK2spZm9yKFRbZWFba11dPVtdLE89MDtPPFMubGVuZ3RoOysrTyllKFNbT11bZWFba11dKSYmVFtlYVtrXV0ucHVzaChTW09dW2VhW2tdXSk7dmFyIGo9ZigiYXR0cnMsc3R5bGUsY2xhc3Msc3RhdGljQ2xhc3Msc3RhdGljU3R5bGUsa2V5Iik7cmV0dXJuIGZ1bmN0aW9uKHIsaSxhLHMsdSxsKXtpZighdChpKSl7dmFyIGY9ITEscD1bXTtpZih0KHIpKWY9ITAsYyhpLHAsdSxsKTtlbHNle3ZhciBkPWUoci5ub2RlVHlwZSk7aWYoIWQmJkhlKHIsaSkpdyhyLGkscCxzKTtlbHNle2lmKGQpe2lmKDE9PT1yLm5vZGVUeXBlJiZyLmhhc0F0dHJpYnV0ZSh3aSkmJihyLnJlbW92ZUF0dHJpYnV0ZSh3aSksYT0hMCksbihhKSYmQShyLGkscCkpcmV0dXJuIHgoaSxwLCEwKSxyO3I9byhyKX12YXIgdj1yLmVsbSxtPUUucGFyZW50Tm9kZSh2KTtpZihjKGkscCx2Ll9sZWF2ZUNiP251bGw6bSxFLm5leHRTaWJsaW5nKHYpKSxlKGkucGFyZW50KSl7Zm9yKHZhciB5PWkucGFyZW50O3k7KXkuZWxtPWkuZWxtLHk9eS5wYXJlbnQ7aWYoaChpKSlmb3IodmFyIGc9MDtnPFQuY3JlYXRlLmxlbmd0aDsrK2cpVC5jcmVhdGVbZ10odGEsaS5wYXJlbnQpfWUobSk/YihtLFtyXSwwLDApOmUoci50YWcpJiZfKHIpfX1yZXR1cm4geChpLHAsZiksaS5lbG19ZShyKSYmXyhyKX19KHtub2RlT3BzOlFvLG1vZHVsZXM6W29hLGFhLGxhLGZhLGdhLGppP3tjcmVhdGU6Sm4sYWN0aXZhdGU6Sm4scmVtb3ZlOmZ1bmN0aW9uKHQsZSl7ITAhPT10LmRhdGEuc2hvdz9Wbih0LGUpOmUoKX19Ont9XS5jb25jYXQoaWEpfSksRWE9ZigidGV4dCxudW1iZXIscGFzc3dvcmQsc2VhcmNoLGVtYWlsLHRlbCx1cmwiKTtJaSYmZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigic2VsZWN0aW9uY2hhbmdlIixmdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7dCYmdC52bW9kZWwmJlluKHQsImlucHV0Iil9KTt2YXIgamE9e21vZGVsOntpbnNlcnRlZDpmdW5jdGlvbih0LGUsbil7aWYoInNlbGVjdCI9PT1uLnRhZyl7dmFyIHI9ZnVuY3Rpb24oKXtxbih0LGUsbi5jb250ZXh0KX07cigpLChOaXx8TWkpJiZzZXRUaW1lb3V0KHIsMCksdC5fdk9wdGlvbnM9W10ubWFwLmNhbGwodC5vcHRpb25zLFduKX1lbHNlKCJ0ZXh0YXJlYSI9PT1uLnRhZ3x8RWEodC50eXBlKSkmJih0Ll92TW9kaWZpZXJzPWUubW9kaWZpZXJzLGUubW9kaWZpZXJzLmxhenl8fCh0LmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsWm4pLERpfHwodC5hZGRFdmVudExpc3RlbmVyKCJjb21wb3NpdGlvbnN0YXJ0IixHbiksdC5hZGRFdmVudExpc3RlbmVyKCJjb21wb3NpdGlvbmVuZCIsWm4pKSxJaSYmKHQudm1vZGVsPSEwKSkpfSxjb21wb25lbnRVcGRhdGVkOmZ1bmN0aW9uKHQsZSxuKXtpZigic2VsZWN0Ij09PW4udGFnKXtxbih0LGUsbi5jb250ZXh0KTt2YXIgcj10Ll92T3B0aW9uczsodC5fdk9wdGlvbnM9W10ubWFwLmNhbGwodC5vcHRpb25zLFduKSkuc29tZShmdW5jdGlvbih0LGUpe3JldHVybiFiKHQscltlXSl9KSYmWW4odCwiY2hhbmdlIil9fX0sc2hvdzp7YmluZDpmdW5jdGlvbih0LGUsbil7dmFyIHI9ZS52YWx1ZSxpPShuPVFuKG4pKS5kYXRhJiZuLmRhdGEudHJhbnNpdGlvbixvPXQuX192T3JpZ2luYWxEaXNwbGF5PSJub25lIj09PXQuc3R5bGUuZGlzcGxheT8iIjp0LnN0eWxlLmRpc3BsYXk7ciYmaT8obi5kYXRhLnNob3c9ITAsVW4obixmdW5jdGlvbigpe3Quc3R5bGUuZGlzcGxheT1vfSkpOnQuc3R5bGUuZGlzcGxheT1yP286Im5vbmUifSx1cGRhdGU6ZnVuY3Rpb24odCxlLG4pe3ZhciByPWUudmFsdWU7ciE9PWUub2xkVmFsdWUmJigobj1RbihuKSkuZGF0YSYmbi5kYXRhLnRyYW5zaXRpb24/KG4uZGF0YS5zaG93PSEwLHI/VW4obixmdW5jdGlvbigpe3Quc3R5bGUuZGlzcGxheT10Ll9fdk9yaWdpbmFsRGlzcGxheX0pOlZuKG4sZnVuY3Rpb24oKXt0LnN0eWxlLmRpc3BsYXk9Im5vbmUifSkpOnQuc3R5bGUuZGlzcGxheT1yP3QuX192T3JpZ2luYWxEaXNwbGF5OiJub25lIil9LHVuYmluZDpmdW5jdGlvbih0LGUsbixyLGkpe2l8fCh0LnN0eWxlLmRpc3BsYXk9dC5fX3ZPcmlnaW5hbERpc3BsYXkpfX19LExhPXtuYW1lOlN0cmluZyxhcHBlYXI6Qm9vbGVhbixjc3M6Qm9vbGVhbixtb2RlOlN0cmluZyx0eXBlOlN0cmluZyxlbnRlckNsYXNzOlN0cmluZyxsZWF2ZUNsYXNzOlN0cmluZyxlbnRlclRvQ2xhc3M6U3RyaW5nLGxlYXZlVG9DbGFzczpTdHJpbmcsZW50ZXJBY3RpdmVDbGFzczpTdHJpbmcsbGVhdmVBY3RpdmVDbGFzczpTdHJpbmcsYXBwZWFyQ2xhc3M6U3RyaW5nLGFwcGVhckFjdGl2ZUNsYXNzOlN0cmluZyxhcHBlYXJUb0NsYXNzOlN0cmluZyxkdXJhdGlvbjpbTnVtYmVyLFN0cmluZyxPYmplY3RdfSxOYT17bmFtZToidHJhbnNpdGlvbiIscHJvcHM6TGEsYWJzdHJhY3Q6ITAscmVuZGVyOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLiRvcHRpb25zLl9yZW5kZXJDaGlsZHJlbjtpZihuJiYobj1uLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC50YWd8fGlyKHQpfSkpLmxlbmd0aCl7dmFyIHI9dGhpcy5tb2RlLG89blswXTtpZihucih0aGlzLiR2bm9kZSkpcmV0dXJuIG87dmFyIGE9WG4obyk7aWYoIWEpcmV0dXJuIG87aWYodGhpcy5fbGVhdmluZylyZXR1cm4gZXIodCxvKTt2YXIgcz0iX190cmFuc2l0aW9uLSIrdGhpcy5fdWlkKyItIjthLmtleT1udWxsPT1hLmtleT9hLmlzQ29tbWVudD9zKyJjb21tZW50IjpzK2EudGFnOmkoYS5rZXkpPzA9PT1TdHJpbmcoYS5rZXkpLmluZGV4T2Yocyk/YS5rZXk6cythLmtleTphLmtleTt2YXIgYz0oYS5kYXRhfHwoYS5kYXRhPXt9KSkudHJhbnNpdGlvbj10cih0aGlzKSx1PXRoaXMuX3Zub2RlLGw9WG4odSk7aWYoYS5kYXRhLmRpcmVjdGl2ZXMmJmEuZGF0YS5kaXJlY3RpdmVzLnNvbWUoZnVuY3Rpb24odCl7cmV0dXJuInNob3ciPT09dC5uYW1lfSkmJihhLmRhdGEuc2hvdz0hMCksbCYmbC5kYXRhJiYhcnIoYSxsKSYmIWlyKGwpKXt2YXIgZj1sJiYobC5kYXRhLnRyYW5zaXRpb249eSh7fSxjKSk7aWYoIm91dC1pbiI9PT1yKXJldHVybiB0aGlzLl9sZWF2aW5nPSEwLGV0KGYsImFmdGVyTGVhdmUiLGZ1bmN0aW9uKCl7ZS5fbGVhdmluZz0hMSxlLiRmb3JjZVVwZGF0ZSgpfSksZXIodCxvKTtpZigiaW4tb3V0Ij09PXIpe2lmKGlyKGEpKXJldHVybiB1O3ZhciBwLGQ9ZnVuY3Rpb24oKXtwKCl9O2V0KGMsImFmdGVyRW50ZXIiLGQpLGV0KGMsImVudGVyQ2FuY2VsbGVkIixkKSxldChmLCJkZWxheUxlYXZlIixmdW5jdGlvbih0KXtwPXR9KX19cmV0dXJuIG99fX0sSWE9eSh7dGFnOlN0cmluZyxtb3ZlQ2xhc3M6U3RyaW5nfSxMYSk7ZGVsZXRlIElhLm1vZGU7dmFyIE1hPXtUcmFuc2l0aW9uOk5hLFRyYW5zaXRpb25Hcm91cDp7cHJvcHM6SWEscmVuZGVyOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLnRhZ3x8dGhpcy4kdm5vZGUuZGF0YS50YWd8fCJzcGFuIixuPU9iamVjdC5jcmVhdGUobnVsbCkscj10aGlzLnByZXZDaGlsZHJlbj10aGlzLmNoaWxkcmVuLGk9dGhpcy4kc2xvdHMuZGVmYXVsdHx8W10sbz10aGlzLmNoaWxkcmVuPVtdLGE9dHIodGhpcykscz0wO3M8aS5sZW5ndGg7cysrKXt2YXIgYz1pW3NdO2MudGFnJiZudWxsIT1jLmtleSYmMCE9PVN0cmluZyhjLmtleSkuaW5kZXhPZigiX192bGlzdCIpJiYoby5wdXNoKGMpLG5bYy5rZXldPWMsKGMuZGF0YXx8KGMuZGF0YT17fSkpLnRyYW5zaXRpb249YSl9aWYocil7Zm9yKHZhciB1PVtdLGw9W10sZj0wO2Y8ci5sZW5ndGg7ZisrKXt2YXIgcD1yW2ZdO3AuZGF0YS50cmFuc2l0aW9uPWEscC5kYXRhLnBvcz1wLmVsbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxuW3Aua2V5XT91LnB1c2gocCk6bC5wdXNoKHApfXRoaXMua2VwdD10KGUsbnVsbCx1KSx0aGlzLnJlbW92ZWQ9bH1yZXR1cm4gdChlLG51bGwsbyl9LGJlZm9yZVVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuX19wYXRjaF9fKHRoaXMuX3Zub2RlLHRoaXMua2VwdCwhMSwhMCksdGhpcy5fdm5vZGU9dGhpcy5rZXB0fSx1cGRhdGVkOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wcmV2Q2hpbGRyZW4sZT10aGlzLm1vdmVDbGFzc3x8KHRoaXMubmFtZXx8InYiKSsiLW1vdmUiO2lmKHQubGVuZ3RoJiZ0aGlzLmhhc01vdmUodFswXS5lbG0sZSkpe3QuZm9yRWFjaChvciksdC5mb3JFYWNoKGFyKSx0LmZvckVhY2goc3IpO2RvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0O3QuZm9yRWFjaChmdW5jdGlvbih0KXtpZih0LmRhdGEubW92ZWQpe3ZhciBuPXQuZWxtLHI9bi5zdHlsZTtEbihuLGUpLHIudHJhbnNmb3JtPXIuV2Via2l0VHJhbnNmb3JtPXIudHJhbnNpdGlvbkR1cmF0aW9uPSIiLG4uYWRkRXZlbnRMaXN0ZW5lcih4YSxuLl9tb3ZlQ2I9ZnVuY3Rpb24gdChyKXtyJiYhL3RyYW5zZm9ybSQvLnRlc3Qoci5wcm9wZXJ0eU5hbWUpfHwobi5yZW1vdmVFdmVudExpc3RlbmVyKHhhLHQpLG4uX21vdmVDYj1udWxsLFBuKG4sZSkpfSl9fSl9fSxtZXRob2RzOntoYXNNb3ZlOmZ1bmN0aW9uKHQsZSl7aWYoIWJhKXJldHVybiExO2lmKHRoaXMuX2hhc01vdmUpcmV0dXJuIHRoaXMuX2hhc01vdmU7dmFyIG49dC5jbG9uZU5vZGUoKTt0Ll90cmFuc2l0aW9uQ2xhc3NlcyYmdC5fdHJhbnNpdGlvbkNsYXNzZXMuZm9yRWFjaChmdW5jdGlvbih0KXtObihuLHQpfSksTG4obixlKSxuLnN0eWxlLmRpc3BsYXk9Im5vbmUiLHRoaXMuJGVsLmFwcGVuZENoaWxkKG4pO3ZhciByPVJuKG4pO3JldHVybiB0aGlzLiRlbC5yZW1vdmVDaGlsZChuKSx0aGlzLl9oYXNNb3ZlPXIuaGFzVHJhbnNmb3JtfX19fTtfZS5jb25maWcubXVzdFVzZVByb3A9SG8sX2UuY29uZmlnLmlzUmVzZXJ2ZWRUYWc9Wm8sX2UuY29uZmlnLmlzUmVzZXJ2ZWRBdHRyPUZvLF9lLmNvbmZpZy5nZXRUYWdOYW1lc3BhY2U9UGUsX2UuY29uZmlnLmlzVW5rbm93bkVsZW1lbnQ9ZnVuY3Rpb24odCl7aWYoIWppKXJldHVybiEwO2lmKFpvKHQpKXJldHVybiExO2lmKHQ9dC50b0xvd2VyQ2FzZSgpLG51bGwhPVlvW3RdKXJldHVybiBZb1t0XTt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KHQpO3JldHVybiB0LmluZGV4T2YoIi0iKT4tMT9Zb1t0XT1lLmNvbnN0cnVjdG9yPT09d2luZG93LkhUTUxVbmtub3duRWxlbWVudHx8ZS5jb25zdHJ1Y3Rvcj09PXdpbmRvdy5IVE1MRWxlbWVudDpZb1t0XT0vSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KGUudG9TdHJpbmcoKSl9LHkoX2Uub3B0aW9ucy5kaXJlY3RpdmVzLGphKSx5KF9lLm9wdGlvbnMuY29tcG9uZW50cyxNYSksX2UucHJvdG90eXBlLl9fcGF0Y2hfXz1qaT9TYTpfLF9lLnByb3RvdHlwZS4kbW91bnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD10JiZqaT9GZSh0KTp2b2lkIDAsYnQodGhpcyx0LGUpfSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7a2kuZGV2dG9vbHMmJktpJiZLaS5lbWl0KCJpbml0IixfZSl9LDApO3ZhciBEYSxQYT0hIWppJiZmdW5jdGlvbih0LGUpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiBuLmlubmVySFRNTD0nPGRpdiBhPSInK3QrJyIvPicsbi5pbm5lckhUTUwuaW5kZXhPZihlKT4wfSgiXG4iLCImIzEwOyIpLEZhPS9ce1x7KCg/Oi58XG4pKz8pXH1cfS9nLFJhPS9bLS4qKz9eJHt9KCl8W1xdXC9cXF0vZyxIYT12KGZ1bmN0aW9uKHQpe3ZhciBlPXRbMF0ucmVwbGFjZShSYSwiXFwkJiIpLG49dFsxXS5yZXBsYWNlKFJhLCJcXCQmIik7cmV0dXJuIG5ldyBSZWdFeHAoZSsiKCg/Oi58XFxuKSs/KSIrbiwiZyIpfSksQmE9W3tzdGF0aWNLZXlzOlsic3RhdGljQ2xhc3MiXSx0cmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKHQsZSl7ZS53YXJuO3ZhciBuPXNuKHQsImNsYXNzIik7biYmKHQuc3RhdGljQ2xhc3M9SlNPTi5zdHJpbmdpZnkobikpO3ZhciByPWFuKHQsImNsYXNzIiwhMSk7ciYmKHQuY2xhc3NCaW5kaW5nPXIpfSxnZW5EYXRhOmZ1bmN0aW9uKHQpe3ZhciBlPSIiO3JldHVybiB0LnN0YXRpY0NsYXNzJiYoZSs9InN0YXRpY0NsYXNzOiIrdC5zdGF0aWNDbGFzcysiLCIpLHQuY2xhc3NCaW5kaW5nJiYoZSs9ImNsYXNzOiIrdC5jbGFzc0JpbmRpbmcrIiwiKSxlfX0se3N0YXRpY0tleXM6WyJzdGF0aWNTdHlsZSJdLHRyYW5zZm9ybU5vZGU6ZnVuY3Rpb24odCxlKXtlLndhcm47dmFyIG49c24odCwic3R5bGUiKTtuJiYodC5zdGF0aWNTdHlsZT1KU09OLnN0cmluZ2lmeShwYShuKSkpO3ZhciByPWFuKHQsInN0eWxlIiwhMSk7ciYmKHQuc3R5bGVCaW5kaW5nPXIpfSxnZW5EYXRhOmZ1bmN0aW9uKHQpe3ZhciBlPSIiO3JldHVybiB0LnN0YXRpY1N0eWxlJiYoZSs9InN0YXRpY1N0eWxlOiIrdC5zdGF0aWNTdHlsZSsiLCIpLHQuc3R5bGVCaW5kaW5nJiYoZSs9InN0eWxlOigiK3Quc3R5bGVCaW5kaW5nKyIpLCIpLGV9fV0sVWE9e21vZGVsOmZ1bmN0aW9uKHQsZSxuKXtNbz1uO3ZhciByPWUudmFsdWUsaT1lLm1vZGlmaWVycyxvPXQudGFnLGE9dC5hdHRyc01hcC50eXBlO2lmKHQuY29tcG9uZW50KXJldHVybiBjbih0LHIsaSksITE7aWYoInNlbGVjdCI9PT1vKWduKHQscixpKTtlbHNlIGlmKCJpbnB1dCI9PT1vJiYiY2hlY2tib3giPT09YSltbih0LHIsaSk7ZWxzZSBpZigiaW5wdXQiPT09byYmInJhZGlvIj09PWEpeW4odCxyLGkpO2Vsc2UgaWYoImlucHV0Ij09PW98fCJ0ZXh0YXJlYSI9PT1vKV9uKHQscixpKTtlbHNlIGlmKCFraS5pc1Jlc2VydmVkVGFnKG8pKXJldHVybiBjbih0LHIsaSksITE7cmV0dXJuITB9LHRleHQ6ZnVuY3Rpb24odCxlKXtlLnZhbHVlJiZlbih0LCJ0ZXh0Q29udGVudCIsIl9zKCIrZS52YWx1ZSsiKSIpfSxodG1sOmZ1bmN0aW9uKHQsZSl7ZS52YWx1ZSYmZW4odCwiaW5uZXJIVE1MIiwiX3MoIitlLnZhbHVlKyIpIil9fSxWYT1mKCJhcmVhLGJhc2UsYnIsY29sLGVtYmVkLGZyYW1lLGhyLGltZyxpbnB1dCxpc2luZGV4LGtleWdlbixsaW5rLG1ldGEscGFyYW0sc291cmNlLHRyYWNrLHdiciIpLHphPWYoImNvbGdyb3VwLGRkLGR0LGxpLG9wdGlvbnMscCx0ZCx0Zm9vdCx0aCx0aGVhZCx0cixzb3VyY2UiKSxLYT1mKCJhZGRyZXNzLGFydGljbGUsYXNpZGUsYmFzZSxibG9ja3F1b3RlLGJvZHksY2FwdGlvbixjb2wsY29sZ3JvdXAsZGQsZGV0YWlscyxkaWFsb2csZGl2LGRsLGR0LGZpZWxkc2V0LGZpZ2NhcHRpb24sZmlndXJlLGZvb3Rlcixmb3JtLGgxLGgyLGgzLGg0LGg1LGg2LGhlYWQsaGVhZGVyLGhncm91cCxocixodG1sLGxlZ2VuZCxsaSxtZW51aXRlbSxtZXRhLG9wdGdyb3VwLG9wdGlvbixwYXJhbSxycCxydCxzb3VyY2Usc3R5bGUsc3VtbWFyeSx0Ym9keSx0ZCx0Zm9vdCx0aCx0aGVhZCx0aXRsZSx0cix0cmFjayIpLEphPXtleHBlY3RIVE1MOiEwLG1vZHVsZXM6QmEsZGlyZWN0aXZlczpVYSxpc1ByZVRhZzpmdW5jdGlvbih0KXtyZXR1cm4icHJlIj09PXR9LGlzVW5hcnlUYWc6VmEsbXVzdFVzZVByb3A6SG8sY2FuQmVMZWZ0T3BlblRhZzp6YSxpc1Jlc2VydmVkVGFnOlpvLGdldFRhZ05hbWVzcGFjZTpQZSxzdGF0aWNLZXlzOmZ1bmN0aW9uKHQpe3JldHVybiB0LnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiB0LmNvbmNhdChlLnN0YXRpY0tleXN8fFtdKX0sW10pLmpvaW4oIiwiKX0oQmEpfSxxYT17ZGVjb2RlOmZ1bmN0aW9uKHQpe3JldHVybiBEYT1EYXx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksRGEuaW5uZXJIVE1MPXQsRGEudGV4dENvbnRlbnR9fSxXYT0vKFteXHMiJzw+Lz1dKykvLEdhPS8oPzo9KS8sWmE9Wy8iKFteIl0qKSIrLy5zb3VyY2UsLycoW14nXSopJysvLnNvdXJjZSwvKFteXHMiJz08PmBdKykvLnNvdXJjZV0sWWE9bmV3IFJlZ0V4cCgiXlxccyoiK1dhLnNvdXJjZSsiKD86XFxzKigiK0dhLnNvdXJjZSsiKVxccyooPzoiK1phLmpvaW4oInwiKSsiKSk/IiksUWE9IlthLXpBLVpfXVtcXHdcXC1cXC5dKiIsWGE9IigoPzoiK1FhKyJcXDopPyIrUWErIikiLHRzPW5ldyBSZWdFeHAoIl48IitYYSksZXM9L15ccyooXC8/KT4vLG5zPW5ldyBSZWdFeHAoIl48XFwvIitYYSsiW14+XSo+IikscnM9L148IURPQ1RZUEUgW14+XSs+L2ksaXM9L148IS0tLyxvcz0vXjwhXFsvLGFzPSExOyJ4Ii5yZXBsYWNlKC94KC4pPy9nLGZ1bmN0aW9uKHQsZSl7YXM9IiI9PT1lfSk7dmFyIHNzLGNzLHVzLGxzLGZzLHBzLGRzLHZzLGhzLG1zLHlzPWYoInNjcmlwdCxzdHlsZSx0ZXh0YXJlYSIsITApLGdzPXt9LF9zPXsiJmx0OyI6IjwiLCImZ3Q7IjoiPiIsIiZxdW90OyI6JyInLCImYW1wOyI6IiYiLCImIzEwOyI6IlxuIn0sYnM9LyYoPzpsdHxndHxxdW90fGFtcCk7L2csJHM9LyYoPzpsdHxndHxxdW90fGFtcHwjMTApOy9nLENzPWYoInByZSx0ZXh0YXJlYSIsITApLHdzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQmJkNzKHQpJiYiXG4iPT09ZVswXX0seHM9L15AfF52LW9uOi8sQXM9L152LXxeQHxeOi8sa3M9LyguKj8pXHMrKD86aW58b2YpXHMrKC4qKS8sT3M9L1woKFx7W159XSpcfXxbXixdKiksKFteLF0qKSg/OiwoW14sXSopKT9cKS8sVHM9LzooLiopJC8sU3M9L146fF52LWJpbmQ6LyxFcz0vXC5bXi5dKy9nLGpzPXYocWEuZGVjb2RlKSxMcz0vXnhtbG5zOk5TXGQrLyxOcz0vXk5TXGQrOi8sSXM9dihmdW5jdGlvbih0KXtyZXR1cm4gZigidHlwZSx0YWcsYXR0cnNMaXN0LGF0dHJzTWFwLHBsYWluLHBhcmVudCxjaGlsZHJlbixhdHRycyIrKHQ/IiwiK3Q6IiIpKX0pLE1zPS9eXHMqKFtcdyRfXSt8XChbXildKj9cKSlccyo9PnxeZnVuY3Rpb25ccypcKC8sRHM9L15ccypbQS1aYS16XyRdW1x3JF0qKD86XC5bQS1aYS16XyRdW1x3JF0qfFxbJy4qPyddfFxbIi4qPyJdfFxbXGQrXXxcW1tBLVphLXpfJF1bXHckXSpdKSpccyokLyxQcz17ZXNjOjI3LHRhYjo5LGVudGVyOjEzLHNwYWNlOjMyLHVwOjM4LGxlZnQ6MzcscmlnaHQ6MzksZG93bjo0MCxkZWxldGU6WzgsNDZdfSxGcz1mdW5jdGlvbih0KXtyZXR1cm4iaWYoIit0KyIpcmV0dXJuIG51bGw7In0sUnM9e3N0b3A6IiRldmVudC5zdG9wUHJvcGFnYXRpb24oKTsiLHByZXZlbnQ6IiRldmVudC5wcmV2ZW50RGVmYXVsdCgpOyIsc2VsZjpGcygiJGV2ZW50LnRhcmdldCAhPT0gJGV2ZW50LmN1cnJlbnRUYXJnZXQiKSxjdHJsOkZzKCIhJGV2ZW50LmN0cmxLZXkiKSxzaGlmdDpGcygiISRldmVudC5zaGlmdEtleSIpLGFsdDpGcygiISRldmVudC5hbHRLZXkiKSxtZXRhOkZzKCIhJGV2ZW50Lm1ldGFLZXkiKSxsZWZ0OkZzKCInYnV0dG9uJyBpbiAkZXZlbnQgJiYgJGV2ZW50LmJ1dHRvbiAhPT0gMCIpLG1pZGRsZTpGcygiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDEiKSxyaWdodDpGcygiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDIiKX0sSHM9e29uOmZ1bmN0aW9uKHQsZSl7dC53cmFwTGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3JldHVybiJfZygiK3QrIiwiK2UudmFsdWUrIikifX0sYmluZDpmdW5jdGlvbih0LGUpe3Qud3JhcERhdGE9ZnVuY3Rpb24obil7cmV0dXJuIl9iKCIrbisiLCciK3QudGFnKyInLCIrZS52YWx1ZSsiLCIrKGUubW9kaWZpZXJzJiZlLm1vZGlmaWVycy5wcm9wPyJ0cnVlIjoiZmFsc2UiKSsoZS5tb2RpZmllcnMmJmUubW9kaWZpZXJzLnN5bmM/Iix0cnVlIjoiIikrIikifX0sY2xvYWs6X30sQnM9ZnVuY3Rpb24odCl7dGhpcy5vcHRpb25zPXQsdGhpcy53YXJuPXQud2Fybnx8WGUsdGhpcy50cmFuc2Zvcm1zPXRuKHQubW9kdWxlcywidHJhbnNmb3JtQ29kZSIpLHRoaXMuZGF0YUdlbkZucz10bih0Lm1vZHVsZXMsImdlbkRhdGEiKSx0aGlzLmRpcmVjdGl2ZXM9eSh5KHt9LEhzKSx0LmRpcmVjdGl2ZXMpO3ZhciBlPXQuaXNSZXNlcnZlZFRhZ3x8JGk7dGhpcy5tYXliZUNvbXBvbmVudD1mdW5jdGlvbih0KXtyZXR1cm4hZSh0LnRhZyl9LHRoaXMub25jZUlkPTAsdGhpcy5zdGF0aWNSZW5kZXJGbnM9W119LFVzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtmdW5jdGlvbiBuKG4scil7dmFyIGk9T2JqZWN0LmNyZWF0ZShlKSxvPVtdLGE9W107aWYoaS53YXJuPWZ1bmN0aW9uKHQsZSl7KGU/YTpvKS5wdXNoKHQpfSxyKXtyLm1vZHVsZXMmJihpLm1vZHVsZXM9KGUubW9kdWxlc3x8W10pLmNvbmNhdChyLm1vZHVsZXMpKSxyLmRpcmVjdGl2ZXMmJihpLmRpcmVjdGl2ZXM9eShPYmplY3QuY3JlYXRlKGUuZGlyZWN0aXZlcyksci5kaXJlY3RpdmVzKSk7Zm9yKHZhciBzIGluIHIpIm1vZHVsZXMiIT09cyYmImRpcmVjdGl2ZXMiIT09cyYmKGlbc109cltzXSl9dmFyIGM9dChuLGkpO3JldHVybiBjLmVycm9ycz1vLGMudGlwcz1hLGN9cmV0dXJue2NvbXBpbGU6bixjb21waWxlVG9GdW5jdGlvbnM6bGkobil9fX0oZnVuY3Rpb24odCxlKXt2YXIgbj1mcih0LnRyaW0oKSxlKTtqcihuLGUpO3ZhciByPUhyKG4sZSk7cmV0dXJue2FzdDpuLHJlbmRlcjpyLnJlbmRlcixzdGF0aWNSZW5kZXJGbnM6ci5zdGF0aWNSZW5kZXJGbnN9fSkoSmEpLmNvbXBpbGVUb0Z1bmN0aW9ucyxWcz12KGZ1bmN0aW9uKHQpe3ZhciBlPUZlKHQpO3JldHVybiBlJiZlLmlubmVySFRNTH0pLHpzPV9lLnByb3RvdHlwZS4kbW91bnQ7cmV0dXJuIF9lLnByb3RvdHlwZS4kbW91bnQ9ZnVuY3Rpb24odCxlKXtpZigodD10JiZGZSh0KSk9PT1kb2N1bWVudC5ib2R5fHx0PT09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KXJldHVybiB0aGlzO3ZhciBuPXRoaXMuJG9wdGlvbnM7aWYoIW4ucmVuZGVyKXt2YXIgcj1uLnRlbXBsYXRlO2lmKHIpaWYoInN0cmluZyI9PXR5cGVvZiByKSIjIj09PXIuY2hhckF0KDApJiYocj1WcyhyKSk7ZWxzZXtpZighci5ub2RlVHlwZSlyZXR1cm4gdGhpcztyPXIuaW5uZXJIVE1MfWVsc2UgdCYmKHI9ZmkodCkpO2lmKHIpe3ZhciBpPVVzKHIse3Nob3VsZERlY29kZU5ld2xpbmVzOlBhLGRlbGltaXRlcnM6bi5kZWxpbWl0ZXJzLGNvbW1lbnRzOm4uY29tbWVudHN9LHRoaXMpLG89aS5yZW5kZXIsYT1pLnN0YXRpY1JlbmRlckZucztuLnJlbmRlcj1vLG4uc3RhdGljUmVuZGVyRm5zPWF9fXJldHVybiB6cy5jYWxsKHRoaXMsdCxlKX0sX2UuY29tcGlsZT1VcyxfZX0pOw=="}]},{"name":"网易 buff 增强脚本","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["*://buff.163.com/market/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null,"orig_connects":["steamcommunity.com"]}},"storage":{"ts":1608308909932,"data":{}},"enabled":true,"position":22,"file_url":"https://greasyfork.org/scripts/415257-%E7%BD%91%E6%98%93-buff-%E5%A2%9E%E5%BC%BA%E8%84%9A%E6%9C%AC/code/%E7%BD%91%E6%98%93%20buff%20%E5%A2%9E%E5%BC%BA%E8%84%9A%E6%9C%AC.user.js","uuid":"91078a6a-cd0d-4354-9163-799701bc8899","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQGljb24gICAgICAgICBodHRwczovL3N0b3JlLnN0ZWFtcG93ZXJlZC5jb20vZmF2aWNvbi5pY28KLy8gQG5hbWUgICAgICAgICDnvZHmmJMgYnVmZiDlop7lvLrohJrmnKwKLy8gQG5hbWVzcGFjZSAgICBvdXQKLy8gQHZlcnNpb24gICAgICAwLjIxCi8vIEBkZXNjcmlwdGlvbiAg5q+U5L6L6K6h566XIOaIkOS6pOmHj+aYvuekuiDplIDllK7ku7fmmL7npLoKLy8gQGF1dGhvciAgICAgICBibHVlYmlyZAovLyBAbWF0Y2ggICAgICAgICo6Ly9idWZmLjE2My5jb20vbWFya2V0LyoKLy8gQGdyYW50ICAgICAgICBHTV9hZGRTdHlsZQovLyBAZ3JhbnQgICAgICAgIEdNX29wZW5JblRhYgovLyBAZ3JhbnQgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0Ci8vIEBncmFudCBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgR01fZ2V0VmFsdWUKLy8gQHJlcXVpcmUgICAgICBodHRwczovL2Nkbi5ib290Y3NzLmNvbS9qcXVlcnkvMi4yLjQvanF1ZXJ5Lm1pbi5qcwovLyBAY29ubmVjdCAgICAgIHN0ZWFtY29tbXVuaXR5LmNvbQovLyBAc3VwcG9ydFVSTCAgIGh0dHBzOi8vc3RlYW1jb21tdW5pdHkuY29tL2lkL2JsdWViaXJkMjMzMy8KCi8vID09L1VzZXJTY3JpcHQ9PQoKY29uc3QgJCA9IHdpbmRvdy5qUXVlcnk7CgoKKGZ1bmN0aW9uICgpIHsKICAgICd1c2Ugc3RyaWN0JzsKCiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLm1hdGNoKCJidWZmLjE2My5jb20vbWFya2V0L2dvb2RzLisiKSkgewogICAgICAgICAgICBydW4oKTsKICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLm1hdGNoKCJidWZmLjE2My5jb20vbWFya2V0Lz8uKyIpKSB7CiAgICAgICAgICAgIHNlYXJjaEZpbHRlcigpCiAgICAgICAgfQogICAgfSk7CgoKfSkoKTsKCgp2YXIgdm9sdW1lTnVtID0gMAp2YXIgZGF0YQoKZnVuY3Rpb24gcnVuKCkgewogICAgbGV0IG1hcmtldFVybCA9ICQoJ2Rpdi5kZXRhaWwtc3VtbSA+IGEnKS5hdHRyKCJocmVmIikKICAgIGxldCBkZXRhaWwgPSAkKCJkaXYuZGV0YWlsLXN1bW0iKQogICAgZGV0YWlsLnByZXBlbmQoIjxkaXY+PHVsIGNsYXNzPSdwcmljZWxpc3QnIGlkPSdpbmZvbGlzdCc+PGxpIGlkPSd0cmFkZW51bScgY2xhc3M9J3llbGxvdyc+PC9saT48L3VsPjwvZGl2PiIpCiAgICBkZXRhaWwucHJlcGVuZCgiPGRpdiBjbGFzcz0nd2Fybic+IDx1bCBpZD0nd2Fybmxpc3QnPjwvdWw+PC9kaXY+IikKICAgIGdldEl0ZW1Wb2x1bWUobWFya2V0VXJsLCBnb29kc0dldFByaWNlLCBzdGVhbUVycm9yKQogICAgZ2V0UHJpY2VEYXRhKG1hcmtldFVybCwgY2FsYywgc3RlYW1FcnJvcikKfQoKZnVuY3Rpb24gc2VhcmNoU2hvd0Vycm9yKCkgewogICAgJCgiI2Vycm9yIikuaHRtbCgiPGgyIHN0eWxlPSdjb2xvcjpyZWQnPnN0ZWFt572R57uc6ZSZ6K+vPC9oMj4iKQp9CgpmdW5jdGlvbiBzZWFyY2hGaWx0ZXIoKSB7CiAgICBHTV9hZGRTdHlsZShgIC5uZXctQ291bnRlciB7bWluLXdpZHRoOiAxMjBweDt9IC5maXgtaW5wdXQge3dpZHRoOiAxNjBweH1gKTsKICAgICQoIi5sX0xheW91dD4uYmxhbmsyMCIpLmFmdGVyKCc8ZGl2IGNsYXNzPSJtYXJrZXQtaGVhZGVyICI+PGRpdiBjbGFzcz0iY3JpdGVyaWEgYmxhY2siPjxkaXYgY2xhc3M9ImxfTGVmdCI+IDxsYWJlbD7nrZvpgInvvJo8L2xhYmVsPiAgXAo8ZGl2IGNsYXNzPSJ3LUNvdW50ZXIgbmV3LUNvdW50ZXIiIGlkPSJ0YWFkZV9udW0iPiA8ZGl2IGNsYXNzPSJ3LUNvdW50ZXItaW5wdXQgdy1Db3VudGVyLWlucHV0MyBmaXgtaW5wdXQiPiDmnIDkvY7kuqTmmJPph488aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImlfVGV4dCIgbmFtZT0ibWluX3RyYWRlIiBwbGFjZWhvbGRlcj0iIiBwYXR0ZW5lZD0idHJ1ZSI+IDwvZGl2PjwvZGl2PiBcCjxkaXYgY2xhc3M9InctQ291bnRlciBuZXctQ291bnRlciIgaWQ9InJhZGlvX251bSI+PGRpdiBjbGFzcz0idy1Db3VudGVyLWlucHV0IHctQ291bnRlci1pbnB1dDMgZml4LWlucHV0Ij4g5pyA5L2O5q+U5L6LPGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJpX1RleHQiIG5hbWU9Im1pbl9yYWRpbyIgcGxhY2Vob2xkZXI9IiIgcGF0dGVuZWQ9InRydWUiPjwvZGl2PjwvZGl2PiBcCjxkaXYgY2xhc3M9InctU2VhcmNoIiBpZD0ic3RhcnQiPjxhIGhyZWY9ImphdmFzY3JpcHQ6OyIgPjwvaT7lvIDlp4s8L2E+IDxkaXYgaWQ9ImVycm9yIj48L2Rpdj48L2Rpdj4gXAo8L2Rpdj48L2Rpdj48L2Rpdj4nKQoKCiAgICAkKGRvY3VtZW50KS5vbigiY2xpY2siLCAiI3N0YXJ0IiwgZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCLlvIDlp4vov4fmu6QiKQogICAgICAgIGxldCB0cmFkZU51bSA9ICQoImlucHV0W25hbWU9bWluX3RyYWRlXSIpWzBdLnZhbHVlCiAgICAgICAgbGV0IHJhZGlvTnVtID0gJCgiaW5wdXRbbmFtZT1taW5fcmFkaW9dIilbMF0udmFsdWUKCiAgICAgICAgaWYgKCF0cmFkZU51bSAmJiAhcmFkaW9OdW0pIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIuaXoOi/h+a7pOaVsOaNriIpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIH0KCiAgICAgICAgbGV0IGFyZyA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyN0YWI9Lis/Ji8sICImIikuc3BsaXQoIj8iKVsxXQogICAgICAgIGNvbnNvbGUubG9nKCLlvIDlp4vor7fmsYIiKQoKICAgICAgICBmb3IgKHZhciBpIG9mICQoIiNqX2xpc3RfY2FyZD4+bGk+YSIpKSB7CiAgICAgICAgICAgIGxldCB1cmwgPSBpLmhyZWYKICAgICAgICAgICAgbGV0IGRlbGxpID0gICQoaSkucGFyZW50cygibGkiKQogICAgICAgICAgICBsZXQgbmFtZSA9IGkudGl0bGUKICAgICAgICAgICAgbGV0IHByaWNlID0gcGFyc2VGbG9hdChkZWxsaS5jaGlsZHJlbigicCIpLmNoaWxkcmVuKCJzdHJvbmciKS50ZXh0KCkuc3BsaXQoIiAiKVsxXSkKICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAianNvbiIsCiAgICAgICAgICAgICAgICB0aW1lb3V0OiA1MDAwLAogICAgICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDIwMCAmJiByZXN1bHQucmVzcG9uc2VUZXh0ICE9PSAibnVsbCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hcmtldFVybCA9IHJlc3VsdC5yZXNwb25zZVRleHQubWF0Y2goIihodHRwczovL3N0ZWFtY29tbXVuaXR5LmNvbS9tYXJrZXQvbGlzdGluZ3MvLis/KVwiIilbMV0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobWFya2V0VXJsKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1hcmtldFVybCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFkZU51bSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0SXRlbVZvbHVtZShtYXJrZXRVcmwsIGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnJlc3BvbnNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHZvbHVtZU51bQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnZvbHVtZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9sdW1lTnVtID0gcGFyc2VJbnQocmVzdWx0LnZvbHVtZS5yZXBsYWNlKC9cLCA/L2dpLCAnJykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2x1bWVOdW0gPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZvbHVtZU51bSA8IHRyYWRlTnVtKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsbGkucmVtb3ZlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5hbWUrIuS6pOaYk+mHjyIrdm9sdW1lTnVtLnRvU3RyaW5nKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgc2VhcmNoU2hvd0Vycm9yKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYWRpb051bSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UHJpY2VEYXRhKG1hcmtldFVybCwgZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5sb3dlc3Rfc2VsbF9vcmRlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocHJpY2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzZWxsX21pbl9wcmljZSA9IHByaWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYWxjTG93ID0gY2FsY2ZlZShwYXJzZUludChyZXN1bHQubG93ZXN0X3NlbGxfb3JkZXIpKSAvIDEwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbG93UmF0aW8gPSAoc2VsbF9taW5fcHJpY2UgLyBjYWxjTG93KS50b0ZpeGVkKDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGxvd1JhdGlvKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG93UmF0aW8gPiByYWRpb051bSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxsaS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5hbWUrIuavlOS+iyIrbG93UmF0aW8udG9TdHJpbmcoKSkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgc2VhcmNoU2hvd0Vycm9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCgoKICAgICAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKCiAgICAgICAgfQoKICAgIH0pCn0KCgpmdW5jdGlvbiBjYWxjKGRhdGEpIHsKCiAgICBjb25zb2xlLmxvZyhkYXRhKQogICAgaWYgKGRhdGEgJiYgZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgY29uc29sZS5sb2coIuiOt+WPluaVsOaNruaIkOWKnyIpCiAgICAgICAgR01fYWRkU3R5bGUoYCAuZGV0YWlsLWNvbnQgPiBkaXYuYmxhbmsyMCB7IGhlaWdodDo1cHg7fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRldGFpbC1zdW1tIHNwYW4geyBkaXNwbGF5Om5vbmU7IG1hcmdpbi1yaWdodDowcHg7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uZGV0YWlsLXN1bW0gYSB7IGZsb2F0OnJpZ2h0IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucHJpY2VsaXN0IHtmb250LXNpemU6IDAuOXJlbTsgZmxvYXQ6bGVmdH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVkIHtjb2xvcjpyZWR9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLndhcm4ge2ZvbnQtc2l6ZTogMC43NXJlbTtmbG9hdDpyaWdodH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnllbGxvdyB7Y29sb3I6eWVsbG93fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCk7CgogICAgICAgIGlmICghZGF0YS5sb3dlc3Rfc2VsbF9vcmRlciAmJiAhZGF0YS5oaWdoZXN0X2J1eV9vcmRlcikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBjb25zb2xlLmxvZygi5byA5aeL6I635Y+WYnVmZuS7t+agvCIpCiAgICAgICAgbGV0IHNpdGVwcmljZSA9IGdldEZsb2F0KCQoInRhYmxlIGEuaV9CdG46Zmlyc3QiKS5hdHRyKCdkYXRhLXByaWNlJykpOwogICAgICAgIGlmICghc2l0ZXByaWNlKSB7CiAgICAgICAgICAgIHNpdGVwcmljZSA9IGdldEZsb2F0KCQoInRhYmxlIHN0cm9uZy5mX1N0cm9uZzpmaXJzdCIpLnRleHQoKSArICQoInRhYmxlIHN0cm9uZy5mX1N0cm9uZzpmaXJzdCBzbWFsbCIpLnRleHQoKSk7CiAgICAgICAgfQogICAgICAgIGlmICghc2l0ZXByaWNlKSB7CiAgICAgICAgICAgIHJldHVybgogICAgICAgIH0KCiAgICAgICAgbGV0IGxvd2VzdCA9IDAKICAgICAgICBsZXQgaGlnaGVzdCA9IDAKICAgICAgICBsZXQgY2FsY0xvdyA9IDAKICAgICAgICBsZXQgY2FsY0hpZ2ggPSAwCiAgICAgICAgbGV0IGxvd1JhdGlvID0gMAogICAgICAgIGxldCBoaWdoUmF0aW8gPSAwCgogICAgICAgIGlmIChkYXRhLmhpZ2hlc3RfYnV5X29yZGVyKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLlvIDlp4vorqHnrpfmlLbotK3mr5TkvosiKQogICAgICAgICAgICBoaWdoZXN0ID0gcGFyc2VJbnQoZGF0YS5oaWdoZXN0X2J1eV9vcmRlcikgLyAxMDAKICAgICAgICAgICAgY2FsY0hpZ2ggPSBjYWxjZmVlKHBhcnNlSW50KGRhdGEuaGlnaGVzdF9idXlfb3JkZXIpKSAvIDEwMAogICAgICAgICAgICBoaWdoUmF0aW8gPSAoc2l0ZXByaWNlIC8gY2FsY0hpZ2gpLnRvRml4ZWQoMikKICAgICAgICAgICAgJCgiI2luZm9saXN0IikuYXBwZW5kKCI8bGkgIGNsYXNzPSd5ZWxsb3cnPuacgOmrmOaUtui0reS7t+agvCIgKyBoaWdoZXN0LnRvU3RyaW5nKCkgKyAiICAgICAgICDmr5Tkvos6PHN0cm9uZz4iICsgaGlnaFJhdGlvLnRvU3RyaW5nKCkgKyAiPC9zdHJvbmc+PC9saT4iKQoKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEubG93ZXN0X3NlbGxfb3JkZXIpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIuW8gOWni+iuoeeul+mUgOWUruavlOS+iyIpCiAgICAgICAgICAgIGxvd2VzdCA9IHBhcnNlSW50KGRhdGEubG93ZXN0X3NlbGxfb3JkZXIpIC8gMTAwCiAgICAgICAgICAgIGNhbGNMb3cgPSBjYWxjZmVlKHBhcnNlSW50KGRhdGEubG93ZXN0X3NlbGxfb3JkZXIpKSAvIDEwMAogICAgICAgICAgICBsb3dSYXRpbyA9IChzaXRlcHJpY2UgLyBjYWxjTG93KS50b0ZpeGVkKDIpCiAgICAgICAgICAgICQoIiNpbmZvbGlzdCIpLmFwcGVuZCgiPGxpIGNsYXNzPSd5ZWxsb3cnPuacgOS9juWHuuWUruS7t+agvCIgKyBsb3dlc3QudG9TdHJpbmcoKSArICIgICAgICAg5q+U5L6LOjxzdHJvbmc+IiArIGxvd1JhdGlvLnRvU3RyaW5nKCkgKyAiPC9zdHJvbmc+PC9saT4iKQoKICAgICAgICB9CiAgICAgICAgY29uc29sZS5sb2coIuW8gOWni+iuoeeul+eos+WumuS7t+agvOWSjOS7t+agvOWMuumXtOaVsOmHjyIpCiAgICAgICAgbGV0IHByaWNlUmFuZ2UgPSAoc2l0ZXByaWNlIC8gMjApLnRvRml4ZWQoMikKICAgICAgICBsZXQgYnV5UHJpY2VNYXAgPSB7MTogMCwgMjogMH0KICAgICAgICBsZXQgc3RhYmxlQnV5UHJpY2UgPSAwCiAgICAgICAgbGV0IGJ1eV9vcmRlcl9ncmFwaCA9IGRhdGEuYnV5X29yZGVyX2dyYXBoCiAgICAgICAgdmFyIHRtcCA9IDAKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1eV9vcmRlcl9ncmFwaC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBsZXQgc3ByZWFkID0gaGlnaGVzdCAtIGJ1eV9vcmRlcl9ncmFwaFtpXVswXQogICAgICAgICAgICBsZXQgaXRlbU51bSA9IGJ1eV9vcmRlcl9ncmFwaFtpXVsxXQogICAgICAgICAgICBsZXQgcmFuZ2VOdW0gPSBNYXRoLnRydW5jKHNwcmVhZCAvIHByaWNlUmFuZ2UpICsgMQogICAgICAgICAgICBpZiAocmFuZ2VOdW0gPiAzKSB7CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICB9CiAgICAgICAgICAgIGJ1eVByaWNlTWFwW3JhbmdlTnVtXSArPSAoaXRlbU51bSAtIHRtcCkKICAgICAgICAgICAgaWYgKChpdGVtTnVtIC0gdG1wKSA+PSA1ICYgc3RhYmxlQnV5UHJpY2UgPT09IDApIHsKICAgICAgICAgICAgICAgIHN0YWJsZUJ1eVByaWNlID0gYnV5X29yZGVyX2dyYXBoW2ldWzBdCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdG1wID0gaXRlbU51bQoKICAgICAgICB9CiAgICAgICAgaWYgKHN0YWJsZUJ1eVByaWNlICE9IDApIHsKICAgICAgICAgICAgJCgiI2luZm9saXN0IikuYXBwZW5kKCI8bGk+5pyA6auY56iz5a6a5pS26LSt5Lu35qC8OiIgKyBzdGFibGVCdXlQcmljZS50b1N0cmluZygpICsgIiDmr5Tkvos6PHN0cm9uZz4iICsgKHNpdGVwcmljZSAqIDEwMCAvIGNhbGNmZWUoc3RhYmxlQnV5UHJpY2UgKiAxMDApKS50b0ZpeGVkKDIpICsgIjwvc3Ryb25nPjwvbGk+IikKICAgICAgICB9CiAgICAgICAgbGV0IHNlbGxQcmljZU1hcCA9IHsxOiAwLCAyOiAwfQogICAgICAgIGxldCBzdGFibGVTZWxsUHJpY2UgPSAwCiAgICAgICAgbGV0IHNlbGxfb3JkZXJfZ3JhcGggPSBkYXRhLnNlbGxfb3JkZXJfZ3JhcGgKICAgICAgICB0bXAgPSAwCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxsX29yZGVyX2dyYXBoLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGxldCBzcHJlYWQgPSBzZWxsX29yZGVyX2dyYXBoW2ldWzBdIC0gbG93ZXN0CiAgICAgICAgICAgIGxldCBpdGVtTnVtID0gc2VsbF9vcmRlcl9ncmFwaFtpXVsxXQogICAgICAgICAgICBsZXQgcmFuZ2VOdW0gPSBNYXRoLnRydW5jKHNwcmVhZCAvIHByaWNlUmFuZ2UpICsgMQogICAgICAgICAgICBpZiAocmFuZ2VOdW0gPiAzKSB7CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICB9CiAgICAgICAgICAgIHNlbGxQcmljZU1hcFtyYW5nZU51bV0gKz0gKGl0ZW1OdW0gLSB0bXApCiAgICAgICAgICAgIGlmICgoaXRlbU51bSAtIHRtcCkgPj0gNSAmIHN0YWJsZVNlbGxQcmljZSA9PT0gMCkgewogICAgICAgICAgICAgICAgc3RhYmxlU2VsbFByaWNlID0gc2VsbF9vcmRlcl9ncmFwaFtpXVswXQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRtcCA9IGl0ZW1OdW0KCiAgICAgICAgfQogICAgICAgIGlmIChzdGFibGVTZWxsUHJpY2UgIT0gMCkgewogICAgICAgICAgICAkKCIjaW5mb2xpc3QiKS5hcHBlbmQoIjxsaT7mnIDkvY7nqLPlrprlh7rllK7ku7fmoLw6IiArIHN0YWJsZVNlbGxQcmljZS50b1N0cmluZygpICsgIiDmr5Tkvos6PHN0cm9uZz4iICsgKHNpdGVwcmljZSAqIDEwMCAvIGNhbGNmZWUoc3RhYmxlU2VsbFByaWNlICogMTAwKSkudG9GaXhlZCgyKSArICI8L3N0cm9uZz48L2xpPiIpCiAgICAgICAgfQoKCiAgICAgICAgaWYgKGhpZ2hSYXRpbyA+IDAuOCkgewogICAgICAgICAgICAvLyBpbmZvID0gaW5mbyArICI8bGkgY2xhc3M9J3JlZCc+5q+U5L6L6L+H5L2OPC9saT4iCiAgICAgICAgICAgICQoIiN3YXJubGlzdCIpLmFwcGVuZCgiPGxpIGNsYXNzPSdyZWQnPuavlOS+i+i/h+S9jjwvbGk+IikKICAgICAgICB9CgoKICAgICAgICBpZiAoYnV5X29yZGVyX2dyYXBoLmxlbmd0aCAhPT0gMCAmJiBidXlQcmljZU1hcFsxXSA8IDUpIHsKICAgICAgICAgICAgJCgiI3dhcm5saXN0IikuYXBwZW5kKCI8bGkgY2xhc3M9J3JlZCc+55uu5YmN5pyA6auY5pS26LSt5Lu35qC85Yy66Ze0KDUlKeS7heaciSIgKyBidXlQcmljZU1hcFsxXS50b1N0cmluZygpICsgIuS7tuivt+iwqOaFjui0reS5sDwvbGk+IikKICAgICAgICB9CgogICAgICAgIGlmIChzZWxsX29yZGVyX2dyYXBoLmxlbmd0aCAhPT0gMCAmJiBzZWxsUHJpY2VNYXBbMV0gPCA1KSB7CiAgICAgICAgICAgICQoIiN3YXJubGlzdCIpLmFwcGVuZCgiPGxpIGNsYXNzPSdyZWQnPuebruWJjeacgOS9juWHuuWUruS7t+agvOWMuumXtCg1JSnku4XmnIkiICsgc2VsbFByaWNlTWFwWzFdLnRvU3RyaW5nKCkgKyAi5Lu26K+36LCo5oWO6LSt5LmwPC9saT4iKQogICAgICAgIH0KCgogICAgfQoKCn0KCgpmdW5jdGlvbiBnZXRJdGVtVm9sdW1lKG1hcmtldFVybCwgb25Mb2FkLCBvbkVycm9yKSB7CiAgICBsZXQgb3JpTGluayA9IG1hcmtldFVybC5zcGxpdCgnLycpOwogICAgbGV0IGFwcGlkID0gb3JpTGlua1tvcmlMaW5rLmxlbmd0aCAtIDJdOwogICAgb3JpTGluayA9IG9yaUxpbmtbb3JpTGluay5sZW5ndGggLSAxXTsKICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgIHVybDogYGh0dHBzOi8vc3RlYW1jb21tdW5pdHkuY29tL21hcmtldC9wcmljZW92ZXJ2aWV3Lz9hcHBpZD0ke2FwcGlkfSZtYXJrZXRfaGFzaF9uYW1lPSR7b3JpTGlua31gLAogICAgICAgIHJlc3BvbnNlVHlwZTogImpzb24iLAogICAgICAgIHRpbWVvdXQ6IDUwMDAsCiAgICAgICAgb25sb2FkOiBvbkxvYWQsCiAgICAgICAgb250aW1lb3V0OiBvbkVycm9yLAogICAgICAgIG9uZXJyb3I6IG9uRXJyb3IKICAgIH0pOwp9CgpmdW5jdGlvbiBnb29kc0dldFByaWNlKHJlc3VsdCkgewogICAgcmVzdWx0ID0gcmVzdWx0LnJlc3BvbnNlOwogICAgaWYgKHJlc3VsdC52b2x1bWUpIHsKICAgICAgICB2b2x1bWVOdW0gPSBwYXJzZUludChyZXN1bHQudm9sdW1lLnJlcGxhY2UoL1wsID8vZ2ksICcnKSkKICAgIH0gZWxzZSB7CiAgICAgICAgdm9sdW1lTnVtID0gMAogICAgfQogICAgJCgiI3RyYWRlbnVtIikuaHRtbCgiMjTlsI/ml7blh7rllK7ph48gOjxzdHJvbmc+IiArIHZvbHVtZU51bS50b1N0cmluZygpICsgIjwvc3Ryb25nPiIpCiAgICBpZiAodm9sdW1lTnVtIDwgMTAwKSB7CiAgICAgICAgJCgiI3dhcm5saXN0IikuYXBwZW5kKCI8bGkgY2xhc3M9J3JlZCc+5q+P5pel6ZSA5ZSu6YeP6L+H5L2O6K+36LCo5oWO6LSt5LmwPC9saT4iKQogICAgfQoKfQoKCmZ1bmN0aW9uIGdldFByaWNlRGF0YShtYXJrZXRVcmwsIHByZWNlc3MsIG9uRXJyb3IpIHsKICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgbWV0aG9kOiAiR0VUIiwKICAgICAgICAgICAgdXJsOiBtYXJrZXRVcmwsCiAgICAgICAgICAgIHRpbWVvdXQ6IDUwMDAsCiAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coInJlcSBvayAiKQogICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCAmJiByZXMucmVzcG9uc2VUZXh0ICE9PSAibnVsbCIpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygicmVxICBzdGF0dXMgb2sgIikKICAgICAgICAgICAgICAgICAgICB2YXIgZ19zZXNzaW9uSUQKICAgICAgICAgICAgICAgICAgICB2YXIgZ19zdHJDb3VudHJ5Q29kZQogICAgICAgICAgICAgICAgICAgIHZhciBnX3N0ckxhbmd1YWdlCiAgICAgICAgICAgICAgICAgICAgdmFyIGdfd2FsbGV0Q3VycmVuY3kKCiAgICAgICAgICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgICAgICAgICBnX3Nlc3Npb25JRCA9IHJlcy5yZXNwb25zZVRleHQubWF0Y2goL2dfc2Vzc2lvbklEID0gIihbXiJdKykiLylbMV07CiAgICAgICAgICAgICAgICAgICAgICAgIGdfd2FsbGV0Q3VycmVuY3kgPSBwYXJzZUludChyZXMucmVzcG9uc2VUZXh0Lm1hdGNoKC8id2FsbGV0X2N1cnJlbmN5IjooXGQrKS8pWzFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ19zdHJMYW5ndWFnZSA9IHJlcy5yZXNwb25zZVRleHQubWF0Y2goL2dfc3RyTGFuZ3VhZ2UgPSAiKFteIl0rKSIvKVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgZ19zdHJDb3VudHJ5Q29kZSA9IHJlcy5yZXNwb25zZVRleHQubWF0Y2goL2dfc3RyQ291bnRyeUNvZGUgPSAiKFteIl0rKSIvKVsxXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY2F0Y2goZXJyKXsKICAgICAgICAgICAgICAgICAgICAgICAgZ19zdHJDb3VudHJ5Q29kZSA9ICJDTiIKICAgICAgICAgICAgICAgICAgICAgICAgZ19zdHJMYW5ndWFnZSA9ICJzY2hpbmVzZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIGdfd2FsbGV0Q3VycmVuY3kgPSAyMwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZWlkID0gcmVzLnJlc3BvbnNlVGV4dC5tYXRjaCgvTWFya2V0X0xvYWRPcmRlclNwcmVhZFwoIChcZCspLylbMV07CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMucmVzcG9uc2VUZXh0LmluZGV4T2YoJ21hcmtldF9saXN0aW5nX25hdl9jb250YWluZXInKSAhPSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RlYW14aigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDUwMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAiaHR0cHM6Ly9zdGVhbWNvbW11bml0eS5jb20vbWFya2V0L2l0ZW1vcmRlcnNoaXN0b2dyYW0/Y291bnRyeT1DTiZsYW5ndWFnZT1zY2hpbmVzZSZjdXJyZW5jeT0yMyZpdGVtX25hbWVpZD0iICsgbmFtZWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAianNvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IGRhdGEucmVzcG9uc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG9iagogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWNlc3MoZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9udGltZW91dDogb25FcnJvciwKICAgICAgICAgICAgb25lcnJvcjogb25FcnJvcgogICAgICAgIH0KICAgICkKfQoKZnVuY3Rpb24gc3RlYW1FcnJvcigpIHsKICAgICQoImRpdi5kZXRhaWwtc3VtbSIpLmFwcGVuZCgiPGgxPuaXoOazleiOt+WPlnN0ZWFt5biC5Zy65pWw5o2uIOWPr+iDveaYr+ivt+axgumikeeOh+i/h+mrmOaIluaXoOazlei/nuaOpXN0ZWFtPC9oMT4iKTsKfQoKCmZ1bmN0aW9uIGNhbGNmZWUocHJpY2UpIHsKICAgIGxldCBwID0gTWF0aC5yb3VuZChwcmljZSkKICAgIHZhciBwbm9mZWUgPSBNYXRoLm1heChNYXRoLmZsb29yKHAgLyAxLjE1KSwgMSk7CiAgICB2YXIgdmZlZSA9IE1hdGgubWF4KE1hdGguZmxvb3IocG5vZmVlICogMC4xKSwgMSk7CiAgICB2YXIgcGZlZSA9IE1hdGgubWF4KE1hdGguZmxvb3IocG5vZmVlICogMC4wNSksIDEpOwogICAgd2hpbGUgKChwbm9mZWUgKyB2ZmVlICsgcGZlZSkgIT0gcCkgewogICAgICAgIGlmICgocG5vZmVlICsgdmZlZSArIHBmZWUpID4gcCkgewogICAgICAgICAgICBwbm9mZWUtLTsKICAgICAgICB9CiAgICAgICAgaWYgKChwbm9mZWUgKyB2ZmVlICsgcGZlZSkgPCBwKSB7CiAgICAgICAgICAgIHBub2ZlZSsrOwogICAgICAgIH0KICAgICAgICB2ZmVlID0gTWF0aC5tYXgoTWF0aC5mbG9vcihwbm9mZWUgKiAwLjEpLCAxKTsKICAgICAgICBwZmVlID0gTWF0aC5tYXgoTWF0aC5mbG9vcihwbm9mZWUgKiAwLjA1KSwgMSk7CiAgICB9CiAgICByZXR1cm4gcG5vZmVlOwp9CgoKZnVuY3Rpb24gZ2V0RmxvYXQoc3RyKSB7CiAgICB0cnkgewogICAgICAgIHZhciBmID0gcGFyc2VGbG9hdChzdHIubWF0Y2goL1tcZF17MSx9KFwuXGQrKT8vKVswXSk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICByZXR1cm4gMDsKICAgIH0KICAgIHJldHVybiBmOwoKfQ==","requires":[{"meta":{"name":"jquery.min.js","url":"https://cdn.bootcss.com/jquery/2.2.4/jquery.min.js","ts":1608308910095,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2Mi4yLjQgfCAoYykgalF1ZXJ5IEZvdW5kYXRpb24gfCBqcXVlcnkub3JnL2xpY2Vuc2UgKi8KIWZ1bmN0aW9uKGEsYil7Im9iamVjdCI9PXR5cGVvZiBtb2R1bGUmJiJvYmplY3QiPT10eXBlb2YgbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YS5kb2N1bWVudD9iKGEsITApOmZ1bmN0aW9uKGEpe2lmKCFhLmRvY3VtZW50KXRocm93IG5ldyBFcnJvcigialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudCIpO3JldHVybiBiKGEpfTpiKGEpfSgidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcyxmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9YS5kb2N1bWVudCxlPWMuc2xpY2UsZj1jLmNvbmNhdCxnPWMucHVzaCxoPWMuaW5kZXhPZixpPXt9LGo9aS50b1N0cmluZyxrPWkuaGFzT3duUHJvcGVydHksbD17fSxtPSIyLjIuNCIsbj1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgbi5mbi5pbml0KGEsYil9LG89L15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nLHA9L14tbXMtLyxxPS8tKFtcZGEtel0pL2dpLHI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfTtuLmZuPW4ucHJvdG90eXBlPXtqcXVlcnk6bSxjb25zdHJ1Y3RvcjpuLHNlbGVjdG9yOiIiLGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gZS5jYWxsKHRoaXMpfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWE/MD5hP3RoaXNbYSt0aGlzLmxlbmd0aF06dGhpc1thXTplLmNhbGwodGhpcyl9LHB1c2hTdGFjazpmdW5jdGlvbihhKXt2YXIgYj1uLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxhKTtyZXR1cm4gYi5wcmV2T2JqZWN0PXRoaXMsYi5jb250ZXh0PXRoaXMuY29udGV4dCxifSxlYWNoOmZ1bmN0aW9uKGEpe3JldHVybiBuLmVhY2godGhpcyxhKX0sbWFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhuLm1hcCh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuY2FsbChiLGMsYil9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sZW5ndGgsYz0rYSsoMD5hP2I6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGM+PTAmJmI+Yz9bdGhpc1tjXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKCl9LHB1c2g6Zyxzb3J0OmMuc29ydCxzcGxpY2U6Yy5zcGxpY2V9LG4uZXh0ZW5kPW4uZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZSxmLGc9YXJndW1lbnRzWzBdfHx7fSxoPTEsaT1hcmd1bWVudHMubGVuZ3RoLGo9ITE7Zm9yKCJib29sZWFuIj09dHlwZW9mIGcmJihqPWcsZz1hcmd1bWVudHNbaF18fHt9LGgrKyksIm9iamVjdCI9PXR5cGVvZiBnfHxuLmlzRnVuY3Rpb24oZyl8fChnPXt9KSxoPT09aSYmKGc9dGhpcyxoLS0pO2k+aDtoKyspaWYobnVsbCE9KGE9YXJndW1lbnRzW2hdKSlmb3IoYiBpbiBhKWM9Z1tiXSxkPWFbYl0sZyE9PWQmJihqJiZkJiYobi5pc1BsYWluT2JqZWN0KGQpfHwoZT1uLmlzQXJyYXkoZCkpKT8oZT8oZT0hMSxmPWMmJm4uaXNBcnJheShjKT9jOltdKTpmPWMmJm4uaXNQbGFpbk9iamVjdChjKT9jOnt9LGdbYl09bi5leHRlbmQoaixmLGQpKTp2b2lkIDAhPT1kJiYoZ1tiXT1kKSk7cmV0dXJuIGd9LG4uZXh0ZW5kKHtleHBhbmRvOiJqUXVlcnkiKyhtK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLGlzUmVhZHk6ITAsZXJyb3I6ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKGEpfSxub29wOmZ1bmN0aW9uKCl7fSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiJmdW5jdGlvbiI9PT1uLnR5cGUoYSl9LGlzQXJyYXk6QXJyYXkuaXNBcnJheSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmYT09PWEud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oYSl7dmFyIGI9YSYmYS50b1N0cmluZygpO3JldHVybiFuLmlzQXJyYXkoYSkmJmItcGFyc2VGbG9hdChiKSsxPj0wfSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiO2lmKCJvYmplY3QiIT09bi50eXBlKGEpfHxhLm5vZGVUeXBlfHxuLmlzV2luZG93KGEpKXJldHVybiExO2lmKGEuY29uc3RydWN0b3ImJiFrLmNhbGwoYSwiY29uc3RydWN0b3IiKSYmIWsuY2FsbChhLmNvbnN0cnVjdG9yLnByb3RvdHlwZXx8e30sImlzUHJvdG90eXBlT2YiKSlyZXR1cm4hMTtmb3IoYiBpbiBhKTtyZXR1cm4gdm9pZCAwPT09Ynx8ay5jYWxsKGEsYil9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH0sdHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9hKyIiOiJvYmplY3QiPT10eXBlb2YgYXx8ImZ1bmN0aW9uIj09dHlwZW9mIGE/aVtqLmNhbGwoYSldfHwib2JqZWN0Ijp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihhKXt2YXIgYixjPWV2YWw7YT1uLnRyaW0oYSksYSYmKDE9PT1hLmluZGV4T2YoInVzZSBzdHJpY3QiKT8oYj1kLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpLGIudGV4dD1hLGQuaGVhZC5hcHBlbmRDaGlsZChiKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpKTpjKGEpKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UocCwibXMtIikucmVwbGFjZShxLHIpfSxub2RlTmFtZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1iLnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTA7aWYocyhhKSl7Zm9yKGM9YS5sZW5ndGg7Yz5kO2QrKylpZihiLmNhbGwoYVtkXSxkLGFbZF0pPT09ITEpYnJlYWt9ZWxzZSBmb3IoZCBpbiBhKWlmKGIuY2FsbChhW2RdLGQsYVtkXSk9PT0hMSlicmVhaztyZXR1cm4gYX0sdHJpbTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT8iIjooYSsiIikucmVwbGFjZShvLCIiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8W107cmV0dXJuIG51bGwhPWEmJihzKE9iamVjdChhKSk/bi5tZXJnZShjLCJzdHJpbmciPT10eXBlb2YgYT9bYV06YSk6Zy5jYWxsKGMsYSkpLGN9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBudWxsPT1iPy0xOmguY2FsbChiLGEsYyl9LG1lcmdlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPStiLmxlbmd0aCxkPTAsZT1hLmxlbmd0aDtjPmQ7ZCsrKWFbZSsrXT1iW2RdO3JldHVybiBhLmxlbmd0aD1lLGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCxlPVtdLGY9MCxnPWEubGVuZ3RoLGg9IWM7Zz5mO2YrKylkPSFiKGFbZl0sZiksZCE9PWgmJmUucHVzaChhW2ZdKTtyZXR1cm4gZX0sbWFwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGc9MCxoPVtdO2lmKHMoYSkpZm9yKGQ9YS5sZW5ndGg7ZD5nO2crKyllPWIoYVtnXSxnLGMpLG51bGwhPWUmJmgucHVzaChlKTtlbHNlIGZvcihnIGluIGEpZT1iKGFbZ10sZyxjKSxudWxsIT1lJiZoLnB1c2goZSk7cmV0dXJuIGYuYXBwbHkoW10saCl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZjtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGImJihjPWFbYl0sYj1hLGE9Yyksbi5pc0Z1bmN0aW9uKGEpPyhkPWUuY2FsbChhcmd1bWVudHMsMiksZj1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsZC5jb25jYXQoZS5jYWxsKGFyZ3VtZW50cykpKX0sZi5ndWlkPWEuZ3VpZD1hLmd1aWR8fG4uZ3VpZCsrLGYpOnZvaWQgMH0sbm93OkRhdGUubm93LHN1cHBvcnQ6bH0pLCJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJihuLmZuW1N5bWJvbC5pdGVyYXRvcl09Y1tTeW1ib2wuaXRlcmF0b3JdKSxuLmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGEsYil7aVsiW29iamVjdCAiK2IrIl0iXT1iLnRvTG93ZXJDYXNlKCl9KTtmdW5jdGlvbiBzKGEpe3ZhciBiPSEhYSYmImxlbmd0aCJpbiBhJiZhLmxlbmd0aCxjPW4udHlwZShhKTtyZXR1cm4iZnVuY3Rpb24iPT09Y3x8bi5pc1dpbmRvdyhhKT8hMToiYXJyYXkiPT09Y3x8MD09PWJ8fCJudW1iZXIiPT10eXBlb2YgYiYmYj4wJiZiLTEgaW4gYX12YXIgdD1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpLGosayxsLG0sbixvLHAscSxyLHMsdCx1PSJzaXp6bGUiKzEqbmV3IERhdGUsdj1hLmRvY3VtZW50LHc9MCx4PTAseT1nYSgpLHo9Z2EoKSxBPWdhKCksQj1mdW5jdGlvbihhLGIpe3JldHVybiBhPT09YiYmKGw9ITApLDB9LEM9MTw8MzEsRD17fS5oYXNPd25Qcm9wZXJ0eSxFPVtdLEY9RS5wb3AsRz1FLnB1c2gsSD1FLnB1c2gsST1FLnNsaWNlLEo9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspaWYoYVtjXT09PWIpcmV0dXJuIGM7cmV0dXJuLTF9LEs9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIixMPSJbXFx4MjBcXHRcXHJcXG5cXGZdIixNPSIoPzpcXFxcLnxbXFx3LV18W15cXHgwMC1cXHhhMF0pKyIsTj0iXFxbIitMKyIqKCIrTSsiKSg/OiIrTCsiKihbKl4kfCF+XT89KSIrTCsiKig/OicoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwifCgiK00rIikpfCkiK0wrIipcXF0iLE89IjooIitNKyIpKD86XFwoKCgnKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcIil8KCg/OlxcXFwufFteXFxcXCgpW1xcXV18IitOKyIpKil8LiopXFwpfCkiLFA9bmV3IFJlZ0V4cChMKyIrIiwiZyIpLFE9bmV3IFJlZ0V4cCgiXiIrTCsiK3woKD86XnxbXlxcXFxdKSg/OlxcXFwuKSopIitMKyIrJCIsImciKSxSPW5ldyBSZWdFeHAoIl4iK0wrIiosIitMKyIqIiksUz1uZXcgUmVnRXhwKCJeIitMKyIqKFs+K35dfCIrTCsiKSIrTCsiKiIpLFQ9bmV3IFJlZ0V4cCgiPSIrTCsiKihbXlxcXSdcIl0qPykiK0wrIipcXF0iLCJnIiksVT1uZXcgUmVnRXhwKE8pLFY9bmV3IFJlZ0V4cCgiXiIrTSsiJCIpLFc9e0lEOm5ldyBSZWdFeHAoIl4jKCIrTSsiKSIpLENMQVNTOm5ldyBSZWdFeHAoIl5cXC4oIitNKyIpIiksVEFHOm5ldyBSZWdFeHAoIl4oIitNKyJ8WypdKSIpLEFUVFI6bmV3IFJlZ0V4cCgiXiIrTiksUFNFVURPOm5ldyBSZWdFeHAoIl4iK08pLENISUxEOm5ldyBSZWdFeHAoIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcKCIrTCsiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIrTCsiKig/OihbKy1dfCkiK0wrIiooXFxkKyl8KSkiK0wrIipcXCl8KSIsImkiKSxib29sOm5ldyBSZWdFeHAoIl4oPzoiK0srIikkIiwiaSIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKCJeIitMKyIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiK0wrIiooKD86LVxcZCk/XFxkKikiK0wrIipcXCl8KSg/PVteLV18JCkiLCJpIil9LFg9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxZPS9eaFxkJC9pLFo9L15bXntdK1x7XHMqXFtuYXRpdmUgXHcvLCQ9L14oPzojKFtcdy1dKyl8KFx3Kyl8XC4oW1x3LV0rKSkkLyxfPS9bK35dLyxhYT0vJ3xcXC9nLGJhPW5ldyBSZWdFeHAoIlxcXFwoW1xcZGEtZl17MSw2fSIrTCsiP3woIitMKyIpfC4pIiwiaWciKSxjYT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9IjB4IitiLTY1NTM2O3JldHVybiBkIT09ZHx8Yz9iOjA+ZD9TdHJpbmcuZnJvbUNoYXJDb2RlKGQrNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUoZD4+MTB8NTUyOTYsMTAyMyZkfDU2MzIwKX0sZGE9ZnVuY3Rpb24oKXttKCl9O3RyeXtILmFwcGx5KEU9SS5jYWxsKHYuY2hpbGROb2Rlcyksdi5jaGlsZE5vZGVzKSxFW3YuY2hpbGROb2Rlcy5sZW5ndGhdLm5vZGVUeXBlfWNhdGNoKGVhKXtIPXthcHBseTpFLmxlbmd0aD9mdW5jdGlvbihhLGIpe0cuYXBwbHkoYSxJLmNhbGwoYikpfTpmdW5jdGlvbihhLGIpe3ZhciBjPWEubGVuZ3RoLGQ9MDt3aGlsZShhW2MrK109YltkKytdKTthLmxlbmd0aD1jLTF9fX1mdW5jdGlvbiBmYShhLGIsZCxlKXt2YXIgZixoLGosayxsLG8scixzLHc9YiYmYi5vd25lckRvY3VtZW50LHg9Yj9iLm5vZGVUeXBlOjk7aWYoZD1kfHxbXSwic3RyaW5nIiE9dHlwZW9mIGF8fCFhfHwxIT09eCYmOSE9PXgmJjExIT09eClyZXR1cm4gZDtpZighZSYmKChiP2Iub3duZXJEb2N1bWVudHx8Yjp2KSE9PW4mJm0oYiksYj1ifHxuLHApKXtpZigxMSE9PXgmJihvPSQuZXhlYyhhKSkpaWYoZj1vWzFdKXtpZig5PT09eCl7aWYoIShqPWIuZ2V0RWxlbWVudEJ5SWQoZikpKXJldHVybiBkO2lmKGouaWQ9PT1mKXJldHVybiBkLnB1c2goaiksZH1lbHNlIGlmKHcmJihqPXcuZ2V0RWxlbWVudEJ5SWQoZikpJiZ0KGIsaikmJmouaWQ9PT1mKXJldHVybiBkLnB1c2goaiksZH1lbHNle2lmKG9bMl0pcmV0dXJuIEguYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpKSxkO2lmKChmPW9bM10pJiZjLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gSC5hcHBseShkLGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShmKSksZH1pZihjLnFzYSYmIUFbYSsiICJdJiYoIXF8fCFxLnRlc3QoYSkpKXtpZigxIT09eCl3PWIscz1hO2Vsc2UgaWYoIm9iamVjdCIhPT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpeyhrPWIuZ2V0QXR0cmlidXRlKCJpZCIpKT9rPWsucmVwbGFjZShhYSwiXFwkJiIpOmIuc2V0QXR0cmlidXRlKCJpZCIsaz11KSxyPWcoYSksaD1yLmxlbmd0aCxsPVYudGVzdChrKT8iIyIrazoiW2lkPSciK2srIiddIjt3aGlsZShoLS0pcltoXT1sKyIgIitxYShyW2hdKTtzPXIuam9pbigiLCIpLHc9Xy50ZXN0KGEpJiZvYShiLnBhcmVudE5vZGUpfHxifWlmKHMpdHJ5e3JldHVybiBILmFwcGx5KGQsdy5xdWVyeVNlbGVjdG9yQWxsKHMpKSxkfWNhdGNoKHkpe31maW5hbGx5e2s9PT11JiZiLnJlbW92ZUF0dHJpYnV0ZSgiaWQiKX19fXJldHVybiBpKGEucmVwbGFjZShRLCIkMSIpLGIsZCxlKX1mdW5jdGlvbiBnYSgpe3ZhciBhPVtdO2Z1bmN0aW9uIGIoYyxlKXtyZXR1cm4gYS5wdXNoKGMrIiAiKT5kLmNhY2hlTGVuZ3RoJiZkZWxldGUgYlthLnNoaWZ0KCldLGJbYysiICJdPWV9cmV0dXJuIGJ9ZnVuY3Rpb24gaGEoYSl7cmV0dXJuIGFbdV09ITAsYX1mdW5jdGlvbiBpYShhKXt2YXIgYj1uLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RyeXtyZXR1cm4hIWEoYil9Y2F0Y2goYyl7cmV0dXJuITF9ZmluYWxseXtiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSxiPW51bGx9fWZ1bmN0aW9uIGphKGEsYil7dmFyIGM9YS5zcGxpdCgifCIpLGU9Yy5sZW5ndGg7d2hpbGUoZS0tKWQuYXR0ckhhbmRsZVtjW2VdXT1ifWZ1bmN0aW9uIGthKGEsYil7dmFyIGM9YiYmYSxkPWMmJjE9PT1hLm5vZGVUeXBlJiYxPT09Yi5ub2RlVHlwZSYmKH5iLnNvdXJjZUluZGV4fHxDKS0ofmEuc291cmNlSW5kZXh8fEMpO2lmKGQpcmV0dXJuIGQ7aWYoYyl3aGlsZShjPWMubmV4dFNpYmxpbmcpaWYoYz09PWIpcmV0dXJuLTE7cmV0dXJuIGE/MTotMX1mdW5jdGlvbiBsYShhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT1jJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBtYShhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybigiaW5wdXQiPT09Y3x8ImJ1dHRvbiI9PT1jKSYmYi50eXBlPT09YX19ZnVuY3Rpb24gbmEoYSl7cmV0dXJuIGhhKGZ1bmN0aW9uKGIpe3JldHVybiBiPStiLGhhKGZ1bmN0aW9uKGMsZCl7dmFyIGUsZj1hKFtdLGMubGVuZ3RoLGIpLGc9Zi5sZW5ndGg7d2hpbGUoZy0tKWNbZT1mW2ddXSYmKGNbZV09IShkW2VdPWNbZV0pKX0pfSl9ZnVuY3Rpb24gb2EoYSl7cmV0dXJuIGEmJiJ1bmRlZmluZWQiIT10eXBlb2YgYS5nZXRFbGVtZW50c0J5VGFnTmFtZSYmYX1jPWZhLnN1cHBvcnQ9e30sZj1mYS5pc1hNTD1mdW5jdGlvbihhKXt2YXIgYj1hJiYoYS5vd25lckRvY3VtZW50fHxhKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIGI/IkhUTUwiIT09Yi5ub2RlTmFtZTohMX0sbT1mYS5zZXREb2N1bWVudD1mdW5jdGlvbihhKXt2YXIgYixlLGc9YT9hLm93bmVyRG9jdW1lbnR8fGE6djtyZXR1cm4gZyE9PW4mJjk9PT1nLm5vZGVUeXBlJiZnLmRvY3VtZW50RWxlbWVudD8obj1nLG89bi5kb2N1bWVudEVsZW1lbnQscD0hZihuKSwoZT1uLmRlZmF1bHRWaWV3KSYmZS50b3AhPT1lJiYoZS5hZGRFdmVudExpc3RlbmVyP2UuYWRkRXZlbnRMaXN0ZW5lcigidW5sb2FkIixkYSwhMSk6ZS5hdHRhY2hFdmVudCYmZS5hdHRhY2hFdmVudCgib251bmxvYWQiLGRhKSksYy5hdHRyaWJ1dGVzPWlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmNsYXNzTmFtZT0iaSIsIWEuZ2V0QXR0cmlidXRlKCJjbGFzc05hbWUiKX0pLGMuZ2V0RWxlbWVudHNCeVRhZ05hbWU9aWEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuYXBwZW5kQ2hpbGQobi5jcmVhdGVDb21tZW50KCIiKSksIWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGh9KSxjLmdldEVsZW1lbnRzQnlDbGFzc05hbWU9Wi50ZXN0KG4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSksYy5nZXRCeUlkPWlhKGZ1bmN0aW9uKGEpe3JldHVybiBvLmFwcGVuZENoaWxkKGEpLmlkPXUsIW4uZ2V0RWxlbWVudHNCeU5hbWV8fCFuLmdldEVsZW1lbnRzQnlOYW1lKHUpLmxlbmd0aH0pLGMuZ2V0QnlJZD8oZC5maW5kLklEPWZ1bmN0aW9uKGEsYil7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBiLmdldEVsZW1lbnRCeUlkJiZwKXt2YXIgYz1iLmdldEVsZW1lbnRCeUlkKGEpO3JldHVybiBjP1tjXTpbXX19LGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZSgiaWQiKT09PWJ9fSk6KGRlbGV0ZSBkLmZpbmQuSUQsZC5maWx0ZXIuSUQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGJhLGNhKTtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9InVuZGVmaW5lZCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZU5vZGUmJmEuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gYyYmYy52YWx1ZT09PWJ9fSksZC5maW5kLlRBRz1jLmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGEsYil7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlUYWdOYW1lP2IuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk6Yy5xc2E/Yi5xdWVyeVNlbGVjdG9yQWxsKGEpOnZvaWQgMH06ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9MCxmPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk7aWYoIioiPT09YSl7d2hpbGUoYz1mW2UrK10pMT09PWMubm9kZVR5cGUmJmQucHVzaChjKTtyZXR1cm4gZH1yZXR1cm4gZn0sZC5maW5kLkNMQVNTPWMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oYSxiKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmcD9iLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYSk6dm9pZCAwfSxyPVtdLHE9W10sKGMucXNhPVoudGVzdChuLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGlhKGZ1bmN0aW9uKGEpe28uYXBwZW5kQ2hpbGQoYSkuaW5uZXJIVE1MPSI8YSBpZD0nIit1KyInPjwvYT48c2VsZWN0IGlkPSciK3UrIi1cclxcJyBtc2FsbG93Y2FwdHVyZT0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PiIsYS5xdWVyeVNlbGVjdG9yQWxsKCJbbXNhbGxvd2NhcHR1cmVePScnXSIpLmxlbmd0aCYmcS5wdXNoKCJbKl4kXT0iK0wrIiooPzonJ3xcIlwiKSIpLGEucXVlcnlTZWxlY3RvckFsbCgiW3NlbGVjdGVkXSIpLmxlbmd0aHx8cS5wdXNoKCJcXFsiK0wrIiooPzp2YWx1ZXwiK0srIikiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIltpZH49Iit1KyItXSIpLmxlbmd0aHx8cS5wdXNoKCJ+PSIpLGEucXVlcnlTZWxlY3RvckFsbCgiOmNoZWNrZWQiKS5sZW5ndGh8fHEucHVzaCgiOmNoZWNrZWQiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoImEjIit1KyIrKiIpLmxlbmd0aHx8cS5wdXNoKCIuIy4rWyt+XSIpfSksaWEoZnVuY3Rpb24oYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2Iuc2V0QXR0cmlidXRlKCJ0eXBlIiwiaGlkZGVuIiksYS5hcHBlbmRDaGlsZChiKS5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJEIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJbbmFtZT1kXSIpLmxlbmd0aCYmcS5wdXNoKCJuYW1lIitMKyIqWypeJHwhfl0/PSIpLGEucXVlcnlTZWxlY3RvckFsbCgiOmVuYWJsZWQiKS5sZW5ndGh8fHEucHVzaCgiOmVuYWJsZWQiLCI6ZGlzYWJsZWQiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIiosOngiKSxxLnB1c2goIiwuKjoiKX0pKSwoYy5tYXRjaGVzU2VsZWN0b3I9Wi50ZXN0KHM9by5tYXRjaGVzfHxvLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8by5tb3pNYXRjaGVzU2VsZWN0b3J8fG8ub01hdGNoZXNTZWxlY3Rvcnx8by5tc01hdGNoZXNTZWxlY3RvcikpJiZpYShmdW5jdGlvbihhKXtjLmRpc2Nvbm5lY3RlZE1hdGNoPXMuY2FsbChhLCJkaXYiKSxzLmNhbGwoYSwiW3MhPScnXTp4Iiksci5wdXNoKCIhPSIsTyl9KSxxPXEubGVuZ3RoJiZuZXcgUmVnRXhwKHEuam9pbigifCIpKSxyPXIubGVuZ3RoJiZuZXcgUmVnRXhwKHIuam9pbigifCIpKSxiPVoudGVzdChvLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSx0PWJ8fFoudGVzdChvLmNvbnRhaW5zKT9mdW5jdGlvbihhLGIpe3ZhciBjPTk9PT1hLm5vZGVUeXBlP2EuZG9jdW1lbnRFbGVtZW50OmEsZD1iJiZiLnBhcmVudE5vZGU7cmV0dXJuIGE9PT1kfHwhKCFkfHwxIT09ZC5ub2RlVHlwZXx8IShjLmNvbnRhaW5zP2MuY29udGFpbnMoZCk6YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihkKSkpfTpmdW5jdGlvbihhLGIpe2lmKGIpd2hpbGUoYj1iLnBhcmVudE5vZGUpaWYoYj09PWEpcmV0dXJuITA7cmV0dXJuITF9LEI9Yj9mdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGQ9IWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24tIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247cmV0dXJuIGQ/ZDooZD0oYS5vd25lckRvY3VtZW50fHxhKT09PShiLm93bmVyRG9jdW1lbnR8fGIpP2EuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYik6MSwxJmR8fCFjLnNvcnREZXRhY2hlZCYmYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihhKT09PWQ/YT09PW58fGEub3duZXJEb2N1bWVudD09PXYmJnQodixhKT8tMTpiPT09bnx8Yi5vd25lckRvY3VtZW50PT09diYmdCh2LGIpPzE6az9KKGssYSktSihrLGIpOjA6NCZkPy0xOjEpfTpmdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGMsZD0wLGU9YS5wYXJlbnROb2RlLGY9Yi5wYXJlbnROb2RlLGc9W2FdLGg9W2JdO2lmKCFlfHwhZilyZXR1cm4gYT09PW4/LTE6Yj09PW4/MTplPy0xOmY/MTprP0ooayxhKS1KKGssYik6MDtpZihlPT09ZilyZXR1cm4ga2EoYSxiKTtjPWE7d2hpbGUoYz1jLnBhcmVudE5vZGUpZy51bnNoaWZ0KGMpO2M9Yjt3aGlsZShjPWMucGFyZW50Tm9kZSloLnVuc2hpZnQoYyk7d2hpbGUoZ1tkXT09PWhbZF0pZCsrO3JldHVybiBkP2thKGdbZF0saFtkXSk6Z1tkXT09PXY/LTE6aFtkXT09PXY/MTowfSxuKTpufSxmYS5tYXRjaGVzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGZhKGEsbnVsbCxudWxsLGIpfSxmYS5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oYSxiKXtpZigoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksYj1iLnJlcGxhY2UoVCwiPSckMSddIiksYy5tYXRjaGVzU2VsZWN0b3ImJnAmJiFBW2IrIiAiXSYmKCFyfHwhci50ZXN0KGIpKSYmKCFxfHwhcS50ZXN0KGIpKSl0cnl7dmFyIGQ9cy5jYWxsKGEsYik7aWYoZHx8Yy5kaXNjb25uZWN0ZWRNYXRjaHx8YS5kb2N1bWVudCYmMTEhPT1hLmRvY3VtZW50Lm5vZGVUeXBlKXJldHVybiBkfWNhdGNoKGUpe31yZXR1cm4gZmEoYixuLG51bGwsW2FdKS5sZW5ndGg+MH0sZmEuY29udGFpbnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksdChhLGIpfSxmYS5hdHRyPWZ1bmN0aW9uKGEsYil7KGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpO3ZhciBlPWQuYXR0ckhhbmRsZVtiLnRvTG93ZXJDYXNlKCldLGY9ZSYmRC5jYWxsKGQuYXR0ckhhbmRsZSxiLnRvTG93ZXJDYXNlKCkpP2UoYSxiLCFwKTp2b2lkIDA7cmV0dXJuIHZvaWQgMCE9PWY/ZjpjLmF0dHJpYnV0ZXN8fCFwP2EuZ2V0QXR0cmlidXRlKGIpOihmPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmYuc3BlY2lmaWVkP2YudmFsdWU6bnVsbH0sZmEuZXJyb3I9ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiAiK2EpfSxmYS51bmlxdWVTb3J0PWZ1bmN0aW9uKGEpe3ZhciBiLGQ9W10sZT0wLGY9MDtpZihsPSFjLmRldGVjdER1cGxpY2F0ZXMsaz0hYy5zb3J0U3RhYmxlJiZhLnNsaWNlKDApLGEuc29ydChCKSxsKXt3aGlsZShiPWFbZisrXSliPT09YVtmXSYmKGU9ZC5wdXNoKGYpKTt3aGlsZShlLS0pYS5zcGxpY2UoZFtlXSwxKX1yZXR1cm4gaz1udWxsLGF9LGU9ZmEuZ2V0VGV4dD1mdW5jdGlvbihhKXt2YXIgYixjPSIiLGQ9MCxmPWEubm9kZVR5cGU7aWYoZil7aWYoMT09PWZ8fDk9PT1mfHwxMT09PWYpe2lmKCJzdHJpbmciPT10eXBlb2YgYS50ZXh0Q29udGVudClyZXR1cm4gYS50ZXh0Q29udGVudDtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpYys9ZShhKX1lbHNlIGlmKDM9PT1mfHw0PT09ZilyZXR1cm4gYS5ub2RlVmFsdWV9ZWxzZSB3aGlsZShiPWFbZCsrXSljKz1lKGIpO3JldHVybiBjfSxkPWZhLnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOmhhLG1hdGNoOlcsYXR0ckhhbmRsZTp7fSxmaW5kOnt9LHJlbGF0aXZlOnsiPiI6e2RpcjoicGFyZW50Tm9kZSIsZmlyc3Q6ITB9LCIgIjp7ZGlyOiJwYXJlbnROb2RlIn0sIisiOntkaXI6InByZXZpb3VzU2libGluZyIsZmlyc3Q6ITB9LCJ+Ijp7ZGlyOiJwcmV2aW91c1NpYmxpbmcifX0scHJlRmlsdGVyOntBVFRSOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0ucmVwbGFjZShiYSxjYSksYVszXT0oYVszXXx8YVs0XXx8YVs1XXx8IiIpLnJlcGxhY2UoYmEsY2EpLCJ+PSI9PT1hWzJdJiYoYVszXT0iICIrYVszXSsiICIpLGEuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS50b0xvd2VyQ2FzZSgpLCJudGgiPT09YVsxXS5zbGljZSgwLDMpPyhhWzNdfHxmYS5lcnJvcihhWzBdKSxhWzRdPSsoYVs0XT9hWzVdKyhhWzZdfHwxKToyKigiZXZlbiI9PT1hWzNdfHwib2RkIj09PWFbM10pKSxhWzVdPSsoYVs3XSthWzhdfHwib2RkIj09PWFbM10pKTphWzNdJiZmYS5lcnJvcihhWzBdKSxhfSxQU0VVRE86ZnVuY3Rpb24oYSl7dmFyIGIsYz0hYVs2XSYmYVsyXTtyZXR1cm4gVy5DSElMRC50ZXN0KGFbMF0pP251bGw6KGFbM10/YVsyXT1hWzRdfHxhWzVdfHwiIjpjJiZVLnRlc3QoYykmJihiPWcoYywhMCkpJiYoYj1jLmluZGV4T2YoIikiLGMubGVuZ3RoLWIpLWMubGVuZ3RoKSYmKGFbMF09YVswXS5zbGljZSgwLGIpLGFbMl09Yy5zbGljZSgwLGIpKSxhLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGJhLGNhKS50b0xvd2VyQ2FzZSgpO3JldHVybiIqIj09PWE/ZnVuY3Rpb24oKXtyZXR1cm4hMH06ZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWJ9fSxDTEFTUzpmdW5jdGlvbihhKXt2YXIgYj15W2ErIiAiXTtyZXR1cm4gYnx8KGI9bmV3IFJlZ0V4cCgiKF58IitMKyIpIithKyIoIitMKyJ8JCkiKSkmJnkoYSxmdW5jdGlvbihhKXtyZXR1cm4gYi50ZXN0KCJzdHJpbmciPT10eXBlb2YgYS5jbGFzc05hbWUmJmEuY2xhc3NOYW1lfHwidW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0QXR0cmlidXRlJiZhLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpfSl9LEFUVFI6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXt2YXIgZT1mYS5hdHRyKGQsYSk7cmV0dXJuIG51bGw9PWU/IiE9Ij09PWI6Yj8oZSs9IiIsIj0iPT09Yj9lPT09YzoiIT0iPT09Yj9lIT09YzoiXj0iPT09Yj9jJiYwPT09ZS5pbmRleE9mKGMpOiIqPSI9PT1iP2MmJmUuaW5kZXhPZihjKT4tMToiJD0iPT09Yj9jJiZlLnNsaWNlKC1jLmxlbmd0aCk9PT1jOiJ+PSI9PT1iPygiICIrZS5yZXBsYWNlKFAsIiAiKSsiICIpLmluZGV4T2YoYyk+LTE6Inw9Ij09PWI/ZT09PWN8fGUuc2xpY2UoMCxjLmxlbmd0aCsxKT09PWMrIi0iOiExKTohMH19LENISUxEOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9Im50aCIhPT1hLnNsaWNlKDAsMyksZz0ibGFzdCIhPT1hLnNsaWNlKC00KSxoPSJvZi10eXBlIj09PWI7cmV0dXJuIDE9PT1kJiYwPT09ZT9mdW5jdGlvbihhKXtyZXR1cm4hIWEucGFyZW50Tm9kZX06ZnVuY3Rpb24oYixjLGkpe3ZhciBqLGssbCxtLG4sbyxwPWYhPT1nPyJuZXh0U2libGluZyI6InByZXZpb3VzU2libGluZyIscT1iLnBhcmVudE5vZGUscj1oJiZiLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkscz0haSYmIWgsdD0hMTtpZihxKXtpZihmKXt3aGlsZShwKXttPWI7d2hpbGUobT1tW3BdKWlmKGg/bS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bS5ub2RlVHlwZSlyZXR1cm4hMTtvPXA9Im9ubHkiPT09YSYmIW8mJiJuZXh0U2libGluZyJ9cmV0dXJuITB9aWYobz1bZz9xLmZpcnN0Q2hpbGQ6cS5sYXN0Q2hpbGRdLGcmJnMpe209cSxsPW1bdV18fChtW3VdPXt9KSxrPWxbbS51bmlxdWVJRF18fChsW20udW5pcXVlSURdPXt9KSxqPWtbYV18fFtdLG49alswXT09PXcmJmpbMV0sdD1uJiZqWzJdLG09biYmcS5jaGlsZE5vZGVzW25dO3doaWxlKG09KytuJiZtJiZtW3BdfHwodD1uPTApfHxvLnBvcCgpKWlmKDE9PT1tLm5vZGVUeXBlJiYrK3QmJm09PT1iKXtrW2FdPVt3LG4sdF07YnJlYWt9fWVsc2UgaWYocyYmKG09YixsPW1bdV18fChtW3VdPXt9KSxrPWxbbS51bmlxdWVJRF18fChsW20udW5pcXVlSURdPXt9KSxqPWtbYV18fFtdLG49alswXT09PXcmJmpbMV0sdD1uKSx0PT09ITEpd2hpbGUobT0rK24mJm0mJm1bcF18fCh0PW49MCl8fG8ucG9wKCkpaWYoKGg/bS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bS5ub2RlVHlwZSkmJisrdCYmKHMmJihsPW1bdV18fChtW3VdPXt9KSxrPWxbbS51bmlxdWVJRF18fChsW20udW5pcXVlSURdPXt9KSxrW2FdPVt3LHRdKSxtPT09YikpYnJlYWs7cmV0dXJuIHQtPWUsdD09PWR8fHQlZD09PTAmJnQvZD49MH19fSxQU0VVRE86ZnVuY3Rpb24oYSxiKXt2YXIgYyxlPWQucHNldWRvc1thXXx8ZC5zZXRGaWx0ZXJzW2EudG9Mb3dlckNhc2UoKV18fGZhLmVycm9yKCJ1bnN1cHBvcnRlZCBwc2V1ZG86ICIrYSk7cmV0dXJuIGVbdV0/ZShiKTplLmxlbmd0aD4xPyhjPVthLGEsIiIsYl0sZC5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGEudG9Mb3dlckNhc2UoKSk/aGEoZnVuY3Rpb24oYSxjKXt2YXIgZCxmPWUoYSxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSlkPUooYSxmW2ddKSxhW2RdPSEoY1tkXT1mW2ddKX0pOmZ1bmN0aW9uKGEpe3JldHVybiBlKGEsMCxjKX0pOmV9fSxwc2V1ZG9zOntub3Q6aGEoZnVuY3Rpb24oYSl7dmFyIGI9W10sYz1bXSxkPWgoYS5yZXBsYWNlKFEsIiQxIikpO3JldHVybiBkW3VdP2hhKGZ1bmN0aW9uKGEsYixjLGUpe3ZhciBmLGc9ZChhLG51bGwsZSxbXSksaD1hLmxlbmd0aDt3aGlsZShoLS0pKGY9Z1toXSkmJihhW2hdPSEoYltoXT1mKSl9KTpmdW5jdGlvbihhLGUsZil7cmV0dXJuIGJbMF09YSxkKGIsbnVsbCxmLGMpLGJbMF09bnVsbCwhYy5wb3AoKX19KSxoYXM6aGEoZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBmYShhLGIpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBhPWEucmVwbGFjZShiYSxjYSksZnVuY3Rpb24oYil7cmV0dXJuKGIudGV4dENvbnRlbnR8fGIuaW5uZXJUZXh0fHxlKGIpKS5pbmRleE9mKGEpPi0xfX0pLGxhbmc6aGEoZnVuY3Rpb24oYSl7cmV0dXJuIFYudGVzdChhfHwiIil8fGZhLmVycm9yKCJ1bnN1cHBvcnRlZCBsYW5nOiAiK2EpLGE9YS5yZXBsYWNlKGJhLGNhKS50b0xvd2VyQ2FzZSgpLGZ1bmN0aW9uKGIpe3ZhciBjO2RvIGlmKGM9cD9iLmxhbmc6Yi5nZXRBdHRyaWJ1dGUoInhtbDpsYW5nIil8fGIuZ2V0QXR0cmlidXRlKCJsYW5nIikpcmV0dXJuIGM9Yy50b0xvd2VyQ2FzZSgpLGM9PT1hfHwwPT09Yy5pbmRleE9mKGErIi0iKTt3aGlsZSgoYj1iLnBhcmVudE5vZGUpJiYxPT09Yi5ub2RlVHlwZSk7cmV0dXJuITF9fSksdGFyZ2V0OmZ1bmN0aW9uKGIpe3ZhciBjPWEubG9jYXRpb24mJmEubG9jYXRpb24uaGFzaDtyZXR1cm4gYyYmYy5zbGljZSgxKT09PWIuaWR9LHJvb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1vfSxmb2N1czpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW4uYWN0aXZlRWxlbWVudCYmKCFuLmhhc0ZvY3VzfHxuLmhhc0ZvY3VzKCkpJiYhIShhLnR5cGV8fGEuaHJlZnx8fmEudGFiSW5kZXgpfSxlbmFibGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc2FibGVkPT09ITF9LGRpc2FibGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc2FibGVkPT09ITB9LGNoZWNrZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT1iJiYhIWEuY2hlY2tlZHx8Im9wdGlvbiI9PT1iJiYhIWEuc2VsZWN0ZWR9LHNlbGVjdGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LGEuc2VsZWN0ZWQ9PT0hMH0sZW1wdHk6ZnVuY3Rpb24oYSl7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWlmKGEubm9kZVR5cGU8NilyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybiFkLnBzZXVkb3MuZW1wdHkoYSl9LGhlYWRlcjpmdW5jdGlvbihhKXtyZXR1cm4gWS50ZXN0KGEubm9kZU5hbWUpfSxpbnB1dDpmdW5jdGlvbihhKXtyZXR1cm4gWC50ZXN0KGEubm9kZU5hbWUpfSxidXR0b246ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT1iJiYiYnV0dG9uIj09PWEudHlwZXx8ImJ1dHRvbiI9PT1ifSx0ZXh0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiJpbnB1dCI9PT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJiJ0ZXh0Ij09PWEudHlwZSYmKG51bGw9PShiPWEuZ2V0QXR0cmlidXRlKCJ0eXBlIikpfHwidGV4dCI9PT1iLnRvTG93ZXJDYXNlKCkpfSxmaXJzdDpuYShmdW5jdGlvbigpe3JldHVyblswXX0pLGxhc3Q6bmEoZnVuY3Rpb24oYSxiKXtyZXR1cm5bYi0xXX0pLGVxOm5hKGZ1bmN0aW9uKGEsYixjKXtyZXR1cm5bMD5jP2MrYjpjXX0pLGV2ZW46bmEoZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtiPmM7Yys9MilhLnB1c2goYyk7cmV0dXJuIGF9KSxvZGQ6bmEoZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MTtiPmM7Yys9MilhLnB1c2goYyk7cmV0dXJuIGF9KSxsdDpuYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzstLWQ+PTA7KWEucHVzaChkKTtyZXR1cm4gYX0pLGd0Om5hKGZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MD5jP2MrYjpjOysrZDxiOylhLnB1c2goZCk7cmV0dXJuIGF9KX19LGQucHNldWRvcy5udGg9ZC5wc2V1ZG9zLmVxO2ZvcihiIGlue3JhZGlvOiEwLGNoZWNrYm94OiEwLGZpbGU6ITAscGFzc3dvcmQ6ITAsaW1hZ2U6ITB9KWQucHNldWRvc1tiXT1sYShiKTtmb3IoYiBpbntzdWJtaXQ6ITAscmVzZXQ6ITB9KWQucHNldWRvc1tiXT1tYShiKTtmdW5jdGlvbiBwYSgpe31wYS5wcm90b3R5cGU9ZC5maWx0ZXJzPWQucHNldWRvcyxkLnNldEZpbHRlcnM9bmV3IHBhLGc9ZmEudG9rZW5pemU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGYsZyxoLGksaixrPXpbYSsiICJdO2lmKGspcmV0dXJuIGI/MDprLnNsaWNlKDApO2g9YSxpPVtdLGo9ZC5wcmVGaWx0ZXI7d2hpbGUoaCl7YyYmIShlPVIuZXhlYyhoKSl8fChlJiYoaD1oLnNsaWNlKGVbMF0ubGVuZ3RoKXx8aCksaS5wdXNoKGY9W10pKSxjPSExLChlPVMuZXhlYyhoKSkmJihjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTplWzBdLnJlcGxhY2UoUSwiICIpfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7Zm9yKGcgaW4gZC5maWx0ZXIpIShlPVdbZ10uZXhlYyhoKSl8fGpbZ10mJiEoZT1qW2ddKGUpKXx8KGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmcsbWF0Y2hlczplfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7aWYoIWMpYnJlYWt9cmV0dXJuIGI/aC5sZW5ndGg6aD9mYS5lcnJvcihhKTp6KGEsaSkuc2xpY2UoMCl9O2Z1bmN0aW9uIHFhKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGgsZD0iIjtjPmI7YisrKWQrPWFbYl0udmFsdWU7cmV0dXJuIGR9ZnVuY3Rpb24gcmEoYSxiLGMpe3ZhciBkPWIuZGlyLGU9YyYmInBhcmVudE5vZGUiPT09ZCxmPXgrKztyZXR1cm4gYi5maXJzdD9mdW5jdGlvbihiLGMsZil7d2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxlKXJldHVybiBhKGIsYyxmKX06ZnVuY3Rpb24oYixjLGcpe3ZhciBoLGksaixrPVt3LGZdO2lmKGcpe3doaWxlKGI9YltkXSlpZigoMT09PWIubm9kZVR5cGV8fGUpJiZhKGIsYyxnKSlyZXR1cm4hMH1lbHNlIHdoaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSl7aWYoaj1iW3VdfHwoYlt1XT17fSksaT1qW2IudW5pcXVlSURdfHwoaltiLnVuaXF1ZUlEXT17fSksKGg9aVtkXSkmJmhbMF09PT13JiZoWzFdPT09ZilyZXR1cm4ga1syXT1oWzJdO2lmKGlbZF09ayxrWzJdPWEoYixjLGcpKXJldHVybiEwfX19ZnVuY3Rpb24gc2EoYSl7cmV0dXJuIGEubGVuZ3RoPjE/ZnVuY3Rpb24oYixjLGQpe3ZhciBlPWEubGVuZ3RoO3doaWxlKGUtLSlpZighYVtlXShiLGMsZCkpcmV0dXJuITE7cmV0dXJuITB9OmFbMF19ZnVuY3Rpb24gdGEoYSxiLGMpe2Zvcih2YXIgZD0wLGU9Yi5sZW5ndGg7ZT5kO2QrKylmYShhLGJbZF0sYyk7cmV0dXJuIGN9ZnVuY3Rpb24gdWEoYSxiLGMsZCxlKXtmb3IodmFyIGYsZz1bXSxoPTAsaT1hLmxlbmd0aCxqPW51bGwhPWI7aT5oO2grKykoZj1hW2hdKSYmKGMmJiFjKGYsZCxlKXx8KGcucHVzaChmKSxqJiZiLnB1c2goaCkpKTtyZXR1cm4gZ31mdW5jdGlvbiB2YShhLGIsYyxkLGUsZil7cmV0dXJuIGQmJiFkW3VdJiYoZD12YShkKSksZSYmIWVbdV0mJihlPXZhKGUsZikpLGhhKGZ1bmN0aW9uKGYsZyxoLGkpe3ZhciBqLGssbCxtPVtdLG49W10sbz1nLmxlbmd0aCxwPWZ8fHRhKGJ8fCIqIixoLm5vZGVUeXBlP1toXTpoLFtdKSxxPSFhfHwhZiYmYj9wOnVhKHAsbSxhLGgsaSkscj1jP2V8fChmP2E6b3x8ZCk/W106ZzpxO2lmKGMmJmMocSxyLGgsaSksZCl7aj11YShyLG4pLGQoaixbXSxoLGkpLGs9ai5sZW5ndGg7d2hpbGUoay0tKShsPWpba10pJiYocltuW2tdXT0hKHFbbltrXV09bCkpfWlmKGYpe2lmKGV8fGEpe2lmKGUpe2o9W10saz1yLmxlbmd0aDt3aGlsZShrLS0pKGw9cltrXSkmJmoucHVzaChxW2tdPWwpO2UobnVsbCxyPVtdLGosaSl9az1yLmxlbmd0aDt3aGlsZShrLS0pKGw9cltrXSkmJihqPWU/SihmLGwpOm1ba10pPi0xJiYoZltqXT0hKGdbal09bCkpfX1lbHNlIHI9dWEocj09PWc/ci5zcGxpY2UobyxyLmxlbmd0aCk6ciksZT9lKG51bGwsZyxyLGkpOkguYXBwbHkoZyxyKX0pfWZ1bmN0aW9uIHdhKGEpe2Zvcih2YXIgYixjLGUsZj1hLmxlbmd0aCxnPWQucmVsYXRpdmVbYVswXS50eXBlXSxoPWd8fGQucmVsYXRpdmVbIiAiXSxpPWc/MTowLGs9cmEoZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1ifSxoLCEwKSxsPXJhKGZ1bmN0aW9uKGEpe3JldHVybiBKKGIsYSk+LTF9LGgsITApLG09W2Z1bmN0aW9uKGEsYyxkKXt2YXIgZT0hZyYmKGR8fGMhPT1qKXx8KChiPWMpLm5vZGVUeXBlP2soYSxjLGQpOmwoYSxjLGQpKTtyZXR1cm4gYj1udWxsLGV9XTtmPmk7aSsrKWlmKGM9ZC5yZWxhdGl2ZVthW2ldLnR5cGVdKW09W3JhKHNhKG0pLGMpXTtlbHNle2lmKGM9ZC5maWx0ZXJbYVtpXS50eXBlXS5hcHBseShudWxsLGFbaV0ubWF0Y2hlcyksY1t1XSl7Zm9yKGU9KytpO2Y+ZTtlKyspaWYoZC5yZWxhdGl2ZVthW2VdLnR5cGVdKWJyZWFrO3JldHVybiB2YShpPjEmJnNhKG0pLGk+MSYmcWEoYS5zbGljZSgwLGktMSkuY29uY2F0KHt2YWx1ZToiICI9PT1hW2ktMl0udHlwZT8iKiI6IiJ9KSkucmVwbGFjZShRLCIkMSIpLGMsZT5pJiZ3YShhLnNsaWNlKGksZSkpLGY+ZSYmd2EoYT1hLnNsaWNlKGUpKSxmPmUmJnFhKGEpKX1tLnB1c2goYyl9cmV0dXJuIHNhKG0pfWZ1bmN0aW9uIHhhKGEsYil7dmFyIGM9Yi5sZW5ndGg+MCxlPWEubGVuZ3RoPjAsZj1mdW5jdGlvbihmLGcsaCxpLGspe3ZhciBsLG8scSxyPTAscz0iMCIsdD1mJiZbXSx1PVtdLHY9aix4PWZ8fGUmJmQuZmluZC5UQUcoIioiLGspLHk9dys9bnVsbD09dj8xOk1hdGgucmFuZG9tKCl8fC4xLHo9eC5sZW5ndGg7Zm9yKGsmJihqPWc9PT1ufHxnfHxrKTtzIT09eiYmbnVsbCE9KGw9eFtzXSk7cysrKXtpZihlJiZsKXtvPTAsZ3x8bC5vd25lckRvY3VtZW50PT09bnx8KG0obCksaD0hcCk7d2hpbGUocT1hW28rK10paWYocShsLGd8fG4saCkpe2kucHVzaChsKTticmVha31rJiYodz15KX1jJiYoKGw9IXEmJmwpJiZyLS0sZiYmdC5wdXNoKGwpKX1pZihyKz1zLGMmJnMhPT1yKXtvPTA7d2hpbGUocT1iW28rK10pcSh0LHUsZyxoKTtpZihmKXtpZihyPjApd2hpbGUocy0tKXRbc118fHVbc118fCh1W3NdPUYuY2FsbChpKSk7dT11YSh1KX1ILmFwcGx5KGksdSksayYmIWYmJnUubGVuZ3RoPjAmJnIrYi5sZW5ndGg+MSYmZmEudW5pcXVlU29ydChpKX1yZXR1cm4gayYmKHc9eSxqPXYpLHR9O3JldHVybiBjP2hhKGYpOmZ9cmV0dXJuIGg9ZmEuY29tcGlsZT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1bXSxmPUFbYSsiICJdO2lmKCFmKXtifHwoYj1nKGEpKSxjPWIubGVuZ3RoO3doaWxlKGMtLSlmPXdhKGJbY10pLGZbdV0/ZC5wdXNoKGYpOmUucHVzaChmKTtmPUEoYSx4YShlLGQpKSxmLnNlbGVjdG9yPWF9cmV0dXJuIGZ9LGk9ZmEuc2VsZWN0PWZ1bmN0aW9uKGEsYixlLGYpe3ZhciBpLGosayxsLG0sbj0iZnVuY3Rpb24iPT10eXBlb2YgYSYmYSxvPSFmJiZnKGE9bi5zZWxlY3Rvcnx8YSk7aWYoZT1lfHxbXSwxPT09by5sZW5ndGgpe2lmKGo9b1swXT1vWzBdLnNsaWNlKDApLGoubGVuZ3RoPjImJiJJRCI9PT0oaz1qWzBdKS50eXBlJiZjLmdldEJ5SWQmJjk9PT1iLm5vZGVUeXBlJiZwJiZkLnJlbGF0aXZlW2pbMV0udHlwZV0pe2lmKGI9KGQuZmluZC5JRChrLm1hdGNoZXNbMF0ucmVwbGFjZShiYSxjYSksYil8fFtdKVswXSwhYilyZXR1cm4gZTtuJiYoYj1iLnBhcmVudE5vZGUpLGE9YS5zbGljZShqLnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1pPVcubmVlZHNDb250ZXh0LnRlc3QoYSk/MDpqLmxlbmd0aDt3aGlsZShpLS0pe2lmKGs9altpXSxkLnJlbGF0aXZlW2w9ay50eXBlXSlicmVhaztpZigobT1kLmZpbmRbbF0pJiYoZj1tKGsubWF0Y2hlc1swXS5yZXBsYWNlKGJhLGNhKSxfLnRlc3QoalswXS50eXBlKSYmb2EoYi5wYXJlbnROb2RlKXx8YikpKXtpZihqLnNwbGljZShpLDEpLGE9Zi5sZW5ndGgmJnFhKGopLCFhKXJldHVybiBILmFwcGx5KGUsZiksZTticmVha319fXJldHVybihufHxoKGEsbykpKGYsYiwhcCxlLCFifHxfLnRlc3QoYSkmJm9hKGIucGFyZW50Tm9kZSl8fGIpLGV9LGMuc29ydFN0YWJsZT11LnNwbGl0KCIiKS5zb3J0KEIpLmpvaW4oIiIpPT09dSxjLmRldGVjdER1cGxpY2F0ZXM9ISFsLG0oKSxjLnNvcnREZXRhY2hlZD1pYShmdW5jdGlvbihhKXtyZXR1cm4gMSZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKG4uY3JlYXRlRWxlbWVudCgiZGl2IikpfSksaWEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPSI8YSBocmVmPScjJz48L2E+IiwiIyI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIil9KXx8amEoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYz92b2lkIDA6YS5nZXRBdHRyaWJ1dGUoYiwidHlwZSI9PT1iLnRvTG93ZXJDYXNlKCk/MToyKX0pLGMuYXR0cmlidXRlcyYmaWEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPSI8aW5wdXQvPiIsYS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSwiIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoInZhbHVlIil9KXx8amEoInZhbHVlIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGN8fCJpbnB1dCIhPT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk/dm9pZCAwOmEuZGVmYXVsdFZhbHVlfSksaWEoZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWEuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpfSl8fGphKEssZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBjP3ZvaWQgMDphW2JdPT09ITA/Yi50b0xvd2VyQ2FzZSgpOihkPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmQuc3BlY2lmaWVkP2QudmFsdWU6bnVsbH0pLGZhfShhKTtuLmZpbmQ9dCxuLmV4cHI9dC5zZWxlY3RvcnMsbi5leHByWyI6Il09bi5leHByLnBzZXVkb3Msbi51bmlxdWVTb3J0PW4udW5pcXVlPXQudW5pcXVlU29ydCxuLnRleHQ9dC5nZXRUZXh0LG4uaXNYTUxEb2M9dC5pc1hNTCxuLmNvbnRhaW5zPXQuY29udGFpbnM7dmFyIHU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9dm9pZCAwIT09Yzt3aGlsZSgoYT1hW2JdKSYmOSE9PWEubm9kZVR5cGUpaWYoMT09PWEubm9kZVR5cGUpe2lmKGUmJm4oYSkuaXMoYykpYnJlYWs7ZC5wdXNoKGEpfXJldHVybiBkfSx2PWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdO2E7YT1hLm5leHRTaWJsaW5nKTE9PT1hLm5vZGVUeXBlJiZhIT09YiYmYy5wdXNoKGEpO3JldHVybiBjfSx3PW4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQseD0vXjwoW1x3LV0rKVxzKlwvPz4oPzo8XC9cMT58KSQvLHk9L14uW146I1xbXC4sXSokLztmdW5jdGlvbiB6KGEsYixjKXtpZihuLmlzRnVuY3Rpb24oYikpcmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEsZCl7cmV0dXJuISFiLmNhbGwoYSxkLGEpIT09Y30pO2lmKGIubm9kZVR5cGUpcmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBhPT09YiE9PWN9KTtpZigic3RyaW5nIj09dHlwZW9mIGIpe2lmKHkudGVzdChiKSlyZXR1cm4gbi5maWx0ZXIoYixhLGMpO2I9bi5maWx0ZXIoYixhKX1yZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGguY2FsbChiLGEpPi0xIT09Y30pfW4uZmlsdGVyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1iWzBdO3JldHVybiBjJiYoYT0iOm5vdCgiK2ErIikiKSwxPT09Yi5sZW5ndGgmJjE9PT1kLm5vZGVUeXBlP24uZmluZC5tYXRjaGVzU2VsZWN0b3IoZCxhKT9bZF06W106bi5maW5kLm1hdGNoZXMoYSxuLmdyZXAoYixmdW5jdGlvbihhKXtyZXR1cm4gMT09PWEubm9kZVR5cGV9KSl9LG4uZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5sZW5ndGgsZD1bXSxlPXRoaXM7aWYoInN0cmluZyIhPXR5cGVvZiBhKXJldHVybiB0aGlzLnB1c2hTdGFjayhuKGEpLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7Yz5iO2IrKylpZihuLmNvbnRhaW5zKGVbYl0sdGhpcykpcmV0dXJuITB9KSk7Zm9yKGI9MDtjPmI7YisrKW4uZmluZChhLGVbYl0sZCk7cmV0dXJuIGQ9dGhpcy5wdXNoU3RhY2soYz4xP24udW5pcXVlKGQpOmQpLGQuc2VsZWN0b3I9dGhpcy5zZWxlY3Rvcj90aGlzLnNlbGVjdG9yKyIgIithOmEsZH0sZmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh6KHRoaXMsYXx8W10sITEpKX0sbm90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh6KHRoaXMsYXx8W10sITApKX0saXM6ZnVuY3Rpb24oYSl7cmV0dXJuISF6KHRoaXMsInN0cmluZyI9PXR5cGVvZiBhJiZ3LnRlc3QoYSk/bihhKTphfHxbXSwhMSkubGVuZ3RofX0pO3ZhciBBLEI9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0qKSkkLyxDPW4uZm4uaW5pdD1mdW5jdGlvbihhLGIsYyl7dmFyIGUsZjtpZighYSlyZXR1cm4gdGhpcztpZihjPWN8fEEsInN0cmluZyI9PXR5cGVvZiBhKXtpZihlPSI8Ij09PWFbMF0mJiI+Ij09PWFbYS5sZW5ndGgtMV0mJmEubGVuZ3RoPj0zP1tudWxsLGEsbnVsbF06Qi5leGVjKGEpLCFlfHwhZVsxXSYmYilyZXR1cm4hYnx8Yi5qcXVlcnk/KGJ8fGMpLmZpbmQoYSk6dGhpcy5jb25zdHJ1Y3RvcihiKS5maW5kKGEpO2lmKGVbMV0pe2lmKGI9YiBpbnN0YW5jZW9mIG4/YlswXTpiLG4ubWVyZ2UodGhpcyxuLnBhcnNlSFRNTChlWzFdLGImJmIubm9kZVR5cGU/Yi5vd25lckRvY3VtZW50fHxiOmQsITApKSx4LnRlc3QoZVsxXSkmJm4uaXNQbGFpbk9iamVjdChiKSlmb3IoZSBpbiBiKW4uaXNGdW5jdGlvbih0aGlzW2VdKT90aGlzW2VdKGJbZV0pOnRoaXMuYXR0cihlLGJbZV0pO3JldHVybiB0aGlzfXJldHVybiBmPWQuZ2V0RWxlbWVudEJ5SWQoZVsyXSksZiYmZi5wYXJlbnROb2RlJiYodGhpcy5sZW5ndGg9MSx0aGlzWzBdPWYpLHRoaXMuY29udGV4dD1kLHRoaXMuc2VsZWN0b3I9YSx0aGlzfXJldHVybiBhLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6bi5pc0Z1bmN0aW9uKGEpP3ZvaWQgMCE9PWMucmVhZHk/Yy5yZWFkeShhKTphKG4pOih2b2lkIDAhPT1hLnNlbGVjdG9yJiYodGhpcy5zZWxlY3Rvcj1hLnNlbGVjdG9yLHRoaXMuY29udGV4dD1hLmNvbnRleHQpLG4ubWFrZUFycmF5KGEsdGhpcykpfTtDLnByb3RvdHlwZT1uLmZuLEE9bihkKTt2YXIgRD0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxFPXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O24uZm4uZXh0ZW5kKHtoYXM6ZnVuY3Rpb24oYSl7dmFyIGI9bihhLHRoaXMpLGM9Yi5sZW5ndGg7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7Yz5hO2ErKylpZihuLmNvbnRhaW5zKHRoaXMsYlthXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT10aGlzLmxlbmd0aCxmPVtdLGc9dy50ZXN0KGEpfHwic3RyaW5nIiE9dHlwZW9mIGE/bihhLGJ8fHRoaXMuY29udGV4dCk6MDtlPmQ7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmbi5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP24udW5pcXVlU29ydChmKTpmKX0saW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/InN0cmluZyI9PXR5cGVvZiBhP2guY2FsbChuKGEpLHRoaXNbMF0pOmguY2FsbCh0aGlzLGEuanF1ZXJ5P2FbMF06YSk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobi51bmlxdWVTb3J0KG4ubWVyZ2UodGhpcy5nZXQoKSxuKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEYoYSxiKXt3aGlsZSgoYT1hW2JdKSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW4uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gdShhLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHUoYSwicGFyZW50Tm9kZSIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEYoYSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihhKXtyZXR1cm4gRihhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihhKXtyZXR1cm4gdShhLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiB1KGEsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB1KGEsIm5leHRTaWJsaW5nIixjKX0scHJldlVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdShhLCJwcmV2aW91c1NpYmxpbmciLGMpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4gdigoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIHYoYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29udGVudERvY3VtZW50fHxuLm1lcmdlKFtdLGEuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYyxkKXt2YXIgZT1uLm1hcCh0aGlzLGIsYyk7cmV0dXJuIlVudGlsIiE9PWEuc2xpY2UoLTUpJiYoZD1jKSxkJiYic3RyaW5nIj09dHlwZW9mIGQmJihlPW4uZmlsdGVyKGQsZSkpLHRoaXMubGVuZ3RoPjEmJihFW2FdfHxuLnVuaXF1ZVNvcnQoZSksRC50ZXN0KGEpJiZlLnJldmVyc2UoKSksdGhpcy5wdXNoU3RhY2soZSl9fSk7dmFyIEc9L1xTKy9nO2Z1bmN0aW9uIEgoYSl7dmFyIGI9e307cmV0dXJuIG4uZWFjaChhLm1hdGNoKEcpfHxbXSxmdW5jdGlvbihhLGMpe2JbY109ITB9KSxifW4uQ2FsbGJhY2tzPWZ1bmN0aW9uKGEpe2E9InN0cmluZyI9PXR5cGVvZiBhP0goYSk6bi5leHRlbmQoe30sYSk7dmFyIGIsYyxkLGUsZj1bXSxnPVtdLGg9LTEsaT1mdW5jdGlvbigpe2ZvcihlPWEub25jZSxkPWI9ITA7Zy5sZW5ndGg7aD0tMSl7Yz1nLnNoaWZ0KCk7d2hpbGUoKytoPGYubGVuZ3RoKWZbaF0uYXBwbHkoY1swXSxjWzFdKT09PSExJiZhLnN0b3BPbkZhbHNlJiYoaD1mLmxlbmd0aCxjPSExKX1hLm1lbW9yeXx8KGM9ITEpLGI9ITEsZSYmKGY9Yz9bXToiIil9LGo9e2FkZDpmdW5jdGlvbigpe3JldHVybiBmJiYoYyYmIWImJihoPWYubGVuZ3RoLTEsZy5wdXNoKGMpKSxmdW5jdGlvbiBkKGIpe24uZWFjaChiLGZ1bmN0aW9uKGIsYyl7bi5pc0Z1bmN0aW9uKGMpP2EudW5pcXVlJiZqLmhhcyhjKXx8Zi5wdXNoKGMpOmMmJmMubGVuZ3RoJiYic3RyaW5nIiE9PW4udHlwZShjKSYmZChjKX0pfShhcmd1bWVudHMpLGMmJiFiJiZpKCkpLHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiBuLmVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKGEsYil7dmFyIGM7d2hpbGUoKGM9bi5pbkFycmF5KGIsZixjKSk+LTEpZi5zcGxpY2UoYywxKSxoPj1jJiZoLS19KSx0aGlzfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/bi5pbkFycmF5KGEsZik+LTE6Zi5sZW5ndGg+MH0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gZiYmKGY9W10pLHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gZT1nPVtdLGY9Yz0iIix0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFmfSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGU9Zz1bXSxjfHwoZj1jPSIiKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWV9LGZpcmVXaXRoOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGV8fChjPWN8fFtdLGM9W2EsYy5zbGljZT9jLnNsaWNlKCk6Y10sZy5wdXNoKGMpLGJ8fGkoKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBqLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZH19O3JldHVybiBqfSxuLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9W1sicmVzb2x2ZSIsImRvbmUiLG4uQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCJyZXNvbHZlZCJdLFsicmVqZWN0IiwiZmFpbCIsbi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlamVjdGVkIl0sWyJub3RpZnkiLCJwcm9ncmVzcyIsbi5DYWxsYmFja3MoIm1lbW9yeSIpXV0sYz0icGVuZGluZyIsZD17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gY30sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiBuLkRlZmVycmVkKGZ1bmN0aW9uKGMpe24uZWFjaChiLGZ1bmN0aW9uKGIsZil7dmFyIGc9bi5pc0Z1bmN0aW9uKGFbYl0pJiZhW2JdO2VbZlsxXV0oZnVuY3Rpb24oKXt2YXIgYT1nJiZnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthJiZuLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9hLnByb21pc2UoKS5wcm9ncmVzcyhjLm5vdGlmeSkuZG9uZShjLnJlc29sdmUpLmZhaWwoYy5yZWplY3QpOmNbZlswXSsiV2l0aCJdKHRoaXM9PT1kP2MucHJvbWlzZSgpOnRoaXMsZz9bYV06YXJndW1lbnRzKX0pfSksYT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hP24uZXh0ZW5kKGEsZCk6ZH19LGU9e307cmV0dXJuIGQucGlwZT1kLnRoZW4sbi5lYWNoKGIsZnVuY3Rpb24oYSxmKXt2YXIgZz1mWzJdLGg9ZlszXTtkW2ZbMV1dPWcuYWRkLGgmJmcuYWRkKGZ1bmN0aW9uKCl7Yz1ofSxiWzFeYV1bMl0uZGlzYWJsZSxiWzJdWzJdLmxvY2spLGVbZlswXV09ZnVuY3Rpb24oKXtyZXR1cm4gZVtmWzBdKyJXaXRoIl0odGhpcz09PWU/ZDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZVtmWzBdKyJXaXRoIl09Zy5maXJlV2l0aH0pLGQucHJvbWlzZShlKSxhJiZhLmNhbGwoZSxlKSxlfSx3aGVuOmZ1bmN0aW9uKGEpe3ZhciBiPTAsYz1lLmNhbGwoYXJndW1lbnRzKSxkPWMubGVuZ3RoLGY9MSE9PWR8fGEmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2Q6MCxnPTE9PT1mP2E6bi5EZWZlcnJlZCgpLGg9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtiW2FdPXRoaXMsY1thXT1hcmd1bWVudHMubGVuZ3RoPjE/ZS5jYWxsKGFyZ3VtZW50cyk6ZCxjPT09aT9nLm5vdGlmeVdpdGgoYixjKTotLWZ8fGcucmVzb2x2ZVdpdGgoYixjKX19LGksaixrO2lmKGQ+MSlmb3IoaT1uZXcgQXJyYXkoZCksaj1uZXcgQXJyYXkoZCksaz1uZXcgQXJyYXkoZCk7ZD5iO2IrKyljW2JdJiZuLmlzRnVuY3Rpb24oY1tiXS5wcm9taXNlKT9jW2JdLnByb21pc2UoKS5wcm9ncmVzcyhoKGIsaixpKSkuZG9uZShoKGIsayxjKSkuZmFpbChnLnJlamVjdCk6LS1mO3JldHVybiBmfHxnLnJlc29sdmVXaXRoKGssYyksZy5wcm9taXNlKCl9fSk7dmFyIEk7bi5mbi5yZWFkeT1mdW5jdGlvbihhKXtyZXR1cm4gbi5yZWFkeS5wcm9taXNlKCkuZG9uZShhKSx0aGlzfSxuLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oYSl7YT9uLnJlYWR5V2FpdCsrOm4ucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihhKXsoYT09PSEwPy0tbi5yZWFkeVdhaXQ6bi5pc1JlYWR5KXx8KG4uaXNSZWFkeT0hMCxhIT09ITAmJi0tbi5yZWFkeVdhaXQ+MHx8KEkucmVzb2x2ZVdpdGgoZCxbbl0pLG4uZm4udHJpZ2dlckhhbmRsZXImJihuKGQpLnRyaWdnZXJIYW5kbGVyKCJyZWFkeSIpLG4oZCkub2ZmKCJyZWFkeSIpKSkpfX0pO2Z1bmN0aW9uIEooKXtkLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLEopLGEucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsSiksbi5yZWFkeSgpfW4ucmVhZHkucHJvbWlzZT1mdW5jdGlvbihiKXtyZXR1cm4gSXx8KEk9bi5EZWZlcnJlZCgpLCJjb21wbGV0ZSI9PT1kLnJlYWR5U3RhdGV8fCJsb2FkaW5nIiE9PWQucmVhZHlTdGF0ZSYmIWQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsP2Euc2V0VGltZW91dChuLnJlYWR5KTooZC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixKKSxhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLEopKSksSS5wcm9taXNlKGIpfSxuLnJlYWR5LnByb21pc2UoKTt2YXIgSz1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXt2YXIgaD0wLGk9YS5sZW5ndGgsaj1udWxsPT1jO2lmKCJvYmplY3QiPT09bi50eXBlKGMpKXtlPSEwO2ZvcihoIGluIGMpSyhhLGIsaCxjW2hdLCEwLGYsZyl9ZWxzZSBpZih2b2lkIDAhPT1kJiYoZT0hMCxuLmlzRnVuY3Rpb24oZCl8fChnPSEwKSxqJiYoZz8oYi5jYWxsKGEsZCksYj1udWxsKTooaj1iLGI9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBqLmNhbGwobihhKSxjKX0pKSxiKSlmb3IoO2k+aDtoKyspYihhW2hdLGMsZz9kOmQuY2FsbChhW2hdLGgsYihhW2hdLGMpKSk7cmV0dXJuIGU/YTpqP2IuY2FsbChhKTppP2IoYVswXSxjKTpmfSxMPWZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZXx8OT09PWEubm9kZVR5cGV8fCErYS5ub2RlVHlwZX07ZnVuY3Rpb24gTSgpe3RoaXMuZXhwYW5kbz1uLmV4cGFuZG8rTS51aWQrK31NLnVpZD0xLE0ucHJvdG90eXBlPXtyZWdpc3RlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWJ8fHt9O3JldHVybiBhLm5vZGVUeXBlP2FbdGhpcy5leHBhbmRvXT1jOk9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLHRoaXMuZXhwYW5kbyx7dmFsdWU6Yyx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxhW3RoaXMuZXhwYW5kb119LGNhY2hlOmZ1bmN0aW9uKGEpe2lmKCFMKGEpKXJldHVybnt9O3ZhciBiPWFbdGhpcy5leHBhbmRvXTtyZXR1cm4gYnx8KGI9e30sTChhKSYmKGEubm9kZVR5cGU/YVt0aGlzLmV4cGFuZG9dPWI6T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsdGhpcy5leHBhbmRvLHt2YWx1ZTpiLGNvbmZpZ3VyYWJsZTohMH0pKSksYn0sc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPXRoaXMuY2FjaGUoYSk7aWYoInN0cmluZyI9PXR5cGVvZiBiKWVbYl09YztlbHNlIGZvcihkIGluIGIpZVtkXT1iW2RdO3JldHVybiBlfSxnZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdm9pZCAwPT09Yj90aGlzLmNhY2hlKGEpOmFbdGhpcy5leHBhbmRvXSYmYVt0aGlzLmV4cGFuZG9dW2JdfSxhY2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiB2b2lkIDA9PT1ifHxiJiYic3RyaW5nIj09dHlwZW9mIGImJnZvaWQgMD09PWM/KGQ9dGhpcy5nZXQoYSxiKSx2b2lkIDAhPT1kP2Q6dGhpcy5nZXQoYSxuLmNhbWVsQ2FzZShiKSkpOih0aGlzLnNldChhLGIsYyksdm9pZCAwIT09Yz9jOmIpfSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj1hW3RoaXMuZXhwYW5kb107aWYodm9pZCAwIT09Zil7aWYodm9pZCAwPT09Yil0aGlzLnJlZ2lzdGVyKGEpO2Vsc2V7bi5pc0FycmF5KGIpP2Q9Yi5jb25jYXQoYi5tYXAobi5jYW1lbENhc2UpKTooZT1uLmNhbWVsQ2FzZShiKSxiIGluIGY/ZD1bYixlXTooZD1lLGQ9ZCBpbiBmP1tkXTpkLm1hdGNoKEcpfHxbXSkpLGM9ZC5sZW5ndGg7d2hpbGUoYy0tKWRlbGV0ZSBmW2RbY11dfSh2b2lkIDA9PT1ifHxuLmlzRW1wdHlPYmplY3QoZikpJiYoYS5ub2RlVHlwZT9hW3RoaXMuZXhwYW5kb109dm9pZCAwOmRlbGV0ZSBhW3RoaXMuZXhwYW5kb10pfX0saGFzRGF0YTpmdW5jdGlvbihhKXt2YXIgYj1hW3RoaXMuZXhwYW5kb107cmV0dXJuIHZvaWQgMCE9PWImJiFuLmlzRW1wdHlPYmplY3QoYil9fTt2YXIgTj1uZXcgTSxPPW5ldyBNLFA9L14oPzpce1tcd1xXXSpcfXxcW1tcd1xXXSpcXSkkLyxRPS9bQS1aXS9nO2Z1bmN0aW9uIFIoYSxiLGMpe3ZhciBkO2lmKHZvaWQgMD09PWMmJjE9PT1hLm5vZGVUeXBlKWlmKGQ9ImRhdGEtIitiLnJlcGxhY2UoUSwiLSQmIikudG9Mb3dlckNhc2UoKSxjPWEuZ2V0QXR0cmlidXRlKGQpLCJzdHJpbmciPT10eXBlb2YgYyl7dHJ5e2M9InRydWUiPT09Yz8hMDoiZmFsc2UiPT09Yz8hMToibnVsbCI9PT1jP251bGw6K2MrIiI9PT1jPytjOlAudGVzdChjKT9uLnBhcnNlSlNPTihjKTpjOwp9Y2F0Y2goZSl7fU8uc2V0KGEsYixjKX1lbHNlIGM9dm9pZCAwO3JldHVybiBjfW4uZXh0ZW5kKHtoYXNEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBPLmhhc0RhdGEoYSl8fE4uaGFzRGF0YShhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIE8uYWNjZXNzKGEsYixjKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe08ucmVtb3ZlKGEsYil9LF9kYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTi5hY2Nlc3MoYSxiLGMpfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe04ucmVtb3ZlKGEsYil9fSksbi5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzWzBdLGc9ZiYmZi5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PWEpe2lmKHRoaXMubGVuZ3RoJiYoZT1PLmdldChmKSwxPT09Zi5ub2RlVHlwZSYmIU4uZ2V0KGYsImhhc0RhdGFBdHRycyIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoImRhdGEtIikmJihkPW4uY2FtZWxDYXNlKGQuc2xpY2UoNSkpLFIoZixkLGVbZF0pKSk7Ti5zZXQoZiwiaGFzRGF0YUF0dHJzIiwhMCl9cmV0dXJuIGV9cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBhP3RoaXMuZWFjaChmdW5jdGlvbigpe08uc2V0KHRoaXMsYSl9KTpLKHRoaXMsZnVuY3Rpb24oYil7dmFyIGMsZDtpZihmJiZ2b2lkIDA9PT1iKXtpZihjPU8uZ2V0KGYsYSl8fE8uZ2V0KGYsYS5yZXBsYWNlKFEsIi0kJiIpLnRvTG93ZXJDYXNlKCkpLHZvaWQgMCE9PWMpcmV0dXJuIGM7aWYoZD1uLmNhbWVsQ2FzZShhKSxjPU8uZ2V0KGYsZCksdm9pZCAwIT09YylyZXR1cm4gYztpZihjPVIoZixkLHZvaWQgMCksdm9pZCAwIT09YylyZXR1cm4gY31lbHNlIGQ9bi5jYW1lbENhc2UoYSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9Ty5nZXQodGhpcyxkKTtPLnNldCh0aGlzLGQsYiksYS5pbmRleE9mKCItIik+LTEmJnZvaWQgMCE9PWMmJk8uc2V0KHRoaXMsYSxiKX0pfSxudWxsLGIsYXJndW1lbnRzLmxlbmd0aD4xLG51bGwsITApfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtPLnJlbW92ZSh0aGlzLGEpfSl9fSksbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYT8oYj0oYnx8ImZ4IikrInF1ZXVlIixkPU4uZ2V0KGEsYiksYyYmKCFkfHxuLmlzQXJyYXkoYyk/ZD1OLmFjY2VzcyhhLGIsbi5tYWtlQXJyYXkoYykpOmQucHVzaChjKSksZHx8W10pOnZvaWQgMH0sZGVxdWV1ZTpmdW5jdGlvbihhLGIpe2I9Ynx8ImZ4Ijt2YXIgYz1uLnF1ZXVlKGEsYiksZD1jLmxlbmd0aCxlPWMuc2hpZnQoKSxmPW4uX3F1ZXVlSG9va3MoYSxiKSxnPWZ1bmN0aW9uKCl7bi5kZXF1ZXVlKGEsYil9OyJpbnByb2dyZXNzIj09PWUmJihlPWMuc2hpZnQoKSxkLS0pLGUmJigiZngiPT09YiYmYy51bnNoaWZ0KCJpbnByb2dyZXNzIiksZGVsZXRlIGYuc3RvcCxlLmNhbGwoYSxnLGYpKSwhZCYmZiYmZi5lbXB0eS5maXJlKCl9LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YisicXVldWVIb29rcyI7cmV0dXJuIE4uZ2V0KGEsYyl8fE4uYWNjZXNzKGEsYyx7ZW1wdHk6bi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7Ti5yZW1vdmUoYSxbYisicXVldWUiLGNdKX0pfSl9fSksbi5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYil7dmFyIGM9MjtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGEmJihiPWEsYT0iZngiLGMtLSksYXJndW1lbnRzLmxlbmd0aDxjP24ucXVldWUodGhpc1swXSxhKTp2b2lkIDA9PT1iP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9bi5xdWV1ZSh0aGlzLGEsYik7bi5fcXVldWVIb29rcyh0aGlzLGEpLCJmeCI9PT1hJiYiaW5wcm9ncmVzcyIhPT1jWzBdJiZuLmRlcXVldWUodGhpcyxhKX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRlcXVldWUodGhpcyxhKX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXVlKGF8fCJmeCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0xLGU9bi5EZWZlcnJlZCgpLGY9dGhpcyxnPXRoaXMubGVuZ3RoLGg9ZnVuY3Rpb24oKXstLWR8fGUucmVzb2x2ZVdpdGgoZixbZl0pfTsic3RyaW5nIiE9dHlwZW9mIGEmJihiPWEsYT12b2lkIDApLGE9YXx8ImZ4Ijt3aGlsZShnLS0pYz1OLmdldChmW2ddLGErInF1ZXVlSG9va3MiKSxjJiZjLmVtcHR5JiYoZCsrLGMuZW1wdHkuYWRkKGgpKTtyZXR1cm4gaCgpLGUucHJvbWlzZShiKX19KTt2YXIgUz0vWystXT8oPzpcZCpcLnwpXGQrKD86W2VFXVsrLV0/XGQrfCkvLnNvdXJjZSxUPW5ldyBSZWdFeHAoIl4oPzooWystXSk9fCkoIitTKyIpKFthLXolXSopJCIsImkiKSxVPVsiVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il0sVj1mdW5jdGlvbihhLGIpe3JldHVybiBhPWJ8fGEsIm5vbmUiPT09bi5jc3MoYSwiZGlzcGxheSIpfHwhbi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl9O2Z1bmN0aW9uIFcoYSxiLGMsZCl7dmFyIGUsZj0xLGc9MjAsaD1kP2Z1bmN0aW9uKCl7cmV0dXJuIGQuY3VyKCl9OmZ1bmN0aW9uKCl7cmV0dXJuIG4uY3NzKGEsYiwiIil9LGk9aCgpLGo9YyYmY1szXXx8KG4uY3NzTnVtYmVyW2JdPyIiOiJweCIpLGs9KG4uY3NzTnVtYmVyW2JdfHwicHgiIT09aiYmK2kpJiZULmV4ZWMobi5jc3MoYSxiKSk7aWYoayYma1szXSE9PWope2o9anx8a1szXSxjPWN8fFtdLGs9K2l8fDE7ZG8gZj1mfHwiLjUiLGsvPWYsbi5zdHlsZShhLGIsaytqKTt3aGlsZShmIT09KGY9aCgpL2kpJiYxIT09ZiYmLS1nKX1yZXR1cm4gYyYmKGs9K2t8fCtpfHwwLGU9Y1sxXT9rKyhjWzFdKzEpKmNbMl06K2NbMl0sZCYmKGQudW5pdD1qLGQuc3RhcnQ9ayxkLmVuZD1lKSksZX12YXIgWD0vXig/OmNoZWNrYm94fHJhZGlvKSQvaSxZPS88KFtcdzotXSspLyxaPS9eJHxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSwkPXtvcHRpb246WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSx0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07JC5vcHRncm91cD0kLm9wdGlvbiwkLnRib2R5PSQudGZvb3Q9JC5jb2xncm91cD0kLmNhcHRpb249JC50aGVhZCwkLnRoPSQudGQ7ZnVuY3Rpb24gXyhhLGIpe3ZhciBjPSJ1bmRlZmluZWQiIT10eXBlb2YgYS5nZXRFbGVtZW50c0J5VGFnTmFtZT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGJ8fCIqIik6InVuZGVmaW5lZCIhPXR5cGVvZiBhLnF1ZXJ5U2VsZWN0b3JBbGw/YS5xdWVyeVNlbGVjdG9yQWxsKGJ8fCIqIik6W107cmV0dXJuIHZvaWQgMD09PWJ8fGImJm4ubm9kZU5hbWUoYSxiKT9uLm1lcmdlKFthXSxjKTpjfWZ1bmN0aW9uIGFhKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKU4uc2V0KGFbY10sImdsb2JhbEV2YWwiLCFifHxOLmdldChiW2NdLCJnbG9iYWxFdmFsIikpfXZhciBiYT0vPHwmIz9cdys7LztmdW5jdGlvbiBjYShhLGIsYyxkLGUpe2Zvcih2YXIgZixnLGgsaSxqLGssbD1iLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxtPVtdLG89MCxwPWEubGVuZ3RoO3A+bztvKyspaWYoZj1hW29dLGZ8fDA9PT1mKWlmKCJvYmplY3QiPT09bi50eXBlKGYpKW4ubWVyZ2UobSxmLm5vZGVUeXBlP1tmXTpmKTtlbHNlIGlmKGJhLnRlc3QoZikpe2c9Z3x8bC5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxoPShZLmV4ZWMoZil8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCksaT0kW2hdfHwkLl9kZWZhdWx0LGcuaW5uZXJIVE1MPWlbMV0rbi5odG1sUHJlZmlsdGVyKGYpK2lbMl0saz1pWzBdO3doaWxlKGstLSlnPWcubGFzdENoaWxkO24ubWVyZ2UobSxnLmNoaWxkTm9kZXMpLGc9bC5maXJzdENoaWxkLGcudGV4dENvbnRlbnQ9IiJ9ZWxzZSBtLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShmKSk7bC50ZXh0Q29udGVudD0iIixvPTA7d2hpbGUoZj1tW28rK10paWYoZCYmbi5pbkFycmF5KGYsZCk+LTEpZSYmZS5wdXNoKGYpO2Vsc2UgaWYoaj1uLmNvbnRhaW5zKGYub3duZXJEb2N1bWVudCxmKSxnPV8obC5hcHBlbmRDaGlsZChmKSwic2NyaXB0IiksaiYmYWEoZyksYyl7az0wO3doaWxlKGY9Z1trKytdKVoudGVzdChmLnR5cGV8fCIiKSYmYy5wdXNoKGYpfXJldHVybiBsfSFmdW5jdGlvbigpe3ZhciBhPWQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGI9YS5hcHBlbmRDaGlsZChkLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxjPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtjLnNldEF0dHJpYnV0ZSgidHlwZSIsInJhZGlvIiksYy5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCJjaGVja2VkIiksYy5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJ0IiksYi5hcHBlbmRDaGlsZChjKSxsLmNoZWNrQ2xvbmU9Yi5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsYi5pbm5lckhUTUw9Ijx0ZXh0YXJlYT54PC90ZXh0YXJlYT4iLGwubm9DbG9uZUNoZWNrZWQ9ISFiLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZX0oKTt2YXIgZGE9L15rZXkvLGVhPS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudXxkcmFnfGRyb3ApfGNsaWNrLyxmYT0vXihbXi5dKikoPzpcLiguKyl8KS87ZnVuY3Rpb24gZ2EoKXtyZXR1cm4hMH1mdW5jdGlvbiBoYSgpe3JldHVybiExfWZ1bmN0aW9uIGlhKCl7dHJ5e3JldHVybiBkLmFjdGl2ZUVsZW1lbnR9Y2F0Y2goYSl7fX1mdW5jdGlvbiBqYShhLGIsYyxkLGUsZil7dmFyIGcsaDtpZigib2JqZWN0Ij09dHlwZW9mIGIpeyJzdHJpbmciIT10eXBlb2YgYyYmKGQ9ZHx8YyxjPXZvaWQgMCk7Zm9yKGggaW4gYilqYShhLGgsYyxkLGJbaF0sZik7cmV0dXJuIGF9aWYobnVsbD09ZCYmbnVsbD09ZT8oZT1jLGQ9Yz12b2lkIDApOm51bGw9PWUmJigic3RyaW5nIj09dHlwZW9mIGM/KGU9ZCxkPXZvaWQgMCk6KGU9ZCxkPWMsYz12b2lkIDApKSxlPT09ITEpZT1oYTtlbHNlIGlmKCFlKXJldHVybiBhO3JldHVybiAxPT09ZiYmKGc9ZSxlPWZ1bmN0aW9uKGEpe3JldHVybiBuKCkub2ZmKGEpLGcuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlLmd1aWQ9Zy5ndWlkfHwoZy5ndWlkPW4uZ3VpZCsrKSksYS5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC5hZGQodGhpcyxiLGUsZCxjKX0pfW4uZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9Ti5nZXQoYSk7aWYocil7Yy5oYW5kbGVyJiYoZj1jLGM9Zi5oYW5kbGVyLGU9Zi5zZWxlY3RvciksYy5ndWlkfHwoYy5ndWlkPW4uZ3VpZCsrKSwoaT1yLmV2ZW50cyl8fChpPXIuZXZlbnRzPXt9KSwoZz1yLmhhbmRsZSl8fChnPXIuaGFuZGxlPWZ1bmN0aW9uKGIpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgbiYmbi5ldmVudC50cmlnZ2VyZWQhPT1iLnR5cGU/bi5ldmVudC5kaXNwYXRjaC5hcHBseShhLGFyZ3VtZW50cyk6dm9pZCAwfSksYj0oYnx8IiIpLm1hdGNoKEcpfHxbIiJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWg9ZmEuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLG8mJihsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30sbz0oZT9sLmRlbGVnYXRlVHlwZTpsLmJpbmRUeXBlKXx8byxsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30saz1uLmV4dGVuZCh7dHlwZTpvLG9yaWdUeXBlOnEsZGF0YTpkLGhhbmRsZXI6YyxndWlkOmMuZ3VpZCxzZWxlY3RvcjplLG5lZWRzQ29udGV4dDplJiZuLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoZSksbmFtZXNwYWNlOnAuam9pbigiLiIpfSxmKSwobT1pW29dKXx8KG09aVtvXT1bXSxtLmRlbGVnYXRlQ291bnQ9MCxsLnNldHVwJiZsLnNldHVwLmNhbGwoYSxkLHAsZykhPT0hMXx8YS5hZGRFdmVudExpc3RlbmVyJiZhLmFkZEV2ZW50TGlzdGVuZXIobyxnKSksbC5hZGQmJihsLmFkZC5jYWxsKGEsayksay5oYW5kbGVyLmd1aWR8fChrLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP20uc3BsaWNlKG0uZGVsZWdhdGVDb3VudCsrLDAsayk6bS5wdXNoKGspLG4uZXZlbnQuZ2xvYmFsW29dPSEwKX19LHJlbW92ZTpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbyxwLHEscj1OLmhhc0RhdGEoYSkmJk4uZ2V0KGEpO2lmKHImJihpPXIuZXZlbnRzKSl7Yj0oYnx8IiIpLm1hdGNoKEcpfHxbIiJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWlmKGg9ZmEuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLG8pe2w9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShkP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxvLG09aVtvXXx8W10saD1oWzJdJiZuZXcgUmVnRXhwKCIoXnxcXC4pIitwLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpLGc9Zj1tLmxlbmd0aDt3aGlsZShmLS0paz1tW2ZdLCFlJiZxIT09ay5vcmlnVHlwZXx8YyYmYy5ndWlkIT09ay5ndWlkfHxoJiYhaC50ZXN0KGsubmFtZXNwYWNlKXx8ZCYmZCE9PWsuc2VsZWN0b3ImJigiKioiIT09ZHx8IWsuc2VsZWN0b3IpfHwobS5zcGxpY2UoZiwxKSxrLnNlbGVjdG9yJiZtLmRlbGVnYXRlQ291bnQtLSxsLnJlbW92ZSYmbC5yZW1vdmUuY2FsbChhLGspKTtnJiYhbS5sZW5ndGgmJihsLnRlYXJkb3duJiZsLnRlYXJkb3duLmNhbGwoYSxwLHIuaGFuZGxlKSE9PSExfHxuLnJlbW92ZUV2ZW50KGEsbyxyLmhhbmRsZSksZGVsZXRlIGlbb10pfWVsc2UgZm9yKG8gaW4gaSluLmV2ZW50LnJlbW92ZShhLG8rYltqXSxjLGQsITApO24uaXNFbXB0eU9iamVjdChpKSYmTi5yZW1vdmUoYSwiaGFuZGxlIGV2ZW50cyIpfX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YT1uLmV2ZW50LmZpeChhKTt2YXIgYixjLGQsZixnLGg9W10saT1lLmNhbGwoYXJndW1lbnRzKSxqPShOLmdldCh0aGlzLCJldmVudHMiKXx8e30pW2EudHlwZV18fFtdLGs9bi5ldmVudC5zcGVjaWFsW2EudHlwZV18fHt9O2lmKGlbMF09YSxhLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWsucHJlRGlzcGF0Y2h8fGsucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGEpIT09ITEpe2g9bi5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsYSxqKSxiPTA7d2hpbGUoKGY9aFtiKytdKSYmIWEuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7YS5jdXJyZW50VGFyZ2V0PWYuZWxlbSxjPTA7d2hpbGUoKGc9Zi5oYW5kbGVyc1tjKytdKSYmIWEuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSlhLnJuYW1lc3BhY2UmJiFhLnJuYW1lc3BhY2UudGVzdChnLm5hbWVzcGFjZSl8fChhLmhhbmRsZU9iaj1nLGEuZGF0YT1nLmRhdGEsZD0oKG4uZXZlbnQuc3BlY2lhbFtnLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8Zy5oYW5kbGVyKS5hcHBseShmLmVsZW0saSksdm9pZCAwIT09ZCYmKGEucmVzdWx0PWQpPT09ITEmJihhLnByZXZlbnREZWZhdWx0KCksYS5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBrLnBvc3REaXNwYXRjaCYmay5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLGEpLGEucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnPVtdLGg9Yi5kZWxlZ2F0ZUNvdW50LGk9YS50YXJnZXQ7aWYoaCYmaS5ub2RlVHlwZSYmKCJjbGljayIhPT1hLnR5cGV8fGlzTmFOKGEuYnV0dG9uKXx8YS5idXR0b248MSkpZm9yKDtpIT09dGhpcztpPWkucGFyZW50Tm9kZXx8dGhpcylpZigxPT09aS5ub2RlVHlwZSYmKGkuZGlzYWJsZWQhPT0hMHx8ImNsaWNrIiE9PWEudHlwZSkpe2ZvcihkPVtdLGM9MDtoPmM7YysrKWY9YltjXSxlPWYuc2VsZWN0b3IrIiAiLHZvaWQgMD09PWRbZV0mJihkW2VdPWYubmVlZHNDb250ZXh0P24oZSx0aGlzKS5pbmRleChpKT4tMTpuLmZpbmQoZSx0aGlzLG51bGwsW2ldKS5sZW5ndGgpLGRbZV0mJmQucHVzaChmKTtkLmxlbmd0aCYmZy5wdXNoKHtlbGVtOmksaGFuZGxlcnM6ZH0pfXJldHVybiBoPGIubGVuZ3RoJiZnLnB1c2goe2VsZW06dGhpcyxoYW5kbGVyczpiLnNsaWNlKGgpfSksZ30scHJvcHM6ImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGRldGFpbCBldmVudFBoYXNlIG1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2giLnNwbGl0KCIgIiksZml4SG9va3M6e30sa2V5SG9va3M6e3Byb3BzOiJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlIi5zcGxpdCgiICIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe3JldHVybiBudWxsPT1hLndoaWNoJiYoYS53aGljaD1udWxsIT1iLmNoYXJDb2RlP2IuY2hhckNvZGU6Yi5rZXlDb2RlKSxhfX0sbW91c2VIb29rczp7cHJvcHM6ImJ1dHRvbiBidXR0b25zIGNsaWVudFggY2xpZW50WSBvZmZzZXRYIG9mZnNldFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudCIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGYsZz1iLmJ1dHRvbjtyZXR1cm4gbnVsbD09YS5wYWdlWCYmbnVsbCE9Yi5jbGllbnRYJiYoYz1hLnRhcmdldC5vd25lckRvY3VtZW50fHxkLGU9Yy5kb2N1bWVudEVsZW1lbnQsZj1jLmJvZHksYS5wYWdlWD1iLmNsaWVudFgrKGUmJmUuc2Nyb2xsTGVmdHx8ZiYmZi5zY3JvbGxMZWZ0fHwwKS0oZSYmZS5jbGllbnRMZWZ0fHxmJiZmLmNsaWVudExlZnR8fDApLGEucGFnZVk9Yi5jbGllbnRZKyhlJiZlLnNjcm9sbFRvcHx8ZiYmZi5zY3JvbGxUb3B8fDApLShlJiZlLmNsaWVudFRvcHx8ZiYmZi5jbGllbnRUb3B8fDApKSxhLndoaWNofHx2b2lkIDA9PT1nfHwoYS53aGljaD0xJmc/MToyJmc/Mzo0Jmc/MjowKSxhfX0sZml4OmZ1bmN0aW9uKGEpe2lmKGFbbi5leHBhbmRvXSlyZXR1cm4gYTt2YXIgYixjLGUsZj1hLnR5cGUsZz1hLGg9dGhpcy5maXhIb29rc1tmXTtofHwodGhpcy5maXhIb29rc1tmXT1oPWVhLnRlc3QoZik/dGhpcy5tb3VzZUhvb2tzOmRhLnRlc3QoZik/dGhpcy5rZXlIb29rczp7fSksZT1oLnByb3BzP3RoaXMucHJvcHMuY29uY2F0KGgucHJvcHMpOnRoaXMucHJvcHMsYT1uZXcgbi5FdmVudChnKSxiPWUubGVuZ3RoO3doaWxlKGItLSljPWVbYl0sYVtjXT1nW2NdO3JldHVybiBhLnRhcmdldHx8KGEudGFyZ2V0PWQpLDM9PT1hLnRhcmdldC5ub2RlVHlwZSYmKGEudGFyZ2V0PWEudGFyZ2V0LnBhcmVudE5vZGUpLGguZmlsdGVyP2guZmlsdGVyKGEsZyk6YX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGZvY3VzOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMhPT1pYSgpJiZ0aGlzLmZvY3VzPyh0aGlzLmZvY3VzKCksITEpOnZvaWQgMH0sZGVsZWdhdGVUeXBlOiJmb2N1c2luIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzPT09aWEoKSYmdGhpcy5ibHVyPyh0aGlzLmJsdXIoKSwhMSk6dm9pZCAwfSxkZWxlZ2F0ZVR5cGU6ImZvY3Vzb3V0In0sY2xpY2s6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4iY2hlY2tib3giPT09dGhpcy50eXBlJiZ0aGlzLmNsaWNrJiZuLm5vZGVOYW1lKHRoaXMsImlucHV0Iik/KHRoaXMuY2xpY2soKSwhMSk6dm9pZCAwfSxfZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4gbi5ub2RlTmFtZShhLnRhcmdldCwiYSIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7dm9pZCAwIT09YS5yZXN1bHQmJmEub3JpZ2luYWxFdmVudCYmKGEub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1hLnJlc3VsdCl9fX19LG4ucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYyl9LG4uRXZlbnQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIG4uRXZlbnQ/KGEmJmEudHlwZT8odGhpcy5vcmlnaW5hbEV2ZW50PWEsdGhpcy50eXBlPWEudHlwZSx0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1hLmRlZmF1bHRQcmV2ZW50ZWR8fHZvaWQgMD09PWEuZGVmYXVsdFByZXZlbnRlZCYmYS5yZXR1cm5WYWx1ZT09PSExP2dhOmhhKTp0aGlzLnR5cGU9YSxiJiZuLmV4dGVuZCh0aGlzLGIpLHRoaXMudGltZVN0YW1wPWEmJmEudGltZVN0YW1wfHxuLm5vdygpLHZvaWQodGhpc1tuLmV4cGFuZG9dPSEwKSk6bmV3IG4uRXZlbnQoYSxiKX0sbi5FdmVudC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOm4uRXZlbnQsaXNEZWZhdWx0UHJldmVudGVkOmhhLGlzUHJvcGFnYXRpb25TdG9wcGVkOmhhLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOmhhLGlzU2ltdWxhdGVkOiExLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPWdhLGEmJiF0aGlzLmlzU2ltdWxhdGVkJiZhLnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPWdhLGEmJiF0aGlzLmlzU2ltdWxhdGVkJiZhLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1nYSxhJiYhdGhpcy5pc1NpbXVsYXRlZCYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0sbi5lYWNoKHttb3VzZWVudGVyOiJtb3VzZW92ZXIiLG1vdXNlbGVhdmU6Im1vdXNlb3V0Iixwb2ludGVyZW50ZXI6InBvaW50ZXJvdmVyIixwb2ludGVybGVhdmU6InBvaW50ZXJvdXQifSxmdW5jdGlvbihhLGIpe24uZXZlbnQuc3BlY2lhbFthXT17ZGVsZWdhdGVUeXBlOmIsYmluZFR5cGU6YixoYW5kbGU6ZnVuY3Rpb24oYSl7dmFyIGMsZD10aGlzLGU9YS5yZWxhdGVkVGFyZ2V0LGY9YS5oYW5kbGVPYmo7cmV0dXJuIGUmJihlPT09ZHx8bi5jb250YWlucyhkLGUpKXx8KGEudHlwZT1mLm9yaWdUeXBlLGM9Zi5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxhLnR5cGU9YiksY319fSksbi5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBqYSh0aGlzLGEsYixjLGQpfSxvbmU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGphKHRoaXMsYSxiLGMsZCwxKX0sb2ZmOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlO2lmKGEmJmEucHJldmVudERlZmF1bHQmJmEuaGFuZGxlT2JqKXJldHVybiBkPWEuaGFuZGxlT2JqLG4oYS5kZWxlZ2F0ZVRhcmdldCkub2ZmKGQubmFtZXNwYWNlP2Qub3JpZ1R5cGUrIi4iK2QubmFtZXNwYWNlOmQub3JpZ1R5cGUsZC5zZWxlY3RvcixkLmhhbmRsZXIpLHRoaXM7aWYoIm9iamVjdCI9PXR5cGVvZiBhKXtmb3IoZSBpbiBhKXRoaXMub2ZmKGUsYixhW2VdKTtyZXR1cm4gdGhpc31yZXR1cm4gYiE9PSExJiYiZnVuY3Rpb24iIT10eXBlb2YgYnx8KGM9YixiPXZvaWQgMCksYz09PSExJiYoYz1oYSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC5yZW1vdmUodGhpcyxhLGMsYil9KX19KTt2YXIga2E9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1x3Oi1dKylbXj5dKilcLz4vZ2ksbGE9LzxzY3JpcHR8PHN0eWxlfDxsaW5rL2ksbWE9L2NoZWNrZWRccyooPzpbXj1dfD1ccyouY2hlY2tlZC4pL2ksbmE9L150cnVlXC8oLiopLyxvYT0vXlxzKjwhKD86XFtDREFUQVxbfC0tKXwoPzpcXVxdfC0tKT5ccyokL2c7ZnVuY3Rpb24gcGEoYSxiKXtyZXR1cm4gbi5ub2RlTmFtZShhLCJ0YWJsZSIpJiZuLm5vZGVOYW1lKDExIT09Yi5ub2RlVHlwZT9iOmIuZmlyc3RDaGlsZCwidHIiKT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpWzBdfHxhLmFwcGVuZENoaWxkKGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpKTphfWZ1bmN0aW9uIHFhKGEpe3JldHVybiBhLnR5cGU9KG51bGwhPT1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKSsiLyIrYS50eXBlLGF9ZnVuY3Rpb24gcmEoYSl7dmFyIGI9bmEuZXhlYyhhLnR5cGUpO3JldHVybiBiP2EudHlwZT1iWzFdOmEucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksYX1mdW5jdGlvbiBzYShhLGIpe3ZhciBjLGQsZSxmLGcsaCxpLGo7aWYoMT09PWIubm9kZVR5cGUpe2lmKE4uaGFzRGF0YShhKSYmKGY9Ti5hY2Nlc3MoYSksZz1OLnNldChiLGYpLGo9Zi5ldmVudHMpKXtkZWxldGUgZy5oYW5kbGUsZy5ldmVudHM9e307Zm9yKGUgaW4gailmb3IoYz0wLGQ9altlXS5sZW5ndGg7ZD5jO2MrKyluLmV2ZW50LmFkZChiLGUsaltlXVtjXSl9Ty5oYXNEYXRhKGEpJiYoaD1PLmFjY2VzcyhhKSxpPW4uZXh0ZW5kKHt9LGgpLE8uc2V0KGIsaSkpfX1mdW5jdGlvbiB0YShhLGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsiaW5wdXQiPT09YyYmWC50ZXN0KGEudHlwZSk/Yi5jaGVja2VkPWEuY2hlY2tlZDoiaW5wdXQiIT09YyYmInRleHRhcmVhIiE9PWN8fChiLmRlZmF1bHRWYWx1ZT1hLmRlZmF1bHRWYWx1ZSl9ZnVuY3Rpb24gdWEoYSxiLGMsZCl7Yj1mLmFwcGx5KFtdLGIpO3ZhciBlLGcsaCxpLGosayxtPTAsbz1hLmxlbmd0aCxwPW8tMSxxPWJbMF0scj1uLmlzRnVuY3Rpb24ocSk7aWYocnx8bz4xJiYic3RyaW5nIj09dHlwZW9mIHEmJiFsLmNoZWNrQ2xvbmUmJm1hLnRlc3QocSkpcmV0dXJuIGEuZWFjaChmdW5jdGlvbihlKXt2YXIgZj1hLmVxKGUpO3ImJihiWzBdPXEuY2FsbCh0aGlzLGUsZi5odG1sKCkpKSx1YShmLGIsYyxkKX0pO2lmKG8mJihlPWNhKGIsYVswXS5vd25lckRvY3VtZW50LCExLGEsZCksZz1lLmZpcnN0Q2hpbGQsMT09PWUuY2hpbGROb2Rlcy5sZW5ndGgmJihlPWcpLGd8fGQpKXtmb3IoaD1uLm1hcChfKGUsInNjcmlwdCIpLHFhKSxpPWgubGVuZ3RoO28+bTttKyspaj1lLG0hPT1wJiYoaj1uLmNsb25lKGosITAsITApLGkmJm4ubWVyZ2UoaCxfKGosInNjcmlwdCIpKSksYy5jYWxsKGFbbV0saixtKTtpZihpKWZvcihrPWhbaC5sZW5ndGgtMV0ub3duZXJEb2N1bWVudCxuLm1hcChoLHJhKSxtPTA7aT5tO20rKylqPWhbbV0sWi50ZXN0KGoudHlwZXx8IiIpJiYhTi5hY2Nlc3MoaiwiZ2xvYmFsRXZhbCIpJiZuLmNvbnRhaW5zKGssaikmJihqLnNyYz9uLl9ldmFsVXJsJiZuLl9ldmFsVXJsKGouc3JjKTpuLmdsb2JhbEV2YWwoai50ZXh0Q29udGVudC5yZXBsYWNlKG9hLCIiKSkpfXJldHVybiBhfWZ1bmN0aW9uIHZhKGEsYixjKXtmb3IodmFyIGQsZT1iP24uZmlsdGVyKGIsYSk6YSxmPTA7bnVsbCE9KGQ9ZVtmXSk7ZisrKWN8fDEhPT1kLm5vZGVUeXBlfHxuLmNsZWFuRGF0YShfKGQpKSxkLnBhcmVudE5vZGUmJihjJiZuLmNvbnRhaW5zKGQub3duZXJEb2N1bWVudCxkKSYmYWEoXyhkLCJzY3JpcHQiKSksZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGQpKTtyZXR1cm4gYX1uLmV4dGVuZCh7aHRtbFByZWZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKGthLCI8JDE+PC8kMj4iKX0sY2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jbG9uZU5vZGUoITApLGk9bi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSk7aWYoIShsLm5vQ2xvbmVDaGVja2VkfHwxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxuLmlzWE1MRG9jKGEpKSlmb3IoZz1fKGgpLGY9XyhhKSxkPTAsZT1mLmxlbmd0aDtlPmQ7ZCsrKXRhKGZbZF0sZ1tkXSk7aWYoYilpZihjKWZvcihmPWZ8fF8oYSksZz1nfHxfKGgpLGQ9MCxlPWYubGVuZ3RoO2U+ZDtkKyspc2EoZltkXSxnW2RdKTtlbHNlIHNhKGEsaCk7cmV0dXJuIGc9XyhoLCJzY3JpcHQiKSxnLmxlbmd0aD4wJiZhYShnLCFpJiZfKGEsInNjcmlwdCIpKSxofSxjbGVhbkRhdGE6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGMsZCxlPW4uZXZlbnQuc3BlY2lhbCxmPTA7dm9pZCAwIT09KGM9YVtmXSk7ZisrKWlmKEwoYykpe2lmKGI9Y1tOLmV4cGFuZG9dKXtpZihiLmV2ZW50cylmb3IoZCBpbiBiLmV2ZW50cyllW2RdP24uZXZlbnQucmVtb3ZlKGMsZCk6bi5yZW1vdmVFdmVudChjLGQsYi5oYW5kbGUpO2NbTi5leHBhbmRvXT12b2lkIDB9Y1tPLmV4cGFuZG9dJiYoY1tPLmV4cGFuZG9dPXZvaWQgMCl9fX0pLG4uZm4uZXh0ZW5kKHtkb21NYW5pcDp1YSxkZXRhY2g6ZnVuY3Rpb24oYSl7cmV0dXJuIHZhKHRoaXMsYSwhMCl9LHJlbW92ZTpmdW5jdGlvbihhKXtyZXR1cm4gdmEodGhpcyxhKX0sdGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gSyh0aGlzLGZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP24udGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpezEhPT10aGlzLm5vZGVUeXBlJiYxMSE9PXRoaXMubm9kZVR5cGUmJjkhPT10aGlzLm5vZGVUeXBlfHwodGhpcy50ZXh0Q29udGVudD1hKX0pfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiB1YSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIGI9cGEodGhpcyxhKTtiLmFwcGVuZENoaWxkKGEpfX0pfSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHVhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1wYSh0aGlzLGEpO2IuaW5zZXJ0QmVmb3JlKGEsYi5maXJzdENoaWxkKX19KX0sYmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHVhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGEpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMpfSl9LGFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHVhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGEpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMubmV4dFNpYmxpbmcpfSl9LGVtcHR5OmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MDtudWxsIT0oYT10aGlzW2JdKTtiKyspMT09PWEubm9kZVR5cGUmJihuLmNsZWFuRGF0YShfKGEsITEpKSxhLnRleHRDb250ZW50PSIiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1udWxsPT1hPyExOmEsYj1udWxsPT1iP2E6Yix0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiBuLmNsb25lKHRoaXMsYSxiKX0pfSxodG1sOmZ1bmN0aW9uKGEpe3JldHVybiBLKHRoaXMsZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXXx8e30sYz0wLGQ9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09YSYmMT09PWIubm9kZVR5cGUpcmV0dXJuIGIuaW5uZXJIVE1MO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmIWxhLnRlc3QoYSkmJiEkWyhZLmV4ZWMoYSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCldKXthPW4uaHRtbFByZWZpbHRlcihhKTt0cnl7Zm9yKDtkPmM7YysrKWI9dGhpc1tjXXx8e30sMT09PWIubm9kZVR5cGUmJihuLmNsZWFuRGF0YShfKGIsITEpKSxiLmlubmVySFRNTD1hKTtiPTB9Y2F0Y2goZSl7fX1iJiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGEpfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuIHVhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMucGFyZW50Tm9kZTtuLmluQXJyYXkodGhpcyxhKTwwJiYobi5jbGVhbkRhdGEoXyh0aGlzKSksYyYmYy5yZXBsYWNlQ2hpbGQoYix0aGlzKSl9LGEpfX0pLG4uZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhKXtmb3IodmFyIGMsZD1bXSxlPW4oYSksZj1lLmxlbmd0aC0xLGg9MDtmPj1oO2grKyljPWg9PT1mP3RoaXM6dGhpcy5jbG9uZSghMCksbihlW2hdKVtiXShjKSxnLmFwcGx5KGQsYy5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGQpfX0pO3ZhciB3YSx4YT17SFRNTDoiYmxvY2siLEJPRFk6ImJsb2NrIn07ZnVuY3Rpb24geWEoYSxiKXt2YXIgYz1uKGIuY3JlYXRlRWxlbWVudChhKSkuYXBwZW5kVG8oYi5ib2R5KSxkPW4uY3NzKGNbMF0sImRpc3BsYXkiKTtyZXR1cm4gYy5kZXRhY2goKSxkfWZ1bmN0aW9uIHphKGEpe3ZhciBiPWQsYz14YVthXTtyZXR1cm4gY3x8KGM9eWEoYSxiKSwibm9uZSIhPT1jJiZjfHwod2E9KHdhfHxuKCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+IikpLmFwcGVuZFRvKGIuZG9jdW1lbnRFbGVtZW50KSxiPXdhWzBdLmNvbnRlbnREb2N1bWVudCxiLndyaXRlKCksYi5jbG9zZSgpLGM9eWEoYSxiKSx3YS5kZXRhY2goKSkseGFbYV09YyksY312YXIgQWE9L15tYXJnaW4vLEJhPW5ldyBSZWdFeHAoIl4oIitTKyIpKD8hcHgpW2EteiVdKyQiLCJpIiksQ2E9ZnVuY3Rpb24oYil7dmFyIGM9Yi5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O3JldHVybiBjJiZjLm9wZW5lcnx8KGM9YSksYy5nZXRDb21wdXRlZFN0eWxlKGIpfSxEYT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX0sRWE9ZC5kb2N1bWVudEVsZW1lbnQ7IWZ1bmN0aW9uKCl7dmFyIGIsYyxlLGYsZz1kLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGg9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKTtpZihoLnN0eWxlKXtoLnN0eWxlLmJhY2tncm91bmRDbGlwPSJjb250ZW50LWJveCIsaC5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPSIiLGwuY2xlYXJDbG9uZVN0eWxlPSJjb250ZW50LWJveCI9PT1oLnN0eWxlLmJhY2tncm91bmRDbGlwLGcuc3R5bGUuY3NzVGV4dD0iYm9yZGVyOjA7d2lkdGg6OHB4O2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweDtwYWRkaW5nOjA7bWFyZ2luLXRvcDoxcHg7cG9zaXRpb246YWJzb2x1dGUiLGcuYXBwZW5kQ2hpbGQoaCk7ZnVuY3Rpb24gaSgpe2guc3R5bGUuY3NzVGV4dD0iLXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7LW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94O3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7bWFyZ2luOmF1dG87Ym9yZGVyOjFweDtwYWRkaW5nOjFweDt0b3A6MSU7d2lkdGg6NTAlIixoLmlubmVySFRNTD0iIixFYS5hcHBlbmRDaGlsZChnKTt2YXIgZD1hLmdldENvbXB1dGVkU3R5bGUoaCk7Yj0iMSUiIT09ZC50b3AsZj0iMnB4Ij09PWQubWFyZ2luTGVmdCxjPSI0cHgiPT09ZC53aWR0aCxoLnN0eWxlLm1hcmdpblJpZ2h0PSI1MCUiLGU9IjRweCI9PT1kLm1hcmdpblJpZ2h0LEVhLnJlbW92ZUNoaWxkKGcpfW4uZXh0ZW5kKGwse3BpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gaSgpLGJ9LGJveFNpemluZ1JlbGlhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWMmJmkoKSxjfSxwaXhlbE1hcmdpblJpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWMmJmkoKSxlfSxyZWxpYWJsZU1hcmdpbkxlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09YyYmaSgpLGZ9LHJlbGlhYmxlTWFyZ2luUmlnaHQ6ZnVuY3Rpb24oKXt2YXIgYixjPWguYXBwZW5kQ2hpbGQoZC5jcmVhdGVFbGVtZW50KCJkaXYiKSk7cmV0dXJuIGMuc3R5bGUuY3NzVGV4dD1oLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDtib3gtc2l6aW5nOmNvbnRlbnQtYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowIixjLnN0eWxlLm1hcmdpblJpZ2h0PWMuc3R5bGUud2lkdGg9IjAiLGguc3R5bGUud2lkdGg9IjFweCIsRWEuYXBwZW5kQ2hpbGQoZyksYj0hcGFyc2VGbG9hdChhLmdldENvbXB1dGVkU3R5bGUoYykubWFyZ2luUmlnaHQpLEVhLnJlbW92ZUNoaWxkKGcpLGgucmVtb3ZlQ2hpbGQoYyksYn19KX19KCk7ZnVuY3Rpb24gRmEoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5zdHlsZTtyZXR1cm4gYz1jfHxDYShhKSxnPWM/Yy5nZXRQcm9wZXJ0eVZhbHVlKGIpfHxjW2JdOnZvaWQgMCwiIiE9PWcmJnZvaWQgMCE9PWd8fG4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfHwoZz1uLnN0eWxlKGEsYikpLGMmJiFsLnBpeGVsTWFyZ2luUmlnaHQoKSYmQmEudGVzdChnKSYmQWEudGVzdChiKSYmKGQ9aC53aWR0aCxlPWgubWluV2lkdGgsZj1oLm1heFdpZHRoLGgubWluV2lkdGg9aC5tYXhXaWR0aD1oLndpZHRoPWcsZz1jLndpZHRoLGgud2lkdGg9ZCxoLm1pbldpZHRoPWUsaC5tYXhXaWR0aD1mKSx2b2lkIDAhPT1nP2crIiI6Z31mdW5jdGlvbiBHYShhLGIpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYSgpP3ZvaWQgZGVsZXRlIHRoaXMuZ2V0Oih0aGlzLmdldD1iKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX12YXIgSGE9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLElhPXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxKYT17bGV0dGVyU3BhY2luZzoiMCIsZm9udFdlaWdodDoiNDAwIn0sS2E9WyJXZWJraXQiLCJPIiwiTW96IiwibXMiXSxMYT1kLmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlO2Z1bmN0aW9uIE1hKGEpe2lmKGEgaW4gTGEpcmV0dXJuIGE7dmFyIGI9YVswXS50b1VwcGVyQ2FzZSgpK2Euc2xpY2UoMSksYz1LYS5sZW5ndGg7d2hpbGUoYy0tKWlmKGE9S2FbY10rYixhIGluIExhKXJldHVybiBhfWZ1bmN0aW9uIE5hKGEsYixjKXt2YXIgZD1ULmV4ZWMoYik7cmV0dXJuIGQ/TWF0aC5tYXgoMCxkWzJdLShjfHwwKSkrKGRbM118fCJweCIpOmJ9ZnVuY3Rpb24gT2EoYSxiLGMsZCxlKXtmb3IodmFyIGY9Yz09PShkPyJib3JkZXIiOiJjb250ZW50Iik/NDoid2lkdGgiPT09Yj8xOjAsZz0wOzQ+ZjtmKz0yKSJtYXJnaW4iPT09YyYmKGcrPW4uY3NzKGEsYytVW2ZdLCEwLGUpKSxkPygiY29udGVudCI9PT1jJiYoZy09bi5jc3MoYSwicGFkZGluZyIrVVtmXSwhMCxlKSksIm1hcmdpbiIhPT1jJiYoZy09bi5jc3MoYSwiYm9yZGVyIitVW2ZdKyJXaWR0aCIsITAsZSkpKTooZys9bi5jc3MoYSwicGFkZGluZyIrVVtmXSwhMCxlKSwicGFkZGluZyIhPT1jJiYoZys9bi5jc3MoYSwiYm9yZGVyIitVW2ZdKyJXaWR0aCIsITAsZSkpKTtyZXR1cm4gZ31mdW5jdGlvbiBQYShhLGIsYyl7dmFyIGQ9ITAsZT0id2lkdGgiPT09Yj9hLm9mZnNldFdpZHRoOmEub2Zmc2V0SGVpZ2h0LGY9Q2EoYSksZz0iYm9yZGVyLWJveCI9PT1uLmNzcyhhLCJib3hTaXppbmciLCExLGYpO2lmKDA+PWV8fG51bGw9PWUpe2lmKGU9RmEoYSxiLGYpLCgwPmV8fG51bGw9PWUpJiYoZT1hLnN0eWxlW2JdKSxCYS50ZXN0KGUpKXJldHVybiBlO2Q9ZyYmKGwuYm94U2l6aW5nUmVsaWFibGUoKXx8ZT09PWEuc3R5bGVbYl0pLGU9cGFyc2VGbG9hdChlKXx8MH1yZXR1cm4gZStPYShhLGIsY3x8KGc/ImJvcmRlciI6ImNvbnRlbnQiKSxkLGYpKyJweCJ9ZnVuY3Rpb24gUWEoYSxiKXtmb3IodmFyIGMsZCxlLGY9W10sZz0wLGg9YS5sZW5ndGg7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGZbZ109Ti5nZXQoZCwib2xkZGlzcGxheSIpLGM9ZC5zdHlsZS5kaXNwbGF5LGI/KGZbZ118fCJub25lIiE9PWN8fChkLnN0eWxlLmRpc3BsYXk9IiIpLCIiPT09ZC5zdHlsZS5kaXNwbGF5JiZWKGQpJiYoZltnXT1OLmFjY2VzcyhkLCJvbGRkaXNwbGF5Iix6YShkLm5vZGVOYW1lKSkpKTooZT1WKGQpLCJub25lIj09PWMmJmV8fE4uc2V0KGQsIm9sZGRpc3BsYXkiLGU/YzpuLmNzcyhkLCJkaXNwbGF5IikpKSk7Zm9yKGc9MDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoYiYmIm5vbmUiIT09ZC5zdHlsZS5kaXNwbGF5JiYiIiE9PWQuc3R5bGUuZGlzcGxheXx8KGQuc3R5bGUuZGlzcGxheT1iP2ZbZ118fCIiOiJub25lIikpO3JldHVybiBhfW4uZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGEsYil7aWYoYil7dmFyIGM9RmEoYSwib3BhY2l0eSIpO3JldHVybiIiPT09Yz8iMSI6Y319fX0sY3NzTnVtYmVyOnthbmltYXRpb25JdGVyYXRpb25Db3VudDohMCxjb2x1bW5Db3VudDohMCxmaWxsT3BhY2l0eTohMCxmbGV4R3JvdzohMCxmbGV4U2hyaW5rOiEwLGZvbnRXZWlnaHQ6ITAsbGluZUhlaWdodDohMCxvcGFjaXR5OiEwLG9yZGVyOiEwLG9ycGhhbnM6ITAsd2lkb3dzOiEwLHpJbmRleDohMCx6b29tOiEwfSxjc3NQcm9wczp7ImZsb2F0IjoiY3NzRmxvYXQifSxzdHlsZTpmdW5jdGlvbihhLGIsYyxkKXtpZihhJiYzIT09YS5ub2RlVHlwZSYmOCE9PWEubm9kZVR5cGUmJmEuc3R5bGUpe3ZhciBlLGYsZyxoPW4uY2FtZWxDYXNlKGIpLGk9YS5zdHlsZTtyZXR1cm4gYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1NYShoKXx8aCksZz1uLmNzc0hvb2tzW2JdfHxuLmNzc0hvb2tzW2hdLHZvaWQgMD09PWM/ZyYmImdldCJpbiBnJiZ2b2lkIDAhPT0oZT1nLmdldChhLCExLGQpKT9lOmlbYl06KGY9dHlwZW9mIGMsInN0cmluZyI9PT1mJiYoZT1ULmV4ZWMoYykpJiZlWzFdJiYoYz1XKGEsYixlKSxmPSJudW1iZXIiKSxudWxsIT1jJiZjPT09YyYmKCJudW1iZXIiPT09ZiYmKGMrPWUmJmVbM118fChuLmNzc051bWJlcltoXT8iIjoicHgiKSksbC5jbGVhckNsb25lU3R5bGV8fCIiIT09Y3x8MCE9PWIuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwoaVtiXT0iaW5oZXJpdCIpLGcmJiJzZXQiaW4gZyYmdm9pZCAwPT09KGM9Zy5zZXQoYSxjLGQpKXx8KGlbYl09YykpLHZvaWQgMCl9fSxjc3M6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGg9bi5jYW1lbENhc2UoYik7cmV0dXJuIGI9bi5jc3NQcm9wc1toXXx8KG4uY3NzUHJvcHNbaF09TWEoaCl8fGgpLGc9bi5jc3NIb29rc1tiXXx8bi5jc3NIb29rc1toXSxnJiYiZ2V0ImluIGcmJihlPWcuZ2V0KGEsITAsYykpLHZvaWQgMD09PWUmJihlPUZhKGEsYixkKSksIm5vcm1hbCI9PT1lJiZiIGluIEphJiYoZT1KYVtiXSksIiI9PT1jfHxjPyhmPXBhcnNlRmxvYXQoZSksYz09PSEwfHxpc0Zpbml0ZShmKT9mfHwwOmUpOmV9fSksbi5lYWNoKFsiaGVpZ2h0Iiwid2lkdGgiXSxmdW5jdGlvbihhLGIpe24uY3NzSG9va3NbYl09e2dldDpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGM/SGEudGVzdChuLmNzcyhhLCJkaXNwbGF5IikpJiYwPT09YS5vZmZzZXRXaWR0aD9EYShhLElhLGZ1bmN0aW9uKCl7cmV0dXJuIFBhKGEsYixkKX0pOlBhKGEsYixkKTp2b2lkIDB9LHNldDpmdW5jdGlvbihhLGMsZCl7dmFyIGUsZj1kJiZDYShhKSxnPWQmJk9hKGEsYixkLCJib3JkZXItYm94Ij09PW4uY3NzKGEsImJveFNpemluZyIsITEsZiksZik7cmV0dXJuIGcmJihlPVQuZXhlYyhjKSkmJiJweCIhPT0oZVszXXx8InB4IikmJihhLnN0eWxlW2JdPWMsYz1uLmNzcyhhLGIpKSxOYShhLGMsZyl9fX0pLG4uY3NzSG9va3MubWFyZ2luTGVmdD1HYShsLnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihhLGIpe3JldHVybiBiPyhwYXJzZUZsb2F0KEZhKGEsIm1hcmdpbkxlZnQiKSl8fGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdC1EYShhLHttYXJnaW5MZWZ0OjB9LGZ1bmN0aW9uKCl7cmV0dXJuIGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdH0pKSsicHgiOnZvaWQgMH0pLG4uY3NzSG9va3MubWFyZ2luUmlnaHQ9R2EobC5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/RGEoYSx7ZGlzcGxheToiaW5saW5lLWJsb2NrIn0sRmEsW2EsIm1hcmdpblJpZ2h0Il0pOnZvaWQgMH0pLG4uZWFjaCh7bWFyZ2luOiIiLHBhZGRpbmc6IiIsYm9yZGVyOiJXaWR0aCJ9LGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1thK2JdPXtleHBhbmQ6ZnVuY3Rpb24oYyl7Zm9yKHZhciBkPTAsZT17fSxmPSJzdHJpbmciPT10eXBlb2YgYz9jLnNwbGl0KCIgIik6W2NdOzQ+ZDtkKyspZVthK1VbZF0rYl09ZltkXXx8ZltkLTJdfHxmWzBdO3JldHVybiBlfX0sQWEudGVzdChhKXx8KG4uY3NzSG9va3NbYStiXS5zZXQ9TmEpfSksbi5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihhLGIpe3JldHVybiBLKHRoaXMsZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj17fSxnPTA7aWYobi5pc0FycmF5KGIpKXtmb3IoZD1DYShhKSxlPWIubGVuZ3RoO2U+ZztnKyspZltiW2ddXT1uLmNzcyhhLGJbZ10sITEsZCk7cmV0dXJuIGZ9cmV0dXJuIHZvaWQgMCE9PWM/bi5zdHlsZShhLGIsYyk6bi5jc3MoYSxiKX0sYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gUWEodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gUWEodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihhKXtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBhP2E/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7Vih0aGlzKT9uKHRoaXMpLnNob3coKTpuKHRoaXMpLmhpZGUoKX0pfX0pO2Z1bmN0aW9uIFJhKGEsYixjLGQsZSl7cmV0dXJuIG5ldyBSYS5wcm90b3R5cGUuaW5pdChhLGIsYyxkLGUpfW4uVHdlZW49UmEsUmEucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpSYSxpbml0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmVsZW09YSx0aGlzLnByb3A9Yyx0aGlzLmVhc2luZz1lfHxuLmVhc2luZy5fZGVmYXVsdCx0aGlzLm9wdGlvbnM9Yix0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9ZCx0aGlzLnVuaXQ9Znx8KG4uY3NzTnVtYmVyW2NdPyIiOiJweCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgYT1SYS5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gYSYmYS5nZXQ/YS5nZXQodGhpcyk6UmEucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGEpe3ZhciBiLGM9UmEucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMub3B0aW9ucy5kdXJhdGlvbj90aGlzLnBvcz1iPW4uZWFzaW5nW3RoaXMuZWFzaW5nXShhLHRoaXMub3B0aW9ucy5kdXJhdGlvbiphLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOnRoaXMucG9zPWI9YSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqYit0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxjJiZjLnNldD9jLnNldCh0aGlzKTpSYS5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSxSYS5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9UmEucHJvdG90eXBlLFJhLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gMSE9PWEuZWxlbS5ub2RlVHlwZXx8bnVsbCE9YS5lbGVtW2EucHJvcF0mJm51bGw9PWEuZWxlbS5zdHlsZVthLnByb3BdP2EuZWxlbVthLnByb3BdOihiPW4uY3NzKGEuZWxlbSxhLnByb3AsIiIpLGImJiJhdXRvIiE9PWI/YjowKX0sc2V0OmZ1bmN0aW9uKGEpe24uZnguc3RlcFthLnByb3BdP24uZnguc3RlcFthLnByb3BdKGEpOjEhPT1hLmVsZW0ubm9kZVR5cGV8fG51bGw9PWEuZWxlbS5zdHlsZVtuLmNzc1Byb3BzW2EucHJvcF1dJiYhbi5jc3NIb29rc1thLnByb3BdP2EuZWxlbVthLnByb3BdPWEubm93Om4uc3R5bGUoYS5lbGVtLGEucHJvcCxhLm5vdythLnVuaXQpfX19LFJhLnByb3BIb29rcy5zY3JvbGxUb3A9UmEucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihhKXthLmVsZW0ubm9kZVR5cGUmJmEuZWxlbS5wYXJlbnROb2RlJiYoYS5lbGVtW2EucHJvcF09YS5ub3cpfX0sbi5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gYX0sc3dpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuLjUtTWF0aC5jb3MoYSpNYXRoLlBJKS8yfSxfZGVmYXVsdDoic3dpbmcifSxuLmZ4PVJhLnByb3RvdHlwZS5pbml0LG4uZnguc3RlcD17fTt2YXIgU2EsVGEsVWE9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLFZhPS9xdWV1ZUhvb2tzJC87ZnVuY3Rpb24gV2EoKXtyZXR1cm4gYS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7U2E9dm9pZCAwfSksU2E9bi5ub3coKX1mdW5jdGlvbiBYYShhLGIpe3ZhciBjLGQ9MCxlPXtoZWlnaHQ6YX07Zm9yKGI9Yj8xOjA7ND5kO2QrPTItYiljPVVbZF0sZVsibWFyZ2luIitjXT1lWyJwYWRkaW5nIitjXT1hO3JldHVybiBiJiYoZS5vcGFjaXR5PWUud2lkdGg9YSksZX1mdW5jdGlvbiBZYShhLGIsYyl7Zm9yKHZhciBkLGU9KF9hLnR3ZWVuZXJzW2JdfHxbXSkuY29uY2F0KF9hLnR3ZWVuZXJzWyIqIl0pLGY9MCxnPWUubGVuZ3RoO2c+ZjtmKyspaWYoZD1lW2ZdLmNhbGwoYyxiLGEpKXJldHVybiBkfWZ1bmN0aW9uIFphKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrLGw9dGhpcyxtPXt9LG89YS5zdHlsZSxwPWEubm9kZVR5cGUmJlYoYSkscT1OLmdldChhLCJmeHNob3ciKTtjLnF1ZXVlfHwoaD1uLl9xdWV1ZUhvb2tzKGEsImZ4IiksbnVsbD09aC51bnF1ZXVlZCYmKGgudW5xdWV1ZWQ9MCxpPWguZW1wdHkuZmlyZSxoLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtoLnVucXVldWVkfHxpKCl9KSxoLnVucXVldWVkKyssbC5hbHdheXMoZnVuY3Rpb24oKXtsLmFsd2F5cyhmdW5jdGlvbigpe2gudW5xdWV1ZWQtLSxuLnF1ZXVlKGEsImZ4IikubGVuZ3RofHxoLmVtcHR5LmZpcmUoKX0pfSkpLDE9PT1hLm5vZGVUeXBlJiYoImhlaWdodCJpbiBifHwid2lkdGgiaW4gYikmJihjLm92ZXJmbG93PVtvLm92ZXJmbG93LG8ub3ZlcmZsb3dYLG8ub3ZlcmZsb3dZXSxqPW4uY3NzKGEsImRpc3BsYXkiKSxrPSJub25lIj09PWo/Ti5nZXQoYSwib2xkZGlzcGxheSIpfHx6YShhLm5vZGVOYW1lKTpqLCJpbmxpbmUiPT09ayYmIm5vbmUiPT09bi5jc3MoYSwiZmxvYXQiKSYmKG8uZGlzcGxheT0iaW5saW5lLWJsb2NrIikpLGMub3ZlcmZsb3cmJihvLm92ZXJmbG93PSJoaWRkZW4iLGwuYWx3YXlzKGZ1bmN0aW9uKCl7by5vdmVyZmxvdz1jLm92ZXJmbG93WzBdLG8ub3ZlcmZsb3dYPWMub3ZlcmZsb3dbMV0sby5vdmVyZmxvd1k9Yy5vdmVyZmxvd1syXX0pKTtmb3IoZCBpbiBiKWlmKGU9YltkXSxVYS5leGVjKGUpKXtpZihkZWxldGUgYltkXSxmPWZ8fCJ0b2dnbGUiPT09ZSxlPT09KHA/ImhpZGUiOiJzaG93Iikpe2lmKCJzaG93IiE9PWV8fCFxfHx2b2lkIDA9PT1xW2RdKWNvbnRpbnVlO3A9ITB9bVtkXT1xJiZxW2RdfHxuLnN0eWxlKGEsZCl9ZWxzZSBqPXZvaWQgMDtpZihuLmlzRW1wdHlPYmplY3QobSkpImlubGluZSI9PT0oIm5vbmUiPT09aj96YShhLm5vZGVOYW1lKTpqKSYmKG8uZGlzcGxheT1qKTtlbHNle3E/ImhpZGRlbiJpbiBxJiYocD1xLmhpZGRlbik6cT1OLmFjY2VzcyhhLCJmeHNob3ciLHt9KSxmJiYocS5oaWRkZW49IXApLHA/bihhKS5zaG93KCk6bC5kb25lKGZ1bmN0aW9uKCl7bihhKS5oaWRlKCl9KSxsLmRvbmUoZnVuY3Rpb24oKXt2YXIgYjtOLnJlbW92ZShhLCJmeHNob3ciKTtmb3IoYiBpbiBtKW4uc3R5bGUoYSxiLG1bYl0pfSk7Zm9yKGQgaW4gbSlnPVlhKHA/cVtkXTowLGQsbCksZCBpbiBxfHwocVtkXT1nLnN0YXJ0LHAmJihnLmVuZD1nLnN0YXJ0LGcuc3RhcnQ9IndpZHRoIj09PWR8fCJoZWlnaHQiPT09ZD8xOjApKX19ZnVuY3Rpb24gJGEoYSxiKXt2YXIgYyxkLGUsZixnO2ZvcihjIGluIGEpaWYoZD1uLmNhbWVsQ2FzZShjKSxlPWJbZF0sZj1hW2NdLG4uaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9bi5jc3NIb29rc1tkXSxnJiYiZXhwYW5kImluIGcpe2Y9Zy5leHBhbmQoZiksZGVsZXRlIGFbZF07Zm9yKGMgaW4gZiljIGluIGF8fChhW2NdPWZbY10sYltjXT1lKX1lbHNlIGJbZF09ZX1mdW5jdGlvbiBfYShhLGIsYyl7dmFyIGQsZSxmPTAsZz1fYS5wcmVmaWx0ZXJzLmxlbmd0aCxoPW4uRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPVNhfHxXYSgpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtpPmc7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksMT5mJiZpP2M6KGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpuLmV4dGVuZCh7fSxiKSxvcHRzOm4uZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9LGVhc2luZzpuLmVhc2luZy5fZGVmYXVsdH0sYyksb3JpZ2luYWxQcm9wZXJ0aWVzOmIsb3JpZ2luYWxPcHRpb25zOmMsc3RhcnRUaW1lOlNhfHxXYSgpLGR1cmF0aW9uOmMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9bi5Ud2VlbihhLGoub3B0cyxiLGMsai5vcHRzLnNwZWNpYWxFYXNpbmdbYl18fGoub3B0cy5lYXNpbmcpO3JldHVybiBqLnR3ZWVucy5wdXNoKGQpLGR9LHN0b3A6ZnVuY3Rpb24oYil7dmFyIGM9MCxkPWI/ai50d2VlbnMubGVuZ3RoOjA7aWYoZSlyZXR1cm4gdGhpcztmb3IoZT0hMDtkPmM7YysrKWoudHdlZW5zW2NdLnJ1bigxKTtyZXR1cm4gYj8oaC5ub3RpZnlXaXRoKGEsW2osMSwwXSksaC5yZXNvbHZlV2l0aChhLFtqLGJdKSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcigkYShrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtnPmY7ZisrKWlmKGQ9X2EucHJlZmlsdGVyc1tmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIG4uaXNGdW5jdGlvbihkLnN0b3ApJiYobi5fcXVldWVIb29rcyhqLmVsZW0sai5vcHRzLnF1ZXVlKS5zdG9wPW4ucHJveHkoZC5zdG9wLGQpKSxkO3JldHVybiBuLm1hcChrLFlhLGopLG4uaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLG4uZngudGltZXIobi5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksai5wcm9ncmVzcyhqLm9wdHMucHJvZ3Jlc3MpLmRvbmUoai5vcHRzLmRvbmUsai5vcHRzLmNvbXBsZXRlKS5mYWlsKGoub3B0cy5mYWlsKS5hbHdheXMoai5vcHRzLmFsd2F5cyl9bi5BbmltYXRpb249bi5leHRlbmQoX2Ese3R3ZWVuZXJzOnsiKiI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVUd2VlbihhLGIpO3JldHVybiBXKGMuZWxlbSxhLFQuZXhlYyhiKSxjKSxjfV19LHR3ZWVuZXI6ZnVuY3Rpb24oYSxiKXtuLmlzRnVuY3Rpb24oYSk/KGI9YSxhPVsiKiJdKTphPWEubWF0Y2goRyk7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYz1hW2RdLF9hLnR3ZWVuZXJzW2NdPV9hLnR3ZWVuZXJzW2NdfHxbXSxfYS50d2VlbmVyc1tjXS51bnNoaWZ0KGIpfSxwcmVmaWx0ZXJzOltaYV0scHJlZmlsdGVyOmZ1bmN0aW9uKGEsYil7Yj9fYS5wcmVmaWx0ZXJzLnVuc2hpZnQoYSk6X2EucHJlZmlsdGVycy5wdXNoKGEpfX0pLG4uc3BlZWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEmJiJvYmplY3QiPT10eXBlb2YgYT9uLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fG4uaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhbi5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gZC5kdXJhdGlvbj1uLmZ4Lm9mZj8wOiJudW1iZXIiPT10eXBlb2YgZC5kdXJhdGlvbj9kLmR1cmF0aW9uOmQuZHVyYXRpb24gaW4gbi5meC5zcGVlZHM/bi5meC5zcGVlZHNbZC5kdXJhdGlvbl06bi5meC5zcGVlZHMuX2RlZmF1bHQsbnVsbCE9ZC5xdWV1ZSYmZC5xdWV1ZSE9PSEwfHwoZC5xdWV1ZT0iZngiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtuLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJm4uZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxuLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihWKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OmJ9LGEsYyxkKX0sYW5pbWF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uLmlzRW1wdHlPYmplY3QoYSksZj1uLnNwZWVkKGIsYyxkKSxnPWZ1bmN0aW9uKCl7dmFyIGI9X2EodGhpcyxuLmV4dGVuZCh7fSxhKSxmKTsoZXx8Ti5nZXQodGhpcywiZmluaXNoIikpJiZiLnN0b3AoITApfTtyZXR1cm4gZy5maW5pc2g9ZyxlfHxmLnF1ZXVlPT09ITE/dGhpcy5lYWNoKGcpOnRoaXMucXVldWUoZi5xdWV1ZSxnKX0sc3RvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdG9wO2RlbGV0ZSBhLnN0b3AsYihjKX07cmV0dXJuInN0cmluZyIhPXR5cGVvZiBhJiYoYz1iLGI9YSxhPXZvaWQgMCksYiYmYSE9PSExJiZ0aGlzLnF1ZXVlKGF8fCJmeCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPSEwLGU9bnVsbCE9YSYmYSsicXVldWVIb29rcyIsZj1uLnRpbWVycyxnPU4uZ2V0KHRoaXMpO2lmKGUpZ1tlXSYmZ1tlXS5zdG9wJiZkKGdbZV0pO2Vsc2UgZm9yKGUgaW4gZylnW2VdJiZnW2VdLnN0b3AmJlZhLnRlc3QoZSkmJmQoZ1tlXSk7Zm9yKGU9Zi5sZW5ndGg7ZS0tOylmW2VdLmVsZW0hPT10aGlzfHxudWxsIT1hJiZmW2VdLnF1ZXVlIT09YXx8KGZbZV0uYW5pbS5zdG9wKGMpLGI9ITEsZi5zcGxpY2UoZSwxKSk7IWImJmN8fG4uZGVxdWV1ZSh0aGlzLGEpfSl9LGZpbmlzaDpmdW5jdGlvbihhKXtyZXR1cm4gYSE9PSExJiYoYT1hfHwiZngiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYixjPU4uZ2V0KHRoaXMpLGQ9Y1thKyJxdWV1ZSJdLGU9Y1thKyJxdWV1ZUhvb2tzIl0sZj1uLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsbi5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxuLmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9bi5mbltiXTtuLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8ImJvb2xlYW4iPT10eXBlb2YgYT9jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUoWGEoYiwhMCksYSxkLGUpfX0pLG4uZWFjaCh7c2xpZGVEb3duOlhhKCJzaG93Iiksc2xpZGVVcDpYYSgiaGlkZSIpLHNsaWRlVG9nZ2xlOlhhKCJ0b2dnbGUiKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhLGMsZCl7cmV0dXJuIHRoaXMuYW5pbWF0ZShiLGEsYyxkKX19KSxuLnRpbWVycz1bXSxuLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgYSxiPTAsYz1uLnRpbWVycztmb3IoU2E9bi5ub3coKTtiPGMubGVuZ3RoO2IrKylhPWNbYl0sYSgpfHxjW2JdIT09YXx8Yy5zcGxpY2UoYi0tLDEpO2MubGVuZ3RofHxuLmZ4LnN0b3AoKSxTYT12b2lkIDB9LG4uZngudGltZXI9ZnVuY3Rpb24oYSl7bi50aW1lcnMucHVzaChhKSxhKCk/bi5meC5zdGFydCgpOm4udGltZXJzLnBvcCgpfSxuLmZ4LmludGVydmFsPTEzLG4uZnguc3RhcnQ9ZnVuY3Rpb24oKXtUYXx8KFRhPWEuc2V0SW50ZXJ2YWwobi5meC50aWNrLG4uZnguaW50ZXJ2YWwpKX0sbi5meC5zdG9wPWZ1bmN0aW9uKCl7YS5jbGVhckludGVydmFsKFRhKSxUYT1udWxsfSxuLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxuLmZuLmRlbGF5PWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGI9bi5meD9uLmZ4LnNwZWVkc1tiXXx8YjpiLGM9Y3x8ImZ4Iix0aGlzLnF1ZXVlKGMsZnVuY3Rpb24oYyxkKXt2YXIgZT1hLnNldFRpbWVvdXQoYyxiKTtkLnN0b3A9ZnVuY3Rpb24oKXthLmNsZWFyVGltZW91dChlKX19KX0sZnVuY3Rpb24oKXt2YXIgYT1kLmNyZWF0ZUVsZW1lbnQoImlucHV0IiksYj1kLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLGM9Yi5hcHBlbmRDaGlsZChkLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTthLnR5cGU9ImNoZWNrYm94IixsLmNoZWNrT249IiIhPT1hLnZhbHVlLGwub3B0U2VsZWN0ZWQ9Yy5zZWxlY3RlZCxiLmRpc2FibGVkPSEwLGwub3B0RGlzYWJsZWQ9IWMuZGlzYWJsZWQsYT1kLmNyZWF0ZUVsZW1lbnQoImlucHV0IiksYS52YWx1ZT0idCIsYS50eXBlPSJyYWRpbyIsbC5yYWRpb1ZhbHVlPSJ0Ij09PWEudmFsdWV9KCk7dmFyIGFiLGJiPW4uZXhwci5hdHRySGFuZGxlO24uZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEsodGhpcyxuLmF0dHIsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24ucmVtb3ZlQXR0cih0aGlzLGEpfSl9fSksbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLm5vZGVUeXBlO2lmKDMhPT1mJiY4IT09ZiYmMiE9PWYpcmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiBhLmdldEF0dHJpYnV0ZT9uLnByb3AoYSxiLGMpOigxPT09ZiYmbi5pc1hNTERvYyhhKXx8KGI9Yi50b0xvd2VyQ2FzZSgpLGU9bi5hdHRySG9va3NbYl18fChuLmV4cHIubWF0Y2guYm9vbC50ZXN0KGIpP2FiOnZvaWQgMCkpLHZvaWQgMCE9PWM/bnVsbD09PWM/dm9pZCBuLnJlbW92ZUF0dHIoYSxiKTplJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDooYS5zZXRBdHRyaWJ1dGUoYixjKyIiKSxjKTplJiYiZ2V0ImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOihkPW4uZmluZC5hdHRyKGEsYiksbnVsbD09ZD92b2lkIDA6ZCkpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihhLGIpe2lmKCFsLnJhZGlvVmFsdWUmJiJyYWRpbyI9PT1iJiZuLm5vZGVOYW1lKGEsImlucHV0Iikpe3ZhciBjPWEudmFsdWU7cmV0dXJuIGEuc2V0QXR0cmlidXRlKCJ0eXBlIixiKSxjJiYoYS52YWx1ZT1jKSxifX19fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPTAsZj1iJiZiLm1hdGNoKEcpO2lmKGYmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZltlKytdKWQ9bi5wcm9wRml4W2NdfHxjLG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYykmJihhW2RdPSExKSxhLnJlbW92ZUF0dHJpYnV0ZShjKX19KSxhYj17c2V0OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYj09PSExP24ucmVtb3ZlQXR0cihhLGMpOmEuc2V0QXR0cmlidXRlKGMsYyksY319LG4uZWFjaChuLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihhLGIpe3ZhciBjPWJiW2JdfHxuLmZpbmQuYXR0cjtiYltiXT1mdW5jdGlvbihhLGIsZCl7dmFyIGUsZjtyZXR1cm4gZHx8KGY9YmJbYl0sYmJbYl09ZSxlPW51bGwhPWMoYSxiLGQpP2IudG9Mb3dlckNhc2UoKTpudWxsLGJiW2JdPWYpLGV9fSk7dmFyIGNiPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksZGI9L14oPzphfGFyZWEpJC9pO24uZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEsodGhpcyxuLnByb3AsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RlbGV0ZSB0aGlzW24ucHJvcEZpeFthXXx8YV19KX19KSxuLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4gMT09PWYmJm4uaXNYTUxEb2MoYSl8fChiPW4ucHJvcEZpeFtiXXx8YixlPW4ucHJvcEhvb2tzW2JdKSwKdm9pZCAwIT09Yz9lJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDphW2JdPWM6ZSYmImdldCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDphW2JdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bi5maW5kLmF0dHIoYSwidGFiaW5kZXgiKTtyZXR1cm4gYj9wYXJzZUludChiLDEwKTpjYi50ZXN0KGEubm9kZU5hbWUpfHxkYi50ZXN0KGEubm9kZU5hbWUpJiZhLmhyZWY/MDotMX19fSxwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn19KSxsLm9wdFNlbGVjdGVkfHwobi5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJmIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsbnVsbH0sc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtiJiYoYi5zZWxlY3RlZEluZGV4LGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpfX0pLG4uZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7bi5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pO3ZhciBlYj0vW1x0XHJcblxmXS9nO2Z1bmN0aW9uIGZiKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZSYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIifW4uZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpPTA7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5hZGRDbGFzcyhhLmNhbGwodGhpcyxiLGZiKHRoaXMpKSl9KTtpZigic3RyaW5nIj09dHlwZW9mIGEmJmEpe2I9YS5tYXRjaChHKXx8W107d2hpbGUoYz10aGlzW2krK10paWYoZT1mYihjKSxkPTE9PT1jLm5vZGVUeXBlJiYoIiAiK2UrIiAiKS5yZXBsYWNlKGViLCIgIikpe2c9MDt3aGlsZShmPWJbZysrXSlkLmluZGV4T2YoIiAiK2YrIiAiKTwwJiYoZCs9ZisiICIpO2g9bi50cmltKGQpLGUhPT1oJiZjLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGgpfX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaT0wO2lmKG4uaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykucmVtb3ZlQ2xhc3MoYS5jYWxsKHRoaXMsYixmYih0aGlzKSkpfSk7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuYXR0cigiY2xhc3MiLCIiKTtpZigic3RyaW5nIj09dHlwZW9mIGEmJmEpe2I9YS5tYXRjaChHKXx8W107d2hpbGUoYz10aGlzW2krK10paWYoZT1mYihjKSxkPTE9PT1jLm5vZGVUeXBlJiYoIiAiK2UrIiAiKS5yZXBsYWNlKGViLCIgIikpe2c9MDt3aGlsZShmPWJbZysrXSl3aGlsZShkLmluZGV4T2YoIiAiK2YrIiAiKT4tMSlkPWQucmVwbGFjZSgiICIrZisiICIsIiAiKTtoPW4udHJpbShkKSxlIT09aCYmYy5zZXRBdHRyaWJ1dGUoImNsYXNzIixoKX19cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dHlwZW9mIGE7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgYiYmInN0cmluZyI9PT1jP2I/dGhpcy5hZGRDbGFzcyhhKTp0aGlzLnJlbW92ZUNsYXNzKGEpOm4uaXNGdW5jdGlvbihhKT90aGlzLmVhY2goZnVuY3Rpb24oYyl7bih0aGlzKS50b2dnbGVDbGFzcyhhLmNhbGwodGhpcyxjLGZiKHRoaXMpLGIpLGIpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsZCxlLGY7aWYoInN0cmluZyI9PT1jKXtkPTAsZT1uKHRoaXMpLGY9YS5tYXRjaChHKXx8W107d2hpbGUoYj1mW2QrK10pZS5oYXNDbGFzcyhiKT9lLnJlbW92ZUNsYXNzKGIpOmUuYWRkQ2xhc3MoYil9ZWxzZSB2b2lkIDAhPT1hJiYiYm9vbGVhbiIhPT1jfHwoYj1mYih0aGlzKSxiJiZOLnNldCh0aGlzLCJfX2NsYXNzTmFtZV9fIixiKSx0aGlzLnNldEF0dHJpYnV0ZSYmdGhpcy5zZXRBdHRyaWJ1dGUoImNsYXNzIixifHxhPT09ITE/IiI6Ti5nZXQodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIikpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZD0wO2I9IiAiK2ErIiAiO3doaWxlKGM9dGhpc1tkKytdKWlmKDE9PT1jLm5vZGVUeXBlJiYoIiAiK2ZiKGMpKyIgIikucmVwbGFjZShlYiwiICIpLmluZGV4T2YoYik+LTEpcmV0dXJuITA7cmV0dXJuITF9fSk7dmFyIGdiPS9cci9nLGhiPS9bXHgyMFx0XHJcblxmXSsvZztuLmZuLmV4dGVuZCh7dmFsOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPXRoaXNbMF07e2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQ9bi5pc0Z1bmN0aW9uKGEpLHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZTsxPT09dGhpcy5ub2RlVHlwZSYmKGU9ZD9hLmNhbGwodGhpcyxjLG4odGhpcykudmFsKCkpOmEsbnVsbD09ZT9lPSIiOiJudW1iZXIiPT10eXBlb2YgZT9lKz0iIjpuLmlzQXJyYXkoZSkmJihlPW4ubWFwKGUsZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/IiI6YSsiIn0pKSxiPW4udmFsSG9va3NbdGhpcy50eXBlXXx8bi52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJiJzZXQiaW4gYiYmdm9pZCAwIT09Yi5zZXQodGhpcyxlLCJ2YWx1ZSIpfHwodGhpcy52YWx1ZT1lKSl9KTtpZihlKXJldHVybiBiPW4udmFsSG9va3NbZS50eXBlXXx8bi52YWxIb29rc1tlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJiJnZXQiaW4gYiYmdm9pZCAwIT09KGM9Yi5nZXQoZSwidmFsdWUiKSk/YzooYz1lLnZhbHVlLCJzdHJpbmciPT10eXBlb2YgYz9jLnJlcGxhY2UoZ2IsIiIpOm51bGw9PWM/IiI6Yyl9fX0pLG4uZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bi5maW5kLmF0dHIoYSwidmFsdWUiKTtyZXR1cm4gbnVsbCE9Yj9iOm4udHJpbShuLnRleHQoYSkpLnJlcGxhY2UoaGIsIiAiKX19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQ9YS5vcHRpb25zLGU9YS5zZWxlY3RlZEluZGV4LGY9InNlbGVjdC1vbmUiPT09YS50eXBlfHwwPmUsZz1mP251bGw6W10saD1mP2UrMTpkLmxlbmd0aCxpPTA+ZT9oOmY/ZTowO2g+aTtpKyspaWYoYz1kW2ldLChjLnNlbGVjdGVkfHxpPT09ZSkmJihsLm9wdERpc2FibGVkPyFjLmRpc2FibGVkOm51bGw9PT1jLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKSkmJighYy5wYXJlbnROb2RlLmRpc2FibGVkfHwhbi5ub2RlTmFtZShjLnBhcmVudE5vZGUsIm9wdGdyb3VwIikpKXtpZihiPW4oYykudmFsKCksZilyZXR1cm4gYjtnLnB1c2goYil9cmV0dXJuIGd9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT1hLm9wdGlvbnMsZj1uLm1ha2VBcnJheShiKSxnPWUubGVuZ3RoO3doaWxlKGctLSlkPWVbZ10sKGQuc2VsZWN0ZWQ9bi5pbkFycmF5KG4udmFsSG9va3Mub3B0aW9uLmdldChkKSxmKT4tMSkmJihjPSEwKTtyZXR1cm4gY3x8KGEuc2VsZWN0ZWRJbmRleD0tMSksZn19fX0pLG4uZWFjaChbInJhZGlvIiwiY2hlY2tib3giXSxmdW5jdGlvbigpe24udmFsSG9va3NbdGhpc109e3NldDpmdW5jdGlvbihhLGIpe3JldHVybiBuLmlzQXJyYXkoYik/YS5jaGVja2VkPW4uaW5BcnJheShuKGEpLnZhbCgpLGIpPi0xOnZvaWQgMH19LGwuY2hlY2tPbnx8KG4udmFsSG9va3NbdGhpc10uZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT09YS5nZXRBdHRyaWJ1dGUoInZhbHVlIik/Im9uIjphLnZhbHVlfSl9KTt2YXIgaWI9L14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvO24uZXh0ZW5kKG4uZXZlbnQse3RyaWdnZXI6ZnVuY3Rpb24oYixjLGUsZil7dmFyIGcsaCxpLGosbCxtLG8scD1bZXx8ZF0scT1rLmNhbGwoYiwidHlwZSIpP2IudHlwZTpiLHI9ay5jYWxsKGIsIm5hbWVzcGFjZSIpP2IubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYoaD1pPWU9ZXx8ZCwzIT09ZS5ub2RlVHlwZSYmOCE9PWUubm9kZVR5cGUmJiFpYi50ZXN0KHErbi5ldmVudC50cmlnZ2VyZWQpJiYocS5pbmRleE9mKCIuIik+LTEmJihyPXEuc3BsaXQoIi4iKSxxPXIuc2hpZnQoKSxyLnNvcnQoKSksbD1xLmluZGV4T2YoIjoiKTwwJiYib24iK3EsYj1iW24uZXhwYW5kb10/YjpuZXcgbi5FdmVudChxLCJvYmplY3QiPT10eXBlb2YgYiYmYiksYi5pc1RyaWdnZXI9Zj8yOjMsYi5uYW1lc3BhY2U9ci5qb2luKCIuIiksYi5ybmFtZXNwYWNlPWIubmFtZXNwYWNlP25ldyBSZWdFeHAoIihefFxcLikiK3Iuam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVsbCxiLnJlc3VsdD12b2lkIDAsYi50YXJnZXR8fChiLnRhcmdldD1lKSxjPW51bGw9PWM/W2JdOm4ubWFrZUFycmF5KGMsW2JdKSxvPW4uZXZlbnQuc3BlY2lhbFtxXXx8e30sZnx8IW8udHJpZ2dlcnx8by50cmlnZ2VyLmFwcGx5KGUsYykhPT0hMSkpe2lmKCFmJiYhby5ub0J1YmJsZSYmIW4uaXNXaW5kb3coZSkpe2ZvcihqPW8uZGVsZWdhdGVUeXBlfHxxLGliLnRlc3QoaitxKXx8KGg9aC5wYXJlbnROb2RlKTtoO2g9aC5wYXJlbnROb2RlKXAucHVzaChoKSxpPWg7aT09PShlLm93bmVyRG9jdW1lbnR8fGQpJiZwLnB1c2goaS5kZWZhdWx0Vmlld3x8aS5wYXJlbnRXaW5kb3d8fGEpfWc9MDt3aGlsZSgoaD1wW2crK10pJiYhYi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKWIudHlwZT1nPjE/ajpvLmJpbmRUeXBlfHxxLG09KE4uZ2V0KGgsImV2ZW50cyIpfHx7fSlbYi50eXBlXSYmTi5nZXQoaCwiaGFuZGxlIiksbSYmbS5hcHBseShoLGMpLG09bCYmaFtsXSxtJiZtLmFwcGx5JiZMKGgpJiYoYi5yZXN1bHQ9bS5hcHBseShoLGMpLGIucmVzdWx0PT09ITEmJmIucHJldmVudERlZmF1bHQoKSk7cmV0dXJuIGIudHlwZT1xLGZ8fGIuaXNEZWZhdWx0UHJldmVudGVkKCl8fG8uX2RlZmF1bHQmJm8uX2RlZmF1bHQuYXBwbHkocC5wb3AoKSxjKSE9PSExfHwhTChlKXx8bCYmbi5pc0Z1bmN0aW9uKGVbcV0pJiYhbi5pc1dpbmRvdyhlKSYmKGk9ZVtsXSxpJiYoZVtsXT1udWxsKSxuLmV2ZW50LnRyaWdnZXJlZD1xLGVbcV0oKSxuLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsaSYmKGVbbF09aSkpLGIucmVzdWx0fX0sc2ltdWxhdGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW4uZXh0ZW5kKG5ldyBuLkV2ZW50LGMse3R5cGU6YSxpc1NpbXVsYXRlZDohMH0pO24uZXZlbnQudHJpZ2dlcihkLG51bGwsYil9fSksbi5mbi5leHRlbmQoe3RyaWdnZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC50cmlnZ2VyKGEsYix0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXNbMF07cmV0dXJuIGM/bi5ldmVudC50cmlnZ2VyKGEsYixjLCEwKTp2b2lkIDB9fSksbi5lYWNoKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51Ii5zcGxpdCgiICIpLGZ1bmN0aW9uKGEsYil7bi5mbltiXT1mdW5jdGlvbihhLGMpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbihiLG51bGwsYSxjKTp0aGlzLnRyaWdnZXIoYil9fSksbi5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubW91c2VlbnRlcihhKS5tb3VzZWxlYXZlKGJ8fGEpfX0pLGwuZm9jdXNpbj0ib25mb2N1c2luImluIGEsbC5mb2N1c2lufHxuLmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYSl7bi5ldmVudC5zaW11bGF0ZShiLGEudGFyZ2V0LG4uZXZlbnQuZml4KGEpKX07bi5ldmVudC5zcGVjaWFsW2JdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPU4uYWNjZXNzKGQsYik7ZXx8ZC5hZGRFdmVudExpc3RlbmVyKGEsYywhMCksTi5hY2Nlc3MoZCxiLChlfHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1OLmFjY2VzcyhkLGIpLTE7ZT9OLmFjY2VzcyhkLGIsZSk6KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITApLE4ucmVtb3ZlKGQsYikpfX19KTt2YXIgamI9YS5sb2NhdGlvbixrYj1uLm5vdygpLGxiPS9cPy87bi5wYXJzZUpTT049ZnVuY3Rpb24oYSl7cmV0dXJuIEpTT04ucGFyc2UoYSsiIil9LG4ucGFyc2VYTUw9ZnVuY3Rpb24oYil7dmFyIGM7aWYoIWJ8fCJzdHJpbmciIT10eXBlb2YgYilyZXR1cm4gbnVsbDt0cnl7Yz0obmV3IGEuRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoYiwidGV4dC94bWwiKX1jYXRjaChkKXtjPXZvaWQgMH1yZXR1cm4gYyYmIWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RofHxuLmVycm9yKCJJbnZhbGlkIFhNTDogIitiKSxjfTt2YXIgbWI9LyMuKiQvLG5iPS8oWz8mXSlfPVteJl0qLyxvYj0vXiguKj8pOlsgXHRdKihbXlxyXG5dKikkL2dtLHBiPS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLHFiPS9eKD86R0VUfEhFQUQpJC8scmI9L15cL1wvLyxzYj17fSx0Yj17fSx1Yj0iKi8iLmNvbmNhdCgiKiIpLHZiPWQuY3JlYXRlRWxlbWVudCgiYSIpO3ZiLmhyZWY9amIuaHJlZjtmdW5jdGlvbiB3YihhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXsic3RyaW5nIiE9dHlwZW9mIGImJihjPWIsYj0iKiIpO3ZhciBkLGU9MCxmPWIudG9Mb3dlckNhc2UoKS5tYXRjaChHKXx8W107aWYobi5pc0Z1bmN0aW9uKGMpKXdoaWxlKGQ9ZltlKytdKSIrIj09PWRbMF0/KGQ9ZC5zbGljZSgxKXx8IioiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24geGIoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09dGI7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxuLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlWyIqIl0mJmcoIioiKX1mdW5jdGlvbiB5YihhLGIpe3ZhciBjLGQsZT1uLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGMgaW4gYil2b2lkIDAhPT1iW2NdJiYoKGVbY10/YTpkfHwoZD17fSkpW2NdPWJbY10pO3JldHVybiBkJiZuLmV4dGVuZCghMCxhLGQpLGF9ZnVuY3Rpb24gemIoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKCIqIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWQmJihkPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihkKWZvcihlIGluIGgpaWYoaFtlXSYmaFtlXS50ZXN0KGQpKXtpLnVuc2hpZnQoZSk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGUgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tlKyIgIitpWzBdXSl7Zj1lO2JyZWFrfWd8fChnPWUpfWY9Znx8Z31yZXR1cm4gZj8oZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdKTp2b2lkIDB9ZnVuY3Rpb24gQWIoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZigiKiI9PT1mKWY9aTtlbHNlIGlmKCIqIiE9PWkmJmkhPT1mKXtpZihnPWpbaSsiICIrZl18fGpbIiogIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdCgiICIpLGhbMV09PT1mJiYoZz1qW2krIiAiK2hbMF1dfHxqWyIqICIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhWyJ0aHJvd3MiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmc/bDoiTm8gY29udmVyc2lvbiBmcm9tICIraSsiIHRvICIrZn19fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTpifX1uLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6amIuaHJlZix0eXBlOiJHRVQiLGlzTG9jYWw6cGIudGVzdChqYi5wcm90b2NvbCksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLGFjY2VwdHM6eyIqIjp1Yix0ZXh0OiJ0ZXh0L3BsYWluIixodG1sOiJ0ZXh0L2h0bWwiLHhtbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0In0sY29udGVudHM6e3htbDovXGJ4bWxcYi8saHRtbDovXGJodG1sLyxqc29uOi9cYmpzb25cYi99LHJlc3BvbnNlRmllbGRzOnt4bWw6InJlc3BvbnNlWE1MIix0ZXh0OiJyZXNwb25zZVRleHQiLGpzb246InJlc3BvbnNlSlNPTiJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOlN0cmluZywidGV4dCBodG1sIjohMCwidGV4dCBqc29uIjpuLnBhcnNlSlNPTiwidGV4dCB4bWwiOm4ucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbihhLGIpe3JldHVybiBiP3liKHliKGEsbi5hamF4U2V0dGluZ3MpLGIpOnliKG4uYWpheFNldHRpbmdzLGEpfSxhamF4UHJlZmlsdGVyOndiKHNiKSxhamF4VHJhbnNwb3J0OndiKHRiKSxhamF4OmZ1bmN0aW9uKGIsYyl7Im9iamVjdCI9PXR5cGVvZiBiJiYoYz1iLGI9dm9pZCAwKSxjPWN8fHt9O3ZhciBlLGYsZyxoLGksaixrLGwsbT1uLmFqYXhTZXR1cCh7fSxjKSxvPW0uY29udGV4dHx8bSxwPW0uY29udGV4dCYmKG8ubm9kZVR5cGV8fG8uanF1ZXJ5KT9uKG8pOm4uZXZlbnQscT1uLkRlZmVycmVkKCkscj1uLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxzPW0uc3RhdHVzQ29kZXx8e30sdD17fSx1PXt9LHY9MCx3PSJjYW5jZWxlZCIseD17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKDI9PT12KXtpZighaCl7aD17fTt3aGlsZShiPW9iLmV4ZWMoZykpaFtiWzFdLnRvTG93ZXJDYXNlKCldPWJbMl19Yj1oW2EudG9Mb3dlckNhc2UoKV19cmV0dXJuIG51bGw9PWI/bnVsbDpifSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gMj09PXY/ZzpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS50b0xvd2VyQ2FzZSgpO3JldHVybiB2fHwoYT11W2NdPXVbY118fGEsdFthXT1iKSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGEpe3JldHVybiB2fHwobS5taW1lVHlwZT1hKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEpaWYoMj52KWZvcihiIGluIGEpc1tiXT1bc1tiXSxhW2JdXTtlbHNlIHguYWx3YXlzKGFbeC5zdGF0dXNdKTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YXx8dztyZXR1cm4gZSYmZS5hYm9ydChiKSx6KDAsYiksdGhpc319O2lmKHEucHJvbWlzZSh4KS5jb21wbGV0ZT1yLmFkZCx4LnN1Y2Nlc3M9eC5kb25lLHguZXJyb3I9eC5mYWlsLG0udXJsPSgoYnx8bS51cmx8fGpiLmhyZWYpKyIiKS5yZXBsYWNlKG1iLCIiKS5yZXBsYWNlKHJiLGpiLnByb3RvY29sKyIvLyIpLG0udHlwZT1jLm1ldGhvZHx8Yy50eXBlfHxtLm1ldGhvZHx8bS50eXBlLG0uZGF0YVR5cGVzPW4udHJpbShtLmRhdGFUeXBlfHwiKiIpLnRvTG93ZXJDYXNlKCkubWF0Y2goRyl8fFsiIl0sbnVsbD09bS5jcm9zc0RvbWFpbil7aj1kLmNyZWF0ZUVsZW1lbnQoImEiKTt0cnl7ai5ocmVmPW0udXJsLGouaHJlZj1qLmhyZWYsbS5jcm9zc0RvbWFpbj12Yi5wcm90b2NvbCsiLy8iK3ZiLmhvc3QhPWoucHJvdG9jb2wrIi8vIitqLmhvc3R9Y2F0Y2goeSl7bS5jcm9zc0RvbWFpbj0hMH19aWYobS5kYXRhJiZtLnByb2Nlc3NEYXRhJiYic3RyaW5nIiE9dHlwZW9mIG0uZGF0YSYmKG0uZGF0YT1uLnBhcmFtKG0uZGF0YSxtLnRyYWRpdGlvbmFsKSkseGIoc2IsbSxjLHgpLDI9PT12KXJldHVybiB4O2s9bi5ldmVudCYmbS5nbG9iYWwsayYmMD09PW4uYWN0aXZlKysmJm4uZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0IiksbS50eXBlPW0udHlwZS50b1VwcGVyQ2FzZSgpLG0uaGFzQ29udGVudD0hcWIudGVzdChtLnR5cGUpLGY9bS51cmwsbS5oYXNDb250ZW50fHwobS5kYXRhJiYoZj1tLnVybCs9KGxiLnRlc3QoZik/IiYiOiI/IikrbS5kYXRhLGRlbGV0ZSBtLmRhdGEpLG0uY2FjaGU9PT0hMSYmKG0udXJsPW5iLnRlc3QoZik/Zi5yZXBsYWNlKG5iLCIkMV89IitrYisrKTpmKyhsYi50ZXN0KGYpPyImIjoiPyIpKyJfPSIra2IrKykpLG0uaWZNb2RpZmllZCYmKG4ubGFzdE1vZGlmaWVkW2ZdJiZ4LnNldFJlcXVlc3RIZWFkZXIoIklmLU1vZGlmaWVkLVNpbmNlIixuLmxhc3RNb2RpZmllZFtmXSksbi5ldGFnW2ZdJiZ4LnNldFJlcXVlc3RIZWFkZXIoIklmLU5vbmUtTWF0Y2giLG4uZXRhZ1tmXSkpLChtLmRhdGEmJm0uaGFzQ29udGVudCYmbS5jb250ZW50VHlwZSE9PSExfHxjLmNvbnRlbnRUeXBlKSYmeC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLG0uY29udGVudFR5cGUpLHguc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IixtLmRhdGFUeXBlc1swXSYmbS5hY2NlcHRzW20uZGF0YVR5cGVzWzBdXT9tLmFjY2VwdHNbbS5kYXRhVHlwZXNbMF1dKygiKiIhPT1tLmRhdGFUeXBlc1swXT8iLCAiK3ViKyI7IHE9MC4wMSI6IiIpOm0uYWNjZXB0c1siKiJdKTtmb3IobCBpbiBtLmhlYWRlcnMpeC5zZXRSZXF1ZXN0SGVhZGVyKGwsbS5oZWFkZXJzW2xdKTtpZihtLmJlZm9yZVNlbmQmJihtLmJlZm9yZVNlbmQuY2FsbChvLHgsbSk9PT0hMXx8Mj09PXYpKXJldHVybiB4LmFib3J0KCk7dz0iYWJvcnQiO2ZvcihsIGlue3N1Y2Nlc3M6MSxlcnJvcjoxLGNvbXBsZXRlOjF9KXhbbF0obVtsXSk7aWYoZT14Yih0YixtLGMseCkpe2lmKHgucmVhZHlTdGF0ZT0xLGsmJnAudHJpZ2dlcigiYWpheFNlbmQiLFt4LG1dKSwyPT09dilyZXR1cm4geDttLmFzeW5jJiZtLnRpbWVvdXQ+MCYmKGk9YS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7eC5hYm9ydCgidGltZW91dCIpfSxtLnRpbWVvdXQpKTt0cnl7dj0xLGUuc2VuZCh0LHopfWNhdGNoKHkpe2lmKCEoMj52KSl0aHJvdyB5O3ooLTEseSl9fWVsc2UgeigtMSwiTm8gVHJhbnNwb3J0Iik7ZnVuY3Rpb24geihiLGMsZCxoKXt2YXIgaixsLHQsdSx3LHk9YzsyIT09diYmKHY9MixpJiZhLmNsZWFyVGltZW91dChpKSxlPXZvaWQgMCxnPWh8fCIiLHgucmVhZHlTdGF0ZT1iPjA/NDowLGo9Yj49MjAwJiYzMDA+Ynx8MzA0PT09YixkJiYodT16YihtLHgsZCkpLHU9QWIobSx1LHgsaiksaj8obS5pZk1vZGlmaWVkJiYodz14LmdldFJlc3BvbnNlSGVhZGVyKCJMYXN0LU1vZGlmaWVkIiksdyYmKG4ubGFzdE1vZGlmaWVkW2ZdPXcpLHc9eC5nZXRSZXNwb25zZUhlYWRlcigiZXRhZyIpLHcmJihuLmV0YWdbZl09dykpLDIwND09PWJ8fCJIRUFEIj09PW0udHlwZT95PSJub2NvbnRlbnQiOjMwND09PWI/eT0ibm90bW9kaWZpZWQiOih5PXUuc3RhdGUsbD11LmRhdGEsdD11LmVycm9yLGo9IXQpKToodD15LCFiJiZ5fHwoeT0iZXJyb3IiLDA+YiYmKGI9MCkpKSx4LnN0YXR1cz1iLHguc3RhdHVzVGV4dD0oY3x8eSkrIiIsaj9xLnJlc29sdmVXaXRoKG8sW2wseSx4XSk6cS5yZWplY3RXaXRoKG8sW3gseSx0XSkseC5zdGF0dXNDb2RlKHMpLHM9dm9pZCAwLGsmJnAudHJpZ2dlcihqPyJhamF4U3VjY2VzcyI6ImFqYXhFcnJvciIsW3gsbSxqP2w6dF0pLHIuZmlyZVdpdGgobyxbeCx5XSksayYmKHAudHJpZ2dlcigiYWpheENvbXBsZXRlIixbeCxtXSksLS1uLmFjdGl2ZXx8bi5ldmVudC50cmlnZ2VyKCJhamF4U3RvcCIpKSl9cmV0dXJuIHh9LGdldEpTT046ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLmdldChhLGIsYywianNvbiIpfSxnZXRTY3JpcHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5nZXQoYSx2b2lkIDAsYiwic2NyaXB0Iil9fSksbi5lYWNoKFsiZ2V0IiwicG9zdCJdLGZ1bmN0aW9uKGEsYil7bltiXT1mdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gbi5pc0Z1bmN0aW9uKGMpJiYoZT1lfHxkLGQ9YyxjPXZvaWQgMCksbi5hamF4KG4uZXh0ZW5kKHt1cmw6YSx0eXBlOmIsZGF0YVR5cGU6ZSxkYXRhOmMsc3VjY2VzczpkfSxuLmlzUGxhaW5PYmplY3QoYSkmJmEpKX19KSxuLl9ldmFsVXJsPWZ1bmN0aW9uKGEpe3JldHVybiBuLmFqYXgoe3VybDphLHR5cGU6IkdFVCIsZGF0YVR5cGU6InNjcmlwdCIsYXN5bmM6ITEsZ2xvYmFsOiExLCJ0aHJvd3MiOiEwfSl9LG4uZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBuLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykud3JhcEFsbChhLmNhbGwodGhpcyxiKSl9KToodGhpc1swXSYmKGI9bihhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSksYi5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzO3doaWxlKGEuZmlyc3RFbGVtZW50Q2hpbGQpYT1hLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBhfSkuYXBwZW5kKHRoaXMpKSx0aGlzKX0sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiBuLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPW4odGhpcyksYz1iLmNvbnRlbnRzKCk7Yy5sZW5ndGg/Yy53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7dmFyIGI9bi5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7bih0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsYyk6YSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe24ubm9kZU5hbWUodGhpcywiYm9keSIpfHxuKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KSxuLmV4cHIuZmlsdGVycy5oaWRkZW49ZnVuY3Rpb24oYSl7cmV0dXJuIW4uZXhwci5maWx0ZXJzLnZpc2libGUoYSl9LG4uZXhwci5maWx0ZXJzLnZpc2libGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGEub2Zmc2V0V2lkdGg+MHx8YS5vZmZzZXRIZWlnaHQ+MHx8YS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aD4wfTt2YXIgQmI9LyUyMC9nLENiPS9cW1xdJC8sRGI9L1xyP1xuL2csRWI9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLEZiPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBHYihhLGIsYyxkKXt2YXIgZTtpZihuLmlzQXJyYXkoYikpbi5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHxDYi50ZXN0KGEpP2QoYSxlKTpHYihhKyJbIisoIm9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT1lP2I6IiIpKyJdIixlLGMsZCl9KTtlbHNlIGlmKGN8fCJvYmplY3QiIT09bi50eXBlKGIpKWQoYSxiKTtlbHNlIGZvcihlIGluIGIpR2IoYSsiWyIrZSsiXSIsYltlXSxjLGQpfW4ucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXtiPW4uaXNGdW5jdGlvbihiKT9iKCk6bnVsbD09Yj8iIjpiLGRbZC5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChhKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfTtpZih2b2lkIDA9PT1iJiYoYj1uLmFqYXhTZXR0aW5ncyYmbi5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLG4uaXNBcnJheShhKXx8YS5qcXVlcnkmJiFuLmlzUGxhaW5PYmplY3QoYSkpbi5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlHYihjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKCImIikucmVwbGFjZShCYiwiKyIpfSxuLmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG4ucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT1uLnByb3AodGhpcywiZWxlbWVudHMiKTtyZXR1cm4gYT9uLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFuKHRoaXMpLmlzKCI6ZGlzYWJsZWQiKSYmRmIudGVzdCh0aGlzLm5vZGVOYW1lKSYmIUViLnRlc3QoYSkmJih0aGlzLmNoZWNrZWR8fCFYLnRlc3QoYSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9bih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09Yz9udWxsOm4uaXNBcnJheShjKT9uLm1hcChjLGZ1bmN0aW9uKGEpe3JldHVybntuYW1lOmIubmFtZSx2YWx1ZTphLnJlcGxhY2UoRGIsIlxyXG4iKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKERiLCJcclxuIil9fSkuZ2V0KCl9fSksbi5hamF4U2V0dGluZ3MueGhyPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBuZXcgYS5YTUxIdHRwUmVxdWVzdH1jYXRjaChiKXt9fTt2YXIgSGI9ezA6MjAwLDEyMjM6MjA0fSxJYj1uLmFqYXhTZXR0aW5ncy54aHIoKTtsLmNvcnM9ISFJYiYmIndpdGhDcmVkZW50aWFscyJpbiBJYixsLmFqYXg9SWI9ISFJYixuLmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oYil7dmFyIGMsZDtyZXR1cm4gbC5jb3JzfHxJYiYmIWIuY3Jvc3NEb21haW4/e3NlbmQ6ZnVuY3Rpb24oZSxmKXt2YXIgZyxoPWIueGhyKCk7aWYoaC5vcGVuKGIudHlwZSxiLnVybCxiLmFzeW5jLGIudXNlcm5hbWUsYi5wYXNzd29yZCksYi54aHJGaWVsZHMpZm9yKGcgaW4gYi54aHJGaWVsZHMpaFtnXT1iLnhockZpZWxkc1tnXTtiLm1pbWVUeXBlJiZoLm92ZXJyaWRlTWltZVR5cGUmJmgub3ZlcnJpZGVNaW1lVHlwZShiLm1pbWVUeXBlKSxiLmNyb3NzRG9tYWlufHxlWyJYLVJlcXVlc3RlZC1XaXRoIl18fChlWyJYLVJlcXVlc3RlZC1XaXRoIl09IlhNTEh0dHBSZXF1ZXN0Iik7Zm9yKGcgaW4gZSloLnNldFJlcXVlc3RIZWFkZXIoZyxlW2ddKTtjPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe2MmJihjPWQ9aC5vbmxvYWQ9aC5vbmVycm9yPWgub25hYm9ydD1oLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLCJhYm9ydCI9PT1hP2guYWJvcnQoKToiZXJyb3IiPT09YT8ibnVtYmVyIiE9dHlwZW9mIGguc3RhdHVzP2YoMCwiZXJyb3IiKTpmKGguc3RhdHVzLGguc3RhdHVzVGV4dCk6ZihIYltoLnN0YXR1c118fGguc3RhdHVzLGguc3RhdHVzVGV4dCwidGV4dCIhPT0oaC5yZXNwb25zZVR5cGV8fCJ0ZXh0Iil8fCJzdHJpbmciIT10eXBlb2YgaC5yZXNwb25zZVRleHQ/e2JpbmFyeTpoLnJlc3BvbnNlfTp7dGV4dDpoLnJlc3BvbnNlVGV4dH0saC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpfX0saC5vbmxvYWQ9YygpLGQ9aC5vbmVycm9yPWMoImVycm9yIiksdm9pZCAwIT09aC5vbmFib3J0P2gub25hYm9ydD1kOmgub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PWgucmVhZHlTdGF0ZSYmYS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YyYmZCgpfSl9LGM9YygiYWJvcnQiKTt0cnl7aC5zZW5kKGIuaGFzQ29udGVudCYmYi5kYXRhfHxudWxsKX1jYXRjaChpKXtpZihjKXRocm93IGl9fSxhYm9ydDpmdW5jdGlvbigpe2MmJmMoKX19OnZvaWQgMH0pLG4uYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0In0sY29udGVudHM6e3NjcmlwdDovXGIoPzpqYXZhfGVjbWEpc2NyaXB0XGIvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGEpe3JldHVybiBuLmdsb2JhbEV2YWwoYSksYX19fSksbi5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEuY2FjaGUmJihhLmNhY2hlPSExKSxhLmNyb3NzRG9tYWluJiYoYS50eXBlPSJHRVQiKX0pLG4uYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgYixjO3JldHVybntzZW5kOmZ1bmN0aW9uKGUsZil7Yj1uKCI8c2NyaXB0PiIpLnByb3Aoe2NoYXJzZXQ6YS5zY3JpcHRDaGFyc2V0LHNyYzphLnVybH0pLm9uKCJsb2FkIGVycm9yIixjPWZ1bmN0aW9uKGEpe2IucmVtb3ZlKCksYz1udWxsLGEmJmYoImVycm9yIj09PWEudHlwZT80MDQ6MjAwLGEudHlwZSl9KSxkLmhlYWQuYXBwZW5kQ2hpbGQoYlswXSl9LGFib3J0OmZ1bmN0aW9uKCl7YyYmYygpfX19fSk7dmFyIEpiPVtdLEtiPS8oPSlcPyg/PSZ8JCl8XD9cPy87bi5hamF4U2V0dXAoe2pzb25wOiJjYWxsYmFjayIsanNvbnBDYWxsYmFjazpmdW5jdGlvbigpe3ZhciBhPUpiLnBvcCgpfHxuLmV4cGFuZG8rIl8iK2tiKys7cmV0dXJuIHRoaXNbYV09ITAsYX19KSxuLmFqYXhQcmVmaWx0ZXIoImpzb24ganNvbnAiLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZSxmLGcsaD1iLmpzb25wIT09ITEmJihLYi50ZXN0KGIudXJsKT8idXJsIjoic3RyaW5nIj09dHlwZW9mIGIuZGF0YSYmMD09PShiLmNvbnRlbnRUeXBlfHwiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikmJktiLnRlc3QoYi5kYXRhKSYmImRhdGEiKTtyZXR1cm4gaHx8Impzb25wIj09PWIuZGF0YVR5cGVzWzBdPyhlPWIuanNvbnBDYWxsYmFjaz1uLmlzRnVuY3Rpb24oYi5qc29ucENhbGxiYWNrKT9iLmpzb25wQ2FsbGJhY2soKTpiLmpzb25wQ2FsbGJhY2ssaD9iW2hdPWJbaF0ucmVwbGFjZShLYiwiJDEiK2UpOmIuanNvbnAhPT0hMSYmKGIudXJsKz0obGIudGVzdChiLnVybCk/IiYiOiI/IikrYi5qc29ucCsiPSIrZSksYi5jb252ZXJ0ZXJzWyJzY3JpcHQganNvbiJdPWZ1bmN0aW9uKCl7cmV0dXJuIGd8fG4uZXJyb3IoZSsiIHdhcyBub3QgY2FsbGVkIiksZ1swXX0sYi5kYXRhVHlwZXNbMF09Impzb24iLGY9YVtlXSxhW2VdPWZ1bmN0aW9uKCl7Zz1hcmd1bWVudHN9LGQuYWx3YXlzKGZ1bmN0aW9uKCl7dm9pZCAwPT09Zj9uKGEpLnJlbW92ZVByb3AoZSk6YVtlXT1mLGJbZV0mJihiLmpzb25wQ2FsbGJhY2s9Yy5qc29ucENhbGxiYWNrLEpiLnB1c2goZSkpLGcmJm4uaXNGdW5jdGlvbihmKSYmZihnWzBdKSxnPWY9dm9pZCAwfSksInNjcmlwdCIpOnZvaWQgMH0pLG4ucGFyc2VIVE1MPWZ1bmN0aW9uKGEsYixjKXtpZighYXx8InN0cmluZyIhPXR5cGVvZiBhKXJldHVybiBudWxsOyJib29sZWFuIj09dHlwZW9mIGImJihjPWIsYj0hMSksYj1ifHxkO3ZhciBlPXguZXhlYyhhKSxmPSFjJiZbXTtyZXR1cm4gZT9bYi5jcmVhdGVFbGVtZW50KGVbMV0pXTooZT1jYShbYV0sYixmKSxmJiZmLmxlbmd0aCYmbihmKS5yZW1vdmUoKSxuLm1lcmdlKFtdLGUuY2hpbGROb2RlcykpfTt2YXIgTGI9bi5mbi5sb2FkO24uZm4ubG9hZD1mdW5jdGlvbihhLGIsYyl7aWYoInN0cmluZyIhPXR5cGVvZiBhJiZMYilyZXR1cm4gTGIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBkLGUsZixnPXRoaXMsaD1hLmluZGV4T2YoIiAiKTtyZXR1cm4gaD4tMSYmKGQ9bi50cmltKGEuc2xpY2UoaCkpLGE9YS5zbGljZSgwLGgpKSxuLmlzRnVuY3Rpb24oYik/KGM9YixiPXZvaWQgMCk6YiYmIm9iamVjdCI9PXR5cGVvZiBiJiYoZT0iUE9TVCIpLGcubGVuZ3RoPjAmJm4uYWpheCh7dXJsOmEsdHlwZTplfHwiR0VUIixkYXRhVHlwZToiaHRtbCIsZGF0YTpifSkuZG9uZShmdW5jdGlvbihhKXtmPWFyZ3VtZW50cyxnLmh0bWwoZD9uKCI8ZGl2PiIpLmFwcGVuZChuLnBhcnNlSFRNTChhKSkuZmluZChkKTphKX0pLmFsd2F5cyhjJiZmdW5jdGlvbihhLGIpe2cuZWFjaChmdW5jdGlvbigpe2MuYXBwbHkodGhpcyxmfHxbYS5yZXNwb25zZVRleHQsYixhXSl9KX0pLHRoaXN9LG4uZWFjaChbImFqYXhTdGFydCIsImFqYXhTdG9wIiwiYWpheENvbXBsZXRlIiwiYWpheEVycm9yIiwiYWpheFN1Y2Nlc3MiLCJhamF4U2VuZCJdLGZ1bmN0aW9uKGEsYil7bi5mbltiXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vbihiLGEpfX0pLG4uZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGEpe3JldHVybiBuLmdyZXAobi50aW1lcnMsZnVuY3Rpb24oYil7cmV0dXJuIGE9PT1iLmVsZW19KS5sZW5ndGh9O2Z1bmN0aW9uIE1iKGEpe3JldHVybiBuLmlzV2luZG93KGEpP2E6OT09PWEubm9kZVR5cGUmJmEuZGVmYXVsdFZpZXd9bi5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaCxpLGosaz1uLmNzcyhhLCJwb3NpdGlvbiIpLGw9bihhKSxtPXt9OyJzdGF0aWMiPT09ayYmKGEuc3R5bGUucG9zaXRpb249InJlbGF0aXZlIiksaD1sLm9mZnNldCgpLGY9bi5jc3MoYSwidG9wIiksaT1uLmNzcyhhLCJsZWZ0Iiksaj0oImFic29sdXRlIj09PWt8fCJmaXhlZCI9PT1rKSYmKGYraSkuaW5kZXhPZigiYXV0byIpPi0xLGo/KGQ9bC5wb3NpdGlvbigpLGc9ZC50b3AsZT1kLmxlZnQpOihnPXBhcnNlRmxvYXQoZil8fDAsZT1wYXJzZUZsb2F0KGkpfHwwKSxuLmlzRnVuY3Rpb24oYikmJihiPWIuY2FsbChhLGMsbi5leHRlbmQoe30saCkpKSxudWxsIT1iLnRvcCYmKG0udG9wPWIudG9wLWgudG9wK2cpLG51bGwhPWIubGVmdCYmKG0ubGVmdD1iLmxlZnQtaC5sZWZ0K2UpLCJ1c2luZyJpbiBiP2IudXNpbmcuY2FsbChhLG0pOmwuY3NzKG0pfX0sbi5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihhKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiB2b2lkIDA9PT1hP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24ub2Zmc2V0LnNldE9mZnNldCh0aGlzLGEsYil9KTt2YXIgYixjLGQ9dGhpc1swXSxlPXt0b3A6MCxsZWZ0OjB9LGY9ZCYmZC5vd25lckRvY3VtZW50O2lmKGYpcmV0dXJuIGI9Zi5kb2N1bWVudEVsZW1lbnQsbi5jb250YWlucyhiLGQpPyhlPWQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYz1NYihmKSx7dG9wOmUudG9wK2MucGFnZVlPZmZzZXQtYi5jbGllbnRUb3AsbGVmdDplLmxlZnQrYy5wYWdlWE9mZnNldC1iLmNsaWVudExlZnR9KTplfSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBhLGIsYz10aGlzWzBdLGQ9e3RvcDowLGxlZnQ6MH07cmV0dXJuImZpeGVkIj09PW4uY3NzKGMsInBvc2l0aW9uIik/Yj1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihhPXRoaXMub2Zmc2V0UGFyZW50KCksYj10aGlzLm9mZnNldCgpLG4ubm9kZU5hbWUoYVswXSwiaHRtbCIpfHwoZD1hLm9mZnNldCgpKSxkLnRvcCs9bi5jc3MoYVswXSwiYm9yZGVyVG9wV2lkdGgiLCEwKSxkLmxlZnQrPW4uY3NzKGFbMF0sImJvcmRlckxlZnRXaWR0aCIsITApKSx7dG9wOmIudG9wLWQudG9wLW4uY3NzKGMsIm1hcmdpblRvcCIsITApLGxlZnQ6Yi5sZWZ0LWQubGVmdC1uLmNzcyhjLCJtYXJnaW5MZWZ0IiwhMCl9fX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vZmZzZXRQYXJlbnQ7d2hpbGUoYSYmInN0YXRpYyI9PT1uLmNzcyhhLCJwb3NpdGlvbiIpKWE9YS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGF8fEVhfSl9fSksbi5lYWNoKHtzY3JvbGxMZWZ0OiJwYWdlWE9mZnNldCIsc2Nyb2xsVG9wOiJwYWdlWU9mZnNldCJ9LGZ1bmN0aW9uKGEsYil7dmFyIGM9InBhZ2VZT2Zmc2V0Ij09PWI7bi5mblthXT1mdW5jdGlvbihkKXtyZXR1cm4gSyh0aGlzLGZ1bmN0aW9uKGEsZCxlKXt2YXIgZj1NYihhKTtyZXR1cm4gdm9pZCAwPT09ZT9mP2ZbYl06YVtkXTp2b2lkKGY/Zi5zY3JvbGxUbyhjP2YucGFnZVhPZmZzZXQ6ZSxjP2U6Zi5wYWdlWU9mZnNldCk6YVtkXT1lKX0sYSxkLGFyZ3VtZW50cy5sZW5ndGgpfX0pLG4uZWFjaChbInRvcCIsImxlZnQiXSxmdW5jdGlvbihhLGIpe24uY3NzSG9va3NbYl09R2EobC5waXhlbFBvc2l0aW9uLGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGM/KGM9RmEoYSxiKSxCYS50ZXN0KGMpP24oYSkucG9zaXRpb24oKVtiXSsicHgiOmMpOnZvaWQgMH0pfSksbi5lYWNoKHtIZWlnaHQ6ImhlaWdodCIsV2lkdGg6IndpZHRoIn0sZnVuY3Rpb24oYSxiKXtuLmVhY2goe3BhZGRpbmc6ImlubmVyIithLGNvbnRlbnQ6YiwiIjoib3V0ZXIiK2F9LGZ1bmN0aW9uKGMsZCl7bi5mbltkXT1mdW5jdGlvbihkLGUpe3ZhciBmPWFyZ3VtZW50cy5sZW5ndGgmJihjfHwiYm9vbGVhbiIhPXR5cGVvZiBkKSxnPWN8fChkPT09ITB8fGU9PT0hMD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIEsodGhpcyxmdW5jdGlvbihiLGMsZCl7dmFyIGU7cmV0dXJuIG4uaXNXaW5kb3coYik/Yi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrYV06OT09PWIubm9kZVR5cGU/KGU9Yi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoYi5ib2R5WyJzY3JvbGwiK2FdLGVbInNjcm9sbCIrYV0sYi5ib2R5WyJvZmZzZXQiK2FdLGVbIm9mZnNldCIrYV0sZVsiY2xpZW50IithXSkpOnZvaWQgMD09PWQ/bi5jc3MoYixjLGcpOm4uc3R5bGUoYixjLGQsZyl9LGIsZj9kOnZvaWQgMCxmLG51bGwpfX0pfSksbi5mbi5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLm9uKGEsbnVsbCxiLGMpfSx1bmJpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5vZmYoYSxudWxsLGIpfSxkZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihiLGEsYyxkKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGEsIioqIik6dGhpcy5vZmYoYixhfHwiKioiLGMpfSxzaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RofX0pLG4uZm4uYW5kU2VsZj1uLmZuLmFkZEJhY2ssImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKCJqcXVlcnkiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIG59KTt2YXIgTmI9YS5qUXVlcnksT2I9YS4kO3JldHVybiBuLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oYil7cmV0dXJuIGEuJD09PW4mJihhLiQ9T2IpLGImJmEualF1ZXJ5PT09biYmKGEualF1ZXJ5PU5iKSxufSxifHwoYS5qUXVlcnk9YS4kPW4pLG59KTsK"}]},{"name":"CSGO饰品价格对比脚本","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["https://www.c5game.com/csgo/default/*","https://www.igxe.cn/csgo/*","https://buff.163.com/market/?game=csgo*","https://www.v5fox.com/csgo*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":["c5game.com","igxe.cn","v5fox.com"],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null,"orig_connects":["*"]}},"storage":{"ts":1608308913783,"data":{}},"enabled":true,"position":23,"file_url":"https://greasyfork.org/scripts/371824-csgo%E9%A5%B0%E5%93%81%E4%BB%B7%E6%A0%BC%E5%AF%B9%E6%AF%94%E8%84%9A%E6%9C%AC/code/CSGO%E9%A5%B0%E5%93%81%E4%BB%B7%E6%A0%BC%E5%AF%B9%E6%AF%94%E8%84%9A%E6%9C%AC.user.js","uuid":"fc54a839-5e18-4152-9972-0218e2fd8c5c","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBDU0dP6aWw5ZOB5Lu35qC85a+55q+U6ISa5pysCi8vIEBjb25uZWN0ICAgICAgKgovLyBAdmVyc2lvbiAgICAgIDEuNwovLyBAZGVzY3JpcHRpb24gIOWwhuWQhOS4qkNTR0/ppbDlk4HkuqTmmJPlubPlj7DnmoTku7fmoLzmlL7lnKjkuIDotbfmmL7npLrvvIznnIHljrvmiZPlvIDlpJrkuKrnvZHpobXnmoTnuYHnkJDmk43kvZzvvIEKLy8gQGF1dGhvciAgICAgICBSb29raWVIb25nCi8vIEBncmFudCAgICAgICAgR01feG1saHR0cFJlcXVlc3QKLy8gQG1hdGNoICAgICAgICBodHRwczovL3d3dy5jNWdhbWUuY29tL2NzZ28vZGVmYXVsdC8qCi8vIEBtYXRjaCAgICAgICAgaHR0cHM6Ly93d3cuaWd4ZS5jbi9jc2dvLyoKLy8gQG1hdGNoICAgICAgICBodHRwczovL2J1ZmYuMTYzLmNvbS9tYXJrZXQvP2dhbWU9Y3NnbyoKLy8gQG1hdGNoICAgICAgICBodHRwczovL3d3dy52NWZveC5jb20vY3NnbyoKLy8gQHJlcXVpcmUgICAgICBodHRwczovL2Nkbi5ib290Y3NzLmNvbS9qcXVlcnkvMy4zLjEvanF1ZXJ5Lm1pbi5qcwovLyBAbmFtZXNwYWNlIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvdXNlcnMvMjA5NzY2Ci8vID09L1VzZXJTY3JpcHQ9PQoKLy/ljrvpmaTlkI3lrZfkuK3nmoTmiYDmnInnqbrmoLwKZnVuY3Rpb24gVHJpbShzdHIpIHsKICAgIHJldHVybiBzdHIucmVwbGFjZSgvXHMqL2csICIiKTsKfQoKLy/nlKjmnaXmm7/ku6NHTV9hZGRTdHlsZeeahOaWueazlQpmdW5jdGlvbiBhZGRTdHlsZShjc3NTdHIpIHsKICAgIHRyeSB7CiAgICAgICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgICAgIG5vZGUudGV4dENvbnRlbnQgPSBjc3NTdHI7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignOnJvb3QnKS5hcHBlbmRDaGlsZChub2RlKTsKICAgIH0gY2F0Y2ggKGUpIHsgfQp9CgovL+eUn+aIkOihqOWNleWGheWuueeahGpzb27nu5PmnoTkvZMKJC5mbi5zZXJpYWxpemVPYmplY3QgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgbyA9IHt9OwogICAgdmFyIGEgPSB0aGlzLnNlcmlhbGl6ZUFycmF5KCk7CiAgICAkLmVhY2goYSwKICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAob1t0aGlzLm5hbWVdICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgaWYgKCFvW3RoaXMubmFtZV0ucHVzaCkgewogICAgICAgICAgICAgICAgb1t0aGlzLm5hbWVdID0gW29bdGhpcy5uYW1lXV07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb1t0aGlzLm5hbWVdLnB1c2godGhpcy52YWx1ZSB8fCAnJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgb1t0aGlzLm5hbWVdID0gdGhpcy52YWx1ZSB8fCAnJzsKICAgICAgICB9CiAgICB9KTsKICAgIHJldHVybiBvOwp9OwoKLy9JR1hF5LiK55qE55Sf5oiQ5LiL5LiA6aG16ZO+5o6l55qE5Ye95pWwCmZ1bmN0aW9uIElHWEVfZ2VuX3VybCh1cmwsIHBhcmFtcykgewogICAgdmFyIG5ld19wYXJhbXMgPSB7fTsKICAgIHZhciBuZXdfcGFyYW1zX2xlbmd0aCA9IDA7CiAgICBmb3IgKHZhciBrZXkgaW4gcGFyYW1zKSB7CiAgICAgICAgaWYgKHBhcmFtc1trZXldKSB7CiAgICAgICAgICAgIG5ld19wYXJhbXNba2V5XSA9IHBhcmFtc1trZXldOwogICAgICAgICAgICBuZXdfcGFyYW1zX2xlbmd0aCArPSAxOwogICAgICAgIH0KICAgIH0KICAgIGlmIChuZXdfcGFyYW1zX2xlbmd0aCA8PSAwKSB7CiAgICAgICAgcmV0dXJuIHVybDsKICAgIH0KCiAgICByZXR1cm4gdXJsICsgJz8nICsgalF1ZXJ5LnBhcmFtKG5ld19wYXJhbXMpOwp9OwoKJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkgewogICAgdmFyIG15U2NyaXB0U3R5bGUgPSAnLm15VGl0bGUge2ZvbnQtd2VpZ2h0OiBib2xkO30gXAogICAgICAgICAgICAgICAgICAgICAgICAubXlTdW0ge2NvbG9yOiAjNDI5NjA1O31cCiAgICAgICAgICAgICAgICAgICAgICAgIC5teVByaWNle2NvbG9yOiAjMGI4NGQzO31cCiAgICAgICAgICAgICAgICAgICAgICAgIC5jNWxpe21hcmdpbjogMHB4IWltcG9ydGFudDt3aGl0ZS1zcGFjZTogbm93cmFwOyBmb250LXNpemU6IDEycHg7fVwKICAgICAgICAgICAgICAgICAgICAgICAgLmlnbGl7cGFkZGluZzo0cHg7IGZvbnQtc2l6ZTogMTJweDsgd2hpdGUtc3BhY2U6IG5vd3JhcDt9XAogICAgICAgICAgICAgICAgICAgICAgICAuYnVmZmxpeyB3aWR0aDphdXRvIWltcG9ydGFudDsgaGVpZ2h0OiBhdXRvIWltcG9ydGFudDsgZmxvYXQ6bm9uZSFpbXBvcnRhbnQ7IG1hcmdpbjogMHB4IWltcG9ydGFudDsgcGFkZGluZzo0cHghaW1wb3J0YW50OyBmb250LXNpemU6IDEycHg7IHdoaXRlLXNwYWNlOiBub3dyYXA7IGJvcmRlcjogaW5oZXJpdCFpbXBvcnRhbnQ7IGJvcmRlci1yYWRpdXM6IDAhaW1wb3J0YW50OyBiYWNrZ3JvdW5kOiAjOTU5NTk1IWltcG9ydGFudDsgfVwKICAgICAgICAgICAgICAgICAgICAgICAgLmJ1ZmZsaSBhe2JhY2tncm91bmQ6ICM5NTk1OTUhaW1wb3J0YW50OyB0ZXh0LWFsaWduOiBsZWZ0IWltcG9ydGFudDt9XAogICAgICAgICAgICAgICAgICAgICAgICAudjVsaSB7cGFkZGluZzogNHB4OyBmb250LXNpemU6IDEycHg7IHdoaXRlLXNwYWNlOiBub3dyYXA7fSc7CiAgICBteVNjcmlwdFN0eWxlID0gbXlTY3JpcHRTdHlsZSArICcvKiDlrrnlmaggPGRpdj4gLSDpnIDopoHlrprkvY3kuIvmi4nlhoXlrrkgKi9cCiAgICAuZHJvcGRvd24ge1wKICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XAogICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcCiAgICB9XApcCiAgICAvKiDkuIvmi4nlhoXlrrkgKOm7mOiupOmakOiXjykgKi9cCiAgICAuaWd4ZS1kcm9wZG93bi1jb250ZW50IHtcCiAgICAgICAgZGlzcGxheTogbm9uZTtcCiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1wKICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWMyNzM0IWltcG9ydGFudDtcCiAgICAgICAgbWluLXdpZHRoOiAxNjBweDtcCiAgICAgICAgYm94LXNoYWRvdzogMHB4IDhweCAxNnB4IDBweCByZ2JhKDAsMCwwLDAuMik7XAogICAgICAgIHotaW5kZXg6IDk5OTk7XAogICAgfVwKXAogICAgLyog5LiL5ouJ6I+c5Y2V55qE6ZO+5o6lICovXAogICAgLmlneGUtZHJvcGRvd24tY29udGVudCBhIHtcCiAgICAgICAgY29sb3I6IHdoaXRlO1wKICAgICAgICBwYWRkaW5nOiAxMnB4IDE2cHg7XAogICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcCiAgICAgICAgZGlzcGxheTogYmxvY2s7XAogICAgfVwKICAgIFwKICAgIC8qIOm8oOagh+enu+S4iuWOu+WQjuS/ruaUueS4i+aLieiPnOWNlemTvuaOpeminOiJsiAqL1wKICAgIC5pZ3hlLWRyb3Bkb3duLWNvbnRlbnQgYTpob3ZlciB7YmFja2dyb3VuZC1jb2xvcjogIzMxM2Q0ZCFpbXBvcnRhbnQ7fVwKICAgIFwKICAgIC8qIOS4i+aLieWGheWuuSAo6buY6K6k6ZqQ6JePKSAqL1wKICAgIC5idWZmLWRyb3Bkb3duLWNvbnRlbnQge1wKICAgICAgICBkaXNwbGF5OiBub25lO1wKICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XAogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMxYzI3MzQhaW1wb3J0YW50O1wKICAgICAgICBtaW4td2lkdGg6IDE2MHB4O1wKICAgICAgICBib3gtc2hhZG93OiAwcHggOHB4IDE2cHggMHB4IHJnYmEoMCwwLDAsMC4yKTtcCiAgICAgICAgei1pbmRleDogOTk5OTtcCiAgICB9XApcCiAgICAvKiDkuIvmi4noj5zljZXnmoTpk77mjqUgKi9cCiAgICAuYnVmZi1kcm9wZG93bi1jb250ZW50IGEge1wKICAgICAgICBjb2xvcjogd2hpdGU7XAogICAgICAgIHBhZGRpbmc6IDEycHggMTZweDtcCiAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1wKICAgICAgICBkaXNwbGF5OiBibG9jaztcCiAgICB9XAogICAgXAogICAgLyog6byg5qCH56e75LiK5Y675ZCO5L+u5pS55LiL5ouJ6I+c5Y2V6ZO+5o6l6aKc6ImyICovXAogICAgLmJ1ZmYtZHJvcGRvd24tY29udGVudCBhOmhvdmVyIHtiYWNrZ3JvdW5kLWNvbG9yOiAjZjJlZmVmIWltcG9ydGFudDt9XAogICAgXAogICAgLyog5LiL5ouJ5YaF5a65ICjpu5jorqTpmpDol48pICovXAogICAgLnY1LWRyb3Bkb3duLWNvbnRlbnQge1wKICAgICAgICBkaXNwbGF5OiBub25lO1wKICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XAogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMxYzI3MzQhaW1wb3J0YW50O1wKICAgICAgICBtaW4td2lkdGg6IDE2MHB4O1wKICAgICAgICBib3gtc2hhZG93OiAwcHggOHB4IDE2cHggMHB4IHJnYmEoMCwwLDAsMC4yKTtcCiAgICAgICAgei1pbmRleDogOTk5OTtcCiAgICB9XApcCiAgICAvKiDkuIvmi4noj5zljZXnmoTpk77mjqUgKi9cCiAgICAudjUtZHJvcGRvd24tY29udGVudCBhIHtcCiAgICAgICAgY29sb3I6IHdoaXRlO1wKICAgICAgICBwYWRkaW5nOiAxMnB4IDE2cHg7XAogICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcCiAgICAgICAgZGlzcGxheTogYmxvY2s7XAogICAgfVwKICAgIFwKICAgIC8qIOm8oOagh+enu+S4iuWOu+WQjuS/ruaUueS4i+aLieiPnOWNlemTvuaOpeminOiJsiAqL1wKICAgIC52NS1kcm9wZG93bi1jb250ZW50IGE6aG92ZXIge2JhY2tncm91bmQtY29sb3I6ICMzMTNkNGQhaW1wb3J0YW50O30nOwogICAgYWRkU3R5bGUobXlTY3JpcHRTdHlsZSk7CgogICAgaWYgKGxvY2F0aW9uLmhyZWYuaW5kZXhPZignYzVnYW1lLmNvbScpID4gMCkgewogICAgICAgIGM1KCk7CiAgICB9CiAgICBlbHNlIGlmIChsb2NhdGlvbi5ocmVmLmluZGV4T2YoJ2lneGUuY24nKSA+IDApIHsKICAgICAgICBpZ3hlKCk7CiAgICB9CiAgICBlbHNlIGlmIChsb2NhdGlvbi5ocmVmLmluZGV4T2YoJ2J1ZmYuMTYzLmNvbScpID4gMCkgewogICAgICAgIGJ1ZmYoKTsKICAgIH0KICAgIGVsc2UgaWYgKGxvY2F0aW9uLmhyZWYuaW5kZXhPZigndjVmb3guY29tJykgPiAwKSB7CiAgICAgICAgdjVmb3goKTsKICAgIH0KfSk7CgpmdW5jdGlvbiBhZGRDNShjNVVSTCwgbGksIGl0ZW1OYW1lKSB7CiAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICB1cmw6IGM1VVJMLAogICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIHZhciBkb2MgPSAobmV3IERPTVBhcnNlcikucGFyc2VGcm9tU3RyaW5nKHJlc3BvbnNlLnJlc3BvbnNlVGV4dCwgJ3RleHQvaHRtbCcpOwogICAgICAgICAgICB2YXIgYm9keSA9IGRvYy5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7CiAgICAgICAgICAgIHZhciBpdGVtcyA9ICQoYm9keSkuZmluZCgnLnRhYi1jb250ZW50JykuZmluZCgnbGkuc2VsbGluZycpOwogICAgICAgICAgICB2YXIgaGFzTmV4dFBhZ2UgPSAkKGJvZHkpLmZpbmQoJy5wYWdpbmF0aW9uJykuZmluZCgnLm5leHQnKS5sZW5ndGggPT0gMCA/IGZhbHNlIDogdHJ1ZTsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdmFyIG5hbWUgPSAkKGl0ZW1zW2ldKS5maW5kKCcubmFtZScpLmZpbmQoJ2EnKS5maW5kKCdzcGFuJykudGV4dCgpOwogICAgICAgICAgICAgICAgaWYgKFRyaW0obmFtZSkgPT0gVHJpbShpdGVtTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gJ2h0dHBzOi8vd3d3LmM1Z2FtZS5jb20nICsgJChpdGVtc1tpXSkuZmluZCgnYScpLmF0dHIoJ2hyZWYnKTsKICAgICAgICAgICAgICAgICAgICB2YXIgc3VtID0gJChpdGVtc1tpXSkuZmluZCgnLmluZm8nKS5maW5kKCcubnVtJykudGV4dCgpLnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICB2YXIgcHJpY2UgPSAkKGl0ZW1zW2ldKS5maW5kKCcuaW5mbycpLmZpbmQoJy5wdWxsLWxlZnQnKS5maW5kKCcucHJpY2UnKS50ZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgJChsaSkuaHRtbCgnPGEgaHJlZj0iJyArIHVybCArICciIHN0eWxlPSJwYWRkaW5nOiAwcHgiPjxzcGFuIGNsYXNzPSJteVRpdGxlIj5DNe+8mjwvc3Bhbj4nICsgJ+WcqOWUruaVsOmHj++8mjxzcGFuIGNsYXNzPSJteVN1bSI+JyArIHN1bSArICc8L3NwYW4+5ZSu5Lu377yaPHNwYW4gY2xhc3M9Im15UHJpY2UiPicgKyBwcmljZSArICc8L3NwYW4+PC9hPicpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWhhc05leHRQYWdlKSAkKGxpKS5odG1sKCc8YSBocmVmPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIHN0eWxlPSJwYWRkaW5nOiAwcHgiPjxzcGFuIGNsYXNzPSJteVRpdGxlIj5DNe+8mjwvc3Bhbj48c3BhbiBzdHlsZT0iY29sb3I6ICNGRjAwMDAiPuafpeaJvuS4jeWIsOaVsOaNru+8gTwvc3Bhbj48L2E+Jyk7ICAvL+iLpeayoeacieS4i+S4gOmhteWImeWPr+S7peWIpOaWreayoeacieivpeeJqeWTgeeahOaVsOaNrgogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciBjdXJfcGFnZSA9ICQoYm9keSkuZmluZCgnLnBhZ2luYXRpb24nKS5maW5kKCcuYWN0aXZlJykuZmluZCgnYScpLnRleHQoKTsKICAgICAgICAgICAgICAgIHZhciBuZXh0X3BhZ2UgPSBjdXJfcGFnZSArIDE7CiAgICAgICAgICAgICAgICB2YXIgdXJsID0gJ2h0dHBzOi8vd3d3LmM1Z2FtZS5jb20vY3Nnby9kZWZhdWx0L3Jlc3VsdC5odG1sP2s9JyArIGl0ZW1OYW1lICsgJyZwYWdlPScgKyBuZXh0X3BhZ2U7CiAgICAgICAgICAgICAgICBhZGRDNSh1cmwsIGxpLCBpdGVtTmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KQp9CgpmdW5jdGlvbiBhZGRJR1hFKGlneGVVUkwsIGxpLCBpdGVtTmFtZSkgewogICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgdXJsOiBpZ3hlVVJMLAogICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIHZhciBkb2MgPSAobmV3IERPTVBhcnNlcikucGFyc2VGcm9tU3RyaW5nKHJlc3BvbnNlLnJlc3BvbnNlVGV4dCwgJ3RleHQvaHRtbCcpOwogICAgICAgICAgICB2YXIgYm9keSA9IGRvYy5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7CiAgICAgICAgICAgIHZhciBpdGVtcyA9ICQoYm9keSkuZmluZCgiLmRhdGFMaXN0IikuZmluZCgnLnNpbmdsZScpOwogICAgICAgICAgICB2YXIgaGFzTmV4dFBhZ2UgPSAkKGJvZHkpLmZpbmQoJyNwYWdlLWNvbnRlbnQgLm5leHQnKS5sZW5ndGggPT0gMCA/IGZhbHNlIDogdHJ1ZTsgICAvL+WIpOaWreaYr+WQpuacieS4i+S4gOmhtQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICQoaXRlbXNbaV0pLmZpbmQoJ2Rpdi5uYW1lJykudGV4dCgpLnRyaW0oKTsKICAgICAgICAgICAgICAgIGlmIChUcmltKG5hbWUpID09IFRyaW0oaXRlbU5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9ICdodHRwczovL3d3dy5pZ3hlLmNuJyArICQoaXRlbXNbaV0pLmF0dHIoJ2hyZWYnKTsKICAgICAgICAgICAgICAgICAgICB2YXIgc3VtID0gJChpdGVtc1tpXSkuZmluZCgnZGl2LmNsZWFyZml4JykuZmluZCgnZGl2LnN1bScpLnRleHQoKS50cmltKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHByaWNlID0gJChpdGVtc1tpXSkuZmluZCgnZGl2LmNsZWFyZml4JykuZmluZCgnZGl2LnByaWNlJykuZmluZCgnc3BhbicpLnRleHQoKS50cmltKCkgKyAkKGl0ZW1zW2ldKS5maW5kKCdkaXYuY2xlYXJmaXgnKS5maW5kKCdkaXYucHJpY2UnKS5maW5kKCdzdWInKS50ZXh0KCkudHJpbSgpOwogICAgICAgICAgICAgICAgICAgICQobGkpLmh0bWwoJzxhIGhyZWY9IicgKyB1cmwgKyAnIiBzdHlsZT0icGFkZGluZzogMHB4Ij48c3BhbiBjbGFzcz0ibXlUaXRsZSI+SUdYRe+8mjwvc3Bhbj4nICsgJ+WcqOWUruaVsOmHj++8mjxzcGFuIGNsYXNzPSJteVN1bSI+JyArIHN1bSArICc8L3NwYW4+5ZSu5Lu377yaPHNwYW4gY2xhc3M9Im15UHJpY2UiPicgKyBwcmljZSArICc8L3NwYW4+PC9hPicpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWhhc05leHRQYWdlKSAkKGxpKS5odG1sKCc8YSBocmVmPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIHN0eWxlPSJwYWRkaW5nOiAwcHgiPjxzcGFuIGNsYXNzPSJteVRpdGxlIj5JR1hF77yaPC9zcGFuPjxzcGFuIHN0eWxlPSJjb2xvcjogI0ZGMDAwMCI+5p+l5om+5LiN5Yiw5pWw5o2u77yBPC9zcGFuPjwvYT4nKTsgIC8v6Iul5rKh5pyJ5LiL5LiA6aG15YiZ5Y+v5Lul5Yik5pat5rKh5pyJ6K+l54mp5ZOB55qE5pWw5o2uCiAgICAgICAgICAgIGVsc2UgeyAgLy/otbBpZ3hl572R56uZ55qE5rWB56iL5Yiw5LiL5LiA6aG15p+l6K+iCiAgICAgICAgICAgICAgICB2YXIgcGFnZV9ubyA9ICQoYm9keSkuZmluZCgnI3BhZ2UtY29udGVudCAubmV4dCcpLmF0dHIoInBhZ2Vfbm8iKTsgIC8v6I635Y+W5LiL5LiA6aG155qE6aG15Y+3CiAgICAgICAgICAgICAgICB2YXIgdXJsX3BhcmFtID0gJChib2R5KS5maW5kKCcjcGFyYW1zX2Zvcm0nKS5zZXJpYWxpemVPYmplY3QoKTsgLy9wYXJhbXNfZm9ybeaYr+e9keermeS4iueahOS4gOS4qumakOiXj+WFg+e0oO+8jOWtmOaUvuWQhOenjeihqOWNleS/oeaBrwogICAgICAgICAgICAgICAgdXJsX3BhcmFtWydwYWdlX25vJ10gPSBwYWdlX25vOyAvL+aKiumHjOmdoueahHBhZ2Vfbm/pobnmjaLmiJDkuIvkuIDpobUKICAgICAgICAgICAgICAgIHVybF9wYXJhbVsnX3QnXSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOyAvL+W+l+WIsOW9k+WJjeaXtumXtOaIswogICAgICAgICAgICAgICAgdmFyIHVybCA9ICIvY3Nnby83MzAiOwogICAgICAgICAgICAgICAgdXJsID0gJ2h0dHBzOi8vd3d3LmlneGUuY24nICsgSUdYRV9nZW5fdXJsKHVybCwgdXJsX3BhcmFtKTsKICAgICAgICAgICAgICAgIGFkZElHWEUodXJsLCBsaSwgaXRlbU5hbWUpOyAvL+mAkuW9kuiwg+eUqOivpeWHveaVsOebtOWIsOaJvuWIsOivpeeJqeWTgQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7Cn0KCmZ1bmN0aW9uIGFkZEJVRkYoYnVmZlVSTCwgbGksIGl0ZW1OYW1lKSB7CiAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICB1cmw6IGJ1ZmZVUkwsCiAgICAgICAgb25sb2FkOiBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgICAgICB2YXIgZGF0YSA9ICQucGFyc2VKU09OKHJlc3BvbnNlLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgIGRhdGEgPSBkYXRhLmRhdGE7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBkYXRhLml0ZW1zICE9ICd1bmRlZmluZWQnICYmIGkgPCBkYXRhLml0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGRhdGEuaXRlbXNbaV0ubmFtZTsKICAgICAgICAgICAgICAgIGlmIChUcmltKG5hbWUpID09IFRyaW0oaXRlbU5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9ICdodHRwczovL2J1ZmYuMTYzLmNvbS9tYXJrZXQvZ29vZHM/Z29vZHNfaWQ9JyArIGRhdGEuaXRlbXNbaV0uaWQgKyAnJmZyb209bWFya2V0I3RhYj1zZWxsaW5nJzsKICAgICAgICAgICAgICAgICAgICB2YXIgc3VtID0gZGF0YS5pdGVtc1tpXS5zZWxsX251bTsKICAgICAgICAgICAgICAgICAgICB2YXIgcHJpY2UgPSAn77+lJyArIGRhdGEuaXRlbXNbaV0uc2VsbF9taW5fcHJpY2U7CiAgICAgICAgICAgICAgICAgICAgJChsaSkuaHRtbCgnPGEgaHJlZj0iJyArIHVybCArICciIHN0eWxlPSJwYWRkaW5nOiAwcHgiPjxzcGFuIGNsYXNzPSJteVRpdGxlIj5CVUZG77yaPC9zcGFuPicgKyAn5Zyo5ZSu5pWw6YeP77yaPHNwYW4gY2xhc3M9Im15U3VtIj4nICsgc3VtICsgJzwvc3Bhbj7llK7ku7fvvJo8c3BhbiBjbGFzcz0ibXlQcmljZSI+JyArIHByaWNlICsgJzwvc3Bhbj48L2E+Jyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciB0b3RhbF9wYWdlcyA9IGRhdGEudG90YWxfcGFnZTsKICAgICAgICAgICAgdmFyIGN1cl9wYWdlID0gZGF0YS5wYWdlX251bTsKICAgICAgICAgICAgaWYgKGN1cl9wYWdlID49IHRvdGFsX3BhZ2VzKSAkKGxpKS5odG1sKCc8YSBocmVmPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIHN0eWxlPSJwYWRkaW5nOiAwcHgiPjxzcGFuIGNsYXNzPSJteVRpdGxlIj5CVUZG77yaPC9zcGFuPjxzcGFuIHN0eWxlPSJjb2xvcjogI0ZGMDAwMCI+5p+l5om+5LiN5Yiw5pWw5o2u77yBPC9zcGFuPjwvYT4nKTsKICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgbmV4dF9wYWdlID0gY3VyX3BhZ2UgKyAxOwogICAgICAgICAgICAgICAgdmFyIHVybCA9ICdodHRwczovL2J1ZmYuMTYzLmNvbS9hcGkvbWFya2V0L2dvb2RzP2dhbWU9Y3NnbyZwYWdlX251bT0nICsgbmV4dF9wYWdlICsgJyZzZWFyY2g9JyArIGl0ZW1OYW1lLnRyaW0oKSArICcmXz0nICsgKG5ldyBEYXRlKCkpLnZhbHVlT2YoKS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgYWRkQlVGRih1cmwsIGxpLCBpdGVtTmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKfQoKZnVuY3Rpb24gYWRkVjUodjVVUkwsIGxpLCBpdGVtTmFtZSkgewogICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgdXJsOiB2NVVSTCwKICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICB2YXIgZG9jID0gKG5ldyBET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhyZXNwb25zZS5yZXNwb25zZVRleHQsICd0ZXh0L2h0bWwnKTsKICAgICAgICAgICAgdmFyIGJvZHkgPSBkb2MucXVlcnlTZWxlY3RvcignYm9keScpOwogICAgICAgICAgICB2YXIgaXRlbXMgPSAkKGJvZHkpLmZpbmQoIi5saXN0LWJveCIpLmZpbmQoJ2EnKTsKICAgICAgICAgICAgdmFyIGhhc05leHRQYWdlID0gJChib2R5KS5maW5kKCcubGF5cGFnZV9uZXh0JykubGVuZ3RoID09IDAgPyBmYWxzZSA6IHRydWU7ICAgLy/liKTmlq3mmK/lkKbmnInkuIvkuIDpobUKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdmFyIG5hbWUgPSAkKGl0ZW1zW2ldKS5maW5kKCdkaXYubGlzdC1pdGVtLXRvcCcpLmZpbmQoJ2Rpdi5saXN0LXRleHQtYm94JykuZmluZCgnaDUnKS50ZXh0KCkudHJpbSgpOwogICAgICAgICAgICAgICAgaWYgKFRyaW0obmFtZSkgPT0gVHJpbShpdGVtTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gJ2h0dHBzOi8vd3d3LnY1Zm94LmNvbScgKyAkKGl0ZW1zW2ldKS5hdHRyKCdocmVmJyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN1bSA9ICQoaXRlbXNbaV0pLmZpbmQoJ2Rpdi5saXN0LWl0ZW0tYm90JykuZmluZCgnZGl2LnInKS50ZXh0KCkudHJpbSgpOwogICAgICAgICAgICAgICAgICAgIHZhciBwcmljZSA9ICQoaXRlbXNbaV0pLmZpbmQoJ2Rpdi5saXN0LWl0ZW0tdG9wJykuZmluZCgnZGl2Lmxpc3QtdGV4dC1ib3gnKS5maW5kKCdwJykuZmluZCgnc3BhbicpLnRleHQoKS50cmltKCk7CiAgICAgICAgICAgICAgICAgICAgJChsaSkuaHRtbCgnPGEgaHJlZj0iJyArIHVybCArICciIHN0eWxlPSJwYWRkaW5nOiAwcHgiPjxzcGFuIGNsYXNzPSJteVRpdGxlIj5WNUZPWO+8mjwvc3Bhbj4nICsgJ+WcqOWUruaVsOmHj++8mjxzcGFuIGNsYXNzPSJteVN1bSI+JyArIHN1bSArICc8L3NwYW4+5ZSu5Lu377yaPHNwYW4gY2xhc3M9Im15UHJpY2UiPicgKyBwcmljZSArICc8L3NwYW4+PC9hPicpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWhhc05leHRQYWdlKSAkKGxpKS5odG1sKCc8YSBocmVmPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIHN0eWxlPSJwYWRkaW5nOiAwcHgiPjxzcGFuIGNsYXNzPSJteVRpdGxlIj5WNUZPWO+8mjwvc3Bhbj48c3BhbiBzdHlsZT0iY29sb3I6ICNGRjAwMDAiPuafpeaJvuS4jeWIsOaVsOaNru+8gTwvc3Bhbj48L2E+Jyk7CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdmFyIGN1cl9wYWdlID0gJCgnLmxheXBhZ2VfY3VycicpLnRleHQoKTsKICAgICAgICAgICAgICAgIHZhciBuZXh0X3BhZ2UgPSBjdXJfcGFnZSArIDE7CiAgICAgICAgICAgICAgICB2YXIgdXJsID0gJ2h0dHBzOi8vd3d3LnY1Zm94LmNvbS9jc2dvLzAtMD9rZXl3b3JkPScgKyBpdGVtTmFtZSArICcmcGFnZU51bT0nICsgbmV4dF9wYWdlOwogICAgICAgICAgICAgICAgYWRkVjUodXJsLCBsaSwgaXRlbU5hbWUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7Cn0KCmZ1bmN0aW9uIGM1KCkgewogICAgJCgnLnRhYi1jb250ZW50Jykub24oJ21vdXNlZW50ZXInLCAnbGkuc2VsbGluZycsIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCd1bCcpLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgJCh0aGlzKS5maW5kKCd1bCcpLmNzcygnbWF4LWhlaWdodCcsICdub25lJyk7CiAgICAgICAgICAgICQodGhpcykuZmluZCgndWwnKS5jc3MoJ292ZXJmbG93JywgJ3Zpc2libGUnKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAkKHRoaXMpLmF0dHIoJ21vdXNlb3ZlcicsICd0cnVlJyk7ICAgLy/lvZPliY3pvKDmoIflnKjor6Xnianlk4HkuIoKICAgICAgICAvL+aWsOWIm+W7uuS4gOS4quWIl+ihqOadpeWtmOaUvuWQhOS4qumlsOWTgee9keermeeahOebuOWQjOeJqeWTgeaVsOaNrgogICAgICAgIHZhciBsaXN0ID0gJCgnPHVsIGNsYXNzPSJybS1tZW51IHJtLWNzcy1hbmltYXRlIHJtLW1lbnUtZXhwYW5kZWQiIGFyaWEtaGlkZGVuPSJmYWxzZSIgc3R5bGU9Im1heC1oZWlnaHQ6IDBweDsgZGlzcGxheTogYmxvY2s7IG92ZXJmbG93OiBoaWRkZW47IHBhZGRpbmc6IDBweDsgcG9zaXRpb246IGFic29sdXRlOyB6LWluZGV4OiA5OTk5OyBsZWZ0Oi0wLjEyNWVtIj48L3VsPicpOwogICAgICAgIHZhciBpdGVtTmFtZSA9ICQodGhpcykuZmluZCgnc3Bhbi50ZXh0LXVuaXF1ZScpLnRleHQoKTsgLy/ojrflj5bor6Xnianlk4HnmoTlkI3lrZcKCiAgICAgICAgdmFyIGlneGVVUkwgPSAnaHR0cHM6Ly93d3cuaWd4ZS5jbi9jc2dvLzczMD9rZXl3b3JkPScgKyBpdGVtTmFtZTsKICAgICAgICB2YXIgaWd4ZUxpID0gJCgnPGxpIGNsYXNzPSJybS1tZW51LWl0ZW0gYzVsaSI+PHNwYW4gY2xhc3M9Im15VGl0bGUiPklHWEXvvJo8L3NwYW4+PHNwYW4+6L295YWl5LitLi4uPC9saT4nKTsKICAgICAgICAkKGxpc3QpLmFwcGVuZChpZ3hlTGkpOwogICAgICAgIGFkZElHWEUoaWd4ZVVSTCwgaWd4ZUxpLCBpdGVtTmFtZSk7ICAvL+iOt+WPlmlneGXkuIrnmoTmlbDmja4KCiAgICAgICAgdmFyIGJ1ZmZVUkwgPSAnaHR0cHM6Ly9idWZmLjE2My5jb20vYXBpL21hcmtldC9nb29kcz9nYW1lPWNzZ28mcGFnZV9udW09MSZzZWFyY2g9JyArIGl0ZW1OYW1lLnRyaW0oKSArICcmXz0nICsgKG5ldyBEYXRlKCkpLnZhbHVlT2YoKS50b1N0cmluZygpOwogICAgICAgIHZhciBidWZmTGkgPSAkKCc8bGkgY2xhc3M9InJtLW1lbnUtaXRlbSBjNWxpIj48c3BhbiBjbGFzcz0ibXlUaXRsZSI+QlVGRu+8mjwvc3Bhbj48c3Bhbj7ovb3lhaXkuK0uLi48L2xpPicpOwogICAgICAgICQobGlzdCkuYXBwZW5kKGJ1ZmZMaSk7CiAgICAgICAgYWRkQlVGRihidWZmVVJMLCBidWZmTGksIGl0ZW1OYW1lKTsgIC8v6I635Y+WQlVGRuS4iueahOaVsOaNrgoKICAgICAgICB2YXIgdjVVUkwgPSAnaHR0cHM6Ly93d3cudjVmb3guY29tL2NzZ28vMC0wP2tleXdvcmQ9JyArIGl0ZW1OYW1lOwogICAgICAgIHZhciB2NUxpID0gJCgnPGxpIGNsYXNzPSJybS1tZW51LWl0ZW0gYzVsaSI+PHNwYW4gY2xhc3M9Im15VGl0bGUiPkJVRkbvvJo8L3NwYW4+PHNwYW4+6L295YWl5LitLi4uPC9saT4nKTsKICAgICAgICAkKGxpc3QpLmFwcGVuZCh2NUxpKTsKICAgICAgICBhZGRWNSh2NVVSTCwgdjVMaSwgaXRlbU5hbWUpOyAgLy/ojrflj5ZWNUZPWOS4iueahOaVsOaNrgoKICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdtb3VzZW92ZXInKSA9PSAndHJ1ZScpIHsgICAvL+iLpem8oOagh+i/mOWcqOivpeeJqeWTgeS4iuWwseS4jemakOiXj+WImuWIm+W7uueahOWIl+ihqAogICAgICAgICAgICAkKGxpc3QpLmNzcygnbWF4LWhlaWdodCcsICdub25lJyk7CiAgICAgICAgICAgICQobGlzdCkuY3NzKCdvdmVyZmxvdycsICd2aXNpYmxlJyk7CiAgICAgICAgfQogICAgICAgICQodGhpcykuYXBwZW5kKGxpc3QpOwogICAgfSk7CgogICAgJCgnLnRhYi1jb250ZW50Jykub24oJ21vdXNlbGVhdmUnLCAnbGknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCQodGhpcykuZmluZCgndWwnKS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICQodGhpcykuZmluZCgndWwnKS5jc3MoJ21heC1oZWlnaHQnLCAnMHB4Jyk7CiAgICAgICAgICAgICQodGhpcykuZmluZCgndWwnKS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpOwogICAgICAgIH0KICAgICAgICAkKHRoaXMpLmF0dHIoJ21vdXNlb3ZlcicsICdmYWxzZScpOwogICAgfSk7Cn0KCmZ1bmN0aW9uIGlneGUoKSB7CiAgICAkKCcuZGF0YUxpc3QnKS5vbignbW91c2VlbnRlcicsICdhLnNpbmdsZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCdkaXYuaWd4ZS1kcm9wZG93bi1jb250ZW50JykubGVuZ3RoID4gMCkgewogICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2Rpdi5pZ3hlLWRyb3Bkb3duLWNvbnRlbnQnKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgJCh0aGlzKS5jc3MoewogICAgICAgICAgICBkaXNwbGF5OiAnaW5saW5lIC0gYmxvY2snCiAgICAgICAgfSk7CiAgICAgICAgJCh0aGlzKS5hdHRyKCdtb3VzZW92ZXInLCAndHJ1ZScpOyAgIC8v5b2T5YmN6byg5qCH5Zyo6K+l54mp5ZOB5LiKCgogICAgICAgIHZhciBsaXN0ID0gJCgnPGRpdiBjbGFzcz0iaWd4ZS1kcm9wZG93bi1jb250ZW50Ij48L2Rpdj4nKTsKICAgICAgICB2YXIgaXRlbU5hbWUgPSAkKHRoaXMpLmZpbmQoJ2Rpdi5uYW1lJykuYXR0cigndGl0bGUnKTsKCiAgICAgICAgdmFyIGM1VVJMID0gJ2h0dHBzOi8vd3d3LmM1Z2FtZS5jb20vY3Nnby9kZWZhdWx0L3Jlc3VsdC5odG1sP2s9JyArIGl0ZW1OYW1lICsgJyZwYWdlPTEnOwogICAgICAgIHZhciBjNUxpID0gJCgnPGxpIGNsYXNzPSJpZ2xpIj48c3BhbiBjbGFzcz0ibXlUaXRsZSI+QzXvvJo8L3NwYW4+PHNwYW4+6L295YWl5LitLi4uPC9saT4nKTsKICAgICAgICAkKGxpc3QpLmFwcGVuZChjNUxpKTsKICAgICAgICBhZGRDNShjNVVSTCwgYzVMaSwgaXRlbU5hbWUpOyAgLy/ojrflj5ZDNeS4iueahOaVsOaNrgoKICAgICAgICB2YXIgYnVmZlVSTCA9ICdodHRwczovL2J1ZmYuMTYzLmNvbS9hcGkvbWFya2V0L2dvb2RzP2dhbWU9Y3NnbyZwYWdlX251bT0xJnNlYXJjaD0nICsgaXRlbU5hbWUudHJpbSgpICsgJyZfPScgKyAobmV3IERhdGUoKSkudmFsdWVPZigpLnRvU3RyaW5nKCk7CiAgICAgICAgdmFyIGJ1ZmZMaSA9ICQoJzxsaSBjbGFzcz0iaWdsaSI+PHNwYW4gY2xhc3M9Im15VGl0bGUiPkJVRkbvvJo8L3NwYW4+PHNwYW4+6L295YWl5LitLi4uPC9saT4nKTsKICAgICAgICAkKGxpc3QpLmFwcGVuZChidWZmTGkpOwogICAgICAgIGFkZEJVRkYoYnVmZlVSTCwgYnVmZkxpLCBpdGVtTmFtZSk7ICAvL+iOt+WPlkJVRkbkuIrnmoTmlbDmja4KCiAgICAgICAgdmFyIHY1VVJMID0gJ2h0dHBzOi8vd3d3LnY1Zm94LmNvbS9jc2dvLzAtMD9rZXl3b3JkPScgKyBpdGVtTmFtZTsKICAgICAgICB2YXIgdjVMaSA9ICQoJzxsaSBjbGFzcz0iaWdsaSI+PHNwYW4gY2xhc3M9Im15VGl0bGUiPlY1Rk9Y77yaPC9zcGFuPjxzcGFuPui9veWFpeS4rS4uLjwvbGk+Jyk7CiAgICAgICAgJChsaXN0KS5hcHBlbmQodjVMaSk7CiAgICAgICAgYWRkVjUodjVVUkwsIHY1TGksIGl0ZW1OYW1lKTsgIC8v6I635Y+WVjVGT1jkuIrnmoTmlbDmja4KCiAgICAgICAgaWYgKCQodGhpcykuYXR0cignbW91c2VvdmVyJykgPT0gJ3RydWUnKSB7ICAgLy/oi6XpvKDmoIfov5jlnKjor6Xnianlk4HkuIrlsLHkuI3pmpDol4/liJrliJvlu7rnmoTliJfooagKICAgICAgICAgICAgJChsaXN0KS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTsKICAgICAgICB9CiAgICAgICAgJCh0aGlzKS5hcHBlbmQobGlzdCk7CiAgICB9KTsKCiAgICAkKCcuZGF0YUxpc3QnKS5vbignbW91c2VsZWF2ZScsICdhLnNpbmdsZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCdkaXYuaWd4ZS1kcm9wZG93bi1jb250ZW50JykubGVuZ3RoID4gMCkgewogICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2Rpdi5pZ3hlLWRyb3Bkb3duLWNvbnRlbnQnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgICQodGhpcykuYXR0cignbW91c2VvdmVyJywgJ2ZhbHNlJyk7CiAgICB9KTsKfQoKZnVuY3Rpb24gYnVmZigpIHsKICAgICQoJyNqX21hcmtldF9jYXJkJykub24oJ21vdXNlZW50ZXInLCAnI2pfbGlzdF9jYXJkIGxpOm5vdChbY2xhc3NdKScsIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCdkaXYuYnVmZi1kcm9wZG93bi1jb250ZW50JykubGVuZ3RoID4gMCkgewogICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2Rpdi5idWZmLWRyb3Bkb3duLWNvbnRlbnQnKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgJCh0aGlzKS5jc3MoewogICAgICAgICAgICBkaXNwbGF5OiAnaW5saW5lIC0gYmxvY2snCiAgICAgICAgfSk7CiAgICAgICAgJCh0aGlzKS5hdHRyKCdtb3VzZW92ZXInLCAndHJ1ZScpOyAgIC8v5b2T5YmN6byg5qCH5Zyo6K+l54mp5ZOB5LiKCgogICAgICAgIHZhciBsaXN0ID0gJCgnPGRpdiBjbGFzcz0iYnVmZi1kcm9wZG93bi1jb250ZW50Ij48L2Rpdj4nKTsKICAgICAgICB2YXIgaXRlbU5hbWUgPSAkKHRoaXMpLmZpbmQoJ2E6Zmlyc3QnKS5hdHRyKCd0aXRsZScpOwoKICAgICAgICB2YXIgYzVVUkwgPSAnaHR0cHM6Ly93d3cuYzVnYW1lLmNvbS9jc2dvL2RlZmF1bHQvcmVzdWx0Lmh0bWw/az0nICsgaXRlbU5hbWUgKyAnJnBhZ2U9MSc7CiAgICAgICAgdmFyIGM1TGkgPSAkKCc8bGkgY2xhc3M9ImJ1ZmZsaSI+PHNwYW4gY2xhc3M9Im15VGl0bGUiPkM177yaPC9zcGFuPjxzcGFuPui9veWFpeS4rS4uLjwvbGk+Jyk7CiAgICAgICAgJChsaXN0KS5hcHBlbmQoYzVMaSk7CiAgICAgICAgYWRkQzUoYzVVUkwsIGM1TGksIGl0ZW1OYW1lKTsgIC8v6I635Y+WQzXkuIrnmoTmlbDmja4KCiAgICAgICAgdmFyIGlneGVVUkwgPSAnaHR0cHM6Ly93d3cuaWd4ZS5jbi9jc2dvLzczMD9rZXl3b3JkPScgKyBpdGVtTmFtZTsKICAgICAgICB2YXIgaWd4ZUxpID0gJCgnPGxpIGNsYXNzPSJidWZmbGkiPjxzcGFuIGNsYXNzPSJteVRpdGxlIj5JR1hF77yaPC9zcGFuPjxzcGFuPui9veWFpeS4rS4uLjwvbGk+Jyk7CiAgICAgICAgJChsaXN0KS5hcHBlbmQoaWd4ZUxpKTsKICAgICAgICBhZGRJR1hFKGlneGVVUkwsIGlneGVMaSwgaXRlbU5hbWUpOyAgLy/ojrflj5ZpZ3hl5LiK55qE5pWw5o2uCgogICAgICAgIHZhciB2NVVSTCA9ICdodHRwczovL3d3dy52NWZveC5jb20vY3Nnby8wLTA/a2V5d29yZD0nICsgaXRlbU5hbWU7CiAgICAgICAgdmFyIHY1TGkgPSAkKCc8bGkgY2xhc3M9ImJ1ZmZsaSI+PHNwYW4gY2xhc3M9Im15VGl0bGUiPlY1Rk9Y77yaPC9zcGFuPjxzcGFuPui9veWFpeS4rS4uLjwvbGk+Jyk7CiAgICAgICAgJChsaXN0KS5hcHBlbmQodjVMaSk7CiAgICAgICAgYWRkVjUodjVVUkwsIHY1TGksIGl0ZW1OYW1lKTsgIC8v6I635Y+WVjVGT1jkuIrnmoTmlbDmja4KCiAgICAgICAgaWYgKCQodGhpcykuYXR0cignbW91c2VvdmVyJykgPT0gJ3RydWUnKSB7ICAgLy/oi6XpvKDmoIfov5jlnKjor6Xnianlk4HkuIrlsLHkuI3pmpDol4/liJrliJvlu7rnmoTliJfooagKICAgICAgICAgICAgJChsaXN0KS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTsKICAgICAgICB9CiAgICAgICAgJCh0aGlzKS5hcHBlbmQobGlzdCk7CiAgICB9KTsKCiAgICAkKCcjal9tYXJrZXRfY2FyZCcpLm9uKCdtb3VzZWxlYXZlJywgJyNqX2xpc3RfY2FyZCBsaTpub3QoW2NsYXNzXSknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCQodGhpcykuZmluZCgnZGl2LmJ1ZmYtZHJvcGRvd24tY29udGVudCcpLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdkaXYuYnVmZi1kcm9wZG93bi1jb250ZW50JykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAkKHRoaXMpLmF0dHIoJ21vdXNlb3ZlcicsICdmYWxzZScpOwogICAgfSk7Cn0KCmZ1bmN0aW9uIHY1Zm94KCkgewogICAgJCgnLmxpc3QtYm94Jykub24oJ21vdXNlZW50ZXInLCAnYS5saXN0LWl0ZW0nLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCQodGhpcykuZmluZCgnZGl2LnY1LWRyb3Bkb3duLWNvbnRlbnQnKS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICQodGhpcykuZmluZCgnZGl2LnY1LWRyb3Bkb3duLWNvbnRlbnQnKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgJCh0aGlzKS5jc3MoewogICAgICAgICAgICBkaXNwbGF5OiAnaW5saW5lIC0gYmxvY2snCiAgICAgICAgfSk7CiAgICAgICAgJCh0aGlzKS5hdHRyKCdtb3VzZW92ZXInLCAndHJ1ZScpOyAgIC8v5b2T5YmN6byg5qCH5Zyo6K+l54mp5ZOB5LiKCgogICAgICAgIHZhciBsaXN0ID0gJCgnPGRpdiBjbGFzcz0idjUtZHJvcGRvd24tY29udGVudCI+PC9kaXY+Jyk7CiAgICAgICAgdmFyIGl0ZW1OYW1lID0gJCh0aGlzKS5hdHRyKCd0aXRsZScpOwoKICAgICAgICB2YXIgYzVVUkwgPSAnaHR0cHM6Ly93d3cuYzVnYW1lLmNvbS9jc2dvL2RlZmF1bHQvcmVzdWx0Lmh0bWw/az0nICsgaXRlbU5hbWUgKyAnJnBhZ2U9MSc7CiAgICAgICAgdmFyIGM1TGkgPSAkKCc8bGkgY2xhc3M9InY1bGkiPjxhIGhyZWY9ImphdmFzY3JpcHQ6cmV0dXJuIGZhbHNlOyIgc3R5bGU9InBhZGRpbmc6IDBweCI+PHNwYW4gY2xhc3M9Im15VGl0bGUiPkM177yaPC9zcGFuPjxzcGFuPui9veWFpeS4rS4uLjwvYT48L2xpPicpOwogICAgICAgICQobGlzdCkuYXBwZW5kKGM1TGkpOwogICAgICAgIGFkZEM1KGM1VVJMLCBjNUxpLCBpdGVtTmFtZSk7ICAvL+iOt+WPlkM15LiK55qE5pWw5o2uCgogICAgICAgIHZhciBidWZmVVJMID0gJ2h0dHBzOi8vYnVmZi4xNjMuY29tL2FwaS9tYXJrZXQvZ29vZHM/Z2FtZT1jc2dvJnBhZ2VfbnVtPTEmc2VhcmNoPScgKyBpdGVtTmFtZS50cmltKCkgKyAnJl89JyArIChuZXcgRGF0ZSgpKS52YWx1ZU9mKCkudG9TdHJpbmcoKTsKICAgICAgICB2YXIgYnVmZkxpID0gJCgnPGxpIGNsYXNzPSJ2NWxpIj48YSBocmVmPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIHN0eWxlPSJwYWRkaW5nOiAwcHgiPjxzcGFuIGNsYXNzPSJteVRpdGxlIj5CVUZG77yaPC9zcGFuPjxzcGFuPui9veWFpeS4rS4uLjwvYT48L2xpPicpOwogICAgICAgICQobGlzdCkuYXBwZW5kKGJ1ZmZMaSk7CiAgICAgICAgYWRkQlVGRihidWZmVVJMLCBidWZmTGksIGl0ZW1OYW1lKTsgIC8v6I635Y+WQlVGRuS4iueahOaVsOaNrgoKICAgICAgICB2YXIgaWd4ZVVSTCA9ICdodHRwczovL3d3dy5pZ3hlLmNuL2NzZ28vNzMwP2tleXdvcmQ9JyArIGl0ZW1OYW1lOwogICAgICAgIHZhciBpZ3hlTGkgPSAkKCc8bGkgY2xhc3M9InY1bGkiPjxhIGhyZWY9ImphdmFzY3JpcHQ6cmV0dXJuIGZhbHNlOyIgc3R5bGU9InBhZGRpbmc6IDBweCI+PHNwYW4gY2xhc3M9Im15VGl0bGUiPklHWEXvvJo8L3NwYW4+PHNwYW4+6L295YWl5LitLi4uPC9hPjwvbGk+Jyk7CiAgICAgICAgJChsaXN0KS5hcHBlbmQoaWd4ZUxpKTsKICAgICAgICBhZGRJR1hFKGlneGVVUkwsIGlneGVMaSwgaXRlbU5hbWUpOyAgLy/ojrflj5ZpZ3hl5LiK55qE5pWw5o2uCgogICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ21vdXNlb3ZlcicpID09ICd0cnVlJykgeyAgIC8v6Iul6byg5qCH6L+Y5Zyo6K+l54mp5ZOB5LiK5bCx5LiN6ZqQ6JeP5Yia5Yib5bu655qE5YiX6KGoCiAgICAgICAgICAgICQobGlzdCkuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7CiAgICAgICAgfQogICAgICAgICQodGhpcykuYXBwZW5kKGxpc3QpOwogICAgfSk7CgogICAgJCgnLmxpc3QtYm94Jykub24oJ21vdXNlbGVhdmUnLCAnYS5saXN0LWl0ZW0nLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCQodGhpcykuZmluZCgnZGl2LnY1LWRyb3Bkb3duLWNvbnRlbnQnKS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICQodGhpcykuZmluZCgnZGl2LnY1LWRyb3Bkb3duLWNvbnRlbnQnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgICQodGhpcykuYXR0cignbW91c2VvdmVyJywgJ2ZhbHNlJyk7CiAgICB9KTsKfQ==","requires":[{"meta":{"name":"jquery.min.js","url":"https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js","ts":1608308914179,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2My4zLjEgfCAoYykgSlMgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovCiFmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijsib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lLmRvY3VtZW50P3QoZSwhMCk6ZnVuY3Rpb24oZSl7aWYoIWUuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50Iik7cmV0dXJuIHQoZSl9OnQoZSl9KCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKGUsdCl7InVzZSBzdHJpY3QiO3ZhciBuPVtdLHI9ZS5kb2N1bWVudCxpPU9iamVjdC5nZXRQcm90b3R5cGVPZixvPW4uc2xpY2UsYT1uLmNvbmNhdCxzPW4ucHVzaCx1PW4uaW5kZXhPZixsPXt9LGM9bC50b1N0cmluZyxmPWwuaGFzT3duUHJvcGVydHkscD1mLnRvU3RyaW5nLGQ9cC5jYWxsKE9iamVjdCksaD17fSxnPWZ1bmN0aW9uIGUodCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHQmJiJudW1iZXIiIT10eXBlb2YgdC5ub2RlVHlwZX0seT1mdW5jdGlvbiBlKHQpe3JldHVybiBudWxsIT10JiZ0PT09dC53aW5kb3d9LHY9e3R5cGU6ITAsc3JjOiEwLG5vTW9kdWxlOiEwfTtmdW5jdGlvbiBtKGUsdCxuKXt2YXIgaSxvPSh0PXR8fHIpLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO2lmKG8udGV4dD1lLG4pZm9yKGkgaW4gdiluW2ldJiYob1tpXT1uW2ldKTt0LmhlYWQuYXBwZW5kQ2hpbGQobykucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvKX1mdW5jdGlvbiB4KGUpe3JldHVybiBudWxsPT1lP2UrIiI6Im9iamVjdCI9PXR5cGVvZiBlfHwiZnVuY3Rpb24iPT10eXBlb2YgZT9sW2MuY2FsbChlKV18fCJvYmplY3QiOnR5cGVvZiBlfXZhciBiPSIzLjMuMSIsdz1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgdy5mbi5pbml0KGUsdCl9LFQ9L15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nO3cuZm49dy5wcm90b3R5cGU9e2pxdWVyeToiMy4zLjEiLGNvbnN0cnVjdG9yOncsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBvLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT9vLmNhbGwodGhpcyk6ZTwwP3RoaXNbZSt0aGlzLmxlbmd0aF06dGhpc1tlXX0scHVzaFN0YWNrOmZ1bmN0aW9uKGUpe3ZhciB0PXcubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGUpO3JldHVybiB0LnByZXZPYmplY3Q9dGhpcyx0fSxlYWNoOmZ1bmN0aW9uKGUpe3JldHVybiB3LmVhY2godGhpcyxlKX0sbWFwOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayh3Lm1hcCh0aGlzLGZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuY2FsbCh0LG4sdCl9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG8uYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5sZW5ndGgsbj0rZSsoZTwwP3Q6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4+PTAmJm48dD9bdGhpc1tuXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKCl9LHB1c2g6cyxzb3J0Om4uc29ydCxzcGxpY2U6bi5zcGxpY2V9LHcuZXh0ZW5kPXcuZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLHIsaSxvLGE9YXJndW1lbnRzWzBdfHx7fSxzPTEsdT1hcmd1bWVudHMubGVuZ3RoLGw9ITE7Zm9yKCJib29sZWFuIj09dHlwZW9mIGEmJihsPWEsYT1hcmd1bWVudHNbc118fHt9LHMrKyksIm9iamVjdCI9PXR5cGVvZiBhfHxnKGEpfHwoYT17fSkscz09PXUmJihhPXRoaXMscy0tKTtzPHU7cysrKWlmKG51bGwhPShlPWFyZ3VtZW50c1tzXSkpZm9yKHQgaW4gZSluPWFbdF0sYSE9PShyPWVbdF0pJiYobCYmciYmKHcuaXNQbGFpbk9iamVjdChyKXx8KGk9QXJyYXkuaXNBcnJheShyKSkpPyhpPyhpPSExLG89biYmQXJyYXkuaXNBcnJheShuKT9uOltdKTpvPW4mJncuaXNQbGFpbk9iamVjdChuKT9uOnt9LGFbdF09dy5leHRlbmQobCxvLHIpKTp2b2lkIDAhPT1yJiYoYVt0XT1yKSk7cmV0dXJuIGF9LHcuZXh0ZW5kKHtleHBhbmRvOiJqUXVlcnkiKygiMy4zLjEiK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLGlzUmVhZHk6ITAsZXJyb3I6ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKGUpfSxub29wOmZ1bmN0aW9uKCl7fSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0LG47cmV0dXJuISghZXx8IltvYmplY3QgT2JqZWN0XSIhPT1jLmNhbGwoZSkpJiYoISh0PWkoZSkpfHwiZnVuY3Rpb24iPT10eXBlb2Yobj1mLmNhbGwodCwiY29uc3RydWN0b3IiKSYmdC5jb25zdHJ1Y3RvcikmJnAuY2FsbChuKT09PWQpfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIGUpcmV0dXJuITE7cmV0dXJuITB9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oZSl7bShlKX0sZWFjaDpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MDtpZihDKGUpKXtmb3Iobj1lLmxlbmd0aDtyPG47cisrKWlmKCExPT09dC5jYWxsKGVbcl0scixlW3JdKSlicmVha31lbHNlIGZvcihyIGluIGUpaWYoITE9PT10LmNhbGwoZVtyXSxyLGVbcl0pKWJyZWFrO3JldHVybiBlfSx0cmltOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lPyIiOihlKyIiKS5yZXBsYWNlKFQsIiIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oZSx0KXt2YXIgbj10fHxbXTtyZXR1cm4gbnVsbCE9ZSYmKEMoT2JqZWN0KGUpKT93Lm1lcmdlKG4sInN0cmluZyI9PXR5cGVvZiBlP1tlXTplKTpzLmNhbGwobixlKSksbn0saW5BcnJheTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIG51bGw9PXQ/LTE6dS5jYWxsKHQsZSxuKX0sbWVyZ2U6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49K3QubGVuZ3RoLHI9MCxpPWUubGVuZ3RoO3I8bjtyKyspZVtpKytdPXRbcl07cmV0dXJuIGUubGVuZ3RoPWksZX0sZ3JlcDpmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByLGk9W10sbz0wLGE9ZS5sZW5ndGgscz0hbjtvPGE7bysrKShyPSF0KGVbb10sbykpIT09cyYmaS5wdXNoKGVbb10pO3JldHVybiBpfSxtYXA6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz0wLHM9W107aWYoQyhlKSlmb3Iocj1lLmxlbmd0aDtvPHI7bysrKW51bGwhPShpPXQoZVtvXSxvLG4pKSYmcy5wdXNoKGkpO2Vsc2UgZm9yKG8gaW4gZSludWxsIT0oaT10KGVbb10sbyxuKSkmJnMucHVzaChpKTtyZXR1cm4gYS5hcHBseShbXSxzKX0sZ3VpZDoxLHN1cHBvcnQ6aH0pLCJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJih3LmZuW1N5bWJvbC5pdGVyYXRvcl09bltTeW1ib2wuaXRlcmF0b3JdKSx3LmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGUsdCl7bFsiW29iamVjdCAiK3QrIl0iXT10LnRvTG93ZXJDYXNlKCl9KTtmdW5jdGlvbiBDKGUpe3ZhciB0PSEhZSYmImxlbmd0aCJpbiBlJiZlLmxlbmd0aCxuPXgoZSk7cmV0dXJuIWcoZSkmJiF5KGUpJiYoImFycmF5Ij09PW58fDA9PT10fHwibnVtYmVyIj09dHlwZW9mIHQmJnQ+MCYmdC0xIGluIGUpfXZhciBFPWZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLG8sYSxzLHUsbCxjLGYscCxkLGgsZyx5LHYsbSx4LGI9InNpenpsZSIrMSpuZXcgRGF0ZSx3PWUuZG9jdW1lbnQsVD0wLEM9MCxFPWFlKCksaz1hZSgpLFM9YWUoKSxEPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10JiYoZj0hMCksMH0sTj17fS5oYXNPd25Qcm9wZXJ0eSxBPVtdLGo9QS5wb3AscT1BLnB1c2gsTD1BLnB1c2gsSD1BLnNsaWNlLE89ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MCxyPWUubGVuZ3RoO248cjtuKyspaWYoZVtuXT09PXQpcmV0dXJuIG47cmV0dXJuLTF9LFA9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIixNPSJbXFx4MjBcXHRcXHJcXG5cXGZdIixSPSIoPzpcXFxcLnxbXFx3LV18W15cMC1cXHhhMF0pKyIsST0iXFxbIitNKyIqKCIrUisiKSg/OiIrTSsiKihbKl4kfCF+XT89KSIrTSsiKig/OicoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwifCgiK1IrIikpfCkiK00rIipcXF0iLFc9IjooIitSKyIpKD86XFwoKCgnKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcIil8KCg/OlxcXFwufFteXFxcXCgpW1xcXV18IitJKyIpKil8LiopXFwpfCkiLCQ9bmV3IFJlZ0V4cChNKyIrIiwiZyIpLEI9bmV3IFJlZ0V4cCgiXiIrTSsiK3woKD86XnxbXlxcXFxdKSg/OlxcXFwuKSopIitNKyIrJCIsImciKSxGPW5ldyBSZWdFeHAoIl4iK00rIiosIitNKyIqIiksXz1uZXcgUmVnRXhwKCJeIitNKyIqKFs+K35dfCIrTSsiKSIrTSsiKiIpLHo9bmV3IFJlZ0V4cCgiPSIrTSsiKihbXlxcXSdcIl0qPykiK00rIipcXF0iLCJnIiksWD1uZXcgUmVnRXhwKFcpLFU9bmV3IFJlZ0V4cCgiXiIrUisiJCIpLFY9e0lEOm5ldyBSZWdFeHAoIl4jKCIrUisiKSIpLENMQVNTOm5ldyBSZWdFeHAoIl5cXC4oIitSKyIpIiksVEFHOm5ldyBSZWdFeHAoIl4oIitSKyJ8WypdKSIpLEFUVFI6bmV3IFJlZ0V4cCgiXiIrSSksUFNFVURPOm5ldyBSZWdFeHAoIl4iK1cpLENISUxEOm5ldyBSZWdFeHAoIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcKCIrTSsiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIrTSsiKig/OihbKy1dfCkiK00rIiooXFxkKyl8KSkiK00rIipcXCl8KSIsImkiKSxib29sOm5ldyBSZWdFeHAoIl4oPzoiK1ArIikkIiwiaSIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKCJeIitNKyIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiK00rIiooKD86LVxcZCk/XFxkKikiK00rIipcXCl8KSg/PVteLV18JCkiLCJpIil9LEc9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxZPS9eaFxkJC9pLFE9L15bXntdK1x7XHMqXFtuYXRpdmUgXHcvLEo9L14oPzojKFtcdy1dKyl8KFx3Kyl8XC4oW1x3LV0rKSkkLyxLPS9bK35dLyxaPW5ldyBSZWdFeHAoIlxcXFwoW1xcZGEtZl17MSw2fSIrTSsiP3woIitNKyIpfC4pIiwiaWciKSxlZT1mdW5jdGlvbihlLHQsbil7dmFyIHI9IjB4Iit0LTY1NTM2O3JldHVybiByIT09cnx8bj90OnI8MD9TdHJpbmcuZnJvbUNoYXJDb2RlKHIrNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUocj4+MTB8NTUyOTYsMTAyMyZyfDU2MzIwKX0sdGU9LyhbXDAtXHgxZlx4N2ZdfF4tP1xkKXxeLSR8W15cMC1ceDFmXHg3Zi1cdUZGRkZcdy1dL2csbmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD8iXDAiPT09ZT8iXHVmZmZkIjplLnNsaWNlKDAsLTEpKyJcXCIrZS5jaGFyQ29kZUF0KGUubGVuZ3RoLTEpLnRvU3RyaW5nKDE2KSsiICI6IlxcIitlfSxyZT1mdW5jdGlvbigpe3AoKX0saWU9bWUoZnVuY3Rpb24oZSl7cmV0dXJuITA9PT1lLmRpc2FibGVkJiYoImZvcm0iaW4gZXx8ImxhYmVsImluIGUpfSx7ZGlyOiJwYXJlbnROb2RlIixuZXh0OiJsZWdlbmQifSk7dHJ5e0wuYXBwbHkoQT1ILmNhbGwody5jaGlsZE5vZGVzKSx3LmNoaWxkTm9kZXMpLEFbdy5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2goZSl7TD17YXBwbHk6QS5sZW5ndGg/ZnVuY3Rpb24oZSx0KXtxLmFwcGx5KGUsSC5jYWxsKHQpKX06ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmxlbmd0aCxyPTA7d2hpbGUoZVtuKytdPXRbcisrXSk7ZS5sZW5ndGg9bi0xfX19ZnVuY3Rpb24gb2UoZSx0LHIsaSl7dmFyIG8scyxsLGMsZixoLHYsbT10JiZ0Lm93bmVyRG9jdW1lbnQsVD10P3Qubm9kZVR5cGU6OTtpZihyPXJ8fFtdLCJzdHJpbmciIT10eXBlb2YgZXx8IWV8fDEhPT1UJiY5IT09VCYmMTEhPT1UKXJldHVybiByO2lmKCFpJiYoKHQ/dC5vd25lckRvY3VtZW50fHx0OncpIT09ZCYmcCh0KSx0PXR8fGQsZykpe2lmKDExIT09VCYmKGY9Si5leGVjKGUpKSlpZihvPWZbMV0pe2lmKDk9PT1UKXtpZighKGw9dC5nZXRFbGVtZW50QnlJZChvKSkpcmV0dXJuIHI7aWYobC5pZD09PW8pcmV0dXJuIHIucHVzaChsKSxyfWVsc2UgaWYobSYmKGw9bS5nZXRFbGVtZW50QnlJZChvKSkmJngodCxsKSYmbC5pZD09PW8pcmV0dXJuIHIucHVzaChsKSxyfWVsc2V7aWYoZlsyXSlyZXR1cm4gTC5hcHBseShyLHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSkpLHI7aWYoKG89ZlszXSkmJm4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBMLmFwcGx5KHIsdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKG8pKSxyfWlmKG4ucXNhJiYhU1tlKyIgIl0mJigheXx8IXkudGVzdChlKSkpe2lmKDEhPT1UKW09dCx2PWU7ZWxzZSBpZigib2JqZWN0IiE9PXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7KGM9dC5nZXRBdHRyaWJ1dGUoImlkIikpP2M9Yy5yZXBsYWNlKHRlLG5lKTp0LnNldEF0dHJpYnV0ZSgiaWQiLGM9Yikscz0oaD1hKGUpKS5sZW5ndGg7d2hpbGUocy0tKWhbc109IiMiK2MrIiAiK3ZlKGhbc10pO3Y9aC5qb2luKCIsIiksbT1LLnRlc3QoZSkmJmdlKHQucGFyZW50Tm9kZSl8fHR9aWYodil0cnl7cmV0dXJuIEwuYXBwbHkocixtLnF1ZXJ5U2VsZWN0b3JBbGwodikpLHJ9Y2F0Y2goZSl7fWZpbmFsbHl7Yz09PWImJnQucmVtb3ZlQXR0cmlidXRlKCJpZCIpfX19cmV0dXJuIHUoZS5yZXBsYWNlKEIsIiQxIiksdCxyLGkpfWZ1bmN0aW9uIGFlKCl7dmFyIGU9W107ZnVuY3Rpb24gdChuLGkpe3JldHVybiBlLnB1c2gobisiICIpPnIuY2FjaGVMZW5ndGgmJmRlbGV0ZSB0W2Uuc2hpZnQoKV0sdFtuKyIgIl09aX1yZXR1cm4gdH1mdW5jdGlvbiBzZShlKXtyZXR1cm4gZVtiXT0hMCxlfWZ1bmN0aW9uIHVlKGUpe3ZhciB0PWQuY3JlYXRlRWxlbWVudCgiZmllbGRzZXQiKTt0cnl7cmV0dXJuISFlKHQpfWNhdGNoKGUpe3JldHVybiExfWZpbmFsbHl7dC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCksdD1udWxsfX1mdW5jdGlvbiBsZShlLHQpe3ZhciBuPWUuc3BsaXQoInwiKSxpPW4ubGVuZ3RoO3doaWxlKGktLSlyLmF0dHJIYW5kbGVbbltpXV09dH1mdW5jdGlvbiBjZShlLHQpe3ZhciBuPXQmJmUscj1uJiYxPT09ZS5ub2RlVHlwZSYmMT09PXQubm9kZVR5cGUmJmUuc291cmNlSW5kZXgtdC5zb3VyY2VJbmRleDtpZihyKXJldHVybiByO2lmKG4pd2hpbGUobj1uLm5leHRTaWJsaW5nKWlmKG49PT10KXJldHVybi0xO3JldHVybiBlPzE6LTF9ZnVuY3Rpb24gZmUoZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiJpbnB1dCI9PT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJnQudHlwZT09PWV9fWZ1bmN0aW9uIHBlKGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKCJpbnB1dCI9PT1ufHwiYnV0dG9uIj09PW4pJiZ0LnR5cGU9PT1lfX1mdW5jdGlvbiBkZShlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuImZvcm0iaW4gdD90LnBhcmVudE5vZGUmJiExPT09dC5kaXNhYmxlZD8ibGFiZWwiaW4gdD8ibGFiZWwiaW4gdC5wYXJlbnROb2RlP3QucGFyZW50Tm9kZS5kaXNhYmxlZD09PWU6dC5kaXNhYmxlZD09PWU6dC5pc0Rpc2FibGVkPT09ZXx8dC5pc0Rpc2FibGVkIT09IWUmJmllKHQpPT09ZTp0LmRpc2FibGVkPT09ZToibGFiZWwiaW4gdCYmdC5kaXNhYmxlZD09PWV9fWZ1bmN0aW9uIGhlKGUpe3JldHVybiBzZShmdW5jdGlvbih0KXtyZXR1cm4gdD0rdCxzZShmdW5jdGlvbihuLHIpe3ZhciBpLG89ZShbXSxuLmxlbmd0aCx0KSxhPW8ubGVuZ3RoO3doaWxlKGEtLSluW2k9b1thXV0mJihuW2ldPSEocltpXT1uW2ldKSl9KX0pfWZ1bmN0aW9uIGdlKGUpe3JldHVybiBlJiYidW5kZWZpbmVkIiE9dHlwZW9mIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmV9bj1vZS5zdXBwb3J0PXt9LG89b2UuaXNYTUw9ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmKGUub3duZXJEb2N1bWVudHx8ZSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiEhdCYmIkhUTUwiIT09dC5ub2RlTmFtZX0scD1vZS5zZXREb2N1bWVudD1mdW5jdGlvbihlKXt2YXIgdCxpLGE9ZT9lLm93bmVyRG9jdW1lbnR8fGU6dztyZXR1cm4gYSE9PWQmJjk9PT1hLm5vZGVUeXBlJiZhLmRvY3VtZW50RWxlbWVudD8oZD1hLGg9ZC5kb2N1bWVudEVsZW1lbnQsZz0hbyhkKSx3IT09ZCYmKGk9ZC5kZWZhdWx0VmlldykmJmkudG9wIT09aSYmKGkuYWRkRXZlbnRMaXN0ZW5lcj9pLmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIscmUsITEpOmkuYXR0YWNoRXZlbnQmJmkuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixyZSkpLG4uYXR0cmlidXRlcz11ZShmdW5jdGlvbihlKXtyZXR1cm4gZS5jbGFzc05hbWU9ImkiLCFlLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxuLmdldEVsZW1lbnRzQnlUYWdOYW1lPXVlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmFwcGVuZENoaWxkKGQuY3JlYXRlQ29tbWVudCgiIikpLCFlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksbi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPVEudGVzdChkLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLG4uZ2V0QnlJZD11ZShmdW5jdGlvbihlKXtyZXR1cm4gaC5hcHBlbmRDaGlsZChlKS5pZD1iLCFkLmdldEVsZW1lbnRzQnlOYW1lfHwhZC5nZXRFbGVtZW50c0J5TmFtZShiKS5sZW5ndGh9KSxuLmdldEJ5SWQ/KHIuZmlsdGVyLklEPWZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZShaLGVlKTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKCJpZCIpPT09dH19LHIuZmluZC5JRD1mdW5jdGlvbihlLHQpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgdC5nZXRFbGVtZW50QnlJZCYmZyl7dmFyIG49dC5nZXRFbGVtZW50QnlJZChlKTtyZXR1cm4gbj9bbl06W119fSk6KHIuZmlsdGVyLklEPWZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZShaLGVlKTtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49InVuZGVmaW5lZCIhPXR5cGVvZiBlLmdldEF0dHJpYnV0ZU5vZGUmJmUuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gbiYmbi52YWx1ZT09PXR9fSxyLmZpbmQuSUQ9ZnVuY3Rpb24oZSx0KXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHQuZ2V0RWxlbWVudEJ5SWQmJmcpe3ZhciBuLHIsaSxvPXQuZ2V0RWxlbWVudEJ5SWQoZSk7aWYobyl7aWYoKG49by5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpKSYmbi52YWx1ZT09PWUpcmV0dXJuW29dO2k9dC5nZXRFbGVtZW50c0J5TmFtZShlKSxyPTA7d2hpbGUobz1pW3IrK10paWYoKG49by5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpKSYmbi52YWx1ZT09PWUpcmV0dXJuW29dfXJldHVybltdfX0pLHIuZmluZC5UQUc9bi5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihlLHQpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgdC5nZXRFbGVtZW50c0J5VGFnTmFtZT90LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpOm4ucXNhP3QucXVlcnlTZWxlY3RvckFsbChlKTp2b2lkIDB9OmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1bXSxpPTAsbz10LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpO2lmKCIqIj09PWUpe3doaWxlKG49b1tpKytdKTE9PT1uLm5vZGVUeXBlJiZyLnB1c2gobik7cmV0dXJuIHJ9cmV0dXJuIG99LHIuZmluZC5DTEFTUz1uLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGUsdCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiB0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmcpcmV0dXJuIHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShlKX0sdj1bXSx5PVtdLChuLnFzYT1RLnRlc3QoZC5xdWVyeVNlbGVjdG9yQWxsKSkmJih1ZShmdW5jdGlvbihlKXtoLmFwcGVuZENoaWxkKGUpLmlubmVySFRNTD0iPGEgaWQ9JyIrYisiJz48L2E+PHNlbGVjdCBpZD0nIitiKyItXHJcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iLGUucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djYXB0dXJlXj0nJ10iKS5sZW5ndGgmJnkucHVzaCgiWypeJF09IitNKyIqKD86Jyd8XCJcIikiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fHkucHVzaCgiXFxbIitNKyIqKD86dmFsdWV8IitQKyIpIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJbaWR+PSIrYisiLV0iKS5sZW5ndGh8fHkucHVzaCgifj0iKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RofHx5LnB1c2goIjpjaGVja2VkIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJhIyIrYisiKyoiKS5sZW5ndGh8fHkucHVzaCgiLiMuK1srfl0iKX0pLHVlKGZ1bmN0aW9uKGUpe2UuaW5uZXJIVE1MPSI8YSBocmVmPScnIGRpc2FibGVkPSdkaXNhYmxlZCc+PC9hPjxzZWxlY3QgZGlzYWJsZWQ9J2Rpc2FibGVkJz48b3B0aW9uLz48L3NlbGVjdD4iO3ZhciB0PWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTt0LnNldEF0dHJpYnV0ZSgidHlwZSIsImhpZGRlbiIpLGUuYXBwZW5kQ2hpbGQodCkuc2V0QXR0cmlidXRlKCJuYW1lIiwiRCIpLGUucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGgmJnkucHVzaCgibmFtZSIrTSsiKlsqXiR8IX5dPz0iKSwyIT09ZS5xdWVyeVNlbGVjdG9yQWxsKCI6ZW5hYmxlZCIpLmxlbmd0aCYmeS5wdXNoKCI6ZW5hYmxlZCIsIjpkaXNhYmxlZCIpLGguYXBwZW5kQ2hpbGQoZSkuZGlzYWJsZWQ9ITAsMiE9PWUucXVlcnlTZWxlY3RvckFsbCgiOmRpc2FibGVkIikubGVuZ3RoJiZ5LnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksZS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IikseS5wdXNoKCIsLio6Iil9KSksKG4ubWF0Y2hlc1NlbGVjdG9yPVEudGVzdChtPWgubWF0Y2hlc3x8aC53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fGgubW96TWF0Y2hlc1NlbGVjdG9yfHxoLm9NYXRjaGVzU2VsZWN0b3J8fGgubXNNYXRjaGVzU2VsZWN0b3IpKSYmdWUoZnVuY3Rpb24oZSl7bi5kaXNjb25uZWN0ZWRNYXRjaD1tLmNhbGwoZSwiKiIpLG0uY2FsbChlLCJbcyE9JyddOngiKSx2LnB1c2goIiE9IixXKX0pLHk9eS5sZW5ndGgmJm5ldyBSZWdFeHAoeS5qb2luKCJ8IikpLHY9di5sZW5ndGgmJm5ldyBSZWdFeHAodi5qb2luKCJ8IikpLHQ9US50ZXN0KGguY29tcGFyZURvY3VtZW50UG9zaXRpb24pLHg9dHx8US50ZXN0KGguY29udGFpbnMpP2Z1bmN0aW9uKGUsdCl7dmFyIG49OT09PWUubm9kZVR5cGU/ZS5kb2N1bWVudEVsZW1lbnQ6ZSxyPXQmJnQucGFyZW50Tm9kZTtyZXR1cm4gZT09PXJ8fCEoIXJ8fDEhPT1yLm5vZGVUeXBlfHwhKG4uY29udGFpbnM/bi5jb250YWlucyhyKTplLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiYxNiZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHIpKSl9OmZ1bmN0aW9uKGUsdCl7aWYodCl3aGlsZSh0PXQucGFyZW50Tm9kZSlpZih0PT09ZSlyZXR1cm4hMDtyZXR1cm4hMX0sRD10P2Z1bmN0aW9uKGUsdCl7aWYoZT09PXQpcmV0dXJuIGY9ITAsMDt2YXIgcj0hZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hdC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtyZXR1cm4gcnx8KDEmKHI9KGUub3duZXJEb2N1bWVudHx8ZSk9PT0odC5vd25lckRvY3VtZW50fHx0KT9lLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHQpOjEpfHwhbi5zb3J0RGV0YWNoZWQmJnQuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZSk9PT1yP2U9PT1kfHxlLm93bmVyRG9jdW1lbnQ9PT13JiZ4KHcsZSk/LTE6dD09PWR8fHQub3duZXJEb2N1bWVudD09PXcmJngodyx0KT8xOmM/TyhjLGUpLU8oYyx0KTowOjQmcj8tMToxKX06ZnVuY3Rpb24oZSx0KXtpZihlPT09dClyZXR1cm4gZj0hMCwwO3ZhciBuLHI9MCxpPWUucGFyZW50Tm9kZSxvPXQucGFyZW50Tm9kZSxhPVtlXSxzPVt0XTtpZighaXx8IW8pcmV0dXJuIGU9PT1kPy0xOnQ9PT1kPzE6aT8tMTpvPzE6Yz9PKGMsZSktTyhjLHQpOjA7aWYoaT09PW8pcmV0dXJuIGNlKGUsdCk7bj1lO3doaWxlKG49bi5wYXJlbnROb2RlKWEudW5zaGlmdChuKTtuPXQ7d2hpbGUobj1uLnBhcmVudE5vZGUpcy51bnNoaWZ0KG4pO3doaWxlKGFbcl09PT1zW3JdKXIrKztyZXR1cm4gcj9jZShhW3JdLHNbcl0pOmFbcl09PT13Py0xOnNbcl09PT13PzE6MH0sZCk6ZH0sb2UubWF0Y2hlcz1mdW5jdGlvbihlLHQpe3JldHVybiBvZShlLG51bGwsbnVsbCx0KX0sb2UubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGUsdCl7aWYoKGUub3duZXJEb2N1bWVudHx8ZSkhPT1kJiZwKGUpLHQ9dC5yZXBsYWNlKHosIj0nJDEnXSIpLG4ubWF0Y2hlc1NlbGVjdG9yJiZnJiYhU1t0KyIgIl0mJighdnx8IXYudGVzdCh0KSkmJigheXx8IXkudGVzdCh0KSkpdHJ5e3ZhciByPW0uY2FsbChlLHQpO2lmKHJ8fG4uZGlzY29ubmVjdGVkTWF0Y2h8fGUuZG9jdW1lbnQmJjExIT09ZS5kb2N1bWVudC5ub2RlVHlwZSlyZXR1cm4gcn1jYXRjaChlKXt9cmV0dXJuIG9lKHQsZCxudWxsLFtlXSkubGVuZ3RoPjB9LG9lLmNvbnRhaW5zPWZ1bmN0aW9uKGUsdCl7cmV0dXJuKGUub3duZXJEb2N1bWVudHx8ZSkhPT1kJiZwKGUpLHgoZSx0KX0sb2UuYXR0cj1mdW5jdGlvbihlLHQpeyhlLm93bmVyRG9jdW1lbnR8fGUpIT09ZCYmcChlKTt2YXIgaT1yLmF0dHJIYW5kbGVbdC50b0xvd2VyQ2FzZSgpXSxvPWkmJk4uY2FsbChyLmF0dHJIYW5kbGUsdC50b0xvd2VyQ2FzZSgpKT9pKGUsdCwhZyk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1vP286bi5hdHRyaWJ1dGVzfHwhZz9lLmdldEF0dHJpYnV0ZSh0KToobz1lLmdldEF0dHJpYnV0ZU5vZGUodCkpJiZvLnNwZWNpZmllZD9vLnZhbHVlOm51bGx9LG9lLmVzY2FwZT1mdW5jdGlvbihlKXtyZXR1cm4oZSsiIikucmVwbGFjZSh0ZSxuZSl9LG9lLmVycm9yPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIitlKX0sb2UudW5pcXVlU29ydD1mdW5jdGlvbihlKXt2YXIgdCxyPVtdLGk9MCxvPTA7aWYoZj0hbi5kZXRlY3REdXBsaWNhdGVzLGM9IW4uc29ydFN0YWJsZSYmZS5zbGljZSgwKSxlLnNvcnQoRCksZil7d2hpbGUodD1lW28rK10pdD09PWVbb10mJihpPXIucHVzaChvKSk7d2hpbGUoaS0tKWUuc3BsaWNlKHJbaV0sMSl9cmV0dXJuIGM9bnVsbCxlfSxpPW9lLmdldFRleHQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj0iIixyPTAsbz1lLm5vZGVUeXBlO2lmKG8pe2lmKDE9PT1vfHw5PT09b3x8MTE9PT1vKXtpZigic3RyaW5nIj09dHlwZW9mIGUudGV4dENvbnRlbnQpcmV0dXJuIGUudGV4dENvbnRlbnQ7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKW4rPWkoZSl9ZWxzZSBpZigzPT09b3x8ND09PW8pcmV0dXJuIGUubm9kZVZhbHVlfWVsc2Ugd2hpbGUodD1lW3IrK10pbis9aSh0KTtyZXR1cm4gbn0sKHI9b2Uuc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86c2UsbWF0Y2g6VixhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS5yZXBsYWNlKFosZWUpLGVbM109KGVbM118fGVbNF18fGVbNV18fCIiKS5yZXBsYWNlKFosZWUpLCJ+PSI9PT1lWzJdJiYoZVszXT0iICIrZVszXSsiICIpLGUuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS50b0xvd2VyQ2FzZSgpLCJudGgiPT09ZVsxXS5zbGljZSgwLDMpPyhlWzNdfHxvZS5lcnJvcihlWzBdKSxlWzRdPSsoZVs0XT9lWzVdKyhlWzZdfHwxKToyKigiZXZlbiI9PT1lWzNdfHwib2RkIj09PWVbM10pKSxlWzVdPSsoZVs3XStlWzhdfHwib2RkIj09PWVbM10pKTplWzNdJiZvZS5lcnJvcihlWzBdKSxlfSxQU0VVRE86ZnVuY3Rpb24oZSl7dmFyIHQsbj0hZVs2XSYmZVsyXTtyZXR1cm4gVi5DSElMRC50ZXN0KGVbMF0pP251bGw6KGVbM10/ZVsyXT1lWzRdfHxlWzVdfHwiIjpuJiZYLnRlc3QobikmJih0PWEobiwhMCkpJiYodD1uLmluZGV4T2YoIikiLG4ubGVuZ3RoLXQpLW4ubGVuZ3RoKSYmKGVbMF09ZVswXS5zbGljZSgwLHQpLGVbMl09bi5zbGljZSgwLHQpKSxlLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKFosZWUpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIioiPT09ZT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihlKXtyZXR1cm4gZS5ub2RlTmFtZSYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09dH19LENMQVNTOmZ1bmN0aW9uKGUpe3ZhciB0PUVbZSsiICJdO3JldHVybiB0fHwodD1uZXcgUmVnRXhwKCIoXnwiK00rIikiK2UrIigiK00rInwkKSIpKSYmRShlLGZ1bmN0aW9uKGUpe3JldHVybiB0LnRlc3QoInN0cmluZyI9PXR5cGVvZiBlLmNsYXNzTmFtZSYmZS5jbGFzc05hbWV8fCJ1bmRlZmluZWQiIT10eXBlb2YgZS5nZXRBdHRyaWJ1dGUmJmUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIil9KX0sQVRUUjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBpPW9lLmF0dHIocixlKTtyZXR1cm4gbnVsbD09aT8iIT0iPT09dDohdHx8KGkrPSIiLCI9Ij09PXQ/aT09PW46IiE9Ij09PXQ/aSE9PW46Il49Ij09PXQ/biYmMD09PWkuaW5kZXhPZihuKToiKj0iPT09dD9uJiZpLmluZGV4T2Yobik+LTE6IiQ9Ij09PXQ/biYmaS5zbGljZSgtbi5sZW5ndGgpPT09bjoifj0iPT09dD8oIiAiK2kucmVwbGFjZSgkLCIgIikrIiAiKS5pbmRleE9mKG4pPi0xOiJ8PSI9PT10JiYoaT09PW58fGkuc2xpY2UoMCxuLmxlbmd0aCsxKT09PW4rIi0iKSl9fSxDSElMRDpmdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvPSJudGgiIT09ZS5zbGljZSgwLDMpLGE9Imxhc3QiIT09ZS5zbGljZSgtNCkscz0ib2YtdHlwZSI9PT10O3JldHVybiAxPT09ciYmMD09PWk/ZnVuY3Rpb24oZSl7cmV0dXJuISFlLnBhcmVudE5vZGV9OmZ1bmN0aW9uKHQsbix1KXt2YXIgbCxjLGYscCxkLGgsZz1vIT09YT8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLHk9dC5wYXJlbnROb2RlLHY9cyYmdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLG09IXUmJiFzLHg9ITE7aWYoeSl7aWYobyl7d2hpbGUoZyl7cD10O3doaWxlKHA9cFtnXSlpZihzP3Aubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXY6MT09PXAubm9kZVR5cGUpcmV0dXJuITE7aD1nPSJvbmx5Ij09PWUmJiFoJiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKGg9W2E/eS5maXJzdENoaWxkOnkubGFzdENoaWxkXSxhJiZtKXt4PShkPShsPShjPShmPShwPXkpW2JdfHwocFtiXT17fSkpW3AudW5pcXVlSURdfHwoZltwLnVuaXF1ZUlEXT17fSkpW2VdfHxbXSlbMF09PT1UJiZsWzFdKSYmbFsyXSxwPWQmJnkuY2hpbGROb2Rlc1tkXTt3aGlsZShwPSsrZCYmcCYmcFtnXXx8KHg9ZD0wKXx8aC5wb3AoKSlpZigxPT09cC5ub2RlVHlwZSYmKyt4JiZwPT09dCl7Y1tlXT1bVCxkLHhdO2JyZWFrfX1lbHNlIGlmKG0mJih4PWQ9KGw9KGM9KGY9KHA9dClbYl18fChwW2JdPXt9KSlbcC51bmlxdWVJRF18fChmW3AudW5pcXVlSURdPXt9KSlbZV18fFtdKVswXT09PVQmJmxbMV0pLCExPT09eCl3aGlsZShwPSsrZCYmcCYmcFtnXXx8KHg9ZD0wKXx8aC5wb3AoKSlpZigocz9wLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT12OjE9PT1wLm5vZGVUeXBlKSYmKyt4JiYobSYmKChjPShmPXBbYl18fChwW2JdPXt9KSlbcC51bmlxdWVJRF18fChmW3AudW5pcXVlSURdPXt9KSlbZV09W1QseF0pLHA9PT10KSlicmVhaztyZXR1cm4oeC09aSk9PT1yfHx4JXI9PTAmJngvcj49MH19fSxQU0VVRE86ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXIucHNldWRvc1tlXXx8ci5zZXRGaWx0ZXJzW2UudG9Mb3dlckNhc2UoKV18fG9lLmVycm9yKCJ1bnN1cHBvcnRlZCBwc2V1ZG86ICIrZSk7cmV0dXJuIGlbYl0/aSh0KTppLmxlbmd0aD4xPyhuPVtlLGUsIiIsdF0sci5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGUudG9Mb3dlckNhc2UoKSk/c2UoZnVuY3Rpb24oZSxuKXt2YXIgcixvPWkoZSx0KSxhPW8ubGVuZ3RoO3doaWxlKGEtLSllW3I9TyhlLG9bYV0pXT0hKG5bcl09b1thXSl9KTpmdW5jdGlvbihlKXtyZXR1cm4gaShlLDAsbil9KTppfX0scHNldWRvczp7bm90OnNlKGZ1bmN0aW9uKGUpe3ZhciB0PVtdLG49W10scj1zKGUucmVwbGFjZShCLCIkMSIpKTtyZXR1cm4gcltiXT9zZShmdW5jdGlvbihlLHQsbixpKXt2YXIgbyxhPXIoZSxudWxsLGksW10pLHM9ZS5sZW5ndGg7d2hpbGUocy0tKShvPWFbc10pJiYoZVtzXT0hKHRbc109bykpfSk6ZnVuY3Rpb24oZSxpLG8pe3JldHVybiB0WzBdPWUscih0LG51bGwsbyxuKSx0WzBdPW51bGwsIW4ucG9wKCl9fSksaGFzOnNlKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gb2UoZSx0KS5sZW5ndGg+MH19KSxjb250YWluczpzZShmdW5jdGlvbihlKXtyZXR1cm4gZT1lLnJlcGxhY2UoWixlZSksZnVuY3Rpb24odCl7cmV0dXJuKHQudGV4dENvbnRlbnR8fHQuaW5uZXJUZXh0fHxpKHQpKS5pbmRleE9mKGUpPi0xfX0pLGxhbmc6c2UoZnVuY3Rpb24oZSl7cmV0dXJuIFUudGVzdChlfHwiIil8fG9lLmVycm9yKCJ1bnN1cHBvcnRlZCBsYW5nOiAiK2UpLGU9ZS5yZXBsYWNlKFosZWUpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24odCl7dmFyIG47ZG97aWYobj1nP3QubGFuZzp0LmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8dC5nZXRBdHRyaWJ1dGUoImxhbmciKSlyZXR1cm4obj1uLnRvTG93ZXJDYXNlKCkpPT09ZXx8MD09PW4uaW5kZXhPZihlKyItIil9d2hpbGUoKHQ9dC5wYXJlbnROb2RlKSYmMT09PXQubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbih0KXt2YXIgbj1lLmxvY2F0aW9uJiZlLmxvY2F0aW9uLmhhc2g7cmV0dXJuIG4mJm4uc2xpY2UoMSk9PT10LmlkfSxyb290OmZ1bmN0aW9uKGUpe3JldHVybiBlPT09aH0sZm9jdXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1kLmFjdGl2ZUVsZW1lbnQmJighZC5oYXNGb2N1c3x8ZC5oYXNGb2N1cygpKSYmISEoZS50eXBlfHxlLmhyZWZ8fH5lLnRhYkluZGV4KX0sZW5hYmxlZDpkZSghMSksZGlzYWJsZWQ6ZGUoITApLGNoZWNrZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT10JiYhIWUuY2hlY2tlZHx8Im9wdGlvbiI9PT10JiYhIWUuc2VsZWN0ZWR9LHNlbGVjdGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLnBhcmVudE5vZGUmJmUucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LCEwPT09ZS5zZWxlY3RlZH0sZW1wdHk6ZnVuY3Rpb24oZSl7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWlmKGUubm9kZVR5cGU8NilyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGUpe3JldHVybiFyLnBzZXVkb3MuZW1wdHkoZSl9LGhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gWS50ZXN0KGUubm9kZU5hbWUpfSxpbnB1dDpmdW5jdGlvbihlKXtyZXR1cm4gRy50ZXN0KGUubm9kZU5hbWUpfSxidXR0b246ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT10JiYiYnV0dG9uIj09PWUudHlwZXx8ImJ1dHRvbiI9PT10fSx0ZXh0OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiJpbnB1dCI9PT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJiJ0ZXh0Ij09PWUudHlwZSYmKG51bGw9PSh0PWUuZ2V0QXR0cmlidXRlKCJ0eXBlIikpfHwidGV4dCI9PT10LnRvTG93ZXJDYXNlKCkpfSxmaXJzdDpoZShmdW5jdGlvbigpe3JldHVyblswXX0pLGxhc3Q6aGUoZnVuY3Rpb24oZSx0KXtyZXR1cm5bdC0xXX0pLGVxOmhlKGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm5bbjwwP24rdDpuXX0pLGV2ZW46aGUoZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MDtuPHQ7bis9MillLnB1c2gobik7cmV0dXJuIGV9KSxvZGQ6aGUoZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MTtuPHQ7bis9MillLnB1c2gobik7cmV0dXJuIGV9KSxsdDpoZShmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByPW48MD9uK3Q6bjstLXI+PTA7KWUucHVzaChyKTtyZXR1cm4gZX0pLGd0OmhlKGZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9bjwwP24rdDpuOysrcjx0OyllLnB1c2gocik7cmV0dXJuIGV9KX19KS5wc2V1ZG9zLm50aD1yLnBzZXVkb3MuZXE7Zm9yKHQgaW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0pci5wc2V1ZG9zW3RdPWZlKHQpO2Zvcih0IGlue3N1Ym1pdDohMCxyZXNldDohMH0pci5wc2V1ZG9zW3RdPXBlKHQpO2Z1bmN0aW9uIHllKCl7fXllLnByb3RvdHlwZT1yLmZpbHRlcnM9ci5wc2V1ZG9zLHIuc2V0RmlsdGVycz1uZXcgeWUsYT1vZS50b2tlbml6ZT1mdW5jdGlvbihlLHQpe3ZhciBuLGksbyxhLHMsdSxsLGM9a1tlKyIgIl07aWYoYylyZXR1cm4gdD8wOmMuc2xpY2UoMCk7cz1lLHU9W10sbD1yLnByZUZpbHRlcjt3aGlsZShzKXtuJiYhKGk9Ri5leGVjKHMpKXx8KGkmJihzPXMuc2xpY2UoaVswXS5sZW5ndGgpfHxzKSx1LnB1c2gobz1bXSkpLG49ITEsKGk9Xy5leGVjKHMpKSYmKG49aS5zaGlmdCgpLG8ucHVzaCh7dmFsdWU6bix0eXBlOmlbMF0ucmVwbGFjZShCLCIgIil9KSxzPXMuc2xpY2Uobi5sZW5ndGgpKTtmb3IoYSBpbiByLmZpbHRlcikhKGk9VlthXS5leGVjKHMpKXx8bFthXSYmIShpPWxbYV0oaSkpfHwobj1pLnNoaWZ0KCksby5wdXNoKHt2YWx1ZTpuLHR5cGU6YSxtYXRjaGVzOml9KSxzPXMuc2xpY2Uobi5sZW5ndGgpKTtpZighbilicmVha31yZXR1cm4gdD9zLmxlbmd0aDpzP29lLmVycm9yKGUpOmsoZSx1KS5zbGljZSgwKX07ZnVuY3Rpb24gdmUoZSl7Zm9yKHZhciB0PTAsbj1lLmxlbmd0aCxyPSIiO3Q8bjt0Kyspcis9ZVt0XS52YWx1ZTtyZXR1cm4gcn1mdW5jdGlvbiBtZShlLHQsbil7dmFyIHI9dC5kaXIsaT10Lm5leHQsbz1pfHxyLGE9biYmInBhcmVudE5vZGUiPT09byxzPUMrKztyZXR1cm4gdC5maXJzdD9mdW5jdGlvbih0LG4saSl7d2hpbGUodD10W3JdKWlmKDE9PT10Lm5vZGVUeXBlfHxhKXJldHVybiBlKHQsbixpKTtyZXR1cm4hMX06ZnVuY3Rpb24odCxuLHUpe3ZhciBsLGMsZixwPVtULHNdO2lmKHUpe3doaWxlKHQ9dFtyXSlpZigoMT09PXQubm9kZVR5cGV8fGEpJiZlKHQsbix1KSlyZXR1cm4hMH1lbHNlIHdoaWxlKHQ9dFtyXSlpZigxPT09dC5ub2RlVHlwZXx8YSlpZihmPXRbYl18fCh0W2JdPXt9KSxjPWZbdC51bmlxdWVJRF18fChmW3QudW5pcXVlSURdPXt9KSxpJiZpPT09dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXQ9dFtyXXx8dDtlbHNle2lmKChsPWNbb10pJiZsWzBdPT09VCYmbFsxXT09PXMpcmV0dXJuIHBbMl09bFsyXTtpZihjW29dPXAscFsyXT1lKHQsbix1KSlyZXR1cm4hMH1yZXR1cm4hMX19ZnVuY3Rpb24geGUoZSl7cmV0dXJuIGUubGVuZ3RoPjE/ZnVuY3Rpb24odCxuLHIpe3ZhciBpPWUubGVuZ3RoO3doaWxlKGktLSlpZighZVtpXSh0LG4scikpcmV0dXJuITE7cmV0dXJuITB9OmVbMF19ZnVuY3Rpb24gYmUoZSx0LG4pe2Zvcih2YXIgcj0wLGk9dC5sZW5ndGg7cjxpO3IrKylvZShlLHRbcl0sbik7cmV0dXJuIG59ZnVuY3Rpb24gd2UoZSx0LG4scixpKXtmb3IodmFyIG8sYT1bXSxzPTAsdT1lLmxlbmd0aCxsPW51bGwhPXQ7czx1O3MrKykobz1lW3NdKSYmKG4mJiFuKG8scixpKXx8KGEucHVzaChvKSxsJiZ0LnB1c2gocykpKTtyZXR1cm4gYX1mdW5jdGlvbiBUZShlLHQsbixyLGksbyl7cmV0dXJuIHImJiFyW2JdJiYocj1UZShyKSksaSYmIWlbYl0mJihpPVRlKGksbykpLHNlKGZ1bmN0aW9uKG8sYSxzLHUpe3ZhciBsLGMsZixwPVtdLGQ9W10saD1hLmxlbmd0aCxnPW98fGJlKHR8fCIqIixzLm5vZGVUeXBlP1tzXTpzLFtdKSx5PSFlfHwhbyYmdD9nOndlKGcscCxlLHMsdSksdj1uP2l8fChvP2U6aHx8cik/W106YTp5O2lmKG4mJm4oeSx2LHMsdSkscil7bD13ZSh2LGQpLHIobCxbXSxzLHUpLGM9bC5sZW5ndGg7d2hpbGUoYy0tKShmPWxbY10pJiYodltkW2NdXT0hKHlbZFtjXV09ZikpfWlmKG8pe2lmKGl8fGUpe2lmKGkpe2w9W10sYz12Lmxlbmd0aDt3aGlsZShjLS0pKGY9dltjXSkmJmwucHVzaCh5W2NdPWYpO2kobnVsbCx2PVtdLGwsdSl9Yz12Lmxlbmd0aDt3aGlsZShjLS0pKGY9dltjXSkmJihsPWk/TyhvLGYpOnBbY10pPi0xJiYob1tsXT0hKGFbbF09ZikpfX1lbHNlIHY9d2Uodj09PWE/di5zcGxpY2UoaCx2Lmxlbmd0aCk6diksaT9pKG51bGwsYSx2LHUpOkwuYXBwbHkoYSx2KX0pfWZ1bmN0aW9uIENlKGUpe2Zvcih2YXIgdCxuLGksbz1lLmxlbmd0aCxhPXIucmVsYXRpdmVbZVswXS50eXBlXSxzPWF8fHIucmVsYXRpdmVbIiAiXSx1PWE/MTowLGM9bWUoZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10fSxzLCEwKSxmPW1lKGZ1bmN0aW9uKGUpe3JldHVybiBPKHQsZSk+LTF9LHMsITApLHA9W2Z1bmN0aW9uKGUsbixyKXt2YXIgaT0hYSYmKHJ8fG4hPT1sKXx8KCh0PW4pLm5vZGVUeXBlP2MoZSxuLHIpOmYoZSxuLHIpKTtyZXR1cm4gdD1udWxsLGl9XTt1PG87dSsrKWlmKG49ci5yZWxhdGl2ZVtlW3VdLnR5cGVdKXA9W21lKHhlKHApLG4pXTtlbHNle2lmKChuPXIuZmlsdGVyW2VbdV0udHlwZV0uYXBwbHkobnVsbCxlW3VdLm1hdGNoZXMpKVtiXSl7Zm9yKGk9Kyt1O2k8bztpKyspaWYoci5yZWxhdGl2ZVtlW2ldLnR5cGVdKWJyZWFrO3JldHVybiBUZSh1PjEmJnhlKHApLHU+MSYmdmUoZS5zbGljZSgwLHUtMSkuY29uY2F0KHt2YWx1ZToiICI9PT1lW3UtMl0udHlwZT8iKiI6IiJ9KSkucmVwbGFjZShCLCIkMSIpLG4sdTxpJiZDZShlLnNsaWNlKHUsaSkpLGk8byYmQ2UoZT1lLnNsaWNlKGkpKSxpPG8mJnZlKGUpKX1wLnB1c2gobil9cmV0dXJuIHhlKHApfWZ1bmN0aW9uIEVlKGUsdCl7dmFyIG49dC5sZW5ndGg+MCxpPWUubGVuZ3RoPjAsbz1mdW5jdGlvbihvLGEscyx1LGMpe3ZhciBmLGgseSx2PTAsbT0iMCIseD1vJiZbXSxiPVtdLHc9bCxDPW98fGkmJnIuZmluZC5UQUcoIioiLGMpLEU9VCs9bnVsbD09dz8xOk1hdGgucmFuZG9tKCl8fC4xLGs9Qy5sZW5ndGg7Zm9yKGMmJihsPWE9PT1kfHxhfHxjKTttIT09ayYmbnVsbCE9KGY9Q1ttXSk7bSsrKXtpZihpJiZmKXtoPTAsYXx8Zi5vd25lckRvY3VtZW50PT09ZHx8KHAoZikscz0hZyk7d2hpbGUoeT1lW2grK10paWYoeShmLGF8fGQscykpe3UucHVzaChmKTticmVha31jJiYoVD1FKX1uJiYoKGY9IXkmJmYpJiZ2LS0sbyYmeC5wdXNoKGYpKX1pZih2Kz1tLG4mJm0hPT12KXtoPTA7d2hpbGUoeT10W2grK10peSh4LGIsYSxzKTtpZihvKXtpZih2PjApd2hpbGUobS0tKXhbbV18fGJbbV18fChiW21dPWouY2FsbCh1KSk7Yj13ZShiKX1MLmFwcGx5KHUsYiksYyYmIW8mJmIubGVuZ3RoPjAmJnYrdC5sZW5ndGg+MSYmb2UudW5pcXVlU29ydCh1KX1yZXR1cm4gYyYmKFQ9RSxsPXcpLHh9O3JldHVybiBuP3NlKG8pOm99cmV0dXJuIHM9b2UuY29tcGlsZT1mdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT1bXSxvPVNbZSsiICJdO2lmKCFvKXt0fHwodD1hKGUpKSxuPXQubGVuZ3RoO3doaWxlKG4tLSkobz1DZSh0W25dKSlbYl0/ci5wdXNoKG8pOmkucHVzaChvKTsobz1TKGUsRWUoaSxyKSkpLnNlbGVjdG9yPWV9cmV0dXJuIG99LHU9b2Uuc2VsZWN0PWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciBvLHUsbCxjLGYscD0iZnVuY3Rpb24iPT10eXBlb2YgZSYmZSxkPSFpJiZhKGU9cC5zZWxlY3Rvcnx8ZSk7aWYobj1ufHxbXSwxPT09ZC5sZW5ndGgpe2lmKCh1PWRbMF09ZFswXS5zbGljZSgwKSkubGVuZ3RoPjImJiJJRCI9PT0obD11WzBdKS50eXBlJiY5PT09dC5ub2RlVHlwZSYmZyYmci5yZWxhdGl2ZVt1WzFdLnR5cGVdKXtpZighKHQ9KHIuZmluZC5JRChsLm1hdGNoZXNbMF0ucmVwbGFjZShaLGVlKSx0KXx8W10pWzBdKSlyZXR1cm4gbjtwJiYodD10LnBhcmVudE5vZGUpLGU9ZS5zbGljZSh1LnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1vPVYubmVlZHNDb250ZXh0LnRlc3QoZSk/MDp1Lmxlbmd0aDt3aGlsZShvLS0pe2lmKGw9dVtvXSxyLnJlbGF0aXZlW2M9bC50eXBlXSlicmVhaztpZigoZj1yLmZpbmRbY10pJiYoaT1mKGwubWF0Y2hlc1swXS5yZXBsYWNlKFosZWUpLEsudGVzdCh1WzBdLnR5cGUpJiZnZSh0LnBhcmVudE5vZGUpfHx0KSkpe2lmKHUuc3BsaWNlKG8sMSksIShlPWkubGVuZ3RoJiZ2ZSh1KSkpcmV0dXJuIEwuYXBwbHkobixpKSxuO2JyZWFrfX19cmV0dXJuKHB8fHMoZSxkKSkoaSx0LCFnLG4sIXR8fEsudGVzdChlKSYmZ2UodC5wYXJlbnROb2RlKXx8dCksbn0sbi5zb3J0U3RhYmxlPWIuc3BsaXQoIiIpLnNvcnQoRCkuam9pbigiIik9PT1iLG4uZGV0ZWN0RHVwbGljYXRlcz0hIWYscCgpLG4uc29ydERldGFjaGVkPXVlKGZ1bmN0aW9uKGUpe3JldHVybiAxJmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZC5jcmVhdGVFbGVtZW50KCJmaWVsZHNldCIpKX0pLHVlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsIiMiPT09ZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpfSl8fGxlKCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIixmdW5jdGlvbihlLHQsbil7aWYoIW4pcmV0dXJuIGUuZ2V0QXR0cmlidXRlKHQsInR5cGUiPT09dC50b0xvd2VyQ2FzZSgpPzE6Mil9KSxuLmF0dHJpYnV0ZXMmJnVlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGlucHV0Lz4iLGUuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIiksIiI9PT1lLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpfSl8fGxlKCJ2YWx1ZSIsZnVuY3Rpb24oZSx0LG4pe2lmKCFuJiYiaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXJldHVybiBlLmRlZmF1bHRWYWx1ZX0pLHVlKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKX0pfHxsZShQLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtpZighbilyZXR1cm4hMD09PWVbdF0/dC50b0xvd2VyQ2FzZSgpOihyPWUuZ2V0QXR0cmlidXRlTm9kZSh0KSkmJnIuc3BlY2lmaWVkP3IudmFsdWU6bnVsbH0pLG9lfShlKTt3LmZpbmQ9RSx3LmV4cHI9RS5zZWxlY3RvcnMsdy5leHByWyI6Il09dy5leHByLnBzZXVkb3Msdy51bmlxdWVTb3J0PXcudW5pcXVlPUUudW5pcXVlU29ydCx3LnRleHQ9RS5nZXRUZXh0LHcuaXNYTUxEb2M9RS5pc1hNTCx3LmNvbnRhaW5zPUUuY29udGFpbnMsdy5lc2NhcGVTZWxlY3Rvcj1FLmVzY2FwZTt2YXIgaz1mdW5jdGlvbihlLHQsbil7dmFyIHI9W10saT12b2lkIDAhPT1uO3doaWxlKChlPWVbdF0pJiY5IT09ZS5ub2RlVHlwZSlpZigxPT09ZS5ub2RlVHlwZSl7aWYoaSYmdyhlKS5pcyhuKSlicmVhaztyLnB1c2goZSl9cmV0dXJuIHJ9LFM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49W107ZTtlPWUubmV4dFNpYmxpbmcpMT09PWUubm9kZVR5cGUmJmUhPT10JiZuLnB1c2goZSk7cmV0dXJuIG59LEQ9dy5leHByLm1hdGNoLm5lZWRzQ29udGV4dDtmdW5jdGlvbiBOKGUsdCl7cmV0dXJuIGUubm9kZU5hbWUmJmUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXQudG9Mb3dlckNhc2UoKX12YXIgQT0vXjwoW2Etel1bXlwvXDA+Olx4MjBcdFxyXG5cZl0qKVtceDIwXHRcclxuXGZdKlwvPz4oPzo8XC9cMT58KSQvaTtmdW5jdGlvbiBqKGUsdCxuKXtyZXR1cm4gZyh0KT93LmdyZXAoZSxmdW5jdGlvbihlLHIpe3JldHVybiEhdC5jYWxsKGUscixlKSE9PW59KTp0Lm5vZGVUeXBlP3cuZ3JlcChlLGZ1bmN0aW9uKGUpe3JldHVybiBlPT09dCE9PW59KToic3RyaW5nIiE9dHlwZW9mIHQ/dy5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHUuY2FsbCh0LGUpPi0xIT09bn0pOncuZmlsdGVyKHQsZSxuKX13LmZpbHRlcj1mdW5jdGlvbihlLHQsbil7dmFyIHI9dFswXTtyZXR1cm4gbiYmKGU9Ijpub3QoIitlKyIpIiksMT09PXQubGVuZ3RoJiYxPT09ci5ub2RlVHlwZT93LmZpbmQubWF0Y2hlc1NlbGVjdG9yKHIsZSk/W3JdOltdOncuZmluZC5tYXRjaGVzKGUsdy5ncmVwKHQsZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLm5vZGVUeXBlfSkpfSx3LmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihlKXt2YXIgdCxuLHI9dGhpcy5sZW5ndGgsaT10aGlzO2lmKCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gdGhpcy5wdXNoU3RhY2sodyhlKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodD0wO3Q8cjt0KyspaWYody5jb250YWlucyhpW3RdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihuPXRoaXMucHVzaFN0YWNrKFtdKSx0PTA7dDxyO3QrKyl3LmZpbmQoZSxpW3RdLG4pO3JldHVybiByPjE/dy51bmlxdWVTb3J0KG4pOm59LGZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soaih0aGlzLGV8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soaih0aGlzLGV8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGUpe3JldHVybiEhaih0aGlzLCJzdHJpbmciPT10eXBlb2YgZSYmRC50ZXN0KGUpP3coZSk6ZXx8W10sITEpLmxlbmd0aH19KTt2YXIgcSxMPS9eKD86XHMqKDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKykpJC87KHcuZm4uaW5pdD1mdW5jdGlvbihlLHQsbil7dmFyIGksbztpZighZSlyZXR1cm4gdGhpcztpZihuPW58fHEsInN0cmluZyI9PXR5cGVvZiBlKXtpZighKGk9IjwiPT09ZVswXSYmIj4iPT09ZVtlLmxlbmd0aC0xXSYmZS5sZW5ndGg+PTM/W251bGwsZSxudWxsXTpMLmV4ZWMoZSkpfHwhaVsxXSYmdClyZXR1cm4hdHx8dC5qcXVlcnk/KHR8fG4pLmZpbmQoZSk6dGhpcy5jb25zdHJ1Y3Rvcih0KS5maW5kKGUpO2lmKGlbMV0pe2lmKHQ9dCBpbnN0YW5jZW9mIHc/dFswXTp0LHcubWVyZ2UodGhpcyx3LnBhcnNlSFRNTChpWzFdLHQmJnQubm9kZVR5cGU/dC5vd25lckRvY3VtZW50fHx0OnIsITApKSxBLnRlc3QoaVsxXSkmJncuaXNQbGFpbk9iamVjdCh0KSlmb3IoaSBpbiB0KWcodGhpc1tpXSk/dGhpc1tpXSh0W2ldKTp0aGlzLmF0dHIoaSx0W2ldKTtyZXR1cm4gdGhpc31yZXR1cm4obz1yLmdldEVsZW1lbnRCeUlkKGlbMl0pKSYmKHRoaXNbMF09byx0aGlzLmxlbmd0aD0xKSx0aGlzfXJldHVybiBlLm5vZGVUeXBlPyh0aGlzWzBdPWUsdGhpcy5sZW5ndGg9MSx0aGlzKTpnKGUpP3ZvaWQgMCE9PW4ucmVhZHk/bi5yZWFkeShlKTplKHcpOncubWFrZUFycmF5KGUsdGhpcyl9KS5wcm90b3R5cGU9dy5mbixxPXcocik7dmFyIEg9L14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sTz17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTt3LmZuLmV4dGVuZCh7aGFzOmZ1bmN0aW9uKGUpe3ZhciB0PXcoZSx0aGlzKSxuPXQubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih2YXIgZT0wO2U8bjtlKyspaWYody5jb250YWlucyh0aGlzLHRbZV0pKXJldHVybiEwfSl9LGNsb3Nlc3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTAsaT10aGlzLmxlbmd0aCxvPVtdLGE9InN0cmluZyIhPXR5cGVvZiBlJiZ3KGUpO2lmKCFELnRlc3QoZSkpZm9yKDtyPGk7cisrKWZvcihuPXRoaXNbcl07biYmbiE9PXQ7bj1uLnBhcmVudE5vZGUpaWYobi5ub2RlVHlwZTwxMSYmKGE/YS5pbmRleChuKT4tMToxPT09bi5ub2RlVHlwZSYmdy5maW5kLm1hdGNoZXNTZWxlY3RvcihuLGUpKSl7by5wdXNoKG4pO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhvLmxlbmd0aD4xP3cudW5pcXVlU29ydChvKTpvKX0saW5kZXg6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/InN0cmluZyI9PXR5cGVvZiBlP3UuY2FsbCh3KGUpLHRoaXNbMF0pOnUuY2FsbCh0aGlzLGUuanF1ZXJ5P2VbMF06ZSk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sody51bmlxdWVTb3J0KHcubWVyZ2UodGhpcy5nZXQoKSx3KGUsdCkpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWU/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoZSkpfX0pO2Z1bmN0aW9uIFAoZSx0KXt3aGlsZSgoZT1lW3RdKSYmMSE9PWUubm9kZVR5cGUpO3JldHVybiBlfXcuZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyZW50Tm9kZTtyZXR1cm4gdCYmMTEhPT10Lm5vZGVUeXBlP3Q6bnVsbH0scGFyZW50czpmdW5jdGlvbihlKXtyZXR1cm4gayhlLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGsoZSwicGFyZW50Tm9kZSIsbil9LG5leHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFAoZSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihlKXtyZXR1cm4gUChlLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihlKXtyZXR1cm4gayhlLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGUpe3JldHVybiBrKGUsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBrKGUsIm5leHRTaWJsaW5nIixuKX0scHJldlVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gayhlLCJwcmV2aW91c1NpYmxpbmciLG4pfSxzaWJsaW5nczpmdW5jdGlvbihlKXtyZXR1cm4gUygoZS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxlKX0sY2hpbGRyZW46ZnVuY3Rpb24oZSl7cmV0dXJuIFMoZS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIE4oZSwiaWZyYW1lIik/ZS5jb250ZW50RG9jdW1lbnQ6KE4oZSwidGVtcGxhdGUiKSYmKGU9ZS5jb250ZW50fHxlKSx3Lm1lcmdlKFtdLGUuY2hpbGROb2RlcykpfX0sZnVuY3Rpb24oZSx0KXt3LmZuW2VdPWZ1bmN0aW9uKG4scil7dmFyIGk9dy5tYXAodGhpcyx0LG4pO3JldHVybiJVbnRpbCIhPT1lLnNsaWNlKC01KSYmKHI9biksciYmInN0cmluZyI9PXR5cGVvZiByJiYoaT13LmZpbHRlcihyLGkpKSx0aGlzLmxlbmd0aD4xJiYoT1tlXXx8dy51bmlxdWVTb3J0KGkpLEgudGVzdChlKSYmaS5yZXZlcnNlKCkpLHRoaXMucHVzaFN0YWNrKGkpfX0pO3ZhciBNPS9bXlx4MjBcdFxyXG5cZl0rL2c7ZnVuY3Rpb24gUihlKXt2YXIgdD17fTtyZXR1cm4gdy5lYWNoKGUubWF0Y2goTSl8fFtdLGZ1bmN0aW9uKGUsbil7dFtuXT0hMH0pLHR9dy5DYWxsYmFja3M9ZnVuY3Rpb24oZSl7ZT0ic3RyaW5nIj09dHlwZW9mIGU/UihlKTp3LmV4dGVuZCh7fSxlKTt2YXIgdCxuLHIsaSxvPVtdLGE9W10scz0tMSx1PWZ1bmN0aW9uKCl7Zm9yKGk9aXx8ZS5vbmNlLHI9dD0hMDthLmxlbmd0aDtzPS0xKXtuPWEuc2hpZnQoKTt3aGlsZSgrK3M8by5sZW5ndGgpITE9PT1vW3NdLmFwcGx5KG5bMF0sblsxXSkmJmUuc3RvcE9uRmFsc2UmJihzPW8ubGVuZ3RoLG49ITEpfWUubWVtb3J5fHwobj0hMSksdD0hMSxpJiYobz1uP1tdOiIiKX0sbD17YWRkOmZ1bmN0aW9uKCl7cmV0dXJuIG8mJihuJiYhdCYmKHM9by5sZW5ndGgtMSxhLnB1c2gobikpLGZ1bmN0aW9uIHQobil7dy5lYWNoKG4sZnVuY3Rpb24obixyKXtnKHIpP2UudW5pcXVlJiZsLmhhcyhyKXx8by5wdXNoKHIpOnImJnIubGVuZ3RoJiYic3RyaW5nIiE9PXgocikmJnQocil9KX0oYXJndW1lbnRzKSxuJiYhdCYmdSgpKSx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdy5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihlLHQpe3ZhciBuO3doaWxlKChuPXcuaW5BcnJheSh0LG8sbikpPi0xKW8uc3BsaWNlKG4sMSksbjw9cyYmcy0tfSksdGhpc30saGFzOmZ1bmN0aW9uKGUpe3JldHVybiBlP3cuaW5BcnJheShlLG8pPi0xOm8ubGVuZ3RoPjB9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIG8mJihvPVtdKSx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGk9YT1bXSxvPW49IiIsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hb30sbG9jazpmdW5jdGlvbigpe3JldHVybiBpPWE9W10sbnx8dHx8KG89bj0iIiksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuISFpfSxmaXJlV2l0aDpmdW5jdGlvbihlLG4pe3JldHVybiBpfHwobj1bZSwobj1ufHxbXSkuc2xpY2U/bi5zbGljZSgpOm5dLGEucHVzaChuKSx0fHx1KCkpLHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXtyZXR1cm4gbC5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyksdGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIXJ9fTtyZXR1cm4gbH07ZnVuY3Rpb24gSShlKXtyZXR1cm4gZX1mdW5jdGlvbiBXKGUpe3Rocm93IGV9ZnVuY3Rpb24gJChlLHQsbixyKXt2YXIgaTt0cnl7ZSYmZyhpPWUucHJvbWlzZSk/aS5jYWxsKGUpLmRvbmUodCkuZmFpbChuKTplJiZnKGk9ZS50aGVuKT9pLmNhbGwoZSx0LG4pOnQuYXBwbHkodm9pZCAwLFtlXS5zbGljZShyKSl9Y2F0Y2goZSl7bi5hcHBseSh2b2lkIDAsW2VdKX19dy5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKHQpe3ZhciBuPVtbIm5vdGlmeSIsInByb2dyZXNzIix3LkNhbGxiYWNrcygibWVtb3J5Iiksdy5DYWxsYmFja3MoIm1lbW9yeSIpLDJdLFsicmVzb2x2ZSIsImRvbmUiLHcuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLHcuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLDAsInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIix3LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSx3LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwxLCJyZWplY3RlZCJdXSxyPSJwZW5kaW5nIixpPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiByfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gby5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LCJjYXRjaCI6ZnVuY3Rpb24oZSl7cmV0dXJuIGkudGhlbihudWxsLGUpfSxwaXBlOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVybiB3LkRlZmVycmVkKGZ1bmN0aW9uKHQpe3cuZWFjaChuLGZ1bmN0aW9uKG4scil7dmFyIGk9ZyhlW3JbNF1dKSYmZVtyWzRdXTtvW3JbMV1dKGZ1bmN0aW9uKCl7dmFyIGU9aSYmaS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZSYmZyhlLnByb21pc2UpP2UucHJvbWlzZSgpLnByb2dyZXNzKHQubm90aWZ5KS5kb25lKHQucmVzb2x2ZSkuZmFpbCh0LnJlamVjdCk6dFtyWzBdKyJXaXRoIl0odGhpcyxpP1tlXTphcmd1bWVudHMpfSl9KSxlPW51bGx9KS5wcm9taXNlKCl9LHRoZW46ZnVuY3Rpb24odCxyLGkpe3ZhciBvPTA7ZnVuY3Rpb24gYSh0LG4scixpKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcz10aGlzLHU9YXJndW1lbnRzLGw9ZnVuY3Rpb24oKXt2YXIgZSxsO2lmKCEodDxvKSl7aWYoKGU9ci5hcHBseShzLHUpKT09PW4ucHJvbWlzZSgpKXRocm93IG5ldyBUeXBlRXJyb3IoIlRoZW5hYmxlIHNlbGYtcmVzb2x1dGlvbiIpO2w9ZSYmKCJvYmplY3QiPT10eXBlb2YgZXx8ImZ1bmN0aW9uIj09dHlwZW9mIGUpJiZlLnRoZW4sZyhsKT9pP2wuY2FsbChlLGEobyxuLEksaSksYShvLG4sVyxpKSk6KG8rKyxsLmNhbGwoZSxhKG8sbixJLGkpLGEobyxuLFcsaSksYShvLG4sSSxuLm5vdGlmeVdpdGgpKSk6KHIhPT1JJiYocz12b2lkIDAsdT1bZV0pLChpfHxuLnJlc29sdmVXaXRoKShzLHUpKX19LGM9aT9sOmZ1bmN0aW9uKCl7dHJ5e2woKX1jYXRjaChlKXt3LkRlZmVycmVkLmV4Y2VwdGlvbkhvb2smJncuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayhlLGMuc3RhY2tUcmFjZSksdCsxPj1vJiYociE9PVcmJihzPXZvaWQgMCx1PVtlXSksbi5yZWplY3RXaXRoKHMsdSkpfX07dD9jKCk6KHcuRGVmZXJyZWQuZ2V0U3RhY2tIb29rJiYoYy5zdGFja1RyYWNlPXcuRGVmZXJyZWQuZ2V0U3RhY2tIb29rKCkpLGUuc2V0VGltZW91dChjKSl9fXJldHVybiB3LkRlZmVycmVkKGZ1bmN0aW9uKGUpe25bMF1bM10uYWRkKGEoMCxlLGcoaSk/aTpJLGUubm90aWZ5V2l0aCkpLG5bMV1bM10uYWRkKGEoMCxlLGcodCk/dDpJKSksblsyXVszXS5hZGQoYSgwLGUsZyhyKT9yOlcpKX0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT93LmV4dGVuZChlLGkpOml9fSxvPXt9O3JldHVybiB3LmVhY2gobixmdW5jdGlvbihlLHQpe3ZhciBhPXRbMl0scz10WzVdO2lbdFsxXV09YS5hZGQscyYmYS5hZGQoZnVuY3Rpb24oKXtyPXN9LG5bMy1lXVsyXS5kaXNhYmxlLG5bMy1lXVszXS5kaXNhYmxlLG5bMF1bMl0ubG9jayxuWzBdWzNdLmxvY2spLGEuYWRkKHRbM10uZmlyZSksb1t0WzBdXT1mdW5jdGlvbigpe3JldHVybiBvW3RbMF0rIldpdGgiXSh0aGlzPT09bz92b2lkIDA6dGhpcyxhcmd1bWVudHMpLHRoaXN9LG9bdFswXSsiV2l0aCJdPWEuZmlyZVdpdGh9KSxpLnByb21pc2UobyksdCYmdC5jYWxsKG8sbyksb30sd2hlbjpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoLG49dCxyPUFycmF5KG4pLGk9by5jYWxsKGFyZ3VtZW50cyksYT13LkRlZmVycmVkKCkscz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24obil7cltlXT10aGlzLGlbZV09YXJndW1lbnRzLmxlbmd0aD4xP28uY2FsbChhcmd1bWVudHMpOm4sLS10fHxhLnJlc29sdmVXaXRoKHIsaSl9fTtpZih0PD0xJiYoJChlLGEuZG9uZShzKG4pKS5yZXNvbHZlLGEucmVqZWN0LCF0KSwicGVuZGluZyI9PT1hLnN0YXRlKCl8fGcoaVtuXSYmaVtuXS50aGVuKSkpcmV0dXJuIGEudGhlbigpO3doaWxlKG4tLSkkKGlbbl0scyhuKSxhLnJlamVjdCk7cmV0dXJuIGEucHJvbWlzZSgpfX0pO3ZhciBCPS9eKEV2YWx8SW50ZXJuYWx8UmFuZ2V8UmVmZXJlbmNlfFN5bnRheHxUeXBlfFVSSSlFcnJvciQvO3cuRGVmZXJyZWQuZXhjZXB0aW9uSG9vaz1mdW5jdGlvbih0LG4pe2UuY29uc29sZSYmZS5jb25zb2xlLndhcm4mJnQmJkIudGVzdCh0Lm5hbWUpJiZlLmNvbnNvbGUud2FybigialF1ZXJ5LkRlZmVycmVkIGV4Y2VwdGlvbjogIit0Lm1lc3NhZ2UsdC5zdGFjayxuKX0sdy5yZWFkeUV4Y2VwdGlvbj1mdW5jdGlvbih0KXtlLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyB0fSl9O3ZhciBGPXcuRGVmZXJyZWQoKTt3LmZuLnJlYWR5PWZ1bmN0aW9uKGUpe3JldHVybiBGLnRoZW4oZSlbImNhdGNoIl0oZnVuY3Rpb24oZSl7dy5yZWFkeUV4Y2VwdGlvbihlKX0pLHRoaXN9LHcuZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLHJlYWR5OmZ1bmN0aW9uKGUpeyghMD09PWU/LS13LnJlYWR5V2FpdDp3LmlzUmVhZHkpfHwody5pc1JlYWR5PSEwLCEwIT09ZSYmLS13LnJlYWR5V2FpdD4wfHxGLnJlc29sdmVXaXRoKHIsW3ddKSl9fSksdy5yZWFkeS50aGVuPUYudGhlbjtmdW5jdGlvbiBfKCl7ci5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixfKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoImxvYWQiLF8pLHcucmVhZHkoKX0iY29tcGxldGUiPT09ci5yZWFkeVN0YXRlfHwibG9hZGluZyIhPT1yLnJlYWR5U3RhdGUmJiFyLmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbD9lLnNldFRpbWVvdXQody5yZWFkeSk6KHIuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsXyksZS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixfKSk7dmFyIHo9ZnVuY3Rpb24oZSx0LG4scixpLG8sYSl7dmFyIHM9MCx1PWUubGVuZ3RoLGw9bnVsbD09bjtpZigib2JqZWN0Ij09PXgobikpe2k9ITA7Zm9yKHMgaW4gbil6KGUsdCxzLG5bc10sITAsbyxhKX1lbHNlIGlmKHZvaWQgMCE9PXImJihpPSEwLGcocil8fChhPSEwKSxsJiYoYT8odC5jYWxsKGUsciksdD1udWxsKToobD10LHQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBsLmNhbGwodyhlKSxuKX0pKSx0KSlmb3IoO3M8dTtzKyspdChlW3NdLG4sYT9yOnIuY2FsbChlW3NdLHMsdChlW3NdLG4pKSk7cmV0dXJuIGk/ZTpsP3QuY2FsbChlKTp1P3QoZVswXSxuKTpvfSxYPS9eLW1zLS8sVT0vLShbYS16XSkvZztmdW5jdGlvbiBWKGUsdCl7cmV0dXJuIHQudG9VcHBlckNhc2UoKX1mdW5jdGlvbiBHKGUpe3JldHVybiBlLnJlcGxhY2UoWCwibXMtIikucmVwbGFjZShVLFYpfXZhciBZPWZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5ub2RlVHlwZXx8OT09PWUubm9kZVR5cGV8fCErZS5ub2RlVHlwZX07ZnVuY3Rpb24gUSgpe3RoaXMuZXhwYW5kbz13LmV4cGFuZG8rUS51aWQrK31RLnVpZD0xLFEucHJvdG90eXBlPXtjYWNoZTpmdW5jdGlvbihlKXt2YXIgdD1lW3RoaXMuZXhwYW5kb107cmV0dXJuIHR8fCh0PXt9LFkoZSkmJihlLm5vZGVUeXBlP2VbdGhpcy5leHBhbmRvXT10Ok9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHRoaXMuZXhwYW5kbyx7dmFsdWU6dCxjb25maWd1cmFibGU6ITB9KSkpLHR9LHNldDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT10aGlzLmNhY2hlKGUpO2lmKCJzdHJpbmciPT10eXBlb2YgdClpW0codCldPW47ZWxzZSBmb3IociBpbiB0KWlbRyhyKV09dFtyXTtyZXR1cm4gaX0sZ2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQ/dGhpcy5jYWNoZShlKTplW3RoaXMuZXhwYW5kb10mJmVbdGhpcy5leHBhbmRvXVtHKHQpXX0sYWNjZXNzOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09dHx8dCYmInN0cmluZyI9PXR5cGVvZiB0JiZ2b2lkIDA9PT1uP3RoaXMuZ2V0KGUsdCk6KHRoaXMuc2V0KGUsdCxuKSx2b2lkIDAhPT1uP246dCl9LHJlbW92ZTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9ZVt0aGlzLmV4cGFuZG9dO2lmKHZvaWQgMCE9PXIpe2lmKHZvaWQgMCE9PXQpe249KHQ9QXJyYXkuaXNBcnJheSh0KT90Lm1hcChHKToodD1HKHQpKWluIHI/W3RdOnQubWF0Y2goTSl8fFtdKS5sZW5ndGg7d2hpbGUobi0tKWRlbGV0ZSByW3Rbbl1dfSh2b2lkIDA9PT10fHx3LmlzRW1wdHlPYmplY3QocikpJiYoZS5ub2RlVHlwZT9lW3RoaXMuZXhwYW5kb109dm9pZCAwOmRlbGV0ZSBlW3RoaXMuZXhwYW5kb10pfX0saGFzRGF0YTpmdW5jdGlvbihlKXt2YXIgdD1lW3RoaXMuZXhwYW5kb107cmV0dXJuIHZvaWQgMCE9PXQmJiF3LmlzRW1wdHlPYmplY3QodCl9fTt2YXIgSj1uZXcgUSxLPW5ldyBRLFo9L14oPzpce1tcd1xXXSpcfXxcW1tcd1xXXSpcXSkkLyxlZT0vW0EtWl0vZztmdW5jdGlvbiB0ZShlKXtyZXR1cm4idHJ1ZSI9PT1lfHwiZmFsc2UiIT09ZSYmKCJudWxsIj09PWU/bnVsbDplPT09K2UrIiI/K2U6Wi50ZXN0KGUpP0pTT04ucGFyc2UoZSk6ZSl9ZnVuY3Rpb24gbmUoZSx0LG4pe3ZhciByO2lmKHZvaWQgMD09PW4mJjE9PT1lLm5vZGVUeXBlKWlmKHI9ImRhdGEtIit0LnJlcGxhY2UoZWUsIi0kJiIpLnRvTG93ZXJDYXNlKCksInN0cmluZyI9PXR5cGVvZihuPWUuZ2V0QXR0cmlidXRlKHIpKSl7dHJ5e249dGUobil9Y2F0Y2goZSl7fUsuc2V0KGUsdCxuKX1lbHNlIG49dm9pZCAwO3JldHVybiBufXcuZXh0ZW5kKHtoYXNEYXRhOmZ1bmN0aW9uKGUpe3JldHVybiBLLmhhc0RhdGEoZSl8fEouaGFzRGF0YShlKX0sZGF0YTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIEsuYWNjZXNzKGUsdCxuKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlLHQpe0sucmVtb3ZlKGUsdCl9LF9kYXRhOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gSi5hY2Nlc3MoZSx0LG4pfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihlLHQpe0oucmVtb3ZlKGUsdCl9fSksdy5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbz10aGlzWzBdLGE9byYmby5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PWUpe2lmKHRoaXMubGVuZ3RoJiYoaT1LLmdldChvKSwxPT09by5ub2RlVHlwZSYmIUouZ2V0KG8sImhhc0RhdGFBdHRycyIpKSl7bj1hLmxlbmd0aDt3aGlsZShuLS0pYVtuXSYmMD09PShyPWFbbl0ubmFtZSkuaW5kZXhPZigiZGF0YS0iKSYmKHI9RyhyLnNsaWNlKDUpKSxuZShvLHIsaVtyXSkpO0ouc2V0KG8sImhhc0RhdGFBdHRycyIsITApfXJldHVybiBpfXJldHVybiJvYmplY3QiPT10eXBlb2YgZT90aGlzLmVhY2goZnVuY3Rpb24oKXtLLnNldCh0aGlzLGUpfSk6eih0aGlzLGZ1bmN0aW9uKHQpe3ZhciBuO2lmKG8mJnZvaWQgMD09PXQpe2lmKHZvaWQgMCE9PShuPUsuZ2V0KG8sZSkpKXJldHVybiBuO2lmKHZvaWQgMCE9PShuPW5lKG8sZSkpKXJldHVybiBufWVsc2UgdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Sy5zZXQodGhpcyxlLHQpfSl9LG51bGwsdCxhcmd1bWVudHMubGVuZ3RoPjEsbnVsbCwhMCl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe0sucmVtb3ZlKHRoaXMsZSl9KX19KSx3LmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByO2lmKGUpcmV0dXJuIHQ9KHR8fCJmeCIpKyJxdWV1ZSIscj1KLmdldChlLHQpLG4mJighcnx8QXJyYXkuaXNBcnJheShuKT9yPUouYWNjZXNzKGUsdCx3Lm1ha2VBcnJheShuKSk6ci5wdXNoKG4pKSxyfHxbXX0sZGVxdWV1ZTpmdW5jdGlvbihlLHQpe3Q9dHx8ImZ4Ijt2YXIgbj13LnF1ZXVlKGUsdCkscj1uLmxlbmd0aCxpPW4uc2hpZnQoKSxvPXcuX3F1ZXVlSG9va3MoZSx0KSxhPWZ1bmN0aW9uKCl7dy5kZXF1ZXVlKGUsdCl9OyJpbnByb2dyZXNzIj09PWkmJihpPW4uc2hpZnQoKSxyLS0pLGkmJigiZngiPT09dCYmbi51bnNoaWZ0KCJpbnByb2dyZXNzIiksZGVsZXRlIG8uc3RvcCxpLmNhbGwoZSxhLG8pKSwhciYmbyYmby5lbXB0eS5maXJlKCl9LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGUsdCl7dmFyIG49dCsicXVldWVIb29rcyI7cmV0dXJuIEouZ2V0KGUsbil8fEouYWNjZXNzKGUsbix7ZW1wdHk6dy5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7Si5yZW1vdmUoZSxbdCsicXVldWUiLG5dKX0pfSl9fSksdy5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49MjtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGUmJih0PWUsZT0iZngiLG4tLSksYXJndW1lbnRzLmxlbmd0aDxuP3cucXVldWUodGhpc1swXSxlKTp2b2lkIDA9PT10P3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49dy5xdWV1ZSh0aGlzLGUsdCk7dy5fcXVldWVIb29rcyh0aGlzLGUpLCJmeCI9PT1lJiYiaW5wcm9ncmVzcyIhPT1uWzBdJiZ3LmRlcXVldWUodGhpcyxlKX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt3LmRlcXVldWUodGhpcyxlKX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnF1ZXVlKGV8fCJmeCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0xLGk9dy5EZWZlcnJlZCgpLG89dGhpcyxhPXRoaXMubGVuZ3RoLHM9ZnVuY3Rpb24oKXstLXJ8fGkucmVzb2x2ZVdpdGgobyxbb10pfTsic3RyaW5nIiE9dHlwZW9mIGUmJih0PWUsZT12b2lkIDApLGU9ZXx8ImZ4Ijt3aGlsZShhLS0pKG49Si5nZXQob1thXSxlKyJxdWV1ZUhvb2tzIikpJiZuLmVtcHR5JiYocisrLG4uZW1wdHkuYWRkKHMpKTtyZXR1cm4gcygpLGkucHJvbWlzZSh0KX19KTt2YXIgcmU9L1srLV0/KD86XGQqXC58KVxkKyg/OltlRV1bKy1dP1xkK3wpLy5zb3VyY2UsaWU9bmV3IFJlZ0V4cCgiXig/OihbKy1dKT18KSgiK3JlKyIpKFthLXolXSopJCIsImkiKSxvZT1bIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdLGFlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIm5vbmUiPT09KGU9dHx8ZSkuc3R5bGUuZGlzcGxheXx8IiI9PT1lLnN0eWxlLmRpc3BsYXkmJncuY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpJiYibm9uZSI9PT13LmNzcyhlLCJkaXNwbGF5Iil9LHNlPWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYT17fTtmb3IobyBpbiB0KWFbb109ZS5zdHlsZVtvXSxlLnN0eWxlW29dPXRbb107aT1uLmFwcGx5KGUscnx8W10pO2ZvcihvIGluIHQpZS5zdHlsZVtvXT1hW29dO3JldHVybiBpfTtmdW5jdGlvbiB1ZShlLHQsbixyKXt2YXIgaSxvLGE9MjAscz1yP2Z1bmN0aW9uKCl7cmV0dXJuIHIuY3VyKCl9OmZ1bmN0aW9uKCl7cmV0dXJuIHcuY3NzKGUsdCwiIil9LHU9cygpLGw9biYmblszXXx8KHcuY3NzTnVtYmVyW3RdPyIiOiJweCIpLGM9KHcuY3NzTnVtYmVyW3RdfHwicHgiIT09bCYmK3UpJiZpZS5leGVjKHcuY3NzKGUsdCkpO2lmKGMmJmNbM10hPT1sKXt1Lz0yLGw9bHx8Y1szXSxjPSt1fHwxO3doaWxlKGEtLSl3LnN0eWxlKGUsdCxjK2wpLCgxLW8pKigxLShvPXMoKS91fHwuNSkpPD0wJiYoYT0wKSxjLz1vO2MqPTIsdy5zdHlsZShlLHQsYytsKSxuPW58fFtdfXJldHVybiBuJiYoYz0rY3x8K3V8fDAsaT1uWzFdP2MrKG5bMV0rMSkqblsyXTorblsyXSxyJiYoci51bml0PWwsci5zdGFydD1jLHIuZW5kPWkpKSxpfXZhciBsZT17fTtmdW5jdGlvbiBjZShlKXt2YXIgdCxuPWUub3duZXJEb2N1bWVudCxyPWUubm9kZU5hbWUsaT1sZVtyXTtyZXR1cm4gaXx8KHQ9bi5ib2R5LmFwcGVuZENoaWxkKG4uY3JlYXRlRWxlbWVudChyKSksaT13LmNzcyh0LCJkaXNwbGF5IiksdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLCJub25lIj09PWkmJihpPSJibG9jayIpLGxlW3JdPWksaSl9ZnVuY3Rpb24gZmUoZSx0KXtmb3IodmFyIG4scixpPVtdLG89MCxhPWUubGVuZ3RoO288YTtvKyspKHI9ZVtvXSkuc3R5bGUmJihuPXIuc3R5bGUuZGlzcGxheSx0Pygibm9uZSI9PT1uJiYoaVtvXT1KLmdldChyLCJkaXNwbGF5Iil8fG51bGwsaVtvXXx8KHIuc3R5bGUuZGlzcGxheT0iIikpLCIiPT09ci5zdHlsZS5kaXNwbGF5JiZhZShyKSYmKGlbb109Y2UocikpKToibm9uZSIhPT1uJiYoaVtvXT0ibm9uZSIsSi5zZXQociwiZGlzcGxheSIsbikpKTtmb3Iobz0wO288YTtvKyspbnVsbCE9aVtvXSYmKGVbb10uc3R5bGUuZGlzcGxheT1pW29dKTtyZXR1cm4gZX13LmZuLmV4dGVuZCh7c2hvdzpmdW5jdGlvbigpe3JldHVybiBmZSh0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBmZSh0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGUpe3JldHVybiJib29sZWFuIj09dHlwZW9mIGU/ZT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXthZSh0aGlzKT93KHRoaXMpLnNob3coKTp3KHRoaXMpLmhpZGUoKX0pfX0pO3ZhciBwZT0vXig/OmNoZWNrYm94fHJhZGlvKSQvaSxkZT0vPChbYS16XVteXC9cMD5ceDIwXHRcclxuXGZdKykvaSxoZT0vXiR8Xm1vZHVsZSR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksZ2U9e29wdGlvbjpbMSwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsIjwvc2VsZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSxjb2w6WzIsIjx0YWJsZT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3RhYmxlPiJdLHRyOlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6WzAsIiIsIiJdfTtnZS5vcHRncm91cD1nZS5vcHRpb24sZ2UudGJvZHk9Z2UudGZvb3Q9Z2UuY29sZ3JvdXA9Z2UuY2FwdGlvbj1nZS50aGVhZCxnZS50aD1nZS50ZDtmdW5jdGlvbiB5ZShlLHQpe3ZhciBuO3JldHVybiBuPSJ1bmRlZmluZWQiIT10eXBlb2YgZS5nZXRFbGVtZW50c0J5VGFnTmFtZT9lLmdldEVsZW1lbnRzQnlUYWdOYW1lKHR8fCIqIik6InVuZGVmaW5lZCIhPXR5cGVvZiBlLnF1ZXJ5U2VsZWN0b3JBbGw/ZS5xdWVyeVNlbGVjdG9yQWxsKHR8fCIqIik6W10sdm9pZCAwPT09dHx8dCYmTihlLHQpP3cubWVyZ2UoW2VdLG4pOm59ZnVuY3Rpb24gdmUoZSx0KXtmb3IodmFyIG49MCxyPWUubGVuZ3RoO248cjtuKyspSi5zZXQoZVtuXSwiZ2xvYmFsRXZhbCIsIXR8fEouZ2V0KHRbbl0sImdsb2JhbEV2YWwiKSl9dmFyIG1lPS88fCYjP1x3KzsvO2Z1bmN0aW9uIHhlKGUsdCxuLHIsaSl7Zm9yKHZhciBvLGEscyx1LGwsYyxmPXQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLHA9W10sZD0wLGg9ZS5sZW5ndGg7ZDxoO2QrKylpZigobz1lW2RdKXx8MD09PW8paWYoIm9iamVjdCI9PT14KG8pKXcubWVyZ2UocCxvLm5vZGVUeXBlP1tvXTpvKTtlbHNlIGlmKG1lLnRlc3Qobykpe2E9YXx8Zi5hcHBlbmRDaGlsZCh0LmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxzPShkZS5leGVjKG8pfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLHU9Z2Vbc118fGdlLl9kZWZhdWx0LGEuaW5uZXJIVE1MPXVbMV0rdy5odG1sUHJlZmlsdGVyKG8pK3VbMl0sYz11WzBdO3doaWxlKGMtLSlhPWEubGFzdENoaWxkO3cubWVyZ2UocCxhLmNoaWxkTm9kZXMpLChhPWYuZmlyc3RDaGlsZCkudGV4dENvbnRlbnQ9IiJ9ZWxzZSBwLnB1c2godC5jcmVhdGVUZXh0Tm9kZShvKSk7Zi50ZXh0Q29udGVudD0iIixkPTA7d2hpbGUobz1wW2QrK10paWYociYmdy5pbkFycmF5KG8scik+LTEpaSYmaS5wdXNoKG8pO2Vsc2UgaWYobD13LmNvbnRhaW5zKG8ub3duZXJEb2N1bWVudCxvKSxhPXllKGYuYXBwZW5kQ2hpbGQobyksInNjcmlwdCIpLGwmJnZlKGEpLG4pe2M9MDt3aGlsZShvPWFbYysrXSloZS50ZXN0KG8udHlwZXx8IiIpJiZuLnB1c2gobyl9cmV0dXJuIGZ9IWZ1bmN0aW9uKCl7dmFyIGU9ci5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkuYXBwZW5kQ2hpbGQoci5jcmVhdGVFbGVtZW50KCJkaXYiKSksdD1yLmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCJyYWRpbyIpLHQuc2V0QXR0cmlidXRlKCJjaGVja2VkIiwiY2hlY2tlZCIpLHQuc2V0QXR0cmlidXRlKCJuYW1lIiwidCIpLGUuYXBwZW5kQ2hpbGQodCksaC5jaGVja0Nsb25lPWUuY2xvbmVOb2RlKCEwKS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5jaGVja2VkLGUuaW5uZXJIVE1MPSI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+IixoLm5vQ2xvbmVDaGVja2VkPSEhZS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWV9KCk7dmFyIGJlPXIuZG9jdW1lbnRFbGVtZW50LHdlPS9ea2V5LyxUZT0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnV8ZHJhZ3xkcm9wKXxjbGljay8sQ2U9L14oW14uXSopKD86XC4oLispfCkvO2Z1bmN0aW9uIEVlKCl7cmV0dXJuITB9ZnVuY3Rpb24ga2UoKXtyZXR1cm4hMX1mdW5jdGlvbiBTZSgpe3RyeXtyZXR1cm4gci5hY3RpdmVFbGVtZW50fWNhdGNoKGUpe319ZnVuY3Rpb24gRGUoZSx0LG4scixpLG8pe3ZhciBhLHM7aWYoIm9iamVjdCI9PXR5cGVvZiB0KXsic3RyaW5nIiE9dHlwZW9mIG4mJihyPXJ8fG4sbj12b2lkIDApO2ZvcihzIGluIHQpRGUoZSxzLG4scix0W3NdLG8pO3JldHVybiBlfWlmKG51bGw9PXImJm51bGw9PWk/KGk9bixyPW49dm9pZCAwKTpudWxsPT1pJiYoInN0cmluZyI9PXR5cGVvZiBuPyhpPXIscj12b2lkIDApOihpPXIscj1uLG49dm9pZCAwKSksITE9PT1pKWk9a2U7ZWxzZSBpZighaSlyZXR1cm4gZTtyZXR1cm4gMT09PW8mJihhPWksKGk9ZnVuY3Rpb24oZSl7cmV0dXJuIHcoKS5vZmYoZSksYS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KS5ndWlkPWEuZ3VpZHx8KGEuZ3VpZD13Lmd1aWQrKykpLGUuZWFjaChmdW5jdGlvbigpe3cuZXZlbnQuYWRkKHRoaXMsdCxpLHIsbil9KX13LmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIG8sYSxzLHUsbCxjLGYscCxkLGgsZyx5PUouZ2V0KGUpO2lmKHkpe24uaGFuZGxlciYmKG49KG89bikuaGFuZGxlcixpPW8uc2VsZWN0b3IpLGkmJncuZmluZC5tYXRjaGVzU2VsZWN0b3IoYmUsaSksbi5ndWlkfHwobi5ndWlkPXcuZ3VpZCsrKSwodT15LmV2ZW50cyl8fCh1PXkuZXZlbnRzPXt9KSwoYT15LmhhbmRsZSl8fChhPXkuaGFuZGxlPWZ1bmN0aW9uKHQpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgdyYmdy5ldmVudC50cmlnZ2VyZWQhPT10LnR5cGU/dy5ldmVudC5kaXNwYXRjaC5hcHBseShlLGFyZ3VtZW50cyk6dm9pZCAwfSksbD0odD0odHx8IiIpLm1hdGNoKE0pfHxbIiJdKS5sZW5ndGg7d2hpbGUobC0tKWQ9Zz0ocz1DZS5leGVjKHRbbF0pfHxbXSlbMV0saD0oc1syXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLGQmJihmPXcuZXZlbnQuc3BlY2lhbFtkXXx8e30sZD0oaT9mLmRlbGVnYXRlVHlwZTpmLmJpbmRUeXBlKXx8ZCxmPXcuZXZlbnQuc3BlY2lhbFtkXXx8e30sYz13LmV4dGVuZCh7dHlwZTpkLG9yaWdUeXBlOmcsZGF0YTpyLGhhbmRsZXI6bixndWlkOm4uZ3VpZCxzZWxlY3RvcjppLG5lZWRzQ29udGV4dDppJiZ3LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoaSksbmFtZXNwYWNlOmguam9pbigiLiIpfSxvKSwocD11W2RdKXx8KChwPXVbZF09W10pLmRlbGVnYXRlQ291bnQ9MCxmLnNldHVwJiYhMSE9PWYuc2V0dXAuY2FsbChlLHIsaCxhKXx8ZS5hZGRFdmVudExpc3RlbmVyJiZlLmFkZEV2ZW50TGlzdGVuZXIoZCxhKSksZi5hZGQmJihmLmFkZC5jYWxsKGUsYyksYy5oYW5kbGVyLmd1aWR8fChjLmhhbmRsZXIuZ3VpZD1uLmd1aWQpKSxpP3Auc3BsaWNlKHAuZGVsZWdhdGVDb3VudCsrLDAsYyk6cC5wdXNoKGMpLHcuZXZlbnQuZ2xvYmFsW2RdPSEwKX19LHJlbW92ZTpmdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvLGEscyx1LGwsYyxmLHAsZCxoLGcseT1KLmhhc0RhdGEoZSkmJkouZ2V0KGUpO2lmKHkmJih1PXkuZXZlbnRzKSl7bD0odD0odHx8IiIpLm1hdGNoKE0pfHxbIiJdKS5sZW5ndGg7d2hpbGUobC0tKWlmKHM9Q2UuZXhlYyh0W2xdKXx8W10sZD1nPXNbMV0saD0oc1syXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLGQpe2Y9dy5ldmVudC5zcGVjaWFsW2RdfHx7fSxwPXVbZD0ocj9mLmRlbGVnYXRlVHlwZTpmLmJpbmRUeXBlKXx8ZF18fFtdLHM9c1syXSYmbmV3IFJlZ0V4cCgiKF58XFwuKSIraC5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKSxhPW89cC5sZW5ndGg7d2hpbGUoby0tKWM9cFtvXSwhaSYmZyE9PWMub3JpZ1R5cGV8fG4mJm4uZ3VpZCE9PWMuZ3VpZHx8cyYmIXMudGVzdChjLm5hbWVzcGFjZSl8fHImJnIhPT1jLnNlbGVjdG9yJiYoIioqIiE9PXJ8fCFjLnNlbGVjdG9yKXx8KHAuc3BsaWNlKG8sMSksYy5zZWxlY3RvciYmcC5kZWxlZ2F0ZUNvdW50LS0sZi5yZW1vdmUmJmYucmVtb3ZlLmNhbGwoZSxjKSk7YSYmIXAubGVuZ3RoJiYoZi50ZWFyZG93biYmITEhPT1mLnRlYXJkb3duLmNhbGwoZSxoLHkuaGFuZGxlKXx8dy5yZW1vdmVFdmVudChlLGQseS5oYW5kbGUpLGRlbGV0ZSB1W2RdKX1lbHNlIGZvcihkIGluIHUpdy5ldmVudC5yZW1vdmUoZSxkK3RbbF0sbixyLCEwKTt3LmlzRW1wdHlPYmplY3QodSkmJkoucmVtb3ZlKGUsImhhbmRsZSBldmVudHMiKX19LGRpc3BhdGNoOmZ1bmN0aW9uKGUpe3ZhciB0PXcuZXZlbnQuZml4KGUpLG4scixpLG8sYSxzLHU9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpLGw9KEouZ2V0KHRoaXMsImV2ZW50cyIpfHx7fSlbdC50eXBlXXx8W10sYz13LmV2ZW50LnNwZWNpYWxbdC50eXBlXXx8e307Zm9yKHVbMF09dCxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl1W25dPWFyZ3VtZW50c1tuXTtpZih0LmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWMucHJlRGlzcGF0Y2h8fCExIT09Yy5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsdCkpe3M9dy5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsdCxsKSxuPTA7d2hpbGUoKG89c1tuKytdKSYmIXQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7dC5jdXJyZW50VGFyZ2V0PW8uZWxlbSxyPTA7d2hpbGUoKGE9by5oYW5kbGVyc1tyKytdKSYmIXQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSl0LnJuYW1lc3BhY2UmJiF0LnJuYW1lc3BhY2UudGVzdChhLm5hbWVzcGFjZSl8fCh0LmhhbmRsZU9iaj1hLHQuZGF0YT1hLmRhdGEsdm9pZCAwIT09KGk9KCh3LmV2ZW50LnNwZWNpYWxbYS5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fGEuaGFuZGxlcikuYXBwbHkoby5lbGVtLHUpKSYmITE9PT0odC5yZXN1bHQ9aSkmJih0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBjLnBvc3REaXNwYXRjaCYmYy5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLHQpLHQucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbyxhLHM9W10sdT10LmRlbGVnYXRlQ291bnQsbD1lLnRhcmdldDtpZih1JiZsLm5vZGVUeXBlJiYhKCJjbGljayI9PT1lLnR5cGUmJmUuYnV0dG9uPj0xKSlmb3IoO2whPT10aGlzO2w9bC5wYXJlbnROb2RlfHx0aGlzKWlmKDE9PT1sLm5vZGVUeXBlJiYoImNsaWNrIiE9PWUudHlwZXx8ITAhPT1sLmRpc2FibGVkKSl7Zm9yKG89W10sYT17fSxuPTA7bjx1O24rKyl2b2lkIDA9PT1hW2k9KHI9dFtuXSkuc2VsZWN0b3IrIiAiXSYmKGFbaV09ci5uZWVkc0NvbnRleHQ/dyhpLHRoaXMpLmluZGV4KGwpPi0xOncuZmluZChpLHRoaXMsbnVsbCxbbF0pLmxlbmd0aCksYVtpXSYmby5wdXNoKHIpO28ubGVuZ3RoJiZzLnB1c2goe2VsZW06bCxoYW5kbGVyczpvfSl9cmV0dXJuIGw9dGhpcyx1PHQubGVuZ3RoJiZzLnB1c2goe2VsZW06bCxoYW5kbGVyczp0LnNsaWNlKHUpfSksc30sYWRkUHJvcDpmdW5jdGlvbihlLHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh3LkV2ZW50LnByb3RvdHlwZSxlLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6Zyh0KT9mdW5jdGlvbigpe2lmKHRoaXMub3JpZ2luYWxFdmVudClyZXR1cm4gdCh0aGlzLm9yaWdpbmFsRXZlbnQpfTpmdW5jdGlvbigpe2lmKHRoaXMub3JpZ2luYWxFdmVudClyZXR1cm4gdGhpcy5vcmlnaW5hbEV2ZW50W2VdfSxzZXQ6ZnVuY3Rpb24odCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsZSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dH0pfX0pfSxmaXg6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbdy5leHBhbmRvXT9lOm5ldyB3LkV2ZW50KGUpfSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZih0aGlzIT09U2UoKSYmdGhpcy5mb2N1cylyZXR1cm4gdGhpcy5mb2N1cygpLCExfSxkZWxlZ2F0ZVR5cGU6ImZvY3VzaW4ifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7aWYodGhpcz09PVNlKCkmJnRoaXMuYmx1cilyZXR1cm4gdGhpcy5ibHVyKCksITF9LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKCJjaGVja2JveCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2smJk4odGhpcywiaW5wdXQiKSlyZXR1cm4gdGhpcy5jbGljaygpLCExfSxfZGVmYXVsdDpmdW5jdGlvbihlKXtyZXR1cm4gTihlLnRhcmdldCwiYSIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oZSl7dm9pZCAwIT09ZS5yZXN1bHQmJmUub3JpZ2luYWxFdmVudCYmKGUub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1lLnJlc3VsdCl9fX19LHcucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oZSx0LG4pe2UucmVtb3ZlRXZlbnRMaXN0ZW5lciYmZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsbil9LHcuRXZlbnQ9ZnVuY3Rpb24oZSx0KXtpZighKHRoaXMgaW5zdGFuY2VvZiB3LkV2ZW50KSlyZXR1cm4gbmV3IHcuRXZlbnQoZSx0KTtlJiZlLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1lLHRoaXMudHlwZT1lLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9ZS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1lLmRlZmF1bHRQcmV2ZW50ZWQmJiExPT09ZS5yZXR1cm5WYWx1ZT9FZTprZSx0aGlzLnRhcmdldD1lLnRhcmdldCYmMz09PWUudGFyZ2V0Lm5vZGVUeXBlP2UudGFyZ2V0LnBhcmVudE5vZGU6ZS50YXJnZXQsdGhpcy5jdXJyZW50VGFyZ2V0PWUuY3VycmVudFRhcmdldCx0aGlzLnJlbGF0ZWRUYXJnZXQ9ZS5yZWxhdGVkVGFyZ2V0KTp0aGlzLnR5cGU9ZSx0JiZ3LmV4dGVuZCh0aGlzLHQpLHRoaXMudGltZVN0YW1wPWUmJmUudGltZVN0YW1wfHxEYXRlLm5vdygpLHRoaXNbdy5leHBhbmRvXT0hMH0sdy5FdmVudC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOncuRXZlbnQsaXNEZWZhdWx0UHJldmVudGVkOmtlLGlzUHJvcGFnYXRpb25TdG9wcGVkOmtlLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOmtlLGlzU2ltdWxhdGVkOiExLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPUVlLGUmJiF0aGlzLmlzU2ltdWxhdGVkJiZlLnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPUVlLGUmJiF0aGlzLmlzU2ltdWxhdGVkJiZlLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1FZSxlJiYhdGhpcy5pc1NpbXVsYXRlZCYmZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0sdy5lYWNoKHthbHRLZXk6ITAsYnViYmxlczohMCxjYW5jZWxhYmxlOiEwLGNoYW5nZWRUb3VjaGVzOiEwLGN0cmxLZXk6ITAsZGV0YWlsOiEwLGV2ZW50UGhhc2U6ITAsbWV0YUtleTohMCxwYWdlWDohMCxwYWdlWTohMCxzaGlmdEtleTohMCx2aWV3OiEwLCJjaGFyIjohMCxjaGFyQ29kZTohMCxrZXk6ITAsa2V5Q29kZTohMCxidXR0b246ITAsYnV0dG9uczohMCxjbGllbnRYOiEwLGNsaWVudFk6ITAsb2Zmc2V0WDohMCxvZmZzZXRZOiEwLHBvaW50ZXJJZDohMCxwb2ludGVyVHlwZTohMCxzY3JlZW5YOiEwLHNjcmVlblk6ITAsdGFyZ2V0VG91Y2hlczohMCx0b0VsZW1lbnQ6ITAsdG91Y2hlczohMCx3aGljaDpmdW5jdGlvbihlKXt2YXIgdD1lLmJ1dHRvbjtyZXR1cm4gbnVsbD09ZS53aGljaCYmd2UudGVzdChlLnR5cGUpP251bGwhPWUuY2hhckNvZGU/ZS5jaGFyQ29kZTplLmtleUNvZGU6IWUud2hpY2gmJnZvaWQgMCE9PXQmJlRlLnRlc3QoZS50eXBlKT8xJnQ/MToyJnQ/Mzo0JnQ/MjowOmUud2hpY2h9fSx3LmV2ZW50LmFkZFByb3ApLHcuZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oZSx0KXt3LmV2ZW50LnNwZWNpYWxbZV09e2RlbGVnYXRlVHlwZTp0LGJpbmRUeXBlOnQsaGFuZGxlOmZ1bmN0aW9uKGUpe3ZhciBuLHI9dGhpcyxpPWUucmVsYXRlZFRhcmdldCxvPWUuaGFuZGxlT2JqO3JldHVybiBpJiYoaT09PXJ8fHcuY29udGFpbnMocixpKSl8fChlLnR5cGU9by5vcmlnVHlwZSxuPW8uaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksZS50eXBlPXQpLG59fX0pLHcuZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gRGUodGhpcyxlLHQsbixyKX0sb25lOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBEZSh0aGlzLGUsdCxuLHIsMSl9LG9mZjpmdW5jdGlvbihlLHQsbil7dmFyIHIsaTtpZihlJiZlLnByZXZlbnREZWZhdWx0JiZlLmhhbmRsZU9iailyZXR1cm4gcj1lLmhhbmRsZU9iaix3KGUuZGVsZWdhdGVUYXJnZXQpLm9mZihyLm5hbWVzcGFjZT9yLm9yaWdUeXBlKyIuIityLm5hbWVzcGFjZTpyLm9yaWdUeXBlLHIuc2VsZWN0b3Isci5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgZSl7Zm9yKGkgaW4gZSl0aGlzLm9mZihpLHQsZVtpXSk7cmV0dXJuIHRoaXN9cmV0dXJuITEhPT10JiYiZnVuY3Rpb24iIT10eXBlb2YgdHx8KG49dCx0PXZvaWQgMCksITE9PT1uJiYobj1rZSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dy5ldmVudC5yZW1vdmUodGhpcyxlLG4sdCl9KX19KTt2YXIgTmU9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW2Etel1bXlwvXDA+XHgyMFx0XHJcblxmXSopW14+XSopXC8+L2dpLEFlPS88c2NyaXB0fDxzdHlsZXw8bGluay9pLGplPS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLHFlPS9eXHMqPCEoPzpcW0NEQVRBXFt8LS0pfCg/OlxdXF18LS0pPlxzKiQvZztmdW5jdGlvbiBMZShlLHQpe3JldHVybiBOKGUsInRhYmxlIikmJk4oMTEhPT10Lm5vZGVUeXBlP3Q6dC5maXJzdENoaWxkLCJ0ciIpP3coZSkuY2hpbGRyZW4oInRib2R5IilbMF18fGU6ZX1mdW5jdGlvbiBIZShlKXtyZXR1cm4gZS50eXBlPShudWxsIT09ZS5nZXRBdHRyaWJ1dGUoInR5cGUiKSkrIi8iK2UudHlwZSxlfWZ1bmN0aW9uIE9lKGUpe3JldHVybiJ0cnVlLyI9PT0oZS50eXBlfHwiIikuc2xpY2UoMCw1KT9lLnR5cGU9ZS50eXBlLnNsaWNlKDUpOmUucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksZX1mdW5jdGlvbiBQZShlLHQpe3ZhciBuLHIsaSxvLGEscyx1LGw7aWYoMT09PXQubm9kZVR5cGUpe2lmKEouaGFzRGF0YShlKSYmKG89Si5hY2Nlc3MoZSksYT1KLnNldCh0LG8pLGw9by5ldmVudHMpKXtkZWxldGUgYS5oYW5kbGUsYS5ldmVudHM9e307Zm9yKGkgaW4gbClmb3Iobj0wLHI9bFtpXS5sZW5ndGg7bjxyO24rKyl3LmV2ZW50LmFkZCh0LGksbFtpXVtuXSl9Sy5oYXNEYXRhKGUpJiYocz1LLmFjY2VzcyhlKSx1PXcuZXh0ZW5kKHt9LHMpLEsuc2V0KHQsdSkpfX1mdW5jdGlvbiBNZShlLHQpe3ZhciBuPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsiaW5wdXQiPT09biYmcGUudGVzdChlLnR5cGUpP3QuY2hlY2tlZD1lLmNoZWNrZWQ6ImlucHV0IiE9PW4mJiJ0ZXh0YXJlYSIhPT1ufHwodC5kZWZhdWx0VmFsdWU9ZS5kZWZhdWx0VmFsdWUpfWZ1bmN0aW9uIFJlKGUsdCxuLHIpe3Q9YS5hcHBseShbXSx0KTt2YXIgaSxvLHMsdSxsLGMsZj0wLHA9ZS5sZW5ndGgsZD1wLTEseT10WzBdLHY9Zyh5KTtpZih2fHxwPjEmJiJzdHJpbmciPT10eXBlb2YgeSYmIWguY2hlY2tDbG9uZSYmamUudGVzdCh5KSlyZXR1cm4gZS5lYWNoKGZ1bmN0aW9uKGkpe3ZhciBvPWUuZXEoaSk7diYmKHRbMF09eS5jYWxsKHRoaXMsaSxvLmh0bWwoKSkpLFJlKG8sdCxuLHIpfSk7aWYocCYmKGk9eGUodCxlWzBdLm93bmVyRG9jdW1lbnQsITEsZSxyKSxvPWkuZmlyc3RDaGlsZCwxPT09aS5jaGlsZE5vZGVzLmxlbmd0aCYmKGk9byksb3x8cikpe2Zvcih1PShzPXcubWFwKHllKGksInNjcmlwdCIpLEhlKSkubGVuZ3RoO2Y8cDtmKyspbD1pLGYhPT1kJiYobD13LmNsb25lKGwsITAsITApLHUmJncubWVyZ2Uocyx5ZShsLCJzY3JpcHQiKSkpLG4uY2FsbChlW2ZdLGwsZik7aWYodSlmb3IoYz1zW3MubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQsdy5tYXAocyxPZSksZj0wO2Y8dTtmKyspbD1zW2ZdLGhlLnRlc3QobC50eXBlfHwiIikmJiFKLmFjY2VzcyhsLCJnbG9iYWxFdmFsIikmJncuY29udGFpbnMoYyxsKSYmKGwuc3JjJiYibW9kdWxlIiE9PShsLnR5cGV8fCIiKS50b0xvd2VyQ2FzZSgpP3cuX2V2YWxVcmwmJncuX2V2YWxVcmwobC5zcmMpOm0obC50ZXh0Q29udGVudC5yZXBsYWNlKHFlLCIiKSxjLGwpKX1yZXR1cm4gZX1mdW5jdGlvbiBJZShlLHQsbil7Zm9yKHZhciByLGk9dD93LmZpbHRlcih0LGUpOmUsbz0wO251bGwhPShyPWlbb10pO28rKylufHwxIT09ci5ub2RlVHlwZXx8dy5jbGVhbkRhdGEoeWUocikpLHIucGFyZW50Tm9kZSYmKG4mJncuY29udGFpbnMoci5vd25lckRvY3VtZW50LHIpJiZ2ZSh5ZShyLCJzY3JpcHQiKSksci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHIpKTtyZXR1cm4gZX13LmV4dGVuZCh7aHRtbFByZWZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKE5lLCI8JDE+PC8kMj4iKX0sY2xvbmU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHM9ZS5jbG9uZU5vZGUoITApLHU9dy5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSk7aWYoIShoLm5vQ2xvbmVDaGVja2VkfHwxIT09ZS5ub2RlVHlwZSYmMTEhPT1lLm5vZGVUeXBlfHx3LmlzWE1MRG9jKGUpKSlmb3IoYT15ZShzKSxyPTAsaT0obz15ZShlKSkubGVuZ3RoO3I8aTtyKyspTWUob1tyXSxhW3JdKTtpZih0KWlmKG4pZm9yKG89b3x8eWUoZSksYT1hfHx5ZShzKSxyPTAsaT1vLmxlbmd0aDtyPGk7cisrKVBlKG9bcl0sYVtyXSk7ZWxzZSBQZShlLHMpO3JldHVybihhPXllKHMsInNjcmlwdCIpKS5sZW5ndGg+MCYmdmUoYSwhdSYmeWUoZSwic2NyaXB0IikpLHN9LGNsZWFuRGF0YTpmdW5jdGlvbihlKXtmb3IodmFyIHQsbixyLGk9dy5ldmVudC5zcGVjaWFsLG89MDt2b2lkIDAhPT0obj1lW29dKTtvKyspaWYoWShuKSl7aWYodD1uW0ouZXhwYW5kb10pe2lmKHQuZXZlbnRzKWZvcihyIGluIHQuZXZlbnRzKWlbcl0/dy5ldmVudC5yZW1vdmUobixyKTp3LnJlbW92ZUV2ZW50KG4scix0LmhhbmRsZSk7bltKLmV4cGFuZG9dPXZvaWQgMH1uW0suZXhwYW5kb10mJihuW0suZXhwYW5kb109dm9pZCAwKX19fSksdy5mbi5leHRlbmQoe2RldGFjaDpmdW5jdGlvbihlKXtyZXR1cm4gSWUodGhpcyxlLCEwKX0scmVtb3ZlOmZ1bmN0aW9uKGUpe3JldHVybiBJZSh0aGlzLGUpfSx0ZXh0OmZ1bmN0aW9uKGUpe3JldHVybiB6KHRoaXMsZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWU/dy50ZXh0KHRoaXMpOnRoaXMuZW1wdHkoKS5lYWNoKGZ1bmN0aW9uKCl7MSE9PXRoaXMubm9kZVR5cGUmJjExIT09dGhpcy5ub2RlVHlwZSYmOSE9PXRoaXMubm9kZVR5cGV8fCh0aGlzLnRleHRDb250ZW50PWUpfSl9LG51bGwsZSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIFJlKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpezEhPT10aGlzLm5vZGVUeXBlJiYxMSE9PXRoaXMubm9kZVR5cGUmJjkhPT10aGlzLm5vZGVUeXBlfHxMZSh0aGlzLGUpLmFwcGVuZENoaWxkKGUpfSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gUmUodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciB0PUxlKHRoaXMsZSk7dC5pbnNlcnRCZWZvcmUoZSx0LmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gUmUodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gUmUodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcy5uZXh0U2libGluZyl9KX0sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGUsdD0wO251bGwhPShlPXRoaXNbdF0pO3QrKykxPT09ZS5ub2RlVHlwZSYmKHcuY2xlYW5EYXRhKHllKGUsITEpKSxlLnRleHRDb250ZW50PSIiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1udWxsIT1lJiZlLHQ9bnVsbD09dD9lOnQsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gdy5jbG9uZSh0aGlzLGUsdCl9KX0saHRtbDpmdW5jdGlvbihlKXtyZXR1cm4geih0aGlzLGZ1bmN0aW9uKGUpe3ZhciB0PXRoaXNbMF18fHt9LG49MCxyPXRoaXMubGVuZ3RoO2lmKHZvaWQgMD09PWUmJjE9PT10Lm5vZGVUeXBlKXJldHVybiB0LmlubmVySFRNTDtpZigic3RyaW5nIj09dHlwZW9mIGUmJiFBZS50ZXN0KGUpJiYhZ2VbKGRlLmV4ZWMoZSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCldKXtlPXcuaHRtbFByZWZpbHRlcihlKTt0cnl7Zm9yKDtuPHI7bisrKTE9PT0odD10aGlzW25dfHx7fSkubm9kZVR5cGUmJih3LmNsZWFuRGF0YSh5ZSh0LCExKSksdC5pbm5lckhUTUw9ZSk7dD0wfWNhdGNoKGUpe319dCYmdGhpcy5lbXB0eSgpLmFwcGVuZChlKX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiBSZSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbih0KXt2YXIgbj10aGlzLnBhcmVudE5vZGU7dy5pbkFycmF5KHRoaXMsZSk8MCYmKHcuY2xlYW5EYXRhKHllKHRoaXMpKSxuJiZuLnJlcGxhY2VDaGlsZCh0LHRoaXMpKX0sZSl9fSksdy5lYWNoKHthcHBlbmRUbzoiYXBwZW5kIixwcmVwZW5kVG86InByZXBlbmQiLGluc2VydEJlZm9yZToiYmVmb3JlIixpbnNlcnRBZnRlcjoiYWZ0ZXIiLHJlcGxhY2VBbGw6InJlcGxhY2VXaXRoIn0sZnVuY3Rpb24oZSx0KXt3LmZuW2VdPWZ1bmN0aW9uKGUpe2Zvcih2YXIgbixyPVtdLGk9dyhlKSxvPWkubGVuZ3RoLTEsYT0wO2E8PW87YSsrKW49YT09PW8/dGhpczp0aGlzLmNsb25lKCEwKSx3KGlbYV0pW3RdKG4pLHMuYXBwbHkocixuLmdldCgpKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2socil9fSk7dmFyIFdlPW5ldyBSZWdFeHAoIl4oIityZSsiKSg/IXB4KVthLXolXSskIiwiaSIpLCRlPWZ1bmN0aW9uKHQpe3ZhciBuPXQub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztyZXR1cm4gbiYmbi5vcGVuZXJ8fChuPWUpLG4uZ2V0Q29tcHV0ZWRTdHlsZSh0KX0sQmU9bmV3IFJlZ0V4cChvZS5qb2luKCJ8IiksImkiKTshZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7aWYoYyl7bC5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0xMTExMXB4O3dpZHRoOjYwcHg7bWFyZ2luLXRvcDoxcHg7cGFkZGluZzowO2JvcmRlcjowIixjLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7Ym94LXNpemluZzpib3JkZXItYm94O292ZXJmbG93OnNjcm9sbDttYXJnaW46YXV0bztib3JkZXI6MXB4O3BhZGRpbmc6MXB4O3dpZHRoOjYwJTt0b3A6MSUiLGJlLmFwcGVuZENoaWxkKGwpLmFwcGVuZENoaWxkKGMpO3ZhciB0PWUuZ2V0Q29tcHV0ZWRTdHlsZShjKTtpPSIxJSIhPT10LnRvcCx1PTEyPT09bih0Lm1hcmdpbkxlZnQpLGMuc3R5bGUucmlnaHQ9IjYwJSIscz0zNj09PW4odC5yaWdodCksbz0zNj09PW4odC53aWR0aCksYy5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiLGE9MzY9PT1jLm9mZnNldFdpZHRofHwiYWJzb2x1dGUiLGJlLnJlbW92ZUNoaWxkKGwpLGM9bnVsbH19ZnVuY3Rpb24gbihlKXtyZXR1cm4gTWF0aC5yb3VuZChwYXJzZUZsb2F0KGUpKX12YXIgaSxvLGEscyx1LGw9ci5jcmVhdGVFbGVtZW50KCJkaXYiKSxjPXIuY3JlYXRlRWxlbWVudCgiZGl2Iik7Yy5zdHlsZSYmKGMuc3R5bGUuYmFja2dyb3VuZENsaXA9ImNvbnRlbnQtYm94IixjLmNsb25lTm9kZSghMCkuc3R5bGUuYmFja2dyb3VuZENsaXA9IiIsaC5jbGVhckNsb25lU3R5bGU9ImNvbnRlbnQtYm94Ij09PWMuc3R5bGUuYmFja2dyb3VuZENsaXAsdy5leHRlbmQoaCx7Ym94U2l6aW5nUmVsaWFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdCgpLG99LHBpeGVsQm94U3R5bGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHQoKSxzfSxwaXhlbFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHQoKSxpfSxyZWxpYWJsZU1hcmdpbkxlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdCgpLHV9LHNjcm9sbGJveFNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdCgpLGF9fSkpfSgpO2Z1bmN0aW9uIEZlKGUsdCxuKXt2YXIgcixpLG8sYSxzPWUuc3R5bGU7cmV0dXJuKG49bnx8JGUoZSkpJiYoIiIhPT0oYT1uLmdldFByb3BlcnR5VmFsdWUodCl8fG5bdF0pfHx3LmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKXx8KGE9dy5zdHlsZShlLHQpKSwhaC5waXhlbEJveFN0eWxlcygpJiZXZS50ZXN0KGEpJiZCZS50ZXN0KHQpJiYocj1zLndpZHRoLGk9cy5taW5XaWR0aCxvPXMubWF4V2lkdGgscy5taW5XaWR0aD1zLm1heFdpZHRoPXMud2lkdGg9YSxhPW4ud2lkdGgscy53aWR0aD1yLHMubWluV2lkdGg9aSxzLm1heFdpZHRoPW8pKSx2b2lkIDAhPT1hP2ErIiI6YX1mdW5jdGlvbiBfZShlLHQpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtpZighZSgpKXJldHVybih0aGlzLmdldD10KS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZGVsZXRlIHRoaXMuZ2V0fX19dmFyIHplPS9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxYZT0vXi0tLyxVZT17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sVmU9e2xldHRlclNwYWNpbmc6IjAiLGZvbnRXZWlnaHQ6IjQwMCJ9LEdlPVsiV2Via2l0IiwiTW96IiwibXMiXSxZZT1yLmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlO2Z1bmN0aW9uIFFlKGUpe2lmKGUgaW4gWWUpcmV0dXJuIGU7dmFyIHQ9ZVswXS50b1VwcGVyQ2FzZSgpK2Uuc2xpY2UoMSksbj1HZS5sZW5ndGg7d2hpbGUobi0tKWlmKChlPUdlW25dK3QpaW4gWWUpcmV0dXJuIGV9ZnVuY3Rpb24gSmUoZSl7dmFyIHQ9dy5jc3NQcm9wc1tlXTtyZXR1cm4gdHx8KHQ9dy5jc3NQcm9wc1tlXT1RZShlKXx8ZSksdH1mdW5jdGlvbiBLZShlLHQsbil7dmFyIHI9aWUuZXhlYyh0KTtyZXR1cm4gcj9NYXRoLm1heCgwLHJbMl0tKG58fDApKSsoclszXXx8InB4Iik6dH1mdW5jdGlvbiBaZShlLHQsbixyLGksbyl7dmFyIGE9IndpZHRoIj09PXQ/MTowLHM9MCx1PTA7aWYobj09PShyPyJib3JkZXIiOiJjb250ZW50IikpcmV0dXJuIDA7Zm9yKDthPDQ7YSs9MikibWFyZ2luIj09PW4mJih1Kz13LmNzcyhlLG4rb2VbYV0sITAsaSkpLHI/KCJjb250ZW50Ij09PW4mJih1LT13LmNzcyhlLCJwYWRkaW5nIitvZVthXSwhMCxpKSksIm1hcmdpbiIhPT1uJiYodS09dy5jc3MoZSwiYm9yZGVyIitvZVthXSsiV2lkdGgiLCEwLGkpKSk6KHUrPXcuY3NzKGUsInBhZGRpbmciK29lW2FdLCEwLGkpLCJwYWRkaW5nIiE9PW4/dSs9dy5jc3MoZSwiYm9yZGVyIitvZVthXSsiV2lkdGgiLCEwLGkpOnMrPXcuY3NzKGUsImJvcmRlciIrb2VbYV0rIldpZHRoIiwhMCxpKSk7cmV0dXJuIXImJm8+PTAmJih1Kz1NYXRoLm1heCgwLE1hdGguY2VpbChlWyJvZmZzZXQiK3RbMF0udG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpXS1vLXUtcy0uNSkpKSx1fWZ1bmN0aW9uIGV0KGUsdCxuKXt2YXIgcj0kZShlKSxpPUZlKGUsdCxyKSxvPSJib3JkZXItYm94Ij09PXcuY3NzKGUsImJveFNpemluZyIsITEsciksYT1vO2lmKFdlLnRlc3QoaSkpe2lmKCFuKXJldHVybiBpO2k9ImF1dG8ifXJldHVybiBhPWEmJihoLmJveFNpemluZ1JlbGlhYmxlKCl8fGk9PT1lLnN0eWxlW3RdKSwoImF1dG8iPT09aXx8IXBhcnNlRmxvYXQoaSkmJiJpbmxpbmUiPT09dy5jc3MoZSwiZGlzcGxheSIsITEscikpJiYoaT1lWyJvZmZzZXQiK3RbMF0udG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpXSxhPSEwKSwoaT1wYXJzZUZsb2F0KGkpfHwwKStaZShlLHQsbnx8KG8/ImJvcmRlciI6ImNvbnRlbnQiKSxhLHIsaSkrInB4In13LmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihlLHQpe2lmKHQpe3ZhciBuPUZlKGUsIm9wYWNpdHkiKTtyZXR1cm4iIj09PW4/IjEiOm59fX19LGNzc051bWJlcjp7YW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6ITAsY29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6e30sc3R5bGU6ZnVuY3Rpb24oZSx0LG4scil7aWYoZSYmMyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlJiZlLnN0eWxlKXt2YXIgaSxvLGEscz1HKHQpLHU9WGUudGVzdCh0KSxsPWUuc3R5bGU7aWYodXx8KHQ9SmUocykpLGE9dy5jc3NIb29rc1t0XXx8dy5jc3NIb29rc1tzXSx2b2lkIDA9PT1uKXJldHVybiBhJiYiZ2V0ImluIGEmJnZvaWQgMCE9PShpPWEuZ2V0KGUsITEscikpP2k6bFt0XTsic3RyaW5nIj09KG89dHlwZW9mIG4pJiYoaT1pZS5leGVjKG4pKSYmaVsxXSYmKG49dWUoZSx0LGkpLG89Im51bWJlciIpLG51bGwhPW4mJm49PT1uJiYoIm51bWJlciI9PT1vJiYobis9aSYmaVszXXx8KHcuY3NzTnVtYmVyW3NdPyIiOiJweCIpKSxoLmNsZWFyQ2xvbmVTdHlsZXx8IiIhPT1ufHwwIT09dC5pbmRleE9mKCJiYWNrZ3JvdW5kIil8fChsW3RdPSJpbmhlcml0IiksYSYmInNldCJpbiBhJiZ2b2lkIDA9PT0obj1hLnNldChlLG4scikpfHwodT9sLnNldFByb3BlcnR5KHQsbik6bFt0XT1uKSl9fSxjc3M6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHM9Ryh0KTtyZXR1cm4gWGUudGVzdCh0KXx8KHQ9SmUocykpLChhPXcuY3NzSG9va3NbdF18fHcuY3NzSG9va3Nbc10pJiYiZ2V0ImluIGEmJihpPWEuZ2V0KGUsITAsbikpLHZvaWQgMD09PWkmJihpPUZlKGUsdCxyKSksIm5vcm1hbCI9PT1pJiZ0IGluIFZlJiYoaT1WZVt0XSksIiI9PT1ufHxuPyhvPXBhcnNlRmxvYXQoaSksITA9PT1ufHxpc0Zpbml0ZShvKT9vfHwwOmkpOml9fSksdy5lYWNoKFsiaGVpZ2h0Iiwid2lkdGgiXSxmdW5jdGlvbihlLHQpe3cuY3NzSG9va3NbdF09e2dldDpmdW5jdGlvbihlLG4scil7aWYobilyZXR1cm4hemUudGVzdCh3LmNzcyhlLCJkaXNwbGF5IikpfHxlLmdldENsaWVudFJlY3RzKCkubGVuZ3RoJiZlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoP2V0KGUsdCxyKTpzZShlLFVlLGZ1bmN0aW9uKCl7cmV0dXJuIGV0KGUsdCxyKX0pfSxzZXQ6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpLG89JGUoZSksYT0iYm9yZGVyLWJveCI9PT13LmNzcyhlLCJib3hTaXppbmciLCExLG8pLHM9ciYmWmUoZSx0LHIsYSxvKTtyZXR1cm4gYSYmaC5zY3JvbGxib3hTaXplKCk9PT1vLnBvc2l0aW9uJiYocy09TWF0aC5jZWlsKGVbIm9mZnNldCIrdFswXS50b1VwcGVyQ2FzZSgpK3Quc2xpY2UoMSldLXBhcnNlRmxvYXQob1t0XSktWmUoZSx0LCJib3JkZXIiLCExLG8pLS41KSkscyYmKGk9aWUuZXhlYyhuKSkmJiJweCIhPT0oaVszXXx8InB4IikmJihlLnN0eWxlW3RdPW4sbj13LmNzcyhlLHQpKSxLZShlLG4scyl9fX0pLHcuY3NzSG9va3MubWFyZ2luTGVmdD1fZShoLnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihlLHQpe2lmKHQpcmV0dXJuKHBhcnNlRmxvYXQoRmUoZSwibWFyZ2luTGVmdCIpKXx8ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LXNlKGUse21hcmdpbkxlZnQ6MH0sZnVuY3Rpb24oKXtyZXR1cm4gZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0fSkpKyJweCJ9KSx3LmVhY2goe21hcmdpbjoiIixwYWRkaW5nOiIiLGJvcmRlcjoiV2lkdGgifSxmdW5jdGlvbihlLHQpe3cuY3NzSG9va3NbZSt0XT17ZXhwYW5kOmZ1bmN0aW9uKG4pe2Zvcih2YXIgcj0wLGk9e30sbz0ic3RyaW5nIj09dHlwZW9mIG4/bi5zcGxpdCgiICIpOltuXTtyPDQ7cisrKWlbZStvZVtyXSt0XT1vW3JdfHxvW3ItMl18fG9bMF07cmV0dXJuIGl9fSwibWFyZ2luIiE9PWUmJih3LmNzc0hvb2tzW2UrdF0uc2V0PUtlKX0pLHcuZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oZSx0KXtyZXR1cm4geih0aGlzLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89e30sYT0wO2lmKEFycmF5LmlzQXJyYXkodCkpe2ZvcihyPSRlKGUpLGk9dC5sZW5ndGg7YTxpO2ErKylvW3RbYV1dPXcuY3NzKGUsdFthXSwhMSxyKTtyZXR1cm4gb31yZXR1cm4gdm9pZCAwIT09bj93LnN0eWxlKGUsdCxuKTp3LmNzcyhlLHQpfSxlLHQsYXJndW1lbnRzLmxlbmd0aD4xKX19KTtmdW5jdGlvbiB0dChlLHQsbixyLGkpe3JldHVybiBuZXcgdHQucHJvdG90eXBlLmluaXQoZSx0LG4scixpKX13LlR3ZWVuPXR0LHR0LnByb3RvdHlwZT17Y29uc3RydWN0b3I6dHQsaW5pdDpmdW5jdGlvbihlLHQsbixyLGksbyl7dGhpcy5lbGVtPWUsdGhpcy5wcm9wPW4sdGhpcy5lYXNpbmc9aXx8dy5lYXNpbmcuX2RlZmF1bHQsdGhpcy5vcHRpb25zPXQsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5kPXIsdGhpcy51bml0PW98fCh3LmNzc051bWJlcltuXT8iIjoicHgiKX0sY3VyOmZ1bmN0aW9uKCl7dmFyIGU9dHQucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGUmJmUuZ2V0P2UuZ2V0KHRoaXMpOnR0LnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyl9LHJ1bjpmdW5jdGlvbihlKXt2YXIgdCxuPXR0LnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiB0aGlzLm9wdGlvbnMuZHVyYXRpb24/dGhpcy5wb3M9dD13LmVhc2luZ1t0aGlzLmVhc2luZ10oZSx0aGlzLm9wdGlvbnMuZHVyYXRpb24qZSwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTp0aGlzLnBvcz10PWUsdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKnQrdGhpcy5zdGFydCx0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyksbiYmbi5zZXQ/bi5zZXQodGhpcyk6dHQucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0sdHQucHJvdG90eXBlLmluaXQucHJvdG90eXBlPXR0LnByb3RvdHlwZSx0dC5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIDEhPT1lLmVsZW0ubm9kZVR5cGV8fG51bGwhPWUuZWxlbVtlLnByb3BdJiZudWxsPT1lLmVsZW0uc3R5bGVbZS5wcm9wXT9lLmVsZW1bZS5wcm9wXToodD13LmNzcyhlLmVsZW0sZS5wcm9wLCIiKSkmJiJhdXRvIiE9PXQ/dDowfSxzZXQ6ZnVuY3Rpb24oZSl7dy5meC5zdGVwW2UucHJvcF0/dy5meC5zdGVwW2UucHJvcF0oZSk6MSE9PWUuZWxlbS5ub2RlVHlwZXx8bnVsbD09ZS5lbGVtLnN0eWxlW3cuY3NzUHJvcHNbZS5wcm9wXV0mJiF3LmNzc0hvb2tzW2UucHJvcF0/ZS5lbGVtW2UucHJvcF09ZS5ub3c6dy5zdHlsZShlLmVsZW0sZS5wcm9wLGUubm93K2UudW5pdCl9fX0sdHQucHJvcEhvb2tzLnNjcm9sbFRvcD10dC5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGUpe2UuZWxlbS5ub2RlVHlwZSYmZS5lbGVtLnBhcmVudE5vZGUmJihlLmVsZW1bZS5wcm9wXT1lLm5vdyl9fSx3LmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGUpe3JldHVybiBlfSxzd2luZzpmdW5jdGlvbihlKXtyZXR1cm4uNS1NYXRoLmNvcyhlKk1hdGguUEkpLzJ9LF9kZWZhdWx0OiJzd2luZyJ9LHcuZng9dHQucHJvdG90eXBlLmluaXQsdy5meC5zdGVwPXt9O3ZhciBudCxydCxpdD0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sb3Q9L3F1ZXVlSG9va3MkLztmdW5jdGlvbiBhdCgpe3J0JiYoITE9PT1yLmhpZGRlbiYmZS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU/ZS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYXQpOmUuc2V0VGltZW91dChhdCx3LmZ4LmludGVydmFsKSx3LmZ4LnRpY2soKSl9ZnVuY3Rpb24gc3QoKXtyZXR1cm4gZS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bnQ9dm9pZCAwfSksbnQ9RGF0ZS5ub3coKX1mdW5jdGlvbiB1dChlLHQpe3ZhciBuLHI9MCxpPXtoZWlnaHQ6ZX07Zm9yKHQ9dD8xOjA7cjw0O3IrPTItdClpWyJtYXJnaW4iKyhuPW9lW3JdKV09aVsicGFkZGluZyIrbl09ZTtyZXR1cm4gdCYmKGkub3BhY2l0eT1pLndpZHRoPWUpLGl9ZnVuY3Rpb24gbHQoZSx0LG4pe2Zvcih2YXIgcixpPShwdC50d2VlbmVyc1t0XXx8W10pLmNvbmNhdChwdC50d2VlbmVyc1siKiJdKSxvPTAsYT1pLmxlbmd0aDtvPGE7bysrKWlmKHI9aVtvXS5jYWxsKG4sdCxlKSlyZXR1cm4gcn1mdW5jdGlvbiBjdChlLHQsbil7dmFyIHIsaSxvLGEscyx1LGwsYyxmPSJ3aWR0aCJpbiB0fHwiaGVpZ2h0ImluIHQscD10aGlzLGQ9e30saD1lLnN0eWxlLGc9ZS5ub2RlVHlwZSYmYWUoZSkseT1KLmdldChlLCJmeHNob3ciKTtuLnF1ZXVlfHwobnVsbD09KGE9dy5fcXVldWVIb29rcyhlLCJmeCIpKS51bnF1ZXVlZCYmKGEudW5xdWV1ZWQ9MCxzPWEuZW1wdHkuZmlyZSxhLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXthLnVucXVldWVkfHxzKCl9KSxhLnVucXVldWVkKysscC5hbHdheXMoZnVuY3Rpb24oKXtwLmFsd2F5cyhmdW5jdGlvbigpe2EudW5xdWV1ZWQtLSx3LnF1ZXVlKGUsImZ4IikubGVuZ3RofHxhLmVtcHR5LmZpcmUoKX0pfSkpO2ZvcihyIGluIHQpaWYoaT10W3JdLGl0LnRlc3QoaSkpe2lmKGRlbGV0ZSB0W3JdLG89b3x8InRvZ2dsZSI9PT1pLGk9PT0oZz8iaGlkZSI6InNob3ciKSl7aWYoInNob3ciIT09aXx8IXl8fHZvaWQgMD09PXlbcl0pY29udGludWU7Zz0hMH1kW3JdPXkmJnlbcl18fHcuc3R5bGUoZSxyKX1pZigodT0hdy5pc0VtcHR5T2JqZWN0KHQpKXx8IXcuaXNFbXB0eU9iamVjdChkKSl7ZiYmMT09PWUubm9kZVR5cGUmJihuLm92ZXJmbG93PVtoLm92ZXJmbG93LGgub3ZlcmZsb3dYLGgub3ZlcmZsb3dZXSxudWxsPT0obD15JiZ5LmRpc3BsYXkpJiYobD1KLmdldChlLCJkaXNwbGF5IikpLCJub25lIj09PShjPXcuY3NzKGUsImRpc3BsYXkiKSkmJihsP2M9bDooZmUoW2VdLCEwKSxsPWUuc3R5bGUuZGlzcGxheXx8bCxjPXcuY3NzKGUsImRpc3BsYXkiKSxmZShbZV0pKSksKCJpbmxpbmUiPT09Y3x8ImlubGluZS1ibG9jayI9PT1jJiZudWxsIT1sKSYmIm5vbmUiPT09dy5jc3MoZSwiZmxvYXQiKSYmKHV8fChwLmRvbmUoZnVuY3Rpb24oKXtoLmRpc3BsYXk9bH0pLG51bGw9PWwmJihjPWguZGlzcGxheSxsPSJub25lIj09PWM/IiI6YykpLGguZGlzcGxheT0iaW5saW5lLWJsb2NrIikpLG4ub3ZlcmZsb3cmJihoLm92ZXJmbG93PSJoaWRkZW4iLHAuYWx3YXlzKGZ1bmN0aW9uKCl7aC5vdmVyZmxvdz1uLm92ZXJmbG93WzBdLGgub3ZlcmZsb3dYPW4ub3ZlcmZsb3dbMV0saC5vdmVyZmxvd1k9bi5vdmVyZmxvd1syXX0pKSx1PSExO2ZvcihyIGluIGQpdXx8KHk/ImhpZGRlbiJpbiB5JiYoZz15LmhpZGRlbik6eT1KLmFjY2VzcyhlLCJmeHNob3ciLHtkaXNwbGF5Omx9KSxvJiYoeS5oaWRkZW49IWcpLGcmJmZlKFtlXSwhMCkscC5kb25lKGZ1bmN0aW9uKCl7Z3x8ZmUoW2VdKSxKLnJlbW92ZShlLCJmeHNob3ciKTtmb3IociBpbiBkKXcuc3R5bGUoZSxyLGRbcl0pfSkpLHU9bHQoZz95W3JdOjAscixwKSxyIGluIHl8fCh5W3JdPXUuc3RhcnQsZyYmKHUuZW5kPXUuc3RhcnQsdS5zdGFydD0wKSl9fWZ1bmN0aW9uIGZ0KGUsdCl7dmFyIG4scixpLG8sYTtmb3IobiBpbiBlKWlmKHI9RyhuKSxpPXRbcl0sbz1lW25dLEFycmF5LmlzQXJyYXkobykmJihpPW9bMV0sbz1lW25dPW9bMF0pLG4hPT1yJiYoZVtyXT1vLGRlbGV0ZSBlW25dKSwoYT13LmNzc0hvb2tzW3JdKSYmImV4cGFuZCJpbiBhKXtvPWEuZXhwYW5kKG8pLGRlbGV0ZSBlW3JdO2ZvcihuIGluIG8pbiBpbiBlfHwoZVtuXT1vW25dLHRbbl09aSl9ZWxzZSB0W3JdPWl9ZnVuY3Rpb24gcHQoZSx0LG4pe3ZhciByLGksbz0wLGE9cHQucHJlZmlsdGVycy5sZW5ndGgscz13LkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIHUuZWxlbX0pLHU9ZnVuY3Rpb24oKXtpZihpKXJldHVybiExO2Zvcih2YXIgdD1udHx8c3QoKSxuPU1hdGgubWF4KDAsbC5zdGFydFRpbWUrbC5kdXJhdGlvbi10KSxyPTEtKG4vbC5kdXJhdGlvbnx8MCksbz0wLGE9bC50d2VlbnMubGVuZ3RoO288YTtvKyspbC50d2VlbnNbb10ucnVuKHIpO3JldHVybiBzLm5vdGlmeVdpdGgoZSxbbCxyLG5dKSxyPDEmJmE/bjooYXx8cy5ub3RpZnlXaXRoKGUsW2wsMSwwXSkscy5yZXNvbHZlV2l0aChlLFtsXSksITEpfSxsPXMucHJvbWlzZSh7ZWxlbTplLHByb3BzOncuZXh0ZW5kKHt9LHQpLG9wdHM6dy5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e30sZWFzaW5nOncuZWFzaW5nLl9kZWZhdWx0fSxuKSxvcmlnaW5hbFByb3BlcnRpZXM6dCxvcmlnaW5hbE9wdGlvbnM6bixzdGFydFRpbWU6bnR8fHN0KCksZHVyYXRpb246bi5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24odCxuKXt2YXIgcj13LlR3ZWVuKGUsbC5vcHRzLHQsbixsLm9wdHMuc3BlY2lhbEVhc2luZ1t0XXx8bC5vcHRzLmVhc2luZyk7cmV0dXJuIGwudHdlZW5zLnB1c2gocikscn0sc3RvcDpmdW5jdGlvbih0KXt2YXIgbj0wLHI9dD9sLnR3ZWVucy5sZW5ndGg6MDtpZihpKXJldHVybiB0aGlzO2ZvcihpPSEwO248cjtuKyspbC50d2VlbnNbbl0ucnVuKDEpO3JldHVybiB0PyhzLm5vdGlmeVdpdGgoZSxbbCwxLDBdKSxzLnJlc29sdmVXaXRoKGUsW2wsdF0pKTpzLnJlamVjdFdpdGgoZSxbbCx0XSksdGhpc319KSxjPWwucHJvcHM7Zm9yKGZ0KGMsbC5vcHRzLnNwZWNpYWxFYXNpbmcpO288YTtvKyspaWYocj1wdC5wcmVmaWx0ZXJzW29dLmNhbGwobCxlLGMsbC5vcHRzKSlyZXR1cm4gZyhyLnN0b3ApJiYody5fcXVldWVIb29rcyhsLmVsZW0sbC5vcHRzLnF1ZXVlKS5zdG9wPXIuc3RvcC5iaW5kKHIpKSxyO3JldHVybiB3Lm1hcChjLGx0LGwpLGcobC5vcHRzLnN0YXJ0KSYmbC5vcHRzLnN0YXJ0LmNhbGwoZSxsKSxsLnByb2dyZXNzKGwub3B0cy5wcm9ncmVzcykuZG9uZShsLm9wdHMuZG9uZSxsLm9wdHMuY29tcGxldGUpLmZhaWwobC5vcHRzLmZhaWwpLmFsd2F5cyhsLm9wdHMuYWx3YXlzKSx3LmZ4LnRpbWVyKHcuZXh0ZW5kKHUse2VsZW06ZSxhbmltOmwscXVldWU6bC5vcHRzLnF1ZXVlfSkpLGx9dy5BbmltYXRpb249dy5leHRlbmQocHQse3R3ZWVuZXJzOnsiKiI6W2Z1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5jcmVhdGVUd2VlbihlLHQpO3JldHVybiB1ZShuLmVsZW0sZSxpZS5leGVjKHQpLG4pLG59XX0sdHdlZW5lcjpmdW5jdGlvbihlLHQpe2coZSk/KHQ9ZSxlPVsiKiJdKTplPWUubWF0Y2goTSk7Zm9yKHZhciBuLHI9MCxpPWUubGVuZ3RoO3I8aTtyKyspbj1lW3JdLHB0LnR3ZWVuZXJzW25dPXB0LnR3ZWVuZXJzW25dfHxbXSxwdC50d2VlbmVyc1tuXS51bnNoaWZ0KHQpfSxwcmVmaWx0ZXJzOltjdF0scHJlZmlsdGVyOmZ1bmN0aW9uKGUsdCl7dD9wdC5wcmVmaWx0ZXJzLnVuc2hpZnQoZSk6cHQucHJlZmlsdGVycy5wdXNoKGUpfX0pLHcuc3BlZWQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUmJiJvYmplY3QiPT10eXBlb2YgZT93LmV4dGVuZCh7fSxlKTp7Y29tcGxldGU6bnx8IW4mJnR8fGcoZSkmJmUsZHVyYXRpb246ZSxlYXNpbmc6biYmdHx8dCYmIWcodCkmJnR9O3JldHVybiB3LmZ4Lm9mZj9yLmR1cmF0aW9uPTA6Im51bWJlciIhPXR5cGVvZiByLmR1cmF0aW9uJiYoci5kdXJhdGlvbiBpbiB3LmZ4LnNwZWVkcz9yLmR1cmF0aW9uPXcuZnguc3BlZWRzW3IuZHVyYXRpb25dOnIuZHVyYXRpb249dy5meC5zcGVlZHMuX2RlZmF1bHQpLG51bGwhPXIucXVldWUmJiEwIT09ci5xdWV1ZXx8KHIucXVldWU9ImZ4Iiksci5vbGQ9ci5jb21wbGV0ZSxyLmNvbXBsZXRlPWZ1bmN0aW9uKCl7ZyhyLm9sZCkmJnIub2xkLmNhbGwodGhpcyksci5xdWV1ZSYmdy5kZXF1ZXVlKHRoaXMsci5xdWV1ZSl9LHJ9LHcuZm4uZXh0ZW5kKHtmYWRlVG86ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMuZmlsdGVyKGFlKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OnR9LGUsbixyKX0sYW5pbWF0ZTpmdW5jdGlvbihlLHQsbixyKXt2YXIgaT13LmlzRW1wdHlPYmplY3QoZSksbz13LnNwZWVkKHQsbixyKSxhPWZ1bmN0aW9uKCl7dmFyIHQ9cHQodGhpcyx3LmV4dGVuZCh7fSxlKSxvKTsoaXx8Si5nZXQodGhpcywiZmluaXNoIikpJiZ0LnN0b3AoITApfTtyZXR1cm4gYS5maW5pc2g9YSxpfHwhMT09PW8ucXVldWU/dGhpcy5lYWNoKGEpOnRoaXMucXVldWUoby5xdWV1ZSxhKX0sc3RvcDpmdW5jdGlvbihlLHQsbil7dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdG9wO2RlbGV0ZSBlLnN0b3AsdChuKX07cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlJiYobj10LHQ9ZSxlPXZvaWQgMCksdCYmITEhPT1lJiZ0aGlzLnF1ZXVlKGV8fCJmeCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PSEwLGk9bnVsbCE9ZSYmZSsicXVldWVIb29rcyIsbz13LnRpbWVycyxhPUouZ2V0KHRoaXMpO2lmKGkpYVtpXSYmYVtpXS5zdG9wJiZyKGFbaV0pO2Vsc2UgZm9yKGkgaW4gYSlhW2ldJiZhW2ldLnN0b3AmJm90LnRlc3QoaSkmJnIoYVtpXSk7Zm9yKGk9by5sZW5ndGg7aS0tOylvW2ldLmVsZW0hPT10aGlzfHxudWxsIT1lJiZvW2ldLnF1ZXVlIT09ZXx8KG9baV0uYW5pbS5zdG9wKG4pLHQ9ITEsby5zcGxpY2UoaSwxKSk7IXQmJm58fHcuZGVxdWV1ZSh0aGlzLGUpfSl9LGZpbmlzaDpmdW5jdGlvbihlKXtyZXR1cm4hMSE9PWUmJihlPWV8fCJmeCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0LG49Si5nZXQodGhpcykscj1uW2UrInF1ZXVlIl0saT1uW2UrInF1ZXVlSG9va3MiXSxvPXcudGltZXJzLGE9cj9yLmxlbmd0aDowO2ZvcihuLmZpbmlzaD0hMCx3LnF1ZXVlKHRoaXMsZSxbXSksaSYmaS5zdG9wJiZpLnN0b3AuY2FsbCh0aGlzLCEwKSx0PW8ubGVuZ3RoO3QtLTspb1t0XS5lbGVtPT09dGhpcyYmb1t0XS5xdWV1ZT09PWUmJihvW3RdLmFuaW0uc3RvcCghMCksby5zcGxpY2UodCwxKSk7Zm9yKHQ9MDt0PGE7dCsrKXJbdF0mJnJbdF0uZmluaXNoJiZyW3RdLmZpbmlzaC5jYWxsKHRoaXMpO2RlbGV0ZSBuLmZpbmlzaH0pfX0pLHcuZWFjaChbInRvZ2dsZSIsInNob3ciLCJoaWRlIl0sZnVuY3Rpb24oZSx0KXt2YXIgbj13LmZuW3RdO3cuZm5bdF09ZnVuY3Rpb24oZSxyLGkpe3JldHVybiBudWxsPT1lfHwiYm9vbGVhbiI9PXR5cGVvZiBlP24uYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZSh1dCh0LCEwKSxlLHIsaSl9fSksdy5lYWNoKHtzbGlkZURvd246dXQoInNob3ciKSxzbGlkZVVwOnV0KCJoaWRlIiksc2xpZGVUb2dnbGU6dXQoInRvZ2dsZSIpLGZhZGVJbjp7b3BhY2l0eToic2hvdyJ9LGZhZGVPdXQ6e29wYWNpdHk6ImhpZGUifSxmYWRlVG9nZ2xlOntvcGFjaXR5OiJ0b2dnbGUifX0sZnVuY3Rpb24oZSx0KXt3LmZuW2VdPWZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gdGhpcy5hbmltYXRlKHQsZSxuLHIpfX0pLHcudGltZXJzPVtdLHcuZngudGljaz1mdW5jdGlvbigpe3ZhciBlLHQ9MCxuPXcudGltZXJzO2ZvcihudD1EYXRlLm5vdygpO3Q8bi5sZW5ndGg7dCsrKShlPW5bdF0pKCl8fG5bdF0hPT1lfHxuLnNwbGljZSh0LS0sMSk7bi5sZW5ndGh8fHcuZnguc3RvcCgpLG50PXZvaWQgMH0sdy5meC50aW1lcj1mdW5jdGlvbihlKXt3LnRpbWVycy5wdXNoKGUpLHcuZnguc3RhcnQoKX0sdy5meC5pbnRlcnZhbD0xMyx3LmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7cnR8fChydD0hMCxhdCgpKX0sdy5meC5zdG9wPWZ1bmN0aW9uKCl7cnQ9bnVsbH0sdy5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sdy5mbi5kZWxheT1mdW5jdGlvbih0LG4pe3JldHVybiB0PXcuZng/dy5meC5zcGVlZHNbdF18fHQ6dCxuPW58fCJmeCIsdGhpcy5xdWV1ZShuLGZ1bmN0aW9uKG4scil7dmFyIGk9ZS5zZXRUaW1lb3V0KG4sdCk7ci5zdG9wPWZ1bmN0aW9uKCl7ZS5jbGVhclRpbWVvdXQoaSl9fSl9LGZ1bmN0aW9uKCl7dmFyIGU9ci5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLHQ9ci5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKS5hcHBlbmRDaGlsZChyLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtlLnR5cGU9ImNoZWNrYm94IixoLmNoZWNrT249IiIhPT1lLnZhbHVlLGgub3B0U2VsZWN0ZWQ9dC5zZWxlY3RlZCwoZT1yLmNyZWF0ZUVsZW1lbnQoImlucHV0IikpLnZhbHVlPSJ0IixlLnR5cGU9InJhZGlvIixoLnJhZGlvVmFsdWU9InQiPT09ZS52YWx1ZX0oKTt2YXIgZHQsaHQ9dy5leHByLmF0dHJIYW5kbGU7dy5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4geih0aGlzLHcuYXR0cixlLHQsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dy5yZW1vdmVBdHRyKHRoaXMsZSl9KX19KSx3LmV4dGVuZCh7YXR0cjpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvPWUubm9kZVR5cGU7aWYoMyE9PW8mJjghPT1vJiYyIT09bylyZXR1cm4idW5kZWZpbmVkIj09dHlwZW9mIGUuZ2V0QXR0cmlidXRlP3cucHJvcChlLHQsbik6KDE9PT1vJiZ3LmlzWE1MRG9jKGUpfHwoaT13LmF0dHJIb29rc1t0LnRvTG93ZXJDYXNlKCldfHwody5leHByLm1hdGNoLmJvb2wudGVzdCh0KT9kdDp2b2lkIDApKSx2b2lkIDAhPT1uP251bGw9PT1uP3ZvaWQgdy5yZW1vdmVBdHRyKGUsdCk6aSYmInNldCJpbiBpJiZ2b2lkIDAhPT0ocj1pLnNldChlLG4sdCkpP3I6KGUuc2V0QXR0cmlidXRlKHQsbisiIiksbik6aSYmImdldCJpbiBpJiZudWxsIT09KHI9aS5nZXQoZSx0KSk/cjpudWxsPT0ocj13LmZpbmQuYXR0cihlLHQpKT92b2lkIDA6cil9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGUsdCl7aWYoIWgucmFkaW9WYWx1ZSYmInJhZGlvIj09PXQmJk4oZSwiaW5wdXQiKSl7dmFyIG49ZS52YWx1ZTtyZXR1cm4gZS5zZXRBdHRyaWJ1dGUoInR5cGUiLHQpLG4mJihlLnZhbHVlPW4pLHR9fX19LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTAsaT10JiZ0Lm1hdGNoKE0pO2lmKGkmJjE9PT1lLm5vZGVUeXBlKXdoaWxlKG49aVtyKytdKWUucmVtb3ZlQXR0cmlidXRlKG4pfX0pLGR0PXtzZXQ6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiExPT09dD93LnJlbW92ZUF0dHIoZSxuKTplLnNldEF0dHJpYnV0ZShuLG4pLG59fSx3LmVhY2gody5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKC9cdysvZyksZnVuY3Rpb24oZSx0KXt2YXIgbj1odFt0XXx8dy5maW5kLmF0dHI7aHRbdF09ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG8sYT10LnRvTG93ZXJDYXNlKCk7cmV0dXJuIHJ8fChvPWh0W2FdLGh0W2FdPWksaT1udWxsIT1uKGUsdCxyKT9hOm51bGwsaHRbYV09byksaX19KTt2YXIgZ3Q9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSx5dD0vXig/OmF8YXJlYSkkL2k7dy5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oZSx0KXtyZXR1cm4geih0aGlzLHcucHJvcCxlLHQsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXNbdy5wcm9wRml4W2VdfHxlXX0pfX0pLHcuZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89ZS5ub2RlVHlwZTtpZigzIT09byYmOCE9PW8mJjIhPT1vKXJldHVybiAxPT09byYmdy5pc1hNTERvYyhlKXx8KHQ9dy5wcm9wRml4W3RdfHx0LGk9dy5wcm9wSG9va3NbdF0pLHZvaWQgMCE9PW4/aSYmInNldCJpbiBpJiZ2b2lkIDAhPT0ocj1pLnNldChlLG4sdCkpP3I6ZVt0XT1uOmkmJiJnZXQiaW4gaSYmbnVsbCE9PShyPWkuZ2V0KGUsdCkpP3I6ZVt0XX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXcuZmluZC5hdHRyKGUsInRhYmluZGV4Iik7cmV0dXJuIHQ/cGFyc2VJbnQodCwxMCk6Z3QudGVzdChlLm5vZGVOYW1lKXx8eXQudGVzdChlLm5vZGVOYW1lKSYmZS5ocmVmPzA6LTF9fX0scHJvcEZpeDp7ImZvciI6Imh0bWxGb3IiLCJjbGFzcyI6ImNsYXNzTmFtZSJ9fSksaC5vcHRTZWxlY3RlZHx8KHcucHJvcEhvb2tzLnNlbGVjdGVkPXtnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0JiZ0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LG51bGx9LHNldDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7dCYmKHQuc2VsZWN0ZWRJbmRleCx0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4KX19KSx3LmVhY2goWyJ0YWJJbmRleCIsInJlYWRPbmx5IiwibWF4TGVuZ3RoIiwiY2VsbFNwYWNpbmciLCJjZWxsUGFkZGluZyIsInJvd1NwYW4iLCJjb2xTcGFuIiwidXNlTWFwIiwiZnJhbWVCb3JkZXIiLCJjb250ZW50RWRpdGFibGUiXSxmdW5jdGlvbigpe3cucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXN9KTtmdW5jdGlvbiB2dChlKXtyZXR1cm4oZS5tYXRjaChNKXx8W10pLmpvaW4oIiAiKX1mdW5jdGlvbiBtdChlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUmJmUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIn1mdW5jdGlvbiB4dChlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9lOiJzdHJpbmciPT10eXBlb2YgZT9lLm1hdGNoKE0pfHxbXTpbXX13LmZuLmV4dGVuZCh7YWRkQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGksbyxhLHMsdT0wO2lmKGcoZSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih0KXt3KHRoaXMpLmFkZENsYXNzKGUuY2FsbCh0aGlzLHQsbXQodGhpcykpKX0pO2lmKCh0PXh0KGUpKS5sZW5ndGgpd2hpbGUobj10aGlzW3UrK10paWYoaT1tdChuKSxyPTE9PT1uLm5vZGVUeXBlJiYiICIrdnQoaSkrIiAiKXthPTA7d2hpbGUobz10W2ErK10pci5pbmRleE9mKCIgIitvKyIgIik8MCYmKHIrPW8rIiAiKTtpIT09KHM9dnQocikpJiZuLnNldEF0dHJpYnV0ZSgiY2xhc3MiLHMpfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLGEscyx1PTA7aWYoZyhlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3codGhpcykucmVtb3ZlQ2xhc3MoZS5jYWxsKHRoaXMsdCxtdCh0aGlzKSkpfSk7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuYXR0cigiY2xhc3MiLCIiKTtpZigodD14dChlKSkubGVuZ3RoKXdoaWxlKG49dGhpc1t1KytdKWlmKGk9bXQobikscj0xPT09bi5ub2RlVHlwZSYmIiAiK3Z0KGkpKyIgIil7YT0wO3doaWxlKG89dFthKytdKXdoaWxlKHIuaW5kZXhPZigiICIrbysiICIpPi0xKXI9ci5yZXBsYWNlKCIgIitvKyIgIiwiICIpO2khPT0ocz12dChyKSkmJm4uc2V0QXR0cmlidXRlKCJjbGFzcyIscyl9cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGUsdCl7dmFyIG49dHlwZW9mIGUscj0ic3RyaW5nIj09PW58fEFycmF5LmlzQXJyYXkoZSk7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgdCYmcj90P3RoaXMuYWRkQ2xhc3MoZSk6dGhpcy5yZW1vdmVDbGFzcyhlKTpnKGUpP3RoaXMuZWFjaChmdW5jdGlvbihuKXt3KHRoaXMpLnRvZ2dsZUNsYXNzKGUuY2FsbCh0aGlzLG4sbXQodGhpcyksdCksdCl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdCxpLG8sYTtpZihyKXtpPTAsbz13KHRoaXMpLGE9eHQoZSk7d2hpbGUodD1hW2krK10pby5oYXNDbGFzcyh0KT9vLnJlbW92ZUNsYXNzKHQpOm8uYWRkQ2xhc3ModCl9ZWxzZSB2b2lkIDAhPT1lJiYiYm9vbGVhbiIhPT1ufHwoKHQ9bXQodGhpcykpJiZKLnNldCh0aGlzLCJfX2NsYXNzTmFtZV9fIix0KSx0aGlzLnNldEF0dHJpYnV0ZSYmdGhpcy5zZXRBdHRyaWJ1dGUoImNsYXNzIix0fHwhMT09PWU/IiI6Si5nZXQodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIikpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj0wO3Q9IiAiK2UrIiAiO3doaWxlKG49dGhpc1tyKytdKWlmKDE9PT1uLm5vZGVUeXBlJiYoIiAiK3Z0KG10KG4pKSsiICIpLmluZGV4T2YodCk+LTEpcmV0dXJuITA7cmV0dXJuITF9fSk7dmFyIGJ0PS9cci9nO3cuZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGk9dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gcj1nKGUpLHRoaXMuZWFjaChmdW5jdGlvbihuKXt2YXIgaTsxPT09dGhpcy5ub2RlVHlwZSYmKG51bGw9PShpPXI/ZS5jYWxsKHRoaXMsbix3KHRoaXMpLnZhbCgpKTplKT9pPSIiOiJudW1iZXIiPT10eXBlb2YgaT9pKz0iIjpBcnJheS5pc0FycmF5KGkpJiYoaT13Lm1hcChpLGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lPyIiOmUrIiJ9KSksKHQ9dy52YWxIb29rc1t0aGlzLnR5cGVdfHx3LnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pJiYic2V0ImluIHQmJnZvaWQgMCE9PXQuc2V0KHRoaXMsaSwidmFsdWUiKXx8KHRoaXMudmFsdWU9aSkpfSk7aWYoaSlyZXR1cm4odD13LnZhbEhvb2tzW2kudHlwZV18fHcudmFsSG9va3NbaS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkmJiJnZXQiaW4gdCYmdm9pZCAwIT09KG49dC5nZXQoaSwidmFsdWUiKSk/bjoic3RyaW5nIj09dHlwZW9mKG49aS52YWx1ZSk/bi5yZXBsYWNlKGJ0LCIiKTpudWxsPT1uPyIiOm59fX0pLHcuZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dy5maW5kLmF0dHIoZSwidmFsdWUiKTtyZXR1cm4gbnVsbCE9dD90OnZ0KHcudGV4dChlKSl9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaT1lLm9wdGlvbnMsbz1lLnNlbGVjdGVkSW5kZXgsYT0ic2VsZWN0LW9uZSI9PT1lLnR5cGUscz1hP251bGw6W10sdT1hP28rMTppLmxlbmd0aDtmb3Iocj1vPDA/dTphP286MDtyPHU7cisrKWlmKCgobj1pW3JdKS5zZWxlY3RlZHx8cj09PW8pJiYhbi5kaXNhYmxlZCYmKCFuLnBhcmVudE5vZGUuZGlzYWJsZWR8fCFOKG4ucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe2lmKHQ9dyhuKS52YWwoKSxhKXJldHVybiB0O3MucHVzaCh0KX1yZXR1cm4gc30sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPWUub3B0aW9ucyxvPXcubWFrZUFycmF5KHQpLGE9aS5sZW5ndGg7d2hpbGUoYS0tKSgocj1pW2FdKS5zZWxlY3RlZD13LmluQXJyYXkody52YWxIb29rcy5vcHRpb24uZ2V0KHIpLG8pPi0xKSYmKG49ITApO3JldHVybiBufHwoZS5zZWxlY3RlZEluZGV4PS0xKSxvfX19fSksdy5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7dy52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGUsdCl7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gZS5jaGVja2VkPXcuaW5BcnJheSh3KGUpLnZhbCgpLHQpPi0xfX0saC5jaGVja09ufHwody52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PT1lLmdldEF0dHJpYnV0ZSgidmFsdWUiKT8ib24iOmUudmFsdWV9KX0pLGguZm9jdXNpbj0ib25mb2N1c2luImluIGU7dmFyIHd0PS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxUdD1mdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpfTt3LmV4dGVuZCh3LmV2ZW50LHt0cmlnZ2VyOmZ1bmN0aW9uKHQsbixpLG8pe3ZhciBhLHMsdSxsLGMscCxkLGgsdj1baXx8cl0sbT1mLmNhbGwodCwidHlwZSIpP3QudHlwZTp0LHg9Zi5jYWxsKHQsIm5hbWVzcGFjZSIpP3QubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYocz1oPXU9aT1pfHxyLDMhPT1pLm5vZGVUeXBlJiY4IT09aS5ub2RlVHlwZSYmIXd0LnRlc3QobSt3LmV2ZW50LnRyaWdnZXJlZCkmJihtLmluZGV4T2YoIi4iKT4tMSYmKG09KHg9bS5zcGxpdCgiLiIpKS5zaGlmdCgpLHguc29ydCgpKSxjPW0uaW5kZXhPZigiOiIpPDAmJiJvbiIrbSx0PXRbdy5leHBhbmRvXT90Om5ldyB3LkV2ZW50KG0sIm9iamVjdCI9PXR5cGVvZiB0JiZ0KSx0LmlzVHJpZ2dlcj1vPzI6Myx0Lm5hbWVzcGFjZT14LmpvaW4oIi4iKSx0LnJuYW1lc3BhY2U9dC5uYW1lc3BhY2U/bmV3IFJlZ0V4cCgiKF58XFwuKSIreC5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTpudWxsLHQucmVzdWx0PXZvaWQgMCx0LnRhcmdldHx8KHQudGFyZ2V0PWkpLG49bnVsbD09bj9bdF06dy5tYWtlQXJyYXkobixbdF0pLGQ9dy5ldmVudC5zcGVjaWFsW21dfHx7fSxvfHwhZC50cmlnZ2VyfHwhMSE9PWQudHJpZ2dlci5hcHBseShpLG4pKSl7aWYoIW8mJiFkLm5vQnViYmxlJiYheShpKSl7Zm9yKGw9ZC5kZWxlZ2F0ZVR5cGV8fG0sd3QudGVzdChsK20pfHwocz1zLnBhcmVudE5vZGUpO3M7cz1zLnBhcmVudE5vZGUpdi5wdXNoKHMpLHU9czt1PT09KGkub3duZXJEb2N1bWVudHx8cikmJnYucHVzaCh1LmRlZmF1bHRWaWV3fHx1LnBhcmVudFdpbmRvd3x8ZSl9YT0wO3doaWxlKChzPXZbYSsrXSkmJiF0LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpaD1zLHQudHlwZT1hPjE/bDpkLmJpbmRUeXBlfHxtLChwPShKLmdldChzLCJldmVudHMiKXx8e30pW3QudHlwZV0mJkouZ2V0KHMsImhhbmRsZSIpKSYmcC5hcHBseShzLG4pLChwPWMmJnNbY10pJiZwLmFwcGx5JiZZKHMpJiYodC5yZXN1bHQ9cC5hcHBseShzLG4pLCExPT09dC5yZXN1bHQmJnQucHJldmVudERlZmF1bHQoKSk7cmV0dXJuIHQudHlwZT1tLG98fHQuaXNEZWZhdWx0UHJldmVudGVkKCl8fGQuX2RlZmF1bHQmJiExIT09ZC5fZGVmYXVsdC5hcHBseSh2LnBvcCgpLG4pfHwhWShpKXx8YyYmZyhpW21dKSYmIXkoaSkmJigodT1pW2NdKSYmKGlbY109bnVsbCksdy5ldmVudC50cmlnZ2VyZWQ9bSx0LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkmJmguYWRkRXZlbnRMaXN0ZW5lcihtLFR0KSxpW21dKCksdC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpJiZoLnJlbW92ZUV2ZW50TGlzdGVuZXIobSxUdCksdy5ldmVudC50cmlnZ2VyZWQ9dm9pZCAwLHUmJihpW2NdPXUpKSx0LnJlc3VsdH19LHNpbXVsYXRlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj13LmV4dGVuZChuZXcgdy5FdmVudCxuLHt0eXBlOmUsaXNTaW11bGF0ZWQ6ITB9KTt3LmV2ZW50LnRyaWdnZXIocixudWxsLHQpfX0pLHcuZm4uZXh0ZW5kKHt0cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3cuZXZlbnQudHJpZ2dlcihlLHQsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzWzBdO2lmKG4pcmV0dXJuIHcuZXZlbnQudHJpZ2dlcihlLHQsbiwhMCl9fSksaC5mb2N1c2lufHx3LmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKGUsdCl7dmFyIG49ZnVuY3Rpb24oZSl7dy5ldmVudC5zaW11bGF0ZSh0LGUudGFyZ2V0LHcuZXZlbnQuZml4KGUpKX07dy5ldmVudC5zcGVjaWFsW3RdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciByPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxpPUouYWNjZXNzKHIsdCk7aXx8ci5hZGRFdmVudExpc3RlbmVyKGUsbiwhMCksSi5hY2Nlc3Mocix0LChpfHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgcj10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsaT1KLmFjY2VzcyhyLHQpLTE7aT9KLmFjY2VzcyhyLHQsaSk6KHIucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLG4sITApLEoucmVtb3ZlKHIsdCkpfX19KTt2YXIgQ3Q9ZS5sb2NhdGlvbixFdD1EYXRlLm5vdygpLGt0PS9cPy87dy5wYXJzZVhNTD1mdW5jdGlvbih0KXt2YXIgbjtpZighdHx8InN0cmluZyIhPXR5cGVvZiB0KXJldHVybiBudWxsO3RyeXtuPShuZXcgZS5ET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyh0LCJ0ZXh0L3htbCIpfWNhdGNoKGUpe249dm9pZCAwfXJldHVybiBuJiYhbi5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGFyc2VyZXJyb3IiKS5sZW5ndGh8fHcuZXJyb3IoIkludmFsaWQgWE1MOiAiK3QpLG59O3ZhciBTdD0vXFtcXSQvLER0PS9ccj9cbi9nLE50PS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxBdD0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7ZnVuY3Rpb24ganQoZSx0LG4scil7dmFyIGk7aWYoQXJyYXkuaXNBcnJheSh0KSl3LmVhY2godCxmdW5jdGlvbih0LGkpe258fFN0LnRlc3QoZSk/cihlLGkpOmp0KGUrIlsiKygib2JqZWN0Ij09dHlwZW9mIGkmJm51bGwhPWk/dDoiIikrIl0iLGksbixyKX0pO2Vsc2UgaWYobnx8Im9iamVjdCIhPT14KHQpKXIoZSx0KTtlbHNlIGZvcihpIGluIHQpanQoZSsiWyIraSsiXSIsdFtpXSxuLHIpfXcucGFyYW09ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9ZnVuY3Rpb24oZSx0KXt2YXIgbj1nKHQpP3QoKTp0O3Jbci5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChlKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KG51bGw9PW4/IiI6bil9O2lmKEFycmF5LmlzQXJyYXkoZSl8fGUuanF1ZXJ5JiYhdy5pc1BsYWluT2JqZWN0KGUpKXcuZWFjaChlLGZ1bmN0aW9uKCl7aSh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtlbHNlIGZvcihuIGluIGUpanQobixlW25dLHQsaSk7cmV0dXJuIHIuam9pbigiJiIpfSx3LmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHcucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgZT13LnByb3AodGhpcywiZWxlbWVudHMiKTtyZXR1cm4gZT93Lm1ha2VBcnJheShlKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiF3KHRoaXMpLmlzKCI6ZGlzYWJsZWQiKSYmQXQudGVzdCh0aGlzLm5vZGVOYW1lKSYmIU50LnRlc3QoZSkmJih0aGlzLmNoZWNrZWR8fCFwZS50ZXN0KGUpKX0pLm1hcChmdW5jdGlvbihlLHQpe3ZhciBuPXcodGhpcykudmFsKCk7cmV0dXJuIG51bGw9PW4/bnVsbDpBcnJheS5pc0FycmF5KG4pP3cubWFwKG4sZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6dC5uYW1lLHZhbHVlOmUucmVwbGFjZShEdCwiXHJcbiIpfX0pOntuYW1lOnQubmFtZSx2YWx1ZTpuLnJlcGxhY2UoRHQsIlxyXG4iKX19KS5nZXQoKX19KTt2YXIgcXQ9LyUyMC9nLEx0PS8jLiokLyxIdD0vKFs/Jl0pXz1bXiZdKi8sT3Q9L14oLio/KTpbIFx0XSooW15cclxuXSopJC9nbSxQdD0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxNdD0vXig/OkdFVHxIRUFEKSQvLFJ0PS9eXC9cLy8sSXQ9e30sV3Q9e30sJHQ9IiovIi5jb25jYXQoIioiKSxCdD1yLmNyZWF0ZUVsZW1lbnQoImEiKTtCdC5ocmVmPUN0LmhyZWY7ZnVuY3Rpb24gRnQoZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbil7InN0cmluZyIhPXR5cGVvZiB0JiYobj10LHQ9IioiKTt2YXIgcixpPTAsbz10LnRvTG93ZXJDYXNlKCkubWF0Y2goTSl8fFtdO2lmKGcobikpd2hpbGUocj1vW2krK10pIisiPT09clswXT8ocj1yLnNsaWNlKDEpfHwiKiIsKGVbcl09ZVtyXXx8W10pLnVuc2hpZnQobikpOihlW3JdPWVbcl18fFtdKS5wdXNoKG4pfX1mdW5jdGlvbiBfdChlLHQsbixyKXt2YXIgaT17fSxvPWU9PT1XdDtmdW5jdGlvbiBhKHMpe3ZhciB1O3JldHVybiBpW3NdPSEwLHcuZWFjaChlW3NdfHxbXSxmdW5jdGlvbihlLHMpe3ZhciBsPXModCxuLHIpO3JldHVybiJzdHJpbmciIT10eXBlb2YgbHx8b3x8aVtsXT9vPyEodT1sKTp2b2lkIDA6KHQuZGF0YVR5cGVzLnVuc2hpZnQobCksYShsKSwhMSl9KSx1fXJldHVybiBhKHQuZGF0YVR5cGVzWzBdKXx8IWlbIioiXSYmYSgiKiIpfWZ1bmN0aW9uIHp0KGUsdCl7dmFyIG4scixpPXcuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3IobiBpbiB0KXZvaWQgMCE9PXRbbl0mJigoaVtuXT9lOnJ8fChyPXt9KSlbbl09dFtuXSk7cmV0dXJuIHImJncuZXh0ZW5kKCEwLGUsciksZX1mdW5jdGlvbiBYdChlLHQsbil7dmFyIHIsaSxvLGEscz1lLmNvbnRlbnRzLHU9ZS5kYXRhVHlwZXM7d2hpbGUoIioiPT09dVswXSl1LnNoaWZ0KCksdm9pZCAwPT09ciYmKHI9ZS5taW1lVHlwZXx8dC5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1UeXBlIikpO2lmKHIpZm9yKGkgaW4gcylpZihzW2ldJiZzW2ldLnRlc3Qocikpe3UudW5zaGlmdChpKTticmVha31pZih1WzBdaW4gbilvPXVbMF07ZWxzZXtmb3IoaSBpbiBuKXtpZighdVswXXx8ZS5jb252ZXJ0ZXJzW2krIiAiK3VbMF1dKXtvPWk7YnJlYWt9YXx8KGE9aSl9bz1vfHxhfWlmKG8pcmV0dXJuIG8hPT11WzBdJiZ1LnVuc2hpZnQobyksbltvXX1mdW5jdGlvbiBVdChlLHQsbixyKXt2YXIgaSxvLGEscyx1LGw9e30sYz1lLmRhdGFUeXBlcy5zbGljZSgpO2lmKGNbMV0pZm9yKGEgaW4gZS5jb252ZXJ0ZXJzKWxbYS50b0xvd2VyQ2FzZSgpXT1lLmNvbnZlcnRlcnNbYV07bz1jLnNoaWZ0KCk7d2hpbGUobylpZihlLnJlc3BvbnNlRmllbGRzW29dJiYobltlLnJlc3BvbnNlRmllbGRzW29dXT10KSwhdSYmciYmZS5kYXRhRmlsdGVyJiYodD1lLmRhdGFGaWx0ZXIodCxlLmRhdGFUeXBlKSksdT1vLG89Yy5zaGlmdCgpKWlmKCIqIj09PW8pbz11O2Vsc2UgaWYoIioiIT09dSYmdSE9PW8pe2lmKCEoYT1sW3UrIiAiK29dfHxsWyIqICIrb10pKWZvcihpIGluIGwpaWYoKHM9aS5zcGxpdCgiICIpKVsxXT09PW8mJihhPWxbdSsiICIrc1swXV18fGxbIiogIitzWzBdXSkpeyEwPT09YT9hPWxbaV06ITAhPT1sW2ldJiYobz1zWzBdLGMudW5zaGlmdChzWzFdKSk7YnJlYWt9aWYoITAhPT1hKWlmKGEmJmVbInRocm93cyJdKXQ9YSh0KTtlbHNlIHRyeXt0PWEodCl9Y2F0Y2goZSl7cmV0dXJue3N0YXRlOiJwYXJzZXJlcnJvciIsZXJyb3I6YT9lOiJObyBjb252ZXJzaW9uIGZyb20gIit1KyIgdG8gIitvfX19cmV0dXJue3N0YXRlOiJzdWNjZXNzIixkYXRhOnR9fXcuZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDpDdC5ocmVmLHR5cGU6IkdFVCIsaXNMb2NhbDpQdC50ZXN0KEN0LnByb3RvY29sKSxnbG9iYWw6ITAscHJvY2Vzc0RhdGE6ITAsYXN5bmM6ITAsY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsYWNjZXB0czp7IioiOiR0LHRleHQ6InRleHQvcGxhaW4iLGh0bWw6InRleHQvaHRtbCIseG1sOiJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sIixqc29uOiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQifSxjb250ZW50czp7eG1sOi9cYnhtbFxiLyxodG1sOi9cYmh0bWwvLGpzb246L1xianNvblxiL30scmVzcG9uc2VGaWVsZHM6e3htbDoicmVzcG9uc2VYTUwiLHRleHQ6InJlc3BvbnNlVGV4dCIsanNvbjoicmVzcG9uc2VKU09OIn0sY29udmVydGVyczp7IiogdGV4dCI6U3RyaW5nLCJ0ZXh0IGh0bWwiOiEwLCJ0ZXh0IGpzb24iOkpTT04ucGFyc2UsInRleHQgeG1sIjp3LnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD96dCh6dChlLHcuYWpheFNldHRpbmdzKSx0KTp6dCh3LmFqYXhTZXR0aW5ncyxlKX0sYWpheFByZWZpbHRlcjpGdChJdCksYWpheFRyYW5zcG9ydDpGdChXdCksYWpheDpmdW5jdGlvbih0LG4peyJvYmplY3QiPT10eXBlb2YgdCYmKG49dCx0PXZvaWQgMCksbj1ufHx7fTt2YXIgaSxvLGEscyx1LGwsYyxmLHAsZCxoPXcuYWpheFNldHVwKHt9LG4pLGc9aC5jb250ZXh0fHxoLHk9aC5jb250ZXh0JiYoZy5ub2RlVHlwZXx8Zy5qcXVlcnkpP3coZyk6dy5ldmVudCx2PXcuRGVmZXJyZWQoKSxtPXcuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLHg9aC5zdGF0dXNDb2RlfHx7fSxiPXt9LFQ9e30sQz0iY2FuY2VsZWQiLEU9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihlKXt2YXIgdDtpZihjKXtpZighcyl7cz17fTt3aGlsZSh0PU90LmV4ZWMoYSkpc1t0WzFdLnRvTG93ZXJDYXNlKCldPXRbMl19dD1zW2UudG9Mb3dlckNhc2UoKV19cmV0dXJuIG51bGw9PXQ/bnVsbDp0fSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gYz9hOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVsbD09YyYmKGU9VFtlLnRvTG93ZXJDYXNlKCldPVRbZS50b0xvd2VyQ2FzZSgpXXx8ZSxiW2VdPXQpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWMmJihoLm1pbWVUeXBlPWUpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoZSlpZihjKUUuYWx3YXlzKGVbRS5zdGF0dXNdKTtlbHNlIGZvcih0IGluIGUpeFt0XT1beFt0XSxlW3RdXTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZXx8QztyZXR1cm4gaSYmaS5hYm9ydCh0KSxrKDAsdCksdGhpc319O2lmKHYucHJvbWlzZShFKSxoLnVybD0oKHR8fGgudXJsfHxDdC5ocmVmKSsiIikucmVwbGFjZShSdCxDdC5wcm90b2NvbCsiLy8iKSxoLnR5cGU9bi5tZXRob2R8fG4udHlwZXx8aC5tZXRob2R8fGgudHlwZSxoLmRhdGFUeXBlcz0oaC5kYXRhVHlwZXx8IioiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKE0pfHxbIiJdLG51bGw9PWguY3Jvc3NEb21haW4pe2w9ci5jcmVhdGVFbGVtZW50KCJhIik7dHJ5e2wuaHJlZj1oLnVybCxsLmhyZWY9bC5ocmVmLGguY3Jvc3NEb21haW49QnQucHJvdG9jb2wrIi8vIitCdC5ob3N0IT1sLnByb3RvY29sKyIvLyIrbC5ob3N0fWNhdGNoKGUpe2guY3Jvc3NEb21haW49ITB9fWlmKGguZGF0YSYmaC5wcm9jZXNzRGF0YSYmInN0cmluZyIhPXR5cGVvZiBoLmRhdGEmJihoLmRhdGE9dy5wYXJhbShoLmRhdGEsaC50cmFkaXRpb25hbCkpLF90KEl0LGgsbixFKSxjKXJldHVybiBFOyhmPXcuZXZlbnQmJmguZ2xvYmFsKSYmMD09dy5hY3RpdmUrKyYmdy5ldmVudC50cmlnZ2VyKCJhamF4U3RhcnQiKSxoLnR5cGU9aC50eXBlLnRvVXBwZXJDYXNlKCksaC5oYXNDb250ZW50PSFNdC50ZXN0KGgudHlwZSksbz1oLnVybC5yZXBsYWNlKEx0LCIiKSxoLmhhc0NvbnRlbnQ/aC5kYXRhJiZoLnByb2Nlc3NEYXRhJiYwPT09KGguY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYmKGguZGF0YT1oLmRhdGEucmVwbGFjZShxdCwiKyIpKTooZD1oLnVybC5zbGljZShvLmxlbmd0aCksaC5kYXRhJiYoaC5wcm9jZXNzRGF0YXx8InN0cmluZyI9PXR5cGVvZiBoLmRhdGEpJiYobys9KGt0LnRlc3Qobyk/IiYiOiI/IikraC5kYXRhLGRlbGV0ZSBoLmRhdGEpLCExPT09aC5jYWNoZSYmKG89by5yZXBsYWNlKEh0LCIkMSIpLGQ9KGt0LnRlc3Qobyk/IiYiOiI/IikrIl89IitFdCsrK2QpLGgudXJsPW8rZCksaC5pZk1vZGlmaWVkJiYody5sYXN0TW9kaWZpZWRbb10mJkUuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLHcubGFzdE1vZGlmaWVkW29dKSx3LmV0YWdbb10mJkUuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIsdy5ldGFnW29dKSksKGguZGF0YSYmaC5oYXNDb250ZW50JiYhMSE9PWguY29udGVudFR5cGV8fG4uY29udGVudFR5cGUpJiZFLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsaC5jb250ZW50VHlwZSksRS5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLGguZGF0YVR5cGVzWzBdJiZoLmFjY2VwdHNbaC5kYXRhVHlwZXNbMF1dP2guYWNjZXB0c1toLmRhdGFUeXBlc1swXV0rKCIqIiE9PWguZGF0YVR5cGVzWzBdPyIsICIrJHQrIjsgcT0wLjAxIjoiIik6aC5hY2NlcHRzWyIqIl0pO2ZvcihwIGluIGguaGVhZGVycylFLnNldFJlcXVlc3RIZWFkZXIocCxoLmhlYWRlcnNbcF0pO2lmKGguYmVmb3JlU2VuZCYmKCExPT09aC5iZWZvcmVTZW5kLmNhbGwoZyxFLGgpfHxjKSlyZXR1cm4gRS5hYm9ydCgpO2lmKEM9ImFib3J0IixtLmFkZChoLmNvbXBsZXRlKSxFLmRvbmUoaC5zdWNjZXNzKSxFLmZhaWwoaC5lcnJvciksaT1fdChXdCxoLG4sRSkpe2lmKEUucmVhZHlTdGF0ZT0xLGYmJnkudHJpZ2dlcigiYWpheFNlbmQiLFtFLGhdKSxjKXJldHVybiBFO2guYXN5bmMmJmgudGltZW91dD4wJiYodT1lLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtFLmFib3J0KCJ0aW1lb3V0Iil9LGgudGltZW91dCkpO3RyeXtjPSExLGkuc2VuZChiLGspfWNhdGNoKGUpe2lmKGMpdGhyb3cgZTtrKC0xLGUpfX1lbHNlIGsoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIGsodCxuLHIscyl7dmFyIGwscCxkLGIsVCxDPW47Y3x8KGM9ITAsdSYmZS5jbGVhclRpbWVvdXQodSksaT12b2lkIDAsYT1zfHwiIixFLnJlYWR5U3RhdGU9dD4wPzQ6MCxsPXQ+PTIwMCYmdDwzMDB8fDMwND09PXQsciYmKGI9WHQoaCxFLHIpKSxiPVV0KGgsYixFLGwpLGw/KGguaWZNb2RpZmllZCYmKChUPUUuZ2V0UmVzcG9uc2VIZWFkZXIoIkxhc3QtTW9kaWZpZWQiKSkmJih3Lmxhc3RNb2RpZmllZFtvXT1UKSwoVD1FLmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIikpJiYody5ldGFnW29dPVQpKSwyMDQ9PT10fHwiSEVBRCI9PT1oLnR5cGU/Qz0ibm9jb250ZW50IjozMDQ9PT10P0M9Im5vdG1vZGlmaWVkIjooQz1iLnN0YXRlLHA9Yi5kYXRhLGw9IShkPWIuZXJyb3IpKSk6KGQ9QywhdCYmQ3x8KEM9ImVycm9yIix0PDAmJih0PTApKSksRS5zdGF0dXM9dCxFLnN0YXR1c1RleHQ9KG58fEMpKyIiLGw/di5yZXNvbHZlV2l0aChnLFtwLEMsRV0pOnYucmVqZWN0V2l0aChnLFtFLEMsZF0pLEUuc3RhdHVzQ29kZSh4KSx4PXZvaWQgMCxmJiZ5LnRyaWdnZXIobD8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFtFLGgsbD9wOmRdKSxtLmZpcmVXaXRoKGcsW0UsQ10pLGYmJih5LnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW0UsaF0pLC0tdy5hY3RpdmV8fHcuZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiBFfSxnZXRKU09OOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdy5nZXQoZSx0LG4sImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHcuZ2V0KGUsdm9pZCAwLHQsInNjcmlwdCIpfX0pLHcuZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihlLHQpe3dbdF09ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIGcobikmJihpPWl8fHIscj1uLG49dm9pZCAwKSx3LmFqYXgody5leHRlbmQoe3VybDplLHR5cGU6dCxkYXRhVHlwZTppLGRhdGE6bixzdWNjZXNzOnJ9LHcuaXNQbGFpbk9iamVjdChlKSYmZSkpfX0pLHcuX2V2YWxVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHcuYWpheCh7dXJsOmUsdHlwZToiR0VUIixkYXRhVHlwZToic2NyaXB0IixjYWNoZTohMCxhc3luYzohMSxnbG9iYWw6ITEsInRocm93cyI6ITB9KX0sdy5mbi5leHRlbmQoe3dyYXBBbGw6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHRoaXNbMF0mJihnKGUpJiYoZT1lLmNhbGwodGhpc1swXSkpLHQ9dyhlLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmdC5pbnNlcnRCZWZvcmUodGhpc1swXSksdC5tYXAoZnVuY3Rpb24oKXt2YXIgZT10aGlzO3doaWxlKGUuZmlyc3RFbGVtZW50Q2hpbGQpZT1lLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBlfSkuYXBwZW5kKHRoaXMpKSx0aGlzfSx3cmFwSW5uZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGcoZSk/dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3codGhpcykud3JhcElubmVyKGUuY2FsbCh0aGlzLHQpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PXcodGhpcyksbj10LmNvbnRlbnRzKCk7bi5sZW5ndGg/bi53cmFwQWxsKGUpOnQuYXBwZW5kKGUpfSl9LHdyYXA6ZnVuY3Rpb24oZSl7dmFyIHQ9ZyhlKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKG4pe3codGhpcykud3JhcEFsbCh0P2UuY2FsbCh0aGlzLG4pOmUpfSl9LHVud3JhcDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wYXJlbnQoZSkubm90KCJib2R5IikuZWFjaChmdW5jdGlvbigpe3codGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLHRoaXN9fSksdy5leHByLnBzZXVkb3MuaGlkZGVuPWZ1bmN0aW9uKGUpe3JldHVybiF3LmV4cHIucHNldWRvcy52aXNpYmxlKGUpfSx3LmV4cHIucHNldWRvcy52aXNpYmxlPWZ1bmN0aW9uKGUpe3JldHVybiEhKGUub2Zmc2V0V2lkdGh8fGUub2Zmc2V0SGVpZ2h0fHxlLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKX0sdy5hamF4U2V0dGluZ3MueGhyPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBuZXcgZS5YTUxIdHRwUmVxdWVzdH1jYXRjaChlKXt9fTt2YXIgVnQ9ezA6MjAwLDEyMjM6MjA0fSxHdD13LmFqYXhTZXR0aW5ncy54aHIoKTtoLmNvcnM9ISFHdCYmIndpdGhDcmVkZW50aWFscyJpbiBHdCxoLmFqYXg9R3Q9ISFHdCx3LmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24odCl7dmFyIG4scjtpZihoLmNvcnN8fEd0JiYhdC5jcm9zc0RvbWFpbilyZXR1cm57c2VuZDpmdW5jdGlvbihpLG8pe3ZhciBhLHM9dC54aHIoKTtpZihzLm9wZW4odC50eXBlLHQudXJsLHQuYXN5bmMsdC51c2VybmFtZSx0LnBhc3N3b3JkKSx0LnhockZpZWxkcylmb3IoYSBpbiB0LnhockZpZWxkcylzW2FdPXQueGhyRmllbGRzW2FdO3QubWltZVR5cGUmJnMub3ZlcnJpZGVNaW1lVHlwZSYmcy5vdmVycmlkZU1pbWVUeXBlKHQubWltZVR5cGUpLHQuY3Jvc3NEb21haW58fGlbIlgtUmVxdWVzdGVkLVdpdGgiXXx8KGlbIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKTtmb3IoYSBpbiBpKXMuc2V0UmVxdWVzdEhlYWRlcihhLGlbYV0pO249ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7biYmKG49cj1zLm9ubG9hZD1zLm9uZXJyb3I9cy5vbmFib3J0PXMub250aW1lb3V0PXMub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsImFib3J0Ij09PWU/cy5hYm9ydCgpOiJlcnJvciI9PT1lPyJudW1iZXIiIT10eXBlb2Ygcy5zdGF0dXM/bygwLCJlcnJvciIpOm8ocy5zdGF0dXMscy5zdGF0dXNUZXh0KTpvKFZ0W3Muc3RhdHVzXXx8cy5zdGF0dXMscy5zdGF0dXNUZXh0LCJ0ZXh0IiE9PShzLnJlc3BvbnNlVHlwZXx8InRleHQiKXx8InN0cmluZyIhPXR5cGVvZiBzLnJlc3BvbnNlVGV4dD97YmluYXJ5OnMucmVzcG9uc2V9Ont0ZXh0OnMucmVzcG9uc2VUZXh0fSxzLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl9fSxzLm9ubG9hZD1uKCkscj1zLm9uZXJyb3I9cy5vbnRpbWVvdXQ9bigiZXJyb3IiKSx2b2lkIDAhPT1zLm9uYWJvcnQ/cy5vbmFib3J0PXI6cy5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09cy5yZWFkeVN0YXRlJiZlLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtuJiZyKCl9KX0sbj1uKCJhYm9ydCIpO3RyeXtzLnNlbmQodC5oYXNDb250ZW50JiZ0LmRhdGF8fG51bGwpfWNhdGNoKGUpe2lmKG4pdGhyb3cgZX19LGFib3J0OmZ1bmN0aW9uKCl7biYmbigpfX19KSx3LmFqYXhQcmVmaWx0ZXIoZnVuY3Rpb24oZSl7ZS5jcm9zc0RvbWFpbiYmKGUuY29udGVudHMuc2NyaXB0PSExKX0pLHcuYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0In0sY29udGVudHM6e3NjcmlwdDovXGIoPzpqYXZhfGVjbWEpc2NyaXB0XGIvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGUpe3JldHVybiB3Lmdsb2JhbEV2YWwoZSksZX19fSksdy5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUuY2FjaGUmJihlLmNhY2hlPSExKSxlLmNyb3NzRG9tYWluJiYoZS50eXBlPSJHRVQiKX0pLHcuYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihlKXtpZihlLmNyb3NzRG9tYWluKXt2YXIgdCxuO3JldHVybntzZW5kOmZ1bmN0aW9uKGksbyl7dD13KCI8c2NyaXB0PiIpLnByb3Aoe2NoYXJzZXQ6ZS5zY3JpcHRDaGFyc2V0LHNyYzplLnVybH0pLm9uKCJsb2FkIGVycm9yIixuPWZ1bmN0aW9uKGUpe3QucmVtb3ZlKCksbj1udWxsLGUmJm8oImVycm9yIj09PWUudHlwZT80MDQ6MjAwLGUudHlwZSl9KSxyLmhlYWQuYXBwZW5kQ2hpbGQodFswXSl9LGFib3J0OmZ1bmN0aW9uKCl7biYmbigpfX19fSk7dmFyIFl0PVtdLFF0PS8oPSlcPyg/PSZ8JCl8XD9cPy87dy5hamF4U2V0dXAoe2pzb25wOiJjYWxsYmFjayIsanNvbnBDYWxsYmFjazpmdW5jdGlvbigpe3ZhciBlPVl0LnBvcCgpfHx3LmV4cGFuZG8rIl8iK0V0Kys7cmV0dXJuIHRoaXNbZV09ITAsZX19KSx3LmFqYXhQcmVmaWx0ZXIoImpzb24ganNvbnAiLGZ1bmN0aW9uKHQsbixyKXt2YXIgaSxvLGEscz0hMSE9PXQuanNvbnAmJihRdC50ZXN0KHQudXJsKT8idXJsIjoic3RyaW5nIj09dHlwZW9mIHQuZGF0YSYmMD09PSh0LmNvbnRlbnRUeXBlfHwiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikmJlF0LnRlc3QodC5kYXRhKSYmImRhdGEiKTtpZihzfHwianNvbnAiPT09dC5kYXRhVHlwZXNbMF0pcmV0dXJuIGk9dC5qc29ucENhbGxiYWNrPWcodC5qc29ucENhbGxiYWNrKT90Lmpzb25wQ2FsbGJhY2soKTp0Lmpzb25wQ2FsbGJhY2sscz90W3NdPXRbc10ucmVwbGFjZShRdCwiJDEiK2kpOiExIT09dC5qc29ucCYmKHQudXJsKz0oa3QudGVzdCh0LnVybCk/IiYiOiI/IikrdC5qc29ucCsiPSIraSksdC5jb252ZXJ0ZXJzWyJzY3JpcHQganNvbiJdPWZ1bmN0aW9uKCl7cmV0dXJuIGF8fHcuZXJyb3IoaSsiIHdhcyBub3QgY2FsbGVkIiksYVswXX0sdC5kYXRhVHlwZXNbMF09Impzb24iLG89ZVtpXSxlW2ldPWZ1bmN0aW9uKCl7YT1hcmd1bWVudHN9LHIuYWx3YXlzKGZ1bmN0aW9uKCl7dm9pZCAwPT09bz93KGUpLnJlbW92ZVByb3AoaSk6ZVtpXT1vLHRbaV0mJih0Lmpzb25wQ2FsbGJhY2s9bi5qc29ucENhbGxiYWNrLFl0LnB1c2goaSkpLGEmJmcobykmJm8oYVswXSksYT1vPXZvaWQgMH0pLCJzY3JpcHQifSksaC5jcmVhdGVIVE1MRG9jdW1lbnQ9ZnVuY3Rpb24oKXt2YXIgZT1yLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikuYm9keTtyZXR1cm4gZS5pbm5lckhUTUw9Ijxmb3JtPjwvZm9ybT48Zm9ybT48L2Zvcm0+IiwyPT09ZS5jaGlsZE5vZGVzLmxlbmd0aH0oKSx3LnBhcnNlSFRNTD1mdW5jdGlvbihlLHQsbil7aWYoInN0cmluZyIhPXR5cGVvZiBlKXJldHVybltdOyJib29sZWFuIj09dHlwZW9mIHQmJihuPXQsdD0hMSk7dmFyIGksbyxhO3JldHVybiB0fHwoaC5jcmVhdGVIVE1MRG9jdW1lbnQ/KChpPSh0PXIuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKSkuY3JlYXRlRWxlbWVudCgiYmFzZSIpKS5ocmVmPXIubG9jYXRpb24uaHJlZix0LmhlYWQuYXBwZW5kQ2hpbGQoaSkpOnQ9ciksbz1BLmV4ZWMoZSksYT0hbiYmW10sbz9bdC5jcmVhdGVFbGVtZW50KG9bMV0pXToobz14ZShbZV0sdCxhKSxhJiZhLmxlbmd0aCYmdyhhKS5yZW1vdmUoKSx3Lm1lcmdlKFtdLG8uY2hpbGROb2RlcykpfSx3LmZuLmxvYWQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhPXRoaXMscz1lLmluZGV4T2YoIiAiKTtyZXR1cm4gcz4tMSYmKHI9dnQoZS5zbGljZShzKSksZT1lLnNsaWNlKDAscykpLGcodCk/KG49dCx0PXZvaWQgMCk6dCYmIm9iamVjdCI9PXR5cGVvZiB0JiYoaT0iUE9TVCIpLGEubGVuZ3RoPjAmJncuYWpheCh7dXJsOmUsdHlwZTppfHwiR0VUIixkYXRhVHlwZToiaHRtbCIsZGF0YTp0fSkuZG9uZShmdW5jdGlvbihlKXtvPWFyZ3VtZW50cyxhLmh0bWwocj93KCI8ZGl2PiIpLmFwcGVuZCh3LnBhcnNlSFRNTChlKSkuZmluZChyKTplKX0pLmFsd2F5cyhuJiZmdW5jdGlvbihlLHQpe2EuZWFjaChmdW5jdGlvbigpe24uYXBwbHkodGhpcyxvfHxbZS5yZXNwb25zZVRleHQsdCxlXSl9KX0pLHRoaXN9LHcuZWFjaChbImFqYXhTdGFydCIsImFqYXhTdG9wIiwiYWpheENvbXBsZXRlIiwiYWpheEVycm9yIiwiYWpheFN1Y2Nlc3MiLCJhamF4U2VuZCJdLGZ1bmN0aW9uKGUsdCl7dy5mblt0XT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vbih0LGUpfX0pLHcuZXhwci5wc2V1ZG9zLmFuaW1hdGVkPWZ1bmN0aW9uKGUpe3JldHVybiB3LmdyZXAody50aW1lcnMsZnVuY3Rpb24odCl7cmV0dXJuIGU9PT10LmVsZW19KS5sZW5ndGh9LHcub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsLGM9dy5jc3MoZSwicG9zaXRpb24iKSxmPXcoZSkscD17fTsic3RhdGljIj09PWMmJihlLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSIpLHM9Zi5vZmZzZXQoKSxvPXcuY3NzKGUsInRvcCIpLHU9dy5jc3MoZSwibGVmdCIpLChsPSgiYWJzb2x1dGUiPT09Y3x8ImZpeGVkIj09PWMpJiYobyt1KS5pbmRleE9mKCJhdXRvIik+LTEpPyhhPShyPWYucG9zaXRpb24oKSkudG9wLGk9ci5sZWZ0KTooYT1wYXJzZUZsb2F0KG8pfHwwLGk9cGFyc2VGbG9hdCh1KXx8MCksZyh0KSYmKHQ9dC5jYWxsKGUsbix3LmV4dGVuZCh7fSxzKSkpLG51bGwhPXQudG9wJiYocC50b3A9dC50b3Atcy50b3ArYSksbnVsbCE9dC5sZWZ0JiYocC5sZWZ0PXQubGVmdC1zLmxlZnQraSksInVzaW5nImluIHQ/dC51c2luZy5jYWxsKGUscCk6Zi5jc3MocCl9fSx3LmZuLmV4dGVuZCh7b2Zmc2V0OmZ1bmN0aW9uKGUpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHZvaWQgMD09PWU/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24odCl7dy5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsZSx0KX0pO3ZhciB0LG4scj10aGlzWzBdO2lmKHIpcmV0dXJuIHIuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGg/KHQ9ci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxuPXIub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldyx7dG9wOnQudG9wK24ucGFnZVlPZmZzZXQsbGVmdDp0LmxlZnQrbi5wYWdlWE9mZnNldH0pOnt0b3A6MCxsZWZ0OjB9fSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBlLHQsbixyPXRoaXNbMF0saT17dG9wOjAsbGVmdDowfTtpZigiZml4ZWQiPT09dy5jc3MociwicG9zaXRpb24iKSl0PXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7ZWxzZXt0PXRoaXMub2Zmc2V0KCksbj1yLm93bmVyRG9jdW1lbnQsZT1yLm9mZnNldFBhcmVudHx8bi5kb2N1bWVudEVsZW1lbnQ7d2hpbGUoZSYmKGU9PT1uLmJvZHl8fGU9PT1uLmRvY3VtZW50RWxlbWVudCkmJiJzdGF0aWMiPT09dy5jc3MoZSwicG9zaXRpb24iKSllPWUucGFyZW50Tm9kZTtlJiZlIT09ciYmMT09PWUubm9kZVR5cGUmJigoaT13KGUpLm9mZnNldCgpKS50b3ArPXcuY3NzKGUsImJvcmRlclRvcFdpZHRoIiwhMCksaS5sZWZ0Kz13LmNzcyhlLCJib3JkZXJMZWZ0V2lkdGgiLCEwKSl9cmV0dXJue3RvcDp0LnRvcC1pLnRvcC13LmNzcyhyLCJtYXJnaW5Ub3AiLCEwKSxsZWZ0OnQubGVmdC1pLmxlZnQtdy5jc3MociwibWFyZ2luTGVmdCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXMub2Zmc2V0UGFyZW50O3doaWxlKGUmJiJzdGF0aWMiPT09dy5jc3MoZSwicG9zaXRpb24iKSllPWUub2Zmc2V0UGFyZW50O3JldHVybiBlfHxiZX0pfX0pLHcuZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbihlLHQpe3ZhciBuPSJwYWdlWU9mZnNldCI9PT10O3cuZm5bZV09ZnVuY3Rpb24ocil7cmV0dXJuIHoodGhpcyxmdW5jdGlvbihlLHIsaSl7dmFyIG87aWYoeShlKT9vPWU6OT09PWUubm9kZVR5cGUmJihvPWUuZGVmYXVsdFZpZXcpLHZvaWQgMD09PWkpcmV0dXJuIG8/b1t0XTplW3JdO28/by5zY3JvbGxUbyhuP28ucGFnZVhPZmZzZXQ6aSxuP2k6by5wYWdlWU9mZnNldCk6ZVtyXT1pfSxlLHIsYXJndW1lbnRzLmxlbmd0aCl9fSksdy5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGUsdCl7dy5jc3NIb29rc1t0XT1fZShoLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oZSxuKXtpZihuKXJldHVybiBuPUZlKGUsdCksV2UudGVzdChuKT93KGUpLnBvc2l0aW9uKClbdF0rInB4IjpufSl9KSx3LmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihlLHQpe3cuZWFjaCh7cGFkZGluZzoiaW5uZXIiK2UsY29udGVudDp0LCIiOiJvdXRlciIrZX0sZnVuY3Rpb24obixyKXt3LmZuW3JdPWZ1bmN0aW9uKGksbyl7dmFyIGE9YXJndW1lbnRzLmxlbmd0aCYmKG58fCJib29sZWFuIiE9dHlwZW9mIGkpLHM9bnx8KCEwPT09aXx8ITA9PT1vPyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4geih0aGlzLGZ1bmN0aW9uKHQsbixpKXt2YXIgbztyZXR1cm4geSh0KT8wPT09ci5pbmRleE9mKCJvdXRlciIpP3RbImlubmVyIitlXTp0LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsiY2xpZW50IitlXTo5PT09dC5ub2RlVHlwZT8obz10LmRvY3VtZW50RWxlbWVudCxNYXRoLm1heCh0LmJvZHlbInNjcm9sbCIrZV0sb1sic2Nyb2xsIitlXSx0LmJvZHlbIm9mZnNldCIrZV0sb1sib2Zmc2V0IitlXSxvWyJjbGllbnQiK2VdKSk6dm9pZCAwPT09aT93LmNzcyh0LG4scyk6dy5zdHlsZSh0LG4saSxzKX0sdCxhP2k6dm9pZCAwLGEpfX0pfSksdy5lYWNoKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgcmVzaXplIHNjcm9sbCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGNvbnRleHRtZW51Ii5zcGxpdCgiICIpLGZ1bmN0aW9uKGUsdCl7dy5mblt0XT1mdW5jdGlvbihlLG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbih0LG51bGwsZSxuKTp0aGlzLnRyaWdnZXIodCl9fSksdy5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubW91c2VlbnRlcihlKS5tb3VzZWxlYXZlKHR8fGUpfX0pLHcuZm4uZXh0ZW5kKHtiaW5kOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5vbihlLG51bGwsdCxuKX0sdW5iaW5kOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMub2ZmKGUsbnVsbCx0KX0sZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMub24odCxlLG4scil9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihlLCIqKiIpOnRoaXMub2ZmKHQsZXx8IioqIixuKX19KSx3LnByb3h5PWZ1bmN0aW9uKGUsdCl7dmFyIG4scixpO2lmKCJzdHJpbmciPT10eXBlb2YgdCYmKG49ZVt0XSx0PWUsZT1uKSxnKGUpKXJldHVybiByPW8uY2FsbChhcmd1bWVudHMsMiksaT1mdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHR8fHRoaXMsci5jb25jYXQoby5jYWxsKGFyZ3VtZW50cykpKX0saS5ndWlkPWUuZ3VpZD1lLmd1aWR8fHcuZ3VpZCsrLGl9LHcuaG9sZFJlYWR5PWZ1bmN0aW9uKGUpe2U/dy5yZWFkeVdhaXQrKzp3LnJlYWR5KCEwKX0sdy5pc0FycmF5PUFycmF5LmlzQXJyYXksdy5wYXJzZUpTT049SlNPTi5wYXJzZSx3Lm5vZGVOYW1lPU4sdy5pc0Z1bmN0aW9uPWcsdy5pc1dpbmRvdz15LHcuY2FtZWxDYXNlPUcsdy50eXBlPXgsdy5ub3c9RGF0ZS5ub3csdy5pc051bWVyaWM9ZnVuY3Rpb24oZSl7dmFyIHQ9dy50eXBlKGUpO3JldHVybigibnVtYmVyIj09PXR8fCJzdHJpbmciPT09dCkmJiFpc05hTihlLXBhcnNlRmxvYXQoZSkpfSwiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4gd30pO3ZhciBKdD1lLmpRdWVyeSxLdD1lLiQ7cmV0dXJuIHcubm9Db25mbGljdD1mdW5jdGlvbih0KXtyZXR1cm4gZS4kPT09dyYmKGUuJD1LdCksdCYmZS5qUXVlcnk9PT13JiYoZS5qUXVlcnk9SnQpLHd9LHR8fChlLmpRdWVyeT1lLiQ9dyksd30pOwo="}]}],"settings":{"script_blacklist_server":[{"severity":"2","rules":["/https?:\\/\\/userscripts\\.org\\/scripts\\/(source|version)/(102614).*\\.user\\.js/"]},{"name":"SaveFrom.net helper","severity":"3","rules":["/https?:\\/\\/sf-addon\\.com\\/.*\\/.*\\.user\\.js/","/https?:\\/\\/.*\\.sf-helper\\.com\\/.*\\.user\\.js/"],"reason":"Shows advertisements"},{"severity":"8","reasons":{"en":"Used for a phishing compain to compromise users of baon-nutrition.com"},"rules":["/https?:\\/\\/files\\.ulysse\\.travel\\/.*\\.user\\.js/"]}]}}